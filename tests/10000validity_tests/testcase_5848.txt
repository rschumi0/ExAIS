import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc88517 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con75542 = tf.keras.layers.Input(shape=([1, 2, 5, 1]))
in0Max15601 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Max15601 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Loc88517 = keras.layers.LocallyConnected2D(3, (1, 1),strides=(1, 1), name = 'Loc88517', )(in0Loc88517)
Res41380 = keras.layers.Reshape((1, 1, 3, 1), name = 'Res41380', )(Loc88517)
Zer50420 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (2, 0)), name = 'Zer50420', )(Res41380)
Con75542 = keras.layers.Concatenate(axis=4, name = 'Con75542', )([Zer50420,in0Con75542])
Max15601 = keras.layers.Maximum(name = 'Max15601', )([in0Max15601,in1Max15601])
Zer92051 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (4, 0)), name = 'Zer92051', )(Max15601)
Min15243 = keras.layers.Minimum(name = 'Min15243', )([Con75542,Zer92051])
model = tf.keras.models.Model(inputs=[in0Loc88517,in0Con75542,in0Max15601,in1Max15601], outputs=Min15243)
w = model.get_layer('Loc88517').get_weights() 
w[0] = np.array([[[0.6614, 0.9559, 0.7214], [0.55, 0.2772, 0.5646]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc88517').set_weights(w) 
in0Loc88517 = tf.constant([[[[0.2798, 0.0891]]]])
in0Con75542 = tf.constant([[[[[0.9746], [0.3954], [0.0496], [0.5923], [0.4982]], [[0.1096], [0.8531], [0.2302], [0.8499], [0.5878]]]]])
in0Max15601 = tf.constant([[[[[0.5342, 0.6269]], [[0.7249, 0.9916]]]]])
in1Max15601 = tf.constant([[[[[0.7054, 0.3986]], [[0.8038, 0.4379]]]]])
print (np.array2string(model.predict([in0Loc88517,in0Con75542,in0Max15601,in1Max15601],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min15243.png')

LLoc88517 = locally_connected2D_layer([[[[0.2798, 0.0891]]]], 1, 1,[[[0.6614, 0.9559, 0.7214], [0.55, 0.2772, 0.5646]]],[[[0, 0, 0]]], 1, 1, Loc88517), 
LRes41380 = reshape_layer(Loc88517, [1, 1, 3, 1], Res41380), 
LZer50420 = zero_padding3D_layer(Res41380, 0, 0, 1, 0, 2, 0, Zer50420), 
LCon75542 = concatenate_layer([Zer50420,[[[[[0.9746], [0.3954], [0.0496], [0.5923], [0.4982]], [[0.1096], [0.8531], [0.2302], [0.8499], [0.5878]]]]]], 4, Con75542), 
LMax15601 = maximum_layer([[[[[[0.5342, 0.6269]], [[0.7249, 0.9916]]]]], [[[[[0.7054, 0.3986]], [[0.8038, 0.4379]]]]]], Max15601), 
LZer92051 = zero_padding3D_layer(Max15601, 0, 0, 0, 0, 4, 0, Zer92051), 
LMin15243 = minimum_layer([Con75542,Zer92051], Min15243), 
exec_layers([LLoc88517,LRes41380,LZer50420,LCon75542,LMax15601,LZer92051,LMin15243],["Loc88517","Res41380","Zer50420","Con75542","Max15601","Zer92051","Min15243"],Min15243,"Min15243")

Actual (Unparsed): [[[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.4982000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.2521536, 0.5878000]]]]]

Expected (Unparsed): [[[[[0,0],[0,0],[0,0],[0,0],[0,0.4982]],[[0,0],[0,0],[0,0],[0,0],[0.25215358,0.5878]]]]]

Actual:   [[[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0.4982]], [[0, 0], [0, 0], [0, 0], [0, 0], [0.2522, 0.5878]]]]]

Expected: [[[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0.4982]], [[0, 0], [0, 0], [0, 0], [0, 0], [0.2522, 0.5878]]]]]