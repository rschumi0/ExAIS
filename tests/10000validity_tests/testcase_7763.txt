import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot4553 = tf.keras.layers.Input(shape=([3]))
in1Dot4553 = tf.keras.layers.Input(shape=([3]))
in0Con88079 = tf.keras.layers.Input(shape=([2, 1]))
in0Ave35800 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave35800 = tf.keras.layers.Input(shape=([2, 2]))

Dot4553 = keras.layers.Dot(axes=(1, 1), name = 'Dot4553', )([in0Dot4553,in1Dot4553])
Res73109 = keras.layers.Reshape((1, 1), name = 'Res73109', )(Dot4553)
Zer54659 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer54659', )(Res73109)
Con88079 = keras.layers.Concatenate(axis=2, name = 'Con88079', )([Zer54659,in0Con88079])
Ave35800 = keras.layers.Average(name = 'Ave35800', )([in0Ave35800,in1Ave35800])
Mul30172 = keras.layers.Multiply(name = 'Mul30172', )([Con88079,Ave35800])
model = tf.keras.models.Model(inputs=[in0Dot4553,in1Dot4553,in0Con88079,in0Ave35800,in1Ave35800], outputs=Mul30172)
in0Dot4553 = tf.constant([[0.6648, 0.9698, 0.4015]])
in1Dot4553 = tf.constant([[0.2749, 0.4677, 0.866]])
in0Con88079 = tf.constant([[[0.7247], [0.7691]]])
in0Ave35800 = tf.constant([[[0.4934, 0.9315], [0.1817, 0.8132]]])
in1Ave35800 = tf.constant([[[0.3853, 0.7457], [0.1578, 0.1905]]])
print (np.array2string(model.predict([in0Dot4553,in1Dot4553,in0Con88079,in0Ave35800,in1Ave35800],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul30172.png')

LDot4553 = dot_layer([[0.6648, 0.9698, 0.4015]], [[0.2749, 0.4677, 0.866]], 1, 1, Dot4553), 
LRes73109 = reshape_layer(Dot4553, [1, 1], Res73109), 
LZer54659 = zero_padding1D_layer(Res73109, 1, 0, Zer54659), 
LCon88079 = concatenate_layer([Zer54659,[[[0.7247], [0.7691]]]], 2, Con88079), 
LAve35800 = average_layer([[[[0.4934, 0.9315], [0.1817, 0.8132]]], [[[0.3853, 0.7457], [0.1578, 0.1905]]]], Ave35800), 
LMul30172 = multiply_layer([Con88079,Ave35800], Mul30172), 
exec_layers([LDot4553,LRes73109,LZer54659,LCon88079,LAve35800,LMul30172],["Dot4553","Res73109","Zer54659","Con88079","Ave35800","Mul30172"],Mul30172,"Mul30172")

Actual (Unparsed): [[[0.0000000, 0.6077334], [0.1670388, 0.3859728]]]

Expected (Unparsed): [[[0.0,0.60773342],[0.167038749605,0.385972835]]]

Actual:   [[[0, 0.6078], [0.1671, 0.386]]]

Expected: [[[0, 0.6078], [0.1671, 0.386]]]