import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave88646 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Ave88646 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave91668 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave91668 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Ave46503 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave46503 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Sub92979 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub92979 = tf.keras.layers.Input(shape=([3, 2]))
in0Con44348 = tf.keras.layers.Input(shape=([3, 2]))

Ave88646 = keras.layers.Average(name = 'Ave88646', )([in0Ave88646,in1Ave88646])
Res59301 = keras.layers.Reshape((2, 2, 2), name = 'Res59301', )(Ave88646)
Ave91668 = keras.layers.Average(name = 'Ave91668', )([in0Ave91668,in1Ave91668])
Zer61196 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer61196', )(Ave91668)
Ave46503 = keras.layers.Average(name = 'Ave46503', )([in0Ave46503,in1Ave46503])
Ave56515 = keras.layers.Average(name = 'Ave56515', )([Zer61196,Ave46503])
Zer41375 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer41375', )(Ave56515)
Min87060 = keras.layers.Minimum(name = 'Min87060', )([Res59301,Zer41375])
Res33668 = keras.layers.Reshape((2, 4), name = 'Res33668', )(Min87060)
Zer94337 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer94337', )(Res33668)
Sub92979 = keras.layers.Subtract(name = 'Sub92979', )([in0Sub92979,in1Sub92979])
Con44348 = keras.layers.Concatenate(axis=2, name = 'Con44348', )([Sub92979,in0Con44348])
Ave56018 = keras.layers.Average(name = 'Ave56018', )([Zer94337,Con44348])
model = tf.keras.models.Model(inputs=[in0Ave88646,in1Ave88646,in0Ave91668,in1Ave91668,in0Ave46503,in1Ave46503,in0Sub92979,in1Sub92979,in0Con44348], outputs=Ave56018)
in0Ave88646 = tf.constant([[[[[0.9996], [0.9552]], [[0.7528], [0.2207]]], [[[0.5167], [0.3651]], [[0.0249], [0.5189]]]]])
in1Ave88646 = tf.constant([[[[[0.9778], [0.023]], [[0.2759], [0.3081]]], [[[0.495], [0.6515]], [[0.0982], [0.7761]]]]])
in0Ave91668 = tf.constant([[[[0.8195, 0.4677]]]])
in1Ave91668 = tf.constant([[[[0.2568, 0.1522]]]])
in0Ave46503 = tf.constant([[[[0.8702, 0.5746], [0.9904, 0.2113]]]])
in1Ave46503 = tf.constant([[[[0.8998, 0.8535], [0.6618, 0.4324]]]])
in0Sub92979 = tf.constant([[[0.8344, 0.8133], [0.0415, 0.1126], [0.1732, 0.4555]]])
in1Sub92979 = tf.constant([[[0.6886, 0.7962], [0.5902, 0.9783], [0.4745, 0.0933]]])
in0Con44348 = tf.constant([[[0.1908, 0.0013], [0.2373, 0.9812], [0.0539, 0.2841]]])
print (np.array2string(model.predict([in0Ave88646,in1Ave88646,in0Ave91668,in1Ave91668,in0Ave46503,in1Ave46503,in0Sub92979,in1Sub92979,in0Con44348],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave56018.png')

LAve88646 = average_layer([[[[[[0.9996], [0.9552]], [[0.7528], [0.2207]]], [[[0.5167], [0.3651]], [[0.0249], [0.5189]]]]], [[[[[0.9778], [0.023]], [[0.2759], [0.3081]]], [[[0.495], [0.6515]], [[0.0982], [0.7761]]]]]], Ave88646), 
LRes59301 = reshape_layer(Ave88646, [2, 2, 2], Res59301), 
LAve91668 = average_layer([[[[[0.8195, 0.4677]]]], [[[[0.2568, 0.1522]]]]], Ave91668), 
LZer61196 = zero_padding2D_layer(Ave91668, 0, 0, 1, 0, Zer61196), 
LAve46503 = average_layer([[[[[0.8702, 0.5746], [0.9904, 0.2113]]]], [[[[0.8998, 0.8535], [0.6618, 0.4324]]]]], Ave46503), 
LAve56515 = average_layer([Zer61196,Ave46503], Ave56515), 
LZer41375 = zero_padding2D_layer(Ave56515, 1, 0, 0, 0, Zer41375), 
LMin87060 = minimum_layer([Res59301,Zer41375], Min87060), 
LRes33668 = reshape_layer(Min87060, [2, 4], Res33668), 
LZer94337 = zero_padding1D_layer(Res33668, 1, 0, Zer94337), 
LSub92979 = subtract_layer([[[0.8344, 0.8133], [0.0415, 0.1126], [0.1732, 0.4555]]], [[[0.6886, 0.7962], [0.5902, 0.9783], [0.4745, 0.0933]]], Sub92979), 
LCon44348 = concatenate_layer([Sub92979,[[[0.1908, 0.0013], [0.2373, 0.9812], [0.0539, 0.2841]]]], 2, Con44348), 
LAve56018 = average_layer([Zer94337,Con44348], Ave56018), 
exec_layers([LAve88646,LRes59301,LAve91668,LZer61196,LAve46503,LAve56515,LZer41375,LMin87060,LRes33668,LZer94337,LSub92979,LCon44348,LAve56018],["Ave88646","Res59301","Ave91668","Zer61196","Ave46503","Ave56515","Zer41375","Min87060","Res33668","Zer94337","Sub92979","Con44348","Ave56018"],Ave56018,"Ave56018")

Actual (Unparsed): [[[0.0729000, 0.0085500, 0.0954000, 0.0006500], [-0.2743500, -0.4328500, 0.1186500, 0.4906000], [0.0706000, 0.3596125, 0.0577250, 0.3000000]]]

Expected (Unparsed): [[[0.07290000000000002,0.008550000000000002,0.0954,0.00065],[-0.27435,-0.43284999999999996,0.11865,0.4906],[0.0706,0.3596125,0.057725,0.3]]]

Actual:   [[[0.0729, 0.0086, 0.0954, 0.0007], [-0.2743, -0.4328, 0.1187, 0.4906], [0.0706, 0.3597, 0.0578, 0.3]]]

Expected: [[[0.073, 0.0086, 0.0954, 0.0007], [-0.2743, -0.4328, 0.1187, 0.4906], [0.0706, 0.3597, 0.0578, 0.3]]]