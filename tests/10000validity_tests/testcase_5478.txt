import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo33301 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Glo33301 = keras.layers.GlobalAveragePooling3D(name = 'Glo33301', )(in0Glo33301)
Sof38472 = keras.layers.Softmax(axis=1, name = 'Sof38472', )(Glo33301)
Res23989 = keras.layers.Reshape((1, 1), name = 'Res23989', )(Sof38472)
Per43187 = keras.layers.Permute((1,2), name = 'Per43187',)(Res23989)
model = tf.keras.models.Model(inputs=[in0Glo33301], outputs=Per43187)
in0Glo33301 = tf.constant([[[[[1.6364]], [[1.3687]]]]])
print (np.array2string(model.predict([in0Glo33301],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per43187.png')

LGlo33301 = global_average_pooling3D_layer([[[[[1.6364]], [[1.3687]]]]], Glo33301), 
LSof38472 = softmax_layer(Glo33301, 1, Sof38472), 
LRes23989 = reshape_layer(Sof38472, [1, 1], Res23989), 
LPer43187 = permute_layer(Res23989, 1,2, Per43187), 
exec_layers([LGlo33301,LSof38472,LRes23989,LPer43187],["Glo33301","Sof38472","Res23989","Per43187"],Per43187,"Per43187")

Actual (Unparsed): [[[1.0000000]]]

Expected (Unparsed): [[[1.0]]]

Actual:   [[[1]]]

Expected: [[[1]]]