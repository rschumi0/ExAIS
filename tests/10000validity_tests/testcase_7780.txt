import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla44583 = tf.keras.layers.Input(shape=([3, 4]))

Fla44583 = keras.layers.Flatten(name = 'Fla44583', )(in0Fla44583)
Res91630 = keras.layers.Reshape((12, 1), name = 'Res91630', )(Fla44583)
Sep78204 = keras.layers.SeparableConv1D(4, (12),strides=(4), padding='valid', name = 'Sep78204', )(Res91630)
Res46283 = keras.layers.Reshape((1, 4, 1), name = 'Res46283', )(Sep78204)
Res60310 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res60310', )(Res46283)
Con30200 = keras.layers.Conv3DTranspose(3, (1, 3, 1),strides=(1, 1, 1), padding='valid', name = 'Con30200', )(Res60310)
model = tf.keras.models.Model(inputs=[in0Fla44583], outputs=Con30200)
w = model.get_layer('Sep78204').get_weights() 
w[0] = np.array([[[0.0841]], [[0.8943]], [[0.4764]], [[0.297]], [[0.3747]], [[0.7534]], [[0.676]], [[0.9775]], [[0.1904]], [[0.4629]], [[0.5222]], [[0.0217]]])
w[1] = np.array([[[0.3911, 0.859, 0.9701, 0.4254]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep78204').set_weights(w) 
w = model.get_layer('Con30200').get_weights() 
w[0] = np.array([[[[[0.6733], [0.8922], [0.7241]]], [[[0.5265], [0.0739], [0.3674]]], [[[0.6558], [0.2738], [0.278]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con30200').set_weights(w) 
in0Fla44583 = tf.constant([[[1.851, 1.424, 1.2772, 1.0376], [1.0777, 1.3129, 1.6388, 1.3965], [1.8165, 1.4859, 1.6704, 1.0687]]])
print (np.array2string(model.predict([in0Fla44583],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con30200.png')

LFla44583 = flatten_layer([[[1.851, 1.424, 1.2772, 1.0376], [1.0777, 1.3129, 1.6388, 1.3965], [1.8165, 1.4859, 1.6704, 1.0687]]], Fla44583), 
LRes91630 = reshape_layer(Fla44583, [12, 1], Res91630), 
LSep78204 = separable_conv1D_layer(Res91630, 12,[[[[0.0841]], [[0.8943]], [[0.4764]], [[0.297]], [[0.3747]], [[0.7534]], [[0.676]], [[0.9775]], [[0.1904]], [[0.4629]], [[0.5222]], [[0.0217]]],[[[0.3911, 0.859, 0.9701, 0.4254]]]],[0, 0, 0, 0], 4, false, Sep78204), 
LRes46283 = reshape_layer(Sep78204, [1, 4, 1], Res46283), 
LRes60310 = reshape_layer(Res46283, [1, 4, 1, 1], Res60310), 
LCon30200 = conv3D_transpose_layer(Res60310, 1, 3, 1,[[[[[0.6733], [0.8922], [0.7241]]], [[[0.5265], [0.0739], [0.3674]]], [[[0.6558], [0.2738], [0.278]]]]],[0, 0, 0], 1, 1, 1, false, Con30200), 
exec_layers([LFla44583,LRes91630,LSep78204,LRes46283,LRes60310,LCon30200],["Fla44583","Res91630","Sep78204","Res46283","Res60310","Con30200"],Con30200,"Con30200")

Actual (Unparsed): [[[[[2.1436967, 2.8406448, 2.3054370]], [[6.3846546, 6.4743925, 6.2333431]], [[11.0870747, 8.4345694, 9.1728201]], [[11.0756488, 5.5880583, 7.3531654]], [[7.0024257, 2.4182272, 3.4678146]], [[2.2710976, 0.9481954, 0.9627404]]]]]

Expected (Unparsed): [[[[[2.143696664456953,2.8406448299843956,2.3054370336154455]],[[6.384654564160756,6.47439251843281,6.233343125251381]],[[11.087074656579677,8.434569415062441,9.172820074752973]],[[11.075648722975854,5.588058245668943,7.353165375127852]],[[7.002425667977501,2.418227200098486,3.467814564837626]],[[2.271097606974019,0.9481953717436511,0.962740370141472]]]]]

Actual:   [[[[[2.1437, 2.8407, 2.3055]], [[6.3847, 6.4744, 6.2334]], [[11.0871, 8.4346, 9.1729]], [[11.0757, 5.5881, 7.3532]], [[7.0025, 2.4183, 3.4679]], [[2.2711, 0.9482, 0.9628]]]]]

Expected: [[[[[2.1437, 2.8407, 2.3055]], [[6.3847, 6.4744, 6.2334]], [[11.0871, 8.4346, 9.1729]], [[11.0757, 5.5881, 7.3532]], [[7.0025, 2.4183, 3.4679]], [[2.2711, 0.9482, 0.9628]]]]]