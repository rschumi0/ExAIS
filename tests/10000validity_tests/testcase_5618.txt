import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave88716 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con91178 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave79658 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave79658 = tf.keras.layers.Input(shape=([1, 2]))

Ave88716 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 1), padding='valid', name = 'Ave88716', )(in0Ave88716)
Glo93987 = keras.layers.GlobalMaxPool2D(name = 'Glo93987', )(Ave88716)
Res85063 = keras.layers.Reshape((1, 1), name = 'Res85063', )(Glo93987)
Con91178 = keras.layers.Concatenate(axis=2, name = 'Con91178', )([Res85063,in0Con91178])
Ave79658 = keras.layers.Average(name = 'Ave79658', )([in0Ave79658,in1Ave79658])
Max77185 = keras.layers.Maximum(name = 'Max77185', )([Con91178,Ave79658])
Sep10085 = keras.layers.SeparableConv1D(4, (1),strides=(1), padding='same', name = 'Sep10085', )(Max77185)
model = tf.keras.models.Model(inputs=[in0Ave88716,in0Con91178,in0Ave79658,in1Ave79658], outputs=Sep10085)
w = model.get_layer('Sep10085').get_weights() 
w[0] = np.array([[[0.2096], [0.4978]]])
w[1] = np.array([[[0.4407, 0.037, 0.702, 0.3107], [0.5495, 0.9281, 0.4463, 0.598]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep10085').set_weights(w) 
in0Ave88716 = tf.constant([[[[1.1173], [1.0758]]]])
in0Con91178 = tf.constant([[[0.5658]]])
in0Ave79658 = tf.constant([[[0.1771, 0.3344]]])
in1Ave79658 = tf.constant([[[0.7623, 0.536]]])
print (np.array2string(model.predict([in0Ave88716,in0Con91178,in0Ave79658,in1Ave79658],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep10085.png')

LAve88716 = average_pooling2D_layer([[[[1.1173], [1.0758]]]], 1, 2, 1, 1, false, Ave88716), 
LGlo93987 = global_max_pool2D_layer(Ave88716, Glo93987), 
LRes85063 = reshape_layer(Glo93987, [1, 1], Res85063), 
LCon91178 = concatenate_layer([Res85063,[[[0.5658]]]], 2, Con91178), 
LAve79658 = average_layer([[[[0.1771, 0.3344]]], [[[0.7623, 0.536]]]], Ave79658), 
LMax77185 = maximum_layer([Con91178,Ave79658], Max77185), 
LSep10085 = separable_conv1D_layer(Max77185, 1,[[[[0.2096], [0.4978]]],[[[0.4407, 0.037, 0.702, 0.3107], [0.5495, 0.9281, 0.4463, 0.598]]]],[0, 0, 0, 0], 1, true, Sep10085), 
exec_layers([LAve88716,LGlo93987,LRes85063,LCon91178,LAve79658,LMax77185,LSep10085],["Ave88716","Glo93987","Res85063","Con91178","Ave79658","Max77185","Sep10085"],Sep10085,"Sep10085")

Actual (Unparsed): [[[0.2560587, 0.2699082, 0.2870482, 0.2398402]]]

Expected (Unparsed): [[[0.25605866739600003,0.269908192804,0.287048223372,0.23984015213600002]]]

Actual:   [[[0.2561, 0.27, 0.2871, 0.2399]]]

Expected: [[[0.2561, 0.27, 0.2871, 0.2399]]]