import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro59419 = tf.keras.layers.Input(shape=([4, 4]))
in0Con79106 = tf.keras.layers.Input(shape=([1, 4, 1]))
in0Ave57916 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Ave57916 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Cro59419 = keras.layers.Cropping1D(cropping=((3, 0)), name = 'Cro59419', )(in0Cro59419)
Lay48402 = keras.layers.LayerNormalization(axis=1, epsilon=2.8312936752019873, name = 'Lay48402', )(Cro59419)
Res15175 = keras.layers.Reshape((1, 4, 1), name = 'Res15175', )(Lay48402)
Con79106 = keras.layers.Concatenate(axis=3, name = 'Con79106', )([Res15175,in0Con79106])
Ave57916 = keras.layers.Average(name = 'Ave57916', )([in0Ave57916,in1Ave57916])
Res40769 = keras.layers.Reshape((1, 1, 2), name = 'Res40769', )(Ave57916)
Ave4124 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave4124', )(Res40769)
Zer41021 = keras.layers.ZeroPadding2D(padding=((0, 0), (3, 0)), name = 'Zer41021', )(Ave4124)
Add26340 = keras.layers.Add(name = 'Add26340', )([Con79106,Zer41021])
model = tf.keras.models.Model(inputs=[in0Cro59419,in0Con79106,in0Ave57916,in1Ave57916], outputs=Add26340)
in0Cro59419 = tf.constant([[[1.2115, 1.4018, 1.1365, 1.3329], [1.1754, 1.9055, 1.0951, 1.8272], [1.7594, 1.9588, 1.8117, 1.5326], [1.3229, 1.5028, 1.7039, 1.3645]]])
in0Con79106 = tf.constant([[[[0.155], [0.524], [0.3639], [0.8113]]]])
in0Ave57916 = tf.constant([[[[[0.4292], [0.0295]]]]])
in1Ave57916 = tf.constant([[[[[0.6585], [0.1624]]]]])
print (np.array2string(model.predict([in0Cro59419,in0Con79106,in0Ave57916,in1Ave57916],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add26340.png')

LCro59419 = cropping1D_layer([[[1.2115, 1.4018, 1.1365, 1.3329], [1.1754, 1.9055, 1.0951, 1.8272], [1.7594, 1.9588, 1.8117, 1.5326], [1.3229, 1.5028, 1.7039, 1.3645]]], 3, 0, Cro59419), 
LLay48402 = layer_normalization_layer(Cro59419, 1, 2.8312936752019873, Lay48402), 
LRes15175 = reshape_layer(Lay48402, [1, 4, 1], Res15175), 
LCon79106 = concatenate_layer([Res15175,[[[[0.155], [0.524], [0.3639], [0.8113]]]]], 3, Con79106), 
LAve57916 = average_layer([[[[[[0.4292], [0.0295]]]]], [[[[[0.6585], [0.1624]]]]]], Ave57916), 
LRes40769 = reshape_layer(Ave57916, [1, 1, 2], Res40769), 
LAve4124 = average_pooling2D_layer(Res40769, 1, 1, Ave4124), 
LZer41021 = zero_padding2D_layer(Ave4124, 0, 0, 3, 0, Zer41021), 
LAdd26340 = add_layer([Con79106,Zer41021], Add26340), 
exec_layers([LCro59419,LLay48402,LRes15175,LCon79106,LAve57916,LRes40769,LAve4124,LZer41021,LAdd26340],["Cro59419","Lay48402","Res15175","Con79106","Ave57916","Res40769","Ave4124","Zer41021","Add26340"],Add26340,"Add26340")

Actual (Unparsed): [[[[0.0000000, 0.1550000], [0.0000000, 0.5240000], [0.0000000, 0.3639000], [0.5438500, 0.9072500]]]]

Expected (Unparsed): [[[[0.0,0.155],[0.0,0.524],[0.0,0.3639],[0.54385,0.90725]]]]

Actual:   [[[[0, 0.155], [0, 0.524], [0, 0.3639], [0.5439, 0.9073]]]]

Expected: [[[[0, 0.155], [0, 0.524], [0, 0.3639], [0.5439, 0.9073]]]]