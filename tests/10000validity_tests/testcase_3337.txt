import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max26238 = tf.keras.layers.Input(shape=([2, 1]))
in1Max26238 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot6610 = tf.keras.layers.Input(shape=([3]))
in1Dot6610 = tf.keras.layers.Input(shape=([3]))
in0Con19333 = tf.keras.layers.Input(shape=([1]))
in0Con70271 = tf.keras.layers.Input(shape=([2, 3, 3, 1]))
in0Max65414 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max65414 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Cro27921 = tf.keras.layers.Input(shape=([2, 1]))
in0Con73294 = tf.keras.layers.Input(shape=([2, 3, 5]))

Max26238 = keras.layers.Maximum(name = 'Max26238', )([in0Max26238,in1Max26238])
Fla42545 = keras.layers.Flatten(name = 'Fla42545', )(Max26238)
Dot6610 = keras.layers.Dot(axes=(1, 1), name = 'Dot6610', )([in0Dot6610,in1Dot6610])
Con19333 = keras.layers.Concatenate(axis=1, name = 'Con19333', )([Dot6610,in0Con19333])
Ave85840 = keras.layers.Average(name = 'Ave85840', )([Fla42545,Con19333])
Res47716 = keras.layers.Reshape((2, 1), name = 'Res47716', )(Ave85840)
Res50975 = keras.layers.Reshape((2, 1, 1), name = 'Res50975', )(Res47716)
Res58537 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res58537', )(Res50975)
Zer22368 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (2, 0)), name = 'Zer22368', )(Res58537)
Con70271 = keras.layers.Concatenate(axis=4, name = 'Con70271', )([Zer22368,in0Con70271])
Max65414 = keras.layers.Maximum(name = 'Max65414', )([in0Max65414,in1Max65414])
Zer71381 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer71381', )(Max65414)
Sub82231 = keras.layers.Subtract(name = 'Sub82231', )([Con70271,Zer71381])
Res91775 = keras.layers.Reshape((2, 3, 6), name = 'Res91775', )(Sub82231)
Cro27921 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro27921', )(in0Cro27921)
Res5253 = keras.layers.Reshape((1, 1, 1), name = 'Res5253', )(Cro27921)
Up_20191 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_20191', )(Res5253)
Zer49184 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer49184', )(Up_20191)
Con73294 = keras.layers.Concatenate(axis=3, name = 'Con73294', )([Zer49184,in0Con73294])
Sub61982 = keras.layers.Subtract(name = 'Sub61982', )([Res91775,Con73294])
model = tf.keras.models.Model(inputs=[in0Max26238,in1Max26238,in0Dot6610,in1Dot6610,in0Con19333,in0Con70271,in0Max65414,in1Max65414,in0Cro27921,in0Con73294], outputs=Sub61982)
in0Max26238 = tf.constant([[[0.4026], [0.4432]]])
in1Max26238 = tf.constant([[[0.6921], [0.6455]]])
in0Dot6610 = tf.constant([[0.9412, 0.6219, 0.9256]])
in1Dot6610 = tf.constant([[0.3034, 0.226, 0.2192]])
in0Con19333 = tf.constant([[0.2379]])
in0Con70271 = tf.constant([[[[[0.1648], [0.692], [0.0754]], [[0.7858], [0.9488], [0.2702]], [[0.106], [0.2968], [0.005]]], [[[0.9041], [0.4992], [0.5124]], [[0.3044], [0.8765], [0.4067]], [[0.0995], [0.7218], [0.023]]]]])
in0Max65414 = tf.constant([[[[[0.3424, 0.3462], [0.6861, 0.6827]], [[0.4307, 0.6457], [0.9131, 0.2187]]]]])
in1Max65414 = tf.constant([[[[[0.0656, 0.9814], [0.7987, 0.4021]], [[0.6686, 0.1215], [0.8956, 0.1019]]]]])
in0Cro27921 = tf.constant([[[1.4663], [1.038]]])
in0Con73294 = tf.constant([[[[0.4833, 0.7432, 0.782, 0.7068, 0.2833], [0.4352, 0.8467, 0.3243, 0.7466, 0.3603], [0.2659, 0.0291, 0.0181, 0.797, 0.5685]], [[0.0118, 0.9467, 0.5825, 0.0604, 0.2653], [0.1879, 0.7875, 0.8017, 0.7557, 0.1068], [0.321, 0.2904, 0.8169, 0.5134, 0.0805]]]])
print (np.array2string(model.predict([in0Max26238,in1Max26238,in0Dot6610,in1Dot6610,in0Con19333,in0Con70271,in0Max65414,in1Max65414,in0Cro27921,in0Con73294],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub61982.png')

LMax26238 = maximum_layer([[[[0.4026], [0.4432]]], [[[0.6921], [0.6455]]]], Max26238), 
LFla42545 = flatten_layer(Max26238, Fla42545), 
LDot6610 = dot_layer([[0.9412, 0.6219, 0.9256]], [[0.3034, 0.226, 0.2192]], 1, 1, Dot6610), 
LCon19333 = concatenate_layer([Dot6610,[[0.2379]]], 1, Con19333), 
LAve85840 = average_layer([Fla42545,Con19333], Ave85840), 
LRes47716 = reshape_layer(Ave85840, [2, 1], Res47716), 
LRes50975 = reshape_layer(Res47716, [2, 1, 1], Res50975), 
LRes58537 = reshape_layer(Res50975, [2, 1, 1, 1], Res58537), 
LZer22368 = zero_padding3D_layer(Res58537, 0, 0, 2, 0, 2, 0, Zer22368), 
LCon70271 = concatenate_layer([Zer22368,[[[[[0.1648], [0.692], [0.0754]], [[0.7858], [0.9488], [0.2702]], [[0.106], [0.2968], [0.005]]], [[[0.9041], [0.4992], [0.5124]], [[0.3044], [0.8765], [0.4067]], [[0.0995], [0.7218], [0.023]]]]]], 4, Con70271), 
LMax65414 = maximum_layer([[[[[[0.3424, 0.3462], [0.6861, 0.6827]], [[0.4307, 0.6457], [0.9131, 0.2187]]]]], [[[[[0.0656, 0.9814], [0.7987, 0.4021]], [[0.6686, 0.1215], [0.8956, 0.1019]]]]]], Max65414), 
LZer71381 = zero_padding3D_layer(Max65414, 1, 0, 1, 0, 1, 0, Zer71381), 
LSub82231 = subtract_layer(Con70271,Zer71381, Sub82231), 
LRes91775 = reshape_layer(Sub82231, [2, 3, 6], Res91775), 
LCro27921 = cropping1D_layer([[[1.4663], [1.038]]], 1, 0, Cro27921), 
LRes5253 = reshape_layer(Cro27921, [1, 1, 1], Res5253), 
LUp_20191 = up_sampling2D_layer(Res5253, 1, 2, Up_20191), 
LZer49184 = zero_padding2D_layer(Up_20191, 1, 0, 1, 0, Zer49184), 
LCon73294 = concatenate_layer([Zer49184,[[[[0.4833, 0.7432, 0.782, 0.7068, 0.2833], [0.4352, 0.8467, 0.3243, 0.7466, 0.3603], [0.2659, 0.0291, 0.0181, 0.797, 0.5685]], [[0.0118, 0.9467, 0.5825, 0.0604, 0.2653], [0.1879, 0.7875, 0.8017, 0.7557, 0.1068], [0.321, 0.2904, 0.8169, 0.5134, 0.0805]]]]], 3, Con73294), 
LSub61982 = subtract_layer(Res91775,Con73294, Sub61982), 
exec_layers([LMax26238,LFla42545,LDot6610,LCon19333,LAve85840,LRes47716,LRes50975,LRes58537,LZer22368,LCon70271,LMax65414,LZer71381,LSub82231,LRes91775,LCro27921,LRes5253,LUp_20191,LZer49184,LCon73294,LSub61982],["Max26238","Fla42545","Dot6610","Con19333","Ave85840","Res47716","Res50975","Res58537","Zer22368","Con70271","Max65414","Zer71381","Sub82231","Res91775","Cro27921","Res5253","Up_20191","Zer49184","Con73294","Sub61982"],Sub61982,"Sub61982")

Actual (Unparsed): [[[[0.0000000, -0.3185000, -0.7432000, -0.0900000, -0.7068000, -0.2079000], [0.0000000, 0.3506000, -0.8467000, 0.6245000, -0.7466000, -0.0901000], [0.0000000, -0.1599000, -0.0291000, 0.2787000, -0.1364495, -0.5635000]], [[0.0000000, 0.8923000, -0.9467000, -0.0833000, -0.0604000, 0.2471000], [-1.0380000, 0.1165000, -1.1299000, -0.9066000, -1.5544000, -0.3828000], [-1.0380000, -0.2215000, -0.9590000, -0.7408000, -0.9848000, -0.2762000]]]]

Expected (Unparsed): [[[[0,-0.3185,-0.7432,-0.09000000000000008,-0.7068,-0.2079],[0,0.3506000000000001,-0.8467,0.6245,-0.7466,-0.09010000000000001],[0,-0.15990000000000004,-0.0291,0.2787,-0.1364495,-0.5635]],[[0,0.8923,-0.9467,-0.08330000000000004,-0.0604,0.2471],[-1.038,0.11649999999999999,-1.1299,-0.9066000000000001,-1.5544,-0.3828],[-1.038,-0.2215,-0.959,-0.7408,-0.9848,-0.2762]]]]

Actual:   [[[[0, -0.3185, -0.7432, -0.09, -0.7068, -0.2079], [0, 0.3506, -0.8467, 0.6245, -0.7466, -0.0901], [0, -0.1599, -0.0291, 0.2787, -0.1364, -0.5635]], [[0, 0.8923, -0.9467, -0.0833, -0.0604, 0.2471], [-1.038, 0.1165, -1.1299, -0.9066, -1.5544, -0.3828], [-1.038, -0.2215, -0.959, -0.7408, -0.9848, -0.2762]]]]

Expected: [[[[0, -0.3185, -0.7432, -0.09, -0.7068, -0.2079], [0, 0.3507, -0.8467, 0.6245, -0.7466, -0.0901], [0, -0.1599, -0.0291, 0.2787, -0.1364, -0.5635]], [[0, 0.8923, -0.9467, -0.0833, -0.0604, 0.2471], [-1.038, 0.1165, -1.1299, -0.9066, -1.5544, -0.3828], [-1.038, -0.2215, -0.959, -0.7408, -0.9848, -0.2762]]]]