import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot39010 = tf.keras.layers.Input(shape=([3]))
in1Dot39010 = tf.keras.layers.Input(shape=([3]))
in0Con44727 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave97136 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave97136 = tf.keras.layers.Input(shape=([1, 2]))

Dot39010 = keras.layers.Dot(axes=(1, 1), name = 'Dot39010', )([in0Dot39010,in1Dot39010])
Res44954 = keras.layers.Reshape((1, 1), name = 'Res44954', )(Dot39010)
Con44727 = keras.layers.Concatenate(axis=2, name = 'Con44727', )([Res44954,in0Con44727])
Ave97136 = keras.layers.Average(name = 'Ave97136', )([in0Ave97136,in1Ave97136])
Ave28933 = keras.layers.Average(name = 'Ave28933', )([Con44727,Ave97136])
Mas56582 = keras.layers.Masking(mask_value=1, name = 'Mas56582', )(Ave28933)
model = tf.keras.models.Model(inputs=[in0Dot39010,in1Dot39010,in0Con44727,in0Ave97136,in1Ave97136], outputs=Mas56582)
in0Dot39010 = tf.constant([[0.438, 0.3535, 0.064]])
in1Dot39010 = tf.constant([[0.1988, 0.244, 0.8295]])
in0Con44727 = tf.constant([[[0.9812]]])
in0Ave97136 = tf.constant([[[0.3642, 0.4795]]])
in1Ave97136 = tf.constant([[[0.4061, 0.8755]]])
print (np.array2string(model.predict([in0Dot39010,in1Dot39010,in0Con44727,in0Ave97136,in1Ave97136],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas56582.png')

LDot39010 = dot_layer([[0.438, 0.3535, 0.064]], [[0.1988, 0.244, 0.8295]], 1, 1, Dot39010), 
LRes44954 = reshape_layer(Dot39010, [1, 1], Res44954), 
LCon44727 = concatenate_layer([Res44954,[[[0.9812]]]], 2, Con44727), 
LAve97136 = average_layer([[[[0.3642, 0.4795]]], [[[0.4061, 0.8755]]]], Ave97136), 
LAve28933 = average_layer([Con44727,Ave97136], Ave28933), 
LMas56582 = masking_layer(Ave28933, 1, Mas56582), 
exec_layers([LDot39010,LRes44954,LCon44727,LAve97136,LAve28933,LMas56582],["Dot39010","Res44954","Con44727","Ave97136","Ave28933","Mas56582"],Mas56582,"Mas56582")

Actual (Unparsed): [[[0.3057832, 0.8293500]]]

Expected (Unparsed): [[[0.3057832,0.82935]]]

Actual:   [[[0.3058, 0.8294]]]

Expected: [[[0.3058, 0.8294]]]