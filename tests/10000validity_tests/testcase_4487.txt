import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul42582 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul42582 = tf.keras.layers.Input(shape=([1, 1]))
in0Con90029 = tf.keras.layers.Input(shape=([2, 1]))
in0Add83938 = tf.keras.layers.Input(shape=([2, 2]))
in1Add83938 = tf.keras.layers.Input(shape=([2, 2]))
in0Con51104 = tf.keras.layers.Input(shape=([1, 1]))
in0Add77476 = tf.keras.layers.Input(shape=([1, 2]))
in1Add77476 = tf.keras.layers.Input(shape=([1, 2]))
in0Con2182 = tf.keras.layers.Input(shape=([10]))
in0Sub49010 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub49010 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Dot78574 = tf.keras.layers.Input(shape=([3]))
in1Dot78574 = tf.keras.layers.Input(shape=([3]))
in0Con80085 = tf.keras.layers.Input(shape=([11]))

Mul42582 = keras.layers.Multiply(name = 'Mul42582', )([in0Mul42582,in1Mul42582])
Zer99336 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer99336', )(Mul42582)
Con90029 = keras.layers.Concatenate(axis=2, name = 'Con90029', )([Zer99336,in0Con90029])
Add83938 = keras.layers.Add(name = 'Add83938', )([in0Add83938,in1Add83938])
Ave19610 = keras.layers.Average(name = 'Ave19610', )([Con90029,Add83938])
Res27610 = keras.layers.Reshape((2, 2, 1), name = 'Res27610', )(Ave19610)
Res85420 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res85420', )(Res27610)
Glo37916 = keras.layers.GlobalAveragePooling3D(name = 'Glo37916', )(Res85420)
Res26543 = keras.layers.Reshape((1, 1), name = 'Res26543', )(Glo37916)
Con51104 = keras.layers.Concatenate(axis=2, name = 'Con51104', )([Res26543,in0Con51104])
Add77476 = keras.layers.Add(name = 'Add77476', )([in0Add77476,in1Add77476])
Ave5596 = keras.layers.Average(name = 'Ave5596', )([Con51104,Add77476])
Fla63644 = keras.layers.Flatten(name = 'Fla63644', )(Ave5596)
Con2182 = keras.layers.Concatenate(axis=1, name = 'Con2182', )([Fla63644,in0Con2182])
Sub49010 = keras.layers.Subtract(name = 'Sub49010', )([in0Sub49010,in1Sub49010])
Res9825 = keras.layers.Reshape((2, 6), name = 'Res9825', )(Sub49010)
Fla57222 = keras.layers.Flatten(name = 'Fla57222', )(Res9825)
Dot78574 = keras.layers.Dot(axes=(1, 1), name = 'Dot78574', )([in0Dot78574,in1Dot78574])
Con80085 = keras.layers.Concatenate(axis=1, name = 'Con80085', )([Dot78574,in0Con80085])
Ave97577 = keras.layers.Average(name = 'Ave97577', )([Fla57222,Con80085])
Ave37581 = keras.layers.Average(name = 'Ave37581', )([Con2182,Ave97577])
model = tf.keras.models.Model(inputs=[in0Mul42582,in1Mul42582,in0Con90029,in0Add83938,in1Add83938,in0Con51104,in0Add77476,in1Add77476,in0Con2182,in0Sub49010,in1Sub49010,in0Dot78574,in1Dot78574,in0Con80085], outputs=Ave37581)
in0Mul42582 = tf.constant([[[0.7979]]])
in1Mul42582 = tf.constant([[[0.8887]]])
in0Con90029 = tf.constant([[[0.1571], [0.821]]])
in0Add83938 = tf.constant([[[0.2493, 0.9464], [0.9333, 0.1701]]])
in1Add83938 = tf.constant([[[0.8633, 0.3858], [0.9862, 0.2981]]])
in0Con51104 = tf.constant([[[0.8482]]])
in0Add77476 = tf.constant([[[0.6554, 0.7529]]])
in1Add77476 = tf.constant([[[0.4036, 0.9923]]])
in0Con2182 = tf.constant([[0.2062, 0.5547, 0.3282, 0.3031, 0.9989, 0.7731, 0.8707, 0.3663, 0.1886, 0.0866]])
in0Sub49010 = tf.constant([[[[0.2306, 0.4879], [0.7075, 0.3519], [0.5757, 0.5959]], [[0.3525, 0.8819], [0.3685, 0.7073], [0.9821, 0.8259]]]])
in1Sub49010 = tf.constant([[[[0.7173, 0.8563], [0.2395, 0.5231], [0.3494, 0.4371]], [[0.1796, 0.2132], [0.1099, 0.5809], [0.3711, 0.8296]]]])
in0Dot78574 = tf.constant([[0.1285, 0.8883, 0.9796]])
in1Dot78574 = tf.constant([[0.8387, 0.1641, 0.054]])
in0Con80085 = tf.constant([[0.8558, 0.7639, 0.6711, 0.8711, 0.2016, 0.913, 0.8195, 0.1549, 0.7063, 0.8414, 0.5109]])
print (np.array2string(model.predict([in0Mul42582,in1Mul42582,in0Con90029,in0Add83938,in1Add83938,in0Con51104,in0Add77476,in1Add77476,in0Con2182,in0Sub49010,in1Sub49010,in0Dot78574,in1Dot78574,in0Con80085],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave37581.png')

LMul42582 = multiply_layer([[[[0.7979]]], [[[0.8887]]]], Mul42582), 
LZer99336 = zero_padding1D_layer(Mul42582, 1, 0, Zer99336), 
LCon90029 = concatenate_layer([Zer99336,[[[0.1571], [0.821]]]], 2, Con90029), 
LAdd83938 = add_layer([[[[0.2493, 0.9464], [0.9333, 0.1701]]], [[[0.8633, 0.3858], [0.9862, 0.2981]]]], Add83938), 
LAve19610 = average_layer([Con90029,Add83938], Ave19610), 
LRes27610 = reshape_layer(Ave19610, [2, 2, 1], Res27610), 
LRes85420 = reshape_layer(Res27610, [2, 2, 1, 1], Res85420), 
LGlo37916 = global_average_pooling3D_layer(Res85420, Glo37916), 
LRes26543 = reshape_layer(Glo37916, [1, 1], Res26543), 
LCon51104 = concatenate_layer([Res26543,[[[0.8482]]]], 2, Con51104), 
LAdd77476 = add_layer([[[[0.6554, 0.7529]]], [[[0.4036, 0.9923]]]], Add77476), 
LAve5596 = average_layer([Con51104,Add77476], Ave5596), 
LFla63644 = flatten_layer(Ave5596, Fla63644), 
LCon2182 = concatenate_layer([Fla63644,[[0.2062, 0.5547, 0.3282, 0.3031, 0.9989, 0.7731, 0.8707, 0.3663, 0.1886, 0.0866]]], 1, Con2182), 
LSub49010 = subtract_layer([[[[0.2306, 0.4879], [0.7075, 0.3519], [0.5757, 0.5959]], [[0.3525, 0.8819], [0.3685, 0.7073], [0.9821, 0.8259]]]], [[[[0.7173, 0.8563], [0.2395, 0.5231], [0.3494, 0.4371]], [[0.1796, 0.2132], [0.1099, 0.5809], [0.3711, 0.8296]]]], Sub49010), 
LRes9825 = reshape_layer(Sub49010, [2, 6], Res9825), 
LFla57222 = flatten_layer(Res9825, Fla57222), 
LDot78574 = dot_layer([[0.1285, 0.8883, 0.9796]], [[0.8387, 0.1641, 0.054]], 1, 1, Dot78574), 
LCon80085 = concatenate_layer([Dot78574,[[0.8558, 0.7639, 0.6711, 0.8711, 0.2016, 0.913, 0.8195, 0.1549, 0.7063, 0.8414, 0.5109]]], 1, Con80085), 
LAve97577 = average_layer([Fla57222,Con80085], Ave97577), 
LAve37581 = average_layer([Con2182,Ave97577], Ave37581), 
exec_layers([LMul42582,LZer99336,LCon90029,LAdd83938,LAve19610,LRes27610,LRes85420,LGlo37916,LRes26543,LCon51104,LAdd77476,LAve5596,LFla63644,LCon2182,LSub49010,LRes9825,LFla57222,LDot78574,LCon80085,LAve97577,LAve37581],["Mul42582","Zer99336","Con90029","Add83938","Ave19610","Res27610","Res85420","Glo37916","Res26543","Con51104","Add77476","Ave5596","Fla63644","Con2182","Sub49010","Res9825","Fla57222","Dot78574","Con80085","Ave97577","Ave37581"],Ave37581,"Ave37581")

Actual (Unparsed): [[0.4234258, 0.7702000, 0.4110750, 0.4023250, 0.4384500, 0.2416500, 0.7709250, 0.7586000, 0.5387250, 0.3913250, 0.4574000, 0.1701000]]

Expected (Unparsed): [[0.4234257740625,0.7702,0.41107499999999997,0.402325,0.43845,0.24164999999999998,0.7709250000000001,0.7585999999999999,0.538725,0.39132500000000003,0.4574,0.1701]]

Actual:   [[0.4235, 0.7702, 0.4111, 0.4024, 0.4385, 0.2417, 0.771, 0.7586, 0.5388, 0.3914, 0.4574, 0.1701]]

Expected: [[0.4235, 0.7702, 0.4111, 0.4024, 0.4385, 0.2417, 0.771, 0.7586, 0.5388, 0.3914, 0.4574, 0.1701]]