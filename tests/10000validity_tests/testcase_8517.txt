import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub29600 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub29600 = tf.keras.layers.Input(shape=([2, 3, 3]))

Sub29600 = keras.layers.Subtract(name = 'Sub29600', )([in0Sub29600,in1Sub29600])
Res73138 = keras.layers.Reshape((2, 9), name = 'Res73138', )(Sub29600)
Glo45569 = keras.layers.GlobalAveragePooling1D(name = 'Glo45569', )(Res73138)
Res64637 = keras.layers.Reshape((9, 1), name = 'Res64637', )(Glo45569)
Up_70487 = keras.layers.UpSampling1D(size=(2), name = 'Up_70487', )(Res64637)
model = tf.keras.models.Model(inputs=[in0Sub29600,in1Sub29600], outputs=Up_70487)
in0Sub29600 = tf.constant([[[[0.6087, 0.5825, 0.1998], [0.4147, 0.7228, 0.3687], [0.336, 0.8793, 0.0126]], [[0.2684, 0.8095, 0.897], [0.0249, 0.8539, 0.6097], [0.2488, 0.3105, 0.543]]]])
in1Sub29600 = tf.constant([[[[0.2845, 0.4487, 0.3596], [0.6467, 0.0273, 0.6844], [0.4469, 0.8397, 0.8078]], [[0.7692, 0.9176, 0.362], [0.7299, 0.2107, 0.0691], [0.4871, 0.1901, 0.121]]]])
print (np.array2string(model.predict([in0Sub29600,in1Sub29600],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_70487.png')

LSub29600 = subtract_layer([[[[0.6087, 0.5825, 0.1998], [0.4147, 0.7228, 0.3687], [0.336, 0.8793, 0.0126]], [[0.2684, 0.8095, 0.897], [0.0249, 0.8539, 0.6097], [0.2488, 0.3105, 0.543]]]], [[[[0.2845, 0.4487, 0.3596], [0.6467, 0.0273, 0.6844], [0.4469, 0.8397, 0.8078]], [[0.7692, 0.9176, 0.362], [0.7299, 0.2107, 0.0691], [0.4871, 0.1901, 0.121]]]], Sub29600), 
LRes73138 = reshape_layer(Sub29600, [2, 9], Res73138), 
LGlo45569 = global_average_pooling1D_layer(Res73138, Glo45569), 
LRes64637 = reshape_layer(Glo45569, [9, 1], Res64637), 
LUp_70487 = up_sampling1D_layer(Res64637, 2, Up_70487), 
exec_layers([LSub29600,LRes73138,LGlo45569,LRes64637,LUp_70487],["Sub29600","Res73138","Glo45569","Res64637","Up_70487"],Up_70487,"Up_70487")

Actual (Unparsed): [[[-0.0883000], [-0.0883000], [0.0128500], [0.0128500], [0.1876000], [0.1876000], [-0.4685000], [-0.4685000], [0.6693500], [0.6693500], [0.1124500], [0.1124500], [-0.1746000], [-0.1746000], [0.0800000], [0.0800000], [-0.1866000], [-0.1866000]]]

Expected (Unparsed): [[[-0.08829999999999993],[-0.08829999999999993],[0.012850000000000028],[0.012850000000000028],[0.18760000000000004],[0.18760000000000004],[-0.4685],[-0.4685],[0.66935],[0.66935],[0.11245],[0.11245],[-0.17459999999999998],[-0.17459999999999998],[0.07999999999999999],[0.07999999999999999],[-0.18659999999999993],[-0.18659999999999993]]]

Actual:   [[[-0.0883], [-0.0883], [0.0129], [0.0129], [0.1876], [0.1876], [-0.4685], [-0.4685], [0.6694], [0.6694], [0.1125], [0.1125], [-0.1746], [-0.1746], [0.08], [0.08], [-0.1866], [-0.1866]]]

Expected: [[[-0.0882], [-0.0882], [0.0129], [0.0129], [0.1877], [0.1877], [-0.4685], [-0.4685], [0.6694], [0.6694], [0.1125], [0.1125], [-0.1745], [-0.1745], [0.08], [0.08], [-0.1865], [-0.1865]]]