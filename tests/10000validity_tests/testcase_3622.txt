import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc14948 = tf.keras.layers.Input(shape=([2, 2, 2]))

Loc14948 = keras.layers.LocallyConnected2D(2, (2, 2),strides=(1, 1), name = 'Loc14948', )(in0Loc14948)
ReL12863 = keras.layers.ReLU(max_value=9.392431610071501, negative_slope=2.843720949056062, threshold=0.3298162497914303, name = 'ReL12863', )(Loc14948)
ELU78914 = keras.layers.ELU(alpha=1.7947577870197726, name = 'ELU78914', )(ReL12863)
Ave46261 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave46261', )(ELU78914)
model = tf.keras.models.Model(inputs=[in0Loc14948], outputs=Ave46261)
w = model.get_layer('Loc14948').get_weights() 
w[0] = np.array([[[0.8844, 0.6345], [0.4421, 0.5665], [0.5711, 0.54], [0.033, 0.1868], [0.6819, 0.5634], [0.1321, 0.2409], [0.4897, 0.6415], [0.3322, 0.7128]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc14948').set_weights(w) 
in0Loc14948 = tf.constant([[[[0.566, 0.0657], [0.0285, 0.2886]], [[0.1912, 0.3715], [0.7231, 0.588]]]])
print (np.array2string(model.predict([in0Loc14948],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave46261.png')

LLoc14948 = locally_connected2D_layer([[[[0.566, 0.0657], [0.0285, 0.2886]], [[0.1912, 0.3715], [0.7231, 0.588]]]], 2, 2,[[[0.8844, 0.6345], [0.4421, 0.5665], [0.5711, 0.54], [0.033, 0.1868], [0.6819, 0.5634], [0.1321, 0.2409], [0.4897, 0.6415], [0.3322, 0.7128]]],[[[0, 0]]], 1, 1, Loc14948), 
LReL12863 = relu_layer(Loc14948, 9.392431610071501, 2.843720949056062, 0.3298162497914303, ReL12863), 
LELU78914 = elu_layer(ReL12863, 1.7947577870197726, ELU78914), 
LAve46261 = average_pooling2D_layer(ELU78914, 1, 1, Ave46261), 
exec_layers([LLoc14948,LReL12863,LELU78914,LAve46261],["Loc14948","ReL12863","ELU78914","Ave46261"],Ave46261,"Ave46261")

Actual (Unparsed): [[[[1.2843066, 1.5458580]]]]

Expected (Unparsed): [[[[1.2843066200000002,1.54585801]]]]

Actual:   [[[[1.2844, 1.5459]]]]

Expected: [[[[1.2844, 1.5459]]]]