import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo94153 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Con47281 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Add45544 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Add45544 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Min78339 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min78339 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con10798 = tf.keras.layers.Input(shape=([2, 2, 1]))

Glo94153 = keras.layers.GlobalAveragePooling3D(name = 'Glo94153', )(in0Glo94153)
Res12245 = keras.layers.Reshape((1, 1), name = 'Res12245', )(Glo94153)
Cro22971 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro22971', )(Res12245)
Res70445 = keras.layers.Reshape((1, 1, 1), name = 'Res70445', )(Cro22971)
Res63228 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res63228', )(Res70445)
Zer46649 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer46649', )(Res63228)
Con47281 = keras.layers.Concatenate(axis=4, name = 'Con47281', )([Zer46649,in0Con47281])
Add45544 = keras.layers.Add(name = 'Add45544', )([in0Add45544,in1Add45544])
Sub76676 = keras.layers.Subtract(name = 'Sub76676', )([Con47281,Add45544])
Res93357 = keras.layers.Reshape((2, 1, 2), name = 'Res93357', )(Sub76676)
Zer11722 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer11722', )(Res93357)
Min78339 = keras.layers.Minimum(name = 'Min78339', )([in0Min78339,in1Min78339])
Ave29599 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 1), padding='same', name = 'Ave29599', )(Min78339)
Con10798 = keras.layers.Concatenate(axis=3, name = 'Con10798', )([Ave29599,in0Con10798])
Max662 = keras.layers.Maximum(name = 'Max662', )([Zer11722,Con10798])
model = tf.keras.models.Model(inputs=[in0Glo94153,in0Con47281,in0Add45544,in1Add45544,in0Min78339,in1Min78339,in0Con10798], outputs=Max662)
in0Glo94153 = tf.constant([[[[[1.7044], [1.9679]]], [[[1.6046], [1.7304]]]]])
in0Con47281 = tf.constant([[[[[0.4429]]], [[[0.7322]]]]])
in0Add45544 = tf.constant([[[[[0.805, 0.8798]]], [[[0.7136, 0.3969]]]]])
in1Add45544 = tf.constant([[[[[0.3413, 0.6771]]], [[[0.6306, 0.032]]]]])
in0Min78339 = tf.constant([[[[0.6406], [0.1491]], [[0.0796], [0.274]]]])
in1Min78339 = tf.constant([[[[0.3125], [0.0224]], [[0.1312], [0.8714]]]])
in0Con10798 = tf.constant([[[[0.4236], [0.9804]], [[0.2982], [0.7547]]]])
print (np.array2string(model.predict([in0Glo94153,in0Con47281,in0Add45544,in1Add45544,in0Min78339,in1Min78339,in0Con10798],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max662.png')

LGlo94153 = global_average_pooling3D_layer([[[[[1.7044], [1.9679]]], [[[1.6046], [1.7304]]]]], Glo94153), 
LRes12245 = reshape_layer(Glo94153, [1, 1], Res12245), 
LCro22971 = cropping1D_layer(Res12245, 0, 0, Cro22971), 
LRes70445 = reshape_layer(Cro22971, [1, 1, 1], Res70445), 
LRes63228 = reshape_layer(Res70445, [1, 1, 1, 1], Res63228), 
LZer46649 = zero_padding3D_layer(Res63228, 1, 0, 0, 0, 0, 0, Zer46649), 
LCon47281 = concatenate_layer([Zer46649,[[[[[0.4429]]], [[[0.7322]]]]]], 4, Con47281), 
LAdd45544 = add_layer([[[[[[0.805, 0.8798]]], [[[0.7136, 0.3969]]]]], [[[[[0.3413, 0.6771]]], [[[0.6306, 0.032]]]]]], Add45544), 
LSub76676 = subtract_layer(Con47281,Add45544, Sub76676), 
LRes93357 = reshape_layer(Sub76676, [2, 1, 2], Res93357), 
LZer11722 = zero_padding2D_layer(Res93357, 0, 0, 1, 0, Zer11722), 
LMin78339 = minimum_layer([[[[[0.6406], [0.1491]], [[0.0796], [0.274]]]], [[[[0.3125], [0.0224]], [[0.1312], [0.8714]]]]], Min78339), 
LAve29599 = average_pooling2D_layer(Min78339, 1, 2, 1, 1, true, Ave29599), 
LCon10798 = concatenate_layer([Ave29599,[[[[0.4236], [0.9804]], [[0.2982], [0.7547]]]]], 3, Con10798), 
LMax662 = maximum_layer([Zer11722,Con10798], Max662), 
exec_layers([LGlo94153,LRes12245,LCro22971,LRes70445,LRes63228,LZer46649,LCon47281,LAdd45544,LSub76676,LRes93357,LZer11722,LMin78339,LAve29599,LCon10798,LMax662],["Glo94153","Res12245","Cro22971","Res70445","Res63228","Zer46649","Con47281","Add45544","Sub76676","Res93357","Zer11722","Min78339","Ave29599","Con10798","Max662"],Max662,"Max662")

Actual (Unparsed): [[[[0.1674500, 0.4236000], [0.0224000, 0.9804000]], [[0.1768000, 0.2982000], [0.4076250, 0.7547000]]]]

Expected (Unparsed): [[[[0.16745,0.4236],[0.0224,0.9804]],[[0.1768,0.2982],[0.4076250000000001,0.7547]]]]

Actual:   [[[[0.1675, 0.4236], [0.0224, 0.9804]], [[0.1768, 0.2982], [0.4077, 0.7547]]]]

Expected: [[[[0.1675, 0.4236], [0.0224, 0.9804]], [[0.1768, 0.2982], [0.4077, 0.7547]]]]