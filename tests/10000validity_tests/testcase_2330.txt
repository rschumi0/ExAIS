import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ReL59756 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con56902 = tf.keras.layers.Input(shape=([1, 6]))
in0Mul36815 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Mul36815 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Con88602 = tf.keras.layers.Input(shape=([2]))
in0Sub10323 = tf.keras.layers.Input(shape=([3]))
in1Sub10323 = tf.keras.layers.Input(shape=([3]))
in0Ave74481 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave74481 = tf.keras.layers.Input(shape=([2, 2, 1]))

ReL59756 = keras.layers.ReLU(max_value=7.880425969053609, negative_slope=4.796719066521156, threshold=5.361257226620026, name = 'ReL59756', input_shape=(1, 2, 1, 1))(in0ReL59756)
Res44560 = keras.layers.Reshape((1, 2, 1), name = 'Res44560', )(ReL59756)
Res72096 = keras.layers.Reshape((1, 2), name = 'Res72096', )(Res44560)
Con56902 = keras.layers.Concatenate(axis=2, name = 'Con56902', )([Res72096,in0Con56902])
Mul36815 = keras.layers.Multiply(name = 'Mul36815', )([in0Mul36815,in1Mul36815])
Res54178 = keras.layers.Reshape((1, 2, 4), name = 'Res54178', )(Mul36815)
Res7907 = keras.layers.Reshape((1, 8), name = 'Res7907', )(Res54178)
Dot3516 = keras.layers.Dot(axes=(2, 2), name = 'Dot3516', )([Con56902,Res7907])
Fla12992 = keras.layers.Flatten(name = 'Fla12992', )(Dot3516)
Con88602 = keras.layers.Concatenate(axis=1, name = 'Con88602', )([Fla12992,in0Con88602])
Sub10323 = keras.layers.Subtract(name = 'Sub10323', )([in0Sub10323,in1Sub10323])
Dot43231 = keras.layers.Dot(axes=(1, 1), name = 'Dot43231', )([Con88602,Sub10323])
Res20049 = keras.layers.Reshape((1, 1), name = 'Res20049', )(Dot43231)
Zer3296 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer3296', )(Res20049)
Ave74481 = keras.layers.Average(name = 'Ave74481', )([in0Ave74481,in1Ave74481])
Res5953 = keras.layers.Reshape((2, 2), name = 'Res5953', )(Ave74481)
Dot3837 = keras.layers.Dot(axes=(1, 1), name = 'Dot3837', )([Zer3296,Res5953])
model = tf.keras.models.Model(inputs=[in0ReL59756,in0Con56902,in0Mul36815,in1Mul36815,in0Con88602,in0Sub10323,in1Sub10323,in0Ave74481,in1Ave74481], outputs=Dot3837)
in0ReL59756 = tf.constant([[[[[0.6398]], [[0.6523]]]]])
in0Con56902 = tf.constant([[[0.0088, 0.009, 0.1396, 0.0214, 0.705, 0.0605]]])
in0Mul36815 = tf.constant([[[[[0.9358, 0.6839], [0.1101, 0.7386]], [[0.0917, 0.5377], [0.248, 0.4238]]]]])
in1Mul36815 = tf.constant([[[[[0.233, 0.585], [0.2611, 0.6635]], [[0.3591, 0.2409], [0.7869, 0.5798]]]]])
in0Con88602 = tf.constant([[0.4919, 0.6789]])
in0Sub10323 = tf.constant([[0.1399, 0.5065, 0.6937]])
in1Sub10323 = tf.constant([[0.0915, 0.404, 0.6848]])
in0Ave74481 = tf.constant([[[[0.0694], [0.1963]], [[0.5051], [0.2959]]]])
in1Ave74481 = tf.constant([[[[0.9914], [0.4017]], [[0.6656], [0.1065]]]])
print (np.array2string(model.predict([in0ReL59756,in0Con56902,in0Mul36815,in1Mul36815,in0Con88602,in0Sub10323,in1Sub10323,in0Ave74481,in1Ave74481],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot3837.png')

LReL59756 = relu_layer([[[[[0.6398]], [[0.6523]]]]], 7.880425969053609, 4.796719066521156, 5.361257226620026, ReL59756), 
LRes44560 = reshape_layer(ReL59756, [1, 2, 1], Res44560), 
LRes72096 = reshape_layer(Res44560, [1, 2], Res72096), 
LCon56902 = concatenate_layer([Res72096,[[[0.0088, 0.009, 0.1396, 0.0214, 0.705, 0.0605]]]], 2, Con56902), 
LMul36815 = multiply_layer([[[[[[0.9358, 0.6839], [0.1101, 0.7386]], [[0.0917, 0.5377], [0.248, 0.4238]]]]], [[[[[0.233, 0.585], [0.2611, 0.6635]], [[0.3591, 0.2409], [0.7869, 0.5798]]]]]], Mul36815), 
LRes54178 = reshape_layer(Mul36815, [1, 2, 4], Res54178), 
LRes7907 = reshape_layer(Res54178, [1, 8], Res7907), 
LDot3516 = dot_layer(Con56902,Res7907, 2, 2, Dot3516), 
LFla12992 = flatten_layer(Dot3516, Fla12992), 
LCon88602 = concatenate_layer([Fla12992,[[0.4919, 0.6789]]], 1, Con88602), 
LSub10323 = subtract_layer([[0.1399, 0.5065, 0.6937]], [[0.0915, 0.404, 0.6848]], Sub10323), 
LDot43231 = dot_layer(Con88602,Sub10323, 1, 1, Dot43231), 
LRes20049 = reshape_layer(Dot43231, [1, 1], Res20049), 
LZer3296 = zero_padding1D_layer(Res20049, 1, 0, Zer3296), 
LAve74481 = average_layer([[[[[0.0694], [0.1963]], [[0.5051], [0.2959]]]], [[[[0.9914], [0.4017]], [[0.6656], [0.1065]]]]], Ave74481), 
LRes5953 = reshape_layer(Ave74481, [2, 2], Res5953), 
LDot3837 = dot_layer(Zer3296,Res5953, 1, 1, Dot3837), 
exec_layers([LReL59756,LRes44560,LRes72096,LCon56902,LMul36815,LRes54178,LRes7907,LDot3516,LFla12992,LCon88602,LSub10323,LDot43231,LRes20049,LZer3296,LAve74481,LRes5953,LDot3837],["ReL59756","Res44560","Res72096","Con56902","Mul36815","Res54178","Res7907","Dot3516","Fla12992","Con88602","Sub10323","Dot43231","Res20049","Zer3296","Ave74481","Res5953","Dot3837"],Dot3837,"Dot3837")

Actual (Unparsed): [[[-0.3582137, -0.1231273]]]

Expected (Unparsed): [[[-0.358213651977296,-0.12312733711084299]]]

Actual:   [[[-0.3582, -0.1231]]]

Expected: [[[-0.3582, -0.1231]]]