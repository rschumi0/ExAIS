import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add79195 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add79195 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con57621 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot20481 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot20481 = tf.keras.layers.Input(shape=([3, 3]))
in0Per99364 = tf.keras.layers.Input(shape=([1, 3]))

Add79195 = keras.layers.Add(name = 'Add79195', )([in0Add79195,in1Add79195])
Res88247 = keras.layers.Reshape((1, 2), name = 'Res88247', )(Add79195)
Zer60569 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer60569', )(Res88247)
Con57621 = keras.layers.Concatenate(axis=2, name = 'Con57621', )([Zer60569,in0Con57621])
Dot20481 = keras.layers.Dot(axes=(2, 2), name = 'Dot20481', )([in0Dot20481,in1Dot20481])
Sub15342 = keras.layers.Subtract(name = 'Sub15342', )([Con57621,Dot20481])
Res85298 = keras.layers.Reshape((3, 3, 1), name = 'Res85298', )(Sub15342)
Per99364 = keras.layers.Permute((2,1), name = 'Per99364',)(in0Per99364)
Res29803 = keras.layers.Reshape((3, 1, 1), name = 'Res29803', )(Per99364)
Dep19216 = keras.layers.DepthwiseConv2D((3, 1),strides=(3, 3), padding='same', name = 'Dep19216', )(Res29803)
Zer865 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer865', )(Dep19216)
Add82592 = keras.layers.Add(name = 'Add82592', )([Res85298,Zer865])
model = tf.keras.models.Model(inputs=[in0Add79195,in1Add79195,in0Con57621,in0Dot20481,in1Dot20481,in0Per99364], outputs=Add82592)
w = model.get_layer('Dep19216').get_weights() 
w[0] = np.array([[[[0.2792]]], [[[0.3787]]], [[[0.7568]]]])
w[1] = np.array([0])
model.get_layer('Dep19216').set_weights(w) 
in0Add79195 = tf.constant([[[[0.9454, 0.0734]]]])
in1Add79195 = tf.constant([[[[0.8804, 0.5335]]]])
in0Con57621 = tf.constant([[[0.6357], [0.1252], [0.4674]]])
in0Dot20481 = tf.constant([[[0.0989, 0.7859, 0.4855], [0.4598, 0.4193, 0.1363], [0.919, 0.6647, 0.5388]]])
in1Dot20481 = tf.constant([[[0.86, 0.2281, 0.6367], [0.9235, 0.0935, 0.8216], [0.7284, 0.6445, 0.8448]]])
in0Per99364 = tf.constant([[[1.807, 1.4797, 1.0665]]])
print (np.array2string(model.predict([in0Add79195,in1Add79195,in0Con57621,in0Dot20481,in1Dot20481,in0Per99364],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add82592.png')

LAdd79195 = add_layer([[[[[0.9454, 0.0734]]]], [[[[0.8804, 0.5335]]]]], Add79195), 
LRes88247 = reshape_layer(Add79195, [1, 2], Res88247), 
LZer60569 = zero_padding1D_layer(Res88247, 2, 0, Zer60569), 
LCon57621 = concatenate_layer([Zer60569,[[[0.6357], [0.1252], [0.4674]]]], 2, Con57621), 
LDot20481 = dot_layer([[[0.0989, 0.7859, 0.4855], [0.4598, 0.4193, 0.1363], [0.919, 0.6647, 0.5388]]], [[[0.86, 0.2281, 0.6367], [0.9235, 0.0935, 0.8216], [0.7284, 0.6445, 0.8448]]], 2, 2, Dot20481), 
LSub15342 = subtract_layer(Con57621,Dot20481, Sub15342), 
LRes85298 = reshape_layer(Sub15342, [3, 3, 1], Res85298), 
LPer99364 = permute_layer([[[1.807, 1.4797, 1.0665]]], 2,1, Per99364), 
LRes29803 = reshape_layer(Per99364, [3, 1, 1], Res29803), 
LDep19216 = depthwise_conv2D_layer(Res29803, 3, 1,[[[[0.2792]]], [[[0.3787]]], [[[0.7568]]]],[0], 3, 3, true, Dep19216), 
LZer865 = zero_padding2D_layer(Dep19216, 2, 0, 2, 0, Zer865), 
LAdd82592 = add_layer([Res85298,Zer865], Add82592), 
exec_layers([LAdd79195,LRes88247,LZer60569,LCon57621,LDot20481,LSub15342,LRes85298,LPer99364,LRes29803,LDep19216,LZer865,LAdd82592],["Add79195","Res88247","Zer60569","Con57621","Dot20481","Sub15342","Res85298","Per99364","Res29803","Dep19216","Zer865","Add82592"],Add82592,"Add82592")

Actual (Unparsed): [[[[-0.5734356], [-0.5637026], [-0.3530017]], [[-0.5778525], [-0.5758139], [-0.5951034]], [[0.5407880], [-0.7466241], [0.7864270]]]]

Expected (Unparsed): [[[[-0.57343564],[-0.5637026],[-0.3530017099999999]],[[-0.57785254],[-0.57581393],[-0.59510341]],[[0.54078797],[-0.74662403],[0.7864270000000002]]]]

Actual:   [[[[-0.5734], [-0.5637], [-0.353]], [[-0.5778], [-0.5758], [-0.5951]], [[0.5408], [-0.7466], [0.7865]]]]

Expected: [[[[-0.5734], [-0.5637], [-0.353]], [[-0.5778], [-0.5758], [-0.5951]], [[0.5408], [-0.7466], [0.7865]]]]