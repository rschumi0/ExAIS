import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con18913 = tf.keras.layers.Input(shape=([1, 1]))

Con18913 = keras.layers.Conv1D(2, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con18913', )(in0Con18913)
Con51747 = keras.layers.Conv1D(4, (2),strides=(1), padding='same', dilation_rate=(1), name = 'Con51747', )(Con18913)
Res97157 = keras.layers.Reshape((1, 4, 1), name = 'Res97157', )(Con51747)
Glo26740 = keras.layers.GlobalAveragePooling2D(name = 'Glo26740', )(Res97157)
model = tf.keras.models.Model(inputs=[in0Con18913], outputs=Glo26740)
w = model.get_layer('Con18913').get_weights() 
w[0] = np.array([[[0.1722, 0.9158]]])
w[1] = np.array([0, 0])
model.get_layer('Con18913').set_weights(w) 
w = model.get_layer('Con51747').get_weights() 
w[0] = np.array([[[0.2089, 0.534, 0.3838, 0.5125], [0.8949, 0.9019, 0.7099, 0.6848]], [[0.664, 0.3211, 0.2247, 0.4181], [0.4806, 0.4802, 0.395, 0.9346]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con51747').set_weights(w) 
in0Con18913 = tf.constant([[[0.0386]]])
print (np.array2string(model.predict([in0Con18913],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo26740.png')

LCon18913 = conv1D_layer([[[0.0386]]], 1,[[[0.1722, 0.9158]]],[0, 0], 1, true, 1, Con18913), 
LCon51747 = conv1D_layer(Con18913, 2,[[[0.2089, 0.534, 0.3838, 0.5125], [0.8949, 0.9019, 0.7099, 0.6848]], [[0.664, 0.3211, 0.2247, 0.4181], [0.4806, 0.4802, 0.395, 0.9346]]],[0, 0, 0, 0], 1, true, 1, Con51747), 
LRes97157 = reshape_layer(Con51747, [1, 4, 1], Res97157), 
LGlo26740 = global_average_pooling2D_layer(Res97157, Glo26740), 
exec_layers([LCon18913,LCon51747,LRes97157,LGlo26740],["Con18913","Con51747","Res97157","Glo26740"],Glo26740,"Glo26740")

Actual (Unparsed): [[0.0309287]]

Expected (Unparsed): [[0.030928693321]]

Actual:   [[0.031]]

Expected: [[0.031]]