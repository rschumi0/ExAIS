import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub99884 = tf.keras.layers.Input(shape=([2]))
in1Sub99884 = tf.keras.layers.Input(shape=([2]))
in0Con71621 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot28012 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot28012 = tf.keras.layers.Input(shape=([2, 3]))
in0Add45583 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add45583 = tf.keras.layers.Input(shape=([1, 1, 1]))

Sub99884 = keras.layers.Subtract(name = 'Sub99884', )([in0Sub99884,in1Sub99884])
Res70939 = keras.layers.Reshape((2, 1), name = 'Res70939', )(Sub99884)
Con71621 = keras.layers.Concatenate(axis=2, name = 'Con71621', )([Res70939,in0Con71621])
Dot28012 = keras.layers.Dot(axes=(2, 2), name = 'Dot28012', )([in0Dot28012,in1Dot28012])
Add41746 = keras.layers.Add(name = 'Add41746', )([Con71621,Dot28012])
Res96774 = keras.layers.Reshape((2, 2, 1), name = 'Res96774', )(Add41746)
Add45583 = keras.layers.Add(name = 'Add45583', )([in0Add45583,in1Add45583])
Zer48419 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer48419', )(Add45583)
Max8883 = keras.layers.Maximum(name = 'Max8883', )([Res96774,Zer48419])
model = tf.keras.models.Model(inputs=[in0Sub99884,in1Sub99884,in0Con71621,in0Dot28012,in1Dot28012,in0Add45583,in1Add45583], outputs=Max8883)
in0Sub99884 = tf.constant([[0.4794, 0.9967]])
in1Sub99884 = tf.constant([[0.7732, 0.2385]])
in0Con71621 = tf.constant([[[0.1752], [0.8448]]])
in0Dot28012 = tf.constant([[[0.8606, 0.4969, 0.2178], [0.1196, 0.8899, 0.7117]]])
in1Dot28012 = tf.constant([[[0.859, 0.8678, 0.8513], [0.7001, 0.2487, 0.3813]]])
in0Add45583 = tf.constant([[[[0.9278]]]])
in1Add45583 = tf.constant([[[[0.1399]]]])
print (np.array2string(model.predict([in0Sub99884,in1Sub99884,in0Con71621,in0Dot28012,in1Dot28012,in0Add45583,in1Add45583],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max8883.png')

LSub99884 = subtract_layer([[0.4794, 0.9967]], [[0.7732, 0.2385]], Sub99884), 
LRes70939 = reshape_layer(Sub99884, [2, 1], Res70939), 
LCon71621 = concatenate_layer([Res70939,[[[0.1752], [0.8448]]]], 2, Con71621), 
LDot28012 = dot_layer([[[0.8606, 0.4969, 0.2178], [0.1196, 0.8899, 0.7117]]], [[[0.859, 0.8678, 0.8513], [0.7001, 0.2487, 0.3813]]], 2, 2, Dot28012), 
LAdd41746 = add_layer([Con71621,Dot28012], Add41746), 
LRes96774 = reshape_layer(Add41746, [2, 2, 1], Res96774), 
LAdd45583 = add_layer([[[[[0.9278]]]], [[[[0.1399]]]]], Add45583), 
LZer48419 = zero_padding2D_layer(Add45583, 1, 0, 1, 0, Zer48419), 
LMax8883 = maximum_layer([Res96774,Zer48419], Max8883), 
exec_layers([LSub99884,LRes70939,LCon71621,LDot28012,LAdd41746,LRes96774,LAdd45583,LZer48419,LMax8883],["Sub99884","Res70939","Con71621","Dot28012","Add41746","Res96774","Add45583","Zer48419","Max8883"],Max8883,"Max8883")

Actual (Unparsed): [[[[1.0620784], [0.9843322]], [[2.2390619], [1.4212213]]]]

Expected (Unparsed): [[[[1.06207836],[0.98433223]],[[2.23906183],[1.4212213]]]]

Actual:   [[[[1.0621], [0.9844]], [[2.2391], [1.4213]]]]

Expected: [[[[1.0621], [0.9844]], [[2.2391], [1.4213]]]]