import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub36979 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub36979 = tf.keras.layers.Input(shape=([3, 3]))
in0Glo82959 = tf.keras.layers.Input(shape=([2, 2]))
in0Max51664 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max51664 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con77056 = tf.keras.layers.Input(shape=([3, 2]))

Sub36979 = keras.layers.Subtract(name = 'Sub36979', )([in0Sub36979,in1Sub36979])
Glo82959 = keras.layers.GlobalAveragePooling1D(name = 'Glo82959', )(in0Glo82959)
Res55252 = keras.layers.Reshape((2, 1), name = 'Res55252', )(Glo82959)
Max51664 = keras.layers.Maximum(name = 'Max51664', )([in0Max51664,in1Max51664])
Res32058 = keras.layers.Reshape((1, 1), name = 'Res32058', )(Max51664)
Cro15375 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro15375', )(Res32058)
Zer854 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer854', )(Cro15375)
Min55771 = keras.layers.Minimum(name = 'Min55771', )([Res55252,Zer854])
Zer74993 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer74993', )(Min55771)
Con77056 = keras.layers.Concatenate(axis=2, name = 'Con77056', )([Zer74993,in0Con77056])
Sub68194 = keras.layers.Subtract(name = 'Sub68194', )([Sub36979,Con77056])
model = tf.keras.models.Model(inputs=[in0Sub36979,in1Sub36979,in0Glo82959,in0Max51664,in1Max51664,in0Con77056], outputs=Sub68194)
in0Sub36979 = tf.constant([[[0.9227, 0.8731, 0.8251], [0.5396, 0.775, 0.6591], [0.395, 0.2167, 0.0778]]])
in1Sub36979 = tf.constant([[[0.1112, 0.9287, 0.4775], [0.364, 0.4977, 0.8485], [0.8921, 0.6694, 0.0197]]])
in0Glo82959 = tf.constant([[[1.1278, 1.113], [1.4172, 1.8614]]])
in0Max51664 = tf.constant([[[[0.9487]]]])
in1Max51664 = tf.constant([[[[0.0943]]]])
in0Con77056 = tf.constant([[[0.0964, 0.1446], [0.7312, 0.5884], [0.9648, 0.5358]]])
print (np.array2string(model.predict([in0Sub36979,in1Sub36979,in0Glo82959,in0Max51664,in1Max51664,in0Con77056],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub68194.png')

LSub36979 = subtract_layer([[[0.9227, 0.8731, 0.8251], [0.5396, 0.775, 0.6591], [0.395, 0.2167, 0.0778]]], [[[0.1112, 0.9287, 0.4775], [0.364, 0.4977, 0.8485], [0.8921, 0.6694, 0.0197]]], Sub36979), 
LGlo82959 = global_average_pooling1D_layer([[[1.1278, 1.113], [1.4172, 1.8614]]], Glo82959), 
LRes55252 = reshape_layer(Glo82959, [2, 1], Res55252), 
LMax51664 = maximum_layer([[[[[0.9487]]]], [[[[0.0943]]]]], Max51664), 
LRes32058 = reshape_layer(Max51664, [1, 1], Res32058), 
LCro15375 = cropping1D_layer(Res32058, 0, 0, Cro15375), 
LZer854 = zero_padding1D_layer(Cro15375, 1, 0, Zer854), 
LMin55771 = minimum_layer([Res55252,Zer854], Min55771), 
LZer74993 = zero_padding1D_layer(Min55771, 1, 0, Zer74993), 
LCon77056 = concatenate_layer([Zer74993,[[[0.0964, 0.1446], [0.7312, 0.5884], [0.9648, 0.5358]]]], 2, Con77056), 
LSub68194 = subtract_layer(Sub36979,Con77056, Sub68194), 
exec_layers([LSub36979,LGlo82959,LRes55252,LMax51664,LRes32058,LCro15375,LZer854,LMin55771,LZer74993,LCon77056,LSub68194],["Sub36979","Glo82959","Res55252","Max51664","Res32058","Cro15375","Zer854","Min55771","Zer74993","Con77056","Sub68194"],Sub68194,"Sub68194")

Actual (Unparsed): [[[0.8115000, -0.1520000, 0.2030000], [0.1756000, -0.4539000, -0.7778000], [-1.4458000, -1.4175000, -0.4777000]]]

Expected (Unparsed): [[[0.8115,-0.15199999999999997,0.20299999999999996],[0.17559999999999998,-0.4538999999999999,-0.7778],[-1.4458,-1.4175,-0.47770000000000007]]]

Actual:   [[[0.8115, -0.152, 0.203], [0.1756, -0.4539, -0.7778], [-1.4458, -1.4175, -0.4777]]]

Expected: [[[0.8115, -0.1519, 0.203], [0.1756, -0.4538, -0.7778], [-1.4458, -1.4175, -0.4777]]]