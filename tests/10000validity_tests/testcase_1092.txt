import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot5024 = tf.keras.layers.Input(shape=([3]))
in1Dot5024 = tf.keras.layers.Input(shape=([3]))
in0Ave69697 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave69697 = tf.keras.layers.Input(shape=([2, 1, 2]))

Dot5024 = keras.layers.Dot(axes=(1, 1), name = 'Dot5024', )([in0Dot5024,in1Dot5024])
Res52485 = keras.layers.Reshape((1, 1), name = 'Res52485', )(Dot5024)
Zer60633 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer60633', )(Res52485)
Ave69697 = keras.layers.Average(name = 'Ave69697', )([in0Ave69697,in1Ave69697])
Res41662 = keras.layers.Reshape((2, 2), name = 'Res41662', )(Ave69697)
Dot50294 = keras.layers.Dot(axes=(1, 1), name = 'Dot50294', )([Zer60633,Res41662])
Res39355 = keras.layers.Reshape((1, 2, 1), name = 'Res39355', )(Dot50294)
Cro29480 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro29480', )(Res39355)
model = tf.keras.models.Model(inputs=[in0Dot5024,in1Dot5024,in0Ave69697,in1Ave69697], outputs=Cro29480)
in0Dot5024 = tf.constant([[0.0103, 0.3647, 0.1365]])
in1Dot5024 = tf.constant([[0.2509, 0.2109, 0.1215]])
in0Ave69697 = tf.constant([[[[0.1659, 0.1334]], [[0.5375, 0.5976]]]])
in1Ave69697 = tf.constant([[[[0.9677, 0.2236]], [[0.3597, 0.7369]]]])
print (np.array2string(model.predict([in0Dot5024,in1Dot5024,in0Ave69697,in1Ave69697],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro29480.png')

LDot5024 = dot_layer([[0.0103, 0.3647, 0.1365]], [[0.2509, 0.2109, 0.1215]], 1, 1, Dot5024), 
LRes52485 = reshape_layer(Dot5024, [1, 1], Res52485), 
LZer60633 = zero_padding1D_layer(Res52485, 1, 0, Zer60633), 
LAve69697 = average_layer([[[[[0.1659, 0.1334]], [[0.5375, 0.5976]]]], [[[[0.9677, 0.2236]], [[0.3597, 0.7369]]]]], Ave69697), 
LRes41662 = reshape_layer(Ave69697, [2, 2], Res41662), 
LDot50294 = dot_layer(Zer60633,Res41662, 1, 1, Dot50294), 
LRes39355 = reshape_layer(Dot50294, [1, 2, 1], Res39355), 
LCro29480 = cropping2D_layer(Res39355, 0, 0, 1, 0, Cro29480), 
exec_layers([LDot5024,LRes52485,LZer60633,LAve69697,LRes41662,LDot50294,LRes39355,LCro29480],["Dot5024","Res52485","Zer60633","Ave69697","Res41662","Dot50294","Res39355","Cro29480"],Cro29480,"Cro29480")

Actual (Unparsed): [[[[0.0641122]]]]

Expected (Unparsed): [[[[0.06411221581250001]]]]

Actual:   [[[[0.0642]]]]

Expected: [[[[0.0642]]]]