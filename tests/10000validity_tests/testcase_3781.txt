import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot93893 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot93893 = tf.keras.layers.Input(shape=([2, 2]))

Dot93893 = keras.layers.Dot(axes=(1, 1), name = 'Dot93893', )([in0Dot93893,in1Dot93893])
Con61030 = keras.layers.Conv1D(3, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con61030', )(Dot93893)
Res1033 = keras.layers.Reshape((2, 3, 1), name = 'Res1033', )(Con61030)
Res38195 = keras.layers.Reshape((2, 3, 1, 1), name = 'Res38195', )(Res1033)
Glo64047 = keras.layers.GlobalMaxPool3D(name = 'Glo64047', )(Res38195)
model = tf.keras.models.Model(inputs=[in0Dot93893,in1Dot93893], outputs=Glo64047)
w = model.get_layer('Con61030').get_weights() 
w[0] = np.array([[[0.5311, 0.715, 0.1285], [0.6055, 0.8315, 0.8266]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con61030').set_weights(w) 
in0Dot93893 = tf.constant([[[0.5529, 0.661], [0.74, 0.7695]]])
in1Dot93893 = tf.constant([[[0.0736, 0.3104], [0.3041, 0.1447]]])
print (np.array2string(model.predict([in0Dot93893,in1Dot93893],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo64047.png')

LDot93893 = dot_layer([[[0.5529, 0.661], [0.74, 0.7695]]], [[[0.0736, 0.3104], [0.3041, 0.1447]]], 1, 1, Dot93893), 
LCon61030 = conv1D_layer(Dot93893, 1,[[[0.5311, 0.715, 0.1285], [0.6055, 0.8315, 0.8266]]],[0, 0, 0], 1, true, 1, Con61030), 
LRes1033 = reshape_layer(Con61030, [2, 3, 1], Res1033), 
LRes38195 = reshape_layer(Res1033, [2, 3, 1, 1], Res38195), 
LGlo64047 = global_max_pool3D_layer(Res38195, Glo64047), 
exec_layers([LDot93893,LCon61030,LRes1033,LRes38195,LGlo64047],["Dot93893","Con61030","Res1033","Res38195","Glo64047"],Glo64047,"Glo64047")

Actual (Unparsed): [[0.4652853]]

Expected (Unparsed): [[0.46528525632499995]]

Actual:   [[0.4653]]

Expected: [[0.4653]]