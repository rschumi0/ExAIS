import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub41696 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub41696 = tf.keras.layers.Input(shape=([2, 3, 2]))

Sub41696 = keras.layers.Subtract(name = 'Sub41696', )([in0Sub41696,in1Sub41696])
Res1807 = keras.layers.Reshape((2, 6), name = 'Res1807', )(Sub41696)
Con53678 = keras.layers.Conv1D(4, (2),strides=(1), padding='same', dilation_rate=(1), name = 'Con53678', )(Res1807)
model = tf.keras.models.Model(inputs=[in0Sub41696,in1Sub41696], outputs=Con53678)
w = model.get_layer('Con53678').get_weights() 
w[0] = np.array([[[0.7144, 0.1373, 0.6516, 0.4553], [0.2042, 0.7783, 0.569, 0.2273], [0.2298, 0.8657, 0.9274, 0.9182], [0.0683, 0.901, 0.0365, 0.4755], [0.8397, 0.0995, 0.9128, 0.7097], [0.3542, 0.0167, 0.1164, 0.0043]], [[0.757, 0.8354, 0.9126, 0.2133], [0.1444, 0.9244, 0.7529, 0.5841], [0.4419, 0.7744, 0.7609, 0.7473], [0.3515, 0.5752, 0.5071, 0.1684], [0.1067, 0.5014, 0.8635, 0.9705], [0.1026, 0.245, 0.1373, 0.7059]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con53678').set_weights(w) 
in0Sub41696 = tf.constant([[[[0.3498, 0.3872], [0.3814, 0.3151], [0.0037, 0.4168]], [[0.8671, 0.2358], [0.9066, 0.9447], [0.3571, 0.3686]]]])
in1Sub41696 = tf.constant([[[[0.4248, 0.4913], [0.7701, 0.89], [0.3614, 0.6665]], [[0.7938, 0.6649], [0.4452, 0.6902], [0.9882, 0.7806]]]])
print (np.array2string(model.predict([in0Sub41696,in1Sub41696],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con53678.png')

LSub41696 = subtract_layer([[[[0.3498, 0.3872], [0.3814, 0.3151], [0.0037, 0.4168]], [[0.8671, 0.2358], [0.9066, 0.9447], [0.3571, 0.3686]]]], [[[[0.4248, 0.4913], [0.7701, 0.89], [0.3614, 0.6665]], [[0.7938, 0.6649], [0.4452, 0.6902], [0.9882, 0.7806]]]], Sub41696), 
LRes1807 = reshape_layer(Sub41696, [2, 6], Res1807), 
LCon53678 = conv1D_layer(Res1807, 2,[[[0.7144, 0.1373, 0.6516, 0.4553], [0.2042, 0.7783, 0.569, 0.2273], [0.2298, 0.8657, 0.9274, 0.9182], [0.0683, 0.901, 0.0365, 0.4755], [0.8397, 0.0995, 0.9128, 0.7097], [0.3542, 0.0167, 0.1164, 0.0043]], [[0.757, 0.8354, 0.9126, 0.2133], [0.1444, 0.9244, 0.7529, 0.5841], [0.4419, 0.7744, 0.7609, 0.7473], [0.3515, 0.5752, 0.5071, 0.1684], [0.1067, 0.5014, 0.8635, 0.9705], [0.1026, 0.245, 0.1373, 0.7059]]],[0, 0, 0, 0], 1, true, 1, Con53678), 
exec_layers([LSub41696,LRes1807,LCon53678],["Sub41696","Res1807","Con53678"],Con53678,"Con53678")

Actual (Unparsed): [[[-0.4149647, -1.2346643, -1.2227028, -1.6936659], [-0.5877097, 0.2351592, -0.3832289, 0.0308480]]]

Expected (Unparsed): [[[-0.4149646800000001,-1.23466436,-1.22270282,-1.69366587],[-0.5877096999999999,0.2351591899999999,-0.38322889000000004,0.030848019999999907]]]

Actual:   [[[-0.4149, -1.2346, -1.2227, -1.6936], [-0.5877, 0.2352, -0.3832, 0.0309]]]

Expected: [[[-0.4149, -1.2346, -1.2227, -1.6936], [-0.5877, 0.2352, -0.3832, 0.0309]]]