import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max72662 = tf.keras.layers.Input(shape=([1, 2]))

Max72662 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max72662', )(in0Max72662)
LST1266 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST1266', )(Max72662)
Res54238 = keras.layers.Reshape((1, 1), name = 'Res54238', )(LST1266)
LST8658 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST8658', )(Res54238)
Res93418 = keras.layers.Reshape((1, 1), name = 'Res93418', )(LST8658)
Res8815 = keras.layers.Reshape((1, 1, 1), name = 'Res8815', )(Res93418)
Glo47684 = keras.layers.GlobalAveragePooling2D(name = 'Glo47684', )(Res8815)
model = tf.keras.models.Model(inputs=[in0Max72662], outputs=Glo47684)
w = model.get_layer('LST1266').get_weights() 
w[0] = np.array([[8, 7, 4, 1], [2, 1, 1, 1]])
w[1] = np.array([[10, 3, 8, 4]])
w[2] = np.array([3, 10, 5, 2])
model.get_layer('LST1266').set_weights(w) 
w = model.get_layer('LST8658').get_weights() 
w[0] = np.array([[8, 9, 8, 7]])
w[1] = np.array([[5, 9, 6, 4]])
w[2] = np.array([2, 2, 4, 2])
model.get_layer('LST8658').set_weights(w) 
in0Max72662 = tf.constant([[[1.0294, 1.1395]]])
print (np.array2string(model.predict([in0Max72662],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo47684.png')

LMax72662 = max_pool1D_layer([[[1.0294, 1.1395]]], 1, Max72662), 
LLST1266 = lstm_layer(Max72662,[[8, 7, 4, 1], [2, 1, 1, 1]],[[10, 3, 8, 4]],[3, 10, 5, 2], LST1266), 
LRes54238 = reshape_layer(LST1266, [1, 1], Res54238), 
LLST8658 = lstm_layer(Res54238,[[8, 9, 8, 7]],[[5, 9, 6, 4]],[2, 2, 4, 2], LST8658), 
LRes93418 = reshape_layer(LST8658, [1, 1], Res93418), 
LRes8815 = reshape_layer(Res93418, [1, 1, 1], Res8815), 
LGlo47684 = global_average_pooling2D_layer(Res8815, Glo47684), 
exec_layers([LMax72662,LLST1266,LRes54238,LLST8658,LRes93418,LRes8815,LGlo47684],["Max72662","LST1266","Res54238","LST8658","Res93418","Res8815","Glo47684"],Glo47684,"Glo47684")

Actual (Unparsed): [[0.7609129]]

Expected (Unparsed): [[0.7609128585410618]]

Actual:   [[0.761]]

Expected: [[0.761]]