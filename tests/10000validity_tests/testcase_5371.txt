import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lay71829 = tf.keras.layers.Input(shape=([3, 1]))
in0Con99137 = tf.keras.layers.Input(shape=([3, 3]))
in0Con26727 = tf.keras.layers.Input(shape=([2, 1]))

Lay71829 = keras.layers.LayerNormalization(axis=2, epsilon=1.4971373017899865, name = 'Lay71829', )(in0Lay71829)
Con99137 = keras.layers.Concatenate(axis=2, name = 'Con99137', )([Lay71829,in0Con99137])
Con26727 = keras.layers.Conv1D(4, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con26727', )(in0Con26727)
Zer93207 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer93207', )(Con26727)
Max48207 = keras.layers.Maximum(name = 'Max48207', )([Con99137,Zer93207])
Res48659 = keras.layers.Reshape((3, 4, 1), name = 'Res48659', )(Max48207)
Glo40158 = keras.layers.GlobalAveragePooling2D(name = 'Glo40158', )(Res48659)
model = tf.keras.models.Model(inputs=[in0Lay71829,in0Con99137,in0Con26727], outputs=Glo40158)
w = model.get_layer('Con26727').get_weights() 
w[0] = np.array([[[0.6171, 0.9012, 0.159, 0.8411]], [[0.4756, 0.0218, 0.9138, 0.7966]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con26727').set_weights(w) 
in0Lay71829 = tf.constant([[[1.0947], [1.4554], [1.6345]]])
in0Con99137 = tf.constant([[[0.343, 0.4517, 0.7627], [0.1214, 0.4587, 0.1877], [0.8166, 0.3615, 0.6209]]])
in0Con26727 = tf.constant([[[0.2084], [0.3667]]])
print (np.array2string(model.predict([in0Lay71829,in0Con99137,in0Con26727],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo40158.png')

LLay71829 = layer_normalization_layer([[[1.0947], [1.4554], [1.6345]]], 2, 1.4971373017899865, Lay71829), 
LCon99137 = concatenate_layer([Lay71829,[[[0.343, 0.4517, 0.7627], [0.1214, 0.4587, 0.1877], [0.8166, 0.3615, 0.6209]]]], 2, Con99137), 
LCon26727 = conv1D_layer([[[0.2084], [0.3667]]], 2,[[[0.6171, 0.9012, 0.159, 0.8411]], [[0.4756, 0.0218, 0.9138, 0.7966]]],[0, 0, 0, 0], 1, false, 1, Con26727), 
LZer93207 = zero_padding1D_layer(Con26727, 2, 0, Zer93207), 
LMax48207 = maximum_layer([Con99137,Zer93207], Max48207), 
LRes48659 = reshape_layer(Max48207, [3, 4, 1], Res48659), 
LGlo40158 = global_average_pooling2D_layer(Res48659, Glo40158), 
exec_layers([LLay71829,LCon99137,LCon26727,LZer93207,LMax48207,LRes48659,LGlo40158],["Lay71829","Con99137","Con26727","Zer93207","Max48207","Res48659","Glo40158"],Glo40158,"Glo40158")

Actual (Unparsed): [[0.3694944]]

Expected (Unparsed): [[0.36949435166666666]]

Actual:   [[0.3695]]

Expected: [[0.3695]]