import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add10966 = tf.keras.layers.Input(shape=([1, 1]))
in1Add10966 = tf.keras.layers.Input(shape=([1, 1]))
in0Con41683 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Max66517 = tf.keras.layers.Input(shape=([1, 2]))
in1Max66517 = tf.keras.layers.Input(shape=([1, 2]))
in0Con86239 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Con50660 = tf.keras.layers.Input(shape=([1, 1, 1]))

Add10966 = keras.layers.Add(name = 'Add10966', )([in0Add10966,in1Add10966])
Fla92443 = keras.layers.Flatten(name = 'Fla92443', )(Add10966)
Res70398 = keras.layers.Reshape((1, 1), name = 'Res70398', )(Fla92443)
Res1932 = keras.layers.Reshape((1, 1, 1), name = 'Res1932', )(Res70398)
Zer72122 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer72122', )(Res1932)
Con41683 = keras.layers.Concatenate(axis=3, name = 'Con41683', )([Zer72122,in0Con41683])
Max66517 = keras.layers.Maximum(name = 'Max66517', )([in0Max66517,in1Max66517])
Res25479 = keras.layers.Reshape((1, 2, 1), name = 'Res25479', )(Max66517)
Con86239 = keras.layers.Concatenate(axis=3, name = 'Con86239', )([Res25479,in0Con86239])
Con50660 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con50660', )(in0Con50660)
ReL23551 = keras.layers.ReLU(max_value=4.8456896422097495, negative_slope=8.510240692540025, threshold=9.26036272355242, name = 'ReL23551', )(Con50660)
Zer3520 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer3520', )(ReL23551)
Max10753 = keras.layers.Maximum(name = 'Max10753', )([Con86239,Zer3520])
Min20494 = keras.layers.Minimum(name = 'Min20494', )([Con41683,Max10753])
model = tf.keras.models.Model(inputs=[in0Add10966,in1Add10966,in0Con41683,in0Max66517,in1Max66517,in0Con86239,in0Con50660], outputs=Min20494)
w = model.get_layer('Con50660').get_weights() 
w[0] = np.array([[[[0.3753, 0.3578, 0.6443, 0.0849]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con50660').set_weights(w) 
in0Add10966 = tf.constant([[[0.5032]]])
in1Add10966 = tf.constant([[[0.1778]]])
in0Con41683 = tf.constant([[[[0.3117, 0.7828, 0.4506], [0.6179, 0.9876, 0.9893]]]])
in0Max66517 = tf.constant([[[0.7113, 0.2789]]])
in1Max66517 = tf.constant([[[0.5793, 0.6106]]])
in0Con86239 = tf.constant([[[[0.8819, 0.0487, 0.9012], [0.2121, 0.231, 0.6286]]]])
in0Con50660 = tf.constant([[[[0.8294]]]])
print (np.array2string(model.predict([in0Add10966,in1Add10966,in0Con41683,in0Max66517,in1Max66517,in0Con86239,in0Con50660],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min20494.png')

LAdd10966 = add_layer([[[[0.5032]]], [[[0.1778]]]], Add10966), 
LFla92443 = flatten_layer(Add10966, Fla92443), 
LRes70398 = reshape_layer(Fla92443, [1, 1], Res70398), 
LRes1932 = reshape_layer(Res70398, [1, 1, 1], Res1932), 
LZer72122 = zero_padding2D_layer(Res1932, 0, 0, 1, 0, Zer72122), 
LCon41683 = concatenate_layer([Zer72122,[[[[0.3117, 0.7828, 0.4506], [0.6179, 0.9876, 0.9893]]]]], 3, Con41683), 
LMax66517 = maximum_layer([[[[0.7113, 0.2789]]], [[[0.5793, 0.6106]]]], Max66517), 
LRes25479 = reshape_layer(Max66517, [1, 2, 1], Res25479), 
LCon86239 = concatenate_layer([Res25479,[[[[0.8819, 0.0487, 0.9012], [0.2121, 0.231, 0.6286]]]]], 3, Con86239), 
LCon50660 = conv2D_layer([[[[0.8294]]]], 1, 1,[[[[0.3753, 0.3578, 0.6443, 0.0849]]]],[0, 0, 0, 0], 1, 1, true, 1, 1, Con50660), 
LReL23551 = relu_layer(Con50660, 4.8456896422097495, 8.510240692540025, 9.26036272355242, ReL23551), 
LZer3520 = zero_padding2D_layer(ReL23551, 0, 0, 1, 0, Zer3520), 
LMax10753 = maximum_layer([Con86239,Zer3520], Max10753), 
LMin20494 = minimum_layer([Con41683,Max10753], Min20494), 
exec_layers([LAdd10966,LFla92443,LRes70398,LRes1932,LZer72122,LCon41683,LMax66517,LRes25479,LCon86239,LCon50660,LReL23551,LZer3520,LMax10753,LMin20494],["Add10966","Fla92443","Res70398","Res1932","Zer72122","Con41683","Max66517","Res25479","Con86239","Con50660","ReL23551","Zer3520","Max10753","Min20494"],Min20494,"Min20494")

Actual (Unparsed): [[[[0.0000000, 0.3117000, 0.0487000, 0.4506000], [0.6106000, 0.2121000, 0.2310000, 0.6286000]]]]

Expected (Unparsed): [[[[0,0.3117,0.0487,0.4506],[0.6106,0.2121,0.231,0.6286]]]]

Actual:   [[[[0, 0.3117, 0.0487, 0.4506], [0.6106, 0.2121, 0.231, 0.6286]]]]

Expected: [[[[0, 0.3117, 0.0487, 0.4506], [0.6106, 0.2121, 0.231, 0.6286]]]]