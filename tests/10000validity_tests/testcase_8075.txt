import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_88475 = tf.keras.layers.Input(shape=([4, 3]))
in0Glo30844 = tf.keras.layers.Input(shape=([1, 1]))
in0Con15955 = tf.keras.layers.Input(shape=([2]))
in0Con92632 = tf.keras.layers.Input(shape=([3, 3]))
in0Ave56273 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Glo64455 = tf.keras.layers.Input(shape=([2, 2, 2]))

Up_88475 = keras.layers.UpSampling1D(size=(1), name = 'Up_88475', )(in0Up_88475)
Ave46313 = keras.layers.AveragePooling1D(pool_size=(1), strides=(7), padding='same', name = 'Ave46313', )(Up_88475)
Fla17823 = keras.layers.Flatten(name = 'Fla17823', )(Ave46313)
Glo30844 = keras.layers.GlobalMaxPool1D(name = 'Glo30844', )(in0Glo30844)
Con15955 = keras.layers.Concatenate(axis=1, name = 'Con15955', )([Glo30844,in0Con15955])
Min35841 = keras.layers.Minimum(name = 'Min35841', )([Fla17823,Con15955])
Res42456 = keras.layers.Reshape((3, 1), name = 'Res42456', )(Min35841)
Con92632 = keras.layers.Concatenate(axis=2, name = 'Con92632', )([Res42456,in0Con92632])
Ave56273 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave56273', )(in0Ave56273)
Res96801 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res96801', )(Ave56273)
Glo64455 = keras.layers.GlobalAveragePooling2D(name = 'Glo64455', )(in0Glo64455)
Res155 = keras.layers.Reshape((2, 1), name = 'Res155', )(Glo64455)
Res12298 = keras.layers.Reshape((2, 1, 1), name = 'Res12298', )(Res155)
Res6985 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res6985', )(Res12298)
Up_32462 = keras.layers.UpSampling3D(size=(1, 1, 1), name = 'Up_32462', )(Res6985)
Zer38669 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer38669', )(Up_32462)
Max24000 = keras.layers.Maximum(name = 'Max24000', )([Res96801,Zer38669])
Res45800 = keras.layers.Reshape((2, 2, 2), name = 'Res45800', )(Max24000)
Res4018 = keras.layers.Reshape((2, 4), name = 'Res4018', )(Res45800)
Dot42893 = keras.layers.Dot(axes=(2, 2), name = 'Dot42893', )([Con92632,Res4018])
model = tf.keras.models.Model(inputs=[in0Up_88475,in0Glo30844,in0Con15955,in0Con92632,in0Ave56273,in0Glo64455], outputs=Dot42893)
in0Up_88475 = tf.constant([[[1.6243, 1.6439, 1.4572], [1.0095, 1.4603, 1.561], [1.8899, 1.681, 1.3215], [1.9379, 1.6255, 1.8945]]])
in0Glo30844 = tf.constant([[[1.2176]]])
in0Con15955 = tf.constant([[0.1577, 0.7529]])
in0Con92632 = tf.constant([[[0.5791, 0.1621, 0.3402], [0.994, 0.4331, 0.8817], [0.8326, 0.6764, 0.1685]]])
in0Ave56273 = tf.constant([[[[1.9029, 1.3381], [1.8543, 1.7501]], [[1.0746, 1.3809], [1.2778, 1.357]]]])
in0Glo64455 = tf.constant([[[[1.8857, 1.4816], [1.9823, 1.1886]], [[1.5419, 1.1556], [1.3838, 1.1932]]]])
print (np.array2string(model.predict([in0Up_88475,in0Glo30844,in0Con15955,in0Con92632,in0Ave56273,in0Glo64455],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot42893.png')

LUp_88475 = up_sampling1D_layer([[[1.6243, 1.6439, 1.4572], [1.0095, 1.4603, 1.561], [1.8899, 1.681, 1.3215], [1.9379, 1.6255, 1.8945]]], 1, Up_88475), 
LAve46313 = average_pooling1D_layer(Up_88475, 1, 7, true, Ave46313), 
LFla17823 = flatten_layer(Ave46313, Fla17823), 
LGlo30844 = global_max_pool1D_layer([[[1.2176]]], Glo30844), 
LCon15955 = concatenate_layer([Glo30844,[[0.1577, 0.7529]]], 1, Con15955), 
LMin35841 = minimum_layer([Fla17823,Con15955], Min35841), 
LRes42456 = reshape_layer(Min35841, [3, 1], Res42456), 
LCon92632 = concatenate_layer([Res42456,[[[0.5791, 0.1621, 0.3402], [0.994, 0.4331, 0.8817], [0.8326, 0.6764, 0.1685]]]], 2, Con92632), 
LAve56273 = average_pooling2D_layer([[[[1.9029, 1.3381], [1.8543, 1.7501]], [[1.0746, 1.3809], [1.2778, 1.357]]]], 1, 1, 1, 1, false, Ave56273), 
LRes96801 = reshape_layer(Ave56273, [2, 2, 2, 1], Res96801), 
LGlo64455 = global_average_pooling2D_layer([[[[1.8857, 1.4816], [1.9823, 1.1886]], [[1.5419, 1.1556], [1.3838, 1.1932]]]], Glo64455), 
LRes155 = reshape_layer(Glo64455, [2, 1], Res155), 
LRes12298 = reshape_layer(Res155, [2, 1, 1], Res12298), 
LRes6985 = reshape_layer(Res12298, [2, 1, 1, 1], Res6985), 
LUp_32462 = up_sampling3D_layer(Res6985, 1, 1, 1, Up_32462), 
LZer38669 = zero_padding3D_layer(Up_32462, 0, 0, 1, 0, 1, 0, Zer38669), 
LMax24000 = maximum_layer([Res96801,Zer38669], Max24000), 
LRes45800 = reshape_layer(Max24000, [2, 2, 2], Res45800), 
LRes4018 = reshape_layer(Res45800, [2, 4], Res4018), 
LDot42893 = dot_layer(Con92632,Res4018, 2, 2, Dot42893), 
exec_layers([LUp_88475,LAve46313,LFla17823,LGlo30844,LCon15955,LMin35841,LRes42456,LCon92632,LAve56273,LRes96801,LGlo64455,LRes155,LRes12298,LRes6985,LUp_32462,LZer38669,LMax24000,LRes45800,LRes4018,LDot42893],["Up_88475","Ave46313","Fla17823","Glo30844","Con15955","Min35841","Res42456","Con92632","Ave56273","Res96801","Glo64455","Res155","Res12298","Res6985","Up_32462","Zer38669","Max24000","Res45800","Res4018","Dot42893"],Dot42893,"Dot42893")

Actual (Unparsed): [[[3.9878308, 2.7768949], [3.9763192, 3.2919611], [4.0959358, 3.0517621]]]

Expected (Unparsed): [[[3.9878308000000002,2.77689493],[3.9763192299999996,3.2919611],[4.09593584,3.0517621000000004]]]

Actual:   [[[3.9879, 2.7769], [3.9764, 3.292], [4.096, 3.0518]]]

Expected: [[[3.9879, 2.7769], [3.9764, 3.292], [4.096, 3.0518]]]