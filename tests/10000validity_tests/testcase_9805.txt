import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla13916 = tf.keras.layers.Input(shape=([4, 4, 3]))
in0Add16146 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Add16146 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Fla13916 = keras.layers.Flatten(name = 'Fla13916', )(in0Fla13916)
Den37375 = keras.layers.Dense(1,name = 'Den37375', )(Fla13916)
Res201 = keras.layers.Reshape((1, 1), name = 'Res201', )(Den37375)
Res91796 = keras.layers.Reshape((1, 1, 1), name = 'Res91796', )(Res201)
Res26802 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res26802', )(Res91796)
Zer60560 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer60560', )(Res26802)
Add16146 = keras.layers.Add(name = 'Add16146', )([in0Add16146,in1Add16146])
Mul10908 = keras.layers.Multiply(name = 'Mul10908', )([Zer60560,Add16146])
model = tf.keras.models.Model(inputs=[in0Fla13916,in0Add16146,in1Add16146], outputs=Mul10908)
w = model.get_layer('Den37375').get_weights() 
w[0] = np.array([[0.9344], [0.9169], [0.4801], [0.08], [0.3003], [0.1036], [0.886], [0.8597], [0.7792], [0.7243], [0.7603], [0.1103], [0.5193], [0.5498], [0.5252], [0.1907], [0.5022], [0.556], [0.0346], [0.8862], [0.2723], [0.4614], [0.3756], [0.7359], [0.4213], [0.5654], [0.6572], [0.0577], [0.7071], [0.8089], [0.0625], [0.3196], [0.6737], [0.9404], [0.9407], [0.6074], [0.9051], [0.1627], [0.9971], [0.0739], [0.593], [0.6614], [0.7051], [0.418], [0.9276], [0.9709], [0.9058], [0.6402]])
w[1] = np.array([0.933])
model.get_layer('Den37375').set_weights(w) 
in0Fla13916 = tf.constant([[[[1.8678, 1.106, 1.8035], [1.1036, 1.7011, 1.4895], [1.9984, 1.1386, 1.2894], [1.2856, 1.3565, 1.8465]], [[1.8056, 1.93, 1.7601], [1.2587, 1.0184, 1.3064], [1.7013, 1.9972, 1.8159], [1.2925, 1.0403, 1.1247]], [[1.906, 1.0681, 1.0214], [1.2241, 1.9662, 1.8564], [1.5004, 1.8419, 1.103], [1.4872, 1.9969, 1.3507]], [[1.4667, 1.542, 1.7547], [1.3607, 1.2664, 1.8685], [1.4659, 1.0392, 1.2287], [1.9384, 1.6933, 1.0894]]]])
in0Add16146 = tf.constant([[[[[0.7538], [0.8605]]], [[[0.314], [0.6793]]]]])
in1Add16146 = tf.constant([[[[[0.6353], [0.862]]], [[[0.4972], [0.3142]]]]])
print (np.array2string(model.predict([in0Fla13916,in0Add16146,in1Add16146],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul10908.png')

LFla13916 = flatten_layer([[[[1.8678, 1.106, 1.8035], [1.1036, 1.7011, 1.4895], [1.9984, 1.1386, 1.2894], [1.2856, 1.3565, 1.8465]], [[1.8056, 1.93, 1.7601], [1.2587, 1.0184, 1.3064], [1.7013, 1.9972, 1.8159], [1.2925, 1.0403, 1.1247]], [[1.906, 1.0681, 1.0214], [1.2241, 1.9662, 1.8564], [1.5004, 1.8419, 1.103], [1.4872, 1.9969, 1.3507]], [[1.4667, 1.542, 1.7547], [1.3607, 1.2664, 1.8685], [1.4659, 1.0392, 1.2287], [1.9384, 1.6933, 1.0894]]]], Fla13916), 
LDen37375 = dense_layer(Fla13916, [[0.9344], [0.9169], [0.4801], [0.08], [0.3003], [0.1036], [0.886], [0.8597], [0.7792], [0.7243], [0.7603], [0.1103], [0.5193], [0.5498], [0.5252], [0.1907], [0.5022], [0.556], [0.0346], [0.8862], [0.2723], [0.4614], [0.3756], [0.7359], [0.4213], [0.5654], [0.6572], [0.0577], [0.7071], [0.8089], [0.0625], [0.3196], [0.6737], [0.9404], [0.9407], [0.6074], [0.9051], [0.1627], [0.9971], [0.0739], [0.593], [0.6614], [0.7051], [0.418], [0.9276], [0.9709], [0.9058], [0.6402]],[0.933], Den37375), 
LRes201 = reshape_layer(Den37375, [1, 1], Res201), 
LRes91796 = reshape_layer(Res201, [1, 1, 1], Res91796), 
LRes26802 = reshape_layer(Res91796, [1, 1, 1, 1], Res26802), 
LZer60560 = zero_padding3D_layer(Res26802, 1, 0, 0, 0, 1, 0, Zer60560), 
LAdd16146 = add_layer([[[[[[0.7538], [0.8605]]], [[[0.314], [0.6793]]]]], [[[[[0.6353], [0.862]]], [[[0.4972], [0.3142]]]]]], Add16146), 
LMul10908 = multiply_layer([Zer60560,Add16146], Mul10908), 
exec_layers([LFla13916,LDen37375,LRes201,LRes91796,LRes26802,LZer60560,LAdd16146,LMul10908],["Fla13916","Den37375","Res201","Res91796","Res26802","Zer60560","Add16146","Mul10908"],Mul10908,"Mul10908")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]]], [[[0.0000000], [42.1949832]]]]]

Expected (Unparsed): [[[[[0.0],[0.0]]],[[[0.0],[42.194982323285004]]]]]

Actual:   [[[[[0], [0]]], [[[0], [42.195]]]]]

Expected: [[[[[0], [0]]], [[[0], [42.195]]]]]