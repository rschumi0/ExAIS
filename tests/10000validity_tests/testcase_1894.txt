import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max70900 = tf.keras.layers.Input(shape=([1, 2]))
in1Max70900 = tf.keras.layers.Input(shape=([1, 2]))

Max70900 = keras.layers.Maximum(name = 'Max70900', )([in0Max70900,in1Max70900])
Res8189 = keras.layers.Reshape((1, 2, 1), name = 'Res8189', )(Max70900)
Max95318 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max95318', )(Res8189)
Zer27375 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer27375', )(Max95318)
Res46773 = keras.layers.Reshape((3, 3), name = 'Res46773', )(Zer27375)
Loc42783 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc42783', )(Res46773)
model = tf.keras.models.Model(inputs=[in0Max70900,in1Max70900], outputs=Loc42783)
w = model.get_layer('Loc42783').get_weights() 
w[0] = np.array([[[0.9219, 0.9262], [0.5722, 0.9721], [0.6667, 0.5518]], [[0.1156, 0.3064], [0.66, 0.1886], [0.6516, 0.1973]], [[0.758, 0.4915], [0.0351, 0.3448], [0.297, 0.5862]]])
w[1] = np.array([[0, 0], [0, 0], [0, 0]])
model.get_layer('Loc42783').set_weights(w) 
in0Max70900 = tf.constant([[[0.0335, 0.2821]]])
in1Max70900 = tf.constant([[[0.1056, 0.7532]]])
print (np.array2string(model.predict([in0Max70900,in1Max70900],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc42783.png')

LMax70900 = maximum_layer([[[[0.0335, 0.2821]]], [[[0.1056, 0.7532]]]], Max70900), 
LRes8189 = reshape_layer(Max70900, [1, 2, 1], Res8189), 
LMax95318 = max_pool2D_layer(Res8189, 1, 2, Max95318), 
LZer27375 = zero_padding2D_layer(Max95318, 1, 1, 1, 1, Zer27375), 
LRes46773 = reshape_layer(Zer27375, [3, 3], Res46773), 
LLoc42783 = locally_connected1D_layer(Res46773, 1,[[[0.9219, 0.9262], [0.5722, 0.9721], [0.6667, 0.5518]], [[0.1156, 0.3064], [0.66, 0.1886], [0.6516, 0.1973]], [[0.758, 0.4915], [0.0351, 0.3448], [0.297, 0.5862]]],[[0, 0], [0, 0], [0, 0]], 1, Loc42783), 
exec_layers([LMax70900,LRes8189,LMax95318,LZer27375,LRes46773,LLoc42783],["Max70900","Res8189","Max95318","Zer27375","Res46773","Loc42783"],Loc42783,"Loc42783")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.4971120, 0.1420535], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0.0,0.0],[0.497112,0.14205352],[0.0,0.0]]]

Actual:   [[[0, 0], [0.4972, 0.1421], [0, 0]]]

Expected: [[[0, 0], [0.4972, 0.1421], [0, 0]]]