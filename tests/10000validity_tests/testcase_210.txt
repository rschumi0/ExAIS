import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul94075 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Mul94075 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Con63119 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Ave62989 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave62989 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Ave86932 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave86932 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con33069 = tf.keras.layers.Input(shape=([1, 2, 3]))

Mul94075 = keras.layers.Multiply(name = 'Mul94075', )([in0Mul94075,in1Mul94075])
Res79295 = keras.layers.Reshape((1, 2, 2), name = 'Res79295', )(Mul94075)
Con63119 = keras.layers.Concatenate(axis=3, name = 'Con63119', )([Res79295,in0Con63119])
Ave62989 = keras.layers.Average(name = 'Ave62989', )([in0Ave62989,in1Ave62989])
Res86425 = keras.layers.Reshape((1, 1, 4), name = 'Res86425', )(Ave62989)
Zer51009 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer51009', )(Res86425)
Ave86932 = keras.layers.Average(name = 'Ave86932', )([in0Ave86932,in1Ave86932])
Con33069 = keras.layers.Concatenate(axis=3, name = 'Con33069', )([Ave86932,in0Con33069])
Mul75077 = keras.layers.Multiply(name = 'Mul75077', )([Zer51009,Con33069])
Add47386 = keras.layers.Add(name = 'Add47386', )([Con63119,Mul75077])
model = tf.keras.models.Model(inputs=[in0Mul94075,in1Mul94075,in0Con63119,in0Ave62989,in1Ave62989,in0Ave86932,in1Ave86932,in0Con33069], outputs=Add47386)
in0Mul94075 = tf.constant([[[[[0.048, 0.9326]], [[0.452, 0.5767]]]]])
in1Mul94075 = tf.constant([[[[[0.0759, 0.2965]], [[0.4785, 0.8566]]]]])
in0Con63119 = tf.constant([[[[0.0229, 0.0545], [0.4622, 0.5833]]]])
in0Ave62989 = tf.constant([[[[[0.2044, 0.7077], [0.6737, 0.4724]]]]])
in1Ave62989 = tf.constant([[[[[0.9368, 0.5536], [0.797, 0.3538]]]]])
in0Ave86932 = tf.constant([[[[0.4035], [0.6158]]]])
in1Ave86932 = tf.constant([[[[0.5016], [0.2629]]]])
in0Con33069 = tf.constant([[[[0.7939, 0.3907, 0.1406], [0.8309, 0.0819, 0.4849]]]])
print (np.array2string(model.predict([in0Mul94075,in1Mul94075,in0Con63119,in0Ave62989,in1Ave62989,in0Ave86932,in1Ave86932,in0Con33069],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add47386.png')

LMul94075 = multiply_layer([[[[[[0.048, 0.9326]], [[0.452, 0.5767]]]]], [[[[[0.0759, 0.2965]], [[0.4785, 0.8566]]]]]], Mul94075), 
LRes79295 = reshape_layer(Mul94075, [1, 2, 2], Res79295), 
LCon63119 = concatenate_layer([Res79295,[[[[0.0229, 0.0545], [0.4622, 0.5833]]]]], 3, Con63119), 
LAve62989 = average_layer([[[[[[0.2044, 0.7077], [0.6737, 0.4724]]]]], [[[[[0.9368, 0.5536], [0.797, 0.3538]]]]]], Ave62989), 
LRes86425 = reshape_layer(Ave62989, [1, 1, 4], Res86425), 
LZer51009 = zero_padding2D_layer(Res86425, 0, 0, 1, 0, Zer51009), 
LAve86932 = average_layer([[[[[0.4035], [0.6158]]]], [[[[0.5016], [0.2629]]]]], Ave86932), 
LCon33069 = concatenate_layer([Ave86932,[[[[0.7939, 0.3907, 0.1406], [0.8309, 0.0819, 0.4849]]]]], 3, Con33069), 
LMul75077 = multiply_layer([Zer51009,Con33069], Mul75077), 
LAdd47386 = add_layer([Con63119,Mul75077], Add47386), 
exec_layers([LMul94075,LRes79295,LCon63119,LAve62989,LRes86425,LZer51009,LAve86932,LCon33069,LMul75077,LAdd47386],["Mul94075","Res79295","Con63119","Ave62989","Res86425","Zer51009","Ave86932","Con33069","Mul75077","Add47386"],Add47386,"Add47386")

Actual (Unparsed): [[[[0.0036432, 0.2765159, 0.0229000, 0.0545000], [0.4669751, 1.0180083, 0.5224252, 0.7836122]]]]

Expected (Unparsed): [[[[0.0036431999999999997,0.2765159,0.0229,0.0545],[0.46697511,1.018008305,0.522425165,0.78361219]]]]

Actual:   [[[[0.0037, 0.2766, 0.0229, 0.0545], [0.467, 1.0181, 0.5225, 0.7837]]]]

Expected: [[[[0.0037, 0.2766, 0.0229, 0.0545], [0.467, 1.0181, 0.5225, 0.7837]]]]