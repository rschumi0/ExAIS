import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub42656 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub42656 = tf.keras.layers.Input(shape=([2, 2]))

Sub42656 = keras.layers.Subtract(name = 'Sub42656', )([in0Sub42656,in1Sub42656])
LST51341 = keras.layers.LSTM(2,recurrent_activation='sigmoid', name = 'LST51341', )(Sub42656)
model = tf.keras.models.Model(inputs=[in0Sub42656,in1Sub42656], outputs=LST51341)
w = model.get_layer('LST51341').get_weights() 
w[0] = np.array([[6, 9, 8, 6, 9, 2, 3, 9], [8, 8, 4, 2, 3, 5, 7, 5]])
w[1] = np.array([[10, 10, 4, 10, 3, 7, 5, 8], [7, 2, 9, 5, 7, 10, 3, 7]])
w[2] = np.array([7, 8, 5, 2, 4, 3, 4, 9])
model.get_layer('LST51341').set_weights(w) 
in0Sub42656 = tf.constant([[[0.3935, 0.2574], [0.7181, 0.1306]]])
in1Sub42656 = tf.constant([[[0.4597, 0.8897], [0.0262, 0.1742]]])
print (np.array2string(model.predict([in0Sub42656,in1Sub42656],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST51341.png')

LSub42656 = subtract_layer([[[0.3935, 0.2574], [0.7181, 0.1306]]], [[[0.4597, 0.8897], [0.0262, 0.1742]]], Sub42656), 
LLST51341 = lstm_layer(Sub42656,[[6, 9, 8, 6, 9, 2, 3, 9], [8, 8, 4, 2, 3, 5, 7, 5]],[[10, 10, 4, 10, 3, 7, 5, 8], [7, 2, 9, 5, 7, 10, 3, 7]],[7, 8, 5, 2, 4, 3, 4, 9], LST51341), 
exec_layers([LSub42656,LLST51341],["Sub42656","LST51341"],LST51341,"LST51341")

Actual (Unparsed): [[0.9389455, 0.6267238]]

Expected (Unparsed): [[0.9389454962468244,0.6267237342512515]]

Actual:   [[0.939, 0.6268]]

Expected: [[0.939, 0.6268]]