import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con33670 = tf.keras.layers.Input(shape=([1, 2]))
in0Con75361 = tf.keras.layers.Input(shape=([2, 3, 2, 1]))
in0Sub80242 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in1Sub80242 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in0Glo2250 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Dep22390 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con3382 = tf.keras.layers.Input(shape=([4, 3, 3]))

Con33670 = keras.layers.Conv1D(3, (1),strides=(1), padding='valid', dilation_rate=(1), name = 'Con33670', )(in0Con33670)
Res26745 = keras.layers.Reshape((1, 3, 1), name = 'Res26745', )(Con33670)
Res72926 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res72926', )(Res26745)
Zer1961 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer1961', )(Res72926)
Con75361 = keras.layers.Concatenate(axis=4, name = 'Con75361', )([Zer1961,in0Con75361])
Sub80242 = keras.layers.Subtract(name = 'Sub80242', )([in0Sub80242,in1Sub80242])
Add388 = keras.layers.Add(name = 'Add388', )([Con75361,Sub80242])
Res90500 = keras.layers.Reshape((2, 3, 4), name = 'Res90500', )(Add388)
Up_64088 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_64088', )(Res90500)
Glo2250 = keras.layers.GlobalMaxPool2D(name = 'Glo2250', )(in0Glo2250)
Res98024 = keras.layers.Reshape((1, 1), name = 'Res98024', )(Glo2250)
Res80452 = keras.layers.Reshape((1, 1, 1), name = 'Res80452', )(Res98024)
Zer53270 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer53270', )(Res80452)
Dep22390 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='same', name = 'Dep22390', )(in0Dep22390)
Bat18438 = keras.layers.BatchNormalization(axis=3, epsilon=0.5410680957118612,  name = 'Bat18438', )(Dep22390)
Sub92676 = keras.layers.Subtract(name = 'Sub92676', )([Zer53270,Bat18438])
Zer39045 = keras.layers.ZeroPadding2D(padding=((3, 0), (1, 0)), name = 'Zer39045', )(Sub92676)
Con3382 = keras.layers.Concatenate(axis=3, name = 'Con3382', )([Zer39045,in0Con3382])
Mul66118 = keras.layers.Multiply(name = 'Mul66118', )([Up_64088,Con3382])
Up_39275 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_39275', )(Mul66118)
model = tf.keras.models.Model(inputs=[in0Con33670,in0Con75361,in0Sub80242,in1Sub80242,in0Glo2250,in0Dep22390,in0Con3382], outputs=Up_39275)
w = model.get_layer('Con33670').get_weights() 
w[0] = np.array([[[0.2295, 0.3276, 0.5842], [0.6388, 0.2579, 0.1136]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con33670').set_weights(w) 
w = model.get_layer('Dep22390').get_weights() 
w[0] = np.array([[[[0.2135]], [[0.2816]]]])
w[1] = np.array([0])
model.get_layer('Dep22390').set_weights(w) 
w = model.get_layer('Bat18438').get_weights() 
w[0] = np.array([0.5089])
w[1] = np.array([0.0742])
w[2] = np.array([0.3465])
w[3] = np.array([0.2223])
model.get_layer('Bat18438').set_weights(w) 
in0Con33670 = tf.constant([[[0.905, 0.4923]]])
in0Con75361 = tf.constant([[[[[0.2914], [0.3397]], [[0.3361], [0.5892]], [[0.8825], [0.5796]]], [[[0.6732], [0.2451]], [[0.0167], [0.3033]], [[0.6431], [0.2898]]]]])
in0Sub80242 = tf.constant([[[[[0.3978, 0.0254], [0.3541, 0.955]], [[0.1884, 0.9982], [0.116, 0.1493]], [[0.7979, 0.9318], [0.3126, 0.0665]]], [[[0.298, 0.8321], [0.0325, 0.7922]], [[0.058, 0.7892], [0.7519, 0.2079]], [[0.3461, 0.8478], [0.0041, 0.2593]]]]])
in1Sub80242 = tf.constant([[[[[0.1564, 0.859], [0.7606, 0.4031]], [[0.1091, 0.6305], [0.2985, 0.8498]], [[0.2878, 0.5213], [0.293, 0.1315]]], [[[0.0424, 0.8675], [0.4967, 0.3409]], [[0.1162, 0.2718], [0.6456, 0.1112]], [[0.9326, 0.8405], [0.1656, 0.0356]]]]])
in0Glo2250 = tf.constant([[[[1.5186]], [[1.9096]]]])
in0Dep22390 = tf.constant([[[[0.8454], [0.764]]]])
in0Con3382 = tf.constant([[[[0.548, 0.3003, 0.6431], [0.4302, 0.9827, 0.2709], [0.9215, 0.6852, 0.909]], [[0.2626, 0.993, 0.944], [0.7898, 0.8301, 0.9801], [0.9371, 0.9454, 0.2957]], [[0.6303, 0.9278, 0.1052], [0.0577, 0.3067, 0.4621], [0.7062, 0.2155, 0.0593]], [[0.6822, 0.2174, 0.4477], [0.2712, 0.7954, 0.9891], [0.2426, 0.7925, 0.7813]]]])
print (np.array2string(model.predict([in0Con33670,in0Con75361,in0Sub80242,in1Sub80242,in0Glo2250,in0Dep22390,in0Con3382],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_39275.png')

LCon33670 = conv1D_layer([[[0.905, 0.4923]]], 1,[[[0.2295, 0.3276, 0.5842], [0.6388, 0.2579, 0.1136]]],[0, 0, 0], 1, false, 1, Con33670), 
LRes26745 = reshape_layer(Con33670, [1, 3, 1], Res26745), 
LRes72926 = reshape_layer(Res26745, [1, 3, 1, 1], Res72926), 
LZer1961 = zero_padding3D_layer(Res72926, 1, 0, 0, 0, 1, 0, Zer1961), 
LCon75361 = concatenate_layer([Zer1961,[[[[[0.2914], [0.3397]], [[0.3361], [0.5892]], [[0.8825], [0.5796]]], [[[0.6732], [0.2451]], [[0.0167], [0.3033]], [[0.6431], [0.2898]]]]]], 4, Con75361), 
LSub80242 = subtract_layer([[[[[0.3978, 0.0254], [0.3541, 0.955]], [[0.1884, 0.9982], [0.116, 0.1493]], [[0.7979, 0.9318], [0.3126, 0.0665]]], [[[0.298, 0.8321], [0.0325, 0.7922]], [[0.058, 0.7892], [0.7519, 0.2079]], [[0.3461, 0.8478], [0.0041, 0.2593]]]]], [[[[[0.1564, 0.859], [0.7606, 0.4031]], [[0.1091, 0.6305], [0.2985, 0.8498]], [[0.2878, 0.5213], [0.293, 0.1315]]], [[[0.0424, 0.8675], [0.4967, 0.3409]], [[0.1162, 0.2718], [0.6456, 0.1112]], [[0.9326, 0.8405], [0.1656, 0.0356]]]]], Sub80242), 
LAdd388 = add_layer([Con75361,Sub80242], Add388), 
LRes90500 = reshape_layer(Add388, [2, 3, 4], Res90500), 
LUp_64088 = up_sampling2D_layer(Res90500, 2, 1, Up_64088), 
LGlo2250 = global_max_pool2D_layer([[[[1.5186]], [[1.9096]]]], Glo2250), 
LRes98024 = reshape_layer(Glo2250, [1, 1], Res98024), 
LRes80452 = reshape_layer(Res98024, [1, 1, 1], Res80452), 
LZer53270 = zero_padding2D_layer(Res80452, 0, 0, 1, 0, Zer53270), 
LDep22390 = depthwise_conv2D_layer([[[[0.8454], [0.764]]]], 1, 2,[[[[0.2135]], [[0.2816]]]],[0], 1, 1, true, Dep22390), 
LBat18438 = batch_normalization_layer(Dep22390, 3, 0.5410680957118612, [0.5089], [0.0742], [0.3465], [0.2223], Bat18438), 
LSub92676 = subtract_layer(Zer53270,Bat18438, Sub92676), 
LZer39045 = zero_padding2D_layer(Sub92676, 3, 0, 1, 0, Zer39045), 
LCon3382 = concatenate_layer([Zer39045,[[[[0.548, 0.3003, 0.6431], [0.4302, 0.9827, 0.2709], [0.9215, 0.6852, 0.909]], [[0.2626, 0.993, 0.944], [0.7898, 0.8301, 0.9801], [0.9371, 0.9454, 0.2957]], [[0.6303, 0.9278, 0.1052], [0.0577, 0.3067, 0.4621], [0.7062, 0.2155, 0.0593]], [[0.6822, 0.2174, 0.4477], [0.2712, 0.7954, 0.9891], [0.2426, 0.7925, 0.7813]]]]], 3, Con3382), 
LMul66118 = multiply_layer([Up_64088,Con3382], Mul66118), 
LUp_39275 = up_sampling2D_layer(Mul66118, 2, 2, Up_39275), 
exec_layers([LCon33670,LRes26745,LRes72926,LZer1961,LCon75361,LSub80242,LAdd388,LRes90500,LUp_64088,LGlo2250,LRes98024,LRes80452,LZer53270,LDep22390,LBat18438,LSub92676,LZer39045,LCon3382,LMul66118,LUp_39275],["Con33670","Res26745","Res72926","Zer1961","Con75361","Sub80242","Add388","Res90500","Up_64088","Glo2250","Res98024","Res80452","Zer53270","Dep22390","Bat18438","Sub92676","Zer39045","Con3382","Mul66118","Up_39275"],Up_39275,"Up_39275")

Actual (Unparsed): [[[[0.0000000, -0.2971256, -0.1220719, 0.5733880], [0.0000000, -0.2971256, -0.1220719, 0.5733880], [0.0000000, 0.3027748, -0.1793428, -0.0301512], [0.0000000, 0.3027748, -0.1793428, -0.0301512], [0.0000000, 1.1914995, 0.0134299, 0.4677714], [0.0000000, 1.1914995, 0.0134299, 0.4677714]], [[0.0000000, -0.2971256, -0.1220719, 0.5733880], [0.0000000, -0.2971256, -0.1220719, 0.5733880], [0.0000000, 0.3027748, -0.1793428, -0.0301512], [0.0000000, 0.3027748, -0.1793428, -0.0301512], [0.0000000, 1.1914995, 0.0134299, 0.4677714], [0.0000000, 1.1914995, 0.0134299, 0.4677714]], [[0.0000000, -0.1423817, -0.4036545, 0.8416704], [0.0000000, -0.1423817, -0.4036545, 0.8416704], [0.0000000, 0.5558612, -0.1514933, -0.1090851], [0.0000000, 0.5558612, -0.1514933, -0.1090851], [0.0000000, 1.2116703, 0.0185298, 0.1521672], [0.0000000, 1.2116703, 0.0185298, 0.1521672]], [[0.0000000, -0.1423817, -0.4036545, 0.8416704], [0.0000000, -0.1423817, -0.4036545, 0.8416704], [0.0000000, 0.5558612, -0.1514933, -0.1090851], [0.0000000, 0.5558612, -0.1514933, -0.1090851], [0.0000000, 1.2116703, 0.0185298, 0.1521672], [0.0000000, 1.2116703, 0.0185298, 0.1521672]], [[0.0000000, 0.4020053, 0.0537927, 0.0732613], [0.0000000, 0.4020053, 0.0537927, 0.0732613], [-0.0000000, 0.0308176, 0.1624719, 0.1848400], [-0.0000000, 0.0308176, 0.1624719, 0.1848400], [-0.0000000, 0.4593125, 0.0911837, 0.0304505], [-0.0000000, 0.4593125, 0.0911837, 0.0304505]], [[0.0000000, 0.4020053, 0.0537927, 0.0732613], [0.0000000, 0.4020053, 0.0537927, 0.0732613], [-0.0000000, 0.0308176, 0.1624719, 0.1848400], [-0.0000000, 0.0308176, 0.1624719, 0.1848400], [-0.0000000, 0.4593125, 0.0911837, 0.0304505], [-0.0000000, 0.4593125, 0.0911837, 0.0304505]], [[0.0000000, 0.4351072, 0.0126046, 0.3117783], [0.0000000, 0.4351072, 0.0126046, 0.3117783], [0.0059841, 0.1448479, 0.4213569, 0.3956400], [0.0059841, 0.1448479, 0.4213569, 0.3956400], [-1.1391091, 0.1577870, 0.3353276, 0.4011975], [-1.1391091, 0.1577870, 0.3353276, 0.4011975]], [[0.0000000, 0.4351072, 0.0126046, 0.3117783], [0.0000000, 0.4351072, 0.0126046, 0.3117783], [0.0059841, 0.1448479, 0.4213569, 0.3956400], [0.0059841, 0.1448479, 0.4213569, 0.3956400], [-1.1391091, 0.1577870, 0.3353276, 0.4011975], [-1.1391091, 0.1577870, 0.3353276, 0.4011975]]]]

Expected (Unparsed): [[[[0.0,-0.29712560000000005,-0.12207195000000001,0.5733879599999999],[0.0,-0.29712560000000005,-0.12207195000000001,0.5733879599999999],[0.0,0.30277476000000003,-0.17934275,-0.030151170000000015],[0.0,0.30277476000000003,-0.17934275,-0.030151170000000015],[0.0,1.1914995,0.013429920000000005,0.46777139999999995],[0.0,1.1914995,0.013429920000000005,0.46777139999999995]],[[0.0,-0.29712560000000005,-0.12207195000000001,0.5733879599999999],[0.0,-0.29712560000000005,-0.12207195000000001,0.5733879599999999],[0.0,0.30277476000000003,-0.17934275,-0.030151170000000015],[0.0,0.30277476000000003,-0.17934275,-0.030151170000000015],[0.0,1.1914995,0.013429920000000005,0.46777139999999995],[0.0,1.1914995,0.013429920000000005,0.46777139999999995]],[[0.0,-0.14238172000000002,-0.4036545,0.8416703999999999],[0.0,-0.14238172000000002,-0.4036545,0.8416703999999999],[0.0,0.5558612399999999,-0.15149325,-0.10908513000000006],[0.0,0.5558612399999999,-0.15149325,-0.10908513000000006],[0.0,1.2116703,0.018529840000000006,0.15216722],[0.0,1.2116703,0.018529840000000006,0.15216722]],[[0.0,-0.14238172000000002,-0.4036545,0.8416703999999999],[0.0,-0.14238172000000002,-0.4036545,0.8416703999999999],[0.0,0.5558612399999999,-0.15149325,-0.10908513000000006],[0.0,0.5558612399999999,-0.15149325,-0.10908513000000006],[0.0,1.2116703,0.018529840000000006,0.15216722],[0.0,1.2116703,0.018529840000000006,0.15216722]],[[0.0,0.40200533999999993,0.053792674972000125,0.07326128],[0.0,0.40200533999999993,0.053792674972000125,0.07326128],[-0.0,0.03081757000000001,0.16247192353900003,0.18484],[-0.0,0.03081757000000001,0.16247192353900003,0.18484],[-0.0,0.45931248,0.09118371334000001,0.030450549999999996],[-0.0,0.45931248,0.09118371334000001,0.030450549999999996]],[[0.0,0.40200533999999993,0.053792674972000125,0.07326128],[0.0,0.40200533999999993,0.053792674972000125,0.07326128],[-0.0,0.03081757000000001,0.16247192353900003,0.18484],[-0.0,0.03081757000000001,0.16247192353900003,0.18484],[-0.0,0.45931248,0.09118371334000001,0.030450549999999996],[-0.0,0.45931248,0.09118371334000001,0.030450549999999996]],[[0.0,0.43510716,0.012604578076000031,0.31177828],[0.0,0.43510716,0.012604578076000031,0.31177828],[0.005984083464174147,0.14484792000000005,0.42135692201800007,0.39564],[0.005984083464174147,0.14484792000000005,0.42135692201800007,0.39564],[-1.1391090082590225,0.15778704,0.33532757690000004,0.40119754999999996],[-1.1391090082590225,0.15778704,0.33532757690000004,0.40119754999999996]],[[0.0,0.43510716,0.012604578076000031,0.31177828],[0.0,0.43510716,0.012604578076000031,0.31177828],[0.005984083464174147,0.14484792000000005,0.42135692201800007,0.39564],[0.005984083464174147,0.14484792000000005,0.42135692201800007,0.39564],[-1.1391090082590225,0.15778704,0.33532757690000004,0.40119754999999996],[-1.1391090082590225,0.15778704,0.33532757690000004,0.40119754999999996]]]]

Actual:   [[[[0, -0.2971, -0.122, 0.5734], [0, -0.2971, -0.122, 0.5734], [0, 0.3028, -0.1793, -0.0301], [0, 0.3028, -0.1793, -0.0301], [0, 1.1915, 0.0135, 0.4678], [0, 1.1915, 0.0135, 0.4678]], [[0, -0.2971, -0.122, 0.5734], [0, -0.2971, -0.122, 0.5734], [0, 0.3028, -0.1793, -0.0301], [0, 0.3028, -0.1793, -0.0301], [0, 1.1915, 0.0135, 0.4678], [0, 1.1915, 0.0135, 0.4678]], [[0, -0.1423, -0.4036, 0.8417], [0, -0.1423, -0.4036, 0.8417], [0, 0.5559, -0.1514, -0.109], [0, 0.5559, -0.1514, -0.109], [0, 1.2117, 0.0186, 0.1522], [0, 1.2117, 0.0186, 0.1522]], [[0, -0.1423, -0.4036, 0.8417], [0, -0.1423, -0.4036, 0.8417], [0, 0.5559, -0.1514, -0.109], [0, 0.5559, -0.1514, -0.109], [0, 1.2117, 0.0186, 0.1522], [0, 1.2117, 0.0186, 0.1522]], [[0, 0.4021, 0.0538, 0.0733], [0, 0.4021, 0.0538, 0.0733], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.4594, 0.0912, 0.0305], [-0, 0.4594, 0.0912, 0.0305]], [[0, 0.4021, 0.0538, 0.0733], [0, 0.4021, 0.0538, 0.0733], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.4594, 0.0912, 0.0305], [-0, 0.4594, 0.0912, 0.0305]], [[0, 0.4352, 0.0127, 0.3118], [0, 0.4352, 0.0127, 0.3118], [0.006, 0.1449, 0.4214, 0.3957], [0.006, 0.1449, 0.4214, 0.3957], [-1.1391, 0.1578, 0.3354, 0.4012], [-1.1391, 0.1578, 0.3354, 0.4012]], [[0, 0.4352, 0.0127, 0.3118], [0, 0.4352, 0.0127, 0.3118], [0.006, 0.1449, 0.4214, 0.3957], [0.006, 0.1449, 0.4214, 0.3957], [-1.1391, 0.1578, 0.3354, 0.4012], [-1.1391, 0.1578, 0.3354, 0.4012]]]]

Expected: [[[[0, -0.2971, -0.122, 0.5734], [0, -0.2971, -0.122, 0.5734], [0, 0.3028, -0.1793, -0.0301], [0, 0.3028, -0.1793, -0.0301], [0, 1.1915, 0.0135, 0.4678], [0, 1.1915, 0.0135, 0.4678]], [[0, -0.2971, -0.122, 0.5734], [0, -0.2971, -0.122, 0.5734], [0, 0.3028, -0.1793, -0.0301], [0, 0.3028, -0.1793, -0.0301], [0, 1.1915, 0.0135, 0.4678], [0, 1.1915, 0.0135, 0.4678]], [[0, -0.1423, -0.4036, 0.8417], [0, -0.1423, -0.4036, 0.8417], [0, 0.5559, -0.1514, -0.109], [0, 0.5559, -0.1514, -0.109], [0, 1.2117, 0.0186, 0.1522], [0, 1.2117, 0.0186, 0.1522]], [[0, -0.1423, -0.4036, 0.8417], [0, -0.1423, -0.4036, 0.8417], [0, 0.5559, -0.1514, -0.109], [0, 0.5559, -0.1514, -0.109], [0, 1.2117, 0.0186, 0.1522], [0, 1.2117, 0.0186, 0.1522]], [[0, 0.4021, 0.0538, 0.0733], [0, 0.4021, 0.0538, 0.0733], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.4594, 0.0912, 0.0305], [-0, 0.4594, 0.0912, 0.0305]], [[0, 0.4021, 0.0538, 0.0733], [0, 0.4021, 0.0538, 0.0733], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.0309, 0.1625, 0.1849], [-0, 0.4594, 0.0912, 0.0305], [-0, 0.4594, 0.0912, 0.0305]], [[0, 0.4352, 0.0127, 0.3118], [0, 0.4352, 0.0127, 0.3118], [0.006, 0.1449, 0.4214, 0.3957], [0.006, 0.1449, 0.4214, 0.3957], [-1.1391, 0.1578, 0.3354, 0.4012], [-1.1391, 0.1578, 0.3354, 0.4012]], [[0, 0.4352, 0.0127, 0.3118], [0, 0.4352, 0.0127, 0.3118], [0.006, 0.1449, 0.4214, 0.3957], [0.006, 0.1449, 0.4214, 0.3957], [-1.1391, 0.1578, 0.3354, 0.4012], [-1.1391, 0.1578, 0.3354, 0.4012]]]]