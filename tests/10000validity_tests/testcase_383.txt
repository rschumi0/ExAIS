import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub45821 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub45821 = tf.keras.layers.Input(shape=([2, 2]))
in0Con55416 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Cro75940 = tf.keras.layers.Input(shape=([1, 4, 3, 3]))
in0Add88552 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add88552 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min54655 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Min54655 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Con3179 = tf.keras.layers.Input(shape=([2, 2, 3, 2]))

Sub45821 = keras.layers.Subtract(name = 'Sub45821', )([in0Sub45821,in1Sub45821])
Lea73490 = keras.layers.LeakyReLU(alpha=1.2559324871989583, name = 'Lea73490', )(Sub45821)
Lay57445 = keras.layers.LayerNormalization(axis=1, epsilon=1.9636904752139297, name = 'Lay57445', )(Lea73490)
Res72853 = keras.layers.Reshape((2, 2, 1), name = 'Res72853', )(Lay57445)
Res22587 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res22587', )(Res72853)
Con55416 = keras.layers.Concatenate(axis=4, name = 'Con55416', )([Res22587,in0Con55416])
Cro75940 = keras.layers.Cropping3D(cropping=((0, 0), (2, 0), (1, 1)), name = 'Cro75940', )(in0Cro75940)
Zer27579 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer27579', )(Cro75940)
Add32442 = keras.layers.Add(name = 'Add32442', )([Con55416,Zer27579])
Zer717 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer717', )(Add32442)
Add88552 = keras.layers.Add(name = 'Add88552', )([in0Add88552,in1Add88552])
Res76115 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res76115', )(Add88552)
Zer53524 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer53524', )(Res76115)
Min54655 = keras.layers.Minimum(name = 'Min54655', )([in0Min54655,in1Min54655])
Zer20536 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer20536', )(Min54655)
Max48494 = keras.layers.Maximum(name = 'Max48494', )([Zer53524,Zer20536])
Con3179 = keras.layers.Concatenate(axis=4, name = 'Con3179', )([Max48494,in0Con3179])
Min7321 = keras.layers.Minimum(name = 'Min7321', )([Zer717,Con3179])
model = tf.keras.models.Model(inputs=[in0Sub45821,in1Sub45821,in0Con55416,in0Cro75940,in0Add88552,in1Add88552,in0Min54655,in1Min54655,in0Con3179], outputs=Min7321)
in0Sub45821 = tf.constant([[[0.2601, 0.2364], [0.6116, 0.8337]]])
in1Sub45821 = tf.constant([[[0.9117, 0.5451], [0.8975, 0.3209]]])
in0Con55416 = tf.constant([[[[[0.4691, 0.3546]], [[0.8355, 0.9122]]], [[[0.086, 0.206]], [[0.6099, 0.356]]]]])
in0Cro75940 = tf.constant([[[[[1.3759, 1.4443, 1.186], [1.1084, 1.9588, 1.6142], [1.9299, 1.3461, 1.7851]], [[1.6532, 1.3143, 1.1368], [1.6025, 1.8378, 1.7583], [1.8388, 1.251, 1.7374]], [[1.8816, 1.8566, 1.1264], [1.4939, 1.0535, 1.6795], [1.5183, 1.013, 1.7698]], [[1.0659, 1.6617, 1.4048], [1.1421, 1.5633, 1.7044], [1.7572, 1.7218, 1.0053]]]]])
in0Add88552 = tf.constant([[[[0.5652], [0.7293]], [[0.7354], [0.2351]]]])
in1Add88552 = tf.constant([[[[0.8319], [0.5128]], [[0.5571], [0.0632]]]])
in0Min54655 = tf.constant([[[[[0.4331], [0.4234]]], [[[0.9101], [0.3906]]]]])
in1Min54655 = tf.constant([[[[[0.8061], [0.7578]]], [[[0.8523], [0.5019]]]]])
in0Con3179 = tf.constant([[[[[0.1652, 0.0015], [0.56, 0.1127], [0.9861, 0.9607]], [[0.8073, 0.7905], [0.6369, 0.8692], [0.4585, 0.7808]]], [[[0.7232, 0.9014], [0.2143, 0.9874], [0.981, 0.2048]], [[0.1822, 0.1098], [0.4589, 0.2097], [0.8941, 0.286]]]]])
print (np.array2string(model.predict([in0Sub45821,in1Sub45821,in0Con55416,in0Cro75940,in0Add88552,in1Add88552,in0Min54655,in1Min54655,in0Con3179],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min7321.png')

LSub45821 = subtract_layer([[[0.2601, 0.2364], [0.6116, 0.8337]]], [[[0.9117, 0.5451], [0.8975, 0.3209]]], Sub45821), 
LLea73490 = leaky_relu_layer(Sub45821, 1.2559324871989583, Lea73490), 
LLay57445 = layer_normalization_layer(Lea73490, 1, 1.9636904752139297, Lay57445), 
LRes72853 = reshape_layer(Lay57445, [2, 2, 1], Res72853), 
LRes22587 = reshape_layer(Res72853, [2, 2, 1, 1], Res22587), 
LCon55416 = concatenate_layer([Res22587,[[[[[0.4691, 0.3546]], [[0.8355, 0.9122]]], [[[0.086, 0.206]], [[0.6099, 0.356]]]]]], 4, Con55416), 
LCro75940 = cropping3D_layer([[[[[1.3759, 1.4443, 1.186], [1.1084, 1.9588, 1.6142], [1.9299, 1.3461, 1.7851]], [[1.6532, 1.3143, 1.1368], [1.6025, 1.8378, 1.7583], [1.8388, 1.251, 1.7374]], [[1.8816, 1.8566, 1.1264], [1.4939, 1.0535, 1.6795], [1.5183, 1.013, 1.7698]], [[1.0659, 1.6617, 1.4048], [1.1421, 1.5633, 1.7044], [1.7572, 1.7218, 1.0053]]]]], 0, 0, 2, 0, 1, 1, Cro75940), 
LZer27579 = zero_padding3D_layer(Cro75940, 1, 0, 0, 0, 0, 0, Zer27579), 
LAdd32442 = add_layer([Con55416,Zer27579], Add32442), 
LZer717 = zero_padding3D_layer(Add32442, 0, 0, 0, 0, 2, 0, Zer717), 
LAdd88552 = add_layer([[[[[0.5652], [0.7293]], [[0.7354], [0.2351]]]], [[[[0.8319], [0.5128]], [[0.5571], [0.0632]]]]], Add88552), 
LRes76115 = reshape_layer(Add88552, [2, 2, 1, 1], Res76115), 
LZer53524 = zero_padding3D_layer(Res76115, 0, 0, 0, 0, 2, 0, Zer53524), 
LMin54655 = minimum_layer([[[[[[0.4331], [0.4234]]], [[[0.9101], [0.3906]]]]], [[[[[0.8061], [0.7578]]], [[[0.8523], [0.5019]]]]]], Min54655), 
LZer20536 = zero_padding3D_layer(Min54655, 0, 0, 1, 0, 1, 0, Zer20536), 
LMax48494 = maximum_layer([Zer53524,Zer20536], Max48494), 
LCon3179 = concatenate_layer([Max48494,[[[[[0.1652, 0.0015], [0.56, 0.1127], [0.9861, 0.9607]], [[0.8073, 0.7905], [0.6369, 0.8692], [0.4585, 0.7808]]], [[[0.7232, 0.9014], [0.2143, 0.9874], [0.981, 0.2048]], [[0.1822, 0.1098], [0.4589, 0.2097], [0.8941, 0.286]]]]]], 4, Con3179), 
LMin7321 = minimum_layer([Zer717,Con3179], Min7321), 
exec_layers([LSub45821,LLea73490,LLay57445,LRes72853,LRes22587,LCon55416,LCro75940,LZer27579,LAdd32442,LZer717,LAdd88552,LRes76115,LZer53524,LMin54655,LZer20536,LMax48494,LCon3179,LMin7321],["Sub45821","Lea73490","Lay57445","Res72853","Res22587","Con55416","Cro75940","Zer27579","Add32442","Zer717","Add88552","Res76115","Zer53524","Min54655","Zer20536","Max48494","Con3179","Min7321"],Min7321,"Min7321")

Actual (Unparsed): [[[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-0.1617223, 0.4691000, 0.3546000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-0.3059043, 0.4585000, 0.7808000]]], [[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [1.2925000, 0.9810000, 0.2048000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.3906000, 0.8941000, 0.2860000]]]]]

Expected (Unparsed): [[[[[0,0,0],[0,0,0],[-0.16172228285245277,0.4691,0.3546]],[[0,0,0],[0,0,0],[-0.30590432716289884,0.4585,0.7808]]],[[[0,0,0],[0,0,0],[1.2925,0.981,0.2048]],[[0,0,0],[0,0,0],[0.3906,0.8941,0.286]]]]]

Actual:   [[[[[0, 0, 0], [0, 0, 0], [-0.1617, 0.4691, 0.3546]], [[0, 0, 0], [0, 0, 0], [-0.3059, 0.4585, 0.7808]]], [[[0, 0, 0], [0, 0, 0], [1.2925, 0.981, 0.2048]], [[0, 0, 0], [0, 0, 0], [0.3906, 0.8941, 0.286]]]]]

Expected: [[[[[0, 0, 0], [0, 0, 0], [-0.1617, 0.4691, 0.3546]], [[0, 0, 0], [0, 0, 0], [-0.3059, 0.4585, 0.7808]]], [[[0, 0, 0], [0, 0, 0], [1.2925, 0.981, 0.2048]], [[0, 0, 0], [0, 0, 0], [0.3906, 0.8941, 0.286]]]]]