import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer13375 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0Sof33591 = tf.keras.layers.Input(shape=([1, 2]))
in0Con25240 = tf.keras.layers.Input(shape=([1, 1]))
in0Per14155 = tf.keras.layers.Input(shape=([3, 3]))
in0Con62474 = tf.keras.layers.Input(shape=([6, 2]))
in0Min75113 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Min75113 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Max61711 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max61711 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con97537 = tf.keras.layers.Input(shape=([6, 1]))

Zer13375 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer13375', )(in0Zer13375)
Ave77033 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Ave77033', )(Zer13375)
Res57148 = keras.layers.Reshape((6, 5), name = 'Res57148', )(Ave77033)
Sof33591 = keras.layers.Softmax(axis=1, name = 'Sof33591', input_shape=(1, 2))(in0Sof33591)
Con25240 = keras.layers.Concatenate(axis=2, name = 'Con25240', )([Sof33591,in0Con25240])
Per14155 = keras.layers.Permute((1,2), name = 'Per14155',)(in0Per14155)
Dot97596 = keras.layers.Dot(axes=(2, 2), name = 'Dot97596', )([Con25240,Per14155])
Zer63294 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer63294', )(Dot97596)
Con62474 = keras.layers.Concatenate(axis=2, name = 'Con62474', )([Zer63294,in0Con62474])
Ave23592 = keras.layers.Average(name = 'Ave23592', )([Res57148,Con62474])
Min75113 = keras.layers.Minimum(name = 'Min75113', )([in0Min75113,in1Min75113])
Res90329 = keras.layers.Reshape((1, 2, 2), name = 'Res90329', )(Min75113)
Max61711 = keras.layers.Maximum(name = 'Max61711', )([in0Max61711,in1Max61711])
Add34683 = keras.layers.Add(name = 'Add34683', )([Res90329,Max61711])
Res83277 = keras.layers.Reshape((1, 4), name = 'Res83277', )(Add34683)
Zer86681 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer86681', )(Res83277)
Zer54334 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer54334', )(Zer86681)
Con97537 = keras.layers.Concatenate(axis=2, name = 'Con97537', )([Zer54334,in0Con97537])
Add10882 = keras.layers.Add(name = 'Add10882', )([Ave23592,Con97537])
model = tf.keras.models.Model(inputs=[in0Zer13375,in0Sof33591,in0Con25240,in0Per14155,in0Con62474,in0Min75113,in1Min75113,in0Max61711,in1Max61711,in0Con97537], outputs=Add10882)
in0Zer13375 = tf.constant([[[[1.5387], [1.0219], [1.8591]], [[1.7789], [1.1452], [1.82]], [[1.9384], [1.3445], [1.7887]], [[1.0501], [1.083], [1.5648]]]])
in0Sof33591 = tf.constant([[[0.0945, 0.573]]])
in0Con25240 = tf.constant([[[0.2629]]])
in0Per14155 = tf.constant([[[1.131, 1.2503, 1.0299], [1.7636, 1.4903, 1.4428], [1.7839, 1.6573, 1.0821]]])
in0Con62474 = tf.constant([[[0.8486, 0.4604], [0.1509, 0.03], [0.4825, 0.0434], [0.7704, 0.9604], [0.3835, 0.3019], [0.2476, 0.5508]]])
in0Min75113 = tf.constant([[[[[0.7984], [0.9647]], [[0.2294], [0.9905]]]]])
in1Min75113 = tf.constant([[[[[0.7734], [0.534]], [[0.6785], [0.3118]]]]])
in0Max61711 = tf.constant([[[[0.9893, 0.188], [0.5409, 0.3864]]]])
in1Max61711 = tf.constant([[[[0.1227, 0.2152], [0.6968, 0.8005]]]])
in0Con97537 = tf.constant([[[0.863], [0.9006], [0.0063], [0.9393], [0.107], [0.2716]]])
print (np.array2string(model.predict([in0Zer13375,in0Sof33591,in0Con25240,in0Per14155,in0Con62474,in0Min75113,in1Min75113,in0Max61711,in1Max61711,in0Con97537],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add10882.png')

LZer13375 = zero_padding2D_layer([[[[1.5387], [1.0219], [1.8591]], [[1.7789], [1.1452], [1.82]], [[1.9384], [1.3445], [1.7887]], [[1.0501], [1.083], [1.5648]]]], 1, 1, 1, 1, Zer13375), 
LAve77033 = average_pooling2D_layer(Zer13375, 1, 1, 1, 1, true, Ave77033), 
LRes57148 = reshape_layer(Ave77033, [6, 5], Res57148), 
LSof33591 = softmax_layer([[[0.0945, 0.573]]], 1, Sof33591), 
LCon25240 = concatenate_layer([Sof33591,[[[0.2629]]]], 2, Con25240), 
LPer14155 = permute_layer([[[1.131, 1.2503, 1.0299], [1.7636, 1.4903, 1.4428], [1.7839, 1.6573, 1.0821]]], 1,2, Per14155), 
LDot97596 = dot_layer(Con25240,Per14155, 2, 2, Dot97596), 
LZer63294 = zero_padding1D_layer(Dot97596, 5, 0, Zer63294), 
LCon62474 = concatenate_layer([Zer63294,[[[0.8486, 0.4604], [0.1509, 0.03], [0.4825, 0.0434], [0.7704, 0.9604], [0.3835, 0.3019], [0.2476, 0.5508]]]], 2, Con62474), 
LAve23592 = average_layer([Res57148,Con62474], Ave23592), 
LMin75113 = minimum_layer([[[[[[0.7984], [0.9647]], [[0.2294], [0.9905]]]]], [[[[[0.7734], [0.534]], [[0.6785], [0.3118]]]]]], Min75113), 
LRes90329 = reshape_layer(Min75113, [1, 2, 2], Res90329), 
LMax61711 = maximum_layer([[[[[0.9893, 0.188], [0.5409, 0.3864]]]], [[[[0.1227, 0.2152], [0.6968, 0.8005]]]]], Max61711), 
LAdd34683 = add_layer([Res90329,Max61711], Add34683), 
LRes83277 = reshape_layer(Add34683, [1, 4], Res83277), 
LZer86681 = zero_padding1D_layer(Res83277, 1, 1, Zer86681), 
LZer54334 = zero_padding1D_layer(Zer86681, 3, 0, Zer54334), 
LCon97537 = concatenate_layer([Zer54334,[[[0.863], [0.9006], [0.0063], [0.9393], [0.107], [0.2716]]]], 2, Con97537), 
LAdd10882 = add_layer([Ave23592,Con97537], Add10882), 
exec_layers([LZer13375,LAve77033,LRes57148,LSof33591,LCon25240,LPer14155,LDot97596,LZer63294,LCon62474,LAve23592,LMin75113,LRes90329,LMax61711,LAdd34683,LRes83277,LZer86681,LZer54334,LCon97537,LAdd10882],["Zer13375","Ave77033","Res57148","Sof33591","Con25240","Per14155","Dot97596","Zer63294","Con62474","Ave23592","Min75113","Res90329","Max61711","Add34683","Res83277","Zer86681","Zer54334","Con97537","Add10882"],Add10882,"Add10882")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.4243000, 1.0932000], [0.0000000, 0.7693500, 0.5109500, 1.0050000, 0.9156000], [0.0000000, 0.8894500, 0.5726000, 1.1512500, 0.0280000], [0.0000000, 0.9692000, 0.6722500, 1.2795500, 1.4195000], [1.7627000, 1.2742500, 1.4677000, 2.0864500, 0.2579500], [1.3260304, 1.8166061, 1.8628421, 0.1238000, 0.5470000]]]

Expected (Unparsed): [[[0,0,0,0.4243,1.0932],[0,0.76935,0.51095,1.005,0.9156],[0,0.88945,0.5726,1.15125,0.028],[0,0.9692,0.67225,1.27955,1.4195],[1.7627,1.27425,1.4676999999999998,2.08645,0.25795],[1.3260303549999999,1.8166060599999998,1.862842045,0.1238,0.5469999999999999]]]

Actual:   [[[0, 0, 0, 0.4243, 1.0932], [0, 0.7694, 0.511, 1.005, 0.9156], [0, 0.8895, 0.5726, 1.1513, 0.028], [0, 0.9692, 0.6723, 1.2796, 1.4195], [1.7627, 1.2743, 1.4677, 2.0865, 0.258], [1.3261, 1.8167, 1.8629, 0.1238, 0.547]]]

Expected: [[[0, 0, 0, 0.4243, 1.0932], [0, 0.7694, 0.511, 1.005, 0.9156], [0, 0.8895, 0.5726, 1.1513, 0.028], [0, 0.9692, 0.6723, 1.2796, 1.4195], [1.7627, 1.2743, 1.4677, 2.0865, 0.258], [1.3261, 1.8167, 1.8629, 0.1238, 0.547]]]