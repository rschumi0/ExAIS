import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave28782 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave28782 = tf.keras.layers.Input(shape=([2, 1]))

Ave28782 = keras.layers.Average(name = 'Ave28782', )([in0Ave28782,in1Ave28782])
Res66570 = keras.layers.Reshape((2, 1, 1), name = 'Res66570', )(Ave28782)
Res78254 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res78254', )(Res66570)
Con1286 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con1286', )(Res78254)
Res1148 = keras.layers.Reshape((2, 1, 2), name = 'Res1148', )(Con1286)
Glo82488 = keras.layers.GlobalMaxPool2D(name = 'Glo82488', )(Res1148)
Res26102 = keras.layers.Reshape((2, 1), name = 'Res26102', )(Glo82488)
Res5626 = keras.layers.Reshape((2, 1, 1), name = 'Res5626', )(Res26102)
Con41859 = keras.layers.Conv2DTranspose(3, (2, 1),strides=(1, 7), padding='same', name = 'Con41859', )(Res5626)
Res55387 = keras.layers.Reshape((2, 7, 3, 1), name = 'Res55387', )(Con41859)
Cro6429 = keras.layers.Cropping3D(cropping=((0, 0), (0, 6), (2, 0)), name = 'Cro6429', )(Res55387)
model = tf.keras.models.Model(inputs=[in0Ave28782,in1Ave28782], outputs=Cro6429)
w = model.get_layer('Con1286').get_weights() 
w[0] = np.array([[[[[0.7149], [0.8536]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con1286').set_weights(w) 
w = model.get_layer('Con41859').get_weights() 
w[0] = np.array([[[[0.4145], [0.8667], [0.2047]]], [[[0.3976], [0.5421], [0.7191]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con41859').set_weights(w) 
in0Ave28782 = tf.constant([[[0.6599], [0.9819]]])
in1Ave28782 = tf.constant([[[0.1151], [0.7715]]])
print (np.array2string(model.predict([in0Ave28782,in1Ave28782],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro6429.png')

LAve28782 = average_layer([[[[0.6599], [0.9819]]], [[[0.1151], [0.7715]]]], Ave28782), 
LRes66570 = reshape_layer(Ave28782, [2, 1, 1], Res66570), 
LRes78254 = reshape_layer(Res66570, [2, 1, 1, 1], Res78254), 
LCon1286 = conv3D_transpose_layer(Res78254, 1, 1, 1,[[[[[0.7149], [0.8536]]]]],[0, 0], 1, 1, 1, true, Con1286), 
LRes1148 = reshape_layer(Con1286, [2, 1, 2], Res1148), 
LGlo82488 = global_max_pool2D_layer(Res1148, Glo82488), 
LRes26102 = reshape_layer(Glo82488, [2, 1], Res26102), 
LRes5626 = reshape_layer(Res26102, [2, 1, 1], Res5626), 
LCon41859 = conv2D_transpose_layer(Res5626, 2, 1,[[[[0.4145], [0.8667], [0.2047]]], [[[0.3976], [0.5421], [0.7191]]]],[0, 0, 0], 1, 7, true, Con41859), 
LRes55387 = reshape_layer(Con41859, [2, 7, 3, 1], Res55387), 
LCro6429 = cropping3D_layer(Res55387, 0, 0, 0, 6, 2, 0, Cro6429), 
exec_layers([LAve28782,LRes66570,LRes78254,LCon1286,LRes1148,LGlo82488,LRes26102,LRes5626,LCon41859,LRes55387,LCro6429],["Ave28782","Res66570","Res78254","Con1286","Res1148","Glo82488","Res26102","Res5626","Con41859","Res55387","Cro6429"],Cro6429,"Cro6429")

Actual (Unparsed): [[[[[0.1282963]]], [[[0.6038854]]]]]

Expected (Unparsed): [[[[[0.128296304301]]],[[[0.603885434317]]]]]

Actual:   [[[[[0.1283]]], [[[0.6039]]]]]

Expected: [[[[[0.1283]]], [[[0.6039]]]]]