import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave8577 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con67965 = tf.keras.layers.Input(shape=([1, 2]))
in0Per34874 = tf.keras.layers.Input(shape=([4, 4]))

Ave8577 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 5), padding='same', name = 'Ave8577', )(in0Ave8577)
Res82565 = keras.layers.Reshape((1, 2), name = 'Res82565', )(Ave8577)
Per98843 = keras.layers.Permute((1,2), name = 'Per98843',)(Res82565)
Con67965 = keras.layers.Concatenate(axis=2, name = 'Con67965', )([Per98843,in0Con67965])
Per34874 = keras.layers.Permute((2,1), name = 'Per34874',)(in0Per34874)
Zer34628 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer34628', )(Per34874)
Dot73833 = keras.layers.Dot(axes=(2, 2), name = 'Dot73833', )([Con67965,Zer34628])
model = tf.keras.models.Model(inputs=[in0Ave8577,in0Con67965,in0Per34874], outputs=Dot73833)
in0Ave8577 = tf.constant([[[[1.0731, 1.1574]]]])
in0Con67965 = tf.constant([[[0.0731, 0.4117]]])
in0Per34874 = tf.constant([[[1.8063, 1.5688, 1.5389, 1.7111], [1.0757, 1.7385, 1.3583, 1.29], [1.2447, 1.031, 1.7036, 1.3333], [1.3797, 1.2383, 1.0759, 1.358]]])
print (np.array2string(model.predict([in0Ave8577,in0Con67965,in0Per34874],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot73833.png')

LAve8577 = average_pooling2D_layer([[[[1.0731, 1.1574]]]], 1, 1, 1, 5, true, Ave8577), 
LRes82565 = reshape_layer(Ave8577, [1, 2], Res82565), 
LPer98843 = permute_layer(Res82565, 1,2, Per98843), 
LCon67965 = concatenate_layer([Per98843,[[[0.0731, 0.4117]]]], 2, Con67965), 
LPer34874 = permute_layer([[[1.8063, 1.5688, 1.5389, 1.7111], [1.0757, 1.7385, 1.3583, 1.29], [1.2447, 1.031, 1.7036, 1.3333], [1.3797, 1.2383, 1.0759, 1.358]]], 2,1, Per34874), 
LZer34628 = zero_padding1D_layer(Per34874, 3, 0, Zer34628), 
LDot73833 = dot_layer(Con67965,Zer34628, 2, 2, Dot73833), 
exec_layers([LAve8577,LRes82565,LPer98843,LCon67965,LPer34874,LZer34628,LDot73833],["Ave8577","Res82565","Per98843","Con67965","Per34874","Zer34628","Dot73833"],Dot73833,"Dot73833")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 3.8423658, 4.2807933, 3.7909712, 3.9857802]]]

Expected (Unparsed): [[[0.0,0.0,0.0,3.84236577,4.2807933899999995,3.7909712,3.98578024]]]

Actual:   [[[0, 0, 0, 3.8424, 4.2808, 3.791, 3.9858]]]

Expected: [[[0, 0, 0, 3.8424, 4.2808, 3.791, 3.9858]]]