import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max57121 = tf.keras.layers.Input(shape=([1, 2]))
in0Con48466 = tf.keras.layers.Input(shape=([1, 2]))
in0Up_69449 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0Glo49818 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con68478 = tf.keras.layers.Input(shape=([1, 10]))

Max57121 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max57121', )(in0Max57121)
Con48466 = keras.layers.Concatenate(axis=2, name = 'Con48466', )([Max57121,in0Con48466])
Up_69449 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_69449', )(in0Up_69449)
Res59497 = keras.layers.Reshape((6, 4), name = 'Res59497', )(Up_69449)
Zer11308 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer11308', )(Res59497)
Dot76771 = keras.layers.Dot(axes=(2, 2), name = 'Dot76771', )([Con48466,Zer11308])
Glo49818 = keras.layers.GlobalAveragePooling3D(name = 'Glo49818', )(in0Glo49818)
Res23103 = keras.layers.Reshape((1, 1), name = 'Res23103', )(Glo49818)
Max65545 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max65545', )(Res23103)
Con68478 = keras.layers.Concatenate(axis=2, name = 'Con68478', )([Max65545,in0Con68478])
Min73912 = keras.layers.Minimum(name = 'Min73912', )([Dot76771,Con68478])
model = tf.keras.models.Model(inputs=[in0Max57121,in0Con48466,in0Up_69449,in0Glo49818,in0Con68478], outputs=Min73912)
in0Max57121 = tf.constant([[[1.844, 1.0384]]])
in0Con48466 = tf.constant([[[0.084, 0.1193]]])
in0Up_69449 = tf.constant([[[[1.4826], [1.2471]], [[1.4256], [1.7765]], [[1.0039], [1.4802]]]])
in0Glo49818 = tf.constant([[[[[1.7912]]]]])
in0Con68478 = tf.constant([[[0.354, 0.4291, 0.3026, 0.5345, 0.0643, 0.8159, 0.6882, 0.6344, 0.7985, 0.9029]]])
print (np.array2string(model.predict([in0Max57121,in0Con48466,in0Up_69449,in0Glo49818,in0Con68478],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min73912.png')

LMax57121 = max_pool1D_layer([[[1.844, 1.0384]]], 1, 1, false, Max57121), 
LCon48466 = concatenate_layer([Max57121,[[[0.084, 0.1193]]]], 2, Con48466), 
LUp_69449 = up_sampling2D_layer([[[[1.4826], [1.2471]], [[1.4256], [1.7765]], [[1.0039], [1.4802]]]], 2, 2, Up_69449), 
LRes59497 = reshape_layer(Up_69449, [6, 4], Res59497), 
LZer11308 = zero_padding1D_layer(Res59497, 5, 0, Zer11308), 
LDot76771 = dot_layer(Con48466,Zer11308, 2, 2, Dot76771), 
LGlo49818 = global_average_pooling3D_layer([[[[[1.7912]]]]], Glo49818), 
LRes23103 = reshape_layer(Glo49818, [1, 1], Res23103), 
LMax65545 = max_pool1D_layer(Res23103, 1, 1, false, Max65545), 
LCon68478 = concatenate_layer([Max65545,[[[0.354, 0.4291, 0.3026, 0.5345, 0.0643, 0.8159, 0.6882, 0.6344, 0.7985, 0.9029]]]], 2, Con68478), 
LMin73912 = minimum_layer([Dot76771,Con68478], Min73912), 
exec_layers([LMax57121,LCon48466,LUp_69449,LRes59497,LZer11308,LDot76771,LGlo49818,LRes23103,LMax65545,LCon68478,LMin73912],["Max57121","Con48466","Up_69449","Res59497","Zer11308","Dot76771","Glo49818","Res23103","Max65545","Con68478","Min73912"],Min73912,"Min73912")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0643000, 0.8159000, 0.6882000, 0.6344000, 0.7985000, 0.9029000]]]

Expected (Unparsed): [[[0.0,0.0,0.0,0.0,0.0,0.0643,0.8159,0.6882,0.6344,0.7985,0.9029]]]

Actual:   [[[0, 0, 0, 0, 0, 0.0643, 0.8159, 0.6882, 0.6344, 0.7985, 0.9029]]]

Expected: [[[0, 0, 0, 0, 0, 0.0643, 0.8159, 0.6882, 0.6344, 0.7985, 0.9029]]]