import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add74896 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add74896 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Mul69582 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul69582 = tf.keras.layers.Input(shape=([2, 2]))

Add74896 = keras.layers.Add(name = 'Add74896', )([in0Add74896,in1Add74896])
Res73319 = keras.layers.Reshape((1, 2, 1), name = 'Res73319', )(Add74896)
Glo10213 = keras.layers.GlobalAveragePooling2D(name = 'Glo10213', )(Res73319)
Sof82563 = keras.layers.Softmax(axis=1, name = 'Sof82563', )(Glo10213)
Res30226 = keras.layers.Reshape((1, 1), name = 'Res30226', )(Sof82563)
Res56908 = keras.layers.Reshape((1, 1, 1), name = 'Res56908', )(Res30226)
Mul69582 = keras.layers.Multiply(name = 'Mul69582', )([in0Mul69582,in1Mul69582])
Res63883 = keras.layers.Reshape((2, 2, 1), name = 'Res63883', )(Mul69582)
Cro35627 = keras.layers.Cropping2D(cropping=((0, 1), (1, 0)), name = 'Cro35627', )(Res63883)
Min33661 = keras.layers.Minimum(name = 'Min33661', )([Res56908,Cro35627])
model = tf.keras.models.Model(inputs=[in0Add74896,in1Add74896,in0Mul69582,in1Mul69582], outputs=Min33661)
in0Add74896 = tf.constant([[[[[0.3184]], [[0.4598]]]]])
in1Add74896 = tf.constant([[[[[0.1782]], [[0.5841]]]]])
in0Mul69582 = tf.constant([[[0.6322, 0.788], [0.3919, 0.6251]]])
in1Mul69582 = tf.constant([[[0.476, 0.2307], [0.7384, 0.7048]]])
print (np.array2string(model.predict([in0Add74896,in1Add74896,in0Mul69582,in1Mul69582],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min33661.png')

LAdd74896 = add_layer([[[[[[0.3184]], [[0.4598]]]]], [[[[[0.1782]], [[0.5841]]]]]], Add74896), 
LRes73319 = reshape_layer(Add74896, [1, 2, 1], Res73319), 
LGlo10213 = global_average_pooling2D_layer(Res73319, Glo10213), 
LSof82563 = softmax_layer(Glo10213, 1, Sof82563), 
LRes30226 = reshape_layer(Sof82563, [1, 1], Res30226), 
LRes56908 = reshape_layer(Res30226, [1, 1, 1], Res56908), 
LMul69582 = multiply_layer([[[[0.6322, 0.788], [0.3919, 0.6251]]], [[[0.476, 0.2307], [0.7384, 0.7048]]]], Mul69582), 
LRes63883 = reshape_layer(Mul69582, [2, 2, 1], Res63883), 
LCro35627 = cropping2D_layer(Res63883, 0, 1, 1, 0, Cro35627), 
LMin33661 = minimum_layer([Res56908,Cro35627], Min33661), 
exec_layers([LAdd74896,LRes73319,LGlo10213,LSof82563,LRes30226,LRes56908,LMul69582,LRes63883,LCro35627,LMin33661],["Add74896","Res73319","Glo10213","Sof82563","Res30226","Res56908","Mul69582","Res63883","Cro35627","Min33661"],Min33661,"Min33661")

Actual (Unparsed): [[[[0.1817916]]]]

Expected (Unparsed): [[[[0.1817916]]]]

Actual:   [[[[0.1818]]]]

Expected: [[[[0.1818]]]]