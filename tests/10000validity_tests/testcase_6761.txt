import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_12523 = tf.keras.layers.Input(shape=([4, 1]))
in0Con46702 = tf.keras.layers.Input(shape=([4, 1]))
in0Cro55970 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con44075 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot69404 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot69404 = tf.keras.layers.Input(shape=([3, 2]))

Up_12523 = keras.layers.UpSampling1D(size=(1), name = 'Up_12523', )(in0Up_12523)
Con46702 = keras.layers.Concatenate(axis=2, name = 'Con46702', )([Up_12523,in0Con46702])
Cro55970 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro55970', )(in0Cro55970)
Res83661 = keras.layers.Reshape((1, 1), name = 'Res83661', )(Cro55970)
Zer82925 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer82925', )(Res83661)
Con44075 = keras.layers.Concatenate(axis=2, name = 'Con44075', )([Zer82925,in0Con44075])
Dot69404 = keras.layers.Dot(axes=(1, 1), name = 'Dot69404', )([in0Dot69404,in1Dot69404])
Max44872 = keras.layers.Maximum(name = 'Max44872', )([Con44075,Dot69404])
Zer87976 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer87976', )(Max44872)
Max89073 = keras.layers.Maximum(name = 'Max89073', )([Con46702,Zer87976])
model = tf.keras.models.Model(inputs=[in0Up_12523,in0Con46702,in0Cro55970,in0Con44075,in0Dot69404,in1Dot69404], outputs=Max89073)
in0Up_12523 = tf.constant([[[1.0445], [1.919], [1.3482], [1.5148]]])
in0Con46702 = tf.constant([[[0.2009], [0.5068], [0.8844], [0.2932]]])
in0Cro55970 = tf.constant([[[[1.8419]]]])
in0Con44075 = tf.constant([[[0.5051], [0.8388]]])
in0Dot69404 = tf.constant([[[0.6399, 0.2295], [0.1196, 0.637], [0.1953, 0.6289]]])
in1Dot69404 = tf.constant([[[0.2006, 0.5699], [0.5262, 0.9423], [0.8324, 0.0383]]])
print (np.array2string(model.predict([in0Up_12523,in0Con46702,in0Cro55970,in0Con44075,in0Dot69404,in1Dot69404],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max89073.png')

LUp_12523 = up_sampling1D_layer([[[1.0445], [1.919], [1.3482], [1.5148]]], 1, Up_12523), 
LCon46702 = concatenate_layer([Up_12523,[[[0.2009], [0.5068], [0.8844], [0.2932]]]], 2, Con46702), 
LCro55970 = cropping2D_layer([[[[1.8419]]]], 0, 0, 0, 0, Cro55970), 
LRes83661 = reshape_layer(Cro55970, [1, 1], Res83661), 
LZer82925 = zero_padding1D_layer(Res83661, 1, 0, Zer82925), 
LCon44075 = concatenate_layer([Zer82925,[[[0.5051], [0.8388]]]], 2, Con44075), 
LDot69404 = dot_layer([[[0.6399, 0.2295], [0.1196, 0.637], [0.1953, 0.6289]]], [[[0.2006, 0.5699], [0.5262, 0.9423], [0.8324, 0.0383]]], 1, 1, Dot69404), 
LMax44872 = maximum_layer([Con44075,Dot69404], Max44872), 
LZer87976 = zero_padding1D_layer(Max44872, 2, 0, Zer87976), 
LMax89073 = maximum_layer([Con46702,Zer87976], Max89073), 
exec_layers([LUp_12523,LCon46702,LCro55970,LRes83661,LZer82925,LCon44075,LDot69404,LMax44872,LZer87976,LMax89073],["Up_12523","Con46702","Cro55970","Res83661","Zer82925","Con44075","Dot69404","Max44872","Zer87976","Max89073"],Max89073,"Max89073")

Actual (Unparsed): [[[1.0445000, 0.2009000], [1.9190000, 0.5068000], [1.3482000, 0.8844000], [1.8419000, 0.8388000]]]

Expected (Unparsed): [[[1.0445,0.2009],[1.919,0.5068],[1.3482,0.8844],[1.8419,0.8388]]]

Actual:   [[[1.0445, 0.2009], [1.919, 0.5068], [1.3482, 0.8844], [1.8419, 0.8388]]]

Expected: [[[1.0445, 0.2009], [1.919, 0.5068], [1.3482, 0.8844], [1.8419, 0.8388]]]