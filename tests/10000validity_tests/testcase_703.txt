import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max79377 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max79377 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Add93166 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add93166 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con24363 = tf.keras.layers.Input(shape=([1, 2, 3]))

Max79377 = keras.layers.Maximum(name = 'Max79377', )([in0Max79377,in1Max79377])
Res7536 = keras.layers.Reshape((1, 2, 4), name = 'Res7536', )(Max79377)
Add93166 = keras.layers.Add(name = 'Add93166', )([in0Add93166,in1Add93166])
Zer66153 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer66153', )(Add93166)
Con24363 = keras.layers.Concatenate(axis=3, name = 'Con24363', )([Zer66153,in0Con24363])
Mul30784 = keras.layers.Multiply(name = 'Mul30784', )([Res7536,Con24363])
model = tf.keras.models.Model(inputs=[in0Max79377,in1Max79377,in0Add93166,in1Add93166,in0Con24363], outputs=Mul30784)
in0Max79377 = tf.constant([[[[[0.7654, 0.0294], [0.1362, 0.6583]], [[0.9679, 0.0711], [0.5171, 0.8268]]]]])
in1Max79377 = tf.constant([[[[[0.0107, 0.6262], [0.759, 0.0613]], [[0.5921, 0.243], [0.8761, 0.7364]]]]])
in0Add93166 = tf.constant([[[[0.3024]]]])
in1Add93166 = tf.constant([[[[0.5439]]]])
in0Con24363 = tf.constant([[[[0.8176, 0.9625, 0.7784], [0.0582, 0.4225, 0.4953]]]])
print (np.array2string(model.predict([in0Max79377,in1Max79377,in0Add93166,in1Add93166,in0Con24363],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul30784.png')

LMax79377 = maximum_layer([[[[[[0.7654, 0.0294], [0.1362, 0.6583]], [[0.9679, 0.0711], [0.5171, 0.8268]]]]], [[[[[0.0107, 0.6262], [0.759, 0.0613]], [[0.5921, 0.243], [0.8761, 0.7364]]]]]], Max79377), 
LRes7536 = reshape_layer(Max79377, [1, 2, 4], Res7536), 
LAdd93166 = add_layer([[[[[0.3024]]]], [[[[0.5439]]]]], Add93166), 
LZer66153 = zero_padding2D_layer(Add93166, 0, 0, 1, 0, Zer66153), 
LCon24363 = concatenate_layer([Zer66153,[[[[0.8176, 0.9625, 0.7784], [0.0582, 0.4225, 0.4953]]]]], 3, Con24363), 
LMul30784 = multiply_layer([Res7536,Con24363], Mul30784), 
exec_layers([LMax79377,LRes7536,LAdd93166,LZer66153,LCon24363,LMul30784],["Max79377","Res7536","Add93166","Zer66153","Con24363","Mul30784"],Mul30784,"Mul30784")

Actual (Unparsed): [[[[0.0000000, 0.5119811, 0.7305375, 0.5124207], [0.8191338, 0.0141426, 0.3701523, 0.4095140]]]]

Expected (Unparsed): [[[[0.0,0.51198112,0.7305375000000001,0.5124207199999999],[0.81913377,0.0141426,0.37015224999999996,0.40951404]]]]

Actual:   [[[[0, 0.512, 0.7306, 0.5125], [0.8192, 0.0142, 0.3702, 0.4096]]]]

Expected: [[[[0, 0.512, 0.7306, 0.5125], [0.8192, 0.0142, 0.3702, 0.4096]]]]