import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul2961 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul2961 = tf.keras.layers.Input(shape=([1, 2]))
in0Sof20151 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Ave77889 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Ave77755 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave77755 = tf.keras.layers.Input(shape=([1, 2]))
in0Dot8049 = tf.keras.layers.Input(shape=([2]))
in1Dot8049 = tf.keras.layers.Input(shape=([2]))
in0Con49841 = tf.keras.layers.Input(shape=([1]))

Mul2961 = keras.layers.Multiply(name = 'Mul2961', )([in0Mul2961,in1Mul2961])
Res66876 = keras.layers.Reshape((1, 2, 1), name = 'Res66876', )(Mul2961)
Res33204 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res33204', )(Res66876)
Zer71854 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer71854', )(Res33204)
Sof20151 = keras.layers.Softmax(axis=1, name = 'Sof20151', input_shape=(1, 2, 2, 1))(in0Sof20151)
Min74608 = keras.layers.Minimum(name = 'Min74608', )([Zer71854,Sof20151])
Res62134 = keras.layers.Reshape((1, 2, 2), name = 'Res62134', )(Min74608)
Glo48567 = keras.layers.GlobalMaxPool2D(name = 'Glo48567', )(Res62134)
Ave77889 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave77889', )(in0Ave77889)
Res88603 = keras.layers.Reshape((1, 2), name = 'Res88603', )(Ave77889)
Ave77755 = keras.layers.Average(name = 'Ave77755', )([in0Ave77755,in1Ave77755])
Mul75675 = keras.layers.Multiply(name = 'Mul75675', )([Res88603,Ave77755])
Fla75426 = keras.layers.Flatten(name = 'Fla75426', )(Mul75675)
Dot8049 = keras.layers.Dot(axes=(1, 1), name = 'Dot8049', )([in0Dot8049,in1Dot8049])
Con49841 = keras.layers.Concatenate(axis=1, name = 'Con49841', )([Dot8049,in0Con49841])
Mul64805 = keras.layers.Multiply(name = 'Mul64805', )([Fla75426,Con49841])
Min39923 = keras.layers.Minimum(name = 'Min39923', )([Glo48567,Mul64805])
model = tf.keras.models.Model(inputs=[in0Mul2961,in1Mul2961,in0Sof20151,in0Ave77889,in0Ave77755,in1Ave77755,in0Dot8049,in1Dot8049,in0Con49841], outputs=Min39923)
in0Mul2961 = tf.constant([[[0.353, 0.8814]]])
in1Mul2961 = tf.constant([[[0.8991, 0.5929]]])
in0Sof20151 = tf.constant([[[[[0.0895], [0.6906]], [[0.5234], [0.6446]]]]])
in0Ave77889 = tf.constant([[[[1.0404, 1.0996]]]])
in0Ave77755 = tf.constant([[[0.4467, 0.4251]]])
in1Ave77755 = tf.constant([[[0.6318, 0.0983]]])
in0Dot8049 = tf.constant([[0.7265, 0.6136]])
in1Dot8049 = tf.constant([[0.5249, 0.8002]])
in0Con49841 = tf.constant([[0.5658]])
print (np.array2string(model.predict([in0Mul2961,in1Mul2961,in0Sof20151,in0Ave77889,in0Ave77755,in1Ave77755,in0Dot8049,in1Dot8049,in0Con49841],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min39923.png')

LMul2961 = multiply_layer([[[[0.353, 0.8814]]], [[[0.8991, 0.5929]]]], Mul2961), 
LRes66876 = reshape_layer(Mul2961, [1, 2, 1], Res66876), 
LRes33204 = reshape_layer(Res66876, [1, 2, 1, 1], Res33204), 
LZer71854 = zero_padding3D_layer(Res33204, 0, 0, 0, 0, 1, 0, Zer71854), 
LSof20151 = softmax_layer([[[[[0.0895], [0.6906]], [[0.5234], [0.6446]]]]], 1, Sof20151), 
LMin74608 = minimum_layer([Zer71854,Sof20151], Min74608), 
LRes62134 = reshape_layer(Min74608, [1, 2, 2], Res62134), 
LGlo48567 = global_max_pool2D_layer(Res62134, Glo48567), 
LAve77889 = average_pooling2D_layer([[[[1.0404, 1.0996]]]], 1, 1, Ave77889), 
LRes88603 = reshape_layer(Ave77889, [1, 2], Res88603), 
LAve77755 = average_layer([[[[0.4467, 0.4251]]], [[[0.6318, 0.0983]]]], Ave77755), 
LMul75675 = multiply_layer([Res88603,Ave77755], Mul75675), 
LFla75426 = flatten_layer(Mul75675, Fla75426), 
LDot8049 = dot_layer([[0.7265, 0.6136]], [[0.5249, 0.8002]], 1, 1, Dot8049), 
LCon49841 = concatenate_layer([Dot8049,[[0.5658]]], 1, Con49841), 
LMul64805 = multiply_layer([Fla75426,Con49841], Mul64805), 
LMin39923 = minimum_layer([Glo48567,Mul64805], Min39923), 
exec_layers([LMul2961,LRes66876,LRes33204,LZer71854,LSof20151,LMin74608,LRes62134,LGlo48567,LAve77889,LRes88603,LAve77755,LMul75675,LFla75426,LDot8049,LCon49841,LMul64805,LMin39923],["Mul2961","Res66876","Res33204","Zer71854","Sof20151","Min74608","Res62134","Glo48567","Ave77889","Res88603","Ave77755","Mul75675","Fla75426","Dot8049","Con49841","Mul64805","Min39923"],Min39923,"Min39923")

Actual (Unparsed): [[0.0000000, 0.1628176]]

Expected (Unparsed): [[0,0.16281761805599998]]

Actual:   [[0, 0.1629]]

Expected: [[0, 0.1629]]