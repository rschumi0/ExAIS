import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Per9427 = tf.keras.layers.Input(shape=([4, 3]))

Per9427 = keras.layers.Permute((2,1), name = 'Per9427',)(in0Per9427)
Ave43538 = keras.layers.AveragePooling1D(pool_size=(1), strides=(9), padding='same', name = 'Ave43538', )(Per9427)
model = tf.keras.models.Model(inputs=[in0Per9427], outputs=Ave43538)
in0Per9427 = tf.constant([[[1.4829, 1.3468, 1.1859], [1.3693, 1.5458, 1.848], [1.9527, 1.4292, 1.545], [1.8818, 1.5338, 1.3902]]])
print (np.array2string(model.predict([in0Per9427],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave43538.png')

LPer9427 = permute_layer([[[1.4829, 1.3468, 1.1859], [1.3693, 1.5458, 1.848], [1.9527, 1.4292, 1.545], [1.8818, 1.5338, 1.3902]]], 2,1, Per9427), 
LAve43538 = average_pooling1D_layer(Per9427, 1, 9, true, Ave43538), 
exec_layers([LPer9427,LAve43538],["Per9427","Ave43538"],Ave43538,"Ave43538")

Actual (Unparsed): [[[1.4829000, 1.3693000, 1.9527000, 1.8818001]]]

Expected (Unparsed): [[[1.4829,1.3693,1.9527,1.8818]]]

Actual:   [[[1.4829, 1.3693, 1.9527, 1.8819]]]

Expected: [[[1.4829, 1.3693, 1.9527, 1.8818]]]