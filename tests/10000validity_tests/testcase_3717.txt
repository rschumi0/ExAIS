import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave78037 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave78037 = tf.keras.layers.Input(shape=([1, 2]))
in0Con36307 = tf.keras.layers.Input(shape=([8]))
in0Sub8408 = tf.keras.layers.Input(shape=([2]))
in1Sub8408 = tf.keras.layers.Input(shape=([2]))
in0Con33253 = tf.keras.layers.Input(shape=([2, 1, 3, 1]))
in0Mul7997 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Mul7997 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Sub48323 = tf.keras.layers.Input(shape=([3]))
in1Sub48323 = tf.keras.layers.Input(shape=([3]))
in0Con14699 = tf.keras.layers.Input(shape=([9]))

Ave78037 = keras.layers.Average(name = 'Ave78037', )([in0Ave78037,in1Ave78037])
Up_50357 = keras.layers.UpSampling1D(size=(2), name = 'Up_50357', )(Ave78037)
Per29098 = keras.layers.Permute((2,1), name = 'Per29098',)(Up_50357)
Fla73032 = keras.layers.Flatten(name = 'Fla73032', )(Per29098)
Con36307 = keras.layers.Concatenate(axis=1, name = 'Con36307', )([Fla73032,in0Con36307])
Sub8408 = keras.layers.Subtract(name = 'Sub8408', )([in0Sub8408,in1Sub8408])
Res83998 = keras.layers.Reshape((2, 1), name = 'Res83998', )(Sub8408)
Res21703 = keras.layers.Reshape((2, 1, 1), name = 'Res21703', )(Res83998)
Res22323 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res22323', )(Res21703)
Zer95910 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer95910', )(Res22323)
Con33253 = keras.layers.Concatenate(axis=4, name = 'Con33253', )([Zer95910,in0Con33253])
Mul7997 = keras.layers.Multiply(name = 'Mul7997', )([in0Mul7997,in1Mul7997])
Zer25075 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer25075', )(Mul7997)
Sub77534 = keras.layers.Subtract(name = 'Sub77534', )([Con33253,Zer25075])
Thr12796 = keras.layers.ThresholdedReLU(theta=8.387493019822509, name = 'Thr12796', )(Sub77534)
Res63472 = keras.layers.Reshape((2, 1, 6), name = 'Res63472', )(Thr12796)
Res7319 = keras.layers.Reshape((2, 6), name = 'Res7319', )(Res63472)
Fla39484 = keras.layers.Flatten(name = 'Fla39484', )(Res7319)
Sub48323 = keras.layers.Subtract(name = 'Sub48323', )([in0Sub48323,in1Sub48323])
Con14699 = keras.layers.Concatenate(axis=1, name = 'Con14699', )([Sub48323,in0Con14699])
Add16152 = keras.layers.Add(name = 'Add16152', )([Fla39484,Con14699])
Max69506 = keras.layers.Maximum(name = 'Max69506', )([Con36307,Add16152])
model = tf.keras.models.Model(inputs=[in0Ave78037,in1Ave78037,in0Con36307,in0Sub8408,in1Sub8408,in0Con33253,in0Mul7997,in1Mul7997,in0Sub48323,in1Sub48323,in0Con14699], outputs=Max69506)
in0Ave78037 = tf.constant([[[0.5232, 0.1476]]])
in1Ave78037 = tf.constant([[[0.9244, 0.7787]]])
in0Con36307 = tf.constant([[0.6737, 0.6061, 0.3665, 0.3514, 0.5377, 0.4624, 0.1288, 0.5729]])
in0Sub8408 = tf.constant([[0.3331, 0.7708]])
in1Sub8408 = tf.constant([[0.0296, 0.3523]])
in0Con33253 = tf.constant([[[[[0.2223], [0.8482], [0.6091]]], [[[0.8331], [0.3843], [0.9078]]]]])
in0Mul7997 = tf.constant([[[[[0.7202, 0.9581], [0.2868, 0.4216]]]]])
in1Mul7997 = tf.constant([[[[[0.3792, 0.4861], [0.0182, 0.2311]]]]])
in0Sub48323 = tf.constant([[0.6752, 0.7014, 0.5308]])
in1Sub48323 = tf.constant([[0.0508, 0.726, 0.1403]])
in0Con14699 = tf.constant([[0.2239, 0.8486, 0.6954, 0.1889, 0.9875, 0.3028, 0.8201, 0.1382, 0.0142]])
print (np.array2string(model.predict([in0Ave78037,in1Ave78037,in0Con36307,in0Sub8408,in1Sub8408,in0Con33253,in0Mul7997,in1Mul7997,in0Sub48323,in1Sub48323,in0Con14699],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max69506.png')

LAve78037 = average_layer([[[[0.5232, 0.1476]]], [[[0.9244, 0.7787]]]], Ave78037), 
LUp_50357 = up_sampling1D_layer(Ave78037, 2, Up_50357), 
LPer29098 = permute_layer(Up_50357, 2,1, Per29098), 
LFla73032 = flatten_layer(Per29098, Fla73032), 
LCon36307 = concatenate_layer([Fla73032,[[0.6737, 0.6061, 0.3665, 0.3514, 0.5377, 0.4624, 0.1288, 0.5729]]], 1, Con36307), 
LSub8408 = subtract_layer([[0.3331, 0.7708]], [[0.0296, 0.3523]], Sub8408), 
LRes83998 = reshape_layer(Sub8408, [2, 1], Res83998), 
LRes21703 = reshape_layer(Res83998, [2, 1, 1], Res21703), 
LRes22323 = reshape_layer(Res21703, [2, 1, 1, 1], Res22323), 
LZer95910 = zero_padding3D_layer(Res22323, 0, 0, 0, 0, 2, 0, Zer95910), 
LCon33253 = concatenate_layer([Zer95910,[[[[[0.2223], [0.8482], [0.6091]]], [[[0.8331], [0.3843], [0.9078]]]]]], 4, Con33253), 
LMul7997 = multiply_layer([[[[[[0.7202, 0.9581], [0.2868, 0.4216]]]]], [[[[[0.3792, 0.4861], [0.0182, 0.2311]]]]]], Mul7997), 
LZer25075 = zero_padding3D_layer(Mul7997, 1, 0, 0, 0, 1, 0, Zer25075), 
LSub77534 = subtract_layer(Con33253,Zer25075, Sub77534), 
LThr12796 = thresholded_relu_layer(Sub77534, 8.387493019822509, Thr12796), 
LRes63472 = reshape_layer(Thr12796, [2, 1, 6], Res63472), 
LRes7319 = reshape_layer(Res63472, [2, 6], Res7319), 
LFla39484 = flatten_layer(Res7319, Fla39484), 
LSub48323 = subtract_layer([[0.6752, 0.7014, 0.5308]], [[0.0508, 0.726, 0.1403]], Sub48323), 
LCon14699 = concatenate_layer([Sub48323,[[0.2239, 0.8486, 0.6954, 0.1889, 0.9875, 0.3028, 0.8201, 0.1382, 0.0142]]], 1, Con14699), 
LAdd16152 = add_layer([Fla39484,Con14699], Add16152), 
LMax69506 = maximum_layer([Con36307,Add16152], Max69506), 
exec_layers([LAve78037,LUp_50357,LPer29098,LFla73032,LCon36307,LSub8408,LRes83998,LRes21703,LRes22323,LZer95910,LCon33253,LMul7997,LZer25075,LSub77534,LThr12796,LRes63472,LRes7319,LFla39484,LSub48323,LCon14699,LAdd16152,LMax69506],["Ave78037","Up_50357","Per29098","Fla73032","Con36307","Sub8408","Res83998","Res21703","Res22323","Zer95910","Con33253","Mul7997","Zer25075","Sub77534","Thr12796","Res63472","Res7319","Fla39484","Sub48323","Con14699","Add16152","Max69506"],Max69506,"Max69506")

Actual (Unparsed): [[0.7238000, 0.7238000, 0.4631500, 0.4631500, 0.8486000, 0.6954000, 0.3665000, 0.9875000, 0.5377000, 0.8201000, 0.1382000, 0.5729000]]

Expected (Unparsed): [[0.7238,0.7238,0.46314999999999995,0.46314999999999995,0.8486,0.6954,0.3665,0.9875,0.5377,0.8201,0.1382,0.5729]]

Actual:   [[0.7238, 0.7238, 0.4632, 0.4632, 0.8486, 0.6954, 0.3665, 0.9875, 0.5377, 0.8201, 0.1382, 0.5729]]

Expected: [[0.7238, 0.7238, 0.4632, 0.4632, 0.8486, 0.6954, 0.3665, 0.9875, 0.5377, 0.8201, 0.1382, 0.5729]]