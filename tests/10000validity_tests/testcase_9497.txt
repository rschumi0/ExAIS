import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo77309 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Glo77309 = keras.layers.GlobalMaxPool3D(name = 'Glo77309', )(in0Glo77309)
Res22670 = keras.layers.Reshape((2, 1), name = 'Res22670', )(Glo77309)
Res81614 = keras.layers.Reshape((2, 1, 1), name = 'Res81614', )(Res22670)
Loc54209 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(3, 1), name = 'Loc54209', )(Res81614)
Res8855 = keras.layers.Reshape((1, 1, 4, 1), name = 'Res8855', )(Loc54209)
Glo12062 = keras.layers.GlobalAveragePooling3D(name = 'Glo12062', )(Res8855)
Res22493 = keras.layers.Reshape((1, 1), name = 'Res22493', )(Glo12062)
Res44765 = keras.layers.Reshape((1, 1, 1), name = 'Res44765', )(Res22493)
Glo57624 = keras.layers.GlobalMaxPool2D(name = 'Glo57624', )(Res44765)
Res64465 = keras.layers.Reshape((1, 1), name = 'Res64465', )(Glo57624)
Res80013 = keras.layers.Reshape((1, 1, 1), name = 'Res80013', )(Res64465)
Res57562 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res57562', )(Res80013)
Glo95319 = keras.layers.GlobalAveragePooling3D(name = 'Glo95319', )(Res57562)
model = tf.keras.models.Model(inputs=[in0Glo77309], outputs=Glo95319)
w = model.get_layer('Loc54209').get_weights() 
w[0] = np.array([[[0.237, 0.8599, 0.3536, 0.6254]]])
w[1] = np.array([[[0, 0, 0, 0]]])
model.get_layer('Loc54209').set_weights(w) 
in0Glo77309 = tf.constant([[[[[1.0019, 1.3062]], [[1.3309, 1.5038]]]]])
print (np.array2string(model.predict([in0Glo77309],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo95319.png')

LGlo77309 = global_max_pool3D_layer([[[[[1.0019, 1.3062]], [[1.3309, 1.5038]]]]], Glo77309), 
LRes22670 = reshape_layer(Glo77309, [2, 1], Res22670), 
LRes81614 = reshape_layer(Res22670, [2, 1, 1], Res81614), 
LLoc54209 = locally_connected2D_layer(Res81614, 1, 1,[[[0.237, 0.8599, 0.3536, 0.6254]]],[[[0, 0, 0, 0]]], 3, 1, Loc54209), 
LRes8855 = reshape_layer(Loc54209, [1, 1, 4, 1], Res8855), 
LGlo12062 = global_average_pooling3D_layer(Res8855, Glo12062), 
LRes22493 = reshape_layer(Glo12062, [1, 1], Res22493), 
LRes44765 = reshape_layer(Res22493, [1, 1, 1], Res44765), 
LGlo57624 = global_max_pool2D_layer(Res44765, Glo57624), 
LRes64465 = reshape_layer(Glo57624, [1, 1], Res64465), 
LRes80013 = reshape_layer(Res64465, [1, 1, 1], Res80013), 
LRes57562 = reshape_layer(Res80013, [1, 1, 1, 1], Res57562), 
LGlo95319 = global_average_pooling3D_layer(Res57562, Glo95319), 
exec_layers([LGlo77309,LRes22670,LRes81614,LLoc54209,LRes8855,LGlo12062,LRes22493,LRes44765,LGlo57624,LRes64465,LRes80013,LRes57562,LGlo95319],["Glo77309","Res22670","Res81614","Loc54209","Res8855","Glo12062","Res22493","Res44765","Glo57624","Res64465","Res80013","Res57562","Glo95319"],Glo95319,"Glo95319")

Actual (Unparsed): [[0.6907038]]

Expected (Unparsed): [[0.6907038274999999]]

Actual:   [[0.6908]]

Expected: [[0.6908]]