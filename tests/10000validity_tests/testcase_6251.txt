import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave97846 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave97846 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con39005 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Lea68878 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave97846 = keras.layers.Average(name = 'Ave97846', )([in0Ave97846,in1Ave97846])
Con39005 = keras.layers.Concatenate(axis=3, name = 'Con39005', )([Ave97846,in0Con39005])
Lea68878 = keras.layers.LeakyReLU(alpha=7.9827315443125775, name = 'Lea68878', input_shape=(2, 2, 2))(in0Lea68878)
Ave50100 = keras.layers.Average(name = 'Ave50100', )([Con39005,Lea68878])
Res2146 = keras.layers.Reshape((2, 4), name = 'Res2146', )(Ave50100)
Max8740 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='valid', name = 'Max8740', )(Res2146)
model = tf.keras.models.Model(inputs=[in0Ave97846,in1Ave97846,in0Con39005,in0Lea68878], outputs=Max8740)
in0Ave97846 = tf.constant([[[[0.4562], [0.9785]], [[0.1062], [0.7016]]]])
in1Ave97846 = tf.constant([[[[0.4416], [0.6248]], [[0.0271], [0.9237]]]])
in0Con39005 = tf.constant([[[[0.8145], [0.0096]], [[0.7758], [0.2944]]]])
in0Lea68878 = tf.constant([[[[0.7081, 0.6714], [0.4592, 0.0636]], [[0.4491, 0.6691], [0.3784, 0.8496]]]])
print (np.array2string(model.predict([in0Ave97846,in1Ave97846,in0Con39005,in0Lea68878],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max8740.png')

LAve97846 = average_layer([[[[[0.4562], [0.9785]], [[0.1062], [0.7016]]]], [[[[0.4416], [0.6248]], [[0.0271], [0.9237]]]]], Ave97846), 
LCon39005 = concatenate_layer([Ave97846,[[[[0.8145], [0.0096]], [[0.7758], [0.2944]]]]], 3, Con39005), 
LLea68878 = leaky_relu_layer([[[[0.7081, 0.6714], [0.4592, 0.0636]], [[0.4491, 0.6691], [0.3784, 0.8496]]]], 7.9827315443125775, Lea68878), 
LAve50100 = average_layer([Con39005,Lea68878], Ave50100), 
LRes2146 = reshape_layer(Ave50100, [2, 4], Res2146), 
LMax8740 = max_pool1D_layer(Res2146, 2, 1, false, Max8740), 
exec_layers([LAve97846,LCon39005,LLea68878,LAve50100,LRes2146,LMax8740],["Ave97846","Con39005","Lea68878","Ave50100","Res2146","Max8740"],Max8740,"Max8740")

Actual (Unparsed): [[[0.5785000, 0.7429500, 0.6304250, 0.5720000]]]

Expected (Unparsed): [[[0.5785,0.74295,0.630425,0.5720000000000001]]]

Actual:   [[[0.5785, 0.743, 0.6305, 0.572]]]

Expected: [[[0.5785, 0.743, 0.6305, 0.5721]]]