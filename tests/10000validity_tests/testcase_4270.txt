import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0LST36431 = tf.keras.layers.Input(shape=([2, 3]))

LST36431 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST36431', )(in0LST36431)
Res51614 = keras.layers.Reshape((3, 1), name = 'Res51614', )(LST36431)
Res26163 = keras.layers.Reshape((3, 1, 1), name = 'Res26163', )(Res51614)
Zer62753 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer62753', )(Res26163)
Zer88892 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer88892', )(Zer62753)
model = tf.keras.models.Model(inputs=[in0LST36431], outputs=Zer88892)
w = model.get_layer('LST36431').get_weights() 
w[0] = np.array([[7, 6, 9, 10, 4, 6, 6, 5, 2, 4, 10, 6], [6, 4, 8, 2, 1, 9, 6, 6, 6, 4, 1, 8], [4, 7, 3, 5, 2, 10, 9, 7, 3, 10, 9, 3]])
w[1] = np.array([[4, 7, 10, 1, 3, 3, 4, 1, 6, 2, 3, 10], [6, 1, 9, 5, 2, 10, 7, 10, 6, 3, 7, 8], [4, 6, 8, 4, 10, 5, 5, 5, 10, 5, 7, 10]])
w[2] = np.array([1, 5, 5, 9, 1, 5, 10, 1, 6, 4, 5, 4])
model.get_layer('LST36431').set_weights(w) 
in0LST36431 = tf.constant([[[3, 1, 1], [2, 9, 1]]])
print (np.array2string(model.predict([in0LST36431],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer88892.png')

LLST36431 = lstm_layer([[[3, 1, 1], [2, 9, 1]]],[[7, 6, 9, 10, 4, 6, 6, 5, 2, 4, 10, 6], [6, 4, 8, 2, 1, 9, 6, 6, 6, 4, 1, 8], [4, 7, 3, 5, 2, 10, 9, 7, 3, 10, 9, 3]],[[4, 7, 10, 1, 3, 3, 4, 1, 6, 2, 3, 10], [6, 1, 9, 5, 2, 10, 7, 10, 6, 3, 7, 8], [4, 6, 8, 4, 10, 5, 5, 5, 10, 5, 7, 10]],[1, 5, 5, 9, 1, 5, 10, 1, 6, 4, 5, 4], LST36431), 
LRes51614 = reshape_layer(LST36431, [3, 1], Res51614), 
LRes26163 = reshape_layer(Res51614, [3, 1, 1], Res26163), 
LZer62753 = zero_padding2D_layer(Res26163, 1, 1, 1, 1, Zer62753), 
LZer88892 = zero_padding2D_layer(Zer62753, 1, 1, 1, 1, Zer88892), 
exec_layers([LLST36431,LRes51614,LRes26163,LZer62753,LZer88892],["LST36431","Res51614","Res26163","Zer62753","Zer88892"],Zer88892,"Zer88892")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.9640276], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.9640276], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.9640276], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0.964027580075816],[0],[0]],[[0],[0],[0.9640275800758151],[0],[0]],[[0],[0],[0.9640275800758169],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]]]]

Actual:   [[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0.9641], [0], [0]], [[0], [0], [0.9641], [0], [0]], [[0], [0], [0.9641], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]]]

Expected: [[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0.9641], [0], [0]], [[0], [0], [0.9641], [0], [0]], [[0], [0], [0.9641], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]]]