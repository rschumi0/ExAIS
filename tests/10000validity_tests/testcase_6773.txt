import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min64667 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Min64667 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con86413 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Max97545 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max97545 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Mul79817 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul79817 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con1235 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Glo78190 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Con44256 = tf.keras.layers.Input(shape=([11]))

Min64667 = keras.layers.Minimum(name = 'Min64667', )([in0Min64667,in1Min64667])
Zer34582 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer34582', )(Min64667)
Con86413 = keras.layers.Concatenate(axis=3, name = 'Con86413', )([Zer34582,in0Con86413])
Max97545 = keras.layers.Maximum(name = 'Max97545', )([in0Max97545,in1Max97545])
Zer88736 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer88736', )(Max97545)
Mul79817 = keras.layers.Multiply(name = 'Mul79817', )([in0Mul79817,in1Mul79817])
Zer21039 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer21039', )(Mul79817)
Con1235 = keras.layers.Concatenate(axis=3, name = 'Con1235', )([Zer21039,in0Con1235])
Ave70159 = keras.layers.Average(name = 'Ave70159', )([Zer88736,Con1235])
Min48354 = keras.layers.Minimum(name = 'Min48354', )([Con86413,Ave70159])
Res90363 = keras.layers.Reshape((2, 6), name = 'Res90363', )(Min48354)
Fla21886 = keras.layers.Flatten(name = 'Fla21886', )(Res90363)
Glo78190 = keras.layers.GlobalMaxPool3D(name = 'Glo78190', )(in0Glo78190)
Con44256 = keras.layers.Concatenate(axis=1, name = 'Con44256', )([Glo78190,in0Con44256])
Max98591 = keras.layers.Maximum(name = 'Max98591', )([Fla21886,Con44256])
model = tf.keras.models.Model(inputs=[in0Min64667,in1Min64667,in0Con86413,in0Max97545,in1Max97545,in0Mul79817,in1Mul79817,in0Con1235,in0Glo78190,in0Con44256], outputs=Max98591)
in0Min64667 = tf.constant([[[[0.3141], [0.5679]]]])
in1Min64667 = tf.constant([[[[0.569], [0.2518]]]])
in0Con86413 = tf.constant([[[[0.8281], [0.2088], [0.5762]], [[0.321], [0.4147], [0.5478]]]])
in0Max97545 = tf.constant([[[[0.322, 0.2041], [0.3274, 0.5441]]]])
in1Max97545 = tf.constant([[[[0.2084, 0.0616], [0.1024, 0.9932]]]])
in0Mul79817 = tf.constant([[[[0.2022]], [[0.525]]]])
in1Mul79817 = tf.constant([[[[0.0065]], [[0.1936]]]])
in0Con1235 = tf.constant([[[[0.9484], [0.1866], [0.0408]], [[0.7663], [0.0129], [0.5851]]]])
in0Glo78190 = tf.constant([[[[[1.0993], [1.9836]], [[1.0981], [1.4414]]], [[[1.5912], [1.5467]], [[1.5006], [1.5868]]]]])
in0Con44256 = tf.constant([[0.9029, 0.5993, 0.2279, 0.0101, 0.5539, 0.0234, 0.6386, 0.762, 0.0112, 0.1567, 0.615]])
print (np.array2string(model.predict([in0Min64667,in1Min64667,in0Con86413,in0Max97545,in1Max97545,in0Mul79817,in1Mul79817,in0Con1235,in0Glo78190,in0Con44256],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max98591.png')

LMin64667 = minimum_layer([[[[[0.3141], [0.5679]]]], [[[[0.569], [0.2518]]]]], Min64667), 
LZer34582 = zero_padding2D_layer(Min64667, 1, 0, 1, 0, Zer34582), 
LCon86413 = concatenate_layer([Zer34582,[[[[0.8281], [0.2088], [0.5762]], [[0.321], [0.4147], [0.5478]]]]], 3, Con86413), 
LMax97545 = maximum_layer([[[[[0.322, 0.2041], [0.3274, 0.5441]]]], [[[[0.2084, 0.0616], [0.1024, 0.9932]]]]], Max97545), 
LZer88736 = zero_padding2D_layer(Max97545, 1, 0, 1, 0, Zer88736), 
LMul79817 = multiply_layer([[[[[0.2022]], [[0.525]]]], [[[[0.0065]], [[0.1936]]]]], Mul79817), 
LZer21039 = zero_padding2D_layer(Mul79817, 0, 0, 2, 0, Zer21039), 
LCon1235 = concatenate_layer([Zer21039,[[[[0.9484], [0.1866], [0.0408]], [[0.7663], [0.0129], [0.5851]]]]], 3, Con1235), 
LAve70159 = average_layer([Zer88736,Con1235], Ave70159), 
LMin48354 = minimum_layer([Con86413,Ave70159], Min48354), 
LRes90363 = reshape_layer(Min48354, [2, 6], Res90363), 
LFla21886 = flatten_layer(Res90363, Fla21886), 
LGlo78190 = global_max_pool3D_layer([[[[[1.0993], [1.9836]], [[1.0981], [1.4414]]], [[[1.5912], [1.5467]], [[1.5006], [1.5868]]]]], Glo78190), 
LCon44256 = concatenate_layer([Glo78190,[[0.9029, 0.5993, 0.2279, 0.0101, 0.5539, 0.0234, 0.6386, 0.762, 0.0112, 0.1567, 0.615]]], 1, Con44256), 
LMax98591 = maximum_layer([Fla21886,Con44256], Max98591), 
exec_layers([LMin64667,LZer34582,LCon86413,LMax97545,LZer88736,LMul79817,LZer21039,LCon1235,LAve70159,LMin48354,LRes90363,LFla21886,LGlo78190,LCon44256,LMax98591],["Min64667","Zer34582","Con86413","Max97545","Zer88736","Mul79817","Zer21039","Con1235","Ave70159","Min48354","Res90363","Fla21886","Glo78190","Con44256","Max98591"],Max98591,"Max98591")

Actual (Unparsed): [[1.9836000, 0.9029000, 0.5993000, 0.2279000, 0.0101000, 0.5539000, 0.0234000, 0.6386000, 0.7620000, 0.1085000, 0.2145200, 0.6150000]]

Expected (Unparsed): [[1.9836,0.9029,0.5993,0.2279,0.0101,0.5539,0.0234,0.6386,0.762,0.1085,0.21452000000000002,0.615]]

Actual:   [[1.9836, 0.9029, 0.5993, 0.2279, 0.0101, 0.5539, 0.0234, 0.6386, 0.762, 0.1085, 0.2146, 0.615]]

Expected: [[1.9836, 0.9029, 0.5993, 0.2279, 0.0101, 0.5539, 0.0234, 0.6386, 0.762, 0.1085, 0.2146, 0.615]]