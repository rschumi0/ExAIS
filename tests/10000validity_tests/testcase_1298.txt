import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave20938 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con91002 = tf.keras.layers.Input(shape=([1, 3]))
in0Cro49087 = tf.keras.layers.Input(shape=([2, 4]))

Ave20938 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave20938', )(in0Ave20938)
Res4487 = keras.layers.Reshape((1, 1), name = 'Res4487', )(Ave20938)
Con91002 = keras.layers.Concatenate(axis=2, name = 'Con91002', )([Res4487,in0Con91002])
Cro49087 = keras.layers.Cropping1D(cropping=((0, 1)), name = 'Cro49087', )(in0Cro49087)
Ave72817 = keras.layers.Average(name = 'Ave72817', )([Con91002,Cro49087])
Res697 = keras.layers.Reshape((1, 4, 1), name = 'Res697', )(Ave72817)
Max14098 = keras.layers.MaxPool2D(pool_size=(1, 4), strides=(1, 1), padding='same', name = 'Max14098', )(Res697)
model = tf.keras.models.Model(inputs=[in0Ave20938,in0Con91002,in0Cro49087], outputs=Max14098)
in0Ave20938 = tf.constant([[[[1.8583], [1.1258]]]])
in0Con91002 = tf.constant([[[0.277, 0.7655, 0.6693]]])
in0Cro49087 = tf.constant([[[1.2147, 1.3652, 1.499, 1.318], [1.8353, 1.488, 1.3672, 1.9086]]])
print (np.array2string(model.predict([in0Ave20938,in0Con91002,in0Cro49087],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max14098.png')

LAve20938 = average_pooling2D_layer([[[[1.8583], [1.1258]]]], 1, 2, Ave20938), 
LRes4487 = reshape_layer(Ave20938, [1, 1], Res4487), 
LCon91002 = concatenate_layer([Res4487,[[[0.277, 0.7655, 0.6693]]]], 2, Con91002), 
LCro49087 = cropping1D_layer([[[1.2147, 1.3652, 1.499, 1.318], [1.8353, 1.488, 1.3672, 1.9086]]], 0, 1, Cro49087), 
LAve72817 = average_layer([Con91002,Cro49087], Ave72817), 
LRes697 = reshape_layer(Ave72817, [1, 4, 1], Res697), 
LMax14098 = max_pool2D_layer(Res697, 1, 4, 1, 1, true, Max14098), 
exec_layers([LAve20938,LRes4487,LCon91002,LCro49087,LAve72817,LRes697,LMax14098],["Ave20938","Res4487","Con91002","Cro49087","Ave72817","Res697","Max14098"],Max14098,"Max14098")

Actual (Unparsed): [[[[1.3533750], [1.3533750], [1.1322500], [1.1322500]]]]

Expected (Unparsed): [[[[1.3533749999999998],[1.3533749999999998],[1.13225],[1.13225]]]]

Actual:   [[[[1.3534], [1.3534], [1.1323], [1.1323]]]]

Expected: [[[[1.3534], [1.3534], [1.1323], [1.1323]]]]