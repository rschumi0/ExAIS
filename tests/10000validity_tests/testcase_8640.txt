import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo24901 = tf.keras.layers.Input(shape=([2, 2]))
in0Con56337 = tf.keras.layers.Input(shape=([3, 3, 1]))
in0Ave50762 = tf.keras.layers.Input(shape=([2, 2, 2]))

Glo24901 = keras.layers.GlobalMaxPool1D(name = 'Glo24901', )(in0Glo24901)
Res49220 = keras.layers.Reshape((2, 1), name = 'Res49220', )(Glo24901)
Res15937 = keras.layers.Reshape((2, 1, 1), name = 'Res15937', )(Res49220)
Zer79547 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer79547', )(Res15937)
Con56337 = keras.layers.Concatenate(axis=3, name = 'Con56337', )([Zer79547,in0Con56337])
Ave50762 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(2, 2), padding='valid', name = 'Ave50762', )(in0Ave50762)
Zer68719 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer68719', )(Ave50762)
Ave92968 = keras.layers.Average(name = 'Ave92968', )([Con56337,Zer68719])
model = tf.keras.models.Model(inputs=[in0Glo24901,in0Con56337,in0Ave50762], outputs=Ave92968)
in0Glo24901 = tf.constant([[[1.6269, 1.344], [1.2875, 1.5788]]])
in0Con56337 = tf.constant([[[[0.3308], [0.4914], [0.7048]], [[0.8497], [0.8042], [0.143]], [[0.5668], [0.8148], [0.679]]]])
in0Ave50762 = tf.constant([[[[1.499, 1.4154], [1.4526, 1.804]], [[1.9664, 1.8175], [1.4344, 1.8366]]]])
print (np.array2string(model.predict([in0Glo24901,in0Con56337,in0Ave50762],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave92968.png')

LGlo24901 = global_max_pool1D_layer([[[1.6269, 1.344], [1.2875, 1.5788]]], Glo24901), 
LRes49220 = reshape_layer(Glo24901, [2, 1], Res49220), 
LRes15937 = reshape_layer(Res49220, [2, 1, 1], Res15937), 
LZer79547 = zero_padding2D_layer(Res15937, 1, 0, 2, 0, Zer79547), 
LCon56337 = concatenate_layer([Zer79547,[[[[0.3308], [0.4914], [0.7048]], [[0.8497], [0.8042], [0.143]], [[0.5668], [0.8148], [0.679]]]]], 3, Con56337), 
LAve50762 = average_pooling2D_layer([[[[1.499, 1.4154], [1.4526, 1.804]], [[1.9664, 1.8175], [1.4344, 1.8366]]]], 2, 1, 2, 2, false, Ave50762), 
LZer68719 = zero_padding2D_layer(Ave50762, 1, 1, 1, 1, Zer68719), 
LAve92968 = average_layer([Con56337,Zer68719], Ave92968), 
exec_layers([LGlo24901,LRes49220,LRes15937,LZer79547,LCon56337,LAve50762,LZer68719,LAve92968],["Glo24901","Res49220","Res15937","Zer79547","Con56337","Ave50762","Zer68719","Ave92968"],Ave92968,"Ave92968")

Actual (Unparsed): [[[[0.0000000, 0.1654000], [0.0000000, 0.2457000], [0.0000000, 0.3524000]], [[0.0000000, 0.4248500], [0.8663500, 1.2103250], [0.8134500, 0.0715000]], [[0.0000000, 0.2834000], [0.0000000, 0.4074000], [0.7894000, 0.3395000]]]]

Expected (Unparsed): [[[[0,0.1654],[0,0.2457],[0,0.3524]],[[0,0.42485],[0.86635,1.210325],[0.81345,0.0715]],[[0,0.2834],[0,0.4074],[0.7894,0.3395]]]]

Actual:   [[[[0, 0.1654], [0, 0.2457], [0, 0.3524]], [[0, 0.4249], [0.8664, 1.2104], [0.8135, 0.0715]], [[0, 0.2834], [0, 0.4074], [0.7894, 0.3395]]]]

Expected: [[[[0, 0.1654], [0, 0.2457], [0, 0.3524]], [[0, 0.4249], [0.8664, 1.2104], [0.8135, 0.0715]], [[0, 0.2834], [0, 0.4074], [0.7894, 0.3395]]]]