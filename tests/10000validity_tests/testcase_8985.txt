import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot79945 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot79945 = tf.keras.layers.Input(shape=([2, 3]))

Dot79945 = keras.layers.Dot(axes=(1, 1), name = 'Dot79945', )([in0Dot79945,in1Dot79945])
Res31715 = keras.layers.Reshape((3, 3, 1), name = 'Res31715', )(Dot79945)
Loc72083 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 1), name = 'Loc72083', )(Res31715)
model = tf.keras.models.Model(inputs=[in0Dot79945,in1Dot79945], outputs=Loc72083)
w = model.get_layer('Loc72083').get_weights() 
w[0] = np.array([[[0.9617, 0.3172]], [[0.7379, 0.034]], [[0.4186, 0.3249]], [[0.6987, 0.0268]], [[0.4664, 0.8747]], [[0.5688, 0.4197]], [[0.7126, 0.1831]], [[0.1453, 0.8409]], [[0.5293, 0.9078]]])
w[1] = np.array([[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]]])
model.get_layer('Loc72083').set_weights(w) 
in0Dot79945 = tf.constant([[[0.9703, 0.3562, 0.097], [0.0106, 0.194, 0.7163]]])
in1Dot79945 = tf.constant([[[0.7183, 0.9282, 0.3913], [0.7373, 0.1036, 0.7557]]])
print (np.array2string(model.predict([in0Dot79945,in1Dot79945],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc72083.png')

LDot79945 = dot_layer([[[0.9703, 0.3562, 0.097], [0.0106, 0.194, 0.7163]]], [[[0.7183, 0.9282, 0.3913], [0.7373, 0.1036, 0.7557]]], 1, 1, Dot79945), 
LRes31715 = reshape_layer(Dot79945, [3, 3, 1], Res31715), 
LLoc72083 = locally_connected2D_layer(Res31715, 1, 1,[[[0.9617, 0.3172]], [[0.7379, 0.034]], [[0.4186, 0.3249]], [[0.6987, 0.0268]], [[0.4664, 0.8747]], [[0.5688, 0.4197]], [[0.7126, 0.1831]], [[0.1453, 0.8409]], [[0.5293, 0.9078]]],[[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]]], 1, 1, Loc72083), 
exec_layers([LDot79945,LRes31715,LLoc72083],["Dot79945","Res31715","Loc72083"],Loc72083,"Loc72083")

Actual (Unparsed): [[[[0.6777887, 0.2235568], [0.6653870, 0.0306588], [0.1622865, 0.1259601]], [[0.2787077, 0.0106904], [0.1635773, 0.3067776], [0.1626693, 0.1200287]], [[0.4259945, 0.1094577], [0.0238647, 0.1381129], [0.3066044, 0.5258559]]]]

Expected (Unparsed): [[[[0.6777887243790002,0.22355680916400003],[0.665387024498,0.030658841080000002],[0.162286535866,0.12596009436900002]],[[0.278707698942,0.010690376888000001],[0.16357731913600002,0.3067776180280001],[0.162669325968,0.120028685142]],[[0.42599448193399997,0.109457745779],[0.023864664824000004,0.138112846872],[0.30660444049300006,0.5258558682780001]]]]

Actual:   [[[[0.6778, 0.2236], [0.6654, 0.0307], [0.1623, 0.126]], [[0.2788, 0.0107], [0.1636, 0.3068], [0.1627, 0.1201]], [[0.426, 0.1095], [0.0239, 0.1382], [0.3067, 0.5259]]]]

Expected: [[[[0.6778, 0.2236], [0.6654, 0.0307], [0.1623, 0.126]], [[0.2788, 0.0107], [0.1636, 0.3068], [0.1627, 0.1201]], [[0.426, 0.1095], [0.0239, 0.1382], [0.3067, 0.5259]]]]