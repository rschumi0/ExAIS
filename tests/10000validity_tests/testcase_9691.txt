import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con28838 = tf.keras.layers.Input(shape=([1, 2, 1]))

Con28838 = keras.layers.Conv2DTranspose(4, (1, 2),strides=(1, 1), padding='valid', name = 'Con28838', )(in0Con28838)
Res60033 = keras.layers.Reshape((1, 12), name = 'Res60033', )(Con28838)
Cro54311 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro54311', )(Res60033)
Bat57956 = keras.layers.BatchNormalization(axis=2, epsilon=0.4090648969843568,  name = 'Bat57956', )(Cro54311)
Sof27018 = keras.layers.Softmax(axis=1, name = 'Sof27018', )(Bat57956)
model = tf.keras.models.Model(inputs=[in0Con28838], outputs=Sof27018)
w = model.get_layer('Con28838').get_weights() 
w[0] = np.array([[[[0.5676], [0.1095], [0.6455], [0.5585]], [[0.8752], [0.6363], [0.3196], [0.7547]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con28838').set_weights(w) 
w = model.get_layer('Bat57956').get_weights() 
w[0] = np.array([0.6031, 0.2427, 0.0119, 0.7216, 0.6162, 0.6394, 0.5144, 0.1682, 0.8834, 0.9832, 0.4976, 0.5878])
w[1] = np.array([0.2628, 0.2389, 0.0706, 0.1983, 0.3695, 0.9927, 0.0106, 0.2738, 0.84, 0.8888, 0.3553, 0.1817])
w[2] = np.array([0.4777, 0.0331, 0.0927, 0.0326, 0.6952, 0.6668, 0.0203, 0.8661, 0.4303, 0.4084, 0.6305, 0.9278])
w[3] = np.array([0.7651, 0.8873, 0.4413, 0.2606, 0.8032, 0.6452, 0.5356, 0.5248, 0.9726, 0.7721, 0.2004, 0.6955])
model.get_layer('Bat57956').set_weights(w) 
in0Con28838 = tf.constant([[[[0.7641], [0.1685]]]])
print (np.array2string(model.predict([in0Con28838],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sof27018.png')

LCon28838 = conv2D_transpose_layer([[[[0.7641], [0.1685]]]], 1, 2,[[[[0.5676], [0.1095], [0.6455], [0.5585]], [[0.8752], [0.6363], [0.3196], [0.7547]]]],[0, 0, 0, 0], 1, 1, false, Con28838), 
LRes60033 = reshape_layer(Con28838, [1, 12], Res60033), 
LCro54311 = cropping1D_layer(Res60033, 0, 0, Cro54311), 
LBat57956 = batch_normalization_layer(Cro54311, 2, 0.4090648969843568, [0.6031, 0.2427, 0.0119, 0.7216, 0.6162, 0.6394, 0.5144, 0.1682, 0.8834, 0.9832, 0.4976, 0.5878], [0.2628, 0.2389, 0.0706, 0.1983, 0.3695, 0.9927, 0.0106, 0.2738, 0.84, 0.8888, 0.3553, 0.1817], [0.4777, 0.0331, 0.0927, 0.0326, 0.6952, 0.6668, 0.0203, 0.8661, 0.4303, 0.4084, 0.6305, 0.9278], [0.7651, 0.8873, 0.4413, 0.2606, 0.8032, 0.6452, 0.5356, 0.5248, 0.9726, 0.7721, 0.2004, 0.6955], Bat57956), 
LSof27018 = softmax_layer(Bat57956, 1, Sof27018), 
exec_layers([LCon28838,LRes60033,LCro54311,LBat57956,LSof27018],["Con28838","Res60033","Cro54311","Bat57956","Sof27018"],Sof27018,"Sof27018")

Actual (Unparsed): [[[1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000]]]

Expected (Unparsed): [[[1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0]]]

Actual:   [[[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]]

Expected: [[[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]]