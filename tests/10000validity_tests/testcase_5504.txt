import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min44289 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min44289 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Add80975 = tf.keras.layers.Input(shape=([1, 1]))
in1Add80975 = tf.keras.layers.Input(shape=([1, 1]))
in0Min75238 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Min75238 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Min44289 = keras.layers.Minimum(name = 'Min44289', )([in0Min44289,in1Min44289])
Res28597 = keras.layers.Reshape((1, 1, 1), name = 'Res28597', )(Min44289)
Res66278 = keras.layers.Reshape((1, 1), name = 'Res66278', )(Res28597)
Add80975 = keras.layers.Add(name = 'Add80975', )([in0Add80975,in1Add80975])
Min74030 = keras.layers.Minimum(name = 'Min74030', )([Res66278,Add80975])
Min75238 = keras.layers.Minimum(name = 'Min75238', )([in0Min75238,in1Min75238])
Res98720 = keras.layers.Reshape((1, 1, 2), name = 'Res98720', )(Min75238)
Res21614 = keras.layers.Reshape((1, 2), name = 'Res21614', )(Res98720)
Dot7880 = keras.layers.Dot(axes=(1, 1), name = 'Dot7880', )([Min74030,Res21614])
Den96357 = keras.layers.Dense(2,name = 'Den96357', )(Dot7880)
model = tf.keras.models.Model(inputs=[in0Min44289,in1Min44289,in0Add80975,in1Add80975,in0Min75238,in1Min75238], outputs=Den96357)
w = model.get_layer('Den96357').get_weights() 
w[0] = np.array([[0.1728, 0.9232], [0.7437, 0.6936]])
w[1] = np.array([0.8212, 0.2797])
model.get_layer('Den96357').set_weights(w) 
in0Min44289 = tf.constant([[[[[0.0284]]]]])
in1Min44289 = tf.constant([[[[[0.6665]]]]])
in0Add80975 = tf.constant([[[0.591]]])
in1Add80975 = tf.constant([[[0.0627]]])
in0Min75238 = tf.constant([[[[[0.1955], [0.8726]]]]])
in1Min75238 = tf.constant([[[[[0.9788], [0.73]]]]])
print (np.array2string(model.predict([in0Min44289,in1Min44289,in0Add80975,in1Add80975,in0Min75238,in1Min75238],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den96357.png')

LMin44289 = minimum_layer([[[[[[0.0284]]]]], [[[[[0.6665]]]]]], Min44289), 
LRes28597 = reshape_layer(Min44289, [1, 1, 1], Res28597), 
LRes66278 = reshape_layer(Res28597, [1, 1], Res66278), 
LAdd80975 = add_layer([[[[0.591]]], [[[0.0627]]]], Add80975), 
LMin74030 = minimum_layer([Res66278,Add80975], Min74030), 
LMin75238 = minimum_layer([[[[[[0.1955], [0.8726]]]]], [[[[[0.9788], [0.73]]]]]], Min75238), 
LRes98720 = reshape_layer(Min75238, [1, 1, 2], Res98720), 
LRes21614 = reshape_layer(Res98720, [1, 2], Res21614), 
LDot7880 = dot_layer(Min74030,Res21614, 1, 1, Dot7880), 
LDen96357 = dense_layer(Dot7880, [[0.1728, 0.9232], [0.7437, 0.6936]],[0.8212, 0.2797], Den96357), 
exec_layers([LMin44289,LRes28597,LRes66278,LAdd80975,LMin74030,LMin75238,LRes98720,LRes21614,LDot7880,LDen96357],["Min44289","Res28597","Res66278","Add80975","Min74030","Min75238","Res98720","Res21614","Dot7880","Den96357"],Den96357,"Den96357")

Actual (Unparsed): [[[0.8375778, 0.2992055]]]

Expected (Unparsed): [[[0.83757780856,0.29920550624]]]

Actual:   [[[0.8376, 0.2993]]]

Expected: [[[0.8376, 0.2993]]]