import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul58212 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul58212 = tf.keras.layers.Input(shape=([1, 1]))
in0Min30234 = tf.keras.layers.Input(shape=([1, 1]))
in1Min30234 = tf.keras.layers.Input(shape=([1, 1]))

Mul58212 = keras.layers.Multiply(name = 'Mul58212', )([in0Mul58212,in1Mul58212])
Res1938 = keras.layers.Reshape((1, 1, 1), name = 'Res1938', )(Mul58212)
Up_34921 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_34921', )(Res1938)
Res9151 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res9151', )(Up_34921)
Cro90467 = keras.layers.Cropping3D(cropping=((1, 0), (0, 0), (0, 0)), name = 'Cro90467', )(Res9151)
Fla77381 = keras.layers.Flatten(name = 'Fla77381', )(Cro90467)
Min30234 = keras.layers.Minimum(name = 'Min30234', )([in0Min30234,in1Min30234])
Fla79744 = keras.layers.Flatten(name = 'Fla79744', )(Min30234)
Sub91722 = keras.layers.Subtract(name = 'Sub91722', )([Fla77381,Fla79744])
model = tf.keras.models.Model(inputs=[in0Mul58212,in1Mul58212,in0Min30234,in1Min30234], outputs=Sub91722)
in0Mul58212 = tf.constant([[[0.8279]]])
in1Mul58212 = tf.constant([[[0.2027]]])
in0Min30234 = tf.constant([[[0.0084]]])
in1Min30234 = tf.constant([[[0.9117]]])
print (np.array2string(model.predict([in0Mul58212,in1Mul58212,in0Min30234,in1Min30234],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub91722.png')

LMul58212 = multiply_layer([[[[0.8279]]], [[[0.2027]]]], Mul58212), 
LRes1938 = reshape_layer(Mul58212, [1, 1, 1], Res1938), 
LUp_34921 = up_sampling2D_layer(Res1938, 2, 1, Up_34921), 
LRes9151 = reshape_layer(Up_34921, [2, 1, 1, 1], Res9151), 
LCro90467 = cropping3D_layer(Res9151, 1, 0, 0, 0, 0, 0, Cro90467), 
LFla77381 = flatten_layer(Cro90467, Fla77381), 
LMin30234 = minimum_layer([[[[0.0084]]], [[[0.9117]]]], Min30234), 
LFla79744 = flatten_layer(Min30234, Fla79744), 
LSub91722 = subtract_layer(Fla77381,Fla79744, Sub91722), 
exec_layers([LMul58212,LRes1938,LUp_34921,LRes9151,LCro90467,LFla77381,LMin30234,LFla79744,LSub91722],["Mul58212","Res1938","Up_34921","Res9151","Cro90467","Fla77381","Min30234","Fla79744","Sub91722"],Sub91722,"Sub91722")

Actual (Unparsed): [[0.1594153]]

Expected (Unparsed): [[0.15941533]]

Actual:   [[0.1595]]

Expected: [[0.1595]]