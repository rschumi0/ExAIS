import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max68860 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max68860 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Dot79457 = tf.keras.layers.Input(shape=([2]))
in1Dot79457 = tf.keras.layers.Input(shape=([2]))
in0Con81361 = tf.keras.layers.Input(shape=([1, 1, 1]))

Max68860 = keras.layers.Maximum(name = 'Max68860', )([in0Max68860,in1Max68860])
Res151 = keras.layers.Reshape((1, 1, 2), name = 'Res151', )(Max68860)
Dot79457 = keras.layers.Dot(axes=(1, 1), name = 'Dot79457', )([in0Dot79457,in1Dot79457])
Res49193 = keras.layers.Reshape((1, 1), name = 'Res49193', )(Dot79457)
Res62623 = keras.layers.Reshape((1, 1, 1), name = 'Res62623', )(Res49193)
Glo77342 = keras.layers.GlobalMaxPool2D(name = 'Glo77342', )(Res62623)
Res64581 = keras.layers.Reshape((1, 1), name = 'Res64581', )(Glo77342)
Res70428 = keras.layers.Reshape((1, 1, 1), name = 'Res70428', )(Res64581)
Max15535 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max15535', )(Res70428)
Con81361 = keras.layers.Concatenate(axis=3, name = 'Con81361', )([Max15535,in0Con81361])
Mul56624 = keras.layers.Multiply(name = 'Mul56624', )([Res151,Con81361])
model = tf.keras.models.Model(inputs=[in0Max68860,in1Max68860,in0Dot79457,in1Dot79457,in0Con81361], outputs=Mul56624)
in0Max68860 = tf.constant([[[[[0.1971], [0.404]]]]])
in1Max68860 = tf.constant([[[[[0.5548], [0.6888]]]]])
in0Dot79457 = tf.constant([[0.0067, 0.4258]])
in1Dot79457 = tf.constant([[0.6856, 0.4919]])
in0Con81361 = tf.constant([[[[0.7792]]]])
print (np.array2string(model.predict([in0Max68860,in1Max68860,in0Dot79457,in1Dot79457,in0Con81361],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul56624.png')

LMax68860 = maximum_layer([[[[[[0.1971], [0.404]]]]], [[[[[0.5548], [0.6888]]]]]], Max68860), 
LRes151 = reshape_layer(Max68860, [1, 1, 2], Res151), 
LDot79457 = dot_layer([[0.0067, 0.4258]], [[0.6856, 0.4919]], 1, 1, Dot79457), 
LRes49193 = reshape_layer(Dot79457, [1, 1], Res49193), 
LRes62623 = reshape_layer(Res49193, [1, 1, 1], Res62623), 
LGlo77342 = global_max_pool2D_layer(Res62623, Glo77342), 
LRes64581 = reshape_layer(Glo77342, [1, 1], Res64581), 
LRes70428 = reshape_layer(Res64581, [1, 1, 1], Res70428), 
LMax15535 = max_pool2D_layer(Res70428, 1, 1, Max15535), 
LCon81361 = concatenate_layer([Max15535,[[[[0.7792]]]]], 3, Con81361), 
LMul56624 = multiply_layer([Res151,Con81361], Mul56624), 
exec_layers([LMax68860,LRes151,LDot79457,LRes49193,LRes62623,LGlo77342,LRes64581,LRes70428,LMax15535,LCon81361,LMul56624],["Max68860","Res151","Dot79457","Res49193","Res62623","Glo77342","Res64581","Res70428","Max15535","Con81361","Mul56624"],Mul56624,"Mul56624")

Actual (Unparsed): [[[[0.1187519, 0.5367130]]]]

Expected (Unparsed): [[[[0.118751910792,0.53671296]]]]

Actual:   [[[[0.1188, 0.5368]]]]

Expected: [[[[0.1188, 0.5368]]]]