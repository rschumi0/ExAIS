import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max87607 = tf.keras.layers.Input(shape=([1, 2]))
in1Max87607 = tf.keras.layers.Input(shape=([1, 2]))

Max87607 = keras.layers.Maximum(name = 'Max87607', )([in0Max87607,in1Max87607])
Res48586 = keras.layers.Reshape((1, 2, 1), name = 'Res48586', )(Max87607)
Sep73926 = keras.layers.SeparableConv2D(2, (1, 1),strides=(1, 1), padding='valid', name = 'Sep73926', )(Res48586)
Res51532 = keras.layers.Reshape((1, 2, 2, 1), name = 'Res51532', )(Sep73926)
Con75511 = keras.layers.Conv3DTranspose(3, (1, 1, 2),strides=(1, 1, 1), padding='same', name = 'Con75511', )(Res51532)
model = tf.keras.models.Model(inputs=[in0Max87607,in1Max87607], outputs=Con75511)
w = model.get_layer('Sep73926').get_weights() 
w[0] = np.array([[[[0.4626]]]])
w[1] = np.array([[[[0.0275, 0.8678]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep73926').set_weights(w) 
w = model.get_layer('Con75511').get_weights() 
w[0] = np.array([[[[[0.8076], [0.6234], [0.6973]], [[0.1882], [0.0227], [0.2405]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con75511').set_weights(w) 
in0Max87607 = tf.constant([[[0.4582, 0.1235]]])
in1Max87607 = tf.constant([[[0.4503, 0.3071]]])
print (np.array2string(model.predict([in0Max87607,in1Max87607],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con75511.png')

LMax87607 = maximum_layer([[[[0.4582, 0.1235]]], [[[0.4503, 0.3071]]]], Max87607), 
LRes48586 = reshape_layer(Max87607, [1, 2, 1], Res48586), 
LSep73926 = separable_conv2D_layer(Res48586, 1, 1,[[[[[0.4626]]]],[[[[0.0275, 0.8678]]]]],[0, 0], 1, 1, false, Sep73926), 
LRes51532 = reshape_layer(Sep73926, [1, 2, 2, 1], Res51532), 
LCon75511 = conv3D_transpose_layer(Res51532, 1, 1, 2,[[[[[0.8076], [0.6234], [0.6973]], [[0.1882], [0.0227], [0.2405]]]]],[0, 0, 0], 1, 1, 1, true, Con75511), 
exec_layers([LMax87607,LRes48586,LSep73926,LRes51532,LCon75511],["Max87607","Res48586","Sep73926","Res51532","Con75511"],Con75511,"Con75511")

Actual (Unparsed): [[[[[0.0047075, 0.0036338, 0.0040646], [0.1496484, 0.1148016, 0.1296645]], [[0.0031551, 0.0024355, 0.0027242], [0.1002990, 0.0769436, 0.0869052]]]]]

Expected (Unparsed): [[[[[0.00470749337388,0.00363379317642,0.00406455563349],[0.14964838888458962,0.11480161695695641,0.12966446799829082]],[[0.00315510959214,0.00243548207001,0.0027241925688450005],[0.1002990402148788,0.07694364157023419,0.08690519014027741]]]]]

Actual:   [[[[[0.0048, 0.0037, 0.0041], [0.1497, 0.1149, 0.1297]], [[0.0032, 0.0025, 0.0028], [0.1003, 0.077, 0.087]]]]]

Expected: [[[[[0.0048, 0.0037, 0.0041], [0.1497, 0.1149, 0.1297]], [[0.0032, 0.0025, 0.0028], [0.1003, 0.077, 0.087]]]]]