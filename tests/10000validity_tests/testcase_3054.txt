import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo78690 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con36137 = tf.keras.layers.Input(shape=([1, 1]))
in0Add38413 = tf.keras.layers.Input(shape=([1, 2]))
in1Add38413 = tf.keras.layers.Input(shape=([1, 2]))
in0Con15812 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Sub80031 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub80031 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Mul76069 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul76069 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con52524 = tf.keras.layers.Input(shape=([2, 2, 1]))

Glo78690 = keras.layers.GlobalMaxPool2D(name = 'Glo78690', )(in0Glo78690)
Res3914 = keras.layers.Reshape((1, 1), name = 'Res3914', )(Glo78690)
Res8005 = keras.layers.Reshape((1, 1, 1), name = 'Res8005', )(Res3914)
Max32182 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 7), padding='valid', name = 'Max32182', )(Res8005)
Res16245 = keras.layers.Reshape((1, 1), name = 'Res16245', )(Max32182)
Ave72894 = keras.layers.AveragePooling1D(pool_size=(1), strides=(3), padding='valid', name = 'Ave72894', )(Res16245)
Con36137 = keras.layers.Concatenate(axis=2, name = 'Con36137', )([Ave72894,in0Con36137])
Add38413 = keras.layers.Add(name = 'Add38413', )([in0Add38413,in1Add38413])
Min51814 = keras.layers.Minimum(name = 'Min51814', )([Con36137,Add38413])
Res3092 = keras.layers.Reshape((1, 2, 1), name = 'Res3092', )(Min51814)
Zer29226 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer29226', )(Res3092)
Con15812 = keras.layers.Concatenate(axis=3, name = 'Con15812', )([Zer29226,in0Con15812])
Sub80031 = keras.layers.Subtract(name = 'Sub80031', )([in0Sub80031,in1Sub80031])
Bat64364 = keras.layers.BatchNormalization(axis=2, epsilon=0.5388212312287723,  name = 'Bat64364', )(Sub80031)
Mul76069 = keras.layers.Multiply(name = 'Mul76069', )([in0Mul76069,in1Mul76069])
Con52524 = keras.layers.Concatenate(axis=3, name = 'Con52524', )([Mul76069,in0Con52524])
Max49848 = keras.layers.Maximum(name = 'Max49848', )([Bat64364,Con52524])
Min84044 = keras.layers.Minimum(name = 'Min84044', )([Con15812,Max49848])
model = tf.keras.models.Model(inputs=[in0Glo78690,in0Con36137,in0Add38413,in1Add38413,in0Con15812,in0Sub80031,in1Sub80031,in0Mul76069,in1Mul76069,in0Con52524], outputs=Min84044)
w = model.get_layer('Bat64364').get_weights() 
w[0] = np.array([0.0871, 0.9965])
w[1] = np.array([0.1124, 0.4092])
w[2] = np.array([0.302, 0.3167])
w[3] = np.array([0.7707, 0.6139])
model.get_layer('Bat64364').set_weights(w) 
in0Glo78690 = tf.constant([[[[1.5718]], [[1.8339]]]])
in0Con36137 = tf.constant([[[0.9894]]])
in0Add38413 = tf.constant([[[0.2059, 0.1014]]])
in1Add38413 = tf.constant([[[0.0647, 0.6102]]])
in0Con15812 = tf.constant([[[[0.145], [0.6919]], [[0.9613], [0.0034]]]])
in0Sub80031 = tf.constant([[[[0.3583, 0.3395], [0.8195, 0.0783]], [[0.4654, 0.0736], [0.9488, 0.3072]]]])
in1Sub80031 = tf.constant([[[[0.3116, 0.7309], [0.4141, 0.9641]], [[0.1401, 0.3493], [0.45, 0.6934]]]])
in0Mul76069 = tf.constant([[[[0.386], [0.0687]], [[0.5279], [0.3082]]]])
in1Mul76069 = tf.constant([[[[0.107], [0.1574]], [[0.8391], [0.8227]]]])
in0Con52524 = tf.constant([[[[0.3758], [0.7559]], [[0.365], [0.2167]]]])
print (np.array2string(model.predict([in0Glo78690,in0Con36137,in0Add38413,in1Add38413,in0Con15812,in0Sub80031,in1Sub80031,in0Mul76069,in1Mul76069,in0Con52524],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min84044.png')

LGlo78690 = global_max_pool2D_layer([[[[1.5718]], [[1.8339]]]], Glo78690), 
LRes3914 = reshape_layer(Glo78690, [1, 1], Res3914), 
LRes8005 = reshape_layer(Res3914, [1, 1, 1], Res8005), 
LMax32182 = max_pool2D_layer(Res8005, 1, 1, 1, 7, false, Max32182), 
LRes16245 = reshape_layer(Max32182, [1, 1], Res16245), 
LAve72894 = average_pooling1D_layer(Res16245, 1, 3, false, Ave72894), 
LCon36137 = concatenate_layer([Ave72894,[[[0.9894]]]], 2, Con36137), 
LAdd38413 = add_layer([[[[0.2059, 0.1014]]], [[[0.0647, 0.6102]]]], Add38413), 
LMin51814 = minimum_layer([Con36137,Add38413], Min51814), 
LRes3092 = reshape_layer(Min51814, [1, 2, 1], Res3092), 
LZer29226 = zero_padding2D_layer(Res3092, 1, 0, 0, 0, Zer29226), 
LCon15812 = concatenate_layer([Zer29226,[[[[0.145], [0.6919]], [[0.9613], [0.0034]]]]], 3, Con15812), 
LSub80031 = subtract_layer([[[[0.3583, 0.3395], [0.8195, 0.0783]], [[0.4654, 0.0736], [0.9488, 0.3072]]]], [[[[0.3116, 0.7309], [0.4141, 0.9641]], [[0.1401, 0.3493], [0.45, 0.6934]]]], Sub80031), 
LBat64364 = batch_normalization_layer(Sub80031, 2, 0.5388212312287723, [0.0871, 0.9965], [0.1124, 0.4092], [0.302, 0.3167], [0.7707, 0.6139], Bat64364), 
LMul76069 = multiply_layer([[[[[0.386], [0.0687]], [[0.5279], [0.3082]]]], [[[[0.107], [0.1574]], [[0.8391], [0.8227]]]]], Mul76069), 
LCon52524 = concatenate_layer([Mul76069,[[[[0.3758], [0.7559]], [[0.365], [0.2167]]]]], 3, Con52524), 
LMax49848 = maximum_layer([Bat64364,Con52524], Max49848), 
LMin84044 = minimum_layer([Con15812,Max49848], Min84044), 
exec_layers([LGlo78690,LRes3914,LRes8005,LMax32182,LRes16245,LAve72894,LCon36137,LAdd38413,LMin51814,LRes3092,LZer29226,LCon15812,LSub80031,LBat64364,LMul76069,LCon52524,LMax49848,LMin84044],["Glo78690","Res3914","Res8005","Max32182","Res16245","Ave72894","Con36137","Add38413","Min51814","Res3092","Zer29226","Con15812","Sub80031","Bat64364","Mul76069","Con52524","Max49848","Min84044"],Min84044,"Min84044")

Actual (Unparsed): [[[[0.0000000, 0.1450000], [0.0000000, 0.6919000]], [[0.2706000, 0.3650000], [0.5782150, 0.0034000]]]]

Expected (Unparsed): [[[[0,0.145],[0,0.6919]],[[0.2706,0.365],[0.5782149427797729,0.0034]]]]

Actual:   [[[[0, 0.145], [0, 0.6919]], [[0.2706, 0.365], [0.5783, 0.0034]]]]

Expected: [[[[0, 0.145], [0, 0.6919]], [[0.2706, 0.365], [0.5783, 0.0034]]]]