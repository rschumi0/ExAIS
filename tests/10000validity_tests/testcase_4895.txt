import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave44060 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave44060 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con38551 = tf.keras.layers.Input(shape=([11]))
in0Fla56472 = tf.keras.layers.Input(shape=([4, 3]))

Ave44060 = keras.layers.Average(name = 'Ave44060', )([in0Ave44060,in1Ave44060])
Res92921 = keras.layers.Reshape((1, 1), name = 'Res92921', )(Ave44060)
Fla90788 = keras.layers.Flatten(name = 'Fla90788', )(Res92921)
Con38551 = keras.layers.Concatenate(axis=1, name = 'Con38551', )([Fla90788,in0Con38551])
Fla56472 = keras.layers.Flatten(name = 'Fla56472', )(in0Fla56472)
Ave32750 = keras.layers.Average(name = 'Ave32750', )([Con38551,Fla56472])
model = tf.keras.models.Model(inputs=[in0Ave44060,in1Ave44060,in0Con38551,in0Fla56472], outputs=Ave32750)
in0Ave44060 = tf.constant([[[[0.5864]]]])
in1Ave44060 = tf.constant([[[[0.8155]]]])
in0Con38551 = tf.constant([[0.7774, 0.8206, 0.6135, 0.4342, 0.9808, 0.9876, 0.6002, 0.7787, 0.4794, 0.3119, 0.9582]])
in0Fla56472 = tf.constant([[[1.1955, 1.8198, 1.1709], [1.2195, 1.5576, 1.4482], [1.2772, 1.6276, 1.3566], [1.0319, 1.4036, 1.022]]])
print (np.array2string(model.predict([in0Ave44060,in1Ave44060,in0Con38551,in0Fla56472],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave32750.png')

LAve44060 = average_layer([[[[[0.5864]]]], [[[[0.8155]]]]], Ave44060), 
LRes92921 = reshape_layer(Ave44060, [1, 1], Res92921), 
LFla90788 = flatten_layer(Res92921, Fla90788), 
LCon38551 = concatenate_layer([Fla90788,[[0.7774, 0.8206, 0.6135, 0.4342, 0.9808, 0.9876, 0.6002, 0.7787, 0.4794, 0.3119, 0.9582]]], 1, Con38551), 
LFla56472 = flatten_layer([[[1.1955, 1.8198, 1.1709], [1.2195, 1.5576, 1.4482], [1.2772, 1.6276, 1.3566], [1.0319, 1.4036, 1.022]]], Fla56472), 
LAve32750 = average_layer([Con38551,Fla56472], Ave32750), 
exec_layers([LAve44060,LRes92921,LFla90788,LCon38551,LFla56472,LAve32750],["Ave44060","Res92921","Fla90788","Con38551","Fla56472","Ave32750"],Ave32750,"Ave32750")

Actual (Unparsed): [[0.9482250, 1.2986000, 0.9957500, 0.9165000, 0.9959000, 1.2145000, 1.1324000, 1.1139000, 1.0676500, 0.7556500, 0.8577500, 0.9901000]]

Expected (Unparsed): [[0.948225,1.2986,0.99575,0.9165000000000001,0.9959,1.2145,1.1324,1.1139,1.06765,0.75565,0.85775,0.9901]]

Actual:   [[0.9483, 1.2986, 0.9958, 0.9165, 0.9959, 1.2145, 1.1324, 1.1139, 1.0677, 0.7557, 0.8578, 0.9901]]

Expected: [[0.9483, 1.2986, 0.9958, 0.9166, 0.9959, 1.2145, 1.1324, 1.1139, 1.0677, 0.7557, 0.8578, 0.9901]]