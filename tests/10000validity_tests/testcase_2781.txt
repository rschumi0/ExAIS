import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave3305 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave3305 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con67275 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Max4385 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Mul15307 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul15307 = tf.keras.layers.Input(shape=([2, 1, 2]))

Ave3305 = keras.layers.Average(name = 'Ave3305', )([in0Ave3305,in1Ave3305])
Zer49321 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer49321', )(Ave3305)
Con67275 = keras.layers.Concatenate(axis=3, name = 'Con67275', )([Zer49321,in0Con67275])
Max4385 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max4385', )(in0Max4385)
Zer34823 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer34823', )(Max4385)
Mul15307 = keras.layers.Multiply(name = 'Mul15307', )([in0Mul15307,in1Mul15307])
Add11247 = keras.layers.Add(name = 'Add11247', )([Zer34823,Mul15307])
Ave36798 = keras.layers.Average(name = 'Ave36798', )([Con67275,Add11247])
model = tf.keras.models.Model(inputs=[in0Ave3305,in1Ave3305,in0Con67275,in0Max4385,in0Mul15307,in1Mul15307], outputs=Ave36798)
in0Ave3305 = tf.constant([[[[0.5824]]]])
in1Ave3305 = tf.constant([[[[0.3434]]]])
in0Con67275 = tf.constant([[[[0.7282]], [[0.7732]]]])
in0Max4385 = tf.constant([[[[1.6383, 1.0605]]]])
in0Mul15307 = tf.constant([[[[0.2624, 0.1557]], [[0.2761, 0.906]]]])
in1Mul15307 = tf.constant([[[[0.0309, 0.5544]], [[0.6754, 0.9916]]]])
print (np.array2string(model.predict([in0Ave3305,in1Ave3305,in0Con67275,in0Max4385,in0Mul15307,in1Mul15307],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave36798.png')

LAve3305 = average_layer([[[[[0.5824]]]], [[[[0.3434]]]]], Ave3305), 
LZer49321 = zero_padding2D_layer(Ave3305, 1, 0, 0, 0, Zer49321), 
LCon67275 = concatenate_layer([Zer49321,[[[[0.7282]], [[0.7732]]]]], 3, Con67275), 
LMax4385 = max_pool2D_layer([[[[1.6383, 1.0605]]]], 1, 1, Max4385), 
LZer34823 = zero_padding2D_layer(Max4385, 1, 0, 0, 0, Zer34823), 
LMul15307 = multiply_layer([[[[[0.2624, 0.1557]], [[0.2761, 0.906]]]], [[[[0.0309, 0.5544]], [[0.6754, 0.9916]]]]], Mul15307), 
LAdd11247 = add_layer([Zer34823,Mul15307], Add11247), 
LAve36798 = average_layer([Con67275,Add11247], Ave36798), 
exec_layers([LAve3305,LZer49321,LCon67275,LMax4385,LZer34823,LMul15307,LAdd11247,LAve36798],["Ave3305","Zer49321","Con67275","Max4385","Zer34823","Mul15307","Add11247","Ave36798"],Ave36798,"Ave36798")

Actual (Unparsed): [[[[0.0040541, 0.4072601]], [[1.1438390, 1.3660448]]]]

Expected (Unparsed): [[[[0.004054080000000001,0.40726004]],[[1.14383897,1.3660448]]]]

Actual:   [[[[0.0041, 0.4073]], [[1.1439, 1.3661]]]]

Expected: [[[[0.0041, 0.4073]], [[1.1439, 1.3661]]]]