import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo86194 = tf.keras.layers.Input(shape=([1, 2]))
in0Cro33351 = tf.keras.layers.Input(shape=([2, 1, 1, 3]))
in0Sim87726 = tf.keras.layers.Input(shape=([1, 3]))
in0Con80309 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Max84432 = tf.keras.layers.Input(shape=([1, 2]))
in1Max84432 = tf.keras.layers.Input(shape=([1, 2]))

Glo86194 = keras.layers.GlobalAveragePooling1D(name = 'Glo86194', )(in0Glo86194)
Res58223 = keras.layers.Reshape((2, 1), name = 'Res58223', )(Glo86194)
Zer51827 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer51827', )(Res58223)
Cro33351 = keras.layers.Cropping3D(cropping=((1, 0), (0, 0), (0, 0)), name = 'Cro33351', )(in0Cro33351)
Res60991 = keras.layers.Reshape((1, 1, 3), name = 'Res60991', )(Cro33351)
Res28344 = keras.layers.Reshape((1, 3), name = 'Res28344', )(Res60991)
Dot56596 = keras.layers.Dot(axes=(1, 2), name = 'Dot56596', )([Zer51827,Res28344])
Fla88219 = keras.layers.Flatten(name = 'Fla88219', )(Dot56596)
Sim87726 = keras.layers.SimpleRNN(1,name = 'Sim87726', )(in0Sim87726)
Res26288 = keras.layers.Reshape((1, 1), name = 'Res26288', )(Sim87726)
Res83627 = keras.layers.Reshape((1, 1, 1), name = 'Res83627', )(Res26288)
Glo80131 = keras.layers.GlobalAveragePooling2D(name = 'Glo80131', )(Res83627)
Add84965 = keras.layers.Add(name = 'Add84965', )([Fla88219,Glo80131])
Res93325 = keras.layers.Reshape((1, 1), name = 'Res93325', )(Add84965)
Res25802 = keras.layers.Reshape((1, 1, 1), name = 'Res25802', )(Res93325)
Con80309 = keras.layers.Concatenate(axis=3, name = 'Con80309', )([Res25802,in0Con80309])
Max84432 = keras.layers.Maximum(name = 'Max84432', )([in0Max84432,in1Max84432])
Res68340 = keras.layers.Reshape((1, 2, 1), name = 'Res68340', )(Max84432)
Con41678 = keras.layers.Conv2D(2, (1, 2),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con41678', )(Res68340)
Sub47285 = keras.layers.Subtract(name = 'Sub47285', )([Con80309,Con41678])
model = tf.keras.models.Model(inputs=[in0Glo86194,in0Cro33351,in0Sim87726,in0Con80309,in0Max84432,in1Max84432], outputs=Sub47285)
w = model.get_layer('Sim87726').get_weights() 
w[0] = np.array([[3], [6], [3]])
w[1] = np.array([[3]])
w[2] = np.array([3])
model.get_layer('Sim87726').set_weights(w) 
w = model.get_layer('Con41678').get_weights() 
w[0] = np.array([[[[0.4424, 0.6198]], [[0.8149, 0.9879]]]])
w[1] = np.array([0, 0])
model.get_layer('Con41678').set_weights(w) 
in0Glo86194 = tf.constant([[[1.8609, 1.6223]]])
in0Cro33351 = tf.constant([[[[[1.508, 1.5018, 1.6142]]], [[[1.9429, 1.9515, 1.5234]]]]])
in0Sim87726 = tf.constant([[[4, 10, 9]]])
in0Con80309 = tf.constant([[[[0.5313]]]])
in0Max84432 = tf.constant([[[0.7341, 0.5191]]])
in1Max84432 = tf.constant([[[0.7758, 0.8247]]])
print (np.array2string(model.predict([in0Glo86194,in0Cro33351,in0Sim87726,in0Con80309,in0Max84432,in1Max84432],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub47285.png')

LGlo86194 = global_average_pooling1D_layer([[[1.8609, 1.6223]]], Glo86194), 
LRes58223 = reshape_layer(Glo86194, [2, 1], Res58223), 
LZer51827 = zero_padding1D_layer(Res58223, 1, 0, Zer51827), 
LCro33351 = cropping3D_layer([[[[[1.508, 1.5018, 1.6142]]], [[[1.9429, 1.9515, 1.5234]]]]], 1, 0, 0, 0, 0, 0, Cro33351), 
LRes60991 = reshape_layer(Cro33351, [1, 1, 3], Res60991), 
LRes28344 = reshape_layer(Res60991, [1, 3], Res28344), 
LDot56596 = dot_layer(Zer51827,Res28344, 1, 2, Dot56596), 
LFla88219 = flatten_layer(Dot56596, Fla88219), 
LSim87726 = simple_rnn_layer([[[4, 10, 9]]],[[3], [6], [3]],[[3]],[3], Sim87726), 
LRes26288 = reshape_layer(Sim87726, [1, 1], Res26288), 
LRes83627 = reshape_layer(Res26288, [1, 1, 1], Res83627), 
LGlo80131 = global_average_pooling2D_layer(Res83627, Glo80131), 
LAdd84965 = add_layer([Fla88219,Glo80131], Add84965), 
LRes93325 = reshape_layer(Add84965, [1, 1], Res93325), 
LRes25802 = reshape_layer(Res93325, [1, 1, 1], Res25802), 
LCon80309 = concatenate_layer([Res25802,[[[[0.5313]]]]], 3, Con80309), 
LMax84432 = maximum_layer([[[[0.7341, 0.5191]]], [[[0.7758, 0.8247]]]], Max84432), 
LRes68340 = reshape_layer(Max84432, [1, 2, 1], Res68340), 
LCon41678 = conv2D_layer(Res68340, 1, 2,[[[[0.4424, 0.6198]], [[0.8149, 0.9879]]]],[0, 0], 1, 1, false, 1, 1, Con41678), 
LSub47285 = subtract_layer(Con80309,Con41678, Sub47285), 
exec_layers([LGlo86194,LRes58223,LZer51827,LCro33351,LRes60991,LRes28344,LDot56596,LFla88219,LSim87726,LRes26288,LRes83627,LGlo80131,LAdd84965,LRes93325,LRes25802,LCon80309,LMax84432,LRes68340,LCon41678,LSub47285],["Glo86194","Res58223","Zer51827","Cro33351","Res60991","Res28344","Dot56596","Fla88219","Sim87726","Res26288","Res83627","Glo80131","Add84965","Res93325","Res25802","Con80309","Max84432","Res68340","Con41678","Sub47285"],Sub47285,"Sub47285")

Actual (Unparsed): [[[[6.0876964, -0.7642620]]]]

Expected (Unparsed): [[[[6.08769622,-0.7642619700000001]]]]

Actual:   [[[[6.0877, -0.7642]]]]

Expected: [[[[6.0877, -0.7642]]]]