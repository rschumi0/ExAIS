import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min12343 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Min12343 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con85884 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot69443 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot69443 = tf.keras.layers.Input(shape=([3, 2]))

Min12343 = keras.layers.Minimum(name = 'Min12343', )([in0Min12343,in1Min12343])
Res68028 = keras.layers.Reshape((2, 1, 1), name = 'Res68028', )(Min12343)
Res62948 = keras.layers.Reshape((2, 1), name = 'Res62948', )(Res68028)
Up_4163 = keras.layers.UpSampling1D(size=(1), name = 'Up_4163', )(Res62948)
Con85884 = keras.layers.Concatenate(axis=2, name = 'Con85884', )([Up_4163,in0Con85884])
Dot69443 = keras.layers.Dot(axes=(1, 1), name = 'Dot69443', )([in0Dot69443,in1Dot69443])
Mul21749 = keras.layers.Multiply(name = 'Mul21749', )([Con85884,Dot69443])
Res26139 = keras.layers.Reshape((2, 2, 1), name = 'Res26139', )(Mul21749)
Res39945 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res39945', )(Res26139)
Glo70179 = keras.layers.GlobalAveragePooling3D(name = 'Glo70179', )(Res39945)
model = tf.keras.models.Model(inputs=[in0Min12343,in1Min12343,in0Con85884,in0Dot69443,in1Dot69443], outputs=Glo70179)
in0Min12343 = tf.constant([[[[[0.9124]]], [[[0.0942]]]]])
in1Min12343 = tf.constant([[[[[0.1847]]], [[[0.6924]]]]])
in0Con85884 = tf.constant([[[0.3566], [0.8882]]])
in0Dot69443 = tf.constant([[[0.9015, 0.1837], [0.1731, 0.9589], [0.6368, 0.6116]]])
in1Dot69443 = tf.constant([[[0.6344, 0.4436], [0.9702, 0.5096], [0.625, 0.4866]]])
print (np.array2string(model.predict([in0Min12343,in1Min12343,in0Con85884,in0Dot69443,in1Dot69443],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo70179.png')

LMin12343 = minimum_layer([[[[[[0.9124]]], [[[0.0942]]]]], [[[[[0.1847]]], [[[0.6924]]]]]], Min12343), 
LRes68028 = reshape_layer(Min12343, [2, 1, 1], Res68028), 
LRes62948 = reshape_layer(Res68028, [2, 1], Res62948), 
LUp_4163 = up_sampling1D_layer(Res62948, 1, Up_4163), 
LCon85884 = concatenate_layer([Up_4163,[[[0.3566], [0.8882]]]], 2, Con85884), 
LDot69443 = dot_layer([[[0.9015, 0.1837], [0.1731, 0.9589], [0.6368, 0.6116]]], [[[0.6344, 0.4436], [0.9702, 0.5096], [0.625, 0.4866]]], 1, 1, Dot69443), 
LMul21749 = multiply_layer([Con85884,Dot69443], Mul21749), 
LRes26139 = reshape_layer(Mul21749, [2, 2, 1], Res26139), 
LRes39945 = reshape_layer(Res26139, [2, 2, 1, 1], Res39945), 
LGlo70179 = global_average_pooling3D_layer(Res39945, Glo70179), 
exec_layers([LMin12343,LRes68028,LRes62948,LUp_4163,LCon85884,LDot69443,LMul21749,LRes26139,LRes39945,LGlo70179],["Min12343","Res68028","Res62948","Up_4163","Con85884","Dot69443","Mul21749","Res26139","Res39945","Glo70179"],Glo70179,"Glo70179")

Actual (Unparsed): [[0.3500200]]

Expected (Unparsed): [[0.35002002221850004]]

Actual:   [[0.3501]]

Expected: [[0.3501]]