import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub24353 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in1Sub24353 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in0Dot18778 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot18778 = tf.keras.layers.Input(shape=([2, 2]))
in0Con53203 = tf.keras.layers.Input(shape=([3, 3, 3]))

Sub24353 = keras.layers.Subtract(name = 'Sub24353', )([in0Sub24353,in1Sub24353])
Res99310 = keras.layers.Reshape((3, 3, 4), name = 'Res99310', )(Sub24353)
Dot18778 = keras.layers.Dot(axes=(2, 2), name = 'Dot18778', )([in0Dot18778,in1Dot18778])
Res64795 = keras.layers.Reshape((2, 2, 1), name = 'Res64795', )(Dot18778)
Ave29336 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 1), padding='valid', name = 'Ave29336', )(Res64795)
Zer57603 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer57603', )(Ave29336)
Con53203 = keras.layers.Concatenate(axis=3, name = 'Con53203', )([Zer57603,in0Con53203])
Min2843 = keras.layers.Minimum(name = 'Min2843', )([Res99310,Con53203])
model = tf.keras.models.Model(inputs=[in0Sub24353,in1Sub24353,in0Dot18778,in1Dot18778,in0Con53203], outputs=Min2843)
in0Sub24353 = tf.constant([[[[[0.1592, 0.8528], [0.0331, 0.161]], [[0.9085, 0.4771], [0.5464, 0.675]], [[0.1457, 0.4761], [0.5034, 0.0291]]], [[[0.8829, 0.2119], [0.6476, 0.0295]], [[0.3954, 0.0339], [0.1952, 0.8214]], [[0.0186, 0.0627], [0.6427, 0.1893]]], [[[0.1406, 0.304], [0.6738, 0.3471]], [[0.1517, 0.3451], [0.557, 0.2181]], [[0.3826, 0.2024], [0.842, 0.2851]]]]])
in1Sub24353 = tf.constant([[[[[0.8708, 0.9827], [0.6066, 0.4503]], [[0.1312, 0.8954], [0.9874, 0.9874]], [[0.9738, 0.8131], [0.2317, 0.59]]], [[[0.8131, 0.0127], [0.0529, 0.7261]], [[0.8434, 0.9516], [0.6377, 0.9912]], [[0.9142, 0.9344], [0.2614, 0.9223]]], [[[0.9366, 0.3062], [0.097, 0.7804]], [[0.174, 0.3732], [0.4712, 0.1398]], [[0.8253, 0.5957], [0.5164, 0.7312]]]]])
in0Dot18778 = tf.constant([[[0.8977, 0.7255], [0.8937, 0.88]]])
in1Dot18778 = tf.constant([[[0.4833, 0.4647], [0.0238, 0.0504]]])
in0Con53203 = tf.constant([[[[0.1895, 0.1513, 0.4247], [0.9661, 0.9692, 0.5152], [0.7519, 0.8094, 0.5311]], [[0.9271, 0.7948, 0.8268], [0.471, 0.4999, 0.4722], [0.9629, 0.4398, 0.2366]], [[0.1059, 0.4026, 0.0566], [0.4667, 0.6338, 0.7709], [0.3911, 0.2711, 0.2211]]]])
print (np.array2string(model.predict([in0Sub24353,in1Sub24353,in0Dot18778,in1Dot18778,in0Con53203],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min2843.png')

LSub24353 = subtract_layer([[[[[0.1592, 0.8528], [0.0331, 0.161]], [[0.9085, 0.4771], [0.5464, 0.675]], [[0.1457, 0.4761], [0.5034, 0.0291]]], [[[0.8829, 0.2119], [0.6476, 0.0295]], [[0.3954, 0.0339], [0.1952, 0.8214]], [[0.0186, 0.0627], [0.6427, 0.1893]]], [[[0.1406, 0.304], [0.6738, 0.3471]], [[0.1517, 0.3451], [0.557, 0.2181]], [[0.3826, 0.2024], [0.842, 0.2851]]]]], [[[[[0.8708, 0.9827], [0.6066, 0.4503]], [[0.1312, 0.8954], [0.9874, 0.9874]], [[0.9738, 0.8131], [0.2317, 0.59]]], [[[0.8131, 0.0127], [0.0529, 0.7261]], [[0.8434, 0.9516], [0.6377, 0.9912]], [[0.9142, 0.9344], [0.2614, 0.9223]]], [[[0.9366, 0.3062], [0.097, 0.7804]], [[0.174, 0.3732], [0.4712, 0.1398]], [[0.8253, 0.5957], [0.5164, 0.7312]]]]], Sub24353), 
LRes99310 = reshape_layer(Sub24353, [3, 3, 4], Res99310), 
LDot18778 = dot_layer([[[0.8977, 0.7255], [0.8937, 0.88]]], [[[0.4833, 0.4647], [0.0238, 0.0504]]], 2, 2, Dot18778), 
LRes64795 = reshape_layer(Dot18778, [2, 2, 1], Res64795), 
LAve29336 = average_pooling2D_layer(Res64795, 1, 2, 1, 1, false, Ave29336), 
LZer57603 = zero_padding2D_layer(Ave29336, 1, 0, 2, 0, Zer57603), 
LCon53203 = concatenate_layer([Zer57603,[[[[0.1895, 0.1513, 0.4247], [0.9661, 0.9692, 0.5152], [0.7519, 0.8094, 0.5311]], [[0.9271, 0.7948, 0.8268], [0.471, 0.4999, 0.4722], [0.9629, 0.4398, 0.2366]], [[0.1059, 0.4026, 0.0566], [0.4667, 0.6338, 0.7709], [0.3911, 0.2711, 0.2211]]]]], 3, Con53203), 
LMin2843 = minimum_layer([Res99310,Con53203], Min2843), 
exec_layers([LSub24353,LRes99310,LDot18778,LRes64795,LAve29336,LZer57603,LCon53203,LMin2843],["Sub24353","Res99310","Dot18778","Res64795","Ave29336","Zer57603","Con53203","Min2843"],Min2843,"Min2843")

Actual (Unparsed): [[[[-0.7116000, -0.1299000, -0.5735000, -0.2893000], [0.0000000, -0.4183000, -0.4410000, -0.3124000], [-0.8281000, -0.3370000, 0.2717000, -0.5609000]], [[0.0000000, 0.1992000, 0.5947000, -0.6966000], [-0.4480000, -0.9177000, -0.4425000, -0.1698000], [-0.8956000, -0.8717000, 0.3813000, -0.7330000]], [[-0.7960000, -0.0022000, 0.4026000, -0.4333000], [-0.0223000, -0.0281000, 0.0858000, 0.0783000], [-0.4427000, -0.3933000, 0.2711000, -0.4461000]]]]

Expected (Unparsed): [[[[-0.7116,-0.12990000000000002,-0.5735,-0.2893],[0,-0.41829999999999995,-0.44100000000000006,-0.3124],[-0.8281000000000001,-0.337,0.27169999999999994,-0.5609]],[[0,0.19920000000000002,0.5947,-0.6966],[-0.44800000000000006,-0.9177,-0.4425,-0.16979999999999995],[-0.8956000000000001,-0.8717,0.38130000000000003,-0.733]],[[-0.796,-0.0022000000000000353,0.4026,-0.43329999999999996],[-0.022299999999999986,-0.02809999999999996,0.08580000000000004,0.07829999999999998],[-0.44270000000000004,-0.3933,0.2711,-0.44609999999999994]]]]

Actual:   [[[[-0.7116, -0.1299, -0.5735, -0.2893], [0, -0.4183, -0.441, -0.3124], [-0.8281, -0.337, 0.2717, -0.5609]], [[0, 0.1992, 0.5947, -0.6966], [-0.448, -0.9177, -0.4425, -0.1698], [-0.8956, -0.8717, 0.3813, -0.733]], [[-0.796, -0.0022, 0.4026, -0.4333], [-0.0223, -0.0281, 0.0858, 0.0783], [-0.4427, -0.3933, 0.2711, -0.4461]]]]

Expected: [[[[-0.7116, -0.1299, -0.5735, -0.2893], [0, -0.4182, -0.441, -0.3124], [-0.8281, -0.337, 0.2717, -0.5609]], [[0, 0.1993, 0.5947, -0.6966], [-0.448, -0.9177, -0.4425, -0.1697], [-0.8956, -0.8717, 0.3814, -0.733]], [[-0.796, -0.0022, 0.4026, -0.4332], [-0.0222, -0.028, 0.0859, 0.0783], [-0.4427, -0.3933, 0.2711, -0.446]]]]