import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave88778 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave88778 = tf.keras.layers.Input(shape=([1, 2]))
in0Glo73293 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Ave88778 = keras.layers.Average(name = 'Ave88778', )([in0Ave88778,in1Ave88778])
Fla49359 = keras.layers.Flatten(name = 'Fla49359', )(Ave88778)
Glo73293 = keras.layers.GlobalAveragePooling3D(name = 'Glo73293', )(in0Glo73293)
Sub41668 = keras.layers.Subtract(name = 'Sub41668', )([Fla49359,Glo73293])
Res60839 = keras.layers.Reshape((2, 1), name = 'Res60839', )(Sub41668)
Res68485 = keras.layers.Reshape((2, 1, 1), name = 'Res68485', )(Res60839)
Res93006 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res93006', )(Res68485)
Up_92988 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_92988', )(Res93006)
model = tf.keras.models.Model(inputs=[in0Ave88778,in1Ave88778,in0Glo73293], outputs=Up_92988)
in0Ave88778 = tf.constant([[[0.7219, 0.5196]]])
in1Ave88778 = tf.constant([[[0.0482, 0.9994]]])
in0Glo73293 = tf.constant([[[[[1.1202, 1.8587], [1.4387, 1.1236]]]]])
print (np.array2string(model.predict([in0Ave88778,in1Ave88778,in0Glo73293],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_92988.png')

LAve88778 = average_layer([[[[0.7219, 0.5196]]], [[[0.0482, 0.9994]]]], Ave88778), 
LFla49359 = flatten_layer(Ave88778, Fla49359), 
LGlo73293 = global_average_pooling3D_layer([[[[[1.1202, 1.8587], [1.4387, 1.1236]]]]], Glo73293), 
LSub41668 = subtract_layer(Fla49359,Glo73293, Sub41668), 
LRes60839 = reshape_layer(Sub41668, [2, 1], Res60839), 
LRes68485 = reshape_layer(Res60839, [2, 1, 1], Res68485), 
LRes93006 = reshape_layer(Res68485, [2, 1, 1, 1], Res93006), 
LUp_92988 = up_sampling3D_layer(Res93006, 2, 1, 1, Up_92988), 
exec_layers([LAve88778,LFla49359,LGlo73293,LSub41668,LRes60839,LRes68485,LRes93006,LUp_92988],["Ave88778","Fla49359","Glo73293","Sub41668","Res60839","Res68485","Res93006","Up_92988"],Up_92988,"Up_92988")

Actual (Unparsed): [[[[[-0.8944000]]], [[[-0.8944000]]], [[[-0.7316500]]], [[[-0.7316500]]]]]

Expected (Unparsed): [[[[[-0.8944000000000002]]],[[[-0.8944000000000002]]],[[[-0.73165]]],[[[-0.73165]]]]]

Actual:   [[[[[-0.8944]]], [[[-0.8944]]], [[[-0.7316]]], [[[-0.7316]]]]]

Expected: [[[[[-0.8944]]], [[[-0.8944]]], [[[-0.7316]]], [[[-0.7316]]]]]