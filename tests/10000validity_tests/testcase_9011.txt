import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_70792 = tf.keras.layers.Input(shape=([4, 3, 3]))
in0Bat52837 = tf.keras.layers.Input(shape=([4, 2]))
in0Con20510 = tf.keras.layers.Input(shape=([8, 7]))

Up_70792 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_70792', )(in0Up_70792)
Res55259 = keras.layers.Reshape((8, 9), name = 'Res55259', )(Up_70792)
Bat52837 = keras.layers.BatchNormalization(axis=1, epsilon=0.2870273242130058,  name = 'Bat52837', )(in0Bat52837)
Ave21751 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='same', name = 'Ave21751', )(Bat52837)
Zer70187 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer70187', )(Ave21751)
Con20510 = keras.layers.Concatenate(axis=2, name = 'Con20510', )([Zer70187,in0Con20510])
Mul4779 = keras.layers.Multiply(name = 'Mul4779', )([Res55259,Con20510])
Res86474 = keras.layers.Reshape((8, 9, 1), name = 'Res86474', )(Mul4779)
Res7053 = keras.layers.Reshape((8, 9, 1, 1), name = 'Res7053', )(Res86474)
Zer6748 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer6748', )(Res7053)
model = tf.keras.models.Model(inputs=[in0Up_70792,in0Bat52837,in0Con20510], outputs=Zer6748)
w = model.get_layer('Bat52837').get_weights() 
w[0] = np.array([0.942, 0.5353, 0.5994, 0.5689])
w[1] = np.array([0.2706, 0.5097, 0.3197, 0.6563])
w[2] = np.array([0.9049, 0.4123, 0.335, 0.9426])
w[3] = np.array([0.819, 0.9545, 0.9609, 0.3422])
model.get_layer('Bat52837').set_weights(w) 
in0Up_70792 = tf.constant([[[[1.7109, 1.9423, 1.407], [1.7739, 1.5539, 1.9656], [1.2655, 1.7116, 1.1152]], [[1.4616, 1.0759, 1.0734], [1.8872, 1.8001, 1.7757], [1.9366, 1.043, 1.5185]], [[1.3359, 1.2919, 1.6881], [1.1587, 1.0308, 1.5517], [1.4809, 1.2736, 1.5841]], [[1.4989, 1.9098, 1.1085], [1.1078, 1.7224, 1.2528], [1.5842, 1.0735, 1.4117]]]])
in0Bat52837 = tf.constant([[[1.394, 1.9889], [1.7734, 1.3628], [1.2204, 1.2156], [1.864, 1.1873]]])
in0Con20510 = tf.constant([[[0.7954, 0.296, 0.3843, 0.2681, 0.4697, 0.5564, 0.7787], [0.3782, 0.3376, 0.6579, 0.3182, 0.2125, 0.5016, 0.9411], [0.5112, 0.8051, 0.5657, 0.7758, 0.967, 0.817, 0.4382], [0.475, 0.508, 0.6663, 0.5037, 0.6888, 0.1323, 0.5087], [0.7469, 0.68, 0.9976, 0.2944, 0.8443, 0.6001, 0.6692], [0.1096, 0.2001, 0.3866, 0.974, 0.2795, 0.3948, 0.1825], [0.9412, 0.2571, 0.5428, 0.2472, 0.4712, 0.1512, 0.6071], [0.1662, 0.5718, 0.8568, 0.8086, 0.7987, 0.2303, 0.1431]]])
print (np.array2string(model.predict([in0Up_70792,in0Bat52837,in0Con20510],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer6748.png')

LUp_70792 = up_sampling2D_layer([[[[1.7109, 1.9423, 1.407], [1.7739, 1.5539, 1.9656], [1.2655, 1.7116, 1.1152]], [[1.4616, 1.0759, 1.0734], [1.8872, 1.8001, 1.7757], [1.9366, 1.043, 1.5185]], [[1.3359, 1.2919, 1.6881], [1.1587, 1.0308, 1.5517], [1.4809, 1.2736, 1.5841]], [[1.4989, 1.9098, 1.1085], [1.1078, 1.7224, 1.2528], [1.5842, 1.0735, 1.4117]]]], 2, 1, Up_70792), 
LRes55259 = reshape_layer(Up_70792, [8, 9], Res55259), 
LBat52837 = batch_normalization_layer([[[1.394, 1.9889], [1.7734, 1.3628], [1.2204, 1.2156], [1.864, 1.1873]]], 1, 0.2870273242130058, [0.942, 0.5353, 0.5994, 0.5689], [0.2706, 0.5097, 0.3197, 0.6563], [0.9049, 0.4123, 0.335, 0.9426], [0.819, 0.9545, 0.9609, 0.3422], Bat52837), 
LAve21751 = average_pooling1D_layer(Bat52837, 2, 1, true, Ave21751), 
LZer70187 = zero_padding1D_layer(Ave21751, 4, 0, Zer70187), 
LCon20510 = concatenate_layer([Zer70187,[[[0.7954, 0.296, 0.3843, 0.2681, 0.4697, 0.5564, 0.7787], [0.3782, 0.3376, 0.6579, 0.3182, 0.2125, 0.5016, 0.9411], [0.5112, 0.8051, 0.5657, 0.7758, 0.967, 0.817, 0.4382], [0.475, 0.508, 0.6663, 0.5037, 0.6888, 0.1323, 0.5087], [0.7469, 0.68, 0.9976, 0.2944, 0.8443, 0.6001, 0.6692], [0.1096, 0.2001, 0.3866, 0.974, 0.2795, 0.3948, 0.1825], [0.9412, 0.2571, 0.5428, 0.2472, 0.4712, 0.1512, 0.6071], [0.1662, 0.5718, 0.8568, 0.8086, 0.7987, 0.2303, 0.1431]]]], 2, Con20510), 
LMul4779 = multiply_layer([Res55259,Con20510], Mul4779), 
LRes86474 = reshape_layer(Mul4779, [8, 9, 1], Res86474), 
LRes7053 = reshape_layer(Res86474, [8, 9, 1, 1], Res7053), 
LZer6748 = zero_padding3D_layer(Res7053, 1, 1, 1, 1, 1, 1, Zer6748), 
exec_layers([LUp_70792,LRes55259,LBat52837,LAve21751,LZer70187,LCon20510,LMul4779,LRes86474,LRes7053,LZer6748],["Up_70792","Res55259","Bat52837","Ave21751","Zer70187","Con20510","Mul4779","Res86474","Res7053","Zer6748"],Zer6748,"Zer6748")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.1191278], [0.0000000]], [[0.0000000], [0.5250744], [0.0000000]], [[0.0000000], [0.5971638], [0.0000000]], [[0.0000000], [0.5269774], [0.0000000]], [[0.0000000], [0.5944053], [0.0000000]], [[0.0000000], [0.9523342], [0.0000000]], [[0.0000000], [0.8684063], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.5321274], [0.0000000]], [[0.0000000], [0.5988686], [0.0000000]], [[0.0000000], [1.0223108], [0.0000000]], [[0.0000000], [0.6254539], [0.0000000]], [[0.0000000], [0.2689187], [0.0000000]], [[0.0000000], [0.8585386], [0.0000000]], [[0.0000000], [1.0495148], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.5487221], [0.0000000]], [[0.0000000], [1.5193848], [0.0000000]], [[0.0000000], [1.0183165], [0.0000000]], [[0.0000000], [1.3775880], [0.0000000]], [[0.0000000], [1.8726922], [0.0000000]], [[0.0000000], [0.8521310], [0.0000000]], [[0.0000000], [0.6654067], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.5098650], [0.0000000]], [[0.0000000], [0.9586976], [0.0000000]], [[0.0000000], [1.1994066], [0.0000000]], [[0.0000000], [0.8944201], [0.0000000]], [[0.0000000], [1.3339300], [0.0000000]], [[0.0000000], [0.1379889], [0.0000000]], [[0.0000000], [0.7724610], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.2505954], [0.0000000]], [[0.0000000], [1.4261853], [0.0000000]], [[0.0000000], [1.2608419], [0.0000000]], [[0.0000000], [0.7879160], [0.0000000]], [[0.0000000], [1.0283261], [0.0000000]], [[0.0000000], [0.4568205], [0.0000000]], [[0.0000000], [1.2503239], [0.0000000]], [[0.0000000], [0.7642873], [0.0000000]], [[0.0000000], [1.0600797], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.3080939], [0.0000000]], [[0.0000000], [1.1359264], [0.0000000]], [[0.0000000], [0.1850158], [0.0000000]], [[0.0000000], [0.2318559], [0.0000000]], [[0.0000000], [0.3985073], [0.0000000]], [[0.0000000], [1.5113558], [0.0000000]], [[0.0000000], [0.4139116], [0.0000000]], [[0.0000000], [0.5028173], [0.0000000]], [[0.0000000], [0.2890983], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.5827561], [0.0000000]], [[0.0000000], [1.5507523], [0.0000000]], [[0.0000000], [1.0433202], [0.0000000]], [[0.0000000], [0.2848154], [0.0000000]], [[0.0000000], [0.9349187], [0.0000000]], [[0.0000000], [0.3096922], [0.0000000]], [[0.0000000], [0.7464750], [0.0000000]], [[0.0000000], [0.1623132], [0.0000000]], [[0.0000000], [0.8570431], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.9742248], [0.0000000]], [[0.0000000], [1.5885631], [0.0000000]], [[0.0000000], [0.1842327], [0.0000000]], [[0.0000000], [0.6334400], [0.0000000]], [[0.0000000], [1.4757523], [0.0000000]], [[0.0000000], [1.0130141], [0.0000000]], [[0.0000000], [1.2653005], [0.0000000]], [[0.0000000], [0.2472271], [0.0000000]], [[0.0000000], [0.2020143], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0.0],[0]],[[0],[1.1191278],[0]],[[0],[0.5250743999999999],[0]],[[0],[0.59716377],[0]],[[0],[0.5269773600000001],[0]],[[0],[0.59440535],[0]],[[0],[0.95233424],[0]],[[0],[0.8684062399999999],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0.0],[0]],[[0],[0.5321274],[0]],[[0],[0.5988686400000001],[0]],[[0],[1.02231081],[0]],[[0],[0.62545392],[0]],[[0],[0.26891875],[0]],[[0],[0.8585385600000001],[0]],[[0],[1.0495147200000001],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0.0],[0]],[[0],[0.5487220799999999],[0]],[[0],[1.5193847200000001],[0]],[[0],[1.01831657],[0]],[[0],[1.3775880600000001],[0]],[[0],[1.8726922000000001],[0]],[[0],[0.8521309999999999],[0]],[[0],[0.6654066999999999],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0.0],[0]],[[0],[0.5098649999999999],[0]],[[0],[0.9586976],[0]],[[0],[1.19940663],[0]],[[0],[0.8944200900000001],[0]],[[0],[1.33393008],[0]],[[0],[0.1379889],[0]],[[0],[0.77246095],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.250595439923969],[0]],[[0],[1.426185257078936],[0]],[[0],[1.26084189],[0]],[[0],[0.7879160000000001],[0]],[[0],[1.02832608],[0]],[[0],[0.45682048000000003],[0]],[[0],[1.2503238700000001],[0]],[[0],[0.76428736],[0]],[[0],[1.06007972],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.3080939527587263],[0]],[[0],[1.1359263292652417],[0]],[[0],[0.18501576],[0]],[[0],[0.23185587000000002],[0]],[[0],[0.39850727999999996],[0]],[[0],[1.5113558],[0]],[[0],[0.4139115500000001],[0]],[[0],[0.50281728],[0]],[[0],[0.28909825],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.5827560222145398],[0]],[[0],[1.5507522730872438],[0]],[[0],[1.0433202000000001],[0]],[[0],[0.28481537999999995],[0]],[[0],[0.9349187199999999],[0]],[[0],[0.30969216],[0]],[[0],[0.7464750400000001],[0]],[[0],[0.1623132],[0]],[[0],[0.8570430699999999],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.9742247278670517],[0]],[[0],[1.588563147315146],[0]],[[0],[0.1842327],[0]],[[0],[0.6334400399999999],[0]],[[0],[1.47575232],[0]],[[0],[1.0130140799999998],[0]],[[0],[1.26530054],[0]],[[0],[0.24722704999999998],[0]],[[0],[0.20201427],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [1.1192], [0]], [[0], [0.5251], [0]], [[0], [0.5972], [0]], [[0], [0.527], [0]], [[0], [0.5945], [0]], [[0], [0.9524], [0]], [[0], [0.8685], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.5322], [0]], [[0], [0.5989], [0]], [[0], [1.0224], [0]], [[0], [0.6255], [0]], [[0], [0.269], [0]], [[0], [0.8586], [0]], [[0], [1.0496], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.5488], [0]], [[0], [1.5194], [0]], [[0], [1.0184], [0]], [[0], [1.3776], [0]], [[0], [1.8727], [0]], [[0], [0.8522], [0]], [[0], [0.6655], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.5099], [0]], [[0], [0.9587], [0]], [[0], [1.1995], [0]], [[0], [0.8945], [0]], [[0], [1.334], [0]], [[0], [0.138], [0]], [[0], [0.7725], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.2506], [0]], [[0], [1.4262], [0]], [[0], [1.2609], [0]], [[0], [0.788], [0]], [[0], [1.0284], [0]], [[0], [0.4569], [0]], [[0], [1.2504], [0]], [[0], [0.7643], [0]], [[0], [1.0601], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.3081], [0]], [[0], [1.136], [0]], [[0], [0.1851], [0]], [[0], [0.2319], [0]], [[0], [0.3986], [0]], [[0], [1.5114], [0]], [[0], [0.414], [0]], [[0], [0.5029], [0]], [[0], [0.2891], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.5828], [0]], [[0], [1.5508], [0]], [[0], [1.0434], [0]], [[0], [0.2849], [0]], [[0], [0.935], [0]], [[0], [0.3097], [0]], [[0], [0.7465], [0]], [[0], [0.1624], [0]], [[0], [0.8571], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.9743], [0]], [[0], [1.5886], [0]], [[0], [0.1843], [0]], [[0], [0.6335], [0]], [[0], [1.4758], [0]], [[0], [1.0131], [0]], [[0], [1.2654], [0]], [[0], [0.2473], [0]], [[0], [0.2021], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [1.1192], [0]], [[0], [0.5251], [0]], [[0], [0.5972], [0]], [[0], [0.527], [0]], [[0], [0.5945], [0]], [[0], [0.9524], [0]], [[0], [0.8685], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.5322], [0]], [[0], [0.5989], [0]], [[0], [1.0224], [0]], [[0], [0.6255], [0]], [[0], [0.269], [0]], [[0], [0.8586], [0]], [[0], [1.0496], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.5488], [0]], [[0], [1.5194], [0]], [[0], [1.0184], [0]], [[0], [1.3776], [0]], [[0], [1.8727], [0]], [[0], [0.8522], [0]], [[0], [0.6655], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.5099], [0]], [[0], [0.9587], [0]], [[0], [1.1995], [0]], [[0], [0.8945], [0]], [[0], [1.334], [0]], [[0], [0.138], [0]], [[0], [0.7725], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.2506], [0]], [[0], [1.4262], [0]], [[0], [1.2609], [0]], [[0], [0.788], [0]], [[0], [1.0284], [0]], [[0], [0.4569], [0]], [[0], [1.2504], [0]], [[0], [0.7643], [0]], [[0], [1.0601], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.3081], [0]], [[0], [1.136], [0]], [[0], [0.1851], [0]], [[0], [0.2319], [0]], [[0], [0.3986], [0]], [[0], [1.5114], [0]], [[0], [0.414], [0]], [[0], [0.5029], [0]], [[0], [0.2891], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.5828], [0]], [[0], [1.5508], [0]], [[0], [1.0434], [0]], [[0], [0.2849], [0]], [[0], [0.935], [0]], [[0], [0.3097], [0]], [[0], [0.7465], [0]], [[0], [0.1624], [0]], [[0], [0.8571], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.9743], [0]], [[0], [1.5886], [0]], [[0], [0.1843], [0]], [[0], [0.6335], [0]], [[0], [1.4758], [0]], [[0], [1.0131], [0]], [[0], [1.2654], [0]], [[0], [0.2473], [0]], [[0], [0.2021], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]