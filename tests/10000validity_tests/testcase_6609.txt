import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot56057 = tf.keras.layers.Input(shape=([3]))
in1Dot56057 = tf.keras.layers.Input(shape=([3]))
in0Con70992 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Mul89934 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Mul89934 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Dot56057 = keras.layers.Dot(axes=(1, 1), name = 'Dot56057', )([in0Dot56057,in1Dot56057])
Res88955 = keras.layers.Reshape((1, 1), name = 'Res88955', )(Dot56057)
Res23437 = keras.layers.Reshape((1, 1, 1), name = 'Res23437', )(Res88955)
Res25399 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res25399', )(Res23437)
Zer1466 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer1466', )(Res25399)
Con70992 = keras.layers.Concatenate(axis=4, name = 'Con70992', )([Zer1466,in0Con70992])
Mul89934 = keras.layers.Multiply(name = 'Mul89934', )([in0Mul89934,in1Mul89934])
Mul23402 = keras.layers.Multiply(name = 'Mul23402', )([Con70992,Mul89934])
model = tf.keras.models.Model(inputs=[in0Dot56057,in1Dot56057,in0Con70992,in0Mul89934,in1Mul89934], outputs=Mul23402)
in0Dot56057 = tf.constant([[0.0525, 0.7763, 0.0152]])
in1Dot56057 = tf.constant([[0.6662, 0.8248, 0.2815]])
in0Con70992 = tf.constant([[[[[0.0452], [0.0833]]]]])
in0Mul89934 = tf.constant([[[[[0.3528, 0.8012], [0.022, 0.9693]]]]])
in1Mul89934 = tf.constant([[[[[0.8369, 0.2889], [0.3561, 0.4676]]]]])
print (np.array2string(model.predict([in0Dot56057,in1Dot56057,in0Con70992,in0Mul89934,in1Mul89934],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul23402.png')

LDot56057 = dot_layer([[0.0525, 0.7763, 0.0152]], [[0.6662, 0.8248, 0.2815]], 1, 1, Dot56057), 
LRes88955 = reshape_layer(Dot56057, [1, 1], Res88955), 
LRes23437 = reshape_layer(Res88955, [1, 1, 1], Res23437), 
LRes25399 = reshape_layer(Res23437, [1, 1, 1, 1], Res25399), 
LZer1466 = zero_padding3D_layer(Res25399, 0, 0, 0, 0, 1, 0, Zer1466), 
LCon70992 = concatenate_layer([Zer1466,[[[[[0.0452], [0.0833]]]]]], 4, Con70992), 
LMul89934 = multiply_layer([[[[[[0.3528, 0.8012], [0.022, 0.9693]]]]], [[[[[0.8369, 0.2889], [0.3561, 0.4676]]]]]], Mul89934), 
LMul23402 = multiply_layer([Con70992,Mul89934], Mul23402), 
exec_layers([LDot56057,LRes88955,LRes23437,LRes25399,LZer1466,LCon70992,LMul89934,LMul23402],["Dot56057","Res88955","Res23437","Res25399","Zer1466","Con70992","Mul89934","Mul23402"],Mul23402,"Mul23402")

Actual (Unparsed): [[[[[0.0000000, 0.0104623], [0.0053237, 0.0377553]]]]]

Expected (Unparsed): [[[[[0.0,0.010462293935999999],[0.005323703503668,0.037755281844000003]]]]]

Actual:   [[[[[0, 0.0105], [0.0054, 0.0378]]]]]

Expected: [[[[[0, 0.0105], [0.0054, 0.0378]]]]]