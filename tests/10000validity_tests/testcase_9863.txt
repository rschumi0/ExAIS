import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave40213 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Ave40213 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Min4014 = tf.keras.layers.Input(shape=([2, 1]))
in1Min4014 = tf.keras.layers.Input(shape=([2, 1]))
in0Con20617 = tf.keras.layers.Input(shape=([2]))
in0Glo18944 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con89578 = tf.keras.layers.Input(shape=([3]))

Ave40213 = keras.layers.Average(name = 'Ave40213', )([in0Ave40213,in1Ave40213])
Res53113 = keras.layers.Reshape((1, 2, 2), name = 'Res53113', )(Ave40213)
Res31107 = keras.layers.Reshape((1, 4), name = 'Res31107', )(Res53113)
Fla23548 = keras.layers.Flatten(name = 'Fla23548', )(Res31107)
Min4014 = keras.layers.Minimum(name = 'Min4014', )([in0Min4014,in1Min4014])
Fla76761 = keras.layers.Flatten(name = 'Fla76761', )(Min4014)
Con20617 = keras.layers.Concatenate(axis=1, name = 'Con20617', )([Fla76761,in0Con20617])
Sub46483 = keras.layers.Subtract(name = 'Sub46483', )([Fla23548,Con20617])
Glo18944 = keras.layers.GlobalAveragePooling2D(name = 'Glo18944', )(in0Glo18944)
Con89578 = keras.layers.Concatenate(axis=1, name = 'Con89578', )([Glo18944,in0Con89578])
Min46743 = keras.layers.Minimum(name = 'Min46743', )([Sub46483,Con89578])
model = tf.keras.models.Model(inputs=[in0Ave40213,in1Ave40213,in0Min4014,in1Min4014,in0Con20617,in0Glo18944,in0Con89578], outputs=Min46743)
in0Ave40213 = tf.constant([[[[[0.0864], [0.9863]], [[0.6686], [0.275]]]]])
in1Ave40213 = tf.constant([[[[[0.1949], [0.1237]], [[0.7547], [0.3941]]]]])
in0Min4014 = tf.constant([[[0.8497], [0.5235]]])
in1Min4014 = tf.constant([[[0.7579], [0.8195]]])
in0Con20617 = tf.constant([[0.6276, 0.166]])
in0Glo18944 = tf.constant([[[[1.2876]]]])
in0Con89578 = tf.constant([[0.844, 0.6873, 0.7924]])
print (np.array2string(model.predict([in0Ave40213,in1Ave40213,in0Min4014,in1Min4014,in0Con20617,in0Glo18944,in0Con89578],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min46743.png')

LAve40213 = average_layer([[[[[[0.0864], [0.9863]], [[0.6686], [0.275]]]]], [[[[[0.1949], [0.1237]], [[0.7547], [0.3941]]]]]], Ave40213), 
LRes53113 = reshape_layer(Ave40213, [1, 2, 2], Res53113), 
LRes31107 = reshape_layer(Res53113, [1, 4], Res31107), 
LFla23548 = flatten_layer(Res31107, Fla23548), 
LMin4014 = minimum_layer([[[[0.8497], [0.5235]]], [[[0.7579], [0.8195]]]], Min4014), 
LFla76761 = flatten_layer(Min4014, Fla76761), 
LCon20617 = concatenate_layer([Fla76761,[[0.6276, 0.166]]], 1, Con20617), 
LSub46483 = subtract_layer(Fla23548,Con20617, Sub46483), 
LGlo18944 = global_average_pooling2D_layer([[[[1.2876]]]], Glo18944), 
LCon89578 = concatenate_layer([Glo18944,[[0.844, 0.6873, 0.7924]]], 1, Con89578), 
LMin46743 = minimum_layer([Sub46483,Con89578], Min46743), 
exec_layers([LAve40213,LRes53113,LRes31107,LFla23548,LMin4014,LFla76761,LCon20617,LSub46483,LGlo18944,LCon89578,LMin46743],["Ave40213","Res53113","Res31107","Fla23548","Min4014","Fla76761","Con20617","Sub46483","Glo18944","Con89578","Min46743"],Min46743,"Min46743")

Actual (Unparsed): [[-0.6172500, 0.0315000, 0.0840500, 0.1685500]]

Expected (Unparsed): [[-0.6172500000000001,0.03149999999999997,0.08404999999999996,0.16855]]

Actual:   [[-0.6172, 0.0315, 0.0841, 0.1686]]

Expected: [[-0.6172, 0.0315, 0.0841, 0.1686]]