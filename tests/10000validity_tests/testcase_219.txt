import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave85862 = tf.keras.layers.Input(shape=([1, 1]))

Ave85862 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave85862', )(in0Ave85862)
Fla55763 = keras.layers.Flatten(name = 'Fla55763', )(Ave85862)
Res50127 = keras.layers.Reshape((1, 1), name = 'Res50127', )(Fla55763)
GRU50213 = keras.layers.GRU(1,reset_after=True, recurrent_activation='sigmoid', name = 'GRU50213', )(Res50127)
model = tf.keras.models.Model(inputs=[in0Ave85862], outputs=GRU50213)
w = model.get_layer('GRU50213').get_weights() 
w[0] = np.array([[5, 10, 6]])
w[1] = np.array([[3, 7, 3]])
w[2] = np.array([[3, 3, 8], [8, 5, 1]])
model.get_layer('GRU50213').set_weights(w) 
in0Ave85862 = tf.constant([[[1.0691]]])
print (np.array2string(model.predict([in0Ave85862],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='GRU50213.png')

LAve85862 = average_pooling1D_layer([[[1.0691]]], 1, 1, false, Ave85862), 
LFla55763 = flatten_layer(Ave85862, Fla55763), 
LRes50127 = reshape_layer(Fla55763, [1, 1], Res50127), 
LGRU50213 = gru_layer(Res50127,[[5, 10, 6]],[[3, 7, 3]],[[3, 3, 8], [8, 5, 1]], true, GRU50213), 
exec_layers([LAve85862,LFla55763,LRes50127,LGRU50213],["Ave85862","Fla55763","Res50127","GRU50213"],GRU50213,"GRU50213")

Actual (Unparsed): [[0.0000001]]

Expected (Unparsed): [[7.965985504564858e-8]]

Actual:   [[0]]

Expected: [[0]]