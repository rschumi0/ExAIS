import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul53699 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul53699 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Dot62219 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot62219 = tf.keras.layers.Input(shape=([2, 2]))

Mul53699 = keras.layers.Multiply(name = 'Mul53699', )([in0Mul53699,in1Mul53699])
Res8299 = keras.layers.Reshape((1, 2, 2), name = 'Res8299', )(Mul53699)
Dot62219 = keras.layers.Dot(axes=(1, 1), name = 'Dot62219', )([in0Dot62219,in1Dot62219])
Res13338 = keras.layers.Reshape((1, 2, 2), name = 'Res13338', )(Dot62219)
Mul79150 = keras.layers.Multiply(name = 'Mul79150', )([Res8299,Res13338])
model = tf.keras.models.Model(inputs=[in0Mul53699,in1Mul53699,in0Dot62219,in1Dot62219], outputs=Mul79150)
in0Mul53699 = tf.constant([[[[[0.8349], [0.7983]], [[0.7847], [0.6404]]]]])
in1Mul53699 = tf.constant([[[[[0.3662], [0.7883]], [[0.2845], [0.3269]]]]])
in0Dot62219 = tf.constant([[[0.1413, 0.6619], [0.9025, 0.6641]]])
in1Dot62219 = tf.constant([[[0.3276, 0.2539], [0.2539, 0.5305]]])
print (np.array2string(model.predict([in0Mul53699,in1Mul53699,in0Dot62219,in1Dot62219],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul79150.png')

LMul53699 = multiply_layer([[[[[[0.8349], [0.7983]], [[0.7847], [0.6404]]]]], [[[[[0.3662], [0.7883]], [[0.2845], [0.3269]]]]]], Mul53699), 
LRes8299 = reshape_layer(Mul53699, [1, 2, 2], Res8299), 
LDot62219 = dot_layer([[[0.1413, 0.6619], [0.9025, 0.6641]]], [[[0.3276, 0.2539], [0.2539, 0.5305]]], 1, 1, Dot62219), 
LRes13338 = reshape_layer(Dot62219, [1, 2, 2], Res13338), 
LMul79150 = multiply_layer([Res8299,Res13338], Mul79150), 
exec_layers([LMul53699,LRes8299,LDot62219,LRes13338,LMul79150],["Mul53699","Res8299","Dot62219","Res13338","Mul79150"],Mul79150,"Mul79150")

Actual (Unparsed): [[[[0.0842115, 0.3238706], [0.0860514, 0.1089360]]]]

Expected (Unparsed): [[[[0.08421148844135941,0.32387064836424473],[0.0860513797052245,0.1089359856798696]]]]

Actual:   [[[[0.0843, 0.3239], [0.0861, 0.109]]]]

Expected: [[[[0.0843, 0.3239], [0.0861, 0.109]]]]