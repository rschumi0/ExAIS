import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul11032 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul11032 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Glo29363 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con95363 = tf.keras.layers.Input(shape=([3]))

Mul11032 = keras.layers.Multiply(name = 'Mul11032', )([in0Mul11032,in1Mul11032])
Res89375 = keras.layers.Reshape((1, 2, 2), name = 'Res89375', )(Mul11032)
Res65418 = keras.layers.Reshape((1, 4), name = 'Res65418', )(Res89375)
Fla98473 = keras.layers.Flatten(name = 'Fla98473', )(Res65418)
Glo29363 = keras.layers.GlobalMaxPool2D(name = 'Glo29363', )(in0Glo29363)
Con95363 = keras.layers.Concatenate(axis=1, name = 'Con95363', )([Glo29363,in0Con95363])
Max43190 = keras.layers.Maximum(name = 'Max43190', )([Fla98473,Con95363])
Res39423 = keras.layers.Reshape((4, 1), name = 'Res39423', )(Max43190)
Res94033 = keras.layers.Reshape((4, 1, 1), name = 'Res94033', )(Res39423)
Up_80229 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_80229', )(Res94033)
model = tf.keras.models.Model(inputs=[in0Mul11032,in1Mul11032,in0Glo29363,in0Con95363], outputs=Up_80229)
in0Mul11032 = tf.constant([[[[[0.7747], [0.6891]], [[0.8874], [0.697]]]]])
in1Mul11032 = tf.constant([[[[[0.4776], [0.2515]], [[0.2438], [0.2798]]]]])
in0Glo29363 = tf.constant([[[[1.0516]], [[1.1616]]]])
in0Con95363 = tf.constant([[0.8974, 0.7607, 0.682]])
print (np.array2string(model.predict([in0Mul11032,in1Mul11032,in0Glo29363,in0Con95363],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_80229.png')

LMul11032 = multiply_layer([[[[[[0.7747], [0.6891]], [[0.8874], [0.697]]]]], [[[[[0.4776], [0.2515]], [[0.2438], [0.2798]]]]]], Mul11032), 
LRes89375 = reshape_layer(Mul11032, [1, 2, 2], Res89375), 
LRes65418 = reshape_layer(Res89375, [1, 4], Res65418), 
LFla98473 = flatten_layer(Res65418, Fla98473), 
LGlo29363 = global_max_pool2D_layer([[[[1.0516]], [[1.1616]]]], Glo29363), 
LCon95363 = concatenate_layer([Glo29363,[[0.8974, 0.7607, 0.682]]], 1, Con95363), 
LMax43190 = maximum_layer([Fla98473,Con95363], Max43190), 
LRes39423 = reshape_layer(Max43190, [4, 1], Res39423), 
LRes94033 = reshape_layer(Res39423, [4, 1, 1], Res94033), 
LUp_80229 = up_sampling2D_layer(Res94033, 2, 1, Up_80229), 
exec_layers([LMul11032,LRes89375,LRes65418,LFla98473,LGlo29363,LCon95363,LMax43190,LRes39423,LRes94033,LUp_80229],["Mul11032","Res89375","Res65418","Fla98473","Glo29363","Con95363","Max43190","Res39423","Res94033","Up_80229"],Up_80229,"Up_80229")

Actual (Unparsed): [[[[1.1616000]], [[1.1616000]], [[0.8974000]], [[0.8974000]], [[0.7607000]], [[0.7607000]], [[0.6820000]], [[0.6820000]]]]

Expected (Unparsed): [[[[1.1616]],[[1.1616]],[[0.8974]],[[0.8974]],[[0.7607]],[[0.7607]],[[0.682]],[[0.682]]]]

Actual:   [[[[1.1616]], [[1.1616]], [[0.8974]], [[0.8974]], [[0.7607]], [[0.7607]], [[0.682]], [[0.682]]]]

Expected: [[[[1.1616]], [[1.1616]], [[0.8974]], [[0.8974]], [[0.7607]], [[0.7607]], [[0.682]], [[0.682]]]]