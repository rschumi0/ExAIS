import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul28957 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul28957 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul63851 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul63851 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min499 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min499 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Mas16488 = tf.keras.layers.Input(shape=([1]))
in0Con91365 = tf.keras.layers.Input(shape=([3]))
in0Con30748 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Dot389 = tf.keras.layers.Input(shape=([2]))
in1Dot389 = tf.keras.layers.Input(shape=([2]))
in0Con45990 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Mul88214 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul88214 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Add83236 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add83236 = tf.keras.layers.Input(shape=([1, 1, 2]))

Mul28957 = keras.layers.Multiply(name = 'Mul28957', )([in0Mul28957,in1Mul28957])
Res68602 = keras.layers.Reshape((2, 1, 1), name = 'Res68602', )(Mul28957)
Zer40879 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer40879', )(Res68602)
Mul63851 = keras.layers.Multiply(name = 'Mul63851', )([in0Mul63851,in1Mul63851])
Add74098 = keras.layers.Add(name = 'Add74098', )([Zer40879,Mul63851])
Res83688 = keras.layers.Reshape((2, 2), name = 'Res83688', )(Add74098)
Min499 = keras.layers.Minimum(name = 'Min499', )([in0Min499,in1Min499])
Res89806 = keras.layers.Reshape((2, 2), name = 'Res89806', )(Min499)
Fla78152 = keras.layers.Flatten(name = 'Fla78152', )(Res89806)
Mas16488 = keras.layers.Masking(mask_value=2, name = 'Mas16488', )(in0Mas16488)
Con91365 = keras.layers.Concatenate(axis=1, name = 'Con91365', )([Mas16488,in0Con91365])
Ave9451 = keras.layers.Average(name = 'Ave9451', )([Fla78152,Con91365])
Res93402 = keras.layers.Reshape((2, 2), name = 'Res93402', )(Ave9451)
Ave13445 = keras.layers.Average(name = 'Ave13445', )([Res83688,Res93402])
Res59437 = keras.layers.Reshape((2, 2, 1), name = 'Res59437', )(Ave13445)
Con30748 = keras.layers.Concatenate(axis=3, name = 'Con30748', )([Res59437,in0Con30748])
Dot389 = keras.layers.Dot(axes=(1, 1), name = 'Dot389', )([in0Dot389,in1Dot389])
Res53557 = keras.layers.Reshape((1, 1), name = 'Res53557', )(Dot389)
Res88910 = keras.layers.Reshape((1, 1, 1), name = 'Res88910', )(Res53557)
Zer42505 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer42505', )(Res88910)
Con45990 = keras.layers.Concatenate(axis=3, name = 'Con45990', )([Zer42505,in0Con45990])
Mul88214 = keras.layers.Multiply(name = 'Mul88214', )([in0Mul88214,in1Mul88214])
Add92832 = keras.layers.Add(name = 'Add92832', )([Con45990,Mul88214])
Add83236 = keras.layers.Add(name = 'Add83236', )([in0Add83236,in1Add83236])
Thr20144 = keras.layers.ThresholdedReLU(theta=1.3963023948064341, name = 'Thr20144', )(Add83236)
Zer83504 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer83504', )(Thr20144)
Add53021 = keras.layers.Add(name = 'Add53021', )([Add92832,Zer83504])
Zer23180 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer23180', )(Add53021)
Sub99405 = keras.layers.Subtract(name = 'Sub99405', )([Con30748,Zer23180])
model = tf.keras.models.Model(inputs=[in0Mul28957,in1Mul28957,in0Mul63851,in1Mul63851,in0Min499,in1Min499,in0Mas16488,in0Con91365,in0Con30748,in0Dot389,in1Dot389,in0Con45990,in0Mul88214,in1Mul88214,in0Add83236,in1Add83236], outputs=Sub99405)
in0Mul28957 = tf.constant([[[0.088], [0.2919]]])
in1Mul28957 = tf.constant([[[0.843], [0.2942]]])
in0Mul63851 = tf.constant([[[[0.0551], [0.338]], [[0.9659], [0.8653]]]])
in1Mul63851 = tf.constant([[[[0.9949], [0.6805]], [[0.0611], [0.7376]]]])
in0Min499 = tf.constant([[[[0.5619, 0.1912]], [[0.8573, 0.5924]]]])
in1Min499 = tf.constant([[[[0.2806, 0.8026]], [[0.7241, 0.9197]]]])
in0Mas16488 = tf.constant([[1.2444]])
in0Con91365 = tf.constant([[0.0162, 0.2507, 0.433]])
in0Con30748 = tf.constant([[[[0.4063], [0.3879]], [[0.2829], [0.3137]]]])
in0Dot389 = tf.constant([[0.3995, 0.4942]])
in1Dot389 = tf.constant([[0.981, 0.0516]])
in0Con45990 = tf.constant([[[[0.8087]], [[0.3886]]]])
in0Mul88214 = tf.constant([[[[0.7917, 0.3774]], [[0.6273, 0.5246]]]])
in1Mul88214 = tf.constant([[[[0.3416, 0.2692]], [[0.2136, 0.748]]]])
in0Add83236 = tf.constant([[[[0.1954, 0.3227]]]])
in1Add83236 = tf.constant([[[[0.9272, 0.3551]]]])
print (np.array2string(model.predict([in0Mul28957,in1Mul28957,in0Mul63851,in1Mul63851,in0Min499,in1Min499,in0Mas16488,in0Con91365,in0Con30748,in0Dot389,in1Dot389,in0Con45990,in0Mul88214,in1Mul88214,in0Add83236,in1Add83236],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub99405.png')

LMul28957 = multiply_layer([[[[0.088], [0.2919]]], [[[0.843], [0.2942]]]], Mul28957), 
LRes68602 = reshape_layer(Mul28957, [2, 1, 1], Res68602), 
LZer40879 = zero_padding2D_layer(Res68602, 0, 0, 1, 0, Zer40879), 
LMul63851 = multiply_layer([[[[[0.0551], [0.338]], [[0.9659], [0.8653]]]], [[[[0.9949], [0.6805]], [[0.0611], [0.7376]]]]], Mul63851), 
LAdd74098 = add_layer([Zer40879,Mul63851], Add74098), 
LRes83688 = reshape_layer(Add74098, [2, 2], Res83688), 
LMin499 = minimum_layer([[[[[0.5619, 0.1912]], [[0.8573, 0.5924]]]], [[[[0.2806, 0.8026]], [[0.7241, 0.9197]]]]], Min499), 
LRes89806 = reshape_layer(Min499, [2, 2], Res89806), 
LFla78152 = flatten_layer(Res89806, Fla78152), 
LMas16488 = masking_layer([[1.2444]], 2, Mas16488), 
LCon91365 = concatenate_layer([Mas16488,[[0.0162, 0.2507, 0.433]]], 1, Con91365), 
LAve9451 = average_layer([Fla78152,Con91365], Ave9451), 
LRes93402 = reshape_layer(Ave9451, [2, 2], Res93402), 
LAve13445 = average_layer([Res83688,Res93402], Ave13445), 
LRes59437 = reshape_layer(Ave13445, [2, 2, 1], Res59437), 
LCon30748 = concatenate_layer([Res59437,[[[[0.4063], [0.3879]], [[0.2829], [0.3137]]]]], 3, Con30748), 
LDot389 = dot_layer([[0.3995, 0.4942]], [[0.981, 0.0516]], 1, 1, Dot389), 
LRes53557 = reshape_layer(Dot389, [1, 1], Res53557), 
LRes88910 = reshape_layer(Res53557, [1, 1, 1], Res88910), 
LZer42505 = zero_padding2D_layer(Res88910, 1, 0, 0, 0, Zer42505), 
LCon45990 = concatenate_layer([Zer42505,[[[[0.8087]], [[0.3886]]]]], 3, Con45990), 
LMul88214 = multiply_layer([[[[[0.7917, 0.3774]], [[0.6273, 0.5246]]]], [[[[0.3416, 0.2692]], [[0.2136, 0.748]]]]], Mul88214), 
LAdd92832 = add_layer([Con45990,Mul88214], Add92832), 
LAdd83236 = add_layer([[[[[0.1954, 0.3227]]]], [[[[0.9272, 0.3551]]]]], Add83236), 
LThr20144 = thresholded_relu_layer(Add83236, 1.3963023948064341, Thr20144), 
LZer83504 = zero_padding2D_layer(Thr20144, 1, 0, 0, 0, Zer83504), 
LAdd53021 = add_layer([Add92832,Zer83504], Add53021), 
LZer23180 = zero_padding2D_layer(Add53021, 0, 0, 1, 0, Zer23180), 
LSub99405 = subtract_layer(Con30748,Zer23180, Sub99405), 
exec_layers([LMul28957,LRes68602,LZer40879,LMul63851,LAdd74098,LRes83688,LMin499,LRes89806,LFla78152,LMas16488,LCon91365,LAve9451,LRes93402,LAve13445,LRes59437,LCon30748,LDot389,LRes53557,LRes88910,LZer42505,LCon45990,LMul88214,LAdd92832,LAdd83236,LThr20144,LZer83504,LAdd53021,LZer23180,LSub99405],["Mul28957","Res68602","Zer40879","Mul63851","Add74098","Res83688","Min499","Res89806","Fla78152","Mas16488","Con91365","Ave9451","Res93402","Ave13445","Res59437","Con30748","Dot389","Res53557","Res88910","Zer42505","Con45990","Mul88214","Add92832","Add83236","Thr20144","Zer83504","Add53021","Zer23180","Sub99405"],Sub99405,"Sub99405")

Actual (Unparsed): [[[[0.4086595, 0.4063000], [-0.0664982, -0.5223961]], [[0.2732082, 0.2829000], [0.0670096, -0.4673008]]]]

Expected (Unparsed): [[[[0.408659495,0.4063],[-0.06649821999999994,-0.5223960799999999]],[[0.27320824499999996,0.2829],[0.06700963000000004,-0.46730079999999996]]]]

Actual:   [[[[0.4087, 0.4063], [-0.0664, -0.5223]], [[0.2733, 0.2829], [0.0671, -0.4673]]]]

Expected: [[[[0.4087, 0.4063], [-0.0664, -0.5223]], [[0.2733, 0.2829], [0.0671, -0.4673]]]]