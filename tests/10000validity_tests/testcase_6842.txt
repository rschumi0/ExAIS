import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul35681 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul35681 = tf.keras.layers.Input(shape=([2, 1]))
in0Con34314 = tf.keras.layers.Input(shape=([2, 1]))
in0Min63071 = tf.keras.layers.Input(shape=([1, 2]))
in1Min63071 = tf.keras.layers.Input(shape=([1, 2]))
in0Con54059 = tf.keras.layers.Input(shape=([4, 4, 1]))
in0Max28610 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max28610 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con2789 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min83688 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Min83688 = tf.keras.layers.Input(shape=([2, 2, 2]))

Mul35681 = keras.layers.Multiply(name = 'Mul35681', )([in0Mul35681,in1Mul35681])
Con34314 = keras.layers.Concatenate(axis=2, name = 'Con34314', )([Mul35681,in0Con34314])
Min63071 = keras.layers.Minimum(name = 'Min63071', )([in0Min63071,in1Min63071])
Zer77601 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer77601', )(Min63071)
Ave79618 = keras.layers.Average(name = 'Ave79618', )([Con34314,Zer77601])
Res52958 = keras.layers.Reshape((2, 2, 1), name = 'Res52958', )(Ave79618)
Zer29774 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer29774', )(Res52958)
Con54059 = keras.layers.Concatenate(axis=3, name = 'Con54059', )([Zer29774,in0Con54059])
Max28610 = keras.layers.Maximum(name = 'Max28610', )([in0Max28610,in1Max28610])
Den42493 = keras.layers.Dense(1,name = 'Den42493', )(Max28610)
Res35965 = keras.layers.Reshape((1, 1, 1), name = 'Res35965', )(Den42493)
Zer84325 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer84325', )(Res35965)
Con2789 = keras.layers.Concatenate(axis=3, name = 'Con2789', )([Zer84325,in0Con2789])
Min83688 = keras.layers.Minimum(name = 'Min83688', )([in0Min83688,in1Min83688])
Mul55361 = keras.layers.Multiply(name = 'Mul55361', )([Con2789,Min83688])
Zer38361 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer38361', )(Mul55361)
Mul37632 = keras.layers.Multiply(name = 'Mul37632', )([Con54059,Zer38361])
model = tf.keras.models.Model(inputs=[in0Mul35681,in1Mul35681,in0Con34314,in0Min63071,in1Min63071,in0Con54059,in0Max28610,in1Max28610,in0Con2789,in0Min83688,in1Min83688], outputs=Mul37632)
w = model.get_layer('Den42493').get_weights() 
w[0] = np.array([[0.8116]])
w[1] = np.array([0.8907])
model.get_layer('Den42493').set_weights(w) 
in0Mul35681 = tf.constant([[[0.3855], [0.0705]]])
in1Mul35681 = tf.constant([[[0.5705], [0.8127]]])
in0Con34314 = tf.constant([[[0.1628], [0.8869]]])
in0Min63071 = tf.constant([[[0.7028, 0.4784]]])
in1Min63071 = tf.constant([[[0.4276, 0.8552]]])
in0Con54059 = tf.constant([[[[0.0743], [0.2106], [0.7756], [0.9069]], [[0.1981], [0.1133], [0.4393], [0.2512]], [[0.7014], [0.4355], [0.2161], [0.5919]], [[0.9889], [0.7132], [0.8438], [0.4229]]]])
in0Max28610 = tf.constant([[[[[0.1154]]]]])
in1Max28610 = tf.constant([[[[[0.3752]]]]])
in0Con2789 = tf.constant([[[[0.5895], [0.4125]], [[0.8534], [0.5288]]]])
in0Min83688 = tf.constant([[[[0.4246, 0.0942], [0.1755, 0.9931]], [[0.6935, 0.6804], [0.259, 0.2222]]]])
in1Min83688 = tf.constant([[[[0.7796, 0.3405], [0.7193, 0.3303]], [[0.7383, 0.738], [0.3911, 0.6114]]]])
print (np.array2string(model.predict([in0Mul35681,in1Mul35681,in0Con34314,in0Min63071,in1Min63071,in0Con54059,in0Max28610,in1Max28610,in0Con2789,in0Min83688,in1Min83688],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul37632.png')

LMul35681 = multiply_layer([[[[0.3855], [0.0705]]], [[[0.5705], [0.8127]]]], Mul35681), 
LCon34314 = concatenate_layer([Mul35681,[[[0.1628], [0.8869]]]], 2, Con34314), 
LMin63071 = minimum_layer([[[[0.7028, 0.4784]]], [[[0.4276, 0.8552]]]], Min63071), 
LZer77601 = zero_padding1D_layer(Min63071, 1, 0, Zer77601), 
LAve79618 = average_layer([Con34314,Zer77601], Ave79618), 
LRes52958 = reshape_layer(Ave79618, [2, 2, 1], Res52958), 
LZer29774 = zero_padding2D_layer(Res52958, 1, 1, 1, 1, Zer29774), 
LCon54059 = concatenate_layer([Zer29774,[[[[0.0743], [0.2106], [0.7756], [0.9069]], [[0.1981], [0.1133], [0.4393], [0.2512]], [[0.7014], [0.4355], [0.2161], [0.5919]], [[0.9889], [0.7132], [0.8438], [0.4229]]]]], 3, Con54059), 
LMax28610 = maximum_layer([[[[[[0.1154]]]]], [[[[[0.3752]]]]]], Max28610), 
LDen42493 = dense_layer(Max28610, [[0.8116]],[0.8907], Den42493), 
LRes35965 = reshape_layer(Den42493, [1, 1, 1], Res35965), 
LZer84325 = zero_padding2D_layer(Res35965, 1, 0, 1, 0, Zer84325), 
LCon2789 = concatenate_layer([Zer84325,[[[[0.5895], [0.4125]], [[0.8534], [0.5288]]]]], 3, Con2789), 
LMin83688 = minimum_layer([[[[[0.4246, 0.0942], [0.1755, 0.9931]], [[0.6935, 0.6804], [0.259, 0.2222]]]], [[[[0.7796, 0.3405], [0.7193, 0.3303]], [[0.7383, 0.738], [0.3911, 0.6114]]]]], Min83688), 
LMul55361 = multiply_layer([Con2789,Min83688], Mul55361), 
LZer38361 = zero_padding2D_layer(Mul55361, 2, 0, 2, 0, Zer38361), 
LMul37632 = multiply_layer([Con54059,Zer38361], Mul37632), 
exec_layers([LMul35681,LCon34314,LMin63071,LZer77601,LAve79618,LRes52958,LZer29774,LCon54059,LMax28610,LDen42493,LRes35965,LZer84325,LCon2789,LMin83688,LMul55361,LZer38361,LMul37632],["Mul35681","Con34314","Min63071","Zer77601","Ave79618","Res52958","Zer29774","Con54059","Max28610","Den42493","Res35965","Zer84325","Con2789","Min83688","Mul55361","Zer38361","Mul37632"],Mul37632,"Mul37632")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0120002], [0.0000000, 0.0806456]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.4899553], [0.0000000, 0.0496905]]]]

Expected (Unparsed): [[[[0,0.0],[0,0.0],[0,0.0],[0,0.0]],[[0,0.0],[0.0,0.0],[0.0,0.0],[0,0.0]],[[0,0.0],[0.0,0.0],[0.0,0.012000227490000001],[0.0,0.08064563512499998]],[[0,0.0],[0,0.0],[0.0,0.489955305168],[0.0,0.049690479344000005]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0.0121], [0, 0.0807]], [[0, 0], [0, 0], [0, 0.49], [0, 0.0497]]]]

Expected: [[[[0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0.0121], [0, 0.0807]], [[0, 0], [0, 0], [0, 0.49], [0, 0.0497]]]]