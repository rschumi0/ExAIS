import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con21949 = tf.keras.layers.Input(shape=([2, 1, 2]))

Con21949 = keras.layers.Conv2DTranspose(4, (2, 1),strides=(1, 1), padding='same', name = 'Con21949', )(in0Con21949)
Res78962 = keras.layers.Reshape((2, 4), name = 'Res78962', )(Con21949)
Glo76790 = keras.layers.GlobalAveragePooling1D(name = 'Glo76790', )(Res78962)
Res81079 = keras.layers.Reshape((4, 1), name = 'Res81079', )(Glo76790)
Res26783 = keras.layers.Reshape((4, 1, 1), name = 'Res26783', )(Res81079)
Glo82689 = keras.layers.GlobalAveragePooling2D(name = 'Glo82689', )(Res26783)
Res33544 = keras.layers.Reshape((1, 1), name = 'Res33544', )(Glo82689)
Glo63618 = keras.layers.GlobalMaxPool1D(name = 'Glo63618', )(Res33544)
model = tf.keras.models.Model(inputs=[in0Con21949], outputs=Glo63618)
w = model.get_layer('Con21949').get_weights() 
w[0] = np.array([[[[0.1929, 0.4736], [0.6683, 0.4621], [0.6436, 0.2167], [0.4622, 0.4399]]], [[[0.4483, 0.5249], [0.8022, 0.2034], [0.5536, 0.2952], [0.1307, 0.1824]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con21949').set_weights(w) 
in0Con21949 = tf.constant([[[[0.0511, 0.3506]], [[0.4696, 0.9681]]]])
print (np.array2string(model.predict([in0Con21949],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo63618.png')

LCon21949 = conv2D_transpose_layer([[[[0.0511, 0.3506]], [[0.4696, 0.9681]]]], 2, 1,[[[[0.1929, 0.4736], [0.6683, 0.4621], [0.6436, 0.2167], [0.4622, 0.4399]]], [[[0.4483, 0.5249], [0.8022, 0.2034], [0.5536, 0.2952], [0.1307, 0.1824]]]],[0, 0, 0, 0], 1, 1, true, Con21949), 
LRes78962 = reshape_layer(Con21949, [2, 4], Res78962), 
LGlo76790 = global_average_pooling1D_layer(Res78962, Glo76790), 
LRes81079 = reshape_layer(Glo76790, [4, 1], Res81079), 
LRes26783 = reshape_layer(Res81079, [4, 1, 1], Res26783), 
LGlo82689 = global_average_pooling2D_layer(Res26783, Glo82689), 
LRes33544 = reshape_layer(Glo82689, [1, 1], Res33544), 
LGlo63618 = global_max_pool1D_layer(Res33544, Glo63618), 
exec_layers([LCon21949,LRes78962,LGlo76790,LRes81079,LRes26783,LGlo82689,LRes33544,LGlo63618],["Con21949","Res78962","Glo76790","Res81079","Res26783","Glo82689","Res33544","Glo63618"],Glo63618,"Glo63618")

Actual (Unparsed): [[0.4557050]]

Expected (Unparsed): [[0.45570496624999995]]

Actual:   [[0.4558]]

Expected: [[0.4558]]