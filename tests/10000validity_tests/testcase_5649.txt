import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave38256 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave38256 = tf.keras.layers.Input(shape=([2, 2]))

Ave38256 = keras.layers.Average(name = 'Ave38256', )([in0Ave38256,in1Ave38256])
Glo34177 = keras.layers.GlobalMaxPool1D(name = 'Glo34177', )(Ave38256)
Res44357 = keras.layers.Reshape((2, 1), name = 'Res44357', )(Glo34177)
Res13449 = keras.layers.Reshape((2, 1, 1), name = 'Res13449', )(Res44357)
Ave18019 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave18019', )(Res13449)
model = tf.keras.models.Model(inputs=[in0Ave38256,in1Ave38256], outputs=Ave18019)
in0Ave38256 = tf.constant([[[0.0894, 0.4868], [0.284, 0.9732]]])
in1Ave38256 = tf.constant([[[0.5852, 0.14], [0.8809, 0.0409]]])
print (np.array2string(model.predict([in0Ave38256,in1Ave38256],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave18019.png')

LAve38256 = average_layer([[[[0.0894, 0.4868], [0.284, 0.9732]]], [[[0.5852, 0.14], [0.8809, 0.0409]]]], Ave38256), 
LGlo34177 = global_max_pool1D_layer(Ave38256, Glo34177), 
LRes44357 = reshape_layer(Glo34177, [2, 1], Res44357), 
LRes13449 = reshape_layer(Res44357, [2, 1, 1], Res13449), 
LAve18019 = average_pooling2D_layer(Res13449, 1, 1, Ave18019), 
exec_layers([LAve38256,LGlo34177,LRes44357,LRes13449,LAve18019],["Ave38256","Glo34177","Res44357","Res13449","Ave18019"],Ave18019,"Ave18019")

Actual (Unparsed): [[[[0.5824500]], [[0.5070500]]]]

Expected (Unparsed): [[[[0.58245]],[[0.50705]]]]

Actual:   [[[[0.5825]], [[0.5071]]]]

Expected: [[[[0.5825]], [[0.5071]]]]