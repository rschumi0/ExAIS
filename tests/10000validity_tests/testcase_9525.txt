import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas82341 = tf.keras.layers.Input(shape=([2]))
in0Mul53825 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Mul53825 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Mas82341 = keras.layers.Masking(mask_value=2, name = 'Mas82341', )(in0Mas82341)
Res58998 = keras.layers.Reshape((2, 1), name = 'Res58998', )(Mas82341)
Res3876 = keras.layers.Reshape((2, 1, 1), name = 'Res3876', )(Res58998)
Res17983 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res17983', )(Res3876)
Zer52494 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer52494', )(Res17983)
Mul53825 = keras.layers.Multiply(name = 'Mul53825', )([in0Mul53825,in1Mul53825])
Add70460 = keras.layers.Add(name = 'Add70460', )([Zer52494,Mul53825])
Zer8388 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer8388', )(Add70460)
Res89437 = keras.layers.Reshape((4, 4, 3), name = 'Res89437', )(Zer8388)
Zer51512 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer51512', )(Res89437)
model = tf.keras.models.Model(inputs=[in0Mas82341,in0Mul53825,in1Mul53825], outputs=Zer51512)
in0Mas82341 = tf.constant([[1.4376, 1.2334]])
in0Mul53825 = tf.constant([[[[[0.7528]], [[0.3418]]], [[[0.4046]], [[0.088]]]]])
in1Mul53825 = tf.constant([[[[[0.4581]], [[0.8698]]], [[[0.9414]], [[0.4933]]]]])
print (np.array2string(model.predict([in0Mas82341,in0Mul53825,in1Mul53825],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer51512.png')

LMas82341 = masking_layer([[1.4376, 1.2334]], 2, Mas82341), 
LRes58998 = reshape_layer(Mas82341, [2, 1], Res58998), 
LRes3876 = reshape_layer(Res58998, [2, 1, 1], Res3876), 
LRes17983 = reshape_layer(Res3876, [2, 1, 1, 1], Res17983), 
LZer52494 = zero_padding3D_layer(Res17983, 0, 0, 1, 0, 0, 0, Zer52494), 
LMul53825 = multiply_layer([[[[[[0.7528]], [[0.3418]]], [[[0.4046]], [[0.088]]]]], [[[[[0.4581]], [[0.8698]]], [[[0.9414]], [[0.4933]]]]]], Mul53825), 
LAdd70460 = add_layer([Zer52494,Mul53825], Add70460), 
LZer8388 = zero_padding3D_layer(Add70460, 1, 1, 1, 1, 1, 1, Zer8388), 
LRes89437 = reshape_layer(Zer8388, [4, 4, 3], Res89437), 
LZer51512 = zero_padding2D_layer(Res89437, 1, 1, 1, 1, Zer51512), 
exec_layers([LMas82341,LRes58998,LRes3876,LRes17983,LZer52494,LMul53825,LAdd70460,LZer8388,LRes89437,LZer51512],["Mas82341","Res58998","Res3876","Res17983","Zer52494","Mul53825","Add70460","Zer8388","Res89437","Zer51512"],Zer51512,"Zer51512")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.3448577, 0.0000000], [0.0000000, 1.7348977, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.3808904, 0.0000000], [0.0000000, 1.2768104, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0.34485768,0],[0,1.73489764,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0.38089044,0],[0,1.2768104,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]]]

Actual:   [[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0.3449, 0], [0, 1.7349, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0.3809, 0], [0, 1.2769, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]]]

Expected: [[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0.3449, 0], [0, 1.7349, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0.3809, 0], [0, 1.2769, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]]]