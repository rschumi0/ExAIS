import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot38285 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot38285 = tf.keras.layers.Input(shape=([2, 2]))
in0Max27643 = tf.keras.layers.Input(shape=([1, 1, 1]))

Dot38285 = keras.layers.Dot(axes=(1, 1), name = 'Dot38285', )([in0Dot38285,in1Dot38285])
Res40072 = keras.layers.Reshape((2, 2, 1), name = 'Res40072', )(Dot38285)
Max27643 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max27643', )(in0Max27643)
Zer19813 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer19813', )(Max27643)
Sub71725 = keras.layers.Subtract(name = 'Sub71725', )([Res40072,Zer19813])
Res60816 = keras.layers.Reshape((2, 2), name = 'Res60816', )(Sub71725)
Glo32108 = keras.layers.GlobalAveragePooling1D(name = 'Glo32108', )(Res60816)
Res98569 = keras.layers.Reshape((2, 1), name = 'Res98569', )(Glo32108)
Res12293 = keras.layers.Reshape((2, 1, 1), name = 'Res12293', )(Res98569)
Res5050 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res5050', )(Res12293)
Glo28014 = keras.layers.GlobalAveragePooling3D(name = 'Glo28014', )(Res5050)
model = tf.keras.models.Model(inputs=[in0Dot38285,in1Dot38285,in0Max27643], outputs=Glo28014)
in0Dot38285 = tf.constant([[[0.9035, 0.781], [0.1846, 0.5589]]])
in1Dot38285 = tf.constant([[[0.7035, 0.6433], [0.1921, 0.1524]]])
in0Max27643 = tf.constant([[[[1.8556]]]])
print (np.array2string(model.predict([in0Dot38285,in1Dot38285,in0Max27643],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo28014.png')

LDot38285 = dot_layer([[[0.9035, 0.781], [0.1846, 0.5589]]], [[[0.7035, 0.6433], [0.1921, 0.1524]]], 1, 1, Dot38285), 
LRes40072 = reshape_layer(Dot38285, [2, 2, 1], Res40072), 
LMax27643 = max_pool2D_layer([[[[1.8556]]]], 1, 1, Max27643), 
LZer19813 = zero_padding2D_layer(Max27643, 1, 0, 1, 0, Zer19813), 
LSub71725 = subtract_layer(Res40072,Zer19813, Sub71725), 
LRes60816 = reshape_layer(Sub71725, [2, 2], Res60816), 
LGlo32108 = global_average_pooling1D_layer(Res60816, Glo32108), 
LRes98569 = reshape_layer(Glo32108, [2, 1], Res98569), 
LRes12293 = reshape_layer(Res98569, [2, 1, 1], Res12293), 
LRes5050 = reshape_layer(Res12293, [2, 1, 1, 1], Res5050), 
LGlo28014 = global_average_pooling3D_layer(Res5050, Glo28014), 
exec_layers([LDot38285,LRes40072,LMax27643,LZer19813,LSub71725,LRes60816,LGlo32108,LRes98569,LRes12293,LRes5050,LGlo28014],["Dot38285","Res40072","Max27643","Zer19813","Sub71725","Res60816","Glo32108","Res98569","Res12293","Res5050","Glo28014"],Glo28014,"Glo28014")

Actual (Unparsed): [[0.1673051]]

Expected (Unparsed): [[0.1673050875]]

Actual:   [[0.1674]]

Expected: [[0.1674]]