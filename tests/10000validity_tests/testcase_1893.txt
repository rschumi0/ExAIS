import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo66846 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Con69076 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot89124 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot89124 = tf.keras.layers.Input(shape=([3, 2]))
in0Con43212 = tf.keras.layers.Input(shape=([2, 1]))
in0Sub57080 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub57080 = tf.keras.layers.Input(shape=([2, 3]))
in0Mas88315 = tf.keras.layers.Input(shape=([4, 2, 4]))
in0Min33031 = tf.keras.layers.Input(shape=([2, 2]))
in1Min33031 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot53602 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot53602 = tf.keras.layers.Input(shape=([2, 3]))
in0Con61385 = tf.keras.layers.Input(shape=([4, 6]))
in0Con84594 = tf.keras.layers.Input(shape=([4, 19]))
in0Sub45785 = tf.keras.layers.Input(shape=([3, 2, 3, 3]))
in1Sub45785 = tf.keras.layers.Input(shape=([3, 2, 3, 3]))
in0Dot59407 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot59407 = tf.keras.layers.Input(shape=([3, 3]))
in0Con74103 = tf.keras.layers.Input(shape=([3, 15]))
in0Con57258 = tf.keras.layers.Input(shape=([4, 2]))

Glo66846 = keras.layers.GlobalAveragePooling3D(name = 'Glo66846', )(in0Glo66846)
Res89491 = keras.layers.Reshape((2, 1), name = 'Res89491', )(Glo66846)
Con69076 = keras.layers.Concatenate(axis=2, name = 'Con69076', )([Res89491,in0Con69076])
Dot89124 = keras.layers.Dot(axes=(1, 1), name = 'Dot89124', )([in0Dot89124,in1Dot89124])
Con43212 = keras.layers.Concatenate(axis=2, name = 'Con43212', )([Dot89124,in0Con43212])
Sub57080 = keras.layers.Subtract(name = 'Sub57080', )([in0Sub57080,in1Sub57080])
Ave27240 = keras.layers.Average(name = 'Ave27240', )([Con43212,Sub57080])
Ave33515 = keras.layers.Average(name = 'Ave33515', )([Con69076,Ave27240])
Zer84615 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer84615', )(Ave33515)
Mas88315 = keras.layers.Masking(mask_value=2, name = 'Mas88315', )(in0Mas88315)
Res92862 = keras.layers.Reshape((4, 8), name = 'Res92862', )(Mas88315)
Min33031 = keras.layers.Minimum(name = 'Min33031', )([in0Min33031,in1Min33031])
Dot53602 = keras.layers.Dot(axes=(2, 2), name = 'Dot53602', )([in0Dot53602,in1Dot53602])
Mul22807 = keras.layers.Multiply(name = 'Mul22807', )([Min33031,Dot53602])
Zer63083 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer63083', )(Mul22807)
Con61385 = keras.layers.Concatenate(axis=2, name = 'Con61385', )([Zer63083,in0Con61385])
Mul68977 = keras.layers.Multiply(name = 'Mul68977', )([Res92862,Con61385])
Con84594 = keras.layers.Concatenate(axis=2, name = 'Con84594', )([Mul68977,in0Con84594])
Sub45785 = keras.layers.Subtract(name = 'Sub45785', )([in0Sub45785,in1Sub45785])
Res81129 = keras.layers.Reshape((3, 2, 9), name = 'Res81129', )(Sub45785)
Res47591 = keras.layers.Reshape((3, 18), name = 'Res47591', )(Res81129)
Dot59407 = keras.layers.Dot(axes=(1, 1), name = 'Dot59407', )([in0Dot59407,in1Dot59407])
Con74103 = keras.layers.Concatenate(axis=2, name = 'Con74103', )([Dot59407,in0Con74103])
Mul54684 = keras.layers.Multiply(name = 'Mul54684', )([Res47591,Con74103])
Res94206 = keras.layers.Reshape((3, 18, 1), name = 'Res94206', )(Mul54684)
Res32683 = keras.layers.Reshape((3, 18, 1, 1), name = 'Res32683', )(Res94206)
Con33934 = keras.layers.Conv3D(3, (3, 1, 1),strides=(3, 2, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con33934', )(Res32683)
Res4789 = keras.layers.Reshape((1, 9, 3), name = 'Res4789', )(Con33934)
Res90557 = keras.layers.Reshape((1, 27), name = 'Res90557', )(Res4789)
Dot30220 = keras.layers.Dot(axes=(2, 2), name = 'Dot30220', )([Con84594,Res90557])
Con57258 = keras.layers.Concatenate(axis=2, name = 'Con57258', )([Dot30220,in0Con57258])
Add21853 = keras.layers.Add(name = 'Add21853', )([Zer84615,Con57258])
model = tf.keras.models.Model(inputs=[in0Glo66846,in0Con69076,in0Dot89124,in1Dot89124,in0Con43212,in0Sub57080,in1Sub57080,in0Mas88315,in0Min33031,in1Min33031,in0Dot53602,in1Dot53602,in0Con61385,in0Con84594,in0Sub45785,in1Sub45785,in0Dot59407,in1Dot59407,in0Con74103,in0Con57258], outputs=Add21853)
w = model.get_layer('Con33934').get_weights() 
w[0] = np.array([[[[[0.0476, 0.5616, 0.1085]]]], [[[[0.572, 0.5191, 0.2233]]]], [[[[0.3704, 0.6247, 0.1938]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con33934').set_weights(w) 
in0Glo66846 = tf.constant([[[[[1.8306, 1.0567], [1.2086, 1.3396]], [[1.4172, 1.4235], [1.0613, 1.0589]]]]])
in0Con69076 = tf.constant([[[0.1052, 0.7416], [0.0119, 0.1606]]])
in0Dot89124 = tf.constant([[[0.1697, 0.6027], [0.2409, 0.7966], [0.7112, 0.988]]])
in1Dot89124 = tf.constant([[[0.972, 0.171], [0.4312, 0.9652], [0.5432, 0.8179]]])
in0Con43212 = tf.constant([[[0.0689], [0.6363]]])
in0Sub57080 = tf.constant([[[0.8206, 0.0711, 0.5928], [0.865, 0.3212, 0.1987]]])
in1Sub57080 = tf.constant([[[0.1318, 0.4039, 0.5726], [0.1337, 0.4723, 0.0748]]])
in0Mas88315 = tf.constant([[[[1.8889, 1.5635, 1.0642, 1.2547], [1.7745, 1.8453, 1.6126, 1.4997]], [[1.2968, 1.2401, 1.748, 1.8257], [1.1737, 1.0254, 1.9502, 1.1377]], [[1.5046, 1.8821, 1.3913, 1.6127], [1.1783, 1.2223, 1.8545, 1.1281]], [[1.1207, 1.6665, 1.9101, 1.889], [1.7159, 1.7134, 1.0862, 1.2514]]]])
in0Min33031 = tf.constant([[[0.9251, 0.7526], [0.8595, 0.3678]]])
in1Min33031 = tf.constant([[[0.859, 0.9625], [0.906, 0.6844]]])
in0Dot53602 = tf.constant([[[0.8173, 0.3096, 0.2064], [0.5118, 0.0968, 0.8193]]])
in1Dot53602 = tf.constant([[[0.2763, 0.8578, 0.1944], [0.522, 0.0076, 0.4631]]])
in0Con61385 = tf.constant([[[0.9588, 0.8657, 0.5665, 0.8011, 0.409, 0.1441], [0.8306, 0.0941, 0.0459, 0.7447, 0.8763, 0.3555], [0.7268, 0.272, 0.8249, 0.1497, 0.1241, 0.9479], [0.9679, 0.1777, 0.97, 0.8746, 0.5508, 0.1631]]])
in0Con84594 = tf.constant([[[0.0145, 0.0677, 0.441, 0.2874, 0.0843, 0.431, 0.8088, 0.1331, 0.0278, 0.4019, 0.5817, 0.4348, 0.7652, 0.9508, 0.7195, 0.5236, 0.755, 0.2465, 0.8554], [0.1112, 0.2856, 0.8925, 0.0913, 0.3776, 0.2795, 0.1644, 0.5801, 0.2695, 0.1454, 0.6779, 0.0959, 0.0572, 0.9858, 0.9105, 0.5705, 0.8313, 0.509, 0.5241], [0.1422, 0.2841, 0.3301, 0.4916, 0.6041, 0.8203, 0.9501, 0.6173, 0.2693, 0.7656, 0.5987, 0.1589, 0.1722, 0.2016, 0.2954, 0.909, 0.2188, 0.7483, 0.9404], [0.274, 0.3655, 0.4311, 0.9795, 0.6, 0.1576, 0.6278, 0.2074, 0.24, 0.9912, 0.9703, 0.5679, 0.6286, 0.2757, 0.9934, 0.39, 0.9387, 0.2687, 0.2684]]])
in0Sub45785 = tf.constant([[[[[0.3817, 0.9972, 0.3464], [0.5137, 0.0112, 0.2347], [0.3122, 0.8155, 0.3306]], [[0.6121, 0.6628, 0.3118], [0.0281, 0.1462, 0.853], [0.7032, 0.2072, 0.8205]]], [[[0.7962, 0.5804, 0], [0.7113, 0.3442, 0.9268], [0.5681, 0.8395, 0.3261]], [[0.0606, 0.8097, 0.1626], [0.4513, 0.0906, 0.6974], [0.8847, 0.3755, 0.7425]]], [[[0.8001, 0.3122, 0.7502], [0.9731, 0.2128, 0.8125], [0.1358, 0.1384, 0.8098]], [[0.0415, 0.2411, 0.6036], [0.4683, 0.499, 0.0739], [0.5933, 0.6643, 0.6422]]]]])
in1Sub45785 = tf.constant([[[[[0.2342, 0.7677, 0.6357], [0.2441, 0.7632, 0.4788], [0.1283, 0.4161, 0.6737]], [[0.9146, 0.5909, 0.7329], [0.5293, 0.3685, 0.5725], [0.1951, 0.2159, 0.6874]]], [[[0.9869, 0.3419, 0.3525], [0.5428, 0.8586, 0.6918], [0.6283, 0.5513, 0.1394]], [[0.8234, 0.7176, 0.4202], [0.1959, 0.8396, 0.3262], [0.2406, 0.6059, 0.6546]]], [[[0.3533, 0.7633, 0.9752], [0.5343, 0.1124, 0.998], [0.5872, 0.5855, 0.0521]], [[0.757, 0.832, 0.4349], [0.4376, 0.8282, 0.5284], [0.172, 0.0125, 0.3063]]]]])
in0Dot59407 = tf.constant([[[0.4436, 0.7367, 0.7468], [0.2393, 0.5507, 0.3273], [0.3938, 0.1513, 0.8143]]])
in1Dot59407 = tf.constant([[[0.074, 0.7292, 0.1941], [0.5914, 0.1797, 0.0269], [0.6481, 0.0525, 0.965]]])
in0Con74103 = tf.constant([[[0.1193, 0.4215, 0.9303, 0.8849, 0.272, 0.598, 0.1495, 0.4056, 0.0188, 0.1244, 0.8674, 0.5303, 0.2488, 0.6078, 0.0252], [0.2432, 0.0926, 0.5986, 0.4215, 0.757, 0.2106, 0.9599, 0.4004, 0.7584, 0.7547, 0.6391, 0.9193, 0.4722, 0.4997, 0.3385], [0.1456, 0.635, 0.7309, 0.6174, 0.0217, 0.831, 0.2229, 0.9009, 0.6907, 0.4119, 0.0464, 0.7187, 0.2795, 0.4035, 0.0004]]])
in0Con57258 = tf.constant([[[0.475, 0.5671], [0.5442, 0.7589], [0.6894, 0.0197], [0.7456, 0.2131]]])
print (np.array2string(model.predict([in0Glo66846,in0Con69076,in0Dot89124,in1Dot89124,in0Con43212,in0Sub57080,in1Sub57080,in0Mas88315,in0Min33031,in1Min33031,in0Dot53602,in1Dot53602,in0Con61385,in0Con84594,in0Sub45785,in1Sub45785,in0Dot59407,in1Dot59407,in0Con74103,in0Con57258],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add21853.png')

LGlo66846 = global_average_pooling3D_layer([[[[[1.8306, 1.0567], [1.2086, 1.3396]], [[1.4172, 1.4235], [1.0613, 1.0589]]]]], Glo66846), 
LRes89491 = reshape_layer(Glo66846, [2, 1], Res89491), 
LCon69076 = concatenate_layer([Res89491,[[[0.1052, 0.7416], [0.0119, 0.1606]]]], 2, Con69076), 
LDot89124 = dot_layer([[[0.1697, 0.6027], [0.2409, 0.7966], [0.7112, 0.988]]], [[[0.972, 0.171], [0.4312, 0.9652], [0.5432, 0.8179]]], 1, 1, Dot89124), 
LCon43212 = concatenate_layer([Dot89124,[[[0.0689], [0.6363]]]], 2, Con43212), 
LSub57080 = subtract_layer([[[0.8206, 0.0711, 0.5928], [0.865, 0.3212, 0.1987]]], [[[0.1318, 0.4039, 0.5726], [0.1337, 0.4723, 0.0748]]], Sub57080), 
LAve27240 = average_layer([Con43212,Sub57080], Ave27240), 
LAve33515 = average_layer([Con69076,Ave27240], Ave33515), 
LZer84615 = zero_padding1D_layer(Ave33515, 2, 0, Zer84615), 
LMas88315 = masking_layer([[[[1.8889, 1.5635, 1.0642, 1.2547], [1.7745, 1.8453, 1.6126, 1.4997]], [[1.2968, 1.2401, 1.748, 1.8257], [1.1737, 1.0254, 1.9502, 1.1377]], [[1.5046, 1.8821, 1.3913, 1.6127], [1.1783, 1.2223, 1.8545, 1.1281]], [[1.1207, 1.6665, 1.9101, 1.889], [1.7159, 1.7134, 1.0862, 1.2514]]]], 2, Mas88315), 
LRes92862 = reshape_layer(Mas88315, [4, 8], Res92862), 
LMin33031 = minimum_layer([[[[0.9251, 0.7526], [0.8595, 0.3678]]], [[[0.859, 0.9625], [0.906, 0.6844]]]], Min33031), 
LDot53602 = dot_layer([[[0.8173, 0.3096, 0.2064], [0.5118, 0.0968, 0.8193]]], [[[0.2763, 0.8578, 0.1944], [0.522, 0.0076, 0.4631]]], 2, 2, Dot53602), 
LMul22807 = multiply_layer([Min33031,Dot53602], Mul22807), 
LZer63083 = zero_padding1D_layer(Mul22807, 2, 0, Zer63083), 
LCon61385 = concatenate_layer([Zer63083,[[[0.9588, 0.8657, 0.5665, 0.8011, 0.409, 0.1441], [0.8306, 0.0941, 0.0459, 0.7447, 0.8763, 0.3555], [0.7268, 0.272, 0.8249, 0.1497, 0.1241, 0.9479], [0.9679, 0.1777, 0.97, 0.8746, 0.5508, 0.1631]]]], 2, Con61385), 
LMul68977 = multiply_layer([Res92862,Con61385], Mul68977), 
LCon84594 = concatenate_layer([Mul68977,[[[0.0145, 0.0677, 0.441, 0.2874, 0.0843, 0.431, 0.8088, 0.1331, 0.0278, 0.4019, 0.5817, 0.4348, 0.7652, 0.9508, 0.7195, 0.5236, 0.755, 0.2465, 0.8554], [0.1112, 0.2856, 0.8925, 0.0913, 0.3776, 0.2795, 0.1644, 0.5801, 0.2695, 0.1454, 0.6779, 0.0959, 0.0572, 0.9858, 0.9105, 0.5705, 0.8313, 0.509, 0.5241], [0.1422, 0.2841, 0.3301, 0.4916, 0.6041, 0.8203, 0.9501, 0.6173, 0.2693, 0.7656, 0.5987, 0.1589, 0.1722, 0.2016, 0.2954, 0.909, 0.2188, 0.7483, 0.9404], [0.274, 0.3655, 0.4311, 0.9795, 0.6, 0.1576, 0.6278, 0.2074, 0.24, 0.9912, 0.9703, 0.5679, 0.6286, 0.2757, 0.9934, 0.39, 0.9387, 0.2687, 0.2684]]]], 2, Con84594), 
LSub45785 = subtract_layer([[[[[0.3817, 0.9972, 0.3464], [0.5137, 0.0112, 0.2347], [0.3122, 0.8155, 0.3306]], [[0.6121, 0.6628, 0.3118], [0.0281, 0.1462, 0.853], [0.7032, 0.2072, 0.8205]]], [[[0.7962, 0.5804, 0], [0.7113, 0.3442, 0.9268], [0.5681, 0.8395, 0.3261]], [[0.0606, 0.8097, 0.1626], [0.4513, 0.0906, 0.6974], [0.8847, 0.3755, 0.7425]]], [[[0.8001, 0.3122, 0.7502], [0.9731, 0.2128, 0.8125], [0.1358, 0.1384, 0.8098]], [[0.0415, 0.2411, 0.6036], [0.4683, 0.499, 0.0739], [0.5933, 0.6643, 0.6422]]]]], [[[[[0.2342, 0.7677, 0.6357], [0.2441, 0.7632, 0.4788], [0.1283, 0.4161, 0.6737]], [[0.9146, 0.5909, 0.7329], [0.5293, 0.3685, 0.5725], [0.1951, 0.2159, 0.6874]]], [[[0.9869, 0.3419, 0.3525], [0.5428, 0.8586, 0.6918], [0.6283, 0.5513, 0.1394]], [[0.8234, 0.7176, 0.4202], [0.1959, 0.8396, 0.3262], [0.2406, 0.6059, 0.6546]]], [[[0.3533, 0.7633, 0.9752], [0.5343, 0.1124, 0.998], [0.5872, 0.5855, 0.0521]], [[0.757, 0.832, 0.4349], [0.4376, 0.8282, 0.5284], [0.172, 0.0125, 0.3063]]]]], Sub45785), 
LRes81129 = reshape_layer(Sub45785, [3, 2, 9], Res81129), 
LRes47591 = reshape_layer(Res81129, [3, 18], Res47591), 
LDot59407 = dot_layer([[[0.4436, 0.7367, 0.7468], [0.2393, 0.5507, 0.3273], [0.3938, 0.1513, 0.8143]]], [[[0.074, 0.7292, 0.1941], [0.5914, 0.1797, 0.0269], [0.6481, 0.0525, 0.965]]], 1, 1, Dot59407), 
LCon74103 = concatenate_layer([Dot59407,[[[0.1193, 0.4215, 0.9303, 0.8849, 0.272, 0.598, 0.1495, 0.4056, 0.0188, 0.1244, 0.8674, 0.5303, 0.2488, 0.6078, 0.0252], [0.2432, 0.0926, 0.5986, 0.4215, 0.757, 0.2106, 0.9599, 0.4004, 0.7584, 0.7547, 0.6391, 0.9193, 0.4722, 0.4997, 0.3385], [0.1456, 0.635, 0.7309, 0.6174, 0.0217, 0.831, 0.2229, 0.9009, 0.6907, 0.4119, 0.0464, 0.7187, 0.2795, 0.4035, 0.0004]]]], 2, Con74103), 
LMul54684 = multiply_layer([Res47591,Con74103], Mul54684), 
LRes94206 = reshape_layer(Mul54684, [3, 18, 1], Res94206), 
LRes32683 = reshape_layer(Res94206, [3, 18, 1, 1], Res32683), 
LCon33934 = conv3D_layer(Res32683, 3, 1, 1,[[[[[0.0476, 0.5616, 0.1085]]]], [[[[0.572, 0.5191, 0.2233]]]], [[[[0.3704, 0.6247, 0.1938]]]]],[0, 0, 0], 3, 2, 1, true, 1, 1, 1, Con33934), 
LRes4789 = reshape_layer(Con33934, [1, 9, 3], Res4789), 
LRes90557 = reshape_layer(Res4789, [1, 27], Res90557), 
LDot30220 = dot_layer(Con84594,Res90557, 2, 2, Dot30220), 
LCon57258 = concatenate_layer([Dot30220,[[[0.475, 0.5671], [0.5442, 0.7589], [0.6894, 0.0197], [0.7456, 0.2131]]]], 2, Con57258), 
LAdd21853 = add_layer([Zer84615,Con57258], Add21853), 
exec_layers([LGlo66846,LRes89491,LCon69076,LDot89124,LCon43212,LSub57080,LAve27240,LAve33515,LZer84615,LMas88315,LRes92862,LMin33031,LDot53602,LMul22807,LZer63083,LCon61385,LMul68977,LCon84594,LSub45785,LRes81129,LRes47591,LDot59407,LCon74103,LMul54684,LRes94206,LRes32683,LCon33934,LRes4789,LRes90557,LDot30220,LCon57258,LAdd21853],["Glo66846","Res89491","Con69076","Dot89124","Con43212","Sub57080","Ave27240","Ave33515","Zer84615","Mas88315","Res92862","Min33031","Dot53602","Mul22807","Zer63083","Con61385","Mul68977","Con84594","Sub45785","Res81129","Res47591","Dot59407","Con74103","Mul54684","Res94206","Res32683","Con33934","Res4789","Res90557","Dot30220","Con57258","Add21853"],Add21853,"Add21853")

Actual (Unparsed): [[[-0.0990153, 0.4750000, 0.5671000], [0.0789270, 0.5442000, 0.7589000], [1.1738585, 0.8696065, 0.4127750], [0.9764681, 1.1337813, 0.4834500]]]

Expected (Unparsed): [[[-0.09901531688010895,0.475,0.5671],[0.07892695208814011,0.5442,0.7589],[1.1738584851432614,0.869606465,0.412775],[0.9764680711363419,1.133781305,0.48345]]]

Actual:   [[[-0.099, 0.475, 0.5671], [0.079, 0.5442, 0.7589], [1.1739, 0.8697, 0.4128], [0.9765, 1.1338, 0.4835]]]

Expected: [[[-0.099, 0.475, 0.5671], [0.079, 0.5442, 0.7589], [1.1739, 0.8697, 0.4128], [0.9765, 1.1338, 0.4835]]]