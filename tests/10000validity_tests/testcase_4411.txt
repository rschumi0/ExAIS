import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add48121 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Add48121 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Cro89346 = tf.keras.layers.Input(shape=([4, 4, 2]))
in0Cro96125 = tf.keras.layers.Input(shape=([3, 4, 3, 1]))
in0Con70195 = tf.keras.layers.Input(shape=([4, 1, 2, 1]))

Add48121 = keras.layers.Add(name = 'Add48121', )([in0Add48121,in1Add48121])
Up_31654 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_31654', )(Add48121)
Zer61647 = keras.layers.ZeroPadding3D(padding=((2, 0), (0, 0), (1, 0)), name = 'Zer61647', )(Up_31654)
Cro89346 = keras.layers.Cropping2D(cropping=((0, 0), (3, 0)), name = 'Cro89346', )(in0Cro89346)
Res2252 = keras.layers.Reshape((4, 1, 2, 1), name = 'Res2252', )(Cro89346)
Cro96125 = keras.layers.Cropping3D(cropping=((0, 2), (2, 1), (2, 0)), name = 'Cro96125', )(in0Cro96125)
Zer80210 = keras.layers.ZeroPadding3D(padding=((3, 0), (0, 0), (1, 0)), name = 'Zer80210', )(Cro96125)
Ave43421 = keras.layers.Average(name = 'Ave43421', )([Res2252,Zer80210])
Con70195 = keras.layers.Concatenate(axis=4, name = 'Con70195', )([Ave43421,in0Con70195])
Max80149 = keras.layers.Maximum(name = 'Max80149', )([Zer61647,Con70195])
model = tf.keras.models.Model(inputs=[in0Add48121,in1Add48121,in0Cro89346,in0Cro96125,in0Con70195], outputs=Max80149)
in0Add48121 = tf.constant([[[[[0.241, 0.1353]]]]])
in1Add48121 = tf.constant([[[[[0.4842, 0.8693]]]]])
in0Cro89346 = tf.constant([[[[1.9315, 1.0619], [1.2031, 1.4578], [1.4314, 1.5297], [1.9279, 1.6762]], [[1.7644, 1.7155], [1.4777, 1.5328], [1.5818, 1.0417], [1.2455, 1.9255]], [[1.5286, 1.1085], [1.2437, 1.535], [1.5169, 1.5712], [1.7672, 1.4254]], [[1.3366, 1.1597], [1.7205, 1.6544], [1.0253, 1.8222], [1.291, 1.2449]]]])
in0Cro96125 = tf.constant([[[[[1.9462], [1.5359], [1.3139]], [[1.2021], [1.5757], [1.6749]], [[1.3715], [1.8646], [1.591]], [[1.9503], [1.398], [1.7751]]], [[[1.9658], [1.8429], [1.3157]], [[1.4269], [1.4321], [1.1414]], [[1.0256], [1.6946], [1.8444]], [[1.665], [1.8887], [1.4969]]], [[[1.6989], [1.5021], [1.6936]], [[1.253], [1.2986], [1.1287]], [[1.9848], [1.992], [1.8335]], [[1.5836], [1.5446], [1.5555]]]]])
in0Con70195 = tf.constant([[[[[0.195], [0.9114]]], [[[0.9954], [0.6974]]], [[[0.5783], [0.1753]]], [[[0.3684], [0.0025]]]]])
print (np.array2string(model.predict([in0Add48121,in1Add48121,in0Cro89346,in0Cro96125,in0Con70195],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max80149.png')

LAdd48121 = add_layer([[[[[[0.241, 0.1353]]]]], [[[[[0.4842, 0.8693]]]]]], Add48121), 
LUp_31654 = up_sampling3D_layer(Add48121, 2, 1, 1, Up_31654), 
LZer61647 = zero_padding3D_layer(Up_31654, 2, 0, 0, 0, 1, 0, Zer61647), 
LCro89346 = cropping2D_layer([[[[1.9315, 1.0619], [1.2031, 1.4578], [1.4314, 1.5297], [1.9279, 1.6762]], [[1.7644, 1.7155], [1.4777, 1.5328], [1.5818, 1.0417], [1.2455, 1.9255]], [[1.5286, 1.1085], [1.2437, 1.535], [1.5169, 1.5712], [1.7672, 1.4254]], [[1.3366, 1.1597], [1.7205, 1.6544], [1.0253, 1.8222], [1.291, 1.2449]]]], 0, 0, 3, 0, Cro89346), 
LRes2252 = reshape_layer(Cro89346, [4, 1, 2, 1], Res2252), 
LCro96125 = cropping3D_layer([[[[[1.9462], [1.5359], [1.3139]], [[1.2021], [1.5757], [1.6749]], [[1.3715], [1.8646], [1.591]], [[1.9503], [1.398], [1.7751]]], [[[1.9658], [1.8429], [1.3157]], [[1.4269], [1.4321], [1.1414]], [[1.0256], [1.6946], [1.8444]], [[1.665], [1.8887], [1.4969]]], [[[1.6989], [1.5021], [1.6936]], [[1.253], [1.2986], [1.1287]], [[1.9848], [1.992], [1.8335]], [[1.5836], [1.5446], [1.5555]]]]], 0, 2, 2, 1, 2, 0, Cro96125), 
LZer80210 = zero_padding3D_layer(Cro96125, 3, 0, 0, 0, 1, 0, Zer80210), 
LAve43421 = average_layer([Res2252,Zer80210], Ave43421), 
LCon70195 = concatenate_layer([Ave43421,[[[[[0.195], [0.9114]]], [[[0.9954], [0.6974]]], [[[0.5783], [0.1753]]], [[[0.3684], [0.0025]]]]]], 4, Con70195), 
LMax80149 = maximum_layer([Zer61647,Con70195], Max80149), 
exec_layers([LAdd48121,LUp_31654,LZer61647,LCro89346,LRes2252,LCro96125,LZer80210,LAve43421,LCon70195,LMax80149],["Add48121","Up_31654","Zer61647","Cro89346","Res2252","Cro96125","Zer80210","Ave43421","Con70195","Max80149"],Max80149,"Max80149")

Actual (Unparsed): [[[[[0.9639500, 0.1950000], [0.8381000, 0.9114000]]], [[[0.6227500, 0.9954000], [0.9627500, 0.6974000]]], [[[0.8836000, 0.5783000], [0.7252000, 1.0046000]]], [[[0.6455000, 0.3684000], [1.4179500, 1.0046000]]]]]

Expected (Unparsed): [[[[[0.96395,0.195],[0.8381,0.9114]]],[[[0.62275,0.9954],[0.96275,0.6974]]],[[[0.8836,0.5783],[0.7252000000000001,1.0046]]],[[[0.6455,0.3684],[1.4179499999999998,1.0046]]]]]

Actual:   [[[[[0.964, 0.195], [0.8381, 0.9114]]], [[[0.6228, 0.9954], [0.9628, 0.6974]]], [[[0.8836, 0.5783], [0.7252, 1.0046]]], [[[0.6455, 0.3684], [1.418, 1.0046]]]]]

Expected: [[[[[0.964, 0.195], [0.8381, 0.9114]]], [[[0.6228, 0.9954], [0.9628, 0.6974]]], [[[0.8836, 0.5783], [0.7253, 1.0046]]], [[[0.6455, 0.3684], [1.418, 1.0046]]]]]