import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Thr68093 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Zer93346 = tf.keras.layers.Input(shape=([3, 1]))
in0Con73873 = tf.keras.layers.Input(shape=([5, 1]))
in0Cro54677 = tf.keras.layers.Input(shape=([2, 3]))
in0Ave55345 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave55345 = tf.keras.layers.Input(shape=([1, 2]))
in0Min19031 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min19031 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con15688 = tf.keras.layers.Input(shape=([3]))
in0Con37008 = tf.keras.layers.Input(shape=([6]))

Thr68093 = keras.layers.ThresholdedReLU(theta=7.762261795765638, name = 'Thr68093', input_shape=(1, 2, 1))(in0Thr68093)
Res74311 = keras.layers.Reshape((1, 2), name = 'Res74311', )(Thr68093)
Zer56081 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer56081', )(Res74311)
Zer93346 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer93346', )(in0Zer93346)
Con73873 = keras.layers.Concatenate(axis=2, name = 'Con73873', )([Zer93346,in0Con73873])
Mul76905 = keras.layers.Multiply(name = 'Mul76905', )([Zer56081,Con73873])
Fla63324 = keras.layers.Flatten(name = 'Fla63324', )(Mul76905)
Cro54677 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro54677', )(in0Cro54677)
Con58297 = keras.layers.Conv1D(4, (1),strides=(1), padding='valid', dilation_rate=(1), name = 'Con58297', )(Cro54677)
Fla14131 = keras.layers.Flatten(name = 'Fla14131', )(Con58297)
Ave55345 = keras.layers.Average(name = 'Ave55345', )([in0Ave55345,in1Ave55345])
Res41065 = keras.layers.Reshape((1, 2, 1), name = 'Res41065', )(Ave55345)
Zer23687 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer23687', )(Res41065)
Min19031 = keras.layers.Minimum(name = 'Min19031', )([in0Min19031,in1Min19031])
Zer37554 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer37554', )(Min19031)
Ave14773 = keras.layers.Average(name = 'Ave14773', )([Zer23687,Zer37554])
Res56592 = keras.layers.Reshape((2, 3, 1, 1), name = 'Res56592', )(Ave14773)
Glo91206 = keras.layers.GlobalAveragePooling3D(name = 'Glo91206', )(Res56592)
Con15688 = keras.layers.Concatenate(axis=1, name = 'Con15688', )([Glo91206,in0Con15688])
Min5370 = keras.layers.Minimum(name = 'Min5370', )([Fla14131,Con15688])
Con37008 = keras.layers.Concatenate(axis=1, name = 'Con37008', )([Min5370,in0Con37008])
Max89665 = keras.layers.Maximum(name = 'Max89665', )([Fla63324,Con37008])
model = tf.keras.models.Model(inputs=[in0Thr68093,in0Zer93346,in0Con73873,in0Cro54677,in0Ave55345,in1Ave55345,in0Min19031,in1Min19031,in0Con15688,in0Con37008], outputs=Max89665)
w = model.get_layer('Con58297').get_weights() 
w[0] = np.array([[[0.9727, 0.852, 0.3746, 0.7515], [0.616, 0.9127, 0.0895, 0.5382], [0.4004, 0.2977, 0.2052, 0.8155]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con58297').set_weights(w) 
in0Thr68093 = tf.constant([[[[0.9563], [0.7243]]]])
in0Zer93346 = tf.constant([[[1.6979], [1.9768], [1.0905]]])
in0Con73873 = tf.constant([[[0.0937], [0.5573], [0.3572], [0.4941], [0.0858]]])
in0Cro54677 = tf.constant([[[1.8009, 1.8833, 1.4649], [1.0013, 1.6279, 1.409]]])
in0Ave55345 = tf.constant([[[0.8355, 0.7752]]])
in1Ave55345 = tf.constant([[[0.4513, 0.2836]]])
in0Min19031 = tf.constant([[[[0.5404]], [[0.5728]]]])
in1Min19031 = tf.constant([[[[0.1289]], [[0.6316]]]])
in0Con15688 = tf.constant([[0.8236, 0.4397, 0.533]])
in0Con37008 = tf.constant([[0.9118, 0.317, 0.2437, 0.0278, 0.722, 0.2058]])
print (np.array2string(model.predict([in0Thr68093,in0Zer93346,in0Con73873,in0Cro54677,in0Ave55345,in1Ave55345,in0Min19031,in1Min19031,in0Con15688,in0Con37008],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max89665.png')

LThr68093 = thresholded_relu_layer([[[[0.9563], [0.7243]]]], 7.762261795765638, Thr68093), 
LRes74311 = reshape_layer(Thr68093, [1, 2], Res74311), 
LZer56081 = zero_padding1D_layer(Res74311, 4, 0, Zer56081), 
LZer93346 = zero_padding1D_layer([[[1.6979], [1.9768], [1.0905]]], 1, 1, Zer93346), 
LCon73873 = concatenate_layer([Zer93346,[[[0.0937], [0.5573], [0.3572], [0.4941], [0.0858]]]], 2, Con73873), 
LMul76905 = multiply_layer([Zer56081,Con73873], Mul76905), 
LFla63324 = flatten_layer(Mul76905, Fla63324), 
LCro54677 = cropping1D_layer([[[1.8009, 1.8833, 1.4649], [1.0013, 1.6279, 1.409]]], 1, 0, Cro54677), 
LCon58297 = conv1D_layer(Cro54677, 1,[[[0.9727, 0.852, 0.3746, 0.7515], [0.616, 0.9127, 0.0895, 0.5382], [0.4004, 0.2977, 0.2052, 0.8155]]],[0, 0, 0, 0], 1, false, 1, Con58297), 
LFla14131 = flatten_layer(Con58297, Fla14131), 
LAve55345 = average_layer([[[[0.8355, 0.7752]]], [[[0.4513, 0.2836]]]], Ave55345), 
LRes41065 = reshape_layer(Ave55345, [1, 2, 1], Res41065), 
LZer23687 = zero_padding2D_layer(Res41065, 1, 0, 1, 0, Zer23687), 
LMin19031 = minimum_layer([[[[[0.5404]], [[0.5728]]]], [[[[0.1289]], [[0.6316]]]]], Min19031), 
LZer37554 = zero_padding2D_layer(Min19031, 0, 0, 2, 0, Zer37554), 
LAve14773 = average_layer([Zer23687,Zer37554], Ave14773), 
LRes56592 = reshape_layer(Ave14773, [2, 3, 1, 1], Res56592), 
LGlo91206 = global_average_pooling3D_layer(Res56592, Glo91206), 
LCon15688 = concatenate_layer([Glo91206,[[0.8236, 0.4397, 0.533]]], 1, Con15688), 
LMin5370 = minimum_layer([Fla14131,Con15688], Min5370), 
LCon37008 = concatenate_layer([Min5370,[[0.9118, 0.317, 0.2437, 0.0278, 0.722, 0.2058]]], 1, Con37008), 
LMax89665 = maximum_layer([Fla63324,Con37008], Max89665), 
exec_layers([LThr68093,LRes74311,LZer56081,LZer93346,LCon73873,LMul76905,LFla63324,LCro54677,LCon58297,LFla14131,LAve55345,LRes41065,LZer23687,LMin19031,LZer37554,LAve14773,LRes56592,LGlo91206,LCon15688,LMin5370,LCon37008,LMax89665],["Thr68093","Res74311","Zer56081","Zer93346","Con73873","Mul76905","Fla63324","Cro54677","Con58297","Fla14131","Ave55345","Res41065","Zer23687","Min19031","Zer37554","Ave14773","Res56592","Glo91206","Con15688","Min5370","Con37008","Max89665"],Max89665,"Max89665")

Actual (Unparsed): [[0.1562083, 0.8236000, 0.4397000, 0.5330000, 0.9118000, 0.3170000, 0.2437000, 0.0278000, 0.7220000, 0.2058000]]

Expected (Unparsed): [[0.1562083333333333,0.8236,0.4397,0.533,0.9118,0.317,0.2437,0.0278,0.722,0.2058]]

Actual:   [[0.1563, 0.8236, 0.4397, 0.533, 0.9118, 0.317, 0.2437, 0.0278, 0.722, 0.2058]]

Expected: [[0.1563, 0.8236, 0.4397, 0.533, 0.9118, 0.317, 0.2437, 0.0278, 0.722, 0.2058]]