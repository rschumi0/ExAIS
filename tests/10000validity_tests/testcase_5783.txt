import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add89706 = tf.keras.layers.Input(shape=([1, 1]))
in1Add89706 = tf.keras.layers.Input(shape=([1, 1]))
in0Con73188 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Min1126 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Min1126 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Con21287 = tf.keras.layers.Input(shape=([1, 2]))
in0Lay34164 = tf.keras.layers.Input(shape=([1]))
in0Con10047 = tf.keras.layers.Input(shape=([2, 3]))
in0Sub55350 = tf.keras.layers.Input(shape=([3, 3, 2]))
in1Sub55350 = tf.keras.layers.Input(shape=([3, 3, 2]))

Add89706 = keras.layers.Add(name = 'Add89706', )([in0Add89706,in1Add89706])
Res54177 = keras.layers.Reshape((1, 1, 1), name = 'Res54177', )(Add89706)
Con73188 = keras.layers.Concatenate(axis=3, name = 'Con73188', )([Res54177,in0Con73188])
Min1126 = keras.layers.Minimum(name = 'Min1126', )([in0Min1126,in1Min1126])
Res15922 = keras.layers.Reshape((1, 1, 4), name = 'Res15922', )(Min1126)
Sep47383 = keras.layers.SeparableConv2D(2, (1, 1),strides=(1, 1), padding='same', name = 'Sep47383', )(Res15922)
Ave66423 = keras.layers.Average(name = 'Ave66423', )([Con73188,Sep47383])
Res72605 = keras.layers.Reshape((1, 2), name = 'Res72605', )(Ave66423)
Con21287 = keras.layers.Concatenate(axis=2, name = 'Con21287', )([Res72605,in0Con21287])
Lay34164 = keras.layers.LayerNormalization(axis=1, epsilon=2.9754292192908287, name = 'Lay34164', )(in0Lay34164)
ReL51813 = keras.layers.ReLU(max_value=8.286124801494685, negative_slope=0.13462993766550788, threshold=7.88659334843077, name = 'ReL51813', )(Lay34164)
Res98064 = keras.layers.Reshape((1, 1), name = 'Res98064', )(ReL51813)
Zer89873 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer89873', )(Res98064)
Con10047 = keras.layers.Concatenate(axis=2, name = 'Con10047', )([Zer89873,in0Con10047])
Sub55350 = keras.layers.Subtract(name = 'Sub55350', )([in0Sub55350,in1Sub55350])
Res74682 = keras.layers.Reshape((3, 6), name = 'Res74682', )(Sub55350)
Con44006 = keras.layers.Conv1D(4, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con44006', )(Res74682)
Sub68465 = keras.layers.Subtract(name = 'Sub68465', )([Con10047,Con44006])
Dot90438 = keras.layers.Dot(axes=(2, 2), name = 'Dot90438', )([Con21287,Sub68465])
model = tf.keras.models.Model(inputs=[in0Add89706,in1Add89706,in0Con73188,in0Min1126,in1Min1126,in0Con21287,in0Lay34164,in0Con10047,in0Sub55350,in1Sub55350], outputs=Dot90438)
w = model.get_layer('Sep47383').get_weights() 
w[0] = np.array([[[[0.9876], [0.7789], [0.6475], [0.1844]]]])
w[1] = np.array([[[[0.4483, 0.3668], [0.0699, 0.9071], [0.7158, 0.7904], [0.2267, 0.3368]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep47383').set_weights(w) 
w = model.get_layer('Con44006').get_weights() 
w[0] = np.array([[[0.9473, 0.8076, 0.3049, 0.4657], [0.4381, 0.8484, 0.7992, 0.1041], [0.3024, 0.3113, 0.4509, 0.298], [0.5415, 0.9704, 0.5546, 0.3097], [0.7458, 0.8268, 0.6163, 0.2958], [0.4946, 0.5276, 0.3508, 0.1907]], [[0.1096, 0.7853, 0.8476, 0.7498], [0.061, 0.9043, 0.1703, 0.4729], [0.5757, 0.3791, 0.6702, 0.3676], [0.0311, 0.4064, 0.5934, 0.2915], [0.5295, 0.0738, 0.139, 0.913], [0.6434, 0.9303, 0.9871, 0.1712]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con44006').set_weights(w) 
in0Add89706 = tf.constant([[[0.0567]]])
in1Add89706 = tf.constant([[[0.7081]]])
in0Con73188 = tf.constant([[[[0.8327]]]])
in0Min1126 = tf.constant([[[[[0.0839, 0.2879], [0.1156, 0.9856]]]]])
in1Min1126 = tf.constant([[[[[0.119, 0.895], [0.9155, 0.2554]]]]])
in0Con21287 = tf.constant([[[0.6812, 0.1003]]])
in0Lay34164 = tf.constant([[1.5494]])
in0Con10047 = tf.constant([[[0.2012, 0.8873, 0.1302], [0.3368, 0.753, 0.4716]]])
in0Sub55350 = tf.constant([[[[0.425, 0.4712], [0.0448, 0.2488], [0.6586, 0.8617]], [[0.3559, 0.2716], [0.0293, 0.3621], [0.4204, 0.2465]], [[0.9764, 0.5968], [0.5014, 0.0719], [0.9154, 0.1465]]]])
in1Sub55350 = tf.constant([[[[0.9997, 0.9684], [0.6016, 0.1059], [0.2897, 0.7728]], [[0.2184, 0.9366], [0.9061, 0.4682], [0.6073, 0.5799]], [[0.928, 0.3379], [0.6773, 0.2079], [0.6691, 0.8004]]]])
print (np.array2string(model.predict([in0Add89706,in1Add89706,in0Con73188,in0Min1126,in1Min1126,in0Con21287,in0Lay34164,in0Con10047,in0Sub55350,in1Sub55350],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot90438.png')

LAdd89706 = add_layer([[[[0.0567]]], [[[0.7081]]]], Add89706), 
LRes54177 = reshape_layer(Add89706, [1, 1, 1], Res54177), 
LCon73188 = concatenate_layer([Res54177,[[[[0.8327]]]]], 3, Con73188), 
LMin1126 = minimum_layer([[[[[[0.0839, 0.2879], [0.1156, 0.9856]]]]], [[[[[0.119, 0.895], [0.9155, 0.2554]]]]]], Min1126), 
LRes15922 = reshape_layer(Min1126, [1, 1, 4], Res15922), 
LSep47383 = separable_conv2D_layer(Res15922, 1, 1,[[[[[0.9876], [0.7789], [0.6475], [0.1844]]]],[[[[0.4483, 0.3668], [0.0699, 0.9071], [0.7158, 0.7904], [0.2267, 0.3368]]]]],[0, 0], 1, 1, true, Sep47383), 
LAve66423 = average_layer([Con73188,Sep47383], Ave66423), 
LRes72605 = reshape_layer(Ave66423, [1, 2], Res72605), 
LCon21287 = concatenate_layer([Res72605,[[[0.6812, 0.1003]]]], 2, Con21287), 
LLay34164 = layer_normalization_layer([[1.5494]], 1, 2.9754292192908287, Lay34164), 
LReL51813 = relu_layer(Lay34164, 8.286124801494685, 0.13462993766550788, 7.88659334843077, ReL51813), 
LRes98064 = reshape_layer(ReL51813, [1, 1], Res98064), 
LZer89873 = zero_padding1D_layer(Res98064, 1, 0, Zer89873), 
LCon10047 = concatenate_layer([Zer89873,[[[0.2012, 0.8873, 0.1302], [0.3368, 0.753, 0.4716]]]], 2, Con10047), 
LSub55350 = subtract_layer([[[[0.425, 0.4712], [0.0448, 0.2488], [0.6586, 0.8617]], [[0.3559, 0.2716], [0.0293, 0.3621], [0.4204, 0.2465]], [[0.9764, 0.5968], [0.5014, 0.0719], [0.9154, 0.1465]]]], [[[[0.9997, 0.9684], [0.6016, 0.1059], [0.2897, 0.7728]], [[0.2184, 0.9366], [0.9061, 0.4682], [0.6073, 0.5799]], [[0.928, 0.3379], [0.6773, 0.2079], [0.6691, 0.8004]]]], Sub55350), 
LRes74682 = reshape_layer(Sub55350, [3, 6], Res74682), 
LCon44006 = conv1D_layer(Res74682, 2,[[[0.9473, 0.8076, 0.3049, 0.4657], [0.4381, 0.8484, 0.7992, 0.1041], [0.3024, 0.3113, 0.4509, 0.298], [0.5415, 0.9704, 0.5546, 0.3097], [0.7458, 0.8268, 0.6163, 0.2958], [0.4946, 0.5276, 0.3508, 0.1907]], [[0.1096, 0.7853, 0.8476, 0.7498], [0.061, 0.9043, 0.1703, 0.4729], [0.5757, 0.3791, 0.6702, 0.3676], [0.0311, 0.4064, 0.5934, 0.2915], [0.5295, 0.0738, 0.139, 0.913], [0.6434, 0.9303, 0.9871, 0.1712]]],[0, 0, 0, 0], 1, false, 1, Con44006), 
LSub68465 = subtract_layer(Con10047,Con44006, Sub68465), 
LDot90438 = dot_layer(Con21287,Sub68465, 2, 2, Dot90438), 
exec_layers([LAdd89706,LRes54177,LCon73188,LMin1126,LRes15922,LSep47383,LAve66423,LRes72605,LCon21287,LLay34164,LReL51813,LRes98064,LZer89873,LCon10047,LSub55350,LRes74682,LCon44006,LSub68465,LDot90438],["Add89706","Res54177","Con73188","Min1126","Res15922","Sep47383","Ave66423","Res72605","Con21287","Lay34164","ReL51813","Res98064","Zer89873","Con10047","Sub55350","Res74682","Con44006","Sub68465","Dot90438"],Dot90438,"Dot90438")

Actual (Unparsed): [[[3.4716217, 3.0297172]]]

Expected (Unparsed): [[[3.471621499831429,3.029717176099435]]]

Actual:   [[[3.4717, 3.0298]]]

Expected: [[[3.4717, 3.0298]]]