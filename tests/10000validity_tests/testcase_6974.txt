import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU81946 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Min53744 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Min53744 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Con94164 = tf.keras.layers.Input(shape=([4]))
in0Add42971 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add42971 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Glo4037 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Con55809 = tf.keras.layers.Input(shape=([6]))
in0Mul92191 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul92191 = tf.keras.layers.Input(shape=([2, 1]))

ELU81946 = keras.layers.ELU(alpha=-7.706511401285521, name = 'ELU81946', input_shape=(2, 1, 1))(in0ELU81946)
Res34378 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res34378', )(ELU81946)
Zer36533 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer36533', )(Res34378)
Min53744 = keras.layers.Minimum(name = 'Min53744', )([in0Min53744,in1Min53744])
Sub80869 = keras.layers.Subtract(name = 'Sub80869', )([Zer36533,Min53744])
Res61976 = keras.layers.Reshape((2, 1, 2), name = 'Res61976', )(Sub80869)
Res94394 = keras.layers.Reshape((2, 2), name = 'Res94394', )(Res61976)
Fla79131 = keras.layers.Flatten(name = 'Fla79131', )(Res94394)
Con94164 = keras.layers.Concatenate(axis=1, name = 'Con94164', )([Fla79131,in0Con94164])
Add42971 = keras.layers.Add(name = 'Add42971', )([in0Add42971,in1Add42971])
Res13644 = keras.layers.Reshape((2, 2, 2), name = 'Res13644', )(Add42971)
Res5640 = keras.layers.Reshape((2, 4), name = 'Res5640', )(Res13644)
Fla35224 = keras.layers.Flatten(name = 'Fla35224', )(Res5640)
Glo4037 = keras.layers.GlobalAveragePooling3D(name = 'Glo4037', )(in0Glo4037)
Con55809 = keras.layers.Concatenate(axis=1, name = 'Con55809', )([Glo4037,in0Con55809])
Sub1421 = keras.layers.Subtract(name = 'Sub1421', )([Fla35224,Con55809])
Ave81819 = keras.layers.Average(name = 'Ave81819', )([Con94164,Sub1421])
Res94551 = keras.layers.Reshape((8, 1), name = 'Res94551', )(Ave81819)
Mul92191 = keras.layers.Multiply(name = 'Mul92191', )([in0Mul92191,in1Mul92191])
Zer12082 = keras.layers.ZeroPadding1D(padding=((6, 0)), name = 'Zer12082', )(Mul92191)
Max9297 = keras.layers.Maximum(name = 'Max9297', )([Res94551,Zer12082])
model = tf.keras.models.Model(inputs=[in0ELU81946,in0Min53744,in1Min53744,in0Con94164,in0Add42971,in1Add42971,in0Glo4037,in0Con55809,in0Mul92191,in1Mul92191], outputs=Max9297)
in0ELU81946 = tf.constant([[[[0.9045]], [[0.1974]]]])
in0Min53744 = tf.constant([[[[[0.5584], [0.1388]]], [[[0.7013], [0.8374]]]]])
in1Min53744 = tf.constant([[[[[0.3123], [0.7075]]], [[[0.1343], [0.2322]]]]])
in0Con94164 = tf.constant([[0.1103, 0.2421, 0.2729, 0.6683]])
in0Add42971 = tf.constant([[[[[0.8896], [0.0293]], [[0.4708], [0.524]]], [[[0.2633], [0.5685]], [[0.6507], [0.3038]]]]])
in1Add42971 = tf.constant([[[[[0.018], [0.8229]], [[0.4833], [0.5328]]], [[[0.9913], [0.4574]], [[0.8453], [0.3624]]]]])
in0Glo4037 = tf.constant([[[[[1.8582, 1.4753], [1.9053, 1.5493]]], [[[1.1579, 1.0587], [1.7919, 1.7855]]]]])
in0Con55809 = tf.constant([[0.9133, 0.7297, 0.5324, 0.7031, 0.9225, 0.3116]])
in0Mul92191 = tf.constant([[[0.6692], [0.9646]]])
in1Mul92191 = tf.constant([[[0.7977], [0.4081]]])
print (np.array2string(model.predict([in0ELU81946,in0Min53744,in1Min53744,in0Con94164,in0Add42971,in1Add42971,in0Glo4037,in0Con55809,in0Mul92191,in1Mul92191],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max9297.png')

LELU81946 = elu_layer([[[[0.9045]], [[0.1974]]]], -7.706511401285521, ELU81946), 
LRes34378 = reshape_layer(ELU81946, [2, 1, 1, 1], Res34378), 
LZer36533 = zero_padding3D_layer(Res34378, 0, 0, 0, 0, 1, 0, Zer36533), 
LMin53744 = minimum_layer([[[[[[0.5584], [0.1388]]], [[[0.7013], [0.8374]]]]], [[[[[0.3123], [0.7075]]], [[[0.1343], [0.2322]]]]]], Min53744), 
LSub80869 = subtract_layer(Zer36533,Min53744, Sub80869), 
LRes61976 = reshape_layer(Sub80869, [2, 1, 2], Res61976), 
LRes94394 = reshape_layer(Res61976, [2, 2], Res94394), 
LFla79131 = flatten_layer(Res94394, Fla79131), 
LCon94164 = concatenate_layer([Fla79131,[[0.1103, 0.2421, 0.2729, 0.6683]]], 1, Con94164), 
LAdd42971 = add_layer([[[[[[0.8896], [0.0293]], [[0.4708], [0.524]]], [[[0.2633], [0.5685]], [[0.6507], [0.3038]]]]], [[[[[0.018], [0.8229]], [[0.4833], [0.5328]]], [[[0.9913], [0.4574]], [[0.8453], [0.3624]]]]]], Add42971), 
LRes13644 = reshape_layer(Add42971, [2, 2, 2], Res13644), 
LRes5640 = reshape_layer(Res13644, [2, 4], Res5640), 
LFla35224 = flatten_layer(Res5640, Fla35224), 
LGlo4037 = global_average_pooling3D_layer([[[[[1.8582, 1.4753], [1.9053, 1.5493]]], [[[1.1579, 1.0587], [1.7919, 1.7855]]]]], Glo4037), 
LCon55809 = concatenate_layer([Glo4037,[[0.9133, 0.7297, 0.5324, 0.7031, 0.9225, 0.3116]]], 1, Con55809), 
LSub1421 = subtract_layer(Fla35224,Con55809, Sub1421), 
LAve81819 = average_layer([Con94164,Sub1421], Ave81819), 
LRes94551 = reshape_layer(Ave81819, [8, 1], Res94551), 
LMul92191 = multiply_layer([[[[0.6692], [0.9646]]], [[[0.7977], [0.4081]]]], Mul92191), 
LZer12082 = zero_padding1D_layer(Mul92191, 6, 0, Zer12082), 
LMax9297 = maximum_layer([Res94551,Zer12082], Max9297), 
exec_layers([LELU81946,LRes34378,LZer36533,LMin53744,LSub80869,LRes61976,LRes94394,LFla79131,LCon94164,LAdd42971,LRes13644,LRes5640,LFla35224,LGlo4037,LCon55809,LSub1421,LAve81819,LRes94551,LMul92191,LZer12082,LMax9297],["ELU81946","Res34378","Zer36533","Min53744","Sub80869","Res61976","Res94394","Fla79131","Con94164","Add42971","Res13644","Res5640","Fla35224","Glo4037","Con55809","Sub1421","Ave81819","Res94551","Mul92191","Zer12082","Max9297"],Max9297,"Max9297")

Actual (Unparsed): [[[0.0000000], [0.0753500], [0.0000000], [0.1461500], [0.4162500], [0.2824500], [0.5338208], [0.5114500]]]

Expected (Unparsed): [[[0],[0.07535000000000003],[0],[0.14614999999999997],[0.41624999999999995],[0.28245000000000003],[0.53382084],[0.51145]]]

Actual:   [[[0], [0.0754], [0], [0.1462], [0.4163], [0.2825], [0.5339], [0.5115]]]

Expected: [[[0], [0.0754], [0], [0.1462], [0.4163], [0.2825], [0.5339], [0.5115]]]