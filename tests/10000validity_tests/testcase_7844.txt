import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min34742 = tf.keras.layers.Input(shape=([1, 2]))
in1Min34742 = tf.keras.layers.Input(shape=([1, 2]))
in0Con74882 = tf.keras.layers.Input(shape=([1, 2, 3, 1]))
in0Min76879 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Min76879 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Max71771 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Dot75461 = tf.keras.layers.Input(shape=([2]))
in1Dot75461 = tf.keras.layers.Input(shape=([2]))
in0Glo58903 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con72685 = tf.keras.layers.Input(shape=([3]))
in0Con41771 = tf.keras.layers.Input(shape=([8]))

Min34742 = keras.layers.Minimum(name = 'Min34742', )([in0Min34742,in1Min34742])
Res24447 = keras.layers.Reshape((1, 2, 1), name = 'Res24447', )(Min34742)
Res19889 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res19889', )(Res24447)
Zer78061 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer78061', )(Res19889)
Con74882 = keras.layers.Concatenate(axis=4, name = 'Con74882', )([Zer78061,in0Con74882])
Min76879 = keras.layers.Minimum(name = 'Min76879', )([in0Min76879,in1Min76879])
Zer93386 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer93386', )(Min76879)
Mul32763 = keras.layers.Multiply(name = 'Mul32763', )([Con74882,Zer93386])
Res37320 = keras.layers.Reshape((1, 2, 6), name = 'Res37320', )(Mul32763)
Res69251 = keras.layers.Reshape((1, 12), name = 'Res69251', )(Res37320)
Fla8735 = keras.layers.Flatten(name = 'Fla8735', )(Res69251)
Max71771 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(1, 1), padding='same', name = 'Max71771', )(in0Max71771)
Res69583 = keras.layers.Reshape((2, 2), name = 'Res69583', )(Max71771)
Fla82763 = keras.layers.Flatten(name = 'Fla82763', )(Res69583)
Dot75461 = keras.layers.Dot(axes=(1, 1), name = 'Dot75461', )([in0Dot75461,in1Dot75461])
Glo58903 = keras.layers.GlobalAveragePooling2D(name = 'Glo58903', )(in0Glo58903)
Mas32875 = keras.layers.Masking(mask_value=1, name = 'Mas32875', )(Glo58903)
Ave57198 = keras.layers.Average(name = 'Ave57198', )([Dot75461,Mas32875])
Con72685 = keras.layers.Concatenate(axis=1, name = 'Con72685', )([Ave57198,in0Con72685])
Ave21731 = keras.layers.Average(name = 'Ave21731', )([Fla82763,Con72685])
Con41771 = keras.layers.Concatenate(axis=1, name = 'Con41771', )([Ave21731,in0Con41771])
Sub88347 = keras.layers.Subtract(name = 'Sub88347', )([Fla8735,Con41771])
model = tf.keras.models.Model(inputs=[in0Min34742,in1Min34742,in0Con74882,in0Min76879,in1Min76879,in0Max71771,in0Dot75461,in1Dot75461,in0Glo58903,in0Con72685,in0Con41771], outputs=Sub88347)
in0Min34742 = tf.constant([[[0.8494, 0.1849]]])
in1Min34742 = tf.constant([[[0.8157, 0.0709]]])
in0Con74882 = tf.constant([[[[[0.6238], [0.8384], [0.7757]], [[0.222], [0.8318], [0.9841]]]]])
in0Min76879 = tf.constant([[[[[0.3132, 0.0913], [0.37, 0.3506]]]]])
in1Min76879 = tf.constant([[[[[0.5162, 0.804], [0.0259, 0.4497]]]]])
in0Max71771 = tf.constant([[[[1.7014, 1.7278]], [[1.8359, 1.6395]]]])
in0Dot75461 = tf.constant([[0.1652, 0.9127]])
in1Dot75461 = tf.constant([[0.7631, 0.2315]])
in0Glo58903 = tf.constant([[[[1.0881], [1.1039]]]])
in0Con72685 = tf.constant([[0.4371, 0.6305, 0.731]])
in0Con41771 = tf.constant([[0.2314, 0.1934, 0.8285, 0.5339, 0.1718, 0.9044, 0.8089, 0.1262]])
print (np.array2string(model.predict([in0Min34742,in1Min34742,in0Con74882,in0Min76879,in1Min76879,in0Max71771,in0Dot75461,in1Dot75461,in0Glo58903,in0Con72685,in0Con41771],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub88347.png')

LMin34742 = minimum_layer([[[[0.8494, 0.1849]]], [[[0.8157, 0.0709]]]], Min34742), 
LRes24447 = reshape_layer(Min34742, [1, 2, 1], Res24447), 
LRes19889 = reshape_layer(Res24447, [1, 2, 1, 1], Res19889), 
LZer78061 = zero_padding3D_layer(Res19889, 0, 0, 0, 0, 2, 0, Zer78061), 
LCon74882 = concatenate_layer([Zer78061,[[[[[0.6238], [0.8384], [0.7757]], [[0.222], [0.8318], [0.9841]]]]]], 4, Con74882), 
LMin76879 = minimum_layer([[[[[[0.3132, 0.0913], [0.37, 0.3506]]]]], [[[[[0.5162, 0.804], [0.0259, 0.4497]]]]]], Min76879), 
LZer93386 = zero_padding3D_layer(Min76879, 0, 0, 1, 0, 1, 0, Zer93386), 
LMul32763 = multiply_layer([Con74882,Zer93386], Mul32763), 
LRes37320 = reshape_layer(Mul32763, [1, 2, 6], Res37320), 
LRes69251 = reshape_layer(Res37320, [1, 12], Res69251), 
LFla8735 = flatten_layer(Res69251, Fla8735), 
LMax71771 = max_pool2D_layer([[[[1.7014, 1.7278]], [[1.8359, 1.6395]]]], 2, 1, 1, 1, true, Max71771), 
LRes69583 = reshape_layer(Max71771, [2, 2], Res69583), 
LFla82763 = flatten_layer(Res69583, Fla82763), 
LDot75461 = dot_layer([[0.1652, 0.9127]], [[0.7631, 0.2315]], 1, 1, Dot75461), 
LGlo58903 = global_average_pooling2D_layer([[[[1.0881], [1.1039]]]], Glo58903), 
LMas32875 = masking_layer(Glo58903, 1, Mas32875), 
LAve57198 = average_layer([Dot75461,Mas32875], Ave57198), 
LCon72685 = concatenate_layer([Ave57198,[[0.4371, 0.6305, 0.731]]], 1, Con72685), 
LAve21731 = average_layer([Fla82763,Con72685], Ave21731), 
LCon41771 = concatenate_layer([Ave21731,[[0.2314, 0.1934, 0.8285, 0.5339, 0.1718, 0.9044, 0.8089, 0.1262]]], 1, Con41771), 
LSub88347 = subtract_layer(Fla8735,Con41771, Sub88347), 
exec_layers([LMin34742,LRes24447,LRes19889,LZer78061,LCon74882,LMin76879,LZer93386,LMul32763,LRes37320,LRes69251,LFla8735,LMax71771,LRes69583,LFla82763,LDot75461,LGlo58903,LMas32875,LAve57198,LCon72685,LAve21731,LCon41771,LSub88347],["Min34742","Res24447","Res19889","Zer78061","Con74882","Min76879","Zer93386","Mul32763","Res37320","Res69251","Fla8735","Max71771","Res69583","Fla82763","Dot75461","Glo58903","Mas32875","Ave57198","Con72685","Ave21731","Con41771","Sub88347"],Sub88347,"Sub88347")

Actual (Unparsed): [[-1.2762885, -1.0824500, -1.2332000, -1.1852500, -0.2314000, -0.1934000, -0.8285000, -0.5339000, -0.1718000, -0.8284566, -0.8070637, 0.2188255]]

Expected (Unparsed): [[-1.2762885425000001,-1.08245,-1.2332,-1.18525,-0.2314,-0.1934,-0.8285,-0.5339,-0.1718,-0.82845666,-0.80706369,0.21882546]]

Actual:   [[-1.2762, -1.0824, -1.2332, -1.1852, -0.2314, -0.1934, -0.8285, -0.5339, -0.1718, -0.8284, -0.807, 0.2189]]

Expected: [[-1.2762, -1.0824, -1.2332, -1.1852, -0.2314, -0.1934, -0.8285, -0.5339, -0.1718, -0.8284, -0.807, 0.2189]]