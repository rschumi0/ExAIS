import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo31928 = tf.keras.layers.Input(shape=([2, 2]))
in0Min67684 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Min67684 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Glo57319 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con4692 = tf.keras.layers.Input(shape=([1]))

Glo31928 = keras.layers.GlobalAveragePooling1D(name = 'Glo31928', )(in0Glo31928)
Res6069 = keras.layers.Reshape((2, 1), name = 'Res6069', )(Glo31928)
Up_13246 = keras.layers.UpSampling1D(size=(1), name = 'Up_13246', )(Res6069)
Res25759 = keras.layers.Reshape((2, 1, 1), name = 'Res25759', )(Up_13246)
Res22593 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res22593', )(Res25759)
Min67684 = keras.layers.Minimum(name = 'Min67684', )([in0Min67684,in1Min67684])
Max36372 = keras.layers.Maximum(name = 'Max36372', )([Res22593,Min67684])
Res43654 = keras.layers.Reshape((2, 1, 1), name = 'Res43654', )(Max36372)
Res5279 = keras.layers.Reshape((2, 1), name = 'Res5279', )(Res43654)
Fla15710 = keras.layers.Flatten(name = 'Fla15710', )(Res5279)
Glo57319 = keras.layers.GlobalAveragePooling2D(name = 'Glo57319', )(in0Glo57319)
Con4692 = keras.layers.Concatenate(axis=1, name = 'Con4692', )([Glo57319,in0Con4692])
Min60149 = keras.layers.Minimum(name = 'Min60149', )([Fla15710,Con4692])
Res43215 = keras.layers.Reshape((2, 1), name = 'Res43215', )(Min60149)
Res65973 = keras.layers.Reshape((2, 1, 1), name = 'Res65973', )(Res43215)
Max48832 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max48832', )(Res65973)
model = tf.keras.models.Model(inputs=[in0Glo31928,in0Min67684,in1Min67684,in0Glo57319,in0Con4692], outputs=Max48832)
in0Glo31928 = tf.constant([[[1.2854, 1.8625], [1.7706, 1.0099]]])
in0Min67684 = tf.constant([[[[[0.1226]]], [[[0.8587]]]]])
in1Min67684 = tf.constant([[[[[0.9111]]], [[[0.7094]]]]])
in0Glo57319 = tf.constant([[[[1.8209], [1.0469]]]])
in0Con4692 = tf.constant([[0.7427]])
print (np.array2string(model.predict([in0Glo31928,in0Min67684,in1Min67684,in0Glo57319,in0Con4692],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max48832.png')

LGlo31928 = global_average_pooling1D_layer([[[1.2854, 1.8625], [1.7706, 1.0099]]], Glo31928), 
LRes6069 = reshape_layer(Glo31928, [2, 1], Res6069), 
LUp_13246 = up_sampling1D_layer(Res6069, 1, Up_13246), 
LRes25759 = reshape_layer(Up_13246, [2, 1, 1], Res25759), 
LRes22593 = reshape_layer(Res25759, [2, 1, 1, 1], Res22593), 
LMin67684 = minimum_layer([[[[[[0.1226]]], [[[0.8587]]]]], [[[[[0.9111]]], [[[0.7094]]]]]], Min67684), 
LMax36372 = maximum_layer([Res22593,Min67684], Max36372), 
LRes43654 = reshape_layer(Max36372, [2, 1, 1], Res43654), 
LRes5279 = reshape_layer(Res43654, [2, 1], Res5279), 
LFla15710 = flatten_layer(Res5279, Fla15710), 
LGlo57319 = global_average_pooling2D_layer([[[[1.8209], [1.0469]]]], Glo57319), 
LCon4692 = concatenate_layer([Glo57319,[[0.7427]]], 1, Con4692), 
LMin60149 = minimum_layer([Fla15710,Con4692], Min60149), 
LRes43215 = reshape_layer(Min60149, [2, 1], Res43215), 
LRes65973 = reshape_layer(Res43215, [2, 1, 1], Res65973), 
LMax48832 = max_pool2D_layer(Res65973, 1, 1, Max48832), 
exec_layers([LGlo31928,LRes6069,LUp_13246,LRes25759,LRes22593,LMin67684,LMax36372,LRes43654,LRes5279,LFla15710,LGlo57319,LCon4692,LMin60149,LRes43215,LRes65973,LMax48832],["Glo31928","Res6069","Up_13246","Res25759","Res22593","Min67684","Max36372","Res43654","Res5279","Fla15710","Glo57319","Con4692","Min60149","Res43215","Res65973","Max48832"],Max48832,"Max48832")

Actual (Unparsed): [[[[1.4339000]], [[0.7427000]]]]

Expected (Unparsed): [[[[1.4339]],[[0.7427]]]]

Actual:   [[[[1.4339]], [[0.7427]]]]

Expected: [[[[1.4339]], [[0.7427]]]]