import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave55042 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave55042 = keras.layers.AveragePooling2D(pool_size=(2, 2), strides=(6, 9), padding='valid', name = 'Ave55042', )(in0Ave55042)
Res39430 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res39430', )(Ave55042)
Up_8612 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_8612', )(Res39430)
Res11140 = keras.layers.Reshape((2, 2, 2), name = 'Res11140', )(Up_8612)
Loc74942 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(1, 1), name = 'Loc74942', )(Res11140)
model = tf.keras.models.Model(inputs=[in0Ave55042], outputs=Loc74942)
w = model.get_layer('Loc74942').get_weights() 
w[0] = np.array([[[0.0712, 0.9102], [0.046, 0.6035], [0.1082, 0.9709], [0.1581, 0.1591]], [[0.6251, 0.7809], [0.863, 0.9968], [0.9463, 0.938], [0.1962, 0.0316]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc74942').set_weights(w) 
in0Ave55042 = tf.constant([[[[1.3256, 1.6987], [1.8458, 1.5356]], [[1.5461, 1.5506], [1.3331, 1.2988]]]])
print (np.array2string(model.predict([in0Ave55042],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc74942.png')

LAve55042 = average_pooling2D_layer([[[[1.3256, 1.6987], [1.8458, 1.5356]], [[1.5461, 1.5506], [1.3331, 1.2988]]]], 2, 2, 6, 9, false, Ave55042), 
LRes39430 = reshape_layer(Ave55042, [1, 1, 2, 1], Res39430), 
LUp_8612 = up_sampling3D_layer(Res39430, 2, 2, 1, Up_8612), 
LRes11140 = reshape_layer(Up_8612, [2, 2, 2], Res11140), 
LLoc74942 = locally_connected2D_layer(Res11140, 1, 2,[[[0.0712, 0.9102], [0.046, 0.6035], [0.1082, 0.9709], [0.1581, 0.1591]], [[0.6251, 0.7809], [0.863, 0.9968], [0.9463, 0.938], [0.1962, 0.0316]]],[[[0, 0]], [[0, 0]]], 1, 1, Loc74942), 
exec_layers([LAve55042,LRes39430,LUp_8612,LRes11140,LLoc74942],["Ave55042","Res39430","Up_8612","Res11140","Loc74942"],Loc74942,"Loc74942")

Actual (Unparsed): [[[[0.5817902, 4.0053033]], [[3.9879420, 4.1642134]]]]

Expected (Unparsed): [[[[0.5817902025,4.0053033199999994]],[[3.9879419699999996,4.164213354999999]]]]

Actual:   [[[[0.5818, 4.0054]], [[3.988, 4.1643]]]]

Expected: [[[[0.5818, 4.0054]], [[3.988, 4.1643]]]]