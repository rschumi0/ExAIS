import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot29084 = tf.keras.layers.Input(shape=([2]))
in1Dot29084 = tf.keras.layers.Input(shape=([2]))
in0Con35672 = tf.keras.layers.Input(shape=([1, 23]))
in0Max20813 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max20813 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Mul44111 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul44111 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con19110 = tf.keras.layers.Input(shape=([3, 6, 2, 1]))
in0Sub15122 = tf.keras.layers.Input(shape=([3, 2, 2, 2]))
in1Sub15122 = tf.keras.layers.Input(shape=([3, 2, 2, 2]))

Dot29084 = keras.layers.Dot(axes=(1, 1), name = 'Dot29084', )([in0Dot29084,in1Dot29084])
Res11923 = keras.layers.Reshape((1, 1), name = 'Res11923', )(Dot29084)
Max74997 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max74997', )(Res11923)
Con35672 = keras.layers.Concatenate(axis=2, name = 'Con35672', )([Max74997,in0Con35672])
Max20813 = keras.layers.Maximum(name = 'Max20813', )([in0Max20813,in1Max20813])
Res11713 = keras.layers.Reshape((1, 2), name = 'Res11713', )(Max20813)
Mul44111 = keras.layers.Multiply(name = 'Mul44111', )([in0Mul44111,in1Mul44111])
Res93330 = keras.layers.Reshape((1, 2, 2), name = 'Res93330', )(Mul44111)
Res79048 = keras.layers.Reshape((1, 4), name = 'Res79048', )(Res93330)
Dot34239 = keras.layers.Dot(axes=(1, 1), name = 'Dot34239', )([Res11713,Res79048])
Res49263 = keras.layers.Reshape((2, 4, 1), name = 'Res49263', )(Dot34239)
Res56463 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res56463', )(Res49263)
Zer20480 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (1, 0)), name = 'Zer20480', )(Res56463)
Con19110 = keras.layers.Concatenate(axis=4, name = 'Con19110', )([Zer20480,in0Con19110])
Sub15122 = keras.layers.Subtract(name = 'Sub15122', )([in0Sub15122,in1Sub15122])
Zer66593 = keras.layers.ZeroPadding3D(padding=((0, 0), (4, 0), (0, 0)), name = 'Zer66593', )(Sub15122)
Add12888 = keras.layers.Add(name = 'Add12888', )([Con19110,Zer66593])
Res11263 = keras.layers.Reshape((3, 6, 4), name = 'Res11263', )(Add12888)
Res59346 = keras.layers.Reshape((3, 24), name = 'Res59346', )(Res11263)
Zer54070 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer54070', )(Res59346)
Dot34272 = keras.layers.Dot(axes=(2, 2), name = 'Dot34272', )([Con35672,Zer54070])
model = tf.keras.models.Model(inputs=[in0Dot29084,in1Dot29084,in0Con35672,in0Max20813,in1Max20813,in0Mul44111,in1Mul44111,in0Con19110,in0Sub15122,in1Sub15122], outputs=Dot34272)
in0Dot29084 = tf.constant([[0.4345, 0.7718]])
in1Dot29084 = tf.constant([[0.9787, 0.5587]])
in0Con35672 = tf.constant([[[0.3801, 0.1058, 0.2773, 0.2571, 0.5155, 0.1139, 0.5195, 0.1048, 0.5895, 0.1326, 0.9065, 0.5551, 0.029, 0.8379, 0.0096, 0.7467, 0.6607, 0.0045, 0.7367, 0.9235, 0.8238, 0.9256, 0.7944]]])
in0Max20813 = tf.constant([[[[0.8299], [0.939]]]])
in1Max20813 = tf.constant([[[[0.9435], [0.1784]]]])
in0Mul44111 = tf.constant([[[[[0.6209], [0.1912]], [[0.2567], [0.5803]]]]])
in1Mul44111 = tf.constant([[[[[0.2972], [0.042]], [[0.0715], [0.2832]]]]])
in0Con19110 = tf.constant([[[[[0.6001], [0.8295]], [[0.1188], [0.1875]], [[0.997], [0.6959]], [[0.9818], [0.7728]], [[0.244], [0.8112]], [[0.5904], [0.2319]]], [[[0.2479], [0.5785]], [[0.7524], [0.5439]], [[0.4944], [0.5224]], [[0.0396], [0.2078]], [[0.7939], [0.0138]], [[0.6027], [0.2359]]], [[[0.7237], [0.1711]], [[0.354], [0.0725]], [[0.7164], [0.2639]], [[0.0769], [0.8473]], [[0.0629], [0.7738]], [[0.1664], [0.1498]]]]])
in0Sub15122 = tf.constant([[[[[0.2173, 0.0049], [0.6139, 0.2982]], [[0.717, 0.3248], [0.0248, 0.7475]]], [[[0.7798, 0.6485], [0.5228, 0.7557]], [[0.4869, 0.5762], [0.1643, 0.4192]]], [[[0.4684, 0.457], [0.3803, 0.5974]], [[0.6217, 0.4978], [0.8968, 0.9881]]]]])
in1Sub15122 = tf.constant([[[[[0.4315, 0.238], [0.6106, 0.4522]], [[0.3302, 0.71], [0.4831, 0.8334]]], [[[0.6698, 0.1553], [0.5394, 0.5824]], [[0.0427, 0.9906], [0.6185, 0.3415]]], [[[0.8843, 0.8334], [0.6028, 0.2689]], [[0.5182, 0.7848], [0.4765, 0.2907]]]]])
print (np.array2string(model.predict([in0Dot29084,in1Dot29084,in0Con35672,in0Max20813,in1Max20813,in0Mul44111,in1Mul44111,in0Con19110,in0Sub15122,in1Sub15122],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot34272.png')

LDot29084 = dot_layer([[0.4345, 0.7718]], [[0.9787, 0.5587]], 1, 1, Dot29084), 
LRes11923 = reshape_layer(Dot29084, [1, 1], Res11923), 
LMax74997 = max_pool1D_layer(Res11923, 1, Max74997), 
LCon35672 = concatenate_layer([Max74997,[[[0.3801, 0.1058, 0.2773, 0.2571, 0.5155, 0.1139, 0.5195, 0.1048, 0.5895, 0.1326, 0.9065, 0.5551, 0.029, 0.8379, 0.0096, 0.7467, 0.6607, 0.0045, 0.7367, 0.9235, 0.8238, 0.9256, 0.7944]]]], 2, Con35672), 
LMax20813 = maximum_layer([[[[[0.8299], [0.939]]]], [[[[0.9435], [0.1784]]]]], Max20813), 
LRes11713 = reshape_layer(Max20813, [1, 2], Res11713), 
LMul44111 = multiply_layer([[[[[[0.6209], [0.1912]], [[0.2567], [0.5803]]]]], [[[[[0.2972], [0.042]], [[0.0715], [0.2832]]]]]], Mul44111), 
LRes93330 = reshape_layer(Mul44111, [1, 2, 2], Res93330), 
LRes79048 = reshape_layer(Res93330, [1, 4], Res79048), 
LDot34239 = dot_layer(Res11713,Res79048, 1, 1, Dot34239), 
LRes49263 = reshape_layer(Dot34239, [2, 4, 1], Res49263), 
LRes56463 = reshape_layer(Res49263, [2, 4, 1, 1], Res56463), 
LZer20480 = zero_padding3D_layer(Res56463, 1, 0, 2, 0, 1, 0, Zer20480), 
LCon19110 = concatenate_layer([Zer20480,[[[[[0.6001], [0.8295]], [[0.1188], [0.1875]], [[0.997], [0.6959]], [[0.9818], [0.7728]], [[0.244], [0.8112]], [[0.5904], [0.2319]]], [[[0.2479], [0.5785]], [[0.7524], [0.5439]], [[0.4944], [0.5224]], [[0.0396], [0.2078]], [[0.7939], [0.0138]], [[0.6027], [0.2359]]], [[[0.7237], [0.1711]], [[0.354], [0.0725]], [[0.7164], [0.2639]], [[0.0769], [0.8473]], [[0.0629], [0.7738]], [[0.1664], [0.1498]]]]]], 4, Con19110), 
LSub15122 = subtract_layer([[[[[0.2173, 0.0049], [0.6139, 0.2982]], [[0.717, 0.3248], [0.0248, 0.7475]]], [[[0.7798, 0.6485], [0.5228, 0.7557]], [[0.4869, 0.5762], [0.1643, 0.4192]]], [[[0.4684, 0.457], [0.3803, 0.5974]], [[0.6217, 0.4978], [0.8968, 0.9881]]]]], [[[[[0.4315, 0.238], [0.6106, 0.4522]], [[0.3302, 0.71], [0.4831, 0.8334]]], [[[0.6698, 0.1553], [0.5394, 0.5824]], [[0.0427, 0.9906], [0.6185, 0.3415]]], [[[0.8843, 0.8334], [0.6028, 0.2689]], [[0.5182, 0.7848], [0.4765, 0.2907]]]]], Sub15122), 
LZer66593 = zero_padding3D_layer(Sub15122, 0, 0, 4, 0, 0, 0, Zer66593), 
LAdd12888 = add_layer([Con19110,Zer66593], Add12888), 
LRes11263 = reshape_layer(Add12888, [3, 6, 4], Res11263), 
LRes59346 = reshape_layer(Res11263, [3, 24], Res59346), 
LZer54070 = zero_padding1D_layer(Res59346, 2, 0, Zer54070), 
LDot34272 = dot_layer(Con35672,Zer54070, 2, 2, Dot34272), 
exec_layers([LDot29084,LRes11923,LMax74997,LCon35672,LMax20813,LRes11713,LMul44111,LRes93330,LRes79048,LDot34239,LRes49263,LRes56463,LZer20480,LCon19110,LSub15122,LZer66593,LAdd12888,LRes11263,LRes59346,LZer54070,LDot34272],["Dot29084","Res11923","Max74997","Con35672","Max20813","Res11713","Mul44111","Res93330","Res79048","Dot34239","Res49263","Res56463","Zer20480","Con19110","Sub15122","Zer66593","Add12888","Res11263","Res59346","Zer54070","Dot34272"],Dot34272,"Dot34272")

Actual (Unparsed): [[[0.0000000, 0.0000000, 2.4206881, 3.3305856, 2.7384481]]]

Expected (Unparsed): [[[0.0,0.0,2.420688,3.3305855337391916,2.7384480801442512]]]

Actual:   [[[0, 0, 2.4207, 3.3306, 2.7385]]]

Expected: [[[0, 0, 2.4207, 3.3306, 2.7385]]]