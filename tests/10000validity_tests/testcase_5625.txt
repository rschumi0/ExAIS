import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave20030 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Ave20030 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Add51082 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add51082 = tf.keras.layers.Input(shape=([1, 1, 1]))

Ave20030 = keras.layers.Average(name = 'Ave20030', )([in0Ave20030,in1Ave20030])
Res47897 = keras.layers.Reshape((1, 2, 2), name = 'Res47897', )(Ave20030)
Glo60185 = keras.layers.GlobalAveragePooling2D(name = 'Glo60185', )(Res47897)
Res10204 = keras.layers.Reshape((2, 1), name = 'Res10204', )(Glo60185)
Add51082 = keras.layers.Add(name = 'Add51082', )([in0Add51082,in1Add51082])
Res41594 = keras.layers.Reshape((1, 1), name = 'Res41594', )(Add51082)
Cro31502 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro31502', )(Res41594)
Zer33747 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer33747', )(Cro31502)
Max48344 = keras.layers.Maximum(name = 'Max48344', )([Res10204,Zer33747])
model = tf.keras.models.Model(inputs=[in0Ave20030,in1Ave20030,in0Add51082,in1Add51082], outputs=Max48344)
in0Ave20030 = tf.constant([[[[[0.4633], [0.917]], [[0.2791], [0.181]]]]])
in1Ave20030 = tf.constant([[[[[0.7859], [0.709]], [[0.7922], [0.5401]]]]])
in0Add51082 = tf.constant([[[[0.4299]]]])
in1Add51082 = tf.constant([[[[0.4984]]]])
print (np.array2string(model.predict([in0Ave20030,in1Ave20030,in0Add51082,in1Add51082],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max48344.png')

LAve20030 = average_layer([[[[[[0.4633], [0.917]], [[0.2791], [0.181]]]]], [[[[[0.7859], [0.709]], [[0.7922], [0.5401]]]]]], Ave20030), 
LRes47897 = reshape_layer(Ave20030, [1, 2, 2], Res47897), 
LGlo60185 = global_average_pooling2D_layer(Res47897, Glo60185), 
LRes10204 = reshape_layer(Glo60185, [2, 1], Res10204), 
LAdd51082 = add_layer([[[[[0.4299]]]], [[[[0.4984]]]]], Add51082), 
LRes41594 = reshape_layer(Add51082, [1, 1], Res41594), 
LCro31502 = cropping1D_layer(Res41594, 0, 0, Cro31502), 
LZer33747 = zero_padding1D_layer(Cro31502, 1, 0, Zer33747), 
LMax48344 = maximum_layer([Res10204,Zer33747], Max48344), 
exec_layers([LAve20030,LRes47897,LGlo60185,LRes10204,LAdd51082,LRes41594,LCro31502,LZer33747,LMax48344],["Ave20030","Res47897","Glo60185","Res10204","Add51082","Res41594","Cro31502","Zer33747","Max48344"],Max48344,"Max48344")

Actual (Unparsed): [[[0.5801250], [0.9283000]]]

Expected (Unparsed): [[[0.580125],[0.9283]]]

Actual:   [[[0.5802], [0.9283]]]

Expected: [[[0.5802], [0.9283]]]