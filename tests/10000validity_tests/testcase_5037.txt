import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul15152 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul15152 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Sub10633 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub10633 = tf.keras.layers.Input(shape=([2, 2]))
in0Con96267 = tf.keras.layers.Input(shape=([2, 2]))

Mul15152 = keras.layers.Multiply(name = 'Mul15152', )([in0Mul15152,in1Mul15152])
Res69790 = keras.layers.Reshape((1, 4), name = 'Res69790', )(Mul15152)
Zer45467 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer45467', )(Res69790)
Sub10633 = keras.layers.Subtract(name = 'Sub10633', )([in0Sub10633,in1Sub10633])
Con96267 = keras.layers.Concatenate(axis=2, name = 'Con96267', )([Sub10633,in0Con96267])
Mul20766 = keras.layers.Multiply(name = 'Mul20766', )([Zer45467,Con96267])
model = tf.keras.models.Model(inputs=[in0Mul15152,in1Mul15152,in0Sub10633,in1Sub10633,in0Con96267], outputs=Mul20766)
in0Mul15152 = tf.constant([[[[0.074, 0.4286], [0.0412, 0.0188]]]])
in1Mul15152 = tf.constant([[[[0.867, 0.3893], [0.2468, 0.9391]]]])
in0Sub10633 = tf.constant([[[0.2187, 0.9116], [0.3626, 0.1895]]])
in1Sub10633 = tf.constant([[[0.8116, 0.0556], [0.0628, 0.6551]]])
in0Con96267 = tf.constant([[[0.9637, 0.643], [0.3195, 0.0422]]])
print (np.array2string(model.predict([in0Mul15152,in1Mul15152,in0Sub10633,in1Sub10633,in0Con96267],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul20766.png')

LMul15152 = multiply_layer([[[[[0.074, 0.4286], [0.0412, 0.0188]]]], [[[[0.867, 0.3893], [0.2468, 0.9391]]]]], Mul15152), 
LRes69790 = reshape_layer(Mul15152, [1, 4], Res69790), 
LZer45467 = zero_padding1D_layer(Res69790, 1, 0, Zer45467), 
LSub10633 = subtract_layer([[[0.2187, 0.9116], [0.3626, 0.1895]]], [[[0.8116, 0.0556], [0.0628, 0.6551]]], Sub10633), 
LCon96267 = concatenate_layer([Sub10633,[[[0.9637, 0.643], [0.3195, 0.0422]]]], 2, Con96267), 
LMul20766 = multiply_layer([Zer45467,Con96267], Mul20766), 
exec_layers([LMul15152,LRes69790,LZer45467,LSub10633,LCon96267,LMul20766],["Mul15152","Res69790","Zer45467","Sub10633","Con96267","Mul20766"],Mul20766,"Mul20766")

Actual (Unparsed): [[[-0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0192346, -0.0776872, 0.0032487, 0.0007450]]]

Expected (Unparsed): [[[-0.0,0.0,0.0,0.0],[0.019234568399999995,-0.077687213088,0.00324872712,0.0007450443760000001]]]

Actual:   [[[-0, 0, 0, 0], [0.0193, -0.0776, 0.0033, 0.0008]]]

Expected: [[[-0, 0, 0, 0], [0.0193, -0.0776, 0.0033, 0.0008]]]