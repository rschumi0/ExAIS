import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo55397 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Con26445 = tf.keras.layers.Input(shape=([2, 8]))
in0Sub64693 = tf.keras.layers.Input(shape=([3]))
in1Sub64693 = tf.keras.layers.Input(shape=([3]))
in0Max26727 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Max26727 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Glo55397 = keras.layers.GlobalMaxPool3D(name = 'Glo55397', )(in0Glo55397)
Res15179 = keras.layers.Reshape((2, 1), name = 'Res15179', )(Glo55397)
Con26445 = keras.layers.Concatenate(axis=2, name = 'Con26445', )([Res15179,in0Con26445])
Sub64693 = keras.layers.Subtract(name = 'Sub64693', )([in0Sub64693,in1Sub64693])
Res41254 = keras.layers.Reshape((3, 1), name = 'Res41254', )(Sub64693)
Res54396 = keras.layers.Reshape((3, 1, 1), name = 'Res54396', )(Res41254)
Zer99134 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer99134', )(Res54396)
Res34624 = keras.layers.Reshape((5, 3, 1, 1), name = 'Res34624', )(Zer99134)
Zer35389 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer35389', )(Res34624)
Max26727 = keras.layers.Maximum(name = 'Max26727', )([in0Max26727,in1Max26727])
Zer50053 = keras.layers.ZeroPadding3D(padding=((3, 0), (1, 0), (1, 0)), name = 'Zer50053', )(Max26727)
Add38625 = keras.layers.Add(name = 'Add38625', )([Zer35389,Zer50053])
Res81835 = keras.layers.Reshape((5, 3, 3), name = 'Res81835', )(Add38625)
Res5400 = keras.layers.Reshape((5, 9), name = 'Res5400', )(Res81835)
Cro62240 = keras.layers.Cropping1D(cropping=((4, 0)), name = 'Cro62240', )(Res5400)
Zer64493 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer64493', )(Cro62240)
Sub4900 = keras.layers.Subtract(name = 'Sub4900', )([Con26445,Zer64493])
Res85131 = keras.layers.Reshape((2, 9, 1), name = 'Res85131', )(Sub4900)
Cro23634 = keras.layers.Cropping2D(cropping=((0, 1), (6, 1)), name = 'Cro23634', )(Res85131)
model = tf.keras.models.Model(inputs=[in0Glo55397,in0Con26445,in0Sub64693,in1Sub64693,in0Max26727,in1Max26727], outputs=Cro23634)
in0Glo55397 = tf.constant([[[[[1.9041, 1.3191], [1.7001, 1.6473]]], [[[1.0842, 1.7687], [1.4175, 1.9065]]]]])
in0Con26445 = tf.constant([[[0.3817, 0.1407, 0.9893, 0.9733, 0.0169, 0.0548, 0.6317, 0.444], [0.7138, 0.3077, 0.6089, 0.3961, 0.1887, 0.5085, 0.3252, 0.9603]]])
in0Sub64693 = tf.constant([[0.6342, 0.8305, 0.972]])
in1Sub64693 = tf.constant([[0.6834, 0.6361, 0.1391]])
in0Max26727 = tf.constant([[[[[0.5747], [0.9118]], [[0.4748], [0.1983]]], [[[0.8799], [0.0463]], [[0.6266], [0.1717]]]]])
in1Max26727 = tf.constant([[[[[0.3166], [0.8769]], [[0.3444], [0.3952]]], [[[0.7046], [0.8265]], [[0.8846], [0.4404]]]]])
print (np.array2string(model.predict([in0Glo55397,in0Con26445,in0Sub64693,in1Sub64693,in0Max26727,in1Max26727],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro23634.png')

LGlo55397 = global_max_pool3D_layer([[[[[1.9041, 1.3191], [1.7001, 1.6473]]], [[[1.0842, 1.7687], [1.4175, 1.9065]]]]], Glo55397), 
LRes15179 = reshape_layer(Glo55397, [2, 1], Res15179), 
LCon26445 = concatenate_layer([Res15179,[[[0.3817, 0.1407, 0.9893, 0.9733, 0.0169, 0.0548, 0.6317, 0.444], [0.7138, 0.3077, 0.6089, 0.3961, 0.1887, 0.5085, 0.3252, 0.9603]]]], 2, Con26445), 
LSub64693 = subtract_layer([[0.6342, 0.8305, 0.972]], [[0.6834, 0.6361, 0.1391]], Sub64693), 
LRes41254 = reshape_layer(Sub64693, [3, 1], Res41254), 
LRes54396 = reshape_layer(Res41254, [3, 1, 1], Res54396), 
LZer99134 = zero_padding2D_layer(Res54396, 1, 1, 1, 1, Zer99134), 
LRes34624 = reshape_layer(Zer99134, [5, 3, 1, 1], Res34624), 
LZer35389 = zero_padding3D_layer(Res34624, 0, 0, 0, 0, 2, 0, Zer35389), 
LMax26727 = maximum_layer([[[[[[0.5747], [0.9118]], [[0.4748], [0.1983]]], [[[0.8799], [0.0463]], [[0.6266], [0.1717]]]]], [[[[[0.3166], [0.8769]], [[0.3444], [0.3952]]], [[[0.7046], [0.8265]], [[0.8846], [0.4404]]]]]], Max26727), 
LZer50053 = zero_padding3D_layer(Max26727, 3, 0, 1, 0, 1, 0, Zer50053), 
LAdd38625 = add_layer([Zer35389,Zer50053], Add38625), 
LRes81835 = reshape_layer(Add38625, [5, 3, 3], Res81835), 
LRes5400 = reshape_layer(Res81835, [5, 9], Res5400), 
LCro62240 = cropping1D_layer(Res5400, 4, 0, Cro62240), 
LZer64493 = zero_padding1D_layer(Cro62240, 1, 0, Zer64493), 
LSub4900 = subtract_layer(Con26445,Zer64493, Sub4900), 
LRes85131 = reshape_layer(Sub4900, [2, 9, 1], Res85131), 
LCro23634 = cropping2D_layer(Res85131, 0, 1, 6, 1, Cro23634), 
exec_layers([LGlo55397,LRes15179,LCon26445,LSub64693,LRes41254,LRes54396,LZer99134,LRes34624,LZer35389,LMax26727,LZer50053,LAdd38625,LRes81835,LRes5400,LCro62240,LZer64493,LSub4900,LRes85131,LCro23634],["Glo55397","Res15179","Con26445","Sub64693","Res41254","Res54396","Zer99134","Res34624","Zer35389","Max26727","Zer50053","Add38625","Res81835","Res5400","Cro62240","Zer64493","Sub4900","Res85131","Cro23634"],Cro23634,"Cro23634")

Actual (Unparsed): [[[[0.0548000], [0.6317000]]]]

Expected (Unparsed): [[[[0.0548],[0.6317]]]]

Actual:   [[[[0.0548], [0.6317]]]]

Expected: [[[[0.0548], [0.6317]]]]