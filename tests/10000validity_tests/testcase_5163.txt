import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot56680 = tf.keras.layers.Input(shape=([2]))
in1Dot56680 = tf.keras.layers.Input(shape=([2]))

Dot56680 = keras.layers.Dot(axes=(1, 1), name = 'Dot56680', )([in0Dot56680,in1Dot56680])
Mas93701 = keras.layers.Masking(mask_value=1, name = 'Mas93701', )(Dot56680)
Res69682 = keras.layers.Reshape((1, 1), name = 'Res69682', )(Mas93701)
Max41935 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max41935', )(Res69682)
model = tf.keras.models.Model(inputs=[in0Dot56680,in1Dot56680], outputs=Max41935)
in0Dot56680 = tf.constant([[0.8537, 0.8201]])
in1Dot56680 = tf.constant([[0.7965, 0.5264]])
print (np.array2string(model.predict([in0Dot56680,in1Dot56680],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max41935.png')

LDot56680 = dot_layer([[0.8537, 0.8201]], [[0.7965, 0.5264]], 1, 1, Dot56680), 
LMas93701 = masking_layer(Dot56680, 1, Mas93701), 
LRes69682 = reshape_layer(Mas93701, [1, 1], Res69682), 
LMax41935 = max_pool1D_layer(Res69682, 1, Max41935), 
exec_layers([LDot56680,LMas93701,LRes69682,LMax41935],["Dot56680","Mas93701","Res69682","Max41935"],Max41935,"Max41935")

Actual (Unparsed): [[[1.1116727]]]

Expected (Unparsed): [[[1.11167269]]]

Actual:   [[[1.1117]]]

Expected: [[[1.1117]]]