import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot86257 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot86257 = tf.keras.layers.Input(shape=([3, 2]))
in0Lay39830 = tf.keras.layers.Input(shape=([4, 3]))

Dot86257 = keras.layers.Dot(axes=(2, 2), name = 'Dot86257', )([in0Dot86257,in1Dot86257])
Res90890 = keras.layers.Reshape((3, 3, 1), name = 'Res90890', )(Dot86257)
Up_72251 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_72251', )(Res90890)
ELU40227 = keras.layers.ELU(alpha=-5.803129054280114, name = 'ELU40227', )(Up_72251)
Res32673 = keras.layers.Reshape((3, 3), name = 'Res32673', )(ELU40227)
Lay39830 = keras.layers.LayerNormalization(axis=1, epsilon=1.9392006906055193, name = 'Lay39830', )(in0Lay39830)
Dot81342 = keras.layers.Dot(axes=(1, 2), name = 'Dot81342', )([Res32673,Lay39830])
model = tf.keras.models.Model(inputs=[in0Dot86257,in1Dot86257,in0Lay39830], outputs=Dot81342)
in0Dot86257 = tf.constant([[[0.884, 0.3472], [0.4711, 0.2028], [0.968, 0.4798]]])
in1Dot86257 = tf.constant([[[0.1312, 0.2354], [0.489, 0.0965], [0.4827, 0.256]]])
in0Lay39830 = tf.constant([[[1.9122, 1.574, 1.6586], [1.365, 1.1878, 1.8228], [1.8219, 1.178, 1.8557], [1.3324, 1.4281, 1.1913]]])
print (np.array2string(model.predict([in0Dot86257,in1Dot86257,in0Lay39830],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot81342.png')

LDot86257 = dot_layer([[[0.884, 0.3472], [0.4711, 0.2028], [0.968, 0.4798]]], [[[0.1312, 0.2354], [0.489, 0.0965], [0.4827, 0.256]]], 2, 2, Dot86257), 
LRes90890 = reshape_layer(Dot86257, [3, 3, 1], Res90890), 
LUp_72251 = up_sampling2D_layer(Res90890, 1, 1, Up_72251), 
LELU40227 = elu_layer(Up_72251, -5.803129054280114, ELU40227), 
LRes32673 = reshape_layer(ELU40227, [3, 3], Res32673), 
LLay39830 = layer_normalization_layer([[[1.9122, 1.574, 1.6586], [1.365, 1.1878, 1.8228], [1.8219, 1.178, 1.8557], [1.3324, 1.4281, 1.1913]]], 1, 1.9392006906055193, Lay39830), 
LDot81342 = dot_layer(Res32673,Lay39830, 1, 2, Dot81342), 
exec_layers([LDot86257,LRes90890,LUp_72251,LELU40227,LRes32673,LLay39830,LDot81342],["Dot86257","Res90890","Up_72251","ELU40227","Res32673","Lay39830","Dot81342"],Dot81342,"Dot81342")

Actual (Unparsed): [[[0.0650737, -0.0136542, 0.0549055, -0.1063250], [0.1511049, -0.0374105, 0.1231043, -0.2367987], [0.1679799, -0.0397035, 0.1383026, -0.2665790]]]

Expected (Unparsed): [[[0.06507370603312905,-0.013654174414381479,0.054905487855844856,-0.1063250194745923],[0.1511048845076692,-0.03741051903360597,0.12310429726649623,-0.23679866274055916],[0.16797992943216788,-0.03970351699387571,0.13830261749896855,-0.2665790299372604]]]

Actual:   [[[0.0651, -0.0136, 0.055, -0.1063], [0.1512, -0.0374, 0.1232, -0.2367], [0.168, -0.0397, 0.1384, -0.2665]]]

Expected: [[[0.0651, -0.0136, 0.055, -0.1063], [0.1512, -0.0374, 0.1232, -0.2367], [0.168, -0.0397, 0.1384, -0.2665]]]