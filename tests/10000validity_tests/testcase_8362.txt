import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub70316 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub70316 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Max85867 = tf.keras.layers.Input(shape=([2, 1, 2]))

Sub70316 = keras.layers.Subtract(name = 'Sub70316', )([in0Sub70316,in1Sub70316])
Zer4799 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer4799', )(Sub70316)
Max85867 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(2, 1), padding='valid', name = 'Max85867', )(in0Max85867)
Zer78604 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer78604', )(Max85867)
Mul28699 = keras.layers.Multiply(name = 'Mul28699', )([Zer4799,Zer78604])
model = tf.keras.models.Model(inputs=[in0Sub70316,in1Sub70316,in0Max85867], outputs=Mul28699)
in0Sub70316 = tf.constant([[[[0.9309, 0.9539], [0.9945, 0.0137], [0.9554, 0.3539]], [[0.877, 0.5801], [0.6952, 0.1772], [0.4048, 0.3015]]]])
in1Sub70316 = tf.constant([[[[0.1302, 0.9676], [0.9109, 0.2849], [0.5095, 0.761]], [[0.5555, 0.7581], [0.9905, 0.6328], [0.6301, 0.1761]]]])
in0Max85867 = tf.constant([[[[1.9739, 1.7664]], [[1.3863, 1.331]]]])
print (np.array2string(model.predict([in0Sub70316,in1Sub70316,in0Max85867],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul28699.png')

LSub70316 = subtract_layer([[[[0.9309, 0.9539], [0.9945, 0.0137], [0.9554, 0.3539]], [[0.877, 0.5801], [0.6952, 0.1772], [0.4048, 0.3015]]]], [[[[0.1302, 0.9676], [0.9109, 0.2849], [0.5095, 0.761]], [[0.5555, 0.7581], [0.9905, 0.6328], [0.6301, 0.1761]]]], Sub70316), 
LZer4799 = zero_padding2D_layer(Sub70316, 1, 0, 0, 0, Zer4799), 
LMax85867 = max_pool2D_layer([[[[1.9739, 1.7664]], [[1.3863, 1.331]]]], 1, 1, 2, 1, false, Max85867), 
LZer78604 = zero_padding2D_layer(Max85867, 1, 1, 1, 1, Zer78604), 
LMul28699 = multiply_layer([Zer4799,Zer78604], Mul28699), 
exec_layers([LSub70316,LZer4799,LMax85867,LZer78604,LMul28699],["Sub70316","Zer4799","Max85867","Zer78604","Mul28699"],Mul28699,"Mul28699")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, -0.0000000], [0.1650180, -0.4790477], [0.0000000, -0.0000000]], [[0.0000000, -0.0000000], [-0.0000000, -0.0000000], [-0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0],[0,0],[0,0]],[[0.0,-0.0],[0.16501804,-0.47904768],[0.0,-0.0]],[[0.0,-0.0],[-0.0,-0.0],[-0.0,0.0]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0]], [[0, -0], [0.1651, -0.479], [0, -0]], [[0, -0], [-0, -0], [-0, 0]]]]

Expected: [[[[0, 0], [0, 0], [0, 0]], [[0, -0], [0.1651, -0.479], [0, -0]], [[0, -0], [-0, -0], [-0, 0]]]]