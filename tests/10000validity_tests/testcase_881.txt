import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul12614 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul12614 = tf.keras.layers.Input(shape=([1, 1]))
in0Con61901 = tf.keras.layers.Input(shape=([2]))
in0Glo59789 = tf.keras.layers.Input(shape=([1, 1, 2]))

Mul12614 = keras.layers.Multiply(name = 'Mul12614', )([in0Mul12614,in1Mul12614])
ELU768 = keras.layers.ELU(alpha=5.960331120357107, name = 'ELU768', )(Mul12614)
Fla78557 = keras.layers.Flatten(name = 'Fla78557', )(ELU768)
Con61901 = keras.layers.Concatenate(axis=1, name = 'Con61901', )([Fla78557,in0Con61901])
Glo59789 = keras.layers.GlobalAveragePooling2D(name = 'Glo59789', )(in0Glo59789)
Res93830 = keras.layers.Reshape((2, 1), name = 'Res93830', )(Glo59789)
Res78458 = keras.layers.Reshape((2, 1, 1), name = 'Res78458', )(Res93830)
Con94354 = keras.layers.Conv2D(3, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con94354', )(Res78458)
Res72849 = keras.layers.Reshape((2, 3), name = 'Res72849', )(Con94354)
Sim81469 = keras.layers.SimpleRNN(3,name = 'Sim81469', )(Res72849)
Add11013 = keras.layers.Add(name = 'Add11013', )([Con61901,Sim81469])
model = tf.keras.models.Model(inputs=[in0Mul12614,in1Mul12614,in0Con61901,in0Glo59789], outputs=Add11013)
w = model.get_layer('Con94354').get_weights() 
w[0] = np.array([[[[0.6652, 0.8557, 0.8736]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con94354').set_weights(w) 
w = model.get_layer('Sim81469').get_weights() 
w[0] = np.array([[1, 8, 10], [5, 4, 10], [6, 3, 9]])
w[1] = np.array([[4, 6, 10], [10, 4, 2], [5, 3, 7]])
w[2] = np.array([5, 9, 2])
model.get_layer('Sim81469').set_weights(w) 
in0Mul12614 = tf.constant([[[0.3081]]])
in1Mul12614 = tf.constant([[[0.3915]]])
in0Con61901 = tf.constant([[0.9658, 0.9703]])
in0Glo59789 = tf.constant([[[[1.1105, 1.2992]]]])
print (np.array2string(model.predict([in0Mul12614,in1Mul12614,in0Con61901,in0Glo59789],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add11013.png')

LMul12614 = multiply_layer([[[[0.3081]]], [[[0.3915]]]], Mul12614), 
LELU768 = elu_layer(Mul12614, 5.960331120357107, ELU768), 
LFla78557 = flatten_layer(ELU768, Fla78557), 
LCon61901 = concatenate_layer([Fla78557,[[0.9658, 0.9703]]], 1, Con61901), 
LGlo59789 = global_average_pooling2D_layer([[[[1.1105, 1.2992]]]], Glo59789), 
LRes93830 = reshape_layer(Glo59789, [2, 1], Res93830), 
LRes78458 = reshape_layer(Res93830, [2, 1, 1], Res78458), 
LCon94354 = conv2D_layer(Res78458, 1, 1,[[[[0.6652, 0.8557, 0.8736]]]],[0, 0, 0], 1, 1, true, 1, 1, Con94354), 
LRes72849 = reshape_layer(Con94354, [2, 3], Res72849), 
LSim81469 = simple_rnn_layer(Res72849,[[1, 8, 10], [5, 4, 10], [6, 3, 9]],[[4, 6, 10], [10, 4, 2], [5, 3, 7]],[5, 9, 2], Sim81469), 
LAdd11013 = add_layer([Con61901,Sim81469], Add11013), 
exec_layers([LMul12614,LELU768,LFla78557,LCon61901,LGlo59789,LRes93830,LRes78458,LCon94354,LRes72849,LSim81469,LAdd11013],["Mul12614","ELU768","Fla78557","Con61901","Glo59789","Res93830","Res78458","Con94354","Res72849","Sim81469","Add11013"],Add11013,"Add11013")

Actual (Unparsed): [[1.1206211, 1.9658000, 1.9703000]]

Expected (Unparsed): [[1.12062115,1.9658,1.9703]]

Actual:   [[1.1207, 1.9658, 1.9703]]

Expected: [[1.1207, 1.9658, 1.9703]]