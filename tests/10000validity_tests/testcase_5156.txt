import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo72461 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con44158 = tf.keras.layers.Input(shape=([2, 1]))
in0Max84847 = tf.keras.layers.Input(shape=([2, 2]))
in1Max84847 = tf.keras.layers.Input(shape=([2, 2]))
in0Add65828 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Add65828 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Glo72461 = keras.layers.GlobalAveragePooling3D(name = 'Glo72461', )(in0Glo72461)
Res68070 = keras.layers.Reshape((1, 1), name = 'Res68070', )(Glo72461)
Zer7406 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer7406', )(Res68070)
Con44158 = keras.layers.Concatenate(axis=2, name = 'Con44158', )([Zer7406,in0Con44158])
Max84847 = keras.layers.Maximum(name = 'Max84847', )([in0Max84847,in1Max84847])
Mul95212 = keras.layers.Multiply(name = 'Mul95212', )([Con44158,Max84847])
Res84102 = keras.layers.Reshape((2, 2, 1), name = 'Res84102', )(Mul95212)
Add65828 = keras.layers.Add(name = 'Add65828', )([in0Add65828,in1Add65828])
Res39965 = keras.layers.Reshape((2, 2, 1), name = 'Res39965', )(Add65828)
Add57470 = keras.layers.Add(name = 'Add57470', )([Res84102,Res39965])
Res8909 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res8909', )(Add57470)
Glo85055 = keras.layers.GlobalMaxPool3D(name = 'Glo85055', )(Res8909)
Res12482 = keras.layers.Reshape((1, 1), name = 'Res12482', )(Glo85055)
Res81482 = keras.layers.Reshape((1, 1, 1), name = 'Res81482', )(Res12482)
Max52442 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max52442', )(Res81482)
model = tf.keras.models.Model(inputs=[in0Glo72461,in0Con44158,in0Max84847,in1Max84847,in0Add65828,in1Add65828], outputs=Max52442)
in0Glo72461 = tf.constant([[[[[1.2154]]]]])
in0Con44158 = tf.constant([[[0.7208], [0.4063]]])
in0Max84847 = tf.constant([[[0.1613, 0.8751], [0.5843, 0.0298]]])
in1Max84847 = tf.constant([[[0.8912, 0.2541], [0.4651, 0.8533]]])
in0Add65828 = tf.constant([[[[[0.2777]], [[0.8546]]], [[[0.9329]], [[0.8886]]]]])
in1Add65828 = tf.constant([[[[[0.6067]], [[0.6325]]], [[[0.7003]], [[0.792]]]]])
print (np.array2string(model.predict([in0Glo72461,in0Con44158,in0Max84847,in1Max84847,in0Add65828,in1Add65828],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max52442.png')

LGlo72461 = global_average_pooling3D_layer([[[[[1.2154]]]]], Glo72461), 
LRes68070 = reshape_layer(Glo72461, [1, 1], Res68070), 
LZer7406 = zero_padding1D_layer(Res68070, 1, 0, Zer7406), 
LCon44158 = concatenate_layer([Zer7406,[[[0.7208], [0.4063]]]], 2, Con44158), 
LMax84847 = maximum_layer([[[[0.1613, 0.8751], [0.5843, 0.0298]]], [[[0.8912, 0.2541], [0.4651, 0.8533]]]], Max84847), 
LMul95212 = multiply_layer([Con44158,Max84847], Mul95212), 
LRes84102 = reshape_layer(Mul95212, [2, 2, 1], Res84102), 
LAdd65828 = add_layer([[[[[[0.2777]], [[0.8546]]], [[[0.9329]], [[0.8886]]]]], [[[[[0.6067]], [[0.6325]]], [[[0.7003]], [[0.792]]]]]], Add65828), 
LRes39965 = reshape_layer(Add65828, [2, 2, 1], Res39965), 
LAdd57470 = add_layer([Res84102,Res39965], Add57470), 
LRes8909 = reshape_layer(Add57470, [2, 2, 1, 1], Res8909), 
LGlo85055 = global_max_pool3D_layer(Res8909, Glo85055), 
LRes12482 = reshape_layer(Glo85055, [1, 1], Res12482), 
LRes81482 = reshape_layer(Res12482, [1, 1, 1], Res81482), 
LMax52442 = max_pool2D_layer(Res81482, 1, 1, Max52442), 
exec_layers([LGlo72461,LRes68070,LZer7406,LCon44158,LMax84847,LMul95212,LRes84102,LAdd65828,LRes39965,LAdd57470,LRes8909,LGlo85055,LRes12482,LRes81482,LMax52442],["Glo72461","Res68070","Zer7406","Con44158","Max84847","Mul95212","Res84102","Add65828","Res39965","Add57470","Res8909","Glo85055","Res12482","Res81482","Max52442"],Max52442,"Max52442")

Actual (Unparsed): [[[[2.3433582]]]]

Expected (Unparsed): [[[[2.34335822]]]]

Actual:   [[[[2.3434]]]]

Expected: [[[[2.3434]]]]