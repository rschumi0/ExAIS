import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave43719 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave43719 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot24403 = tf.keras.layers.Input(shape=([2]))
in1Dot24403 = tf.keras.layers.Input(shape=([2]))
in0Dot37670 = tf.keras.layers.Input(shape=([2]))
in1Dot37670 = tf.keras.layers.Input(shape=([2]))
in0Con63283 = tf.keras.layers.Input(shape=([3]))

Ave43719 = keras.layers.Average(name = 'Ave43719', )([in0Ave43719,in1Ave43719])
Fla2256 = keras.layers.Flatten(name = 'Fla2256', )(Ave43719)
Dot24403 = keras.layers.Dot(axes=(1, 1), name = 'Dot24403', )([in0Dot24403,in1Dot24403])
Dot37670 = keras.layers.Dot(axes=(1, 1), name = 'Dot37670', )([in0Dot37670,in1Dot37670])
Min86972 = keras.layers.Minimum(name = 'Min86972', )([Dot24403,Dot37670])
Con63283 = keras.layers.Concatenate(axis=1, name = 'Con63283', )([Min86972,in0Con63283])
Ave73518 = keras.layers.Average(name = 'Ave73518', )([Fla2256,Con63283])
Res87496 = keras.layers.Reshape((4, 1), name = 'Res87496', )(Ave73518)
Cro77382 = keras.layers.Cropping1D(cropping=((0, 3)), name = 'Cro77382', )(Res87496)
Ave36322 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='same', name = 'Ave36322', )(Cro77382)
model = tf.keras.models.Model(inputs=[in0Ave43719,in1Ave43719,in0Dot24403,in1Dot24403,in0Dot37670,in1Dot37670,in0Con63283], outputs=Ave36322)
in0Ave43719 = tf.constant([[[0.9676, 0.058], [0.0379, 0.9723]]])
in1Ave43719 = tf.constant([[[0.9584, 0.9784], [0.5309, 0.1527]]])
in0Dot24403 = tf.constant([[0.4442, 0.4993]])
in1Dot24403 = tf.constant([[0.0512, 0.4885]])
in0Dot37670 = tf.constant([[0.5414, 0.7947]])
in1Dot37670 = tf.constant([[0.3186, 0.7113]])
in0Con63283 = tf.constant([[0.81, 0.8815, 0.2445]])
print (np.array2string(model.predict([in0Ave43719,in1Ave43719,in0Dot24403,in1Dot24403,in0Dot37670,in1Dot37670,in0Con63283],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave36322.png')

LAve43719 = average_layer([[[[0.9676, 0.058], [0.0379, 0.9723]]], [[[0.9584, 0.9784], [0.5309, 0.1527]]]], Ave43719), 
LFla2256 = flatten_layer(Ave43719, Fla2256), 
LDot24403 = dot_layer([[0.4442, 0.4993]], [[0.0512, 0.4885]], 1, 1, Dot24403), 
LDot37670 = dot_layer([[0.5414, 0.7947]], [[0.3186, 0.7113]], 1, 1, Dot37670), 
LMin86972 = minimum_layer([Dot24403,Dot37670], Min86972), 
LCon63283 = concatenate_layer([Min86972,[[0.81, 0.8815, 0.2445]]], 1, Con63283), 
LAve73518 = average_layer([Fla2256,Con63283], Ave73518), 
LRes87496 = reshape_layer(Ave73518, [4, 1], Res87496), 
LCro77382 = cropping1D_layer(Res87496, 0, 3, Cro77382), 
LAve36322 = average_pooling1D_layer(Cro77382, 2, 1, true, Ave36322), 
exec_layers([LAve43719,LFla2256,LDot24403,LDot37670,LMin86972,LCon63283,LAve73518,LRes87496,LCro77382,LAve36322],["Ave43719","Fla2256","Dot24403","Dot37670","Min86972","Con63283","Ave73518","Res87496","Cro77382","Ave36322"],Ave36322,"Ave36322")

Actual (Unparsed): [[[0.6148255]]]

Expected (Unparsed): [[[0.6148255450000001]]]

Actual:   [[[0.6149]]]

Expected: [[[0.6149]]]