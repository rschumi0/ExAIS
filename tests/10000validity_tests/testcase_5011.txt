import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave72522 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave72522 = tf.keras.layers.Input(shape=([2, 2]))
in0Con90896 = tf.keras.layers.Input(shape=([3]))
in0Max25102 = tf.keras.layers.Input(shape=([2, 2]))
in1Max25102 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub5976 = tf.keras.layers.Input(shape=([3]))
in1Sub5976 = tf.keras.layers.Input(shape=([3]))
in0Con26643 = tf.keras.layers.Input(shape=([1]))

Ave72522 = keras.layers.Average(name = 'Ave72522', )([in0Ave72522,in1Ave72522])
Sep45508 = keras.layers.SeparableConv1D(3, (2),strides=(1), padding='same', name = 'Sep45508', )(Ave72522)
Res41506 = keras.layers.Reshape((2, 3, 1), name = 'Res41506', )(Sep45508)
Glo42916 = keras.layers.GlobalAveragePooling2D(name = 'Glo42916', )(Res41506)
Con90896 = keras.layers.Concatenate(axis=1, name = 'Con90896', )([Glo42916,in0Con90896])
Max25102 = keras.layers.Maximum(name = 'Max25102', )([in0Max25102,in1Max25102])
Fla29634 = keras.layers.Flatten(name = 'Fla29634', )(Max25102)
Sub5976 = keras.layers.Subtract(name = 'Sub5976', )([in0Sub5976,in1Sub5976])
Con26643 = keras.layers.Concatenate(axis=1, name = 'Con26643', )([Sub5976,in0Con26643])
Add59249 = keras.layers.Add(name = 'Add59249', )([Fla29634,Con26643])
Sub23287 = keras.layers.Subtract(name = 'Sub23287', )([Con90896,Add59249])
model = tf.keras.models.Model(inputs=[in0Ave72522,in1Ave72522,in0Con90896,in0Max25102,in1Max25102,in0Sub5976,in1Sub5976,in0Con26643], outputs=Sub23287)
w = model.get_layer('Sep45508').get_weights() 
w[0] = np.array([[[0.3851], [0.8158]], [[0.1418], [0.9743]]])
w[1] = np.array([[[0.4539, 0.6191, 0.7557], [0.4243, 0.6425, 0.7067]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep45508').set_weights(w) 
in0Ave72522 = tf.constant([[[0.7568, 0.5822], [0.483, 0.9006]]])
in1Ave72522 = tf.constant([[[0.2049, 0.0195], [0.0059, 0.562]]])
in0Con90896 = tf.constant([[0.9034, 0.1219, 0.0859]])
in0Max25102 = tf.constant([[[0.8225, 0.4526], [0.9389, 0.6746]]])
in1Max25102 = tf.constant([[[0.6465, 0.396], [0.8179, 0.4681]]])
in0Sub5976 = tf.constant([[0.1921, 0.873, 0.1966]])
in1Sub5976 = tf.constant([[0.4349, 0.4872, 0.109]])
in0Con26643 = tf.constant([[0.5261]])
print (np.array2string(model.predict([in0Ave72522,in1Ave72522,in0Con90896,in0Max25102,in1Max25102,in0Sub5976,in1Sub5976,in0Con26643],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub23287.png')

LAve72522 = average_layer([[[[0.7568, 0.5822], [0.483, 0.9006]]], [[[0.2049, 0.0195], [0.0059, 0.562]]]], Ave72522), 
LSep45508 = separable_conv1D_layer(Ave72522, 2,[[[[0.3851], [0.8158]], [[0.1418], [0.9743]]],[[[0.4539, 0.6191, 0.7557], [0.4243, 0.6425, 0.7067]]]],[0, 0, 0], 1, true, Sep45508), 
LRes41506 = reshape_layer(Sep45508, [2, 3, 1], Res41506), 
LGlo42916 = global_average_pooling2D_layer(Res41506, Glo42916), 
LCon90896 = concatenate_layer([Glo42916,[[0.9034, 0.1219, 0.0859]]], 1, Con90896), 
LMax25102 = maximum_layer([[[[0.8225, 0.4526], [0.9389, 0.6746]]], [[[0.6465, 0.396], [0.8179, 0.4681]]]], Max25102), 
LFla29634 = flatten_layer(Max25102, Fla29634), 
LSub5976 = subtract_layer([[0.1921, 0.873, 0.1966]], [[0.4349, 0.4872, 0.109]], Sub5976), 
LCon26643 = concatenate_layer([Sub5976,[[0.5261]]], 1, Con26643), 
LAdd59249 = add_layer([Fla29634,Con26643], Add59249), 
LSub23287 = subtract_layer(Con90896,Add59249, Sub23287), 
exec_layers([LAve72522,LSep45508,LRes41506,LGlo42916,LCon90896,LMax25102,LFla29634,LSub5976,LCon26643,LAdd59249,LSub23287],["Ave72522","Sep45508","Res41506","Glo42916","Con90896","Max25102","Fla29634","Sub5976","Con26643","Add59249","Sub23287"],Sub23287,"Sub23287")

Actual (Unparsed): [[-0.0245111, 0.0650000, -0.9046000, -1.1148000]]

Expected (Unparsed): [[-0.024511124498666548,0.06499999999999995,-0.9046,-1.1147999999999998]]

Actual:   [[-0.0245, 0.065, -0.9046, -1.1148]]

Expected: [[-0.0245, 0.065, -0.9046, -1.1147]]