import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add69945 = tf.keras.layers.Input(shape=([1, 1]))
in1Add69945 = tf.keras.layers.Input(shape=([1, 1]))
in0Con8359 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Cro73500 = tf.keras.layers.Input(shape=([2, 1, 1, 3]))

Add69945 = keras.layers.Add(name = 'Add69945', )([in0Add69945,in1Add69945])
Zer86743 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer86743', )(Add69945)
Res31837 = keras.layers.Reshape((3, 1, 1), name = 'Res31837', )(Zer86743)
Res68261 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res68261', )(Res31837)
Glo8350 = keras.layers.GlobalMaxPool3D(name = 'Glo8350', )(Res68261)
Res26716 = keras.layers.Reshape((1, 1), name = 'Res26716', )(Glo8350)
Res27398 = keras.layers.Reshape((1, 1, 1), name = 'Res27398', )(Res26716)
Res71394 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res71394', )(Res27398)
Zer40409 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer40409', )(Res71394)
Con8359 = keras.layers.Concatenate(axis=4, name = 'Con8359', )([Zer40409,in0Con8359])
Cro73500 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 0)), name = 'Cro73500', )(in0Cro73500)
Sub97828 = keras.layers.Subtract(name = 'Sub97828', )([Con8359,Cro73500])
model = tf.keras.models.Model(inputs=[in0Add69945,in1Add69945,in0Con8359,in0Cro73500], outputs=Sub97828)
in0Add69945 = tf.constant([[[0.9986]]])
in1Add69945 = tf.constant([[[0.9924]]])
in0Con8359 = tf.constant([[[[[0.421, 0.826]]], [[[0.4127, 0.0789]]]]])
in0Cro73500 = tf.constant([[[[[1.4797, 1.744, 1.1248]]], [[[1.9643, 1.5723, 1.1416]]]]])
print (np.array2string(model.predict([in0Add69945,in1Add69945,in0Con8359,in0Cro73500],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub97828.png')

LAdd69945 = add_layer([[[[0.9986]]], [[[0.9924]]]], Add69945), 
LZer86743 = zero_padding1D_layer(Add69945, 1, 1, Zer86743), 
LRes31837 = reshape_layer(Zer86743, [3, 1, 1], Res31837), 
LRes68261 = reshape_layer(Res31837, [3, 1, 1, 1], Res68261), 
LGlo8350 = global_max_pool3D_layer(Res68261, Glo8350), 
LRes26716 = reshape_layer(Glo8350, [1, 1], Res26716), 
LRes27398 = reshape_layer(Res26716, [1, 1, 1], Res27398), 
LRes71394 = reshape_layer(Res27398, [1, 1, 1, 1], Res71394), 
LZer40409 = zero_padding3D_layer(Res71394, 1, 0, 0, 0, 0, 0, Zer40409), 
LCon8359 = concatenate_layer([Zer40409,[[[[[0.421, 0.826]]], [[[0.4127, 0.0789]]]]]], 4, Con8359), 
LCro73500 = cropping3D_layer([[[[[1.4797, 1.744, 1.1248]]], [[[1.9643, 1.5723, 1.1416]]]]], 0, 0, 0, 0, 0, 0, Cro73500), 
LSub97828 = subtract_layer(Con8359,Cro73500, Sub97828), 
exec_layers([LAdd69945,LZer86743,LRes31837,LRes68261,LGlo8350,LRes26716,LRes27398,LRes71394,LZer40409,LCon8359,LCro73500,LSub97828],["Add69945","Zer86743","Res31837","Res68261","Glo8350","Res26716","Res27398","Res71394","Zer40409","Con8359","Cro73500","Sub97828"],Sub97828,"Sub97828")

Actual (Unparsed): [[[[[-1.4797000, -1.3230000, -0.2988000]]], [[[0.0267000, -1.1596000, -1.0627000]]]]]

Expected (Unparsed): [[[[[-1.4797,-1.323,-0.29880000000000007]]],[[[0.026700000000000168,-1.1596,-1.0627]]]]]

Actual:   [[[[[-1.4797, -1.323, -0.2988]]], [[[0.0267, -1.1596, -1.0627]]]]]

Expected: [[[[[-1.4797, -1.323, -0.2988]]], [[[0.0268, -1.1596, -1.0627]]]]]