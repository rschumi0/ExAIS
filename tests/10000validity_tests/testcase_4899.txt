import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub18559 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in1Sub18559 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in0Ave4977 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Ave4977 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Fla11355 = tf.keras.layers.Input(shape=([1, 1]))
in0Con9895 = tf.keras.layers.Input(shape=([11]))

Sub18559 = keras.layers.Subtract(name = 'Sub18559', )([in0Sub18559,in1Sub18559])
Res47693 = keras.layers.Reshape((2, 3, 6), name = 'Res47693', )(Sub18559)
Ave75201 = keras.layers.AveragePooling2D(pool_size=(2, 3), strides=(2, 2), padding='same', name = 'Ave75201', )(Res47693)
Res27111 = keras.layers.Reshape((1, 12), name = 'Res27111', )(Ave75201)
Fla1200 = keras.layers.Flatten(name = 'Fla1200', )(Res27111)
Ave4977 = keras.layers.Average(name = 'Ave4977', )([in0Ave4977,in1Ave4977])
Res37398 = keras.layers.Reshape((2, 1, 1), name = 'Res37398', )(Ave4977)
Res94754 = keras.layers.Reshape((2, 1), name = 'Res94754', )(Res37398)
Glo80898 = keras.layers.GlobalAveragePooling1D(name = 'Glo80898', )(Res94754)
Fla11355 = keras.layers.Flatten(name = 'Fla11355', )(in0Fla11355)
Dot2121 = keras.layers.Dot(axes=(1, 1), name = 'Dot2121', )([Glo80898,Fla11355])
Con9895 = keras.layers.Concatenate(axis=1, name = 'Con9895', )([Dot2121,in0Con9895])
Add45774 = keras.layers.Add(name = 'Add45774', )([Fla1200,Con9895])
model = tf.keras.models.Model(inputs=[in0Sub18559,in1Sub18559,in0Ave4977,in1Ave4977,in0Fla11355,in0Con9895], outputs=Add45774)
in0Sub18559 = tf.constant([[[[[0.5272, 0.7131, 0.9969], [0.0718, 0.8847, 0.378]], [[0.0571, 0.6652, 0.813], [0.2143, 0.7628, 0.5982]], [[0.1236, 0.5341, 0.6526], [0.4981, 0.7999, 0.9015]]], [[[0.6588, 0.9753, 0.5167], [0.432, 0.6402, 0.5036]], [[0.8481, 0.3178, 0.2315], [0.4646, 0.4584, 0.398]], [[0.6464, 0.364, 0.1049], [0.3871, 0.9335, 0.4752]]]]])
in1Sub18559 = tf.constant([[[[[0.7237, 0.3242, 0.4559], [0.072, 0.2206, 0.913]], [[0.0409, 0.9663, 0.8414], [0.685, 0.3318, 0.2878]], [[0.158, 0.3363, 0.3583], [0.3108, 0.7754, 0.166]]], [[[0.2434, 0.6654, 0.8357], [0.2719, 0.2619, 0.4497]], [[0.2775, 0.0514, 0.1751], [0.6065, 0.5936, 0.5947]], [[0.8819, 0.4205, 0.5239], [0.7628, 0.9442, 0.1468]]]]])
in0Ave4977 = tf.constant([[[[[0.717]]], [[[0.0933]]]]])
in1Ave4977 = tf.constant([[[[[0.4742]]], [[[0.5921]]]]])
in0Fla11355 = tf.constant([[[1.9003]]])
in0Con9895 = tf.constant([[0.6705, 0.1433, 0.6625, 0.0545, 0.772, 0.3661, 0.4767, 0.8215, 0.1238, 0.5569, 0.0693]])
print (np.array2string(model.predict([in0Sub18559,in1Sub18559,in0Ave4977,in1Ave4977,in0Fla11355,in0Con9895],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add45774.png')

LSub18559 = subtract_layer([[[[[0.5272, 0.7131, 0.9969], [0.0718, 0.8847, 0.378]], [[0.0571, 0.6652, 0.813], [0.2143, 0.7628, 0.5982]], [[0.1236, 0.5341, 0.6526], [0.4981, 0.7999, 0.9015]]], [[[0.6588, 0.9753, 0.5167], [0.432, 0.6402, 0.5036]], [[0.8481, 0.3178, 0.2315], [0.4646, 0.4584, 0.398]], [[0.6464, 0.364, 0.1049], [0.3871, 0.9335, 0.4752]]]]], [[[[[0.7237, 0.3242, 0.4559], [0.072, 0.2206, 0.913]], [[0.0409, 0.9663, 0.8414], [0.685, 0.3318, 0.2878]], [[0.158, 0.3363, 0.3583], [0.3108, 0.7754, 0.166]]], [[[0.2434, 0.6654, 0.8357], [0.2719, 0.2619, 0.4497]], [[0.2775, 0.0514, 0.1751], [0.6065, 0.5936, 0.5947]], [[0.8819, 0.4205, 0.5239], [0.7628, 0.9442, 0.1468]]]]], Sub18559), 
LRes47693 = reshape_layer(Sub18559, [2, 3, 6], Res47693), 
LAve75201 = average_pooling2D_layer(Res47693, 2, 3, 2, 2, true, Ave75201), 
LRes27111 = reshape_layer(Ave75201, [1, 12], Res27111), 
LFla1200 = flatten_layer(Res27111, Fla1200), 
LAve4977 = average_layer([[[[[[0.717]]], [[[0.0933]]]]], [[[[[0.4742]]], [[[0.5921]]]]]], Ave4977), 
LRes37398 = reshape_layer(Ave4977, [2, 1, 1], Res37398), 
LRes94754 = reshape_layer(Res37398, [2, 1], Res94754), 
LGlo80898 = global_average_pooling1D_layer(Res94754, Glo80898), 
LFla11355 = flatten_layer([[[1.9003]]], Fla11355), 
LDot2121 = dot_layer(Glo80898,Fla11355, 1, 1, Dot2121), 
LCon9895 = concatenate_layer([Dot2121,[[0.6705, 0.1433, 0.6625, 0.0545, 0.772, 0.3661, 0.4767, 0.8215, 0.1238, 0.5569, 0.0693]]], 1, Con9895), 
LAdd45774 = add_layer([Fla1200,Con9895], Add45774), 
exec_layers([LSub18559,LRes47693,LAve75201,LRes27111,LFla1200,LAve4977,LRes37398,LRes94754,LGlo80898,LFla11355,LDot2121,LCon9895,LAdd45774],["Sub18559","Res47693","Ave75201","Res27111","Fla1200","Ave4977","Res37398","Res94754","Glo80898","Fla11355","Dot2121","Con9895","Add45774"],Add45774,"Add45774")

Actual (Unparsed): [[1.0929508, 0.8365250, 0.2058000, 0.5493250, 0.3890500, 0.6801500, 0.4453250, 0.5033500, 0.7973250, -0.0764500, 0.6343000, 0.3637000]]

Expected (Unparsed): [[1.092950745,0.836525,0.20579999999999998,0.549325,0.38905,0.68015,0.44532499999999997,0.50335,0.797325,-0.07645000000000005,0.6343,0.3637]]

Actual:   [[1.093, 0.8366, 0.2058, 0.5494, 0.3891, 0.6802, 0.4454, 0.5034, 0.7974, -0.0764, 0.6343, 0.3637]]

Expected: [[1.093, 0.8366, 0.2058, 0.5494, 0.3891, 0.6802, 0.4454, 0.5034, 0.7974, -0.0764, 0.6343, 0.3637]]