import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub82875 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub82875 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Dot83328 = tf.keras.layers.Input(shape=([3]))
in1Dot83328 = tf.keras.layers.Input(shape=([3]))
in0Con12612 = tf.keras.layers.Input(shape=([11]))

Sub82875 = keras.layers.Subtract(name = 'Sub82875', )([in0Sub82875,in1Sub82875])
Res39669 = keras.layers.Reshape((2, 6), name = 'Res39669', )(Sub82875)
Fla11828 = keras.layers.Flatten(name = 'Fla11828', )(Res39669)
Dot83328 = keras.layers.Dot(axes=(1, 1), name = 'Dot83328', )([in0Dot83328,in1Dot83328])
Mas45175 = keras.layers.Masking(mask_value=1, name = 'Mas45175', )(Dot83328)
Con12612 = keras.layers.Concatenate(axis=1, name = 'Con12612', )([Mas45175,in0Con12612])
Add31703 = keras.layers.Add(name = 'Add31703', )([Fla11828,Con12612])
Res89446 = keras.layers.Reshape((12, 1), name = 'Res89446', )(Add31703)
Res90200 = keras.layers.Reshape((12, 1, 1), name = 'Res90200', )(Res89446)
Res10909 = keras.layers.Reshape((12, 1, 1, 1), name = 'Res10909', )(Res90200)
Glo38663 = keras.layers.GlobalAveragePooling3D(name = 'Glo38663', )(Res10909)
model = tf.keras.models.Model(inputs=[in0Sub82875,in1Sub82875,in0Dot83328,in1Dot83328,in0Con12612], outputs=Glo38663)
in0Sub82875 = tf.constant([[[[0.4847, 0.461], [0.7943, 0.253], [0.4027, 0.0533]], [[0.2605, 0.8503], [0.8028, 0.9108], [0.6796, 0.8083]]]])
in1Sub82875 = tf.constant([[[[0.6922, 0.4199], [0.9945, 0.9077], [0.1057, 0.2964]], [[0.3649, 0.0919], [0.4043, 0.2126], [0.5272, 0.3452]]]])
in0Dot83328 = tf.constant([[0.4636, 0.3469, 0.4932]])
in1Dot83328 = tf.constant([[0.9368, 0.9572, 0.1925]])
in0Con12612 = tf.constant([[0.1611, 0.7233, 0.3568, 0.8821, 0.5916, 0.493, 0.0646, 0.7715, 0.1139, 0.4592, 0.1902]])
print (np.array2string(model.predict([in0Sub82875,in1Sub82875,in0Dot83328,in1Dot83328,in0Con12612],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo38663.png')

LSub82875 = subtract_layer([[[[0.4847, 0.461], [0.7943, 0.253], [0.4027, 0.0533]], [[0.2605, 0.8503], [0.8028, 0.9108], [0.6796, 0.8083]]]], [[[[0.6922, 0.4199], [0.9945, 0.9077], [0.1057, 0.2964]], [[0.3649, 0.0919], [0.4043, 0.2126], [0.5272, 0.3452]]]], Sub82875), 
LRes39669 = reshape_layer(Sub82875, [2, 6], Res39669), 
LFla11828 = flatten_layer(Res39669, Fla11828), 
LDot83328 = dot_layer([[0.4636, 0.3469, 0.4932]], [[0.9368, 0.9572, 0.1925]], 1, 1, Dot83328), 
LMas45175 = masking_layer(Dot83328, 1, Mas45175), 
LCon12612 = concatenate_layer([Mas45175,[[0.1611, 0.7233, 0.3568, 0.8821, 0.5916, 0.493, 0.0646, 0.7715, 0.1139, 0.4592, 0.1902]]], 1, Con12612), 
LAdd31703 = add_layer([Fla11828,Con12612], Add31703), 
LRes89446 = reshape_layer(Add31703, [12, 1], Res89446), 
LRes90200 = reshape_layer(Res89446, [12, 1, 1], Res90200), 
LRes10909 = reshape_layer(Res90200, [12, 1, 1, 1], Res10909), 
LGlo38663 = global_average_pooling3D_layer(Res10909, Glo38663), 
exec_layers([LSub82875,LRes39669,LFla11828,LDot83328,LMas45175,LCon12612,LAdd31703,LRes89446,LRes90200,LRes10909,LGlo38663],["Sub82875","Res39669","Fla11828","Dot83328","Mas45175","Con12612","Add31703","Res89446","Res90200","Res10909","Glo38663"],Glo38663,"Glo38663")

Actual (Unparsed): [[0.5889495]]

Expected (Unparsed): [[0.5889495133333333]]

Actual:   [[0.589]]

Expected: [[0.589]]