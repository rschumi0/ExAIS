import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul7971 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Mul7971 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Min5686 = tf.keras.layers.Input(shape=([2, 2]))
in1Min5686 = tf.keras.layers.Input(shape=([2, 2]))
in0Glo53082 = tf.keras.layers.Input(shape=([1, 2]))
in0Glo87071 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Con51791 = tf.keras.layers.Input(shape=([1]))

Mul7971 = keras.layers.Multiply(name = 'Mul7971', )([in0Mul7971,in1Mul7971])
Res25791 = keras.layers.Reshape((1, 1, 2), name = 'Res25791', )(Mul7971)
Res90814 = keras.layers.Reshape((1, 2), name = 'Res90814', )(Res25791)
Zer55990 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer55990', )(Res90814)
Min5686 = keras.layers.Minimum(name = 'Min5686', )([in0Min5686,in1Min5686])
Dot3621 = keras.layers.Dot(axes=(2, 2), name = 'Dot3621', )([Zer55990,Min5686])
Res98543 = keras.layers.Reshape((2, 2, 1), name = 'Res98543', )(Dot3621)
Max33384 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max33384', )(Res98543)
Res92679 = keras.layers.Reshape((2, 1), name = 'Res92679', )(Max33384)
Fla74401 = keras.layers.Flatten(name = 'Fla74401', )(Res92679)
Glo53082 = keras.layers.GlobalAveragePooling1D(name = 'Glo53082', )(in0Glo53082)
Glo87071 = keras.layers.GlobalAveragePooling3D(name = 'Glo87071', )(in0Glo87071)
Res22621 = keras.layers.Reshape((2, 1), name = 'Res22621', )(Glo87071)
Res96705 = keras.layers.Reshape((2, 1, 1), name = 'Res96705', )(Res22621)
Glo68331 = keras.layers.GlobalAveragePooling2D(name = 'Glo68331', )(Res96705)
Den91139 = keras.layers.Dense(1,name = 'Den91139', )(Glo68331)
Con51791 = keras.layers.Concatenate(axis=1, name = 'Con51791', )([Den91139,in0Con51791])
Min70162 = keras.layers.Minimum(name = 'Min70162', )([Glo53082,Con51791])
Min49595 = keras.layers.Minimum(name = 'Min49595', )([Fla74401,Min70162])
model = tf.keras.models.Model(inputs=[in0Mul7971,in1Mul7971,in0Min5686,in1Min5686,in0Glo53082,in0Glo87071,in0Con51791], outputs=Min49595)
w = model.get_layer('Den91139').get_weights() 
w[0] = np.array([[0.8128]])
w[1] = np.array([0.866])
model.get_layer('Den91139').set_weights(w) 
in0Mul7971 = tf.constant([[[[[0.7198, 0.4851]]]]])
in1Mul7971 = tf.constant([[[[[0.5343, 0.5938]]]]])
in0Min5686 = tf.constant([[[0.3857, 0.1632], [0.0095, 0.2548]]])
in1Min5686 = tf.constant([[[0.1084, 0.4154], [0.6653, 0.0358]]])
in0Glo53082 = tf.constant([[[1.148, 1.6788]]])
in0Glo87071 = tf.constant([[[[[1.0743, 1.2709], [1.6901, 1.3525]], [[1.3889, 1.3523], [1.2835, 1.1704]]]]])
in0Con51791 = tf.constant([[0.7848]])
print (np.array2string(model.predict([in0Mul7971,in1Mul7971,in0Min5686,in1Min5686,in0Glo53082,in0Glo87071,in0Con51791],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min49595.png')

LMul7971 = multiply_layer([[[[[[0.7198, 0.4851]]]]], [[[[[0.5343, 0.5938]]]]]], Mul7971), 
LRes25791 = reshape_layer(Mul7971, [1, 1, 2], Res25791), 
LRes90814 = reshape_layer(Res25791, [1, 2], Res90814), 
LZer55990 = zero_padding1D_layer(Res90814, 1, 0, Zer55990), 
LMin5686 = minimum_layer([[[[0.3857, 0.1632], [0.0095, 0.2548]]], [[[0.1084, 0.4154], [0.6653, 0.0358]]]], Min5686), 
LDot3621 = dot_layer(Zer55990,Min5686, 2, 2, Dot3621), 
LRes98543 = reshape_layer(Dot3621, [2, 2, 1], Res98543), 
LMax33384 = max_pool2D_layer(Res98543, 1, 2, Max33384), 
LRes92679 = reshape_layer(Max33384, [2, 1], Res92679), 
LFla74401 = flatten_layer(Res92679, Fla74401), 
LGlo53082 = global_average_pooling1D_layer([[[1.148, 1.6788]]], Glo53082), 
LGlo87071 = global_average_pooling3D_layer([[[[[1.0743, 1.2709], [1.6901, 1.3525]], [[1.3889, 1.3523], [1.2835, 1.1704]]]]], Glo87071), 
LRes22621 = reshape_layer(Glo87071, [2, 1], Res22621), 
LRes96705 = reshape_layer(Res22621, [2, 1, 1], Res96705), 
LGlo68331 = global_average_pooling2D_layer(Res96705, Glo68331), 
LDen91139 = dense_layer(Glo68331, [[0.8128]],[0.866], Den91139), 
LCon51791 = concatenate_layer([Den91139,[[0.7848]]], 1, Con51791), 
LMin70162 = minimum_layer([Glo53082,Con51791], Min70162), 
LMin49595 = minimum_layer([Fla74401,Min70162], Min49595), 
exec_layers([LMul7971,LRes25791,LRes90814,LZer55990,LMin5686,LDot3621,LRes98543,LMax33384,LRes92679,LFla74401,LGlo53082,LGlo87071,LRes22621,LRes96705,LGlo68331,LDen91139,LCon51791,LMin70162,LMin49595],["Mul7971","Res25791","Res90814","Zer55990","Min5686","Dot3621","Res98543","Max33384","Res92679","Fla74401","Glo53082","Glo87071","Res22621","Res96705","Glo68331","Den91139","Con51791","Min70162","Min49595"],Min49595,"Min49595")

Actual (Unparsed): [[0.0000000, 0.0886996]]

Expected (Unparsed): [[0.0,0.088699611192]]

Actual:   [[0, 0.0887]]

Expected: [[0, 0.0887]]