import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min38645 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Min38645 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave36205 = tf.keras.layers.Input(shape=([1, 1, 2]))

Min38645 = keras.layers.Minimum(name = 'Min38645', )([in0Min38645,in1Min38645])
Res67141 = keras.layers.Reshape((2, 2, 2), name = 'Res67141', )(Min38645)
Ave36205 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave36205', )(in0Ave36205)
Zer25649 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer25649', )(Ave36205)
Max52480 = keras.layers.Maximum(name = 'Max52480', )([Res67141,Zer25649])
model = tf.keras.models.Model(inputs=[in0Min38645,in1Min38645,in0Ave36205], outputs=Max52480)
in0Min38645 = tf.constant([[[[[0.9745], [0.912]], [[0.8575], [0.9759]]], [[[0.6538], [0.7827]], [[0.1351], [0.3873]]]]])
in1Min38645 = tf.constant([[[[[0.3817], [0.2017]], [[0.4666], [0.7199]]], [[[0.0609], [0.3376]], [[0.49], [0.6431]]]]])
in0Ave36205 = tf.constant([[[[1.0258, 1.0554]]]])
print (np.array2string(model.predict([in0Min38645,in1Min38645,in0Ave36205],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max52480.png')

LMin38645 = minimum_layer([[[[[[0.9745], [0.912]], [[0.8575], [0.9759]]], [[[0.6538], [0.7827]], [[0.1351], [0.3873]]]]], [[[[[0.3817], [0.2017]], [[0.4666], [0.7199]]], [[[0.0609], [0.3376]], [[0.49], [0.6431]]]]]], Min38645), 
LRes67141 = reshape_layer(Min38645, [2, 2, 2], Res67141), 
LAve36205 = average_pooling2D_layer([[[[1.0258, 1.0554]]]], 1, 1, Ave36205), 
LZer25649 = zero_padding2D_layer(Ave36205, 1, 0, 1, 0, Zer25649), 
LMax52480 = maximum_layer([Res67141,Zer25649], Max52480), 
exec_layers([LMin38645,LRes67141,LAve36205,LZer25649,LMax52480],["Min38645","Res67141","Ave36205","Zer25649","Max52480"],Max52480,"Max52480")

Actual (Unparsed): [[[[0.3817000, 0.2017000], [0.4666000, 0.7199000]], [[0.0609000, 0.3376000], [1.0258000, 1.0554000]]]]

Expected (Unparsed): [[[[0.3817,0.2017],[0.4666,0.7199]],[[0.0609,0.3376],[1.0258,1.0554]]]]

Actual:   [[[[0.3817, 0.2017], [0.4666, 0.7199]], [[0.0609, 0.3376], [1.0258, 1.0554]]]]

Expected: [[[[0.3817, 0.2017], [0.4666, 0.7199]], [[0.0609, 0.3376], [1.0258, 1.0554]]]]