import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add63420 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add63420 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Dot32460 = tf.keras.layers.Input(shape=([3]))
in1Dot32460 = tf.keras.layers.Input(shape=([3]))

Add63420 = keras.layers.Add(name = 'Add63420', )([in0Add63420,in1Add63420])
Res11966 = keras.layers.Reshape((1, 1), name = 'Res11966', )(Add63420)
Fla64245 = keras.layers.Flatten(name = 'Fla64245', )(Res11966)
Dot32460 = keras.layers.Dot(axes=(1, 1), name = 'Dot32460', )([in0Dot32460,in1Dot32460])
Add14507 = keras.layers.Add(name = 'Add14507', )([Fla64245,Dot32460])
Res85515 = keras.layers.Reshape((1, 1), name = 'Res85515', )(Add14507)
Per13414 = keras.layers.Permute((1,2), name = 'Per13414',)(Res85515)
Res90186 = keras.layers.Reshape((1, 1, 1), name = 'Res90186', )(Per13414)
Loc75324 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 1), name = 'Loc75324', )(Res90186)
model = tf.keras.models.Model(inputs=[in0Add63420,in1Add63420,in0Dot32460,in1Dot32460], outputs=Loc75324)
w = model.get_layer('Loc75324').get_weights() 
w[0] = np.array([[[0.6681, 0.8531]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc75324').set_weights(w) 
in0Add63420 = tf.constant([[[[0.7231]]]])
in1Add63420 = tf.constant([[[[0.6521]]]])
in0Dot32460 = tf.constant([[0.1163, 0.2179, 0.4452]])
in1Dot32460 = tf.constant([[0.6897, 0.9722, 0.6951]])
print (np.array2string(model.predict([in0Add63420,in1Add63420,in0Dot32460,in1Dot32460],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc75324.png')

LAdd63420 = add_layer([[[[[0.7231]]]], [[[[0.6521]]]]], Add63420), 
LRes11966 = reshape_layer(Add63420, [1, 1], Res11966), 
LFla64245 = flatten_layer(Res11966, Fla64245), 
LDot32460 = dot_layer([[0.1163, 0.2179, 0.4452]], [[0.6897, 0.9722, 0.6951]], 1, 1, Dot32460), 
LAdd14507 = add_layer([Fla64245,Dot32460], Add14507), 
LRes85515 = reshape_layer(Add14507, [1, 1], Res85515), 
LPer13414 = permute_layer(Res85515, 1,2, Per13414), 
LRes90186 = reshape_layer(Per13414, [1, 1, 1], Res90186), 
LLoc75324 = locally_connected2D_layer(Res90186, 1, 1,[[[0.6681, 0.8531]]],[[[0, 0]]], 1, 1, Loc75324), 
exec_layers([LAdd63420,LRes11966,LFla64245,LDot32460,LAdd14507,LRes85515,LPer13414,LRes90186,LLoc75324],["Add63420","Res11966","Fla64245","Dot32460","Add14507","Res85515","Per13414","Res90186","Loc75324"],Loc75324,"Loc75324")

Actual (Unparsed): [[[[1.3206420, 1.6863339]]]]

Expected (Unparsed): [[[[1.3206419619810001,1.6863338688310001]]]]

Actual:   [[[[1.3207, 1.6864]]]]

Expected: [[[[1.3207, 1.6864]]]]