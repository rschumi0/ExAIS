import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo13148 = tf.keras.layers.Input(shape=([2, 1]))
in0Con20043 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add96892 = tf.keras.layers.Input(shape=([2, 1]))
in1Add96892 = tf.keras.layers.Input(shape=([2, 1]))

Glo13148 = keras.layers.GlobalAveragePooling1D(name = 'Glo13148', )(in0Glo13148)
Res43477 = keras.layers.Reshape((1, 1), name = 'Res43477', )(Glo13148)
Res9014 = keras.layers.Reshape((1, 1, 1), name = 'Res9014', )(Res43477)
Con20043 = keras.layers.Concatenate(axis=3, name = 'Con20043', )([Res9014,in0Con20043])
Add96892 = keras.layers.Add(name = 'Add96892', )([in0Add96892,in1Add96892])
Glo76690 = keras.layers.GlobalAveragePooling1D(name = 'Glo76690', )(Add96892)
Res40857 = keras.layers.Reshape((1, 1), name = 'Res40857', )(Glo76690)
Res71368 = keras.layers.Reshape((1, 1, 1), name = 'Res71368', )(Res40857)
Con52439 = keras.layers.Conv2D(2, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con52439', )(Res71368)
Add59619 = keras.layers.Add(name = 'Add59619', )([Con20043,Con52439])
model = tf.keras.models.Model(inputs=[in0Glo13148,in0Con20043,in0Add96892,in1Add96892], outputs=Add59619)
w = model.get_layer('Con52439').get_weights() 
w[0] = np.array([[[[0.8365, 0.7547]]]])
w[1] = np.array([0, 0])
model.get_layer('Con52439').set_weights(w) 
in0Glo13148 = tf.constant([[[1.1359], [1.2818]]])
in0Con20043 = tf.constant([[[[0.1332]]]])
in0Add96892 = tf.constant([[[0.6961], [0.2369]]])
in1Add96892 = tf.constant([[[0.5838], [0.1436]]])
print (np.array2string(model.predict([in0Glo13148,in0Con20043,in0Add96892,in1Add96892],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add59619.png')

LGlo13148 = global_average_pooling1D_layer([[[1.1359], [1.2818]]], Glo13148), 
LRes43477 = reshape_layer(Glo13148, [1, 1], Res43477), 
LRes9014 = reshape_layer(Res43477, [1, 1, 1], Res9014), 
LCon20043 = concatenate_layer([Res9014,[[[[0.1332]]]]], 3, Con20043), 
LAdd96892 = add_layer([[[[0.6961], [0.2369]]], [[[0.5838], [0.1436]]]], Add96892), 
LGlo76690 = global_average_pooling1D_layer(Add96892, Glo76690), 
LRes40857 = reshape_layer(Glo76690, [1, 1], Res40857), 
LRes71368 = reshape_layer(Res40857, [1, 1, 1], Res71368), 
LCon52439 = conv2D_layer(Res71368, 1, 1,[[[[0.8365, 0.7547]]]],[0, 0], 1, 1, false, 1, 1, Con52439), 
LAdd59619 = add_layer([Con20043,Con52439], Add59619), 
exec_layers([LGlo13148,LRes43477,LRes9014,LCon20043,LAdd96892,LGlo76690,LRes40857,LRes71368,LCon52439,LAdd59619],["Glo13148","Res43477","Res9014","Con20043","Add96892","Glo76690","Res40857","Res71368","Con52439","Add59619"],Add59619,"Add59619")

Actual (Unparsed): [[[[1.9033123, 0.7597520]]]]

Expected (Unparsed): [[[[1.9033123,0.75975194]]]]

Actual:   [[[[1.9034, 0.7598]]]]

Expected: [[[[1.9034, 0.7598]]]]