import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max36603 = tf.keras.layers.Input(shape=([1, 1]))
in0PRe40476 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con54611 = tf.keras.layers.Input(shape=([2, 1, 3]))

Max36603 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max36603', )(in0Max36603)
Res30349 = keras.layers.Reshape((1, 1, 1), name = 'Res30349', )(Max36603)
Max18710 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 4), padding='same', name = 'Max18710', )(Res30349)
Con43476 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 1), padding='same', name = 'Con43476', )(Max18710)
Zer59188 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer59188', )(Con43476)
PRe40476 = keras.layers.PReLU(name = 'PRe40476', input_shape=(2, 1, 1))(in0PRe40476)
Con54611 = keras.layers.Concatenate(axis=3, name = 'Con54611', )([PRe40476,in0Con54611])
Add99102 = keras.layers.Add(name = 'Add99102', )([Zer59188,Con54611])
model = tf.keras.models.Model(inputs=[in0Max36603,in0PRe40476,in0Con54611], outputs=Add99102)
w = model.get_layer('Con43476').get_weights() 
w[0] = np.array([[[[0.7416], [0.0392], [0.3419], [0.7567]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con43476').set_weights(w) 
w = model.get_layer('PRe40476').get_weights() 
w[0] = np.array([[[0.4701]], [[0.7357]]])
model.get_layer('PRe40476').set_weights(w) 
in0Max36603 = tf.constant([[[1.0176]]])
in0PRe40476 = tf.constant([[[[0.5919]], [[0.4481]]]])
in0Con54611 = tf.constant([[[[0.8147, 0.8202, 0.8762]], [[0.964, 0.8948, 0.9723]]]])
print (np.array2string(model.predict([in0Max36603,in0PRe40476,in0Con54611],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add99102.png')

LMax36603 = max_pool1D_layer([[[1.0176]]], 1, 1, true, Max36603), 
LRes30349 = reshape_layer(Max36603, [1, 1, 1], Res30349), 
LMax18710 = max_pool2D_layer(Res30349, 1, 1, 1, 4, true, Max18710), 
LCon43476 = conv2D_transpose_layer(Max18710, 1, 1,[[[[0.7416], [0.0392], [0.3419], [0.7567]]]],[0, 0, 0, 0], 1, 1, true, Con43476), 
LZer59188 = zero_padding2D_layer(Con43476, 1, 0, 0, 0, Zer59188), 
LPRe40476 = prelu_layer([[[[0.5919]], [[0.4481]]]], [[[0.4701]], [[0.7357]]], PRe40476), 
LCon54611 = concatenate_layer([PRe40476,[[[[0.8147, 0.8202, 0.8762]], [[0.964, 0.8948, 0.9723]]]]], 3, Con54611), 
LAdd99102 = add_layer([Zer59188,Con54611], Add99102), 
exec_layers([LMax36603,LRes30349,LMax18710,LCon43476,LZer59188,LPRe40476,LCon54611,LAdd99102],["Max36603","Res30349","Max18710","Con43476","Zer59188","PRe40476","Con54611","Add99102"],Add99102,"Add99102")

Actual (Unparsed): [[[[0.5919000, 0.8147000, 0.8202000, 0.8762000]], [[1.2027522, 1.0038899, 1.2427175, 1.7423180]]]]

Expected (Unparsed): [[[[0.5919,0.8147,0.8202,0.8762]],[[1.2027521600000002,1.00388992,1.24271744,1.74231792]]]]

Actual:   [[[[0.5919, 0.8147, 0.8202, 0.8762]], [[1.2028, 1.0039, 1.2428, 1.7424]]]]

Expected: [[[[0.5919, 0.8147, 0.8202, 0.8762]], [[1.2028, 1.0039, 1.2428, 1.7424]]]]