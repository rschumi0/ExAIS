import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub31729 = tf.keras.layers.Input(shape=([2]))
in1Sub31729 = tf.keras.layers.Input(shape=([2]))
in0Ave86628 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Ave86628 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Sub31729 = keras.layers.Subtract(name = 'Sub31729', )([in0Sub31729,in1Sub31729])
Res48672 = keras.layers.Reshape((2, 1), name = 'Res48672', )(Sub31729)
Zer89361 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer89361', )(Res48672)
Res81890 = keras.layers.Reshape((4, 1, 1), name = 'Res81890', )(Zer89361)
Res31684 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res31684', )(Res81890)
Ave86628 = keras.layers.Average(name = 'Ave86628', )([in0Ave86628,in1Ave86628])
Zer39687 = keras.layers.ZeroPadding3D(padding=((2, 0), (0, 0), (0, 0)), name = 'Zer39687', )(Ave86628)
Min57779 = keras.layers.Minimum(name = 'Min57779', )([Res31684,Zer39687])
model = tf.keras.models.Model(inputs=[in0Sub31729,in1Sub31729,in0Ave86628,in1Ave86628], outputs=Min57779)
in0Sub31729 = tf.constant([[0.5944, 0.5709]])
in1Sub31729 = tf.constant([[0.382, 0.1237]])
in0Ave86628 = tf.constant([[[[[0.6715]]], [[[0.1252]]]]])
in1Ave86628 = tf.constant([[[[[0.6088]]], [[[0.4032]]]]])
print (np.array2string(model.predict([in0Sub31729,in1Sub31729,in0Ave86628,in1Ave86628],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min57779.png')

LSub31729 = subtract_layer([[0.5944, 0.5709]], [[0.382, 0.1237]], Sub31729), 
LRes48672 = reshape_layer(Sub31729, [2, 1], Res48672), 
LZer89361 = zero_padding1D_layer(Res48672, 1, 1, Zer89361), 
LRes81890 = reshape_layer(Zer89361, [4, 1, 1], Res81890), 
LRes31684 = reshape_layer(Res81890, [4, 1, 1, 1], Res31684), 
LAve86628 = average_layer([[[[[[0.6715]]], [[[0.1252]]]]], [[[[[0.6088]]], [[[0.4032]]]]]], Ave86628), 
LZer39687 = zero_padding3D_layer(Ave86628, 2, 0, 0, 0, 0, 0, Zer39687), 
LMin57779 = minimum_layer([Res31684,Zer39687], Min57779), 
exec_layers([LSub31729,LRes48672,LZer89361,LRes81890,LRes31684,LAve86628,LZer39687,LMin57779],["Sub31729","Res48672","Zer89361","Res81890","Res31684","Ave86628","Zer39687","Min57779"],Min57779,"Min57779")

Actual (Unparsed): [[[[[0.0000000]]], [[[0.0000000]]], [[[0.4472000]]], [[[0.0000000]]]]]

Expected (Unparsed): [[[[[0]]],[[[0]]],[[[0.44719999999999993]]],[[[0]]]]]

Actual:   [[[[[0]]], [[[0]]], [[[0.4472]]], [[[0]]]]]

Expected: [[[[[0]]], [[[0]]], [[[0.4472]]], [[[0]]]]]