import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep42831 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot67694 = tf.keras.layers.Input(shape=([3]))
in1Dot67694 = tf.keras.layers.Input(shape=([3]))
in0Con22990 = tf.keras.layers.Input(shape=([3]))

Sep42831 = keras.layers.SeparableConv1D(4, (1),strides=(1), padding='valid', name = 'Sep42831', )(in0Sep42831)
Fla17339 = keras.layers.Flatten(name = 'Fla17339', )(Sep42831)
Dot67694 = keras.layers.Dot(axes=(1, 1), name = 'Dot67694', )([in0Dot67694,in1Dot67694])
Con22990 = keras.layers.Concatenate(axis=1, name = 'Con22990', )([Dot67694,in0Con22990])
Ave25293 = keras.layers.Average(name = 'Ave25293', )([Fla17339,Con22990])
model = tf.keras.models.Model(inputs=[in0Sep42831,in0Dot67694,in1Dot67694,in0Con22990], outputs=Ave25293)
w = model.get_layer('Sep42831').get_weights() 
w[0] = np.array([[[0.6819]]])
w[1] = np.array([[[0.7392, 0.7411, 0.882, 0.3086]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep42831').set_weights(w) 
in0Sep42831 = tf.constant([[[0.6273]]])
in0Dot67694 = tf.constant([[0.868, 0.0946, 0.7161]])
in1Dot67694 = tf.constant([[0.8956, 0.7885, 0.4464]])
in0Con22990 = tf.constant([[0.2827, 0.937, 0.4874]])
print (np.array2string(model.predict([in0Sep42831,in0Dot67694,in1Dot67694,in0Con22990],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave25293.png')

LSep42831 = separable_conv1D_layer([[[0.6273]]], 1,[[[[0.6819]]],[[[0.7392, 0.7411, 0.882, 0.3086]]]],[0, 0, 0, 0], 1, false, Sep42831), 
LFla17339 = flatten_layer(Sep42831, Fla17339), 
LDot67694 = dot_layer([[0.868, 0.0946, 0.7161]], [[0.8956, 0.7885, 0.4464]], 1, 1, Dot67694), 
LCon22990 = concatenate_layer([Dot67694,[[0.2827, 0.937, 0.4874]]], 1, Con22990), 
LAve25293 = average_layer([Fla17339,Con22990], Ave25293), 
exec_layers([LSep42831,LFla17339,LDot67694,LCon22990,LAve25293],["Sep42831","Fla17339","Dot67694","Con22990","Ave25293"],Ave25293,"Ave25293")

Actual (Unparsed): [[0.7439185, 0.2998549, 0.6571403, 0.3097027]]

Expected (Unparsed): [[0.7439185395519999,0.29985493762849996,0.65714033867,0.30970273074099997]]

Actual:   [[0.744, 0.2999, 0.6572, 0.3098]]

Expected: [[0.744, 0.2999, 0.6572, 0.3098]]