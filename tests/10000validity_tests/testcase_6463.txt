import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add26254 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Add26254 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Add26254 = keras.layers.Add(name = 'Add26254', )([in0Add26254,in1Add26254])
Res81903 = keras.layers.Reshape((1, 2, 2), name = 'Res81903', )(Add26254)
Glo16846 = keras.layers.GlobalAveragePooling2D(name = 'Glo16846', )(Res81903)
Res3104 = keras.layers.Reshape((2, 1), name = 'Res3104', )(Glo16846)
Res91429 = keras.layers.Reshape((2, 1, 1), name = 'Res91429', )(Res3104)
Res81942 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res81942', )(Res91429)
Con93297 = keras.layers.Conv3D(3, (2, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con93297', )(Res81942)
model = tf.keras.models.Model(inputs=[in0Add26254,in1Add26254], outputs=Con93297)
w = model.get_layer('Con93297').get_weights() 
w[0] = np.array([[[[[0.1021, 0.4905, 0.3927]]]], [[[[0.6692, 0.2069, 0.6572]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con93297').set_weights(w) 
in0Add26254 = tf.constant([[[[[0.4446, 0.0575]], [[0.1676, 0.9873]]]]])
in1Add26254 = tf.constant([[[[[0.1244, 0.5746]], [[0.4822, 0.0433]]]]])
print (np.array2string(model.predict([in0Add26254,in1Add26254],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con93297.png')

LAdd26254 = add_layer([[[[[[0.4446, 0.0575]], [[0.1676, 0.9873]]]]], [[[[[0.1244, 0.5746]], [[0.4822, 0.0433]]]]]], Add26254), 
LRes81903 = reshape_layer(Add26254, [1, 2, 2], Res81903), 
LGlo16846 = global_average_pooling2D_layer(Res81903, Glo16846), 
LRes3104 = reshape_layer(Glo16846, [2, 1], Res3104), 
LRes91429 = reshape_layer(Res3104, [2, 1, 1], Res91429), 
LRes81942 = reshape_layer(Res91429, [2, 1, 1, 1], Res81942), 
LCon93297 = conv3D_layer(Res81942, 2, 1, 1,[[[[[0.1021, 0.4905, 0.3927]]]], [[[[0.6692, 0.2069, 0.6572]]]]],[0, 0, 0], 1, 1, 1, true, 1, 1, 1, Con93297), 
exec_layers([LAdd26254,LRes81903,LGlo16846,LRes3104,LRes91429,LRes81942,LCon93297],["Add26254","Res81903","Glo16846","Res3104","Res91429","Res81942","Con93297"],Con93297,"Con93297")

Actual (Unparsed): [[[[[0.6185591, 0.4709170, 0.7856746]]], [[[0.0848808, 0.4077772, 0.3264711]]]]]

Expected (Unparsed): [[[[[0.61855916,0.470917015,0.7856746]]],[[[0.084880835,0.407777175,0.326471145]]]]]

Actual:   [[[[[0.6186, 0.471, 0.7857]]], [[[0.0849, 0.4078, 0.3265]]]]]

Expected: [[[[[0.6186, 0.471, 0.7857]]], [[[0.0849, 0.4078, 0.3265]]]]]