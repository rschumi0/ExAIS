import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer28394 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0ReL5039 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Zer28394 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer28394', )(in0Zer28394)
Res79607 = keras.layers.Reshape((6, 5, 1, 1), name = 'Res79607', )(Zer28394)
Cro91985 = keras.layers.Cropping3D(cropping=((4, 0), (0, 2), (0, 0)), name = 'Cro91985', )(Res79607)
ELU80189 = keras.layers.ELU(alpha=-6.785177787634014, name = 'ELU80189', )(Cro91985)
Res53046 = keras.layers.Reshape((2, 3, 1), name = 'Res53046', )(ELU80189)
Res30833 = keras.layers.Reshape((2, 3), name = 'Res30833', )(Res53046)
ReL5039 = keras.layers.ReLU(max_value=5.090986820698151, negative_slope=2.904663838032097, threshold=2.969970406120701, name = 'ReL5039', input_shape=(2, 2, 2, 2))(in0ReL5039)
Res81479 = keras.layers.Reshape((2, 2, 4), name = 'Res81479', )(ReL5039)
Res78414 = keras.layers.Reshape((2, 8), name = 'Res78414', )(Res81479)
Dot93034 = keras.layers.Dot(axes=(1, 1), name = 'Dot93034', )([Res30833,Res78414])
model = tf.keras.models.Model(inputs=[in0Zer28394,in0ReL5039], outputs=Dot93034)
in0Zer28394 = tf.constant([[[[1.1962], [1.5107], [1.1392]], [[1.7843], [1.8167], [1.5377]], [[1.3631], [1.8118], [1.3821]], [[1.1366], [1.873], [1.5229]]]])
in0ReL5039 = tf.constant([[[[[0.9893, 0.6333], [0.2224, 0.5083]], [[0.1064, 0.7345], [0.3615, 0.1202]]], [[[0.1228, 0.5701], [0.5458, 0.6919]], [[0.2606, 0.7866], [0.3932, 0.8215]]]]])
print (np.array2string(model.predict([in0Zer28394,in0ReL5039],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot93034.png')

LZer28394 = zero_padding2D_layer([[[[1.1962], [1.5107], [1.1392]], [[1.7843], [1.8167], [1.5377]], [[1.3631], [1.8118], [1.3821]], [[1.1366], [1.873], [1.5229]]]], 1, 1, 1, 1, Zer28394), 
LRes79607 = reshape_layer(Zer28394, [6, 5, 1, 1], Res79607), 
LCro91985 = cropping3D_layer(Res79607, 4, 0, 0, 2, 0, 0, Cro91985), 
LELU80189 = elu_layer(Cro91985, -6.785177787634014, ELU80189), 
LRes53046 = reshape_layer(ELU80189, [2, 3, 1], Res53046), 
LRes30833 = reshape_layer(Res53046, [2, 3], Res30833), 
LReL5039 = relu_layer([[[[[0.9893, 0.6333], [0.2224, 0.5083]], [[0.1064, 0.7345], [0.3615, 0.1202]]], [[[0.1228, 0.5701], [0.5458, 0.6919]], [[0.2606, 0.7866], [0.3932, 0.8215]]]]], 5.090986820698151, 2.904663838032097, 2.969970406120701, ReL5039), 
LRes81479 = reshape_layer(ReL5039, [2, 2, 4], Res81479), 
LRes78414 = reshape_layer(Res81479, [2, 8], Res78414), 
LDot93034 = dot_layer(Res30833,Res78414, 1, 1, Dot93034), 
exec_layers([LZer28394,LRes79607,LCro91985,LELU80189,LRes53046,LRes30833,LReL5039,LRes81479,LRes78414,LDot93034],["Zer28394","Res79607","Cro91985","ELU80189","Res53046","Res30833","ReL5039","Res81479","Res78414","Dot93034"],Dot93034,"Dot93034")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [-6.5390664, -7.7143794, -9.0709415, -8.1270595, -9.4539087, -7.3802736, -8.6117111, -9.4083488], [-10.7757094, -12.7125045, -14.9479794, -13.3925589, -15.5790699, -12.1619325, -14.1912149, -15.5039919]]]

Expected (Unparsed): [[[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[-6.539066324447183,-7.714379291364575,-9.070941364697036,-8.127059406152986,-9.453908511220682,-7.380273470431879,-8.611710932960495,-9.40834862654804],[-10.775709331065963,-12.712504322299708,-14.947979215271467,-13.392558743378974,-15.579069718033026,-12.161932262993936,-14.191214655494461,-15.503991709945874]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0], [-6.539, -7.7143, -9.0709, -8.127, -9.4539, -7.3802, -8.6117, -9.4083], [-10.7757, -12.7125, -14.9479, -13.3925, -15.579, -12.1619, -14.1912, -15.5039]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0], [-6.539, -7.7143, -9.0709, -8.127, -9.4539, -7.3802, -8.6117, -9.4083], [-10.7757, -12.7125, -14.9479, -13.3925, -15.579, -12.1619, -14.1912, -15.5039]]]