import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con96661 = tf.keras.layers.Input(shape=([1, 2, 2]))

Con96661 = keras.layers.Conv2DTranspose(3, (1, 2),strides=(1, 1), padding='same', name = 'Con96661', )(in0Con96661)
Res32426 = keras.layers.Reshape((1, 6), name = 'Res32426', )(Con96661)
Ave59050 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave59050', )(Res32426)
Res4642 = keras.layers.Reshape((1, 6, 1), name = 'Res4642', )(Ave59050)
Max59531 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 6), padding='valid', name = 'Max59531', )(Res4642)
model = tf.keras.models.Model(inputs=[in0Con96661], outputs=Max59531)
w = model.get_layer('Con96661').get_weights() 
w[0] = np.array([[[[0.8212, 0.4892], [0.1128, 0.9236], [0.0236, 0.9275]], [[0.1128, 0.8575], [0.4384, 0.6263], [0.6246, 0.436]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con96661').set_weights(w) 
in0Con96661 = tf.constant([[[[0.0182, 0.7656], [0.1275, 0.3557]]]])
print (np.array2string(model.predict([in0Con96661],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max59531.png')

LCon96661 = conv2D_transpose_layer([[[[0.0182, 0.7656], [0.1275, 0.3557]]]], 1, 2,[[[[0.8212, 0.4892], [0.1128, 0.9236], [0.0236, 0.9275]], [[0.1128, 0.8575], [0.4384, 0.6263], [0.6246, 0.436]]]],[0, 0, 0], 1, 1, true, Con96661), 
LRes32426 = reshape_layer(Con96661, [1, 6], Res32426), 
LAve59050 = average_pooling1D_layer(Res32426, 1, 1, false, Ave59050), 
LRes4642 = reshape_layer(Ave59050, [1, 6, 1], Res4642), 
LMax59531 = max_pool2D_layer(Res4642, 1, 1, 1, 6, false, Max59531), 
exec_layers([LCon96661,LRes32426,LAve59050,LRes4642,LMax59531],["Con96661","Res32426","Ave59050","Res4642","Max59531"],Max59531,"Max59531")

Actual (Unparsed): [[[[0.3894774]]]]

Expected (Unparsed): [[[[0.38947736]]]]

Actual:   [[[[0.3895]]]]

Expected: [[[[0.3895]]]]