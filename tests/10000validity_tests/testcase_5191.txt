import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add61241 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add61241 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con83051 = tf.keras.layers.Input(shape=([7]))
in0Add62973 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Add62973 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Ave22284 = tf.keras.layers.Input(shape=([2, 1]))
in0Max18746 = tf.keras.layers.Input(shape=([2, 2]))
in0Con88193 = tf.keras.layers.Input(shape=([1]))
in0Con39996 = tf.keras.layers.Input(shape=([6]))

Add61241 = keras.layers.Add(name = 'Add61241', )([in0Add61241,in1Add61241])
Glo2787 = keras.layers.GlobalAveragePooling2D(name = 'Glo2787', )(Add61241)
Con83051 = keras.layers.Concatenate(axis=1, name = 'Con83051', )([Glo2787,in0Con83051])
Add62973 = keras.layers.Add(name = 'Add62973', )([in0Add62973,in1Add62973])
Res32043 = keras.layers.Reshape((2, 2, 2), name = 'Res32043', )(Add62973)
Res72357 = keras.layers.Reshape((2, 4), name = 'Res72357', )(Res32043)
Fla57953 = keras.layers.Flatten(name = 'Fla57953', )(Res72357)
Ave22284 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave22284', )(in0Ave22284)
Fla51583 = keras.layers.Flatten(name = 'Fla51583', )(Ave22284)
Max18746 = keras.layers.MaxPool1D(pool_size=(1), strides=(2), padding='valid', name = 'Max18746', )(in0Max18746)
Res47155 = keras.layers.Reshape((1, 2, 1), name = 'Res47155', )(Max18746)
Res87100 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res87100', )(Res47155)
Glo29084 = keras.layers.GlobalMaxPool3D(name = 'Glo29084', )(Res87100)
Con88193 = keras.layers.Concatenate(axis=1, name = 'Con88193', )([Glo29084,in0Con88193])
Mul26615 = keras.layers.Multiply(name = 'Mul26615', )([Fla51583,Con88193])
Con39996 = keras.layers.Concatenate(axis=1, name = 'Con39996', )([Mul26615,in0Con39996])
Mul24142 = keras.layers.Multiply(name = 'Mul24142', )([Fla57953,Con39996])
Max11916 = keras.layers.Maximum(name = 'Max11916', )([Con83051,Mul24142])
model = tf.keras.models.Model(inputs=[in0Add61241,in1Add61241,in0Con83051,in0Add62973,in1Add62973,in0Ave22284,in0Max18746,in0Con88193,in0Con39996], outputs=Max11916)
in0Add61241 = tf.constant([[[[0.747], [0.0244]], [[0.7504], [0.3619]]]])
in1Add61241 = tf.constant([[[[0.054], [0.9475]], [[0.703], [0.4113]]]])
in0Con83051 = tf.constant([[0.8879, 0.4162, 0.8358, 0.3559, 0.1109, 0.2685, 0.2542]])
in0Add62973 = tf.constant([[[[[0.9883, 0.4685]], [[0.6854, 0.5579]]], [[[0.3959, 0.5485]], [[0.3908, 0.3569]]]]])
in1Add62973 = tf.constant([[[[[0.9007, 0.7958]], [[0.9183, 0.6258]]], [[[0.5592, 0.6191]], [[0.9045, 0.2932]]]]])
in0Ave22284 = tf.constant([[[1.9682], [1.7485]]])
in0Max18746 = tf.constant([[[1.1811, 1.9865], [1.1633, 1.009]]])
in0Con88193 = tf.constant([[0.2041]])
in0Con39996 = tf.constant([[0.9345, 0.1632, 0.0071, 0.77, 0.0935, 0.1866]])
print (np.array2string(model.predict([in0Add61241,in1Add61241,in0Con83051,in0Add62973,in1Add62973,in0Ave22284,in0Max18746,in0Con88193,in0Con39996],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max11916.png')

LAdd61241 = add_layer([[[[[0.747], [0.0244]], [[0.7504], [0.3619]]]], [[[[0.054], [0.9475]], [[0.703], [0.4113]]]]], Add61241), 
LGlo2787 = global_average_pooling2D_layer(Add61241, Glo2787), 
LCon83051 = concatenate_layer([Glo2787,[[0.8879, 0.4162, 0.8358, 0.3559, 0.1109, 0.2685, 0.2542]]], 1, Con83051), 
LAdd62973 = add_layer([[[[[[0.9883, 0.4685]], [[0.6854, 0.5579]]], [[[0.3959, 0.5485]], [[0.3908, 0.3569]]]]], [[[[[0.9007, 0.7958]], [[0.9183, 0.6258]]], [[[0.5592, 0.6191]], [[0.9045, 0.2932]]]]]], Add62973), 
LRes32043 = reshape_layer(Add62973, [2, 2, 2], Res32043), 
LRes72357 = reshape_layer(Res32043, [2, 4], Res72357), 
LFla57953 = flatten_layer(Res72357, Fla57953), 
LAve22284 = average_pooling1D_layer([[[1.9682], [1.7485]]], 1, Ave22284), 
LFla51583 = flatten_layer(Ave22284, Fla51583), 
LMax18746 = max_pool1D_layer([[[1.1811, 1.9865], [1.1633, 1.009]]], 1, 2, false, Max18746), 
LRes47155 = reshape_layer(Max18746, [1, 2, 1], Res47155), 
LRes87100 = reshape_layer(Res47155, [1, 2, 1, 1], Res87100), 
LGlo29084 = global_max_pool3D_layer(Res87100, Glo29084), 
LCon88193 = concatenate_layer([Glo29084,[[0.2041]]], 1, Con88193), 
LMul26615 = multiply_layer([Fla51583,Con88193], Mul26615), 
LCon39996 = concatenate_layer([Mul26615,[[0.9345, 0.1632, 0.0071, 0.77, 0.0935, 0.1866]]], 1, Con39996), 
LMul24142 = multiply_layer([Fla57953,Con39996], Mul24142), 
LMax11916 = maximum_layer([Con83051,Mul24142], Max11916), 
exec_layers([LAdd61241,LGlo2787,LCon83051,LAdd62973,LRes32043,LRes72357,LFla57953,LAve22284,LFla51583,LMax18746,LRes47155,LRes87100,LGlo29084,LCon88193,LMul26615,LCon39996,LMul24142,LMax11916],["Add61241","Glo2787","Con83051","Add62973","Res32043","Res72357","Fla57953","Ave22284","Fla51583","Max18746","Res47155","Res87100","Glo29084","Con88193","Mul26615","Con39996","Mul24142","Max11916"],Max11916,"Max11916")

Actual (Unparsed): [[7.3856675, 0.8879000, 1.4986576, 0.8358000, 0.3559000, 0.8990520, 0.2685000, 0.2542000]]

Expected (Unparsed): [[7.385667547699999,0.8879,1.49865765,0.8358,0.3559,0.899052,0.2685,0.2542]]

Actual:   [[7.3857, 0.8879, 1.4987, 0.8358, 0.3559, 0.8991, 0.2685, 0.2542]]

Expected: [[7.3857, 0.8879, 1.4987, 0.8358, 0.3559, 0.8991, 0.2685, 0.2542]]