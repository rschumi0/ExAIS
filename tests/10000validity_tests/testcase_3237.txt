import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo79638 = tf.keras.layers.Input(shape=([2, 1]))

Glo79638 = keras.layers.GlobalAveragePooling1D(name = 'Glo79638', )(in0Glo79638)
Res89463 = keras.layers.Reshape((1, 1), name = 'Res89463', )(Glo79638)
Res75831 = keras.layers.Reshape((1, 1, 1), name = 'Res75831', )(Res89463)
Res21597 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res21597', )(Res75831)
Cro90139 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 0)), name = 'Cro90139', )(Res21597)
Zer923 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer923', )(Cro90139)
Con38280 = keras.layers.Conv3D(4, (2, 2, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con38280', )(Zer923)
model = tf.keras.models.Model(inputs=[in0Glo79638], outputs=Con38280)
w = model.get_layer('Con38280').get_weights() 
w[0] = np.array([[[[[0.6791, 0.6229, 0.4856, 0.1429]]], [[[0.8428, 0.6671, 0.3791, 0.6845]]]], [[[[0.0927, 0.9096, 0.5185, 0.2234]]], [[[0.9685, 0.3249, 0.1068, 0.6212]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con38280').set_weights(w) 
in0Glo79638 = tf.constant([[[1.9962], [1.4887]]])
print (np.array2string(model.predict([in0Glo79638],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con38280.png')

LGlo79638 = global_average_pooling1D_layer([[[1.9962], [1.4887]]], Glo79638), 
LRes89463 = reshape_layer(Glo79638, [1, 1], Res89463), 
LRes75831 = reshape_layer(Res89463, [1, 1, 1], Res75831), 
LRes21597 = reshape_layer(Res75831, [1, 1, 1, 1], Res21597), 
LCro90139 = cropping3D_layer(Res21597, 0, 0, 0, 0, 0, 0, Cro90139), 
LZer923 = zero_padding3D_layer(Cro90139, 1, 1, 1, 1, 1, 1, Zer923), 
LCon38280 = conv3D_layer(Zer923, 2, 2, 1,[[[[[0.6791, 0.6229, 0.4856, 0.1429]]], [[[0.8428, 0.6671, 0.3791, 0.6845]]]], [[[[0.0927, 0.9096, 0.5185, 0.2234]]], [[[0.9685, 0.3249, 0.1068, 0.6212]]]]],[0, 0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con38280), 
exec_layers([LGlo79638,LRes89463,LRes75831,LRes21597,LCro90139,LZer923,LCon38280],["Glo79638","Res89463","Res75831","Res21597","Cro90139","Zer923","Con38280"],Con38280,"Con38280")

Actual (Unparsed): [[[[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.6875628, 0.5661220, 0.1860937, 1.0824099], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.1615251, 1.5849325, 0.9034603, 0.3892633], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.4685369, 1.1623884, 0.6605628, 1.1927070], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.1832978, 1.0853721, 0.8461337, 0.2489961], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.0,0.0,0.0,0.0],[1.6875628249999999,0.566122005,0.18609366,1.0824099399999998],[0.0,0.0,0.0,0.0]],[[0.0,0.0,0.0,0.0],[0.161525115,1.5849325199999997,0.9034603249999998,0.38926332999999996],[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0],[1.46853686,1.162388395,0.6605627949999999,1.1927070249999998],[0.0,0.0,0.0,0.0]],[[0.0,0.0,0.0,0.0],[1.1832977949999999,1.0853721049999998,0.8461337199999999,0.24899610499999997],[0.0,0.0,0.0,0.0]]]]]

Actual:   [[[[[0, 0, 0, 0], [1.6876, 0.5662, 0.1861, 1.0825], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.1616, 1.585, 0.9035, 0.3893], [0, 0, 0, 0]]], [[[0, 0, 0, 0], [1.4686, 1.1624, 0.6606, 1.1928], [0, 0, 0, 0]], [[0, 0, 0, 0], [1.1833, 1.0854, 0.8462, 0.249], [0, 0, 0, 0]]]]]

Expected: [[[[[0, 0, 0, 0], [1.6876, 0.5662, 0.1861, 1.0825], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.1616, 1.585, 0.9035, 0.3893], [0, 0, 0, 0]]], [[[0, 0, 0, 0], [1.4686, 1.1624, 0.6606, 1.1928], [0, 0, 0, 0]], [[0, 0, 0, 0], [1.1833, 1.0854, 0.8462, 0.249], [0, 0, 0, 0]]]]]