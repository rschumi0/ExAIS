import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min69655 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min69655 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Min56542 = tf.keras.layers.Input(shape=([1, 2]))
in1Min56542 = tf.keras.layers.Input(shape=([1, 2]))
in0Mul69510 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul69510 = tf.keras.layers.Input(shape=([2, 1, 1]))

Min69655 = keras.layers.Minimum(name = 'Min69655', )([in0Min69655,in1Min69655])
Up_42537 = keras.layers.UpSampling3D(size=(2, 1, 2), name = 'Up_42537', )(Min69655)
Sof64195 = keras.layers.Softmax(axis=1, name = 'Sof64195', )(Up_42537)
Res8864 = keras.layers.Reshape((2, 1, 2), name = 'Res8864', )(Sof64195)
Res21163 = keras.layers.Reshape((2, 2), name = 'Res21163', )(Res8864)
Min56542 = keras.layers.Minimum(name = 'Min56542', )([in0Min56542,in1Min56542])
Sof8699 = keras.layers.Softmax(axis=1, name = 'Sof8699', )(Min56542)
Res34752 = keras.layers.Reshape((1, 2, 1), name = 'Res34752', )(Sof8699)
Zer73478 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer73478', )(Res34752)
Mul69510 = keras.layers.Multiply(name = 'Mul69510', )([in0Mul69510,in1Mul69510])
Zer76990 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer76990', )(Mul69510)
Max51620 = keras.layers.Maximum(name = 'Max51620', )([Zer73478,Zer76990])
Res20811 = keras.layers.Reshape((2, 3), name = 'Res20811', )(Max51620)
Dot71541 = keras.layers.Dot(axes=(1, 1), name = 'Dot71541', )([Res21163,Res20811])
model = tf.keras.models.Model(inputs=[in0Min69655,in1Min69655,in0Min56542,in1Min56542,in0Mul69510,in1Mul69510], outputs=Dot71541)
in0Min69655 = tf.constant([[[[[0.7213]]]]])
in1Min69655 = tf.constant([[[[[0.894]]]]])
in0Min56542 = tf.constant([[[0.2175, 0.6337]]])
in1Min56542 = tf.constant([[[0.2767, 0.1585]]])
in0Mul69510 = tf.constant([[[[0.6467]], [[0.2047]]]])
in1Mul69510 = tf.constant([[[[0.4315]], [[0.3318]]]])
print (np.array2string(model.predict([in0Min69655,in1Min69655,in0Min56542,in1Min56542,in0Mul69510,in1Mul69510],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot71541.png')

LMin69655 = minimum_layer([[[[[[0.7213]]]]], [[[[[0.894]]]]]], Min69655), 
LUp_42537 = up_sampling3D_layer(Min69655, 2, 1, 2, Up_42537), 
LSof64195 = softmax_layer(Up_42537, 1, Sof64195), 
LRes8864 = reshape_layer(Sof64195, [2, 1, 2], Res8864), 
LRes21163 = reshape_layer(Res8864, [2, 2], Res21163), 
LMin56542 = minimum_layer([[[[0.2175, 0.6337]]], [[[0.2767, 0.1585]]]], Min56542), 
LSof8699 = softmax_layer(Min56542, 1, Sof8699), 
LRes34752 = reshape_layer(Sof8699, [1, 2, 1], Res34752), 
LZer73478 = zero_padding2D_layer(Res34752, 1, 0, 1, 0, Zer73478), 
LMul69510 = multiply_layer([[[[[0.6467]], [[0.2047]]]], [[[[0.4315]], [[0.3318]]]]], Mul69510), 
LZer76990 = zero_padding2D_layer(Mul69510, 0, 0, 2, 0, Zer76990), 
LMax51620 = maximum_layer([Zer73478,Zer76990], Max51620), 
LRes20811 = reshape_layer(Max51620, [2, 3], Res20811), 
LDot71541 = dot_layer(Res21163,Res20811, 1, 1, Dot71541), 
exec_layers([LMin69655,LUp_42537,LSof64195,LRes8864,LRes21163,LMin56542,LSof8699,LRes34752,LZer73478,LMul69510,LZer76990,LMax51620,LRes20811,LDot71541],["Min69655","Up_42537","Sof64195","Res8864","Res21163","Min56542","Sof8699","Res34752","Zer73478","Mul69510","Zer76990","Max51620","Res20811","Dot71541"],Dot71541,"Dot71541")

Actual (Unparsed): [[[0.0000000, 0.5000000, 0.6395255], [0.0000000, 0.5000000, 0.6395255]]]

Expected (Unparsed): [[[0.0,0.5,0.639525525],[0.0,0.5,0.639525525]]]

Actual:   [[[0, 0.5, 0.6396], [0, 0.5, 0.6396]]]

Expected: [[[0, 0.5, 0.6396], [0, 0.5, 0.6396]]]