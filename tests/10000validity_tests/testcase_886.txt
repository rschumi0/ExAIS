import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max40540 = tf.keras.layers.Input(shape=([2, 1]))
in1Max40540 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul12928 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Mul12928 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Add13369 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add13369 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con44384 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0Sub37592 = tf.keras.layers.Input(shape=([3, 2, 2]))
in1Sub37592 = tf.keras.layers.Input(shape=([3, 2, 2]))

Max40540 = keras.layers.Maximum(name = 'Max40540', )([in0Max40540,in1Max40540])
Res24771 = keras.layers.Reshape((2, 1, 1), name = 'Res24771', )(Max40540)
Mul12928 = keras.layers.Multiply(name = 'Mul12928', )([in0Mul12928,in1Mul12928])
Res63761 = keras.layers.Reshape((2, 1, 1), name = 'Res63761', )(Mul12928)
Sub22539 = keras.layers.Subtract(name = 'Sub22539', )([Res24771,Res63761])
Add13369 = keras.layers.Add(name = 'Add13369', )([in0Add13369,in1Add13369])
Ave64423 = keras.layers.Average(name = 'Ave64423', )([Sub22539,Add13369])
Zer98396 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer98396', )(Ave64423)
Con44384 = keras.layers.Concatenate(axis=3, name = 'Con44384', )([Zer98396,in0Con44384])
Sub37592 = keras.layers.Subtract(name = 'Sub37592', )([in0Sub37592,in1Sub37592])
Add88399 = keras.layers.Add(name = 'Add88399', )([Con44384,Sub37592])
model = tf.keras.models.Model(inputs=[in0Max40540,in1Max40540,in0Mul12928,in1Mul12928,in0Add13369,in1Add13369,in0Con44384,in0Sub37592,in1Sub37592], outputs=Add88399)
in0Max40540 = tf.constant([[[0.6317], [0.8163]]])
in1Max40540 = tf.constant([[[0.6268], [0.5201]]])
in0Mul12928 = tf.constant([[[[[0.9073, 0.6891]]]]])
in1Mul12928 = tf.constant([[[[[0.2595, 0.7508]]]]])
in0Add13369 = tf.constant([[[[0.3653]], [[0.3929]]]])
in1Add13369 = tf.constant([[[[0.7064]], [[0.17]]]])
in0Con44384 = tf.constant([[[[0.8781], [0.2227]], [[0.9176], [0.4849]], [[0.9031], [0.6103]]]])
in0Sub37592 = tf.constant([[[[0.7253, 0.1591], [0.2275, 0.1621]], [[0.1415, 0.0559], [0.3038, 0.595]], [[0.6721, 0.8663], [0.003, 0.3327]]]])
in1Sub37592 = tf.constant([[[[0.4794, 0.9817], [0.4133, 0.0754]], [[0.0536, 0.7831], [0.7237, 0.03]], [[0.2367, 0.0294], [0.4635, 0.5519]]]])
print (np.array2string(model.predict([in0Max40540,in1Max40540,in0Mul12928,in1Mul12928,in0Add13369,in1Add13369,in0Con44384,in0Sub37592,in1Sub37592],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add88399.png')

LMax40540 = maximum_layer([[[[0.6317], [0.8163]]], [[[0.6268], [0.5201]]]], Max40540), 
LRes24771 = reshape_layer(Max40540, [2, 1, 1], Res24771), 
LMul12928 = multiply_layer([[[[[[0.9073, 0.6891]]]]], [[[[[0.2595, 0.7508]]]]]], Mul12928), 
LRes63761 = reshape_layer(Mul12928, [2, 1, 1], Res63761), 
LSub22539 = subtract_layer(Res24771,Res63761, Sub22539), 
LAdd13369 = add_layer([[[[[0.3653]], [[0.3929]]]], [[[[0.7064]], [[0.17]]]]], Add13369), 
LAve64423 = average_layer([Sub22539,Add13369], Ave64423), 
LZer98396 = zero_padding2D_layer(Ave64423, 1, 0, 1, 0, Zer98396), 
LCon44384 = concatenate_layer([Zer98396,[[[[0.8781], [0.2227]], [[0.9176], [0.4849]], [[0.9031], [0.6103]]]]], 3, Con44384), 
LSub37592 = subtract_layer([[[[0.7253, 0.1591], [0.2275, 0.1621]], [[0.1415, 0.0559], [0.3038, 0.595]], [[0.6721, 0.8663], [0.003, 0.3327]]]], [[[[0.4794, 0.9817], [0.4133, 0.0754]], [[0.0536, 0.7831], [0.7237, 0.03]], [[0.2367, 0.0294], [0.4635, 0.5519]]]], Sub37592), 
LAdd88399 = add_layer([Con44384,Sub37592], Add88399), 
exec_layers([LMax40540,LRes24771,LMul12928,LRes63761,LSub22539,LAdd13369,LAve64423,LZer98396,LCon44384,LSub37592,LAdd88399],["Max40540","Res24771","Mul12928","Res63761","Sub22539","Add13369","Ave64423","Zer98396","Con44384","Sub37592","Add88399"],Add88399,"Add88399")

Actual (Unparsed): [[[[0.2459000, 0.0555000], [-0.1858000, 0.3094000]], [[0.0879000, 0.1904000], [0.3140778, 1.0499000]], [[0.4354000, 1.7400000], [-0.0295882, 0.3911000]]]]

Expected (Unparsed): [[[[0.24589999999999995,0.055499999999999994],[-0.1858,0.3094]],[[0.08789999999999998,0.1903999999999999],[0.3140778250000001,1.0499]],[[0.4354,1.74],[-0.029588139999999985,0.3911]]]]

Actual:   [[[[0.2459, 0.0555], [-0.1858, 0.3094]], [[0.0879, 0.1904], [0.3141, 1.0499]], [[0.4354, 1.74], [-0.0295, 0.3911]]]]

Expected: [[[[0.2459, 0.0555], [-0.1858, 0.3094]], [[0.0879, 0.1904], [0.3141, 1.0499]], [[0.4354, 1.74], [-0.0295, 0.3911]]]]