import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con73308 = tf.keras.layers.Input(shape=([1, 1]))
in0Add26241 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add26241 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add7483 = tf.keras.layers.Input(shape=([2, 1]))
in1Add7483 = tf.keras.layers.Input(shape=([2, 1]))
in0Con89272 = tf.keras.layers.Input(shape=([2, 2]))

Con73308 = keras.layers.Conv1D(3, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con73308', )(in0Con73308)
Res26324 = keras.layers.Reshape((1, 3, 1), name = 'Res26324', )(Con73308)
Add26241 = keras.layers.Add(name = 'Add26241', )([in0Add26241,in1Add26241])
Zer47569 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer47569', )(Add26241)
Sub36552 = keras.layers.Subtract(name = 'Sub36552', )([Res26324,Zer47569])
Res54460 = keras.layers.Reshape((1, 3), name = 'Res54460', )(Sub36552)
Zer54732 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer54732', )(Res54460)
Add7483 = keras.layers.Add(name = 'Add7483', )([in0Add7483,in1Add7483])
Con89272 = keras.layers.Concatenate(axis=2, name = 'Con89272', )([Add7483,in0Con89272])
Min95888 = keras.layers.Minimum(name = 'Min95888', )([Zer54732,Con89272])
Sof25414 = keras.layers.Softmax(axis=1, name = 'Sof25414', )(Min95888)
model = tf.keras.models.Model(inputs=[in0Con73308,in0Add26241,in1Add26241,in0Add7483,in1Add7483,in0Con89272], outputs=Sof25414)
w = model.get_layer('Con73308').get_weights() 
w[0] = np.array([[[0.0616, 0.2095, 0.6631]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con73308').set_weights(w) 
in0Con73308 = tf.constant([[[0.1003]]])
in0Add26241 = tf.constant([[[[0.8874]]]])
in1Add26241 = tf.constant([[[[0.0008]]]])
in0Add7483 = tf.constant([[[0.2487], [0.5803]]])
in1Add7483 = tf.constant([[[0.4713], [0.3745]]])
in0Con89272 = tf.constant([[[0.0575, 0.032], [0.7615, 0.801]]])
print (np.array2string(model.predict([in0Con73308,in0Add26241,in1Add26241,in0Add7483,in1Add7483,in0Con89272],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sof25414.png')

LCon73308 = conv1D_layer([[[0.1003]]], 1,[[[0.0616, 0.2095, 0.6631]]],[0, 0, 0], 1, true, 1, Con73308), 
LRes26324 = reshape_layer(Con73308, [1, 3, 1], Res26324), 
LAdd26241 = add_layer([[[[[0.8874]]]], [[[[0.0008]]]]], Add26241), 
LZer47569 = zero_padding2D_layer(Add26241, 0, 0, 2, 0, Zer47569), 
LSub36552 = subtract_layer(Res26324,Zer47569, Sub36552), 
LRes54460 = reshape_layer(Sub36552, [1, 3], Res54460), 
LZer54732 = zero_padding1D_layer(Res54460, 1, 0, Zer54732), 
LAdd7483 = add_layer([[[[0.2487], [0.5803]]], [[[0.4713], [0.3745]]]], Add7483), 
LCon89272 = concatenate_layer([Add7483,[[[0.0575, 0.032], [0.7615, 0.801]]]], 2, Con89272), 
LMin95888 = minimum_layer([Zer54732,Con89272], Min95888), 
LSof25414 = softmax_layer(Min95888, 1, Sof25414), 
exec_layers([LCon73308,LRes26324,LAdd26241,LZer47569,LSub36552,LRes54460,LZer54732,LAdd7483,LCon89272,LMin95888,LSof25414],["Con73308","Res26324","Add26241","Zer47569","Sub36552","Res54460","Zer54732","Add7483","Con89272","Min95888","Sof25414"],Sof25414,"Sof25414")

Actual (Unparsed): [[[0.4984554, 0.4947470, 0.6945952], [0.5015446, 0.5052530, 0.3054048]]]

Expected (Unparsed): [[[0.49845538491362534,0.4947469807833607,0.6945951893762496],[0.5015446150863746,0.5052530192166393,0.30540481062375036]]]

Actual:   [[[0.4985, 0.4948, 0.6946], [0.5016, 0.5053, 0.3055]]]

Expected: [[[0.4985, 0.4948, 0.6946], [0.5016, 0.5053, 0.3055]]]