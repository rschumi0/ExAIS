import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add5547 = tf.keras.layers.Input(shape=([2, 2]))
in1Add5547 = tf.keras.layers.Input(shape=([2, 2]))
in0Ave22858 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave22858 = tf.keras.layers.Input(shape=([1, 2]))

Add5547 = keras.layers.Add(name = 'Add5547', )([in0Add5547,in1Add5547])
Ave22858 = keras.layers.Average(name = 'Ave22858', )([in0Ave22858,in1Ave22858])
Zer22046 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer22046', )(Ave22858)
Min46012 = keras.layers.Minimum(name = 'Min46012', )([Add5547,Zer22046])
Thr84884 = keras.layers.ThresholdedReLU(theta=2.9976181662560815, name = 'Thr84884', )(Min46012)
Res79850 = keras.layers.Reshape((2, 2, 1), name = 'Res79850', )(Thr84884)
Max86251 = keras.layers.MaxPool2D(pool_size=(2, 1), name = 'Max86251', )(Res79850)
model = tf.keras.models.Model(inputs=[in0Add5547,in1Add5547,in0Ave22858,in1Ave22858], outputs=Max86251)
in0Add5547 = tf.constant([[[0.9793, 0.4397], [0.2254, 0.3259]]])
in1Add5547 = tf.constant([[[0.1845, 0.0111], [0.4006, 0.2699]]])
in0Ave22858 = tf.constant([[[0.1045, 0.7825]]])
in1Ave22858 = tf.constant([[[0.9338, 0.458]]])
print (np.array2string(model.predict([in0Add5547,in1Add5547,in0Ave22858,in1Ave22858],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max86251.png')

LAdd5547 = add_layer([[[[0.9793, 0.4397], [0.2254, 0.3259]]], [[[0.1845, 0.0111], [0.4006, 0.2699]]]], Add5547), 
LAve22858 = average_layer([[[[0.1045, 0.7825]]], [[[0.9338, 0.458]]]], Ave22858), 
LZer22046 = zero_padding1D_layer(Ave22858, 1, 0, Zer22046), 
LMin46012 = minimum_layer([Add5547,Zer22046], Min46012), 
LThr84884 = thresholded_relu_layer(Min46012, 2.9976181662560815, Thr84884), 
LRes79850 = reshape_layer(Thr84884, [2, 2, 1], Res79850), 
LMax86251 = max_pool2D_layer(Res79850, 2, 1, Max86251), 
exec_layers([LAdd5547,LAve22858,LZer22046,LMin46012,LThr84884,LRes79850,LMax86251],["Add5547","Ave22858","Zer22046","Min46012","Thr84884","Res79850","Max86251"],Max86251,"Max86251")

Actual (Unparsed): [[[[0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0]]]]

Actual:   [[[[0], [0]]]]

Expected: [[[[0], [0]]]]