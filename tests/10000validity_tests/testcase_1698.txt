import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave76332 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave76332 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con53111 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Add96473 = tf.keras.layers.Input(shape=([1, 2]))
in1Add96473 = tf.keras.layers.Input(shape=([1, 2]))
in0Con48647 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min96645 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Min96645 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave76332 = keras.layers.Average(name = 'Ave76332', )([in0Ave76332,in1Ave76332])
Con53111 = keras.layers.Concatenate(axis=3, name = 'Con53111', )([Ave76332,in0Con53111])
Add96473 = keras.layers.Add(name = 'Add96473', )([in0Add96473,in1Add96473])
Res92598 = keras.layers.Reshape((1, 2, 1), name = 'Res92598', )(Add96473)
Zer50775 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer50775', )(Res92598)
Con48647 = keras.layers.Concatenate(axis=3, name = 'Con48647', )([Zer50775,in0Con48647])
Min96645 = keras.layers.Minimum(name = 'Min96645', )([in0Min96645,in1Min96645])
Min70156 = keras.layers.Minimum(name = 'Min70156', )([Con48647,Min96645])
Min76766 = keras.layers.Minimum(name = 'Min76766', )([Con53111,Min70156])
model = tf.keras.models.Model(inputs=[in0Ave76332,in1Ave76332,in0Con53111,in0Add96473,in1Add96473,in0Con48647,in0Min96645,in1Min96645], outputs=Min76766)
in0Ave76332 = tf.constant([[[[0.8429], [0.0552]], [[0.8232], [0.5167]]]])
in1Ave76332 = tf.constant([[[[0.5105], [0.9035]], [[0.1716], [0.9213]]]])
in0Con53111 = tf.constant([[[[0.9485], [0.065]], [[0.6501], [0.9322]]]])
in0Add96473 = tf.constant([[[0.9657, 0.1229]]])
in1Add96473 = tf.constant([[[0.6774, 0.5961]]])
in0Con48647 = tf.constant([[[[0.7751], [0.4199]], [[0.9208], [0.5113]]]])
in0Min96645 = tf.constant([[[[0.852, 0.2292], [0.9719, 0.1877]], [[0.664, 0.7488], [0.8038, 0.4708]]]])
in1Min96645 = tf.constant([[[[0.1741, 0.464], [0.4539, 0.5171]], [[0.4269, 0.1759], [0.5994, 0.8648]]]])
print (np.array2string(model.predict([in0Ave76332,in1Ave76332,in0Con53111,in0Add96473,in1Add96473,in0Con48647,in0Min96645,in1Min96645],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min76766.png')

LAve76332 = average_layer([[[[[0.8429], [0.0552]], [[0.8232], [0.5167]]]], [[[[0.5105], [0.9035]], [[0.1716], [0.9213]]]]], Ave76332), 
LCon53111 = concatenate_layer([Ave76332,[[[[0.9485], [0.065]], [[0.6501], [0.9322]]]]], 3, Con53111), 
LAdd96473 = add_layer([[[[0.9657, 0.1229]]], [[[0.6774, 0.5961]]]], Add96473), 
LRes92598 = reshape_layer(Add96473, [1, 2, 1], Res92598), 
LZer50775 = zero_padding2D_layer(Res92598, 1, 0, 0, 0, Zer50775), 
LCon48647 = concatenate_layer([Zer50775,[[[[0.7751], [0.4199]], [[0.9208], [0.5113]]]]], 3, Con48647), 
LMin96645 = minimum_layer([[[[[0.852, 0.2292], [0.9719, 0.1877]], [[0.664, 0.7488], [0.8038, 0.4708]]]], [[[[0.1741, 0.464], [0.4539, 0.5171]], [[0.4269, 0.1759], [0.5994, 0.8648]]]]], Min96645), 
LMin70156 = minimum_layer([Con48647,Min96645], Min70156), 
LMin76766 = minimum_layer([Con53111,Min70156], Min76766), 
exec_layers([LAve76332,LCon53111,LAdd96473,LRes92598,LZer50775,LCon48647,LMin96645,LMin70156,LMin76766],["Ave76332","Con53111","Add96473","Res92598","Zer50775","Con48647","Min96645","Min70156","Min76766"],Min76766,"Min76766")

Actual (Unparsed): [[[[0.0000000, 0.2292000], [0.0000000, 0.0650000]], [[0.4269000, 0.1759000], [0.5994000, 0.4708000]]]]

Expected (Unparsed): [[[[0,0.2292],[0,0.065]],[[0.4269,0.1759],[0.5994,0.4708]]]]

Actual:   [[[[0, 0.2292], [0, 0.065]], [[0.4269, 0.1759], [0.5994, 0.4708]]]]

Expected: [[[[0, 0.2292], [0, 0.065]], [[0.4269, 0.1759], [0.5994, 0.4708]]]]