import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add89809 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add89809 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave45486 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave45486 = tf.keras.layers.Input(shape=([2, 2, 1]))

Add89809 = keras.layers.Add(name = 'Add89809', )([in0Add89809,in1Add89809])
Ave45486 = keras.layers.Average(name = 'Ave45486', )([in0Ave45486,in1Ave45486])
Ave74071 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(2, 1), padding='valid', name = 'Ave74071', )(Ave45486)
Bat85230 = keras.layers.BatchNormalization(axis=3, epsilon=0.9115460267702171,  name = 'Bat85230', )(Ave74071)
Zer24298 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer24298', )(Bat85230)
Add86077 = keras.layers.Add(name = 'Add86077', )([Add89809,Zer24298])
model = tf.keras.models.Model(inputs=[in0Add89809,in1Add89809,in0Ave45486,in1Ave45486], outputs=Add86077)
w = model.get_layer('Bat85230').get_weights() 
w[0] = np.array([0.9651])
w[1] = np.array([0.0508])
w[2] = np.array([0.8277])
w[3] = np.array([0.2713])
model.get_layer('Bat85230').set_weights(w) 
in0Add89809 = tf.constant([[[[0.1397], [0.9483]]]])
in1Add89809 = tf.constant([[[[0.8123], [0.3885]]]])
in0Ave45486 = tf.constant([[[[0.4844], [0.9228]], [[0.6418], [0.2388]]]])
in1Ave45486 = tf.constant([[[[0.98], [0.173]], [[0.1862], [0.9202]]]])
print (np.array2string(model.predict([in0Add89809,in1Add89809,in0Ave45486,in1Ave45486],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add86077.png')

LAdd89809 = add_layer([[[[[0.1397], [0.9483]]]], [[[[0.8123], [0.3885]]]]], Add89809), 
LAve45486 = average_layer([[[[[0.4844], [0.9228]], [[0.6418], [0.2388]]]], [[[[0.98], [0.173]], [[0.1862], [0.9202]]]]], Ave45486), 
LAve74071 = average_pooling2D_layer(Ave45486, 1, 2, 2, 1, false, Ave74071), 
LBat85230 = batch_normalization_layer(Ave74071, 3, 0.9115460267702171, [0.9651], [0.0508], [0.8277], [0.2713], Bat85230), 
LZer24298 = zero_padding2D_layer(Bat85230, 0, 0, 1, 0, Zer24298), 
LAdd86077 = add_layer([Add89809,Zer24298], Add86077), 
exec_layers([LAdd89809,LAve45486,LAve74071,LBat85230,LZer24298,LAdd86077],["Add89809","Ave45486","Ave74071","Bat85230","Zer24298","Add86077"],Add86077,"Add86077")

Actual (Unparsed): [[[[0.9520000], [1.2210837]]]]

Expected (Unparsed): [[[[0.952],[1.2210836906475386]]]]

Actual:   [[[[0.952], [1.2211]]]]

Expected: [[[[0.952], [1.2211]]]]