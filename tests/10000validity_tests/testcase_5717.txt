import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer60795 = tf.keras.layers.Input(shape=([3, 1, 3, 1]))
in0Min53736 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Min53736 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Con94019 = tf.keras.layers.Input(shape=([1]))

Zer60795 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer60795', )(in0Zer60795)
Res76902 = keras.layers.Reshape((5, 3, 5), name = 'Res76902', )(Zer60795)
Ave89924 = keras.layers.AveragePooling2D(pool_size=(5, 3), strides=(1, 3), padding='valid', name = 'Ave89924', )(Res76902)
Res56965 = keras.layers.Reshape((1, 5), name = 'Res56965', )(Ave89924)
Fla11535 = keras.layers.Flatten(name = 'Fla11535', )(Res56965)
Min53736 = keras.layers.Minimum(name = 'Min53736', )([in0Min53736,in1Min53736])
Res32027 = keras.layers.Reshape((1, 2, 4), name = 'Res32027', )(Min53736)
Glo18436 = keras.layers.GlobalMaxPool2D(name = 'Glo18436', )(Res32027)
Con94019 = keras.layers.Concatenate(axis=1, name = 'Con94019', )([Glo18436,in0Con94019])
Ave82435 = keras.layers.Average(name = 'Ave82435', )([Fla11535,Con94019])
Res58508 = keras.layers.Reshape((5, 1), name = 'Res58508', )(Ave82435)
Glo7140 = keras.layers.GlobalMaxPool1D(name = 'Glo7140', )(Res58508)
model = tf.keras.models.Model(inputs=[in0Zer60795,in0Min53736,in1Min53736,in0Con94019], outputs=Glo7140)
in0Zer60795 = tf.constant([[[[[1.9909], [1.2238], [1.2519]]], [[[1.8864], [1.9403], [1.1608]]], [[[1.9321], [1.5965], [1.5723]]]]])
in0Min53736 = tf.constant([[[[[0.2992, 0.8837], [0.6758, 0.4247]], [[0.6049, 0.6151], [0.6034, 0.7728]]]]])
in1Min53736 = tf.constant([[[[[0.4625, 0.6879], [0.846, 0.0396]], [[0.4092, 0.7922], [0.894, 0.2928]]]]])
in0Con94019 = tf.constant([[0.1728]])
print (np.array2string(model.predict([in0Zer60795,in0Min53736,in1Min53736,in0Con94019],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo7140.png')

LZer60795 = zero_padding3D_layer([[[[[1.9909], [1.2238], [1.2519]]], [[[1.8864], [1.9403], [1.1608]]], [[[1.9321], [1.5965], [1.5723]]]]], 1, 1, 1, 1, 1, 1, Zer60795), 
LRes76902 = reshape_layer(Zer60795, [5, 3, 5], Res76902), 
LAve89924 = average_pooling2D_layer(Res76902, 5, 3, 1, 3, false, Ave89924), 
LRes56965 = reshape_layer(Ave89924, [1, 5], Res56965), 
LFla11535 = flatten_layer(Res56965, Fla11535), 
LMin53736 = minimum_layer([[[[[[0.2992, 0.8837], [0.6758, 0.4247]], [[0.6049, 0.6151], [0.6034, 0.7728]]]]], [[[[[0.4625, 0.6879], [0.846, 0.0396]], [[0.4092, 0.7922], [0.894, 0.2928]]]]]], Min53736), 
LRes32027 = reshape_layer(Min53736, [1, 2, 4], Res32027), 
LGlo18436 = global_max_pool2D_layer(Res32027, Glo18436), 
LCon94019 = concatenate_layer([Glo18436,[[0.1728]]], 1, Con94019), 
LAve82435 = average_layer([Fla11535,Con94019], Ave82435), 
LRes58508 = reshape_layer(Ave82435, [5, 1], Res58508), 
LGlo7140 = global_max_pool1D_layer(Res58508, Glo7140), 
exec_layers([LZer60795,LRes76902,LAve89924,LRes56965,LFla11535,LMin53736,LRes32027,LGlo18436,LCon94019,LAve82435,LRes58508,LGlo7140],["Zer60795","Res76902","Ave89924","Res56965","Fla11535","Min53736","Res32027","Glo18436","Con94019","Ave82435","Res58508","Glo7140"],Glo7140,"Glo7140")

Actual (Unparsed): [[0.5375967]]

Expected (Unparsed): [[0.5375966666666666]]

Actual:   [[0.5376]]

Expected: [[0.5376]]