import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max63577 = tf.keras.layers.Input(shape=([1, 2]))
in1Max63577 = tf.keras.layers.Input(shape=([1, 2]))

Max63577 = keras.layers.Maximum(name = 'Max63577', )([in0Max63577,in1Max63577])
Mas27718 = keras.layers.Masking(mask_value=1, name = 'Mas27718', )(Max63577)
Res82132 = keras.layers.Reshape((1, 2, 1), name = 'Res82132', )(Mas27718)
Res90927 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res90927', )(Res82132)
Con26534 = keras.layers.Conv3D(3, (1, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con26534', )(Res90927)
model = tf.keras.models.Model(inputs=[in0Max63577,in1Max63577], outputs=Con26534)
w = model.get_layer('Con26534').get_weights() 
w[0] = np.array([[[[[0.5397, 0.2782, 0.6736]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con26534').set_weights(w) 
in0Max63577 = tf.constant([[[0.3549, 0.3557]]])
in1Max63577 = tf.constant([[[0.8857, 0.8652]]])
print (np.array2string(model.predict([in0Max63577,in1Max63577],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con26534.png')

LMax63577 = maximum_layer([[[[0.3549, 0.3557]]], [[[0.8857, 0.8652]]]], Max63577), 
LMas27718 = masking_layer(Max63577, 1, Mas27718), 
LRes82132 = reshape_layer(Mas27718, [1, 2, 1], Res82132), 
LRes90927 = reshape_layer(Res82132, [1, 2, 1, 1], Res90927), 
LCon26534 = conv3D_layer(Res90927, 1, 1, 1,[[[[[0.5397, 0.2782, 0.6736]]]]],[0, 0, 0], 1, 1, 1, true, 1, 1, 1, Con26534), 
exec_layers([LMax63577,LMas27718,LRes82132,LRes90927,LCon26534],["Max63577","Mas27718","Res82132","Res90927","Con26534"],Con26534,"Con26534")

Actual (Unparsed): [[[[[0.4780123, 0.2464017, 0.5966075]], [[0.4669484, 0.2406986, 0.5827987]]]]]

Expected (Unparsed): [[[[[0.47801229,0.24640174,0.5966075200000001]],[[0.46694843999999996,0.24069864,0.58279872]]]]]

Actual:   [[[[[0.4781, 0.2465, 0.5967]], [[0.467, 0.2407, 0.5828]]]]]

Expected: [[[[[0.4781, 0.2465, 0.5967]], [[0.467, 0.2407, 0.5828]]]]]