import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo53859 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con80598 = tf.keras.layers.Input(shape=([4, 1]))
in0Mul14022 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Mul14022 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Max55558 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Max55558 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Loc36988 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Add2074 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add2074 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Zer53338 = tf.keras.layers.Input(shape=([2, 1, 4, 1]))

Glo53859 = keras.layers.GlobalAveragePooling2D(name = 'Glo53859', )(in0Glo53859)
Res61760 = keras.layers.Reshape((2, 1), name = 'Res61760', )(Glo53859)
Zer46664 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer46664', )(Res61760)
Con80598 = keras.layers.Concatenate(axis=2, name = 'Con80598', )([Zer46664,in0Con80598])
Mul14022 = keras.layers.Multiply(name = 'Mul14022', )([in0Mul14022,in1Mul14022])
Res78932 = keras.layers.Reshape((2, 2, 2), name = 'Res78932', )(Mul14022)
Res98746 = keras.layers.Reshape((2, 4), name = 'Res98746', )(Res78932)
Max55558 = keras.layers.Maximum(name = 'Max55558', )([in0Max55558,in1Max55558])
Res40433 = keras.layers.Reshape((1, 2, 1), name = 'Res40433', )(Max55558)
Res64725 = keras.layers.Reshape((1, 2), name = 'Res64725', )(Res40433)
Zer8489 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer8489', )(Res64725)
Dot60782 = keras.layers.Dot(axes=(1, 1), name = 'Dot60782', )([Res98746,Zer8489])
Max13796 = keras.layers.Maximum(name = 'Max13796', )([Con80598,Dot60782])
Res94470 = keras.layers.Reshape((4, 2, 1), name = 'Res94470', )(Max13796)
Res97428 = keras.layers.Reshape((4, 2, 1, 1), name = 'Res97428', )(Res94470)
Zer53629 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (2, 0)), name = 'Zer53629', )(Res97428)
Loc36988 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(1, 1), name = 'Loc36988', )(in0Loc36988)
Res37480 = keras.layers.Reshape((2, 1, 2, 1), name = 'Res37480', )(Loc36988)
Zer84012 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer84012', )(Res37480)
Add2074 = keras.layers.Add(name = 'Add2074', )([in0Add2074,in1Add2074])
Zer13862 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer13862', )(Add2074)
Max23072 = keras.layers.Maximum(name = 'Max23072', )([Zer84012,Zer13862])
Zer6256 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (1, 0)), name = 'Zer6256', )(Max23072)
Mul13654 = keras.layers.Multiply(name = 'Mul13654', )([Zer53629,Zer6256])
Zer1633 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (6, 0)), name = 'Zer1633', )(Mul13654)
Zer53338 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer53338', )(in0Zer53338)
Zer89897 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (3, 0)), name = 'Zer89897', )(Zer53338)
Max82280 = keras.layers.Maximum(name = 'Max82280', )([Zer1633,Zer89897])
model = tf.keras.models.Model(inputs=[in0Glo53859,in0Con80598,in0Mul14022,in1Mul14022,in0Max55558,in1Max55558,in0Loc36988,in0Add2074,in1Add2074,in0Zer53338], outputs=Max82280)
w = model.get_layer('Loc36988').get_weights() 
w[0] = np.array([[[0.1277, 0.2], [0.1299, 0.318]], [[0.8192, 0.2731], [0.4459, 0.8829]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc36988').set_weights(w) 
in0Glo53859 = tf.constant([[[[1.8041, 1.5402]]]])
in0Con80598 = tf.constant([[[0.4318], [0.0652], [0.7326], [0.0126]]])
in0Mul14022 = tf.constant([[[[[0.3909, 0.9608]], [[0.7148, 0.8926]]], [[[0.1684, 0.4898]], [[0.3766, 0.8977]]]]])
in1Mul14022 = tf.constant([[[[[0.5319, 0.5159]], [[0.6003, 0.6049]]], [[[0.9021, 0.8476]], [[0.0565, 0.9509]]]]])
in0Max55558 = tf.constant([[[[[0.6929]], [[0.6801]]]]])
in1Max55558 = tf.constant([[[[[0.0525]], [[0.619]]]]])
in0Loc36988 = tf.constant([[[[0.5542], [0.8864]], [[0.3711], [0.415]]]])
in0Add2074 = tf.constant([[[[[0.8867], [0.8265]], [[0.7662], [0.4671]]]]])
in1Add2074 = tf.constant([[[[[0.0296], [0.5723]], [[0.5463], [0.5182]]]]])
in0Zer53338 = tf.constant([[[[[1.4306], [1.6065], [1.9111], [1.2053]]], [[[1.9245], [1.3854], [1.3557], [1.4954]]]]])
print (np.array2string(model.predict([in0Glo53859,in0Con80598,in0Mul14022,in1Mul14022,in0Max55558,in1Max55558,in0Loc36988,in0Add2074,in1Add2074,in0Zer53338],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max82280.png')

LGlo53859 = global_average_pooling2D_layer([[[[1.8041, 1.5402]]]], Glo53859), 
LRes61760 = reshape_layer(Glo53859, [2, 1], Res61760), 
LZer46664 = zero_padding1D_layer(Res61760, 2, 0, Zer46664), 
LCon80598 = concatenate_layer([Zer46664,[[[0.4318], [0.0652], [0.7326], [0.0126]]]], 2, Con80598), 
LMul14022 = multiply_layer([[[[[[0.3909, 0.9608]], [[0.7148, 0.8926]]], [[[0.1684, 0.4898]], [[0.3766, 0.8977]]]]], [[[[[0.5319, 0.5159]], [[0.6003, 0.6049]]], [[[0.9021, 0.8476]], [[0.0565, 0.9509]]]]]], Mul14022), 
LRes78932 = reshape_layer(Mul14022, [2, 2, 2], Res78932), 
LRes98746 = reshape_layer(Res78932, [2, 4], Res98746), 
LMax55558 = maximum_layer([[[[[[0.6929]], [[0.6801]]]]], [[[[[0.0525]], [[0.619]]]]]], Max55558), 
LRes40433 = reshape_layer(Max55558, [1, 2, 1], Res40433), 
LRes64725 = reshape_layer(Res40433, [1, 2], Res64725), 
LZer8489 = zero_padding1D_layer(Res64725, 1, 0, Zer8489), 
LDot60782 = dot_layer(Res98746,Zer8489, 1, 1, Dot60782), 
LMax13796 = maximum_layer([Con80598,Dot60782], Max13796), 
LRes94470 = reshape_layer(Max13796, [4, 2, 1], Res94470), 
LRes97428 = reshape_layer(Res94470, [4, 2, 1, 1], Res97428), 
LZer53629 = zero_padding3D_layer(Res97428, 0, 0, 2, 0, 2, 0, Zer53629), 
LLoc36988 = locally_connected2D_layer([[[[0.5542], [0.8864]], [[0.3711], [0.415]]]], 1, 2,[[[0.1277, 0.2], [0.1299, 0.318]], [[0.8192, 0.2731], [0.4459, 0.8829]]],[[[0, 0]], [[0, 0]]], 1, 1, Loc36988), 
LRes37480 = reshape_layer(Loc36988, [2, 1, 2, 1], Res37480), 
LZer84012 = zero_padding3D_layer(Res37480, 0, 0, 2, 0, 0, 0, Zer84012), 
LAdd2074 = add_layer([[[[[[0.8867], [0.8265]], [[0.7662], [0.4671]]]]], [[[[[0.0296], [0.5723]], [[0.5463], [0.5182]]]]]], Add2074), 
LZer13862 = zero_padding3D_layer(Add2074, 1, 0, 1, 0, 0, 0, Zer13862), 
LMax23072 = maximum_layer([Zer84012,Zer13862], Max23072), 
LZer6256 = zero_padding3D_layer(Max23072, 2, 0, 1, 0, 1, 0, Zer6256), 
LMul13654 = multiply_layer([Zer53629,Zer6256], Mul13654), 
LZer1633 = zero_padding3D_layer(Mul13654, 0, 0, 0, 0, 6, 0, Zer1633), 
LZer53338 = zero_padding3D_layer([[[[[1.4306], [1.6065], [1.9111], [1.2053]]], [[[1.9245], [1.3854], [1.3557], [1.4954]]]]], 1, 1, 1, 1, 1, 1, Zer53338), 
LZer89897 = zero_padding3D_layer(Zer53338, 0, 0, 1, 0, 3, 0, Zer89897), 
LMax82280 = maximum_layer([Zer1633,Zer89897], Max82280), 
exec_layers([LGlo53859,LRes61760,LZer46664,LCon80598,LMul14022,LRes78932,LRes98746,LMax55558,LRes40433,LRes64725,LZer8489,LDot60782,LMax13796,LRes94470,LRes97428,LZer53629,LLoc36988,LRes37480,LZer84012,LAdd2074,LZer13862,LMax23072,LZer6256,LMul13654,LZer1633,LZer53338,LZer89897,LMax82280],["Glo53859","Res61760","Zer46664","Con80598","Mul14022","Res78932","Res98746","Max55558","Res40433","Res64725","Zer8489","Dot60782","Max13796","Res94470","Res97428","Zer53629","Loc36988","Res37480","Zer84012","Add2074","Zer13862","Max23072","Zer6256","Mul13654","Zer1633","Zer53338","Zer89897","Max82280"],Max82280,"Max82280")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [1.4306000], [1.6065000], [1.9111000], [1.2053000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [1.9245000], [1.3854001], [1.3557000], [1.4954000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.2877031]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [2.1544318]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.5720149]]]]]

Expected (Unparsed): [[[[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0],[0],[0.0]],[[0],[0],[0],[0],[0],[0],[0],[0],[0.0]]],[[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[1.4306],[1.6065],[1.9111],[1.2053],[0.0]],[[0],[0],[0],[0],[0],[0],[0],[0],[0.0]]],[[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[1.9245],[1.3854],[1.3557],[1.4954],[0.0]],[[0],[0],[0],[0],[0],[0],[0],[0.0],[0.28770315552]]],[[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0],[0.0],[2.15443176]],[[0],[0],[0],[0],[0],[0],[0],[0.0],[0.572014885059013]]]]]

Actual:   [[[[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [1.4306], [1.6065], [1.9111], [1.2053], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [1.9245], [1.3855], [1.3557], [1.4954], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0.2878]]], [[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [2.1545]], [[0], [0], [0], [0], [0], [0], [0], [0], [0.5721]]]]]

Expected: [[[[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [1.4306], [1.6065], [1.9111], [1.2053], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [1.9245], [1.3854], [1.3557], [1.4954], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0.2878]]], [[[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0], [2.1545]], [[0], [0], [0], [0], [0], [0], [0], [0], [0.5721]]]]]