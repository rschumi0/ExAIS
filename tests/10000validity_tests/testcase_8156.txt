import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul98161 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul98161 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Add61449 = tf.keras.layers.Input(shape=([2, 2]))
in1Add61449 = tf.keras.layers.Input(shape=([2, 2]))

Mul98161 = keras.layers.Multiply(name = 'Mul98161', )([in0Mul98161,in1Mul98161])
Res42336 = keras.layers.Reshape((2, 2), name = 'Res42336', )(Mul98161)
Add61449 = keras.layers.Add(name = 'Add61449', )([in0Add61449,in1Add61449])
Dot2872 = keras.layers.Dot(axes=(2, 1), name = 'Dot2872', )([Res42336,Add61449])
model = tf.keras.models.Model(inputs=[in0Mul98161,in1Mul98161,in0Add61449,in1Add61449], outputs=Dot2872)
in0Mul98161 = tf.constant([[[[0.8101, 0.0981]], [[0.2368, 0.0166]]]])
in1Mul98161 = tf.constant([[[[0.9884, 0.2582]], [[0.3711, 0.6282]]]])
in0Add61449 = tf.constant([[[0.8391, 0.1276], [0.4349, 0.6496]]])
in1Add61449 = tf.constant([[[0.3049, 0.8565], [0.2457, 0.6678]]])
print (np.array2string(model.predict([in0Mul98161,in1Mul98161,in0Add61449,in1Add61449],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot2872.png')

LMul98161 = multiply_layer([[[[[0.8101, 0.0981]], [[0.2368, 0.0166]]]], [[[[0.9884, 0.2582]], [[0.3711, 0.6282]]]]], Mul98161), 
LRes42336 = reshape_layer(Mul98161, [2, 2], Res42336), 
LAdd61449 = add_layer([[[[0.8391, 0.1276], [0.4349, 0.6496]]], [[[0.3049, 0.8565], [0.2457, 0.6678]]]], Add61449), 
LDot2872 = dot_layer(Res42336,Add61449, 2, 1, Dot2872), 
exec_layers([LMul98161,LRes42336,LAdd61449,LDot2872],["Mul98161","Res42336","Add61449","Dot2872"],Dot2872,"Dot2872")

Actual (Unparsed): [[[0.9332433, 0.8213407], [0.1076281, 0.1002173]]]

Expected (Unparsed): [[[0.933243252212,0.821340642752],[0.107628071592,0.10021724925600001]]]

Actual:   [[[0.9333, 0.8214], [0.1077, 0.1003]]]

Expected: [[[0.9333, 0.8214], [0.1077, 0.1003]]]