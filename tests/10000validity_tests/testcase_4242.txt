import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul63980 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Mul63980 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Ave859 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave859 = tf.keras.layers.Input(shape=([2, 1]))
in0Con81657 = tf.keras.layers.Input(shape=([1]))

Mul63980 = keras.layers.Multiply(name = 'Mul63980', )([in0Mul63980,in1Mul63980])
Res12310 = keras.layers.Reshape((2, 1, 1), name = 'Res12310', )(Mul63980)
Res58628 = keras.layers.Reshape((2, 1), name = 'Res58628', )(Res12310)
Fla19574 = keras.layers.Flatten(name = 'Fla19574', )(Res58628)
Ave859 = keras.layers.Average(name = 'Ave859', )([in0Ave859,in1Ave859])
Res93324 = keras.layers.Reshape((2, 1, 1), name = 'Res93324', )(Ave859)
Res84956 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res84956', )(Res93324)
Glo60800 = keras.layers.GlobalMaxPool3D(name = 'Glo60800', )(Res84956)
Con81657 = keras.layers.Concatenate(axis=1, name = 'Con81657', )([Glo60800,in0Con81657])
Min49655 = keras.layers.Minimum(name = 'Min49655', )([Fla19574,Con81657])
model = tf.keras.models.Model(inputs=[in0Mul63980,in1Mul63980,in0Ave859,in1Ave859,in0Con81657], outputs=Min49655)
in0Mul63980 = tf.constant([[[[[0.1623]]], [[[0.2806]]]]])
in1Mul63980 = tf.constant([[[[[0.2986]]], [[[0.5718]]]]])
in0Ave859 = tf.constant([[[0.4558], [0.6339]]])
in1Ave859 = tf.constant([[[0.3917], [0.7059]]])
in0Con81657 = tf.constant([[0.4514]])
print (np.array2string(model.predict([in0Mul63980,in1Mul63980,in0Ave859,in1Ave859,in0Con81657],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min49655.png')

LMul63980 = multiply_layer([[[[[[0.1623]]], [[[0.2806]]]]], [[[[[0.2986]]], [[[0.5718]]]]]], Mul63980), 
LRes12310 = reshape_layer(Mul63980, [2, 1, 1], Res12310), 
LRes58628 = reshape_layer(Res12310, [2, 1], Res58628), 
LFla19574 = flatten_layer(Res58628, Fla19574), 
LAve859 = average_layer([[[[0.4558], [0.6339]]], [[[0.3917], [0.7059]]]], Ave859), 
LRes93324 = reshape_layer(Ave859, [2, 1, 1], Res93324), 
LRes84956 = reshape_layer(Res93324, [2, 1, 1, 1], Res84956), 
LGlo60800 = global_max_pool3D_layer(Res84956, Glo60800), 
LCon81657 = concatenate_layer([Glo60800,[[0.4514]]], 1, Con81657), 
LMin49655 = minimum_layer([Fla19574,Con81657], Min49655), 
exec_layers([LMul63980,LRes12310,LRes58628,LFla19574,LAve859,LRes93324,LRes84956,LGlo60800,LCon81657,LMin49655],["Mul63980","Res12310","Res58628","Fla19574","Ave859","Res93324","Res84956","Glo60800","Con81657","Min49655"],Min49655,"Min49655")

Actual (Unparsed): [[0.0484628, 0.1604471]]

Expected (Unparsed): [[0.04846278,0.16044708]]

Actual:   [[0.0485, 0.1605]]

Expected: [[0.0485, 0.1605]]