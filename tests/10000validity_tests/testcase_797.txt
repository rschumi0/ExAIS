import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep50717 = tf.keras.layers.Input(shape=([2, 2]))

Sep50717 = keras.layers.SeparableConv1D(4, (2),strides=(2), padding='valid', name = 'Sep50717', )(in0Sep50717)
Res24379 = keras.layers.Reshape((1, 4, 1), name = 'Res24379', )(Sep50717)
Zer51729 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer51729', )(Res24379)
Res12663 = keras.layers.Reshape((3, 6), name = 'Res12663', )(Zer51729)
Zer48589 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer48589', )(Res12663)
Res13971 = keras.layers.Reshape((5, 6, 1), name = 'Res13971', )(Zer48589)
Con90088 = keras.layers.Conv2DTranspose(3, (2, 2),strides=(1, 1), padding='valid', name = 'Con90088', )(Res13971)
model = tf.keras.models.Model(inputs=[in0Sep50717], outputs=Con90088)
w = model.get_layer('Sep50717').get_weights() 
w[0] = np.array([[[0.4433], [0.6822]], [[0.0875], [0.3754]]])
w[1] = np.array([[[0.672, 0.1214, 0.1876, 0.0439], [0.2129, 0.5984, 0.4189, 0.7763]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep50717').set_weights(w) 
w = model.get_layer('Con90088').get_weights() 
w[0] = np.array([[[[0.1273], [0.1368], [0.392]], [[0.6487], [0.4834], [0.299]]], [[[0.3161], [0.6429], [0.4455]], [[0.9359], [0.8438], [0.4703]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con90088').set_weights(w) 
in0Sep50717 = tf.constant([[[0.7123, 0.2626], [0.3009, 0.2203]]])
print (np.array2string(model.predict([in0Sep50717],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con90088.png')

LSep50717 = separable_conv1D_layer([[[0.7123, 0.2626], [0.3009, 0.2203]]], 2,[[[[0.4433], [0.6822]], [[0.0875], [0.3754]]],[[[0.672, 0.1214, 0.1876, 0.0439], [0.2129, 0.5984, 0.4189, 0.7763]]]],[0, 0, 0, 0], 2, false, Sep50717), 
LRes24379 = reshape_layer(Sep50717, [1, 4, 1], Res24379), 
LZer51729 = zero_padding2D_layer(Res24379, 1, 1, 1, 1, Zer51729), 
LRes12663 = reshape_layer(Zer51729, [3, 6], Res12663), 
LZer48589 = zero_padding1D_layer(Res12663, 2, 0, Zer48589), 
LRes13971 = reshape_layer(Zer48589, [5, 6, 1], Res13971), 
LCon90088 = conv2D_transpose_layer(Res13971, 2, 2,[[[[0.1273], [0.1368], [0.392]], [[0.6487], [0.4834], [0.299]]], [[[0.3161], [0.6429], [0.4455]], [[0.9359], [0.8438], [0.4703]]]],[0, 0, 0], 1, 1, false, Con90088), 
exec_layers([LSep50717,LRes24379,LZer51729,LRes12663,LZer48589,LRes13971,LCon90088],["Sep50717","Res24379","Zer51729","Res12663","Zer48589","Res13971","Con90088"],Con90088,"Con90088")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0363610, 0.0390745, 0.1119679], [0.2105230, 0.1651911, 0.1631059], [0.1507174, 0.1196035, 0.1274220], [0.1405736, 0.1139077, 0.1375546], [0.1416042, 0.1055210, 0.0652684], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0902884, 0.1836331, 0.1272493], [0.3299804, 0.3684515, 0.2226394], [0.2404713, 0.2790340, 0.1706786], [0.2317203, 0.2870443, 0.1790159], [0.2042968, 0.1841924, 0.1026614], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0]],[[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0]],[[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0]],[[0.0,0.0,0.0],[0.03636101295566181,0.03907452138518881,0.11196792677627204],[0.21052302628187786,0.16519105762416203,0.16310585291807805],[0.15071735325154142,0.11960350156069682,0.127421999567388],[0.14057363121933342,0.11390769717341641,0.137554602834446],[0.14160415445856162,0.10552096233277121,0.065268447946832],[0.0,0.0,0.0]],[[0.0,0.0,0.0],[0.09028842258668263,0.18363311256241147,0.12724926372150305],[0.3299803684283147,0.3684515020374737,0.22263939690090584],[0.24047125420717982,0.27903398751261066,0.17067858102365463],[0.23172029169168382,0.2870443243136652,0.179015934268407],[0.2042967907472912,0.18419236246667842,0.1026613748140304],[0.0,0.0,0.0]],[[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0]]]]

Actual:   [[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0.0364, 0.0391, 0.112], [0.2106, 0.1652, 0.1632], [0.1508, 0.1197, 0.1275], [0.1406, 0.114, 0.1376], [0.1417, 0.1056, 0.0653], [0, 0, 0]], [[0, 0, 0], [0.0903, 0.1837, 0.1273], [0.33, 0.3685, 0.2227], [0.2405, 0.2791, 0.1707], [0.2318, 0.2871, 0.1791], [0.2043, 0.1842, 0.1027], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]]]

Expected: [[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0.0364, 0.0391, 0.112], [0.2106, 0.1652, 0.1632], [0.1508, 0.1197, 0.1275], [0.1406, 0.114, 0.1376], [0.1417, 0.1056, 0.0653], [0, 0, 0]], [[0, 0, 0], [0.0903, 0.1837, 0.1273], [0.33, 0.3685, 0.2227], [0.2405, 0.2791, 0.1707], [0.2318, 0.2871, 0.1791], [0.2043, 0.1842, 0.1027], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]]]