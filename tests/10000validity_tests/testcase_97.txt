import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave86014 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave86014 = tf.keras.layers.Input(shape=([2, 1]))

Ave86014 = keras.layers.Average(name = 'Ave86014', )([in0Ave86014,in1Ave86014])
Res67216 = keras.layers.Reshape((2, 1, 1), name = 'Res67216', )(Ave86014)
Res72248 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res72248', )(Res67216)
Glo16239 = keras.layers.GlobalMaxPool3D(name = 'Glo16239', )(Res72248)
model = tf.keras.models.Model(inputs=[in0Ave86014,in1Ave86014], outputs=Glo16239)
in0Ave86014 = tf.constant([[[0.3128], [0.8279]]])
in1Ave86014 = tf.constant([[[0.1815], [0.1106]]])
print (np.array2string(model.predict([in0Ave86014,in1Ave86014],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo16239.png')

LAve86014 = average_layer([[[[0.3128], [0.8279]]], [[[0.1815], [0.1106]]]], Ave86014), 
LRes67216 = reshape_layer(Ave86014, [2, 1, 1], Res67216), 
LRes72248 = reshape_layer(Res67216, [2, 1, 1, 1], Res72248), 
LGlo16239 = global_max_pool3D_layer(Res72248, Glo16239), 
exec_layers([LAve86014,LRes67216,LRes72248,LGlo16239],["Ave86014","Res67216","Res72248","Glo16239"],Glo16239,"Glo16239")

Actual (Unparsed): [[0.4692500]]

Expected (Unparsed): [[0.46925]]

Actual:   [[0.4693]]

Expected: [[0.4693]]