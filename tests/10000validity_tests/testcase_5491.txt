import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo98393 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Glo3522 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con31767 = tf.keras.layers.Input(shape=([1]))
in0Ave4122 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave4122 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Sub27099 = tf.keras.layers.Input(shape=([2]))
in1Sub27099 = tf.keras.layers.Input(shape=([2]))
in0Con32624 = tf.keras.layers.Input(shape=([1]))

Glo98393 = keras.layers.GlobalMaxPool3D(name = 'Glo98393', )(in0Glo98393)
Res55373 = keras.layers.Reshape((2, 1), name = 'Res55373', )(Glo98393)
Glo3522 = keras.layers.GlobalMaxPool2D(name = 'Glo3522', )(in0Glo3522)
Res68489 = keras.layers.Reshape((1, 1), name = 'Res68489', )(Glo3522)
Ave69372 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave69372', )(Res68489)
Zer72749 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer72749', )(Ave69372)
Min30310 = keras.layers.Minimum(name = 'Min30310', )([Res55373,Zer72749])
Fla67816 = keras.layers.Flatten(name = 'Fla67816', )(Min30310)
Con31767 = keras.layers.Concatenate(axis=1, name = 'Con31767', )([Fla67816,in0Con31767])
Ave4122 = keras.layers.Average(name = 'Ave4122', )([in0Ave4122,in1Ave4122])
Res64777 = keras.layers.Reshape((1, 4), name = 'Res64777', )(Ave4122)
Loc19691 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc19691', )(Res64777)
Fla3766 = keras.layers.Flatten(name = 'Fla3766', )(Loc19691)
Sub27099 = keras.layers.Subtract(name = 'Sub27099', )([in0Sub27099,in1Sub27099])
Con32624 = keras.layers.Concatenate(axis=1, name = 'Con32624', )([Sub27099,in0Con32624])
Add12006 = keras.layers.Add(name = 'Add12006', )([Fla3766,Con32624])
Max90584 = keras.layers.Maximum(name = 'Max90584', )([Con31767,Add12006])
model = tf.keras.models.Model(inputs=[in0Glo98393,in0Glo3522,in0Con31767,in0Ave4122,in1Ave4122,in0Sub27099,in1Sub27099,in0Con32624], outputs=Max90584)
w = model.get_layer('Loc19691').get_weights() 
w[0] = np.array([[[0.9361, 0.1815, 0.5604], [0.8746, 0.3459, 0.7979], [0.5004, 0.5925, 0.2882], [0.4081, 0.0188, 0.122]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc19691').set_weights(w) 
in0Glo98393 = tf.constant([[[[[1.6, 1.0731], [1.4031, 1.8419]], [[1.5498, 1.5343], [1.5134, 1.6139]]]]])
in0Glo3522 = tf.constant([[[[1.9553], [1.2193]]]])
in0Con31767 = tf.constant([[0.2743]])
in0Ave4122 = tf.constant([[[[0.4646, 0.5031], [0.1315, 0.0726]]]])
in1Ave4122 = tf.constant([[[[0.3415, 0.7777], [0.3572, 0.0902]]]])
in0Sub27099 = tf.constant([[0.7137, 0.5866]])
in1Sub27099 = tf.constant([[0.1102, 0.0118]])
in0Con32624 = tf.constant([[0.6219]])
print (np.array2string(model.predict([in0Glo98393,in0Glo3522,in0Con31767,in0Ave4122,in1Ave4122,in0Sub27099,in1Sub27099,in0Con32624],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max90584.png')

LGlo98393 = global_max_pool3D_layer([[[[[1.6, 1.0731], [1.4031, 1.8419]], [[1.5498, 1.5343], [1.5134, 1.6139]]]]], Glo98393), 
LRes55373 = reshape_layer(Glo98393, [2, 1], Res55373), 
LGlo3522 = global_max_pool2D_layer([[[[1.9553], [1.2193]]]], Glo3522), 
LRes68489 = reshape_layer(Glo3522, [1, 1], Res68489), 
LAve69372 = average_pooling1D_layer(Res68489, 1, Ave69372), 
LZer72749 = zero_padding1D_layer(Ave69372, 1, 0, Zer72749), 
LMin30310 = minimum_layer([Res55373,Zer72749], Min30310), 
LFla67816 = flatten_layer(Min30310, Fla67816), 
LCon31767 = concatenate_layer([Fla67816,[[0.2743]]], 1, Con31767), 
LAve4122 = average_layer([[[[[0.4646, 0.5031], [0.1315, 0.0726]]]], [[[[0.3415, 0.7777], [0.3572, 0.0902]]]]], Ave4122), 
LRes64777 = reshape_layer(Ave4122, [1, 4], Res64777), 
LLoc19691 = locally_connected1D_layer(Res64777, 1,[[[0.9361, 0.1815, 0.5604], [0.8746, 0.3459, 0.7979], [0.5004, 0.5925, 0.2882], [0.4081, 0.0188, 0.122]]],[[0, 0, 0]], 1, Loc19691), 
LFla3766 = flatten_layer(Loc19691, Fla3766), 
LSub27099 = subtract_layer([[0.7137, 0.5866]], [[0.1102, 0.0118]], Sub27099), 
LCon32624 = concatenate_layer([Sub27099,[[0.6219]]], 1, Con32624), 
LAdd12006 = add_layer([Fla3766,Con32624], Add12006), 
LMax90584 = maximum_layer([Con31767,Add12006], Max90584), 
exec_layers([LGlo98393,LRes55373,LGlo3522,LRes68489,LAve69372,LZer72749,LMin30310,LFla67816,LCon31767,LAve4122,LRes64777,LLoc19691,LFla3766,LSub27099,LCon32624,LAdd12006,LMax90584],["Glo98393","Res55373","Glo3522","Res68489","Ave69372","Zer72749","Min30310","Fla67816","Con31767","Ave4122","Res64777","Loc19691","Fla3766","Sub27099","Con32624","Add12006","Max90584"],Max90584,"Max90584")

Actual (Unparsed): [[1.6963810, 1.8419000, 1.4390969]]

Expected (Unparsed): [[1.696381025,1.8419,1.4390968499999999]]

Actual:   [[1.6964, 1.8419, 1.4391]]

Expected: [[1.6964, 1.8419, 1.4391]]