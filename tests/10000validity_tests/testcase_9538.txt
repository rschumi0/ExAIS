import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo71357 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Up_65566 = tf.keras.layers.Input(shape=([1, 1]))
in0Con89023 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Min22411 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Min22411 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Mul89383 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul89383 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con5419 = tf.keras.layers.Input(shape=([2, 3, 1]))

Glo71357 = keras.layers.GlobalAveragePooling3D(name = 'Glo71357', )(in0Glo71357)
Res44962 = keras.layers.Reshape((2, 1), name = 'Res44962', )(Glo71357)
Up_65566 = keras.layers.UpSampling1D(size=(2), name = 'Up_65566', )(in0Up_65566)
Ave33410 = keras.layers.Average(name = 'Ave33410', )([Res44962,Up_65566])
Res39399 = keras.layers.Reshape((2, 1, 1), name = 'Res39399', )(Ave33410)
Zer48973 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer48973', )(Res39399)
Con89023 = keras.layers.Concatenate(axis=3, name = 'Con89023', )([Zer48973,in0Con89023])
Min22411 = keras.layers.Minimum(name = 'Min22411', )([in0Min22411,in1Min22411])
Res95400 = keras.layers.Reshape((1, 2, 2), name = 'Res95400', )(Min22411)
Zer98228 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer98228', )(Res95400)
Mul89383 = keras.layers.Multiply(name = 'Mul89383', )([in0Mul89383,in1Mul89383])
Zer76209 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer76209', )(Mul89383)
Con5419 = keras.layers.Concatenate(axis=3, name = 'Con5419', )([Zer76209,in0Con5419])
Min46626 = keras.layers.Minimum(name = 'Min46626', )([Zer98228,Con5419])
Ave71755 = keras.layers.Average(name = 'Ave71755', )([Con89023,Min46626])
model = tf.keras.models.Model(inputs=[in0Glo71357,in0Up_65566,in0Con89023,in0Min22411,in1Min22411,in0Mul89383,in1Mul89383,in0Con5419], outputs=Ave71755)
in0Glo71357 = tf.constant([[[[[1.5572, 1.4693]], [[1.674, 1.6856]]]]])
in0Up_65566 = tf.constant([[[1.7959]]])
in0Con89023 = tf.constant([[[[0.9889], [0.4652], [0.3292]], [[0.6757], [0.8966], [0.8865]]]])
in0Min22411 = tf.constant([[[[[0.4677], [0.8695]], [[0.9031], [0.6245]]]]])
in1Min22411 = tf.constant([[[[[0.4396], [0.9198]], [[0.6815], [0.6726]]]]])
in0Mul89383 = tf.constant([[[[0.1868]], [[0.8492]]]])
in1Mul89383 = tf.constant([[[[0.5157]], [[0.0047]]]])
in0Con5419 = tf.constant([[[[0.5871], [0.9226], [0.7356]], [[0.1885], [0.6866], [0.8917]]]])
print (np.array2string(model.predict([in0Glo71357,in0Up_65566,in0Con89023,in0Min22411,in1Min22411,in0Mul89383,in1Mul89383,in0Con5419],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave71755.png')

LGlo71357 = global_average_pooling3D_layer([[[[[1.5572, 1.4693]], [[1.674, 1.6856]]]]], Glo71357), 
LRes44962 = reshape_layer(Glo71357, [2, 1], Res44962), 
LUp_65566 = up_sampling1D_layer([[[1.7959]]], 2, Up_65566), 
LAve33410 = average_layer([Res44962,Up_65566], Ave33410), 
LRes39399 = reshape_layer(Ave33410, [2, 1, 1], Res39399), 
LZer48973 = zero_padding2D_layer(Res39399, 0, 0, 2, 0, Zer48973), 
LCon89023 = concatenate_layer([Zer48973,[[[[0.9889], [0.4652], [0.3292]], [[0.6757], [0.8966], [0.8865]]]]], 3, Con89023), 
LMin22411 = minimum_layer([[[[[[0.4677], [0.8695]], [[0.9031], [0.6245]]]]], [[[[[0.4396], [0.9198]], [[0.6815], [0.6726]]]]]], Min22411), 
LRes95400 = reshape_layer(Min22411, [1, 2, 2], Res95400), 
LZer98228 = zero_padding2D_layer(Res95400, 1, 0, 1, 0, Zer98228), 
LMul89383 = multiply_layer([[[[[0.1868]], [[0.8492]]]], [[[[0.5157]], [[0.0047]]]]], Mul89383), 
LZer76209 = zero_padding2D_layer(Mul89383, 0, 0, 2, 0, Zer76209), 
LCon5419 = concatenate_layer([Zer76209,[[[[0.5871], [0.9226], [0.7356]], [[0.1885], [0.6866], [0.8917]]]]], 3, Con5419), 
LMin46626 = minimum_layer([Zer98228,Con5419], Min46626), 
LAve71755 = average_layer([Con89023,Min46626], Ave71755), 
exec_layers([LGlo71357,LRes44962,LUp_65566,LAve33410,LRes39399,LZer48973,LCon89023,LMin22411,LRes95400,LZer98228,LMul89383,LZer76209,LCon5419,LMin46626,LAve71755],["Glo71357","Res44962","Up_65566","Ave33410","Res39399","Zer48973","Con89023","Min22411","Res95400","Zer98228","Mul89383","Zer76209","Con5419","Min46626","Ave71755"],Ave71755,"Ave71755")

Actual (Unparsed): [[[[0.0000000, 0.4944500], [0.0000000, 0.2326000], [0.8528750, 0.1646000]], [[0.0000000, 0.3378500], [0.0000000, 0.7916000], [0.8453331, 0.7555000]]]]

Expected (Unparsed): [[[[0,0.49445],[0,0.2326],[0.852875,0.1646]],[[0,0.33785],[0,0.7916],[0.84533312,0.7555000000000001]]]]

Actual:   [[[[0, 0.4945], [0, 0.2326], [0.8529, 0.1646]], [[0, 0.3379], [0, 0.7916], [0.8454, 0.7555]]]]

Expected: [[[[0, 0.4945], [0, 0.2326], [0.8529, 0.1646]], [[0, 0.3379], [0, 0.7916], [0.8454, 0.7556]]]]