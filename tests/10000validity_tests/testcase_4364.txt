import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add7615 = tf.keras.layers.Input(shape=([1, 2]))
in1Add7615 = tf.keras.layers.Input(shape=([1, 2]))
in0Con43452 = tf.keras.layers.Input(shape=([3, 1]))
in0Sub2755 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub2755 = tf.keras.layers.Input(shape=([3, 3]))

Add7615 = keras.layers.Add(name = 'Add7615', )([in0Add7615,in1Add7615])
Zer95821 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer95821', )(Add7615)
Con43452 = keras.layers.Concatenate(axis=2, name = 'Con43452', )([Zer95821,in0Con43452])
Sub2755 = keras.layers.Subtract(name = 'Sub2755', )([in0Sub2755,in1Sub2755])
Ave90358 = keras.layers.Average(name = 'Ave90358', )([Con43452,Sub2755])
model = tf.keras.models.Model(inputs=[in0Add7615,in1Add7615,in0Con43452,in0Sub2755,in1Sub2755], outputs=Ave90358)
in0Add7615 = tf.constant([[[0.9203, 0.1553]]])
in1Add7615 = tf.constant([[[0.0681, 0.1157]]])
in0Con43452 = tf.constant([[[0.6133], [0.8395], [0.492]]])
in0Sub2755 = tf.constant([[[0.3492, 0.7508, 0.2145], [0.1538, 0.5794, 0.4929], [0.4614, 0.2224, 0.3465]]])
in1Sub2755 = tf.constant([[[0.9914, 0.6513, 0.9109], [0.1754, 0.5476, 0.8205], [0.3979, 0.5484, 0.6509]]])
print (np.array2string(model.predict([in0Add7615,in1Add7615,in0Con43452,in0Sub2755,in1Sub2755],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave90358.png')

LAdd7615 = add_layer([[[[0.9203, 0.1553]]], [[[0.0681, 0.1157]]]], Add7615), 
LZer95821 = zero_padding1D_layer(Add7615, 2, 0, Zer95821), 
LCon43452 = concatenate_layer([Zer95821,[[[0.6133], [0.8395], [0.492]]]], 2, Con43452), 
LSub2755 = subtract_layer([[[0.3492, 0.7508, 0.2145], [0.1538, 0.5794, 0.4929], [0.4614, 0.2224, 0.3465]]], [[[0.9914, 0.6513, 0.9109], [0.1754, 0.5476, 0.8205], [0.3979, 0.5484, 0.6509]]], Sub2755), 
LAve90358 = average_layer([Con43452,Sub2755], Ave90358), 
exec_layers([LAdd7615,LZer95821,LCon43452,LSub2755,LAve90358],["Add7615","Zer95821","Con43452","Sub2755","Ave90358"],Ave90358,"Ave90358")

Actual (Unparsed): [[[-0.3211000, 0.0497500, -0.0415500], [-0.0108000, 0.0159000, 0.2559500], [0.5259500, -0.0275000, 0.0938000]]]

Expected (Unparsed): [[[-0.32109999999999994,0.049750000000000016,-0.04155000000000003],[-0.010800000000000004,0.015900000000000025,0.25595],[0.5259499999999999,-0.027499999999999997,0.09379999999999997]]]

Actual:   [[[-0.3211, 0.0498, -0.0415], [-0.0108, 0.0159, 0.256], [0.526, -0.0275, 0.0938]]]

Expected: [[[-0.321, 0.0498, -0.0415], [-0.0108, 0.016, 0.256], [0.526, -0.0274, 0.0938]]]