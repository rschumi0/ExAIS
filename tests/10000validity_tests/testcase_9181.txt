import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo75487 = tf.keras.layers.Input(shape=([1, 2, 2]))

Glo75487 = keras.layers.GlobalAveragePooling2D(name = 'Glo75487', )(in0Glo75487)
Res76207 = keras.layers.Reshape((2, 1), name = 'Res76207', )(Glo75487)
Res42764 = keras.layers.Reshape((2, 1, 1), name = 'Res42764', )(Res76207)
Loc31486 = keras.layers.LocallyConnected2D(3, (2, 1),strides=(1, 1), name = 'Loc31486', )(Res42764)
model = tf.keras.models.Model(inputs=[in0Glo75487], outputs=Loc31486)
w = model.get_layer('Loc31486').get_weights() 
w[0] = np.array([[[0.6524, 0.2151, 0.3822], [0.5045, 0.1814, 0.7363]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc31486').set_weights(w) 
in0Glo75487 = tf.constant([[[[1.9887, 1.9674], [1.3192, 1.3031]]]])
print (np.array2string(model.predict([in0Glo75487],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc31486.png')

LGlo75487 = global_average_pooling2D_layer([[[[1.9887, 1.9674], [1.3192, 1.3031]]]], Glo75487), 
LRes76207 = reshape_layer(Glo75487, [2, 1], Res76207), 
LRes42764 = reshape_layer(Res76207, [2, 1, 1], Res42764), 
LLoc31486 = locally_connected2D_layer(Res42764, 2, 1,[[[0.6524, 0.2151, 0.3822], [0.5045, 0.1814, 0.7363]]],[[[0, 0, 0]]], 1, 1, Loc31486), 
exec_layers([LGlo75487,LRes76207,LRes42764,LLoc31486],["Glo75487","Res76207","Res42764","Loc31486"],Loc31486,"Loc31486")

Actual (Unparsed): [[[[1.9040206, 0.6523990, 1.8361743]]]]

Expected (Unparsed): [[[[1.904020605,0.6523989950000001,1.836174265]]]]

Actual:   [[[[1.9041, 0.6524, 1.8362]]]]

Expected: [[[[1.9041, 0.6524, 1.8362]]]]