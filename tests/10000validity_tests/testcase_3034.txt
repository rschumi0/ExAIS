import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add77336 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Add77336 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Con84360 = tf.keras.layers.Input(shape=([3, 8]))
in0Sub44993 = tf.keras.layers.Input(shape=([3, 2, 2, 3]))
in1Sub44993 = tf.keras.layers.Input(shape=([3, 2, 2, 3]))
in0Add766 = tf.keras.layers.Input(shape=([2, 1]))
in1Add766 = tf.keras.layers.Input(shape=([2, 1]))
in0Con79556 = tf.keras.layers.Input(shape=([3, 11]))

Add77336 = keras.layers.Add(name = 'Add77336', )([in0Add77336,in1Add77336])
Res51017 = keras.layers.Reshape((2, 2, 2), name = 'Res51017', )(Add77336)
Res7219 = keras.layers.Reshape((2, 4), name = 'Res7219', )(Res51017)
Per53813 = keras.layers.Permute((1,2), name = 'Per53813',)(Res7219)
Zer79454 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer79454', )(Per53813)
Con84360 = keras.layers.Concatenate(axis=2, name = 'Con84360', )([Zer79454,in0Con84360])
Sub44993 = keras.layers.Subtract(name = 'Sub44993', )([in0Sub44993,in1Sub44993])
Res58038 = keras.layers.Reshape((3, 2, 6), name = 'Res58038', )(Sub44993)
Res11230 = keras.layers.Reshape((3, 12), name = 'Res11230', )(Res58038)
Add766 = keras.layers.Add(name = 'Add766', )([in0Add766,in1Add766])
Zer78360 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer78360', )(Add766)
Con79556 = keras.layers.Concatenate(axis=2, name = 'Con79556', )([Zer78360,in0Con79556])
Ave46464 = keras.layers.Average(name = 'Ave46464', )([Res11230,Con79556])
Min70905 = keras.layers.Minimum(name = 'Min70905', )([Con84360,Ave46464])
model = tf.keras.models.Model(inputs=[in0Add77336,in1Add77336,in0Con84360,in0Sub44993,in1Sub44993,in0Add766,in1Add766,in0Con79556], outputs=Min70905)
in0Add77336 = tf.constant([[[[[0.6353, 0.0492]], [[0.9337, 0.8559]]], [[[0.2655, 0.3859]], [[0.8132, 0.1747]]]]])
in1Add77336 = tf.constant([[[[[0.2567, 0.3319]], [[0.6718, 0.1653]]], [[[0.0923, 0.0384]], [[0.9379, 0.2332]]]]])
in0Con84360 = tf.constant([[[0.5874, 0.5324, 0.382, 0.815, 0.8807, 0.5402, 0.1243, 0.9012], [0.8768, 0.2687, 0.9604, 0.3436, 0.6766, 0.0993, 0.8538, 0.4224], [0.9062, 0.2034, 0.2754, 0.3706, 0.1502, 0.2006, 0.7556, 0.4628]]])
in0Sub44993 = tf.constant([[[[[0.7677, 0.5641, 0.463], [0.534, 0.5335, 0.7822]], [[0.9676, 0.5551, 0.9998], [0.5675, 0.5795, 0.2948]]], [[[0.8, 0.8629, 0.3599], [0.9492, 0.4166, 0.6665]], [[0.2541, 0.2215, 0.6952], [0.2001, 0.4732, 0.8548]]], [[[0.0432, 0.5186, 0.9183], [0.7547, 0.2957, 0.6043]], [[0.8887, 0.1172, 0.759], [0.5536, 0.9853, 0.3053]]]]])
in1Sub44993 = tf.constant([[[[[0.9982, 0.8059, 0.8113], [0.8283, 0.5203, 0.4935]], [[0.8062, 0.6711, 0.6231], [0.8966, 0.301, 0.3908]]], [[[0.3308, 0.6764, 0.6786], [0.853, 0.5166, 0.0295]], [[0.3407, 0.2187, 0.0238], [0.1569, 0.0364, 0.8031]]], [[[0.8433, 0.4747, 0.9928], [0.7317, 0.1747, 0.8049]], [[0.1996, 0.8934, 0.5098], [0.3807, 0.1497, 0.5548]]]]])
in0Add766 = tf.constant([[[0.7088], [0.8775]]])
in1Add766 = tf.constant([[[0.3131], [0.1371]]])
in0Con79556 = tf.constant([[[0.8362, 0.3865, 0.7389, 0.441, 0.452, 0.3842, 0.548, 0.4848, 0.054, 0.2476, 0.5557], [0.8278, 0.5133, 0.2224, 0.3513, 0.975, 0.8967, 0.3271, 0.5345, 0.281, 0.5352, 0.2418], [0.8507, 0.1955, 0.9452, 0.4818, 0.0456, 0.475, 0.3886, 0.0078, 0.3834, 0.4222, 0.0902]]])
print (np.array2string(model.predict([in0Add77336,in1Add77336,in0Con84360,in0Sub44993,in1Sub44993,in0Add766,in1Add766,in0Con79556],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min70905.png')

LAdd77336 = add_layer([[[[[[0.6353, 0.0492]], [[0.9337, 0.8559]]], [[[0.2655, 0.3859]], [[0.8132, 0.1747]]]]], [[[[[0.2567, 0.3319]], [[0.6718, 0.1653]]], [[[0.0923, 0.0384]], [[0.9379, 0.2332]]]]]], Add77336), 
LRes51017 = reshape_layer(Add77336, [2, 2, 2], Res51017), 
LRes7219 = reshape_layer(Res51017, [2, 4], Res7219), 
LPer53813 = permute_layer(Res7219, 1,2, Per53813), 
LZer79454 = zero_padding1D_layer(Per53813, 1, 0, Zer79454), 
LCon84360 = concatenate_layer([Zer79454,[[[0.5874, 0.5324, 0.382, 0.815, 0.8807, 0.5402, 0.1243, 0.9012], [0.8768, 0.2687, 0.9604, 0.3436, 0.6766, 0.0993, 0.8538, 0.4224], [0.9062, 0.2034, 0.2754, 0.3706, 0.1502, 0.2006, 0.7556, 0.4628]]]], 2, Con84360), 
LSub44993 = subtract_layer([[[[[0.7677, 0.5641, 0.463], [0.534, 0.5335, 0.7822]], [[0.9676, 0.5551, 0.9998], [0.5675, 0.5795, 0.2948]]], [[[0.8, 0.8629, 0.3599], [0.9492, 0.4166, 0.6665]], [[0.2541, 0.2215, 0.6952], [0.2001, 0.4732, 0.8548]]], [[[0.0432, 0.5186, 0.9183], [0.7547, 0.2957, 0.6043]], [[0.8887, 0.1172, 0.759], [0.5536, 0.9853, 0.3053]]]]], [[[[[0.9982, 0.8059, 0.8113], [0.8283, 0.5203, 0.4935]], [[0.8062, 0.6711, 0.6231], [0.8966, 0.301, 0.3908]]], [[[0.3308, 0.6764, 0.6786], [0.853, 0.5166, 0.0295]], [[0.3407, 0.2187, 0.0238], [0.1569, 0.0364, 0.8031]]], [[[0.8433, 0.4747, 0.9928], [0.7317, 0.1747, 0.8049]], [[0.1996, 0.8934, 0.5098], [0.3807, 0.1497, 0.5548]]]]], Sub44993), 
LRes58038 = reshape_layer(Sub44993, [3, 2, 6], Res58038), 
LRes11230 = reshape_layer(Res58038, [3, 12], Res11230), 
LAdd766 = add_layer([[[[0.7088], [0.8775]]], [[[0.3131], [0.1371]]]], Add766), 
LZer78360 = zero_padding1D_layer(Add766, 1, 0, Zer78360), 
LCon79556 = concatenate_layer([Zer78360,[[[0.8362, 0.3865, 0.7389, 0.441, 0.452, 0.3842, 0.548, 0.4848, 0.054, 0.2476, 0.5557], [0.8278, 0.5133, 0.2224, 0.3513, 0.975, 0.8967, 0.3271, 0.5345, 0.281, 0.5352, 0.2418], [0.8507, 0.1955, 0.9452, 0.4818, 0.0456, 0.475, 0.3886, 0.0078, 0.3834, 0.4222, 0.0902]]]], 2, Con79556), 
LAve46464 = average_layer([Res11230,Con79556], Ave46464), 
LMin70905 = minimum_layer([Con84360,Ave46464], Min70905), 
exec_layers([LAdd77336,LRes51017,LRes7219,LPer53813,LZer79454,LCon84360,LSub44993,LRes58038,LRes11230,LAdd766,LZer78360,LCon79556,LAve46464,LMin70905],["Add77336","Res51017","Res7219","Per53813","Zer79454","Con84360","Sub44993","Res58038","Res11230","Add766","Zer78360","Con79556","Ave46464","Min70905"],Min70905,"Min70905")

Actual (Unparsed): [[[-0.1152500, 0.0000000, 0.0000000, 0.0000000, 0.2271000, 0.3703500, 0.2728000, 0.2160000, 0.4307500, -0.1375500, 0.1243000, 0.2298500], [0.7455500, 0.3811000, 0.0973000, 0.1593000, 0.1256500, 0.2687000, 0.4050500, 0.1649500, 0.6029500, 0.0993000, 0.4860000, 0.1467500], [0.1072500, 0.4243000, 0.0605000, 0.4079000, 0.3014000, -0.0775000, 0.2754000, -0.1938000, 0.1285000, 0.2006000, 0.6289000, -0.0796500]]]

Expected (Unparsed): [[[-0.11524999999999996,0,0,0,0.2271,0.37035,0.2728,0.21600000000000003,0.43075,-0.13754999999999998,0.1243,0.22985],[0.74555,0.3811,0.0973,0.15930000000000002,0.12565000000000004,0.2687,0.40505,0.16494999999999999,0.60295,0.0993,0.486,0.14675],[0.10724999999999996,0.4243,0.0605,0.4079,0.3014,-0.0775,0.2754,-0.1938,0.12849999999999998,0.2006,0.6289,-0.07964999999999997]]]

Actual:   [[[-0.1152, 0, 0, 0, 0.2271, 0.3704, 0.2728, 0.216, 0.4308, -0.1375, 0.1243, 0.2299], [0.7456, 0.3811, 0.0973, 0.1593, 0.1257, 0.2687, 0.4051, 0.165, 0.603, 0.0993, 0.486, 0.1468], [0.1073, 0.4243, 0.0605, 0.4079, 0.3014, -0.0775, 0.2754, -0.1938, 0.1285, 0.2006, 0.6289, -0.0796]]]

Expected: [[[-0.1152, 0, 0, 0, 0.2271, 0.3704, 0.2728, 0.2161, 0.4308, -0.1375, 0.1243, 0.2299], [0.7456, 0.3811, 0.0973, 0.1594, 0.1257, 0.2687, 0.4051, 0.165, 0.603, 0.0993, 0.486, 0.1468], [0.1073, 0.4243, 0.0605, 0.4079, 0.3014, -0.0775, 0.2754, -0.1938, 0.1285, 0.2006, 0.6289, -0.0796]]]