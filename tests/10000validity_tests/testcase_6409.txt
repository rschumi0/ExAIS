import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave27613 = tf.keras.layers.Input(shape=([2, 2, 1]))

Ave27613 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave27613', )(in0Ave27613)
Res85468 = keras.layers.Reshape((2, 1), name = 'Res85468', )(Ave27613)
Zer43147 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer43147', )(Res85468)
Sof23843 = keras.layers.Softmax(axis=1, name = 'Sof23843', )(Zer43147)
Res67566 = keras.layers.Reshape((4, 1, 1), name = 'Res67566', )(Sof23843)
Con70205 = keras.layers.Conv2D(4, (2, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con70205', )(Res67566)
Res15655 = keras.layers.Reshape((4, 4), name = 'Res15655', )(Con70205)
Glo52868 = keras.layers.GlobalMaxPool1D(name = 'Glo52868', )(Res15655)
model = tf.keras.models.Model(inputs=[in0Ave27613], outputs=Glo52868)
w = model.get_layer('Con70205').get_weights() 
w[0] = np.array([[[[0.814, 0.0842, 0.3097, 0.7881]]], [[[0.2859, 0.5896, 0.6962, 0.8156]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con70205').set_weights(w) 
in0Ave27613 = tf.constant([[[[1.1881], [1.7926]], [[1.4296], [1.1246]]]])
print (np.array2string(model.predict([in0Ave27613],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo52868.png')

LAve27613 = average_pooling2D_layer([[[[1.1881], [1.7926]], [[1.4296], [1.1246]]]], 1, 2, Ave27613), 
LRes85468 = reshape_layer(Ave27613, [2, 1], Res85468), 
LZer43147 = zero_padding1D_layer(Res85468, 1, 1, Zer43147), 
LSof23843 = softmax_layer(Zer43147, 1, Sof23843), 
LRes67566 = reshape_layer(Sof23843, [4, 1, 1], Res67566), 
LCon70205 = conv2D_layer(Res67566, 2, 1,[[[[0.814, 0.0842, 0.3097, 0.7881]]], [[[0.2859, 0.5896, 0.6962, 0.8156]]]],[0, 0, 0, 0], 1, 1, true, 1, 1, Con70205), 
LRes15655 = reshape_layer(Con70205, [4, 4], Res15655), 
LGlo52868 = global_max_pool1D_layer(Res15655, Glo52868), 
exec_layers([LAve27613,LRes85468,LZer43147,LSof23843,LRes67566,LCon70205,LRes15655,LGlo52868],["Ave27613","Res85468","Zer43147","Sof23843","Res67566","Con70205","Res15655","Glo52868"],Glo52868,"Glo52868")

Actual (Unparsed): [[0.4626853, 0.2694525, 0.3861774, 0.6407087]]

Expected (Unparsed): [[0.4626853173918032,0.26945251295867123,0.3861773551707626,0.6407087291177006]]

Actual:   [[0.4627, 0.2695, 0.3862, 0.6408]]

Expected: [[0.4627, 0.2695, 0.3862, 0.6408]]