import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot53279 = tf.keras.layers.Input(shape=([2]))
in1Dot53279 = tf.keras.layers.Input(shape=([2]))
in0Ave63635 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave63635 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot4426 = tf.keras.layers.Input(shape=([3]))
in1Dot4426 = tf.keras.layers.Input(shape=([3]))

Dot53279 = keras.layers.Dot(axes=(1, 1), name = 'Dot53279', )([in0Dot53279,in1Dot53279])
Res36803 = keras.layers.Reshape((1, 1), name = 'Res36803', )(Dot53279)
Ave63635 = keras.layers.Average(name = 'Ave63635', )([in0Ave63635,in1Ave63635])
Mul26578 = keras.layers.Multiply(name = 'Mul26578', )([Res36803,Ave63635])
Fla69154 = keras.layers.Flatten(name = 'Fla69154', )(Mul26578)
Dot4426 = keras.layers.Dot(axes=(1, 1), name = 'Dot4426', )([in0Dot4426,in1Dot4426])
Mul40314 = keras.layers.Multiply(name = 'Mul40314', )([Fla69154,Dot4426])
model = tf.keras.models.Model(inputs=[in0Dot53279,in1Dot53279,in0Ave63635,in1Ave63635,in0Dot4426,in1Dot4426], outputs=Mul40314)
in0Dot53279 = tf.constant([[0.7597, 0.3739]])
in1Dot53279 = tf.constant([[0.9826, 0.9721]])
in0Ave63635 = tf.constant([[[0.319]]])
in1Ave63635 = tf.constant([[[0.6459]]])
in0Dot4426 = tf.constant([[0.9617, 0.4692, 0.3441]])
in1Dot4426 = tf.constant([[0.2937, 0.8074, 0.7797]])
print (np.array2string(model.predict([in0Dot53279,in1Dot53279,in0Ave63635,in1Ave63635,in0Dot4426,in1Dot4426],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul40314.png')

LDot53279 = dot_layer([[0.7597, 0.3739]], [[0.9826, 0.9721]], 1, 1, Dot53279), 
LRes36803 = reshape_layer(Dot53279, [1, 1], Res36803), 
LAve63635 = average_layer([[[[0.319]]], [[[0.6459]]]], Ave63635), 
LMul26578 = multiply_layer([Res36803,Ave63635], Mul26578), 
LFla69154 = flatten_layer(Mul26578, Fla69154), 
LDot4426 = dot_layer([[0.9617, 0.4692, 0.3441]], [[0.2937, 0.8074, 0.7797]], 1, 1, Dot4426), 
LMul40314 = multiply_layer([Fla69154,Dot4426], Mul40314), 
exec_layers([LDot53279,LRes36803,LAve63635,LMul26578,LFla69154,LDot4426,LMul40314],["Dot53279","Res36803","Ave63635","Mul26578","Fla69154","Dot4426","Mul40314"],Mul40314,"Mul40314")

Actual (Unparsed): [[0.4977845]]

Expected (Unparsed): [[0.49778453239481346]]

Actual:   [[0.4978]]

Expected: [[0.4978]]