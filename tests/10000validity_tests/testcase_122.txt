import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul33072 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul33072 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con40817 = tf.keras.layers.Input(shape=([3]))
in0Fla7066 = tf.keras.layers.Input(shape=([4, 1, 1]))

Mul33072 = keras.layers.Multiply(name = 'Mul33072', )([in0Mul33072,in1Mul33072])
Res73285 = keras.layers.Reshape((1, 1), name = 'Res73285', )(Mul33072)
Fla61575 = keras.layers.Flatten(name = 'Fla61575', )(Res73285)
Con40817 = keras.layers.Concatenate(axis=1, name = 'Con40817', )([Fla61575,in0Con40817])
Fla7066 = keras.layers.Flatten(name = 'Fla7066', )(in0Fla7066)
Mul91829 = keras.layers.Multiply(name = 'Mul91829', )([Con40817,Fla7066])
Res7092 = keras.layers.Reshape((4, 1), name = 'Res7092', )(Mul91829)
Res4814 = keras.layers.Reshape((4, 1, 1), name = 'Res4814', )(Res7092)
Glo4704 = keras.layers.GlobalMaxPool2D(name = 'Glo4704', )(Res4814)
model = tf.keras.models.Model(inputs=[in0Mul33072,in1Mul33072,in0Con40817,in0Fla7066], outputs=Glo4704)
in0Mul33072 = tf.constant([[[[0.9598]]]])
in1Mul33072 = tf.constant([[[[0.1372]]]])
in0Con40817 = tf.constant([[0.1644, 0.0412, 0.4808]])
in0Fla7066 = tf.constant([[[[1.3064]], [[1.857]], [[1.6941]], [[1.1308]]]])
print (np.array2string(model.predict([in0Mul33072,in1Mul33072,in0Con40817,in0Fla7066],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo4704.png')

LMul33072 = multiply_layer([[[[[0.9598]]]], [[[[0.1372]]]]], Mul33072), 
LRes73285 = reshape_layer(Mul33072, [1, 1], Res73285), 
LFla61575 = flatten_layer(Res73285, Fla61575), 
LCon40817 = concatenate_layer([Fla61575,[[0.1644, 0.0412, 0.4808]]], 1, Con40817), 
LFla7066 = flatten_layer([[[[1.3064]], [[1.857]], [[1.6941]], [[1.1308]]]], Fla7066), 
LMul91829 = multiply_layer([Con40817,Fla7066], Mul91829), 
LRes7092 = reshape_layer(Mul91829, [4, 1], Res7092), 
LRes4814 = reshape_layer(Res7092, [4, 1, 1], Res4814), 
LGlo4704 = global_max_pool2D_layer(Res4814, Glo4704), 
exec_layers([LMul33072,LRes73285,LFla61575,LCon40817,LFla7066,LMul91829,LRes7092,LRes4814,LGlo4704],["Mul33072","Res73285","Fla61575","Con40817","Fla7066","Mul91829","Res7092","Res4814","Glo4704"],Glo4704,"Glo4704")

Actual (Unparsed): [[0.5436886]]

Expected (Unparsed): [[0.5436886400000001]]

Actual:   [[0.5437]]

Expected: [[0.5437]]