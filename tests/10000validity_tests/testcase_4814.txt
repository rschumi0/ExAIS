import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla31060 = tf.keras.layers.Input(shape=([4, 1, 1]))
in0Con73481 = tf.keras.layers.Input(shape=([1, 2]))
in0Con35374 = tf.keras.layers.Input(shape=([6, 7]))

Fla31060 = keras.layers.Flatten(name = 'Fla31060', )(in0Fla31060)
Res9624 = keras.layers.Reshape((4, 1), name = 'Res9624', )(Fla31060)
Res47667 = keras.layers.Reshape((4, 1, 1), name = 'Res47667', )(Res9624)
Res9289 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res9289', )(Res47667)
Zer11904 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer11904', )(Res9289)
Res66635 = keras.layers.Reshape((6, 3, 3), name = 'Res66635', )(Zer11904)
Res27640 = keras.layers.Reshape((6, 9), name = 'Res27640', )(Res66635)
Con73481 = keras.layers.Conv1D(2, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con73481', )(in0Con73481)
Zer67759 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer67759', )(Con73481)
Con35374 = keras.layers.Concatenate(axis=2, name = 'Con35374', )([Zer67759,in0Con35374])
Mul35444 = keras.layers.Multiply(name = 'Mul35444', )([Res27640,Con35374])
PRe13408 = keras.layers.PReLU(name = 'PRe13408', )(Mul35444)
Res77210 = keras.layers.Reshape((6, 9, 1), name = 'Res77210', )(PRe13408)
Res15761 = keras.layers.Reshape((6, 9, 1, 1), name = 'Res15761', )(Res77210)
Con49819 = keras.layers.Conv3D(2, (4, 6, 1),strides=(5, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con49819', )(Res15761)
Lea89952 = keras.layers.LeakyReLU(alpha=9.194645183839839, name = 'Lea89952', )(Con49819)
model = tf.keras.models.Model(inputs=[in0Fla31060,in0Con73481,in0Con35374], outputs=Lea89952)
w = model.get_layer('Con73481').get_weights() 
w[0] = np.array([[[0.5568, 0.6441], [0.9915, 0.7455]]])
w[1] = np.array([0, 0])
model.get_layer('Con73481').set_weights(w) 
w = model.get_layer('PRe13408').get_weights() 
w[0] = np.array([[0.0186, 0.7714, 0.5589, 0.0096, 0.2462, 0.9327, 0.2271, 0.0427, 0.2463], [0.1312, 0.1883, 0.8752, 0.3072, 0.5074, 0.2826, 0.6296, 0.8767, 0.261], [0.0152, 0.3849, 0.1056, 0.1373, 0.004, 0.6962, 0.2978, 0.2323, 0.1905], [0.576, 0.8334, 0.6677, 0.185, 0.2807, 0.5001, 0.8508, 0.1276, 0.6763], [0.0654, 0.9656, 0.4835, 0.6549, 0.3562, 0.0663, 0.2668, 0.0641, 0.0708], [0.6441, 0.2847, 0.8732, 0.0436, 0.8173, 0.1318, 0.8527, 0.7072, 0.3644]])
model.get_layer('PRe13408').set_weights(w) 
w = model.get_layer('Con49819').get_weights() 
w[0] = np.array([[[[[0.6045, 0.9452]]], [[[0.1701, 0.2767]]], [[[0.9158, 0.9297]]], [[[0.6447, 0.3124]]], [[[0.8197, 0.2693]]], [[[0.257, 0.93]]]], [[[[0.2846, 0.6412]]], [[[0.6103, 0.6457]]], [[[0.9751, 0.5822]]], [[[0.9218, 0.7143]]], [[[0.5797, 0.7641]]], [[[0.0953, 0.1114]]]], [[[[0.2638, 0.0367]]], [[[0.5409, 0.3282]]], [[[0.1391, 0.463]]], [[[0.4784, 0.3023]]], [[[0.2476, 0.7455]]], [[[0.523, 0.5643]]]], [[[[0.3192, 0.0285]]], [[[0.0651, 0.3382]]], [[[0.4847, 0.0473]]], [[[0.3296, 0.9034]]], [[[0.1961, 0.9937]]], [[[0.0268, 0.9998]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con49819').set_weights(w) 
in0Fla31060 = tf.constant([[[[1.9489]], [[1.6671]], [[1.2332]], [[1.7317]]]])
in0Con73481 = tf.constant([[[0.4849, 0.1931]]])
in0Con35374 = tf.constant([[[0.9091, 0.7586, 0.2927, 0.3715, 0.8283, 0.3973, 0.3145], [0.2154, 0.1864, 0.8566, 0.0205, 0.4045, 0.5541, 0.84], [0.7507, 0.9925, 0.1675, 0.4416, 0.9805, 0.3029, 0.7188], [0.3592, 0.1808, 0.5516, 0.5312, 0.3616, 0.0031, 0.5933], [0.4716, 0.8365, 0.8926, 0.8757, 0.8756, 0.2363, 0.6123], [0.2514, 0.8321, 0.6338, 0.181, 0.7737, 0.4078, 0.3997]]])
print (np.array2string(model.predict([in0Fla31060,in0Con73481,in0Con35374],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Lea89952.png')

LFla31060 = flatten_layer([[[[1.9489]], [[1.6671]], [[1.2332]], [[1.7317]]]], Fla31060), 
LRes9624 = reshape_layer(Fla31060, [4, 1], Res9624), 
LRes47667 = reshape_layer(Res9624, [4, 1, 1], Res47667), 
LRes9289 = reshape_layer(Res47667, [4, 1, 1, 1], Res9289), 
LZer11904 = zero_padding3D_layer(Res9289, 1, 1, 1, 1, 1, 1, Zer11904), 
LRes66635 = reshape_layer(Zer11904, [6, 3, 3], Res66635), 
LRes27640 = reshape_layer(Res66635, [6, 9], Res27640), 
LCon73481 = conv1D_layer([[[0.4849, 0.1931]]], 1,[[[0.5568, 0.6441], [0.9915, 0.7455]]],[0, 0], 1, true, 1, Con73481), 
LZer67759 = zero_padding1D_layer(Con73481, 5, 0, Zer67759), 
LCon35374 = concatenate_layer([Zer67759,[[[0.9091, 0.7586, 0.2927, 0.3715, 0.8283, 0.3973, 0.3145], [0.2154, 0.1864, 0.8566, 0.0205, 0.4045, 0.5541, 0.84], [0.7507, 0.9925, 0.1675, 0.4416, 0.9805, 0.3029, 0.7188], [0.3592, 0.1808, 0.5516, 0.5312, 0.3616, 0.0031, 0.5933], [0.4716, 0.8365, 0.8926, 0.8757, 0.8756, 0.2363, 0.6123], [0.2514, 0.8321, 0.6338, 0.181, 0.7737, 0.4078, 0.3997]]]], 2, Con35374), 
LMul35444 = multiply_layer([Res27640,Con35374], Mul35444), 
LPRe13408 = prelu_layer(Mul35444, [[0.0186, 0.7714, 0.5589, 0.0096, 0.2462, 0.9327, 0.2271, 0.0427, 0.2463], [0.1312, 0.1883, 0.8752, 0.3072, 0.5074, 0.2826, 0.6296, 0.8767, 0.261], [0.0152, 0.3849, 0.1056, 0.1373, 0.004, 0.6962, 0.2978, 0.2323, 0.1905], [0.576, 0.8334, 0.6677, 0.185, 0.2807, 0.5001, 0.8508, 0.1276, 0.6763], [0.0654, 0.9656, 0.4835, 0.6549, 0.3562, 0.0663, 0.2668, 0.0641, 0.0708], [0.6441, 0.2847, 0.8732, 0.0436, 0.8173, 0.1318, 0.8527, 0.7072, 0.3644]], PRe13408), 
LRes77210 = reshape_layer(PRe13408, [6, 9, 1], Res77210), 
LRes15761 = reshape_layer(Res77210, [6, 9, 1, 1], Res15761), 
LCon49819 = conv3D_layer(Res15761, 4, 6, 1,[[[[[0.6045, 0.9452]]], [[[0.1701, 0.2767]]], [[[0.9158, 0.9297]]], [[[0.6447, 0.3124]]], [[[0.8197, 0.2693]]], [[[0.257, 0.93]]]], [[[[0.2846, 0.6412]]], [[[0.6103, 0.6457]]], [[[0.9751, 0.5822]]], [[[0.9218, 0.7143]]], [[[0.5797, 0.7641]]], [[[0.0953, 0.1114]]]], [[[[0.2638, 0.0367]]], [[[0.5409, 0.3282]]], [[[0.1391, 0.463]]], [[[0.4784, 0.3023]]], [[[0.2476, 0.7455]]], [[[0.523, 0.5643]]]], [[[[0.3192, 0.0285]]], [[[0.0651, 0.3382]]], [[[0.4847, 0.0473]]], [[[0.3296, 0.9034]]], [[[0.1961, 0.9937]]], [[[0.0268, 0.9998]]]]],[0, 0], 5, 1, 1, true, 1, 1, 1, Con49819), 
LLea89952 = leaky_relu_layer(Con49819, 9.194645183839839, Lea89952), 
exec_layers([LFla31060,LRes9624,LRes47667,LRes9289,LZer11904,LRes66635,LRes27640,LCon73481,LZer67759,LCon35374,LMul35444,LPRe13408,LRes77210,LRes15761,LCon49819,LLea89952],["Fla31060","Res9624","Res47667","Res9289","Zer11904","Res66635","Res27640","Con73481","Zer67759","Con35374","Mul35444","PRe13408","Res77210","Res15761","Con49819","Lea89952"],Lea89952,"Lea89952")

Actual (Unparsed): [[[[[0.0000000, 0.0000000]], [[0.8805943, 1.2212415]], [[0.4681091, 1.5220384]], [[0.8906915, 0.7569327]], [[0.3675647, 0.7861530]], [[0.9211719, 0.6423449]], [[0.5295282, 0.0692263]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.3972488, 1.4375153]], [[1.2670229, 0.4162611]], [[0.9965227, 0.4828815]], [[1.4155661, 1.4370516]], [[0.2629262, 0.4276994]], [[0.9343849, 1.4610102]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.0,0.0]],[[0.8805943199200001,1.221241475832]],[[0.468109125349,1.5220384228950001]],[[0.890691487616,0.7569327442520001]],[[0.36756466310900004,0.7861530601450002]],[[0.9211719397410002,0.642344898618]],[[0.529528206412,0.06922631668300001]],[[0.0,0.0]],[[0.0,0.0]]],[[[0.0,0.0]],[[0.39724886293999995,1.4375153405999999]],[[1.2670229297739999,0.41626116260599993]],[[0.9965227312739999,0.48288149720799994]],[[1.4155661816359997,1.4370516259739998]],[[0.262926192942,0.42769945671399995]],[[0.93438497139,1.4610102149839999]],[[0.0,0.0]],[[0.0,0.0]]]]]

Actual:   [[[[[0, 0]], [[0.8806, 1.2213]], [[0.4682, 1.5221]], [[0.8907, 0.757]], [[0.3676, 0.7862]], [[0.9212, 0.6424]], [[0.5296, 0.0693]], [[0, 0]], [[0, 0]]], [[[0, 0]], [[0.3973, 1.4376]], [[1.2671, 0.4163]], [[0.9966, 0.4829]], [[1.4156, 1.4371]], [[0.263, 0.4277]], [[0.9344, 1.4611]], [[0, 0]], [[0, 0]]]]]

Expected: [[[[[0, 0]], [[0.8806, 1.2213]], [[0.4682, 1.5221]], [[0.8907, 0.757]], [[0.3676, 0.7862]], [[0.9212, 0.6424]], [[0.5296, 0.0693]], [[0, 0]], [[0, 0]]], [[[0, 0]], [[0.3973, 1.4376]], [[1.2671, 0.4163]], [[0.9966, 0.4829]], [[1.4156, 1.4371]], [[0.263, 0.4277]], [[0.9344, 1.4611]], [[0, 0]], [[0, 0]]]]]