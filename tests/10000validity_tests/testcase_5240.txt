import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul72522 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul72522 = tf.keras.layers.Input(shape=([1, 1]))

Mul72522 = keras.layers.Multiply(name = 'Mul72522', )([in0Mul72522,in1Mul72522])
Den86394 = keras.layers.Dense(4,name = 'Den86394', )(Mul72522)
LST33288 = keras.layers.LSTM(2,recurrent_activation='sigmoid', name = 'LST33288', )(Den86394)
model = tf.keras.models.Model(inputs=[in0Mul72522,in1Mul72522], outputs=LST33288)
w = model.get_layer('Den86394').get_weights() 
w[0] = np.array([[0.3064, 0.9887, 0.9245, 0.9094]])
w[1] = np.array([0.67, 0.9471, 0.8054, 0.5618])
model.get_layer('Den86394').set_weights(w) 
w = model.get_layer('LST33288').get_weights() 
w[0] = np.array([[2, 1, 6, 5, 10, 1, 9, 3], [8, 8, 9, 3, 10, 1, 7, 10], [2, 5, 9, 8, 8, 7, 1, 4], [7, 6, 8, 5, 5, 2, 4, 3]])
w[1] = np.array([[10, 8, 10, 1, 1, 10, 4, 2], [9, 5, 9, 5, 1, 10, 9, 7]])
w[2] = np.array([9, 2, 4, 7, 6, 5, 1, 8])
model.get_layer('LST33288').set_weights(w) 
in0Mul72522 = tf.constant([[[0.1575]]])
in1Mul72522 = tf.constant([[[0.2609]]])
print (np.array2string(model.predict([in0Mul72522,in1Mul72522],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST33288.png')

LMul72522 = multiply_layer([[[[0.1575]]], [[[0.2609]]]], Mul72522), 
LDen86394 = dense_layer(Mul72522, [[0.3064, 0.9887, 0.9245, 0.9094]],[0.67, 0.9471, 0.8054, 0.5618], Den86394), 
LLST33288 = lstm_layer(Den86394,[[2, 1, 6, 5, 10, 1, 9, 3], [8, 8, 9, 3, 10, 1, 7, 10], [2, 5, 9, 8, 8, 7, 1, 4], [7, 6, 8, 5, 5, 2, 4, 3]],[[10, 8, 10, 1, 1, 10, 4, 2], [9, 5, 9, 5, 1, 10, 9, 7]],[9, 2, 4, 7, 6, 5, 1, 8], LST33288), 
exec_layers([LMul72522,LDen86394,LLST33288],["Mul72522","Den86394","LST33288"],LST33288,"LST33288")

Actual (Unparsed): [[0.7615941, 0.7615942]]

Expected (Unparsed): [[0.7615941325253037,0.7615941516421458]]

Actual:   [[0.7616, 0.7616]]

Expected: [[0.7616, 0.7616]]