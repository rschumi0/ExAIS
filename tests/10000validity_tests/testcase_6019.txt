import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Per47176 = tf.keras.layers.Input(shape=([3, 2]))

Per47176 = keras.layers.Permute((1,2), name = 'Per47176',)(in0Per47176)
Res73903 = keras.layers.Reshape((3, 2, 1), name = 'Res73903', )(Per47176)
Res85970 = keras.layers.Reshape((3, 2, 1, 1), name = 'Res85970', )(Res73903)
Glo51748 = keras.layers.GlobalAveragePooling3D(name = 'Glo51748', )(Res85970)
model = tf.keras.models.Model(inputs=[in0Per47176], outputs=Glo51748)
in0Per47176 = tf.constant([[[1.7987, 1.6295], [1.2742, 1.1703], [1.4828, 1.0964]]])
print (np.array2string(model.predict([in0Per47176],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo51748.png')

LPer47176 = permute_layer([[[1.7987, 1.6295], [1.2742, 1.1703], [1.4828, 1.0964]]], 1,2, Per47176), 
LRes73903 = reshape_layer(Per47176, [3, 2, 1], Res73903), 
LRes85970 = reshape_layer(Res73903, [3, 2, 1, 1], Res85970), 
LGlo51748 = global_average_pooling3D_layer(Res85970, Glo51748), 
exec_layers([LPer47176,LRes73903,LRes85970,LGlo51748],["Per47176","Res73903","Res85970","Glo51748"],Glo51748,"Glo51748")

Actual (Unparsed): [[1.4086500]]

Expected (Unparsed): [[1.40865]]

Actual:   [[1.4087]]

Expected: [[1.4087]]