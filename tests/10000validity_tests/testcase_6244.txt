import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lea17029 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Max12088 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max12088 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con59482 = tf.keras.layers.Input(shape=([1, 1]))
in0Min76709 = tf.keras.layers.Input(shape=([1, 2]))
in1Min76709 = tf.keras.layers.Input(shape=([1, 2]))
in0Con58370 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Dep64510 = tf.keras.layers.Input(shape=([2, 2, 2]))

Lea17029 = keras.layers.LeakyReLU(alpha=5.435218432547949, name = 'Lea17029', input_shape=(2, 2, 2, 1))(in0Lea17029)
Res48809 = keras.layers.Reshape((2, 2, 2), name = 'Res48809', )(Lea17029)
Max12088 = keras.layers.Maximum(name = 'Max12088', )([in0Max12088,in1Max12088])
Res22742 = keras.layers.Reshape((1, 1), name = 'Res22742', )(Max12088)
Con59482 = keras.layers.Concatenate(axis=2, name = 'Con59482', )([Res22742,in0Con59482])
Min76709 = keras.layers.Minimum(name = 'Min76709', )([in0Min76709,in1Min76709])
Dot17000 = keras.layers.Dot(axes=(2, 2), name = 'Dot17000', )([Con59482,Min76709])
Res9686 = keras.layers.Reshape((1, 1, 1), name = 'Res9686', )(Dot17000)
Con58370 = keras.layers.Concatenate(axis=3, name = 'Con58370', )([Res9686,in0Con58370])
Dep64510 = keras.layers.DepthwiseConv2D((1, 2),strides=(2, 2), padding='same', name = 'Dep64510', )(in0Dep64510)
Add51722 = keras.layers.Add(name = 'Add51722', )([Con58370,Dep64510])
Zer13361 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer13361', )(Add51722)
Min57106 = keras.layers.Minimum(name = 'Min57106', )([Res48809,Zer13361])
model = tf.keras.models.Model(inputs=[in0Lea17029,in0Max12088,in1Max12088,in0Con59482,in0Min76709,in1Min76709,in0Con58370,in0Dep64510], outputs=Min57106)
w = model.get_layer('Dep64510').get_weights() 
w[0] = np.array([[[[0.7641], [0.2823]], [[0.7536], [0.28]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep64510').set_weights(w) 
in0Lea17029 = tf.constant([[[[[0.1249], [0.5106]], [[0.8756], [0.0859]]], [[[0.5929], [0.0659]], [[0.1538], [0.5689]]]]])
in0Max12088 = tf.constant([[[[0.462]]]])
in1Max12088 = tf.constant([[[[0.8547]]]])
in0Con59482 = tf.constant([[[0.9901]]])
in0Min76709 = tf.constant([[[0.7197, 0.067]]])
in1Min76709 = tf.constant([[[0.1417, 0.8522]]])
in0Con58370 = tf.constant([[[[0.3668]]]])
in0Dep64510 = tf.constant([[[[0.9355, 0.3694], [0.0693, 0.3265]], [[0.9671, 0.6445], [0.8581, 0.5157]]]])
print (np.array2string(model.predict([in0Lea17029,in0Max12088,in1Max12088,in0Con59482,in0Min76709,in1Min76709,in0Con58370,in0Dep64510],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min57106.png')

LLea17029 = leaky_relu_layer([[[[[0.1249], [0.5106]], [[0.8756], [0.0859]]], [[[0.5929], [0.0659]], [[0.1538], [0.5689]]]]], 5.435218432547949, Lea17029), 
LRes48809 = reshape_layer(Lea17029, [2, 2, 2], Res48809), 
LMax12088 = maximum_layer([[[[[0.462]]]], [[[[0.8547]]]]], Max12088), 
LRes22742 = reshape_layer(Max12088, [1, 1], Res22742), 
LCon59482 = concatenate_layer([Res22742,[[[0.9901]]]], 2, Con59482), 
LMin76709 = minimum_layer([[[[0.7197, 0.067]]], [[[0.1417, 0.8522]]]], Min76709), 
LDot17000 = dot_layer(Con59482,Min76709, 2, 2, Dot17000), 
LRes9686 = reshape_layer(Dot17000, [1, 1, 1], Res9686), 
LCon58370 = concatenate_layer([Res9686,[[[[0.3668]]]]], 3, Con58370), 
LDep64510 = depthwise_conv2D_layer([[[[0.9355, 0.3694], [0.0693, 0.3265]], [[0.9671, 0.6445], [0.8581, 0.5157]]]], 1, 2,[[[[0.7641], [0.2823]], [[0.7536], [0.28]]]],[0, 0], 2, 2, true, Dep64510), 
LAdd51722 = add_layer([Con58370,Dep64510], Add51722), 
LZer13361 = zero_padding2D_layer(Add51722, 1, 0, 1, 0, Zer13361), 
LMin57106 = minimum_layer([Res48809,Zer13361], Min57106), 
exec_layers([LLea17029,LRes48809,LMax12088,LRes22742,LCon59482,LMin76709,LDot17000,LRes9686,LCon58370,LDep64510,LAdd51722,LZer13361,LMin57106],["Lea17029","Res48809","Max12088","Res22742","Con59482","Min76709","Dot17000","Res9686","Con58370","Dep64510","Add51722","Zer13361","Min57106"],Min57106,"Min57106")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.1538000, 0.5625016]]]]

Expected (Unparsed): [[[[0,0],[0,0]],[[0,0],[0.1538,0.56250162]]]]

Actual:   [[[[0, 0], [0, 0]], [[0, 0], [0.1538, 0.5626]]]]

Expected: [[[[0, 0], [0, 0]], [[0, 0], [0.1538, 0.5626]]]]