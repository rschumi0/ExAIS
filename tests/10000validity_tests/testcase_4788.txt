import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul29900 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul29900 = tf.keras.layers.Input(shape=([1, 1]))
in0Con21831 = tf.keras.layers.Input(shape=([7]))
in0Max30454 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max30454 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Glo63613 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con10602 = tf.keras.layers.Input(shape=([6]))

Mul29900 = keras.layers.Multiply(name = 'Mul29900', )([in0Mul29900,in1Mul29900])
Fla12998 = keras.layers.Flatten(name = 'Fla12998', )(Mul29900)
Con21831 = keras.layers.Concatenate(axis=1, name = 'Con21831', )([Fla12998,in0Con21831])
Max30454 = keras.layers.Maximum(name = 'Max30454', )([in0Max30454,in1Max30454])
Res93633 = keras.layers.Reshape((2, 4), name = 'Res93633', )(Max30454)
Fla70196 = keras.layers.Flatten(name = 'Fla70196', )(Res93633)
Glo63613 = keras.layers.GlobalMaxPool2D(name = 'Glo63613', )(in0Glo63613)
Con10602 = keras.layers.Concatenate(axis=1, name = 'Con10602', )([Glo63613,in0Con10602])
Max76256 = keras.layers.Maximum(name = 'Max76256', )([Fla70196,Con10602])
Min62182 = keras.layers.Minimum(name = 'Min62182', )([Con21831,Max76256])
model = tf.keras.models.Model(inputs=[in0Mul29900,in1Mul29900,in0Con21831,in0Max30454,in1Max30454,in0Glo63613,in0Con10602], outputs=Min62182)
in0Mul29900 = tf.constant([[[0.4036]]])
in1Mul29900 = tf.constant([[[0.4466]]])
in0Con21831 = tf.constant([[0.5777, 0.8833, 0.8022, 0.2262, 0.162, 0.2615, 0.0189]])
in0Max30454 = tf.constant([[[[0.3989, 0.748], [0.0264, 0.6491]], [[0.2977, 0.2296], [0.2126, 0.8053]]]])
in1Max30454 = tf.constant([[[[0.5216, 0.2278], [0.1152, 0.5125]], [[0.3216, 0.9006], [0.8477, 0.294]]]])
in0Glo63613 = tf.constant([[[[1.4802, 1.5932]]]])
in0Con10602 = tf.constant([[0.7925, 0.3998, 0.0515, 0.3608, 0.4504, 0.2883]])
print (np.array2string(model.predict([in0Mul29900,in1Mul29900,in0Con21831,in0Max30454,in1Max30454,in0Glo63613,in0Con10602],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min62182.png')

LMul29900 = multiply_layer([[[[0.4036]]], [[[0.4466]]]], Mul29900), 
LFla12998 = flatten_layer(Mul29900, Fla12998), 
LCon21831 = concatenate_layer([Fla12998,[[0.5777, 0.8833, 0.8022, 0.2262, 0.162, 0.2615, 0.0189]]], 1, Con21831), 
LMax30454 = maximum_layer([[[[[0.3989, 0.748], [0.0264, 0.6491]], [[0.2977, 0.2296], [0.2126, 0.8053]]]], [[[[0.5216, 0.2278], [0.1152, 0.5125]], [[0.3216, 0.9006], [0.8477, 0.294]]]]], Max30454), 
LRes93633 = reshape_layer(Max30454, [2, 4], Res93633), 
LFla70196 = flatten_layer(Res93633, Fla70196), 
LGlo63613 = global_max_pool2D_layer([[[[1.4802, 1.5932]]]], Glo63613), 
LCon10602 = concatenate_layer([Glo63613,[[0.7925, 0.3998, 0.0515, 0.3608, 0.4504, 0.2883]]], 1, Con10602), 
LMax76256 = maximum_layer([Fla70196,Con10602], Max76256), 
LMin62182 = minimum_layer([Con21831,Max76256], Min62182), 
exec_layers([LMul29900,LFla12998,LCon21831,LMax30454,LRes93633,LFla70196,LGlo63613,LCon10602,LMax76256,LMin62182],["Mul29900","Fla12998","Con21831","Max30454","Res93633","Fla70196","Glo63613","Con10602","Max76256","Min62182"],Min62182,"Min62182")

Actual (Unparsed): [[0.1802478, 0.5777000, 0.7925000, 0.6491000, 0.2262000, 0.1620000, 0.2615000, 0.0189000]]

Expected (Unparsed): [[0.18024776,0.5777,0.7925,0.6491,0.2262,0.162,0.2615,0.0189]]

Actual:   [[0.1803, 0.5777, 0.7925, 0.6491, 0.2262, 0.162, 0.2615, 0.0189]]

Expected: [[0.1803, 0.5777, 0.7925, 0.6491, 0.2262, 0.162, 0.2615, 0.0189]]