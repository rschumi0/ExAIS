import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot52868 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot52868 = tf.keras.layers.Input(shape=([2, 2]))
in0Con37345 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Sub24612 = tf.keras.layers.Input(shape=([2, 2, 3]))
in1Sub24612 = tf.keras.layers.Input(shape=([2, 2, 3]))

Dot52868 = keras.layers.Dot(axes=(1, 1), name = 'Dot52868', )([in0Dot52868,in1Dot52868])
Res78521 = keras.layers.Reshape((2, 2, 1), name = 'Res78521', )(Dot52868)
Con37345 = keras.layers.Concatenate(axis=3, name = 'Con37345', )([Res78521,in0Con37345])
Sub24612 = keras.layers.Subtract(name = 'Sub24612', )([in0Sub24612,in1Sub24612])
Min94845 = keras.layers.Minimum(name = 'Min94845', )([Con37345,Sub24612])
Fla23821 = keras.layers.Flatten(name = 'Fla23821', )(Min94845)
model = tf.keras.models.Model(inputs=[in0Dot52868,in1Dot52868,in0Con37345,in0Sub24612,in1Sub24612], outputs=Fla23821)
in0Dot52868 = tf.constant([[[0.3873, 0.7598], [0.4504, 0.0912]]])
in1Dot52868 = tf.constant([[[0.9884, 0.7704], [0.1025, 0.6851]]])
in0Con37345 = tf.constant([[[[0.978, 0.6397], [0.9959, 0.7185]], [[0.1567, 0.8483], [0.8037, 0.7559]]]])
in0Sub24612 = tf.constant([[[[0.801, 0.9717, 0.7579], [0.2582, 0.449, 0.386]], [[0.9926, 0.7892, 0.589], [0.4301, 0.2759, 0.4326]]]])
in1Sub24612 = tf.constant([[[[0.458, 0.6501, 0.3858], [0.6887, 0.1412, 0.0079]], [[0.334, 0.7395, 0.3398], [0.7213, 0.6404, 0.8178]]]])
print (np.array2string(model.predict([in0Dot52868,in1Dot52868,in0Con37345,in0Sub24612,in1Sub24612],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla23821.png')

LDot52868 = dot_layer([[[0.3873, 0.7598], [0.4504, 0.0912]]], [[[0.9884, 0.7704], [0.1025, 0.6851]]], 1, 1, Dot52868), 
LRes78521 = reshape_layer(Dot52868, [2, 2, 1], Res78521), 
LCon37345 = concatenate_layer([Res78521,[[[[0.978, 0.6397], [0.9959, 0.7185]], [[0.1567, 0.8483], [0.8037, 0.7559]]]]], 3, Con37345), 
LSub24612 = subtract_layer([[[[0.801, 0.9717, 0.7579], [0.2582, 0.449, 0.386]], [[0.9926, 0.7892, 0.589], [0.4301, 0.2759, 0.4326]]]], [[[[0.458, 0.6501, 0.3858], [0.6887, 0.1412, 0.0079]], [[0.334, 0.7395, 0.3398], [0.7213, 0.6404, 0.8178]]]], Sub24612), 
LMin94845 = minimum_layer([Con37345,Sub24612], Min94845), 
LFla23821 = flatten_layer(Min94845, Fla23821), 
exec_layers([LDot52868,LRes78521,LCon37345,LSub24612,LMin94845,LFla23821],["Dot52868","Res78521","Con37345","Sub24612","Min94845","Fla23821"],Fla23821,"Fla23821")

Actual (Unparsed): [[0.3430000, 0.3216000, 0.3721000, -0.4305000, 0.3078000, 0.3781000, 0.6586000, 0.0497000, 0.2492000, -0.2912000, -0.3645000, -0.3852000]]

Expected (Unparsed): [[0.343,0.3216,0.37210000000000004,-0.4305,0.3078,0.3781,0.6586000000000001,0.049699999999999966,0.24919999999999998,-0.29120000000000007,-0.3645,-0.3852]]

Actual:   [[0.343, 0.3216, 0.3721, -0.4305, 0.3078, 0.3781, 0.6586, 0.0497, 0.2492, -0.2912, -0.3645, -0.3852]]

Expected: [[0.343, 0.3216, 0.3722, -0.4305, 0.3078, 0.3781, 0.6587, 0.0497, 0.2492, -0.2912, -0.3645, -0.3852]]