import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max19944 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max19944 = tf.keras.layers.Input(shape=([1, 1, 2]))

Max19944 = keras.layers.Maximum(name = 'Max19944', )([in0Max19944,in1Max19944])
Res18210 = keras.layers.Reshape((1, 2), name = 'Res18210', )(Max19944)
Glo21690 = keras.layers.GlobalAveragePooling1D(name = 'Glo21690', )(Res18210)
Res83584 = keras.layers.Reshape((2, 1), name = 'Res83584', )(Glo21690)
Res935 = keras.layers.Reshape((2, 1, 1), name = 'Res935', )(Res83584)
Ave61992 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(2, 1), padding='same', name = 'Ave61992', )(Res935)
model = tf.keras.models.Model(inputs=[in0Max19944,in1Max19944], outputs=Ave61992)
in0Max19944 = tf.constant([[[[0.7972, 0.3309]]]])
in1Max19944 = tf.constant([[[[0.2548, 0.2644]]]])
print (np.array2string(model.predict([in0Max19944,in1Max19944],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave61992.png')

LMax19944 = maximum_layer([[[[[0.7972, 0.3309]]]], [[[[0.2548, 0.2644]]]]], Max19944), 
LRes18210 = reshape_layer(Max19944, [1, 2], Res18210), 
LGlo21690 = global_average_pooling1D_layer(Res18210, Glo21690), 
LRes83584 = reshape_layer(Glo21690, [2, 1], Res83584), 
LRes935 = reshape_layer(Res83584, [2, 1, 1], Res935), 
LAve61992 = average_pooling2D_layer(Res935, 2, 1, 2, 1, true, Ave61992), 
exec_layers([LMax19944,LRes18210,LGlo21690,LRes83584,LRes935,LAve61992],["Max19944","Res18210","Glo21690","Res83584","Res935","Ave61992"],Ave61992,"Ave61992")

Actual (Unparsed): [[[[0.5640500]]]]

Expected (Unparsed): [[[[0.56405]]]]

Actual:   [[[[0.5641]]]]

Expected: [[[[0.5641]]]]