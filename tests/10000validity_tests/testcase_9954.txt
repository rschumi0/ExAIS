import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add41934 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add41934 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con22491 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Add10177 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Add10177 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Sub80444 = tf.keras.layers.Input(shape=([2]))
in1Sub80444 = tf.keras.layers.Input(shape=([2]))
in0Con22550 = tf.keras.layers.Input(shape=([6]))
in0Dot76042 = tf.keras.layers.Input(shape=([2]))
in1Dot76042 = tf.keras.layers.Input(shape=([2]))
in0Con49255 = tf.keras.layers.Input(shape=([7]))

Add41934 = keras.layers.Add(name = 'Add41934', )([in0Add41934,in1Add41934])
Res89692 = keras.layers.Reshape((1, 2, 2, 1), name = 'Res89692', )(Add41934)
Con22491 = keras.layers.Concatenate(axis=4, name = 'Con22491', )([Res89692,in0Con22491])
Add10177 = keras.layers.Add(name = 'Add10177', )([in0Add10177,in1Add10177])
Zer26693 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer26693', )(Add10177)
Ave85137 = keras.layers.Average(name = 'Ave85137', )([Con22491,Zer26693])
Res30013 = keras.layers.Reshape((1, 2, 4), name = 'Res30013', )(Ave85137)
Res534 = keras.layers.Reshape((1, 8), name = 'Res534', )(Res30013)
Fla60229 = keras.layers.Flatten(name = 'Fla60229', )(Res534)
Sub80444 = keras.layers.Subtract(name = 'Sub80444', )([in0Sub80444,in1Sub80444])
Con22550 = keras.layers.Concatenate(axis=1, name = 'Con22550', )([Sub80444,in0Con22550])
Add80293 = keras.layers.Add(name = 'Add80293', )([Fla60229,Con22550])
Dot76042 = keras.layers.Dot(axes=(1, 1), name = 'Dot76042', )([in0Dot76042,in1Dot76042])
Con49255 = keras.layers.Concatenate(axis=1, name = 'Con49255', )([Dot76042,in0Con49255])
Ave85714 = keras.layers.Average(name = 'Ave85714', )([Add80293,Con49255])
model = tf.keras.models.Model(inputs=[in0Add41934,in1Add41934,in0Con22491,in0Add10177,in1Add10177,in0Sub80444,in1Sub80444,in0Con22550,in0Dot76042,in1Dot76042,in0Con49255], outputs=Ave85714)
in0Add41934 = tf.constant([[[[0.2112, 0.4671], [0.7142, 0.0347]]]])
in1Add41934 = tf.constant([[[[0.6169, 0.6104], [0.4768, 0.8717]]]])
in0Con22491 = tf.constant([[[[[0.3927], [0.3493]], [[0.8939], [0.4988]]]]])
in0Add10177 = tf.constant([[[[[0.1728, 0.6197]]]]])
in1Add10177 = tf.constant([[[[[0.1916, 0.8395]]]]])
in0Sub80444 = tf.constant([[0.1209, 0.7756]])
in1Sub80444 = tf.constant([[0.994, 0.6218]])
in0Con22550 = tf.constant([[0.6277, 0.1793, 0.2, 0.8369, 0.6514, 0.2603]])
in0Dot76042 = tf.constant([[0.616, 0.4685]])
in1Dot76042 = tf.constant([[0.9746, 0.0584]])
in0Con49255 = tf.constant([[0.0939, 0.9721, 0.9237, 0.7479, 0.9267, 0.9178, 0.4628]])
print (np.array2string(model.predict([in0Add41934,in1Add41934,in0Con22491,in0Add10177,in1Add10177,in0Sub80444,in1Sub80444,in0Con22550,in0Dot76042,in1Dot76042,in0Con49255],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave85714.png')

LAdd41934 = add_layer([[[[[0.2112, 0.4671], [0.7142, 0.0347]]]], [[[[0.6169, 0.6104], [0.4768, 0.8717]]]]], Add41934), 
LRes89692 = reshape_layer(Add41934, [1, 2, 2, 1], Res89692), 
LCon22491 = concatenate_layer([Res89692,[[[[[0.3927], [0.3493]], [[0.8939], [0.4988]]]]]], 4, Con22491), 
LAdd10177 = add_layer([[[[[[0.1728, 0.6197]]]]], [[[[[0.1916, 0.8395]]]]]], Add10177), 
LZer26693 = zero_padding3D_layer(Add10177, 0, 0, 1, 0, 1, 0, Zer26693), 
LAve85137 = average_layer([Con22491,Zer26693], Ave85137), 
LRes30013 = reshape_layer(Ave85137, [1, 2, 4], Res30013), 
LRes534 = reshape_layer(Res30013, [1, 8], Res534), 
LFla60229 = flatten_layer(Res534, Fla60229), 
LSub80444 = subtract_layer([[0.1209, 0.7756]], [[0.994, 0.6218]], Sub80444), 
LCon22550 = concatenate_layer([Sub80444,[[0.6277, 0.1793, 0.2, 0.8369, 0.6514, 0.2603]]], 1, Con22550), 
LAdd80293 = add_layer([Fla60229,Con22550], Add80293), 
LDot76042 = dot_layer([[0.616, 0.4685]], [[0.9746, 0.0584]], 1, 1, Dot76042), 
LCon49255 = concatenate_layer([Dot76042,[[0.0939, 0.9721, 0.9237, 0.7479, 0.9267, 0.9178, 0.4628]]], 1, Con49255), 
LAve85714 = average_layer([Add80293,Con49255], Ave85714), 
exec_layers([LAdd41934,LRes89692,LCon22491,LAdd10177,LZer26693,LAve85137,LRes30013,LRes534,LFla60229,LSub80444,LCon22550,LAdd80293,LDot76042,LCon49255,LAve85714],["Add41934","Res89692","Con22491","Add10177","Zer26693","Ave85137","Res30013","Res534","Fla60229","Sub80444","Con22550","Add80293","Dot76042","Con49255","Ave85714"],Ave85714,"Ave85714")

Actual (Unparsed): [[0.0843320, 0.2220250, 1.0692750, 0.6388250, 0.7717000, 1.1052750, 1.1023000, 0.8510500]]

Expected (Unparsed): [[0.08433200000000002,0.22202499999999997,1.0692750000000002,0.638825,0.7716999999999999,1.105275,1.1023,0.8510500000000001]]

Actual:   [[0.0844, 0.2221, 1.0693, 0.6389, 0.7717, 1.1053, 1.1023, 0.8511]]

Expected: [[0.0844, 0.2221, 1.0693, 0.6389, 0.7717, 1.1053, 1.1023, 0.8511]]