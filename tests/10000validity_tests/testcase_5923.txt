import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_85084 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Zer10044 = tf.keras.layers.Input(shape=([2, 4]))
in0Con10314 = tf.keras.layers.Input(shape=([4, 4]))

Up_85084 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_85084', )(in0Up_85084)
Res17684 = keras.layers.Reshape((2, 8), name = 'Res17684', )(Up_85084)
Zer26556 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer26556', )(Res17684)
Zer10044 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer10044', )(in0Zer10044)
Lay21933 = keras.layers.LayerNormalization(axis=1, epsilon=1.435774042017536, name = 'Lay21933', )(Zer10044)
Con10314 = keras.layers.Concatenate(axis=2, name = 'Con10314', )([Lay21933,in0Con10314])
Add27218 = keras.layers.Add(name = 'Add27218', )([Zer26556,Con10314])
model = tf.keras.models.Model(inputs=[in0Up_85084,in0Zer10044,in0Con10314], outputs=Add27218)
in0Up_85084 = tf.constant([[[[1.4784, 1.4289], [1.0125, 1.6658]], [[1.8176, 1.933], [1.8599, 1.7301]]]])
in0Zer10044 = tf.constant([[[1.2287, 1.5983, 1.2732, 1.799], [1.3855, 1.4115, 1.6081, 1.4501]]])
in0Con10314 = tf.constant([[[0.6253, 0.4411, 0.4757, 0.6585], [0.959, 0.0381, 0.8969, 0.7285], [0.5499, 0.7658, 0.3887, 0.3948], [0.9568, 0.6426, 0.9253, 0.1068]]])
print (np.array2string(model.predict([in0Up_85084,in0Zer10044,in0Con10314],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add27218.png')

LUp_85084 = up_sampling2D_layer([[[[1.4784, 1.4289], [1.0125, 1.6658]], [[1.8176, 1.933], [1.8599, 1.7301]]]], 1, 2, Up_85084), 
LRes17684 = reshape_layer(Up_85084, [2, 8], Res17684), 
LZer26556 = zero_padding1D_layer(Res17684, 2, 0, Zer26556), 
LZer10044 = zero_padding1D_layer([[[1.2287, 1.5983, 1.2732, 1.799], [1.3855, 1.4115, 1.6081, 1.4501]]], 1, 1, Zer10044), 
LLay21933 = layer_normalization_layer(Zer10044, 1, 1.435774042017536, Lay21933), 
LCon10314 = concatenate_layer([Lay21933,[[[0.6253, 0.4411, 0.4757, 0.6585], [0.959, 0.0381, 0.8969, 0.7285], [0.5499, 0.7658, 0.3887, 0.3948], [0.9568, 0.6426, 0.9253, 0.1068]]]], 2, Con10314), 
LAdd27218 = add_layer([Zer26556,Con10314], Add27218), 
exec_layers([LUp_85084,LRes17684,LZer26556,LZer10044,LLay21933,LCon10314,LAdd27218],["Up_85084","Res17684","Zer26556","Zer10044","Lay21933","Con10314","Add27218"],Add27218,"Add27218")

Actual (Unparsed): [[[-0.4784383, -0.5312242, -0.5133847, -0.5590897, 0.6253000, 0.4411000, 0.4757000, 0.6585000], [0.4210447, 0.5971640, 0.3940410, 0.6791638, 0.9590000, 0.0381000, 0.8969000, 0.7285000], [2.0142318, 1.8941845, 2.1111284, 1.8679156, 1.5624000, 2.4316000, 1.4012001, 2.0606000], [1.3391617, 1.4017757, 1.3042153, 1.3739103, 2.8167000, 2.3727000, 2.7852000, 1.8369000]]]

Expected (Unparsed): [[[-0.4784382766285488,-0.5312242462819424,-0.5133846979333117,-0.559089693639867,0.6253,0.4411,0.4757,0.6585],[0.4210447170115673,0.5971639693236507,0.3940409743794532,0.6791638028460777,0.959,0.0381,0.8969,0.7285],[2.0142318362455303,1.894184523240234,2.11112842148717,1.8679155844336564,1.5624,2.4316,1.4012,2.0606],[1.3391617233714512,1.4017757537180575,1.3042153020666885,1.373910306360133,2.8167,2.3727,2.7852,1.8369]]]

Actual:   [[[-0.4784, -0.5312, -0.5133, -0.559, 0.6253, 0.4411, 0.4757, 0.6585], [0.4211, 0.5972, 0.3941, 0.6792, 0.959, 0.0381, 0.8969, 0.7285], [2.0143, 1.8942, 2.1112, 1.868, 1.5624, 2.4316, 1.4013, 2.0606], [1.3392, 1.4018, 1.3043, 1.374, 2.8167, 2.3727, 2.7852, 1.8369]]]

Expected: [[[-0.4784, -0.5312, -0.5133, -0.559, 0.6253, 0.4411, 0.4757, 0.6585], [0.4211, 0.5972, 0.3941, 0.6792, 0.959, 0.0381, 0.8969, 0.7285], [2.0143, 1.8942, 2.1112, 1.868, 1.5624, 2.4316, 1.4012, 2.0606], [1.3392, 1.4018, 1.3043, 1.374, 2.8167, 2.3727, 2.7852, 1.8369]]]