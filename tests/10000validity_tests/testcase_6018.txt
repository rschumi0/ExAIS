import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max51071 = tf.keras.layers.Input(shape=([2, 1]))
in1Max51071 = tf.keras.layers.Input(shape=([2, 1]))
in0Max66709 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max66709 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con81440 = tf.keras.layers.Input(shape=([1]))
in0Glo89321 = tf.keras.layers.Input(shape=([1, 2]))

Max51071 = keras.layers.Maximum(name = 'Max51071', )([in0Max51071,in1Max51071])
Fla64664 = keras.layers.Flatten(name = 'Fla64664', )(Max51071)
Max66709 = keras.layers.Maximum(name = 'Max66709', )([in0Max66709,in1Max66709])
Dep48750 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep48750', )(Max66709)
Res52815 = keras.layers.Reshape((1, 1), name = 'Res52815', )(Dep48750)
Fla8328 = keras.layers.Flatten(name = 'Fla8328', )(Res52815)
Con81440 = keras.layers.Concatenate(axis=1, name = 'Con81440', )([Fla8328,in0Con81440])
Glo89321 = keras.layers.GlobalMaxPool1D(name = 'Glo89321', )(in0Glo89321)
Max22018 = keras.layers.Maximum(name = 'Max22018', )([Con81440,Glo89321])
Sub92969 = keras.layers.Subtract(name = 'Sub92969', )([Fla64664,Max22018])
model = tf.keras.models.Model(inputs=[in0Max51071,in1Max51071,in0Max66709,in1Max66709,in0Con81440,in0Glo89321], outputs=Sub92969)
w = model.get_layer('Dep48750').get_weights() 
w[0] = np.array([[[[0.7061]]]])
w[1] = np.array([0])
model.get_layer('Dep48750').set_weights(w) 
in0Max51071 = tf.constant([[[0.9924], [0.2651]]])
in1Max51071 = tf.constant([[[0.4092], [0.6554]]])
in0Max66709 = tf.constant([[[[0.9483]]]])
in1Max66709 = tf.constant([[[[0.9452]]]])
in0Con81440 = tf.constant([[0.5212]])
in0Glo89321 = tf.constant([[[1.6998, 1.1399]]])
print (np.array2string(model.predict([in0Max51071,in1Max51071,in0Max66709,in1Max66709,in0Con81440,in0Glo89321],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub92969.png')

LMax51071 = maximum_layer([[[[0.9924], [0.2651]]], [[[0.4092], [0.6554]]]], Max51071), 
LFla64664 = flatten_layer(Max51071, Fla64664), 
LMax66709 = maximum_layer([[[[[0.9483]]]], [[[[0.9452]]]]], Max66709), 
LDep48750 = depthwise_conv2D_layer(Max66709, 1, 1,[[[[0.7061]]]],[0], 1, 1, false, Dep48750), 
LRes52815 = reshape_layer(Dep48750, [1, 1], Res52815), 
LFla8328 = flatten_layer(Res52815, Fla8328), 
LCon81440 = concatenate_layer([Fla8328,[[0.5212]]], 1, Con81440), 
LGlo89321 = global_max_pool1D_layer([[[1.6998, 1.1399]]], Glo89321), 
LMax22018 = maximum_layer([Con81440,Glo89321], Max22018), 
LSub92969 = subtract_layer(Fla64664,Max22018, Sub92969), 
exec_layers([LMax51071,LFla64664,LMax66709,LDep48750,LRes52815,LFla8328,LCon81440,LGlo89321,LMax22018,LSub92969],["Max51071","Fla64664","Max66709","Dep48750","Res52815","Fla8328","Con81440","Glo89321","Max22018","Sub92969"],Sub92969,"Sub92969")

Actual (Unparsed): [[-0.7074000, -0.4845000]]

Expected (Unparsed): [[-0.7074,-0.48449999999999993]]

Actual:   [[-0.7074, -0.4845]]

Expected: [[-0.7074, -0.4844]]