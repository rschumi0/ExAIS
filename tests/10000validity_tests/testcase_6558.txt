import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub53207 = tf.keras.layers.Input(shape=([3, 2, 3]))
in1Sub53207 = tf.keras.layers.Input(shape=([3, 2, 3]))

Sub53207 = keras.layers.Subtract(name = 'Sub53207', )([in0Sub53207,in1Sub53207])
Res89286 = keras.layers.Reshape((3, 2, 3, 1), name = 'Res89286', )(Sub53207)
Con78323 = keras.layers.Conv3DTranspose(4, (1, 2, 3),strides=(1, 1, 1), padding='same', name = 'Con78323', )(Res89286)
Res95096 = keras.layers.Reshape((3, 2, 12), name = 'Res95096', )(Con78323)
Max79733 = keras.layers.MaxPool2D(pool_size=(2, 2), name = 'Max79733', )(Res95096)
Thr14975 = keras.layers.ThresholdedReLU(theta=7.264157149943583, name = 'Thr14975', )(Max79733)
model = tf.keras.models.Model(inputs=[in0Sub53207,in1Sub53207], outputs=Thr14975)
w = model.get_layer('Con78323').get_weights() 
w[0] = np.array([[[[[0.7446], [0.8753], [0.5804], [0.1845]], [[0.3358], [0.336], [0.4132], [0.8301]], [[0.0659], [0.4155], [0.016], [0.6988]]], [[[0.135], [0.1033], [0.9386], [0.1487]], [[0.9292], [0.35], [0.9074], [0.2047]], [[0.3269], [0.9228], [0.4095], [0.3051]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con78323').set_weights(w) 
in0Sub53207 = tf.constant([[[[0.9014, 0.6796, 0.0018], [0.2937, 0.0295, 0.3826]], [[0.9745, 0.8108, 0.0381], [0.8121, 0.2611, 0.5777]], [[0.5144, 0.7002, 0.4629], [0.3274, 0.7967, 0.2427]]]])
in1Sub53207 = tf.constant([[[[0.2947, 0.3111, 0.8606], [0.5377, 0.8178, 0.2161]], [[0.4728, 0.554, 0.2969], [0.6274, 0.3234, 0.3092]], [[0.3331, 0.8646, 0.6785], [0.4965, 0.7724, 0.2212]]]])
print (np.array2string(model.predict([in0Sub53207,in1Sub53207],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr14975.png')

LSub53207 = subtract_layer([[[[0.9014, 0.6796, 0.0018], [0.2937, 0.0295, 0.3826]], [[0.9745, 0.8108, 0.0381], [0.8121, 0.2611, 0.5777]], [[0.5144, 0.7002, 0.4629], [0.3274, 0.7967, 0.2427]]]], [[[[0.2947, 0.3111, 0.8606], [0.5377, 0.8178, 0.2161]], [[0.4728, 0.554, 0.2969], [0.6274, 0.3234, 0.3092]], [[0.3331, 0.8646, 0.6785], [0.4965, 0.7724, 0.2212]]]], Sub53207), 
LRes89286 = reshape_layer(Sub53207, [3, 2, 3, 1], Res89286), 
LCon78323 = conv3D_transpose_layer(Res89286, 1, 2, 3,[[[[[0.7446], [0.8753], [0.5804], [0.1845]], [[0.3358], [0.336], [0.4132], [0.8301]], [[0.0659], [0.4155], [0.016], [0.6988]]], [[[0.135], [0.1033], [0.9386], [0.1487]], [[0.9292], [0.35], [0.9074], [0.2047]], [[0.3269], [0.9228], [0.4095], [0.3051]]]]],[0, 0, 0, 0], 1, 1, 1, true, Con78323), 
LRes95096 = reshape_layer(Con78323, [3, 2, 12], Res95096), 
LMax79733 = max_pool2D_layer(Res95096, 2, 2, Max79733), 
LThr14975 = thresholded_relu_layer(Max79733, 7.264157149943583, Thr14975), 
exec_layers([LSub53207,LRes89286,LCon78323,LRes95096,LMax79733,LThr14975],["Sub53207","Res89286","Con78323","Res95096","Max79733","Thr14975"],Thr14975,"Thr14975")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, -0.0000000, 0.0000000, -0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0,0,0,0,0,0,0,0,0,0,0]]]]

Actual:   [[[[0, 0, 0, 0, 0, 0, 0, 0, -0, 0, -0, 0]]]]

Expected: [[[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]]