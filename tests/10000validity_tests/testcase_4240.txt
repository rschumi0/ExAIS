import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min43182 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Min43182 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Add90120 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add90120 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Min43182 = keras.layers.Minimum(name = 'Min43182', )([in0Min43182,in1Min43182])
Zer11678 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer11678', )(Min43182)
Add90120 = keras.layers.Add(name = 'Add90120', )([in0Add90120,in1Add90120])
Lay16089 = keras.layers.LayerNormalization(axis=2, epsilon=2.284642558436628, name = 'Lay16089', )(Add90120)
Zer20759 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer20759', )(Lay16089)
Ave31529 = keras.layers.Average(name = 'Ave31529', )([Zer11678,Zer20759])
model = tf.keras.models.Model(inputs=[in0Min43182,in1Min43182,in0Add90120,in1Add90120], outputs=Ave31529)
in0Min43182 = tf.constant([[[[[0.7669], [0.1368]]], [[[0.4797], [0.028]]]]])
in1Min43182 = tf.constant([[[[[0.8046], [0.5143]]], [[[0.2775], [0.3646]]]]])
in0Add90120 = tf.constant([[[[[0.5228], [0.3101]], [[0.9317], [0.335]]]]])
in1Add90120 = tf.constant([[[[[0.3675], [0.2453]], [[0.9681], [0.6782]]]]])
print (np.array2string(model.predict([in0Min43182,in1Min43182,in0Add90120,in1Add90120],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave31529.png')

LMin43182 = minimum_layer([[[[[[0.7669], [0.1368]]], [[[0.4797], [0.028]]]]], [[[[[0.8046], [0.5143]]], [[[0.2775], [0.3646]]]]]], Min43182), 
LZer11678 = zero_padding3D_layer(Min43182, 0, 0, 2, 0, 0, 0, Zer11678), 
LAdd90120 = add_layer([[[[[[0.5228], [0.3101]], [[0.9317], [0.335]]]]], [[[[[0.3675], [0.2453]], [[0.9681], [0.6782]]]]]], Add90120), 
LLay16089 = layer_normalization_layer(Add90120, 2, 2.284642558436628, Lay16089), 
LZer20759 = zero_padding3D_layer(Lay16089, 1, 0, 1, 0, 0, 0, Zer20759), 
LAve31529 = average_layer([Zer11678,Zer20759], Ave31529), 
exec_layers([LMin43182,LZer11678,LAdd90120,LLay16089,LZer20759,LAve31529],["Min43182","Zer11678","Add90120","Lay16089","Zer20759","Ave31529"],Ave31529,"Ave31529")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.3834500], [0.0684000]]], [[[0.0000000], [0.0000000]], [[-0.1583724], [-0.0748657]], [[0.2971224], [0.0888657]]]]]

Expected (Unparsed): [[[[[0],[0]],[[0],[0]],[[0.38345],[0.0684]]],[[[0],[0]],[[-0.15837239386708604],[-0.07486570721985986]],[[0.29712239386708617],[0.08886570721985988]]]]]

Actual:   [[[[[0], [0]], [[0], [0]], [[0.3835], [0.0684]]], [[[0], [0]], [[-0.1583], [-0.0748]], [[0.2972], [0.0889]]]]]

Expected: [[[[[0], [0]], [[0], [0]], [[0.3835], [0.0684]]], [[[0], [0]], [[-0.1583], [-0.0748]], [[0.2972], [0.0889]]]]]