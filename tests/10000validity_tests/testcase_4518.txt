import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min81341 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min81341 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con6746 = tf.keras.layers.Input(shape=([2, 4]))
in0Up_83804 = tf.keras.layers.Input(shape=([2, 4]))

Min81341 = keras.layers.Minimum(name = 'Min81341', )([in0Min81341,in1Min81341])
Res58054 = keras.layers.Reshape((2, 2), name = 'Res58054', )(Min81341)
Con6746 = keras.layers.Concatenate(axis=2, name = 'Con6746', )([Res58054,in0Con6746])
Up_83804 = keras.layers.UpSampling1D(size=(1), name = 'Up_83804', )(in0Up_83804)
Res24100 = keras.layers.Reshape((2, 4, 1), name = 'Res24100', )(Up_83804)
Zer5845 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer5845', )(Res24100)
Res9086 = keras.layers.Reshape((4, 6), name = 'Res9086', )(Zer5845)
Zer95049 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer95049', )(Res9086)
Dot62197 = keras.layers.Dot(axes=(2, 2), name = 'Dot62197', )([Con6746,Zer95049])
ELU93030 = keras.layers.ELU(alpha=-2.0179251120809987, name = 'ELU93030', )(Dot62197)
model = tf.keras.models.Model(inputs=[in0Min81341,in1Min81341,in0Con6746,in0Up_83804], outputs=ELU93030)
in0Min81341 = tf.constant([[[[0.4288], [0.9586]], [[0.2921], [0.8151]]]])
in1Min81341 = tf.constant([[[[0.7433], [0.3864]], [[0.1945], [0.7024]]]])
in0Con6746 = tf.constant([[[0.9041, 0.7631, 0.5056, 0.0019], [0.0224, 0.9099, 0.4453, 0.3947]]])
in0Up_83804 = tf.constant([[[1.0342, 1.3514, 1.7393, 1.4351], [1.1988, 1.6064, 1.742, 1.7428]]])
print (np.array2string(model.predict([in0Min81341,in1Min81341,in0Con6746,in0Up_83804],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ELU93030.png')

LMin81341 = minimum_layer([[[[[0.4288], [0.9586]], [[0.2921], [0.8151]]]], [[[[0.7433], [0.3864]], [[0.1945], [0.7024]]]]], Min81341), 
LRes58054 = reshape_layer(Min81341, [2, 2], Res58054), 
LCon6746 = concatenate_layer([Res58054,[[[0.9041, 0.7631, 0.5056, 0.0019], [0.0224, 0.9099, 0.4453, 0.3947]]]], 2, Con6746), 
LUp_83804 = up_sampling1D_layer([[[1.0342, 1.3514, 1.7393, 1.4351], [1.1988, 1.6064, 1.742, 1.7428]]], 1, Up_83804), 
LRes24100 = reshape_layer(Up_83804, [2, 4, 1], Res24100), 
LZer5845 = zero_padding2D_layer(Res24100, 1, 1, 1, 1, Zer5845), 
LRes9086 = reshape_layer(Zer5845, [4, 6], Res9086), 
LZer95049 = zero_padding1D_layer(Res9086, 2, 0, Zer95049), 
LDot62197 = dot_layer(Con6746,Zer95049, 2, 2, Dot62197), 
LELU93030 = elu_layer(Dot62197, -2.0179251120809987, ELU93030), 
exec_layers([LMin81341,LRes58054,LCon6746,LUp_83804,LRes24100,LZer5845,LRes9086,LZer95049,LDot62197,LELU93030],["Min81341","Res58054","Con6746","Up_83804","Res24100","Zer5845","Res9086","Zer95049","Dot62197","ELU93030"],ELU93030,"ELU93030")

Actual (Unparsed): [[[-0.0000000, -0.0000000, -0.0000000, 3.6742620, 4.1260425, -0.0000000], [-0.0000000, -0.0000000, -0.0000000, 2.9783326, 3.2391352, -0.0000000]]]

Expected (Unparsed): [[[0.0,0.0,0.0,3.67426201,4.12604244,0.0],[0.0,0.0,0.0,2.9783325400000003,3.23913512,0.0]]]

Actual:   [[[-0, -0, -0, 3.6743, 4.1261, -0], [-0, -0, -0, 2.9784, 3.2392, -0]]]

Expected: [[[0, 0, 0, 3.6743, 4.1261, 0], [0, 0, 0, 2.9784, 3.2392, 0]]]