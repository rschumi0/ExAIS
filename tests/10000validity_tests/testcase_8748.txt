import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave3336 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave3336 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave3336 = keras.layers.Average(name = 'Ave3336', )([in0Ave3336,in1Ave3336])
Lea60491 = keras.layers.LeakyReLU(alpha=4.896093231711068, name = 'Lea60491', )(Ave3336)
Glo68670 = keras.layers.GlobalAveragePooling2D(name = 'Glo68670', )(Lea60491)
Res90880 = keras.layers.Reshape((2, 1), name = 'Res90880', )(Glo68670)
Res2187 = keras.layers.Reshape((2, 1, 1), name = 'Res2187', )(Res90880)
Con16869 = keras.layers.Conv2D(2, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con16869', )(Res2187)
model = tf.keras.models.Model(inputs=[in0Ave3336,in1Ave3336], outputs=Con16869)
w = model.get_layer('Con16869').get_weights() 
w[0] = np.array([[[[0.6708, 0.2469]]]])
w[1] = np.array([0, 0])
model.get_layer('Con16869').set_weights(w) 
in0Ave3336 = tf.constant([[[[0.003, 0.2187], [0.782, 0.4093]], [[0.0072, 0.9079], [0.2091, 0.4289]]]])
in1Ave3336 = tf.constant([[[[0.4004, 0.8519], [0.2656, 0.5713]], [[0.6745, 0.9301], [0.2551, 0.592]]]])
print (np.array2string(model.predict([in0Ave3336,in1Ave3336],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con16869.png')

LAve3336 = average_layer([[[[[0.003, 0.2187], [0.782, 0.4093]], [[0.0072, 0.9079], [0.2091, 0.4289]]]], [[[[0.4004, 0.8519], [0.2656, 0.5713]], [[0.6745, 0.9301], [0.2551, 0.592]]]]], Ave3336), 
LLea60491 = leaky_relu_layer(Ave3336, 4.896093231711068, Lea60491), 
LGlo68670 = global_average_pooling2D_layer(Lea60491, Glo68670), 
LRes90880 = reshape_layer(Glo68670, [2, 1], Res90880), 
LRes2187 = reshape_layer(Res90880, [2, 1, 1], Res2187), 
LCon16869 = conv2D_layer(Res2187, 1, 1,[[[[0.6708, 0.2469]]]],[0, 0], 1, 1, true, 1, 1, Con16869), 
exec_layers([LAve3336,LLea60491,LGlo68670,LRes90880,LRes2187,LCon16869],["Ave3336","Lea60491","Glo68670","Res90880","Res2187","Con16869"],Con16869,"Con16869")

Actual (Unparsed): [[[[0.2177501, 0.0801468]], [[0.4117119, 0.1515380]]]]

Expected (Unparsed): [[[[0.21775006499999996,0.08014682625]],[[0.41171188499999994,0.15153796125]]]]

Actual:   [[[[0.2178, 0.0802]], [[0.4118, 0.1516]]]]

Expected: [[[[0.2178, 0.0802]], [[0.4118, 0.1516]]]]