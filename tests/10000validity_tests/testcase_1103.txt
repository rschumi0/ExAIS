import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave60912 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Ave60912 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Up_30747 = tf.keras.layers.Input(shape=([4, 4, 1]))
in0Con55590 = tf.keras.layers.Input(shape=([4, 8, 1]))

Ave60912 = keras.layers.Average(name = 'Ave60912', )([in0Ave60912,in1Ave60912])
Res79425 = keras.layers.Reshape((2, 1, 2), name = 'Res79425', )(Ave60912)
Zer20046 = keras.layers.ZeroPadding2D(padding=((2, 0), (7, 0)), name = 'Zer20046', )(Res79425)
Up_30747 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_30747', )(in0Up_30747)
Cro83234 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro83234', )(Up_30747)
Con55590 = keras.layers.Concatenate(axis=3, name = 'Con55590', )([Cro83234,in0Con55590])
Add38678 = keras.layers.Add(name = 'Add38678', )([Zer20046,Con55590])
Res48955 = keras.layers.Reshape((4, 16), name = 'Res48955', )(Add38678)
Zer29076 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer29076', )(Res48955)
model = tf.keras.models.Model(inputs=[in0Ave60912,in1Ave60912,in0Up_30747,in0Con55590], outputs=Zer29076)
in0Ave60912 = tf.constant([[[[[0.8042], [0.8916]]], [[[0.1803], [0.3537]]]]])
in1Ave60912 = tf.constant([[[[[0.5517], [0.6748]]], [[[0.8849], [0.1787]]]]])
in0Up_30747 = tf.constant([[[[1.8876], [1.1613], [1.6602], [1.7162]], [[1.8943], [1.77], [1.2391], [1.9293]], [[1.8095], [1.7458], [1.6216], [1.271]], [[1.9909], [1.4417], [1.9853], [1.0581]]]])
in0Con55590 = tf.constant([[[[0.2076], [0.7914], [0.0789], [0.9972], [0.6047], [0.955], [0.7917], [0.9944]], [[0.9502], [0.4573], [0.2986], [0.8233], [0.4376], [0.5945], [0.7436], [0.2422]], [[0.4759], [0.1321], [0.4859], [0.7268], [0.2533], [0.9471], [0.0969], [0.5594]], [[0.7497], [0.071], [0.6134], [0.3349], [0.3849], [0.9039], [0.9777], [0.8826]]]])
print (np.array2string(model.predict([in0Ave60912,in1Ave60912,in0Up_30747,in0Con55590],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer29076.png')

LAve60912 = average_layer([[[[[[0.8042], [0.8916]]], [[[0.1803], [0.3537]]]]], [[[[[0.5517], [0.6748]]], [[[0.8849], [0.1787]]]]]], Ave60912), 
LRes79425 = reshape_layer(Ave60912, [2, 1, 2], Res79425), 
LZer20046 = zero_padding2D_layer(Res79425, 2, 0, 7, 0, Zer20046), 
LUp_30747 = up_sampling2D_layer([[[[1.8876], [1.1613], [1.6602], [1.7162]], [[1.8943], [1.77], [1.2391], [1.9293]], [[1.8095], [1.7458], [1.6216], [1.271]], [[1.9909], [1.4417], [1.9853], [1.0581]]]], 1, 2, Up_30747), 
LCro83234 = cropping2D_layer(Up_30747, 0, 0, 0, 0, Cro83234), 
LCon55590 = concatenate_layer([Cro83234,[[[[0.2076], [0.7914], [0.0789], [0.9972], [0.6047], [0.955], [0.7917], [0.9944]], [[0.9502], [0.4573], [0.2986], [0.8233], [0.4376], [0.5945], [0.7436], [0.2422]], [[0.4759], [0.1321], [0.4859], [0.7268], [0.2533], [0.9471], [0.0969], [0.5594]], [[0.7497], [0.071], [0.6134], [0.3349], [0.3849], [0.9039], [0.9777], [0.8826]]]]], 3, Con55590), 
LAdd38678 = add_layer([Zer20046,Con55590], Add38678), 
LRes48955 = reshape_layer(Add38678, [4, 16], Res48955), 
LZer29076 = zero_padding1D_layer(Res48955, 1, 1, Zer29076), 
exec_layers([LAve60912,LRes79425,LZer20046,LUp_30747,LCro83234,LCon55590,LAdd38678,LRes48955,LZer29076],["Ave60912","Res79425","Zer20046","Up_30747","Cro83234","Con55590","Add38678","Res48955","Zer29076"],Zer29076,"Zer29076")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.8875999, 0.2076000, 1.8875999, 0.7914000, 1.1612999, 0.0789000, 1.1612999, 0.9972000, 1.6602000, 0.6047000, 1.6602000, 0.9550000, 1.7162000, 0.7917000, 1.7162000, 0.9944000], [1.8943000, 0.9502000, 1.8943000, 0.4573000, 1.7700000, 0.2986000, 1.7700000, 0.8233000, 1.2391000, 0.4376000, 1.2391000, 0.5945000, 1.9293000, 0.7436000, 1.9293000, 0.2422000], [1.8095000, 0.4759000, 1.8095000, 0.1321000, 1.7458000, 0.4859000, 1.7458000, 0.7268000, 1.6216000, 0.2533000, 1.6216000, 0.9471000, 1.2710000, 0.0969000, 1.9489500, 1.3426000], [1.9909000, 0.7497000, 1.9909000, 0.0710000, 1.4417000, 0.6134000, 1.4417000, 0.3349000, 1.9852999, 0.3849000, 1.9852999, 0.9039000, 1.0581000, 0.9777000, 1.5907000, 1.1488000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1.8876,0.2076,1.8876,0.7914,1.1613,0.0789,1.1613,0.9972,1.6602,0.6047,1.6602,0.955,1.7162,0.7917,1.7162,0.9944],[1.8943,0.9502,1.8943,0.4573,1.77,0.2986,1.77,0.8233,1.2391,0.4376,1.2391,0.5945,1.9293,0.7436,1.9293,0.2422],[1.8095,0.4759,1.8095,0.1321,1.7458,0.4859,1.7458,0.7268,1.6216,0.2533,1.6216,0.9471,1.271,0.0969,1.94895,1.3426],[1.9909,0.7497,1.9909,0.071,1.4417,0.6134,1.4417,0.3349,1.9853,0.3849,1.9853,0.9039,1.0581,0.9777,1.5907,1.1488],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1.8876, 0.2076, 1.8876, 0.7914, 1.1613, 0.0789, 1.1613, 0.9972, 1.6602, 0.6047, 1.6602, 0.955, 1.7162, 0.7917, 1.7162, 0.9944], [1.8943, 0.9502, 1.8943, 0.4573, 1.77, 0.2986, 1.77, 0.8233, 1.2391, 0.4376, 1.2391, 0.5945, 1.9293, 0.7436, 1.9293, 0.2422], [1.8095, 0.4759, 1.8095, 0.1321, 1.7458, 0.4859, 1.7458, 0.7268, 1.6216, 0.2533, 1.6216, 0.9471, 1.271, 0.0969, 1.949, 1.3426], [1.9909, 0.7497, 1.9909, 0.071, 1.4417, 0.6134, 1.4417, 0.3349, 1.9853, 0.3849, 1.9853, 0.9039, 1.0581, 0.9777, 1.5907, 1.1488], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1.8876, 0.2076, 1.8876, 0.7914, 1.1613, 0.0789, 1.1613, 0.9972, 1.6602, 0.6047, 1.6602, 0.955, 1.7162, 0.7917, 1.7162, 0.9944], [1.8943, 0.9502, 1.8943, 0.4573, 1.77, 0.2986, 1.77, 0.8233, 1.2391, 0.4376, 1.2391, 0.5945, 1.9293, 0.7436, 1.9293, 0.2422], [1.8095, 0.4759, 1.8095, 0.1321, 1.7458, 0.4859, 1.7458, 0.7268, 1.6216, 0.2533, 1.6216, 0.9471, 1.271, 0.0969, 1.949, 1.3426], [1.9909, 0.7497, 1.9909, 0.071, 1.4417, 0.6134, 1.4417, 0.3349, 1.9853, 0.3849, 1.9853, 0.9039, 1.0581, 0.9777, 1.5907, 1.1488], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]