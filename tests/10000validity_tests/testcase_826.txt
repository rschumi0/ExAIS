import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave47566 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave47566 = tf.keras.layers.Input(shape=([2, 1]))
in0Con68527 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Up_26757 = tf.keras.layers.Input(shape=([1, 1]))
in0Con18337 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Max68403 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Max68403 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Mul93657 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul93657 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con88625 = tf.keras.layers.Input(shape=([2, 1, 1]))

Ave47566 = keras.layers.Average(name = 'Ave47566', )([in0Ave47566,in1Ave47566])
Res3077 = keras.layers.Reshape((2, 1, 1), name = 'Res3077', )(Ave47566)
Con68527 = keras.layers.Concatenate(axis=3, name = 'Con68527', )([Res3077,in0Con68527])
Up_26757 = keras.layers.UpSampling1D(size=(1), name = 'Up_26757', )(in0Up_26757)
Res74871 = keras.layers.Reshape((1, 1, 1), name = 'Res74871', )(Up_26757)
PRe15331 = keras.layers.PReLU(name = 'PRe15331', )(Res74871)
Res98309 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res98309', )(PRe15331)
Zer8242 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer8242', )(Res98309)
Con18337 = keras.layers.Concatenate(axis=4, name = 'Con18337', )([Zer8242,in0Con18337])
Max68403 = keras.layers.Maximum(name = 'Max68403', )([in0Max68403,in1Max68403])
Sub59407 = keras.layers.Subtract(name = 'Sub59407', )([Con18337,Max68403])
Res91585 = keras.layers.Reshape((2, 1, 2), name = 'Res91585', )(Sub59407)
Mul93657 = keras.layers.Multiply(name = 'Mul93657', )([in0Mul93657,in1Mul93657])
Con88625 = keras.layers.Concatenate(axis=3, name = 'Con88625', )([Mul93657,in0Con88625])
Mul83478 = keras.layers.Multiply(name = 'Mul83478', )([Res91585,Con88625])
Add74430 = keras.layers.Add(name = 'Add74430', )([Con68527,Mul83478])
model = tf.keras.models.Model(inputs=[in0Ave47566,in1Ave47566,in0Con68527,in0Up_26757,in0Con18337,in0Max68403,in1Max68403,in0Mul93657,in1Mul93657,in0Con88625], outputs=Add74430)
w = model.get_layer('PRe15331').get_weights() 
w[0] = np.array([[[0.0149]]])
model.get_layer('PRe15331').set_weights(w) 
in0Ave47566 = tf.constant([[[0.2053], [0.0927]]])
in1Ave47566 = tf.constant([[[0.0647], [0.5928]]])
in0Con68527 = tf.constant([[[[0.0705]], [[0.0072]]]])
in0Up_26757 = tf.constant([[[1.6556]]])
in0Con18337 = tf.constant([[[[[0.6971]]], [[[0.5647]]]]])
in0Max68403 = tf.constant([[[[[0.709, 0.5737]]], [[[0.3134, 0.3119]]]]])
in1Max68403 = tf.constant([[[[[0.4481, 0.3325]]], [[[0.7456, 0.1943]]]]])
in0Mul93657 = tf.constant([[[[0.7279]], [[0.0396]]]])
in1Mul93657 = tf.constant([[[[0.7824]], [[0.7428]]]])
in0Con88625 = tf.constant([[[[0.3184]], [[0.7006]]]])
print (np.array2string(model.predict([in0Ave47566,in1Ave47566,in0Con68527,in0Up_26757,in0Con18337,in0Max68403,in1Max68403,in0Mul93657,in1Mul93657,in0Con88625],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add74430.png')

LAve47566 = average_layer([[[[0.2053], [0.0927]]], [[[0.0647], [0.5928]]]], Ave47566), 
LRes3077 = reshape_layer(Ave47566, [2, 1, 1], Res3077), 
LCon68527 = concatenate_layer([Res3077,[[[[0.0705]], [[0.0072]]]]], 3, Con68527), 
LUp_26757 = up_sampling1D_layer([[[1.6556]]], 1, Up_26757), 
LRes74871 = reshape_layer(Up_26757, [1, 1, 1], Res74871), 
LPRe15331 = prelu_layer(Res74871, [[[0.0149]]], PRe15331), 
LRes98309 = reshape_layer(PRe15331, [1, 1, 1, 1], Res98309), 
LZer8242 = zero_padding3D_layer(Res98309, 1, 0, 0, 0, 0, 0, Zer8242), 
LCon18337 = concatenate_layer([Zer8242,[[[[[0.6971]]], [[[0.5647]]]]]], 4, Con18337), 
LMax68403 = maximum_layer([[[[[[0.709, 0.5737]]], [[[0.3134, 0.3119]]]]], [[[[[0.4481, 0.3325]]], [[[0.7456, 0.1943]]]]]], Max68403), 
LSub59407 = subtract_layer(Con18337,Max68403, Sub59407), 
LRes91585 = reshape_layer(Sub59407, [2, 1, 2], Res91585), 
LMul93657 = multiply_layer([[[[[0.7279]], [[0.0396]]]], [[[[0.7824]], [[0.7428]]]]], Mul93657), 
LCon88625 = concatenate_layer([Mul93657,[[[[0.3184]], [[0.7006]]]]], 3, Con88625), 
LMul83478 = multiply_layer([Res91585,Con88625], Mul83478), 
LAdd74430 = add_layer([Con68527,Mul83478], Add74430), 
exec_layers([LAve47566,LRes3077,LCon68527,LUp_26757,LRes74871,LPRe15331,LRes98309,LZer8242,LCon18337,LMax68403,LSub59407,LRes91585,LMul93657,LCon88625,LMul83478,LAdd74430],["Ave47566","Res3077","Con68527","Up_26757","Res74871","PRe15331","Res98309","Zer8242","Con18337","Max68403","Sub59407","Res91585","Mul93657","Con88625","Mul83478","Add74430"],Add74430,"Add74430")

Actual (Unparsed): [[[[-0.2687819, 0.1097906]], [[0.3695175, 0.1843117]]]]

Expected (Unparsed): [[[[-0.26878185263999993,0.10979056000000001]],[[0.3695175408,0.18431167999999998]]]]

Actual:   [[[[-0.2687, 0.1098]], [[0.3696, 0.1844]]]]

Expected: [[[[-0.2687, 0.1098]], [[0.3696, 0.1844]]]]