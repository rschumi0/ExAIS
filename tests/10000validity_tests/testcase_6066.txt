import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul32876 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul32876 = tf.keras.layers.Input(shape=([1, 1]))
in0Mul12919 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Mul12919 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Mul32876 = keras.layers.Multiply(name = 'Mul32876', )([in0Mul32876,in1Mul32876])
Res74800 = keras.layers.Reshape((1, 1, 1), name = 'Res74800', )(Mul32876)
Loc14132 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 1), name = 'Loc14132', )(Res74800)
PRe61503 = keras.layers.PReLU(name = 'PRe61503', )(Loc14132)
Res48166 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res48166', )(PRe61503)
Mul12919 = keras.layers.Multiply(name = 'Mul12919', )([in0Mul12919,in1Mul12919])
Zer91647 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer91647', )(Mul12919)
Sub32738 = keras.layers.Subtract(name = 'Sub32738', )([Res48166,Zer91647])
model = tf.keras.models.Model(inputs=[in0Mul32876,in1Mul32876,in0Mul12919,in1Mul12919], outputs=Sub32738)
w = model.get_layer('Loc14132').get_weights() 
w[0] = np.array([[[0.6804, 0.2709]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc14132').set_weights(w) 
w = model.get_layer('PRe61503').get_weights() 
w[0] = np.array([[[0.183, 0.9336]]])
model.get_layer('PRe61503').set_weights(w) 
in0Mul32876 = tf.constant([[[0.7246]]])
in1Mul32876 = tf.constant([[[0.9147]]])
in0Mul12919 = tf.constant([[[[[0.7292]]]]])
in1Mul12919 = tf.constant([[[[[0.1767]]]]])
print (np.array2string(model.predict([in0Mul32876,in1Mul32876,in0Mul12919,in1Mul12919],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub32738.png')

LMul32876 = multiply_layer([[[[0.7246]]], [[[0.9147]]]], Mul32876), 
LRes74800 = reshape_layer(Mul32876, [1, 1, 1], Res74800), 
LLoc14132 = locally_connected2D_layer(Res74800, 1, 1,[[[0.6804, 0.2709]]],[[[0, 0]]], 1, 1, Loc14132), 
LPRe61503 = prelu_layer(Loc14132, [[[0.183, 0.9336]]], PRe61503), 
LRes48166 = reshape_layer(PRe61503, [1, 1, 2, 1], Res48166), 
LMul12919 = multiply_layer([[[[[[0.7292]]]]], [[[[[0.1767]]]]]], Mul12919), 
LZer91647 = zero_padding3D_layer(Mul12919, 0, 0, 0, 0, 1, 0, Zer91647), 
LSub32738 = subtract_layer(Res48166,Zer91647, Sub32738), 
exec_layers([LMul32876,LRes74800,LLoc14132,LPRe61503,LRes48166,LMul12919,LZer91647,LSub32738],["Mul32876","Res74800","Loc14132","PRe61503","Res48166","Mul12919","Zer91647","Sub32738"],Sub32738,"Sub32738")

Actual (Unparsed): [[[[[0.4509634], [0.0507006]]]]]

Expected (Unparsed): [[[[[0.450963418248],[0.05070060985800001]]]]]

Actual:   [[[[[0.451], [0.0508]]]]]

Expected: [[[[[0.451], [0.0508]]]]]