import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer71574 = tf.keras.layers.Input(shape=([1, 4, 4, 1]))
in0Dot65631 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot65631 = tf.keras.layers.Input(shape=([3, 2]))
in0Con17108 = tf.keras.layers.Input(shape=([3, 34]))

Zer71574 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer71574', )(in0Zer71574)
Res50954 = keras.layers.Reshape((3, 6, 6), name = 'Res50954', )(Zer71574)
Res30688 = keras.layers.Reshape((3, 36), name = 'Res30688', )(Res50954)
Dot65631 = keras.layers.Dot(axes=(1, 1), name = 'Dot65631', )([in0Dot65631,in1Dot65631])
Zer87334 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer87334', )(Dot65631)
Con17108 = keras.layers.Concatenate(axis=2, name = 'Con17108', )([Zer87334,in0Con17108])
Max53830 = keras.layers.Maximum(name = 'Max53830', )([Res30688,Con17108])
Glo56302 = keras.layers.GlobalAveragePooling1D(name = 'Glo56302', )(Max53830)
Res51247 = keras.layers.Reshape((36, 1), name = 'Res51247', )(Glo56302)
Res80227 = keras.layers.Reshape((36, 1, 1), name = 'Res80227', )(Res51247)
Up_50211 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_50211', )(Res80227)
Res2331 = keras.layers.Reshape((36, 1), name = 'Res2331', )(Up_50211)
Zer66355 = keras.layers.ZeroPadding1D(padding=((34, 0)), name = 'Zer66355', )(Res2331)
Res56801 = keras.layers.Reshape((70, 1, 1), name = 'Res56801', )(Zer66355)
Cro78251 = keras.layers.Cropping2D(cropping=((12, 24), (0, 0)), name = 'Cro78251', )(Res56801)
model = tf.keras.models.Model(inputs=[in0Zer71574,in0Dot65631,in1Dot65631,in0Con17108], outputs=Cro78251)
in0Zer71574 = tf.constant([[[[[1.274], [1.968], [1.5253], [1.6191]], [[1.217], [1.5142], [1.3464], [1.1129]], [[1.7792], [1.8607], [1.4857], [1.9796]], [[1.9654], [1.5498], [1.0725], [1.7946]]]]])
in0Dot65631 = tf.constant([[[0.4499, 0.9718], [0.1747, 0.2977], [0.6259, 0.7184]]])
in1Dot65631 = tf.constant([[[0.3374, 0.7305], [0.9753, 0.5685], [0.0507, 0.9701]]])
in0Con17108 = tf.constant([[[0.6074, 0.6749, 0.4048, 0.9049, 0.4928, 0.8979, 0.7519, 0.6532, 0.8189, 0.053, 0.6278, 0.8611, 0.2076, 0.359, 0.1945, 0.3389, 0.9166, 0.2482, 0.7176, 0.4375, 0.9306, 0.8616, 0.1879, 0.5718, 0.4864, 0.735, 0.123, 0.2257, 0.6102, 0.5317, 0.3799, 0.4604, 0.23, 0.0521], [0.3813, 0.0255, 0.829, 0.7756, 0.6296, 0.4005, 0.4003, 0.877, 0.7614, 0.4876, 0.6767, 0.9999, 0.6853, 0.2129, 0.2197, 0.0669, 0.5346, 0.0017, 0.9758, 0.0579, 0.2652, 0.9431, 0.3314, 0.001, 0.738, 0.4754, 0.5342, 0.3816, 0.0301, 0.5929, 0.585, 0.8029, 0.5417, 0.8974], [0.3519, 0.0036, 0.1867, 0.3022, 0.7082, 0.2777, 0.5845, 0.8312, 0.9565, 0.9292, 0.709, 0.7522, 0.6625, 0.6441, 0.8907, 0.2321, 0.2938, 0.5623, 0.417, 0.808, 0.7373, 0.3948, 0.2324, 0.233, 0.8489, 0.145, 0.3993, 0.6709, 0.6806, 0.8664, 0.0482, 0.7932, 0.9248, 0.4164]]])
print (np.array2string(model.predict([in0Zer71574,in0Dot65631,in1Dot65631,in0Con17108],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro78251.png')

LZer71574 = zero_padding3D_layer([[[[[1.274], [1.968], [1.5253], [1.6191]], [[1.217], [1.5142], [1.3464], [1.1129]], [[1.7792], [1.8607], [1.4857], [1.9796]], [[1.9654], [1.5498], [1.0725], [1.7946]]]]], 1, 1, 1, 1, 1, 1, Zer71574), 
LRes50954 = reshape_layer(Zer71574, [3, 6, 6], Res50954), 
LRes30688 = reshape_layer(Res50954, [3, 36], Res30688), 
LDot65631 = dot_layer([[[0.4499, 0.9718], [0.1747, 0.2977], [0.6259, 0.7184]]], [[[0.3374, 0.7305], [0.9753, 0.5685], [0.0507, 0.9701]]], 1, 1, Dot65631), 
LZer87334 = zero_padding1D_layer(Dot65631, 1, 0, Zer87334), 
LCon17108 = concatenate_layer([Zer87334,[[[0.6074, 0.6749, 0.4048, 0.9049, 0.4928, 0.8979, 0.7519, 0.6532, 0.8189, 0.053, 0.6278, 0.8611, 0.2076, 0.359, 0.1945, 0.3389, 0.9166, 0.2482, 0.7176, 0.4375, 0.9306, 0.8616, 0.1879, 0.5718, 0.4864, 0.735, 0.123, 0.2257, 0.6102, 0.5317, 0.3799, 0.4604, 0.23, 0.0521], [0.3813, 0.0255, 0.829, 0.7756, 0.6296, 0.4005, 0.4003, 0.877, 0.7614, 0.4876, 0.6767, 0.9999, 0.6853, 0.2129, 0.2197, 0.0669, 0.5346, 0.0017, 0.9758, 0.0579, 0.2652, 0.9431, 0.3314, 0.001, 0.738, 0.4754, 0.5342, 0.3816, 0.0301, 0.5929, 0.585, 0.8029, 0.5417, 0.8974], [0.3519, 0.0036, 0.1867, 0.3022, 0.7082, 0.2777, 0.5845, 0.8312, 0.9565, 0.9292, 0.709, 0.7522, 0.6625, 0.6441, 0.8907, 0.2321, 0.2938, 0.5623, 0.417, 0.808, 0.7373, 0.3948, 0.2324, 0.233, 0.8489, 0.145, 0.3993, 0.6709, 0.6806, 0.8664, 0.0482, 0.7932, 0.9248, 0.4164]]]], 2, Con17108), 
LMax53830 = maximum_layer([Res30688,Con17108], Max53830), 
LGlo56302 = global_average_pooling1D_layer(Max53830, Glo56302), 
LRes51247 = reshape_layer(Glo56302, [36, 1], Res51247), 
LRes80227 = reshape_layer(Res51247, [36, 1, 1], Res80227), 
LUp_50211 = up_sampling2D_layer(Res80227, 1, 1, Up_50211), 
LRes2331 = reshape_layer(Up_50211, [36, 1], Res2331), 
LZer66355 = zero_padding1D_layer(Res2331, 34, 0, Zer66355), 
LRes56801 = reshape_layer(Zer66355, [70, 1, 1], Res56801), 
LCro78251 = cropping2D_layer(Res56801, 12, 24, 0, 0, Cro78251), 
exec_layers([LZer71574,LRes50954,LRes30688,LDot65631,LZer87334,LCon17108,LMax53830,LGlo56302,LRes51247,LRes80227,LUp_50211,LRes2331,LZer66355,LRes56801,LCro78251],["Zer71574","Res50954","Res30688","Dot65631","Zer87334","Con17108","Max53830","Glo56302","Res51247","Res80227","Up_50211","Res2331","Zer66355","Res56801","Cro78251"],Cro78251,"Cro78251")

Actual (Unparsed): [[[[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.3361898]], [[0.8704055]], [[0.4468667]], [[0.2346667]], [[0.4735000]], [[0.6609000]], [[0.6102000]], [[0.8165333]], [[1.1014667]], [[1.0032333]], [[1.1315000]], [[0.4899333]]]]

Expected (Unparsed): [[[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0.33618977]],[[0.87040556]],[[0.4468666666666667]],[[0.2346666666666667]],[[0.47350000000000003]],[[0.6608999999999999]],[[0.6102]],[[0.8165333333333332]],[[1.1014666666666668]],[[1.0032333333333334]],[[1.1315]],[[0.48993333333333333]]]]

Actual:   [[[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0.3362]], [[0.8705]], [[0.4469]], [[0.2347]], [[0.4735]], [[0.6609]], [[0.6102]], [[0.8166]], [[1.1015]], [[1.0033]], [[1.1315]], [[0.49]]]]

Expected: [[[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0.3362]], [[0.8705]], [[0.4469]], [[0.2347]], [[0.4736]], [[0.6609]], [[0.6102]], [[0.8166]], [[1.1015]], [[1.0033]], [[1.1315]], [[0.49]]]]