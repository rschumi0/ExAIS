import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer87727 = tf.keras.layers.Input(shape=([4, 1, 4]))
in0Mul22280 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Mul22280 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con88531 = tf.keras.layers.Input(shape=([6, 3, 1]))

Zer87727 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer87727', )(in0Zer87727)
Mul22280 = keras.layers.Multiply(name = 'Mul22280', )([in0Mul22280,in1Mul22280])
Res18073 = keras.layers.Reshape((1, 2, 1), name = 'Res18073', )(Mul22280)
Cro34185 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro34185', )(Res18073)
Den88770 = keras.layers.Dense(3,name = 'Den88770', )(Cro34185)
Zer24801 = keras.layers.ZeroPadding2D(padding=((5, 0), (2, 0)), name = 'Zer24801', )(Den88770)
Con88531 = keras.layers.Concatenate(axis=3, name = 'Con88531', )([Zer24801,in0Con88531])
Add48522 = keras.layers.Add(name = 'Add48522', )([Zer87727,Con88531])
model = tf.keras.models.Model(inputs=[in0Zer87727,in0Mul22280,in1Mul22280,in0Con88531], outputs=Add48522)
w = model.get_layer('Den88770').get_weights() 
w[0] = np.array([[0.9937, 0.0968, 0.4312]])
w[1] = np.array([0.7903, 0.6794, 0.5469])
model.get_layer('Den88770').set_weights(w) 
in0Zer87727 = tf.constant([[[[1.3339, 1.8127, 1.9611, 1.4982]], [[1.0451, 1.0116, 1.9128, 1.0027]], [[1.9229, 1.0098, 1.3072, 1.1359]], [[1.8373, 1.2061, 1.2975, 1.1346]]]])
in0Mul22280 = tf.constant([[[[[0.8858]], [[0.9349]]]]])
in1Mul22280 = tf.constant([[[[[0.4377]], [[0.0353]]]]])
in0Con88531 = tf.constant([[[[0.519], [0.3006], [0.2867]], [[0.3781], [0.9219], [0.8824]], [[0.9419], [0.133], [0.9611]], [[0.8519], [0.3037], [0.6989]], [[0.7957], [0.3598], [0.6719]], [[0.0431], [0.5829], [0.5614]]]])
print (np.array2string(model.predict([in0Zer87727,in0Mul22280,in1Mul22280,in0Con88531],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add48522.png')

LZer87727 = zero_padding2D_layer([[[[1.3339, 1.8127, 1.9611, 1.4982]], [[1.0451, 1.0116, 1.9128, 1.0027]], [[1.9229, 1.0098, 1.3072, 1.1359]], [[1.8373, 1.2061, 1.2975, 1.1346]]]], 1, 1, 1, 1, Zer87727), 
LMul22280 = multiply_layer([[[[[[0.8858]], [[0.9349]]]]], [[[[[0.4377]], [[0.0353]]]]]], Mul22280), 
LRes18073 = reshape_layer(Mul22280, [1, 2, 1], Res18073), 
LCro34185 = cropping2D_layer(Res18073, 0, 0, 1, 0, Cro34185), 
LDen88770 = dense_layer(Cro34185, [[0.9937, 0.0968, 0.4312]],[0.7903, 0.6794, 0.5469], Den88770), 
LZer24801 = zero_padding2D_layer(Den88770, 5, 0, 2, 0, Zer24801), 
LCon88531 = concatenate_layer([Zer24801,[[[[0.519], [0.3006], [0.2867]], [[0.3781], [0.9219], [0.8824]], [[0.9419], [0.133], [0.9611]], [[0.8519], [0.3037], [0.6989]], [[0.7957], [0.3598], [0.6719]], [[0.0431], [0.5829], [0.5614]]]]], 3, Con88531), 
LAdd48522 = add_layer([Zer87727,Con88531], Add48522), 
exec_layers([LZer87727,LMul22280,LRes18073,LCro34185,LDen88770,LZer24801,LCon88531,LAdd48522],["Zer87727","Mul22280","Res18073","Cro34185","Den88770","Zer24801","Con88531","Add48522"],Add48522,"Add48522")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.5190000], [0.0000000, 0.0000000, 0.0000000, 0.3006000], [0.0000000, 0.0000000, 0.0000000, 0.2867000]], [[0.0000000, 0.0000000, 0.0000000, 0.3781000], [1.3339000, 1.8127000, 1.9611000, 2.4201000], [0.0000000, 0.0000000, 0.0000000, 0.8824000]], [[0.0000000, 0.0000000, 0.0000000, 0.9419000], [1.0451000, 1.0116000, 1.9128000, 1.1357000], [0.0000000, 0.0000000, 0.0000000, 0.9611000]], [[0.0000000, 0.0000000, 0.0000000, 0.8519000], [1.9229000, 1.0098000, 1.3072000, 1.4396000], [0.0000000, 0.0000000, 0.0000000, 0.6989000]], [[0.0000000, 0.0000000, 0.0000000, 0.7957000], [1.8372999, 1.2061000, 1.2975000, 1.4944001], [0.0000000, 0.0000000, 0.0000000, 0.6719000]], [[0.0000000, 0.0000000, 0.0000000, 0.0431000], [0.0000000, 0.0000000, 0.0000000, 0.5829000], [0.8230941, 0.6825946, 0.5611304, 0.5614000]]]]

Expected (Unparsed): [[[[0,0,0,0.519],[0,0,0,0.3006],[0,0,0,0.2867]],[[0,0,0,0.3781],[1.3339,1.8127,1.9611,2.4201],[0,0,0,0.8824]],[[0,0,0,0.9419],[1.0451,1.0116,1.9128,1.1357],[0,0,0,0.9611]],[[0,0,0,0.8519],[1.9229,1.0098,1.3072,1.4396],[0,0,0,0.6989]],[[0,0,0,0.7957],[1.8373,1.2061,1.2975,1.4944000000000002],[0,0,0,0.6719]],[[0,0,0,0.0431],[0,0,0,0.5829],[0.823094057589,0.682594590696,0.561130449464,0.5614]]]]

Actual:   [[[[0, 0, 0, 0.519], [0, 0, 0, 0.3006], [0, 0, 0, 0.2867]], [[0, 0, 0, 0.3781], [1.3339, 1.8127, 1.9611, 2.4201], [0, 0, 0, 0.8824]], [[0, 0, 0, 0.9419], [1.0451, 1.0116, 1.9128, 1.1357], [0, 0, 0, 0.9611]], [[0, 0, 0, 0.8519], [1.9229, 1.0098, 1.3072, 1.4396], [0, 0, 0, 0.6989]], [[0, 0, 0, 0.7957], [1.8373, 1.2061, 1.2975, 1.4945], [0, 0, 0, 0.6719]], [[0, 0, 0, 0.0431], [0, 0, 0, 0.5829], [0.8231, 0.6826, 0.5612, 0.5614]]]]

Expected: [[[[0, 0, 0, 0.519], [0, 0, 0, 0.3006], [0, 0, 0, 0.2867]], [[0, 0, 0, 0.3781], [1.3339, 1.8127, 1.9611, 2.4201], [0, 0, 0, 0.8824]], [[0, 0, 0, 0.9419], [1.0451, 1.0116, 1.9128, 1.1357], [0, 0, 0, 0.9611]], [[0, 0, 0, 0.8519], [1.9229, 1.0098, 1.3072, 1.4396], [0, 0, 0, 0.6989]], [[0, 0, 0, 0.7957], [1.8373, 1.2061, 1.2975, 1.4945], [0, 0, 0, 0.6719]], [[0, 0, 0, 0.0431], [0, 0, 0, 0.5829], [0.8231, 0.6826, 0.5612, 0.5614]]]]