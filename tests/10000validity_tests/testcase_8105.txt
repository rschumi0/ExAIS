import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul36247 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul36247 = tf.keras.layers.Input(shape=([1, 1]))
in0Sof48775 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Mul36247 = keras.layers.Multiply(name = 'Mul36247', )([in0Mul36247,in1Mul36247])
Fla95414 = keras.layers.Flatten(name = 'Fla95414', )(Mul36247)
Sof48775 = keras.layers.Softmax(axis=1, name = 'Sof48775', input_shape=(2, 1, 1, 2))(in0Sof48775)
Glo57460 = keras.layers.GlobalAveragePooling3D(name = 'Glo57460', )(Sof48775)
Res4049 = keras.layers.Reshape((2, 1), name = 'Res4049', )(Glo57460)
Res13300 = keras.layers.Reshape((2, 1, 1), name = 'Res13300', )(Res4049)
Glo53156 = keras.layers.GlobalMaxPool2D(name = 'Glo53156', )(Res13300)
Mul95725 = keras.layers.Multiply(name = 'Mul95725', )([Fla95414,Glo53156])
model = tf.keras.models.Model(inputs=[in0Mul36247,in1Mul36247,in0Sof48775], outputs=Mul95725)
in0Mul36247 = tf.constant([[[0.8462]]])
in1Mul36247 = tf.constant([[[0.2432]]])
in0Sof48775 = tf.constant([[[[[0.428, 0.7395]]], [[[0.3929, 0.8644]]]]])
print (np.array2string(model.predict([in0Mul36247,in1Mul36247,in0Sof48775],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul95725.png')

LMul36247 = multiply_layer([[[[0.8462]]], [[[0.2432]]]], Mul36247), 
LFla95414 = flatten_layer(Mul36247, Fla95414), 
LSof48775 = softmax_layer([[[[[0.428, 0.7395]]], [[[0.3929, 0.8644]]]]], 1, Sof48775), 
LGlo57460 = global_average_pooling3D_layer(Sof48775, Glo57460), 
LRes4049 = reshape_layer(Glo57460, [2, 1], Res4049), 
LRes13300 = reshape_layer(Res4049, [2, 1, 1], Res13300), 
LGlo53156 = global_max_pool2D_layer(Res13300, Glo53156), 
LMul95725 = multiply_layer([Fla95414,Glo53156], Mul95725), 
exec_layers([LMul36247,LFla95414,LSof48775,LGlo57460,LRes4049,LRes13300,LGlo53156,LMul95725],["Mul36247","Fla95414","Sof48775","Glo57460","Res4049","Res13300","Glo53156","Mul95725"],Mul95725,"Mul95725")

Actual (Unparsed): [[0.1028979]]

Expected (Unparsed): [[0.10289791999999999]]

Actual:   [[0.1029]]

Expected: [[0.1029]]