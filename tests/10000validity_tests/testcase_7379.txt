import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max57005 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max57005 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Sub45388 = tf.keras.layers.Input(shape=([2]))
in1Sub45388 = tf.keras.layers.Input(shape=([2]))

Max57005 = keras.layers.Maximum(name = 'Max57005', )([in0Max57005,in1Max57005])
Res15676 = keras.layers.Reshape((1, 2), name = 'Res15676', )(Max57005)
Fla59857 = keras.layers.Flatten(name = 'Fla59857', )(Res15676)
Sub45388 = keras.layers.Subtract(name = 'Sub45388', )([in0Sub45388,in1Sub45388])
Ave40946 = keras.layers.Average(name = 'Ave40946', )([Fla59857,Sub45388])
model = tf.keras.models.Model(inputs=[in0Max57005,in1Max57005,in0Sub45388,in1Sub45388], outputs=Ave40946)
in0Max57005 = tf.constant([[[[0.2743], [0.11]]]])
in1Max57005 = tf.constant([[[[0.6211], [0.8995]]]])
in0Sub45388 = tf.constant([[0.6801, 0.3764]])
in1Sub45388 = tf.constant([[0.4119, 0.8821]])
print (np.array2string(model.predict([in0Max57005,in1Max57005,in0Sub45388,in1Sub45388],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave40946.png')

LMax57005 = maximum_layer([[[[[0.2743], [0.11]]]], [[[[0.6211], [0.8995]]]]], Max57005), 
LRes15676 = reshape_layer(Max57005, [1, 2], Res15676), 
LFla59857 = flatten_layer(Res15676, Fla59857), 
LSub45388 = subtract_layer([[0.6801, 0.3764]], [[0.4119, 0.8821]], Sub45388), 
LAve40946 = average_layer([Fla59857,Sub45388], Ave40946), 
exec_layers([LMax57005,LRes15676,LFla59857,LSub45388,LAve40946],["Max57005","Res15676","Fla59857","Sub45388","Ave40946"],Ave40946,"Ave40946")

Actual (Unparsed): [[0.4446500, 0.1969000]]

Expected (Unparsed): [[0.44465,0.19689999999999996]]

Actual:   [[0.4447, 0.1969]]

Expected: [[0.4447, 0.1969]]