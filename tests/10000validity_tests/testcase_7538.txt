import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add44640 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add44640 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Min81182 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min81182 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con48566 = tf.keras.layers.Input(shape=([1, 2, 1]))

Add44640 = keras.layers.Add(name = 'Add44640', )([in0Add44640,in1Add44640])
Res39597 = keras.layers.Reshape((2, 2, 2), name = 'Res39597', )(Add44640)
Loc3601 = keras.layers.LocallyConnected2D(3, (2, 1),strides=(1, 1), name = 'Loc3601', )(Res39597)
Min81182 = keras.layers.Minimum(name = 'Min81182', )([in0Min81182,in1Min81182])
Zer66923 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer66923', )(Min81182)
Con48566 = keras.layers.Concatenate(axis=3, name = 'Con48566', )([Zer66923,in0Con48566])
Sub44177 = keras.layers.Subtract(name = 'Sub44177', )([Loc3601,Con48566])
model = tf.keras.models.Model(inputs=[in0Add44640,in1Add44640,in0Min81182,in1Min81182,in0Con48566], outputs=Sub44177)
w = model.get_layer('Loc3601').get_weights() 
w[0] = np.array([[[0.1848, 0.4338, 0.4934], [0.8107, 0.0321, 0.6962], [0.2273, 0.3216, 0.0995], [0.1967, 0.8007, 0.4631]], [[0.3672, 0.1112, 0.8406], [0.5141, 0.1852, 0.6702], [0.5078, 0.8783, 0.6204], [0.4074, 0.8348, 0.4833]]])
w[1] = np.array([[[0, 0, 0], [0, 0, 0]]])
model.get_layer('Loc3601').set_weights(w) 
in0Add44640 = tf.constant([[[[[0.5275], [0.3761]], [[0.2404], [0.1341]]], [[[0.2175], [0.3778]], [[0.459], [0.1497]]]]])
in1Add44640 = tf.constant([[[[[0.8318], [0.581]], [[0.2584], [0.7839]]], [[[0.6258], [0.9461]], [[0.5419], [0.8087]]]]])
in0Min81182 = tf.constant([[[[0.9315, 0.0999]]]])
in1Min81182 = tf.constant([[[[0.3643, 0.1143]]]])
in0Con48566 = tf.constant([[[[0.0139], [0.0314]]]])
print (np.array2string(model.predict([in0Add44640,in1Add44640,in0Min81182,in1Min81182,in0Con48566],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub44177.png')

LAdd44640 = add_layer([[[[[[0.5275], [0.3761]], [[0.2404], [0.1341]]], [[[0.2175], [0.3778]], [[0.459], [0.1497]]]]], [[[[[0.8318], [0.581]], [[0.2584], [0.7839]]], [[[0.6258], [0.9461]], [[0.5419], [0.8087]]]]]], Add44640), 
LRes39597 = reshape_layer(Add44640, [2, 2, 2], Res39597), 
LLoc3601 = locally_connected2D_layer(Res39597, 2, 1,[[[0.1848, 0.4338, 0.4934], [0.8107, 0.0321, 0.6962], [0.2273, 0.3216, 0.0995], [0.1967, 0.8007, 0.4631]], [[0.3672, 0.1112, 0.8406], [0.5141, 0.1852, 0.6702], [0.5078, 0.8783, 0.6204], [0.4074, 0.8348, 0.4833]]],[[[0, 0, 0], [0, 0, 0]]], 1, 1, Loc3601), 
LMin81182 = minimum_layer([[[[[0.9315, 0.0999]]]], [[[[0.3643, 0.1143]]]]], Min81182), 
LZer66923 = zero_padding2D_layer(Min81182, 0, 0, 1, 0, Zer66923), 
LCon48566 = concatenate_layer([Zer66923,[[[[0.0139], [0.0314]]]]], 3, Con48566), 
LSub44177 = subtract_layer(Loc3601,Con48566, Sub44177), 
exec_layers([LAdd44640,LRes39597,LLoc3601,LMin81182,LZer66923,LCon48566,LSub44177],["Add44640","Res39597","Loc3601","Min81182","Zer66923","Con48566","Sub44177"],Sub44177,"Sub44177")

Actual (Unparsed): [[[[1.4792128, 1.9516392, 2.0201180], [1.1895123, 1.8047430, 2.0872880]]]]

Expected (Unparsed): [[[[1.4792128299999998,1.95163926,2.02011808],[1.18951234,1.80474295,2.08728796]]]]

Actual:   [[[[1.4793, 1.9517, 2.0202], [1.1896, 1.8048, 2.0873]]]]

Expected: [[[[1.4793, 1.9517, 2.0202], [1.1896, 1.8048, 2.0873]]]]