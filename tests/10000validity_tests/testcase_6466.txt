import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla53948 = tf.keras.layers.Input(shape=([3]))
in0Con96026 = tf.keras.layers.Input(shape=([3, 1]))
in0Sub6891 = tf.keras.layers.Input(shape=([2]))
in1Sub6891 = tf.keras.layers.Input(shape=([2]))

Fla53948 = keras.layers.Flatten(name = 'Fla53948', )(in0Fla53948)
Res41295 = keras.layers.Reshape((3, 1), name = 'Res41295', )(Fla53948)
Con96026 = keras.layers.Concatenate(axis=2, name = 'Con96026', )([Res41295,in0Con96026])
Sub6891 = keras.layers.Subtract(name = 'Sub6891', )([in0Sub6891,in1Sub6891])
Res78118 = keras.layers.Reshape((2, 1), name = 'Res78118', )(Sub6891)
Sep4054 = keras.layers.SeparableConv1D(2, (2),strides=(2), padding='same', name = 'Sep4054', )(Res78118)
Zer93248 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer93248', )(Sep4054)
Ave70428 = keras.layers.Average(name = 'Ave70428', )([Con96026,Zer93248])
model = tf.keras.models.Model(inputs=[in0Fla53948,in0Con96026,in0Sub6891,in1Sub6891], outputs=Ave70428)
w = model.get_layer('Sep4054').get_weights() 
w[0] = np.array([[[0.6755]], [[0.5051]]])
w[1] = np.array([[[0.6827, 0.9839]]])
w[2] = np.array([0, 0])
model.get_layer('Sep4054').set_weights(w) 
in0Fla53948 = tf.constant([[1.9006, 1.0396, 1.6776]])
in0Con96026 = tf.constant([[[0.4948], [0.6409], [0.3054]]])
in0Sub6891 = tf.constant([[0.5783, 0.5947]])
in1Sub6891 = tf.constant([[0.1959, 0.4502]])
print (np.array2string(model.predict([in0Fla53948,in0Con96026,in0Sub6891,in1Sub6891],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave70428.png')

LFla53948 = flatten_layer([[1.9006, 1.0396, 1.6776]], Fla53948), 
LRes41295 = reshape_layer(Fla53948, [3, 1], Res41295), 
LCon96026 = concatenate_layer([Res41295,[[[0.4948], [0.6409], [0.3054]]]], 2, Con96026), 
LSub6891 = subtract_layer([[0.5783, 0.5947]], [[0.1959, 0.4502]], Sub6891), 
LRes78118 = reshape_layer(Sub6891, [2, 1], Res78118), 
LSep4054 = separable_conv1D_layer(Res78118, 2,[[[[0.6755]], [[0.5051]]],[[[0.6827, 0.9839]]]],[0, 0], 2, true, Sep4054), 
LZer93248 = zero_padding1D_layer(Sep4054, 2, 0, Zer93248), 
LAve70428 = average_layer([Con96026,Zer93248], Ave70428), 
exec_layers([LFla53948,LRes41295,LCon96026,LSub6891,LRes78118,LSep4054,LZer93248,LAve70428],["Fla53948","Res41295","Con96026","Sub6891","Res78118","Sep4054","Zer93248","Ave70428"],Ave70428,"Ave70428")

Actual (Unparsed): [[[0.9503000, 0.2474000], [0.5198000, 0.3204500], [0.9518886, 0.3156821]]]

Expected (Unparsed): [[[0.9503,0.2474],[0.5198,0.32045],[0.9518886235025,0.3156821248925]]]

Actual:   [[[0.9503, 0.2474], [0.5198, 0.3205], [0.9519, 0.3157]]]

Expected: [[[0.9503, 0.2474], [0.5198, 0.3205], [0.9519, 0.3157]]]