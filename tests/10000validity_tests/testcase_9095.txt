import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_11879 = tf.keras.layers.Input(shape=([2, 4, 1]))

Up_11879 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_11879', )(in0Up_11879)
Res3774 = keras.layers.Reshape((2, 4), name = 'Res3774', )(Up_11879)
Loc88910 = keras.layers.LocallyConnected1D(4, (2),strides=(1), name = 'Loc88910', )(Res3774)
Glo9633 = keras.layers.GlobalAveragePooling1D(name = 'Glo9633', )(Loc88910)
model = tf.keras.models.Model(inputs=[in0Up_11879], outputs=Glo9633)
w = model.get_layer('Loc88910').get_weights() 
w[0] = np.array([[[0.3299, 0.2673, 0.5915, 0.2552], [0.1977, 0.8331, 0.5057, 0.4926], [0.4758, 0.8061, 0.5631, 0.0326], [0.7486, 0.7762, 0.3536, 0.2145], [0.0256, 0.2277, 0.7536, 0.8672], [0.7199, 0.7619, 0.8, 0.0055], [0.2602, 0.6901, 0.643, 0.9523], [0.5564, 0.2261, 0.4824, 0.4023]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc88910').set_weights(w) 
in0Up_11879 = tf.constant([[[[1.7534], [1.1906], [1.1026], [1.7443]], [[1.7311], [1.7941], [1.9418], [1.1592]]]])
print (np.array2string(model.predict([in0Up_11879],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo9633.png')

LUp_11879 = up_sampling2D_layer([[[[1.7534], [1.1906], [1.1026], [1.7443]], [[1.7311], [1.7941], [1.9418], [1.1592]]]], 1, 1, Up_11879), 
LRes3774 = reshape_layer(Up_11879, [2, 4], Res3774), 
LLoc88910 = locally_connected1D_layer(Res3774, 2,[[[0.3299, 0.2673, 0.5915, 0.2552], [0.1977, 0.8331, 0.5057, 0.4926], [0.4758, 0.8061, 0.5631, 0.0326], [0.7486, 0.7762, 0.3536, 0.2145], [0.0256, 0.2277, 0.7536, 0.8672], [0.7199, 0.7619, 0.8, 0.0055], [0.2602, 0.6901, 0.643, 0.9523], [0.5564, 0.2261, 0.4824, 0.4023]]],[[0, 0, 0, 0]], 1, Loc88910), 
LGlo9633 = global_average_pooling1D_layer(Loc88910, Glo9633), 
exec_layers([LUp_11879,LRes3774,LLoc88910,LGlo9633],["Up_11879","Res3774","Loc88910","Glo9633"],Glo9633,"Glo9633")

Actual (Unparsed): [[5.1303523, 7.0665318, 7.4244935, 5.2706541]]

Expected (Unparsed): [[5.13035233,7.066531759999999,7.4244935000000005,5.27065412]]

Actual:   [[5.1304, 7.0666, 7.4245, 5.2707]]

Expected: [[5.1304, 7.0666, 7.4245, 5.2707]]