import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ReL11990 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con30835 = tf.keras.layers.Input(shape=([3, 4, 1]))
in0Add29480 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add29480 = tf.keras.layers.Input(shape=([2, 2, 2]))

ReL11990 = keras.layers.ReLU(max_value=5.5501486803184195, negative_slope=4.518992684011817, threshold=3.5731165634575826, name = 'ReL11990', input_shape=(1, 2, 1, 1))(in0ReL11990)
Res11949 = keras.layers.Reshape((1, 2, 1), name = 'Res11949', )(ReL11990)
Zer22326 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer22326', )(Res11949)
Con30835 = keras.layers.Concatenate(axis=3, name = 'Con30835', )([Zer22326,in0Con30835])
Add29480 = keras.layers.Add(name = 'Add29480', )([in0Add29480,in1Add29480])
Zer73134 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer73134', )(Add29480)
Add96416 = keras.layers.Add(name = 'Add96416', )([Con30835,Zer73134])
model = tf.keras.models.Model(inputs=[in0ReL11990,in0Con30835,in0Add29480,in1Add29480], outputs=Add96416)
in0ReL11990 = tf.constant([[[[[0.2704]], [[0.0617]]]]])
in0Con30835 = tf.constant([[[[0.2451], [0.9248], [0.4729], [0.9223]], [[0.6884], [0.1414], [0.8259], [0.5953]], [[0.6922], [0.94], [0.8458], [0.7191]]]])
in0Add29480 = tf.constant([[[[0.4329, 0.6323], [0.2741, 0.7307]], [[0.4572, 0.4914], [0.9834, 0.4214]]]])
in1Add29480 = tf.constant([[[[0.567, 0.8194], [0.8862, 0.8679]], [[0.2215, 0.5394], [0.006, 0.2346]]]])
print (np.array2string(model.predict([in0ReL11990,in0Con30835,in0Add29480,in1Add29480],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add96416.png')

LReL11990 = relu_layer([[[[[0.2704]], [[0.0617]]]]], 5.5501486803184195, 4.518992684011817, 3.5731165634575826, ReL11990), 
LRes11949 = reshape_layer(ReL11990, [1, 2, 1], Res11949), 
LZer22326 = zero_padding2D_layer(Res11949, 1, 1, 1, 1, Zer22326), 
LCon30835 = concatenate_layer([Zer22326,[[[[0.2451], [0.9248], [0.4729], [0.9223]], [[0.6884], [0.1414], [0.8259], [0.5953]], [[0.6922], [0.94], [0.8458], [0.7191]]]]], 3, Con30835), 
LAdd29480 = add_layer([[[[[0.4329, 0.6323], [0.2741, 0.7307]], [[0.4572, 0.4914], [0.9834, 0.4214]]]], [[[[0.567, 0.8194], [0.8862, 0.8679]], [[0.2215, 0.5394], [0.006, 0.2346]]]]], Add29480), 
LZer73134 = zero_padding2D_layer(Add29480, 1, 0, 2, 0, Zer73134), 
LAdd96416 = add_layer([Con30835,Zer73134], Add96416), 
exec_layers([LReL11990,LRes11949,LZer22326,LCon30835,LAdd29480,LZer73134,LAdd96416],["ReL11990","Res11949","Zer22326","Con30835","Add29480","Zer73134","Add96416"],Add96416,"Add96416")

Actual (Unparsed): [[[[0.0000000, 0.2451000], [0.0000000, 0.9248000], [0.0000000, 0.4729000], [0.0000000, 0.9223000]], [[0.0000000, 0.6884000], [-14.9249520, 0.1414000], [-14.8681658, 2.2776000], [1.1603000, 2.1939000]], [[0.0000000, 0.6922000], [0.0000000, 0.9400000], [0.6787000, 1.8766000], [0.9894000, 1.3751000]]]]

Expected (Unparsed): [[[[0,0.2451],[0,0.9248],[0,0.4729],[0,0.9223]],[[0,0.6884],[-14.924951987629466,0.1414],[-14.868165760782732,2.2776],[1.1602999999999999,2.1939]],[[0,0.6922],[0,0.94],[0.6787,1.8765999999999998],[0.9894000000000001,1.3751]]]]

Actual:   [[[[0, 0.2451], [0, 0.9248], [0, 0.4729], [0, 0.9223]], [[0, 0.6884], [-14.9249, 0.1414], [-14.8681, 2.2776], [1.1603, 2.1939]], [[0, 0.6922], [0, 0.94], [0.6787, 1.8766], [0.9894, 1.3751]]]]

Expected: [[[[0, 0.2451], [0, 0.9248], [0, 0.4729], [0, 0.9223]], [[0, 0.6884], [-14.9249, 0.1414], [-14.8681, 2.2776], [1.1603, 2.1939]], [[0, 0.6922], [0, 0.94], [0.6787, 1.8766], [0.9895, 1.3751]]]]