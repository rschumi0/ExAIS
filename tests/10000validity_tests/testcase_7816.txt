import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add44981 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add44981 = tf.keras.layers.Input(shape=([2, 2, 2]))

Add44981 = keras.layers.Add(name = 'Add44981', )([in0Add44981,in1Add44981])
Con18769 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con18769', )(Add44981)
model = tf.keras.models.Model(inputs=[in0Add44981,in1Add44981], outputs=Con18769)
w = model.get_layer('Con18769').get_weights() 
w[0] = np.array([[[[0.3762, 0.8106, 0.7517, 0.8683], [0.5626, 0.9736, 0.3815, 0.6942]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con18769').set_weights(w) 
in0Add44981 = tf.constant([[[[0.6429, 0.7907], [0.3085, 0.8404]], [[0.367, 0.8343], [0.2993, 0.2879]]]])
in1Add44981 = tf.constant([[[[0.8009, 0.0529], [0.4127, 0.2861]], [[0.3825, 0.872], [0.7166, 0.5778]]]])
print (np.array2string(model.predict([in0Add44981,in1Add44981],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con18769.png')

LAdd44981 = add_layer([[[[[0.6429, 0.7907], [0.3085, 0.8404]], [[0.367, 0.8343], [0.2993, 0.2879]]]], [[[[0.8009, 0.0529], [0.4127, 0.2861]], [[0.3825, 0.872], [0.7166, 0.5778]]]]], Add44981), 
LCon18769 = conv2D_layer(Add44981, 1, 1,[[[[0.3762, 0.8106, 0.7517, 0.8683], [0.5626, 0.9736, 0.3815, 0.6942]]]],[0, 0, 0, 0], 1, 1, true, 1, 1, Con18769), 
exec_layers([LAdd44981,LCon18769],["Add44981","Con18769"],Con18769,"Con18769")

Actual (Unparsed): [[[[1.0177669, 1.9916732, 1.4071378, 1.8392786], [0.9050843, 1.6813651, 0.9718858, 1.4082342]], [[1.2419263, 2.2687983, 1.2143526, 1.8353043], [0.8692244, 1.6663340, 1.0939166, 1.4830749]]]]

Expected (Unparsed): [[[[1.01776692,1.99167324,1.4071378600000002,1.8392786599999997],[0.9050843399999999,1.6813651200000002,0.9718857900000002,1.4082342600000002]],[[1.24192628,2.2687983800000002,1.2143526000000002,1.8353043100000002],[0.8692243999999999,1.66633406,1.0939165800000001,1.48307491]]]]

Actual:   [[[[1.0178, 1.9917, 1.4072, 1.8393], [0.9051, 1.6814, 0.9719, 1.4083]], [[1.242, 2.2688, 1.2144, 1.8354], [0.8693, 1.6664, 1.094, 1.4831]]]]

Expected: [[[[1.0178, 1.9917, 1.4072, 1.8393], [0.9051, 1.6814, 0.9719, 1.4083]], [[1.242, 2.2688, 1.2144, 1.8354], [0.8693, 1.6664, 1.094, 1.4831]]]]