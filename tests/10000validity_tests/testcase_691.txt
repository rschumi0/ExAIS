import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer73756 = tf.keras.layers.Input(shape=([4, 2, 1]))
in0Con43843 = tf.keras.layers.Input(shape=([1, 2]))
in0Con99143 = tf.keras.layers.Input(shape=([6, 1]))
in0Up_57113 = tf.keras.layers.Input(shape=([1, 3]))
in0Con5541 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave43462 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave43462 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Con5695 = tf.keras.layers.Input(shape=([4, 5]))

Zer73756 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer73756', )(in0Zer73756)
Res82291 = keras.layers.Reshape((6, 4), name = 'Res82291', )(Zer73756)
Con43843 = keras.layers.Conv1D(3, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con43843', )(in0Con43843)
Zer99931 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer99931', )(Con43843)
Con99143 = keras.layers.Concatenate(axis=2, name = 'Con99143', )([Zer99931,in0Con99143])
Add46836 = keras.layers.Add(name = 'Add46836', )([Res82291,Con99143])
Res39902 = keras.layers.Reshape((6, 4, 1), name = 'Res39902', )(Add46836)
Zer31310 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer31310', )(Res39902)
Sep69812 = keras.layers.SeparableConv2D(2, (1, 1),strides=(2, 2), padding='valid', name = 'Sep69812', )(Zer31310)
Res42579 = keras.layers.Reshape((4, 6), name = 'Res42579', )(Sep69812)
Up_57113 = keras.layers.UpSampling1D(size=(1), name = 'Up_57113', )(in0Up_57113)
Con5541 = keras.layers.Concatenate(axis=2, name = 'Con5541', )([Up_57113,in0Con5541])
Ave43462 = keras.layers.Average(name = 'Ave43462', )([in0Ave43462,in1Ave43462])
Res34904 = keras.layers.Reshape((2, 2, 4), name = 'Res34904', )(Ave43462)
Dep41642 = keras.layers.DepthwiseConv2D((2, 1),strides=(2, 2), padding='valid', name = 'Dep41642', )(Res34904)
Res80824 = keras.layers.Reshape((1, 4), name = 'Res80824', )(Dep41642)
Dot48824 = keras.layers.Dot(axes=(2, 2), name = 'Dot48824', )([Con5541,Res80824])
Zer83025 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer83025', )(Dot48824)
Con5695 = keras.layers.Concatenate(axis=2, name = 'Con5695', )([Zer83025,in0Con5695])
Add84867 = keras.layers.Add(name = 'Add84867', )([Res42579,Con5695])
model = tf.keras.models.Model(inputs=[in0Zer73756,in0Con43843,in0Con99143,in0Up_57113,in0Con5541,in0Ave43462,in1Ave43462,in0Con5695], outputs=Add84867)
w = model.get_layer('Con43843').get_weights() 
w[0] = np.array([[[0.9642, 0.2019, 0.5763], [0.9689, 0.3285, 0.0556]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con43843').set_weights(w) 
w = model.get_layer('Sep69812').get_weights() 
w[0] = np.array([[[[0.0311]]]])
w[1] = np.array([[[[0.8805, 0.7656]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep69812').set_weights(w) 
w = model.get_layer('Dep41642').get_weights() 
w[0] = np.array([[[[0.7517], [0.8395], [0.4296], [0.8004]]], [[[0.3682], [0.2859], [0.618], [0.4078]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Dep41642').set_weights(w) 
in0Zer73756 = tf.constant([[[[1.1208], [1.7692]], [[1.6372], [1.9796]], [[1.86], [1.3895]], [[1.4129], [1.2091]]]])
in0Con43843 = tf.constant([[[0.904, 0.0123]]])
in0Con99143 = tf.constant([[[0.4974], [0.9818], [0.9031], [0.3141], [0.6561], [0.0125]]])
in0Up_57113 = tf.constant([[[1.6749, 1.7506, 1.3603]]])
in0Con5541 = tf.constant([[[0.8392]]])
in0Ave43462 = tf.constant([[[[[0.7052, 0.1473], [0.8482, 0.7458]], [[0.9653, 0.9486], [0.3541, 0.3723]]], [[[0.8505, 0.2996], [0.5281, 0.1303]], [[0.3509, 0.59], [0.7889, 0.7175]]]]])
in1Ave43462 = tf.constant([[[[[0.4035, 0.5753], [0.4072, 0.3208]], [[0.4493, 0.5819], [0.3995, 0.2514]]], [[[0.7191, 0.7272], [0.4266, 0.0592]], [[0.494, 0.3307], [0.3326, 0.2079]]]]])
in0Con5695 = tf.constant([[[0.6101, 0.8601, 0.3289, 0.5425, 0.548], [0.359, 0.9406, 0.3043, 0.1675, 0.8975], [0.1701, 0.2799, 0.7971, 0.1501, 0.6899], [0.4149, 0.7592, 0.5583, 0.8276, 0.7827]]])
print (np.array2string(model.predict([in0Zer73756,in0Con43843,in0Con99143,in0Up_57113,in0Con5541,in0Ave43462,in1Ave43462,in0Con5695],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add84867.png')

LZer73756 = zero_padding2D_layer([[[[1.1208], [1.7692]], [[1.6372], [1.9796]], [[1.86], [1.3895]], [[1.4129], [1.2091]]]], 1, 1, 1, 1, Zer73756), 
LRes82291 = reshape_layer(Zer73756, [6, 4], Res82291), 
LCon43843 = conv1D_layer([[[0.904, 0.0123]]], 1,[[[0.9642, 0.2019, 0.5763], [0.9689, 0.3285, 0.0556]]],[0, 0, 0], 1, true, 1, Con43843), 
LZer99931 = zero_padding1D_layer(Con43843, 5, 0, Zer99931), 
LCon99143 = concatenate_layer([Zer99931,[[[0.4974], [0.9818], [0.9031], [0.3141], [0.6561], [0.0125]]]], 2, Con99143), 
LAdd46836 = add_layer([Res82291,Con99143], Add46836), 
LRes39902 = reshape_layer(Add46836, [6, 4, 1], Res39902), 
LZer31310 = zero_padding2D_layer(Res39902, 1, 1, 1, 1, Zer31310), 
LSep69812 = separable_conv2D_layer(Zer31310, 1, 1,[[[[[0.0311]]]],[[[[0.8805, 0.7656]]]]],[0, 0], 2, 2, false, Sep69812), 
LRes42579 = reshape_layer(Sep69812, [4, 6], Res42579), 
LUp_57113 = up_sampling1D_layer([[[1.6749, 1.7506, 1.3603]]], 1, Up_57113), 
LCon5541 = concatenate_layer([Up_57113,[[[0.8392]]]], 2, Con5541), 
LAve43462 = average_layer([[[[[[0.7052, 0.1473], [0.8482, 0.7458]], [[0.9653, 0.9486], [0.3541, 0.3723]]], [[[0.8505, 0.2996], [0.5281, 0.1303]], [[0.3509, 0.59], [0.7889, 0.7175]]]]], [[[[[0.4035, 0.5753], [0.4072, 0.3208]], [[0.4493, 0.5819], [0.3995, 0.2514]]], [[[0.7191, 0.7272], [0.4266, 0.0592]], [[0.494, 0.3307], [0.3326, 0.2079]]]]]], Ave43462), 
LRes34904 = reshape_layer(Ave43462, [2, 2, 4], Res34904), 
LDep41642 = depthwise_conv2D_layer(Res34904, 2, 1,[[[[0.7517], [0.8395], [0.4296], [0.8004]]], [[[0.3682], [0.2859], [0.618], [0.4078]]]],[0, 0, 0, 0], 2, 2, false, Dep41642), 
LRes80824 = reshape_layer(Dep41642, [1, 4], Res80824), 
LDot48824 = dot_layer(Con5541,Res80824, 2, 2, Dot48824), 
LZer83025 = zero_padding1D_layer(Dot48824, 3, 0, Zer83025), 
LCon5695 = concatenate_layer([Zer83025,[[[0.6101, 0.8601, 0.3289, 0.5425, 0.548], [0.359, 0.9406, 0.3043, 0.1675, 0.8975], [0.1701, 0.2799, 0.7971, 0.1501, 0.6899], [0.4149, 0.7592, 0.5583, 0.8276, 0.7827]]]], 2, Con5695), 
LAdd84867 = add_layer([Res42579,Con5695], Add84867), 
exec_layers([LZer73756,LRes82291,LCon43843,LZer99931,LCon99143,LAdd46836,LRes39902,LZer31310,LSep69812,LRes42579,LUp_57113,LCon5541,LAve43462,LRes34904,LDep41642,LRes80824,LDot48824,LZer83025,LCon5695,LAdd84867],["Zer73756","Res82291","Con43843","Zer99931","Con99143","Add46836","Res39902","Zer31310","Sep69812","Res42579","Up_57113","Con5541","Ave43462","Res34904","Dep41642","Res80824","Dot48824","Zer83025","Con5695","Add84867"],Add84867,"Add84867")

Actual (Unparsed): [[[0.0000000, 0.6101000, 0.8601000, 0.3289000, 0.5425000, 0.5480000], [0.0000000, 0.3590000, 0.9712915, 0.3309864, 0.1943852, 0.9208768], [0.0000000, 0.1701000, 0.3308334, 0.8413869, 0.1587012, 0.6973788], [3.1286068, 0.4149000, 0.7643086, 0.5627420, 0.8279423, 0.7829976]]]

Expected (Unparsed): [[[0.0,0.6101,0.8601,0.3289,0.5425,0.548],[0.0,0.359,0.97129148284,0.330986427328,0.19438516939,0.920876815088],[0.0,0.1701,0.33083340299999997,0.8413868976000001,0.158701173055,0.697378771256],[3.1286067480154998,0.4149,0.7643086244284325,0.5627419794008041,0.827942294375,0.782997627]]]

Actual:   [[[0, 0.6101, 0.8601, 0.3289, 0.5425, 0.548], [0, 0.359, 0.9713, 0.331, 0.1944, 0.9209], [0, 0.1701, 0.3309, 0.8414, 0.1588, 0.6974], [3.1287, 0.4149, 0.7644, 0.5628, 0.828, 0.783]]]

Expected: [[[0, 0.6101, 0.8601, 0.3289, 0.5425, 0.548], [0, 0.359, 0.9713, 0.331, 0.1944, 0.9209], [0, 0.1701, 0.3309, 0.8414, 0.1588, 0.6974], [3.1287, 0.4149, 0.7644, 0.5628, 0.828, 0.783]]]