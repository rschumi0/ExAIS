import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min56452 = tf.keras.layers.Input(shape=([1, 2]))
in1Min56452 = tf.keras.layers.Input(shape=([1, 2]))
in0Con94107 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Max8485 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max8485 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Min56452 = keras.layers.Minimum(name = 'Min56452', )([in0Min56452,in1Min56452])
Res22000 = keras.layers.Reshape((1, 2, 1), name = 'Res22000', )(Min56452)
Res43453 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res43453', )(Res22000)
Zer52740 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer52740', )(Res43453)
Con94107 = keras.layers.Concatenate(axis=4, name = 'Con94107', )([Zer52740,in0Con94107])
Max8485 = keras.layers.Maximum(name = 'Max8485', )([in0Max8485,in1Max8485])
Lea85458 = keras.layers.LeakyReLU(alpha=8.349610106798428, name = 'Lea85458', )(Max8485)
Min1397 = keras.layers.Minimum(name = 'Min1397', )([Con94107,Lea85458])
Con89725 = keras.layers.Conv3DTranspose(4, (2, 2, 2),strides=(1, 1, 5), padding='valid', name = 'Con89725', )(Min1397)
model = tf.keras.models.Model(inputs=[in0Min56452,in1Min56452,in0Con94107,in0Max8485,in1Max8485], outputs=Con89725)
w = model.get_layer('Con89725').get_weights() 
w[0] = np.array([[[[[0.2942, 0.0262], [0.5943, 0.039], [0.73, 0.5116], [0.8602, 0.2866]], [[0.2103, 0.4958], [0.4866, 0.0764], [0.5626, 0.8633], [0.758, 0.2416]]], [[[0.4519, 0.3797], [0.2763, 0.8979], [0.0177, 0.2845], [0.7797, 0.2299]], [[0.1378, 0.2945], [0.5084, 0.3872], [0.8824, 0.5469], [0.401, 0.5857]]]], [[[[0.0144, 0.5572], [0.02, 0.503], [0.58, 0.9649], [0.1261, 0.7172]], [[0.733, 0.6981], [0.245, 0.2401], [0.943, 0.2001], [0.4075, 0.1689]]], [[[0.6457, 0.53], [0.4789, 0.0963], [0.215, 0.4751], [0.1427, 0.2016]], [[0.8553, 0.2932], [0.6526, 0.8783], [0.6466, 0.3421], [0.9263, 0.3444]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con89725').set_weights(w) 
in0Min56452 = tf.constant([[[0.8789, 0.7005]]])
in1Min56452 = tf.constant([[[0.9395, 0.0551]]])
in0Con94107 = tf.constant([[[[[0.3803], [0.7171]], [[0.6091], [0.668]]], [[[0.826], [0.3372]], [[0.5576], [0.9489]]]]])
in0Max8485 = tf.constant([[[[[0.6886, 0.1341], [0.8308, 0.5427]], [[0.252, 0.5959], [0.454, 0.8049]]], [[[0.0643, 0.4756], [0.5953, 0.5224]], [[0.693, 0.855], [0.7761, 0.9803]]]]])
in1Max8485 = tf.constant([[[[[0.4643, 0.1581], [0.131, 0.9756]], [[0.564, 0.2215], [0.2167, 0.6527]]], [[[0.1794, 0.5868], [0.4713, 0.2117]], [[0.8739, 0.3037], [0.5014, 0.4395]]]]])
print (np.array2string(model.predict([in0Min56452,in1Min56452,in0Con94107,in0Max8485,in1Max8485],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con89725.png')

LMin56452 = minimum_layer([[[[0.8789, 0.7005]]], [[[0.9395, 0.0551]]]], Min56452), 
LRes22000 = reshape_layer(Min56452, [1, 2, 1], Res22000), 
LRes43453 = reshape_layer(Res22000, [1, 2, 1, 1], Res43453), 
LZer52740 = zero_padding3D_layer(Res43453, 1, 0, 0, 0, 1, 0, Zer52740), 
LCon94107 = concatenate_layer([Zer52740,[[[[[0.3803], [0.7171]], [[0.6091], [0.668]]], [[[0.826], [0.3372]], [[0.5576], [0.9489]]]]]], 4, Con94107), 
LMax8485 = maximum_layer([[[[[[0.6886, 0.1341], [0.8308, 0.5427]], [[0.252, 0.5959], [0.454, 0.8049]]], [[[0.0643, 0.4756], [0.5953, 0.5224]], [[0.693, 0.855], [0.7761, 0.9803]]]]], [[[[[0.4643, 0.1581], [0.131, 0.9756]], [[0.564, 0.2215], [0.2167, 0.6527]]], [[[0.1794, 0.5868], [0.4713, 0.2117]], [[0.8739, 0.3037], [0.5014, 0.4395]]]]]], Max8485), 
LLea85458 = leaky_relu_layer(Max8485, 8.349610106798428, Lea85458), 
LMin1397 = minimum_layer([Con94107,Lea85458], Min1397), 
LCon89725 = conv3D_transpose_layer(Min1397, 2, 2, 2,[[[[[0.2942, 0.0262], [0.5943, 0.039], [0.73, 0.5116], [0.8602, 0.2866]], [[0.2103, 0.4958], [0.4866, 0.0764], [0.5626, 0.8633], [0.758, 0.2416]]], [[[0.4519, 0.3797], [0.2763, 0.8979], [0.0177, 0.2845], [0.7797, 0.2299]], [[0.1378, 0.2945], [0.5084, 0.3872], [0.8824, 0.5469], [0.401, 0.5857]]]], [[[[0.0144, 0.5572], [0.02, 0.503], [0.58, 0.9649], [0.1261, 0.7172]], [[0.733, 0.6981], [0.245, 0.2401], [0.943, 0.2001], [0.4075, 0.1689]]], [[[0.6457, 0.53], [0.4789, 0.0963], [0.215, 0.4751], [0.1427, 0.2016]], [[0.8553, 0.2932], [0.6526, 0.8783], [0.6466, 0.3421], [0.9263, 0.3444]]]]],[0, 0, 0, 0], 1, 1, 5, false, Con89725), 
exec_layers([LMin56452,LRes22000,LRes43453,LZer52740,LCon94107,LMax8485,LLea85458,LMin1397,LCon89725],["Min56452","Res22000","Res43453","Zer52740","Con94107","Max8485","Lea85458","Min1397","Con89725"],Con89725,"Con89725")

Actual (Unparsed): [[[[[0.0041422, 0.0061659, 0.0808840, 0.0453115], [0.0783860, 0.0120788, 0.1364877, 0.0381970], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0187880, 0.0279669, 0.3668684, 0.2055209], [0.3555382, 0.0547864, 0.6190725, 0.1732514], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0756431, 0.1651981, 0.3498419, 0.2071321], [0.3420077, 0.1067431, 0.6009054, 0.2365686], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.2897845, 0.6699361, 0.5457637, 0.3563101], [0.5423803, 0.3286963, 0.9688664, 0.5813943], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.2262632, 0.5350586, 0.1695335, 0.1369974], [0.1754925, 0.2307325, 0.3258977, 0.3490186], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.2536396, 0.5997972, 0.1900460, 0.1535732], [0.1967260, 0.2586496, 0.3653292, 0.3912476], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.1034675, 0.1024095, 0.4527576, 0.2815662], [0.4013050, 0.0827913, 0.5382202, 0.1684740], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.5835400, 0.7276389, 1.2990103, 1.1230227], [0.7929829, 0.4876108, 0.7695123, 0.6538231], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.6532455, 0.8635968, 1.1023100, 0.7539659], [0.9116234, 0.5517444, 0.9756226, 0.6335021], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.1903951, 0.9420670, 1.6173978, 1.4846864], [1.3399744, 1.3227377, 1.9388787, 1.0670278], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.5275477, 0.5580542, 0.4417493, 0.2483257], [0.3389311, 0.7392817, 0.5088088, 0.5318143], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.7392370, 0.9315698, 0.5883041, 0.3957824], [0.4829014, 0.9821313, 0.7960964, 0.8079250], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.3269649, 0.2951604, 0.5662033, 0.4208529], [0.4096451, 0.1408907, 0.1174187, 0.0991105], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.1964602, 0.1815176, 0.6706383, 0.3169072], [0.6717542, 0.2268102, 0.6288416, 0.2995378], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.6216987, 0.3369816, 0.8168169, 0.5182096], [0.5613103, 0.6492662, 0.3123200, 0.2962726], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.0926217, 0.7959602, 1.2357448, 0.8404280], [1.3108425, 0.9259859, 0.7421113, 0.8502805], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.2955280, 0.0536969, 0.2649158, 0.1124122], [0.1634883, 0.4897401, 0.1907550, 0.1920374], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.5384951, 0.1177665, 0.4626689, 0.1991610], [0.3253445, 0.8693771, 0.3602463, 0.3778403], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.00414222,0.006165899999999999,0.08088396,0.04531146],[0.07838598,0.012078839999999999,0.13648772999999997,0.03819696],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.01878802,0.0279669,0.36686836,0.20552086],[0.35553818,0.05478643999999999,0.6190724299999999,0.17325136],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0.07564314999999999,0.16519809000000002,0.34984189,0.20713213],[0.34200767,0.10674307999999999,0.6009053599999999,0.23656861],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.28978446999999996,0.66993609,0.5457637500000001,0.35631009],[0.5423803500000001,0.32869632,0.9688663900000001,0.58139427],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0.22626322999999998,0.53505861,0.16953354999999998,0.13699741],[0.17549255,0.23073248,0.32589771,0.34901863],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.2536396,0.5997972,0.190046,0.1535732],[0.196726,0.2586496,0.3653292000000001,0.39124760000000003],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],[[[0.10346748,0.10240949999999999,0.45275757,0.2815662],[0.40130505,0.08279133,0.53822025,0.16847397000000003],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.5835400199999999,0.7276388900000001,1.2990103100000001,1.1230227],[0.7929828600000001,0.4876107700000001,0.76951225,0.65382311],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0.65324556,0.86359685,1.10230998,0.75396592],[0.9116233899999999,0.55174442,0.9756226,0.63350207],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1.1903951099999999,0.94206703,1.61739786,1.48468641],[1.33997441,1.3227377099999997,1.9388787399999998,1.0670278199999998],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0.52754772,0.55805421,0.44174928999999996,0.24832568],[0.33893107999999994,0.73928169,0.50880883,0.53181428],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.73923702,0.9315698400000001,0.58830412,0.39578238],[0.48290142999999996,0.98213132,0.7960964500000001,0.80792503],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],[[[0.32696496,0.2951604,0.56620332,0.42085295999999994],[0.40964508000000005,0.14089068,0.11741868,0.09911052],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.19646016,0.1815176,0.67063828,0.31690716999999996],[0.6717542200000001,0.22681022,0.62884162,0.29953783],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0.6216987199999999,0.33698163999999997,0.81681692,0.5182095999999999],[0.56131032,0.6492662,0.31232004,0.29627255999999996],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1.0926217300000003,0.7959602299999999,1.23574483,0.84042802],[1.31084252,0.92598593,0.7421112900000001,0.85028053],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0.295528,0.053696879999999995,0.26491576,0.11241216],[0.16348832,0.48974007999999997,0.19075496,0.19203743999999998],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.5384950700000001,0.11776645999999999,0.46266889,0.19916101],[0.32534451000000003,0.8693771299999999,0.36024635,0.37784028999999997],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]]]

Actual:   [[[[[0.0042, 0.0062, 0.0809, 0.0454], [0.0784, 0.0121, 0.1365, 0.0382], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.0188, 0.028, 0.3669, 0.2056], [0.3556, 0.0548, 0.6191, 0.1733], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.0757, 0.1652, 0.3499, 0.2072], [0.3421, 0.1068, 0.601, 0.2366], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.2898, 0.67, 0.5458, 0.3564], [0.5424, 0.3287, 0.9689, 0.5814], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.2263, 0.5351, 0.1696, 0.137], [0.1755, 0.2308, 0.3259, 0.3491], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.2537, 0.5998, 0.1901, 0.1536], [0.1968, 0.2587, 0.3654, 0.3913], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]], [[[0.1035, 0.1025, 0.4528, 0.2816], [0.4014, 0.0828, 0.5383, 0.1685], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.5836, 0.7277, 1.2991, 1.1231], [0.793, 0.4877, 0.7696, 0.6539], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.6533, 0.8636, 1.1024, 0.754], [0.9117, 0.5518, 0.9757, 0.6336], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1.1904, 0.9421, 1.6174, 1.4847], [1.34, 1.3228, 1.9389, 1.0671], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.5276, 0.5581, 0.4418, 0.2484], [0.339, 0.7393, 0.5089, 0.5319], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.7393, 0.9316, 0.5884, 0.3958], [0.483, 0.9822, 0.7961, 0.808], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]], [[[0.327, 0.2952, 0.5663, 0.4209], [0.4097, 0.1409, 0.1175, 0.0992], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.1965, 0.1816, 0.6707, 0.317], [0.6718, 0.2269, 0.6289, 0.2996], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.6217, 0.337, 0.8169, 0.5183], [0.5614, 0.6493, 0.3124, 0.2963], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1.0927, 0.796, 1.2358, 0.8405], [1.3109, 0.926, 0.7422, 0.8503], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.2956, 0.0537, 0.265, 0.1125], [0.1635, 0.4898, 0.1908, 0.1921], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.5385, 0.1178, 0.4627, 0.1992], [0.3254, 0.8694, 0.3603, 0.3779], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]]

Expected: [[[[[0.0042, 0.0062, 0.0809, 0.0454], [0.0784, 0.0121, 0.1365, 0.0382], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.0188, 0.028, 0.3669, 0.2056], [0.3556, 0.0548, 0.6191, 0.1733], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.0757, 0.1652, 0.3499, 0.2072], [0.3421, 0.1068, 0.601, 0.2366], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.2898, 0.67, 0.5458, 0.3564], [0.5424, 0.3287, 0.9689, 0.5814], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.2263, 0.5351, 0.1696, 0.137], [0.1755, 0.2308, 0.3259, 0.3491], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.2537, 0.5998, 0.1901, 0.1536], [0.1968, 0.2587, 0.3654, 0.3913], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]], [[[0.1035, 0.1025, 0.4528, 0.2816], [0.4014, 0.0828, 0.5383, 0.1685], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.5836, 0.7277, 1.2991, 1.1231], [0.793, 0.4877, 0.7696, 0.6539], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.6533, 0.8636, 1.1024, 0.754], [0.9117, 0.5518, 0.9757, 0.6336], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1.1904, 0.9421, 1.6174, 1.4847], [1.34, 1.3228, 1.9389, 1.0671], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.5276, 0.5581, 0.4418, 0.2484], [0.339, 0.7393, 0.5089, 0.5319], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.7393, 0.9316, 0.5884, 0.3958], [0.483, 0.9822, 0.7961, 0.808], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]], [[[0.327, 0.2952, 0.5663, 0.4209], [0.4097, 0.1409, 0.1175, 0.0992], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.1965, 0.1816, 0.6707, 0.317], [0.6718, 0.2269, 0.6289, 0.2996], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.6217, 0.337, 0.8169, 0.5183], [0.5614, 0.6493, 0.3124, 0.2963], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1.0927, 0.796, 1.2358, 0.8405], [1.3109, 0.926, 0.7422, 0.8503], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0.2956, 0.0537, 0.265, 0.1125], [0.1635, 0.4898, 0.1908, 0.1921], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.5385, 0.1178, 0.4627, 0.1992], [0.3254, 0.8694, 0.3603, 0.3779], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]]