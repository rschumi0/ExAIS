import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo61237 = tf.keras.layers.Input(shape=([1, 1]))
in0Con72441 = tf.keras.layers.Input(shape=([3, 2]))
in0Min38522 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Min38522 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Lea4951 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Sub43028 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub43028 = tf.keras.layers.Input(shape=([3, 3]))
in0Ave44518 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave44518 = tf.keras.layers.Input(shape=([1, 1]))
in0Con84238 = tf.keras.layers.Input(shape=([8]))

Glo61237 = keras.layers.GlobalMaxPool1D(name = 'Glo61237', )(in0Glo61237)
ReL61527 = keras.layers.ReLU(max_value=2.623298589797768, negative_slope=5.589793204770401, threshold=1.1494342535384705, name = 'ReL61527', )(Glo61237)
Res82042 = keras.layers.Reshape((1, 1), name = 'Res82042', )(ReL61527)
Zer82635 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer82635', )(Res82042)
Con72441 = keras.layers.Concatenate(axis=2, name = 'Con72441', )([Zer82635,in0Con72441])
Min38522 = keras.layers.Minimum(name = 'Min38522', )([in0Min38522,in1Min38522])
Res53114 = keras.layers.Reshape((1, 2, 1), name = 'Res53114', )(Min38522)
Zer55449 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer55449', )(Res53114)
Lea4951 = keras.layers.LeakyReLU(alpha=4.663779823694702, name = 'Lea4951', input_shape=(2, 1, 1))(in0Lea4951)
Zer9311 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer9311', )(Lea4951)
Mul64338 = keras.layers.Multiply(name = 'Mul64338', )([Zer55449,Zer9311])
Res80139 = keras.layers.Reshape((2, 3), name = 'Res80139', )(Mul64338)
Zer52358 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer52358', )(Res80139)
Sub43028 = keras.layers.Subtract(name = 'Sub43028', )([in0Sub43028,in1Sub43028])
Max34751 = keras.layers.Maximum(name = 'Max34751', )([Zer52358,Sub43028])
Min92209 = keras.layers.Minimum(name = 'Min92209', )([Con72441,Max34751])
Fla5618 = keras.layers.Flatten(name = 'Fla5618', )(Min92209)
Ave44518 = keras.layers.Average(name = 'Ave44518', )([in0Ave44518,in1Ave44518])
Res12978 = keras.layers.Reshape((1, 1, 1), name = 'Res12978', )(Ave44518)
Glo28667 = keras.layers.GlobalAveragePooling2D(name = 'Glo28667', )(Res12978)
Con84238 = keras.layers.Concatenate(axis=1, name = 'Con84238', )([Glo28667,in0Con84238])
Min23078 = keras.layers.Minimum(name = 'Min23078', )([Fla5618,Con84238])
model = tf.keras.models.Model(inputs=[in0Glo61237,in0Con72441,in0Min38522,in1Min38522,in0Lea4951,in0Sub43028,in1Sub43028,in0Ave44518,in1Ave44518,in0Con84238], outputs=Min23078)
in0Glo61237 = tf.constant([[[1.9052]]])
in0Con72441 = tf.constant([[[0.563, 0.3316], [0.3183, 0.3763], [0.3271, 0.409]]])
in0Min38522 = tf.constant([[[[[0.8431]], [[0.5533]]]]])
in1Min38522 = tf.constant([[[[[0.0367]], [[0.3738]]]]])
in0Lea4951 = tf.constant([[[[0.4527]], [[0.6218]]]])
in0Sub43028 = tf.constant([[[0.5012, 0.9587, 0.6527], [0.1493, 0.6788, 0.9893], [0.3873, 0.7567, 0.27]]])
in1Sub43028 = tf.constant([[[0.3495, 0.4674, 0.6853], [0.7771, 0.2622, 0.0313], [0.8202, 0.5399, 0.3104]]])
in0Ave44518 = tf.constant([[[0.7786]]])
in1Ave44518 = tf.constant([[[0.3445]]])
in0Con84238 = tf.constant([[0.876, 0.3781, 0.03, 0.7305, 0.3284, 0.1918, 0.9727, 0.5884]])
print (np.array2string(model.predict([in0Glo61237,in0Con72441,in0Min38522,in1Min38522,in0Lea4951,in0Sub43028,in1Sub43028,in0Ave44518,in1Ave44518,in0Con84238],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min23078.png')

LGlo61237 = global_max_pool1D_layer([[[1.9052]]], Glo61237), 
LReL61527 = relu_layer(Glo61237, 2.623298589797768, 5.589793204770401, 1.1494342535384705, ReL61527), 
LRes82042 = reshape_layer(ReL61527, [1, 1], Res82042), 
LZer82635 = zero_padding1D_layer(Res82042, 2, 0, Zer82635), 
LCon72441 = concatenate_layer([Zer82635,[[[0.563, 0.3316], [0.3183, 0.3763], [0.3271, 0.409]]]], 2, Con72441), 
LMin38522 = minimum_layer([[[[[[0.8431]], [[0.5533]]]]], [[[[[0.0367]], [[0.3738]]]]]], Min38522), 
LRes53114 = reshape_layer(Min38522, [1, 2, 1], Res53114), 
LZer55449 = zero_padding2D_layer(Res53114, 1, 0, 1, 0, Zer55449), 
LLea4951 = leaky_relu_layer([[[[0.4527]], [[0.6218]]]], 4.663779823694702, Lea4951), 
LZer9311 = zero_padding2D_layer(Lea4951, 0, 0, 2, 0, Zer9311), 
LMul64338 = multiply_layer([Zer55449,Zer9311], Mul64338), 
LRes80139 = reshape_layer(Mul64338, [2, 3], Res80139), 
LZer52358 = zero_padding1D_layer(Res80139, 1, 0, Zer52358), 
LSub43028 = subtract_layer([[[0.5012, 0.9587, 0.6527], [0.1493, 0.6788, 0.9893], [0.3873, 0.7567, 0.27]]], [[[0.3495, 0.4674, 0.6853], [0.7771, 0.2622, 0.0313], [0.8202, 0.5399, 0.3104]]], Sub43028), 
LMax34751 = maximum_layer([Zer52358,Sub43028], Max34751), 
LMin92209 = minimum_layer([Con72441,Max34751], Min92209), 
LFla5618 = flatten_layer(Min92209, Fla5618), 
LAve44518 = average_layer([[[[0.7786]]], [[[0.3445]]]], Ave44518), 
LRes12978 = reshape_layer(Ave44518, [1, 1, 1], Res12978), 
LGlo28667 = global_average_pooling2D_layer(Res12978, Glo28667), 
LCon84238 = concatenate_layer([Glo28667,[[0.876, 0.3781, 0.03, 0.7305, 0.3284, 0.1918, 0.9727, 0.5884]]], 1, Con84238), 
LMin23078 = minimum_layer([Fla5618,Con84238], Min23078), 
exec_layers([LGlo61237,LReL61527,LRes82042,LZer82635,LCon72441,LMin38522,LRes53114,LZer55449,LLea4951,LZer9311,LMul64338,LRes80139,LZer52358,LSub43028,LMax34751,LMin92209,LFla5618,LAve44518,LRes12978,LGlo28667,LCon84238,LMin23078],["Glo61237","ReL61527","Res82042","Zer82635","Con72441","Min38522","Res53114","Zer55449","Lea4951","Zer9311","Mul64338","Res80139","Zer52358","Sub43028","Max34751","Min92209","Fla5618","Ave44518","Res12978","Glo28667","Con84238","Min23078"],Min23078,"Min23078")

Actual (Unparsed): [[0.0000000, 0.4913000, 0.0000000, 0.0000000, 0.3183000, 0.3284000, 0.0000000, 0.2168000, 0.2324288]]

Expected (Unparsed): [[0,0.4913,0,0,0.3183,0.3284,0,0.2168,0.23242884000000003]]

Actual:   [[0, 0.4913, 0, 0, 0.3183, 0.3284, 0, 0.2168, 0.2325]]

Expected: [[0, 0.4913, 0, 0, 0.3183, 0.3284, 0, 0.2168, 0.2325]]