import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul65627 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul65627 = tf.keras.layers.Input(shape=([2, 2]))
in0Con91472 = tf.keras.layers.Input(shape=([2, 1]))
in0Con38975 = tf.keras.layers.Input(shape=([2, 1]))

Mul65627 = keras.layers.Multiply(name = 'Mul65627', )([in0Mul65627,in1Mul65627])
Con91472 = keras.layers.Concatenate(axis=2, name = 'Con91472', )([Mul65627,in0Con91472])
Con38975 = keras.layers.Conv1D(3, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con38975', )(in0Con38975)
Zer6943 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer6943', )(Con38975)
Min20909 = keras.layers.Minimum(name = 'Min20909', )([Con91472,Zer6943])
ELU61256 = keras.layers.ELU(alpha=-8.036090714107392, name = 'ELU61256', )(Min20909)
Res67319 = keras.layers.Reshape((2, 3, 1), name = 'Res67319', )(ELU61256)
Con66928 = keras.layers.Conv2DTranspose(2, (1, 2),strides=(1, 1), padding='same', name = 'Con66928', )(Res67319)
model = tf.keras.models.Model(inputs=[in0Mul65627,in1Mul65627,in0Con91472,in0Con38975], outputs=Con66928)
w = model.get_layer('Con38975').get_weights() 
w[0] = np.array([[[0.4293, 0.3147, 0.1722]], [[0.0719, 0.5381, 0.1574]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con38975').set_weights(w) 
w = model.get_layer('Con66928').get_weights() 
w[0] = np.array([[[[0.9552], [0.9977]], [[0.8546], [0.9828]]]])
w[1] = np.array([0, 0])
model.get_layer('Con66928').set_weights(w) 
in0Mul65627 = tf.constant([[[0.2619, 0.8394], [0.6386, 0.0962]]])
in1Mul65627 = tf.constant([[[0.5354, 0.3881], [0.3837, 0.7185]]])
in0Con91472 = tf.constant([[[0.3031], [0.1552]]])
in0Con38975 = tf.constant([[[0.0574], [0.8039]]])
print (np.array2string(model.predict([in0Mul65627,in1Mul65627,in0Con91472,in0Con38975],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con66928.png')

LMul65627 = multiply_layer([[[[0.2619, 0.8394], [0.6386, 0.0962]]], [[[0.5354, 0.3881], [0.3837, 0.7185]]]], Mul65627), 
LCon91472 = concatenate_layer([Mul65627,[[[0.3031], [0.1552]]]], 2, Con91472), 
LCon38975 = conv1D_layer([[[0.0574], [0.8039]]], 2,[[[0.4293, 0.3147, 0.1722]], [[0.0719, 0.5381, 0.1574]]],[0, 0, 0], 1, false, 1, Con38975), 
LZer6943 = zero_padding1D_layer(Con38975, 1, 0, Zer6943), 
LMin20909 = minimum_layer([Con91472,Zer6943], Min20909), 
LELU61256 = elu_layer(Min20909, -8.036090714107392, ELU61256), 
LRes67319 = reshape_layer(ELU61256, [2, 3, 1], Res67319), 
LCon66928 = conv2D_transpose_layer(Res67319, 1, 2,[[[[0.9552], [0.9977]], [[0.8546], [0.9828]]]],[0, 0], 1, 1, true, Con66928), 
exec_layers([LMul65627,LCon91472,LCon38975,LZer6943,LMin20909,LELU61256,LRes67319,LCon66928],["Mul65627","Con91472","Con38975","Zer6943","Min20909","ELU61256","Res67319","Con66928"],Con66928,"Con66928")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0787488, 0.0822526], [0.1364783, 0.1499849], [0.1893763, 0.2040352]]]]

Expected (Unparsed): [[[[0.0,0.0],[0.0,0.0],[0.0,0.0]],[[0.07874881809600001,0.08225261287100001],[0.136478267198,0.149984948334],[0.189376302948,0.20403521943800002]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0]], [[0.0788, 0.0823], [0.1365, 0.15], [0.1894, 0.2041]]]]

Expected: [[[[0, 0], [0, 0], [0, 0]], [[0.0788, 0.0823], [0.1365, 0.15], [0.1894, 0.2041]]]]