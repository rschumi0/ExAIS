import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add44626 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add44626 = tf.keras.layers.Input(shape=([2, 1, 2]))

Add44626 = keras.layers.Add(name = 'Add44626', )([in0Add44626,in1Add44626])
Zer59114 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer59114', )(Add44626)
Res22417 = keras.layers.Reshape((4, 6), name = 'Res22417', )(Zer59114)
Sep80594 = keras.layers.SeparableConv1D(4, (3),strides=(2), padding='valid', name = 'Sep80594', )(Res22417)
Res65673 = keras.layers.Reshape((1, 4, 1), name = 'Res65673', )(Sep80594)
Cro26115 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro26115', )(Res65673)
Res41506 = keras.layers.Reshape((1, 4), name = 'Res41506', )(Cro26115)
Up_83648 = keras.layers.UpSampling1D(size=(2), name = 'Up_83648', )(Res41506)
model = tf.keras.models.Model(inputs=[in0Add44626,in1Add44626], outputs=Up_83648)
w = model.get_layer('Sep80594').get_weights() 
w[0] = np.array([[[0.8464], [0.8943], [0.0242], [0.61], [0.8261], [0.7039]], [[0.9105], [0.1464], [0.3553], [0.7755], [0.8154], [0.0975]], [[0.031], [0.0592], [0.7456], [0.1764], [0.1805], [0.1746]]])
w[1] = np.array([[[0.1461, 0.4225, 0.1892, 0.6379], [0.47, 0.2071, 0.434, 0.9137], [0.2442, 0.5977, 0.6924, 0.6382], [0.1569, 0.4373, 0.7488, 0.8254], [0.1227, 0.3617, 0.9335, 0.6234], [0.3089, 0.5974, 0.7674, 0.2654]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep80594').set_weights(w) 
in0Add44626 = tf.constant([[[[0.0349, 0.2341]], [[0.2682, 0.8332]]]])
in1Add44626 = tf.constant([[[[0.7082, 0.1778]], [[0.2796, 0.0562]]]])
print (np.array2string(model.predict([in0Add44626,in1Add44626],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_83648.png')

LAdd44626 = add_layer([[[[[0.0349, 0.2341]], [[0.2682, 0.8332]]]], [[[[0.7082, 0.1778]], [[0.2796, 0.0562]]]]], Add44626), 
LZer59114 = zero_padding2D_layer(Add44626, 1, 1, 1, 1, Zer59114), 
LRes22417 = reshape_layer(Zer59114, [4, 6], Res22417), 
LSep80594 = separable_conv1D_layer(Res22417, 3,[[[[0.8464], [0.8943], [0.0242], [0.61], [0.8261], [0.7039]], [[0.9105], [0.1464], [0.3553], [0.7755], [0.8154], [0.0975]], [[0.031], [0.0592], [0.7456], [0.1764], [0.1805], [0.1746]]],[[[0.1461, 0.4225, 0.1892, 0.6379], [0.47, 0.2071, 0.434, 0.9137], [0.2442, 0.5977, 0.6924, 0.6382], [0.1569, 0.4373, 0.7488, 0.8254], [0.1227, 0.3617, 0.9335, 0.6234], [0.3089, 0.5974, 0.7674, 0.2654]]]],[0, 0, 0, 0], 2, false, Sep80594), 
LRes65673 = reshape_layer(Sep80594, [1, 4, 1], Res65673), 
LCro26115 = cropping2D_layer(Res65673, 0, 0, 0, 0, Cro26115), 
LRes41506 = reshape_layer(Cro26115, [1, 4], Res41506), 
LUp_83648 = up_sampling1D_layer(Res41506, 2, Up_83648), 
exec_layers([LAdd44626,LZer59114,LRes22417,LSep80594,LRes65673,LCro26115,LRes41506,LUp_83648],["Add44626","Zer59114","Res22417","Sep80594","Res65673","Cro26115","Res41506","Up_83648"],Up_83648,"Up_83648")

Actual (Unparsed): [[[0.2389499, 0.6102253, 0.8222808, 0.8223193], [0.2389499, 0.6102253, 0.8222808, 0.8223193]]]

Expected (Unparsed): [[[0.23894988137100004,0.6102253290000001,0.8222808325320002,0.8223193374960001],[0.23894988137100004,0.6102253290000001,0.8222808325320002,0.8223193374960001]]]

Actual:   [[[0.239, 0.6103, 0.8223, 0.8224], [0.239, 0.6103, 0.8223, 0.8224]]]

Expected: [[[0.239, 0.6103, 0.8223, 0.8224], [0.239, 0.6103, 0.8223, 0.8224]]]