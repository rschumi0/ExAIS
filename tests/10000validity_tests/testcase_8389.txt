import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_96122 = tf.keras.layers.Input(shape=([1, 3, 4, 3]))

Up_96122 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_96122', )(in0Up_96122)
Res41538 = keras.layers.Reshape((2, 6, 24), name = 'Res41538', )(Up_96122)
Res70824 = keras.layers.Reshape((2, 144), name = 'Res70824', )(Res41538)
Ave68511 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave68511', )(Res70824)
model = tf.keras.models.Model(inputs=[in0Up_96122], outputs=Ave68511)
in0Up_96122 = tf.constant([[[[[1.9859, 1.0945, 1.3562], [1.1618, 1.7092, 1.0793], [1.4247, 1.5167, 1.4586], [1.7516, 1.1259, 1.4687]], [[1.8785, 1.6725, 1.1801], [1.5458, 1.9292, 1.1245], [1.2318, 1.6123, 1.2832], [1.2126, 1.7533, 1.2674]], [[1.1282, 1.8335, 1.6746], [1.2731, 1.9705, 1.9639], [1.6647, 1.4214, 1.3566], [1.3592, 1.2668, 1.972]]]]])
print (np.array2string(model.predict([in0Up_96122],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave68511.png')

LUp_96122 = up_sampling3D_layer([[[[[1.9859, 1.0945, 1.3562], [1.1618, 1.7092, 1.0793], [1.4247, 1.5167, 1.4586], [1.7516, 1.1259, 1.4687]], [[1.8785, 1.6725, 1.1801], [1.5458, 1.9292, 1.1245], [1.2318, 1.6123, 1.2832], [1.2126, 1.7533, 1.2674]], [[1.1282, 1.8335, 1.6746], [1.2731, 1.9705, 1.9639], [1.6647, 1.4214, 1.3566], [1.3592, 1.2668, 1.972]]]]], 2, 2, 2, Up_96122), 
LRes41538 = reshape_layer(Up_96122, [2, 6, 24], Res41538), 
LRes70824 = reshape_layer(Res41538, [2, 144], Res70824), 
LAve68511 = average_pooling1D_layer(Res70824, 2, Ave68511), 
exec_layers([LUp_96122,LRes41538,LRes70824,LAve68511],["Up_96122","Res41538","Res70824","Ave68511"],Ave68511,"Ave68511")

Actual (Unparsed): [[[1.9859000, 1.0944999, 1.3562000, 1.9859000, 1.0944999, 1.3562000, 1.1618000, 1.7092000, 1.0793000, 1.1618000, 1.7092000, 1.0793000, 1.4247000, 1.5167000, 1.4586000, 1.4247000, 1.5167000, 1.4586000, 1.7516000, 1.1259000, 1.4687001, 1.7516000, 1.1259000, 1.4687001, 1.9859000, 1.0944999, 1.3562000, 1.9859000, 1.0944999, 1.3562000, 1.1618000, 1.7092000, 1.0793000, 1.1618000, 1.7092000, 1.0793000, 1.4247000, 1.5167000, 1.4586000, 1.4247000, 1.5167000, 1.4586000, 1.7516000, 1.1259000, 1.4687001, 1.7516000, 1.1259000, 1.4687001, 1.8785000, 1.6725000, 1.1801000, 1.8785000, 1.6725000, 1.1801000, 1.5458000, 1.9292001, 1.1245000, 1.5458000, 1.9292001, 1.1245000, 1.2318000, 1.6123000, 1.2832000, 1.2318000, 1.6123000, 1.2832000, 1.2126000, 1.7533000, 1.2674000, 1.2126000, 1.7533000, 1.2674000, 1.8785000, 1.6725000, 1.1801000, 1.8785000, 1.6725000, 1.1801000, 1.5458000, 1.9292001, 1.1245000, 1.5458000, 1.9292001, 1.1245000, 1.2318000, 1.6123000, 1.2832000, 1.2318000, 1.6123000, 1.2832000, 1.2126000, 1.7533000, 1.2674000, 1.2126000, 1.7533000, 1.2674000, 1.1282001, 1.8335000, 1.6746000, 1.1282001, 1.8335000, 1.6746000, 1.2731000, 1.9705000, 1.9639000, 1.2731000, 1.9705000, 1.9639000, 1.6647000, 1.4214000, 1.3566000, 1.6647000, 1.4214000, 1.3566000, 1.3592000, 1.2668000, 1.9720000, 1.3592000, 1.2668000, 1.9720000, 1.1282001, 1.8335000, 1.6746000, 1.1282001, 1.8335000, 1.6746000, 1.2731000, 1.9705000, 1.9639000, 1.2731000, 1.9705000, 1.9639000, 1.6647000, 1.4214000, 1.3566000, 1.6647000, 1.4214000, 1.3566000, 1.3592000, 1.2668000, 1.9720000, 1.3592000, 1.2668000, 1.9720000]]]

Expected (Unparsed): [[[1.9859,1.0945,1.3562,1.9859,1.0945,1.3562,1.1618,1.7092,1.0793,1.1618,1.7092,1.0793,1.4247,1.5167,1.4586,1.4247,1.5167,1.4586,1.7516,1.1259,1.4687,1.7516,1.1259,1.4687,1.9859,1.0945,1.3562,1.9859,1.0945,1.3562,1.1618,1.7092,1.0793,1.1618,1.7092,1.0793,1.4247,1.5167,1.4586,1.4247,1.5167,1.4586,1.7516,1.1259,1.4687,1.7516,1.1259,1.4687,1.8785,1.6725,1.1801,1.8785,1.6725,1.1801,1.5458,1.9292,1.1245,1.5458,1.9292,1.1245,1.2318,1.6123,1.2832,1.2318,1.6123,1.2832,1.2126,1.7533,1.2674,1.2126,1.7533,1.2674,1.8785,1.6725,1.1801,1.8785,1.6725,1.1801,1.5458,1.9292,1.1245,1.5458,1.9292,1.1245,1.2318,1.6123,1.2832,1.2318,1.6123,1.2832,1.2126,1.7533,1.2674,1.2126,1.7533,1.2674,1.1282,1.8335,1.6746,1.1282,1.8335,1.6746,1.2731,1.9705,1.9639,1.2731,1.9705,1.9639,1.6647,1.4214,1.3566,1.6647,1.4214,1.3566,1.3592,1.2668,1.972,1.3592,1.2668,1.972,1.1282,1.8335,1.6746,1.1282,1.8335,1.6746,1.2731,1.9705,1.9639,1.2731,1.9705,1.9639,1.6647,1.4214,1.3566,1.6647,1.4214,1.3566,1.3592,1.2668,1.972,1.3592,1.2668,1.972]]]

Actual:   [[[1.9859, 1.0945, 1.3562, 1.9859, 1.0945, 1.3562, 1.1618, 1.7092, 1.0793, 1.1618, 1.7092, 1.0793, 1.4247, 1.5167, 1.4586, 1.4247, 1.5167, 1.4586, 1.7516, 1.1259, 1.4688, 1.7516, 1.1259, 1.4688, 1.9859, 1.0945, 1.3562, 1.9859, 1.0945, 1.3562, 1.1618, 1.7092, 1.0793, 1.1618, 1.7092, 1.0793, 1.4247, 1.5167, 1.4586, 1.4247, 1.5167, 1.4586, 1.7516, 1.1259, 1.4688, 1.7516, 1.1259, 1.4688, 1.8785, 1.6725, 1.1801, 1.8785, 1.6725, 1.1801, 1.5458, 1.9293, 1.1245, 1.5458, 1.9293, 1.1245, 1.2318, 1.6123, 1.2832, 1.2318, 1.6123, 1.2832, 1.2126, 1.7533, 1.2674, 1.2126, 1.7533, 1.2674, 1.8785, 1.6725, 1.1801, 1.8785, 1.6725, 1.1801, 1.5458, 1.9293, 1.1245, 1.5458, 1.9293, 1.1245, 1.2318, 1.6123, 1.2832, 1.2318, 1.6123, 1.2832, 1.2126, 1.7533, 1.2674, 1.2126, 1.7533, 1.2674, 1.1283, 1.8335, 1.6746, 1.1283, 1.8335, 1.6746, 1.2731, 1.9705, 1.9639, 1.2731, 1.9705, 1.9639, 1.6647, 1.4214, 1.3566, 1.6647, 1.4214, 1.3566, 1.3592, 1.2668, 1.972, 1.3592, 1.2668, 1.972, 1.1283, 1.8335, 1.6746, 1.1283, 1.8335, 1.6746, 1.2731, 1.9705, 1.9639, 1.2731, 1.9705, 1.9639, 1.6647, 1.4214, 1.3566, 1.6647, 1.4214, 1.3566, 1.3592, 1.2668, 1.972, 1.3592, 1.2668, 1.972]]]

Expected: [[[1.9859, 1.0945, 1.3562, 1.9859, 1.0945, 1.3562, 1.1618, 1.7092, 1.0793, 1.1618, 1.7092, 1.0793, 1.4247, 1.5167, 1.4586, 1.4247, 1.5167, 1.4586, 1.7516, 1.1259, 1.4687, 1.7516, 1.1259, 1.4687, 1.9859, 1.0945, 1.3562, 1.9859, 1.0945, 1.3562, 1.1618, 1.7092, 1.0793, 1.1618, 1.7092, 1.0793, 1.4247, 1.5167, 1.4586, 1.4247, 1.5167, 1.4586, 1.7516, 1.1259, 1.4687, 1.7516, 1.1259, 1.4687, 1.8785, 1.6725, 1.1801, 1.8785, 1.6725, 1.1801, 1.5458, 1.9292, 1.1245, 1.5458, 1.9292, 1.1245, 1.2318, 1.6123, 1.2832, 1.2318, 1.6123, 1.2832, 1.2126, 1.7533, 1.2674, 1.2126, 1.7533, 1.2674, 1.8785, 1.6725, 1.1801, 1.8785, 1.6725, 1.1801, 1.5458, 1.9292, 1.1245, 1.5458, 1.9292, 1.1245, 1.2318, 1.6123, 1.2832, 1.2318, 1.6123, 1.2832, 1.2126, 1.7533, 1.2674, 1.2126, 1.7533, 1.2674, 1.1282, 1.8335, 1.6746, 1.1282, 1.8335, 1.6746, 1.2731, 1.9705, 1.9639, 1.2731, 1.9705, 1.9639, 1.6647, 1.4214, 1.3566, 1.6647, 1.4214, 1.3566, 1.3592, 1.2668, 1.972, 1.3592, 1.2668, 1.972, 1.1282, 1.8335, 1.6746, 1.1282, 1.8335, 1.6746, 1.2731, 1.9705, 1.9639, 1.2731, 1.9705, 1.9639, 1.6647, 1.4214, 1.3566, 1.6647, 1.4214, 1.3566, 1.3592, 1.2668, 1.972, 1.3592, 1.2668, 1.972]]]