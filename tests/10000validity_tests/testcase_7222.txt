import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep88772 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Sub43248 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub43248 = tf.keras.layers.Input(shape=([2, 3]))
in0Con2833 = tf.keras.layers.Input(shape=([2, 1]))
in0Con87991 = tf.keras.layers.Input(shape=([7]))
in0Max44324 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Max44324 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Glo7996 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con93639 = tf.keras.layers.Input(shape=([7]))

Sep88772 = keras.layers.SeparableConv2D(4, (1, 1),strides=(1, 1), padding='same', name = 'Sep88772', )(in0Sep88772)
Res71785 = keras.layers.Reshape((1, 4), name = 'Res71785', )(Sep88772)
Zer23250 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer23250', )(Res71785)
Sub43248 = keras.layers.Subtract(name = 'Sub43248', )([in0Sub43248,in1Sub43248])
Con2833 = keras.layers.Concatenate(axis=2, name = 'Con2833', )([Sub43248,in0Con2833])
Mul53803 = keras.layers.Multiply(name = 'Mul53803', )([Zer23250,Con2833])
Res53495 = keras.layers.Reshape((2, 4, 1), name = 'Res53495', )(Mul53803)
Res87524 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res87524', )(Res53495)
Glo7544 = keras.layers.GlobalAveragePooling3D(name = 'Glo7544', )(Res87524)
Con87991 = keras.layers.Concatenate(axis=1, name = 'Con87991', )([Glo7544,in0Con87991])
Max44324 = keras.layers.Maximum(name = 'Max44324', )([in0Max44324,in1Max44324])
Res83373 = keras.layers.Reshape((2, 2, 2), name = 'Res83373', )(Max44324)
Res80748 = keras.layers.Reshape((2, 4), name = 'Res80748', )(Res83373)
Fla29499 = keras.layers.Flatten(name = 'Fla29499', )(Res80748)
Glo7996 = keras.layers.GlobalAveragePooling3D(name = 'Glo7996', )(in0Glo7996)
Con93639 = keras.layers.Concatenate(axis=1, name = 'Con93639', )([Glo7996,in0Con93639])
Max4099 = keras.layers.Maximum(name = 'Max4099', )([Fla29499,Con93639])
Add31430 = keras.layers.Add(name = 'Add31430', )([Con87991,Max4099])
model = tf.keras.models.Model(inputs=[in0Sep88772,in0Sub43248,in1Sub43248,in0Con2833,in0Con87991,in0Max44324,in1Max44324,in0Glo7996,in0Con93639], outputs=Add31430)
w = model.get_layer('Sep88772').get_weights() 
w[0] = np.array([[[[0.1522], [0.1825]]]])
w[1] = np.array([[[[0.3785, 0.0207, 0.1045, 0.2544], [0.4284, 0.835, 0.1067, 0.9595]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep88772').set_weights(w) 
in0Sep88772 = tf.constant([[[[0.7238, 0.044]]]])
in0Sub43248 = tf.constant([[[0.9567, 0.6395, 0.0384], [0.0251, 0.5015, 0.3982]]])
in1Sub43248 = tf.constant([[[0.1, 0.755, 0.617], [0.7488, 0.4603, 0.6409]]])
in0Con2833 = tf.constant([[[0.2316], [0.1717]]])
in0Con87991 = tf.constant([[0.8605, 0.178, 0.5902, 0.3416, 0.8778, 0.0145, 0.3209]])
in0Max44324 = tf.constant([[[[[0.6961, 0.3041]], [[0.8643, 0.6849]]], [[[0.1881, 0.0494]], [[0.8054, 0.4445]]]]])
in1Max44324 = tf.constant([[[[[0.4498, 0.7356]], [[0.677, 0.2064]]], [[[0.708, 0.3234]], [[0.2419, 0.901]]]]])
in0Glo7996 = tf.constant([[[[[1.0071]]], [[[1.5068]]]]])
in0Con93639 = tf.constant([[0.9354, 0.6032, 0.706, 0.657, 0.4655, 0.0711, 0.0838]])
print (np.array2string(model.predict([in0Sep88772,in0Sub43248,in1Sub43248,in0Con2833,in0Con87991,in0Max44324,in1Max44324,in0Glo7996,in0Con93639],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add31430.png')

LSep88772 = separable_conv2D_layer([[[[0.7238, 0.044]]]], 1, 1,[[[[[0.1522], [0.1825]]]],[[[[0.3785, 0.0207, 0.1045, 0.2544], [0.4284, 0.835, 0.1067, 0.9595]]]]],[0, 0, 0, 0], 1, 1, true, Sep88772), 
LRes71785 = reshape_layer(Sep88772, [1, 4], Res71785), 
LZer23250 = zero_padding1D_layer(Res71785, 1, 0, Zer23250), 
LSub43248 = subtract_layer([[[0.9567, 0.6395, 0.0384], [0.0251, 0.5015, 0.3982]]], [[[0.1, 0.755, 0.617], [0.7488, 0.4603, 0.6409]]], Sub43248), 
LCon2833 = concatenate_layer([Sub43248,[[[0.2316], [0.1717]]]], 2, Con2833), 
LMul53803 = multiply_layer([Zer23250,Con2833], Mul53803), 
LRes53495 = reshape_layer(Mul53803, [2, 4, 1], Res53495), 
LRes87524 = reshape_layer(Res53495, [2, 4, 1, 1], Res87524), 
LGlo7544 = global_average_pooling3D_layer(Res87524, Glo7544), 
LCon87991 = concatenate_layer([Glo7544,[[0.8605, 0.178, 0.5902, 0.3416, 0.8778, 0.0145, 0.3209]]], 1, Con87991), 
LMax44324 = maximum_layer([[[[[[0.6961, 0.3041]], [[0.8643, 0.6849]]], [[[0.1881, 0.0494]], [[0.8054, 0.4445]]]]], [[[[[0.4498, 0.7356]], [[0.677, 0.2064]]], [[[0.708, 0.3234]], [[0.2419, 0.901]]]]]], Max44324), 
LRes83373 = reshape_layer(Max44324, [2, 2, 2], Res83373), 
LRes80748 = reshape_layer(Res83373, [2, 4], Res80748), 
LFla29499 = flatten_layer(Res80748, Fla29499), 
LGlo7996 = global_average_pooling3D_layer([[[[[1.0071]]], [[[1.5068]]]]], Glo7996), 
LCon93639 = concatenate_layer([Glo7996,[[0.9354, 0.6032, 0.706, 0.657, 0.4655, 0.0711, 0.0838]]], 1, Con93639), 
LMax4099 = maximum_layer([Fla29499,Con93639], Max4099), 
LAdd31430 = add_layer([Con87991,Max4099], Add31430), 
exec_layers([LSep88772,LRes71785,LZer23250,LSub43248,LCon2833,LMul53803,LRes53495,LRes87524,LGlo7544,LCon87991,LMax44324,LRes83373,LRes80748,LFla29499,LGlo7996,LCon93639,LMax4099,LAdd31430],["Sep88772","Res71785","Zer23250","Sub43248","Con2833","Mul53803","Res53495","Res87524","Glo7544","Con87991","Max44324","Res83373","Res80748","Fla29499","Glo7996","Con93639","Max4099","Add31430"],Add31430,"Add31430")

Actual (Unparsed): [[1.2533048, 1.7959000, 1.0423000, 1.2962000, 1.0496000, 1.3433000, 0.8199000, 1.2219000]]

Expected (Unparsed): [[1.2533047333145375,1.7959,1.0423,1.2961999999999998,1.0495999999999999,1.3433000000000002,0.8199,1.2219]]

Actual:   [[1.2534, 1.7959, 1.0423, 1.2962, 1.0496, 1.3433, 0.8199, 1.2219]]

Expected: [[1.2534, 1.7959, 1.0423, 1.2962, 1.0496, 1.3434, 0.8199, 1.2219]]