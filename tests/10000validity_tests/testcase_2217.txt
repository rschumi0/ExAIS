import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla63751 = tf.keras.layers.Input(shape=([2, 2, 4]))

Fla63751 = keras.layers.Flatten(name = 'Fla63751', )(in0Fla63751)
Res3798 = keras.layers.Reshape((16, 1), name = 'Res3798', )(Fla63751)
LST84523 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST84523', )(Res3798)
Res81729 = keras.layers.Reshape((3, 1), name = 'Res81729', )(LST84523)
Res25189 = keras.layers.Reshape((3, 1, 1), name = 'Res25189', )(Res81729)
Res25035 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res25035', )(Res25189)
Cro64260 = keras.layers.Cropping3D(cropping=((0, 1), (0, 0), (0, 0)), name = 'Cro64260', )(Res25035)
model = tf.keras.models.Model(inputs=[in0Fla63751], outputs=Cro64260)
w = model.get_layer('LST84523').get_weights() 
w[0] = np.array([[3, 4, 7, 6, 7, 2, 1, 8, 9, 1, 4, 8]])
w[1] = np.array([[4, 10, 5, 8, 7, 6, 10, 3, 6, 10, 3, 8], [8, 8, 3, 6, 10, 10, 8, 10, 1, 1, 1, 8], [10, 4, 2, 6, 4, 8, 7, 6, 9, 10, 3, 1]])
w[2] = np.array([7, 9, 1, 5, 6, 6, 3, 6, 10, 1, 1, 1])
model.get_layer('LST84523').set_weights(w) 
in0Fla63751 = tf.constant([[[[1.9552, 1.3003, 1.1357, 1.0748], [1.1768, 1.2169, 1.88, 1.1806]], [[1.053, 1.6914, 1.5824, 1.5285], [1.9786, 1.5971, 1.5707, 1.339]]]])
print (np.array2string(model.predict([in0Fla63751],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro64260.png')

LFla63751 = flatten_layer([[[[1.9552, 1.3003, 1.1357, 1.0748], [1.1768, 1.2169, 1.88, 1.1806]], [[1.053, 1.6914, 1.5824, 1.5285], [1.9786, 1.5971, 1.5707, 1.339]]]], Fla63751), 
LRes3798 = reshape_layer(Fla63751, [16, 1], Res3798), 
LLST84523 = lstm_layer(Res3798,[[3, 4, 7, 6, 7, 2, 1, 8, 9, 1, 4, 8]],[[4, 10, 5, 8, 7, 6, 10, 3, 6, 10, 3, 8], [8, 8, 3, 6, 10, 10, 8, 10, 1, 1, 1, 8], [10, 4, 2, 6, 4, 8, 7, 6, 9, 10, 3, 1]],[7, 9, 1, 5, 6, 6, 3, 6, 10, 1, 1, 1], LST84523), 
LRes81729 = reshape_layer(LST84523, [3, 1], Res81729), 
LRes25189 = reshape_layer(Res81729, [3, 1, 1], Res25189), 
LRes25035 = reshape_layer(Res25189, [3, 1, 1, 1], Res25035), 
LCro64260 = cropping3D_layer(Res25035, 0, 1, 0, 0, 0, 0, Cro64260), 
exec_layers([LFla63751,LRes3798,LLST84523,LRes81729,LRes25189,LRes25035,LCro64260],["Fla63751","Res3798","LST84523","Res81729","Res25189","Res25035","Cro64260"],Cro64260,"Cro64260")

Actual (Unparsed): [[[[[1.0000000]]], [[[0.9999984]]]]]

Expected (Unparsed): [[[[[0.9999999999268605]]],[[[0.9999984167026268]]]]]

Actual:   [[[[[1]]], [[[1]]]]]

Expected: [[[[[1]]], [[[1]]]]]