import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add56822 = tf.keras.layers.Input(shape=([2, 1]))
in1Add56822 = tf.keras.layers.Input(shape=([2, 1]))

Add56822 = keras.layers.Add(name = 'Add56822', )([in0Add56822,in1Add56822])
LST80505 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST80505', )(Add56822)
Res83061 = keras.layers.Reshape((3, 1), name = 'Res83061', )(LST80505)
Res73014 = keras.layers.Reshape((3, 1, 1), name = 'Res73014', )(Res83061)
Max17431 = keras.layers.MaxPool2D(pool_size=(3, 1), strides=(1, 1), padding='same', name = 'Max17431', )(Res73014)
Dep67316 = keras.layers.DepthwiseConv2D((3, 1),strides=(3, 3), padding='same', name = 'Dep67316', )(Max17431)
model = tf.keras.models.Model(inputs=[in0Add56822,in1Add56822], outputs=Dep67316)
w = model.get_layer('LST80505').get_weights() 
w[0] = np.array([[8, 7, 3, 8, 8, 7, 7, 9, 3, 10, 4, 10]])
w[1] = np.array([[5, 9, 2, 6, 9, 1, 5, 1, 8, 3, 8, 4], [4, 9, 5, 6, 1, 6, 2, 5, 7, 6, 8, 7], [1, 7, 9, 10, 8, 5, 6, 8, 1, 6, 6, 8]])
w[2] = np.array([9, 5, 9, 8, 8, 7, 9, 7, 9, 1, 5, 1])
model.get_layer('LST80505').set_weights(w) 
w = model.get_layer('Dep67316').get_weights() 
w[0] = np.array([[[[0.3626]]], [[[0.1111]]], [[[0.3899]]]])
w[1] = np.array([0])
model.get_layer('Dep67316').set_weights(w) 
in0Add56822 = tf.constant([[[0.1881], [0.6192]]])
in1Add56822 = tf.constant([[[0.5929], [0.1379]]])
print (np.array2string(model.predict([in0Add56822,in1Add56822],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep67316.png')

LAdd56822 = add_layer([[[[0.1881], [0.6192]]], [[[0.5929], [0.1379]]]], Add56822), 
LLST80505 = lstm_layer(Add56822,[[8, 7, 3, 8, 8, 7, 7, 9, 3, 10, 4, 10]],[[5, 9, 2, 6, 9, 1, 5, 1, 8, 3, 8, 4], [4, 9, 5, 6, 1, 6, 2, 5, 7, 6, 8, 7], [1, 7, 9, 10, 8, 5, 6, 8, 1, 6, 6, 8]],[9, 5, 9, 8, 8, 7, 9, 7, 9, 1, 5, 1], LST80505), 
LRes83061 = reshape_layer(LST80505, [3, 1], Res83061), 
LRes73014 = reshape_layer(Res83061, [3, 1, 1], Res73014), 
LMax17431 = max_pool2D_layer(Res73014, 3, 1, 1, 1, true, Max17431), 
LDep67316 = depthwise_conv2D_layer(Max17431, 3, 1,[[[[0.3626]]], [[[0.1111]]], [[[0.3899]]]],[0], 3, 3, true, Dep67316), 
exec_layers([LAdd56822,LLST80505,LRes83061,LRes73014,LMax17431,LDep67316],["Add56822","LST80505","Res83061","Res73014","Max17431","Dep67316"],Dep67316,"Dep67316")

Actual (Unparsed): [[[[0.8325339]]]]

Expected (Unparsed): [[[[0.8325338826624564]]]]

Actual:   [[[[0.8326]]]]

Expected: [[[[0.8326]]]]