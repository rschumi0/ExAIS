import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul83329 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul83329 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Mul25555 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Mul25555 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Mul83329 = keras.layers.Multiply(name = 'Mul83329', )([in0Mul83329,in1Mul83329])
Res62884 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res62884', )(Mul83329)
Zer6649 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer6649', )(Res62884)
Mul25555 = keras.layers.Multiply(name = 'Mul25555', )([in0Mul25555,in1Mul25555])
Zer86580 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer86580', )(Mul25555)
Add73281 = keras.layers.Add(name = 'Add73281', )([Zer6649,Zer86580])
model = tf.keras.models.Model(inputs=[in0Mul83329,in1Mul83329,in0Mul25555,in1Mul25555], outputs=Add73281)
in0Mul83329 = tf.constant([[[[0.0547, 0.9255]]]])
in1Mul83329 = tf.constant([[[[0.2691, 0.71]]]])
in0Mul25555 = tf.constant([[[[[0.9776]], [[0.2981]]], [[[0.2244]], [[0.4835]]]]])
in1Mul25555 = tf.constant([[[[[0.301]], [[0.6113]]], [[[0.2786]], [[0.6177]]]]])
print (np.array2string(model.predict([in0Mul83329,in1Mul83329,in0Mul25555,in1Mul25555],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add73281.png')

LMul83329 = multiply_layer([[[[[0.0547, 0.9255]]]], [[[[0.2691, 0.71]]]]], Mul83329), 
LRes62884 = reshape_layer(Mul83329, [1, 1, 2, 1], Res62884), 
LZer6649 = zero_padding3D_layer(Res62884, 1, 0, 1, 0, 1, 0, Zer6649), 
LMul25555 = multiply_layer([[[[[[0.9776]], [[0.2981]]], [[[0.2244]], [[0.4835]]]]], [[[[[0.301]], [[0.6113]]], [[[0.2786]], [[0.6177]]]]]], Mul25555), 
LZer86580 = zero_padding3D_layer(Mul25555, 0, 0, 0, 0, 2, 0, Zer86580), 
LAdd73281 = add_layer([Zer6649,Zer86580], Add73281), 
exec_layers([LMul83329,LRes62884,LZer6649,LMul25555,LZer86580,LAdd73281],["Mul83329","Res62884","Zer6649","Mul25555","Zer86580","Add73281"],Add73281,"Add73281")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.2942576]], [[0.0000000], [0.0000000], [0.1822285]]], [[[0.0000000], [0.0000000], [0.0625178]], [[0.0000000], [0.0147198], [0.9557629]]]]]

Expected (Unparsed): [[[[[0],[0],[0.2942576]],[[0],[0],[0.18222852999999997]]],[[[0],[0],[0.06251784]],[[0],[0.01471977],[0.95576295]]]]]

Actual:   [[[[[0], [0], [0.2943]], [[0], [0], [0.1823]]], [[[0], [0], [0.0626]], [[0], [0.0148], [0.9558]]]]]

Expected: [[[[[0], [0], [0.2943]], [[0], [0], [0.1823]]], [[[0], [0], [0.0626]], [[0], [0.0148], [0.9558]]]]]