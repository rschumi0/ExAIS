import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub58530 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub58530 = tf.keras.layers.Input(shape=([2, 3]))
in0Dot17557 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot17557 = tf.keras.layers.Input(shape=([3, 3]))

Sub58530 = keras.layers.Subtract(name = 'Sub58530', )([in0Sub58530,in1Sub58530])
Zer21218 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer21218', )(Sub58530)
Dot17557 = keras.layers.Dot(axes=(1, 1), name = 'Dot17557', )([in0Dot17557,in1Dot17557])
Sub96311 = keras.layers.Subtract(name = 'Sub96311', )([Zer21218,Dot17557])
model = tf.keras.models.Model(inputs=[in0Sub58530,in1Sub58530,in0Dot17557,in1Dot17557], outputs=Sub96311)
in0Sub58530 = tf.constant([[[0.0839, 0.652, 0.4971], [0.3022, 0.3967, 0.3184]]])
in1Sub58530 = tf.constant([[[0.2934, 0.1116, 0.9134], [0.8594, 0.7439, 0.0607]]])
in0Dot17557 = tf.constant([[[0.5187, 0.0887, 0.4709], [0.3893, 0.5342, 0.3285], [0.5417, 0.4585, 0.778]]])
in1Dot17557 = tf.constant([[[0.7331, 0.284, 0.542], [0.0438, 0.2318, 0.4378], [0.3872, 0.0989, 0.7276]]])
print (np.array2string(model.predict([in0Sub58530,in1Sub58530,in0Dot17557,in1Dot17557],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub96311.png')

LSub58530 = subtract_layer([[[0.0839, 0.652, 0.4971], [0.3022, 0.3967, 0.3184]]], [[[0.2934, 0.1116, 0.9134], [0.8594, 0.7439, 0.0607]]], Sub58530), 
LZer21218 = zero_padding1D_layer(Sub58530, 1, 0, Zer21218), 
LDot17557 = dot_layer([[[0.5187, 0.0887, 0.4709], [0.3893, 0.5342, 0.3285], [0.5417, 0.4585, 0.778]]], [[[0.7331, 0.284, 0.542], [0.0438, 0.2318, 0.4378], [0.3872, 0.0989, 0.7276]]], 1, 1, Dot17557), 
LSub96311 = subtract_layer(Zer21218,Dot17557, Sub96311), 
exec_layers([LSub58530,LZer21218,LDot17557,LSub96311],["Sub58530","Zer21218","Dot17557","Sub96311"],Sub96311,"Sub96311")

Actual (Unparsed): [[[-0.6070566, -0.2911247, -0.8457118], [-0.4754551, 0.3460360, -1.0318527], [-1.2180467, -0.6340261, -0.7074179]]]

Expected (Unparsed): [[[-0.60705655,-0.29112467,-0.84571186],[-0.47545512999999995,0.34603598999999996,-1.03185276],[-1.21804669,-0.6340261,-0.7074179]]]

Actual:   [[[-0.607, -0.2911, -0.8457], [-0.4754, 0.3461, -1.0318], [-1.218, -0.634, -0.7074]]]

Expected: [[[-0.607, -0.2911, -0.8457], [-0.4754, 0.3461, -1.0318], [-1.218, -0.634, -0.7074]]]