import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo98574 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave88647 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave88647 = tf.keras.layers.Input(shape=([2, 1]))
in0Glo3467 = tf.keras.layers.Input(shape=([2, 1, 2]))

Glo98574 = keras.layers.GlobalAveragePooling1D(name = 'Glo98574', )(in0Glo98574)
Res4025 = keras.layers.Reshape((1, 1), name = 'Res4025', )(Glo98574)
Ave88647 = keras.layers.Average(name = 'Ave88647', )([in0Ave88647,in1Ave88647])
Dot99154 = keras.layers.Dot(axes=(2, 2), name = 'Dot99154', )([Res4025,Ave88647])
Res95243 = keras.layers.Reshape((1, 2, 1), name = 'Res95243', )(Dot99154)
Res34965 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res34965', )(Res95243)
Glo71199 = keras.layers.GlobalMaxPool3D(name = 'Glo71199', )(Res34965)
Res59084 = keras.layers.Reshape((1, 1), name = 'Res59084', )(Glo71199)
Zer13560 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer13560', )(Res59084)
Glo3467 = keras.layers.GlobalAveragePooling2D(name = 'Glo3467', )(in0Glo3467)
Res66782 = keras.layers.Reshape((2, 1), name = 'Res66782', )(Glo3467)
Up_69665 = keras.layers.UpSampling1D(size=(1), name = 'Up_69665', )(Res66782)
Ave69925 = keras.layers.Average(name = 'Ave69925', )([Zer13560,Up_69665])
model = tf.keras.models.Model(inputs=[in0Glo98574,in0Ave88647,in1Ave88647,in0Glo3467], outputs=Ave69925)
in0Glo98574 = tf.constant([[[1.3088]]])
in0Ave88647 = tf.constant([[[0.7298], [0.4967]]])
in1Ave88647 = tf.constant([[[0.8119], [0.7415]]])
in0Glo3467 = tf.constant([[[[1.0197, 1.7501]], [[1.004, 1.6598]]]])
print (np.array2string(model.predict([in0Glo98574,in0Ave88647,in1Ave88647,in0Glo3467],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave69925.png')

LGlo98574 = global_average_pooling1D_layer([[[1.3088]]], Glo98574), 
LRes4025 = reshape_layer(Glo98574, [1, 1], Res4025), 
LAve88647 = average_layer([[[[0.7298], [0.4967]]], [[[0.8119], [0.7415]]]], Ave88647), 
LDot99154 = dot_layer(Res4025,Ave88647, 2, 2, Dot99154), 
LRes95243 = reshape_layer(Dot99154, [1, 2, 1], Res95243), 
LRes34965 = reshape_layer(Res95243, [1, 2, 1, 1], Res34965), 
LGlo71199 = global_max_pool3D_layer(Res34965, Glo71199), 
LRes59084 = reshape_layer(Glo71199, [1, 1], Res59084), 
LZer13560 = zero_padding1D_layer(Res59084, 1, 0, Zer13560), 
LGlo3467 = global_average_pooling2D_layer([[[[1.0197, 1.7501]], [[1.004, 1.6598]]]], Glo3467), 
LRes66782 = reshape_layer(Glo3467, [2, 1], Res66782), 
LUp_69665 = up_sampling1D_layer(Res66782, 1, Up_69665), 
LAve69925 = average_layer([Zer13560,Up_69665], Ave69925), 
exec_layers([LGlo98574,LRes4025,LAve88647,LDot99154,LRes95243,LRes34965,LGlo71199,LRes59084,LZer13560,LGlo3467,LRes66782,LUp_69665,LAve69925],["Glo98574","Res4025","Ave88647","Dot99154","Res95243","Res34965","Glo71199","Res59084","Zer13560","Glo3467","Res66782","Up_69665","Ave69925"],Ave69925,"Ave69925")

Actual (Unparsed): [[[0.5059250], [1.3569193]]]

Expected (Unparsed): [[[0.505925],[1.3569192399999999]]]

Actual:   [[[0.506], [1.357]]]

Expected: [[[0.506], [1.357]]]