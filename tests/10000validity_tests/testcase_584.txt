import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min11513 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Min11513 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))

Min11513 = keras.layers.Minimum(name = 'Min11513', )([in0Min11513,in1Min11513])
Res8892 = keras.layers.Reshape((2, 2, 2), name = 'Res8892', )(Min11513)
Con35977 = keras.layers.Conv2DTranspose(4, (1, 2),strides=(1, 1), padding='valid', name = 'Con35977', )(Res8892)
Fla64912 = keras.layers.Flatten(name = 'Fla64912', )(Con35977)
model = tf.keras.models.Model(inputs=[in0Min11513,in1Min11513], outputs=Fla64912)
w = model.get_layer('Con35977').get_weights() 
w[0] = np.array([[[[0.0384, 0.8225], [0.2731, 0.0212], [0.7135, 0.1166], [0.8645, 0.2402]], [[0.6968, 0.8224], [0.8635, 0.5415], [0.5196, 0.5583], [0.428, 0.9518]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con35977').set_weights(w) 
in0Min11513 = tf.constant([[[[[0.5113, 0.9268]], [[0.0193, 0.0719]]], [[[0.9694, 0.564]], [[0.2407, 0.1237]]]]])
in1Min11513 = tf.constant([[[[[0.2666, 0.5041]], [[0.9061, 0.9497]]], [[[0.7429, 0.9015]], [[0.8842, 0.351]]]]])
print (np.array2string(model.predict([in0Min11513,in1Min11513],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla64912.png')

LMin11513 = minimum_layer([[[[[[0.5113, 0.9268]], [[0.0193, 0.0719]]], [[[0.9694, 0.564]], [[0.2407, 0.1237]]]]], [[[[[0.2666, 0.5041]], [[0.9061, 0.9497]]], [[[0.7429, 0.9015]], [[0.8842, 0.351]]]]]], Min11513), 
LRes8892 = reshape_layer(Min11513, [2, 2, 2], Res8892), 
LCon35977 = conv2D_transpose_layer(Res8892, 1, 2,[[[[0.0384, 0.8225], [0.2731, 0.0212], [0.7135, 0.1166], [0.8645, 0.2402]], [[0.6968, 0.8224], [0.8635, 0.5415], [0.5196, 0.5583], [0.428, 0.9518]]]],[0, 0, 0, 0], 1, 1, false, Con35977), 
LFla64912 = flatten_layer(Con35977, Fla64912), 
exec_layers([LMin11513,LRes8892,LCon35977,LFla64912],["Min11513","Res8892","Con35977","Fla64912"],Fla64912,"Fla64912")

Actual (Unparsed): [[0.4248597, 0.0834954, 0.2489972, 0.3515605, 0.6602176, 0.5099744, 0.4421185, 0.6278624, 0.0725788, 0.0555994, 0.0501701, 0.0766948, 0.4924174, 0.2148428, 0.5958216, 0.7777099, 1.0924725, 1.0152578, 0.8870549, 1.0925743, 0.2694506, 0.2748280, 0.1941294, 0.2207573]]

Expected (Unparsed): [[0.42485969,0.08349538000000001,0.24899716,0.35156052,0.66021759,0.50997436,0.44211848,0.62786241,0.0725788,0.0555994,0.05017005000000001,0.07669482000000001,0.49241735999999997,0.21484279,0.59582155,0.77770985,1.0924724499999998,1.01525776,0.8870549099999999,1.09257429,0.26945064,0.274828,0.19412943,0.22075726]]

Actual:   [[0.4249, 0.0835, 0.249, 0.3516, 0.6603, 0.51, 0.4422, 0.6279, 0.0726, 0.0556, 0.0502, 0.0767, 0.4925, 0.2149, 0.5959, 0.7778, 1.0925, 1.0153, 0.8871, 1.0926, 0.2695, 0.2749, 0.1942, 0.2208]]

Expected: [[0.4249, 0.0835, 0.249, 0.3516, 0.6603, 0.51, 0.4422, 0.6279, 0.0726, 0.0556, 0.0502, 0.0767, 0.4925, 0.2149, 0.5959, 0.7778, 1.0925, 1.0153, 0.8871, 1.0926, 0.2695, 0.2749, 0.1942, 0.2208]]