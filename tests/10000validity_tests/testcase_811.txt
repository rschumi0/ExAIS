import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul48236 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Mul48236 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Mul48236 = keras.layers.Multiply(name = 'Mul48236', )([in0Mul48236,in1Mul48236])
Res12202 = keras.layers.Reshape((1, 1, 4), name = 'Res12202', )(Mul48236)
Res10090 = keras.layers.Reshape((1, 4), name = 'Res10090', )(Res12202)
Lea22400 = keras.layers.LeakyReLU(alpha=5.594973784353507, name = 'Lea22400', )(Res10090)
Res61958 = keras.layers.Reshape((1, 4, 1), name = 'Res61958', )(Lea22400)
Ave15143 = keras.layers.AveragePooling2D(pool_size=(1, 4), strides=(2, 1), padding='same', name = 'Ave15143', )(Res61958)
model = tf.keras.models.Model(inputs=[in0Mul48236,in1Mul48236], outputs=Ave15143)
in0Mul48236 = tf.constant([[[[[0.2367, 0.5628], [0.6551, 0.9085]]]]])
in1Mul48236 = tf.constant([[[[[0.431, 0.6248], [0.5618, 0.4449]]]]])
print (np.array2string(model.predict([in0Mul48236,in1Mul48236],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave15143.png')

LMul48236 = multiply_layer([[[[[[0.2367, 0.5628], [0.6551, 0.9085]]]]], [[[[[0.431, 0.6248], [0.5618, 0.4449]]]]]], Mul48236), 
LRes12202 = reshape_layer(Mul48236, [1, 1, 4], Res12202), 
LRes10090 = reshape_layer(Res12202, [1, 4], Res10090), 
LLea22400 = leaky_relu_layer(Res10090, 5.594973784353507, Lea22400), 
LRes61958 = reshape_layer(Lea22400, [1, 4, 1], Res61958), 
LAve15143 = average_pooling2D_layer(Res61958, 1, 4, 2, 1, true, Ave15143), 
exec_layers([LMul48236,LRes12202,LRes10090,LLea22400,LRes61958,LAve15143],["Mul48236","Res12202","Res10090","Lea22400","Res61958","Ave15143"],Ave15143,"Ave15143")

Actual (Unparsed): [[[[0.2738968], [0.3064705], [0.3746214], [0.3861134]]]]

Expected (Unparsed): [[[[0.2738967733333333],[0.30647049249999997],[0.3746214233333333],[0.38611341499999996]]]]

Actual:   [[[[0.2739], [0.3065], [0.3747], [0.3862]]]]

Expected: [[[[0.2739], [0.3065], [0.3747], [0.3862]]]]