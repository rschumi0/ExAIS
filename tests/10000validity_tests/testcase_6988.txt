import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas15938 = tf.keras.layers.Input(shape=([1, 4]))
in0Con19054 = tf.keras.layers.Input(shape=([2, 4, 3, 1]))
in0Con76497 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Mas15938 = keras.layers.Masking(mask_value=1, name = 'Mas15938', )(in0Mas15938)
Up_34854 = keras.layers.UpSampling1D(size=(2), name = 'Up_34854', )(Mas15938)
Res48193 = keras.layers.Reshape((2, 4, 1), name = 'Res48193', )(Up_34854)
Res22628 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res22628', )(Res48193)
Zer38038 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer38038', )(Res22628)
Con19054 = keras.layers.Concatenate(axis=4, name = 'Con19054', )([Zer38038,in0Con19054])
Con76497 = keras.layers.Conv3D(2, (1, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con76497', )(in0Con76497)
Zer36962 = keras.layers.ZeroPadding3D(padding=((0, 0), (3, 0), (1, 0)), name = 'Zer36962', )(Con76497)
Add74667 = keras.layers.Add(name = 'Add74667', )([Con19054,Zer36962])
Res41108 = keras.layers.Reshape((2, 4, 6), name = 'Res41108', )(Add74667)
Res65647 = keras.layers.Reshape((2, 24), name = 'Res65647', )(Res41108)
Fla3094 = keras.layers.Flatten(name = 'Fla3094', )(Res65647)
Res36366 = keras.layers.Reshape((48, 1), name = 'Res36366', )(Fla3094)
Res14057 = keras.layers.Reshape((48, 1, 1), name = 'Res14057', )(Res36366)
Con93147 = keras.layers.Conv2D(4, (3, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con93147', )(Res14057)
model = tf.keras.models.Model(inputs=[in0Mas15938,in0Con19054,in0Con76497], outputs=Con93147)
w = model.get_layer('Con76497').get_weights() 
w[0] = np.array([[[[[0.8781, 0.2791]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con76497').set_weights(w) 
w = model.get_layer('Con93147').get_weights() 
w[0] = np.array([[[[0.9108, 0.847, 0.1316, 0.8224]]], [[[0.5873, 0.622, 0.1327, 0.9333]]], [[[0.2399, 0.0452, 0.7047, 0.5976]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con93147').set_weights(w) 
in0Mas15938 = tf.constant([[[1.6919, 1.9442, 1.8394, 1.048]]])
in0Con19054 = tf.constant([[[[[0.0185], [0.7872], [0.1541]], [[0.7744], [0.0848], [0.9126]], [[0.6349], [0.8511], [0.333]], [[0.173], [0.6952], [0.6969]]], [[[0.2035], [0.7799], [0.362]], [[0.1249], [0.6195], [0.2394]], [[0.4118], [0.5676], [0.677]], [[0.9798], [0.7317], [0.5994]]]]])
in0Con76497 = tf.constant([[[[[0.6397], [0.3209]]], [[[0.6202], [0.2608]]]]])
print (np.array2string(model.predict([in0Mas15938,in0Con19054,in0Con76497],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con93147.png')

LMas15938 = masking_layer([[[1.6919, 1.9442, 1.8394, 1.048]]], 1, Mas15938), 
LUp_34854 = up_sampling1D_layer(Mas15938, 2, Up_34854), 
LRes48193 = reshape_layer(Up_34854, [2, 4, 1], Res48193), 
LRes22628 = reshape_layer(Res48193, [2, 4, 1, 1], Res22628), 
LZer38038 = zero_padding3D_layer(Res22628, 0, 0, 0, 0, 2, 0, Zer38038), 
LCon19054 = concatenate_layer([Zer38038,[[[[[0.0185], [0.7872], [0.1541]], [[0.7744], [0.0848], [0.9126]], [[0.6349], [0.8511], [0.333]], [[0.173], [0.6952], [0.6969]]], [[[0.2035], [0.7799], [0.362]], [[0.1249], [0.6195], [0.2394]], [[0.4118], [0.5676], [0.677]], [[0.9798], [0.7317], [0.5994]]]]]], 4, Con19054), 
LCon76497 = conv3D_layer([[[[[0.6397], [0.3209]]], [[[0.6202], [0.2608]]]]], 1, 1, 1,[[[[[0.8781, 0.2791]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con76497), 
LZer36962 = zero_padding3D_layer(Con76497, 0, 0, 3, 0, 1, 0, Zer36962), 
LAdd74667 = add_layer([Con19054,Zer36962], Add74667), 
LRes41108 = reshape_layer(Add74667, [2, 4, 6], Res41108), 
LRes65647 = reshape_layer(Res41108, [2, 24], Res65647), 
LFla3094 = flatten_layer(Res65647, Fla3094), 
LRes36366 = reshape_layer(Fla3094, [48, 1], Res36366), 
LRes14057 = reshape_layer(Res36366, [48, 1, 1], Res14057), 
LCon93147 = conv2D_layer(Res14057, 3, 1,[[[[0.9108, 0.847, 0.1316, 0.8224]]], [[[0.5873, 0.622, 0.1327, 0.9333]]], [[[0.2399, 0.0452, 0.7047, 0.5976]]]],[0, 0, 0, 0], 1, 1, false, 1, 1, Con93147), 
exec_layers([LMas15938,LUp_34854,LRes48193,LRes22628,LZer38038,LCon19054,LCon76497,LZer36962,LAdd74667,LRes41108,LRes65647,LFla3094,LRes36366,LRes14057,LCon93147],["Mas15938","Up_34854","Res48193","Res22628","Zer38038","Con19054","Con76497","Zer36962","Add74667","Res41108","Res65647","Fla3094","Res36366","Res14057","Con93147"],Con93147,"Con93147")

Actual (Unparsed): [[[[0.0108651, 0.0115070, 0.0024550, 0.0172661]], [[0.2056991, 0.0512509, 0.5571744, 0.4856451]], [[0.8682094, 0.5661123, 1.2967434, 1.7457732]], [[1.7476032, 1.7260855, 0.4367049, 2.3185337]], [[1.6314855, 1.5288895, 0.2431031, 1.5352401]], [[0.3261328, 0.1655256, 0.5659992, 0.5895133]], [[0.4548051, 0.4816768, 0.1027629, 0.7227475]], [[0.7256670, 0.6597498, 0.1616696, 0.6875430]], [[0.5162166, 0.1406234, 1.3813307, 1.2409978]], [[1.4379973, 1.3223675, 0.9122642, 2.4296312]], [[2.3067474, 2.2143746, 0.3769587, 2.4506397]], [[0.9835086, 0.8016697, 0.5675122, 1.1299384]], [[0.3728768, 0.3949078, 0.0842512, 0.5925521]], [[0.7824458, 0.5762300, 0.6833230, 1.0307591]], [[0.9411231, 0.6125251, 1.4091662, 1.8935571]], [[1.9353483, 1.8800402, 0.5907583, 2.6156575]], [[1.8708965, 1.7650978, 0.2862541, 1.8235115]], [[0.3447991, 0.2898706, 0.1657359, 0.3772440]], [[0.2363597, 0.1329958, 0.4188016, 0.4971451]], [[0.6970772, 0.5354142, 0.7130319, 1.1886762]], [[1.3437775, 1.0793499, 1.1269653, 2.0720987]], [[1.7654563, 1.6027307, 0.8456669, 2.4296402]], [[1.6730555, 1.6155057, 0.2793630, 1.8276190]], [[0.7651303, 0.6753325, 0.2469050, 0.7683989]], [[0.1195156, 0.1265770, 0.0270045, 0.1899266]], [[0.3724458, 0.2076160, 0.5763761, 0.6334267]], [[0.8639221, 0.5615717, 1.2957747, 1.7389601]], [[1.7908296, 1.7292995, 0.5822514, 2.4367712]], [[1.7535851, 1.6582033, 0.2706914, 1.7292732]], [[0.3596731, 0.3122595, 0.1356562, 0.3723490]], [[0.0733538, 0.0776878, 0.0165742, 0.1165692]], [[0.2623770, 0.1337917, 0.4529985, 0.4729309]], [[0.8302459, 0.4732068, 1.4522854, 1.7400333]], [[1.7635013, 1.7448298, 0.5082267, 2.4670641]], [[1.9113770, 1.7956442, 0.2876251, 1.8223421]], [[0.3168363, 0.2213852, 0.3217005, 0.4429742]], [[0.2418501, 0.2561396, 0.0546459, 0.3843329]], [[0.5112347, 0.3744501, 0.4541806, 0.6778621]], [[0.7746236, 0.4361881, 1.3715457, 1.6289666]], [[1.7596620, 1.6554644, 0.7958664, 2.5880815]], [[2.0729277, 1.9790658, 0.3319029, 2.1445667]], [[0.8516656, 0.6177059, 0.7795582, 1.1422933]], [[0.7060855, 0.6340514, 0.5137974, 1.2398989]], [[1.4293050, 1.2095272, 0.8388208, 1.8547676]], [[1.3337616, 1.0817792, 1.0916436, 2.0554651]], [[1.7353351, 1.5910460, 0.7622222, 2.3376380]]]]

Expected (Unparsed): [[[[0.010865050000000001,0.011507,0.00245495,0.017266049999999998]],[[0.20569908,0.051250939999999995,0.5571744399999999,0.48564512000000004]],[[0.86820937,0.56611228,1.2967433700000002,1.7457732]],[[1.74760322,1.7260855199999998,0.43670492,2.31853371]],[[1.63148545,1.5288895,0.24310311,1.53524009]],[[0.32613284,0.16552558,0.5659992399999999,0.58951328]],[[0.45480512,0.48167679999999996,0.10276288,0.72274752]],[[0.7256670399999999,0.65974976,0.1616696,0.68754304]],[[0.51621662,0.14062344,1.3813307,1.24099776]],[[1.43799724,1.32236752,0.91226424,2.4296311399999997]],[[2.3067473400000003,2.2143745999999997,0.37695873999999996,2.45063966]],[[0.98350859,0.80166968,0.56751219,1.12993848]],[[0.37287677,0.39490780000000003,0.08425123000000001,0.59255217]],[[0.78244581,0.57623002,0.68332301,1.03075912]],[[0.94112309,0.6125250799999999,1.40916615,1.89355707]],[[1.9353482000000002,1.8800401,0.59075824,2.61565746]],[[1.8708964200000002,1.7650977999999997,0.28625414,1.8235114600000002]],[[0.3447991,0.2898706,0.1657359,0.377244]],[[0.23635966474300002,0.132995769764,0.41880158567900005,0.497145112632]],[[0.6970771815340001,0.5354142547440001,0.713031887908,1.1886761933330001]],[[1.3437775270980001,1.079349930238,1.126965340604,2.0720986872630003]],[[1.7654562961140001,1.602730729258,0.845666939408,2.429640211649]],[[1.673055541219,1.6155057038099998,0.279363014677,1.827619050523]],[[0.765130323452,0.67533252193,0.246905005804,0.768398927456]],[[0.11951555,0.126577,0.02700445,0.18992655]],[[0.37244581,0.20761597999999998,0.5763761300000001,0.63342664]],[[0.86392208,0.56157168,1.29577466,1.73896011]],[[1.79082959,1.7292995,0.58225137,2.4367712299999997]],[[1.75358512,1.6582032999999998,0.27069144,1.72927316]],[[0.35967311,0.31225948,0.13565623,0.37234904]],[[0.07335377,0.0776878,0.016574230000000002,0.11656917]],[[0.26237697,0.13379169999999999,0.45299849000000003,0.47293096]],[[0.83024593,0.47320684,1.45228539,1.74003327]],[[1.76350132,1.74482978,0.50822672,2.4670641]],[[1.91137698,1.7956442,0.28762509999999997,1.8223421]],[[0.31683634000000005,0.22138516,0.3217005,0.44297424]],[[0.24185014000000002,0.2561396,0.054645860000000004,0.38433294]],[[0.51123468,0.37445012,0.4541806,0.67786208]],[[0.77462354,0.43618808,1.3715457,1.6289665199999999]],[[1.7596619999999998,1.6554643999999998,0.79586644,2.5880814599999997]],[[2.07292762,1.9790657999999999,0.33190294,2.14456666]],[[0.85166562,0.61770596,0.77955826,1.14229328]],[[0.706085509038,0.634051412424,0.513797402814,1.2398988777120001]],[[1.429305019244,1.209527181104,0.8388208079280001,1.854767655978]],[[1.3337616063340003,1.081779211476,1.0916435933620001,2.055465155742]],[[1.735335143032,1.591045983556,0.7622222040240001,2.3376380552800002]]]]

Actual:   [[[[0.0109, 0.0116, 0.0025, 0.0173]], [[0.2057, 0.0513, 0.5572, 0.4857]], [[0.8683, 0.5662, 1.2968, 1.7458]], [[1.7477, 1.7261, 0.4368, 2.3186]], [[1.6315, 1.5289, 0.2432, 1.5353]], [[0.3262, 0.1656, 0.566, 0.5896]], [[0.4549, 0.4817, 0.1028, 0.7228]], [[0.7257, 0.6598, 0.1617, 0.6876]], [[0.5163, 0.1407, 1.3814, 1.241]], [[1.438, 1.3224, 0.9123, 2.4297]], [[2.3068, 2.2144, 0.377, 2.4507]], [[0.9836, 0.8017, 0.5676, 1.13]], [[0.3729, 0.395, 0.0843, 0.5926]], [[0.7825, 0.5763, 0.6834, 1.0308]], [[0.9412, 0.6126, 1.4092, 1.8936]], [[1.9354, 1.8801, 0.5908, 2.6157]], [[1.8709, 1.7651, 0.2863, 1.8236]], [[0.3448, 0.2899, 0.1658, 0.3773]], [[0.2364, 0.133, 0.4189, 0.4972]], [[0.6971, 0.5355, 0.7131, 1.1887]], [[1.3438, 1.0794, 1.127, 2.0721]], [[1.7655, 1.6028, 0.8457, 2.4297]], [[1.6731, 1.6156, 0.2794, 1.8277]], [[0.7652, 0.6754, 0.247, 0.7684]], [[0.1196, 0.1266, 0.0271, 0.19]], [[0.3725, 0.2077, 0.5764, 0.6335]], [[0.864, 0.5616, 1.2958, 1.739]], [[1.7909, 1.7293, 0.5823, 2.4368]], [[1.7536, 1.6583, 0.2707, 1.7293]], [[0.3597, 0.3123, 0.1357, 0.3724]], [[0.0734, 0.0777, 0.0166, 0.1166]], [[0.2624, 0.1338, 0.453, 0.473]], [[0.8303, 0.4733, 1.4523, 1.7401]], [[1.7636, 1.7449, 0.5083, 2.4671]], [[1.9114, 1.7957, 0.2877, 1.8224]], [[0.3169, 0.2214, 0.3218, 0.443]], [[0.2419, 0.2562, 0.0547, 0.3844]], [[0.5113, 0.3745, 0.4542, 0.6779]], [[0.7747, 0.4362, 1.3716, 1.629]], [[1.7597, 1.6555, 0.7959, 2.5881]], [[2.073, 1.9791, 0.332, 2.1446]], [[0.8517, 0.6178, 0.7796, 1.1423]], [[0.7061, 0.6341, 0.5138, 1.2399]], [[1.4294, 1.2096, 0.8389, 1.8548]], [[1.3338, 1.0818, 1.0917, 2.0555]], [[1.7354, 1.5911, 0.7623, 2.3377]]]]

Expected: [[[[0.0109, 0.0116, 0.0025, 0.0173]], [[0.2057, 0.0513, 0.5572, 0.4857]], [[0.8683, 0.5662, 1.2968, 1.7458]], [[1.7477, 1.7261, 0.4368, 2.3186]], [[1.6315, 1.5289, 0.2432, 1.5353]], [[0.3262, 0.1656, 0.566, 0.5896]], [[0.4549, 0.4817, 0.1028, 0.7228]], [[0.7257, 0.6598, 0.1617, 0.6876]], [[0.5163, 0.1407, 1.3814, 1.241]], [[1.438, 1.3224, 0.9123, 2.4297]], [[2.3068, 2.2144, 0.377, 2.4507]], [[0.9836, 0.8017, 0.5676, 1.13]], [[0.3729, 0.395, 0.0843, 0.5926]], [[0.7825, 0.5763, 0.6834, 1.0308]], [[0.9412, 0.6126, 1.4092, 1.8936]], [[1.9354, 1.8801, 0.5908, 2.6157]], [[1.8709, 1.7651, 0.2863, 1.8236]], [[0.3448, 0.2899, 0.1658, 0.3773]], [[0.2364, 0.133, 0.4189, 0.4972]], [[0.6971, 0.5355, 0.7131, 1.1887]], [[1.3438, 1.0794, 1.127, 2.0721]], [[1.7655, 1.6028, 0.8457, 2.4297]], [[1.6731, 1.6156, 0.2794, 1.8277]], [[0.7652, 0.6754, 0.247, 0.7684]], [[0.1196, 0.1266, 0.0271, 0.19]], [[0.3725, 0.2077, 0.5764, 0.6335]], [[0.864, 0.5616, 1.2958, 1.739]], [[1.7909, 1.7293, 0.5823, 2.4368]], [[1.7536, 1.6583, 0.2707, 1.7293]], [[0.3597, 0.3123, 0.1357, 0.3724]], [[0.0734, 0.0777, 0.0166, 0.1166]], [[0.2624, 0.1338, 0.453, 0.473]], [[0.8303, 0.4733, 1.4523, 1.7401]], [[1.7636, 1.7449, 0.5083, 2.4671]], [[1.9114, 1.7957, 0.2877, 1.8224]], [[0.3169, 0.2214, 0.3218, 0.443]], [[0.2419, 0.2562, 0.0547, 0.3844]], [[0.5113, 0.3745, 0.4542, 0.6779]], [[0.7747, 0.4362, 1.3716, 1.629]], [[1.7597, 1.6555, 0.7959, 2.5881]], [[2.073, 1.9791, 0.332, 2.1446]], [[0.8517, 0.6178, 0.7796, 1.1423]], [[0.7061, 0.6341, 0.5138, 1.2399]], [[1.4294, 1.2096, 0.8389, 1.8548]], [[1.3338, 1.0818, 1.0917, 2.0555]], [[1.7354, 1.5911, 0.7623, 2.3377]]]]