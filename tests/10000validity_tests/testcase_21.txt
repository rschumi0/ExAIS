import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo94826 = tf.keras.layers.Input(shape=([2, 1]))
in0Con59408 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Max15376 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max15376 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Max52872 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max52872 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con9171 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0PRe92452 = tf.keras.layers.Input(shape=([1, 2]))
in0Max79967 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave59091 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Fla84948 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con40935 = tf.keras.layers.Input(shape=([1, 6]))

Glo94826 = keras.layers.GlobalMaxPool1D(name = 'Glo94826', )(in0Glo94826)
Fla86768 = keras.layers.Flatten(name = 'Fla86768', )(Glo94826)
Res71561 = keras.layers.Reshape((1, 1), name = 'Res71561', )(Fla86768)
Res7537 = keras.layers.Reshape((1, 1, 1), name = 'Res7537', )(Res71561)
Zer76277 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer76277', )(Res7537)
Con59408 = keras.layers.Concatenate(axis=3, name = 'Con59408', )([Zer76277,in0Con59408])
Max15376 = keras.layers.Maximum(name = 'Max15376', )([in0Max15376,in1Max15376])
Res22303 = keras.layers.Reshape((1, 2, 4), name = 'Res22303', )(Max15376)
Max52872 = keras.layers.Maximum(name = 'Max52872', )([in0Max52872,in1Max52872])
Zer46617 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer46617', )(Max52872)
Con9171 = keras.layers.Concatenate(axis=3, name = 'Con9171', )([Zer46617,in0Con9171])
Sub34017 = keras.layers.Subtract(name = 'Sub34017', )([Res22303,Con9171])
Min35282 = keras.layers.Minimum(name = 'Min35282', )([Con59408,Sub34017])
Res28724 = keras.layers.Reshape((1, 8), name = 'Res28724', )(Min35282)
PRe92452 = keras.layers.PReLU(name = 'PRe92452', input_shape=(1, 2))(in0PRe92452)
Res2112 = keras.layers.Reshape((1, 2, 1), name = 'Res2112', )(PRe92452)
Max79967 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max79967', )(in0Max79967)
Zer57828 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer57828', )(Max79967)
Ave93078 = keras.layers.Average(name = 'Ave93078', )([Res2112,Zer57828])
Res93985 = keras.layers.Reshape((1, 2), name = 'Res93985', )(Ave93078)
Ave59091 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave59091', )(in0Ave59091)
Res34563 = keras.layers.Reshape((2, 2), name = 'Res34563', )(Ave59091)
Fla84948 = keras.layers.Flatten(name = 'Fla84948', )(in0Fla84948)
Res30123 = keras.layers.Reshape((2, 2), name = 'Res30123', )(Fla84948)
Mul95909 = keras.layers.Multiply(name = 'Mul95909', )([Res34563,Res30123])
Dot42207 = keras.layers.Dot(axes=(2, 2), name = 'Dot42207', )([Res93985,Mul95909])
Con40935 = keras.layers.Concatenate(axis=2, name = 'Con40935', )([Dot42207,in0Con40935])
Add99715 = keras.layers.Add(name = 'Add99715', )([Res28724,Con40935])
model = tf.keras.models.Model(inputs=[in0Glo94826,in0Con59408,in0Max15376,in1Max15376,in0Max52872,in1Max52872,in0Con9171,in0PRe92452,in0Max79967,in0Ave59091,in0Fla84948,in0Con40935], outputs=Add99715)
w = model.get_layer('PRe92452').get_weights() 
w[0] = np.array([[0.4727, 0.7545]])
model.get_layer('PRe92452').set_weights(w) 
in0Glo94826 = tf.constant([[[1.005], [1.9827]]])
in0Con59408 = tf.constant([[[[0.5929, 0.4032, 0.3549], [0.3909, 0.6663, 0.9345]]]])
in0Max15376 = tf.constant([[[[[0.3914, 0.2956], [0.855, 0.9054]], [[0.1237, 0.3091], [0.9796, 0.0422]]]]])
in1Max15376 = tf.constant([[[[[0.5211, 0.0428], [0.8353, 0.7376]], [[0.2269, 0.6591], [0.7159, 0.3308]]]]])
in0Max52872 = tf.constant([[[[0.9994, 0.5342]]]])
in1Max52872 = tf.constant([[[[0.4642, 0.6623]]]])
in0Con9171 = tf.constant([[[[0.0624, 0.0214], [0.5434, 0.2098]]]])
in0PRe92452 = tf.constant([[[0.7699, 0.7326]]])
in0Max79967 = tf.constant([[[[1.5185]]]])
in0Ave59091 = tf.constant([[[[1.3323, 1.2589]], [[1.6282, 1.5873]]]])
in0Fla84948 = tf.constant([[[[1.9503], [1.1073]], [[1.94], [1.0795]]]])
in0Con40935 = tf.constant([[[0.2733, 0.2454, 0.7246, 0.4118, 0.6532, 0.9357]]])
print (np.array2string(model.predict([in0Glo94826,in0Con59408,in0Max15376,in1Max15376,in0Max52872,in1Max52872,in0Con9171,in0PRe92452,in0Max79967,in0Ave59091,in0Fla84948,in0Con40935],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add99715.png')

LGlo94826 = global_max_pool1D_layer([[[1.005], [1.9827]]], Glo94826), 
LFla86768 = flatten_layer(Glo94826, Fla86768), 
LRes71561 = reshape_layer(Fla86768, [1, 1], Res71561), 
LRes7537 = reshape_layer(Res71561, [1, 1, 1], Res7537), 
LZer76277 = zero_padding2D_layer(Res7537, 0, 0, 1, 0, Zer76277), 
LCon59408 = concatenate_layer([Zer76277,[[[[0.5929, 0.4032, 0.3549], [0.3909, 0.6663, 0.9345]]]]], 3, Con59408), 
LMax15376 = maximum_layer([[[[[[0.3914, 0.2956], [0.855, 0.9054]], [[0.1237, 0.3091], [0.9796, 0.0422]]]]], [[[[[0.5211, 0.0428], [0.8353, 0.7376]], [[0.2269, 0.6591], [0.7159, 0.3308]]]]]], Max15376), 
LRes22303 = reshape_layer(Max15376, [1, 2, 4], Res22303), 
LMax52872 = maximum_layer([[[[[0.9994, 0.5342]]]], [[[[0.4642, 0.6623]]]]], Max52872), 
LZer46617 = zero_padding2D_layer(Max52872, 0, 0, 1, 0, Zer46617), 
LCon9171 = concatenate_layer([Zer46617,[[[[0.0624, 0.0214], [0.5434, 0.2098]]]]], 3, Con9171), 
LSub34017 = subtract_layer(Res22303,Con9171, Sub34017), 
LMin35282 = minimum_layer([Con59408,Sub34017], Min35282), 
LRes28724 = reshape_layer(Min35282, [1, 8], Res28724), 
LPRe92452 = prelu_layer([[[0.7699, 0.7326]]], [[0.4727, 0.7545]], PRe92452), 
LRes2112 = reshape_layer(PRe92452, [1, 2, 1], Res2112), 
LMax79967 = max_pool2D_layer([[[[1.5185]]]], 1, 1, Max79967), 
LZer57828 = zero_padding2D_layer(Max79967, 0, 0, 1, 0, Zer57828), 
LAve93078 = average_layer([Res2112,Zer57828], Ave93078), 
LRes93985 = reshape_layer(Ave93078, [1, 2], Res93985), 
LAve59091 = average_pooling2D_layer([[[[1.3323, 1.2589]], [[1.6282, 1.5873]]]], 1, 1, Ave59091), 
LRes34563 = reshape_layer(Ave59091, [2, 2], Res34563), 
LFla84948 = flatten_layer([[[[1.9503], [1.1073]], [[1.94], [1.0795]]]], Fla84948), 
LRes30123 = reshape_layer(Fla84948, [2, 2], Res30123), 
LMul95909 = multiply_layer([Res34563,Res30123], Mul95909), 
LDot42207 = dot_layer(Res93985,Mul95909, 2, 2, Dot42207), 
LCon40935 = concatenate_layer([Dot42207,[[[0.2733, 0.2454, 0.7246, 0.4118, 0.6532, 0.9357]]]], 2, Con40935), 
LAdd99715 = add_layer([Res28724,Con40935], Add99715), 
exec_layers([LGlo94826,LFla86768,LRes71561,LRes7537,LZer76277,LCon59408,LMax15376,LRes22303,LMax52872,LZer46617,LCon9171,LSub34017,LMin35282,LRes28724,LPRe92452,LRes2112,LMax79967,LZer57828,LAve93078,LRes93985,LAve59091,LRes34563,LFla84948,LRes30123,LMul95909,LDot42207,LCon40935,LAdd99715],["Glo94826","Fla86768","Res71561","Res7537","Zer76277","Con59408","Max15376","Res22303","Max52872","Zer46617","Con9171","Sub34017","Min35282","Res28724","PRe92452","Res2112","Max79967","Zer57828","Ave93078","Res93985","Ave59091","Res34563","Fla84948","Res30123","Mul95909","Dot42207","Con40935","Add99715"],Add99715,"Add99715")

Actual (Unparsed): [[[2.5692424, 3.4401636, 0.6765000, 0.6003000, -0.0479000, 0.4086000, 1.0894000, 1.0567000]]]

Expected (Unparsed): [[[2.569242341649,3.4401637080425,0.6765,0.6003000000000001,-0.04789999999999994,0.4086,1.0894,1.0567]]]

Actual:   [[[2.5693, 3.4402, 0.6765, 0.6003, -0.0479, 0.4086, 1.0894, 1.0567]]]

Expected: [[[2.5693, 3.4402, 0.6765, 0.6004, -0.0478, 0.4086, 1.0894, 1.0567]]]