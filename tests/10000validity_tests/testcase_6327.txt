import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min1530 = tf.keras.layers.Input(shape=([1, 2]))
in1Min1530 = tf.keras.layers.Input(shape=([1, 2]))
in0Con75582 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Min8 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min8 = tf.keras.layers.Input(shape=([2, 1, 2]))

Min1530 = keras.layers.Minimum(name = 'Min1530', )([in0Min1530,in1Min1530])
Res19209 = keras.layers.Reshape((1, 2, 1), name = 'Res19209', )(Min1530)
Zer1926 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer1926', )(Res19209)
Con75582 = keras.layers.Concatenate(axis=3, name = 'Con75582', )([Zer1926,in0Con75582])
Min8 = keras.layers.Minimum(name = 'Min8', )([in0Min8,in1Min8])
Zer58745 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer58745', )(Min8)
Sub29451 = keras.layers.Subtract(name = 'Sub29451', )([Con75582,Zer58745])
model = tf.keras.models.Model(inputs=[in0Min1530,in1Min1530,in0Con75582,in0Min8,in1Min8], outputs=Sub29451)
in0Min1530 = tf.constant([[[0.2974, 0.5864]]])
in1Min1530 = tf.constant([[[0.3246, 0.9197]]])
in0Con75582 = tf.constant([[[[0.8031], [0.5246], [0.1896]], [[0.2916], [0.1614], [0.9951]]]])
in0Min8 = tf.constant([[[[0.9075, 0.6316]], [[0.7169, 0.7613]]]])
in1Min8 = tf.constant([[[[0.7792, 0.6928]], [[0.6082, 0.6126]]]])
print (np.array2string(model.predict([in0Min1530,in1Min1530,in0Con75582,in0Min8,in1Min8],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub29451.png')

LMin1530 = minimum_layer([[[[0.2974, 0.5864]]], [[[0.3246, 0.9197]]]], Min1530), 
LRes19209 = reshape_layer(Min1530, [1, 2, 1], Res19209), 
LZer1926 = zero_padding2D_layer(Res19209, 1, 0, 1, 0, Zer1926), 
LCon75582 = concatenate_layer([Zer1926,[[[[0.8031], [0.5246], [0.1896]], [[0.2916], [0.1614], [0.9951]]]]], 3, Con75582), 
LMin8 = minimum_layer([[[[[0.9075, 0.6316]], [[0.7169, 0.7613]]]], [[[[0.7792, 0.6928]], [[0.6082, 0.6126]]]]], Min8), 
LZer58745 = zero_padding2D_layer(Min8, 0, 0, 2, 0, Zer58745), 
LSub29451 = subtract_layer(Con75582,Zer58745, Sub29451), 
exec_layers([LMin1530,LRes19209,LZer1926,LCon75582,LMin8,LZer58745,LSub29451],["Min1530","Res19209","Zer1926","Con75582","Min8","Zer58745","Sub29451"],Sub29451,"Sub29451")

Actual (Unparsed): [[[[0.0000000, 0.8031000], [0.0000000, 0.5246000], [-0.7792000, -0.4420000]], [[0.0000000, 0.2916000], [0.2974000, 0.1614000], [-0.0218000, 0.3825000]]]]

Expected (Unparsed): [[[[0,0.8031],[0,0.5246],[-0.7792,-0.44200000000000006]],[[0,0.2916],[0.2974,0.1614],[-0.02179999999999993,0.38249999999999995]]]]

Actual:   [[[[0, 0.8031], [0, 0.5246], [-0.7792, -0.442]], [[0, 0.2916], [0.2974, 0.1614], [-0.0218, 0.3825]]]]

Expected: [[[[0, 0.8031], [0, 0.5246], [-0.7792, -0.442]], [[0, 0.2916], [0.2974, 0.1614], [-0.0217, 0.3825]]]]