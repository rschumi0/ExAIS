import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul71873 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul71873 = tf.keras.layers.Input(shape=([1, 1]))
in0Con51011 = tf.keras.layers.Input(shape=([1, 1]))
in0Max26460 = tf.keras.layers.Input(shape=([1, 2]))
in1Max26460 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave3353 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave3353 = tf.keras.layers.Input(shape=([1, 2]))

Mul71873 = keras.layers.Multiply(name = 'Mul71873', )([in0Mul71873,in1Mul71873])
Con51011 = keras.layers.Concatenate(axis=2, name = 'Con51011', )([Mul71873,in0Con51011])
Max26460 = keras.layers.Maximum(name = 'Max26460', )([in0Max26460,in1Max26460])
Mas20200 = keras.layers.Masking(mask_value=2, name = 'Mas20200', )(Max26460)
Max40770 = keras.layers.Maximum(name = 'Max40770', )([Con51011,Mas20200])
Ave3353 = keras.layers.Average(name = 'Ave3353', )([in0Ave3353,in1Ave3353])
Add73616 = keras.layers.Add(name = 'Add73616', )([Max40770,Ave3353])
model = tf.keras.models.Model(inputs=[in0Mul71873,in1Mul71873,in0Con51011,in0Max26460,in1Max26460,in0Ave3353,in1Ave3353], outputs=Add73616)
in0Mul71873 = tf.constant([[[0.6337]]])
in1Mul71873 = tf.constant([[[0.073]]])
in0Con51011 = tf.constant([[[0.719]]])
in0Max26460 = tf.constant([[[0.4725, 0.7268]]])
in1Max26460 = tf.constant([[[0.5983, 0.7888]]])
in0Ave3353 = tf.constant([[[0.9513, 0.2322]]])
in1Ave3353 = tf.constant([[[0.738, 0.952]]])
print (np.array2string(model.predict([in0Mul71873,in1Mul71873,in0Con51011,in0Max26460,in1Max26460,in0Ave3353,in1Ave3353],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add73616.png')

LMul71873 = multiply_layer([[[[0.6337]]], [[[0.073]]]], Mul71873), 
LCon51011 = concatenate_layer([Mul71873,[[[0.719]]]], 2, Con51011), 
LMax26460 = maximum_layer([[[[0.4725, 0.7268]]], [[[0.5983, 0.7888]]]], Max26460), 
LMas20200 = masking_layer(Max26460, 2, Mas20200), 
LMax40770 = maximum_layer([Con51011,Mas20200], Max40770), 
LAve3353 = average_layer([[[[0.9513, 0.2322]]], [[[0.738, 0.952]]]], Ave3353), 
LAdd73616 = add_layer([Max40770,Ave3353], Add73616), 
exec_layers([LMul71873,LCon51011,LMax26460,LMas20200,LMax40770,LAve3353,LAdd73616],["Mul71873","Con51011","Max26460","Mas20200","Max40770","Ave3353","Add73616"],Add73616,"Add73616")

Actual (Unparsed): [[[1.4429500, 1.3809000]]]

Expected (Unparsed): [[[1.4429500000000002,1.3809]]]

Actual:   [[[1.443, 1.3809]]]

Expected: [[[1.443, 1.3809]]]