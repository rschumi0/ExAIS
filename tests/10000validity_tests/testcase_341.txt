import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep17298 = tf.keras.layers.Input(shape=([2, 1]))
in0Con73696 = tf.keras.layers.Input(shape=([3, 4, 3, 1]))
in0Con26909 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0ELU18536 = tf.keras.layers.Input(shape=([1, 2]))
in0Con78131 = tf.keras.layers.Input(shape=([2, 2]))
in0Per49178 = tf.keras.layers.Input(shape=([4, 2]))
in0Con84004 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Add37615 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Add37615 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Sep17298 = keras.layers.SeparableConv1D(2, (2),strides=(1), padding='valid', name = 'Sep17298', )(in0Sep17298)
Res62642 = keras.layers.Reshape((1, 2, 1), name = 'Res62642', )(Sep17298)
Res10145 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res10145', )(Res62642)
Zer28007 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer28007', )(Res10145)
Thr72741 = keras.layers.ThresholdedReLU(theta=1.5649227739874085, name = 'Thr72741', )(Zer28007)
Con73696 = keras.layers.Concatenate(axis=4, name = 'Con73696', )([Thr72741,in0Con73696])
Con26909 = keras.layers.Conv3D(2, (1, 2, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con26909', )(in0Con26909)
Res31085 = keras.layers.Reshape((1, 2, 2), name = 'Res31085', )(Con26909)
Res26234 = keras.layers.Reshape((1, 4), name = 'Res26234', )(Res31085)
Zer5447 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer5447', )(Res26234)
ELU18536 = keras.layers.ELU(alpha=4.384989184377435, name = 'ELU18536', input_shape=(1, 2))(in0ELU18536)
Up_57288 = keras.layers.UpSampling1D(size=(2), name = 'Up_57288', )(ELU18536)
Con78131 = keras.layers.Concatenate(axis=2, name = 'Con78131', )([Up_57288,in0Con78131])
Per49178 = keras.layers.Permute((2,1), name = 'Per49178',)(in0Per49178)
Add64361 = keras.layers.Add(name = 'Add64361', )([Con78131,Per49178])
Dot51671 = keras.layers.Dot(axes=(2, 2), name = 'Dot51671', )([Zer5447,Add64361])
Res89289 = keras.layers.Reshape((2, 2, 1), name = 'Res89289', )(Dot51671)
Res35016 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res35016', )(Res89289)
Con84004 = keras.layers.Concatenate(axis=4, name = 'Con84004', )([Res35016,in0Con84004])
Add37615 = keras.layers.Add(name = 'Add37615', )([in0Add37615,in1Add37615])
Zer43864 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer43864', )(Add37615)
Add83275 = keras.layers.Add(name = 'Add83275', )([Con84004,Zer43864])
Zer535 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (2, 0)), name = 'Zer535', )(Add83275)
Add20009 = keras.layers.Add(name = 'Add20009', )([Con73696,Zer535])
model = tf.keras.models.Model(inputs=[in0Sep17298,in0Con73696,in0Con26909,in0ELU18536,in0Con78131,in0Per49178,in0Con84004,in0Add37615,in1Add37615], outputs=Add20009)
w = model.get_layer('Sep17298').get_weights() 
w[0] = np.array([[[0.6962]], [[0.2007]]])
w[1] = np.array([[[0.161, 0.1863]]])
w[2] = np.array([0, 0])
model.get_layer('Sep17298').set_weights(w) 
w = model.get_layer('Con26909').get_weights() 
w[0] = np.array([[[[[0.35, 0.2447], [0.2592, 0.5148]]], [[[0.7096, 0.6238], [0.8041, 0.0947]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con26909').set_weights(w) 
in0Sep17298 = tf.constant([[[0.7492], [0.0615]]])
in0Con73696 = tf.constant([[[[[0.314], [0.3648], [0.2407]], [[0.2631], [0.5081], [0.3829]], [[0.3622], [0.0774], [0.2933]], [[0.1381], [0.9185], [0.3223]]], [[[0.1212], [0.8975], [0.8721]], [[0.0267], [0.5196], [0.8955]], [[0.5442], [0.7458], [0.3736]], [[0.5075], [0.2658], [0.5454]]], [[[0.9463], [0.3802], [0.4431]], [[0.8002], [0.7741], [0.9296]], [[0.0165], [0.9093], [0.1128]], [[0.414], [0.157], [0.2795]]]]])
in0Con26909 = tf.constant([[[[[0.1824, 0.7249]], [[0.3472, 0.5254]]]]])
in0ELU18536 = tf.constant([[[0.3513, 0.3942]]])
in0Con78131 = tf.constant([[[0.7815, 0.9277], [0.0599, 0.6474]]])
in0Per49178 = tf.constant([[[1.8315, 1.2996], [1.9468, 1.2696], [1.7357, 1.985], [1.4756, 1.369]]])
in0Con84004 = tf.constant([[[[[0.7981]], [[0.4057]]], [[[0.0317]], [[0.2879]]]]])
in0Add37615 = tf.constant([[[[[0.2161, 0.8543]]], [[[0.726, 0.045]]]]])
in1Add37615 = tf.constant([[[[[0.168, 0.6491]]], [[[0.0296, 0.8043]]]]])
print (np.array2string(model.predict([in0Sep17298,in0Con73696,in0Con26909,in0ELU18536,in0Con78131,in0Per49178,in0Con84004,in0Add37615,in1Add37615],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add20009.png')

LSep17298 = separable_conv1D_layer([[[0.7492], [0.0615]]], 2,[[[[0.6962]], [[0.2007]]],[[[0.161, 0.1863]]]],[0, 0], 1, false, Sep17298), 
LRes62642 = reshape_layer(Sep17298, [1, 2, 1], Res62642), 
LRes10145 = reshape_layer(Res62642, [1, 2, 1, 1], Res10145), 
LZer28007 = zero_padding3D_layer(Res10145, 1, 1, 1, 1, 1, 1, Zer28007), 
LThr72741 = thresholded_relu_layer(Zer28007, 1.5649227739874085, Thr72741), 
LCon73696 = concatenate_layer([Thr72741,[[[[[0.314], [0.3648], [0.2407]], [[0.2631], [0.5081], [0.3829]], [[0.3622], [0.0774], [0.2933]], [[0.1381], [0.9185], [0.3223]]], [[[0.1212], [0.8975], [0.8721]], [[0.0267], [0.5196], [0.8955]], [[0.5442], [0.7458], [0.3736]], [[0.5075], [0.2658], [0.5454]]], [[[0.9463], [0.3802], [0.4431]], [[0.8002], [0.7741], [0.9296]], [[0.0165], [0.9093], [0.1128]], [[0.414], [0.157], [0.2795]]]]]], 4, Con73696), 
LCon26909 = conv3D_layer([[[[[0.1824, 0.7249]], [[0.3472, 0.5254]]]]], 1, 2, 1,[[[[[0.35, 0.2447], [0.2592, 0.5148]]], [[[0.7096, 0.6238], [0.8041, 0.0947]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con26909), 
LRes31085 = reshape_layer(Con26909, [1, 2, 2], Res31085), 
LRes26234 = reshape_layer(Res31085, [1, 4], Res26234), 
LZer5447 = zero_padding1D_layer(Res26234, 1, 0, Zer5447), 
LELU18536 = elu_layer([[[0.3513, 0.3942]]], 4.384989184377435, ELU18536), 
LUp_57288 = up_sampling1D_layer(ELU18536, 2, Up_57288), 
LCon78131 = concatenate_layer([Up_57288,[[[0.7815, 0.9277], [0.0599, 0.6474]]]], 2, Con78131), 
LPer49178 = permute_layer([[[1.8315, 1.2996], [1.9468, 1.2696], [1.7357, 1.985], [1.4756, 1.369]]], 2,1, Per49178), 
LAdd64361 = add_layer([Con78131,Per49178], Add64361), 
LDot51671 = dot_layer(Zer5447,Add64361, 2, 2, Dot51671), 
LRes89289 = reshape_layer(Dot51671, [2, 2, 1], Res89289), 
LRes35016 = reshape_layer(Res89289, [2, 2, 1, 1], Res35016), 
LCon84004 = concatenate_layer([Res35016,[[[[[0.7981]], [[0.4057]]], [[[0.0317]], [[0.2879]]]]]], 4, Con84004), 
LAdd37615 = add_layer([[[[[[0.2161, 0.8543]]], [[[0.726, 0.045]]]]], [[[[[0.168, 0.6491]]], [[[0.0296, 0.8043]]]]]], Add37615), 
LZer43864 = zero_padding3D_layer(Add37615, 0, 0, 1, 0, 0, 0, Zer43864), 
LAdd83275 = add_layer([Con84004,Zer43864], Add83275), 
LZer535 = zero_padding3D_layer(Add83275, 1, 0, 2, 0, 2, 0, Zer535), 
LAdd20009 = add_layer([Con73696,Zer535], Add20009), 
exec_layers([LSep17298,LRes62642,LRes10145,LZer28007,LThr72741,LCon73696,LCon26909,LRes31085,LRes26234,LZer5447,LELU18536,LUp_57288,LCon78131,LPer49178,LAdd64361,LDot51671,LRes89289,LRes35016,LCon84004,LAdd37615,LZer43864,LAdd83275,LZer535,LAdd20009],["Sep17298","Res62642","Res10145","Zer28007","Thr72741","Con73696","Con26909","Res31085","Res26234","Zer5447","ELU18536","Up_57288","Con78131","Per49178","Add64361","Dot51671","Res89289","Res35016","Con84004","Add37615","Zer43864","Add83275","Zer535","Add20009"],Add20009,"Add20009")

Actual (Unparsed): [[[[[0.0000000, 0.3140000], [0.0000000, 0.3648000], [0.0000000, 0.2407000]], [[0.0000000, 0.2631000], [0.0000000, 0.5081000], [0.0000000, 0.3829000]], [[0.0000000, 0.3622000], [0.0000000, 0.0774000], [0.0000000, 0.2933000]], [[0.0000000, 0.1381000], [0.0000000, 0.9185000], [0.0000000, 0.3223000]]], [[[0.0000000, 0.1212000], [0.0000000, 0.8975000], [0.0000000, 0.8721000]], [[0.0000000, 0.0267000], [0.0000000, 0.5196000], [0.0000000, 0.8955000]], [[0.0000000, 0.5442000], [0.0000000, 0.7458000], [0.0000000, 1.1717000]], [[0.0000000, 0.5075000], [0.0000000, 0.2658000], [0.3841000, 2.4545000]]], [[[0.0000000, 0.9463000], [0.0000000, 0.3802000], [0.0000000, 0.4431000]], [[0.0000000, 0.8002000], [0.0000000, 0.7741000], [0.0000000, 0.9296000]], [[0.0000000, 0.0165000], [0.0000000, 0.9093000], [5.1139518, 0.1445000]], [[0.0000000, 0.4140000], [0.0000000, 0.1570000], [4.6573563, 1.4167000]]]]]

Expected (Unparsed): [[[[[0,0.314],[0,0.3648],[0,0.2407]],[[0,0.2631],[0,0.5081],[0,0.3829]],[[0,0.3622],[0,0.0774],[0,0.2933]],[[0,0.1381],[0,0.9185],[0,0.3223]]],[[[0,0.1212],[0,0.8975],[0,0.8721]],[[0,0.0267],[0,0.5196],[0,0.8955]],[[0,0.5442],[0,0.7458],[0.0,1.1717]],[[0,0.5075],[0,0.2658],[0.3841,2.4545]]],[[[0,0.9463],[0,0.3802],[0,0.4431]],[[0,0.8002],[0,0.7741],[0,0.9296]],[[0,0.0165],[0,0.9093],[5.113951828396,0.1445]],[[0,0.414],[0,0.157],[4.657356324354,1.4167]]]]]

Actual:   [[[[[0, 0.314], [0, 0.3648], [0, 0.2407]], [[0, 0.2631], [0, 0.5081], [0, 0.3829]], [[0, 0.3622], [0, 0.0774], [0, 0.2933]], [[0, 0.1381], [0, 0.9185], [0, 0.3223]]], [[[0, 0.1212], [0, 0.8975], [0, 0.8721]], [[0, 0.0267], [0, 0.5196], [0, 0.8955]], [[0, 0.5442], [0, 0.7458], [0, 1.1717]], [[0, 0.5075], [0, 0.2658], [0.3841, 2.4545]]], [[[0, 0.9463], [0, 0.3802], [0, 0.4431]], [[0, 0.8002], [0, 0.7741], [0, 0.9296]], [[0, 0.0165], [0, 0.9093], [5.114, 0.1445]], [[0, 0.414], [0, 0.157], [4.6574, 1.4167]]]]]

Expected: [[[[[0, 0.314], [0, 0.3648], [0, 0.2407]], [[0, 0.2631], [0, 0.5081], [0, 0.3829]], [[0, 0.3622], [0, 0.0774], [0, 0.2933]], [[0, 0.1381], [0, 0.9185], [0, 0.3223]]], [[[0, 0.1212], [0, 0.8975], [0, 0.8721]], [[0, 0.0267], [0, 0.5196], [0, 0.8955]], [[0, 0.5442], [0, 0.7458], [0, 1.1717]], [[0, 0.5075], [0, 0.2658], [0.3841, 2.4545]]], [[[0, 0.9463], [0, 0.3802], [0, 0.4431]], [[0, 0.8002], [0, 0.7741], [0, 0.9296]], [[0, 0.0165], [0, 0.9093], [5.114, 0.1445]], [[0, 0.414], [0, 0.157], [4.6574, 1.4167]]]]]