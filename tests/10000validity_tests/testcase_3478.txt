import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot75889 = tf.keras.layers.Input(shape=([2]))
in1Dot75889 = tf.keras.layers.Input(shape=([2]))
in0Min28332 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Min28332 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Dot37996 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot37996 = tf.keras.layers.Input(shape=([2, 2]))

Dot75889 = keras.layers.Dot(axes=(1, 1), name = 'Dot75889', )([in0Dot75889,in1Dot75889])
Res18863 = keras.layers.Reshape((1, 1), name = 'Res18863', )(Dot75889)
Res18197 = keras.layers.Reshape((1, 1, 1), name = 'Res18197', )(Res18863)
Zer95973 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer95973', )(Res18197)
Min28332 = keras.layers.Minimum(name = 'Min28332', )([in0Min28332,in1Min28332])
Ave63507 = keras.layers.Average(name = 'Ave63507', )([Zer95973,Min28332])
Res91612 = keras.layers.Reshape((1, 2), name = 'Res91612', )(Ave63507)
Zer48542 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer48542', )(Res91612)
Dot37996 = keras.layers.Dot(axes=(1, 1), name = 'Dot37996', )([in0Dot37996,in1Dot37996])
Cro33359 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro33359', )(Dot37996)
Mul4775 = keras.layers.Multiply(name = 'Mul4775', )([Zer48542,Cro33359])
Res73220 = keras.layers.Reshape((2, 2, 1), name = 'Res73220', )(Mul4775)
Res23285 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res23285', )(Res73220)
Cro25804 = keras.layers.Cropping3D(cropping=((1, 0), (1, 0), (0, 0)), name = 'Cro25804', )(Res23285)
model = tf.keras.models.Model(inputs=[in0Dot75889,in1Dot75889,in0Min28332,in1Min28332,in0Dot37996,in1Dot37996], outputs=Cro25804)
in0Dot75889 = tf.constant([[0.4318, 0.6979]])
in1Dot75889 = tf.constant([[0.8346, 0.2208]])
in0Min28332 = tf.constant([[[[0.6708], [0.7518]]]])
in1Min28332 = tf.constant([[[[0.7028], [0.5431]]]])
in0Dot37996 = tf.constant([[[0.5732, 0.0654], [0.0663, 0.3397]]])
in1Dot37996 = tf.constant([[[0.9247, 0.6638], [0.0394, 0.8661]]])
print (np.array2string(model.predict([in0Dot75889,in1Dot75889,in0Min28332,in1Min28332,in0Dot37996,in1Dot37996],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro25804.png')

LDot75889 = dot_layer([[0.4318, 0.6979]], [[0.8346, 0.2208]], 1, 1, Dot75889), 
LRes18863 = reshape_layer(Dot75889, [1, 1], Res18863), 
LRes18197 = reshape_layer(Res18863, [1, 1, 1], Res18197), 
LZer95973 = zero_padding2D_layer(Res18197, 0, 0, 1, 0, Zer95973), 
LMin28332 = minimum_layer([[[[[0.6708], [0.7518]]]], [[[[0.7028], [0.5431]]]]], Min28332), 
LAve63507 = average_layer([Zer95973,Min28332], Ave63507), 
LRes91612 = reshape_layer(Ave63507, [1, 2], Res91612), 
LZer48542 = zero_padding1D_layer(Res91612, 1, 0, Zer48542), 
LDot37996 = dot_layer([[[0.5732, 0.0654], [0.0663, 0.3397]]], [[[0.9247, 0.6638], [0.0394, 0.8661]]], 1, 1, Dot37996), 
LCro33359 = cropping1D_layer(Dot37996, 0, 0, Cro33359), 
LMul4775 = multiply_layer([Zer48542,Cro33359], Mul4775), 
LRes73220 = reshape_layer(Mul4775, [2, 2, 1], Res73220), 
LRes23285 = reshape_layer(Res73220, [2, 2, 1, 1], Res23285), 
LCro25804 = cropping3D_layer(Res23285, 1, 0, 1, 0, 0, 0, Cro25804), 
exec_layers([LDot75889,LRes18863,LRes18197,LZer95973,LMin28332,LAve63507,LRes91612,LZer48542,LDot37996,LCro33359,LMul4775,LRes73220,LRes23285,LCro25804],["Dot75889","Res18863","Res18197","Zer95973","Min28332","Ave63507","Res91612","Zer48542","Dot37996","Cro33359","Mul4775","Res73220","Res23285","Cro25804"],Cro25804,"Cro25804")

Actual (Unparsed): [[[[[0.1785330]]]]]

Expected (Unparsed): [[[[[0.178533043439727]]]]]

Actual:   [[[[[0.1786]]]]]

Expected: [[[[[0.1786]]]]]