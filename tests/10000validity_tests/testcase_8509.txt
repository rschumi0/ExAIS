import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ReL69352 = tf.keras.layers.Input(shape=([1, 2]))
in0Glo58553 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

ReL69352 = keras.layers.ReLU(max_value=4.030161954892264, negative_slope=8.84268148947331, threshold=3.455626243848328, name = 'ReL69352', input_shape=(1, 2))(in0ReL69352)
Fla91317 = keras.layers.Flatten(name = 'Fla91317', )(ReL69352)
Glo58553 = keras.layers.GlobalAveragePooling3D(name = 'Glo58553', )(in0Glo58553)
Max59036 = keras.layers.Maximum(name = 'Max59036', )([Fla91317,Glo58553])
Res99771 = keras.layers.Reshape((2, 1), name = 'Res99771', )(Max59036)
Sim64673 = keras.layers.SimpleRNN(3,name = 'Sim64673', )(Res99771)
Res60279 = keras.layers.Reshape((3, 1), name = 'Res60279', )(Sim64673)
Res12349 = keras.layers.Reshape((3, 1, 1), name = 'Res12349', )(Res60279)
Res95082 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res95082', )(Res12349)
Cro72793 = keras.layers.Cropping3D(cropping=((2, 0), (0, 0), (0, 0)), name = 'Cro72793', )(Res95082)
Res95624 = keras.layers.Reshape((1, 1, 1), name = 'Res95624', )(Cro72793)
Res3646 = keras.layers.Reshape((1, 1), name = 'Res3646', )(Res95624)
Glo5744 = keras.layers.GlobalMaxPool1D(name = 'Glo5744', )(Res3646)
model = tf.keras.models.Model(inputs=[in0ReL69352,in0Glo58553], outputs=Glo5744)
w = model.get_layer('Sim64673').get_weights() 
w[0] = np.array([[5, 7, 2]])
w[1] = np.array([[5, 5, 5], [4, 9, 4], [8, 3, 2]])
w[2] = np.array([7, 7, 7])
model.get_layer('Sim64673').set_weights(w) 
in0ReL69352 = tf.constant([[[0.5471, 0.6296]]])
in0Glo58553 = tf.constant([[[[[1.2876, 1.8916], [1.7317, 1.8957]], [[1.5261, 1.8466], [1.182, 1.7014]]]]])
print (np.array2string(model.predict([in0ReL69352,in0Glo58553],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo5744.png')

LReL69352 = relu_layer([[[0.5471, 0.6296]]], 4.030161954892264, 8.84268148947331, 3.455626243848328, ReL69352), 
LFla91317 = flatten_layer(ReL69352, Fla91317), 
LGlo58553 = global_average_pooling3D_layer([[[[[1.2876, 1.8916], [1.7317, 1.8957]], [[1.5261, 1.8466], [1.182, 1.7014]]]]], Glo58553), 
LMax59036 = maximum_layer([Fla91317,Glo58553], Max59036), 
LRes99771 = reshape_layer(Max59036, [2, 1], Res99771), 
LSim64673 = simple_rnn_layer(Res99771,[[5, 7, 2]],[[5, 5, 5], [4, 9, 4], [8, 3, 2]],[7, 7, 7], Sim64673), 
LRes60279 = reshape_layer(Sim64673, [3, 1], Res60279), 
LRes12349 = reshape_layer(Res60279, [3, 1, 1], Res12349), 
LRes95082 = reshape_layer(Res12349, [3, 1, 1, 1], Res95082), 
LCro72793 = cropping3D_layer(Res95082, 2, 0, 0, 0, 0, 0, Cro72793), 
LRes95624 = reshape_layer(Cro72793, [1, 1, 1], Res95624), 
LRes3646 = reshape_layer(Res95624, [1, 1], Res3646), 
LGlo5744 = global_max_pool1D_layer(Res3646, Glo5744), 
exec_layers([LReL69352,LFla91317,LGlo58553,LMax59036,LRes99771,LSim64673,LRes60279,LRes12349,LRes95082,LCro72793,LRes95624,LRes3646,LGlo5744],["ReL69352","Fla91317","Glo58553","Max59036","Res99771","Sim64673","Res60279","Res12349","Res95082","Cro72793","Res95624","Res3646","Glo5744"],Glo5744,"Glo5744")

Actual (Unparsed): [[1.0000000]]

Expected (Unparsed): [[1.0]]

Actual:   [[1]]

Expected: [[1]]