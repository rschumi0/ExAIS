import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave28228 = tf.keras.layers.Input(shape=([2, 2]))

Ave28228 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave28228', )(in0Ave28228)
LST35810 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST35810', )(Ave28228)
model = tf.keras.models.Model(inputs=[in0Ave28228], outputs=LST35810)
w = model.get_layer('LST35810').get_weights() 
w[0] = np.array([[4, 5, 7, 2], [3, 4, 5, 2]])
w[1] = np.array([[2, 3, 4, 1]])
w[2] = np.array([6, 6, 3, 3])
model.get_layer('LST35810').set_weights(w) 
in0Ave28228 = tf.constant([[[1.5507, 1.3092], [1.3815, 1.7653]]])
print (np.array2string(model.predict([in0Ave28228],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST35810.png')

LAve28228 = average_pooling1D_layer([[[1.5507, 1.3092], [1.3815, 1.7653]]], 2, Ave28228), 
LLST35810 = lstm_layer(Ave28228,[[4, 5, 7, 2], [3, 4, 5, 2]],[[2, 3, 4, 1]],[6, 6, 3, 3], LST35810), 
exec_layers([LAve28228,LLST35810],["Ave28228","LST35810"],LST35810,"LST35810")

Actual (Unparsed): [[0.7615008]]

Expected (Unparsed): [[0.7615007774753559]]

Actual:   [[0.7616]]

Expected: [[0.7616]]