import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max12227 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Max12227 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Mul1160 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul1160 = tf.keras.layers.Input(shape=([1, 1]))
in0Con61805 = tf.keras.layers.Input(shape=([1, 3]))

Max12227 = keras.layers.Maximum(name = 'Max12227', )([in0Max12227,in1Max12227])
Res57741 = keras.layers.Reshape((1, 1, 4), name = 'Res57741', )(Max12227)
Res94613 = keras.layers.Reshape((1, 4), name = 'Res94613', )(Res57741)
Mul1160 = keras.layers.Multiply(name = 'Mul1160', )([in0Mul1160,in1Mul1160])
Con61805 = keras.layers.Concatenate(axis=2, name = 'Con61805', )([Mul1160,in0Con61805])
Add74662 = keras.layers.Add(name = 'Add74662', )([Res94613,Con61805])
ReL66932 = keras.layers.ReLU(max_value=5.744850809584213, negative_slope=9.571484916521195, threshold=7.107576632002609, name = 'ReL66932', )(Add74662)
Loc98156 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc98156', )(ReL66932)
model = tf.keras.models.Model(inputs=[in0Max12227,in1Max12227,in0Mul1160,in1Mul1160,in0Con61805], outputs=Loc98156)
w = model.get_layer('Loc98156').get_weights() 
w[0] = np.array([[[0.6202, 0.6039, 0.3653, 0.4458], [0.4405, 0.1357, 0.4014, 0.7807], [0.1431, 0.2946, 0.0631, 0.5622], [0.5631, 0.6988, 0.8782, 0.0296]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc98156').set_weights(w) 
in0Max12227 = tf.constant([[[[[0.8684, 0.2364], [0.7596, 0.2748]]]]])
in1Max12227 = tf.constant([[[[[0.1904, 0.9727], [0.6049, 0.8215]]]]])
in0Mul1160 = tf.constant([[[0.2448]]])
in1Mul1160 = tf.constant([[[0.4282]]])
in0Con61805 = tf.constant([[[0.7478, 0.0601, 0.2387]]])
print (np.array2string(model.predict([in0Max12227,in1Max12227,in0Mul1160,in1Mul1160,in0Con61805],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc98156.png')

LMax12227 = maximum_layer([[[[[[0.8684, 0.2364], [0.7596, 0.2748]]]]], [[[[[0.1904, 0.9727], [0.6049, 0.8215]]]]]], Max12227), 
LRes57741 = reshape_layer(Max12227, [1, 1, 4], Res57741), 
LRes94613 = reshape_layer(Res57741, [1, 4], Res94613), 
LMul1160 = multiply_layer([[[[0.2448]]], [[[0.4282]]]], Mul1160), 
LCon61805 = concatenate_layer([Mul1160,[[[0.7478, 0.0601, 0.2387]]]], 2, Con61805), 
LAdd74662 = add_layer([Res94613,Con61805], Add74662), 
LReL66932 = relu_layer(Add74662, 5.744850809584213, 9.571484916521195, 7.107576632002609, ReL66932), 
LLoc98156 = locally_connected1D_layer(ReL66932, 1,[[[0.6202, 0.6039, 0.3653, 0.4458], [0.4405, 0.1357, 0.4014, 0.7807], [0.1431, 0.2946, 0.0631, 0.5622], [0.5631, 0.6988, 0.8782, 0.0296]]],[[0, 0, 0, 0]], 1, Loc98156), 
exec_layers([LMax12227,LRes57741,LRes94613,LMul1160,LCon61805,LAdd74662,LReL66932,LLoc98156],["Max12227","Res57741","Res94613","Mul1160","Con61805","Add74662","ReL66932","Loc98156"],Loc98156,"Loc98156")

Actual (Unparsed): [[[-100.3341062, -100.6334199, -96.7755897, -101.9787355]]]

Expected (Unparsed): [[[-100.33410601131047,-100.63341977289893,-96.7755896854739,-101.9787352403178]]]

Actual:   [[[-100.3341, -100.6334, -96.7755, -101.9787]]]

Expected: [[[-100.3341, -100.6334, -96.7755, -101.9787]]]