import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con63894 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Dep2299 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Mul84531 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul84531 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con17670 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Mul83770 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Mul83770 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con61730 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Sub93335 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in1Sub93335 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in0Con18102 = tf.keras.layers.Input(shape=([16]))

Con63894 = keras.layers.Conv2DTranspose(2, (2, 1),strides=(1, 1), padding='valid', name = 'Con63894', )(in0Con63894)
Zer33917 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer33917', )(Con63894)
Dep2299 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='same', name = 'Dep2299', )(in0Dep2299)
Mul84531 = keras.layers.Multiply(name = 'Mul84531', )([in0Mul84531,in1Mul84531])
Zer74333 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer74333', )(Mul84531)
Con17670 = keras.layers.Concatenate(axis=3, name = 'Con17670', )([Zer74333,in0Con17670])
Max78635 = keras.layers.Maximum(name = 'Max78635', )([Dep2299,Con17670])
Zer62512 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer62512', )(Max78635)
Sub80512 = keras.layers.Subtract(name = 'Sub80512', )([Zer33917,Zer62512])
ELU29401 = keras.layers.ELU(alpha=9.759406095828524, name = 'ELU29401', )(Sub80512)
Res24878 = keras.layers.Reshape((3, 6), name = 'Res24878', )(ELU29401)
Fla88297 = keras.layers.Flatten(name = 'Fla88297', )(Res24878)
Mul83770 = keras.layers.Multiply(name = 'Mul83770', )([in0Mul83770,in1Mul83770])
Con61730 = keras.layers.Concatenate(axis=4, name = 'Con61730', )([Mul83770,in0Con61730])
Sub93335 = keras.layers.Subtract(name = 'Sub93335', )([in0Sub93335,in1Sub93335])
Cro97482 = keras.layers.Cropping3D(cropping=((1, 0), (0, 2), (1, 0)), name = 'Cro97482', )(Sub93335)
Zer17545 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer17545', )(Cro97482)
Add13718 = keras.layers.Add(name = 'Add13718', )([Con61730,Zer17545])
Res47954 = keras.layers.Reshape((1, 2, 2), name = 'Res47954', )(Add13718)
Glo69205 = keras.layers.GlobalMaxPool2D(name = 'Glo69205', )(Res47954)
Con18102 = keras.layers.Concatenate(axis=1, name = 'Con18102', )([Glo69205,in0Con18102])
Min57526 = keras.layers.Minimum(name = 'Min57526', )([Fla88297,Con18102])
model = tf.keras.models.Model(inputs=[in0Con63894,in0Dep2299,in0Mul84531,in1Mul84531,in0Con17670,in0Mul83770,in1Mul83770,in0Con61730,in0Sub93335,in1Sub93335,in0Con18102], outputs=Min57526)
w = model.get_layer('Con63894').get_weights() 
w[0] = np.array([[[[0.7316, 0.9293], [0.9185, 0.5016]]], [[[0.3317, 0.9082], [0.6166, 0.9627]]]])
w[1] = np.array([0, 0])
model.get_layer('Con63894').set_weights(w) 
w = model.get_layer('Dep2299').get_weights() 
w[0] = np.array([[[[0.3981], [0.4248]], [[0.5656], [0.0815]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep2299').set_weights(w) 
in0Con63894 = tf.constant([[[[0.7906, 0.5433]], [[0.042, 0.2556]]]])
in0Dep2299 = tf.constant([[[[0.5122, 0.7264], [0.5003, 0.2992]]]])
in0Mul84531 = tf.constant([[[[0.9697]]]])
in1Mul84531 = tf.constant([[[[0.782]]]])
in0Con17670 = tf.constant([[[[0.6251], [0.2401]]]])
in0Mul83770 = tf.constant([[[[[0.3394]], [[0.7421]]]]])
in1Mul83770 = tf.constant([[[[[0.5041]], [[0.4276]]]]])
in0Con61730 = tf.constant([[[[[0.2024]], [[0.7443]]]]])
in0Sub93335 = tf.constant([[[[[0.3229, 0.1148], [0.795, 0.814]], [[0.6374, 0.7282], [0.4009, 0.2681]], [[0.0002, 0.0424], [0.275, 0.2091]]], [[[0.1224, 0.1925], [0.8069, 0.7065]], [[0.2259, 0.6157], [0.4305, 0.6099]], [[0.3128, 0.3274], [0.6003, 0.1725]]]]])
in1Sub93335 = tf.constant([[[[[0.6675, 0.0273], [0.9901, 0.6166]], [[0.6363, 0.8822], [0.0945, 0.1432]], [[0.0724, 0.527], [0.0253, 0.4765]]], [[[0.9634, 0.5551], [0.187, 0.1505]], [[0.6602, 0.5267], [0.6855, 0.3958]], [[0.8207, 0.3125], [0.783, 0.6637]]]]])
in0Con18102 = tf.constant([[0.0476, 0.5799, 0.8254, 0.2189, 0.7936, 0.7131, 0.7032, 0.2331, 0.7856, 0.1241, 0.4226, 0.0739, 0.771, 0.6919, 0.5563, 0.9465]])
print (np.array2string(model.predict([in0Con63894,in0Dep2299,in0Mul84531,in1Mul84531,in0Con17670,in0Mul83770,in1Mul83770,in0Con61730,in0Sub93335,in1Sub93335,in0Con18102],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min57526.png')

LCon63894 = conv2D_transpose_layer([[[[0.7906, 0.5433]], [[0.042, 0.2556]]]], 2, 1,[[[[0.7316, 0.9293], [0.9185, 0.5016]]], [[[0.3317, 0.9082], [0.6166, 0.9627]]]],[0, 0], 1, 1, false, Con63894), 
LZer33917 = zero_padding2D_layer(Con63894, 0, 0, 2, 0, Zer33917), 
LDep2299 = depthwise_conv2D_layer([[[[0.5122, 0.7264], [0.5003, 0.2992]]]], 1, 2,[[[[0.3981], [0.4248]], [[0.5656], [0.0815]]]],[0, 0], 1, 1, true, Dep2299), 
LMul84531 = multiply_layer([[[[[0.9697]]]], [[[[0.782]]]]], Mul84531), 
LZer74333 = zero_padding2D_layer(Mul84531, 0, 0, 1, 0, Zer74333), 
LCon17670 = concatenate_layer([Zer74333,[[[[0.6251], [0.2401]]]]], 3, Con17670), 
LMax78635 = maximum_layer([Dep2299,Con17670], Max78635), 
LZer62512 = zero_padding2D_layer(Max78635, 2, 0, 1, 0, Zer62512), 
LSub80512 = subtract_layer(Zer33917,Zer62512, Sub80512), 
LELU29401 = elu_layer(Sub80512, 9.759406095828524, ELU29401), 
LRes24878 = reshape_layer(ELU29401, [3, 6], Res24878), 
LFla88297 = flatten_layer(Res24878, Fla88297), 
LMul83770 = multiply_layer([[[[[[0.3394]], [[0.7421]]]]], [[[[[0.5041]], [[0.4276]]]]]], Mul83770), 
LCon61730 = concatenate_layer([Mul83770,[[[[[0.2024]], [[0.7443]]]]]], 4, Con61730), 
LSub93335 = subtract_layer([[[[[0.3229, 0.1148], [0.795, 0.814]], [[0.6374, 0.7282], [0.4009, 0.2681]], [[0.0002, 0.0424], [0.275, 0.2091]]], [[[0.1224, 0.1925], [0.8069, 0.7065]], [[0.2259, 0.6157], [0.4305, 0.6099]], [[0.3128, 0.3274], [0.6003, 0.1725]]]]], [[[[[0.6675, 0.0273], [0.9901, 0.6166]], [[0.6363, 0.8822], [0.0945, 0.1432]], [[0.0724, 0.527], [0.0253, 0.4765]]], [[[0.9634, 0.5551], [0.187, 0.1505]], [[0.6602, 0.5267], [0.6855, 0.3958]], [[0.8207, 0.3125], [0.783, 0.6637]]]]], Sub93335), 
LCro97482 = cropping3D_layer(Sub93335, 1, 0, 0, 2, 1, 0, Cro97482), 
LZer17545 = zero_padding3D_layer(Cro97482, 0, 0, 1, 0, 0, 0, Zer17545), 
LAdd13718 = add_layer([Con61730,Zer17545], Add13718), 
LRes47954 = reshape_layer(Add13718, [1, 2, 2], Res47954), 
LGlo69205 = global_max_pool2D_layer(Res47954, Glo69205), 
LCon18102 = concatenate_layer([Glo69205,[[0.0476, 0.5799, 0.8254, 0.2189, 0.7936, 0.7131, 0.7032, 0.2331, 0.7856, 0.1241, 0.4226, 0.0739, 0.771, 0.6919, 0.5563, 0.9465]]], 1, Con18102), 
LMin57526 = minimum_layer([Fla88297,Con18102], Min57526), 
exec_layers([LCon63894,LZer33917,LDep2299,LMul84531,LZer74333,LCon17670,LMax78635,LZer62512,LSub80512,LELU29401,LRes24878,LFla88297,LMul83770,LCon61730,LSub93335,LCro97482,LZer17545,LAdd13718,LRes47954,LGlo69205,LCon18102,LMin57526],["Con63894","Zer33917","Dep2299","Mul84531","Zer74333","Con17670","Max78635","Zer62512","Sub80512","ELU29401","Res24878","Fla88297","Mul83770","Con61730","Sub93335","Cro97482","Zer17545","Add13718","Res47954","Glo69205","Con18102","Min57526"],Min57526,"Min57526")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.8254000, 0.2189000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.7856000, 0.1241000, 0.0000000, 0.0000000, -3.7618321, -4.5360949, -3.9120273, 0.0318633]]

Expected (Unparsed): [[0,0,0,0,0.8254,0.2189,0,0,0,0,0.7856,0.1241,0,0,-3.7618321341751297,-4.536094804724945,-3.9120274403686732,0.03186332]]

Actual:   [[0, 0, 0, 0, 0.8254, 0.2189, 0, 0, 0, 0, 0.7856, 0.1241, 0, 0, -3.7618, -4.536, -3.912, 0.0319]]

Expected: [[0, 0, 0, 0, 0.8254, 0.2189, 0, 0, 0, 0, 0.7856, 0.1241, 0, 0, -3.7618, -4.536, -3.912, 0.0319]]