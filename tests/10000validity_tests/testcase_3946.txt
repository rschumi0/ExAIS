import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min14986 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Min14986 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Dot12622 = tf.keras.layers.Input(shape=([2]))
in1Dot12622 = tf.keras.layers.Input(shape=([2]))
in0Con38883 = tf.keras.layers.Input(shape=([5]))

Min14986 = keras.layers.Minimum(name = 'Min14986', )([in0Min14986,in1Min14986])
Loc70224 = keras.layers.LocallyConnected2D(3, (1, 2),strides=(1, 1), name = 'Loc70224', )(Min14986)
Up_13368 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_13368', )(Loc70224)
Res73088 = keras.layers.Reshape((1, 6), name = 'Res73088', )(Up_13368)
Fla12625 = keras.layers.Flatten(name = 'Fla12625', )(Res73088)
Dot12622 = keras.layers.Dot(axes=(1, 1), name = 'Dot12622', )([in0Dot12622,in1Dot12622])
ELU43562 = keras.layers.ELU(alpha=8.940783469433612, name = 'ELU43562', )(Dot12622)
Con38883 = keras.layers.Concatenate(axis=1, name = 'Con38883', )([ELU43562,in0Con38883])
Min53194 = keras.layers.Minimum(name = 'Min53194', )([Fla12625,Con38883])
model = tf.keras.models.Model(inputs=[in0Min14986,in1Min14986,in0Dot12622,in1Dot12622,in0Con38883], outputs=Min53194)
w = model.get_layer('Loc70224').get_weights() 
w[0] = np.array([[[0.2618, 0.7222, 0.5139], [0.1534, 0.6539, 0.8777], [0.9851, 0.9343, 0.831], [0.7308, 0.3348, 0.7433]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc70224').set_weights(w) 
in0Min14986 = tf.constant([[[[0.984, 0.7727], [0.0205, 0.7336]]]])
in1Min14986 = tf.constant([[[[0.746, 0.1106], [0.3253, 0.7516]]]])
in0Dot12622 = tf.constant([[0.1354, 0.078]])
in1Dot12622 = tf.constant([[0.9594, 0.9312]])
in0Con38883 = tf.constant([[0.0102, 0.5774, 0.2692, 0.7133, 0.362]])
print (np.array2string(model.predict([in0Min14986,in1Min14986,in0Dot12622,in1Dot12622,in0Con38883],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min53194.png')

LMin14986 = minimum_layer([[[[[0.984, 0.7727], [0.0205, 0.7336]]]], [[[[0.746, 0.1106], [0.3253, 0.7516]]]]], Min14986), 
LLoc70224 = locally_connected2D_layer(Min14986, 1, 2,[[[0.2618, 0.7222, 0.5139], [0.1534, 0.6539, 0.8777], [0.9851, 0.9343, 0.831], [0.7308, 0.3348, 0.7433]]],[[[0, 0, 0]]], 1, 1, Loc70224), 
LUp_13368 = up_sampling2D_layer(Loc70224, 1, 2, Up_13368), 
LRes73088 = reshape_layer(Up_13368, [1, 6], Res73088), 
LFla12625 = flatten_layer(Res73088, Fla12625), 
LDot12622 = dot_layer([[0.1354, 0.078]], [[0.9594, 0.9312]], 1, 1, Dot12622), 
LELU43562 = elu_layer(Dot12622, 8.940783469433612, ELU43562), 
LCon38883 = concatenate_layer([ELU43562,[[0.0102, 0.5774, 0.2692, 0.7133, 0.362]]], 1, Con38883), 
LMin53194 = minimum_layer([Fla12625,Con38883], Min53194), 
exec_layers([LMin14986,LLoc70224,LUp_13368,LRes73088,LFla12625,LDot12622,LELU43562,LCon38883,LMin53194],["Min14986","Loc70224","Up_13368","Res73088","Fla12625","Dot12622","ELU43562","Con38883","Min53194"],Min53194,"Min53194")

Actual (Unparsed): [[0.2025364, 0.0102000, 0.5774000, 0.2692000, 0.7133000, 0.3620000]]

Expected (Unparsed): [[0.20253636000000003,0.0102,0.5774,0.2692,0.7133,0.362]]

Actual:   [[0.2026, 0.0102, 0.5774, 0.2692, 0.7133, 0.362]]

Expected: [[0.2026, 0.0102, 0.5774, 0.2692, 0.7133, 0.362]]