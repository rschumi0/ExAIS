import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo44380 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min92769 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min92769 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Sof61341 = tf.keras.layers.Input(shape=([2, 1]))

Glo44380 = keras.layers.GlobalMaxPool2D(name = 'Glo44380', )(in0Glo44380)
Res30121 = keras.layers.Reshape((1, 1), name = 'Res30121', )(Glo44380)
Zer9425 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer9425', )(Res30121)
Min92769 = keras.layers.Minimum(name = 'Min92769', )([in0Min92769,in1Min92769])
Res52509 = keras.layers.Reshape((2, 1), name = 'Res52509', )(Min92769)
Up_20127 = keras.layers.UpSampling1D(size=(2), name = 'Up_20127', )(Res52509)
Add2999 = keras.layers.Add(name = 'Add2999', )([Zer9425,Up_20127])
Sof61341 = keras.layers.Softmax(axis=1, name = 'Sof61341', input_shape=(2, 1))(in0Sof61341)
Zer7157 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer7157', )(Sof61341)
Mul1638 = keras.layers.Multiply(name = 'Mul1638', )([Add2999,Zer7157])
model = tf.keras.models.Model(inputs=[in0Glo44380,in0Min92769,in1Min92769,in0Sof61341], outputs=Mul1638)
in0Glo44380 = tf.constant([[[[1.3558], [1.0991]], [[1.5048], [1.498]]]])
in0Min92769 = tf.constant([[[[0.7916]], [[0.5077]]]])
in1Min92769 = tf.constant([[[[0.5312]], [[0.2738]]]])
in0Sof61341 = tf.constant([[[0.4518], [0.6854]]])
print (np.array2string(model.predict([in0Glo44380,in0Min92769,in1Min92769,in0Sof61341],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul1638.png')

LGlo44380 = global_max_pool2D_layer([[[[1.3558], [1.0991]], [[1.5048], [1.498]]]], Glo44380), 
LRes30121 = reshape_layer(Glo44380, [1, 1], Res30121), 
LZer9425 = zero_padding1D_layer(Res30121, 3, 0, Zer9425), 
LMin92769 = minimum_layer([[[[[0.7916]], [[0.5077]]]], [[[[0.5312]], [[0.2738]]]]], Min92769), 
LRes52509 = reshape_layer(Min92769, [2, 1], Res52509), 
LUp_20127 = up_sampling1D_layer(Res52509, 2, Up_20127), 
LAdd2999 = add_layer([Zer9425,Up_20127], Add2999), 
LSof61341 = softmax_layer([[[0.4518], [0.6854]]], 1, Sof61341), 
LZer7157 = zero_padding1D_layer(Sof61341, 2, 0, Zer7157), 
LMul1638 = multiply_layer([Add2999,Zer7157], Mul1638), 
exec_layers([LGlo44380,LRes30121,LZer9425,LMin92769,LRes52509,LUp_20127,LAdd2999,LSof61341,LZer7157,LMul1638],["Glo44380","Res30121","Zer9425","Min92769","Res52509","Up_20127","Add2999","Sof61341","Zer7157","Mul1638"],Mul1638,"Mul1638")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.1209824], [0.9927004]]]

Expected (Unparsed): [[[0.0],[0.0],[0.12098239816830458],[0.9927004624465064]]]

Actual:   [[[0], [0], [0.121], [0.9928]]]

Expected: [[[0], [0], [0.121], [0.9928]]]