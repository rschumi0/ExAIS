import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave250 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave250 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con96256 = tf.keras.layers.Input(shape=([2, 3, 3]))
in0Ave88780 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave88780 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con41500 = tf.keras.layers.Input(shape=([2, 3, 3]))
in0Ave19708 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave19708 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Sub60768 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub60768 = tf.keras.layers.Input(shape=([2, 3, 3]))
in0Con51477 = tf.keras.layers.Input(shape=([2, 3, 1]))

Ave250 = keras.layers.Average(name = 'Ave250', )([in0Ave250,in1Ave250])
Zer8086 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer8086', )(Ave250)
Con96256 = keras.layers.Concatenate(axis=3, name = 'Con96256', )([Zer8086,in0Con96256])
Ave88780 = keras.layers.Average(name = 'Ave88780', )([in0Ave88780,in1Ave88780])
Zer8198 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer8198', )(Ave88780)
Con41500 = keras.layers.Concatenate(axis=3, name = 'Con41500', )([Zer8198,in0Con41500])
Ave19708 = keras.layers.Average(name = 'Ave19708', )([in0Ave19708,in1Ave19708])
Res96148 = keras.layers.Reshape((2, 2, 4), name = 'Res96148', )(Ave19708)
Cro74970 = keras.layers.Cropping2D(cropping=((1, 0), (1, 0)), name = 'Cro74970', )(Res96148)
Zer20091 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer20091', )(Cro74970)
Sub60768 = keras.layers.Subtract(name = 'Sub60768', )([in0Sub60768,in1Sub60768])
Con51477 = keras.layers.Concatenate(axis=3, name = 'Con51477', )([Sub60768,in0Con51477])
Min85473 = keras.layers.Minimum(name = 'Min85473', )([Zer20091,Con51477])
Mul40183 = keras.layers.Multiply(name = 'Mul40183', )([Con41500,Min85473])
Add5606 = keras.layers.Add(name = 'Add5606', )([Con96256,Mul40183])
model = tf.keras.models.Model(inputs=[in0Ave250,in1Ave250,in0Con96256,in0Ave88780,in1Ave88780,in0Con41500,in0Ave19708,in1Ave19708,in0Sub60768,in1Sub60768,in0Con51477], outputs=Add5606)
in0Ave250 = tf.constant([[[[0.4723]]]])
in1Ave250 = tf.constant([[[[0.1056]]]])
in0Con96256 = tf.constant([[[[0.9329, 0.7934, 0.0019], [0.8812, 0.0579, 0.3561], [0.6435, 0.5351, 0.2932]], [[0.7657, 0.0499, 0.5806], [0.3257, 0.8279, 0.695], [0.5092, 0.3554, 0.1702]]]])
in0Ave88780 = tf.constant([[[[0.0471], [0.9237]]]])
in1Ave88780 = tf.constant([[[[0.8423], [0.5392]]]])
in0Con41500 = tf.constant([[[[0.8052, 0.2759, 0.3097], [0.7171, 0.9564, 0.5327], [0.9768, 0.6815, 0.6527]], [[0.8176, 0.5331, 0.5454], [0.3959, 0.3453, 0.2163], [0.0246, 0.2363, 0.6972]]]])
in0Ave19708 = tf.constant([[[[[0.0822, 0.7179], [0.7289, 0.6826]], [[0.904, 0.379], [0.2448, 0.7221]]], [[[0.1398, 0.4563], [0.9793, 0.9097]], [[0.6611, 0.5199], [0.0213, 0.8127]]]]])
in1Ave19708 = tf.constant([[[[[0.2871, 0.6685], [0.2595, 0.5169]], [[0.6883, 0.2258], [0.1595, 0.2274]]], [[[0.0265, 0.0552], [0.2134, 0.316]], [[0.636, 0.9149], [0.0456, 0.4952]]]]])
in0Sub60768 = tf.constant([[[[0.0986, 0.8028, 0.717], [0.4656, 0.3933, 0.2914], [0.1172, 0.0784, 0.4136]], [[0.4449, 0.4597, 0.7848], [0.034, 0.0255, 0.8023], [0.8988, 0.0835, 0.3459]]]])
in1Sub60768 = tf.constant([[[[0.2029, 0.9944, 0.0361], [0.3073, 0.5919, 0.5755], [0.9632, 0.8721, 0.6913]], [[0.0136, 0.3109, 0.4648], [0.3451, 0.6264, 0.3624], [0.5681, 0.4377, 0.6928]]]])
in0Con51477 = tf.constant([[[[0.2926], [0.9547], [0.3452]], [[0.6714], [0.5261], [0.4349]]]])
print (np.array2string(model.predict([in0Ave250,in1Ave250,in0Con96256,in0Ave88780,in1Ave88780,in0Con41500,in0Ave19708,in1Ave19708,in0Sub60768,in1Sub60768,in0Con51477],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add5606.png')

LAve250 = average_layer([[[[[0.4723]]]], [[[[0.1056]]]]], Ave250), 
LZer8086 = zero_padding2D_layer(Ave250, 1, 0, 2, 0, Zer8086), 
LCon96256 = concatenate_layer([Zer8086,[[[[0.9329, 0.7934, 0.0019], [0.8812, 0.0579, 0.3561], [0.6435, 0.5351, 0.2932]], [[0.7657, 0.0499, 0.5806], [0.3257, 0.8279, 0.695], [0.5092, 0.3554, 0.1702]]]]], 3, Con96256), 
LAve88780 = average_layer([[[[[0.0471], [0.9237]]]], [[[[0.8423], [0.5392]]]]], Ave88780), 
LZer8198 = zero_padding2D_layer(Ave88780, 1, 0, 1, 0, Zer8198), 
LCon41500 = concatenate_layer([Zer8198,[[[[0.8052, 0.2759, 0.3097], [0.7171, 0.9564, 0.5327], [0.9768, 0.6815, 0.6527]], [[0.8176, 0.5331, 0.5454], [0.3959, 0.3453, 0.2163], [0.0246, 0.2363, 0.6972]]]]], 3, Con41500), 
LAve19708 = average_layer([[[[[[0.0822, 0.7179], [0.7289, 0.6826]], [[0.904, 0.379], [0.2448, 0.7221]]], [[[0.1398, 0.4563], [0.9793, 0.9097]], [[0.6611, 0.5199], [0.0213, 0.8127]]]]], [[[[[0.2871, 0.6685], [0.2595, 0.5169]], [[0.6883, 0.2258], [0.1595, 0.2274]]], [[[0.0265, 0.0552], [0.2134, 0.316]], [[0.636, 0.9149], [0.0456, 0.4952]]]]]], Ave19708), 
LRes96148 = reshape_layer(Ave19708, [2, 2, 4], Res96148), 
LCro74970 = cropping2D_layer(Res96148, 1, 0, 1, 0, Cro74970), 
LZer20091 = zero_padding2D_layer(Cro74970, 1, 0, 2, 0, Zer20091), 
LSub60768 = subtract_layer([[[[0.0986, 0.8028, 0.717], [0.4656, 0.3933, 0.2914], [0.1172, 0.0784, 0.4136]], [[0.4449, 0.4597, 0.7848], [0.034, 0.0255, 0.8023], [0.8988, 0.0835, 0.3459]]]], [[[[0.2029, 0.9944, 0.0361], [0.3073, 0.5919, 0.5755], [0.9632, 0.8721, 0.6913]], [[0.0136, 0.3109, 0.4648], [0.3451, 0.6264, 0.3624], [0.5681, 0.4377, 0.6928]]]], Sub60768), 
LCon51477 = concatenate_layer([Sub60768,[[[[0.2926], [0.9547], [0.3452]], [[0.6714], [0.5261], [0.4349]]]]], 3, Con51477), 
LMin85473 = minimum_layer([Zer20091,Con51477], Min85473), 
LMul40183 = multiply_layer([Con41500,Min85473], Mul40183), 
LAdd5606 = add_layer([Con96256,Mul40183], Add5606), 
exec_layers([LAve250,LZer8086,LCon96256,LAve88780,LZer8198,LCon41500,LAve19708,LRes96148,LCro74970,LZer20091,LSub60768,LCon51477,LMin85473,LMul40183,LAdd5606],["Ave250","Zer8086","Con96256","Ave88780","Zer8198","Con41500","Ave19708","Res96148","Cro74970","Zer20091","Sub60768","Con51477","Min85473","Mul40183","Add5606"],Add5606,"Add5606")

Actual (Unparsed): [[[[0.0000000, 0.7786237, 0.7934000, 0.0019000], [0.0000000, 0.7387840, -0.2138133, 0.3561000], [0.0000000, -0.1317862, 0.3458474, 0.2932000]], [[0.0000000, 0.7657000, 0.0499000, 0.5806000], [-0.1383462, 0.0878037, 0.8279000, 0.6950000], [0.5308405, 0.5004867, 0.2734275, 0.4734123]]]]

Expected (Unparsed): [[[[0.0,0.7786236799999999,0.7934,0.0019],[0,0.73878394,-0.21381324000000002,0.3561],[0.0,-0.13178615999999999,0.34584745000000006,0.2932]],[[0,0.7657,0.0499,0.5806],[-0.13834617000000002,0.08780369000000002,0.8279,0.695],[0.530840515,0.50048668,0.27342753,0.47341228]]]]

Actual:   [[[[0, 0.7787, 0.7934, 0.0019], [0, 0.7388, -0.2138, 0.3561], [0, -0.1317, 0.3459, 0.2932]], [[0, 0.7657, 0.0499, 0.5806], [-0.1383, 0.0879, 0.8279, 0.695], [0.5309, 0.5005, 0.2735, 0.4735]]]]

Expected: [[[[0, 0.7787, 0.7934, 0.0019], [0, 0.7388, -0.2138, 0.3561], [0, -0.1317, 0.3459, 0.2932]], [[0, 0.7657, 0.0499, 0.5806], [-0.1383, 0.0879, 0.8279, 0.695], [0.5309, 0.5005, 0.2735, 0.4735]]]]