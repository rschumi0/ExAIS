import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add49932 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add49932 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Glo42511 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Con63650 = tf.keras.layers.Input(shape=([2, 2]))
in0Ave19430 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Ave19430 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))

Add49932 = keras.layers.Add(name = 'Add49932', )([in0Add49932,in1Add49932])
Cro92553 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro92553', )(Add49932)
Res90331 = keras.layers.Reshape((1, 2), name = 'Res90331', )(Cro92553)
Fla23979 = keras.layers.Flatten(name = 'Fla23979', )(Res90331)
Glo42511 = keras.layers.GlobalMaxPool3D(name = 'Glo42511', )(in0Glo42511)
Min54108 = keras.layers.Minimum(name = 'Min54108', )([Fla23979,Glo42511])
Res82831 = keras.layers.Reshape((2, 1), name = 'Res82831', )(Min54108)
Con63650 = keras.layers.Concatenate(axis=2, name = 'Con63650', )([Res82831,in0Con63650])
Ave19430 = keras.layers.Average(name = 'Ave19430', )([in0Ave19430,in1Ave19430])
Res83396 = keras.layers.Reshape((2, 2, 2), name = 'Res83396', )(Ave19430)
Up_83925 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_83925', )(Res83396)
Res563 = keras.layers.Reshape((2, 4), name = 'Res563', )(Up_83925)
Loc64623 = keras.layers.LocallyConnected1D(3, (2),strides=(1), name = 'Loc64623', )(Res563)
Zer51132 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer51132', )(Loc64623)
Add77208 = keras.layers.Add(name = 'Add77208', )([Con63650,Zer51132])
model = tf.keras.models.Model(inputs=[in0Add49932,in1Add49932,in0Glo42511,in0Con63650,in0Ave19430,in1Ave19430], outputs=Add77208)
w = model.get_layer('Loc64623').get_weights() 
w[0] = np.array([[[0.444, 0.7608, 0.1022], [0.4774, 0.0258, 0.6196], [0.6226, 0.2234, 0.1572], [0.2968, 0.784, 0.7158], [0.411, 0.5075, 0.2388], [0.5341, 0.8806, 0.3706], [0.6604, 0.129, 0.7159], [0.2055, 0.8954, 0.3592]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc64623').set_weights(w) 
in0Add49932 = tf.constant([[[[0.4552, 0.3735]]]])
in1Add49932 = tf.constant([[[[0.0055, 0.9253]]]])
in0Glo42511 = tf.constant([[[[[1.7872, 1.5458]], [[1.9621, 1.0647]]], [[[1.906, 1.8365]], [[1.5867, 1.1382]]]]])
in0Con63650 = tf.constant([[[0.1403, 0.3593], [0.5995, 0.3358]]])
in0Ave19430 = tf.constant([[[[[0.4908, 0.4707]], [[0.1115, 0.7134]]], [[[0.9988, 0.9641]], [[0.9682, 0.8096]]]]])
in1Ave19430 = tf.constant([[[[[0.3263, 0.0761]], [[0.5843, 0.4018]]], [[[0.6927, 0.384]], [[0.0653, 0.4816]]]]])
print (np.array2string(model.predict([in0Add49932,in1Add49932,in0Glo42511,in0Con63650,in0Ave19430,in1Ave19430],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add77208.png')

LAdd49932 = add_layer([[[[[0.4552, 0.3735]]]], [[[[0.0055, 0.9253]]]]], Add49932), 
LCro92553 = cropping2D_layer(Add49932, 0, 0, 0, 0, Cro92553), 
LRes90331 = reshape_layer(Cro92553, [1, 2], Res90331), 
LFla23979 = flatten_layer(Res90331, Fla23979), 
LGlo42511 = global_max_pool3D_layer([[[[[1.7872, 1.5458]], [[1.9621, 1.0647]]], [[[1.906, 1.8365]], [[1.5867, 1.1382]]]]], Glo42511), 
LMin54108 = minimum_layer([Fla23979,Glo42511], Min54108), 
LRes82831 = reshape_layer(Min54108, [2, 1], Res82831), 
LCon63650 = concatenate_layer([Res82831,[[[0.1403, 0.3593], [0.5995, 0.3358]]]], 2, Con63650), 
LAve19430 = average_layer([[[[[[0.4908, 0.4707]], [[0.1115, 0.7134]]], [[[0.9988, 0.9641]], [[0.9682, 0.8096]]]]], [[[[[0.3263, 0.0761]], [[0.5843, 0.4018]]], [[[0.6927, 0.384]], [[0.0653, 0.4816]]]]]], Ave19430), 
LRes83396 = reshape_layer(Ave19430, [2, 2, 2], Res83396), 
LUp_83925 = up_sampling2D_layer(Res83396, 1, 1, Up_83925), 
LRes563 = reshape_layer(Up_83925, [2, 4], Res563), 
LLoc64623 = locally_connected1D_layer(Res563, 2,[[[0.444, 0.7608, 0.1022], [0.4774, 0.0258, 0.6196], [0.6226, 0.2234, 0.1572], [0.2968, 0.784, 0.7158], [0.411, 0.5075, 0.2388], [0.5341, 0.8806, 0.3706], [0.6604, 0.129, 0.7159], [0.2055, 0.8954, 0.3592]]],[[0, 0, 0]], 1, Loc64623), 
LZer51132 = zero_padding1D_layer(Loc64623, 1, 0, Zer51132), 
LAdd77208 = add_layer([Con63650,Zer51132], Add77208), 
exec_layers([LAdd49932,LCro92553,LRes90331,LFla23979,LGlo42511,LMin54108,LRes82831,LCon63650,LAve19430,LRes83396,LUp_83925,LRes563,LLoc64623,LZer51132,LAdd77208],["Add49932","Cro92553","Res90331","Fla23979","Glo42511","Min54108","Res82831","Con63650","Ave19430","Res83396","Up_83925","Res563","Loc64623","Zer51132","Add77208"],Add77208,"Add77208")

Actual (Unparsed): [[[0.4607000, 0.1403000, 0.3593000], [3.1743614, 3.0997754, 2.0543813]]]

Expected (Unparsed): [[[0.4607,0.1403,0.3593],[3.174361435,3.099775365,2.054381285]]]

Actual:   [[[0.4607, 0.1403, 0.3593], [3.1744, 3.0998, 2.0544]]]

Expected: [[[0.4607, 0.1403, 0.3593], [3.1744, 3.0998, 2.0544]]]