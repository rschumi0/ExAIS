import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lea64676 = tf.keras.layers.Input(shape=([2, 2]))

Lea64676 = keras.layers.LeakyReLU(alpha=1.4678058442047643, name = 'Lea64676', input_shape=(2, 2))(in0Lea64676)
Up_75170 = keras.layers.UpSampling1D(size=(1), name = 'Up_75170', )(Lea64676)
Glo1044 = keras.layers.GlobalMaxPool1D(name = 'Glo1044', )(Up_75170)
Res54750 = keras.layers.Reshape((2, 1), name = 'Res54750', )(Glo1044)
Loc58031 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc58031', )(Res54750)
model = tf.keras.models.Model(inputs=[in0Lea64676], outputs=Loc58031)
w = model.get_layer('Loc58031').get_weights() 
w[0] = np.array([[[0.3399, 0.404, 0.5872, 0.4341]], [[0.3174, 0.7705, 0.0833, 0.6729]]])
w[1] = np.array([[0, 0, 0, 0], [0, 0, 0, 0]])
model.get_layer('Loc58031').set_weights(w) 
in0Lea64676 = tf.constant([[[0.8218, 0.9113], [0.9171, 0.1647]]])
print (np.array2string(model.predict([in0Lea64676],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc58031.png')

LLea64676 = leaky_relu_layer([[[0.8218, 0.9113], [0.9171, 0.1647]]], 1.4678058442047643, Lea64676), 
LUp_75170 = up_sampling1D_layer(Lea64676, 1, Up_75170), 
LGlo1044 = global_max_pool1D_layer(Up_75170, Glo1044), 
LRes54750 = reshape_layer(Glo1044, [2, 1], Res54750), 
LLoc58031 = locally_connected1D_layer(Res54750, 1,[[[0.3399, 0.404, 0.5872, 0.4341]], [[0.3174, 0.7705, 0.0833, 0.6729]]],[[0, 0, 0, 0], [0, 0, 0, 0]], 1, Loc58031), 
exec_layers([LLea64676,LUp_75170,LGlo1044,LRes54750,LLoc58031],["Lea64676","Up_75170","Glo1044","Res54750","Loc58031"],Loc58031,"Loc58031")

Actual (Unparsed): [[[0.3117223, 0.3705084, 0.5385211, 0.3981131], [0.2892466, 0.7021567, 0.0759113, 0.6132138]]]

Expected (Unparsed): [[[0.31172229,0.3705084,0.5385211200000001,0.39811311],[0.28924662,0.7021566499999999,0.07591128999999999,0.6132137700000001]]]

Actual:   [[[0.3118, 0.3706, 0.5386, 0.3982], [0.2893, 0.7022, 0.076, 0.6133]]]

Expected: [[[0.3118, 0.3706, 0.5386, 0.3982], [0.2893, 0.7022, 0.076, 0.6133]]]