import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave97219 = tf.keras.layers.Input(shape=([1, 2]))
in0Con55553 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min43280 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Min43280 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave97219 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave97219', )(in0Ave97219)
Per17833 = keras.layers.Permute((1,2), name = 'Per17833',)(Ave97219)
Res70652 = keras.layers.Reshape((1, 2, 1), name = 'Res70652', )(Per17833)
Zer30632 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer30632', )(Res70652)
Con55553 = keras.layers.Concatenate(axis=3, name = 'Con55553', )([Zer30632,in0Con55553])
Min43280 = keras.layers.Minimum(name = 'Min43280', )([in0Min43280,in1Min43280])
Max72868 = keras.layers.Maximum(name = 'Max72868', )([Con55553,Min43280])
model = tf.keras.models.Model(inputs=[in0Ave97219,in0Con55553,in0Min43280,in1Min43280], outputs=Max72868)
in0Ave97219 = tf.constant([[[1.3438, 1.4481]]])
in0Con55553 = tf.constant([[[[0.3763], [0.521]], [[0.7168], [0.9185]]]])
in0Min43280 = tf.constant([[[[0.2169, 0.0575], [0.0347, 0.6196]], [[0.962, 0.9553], [0.451, 0.8092]]]])
in1Min43280 = tf.constant([[[[0.1886, 0.4258], [0.7757, 0.4606]], [[0.3519, 0.0097], [0.5845, 0.1644]]]])
print (np.array2string(model.predict([in0Ave97219,in0Con55553,in0Min43280,in1Min43280],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max72868.png')

LAve97219 = average_pooling1D_layer([[[1.3438, 1.4481]]], 1, 1, false, Ave97219), 
LPer17833 = permute_layer(Ave97219, 1,2, Per17833), 
LRes70652 = reshape_layer(Per17833, [1, 2, 1], Res70652), 
LZer30632 = zero_padding2D_layer(Res70652, 1, 0, 0, 0, Zer30632), 
LCon55553 = concatenate_layer([Zer30632,[[[[0.3763], [0.521]], [[0.7168], [0.9185]]]]], 3, Con55553), 
LMin43280 = minimum_layer([[[[[0.2169, 0.0575], [0.0347, 0.6196]], [[0.962, 0.9553], [0.451, 0.8092]]]], [[[[0.1886, 0.4258], [0.7757, 0.4606]], [[0.3519, 0.0097], [0.5845, 0.1644]]]]], Min43280), 
LMax72868 = maximum_layer([Con55553,Min43280], Max72868), 
exec_layers([LAve97219,LPer17833,LRes70652,LZer30632,LCon55553,LMin43280,LMax72868],["Ave97219","Per17833","Res70652","Zer30632","Con55553","Min43280","Max72868"],Max72868,"Max72868")

Actual (Unparsed): [[[[0.1886000, 0.3763000], [0.0347000, 0.5210000]], [[1.3437999, 0.7168000], [1.4481000, 0.9185000]]]]

Expected (Unparsed): [[[[0.1886,0.3763],[0.0347,0.521]],[[1.3438,0.7168],[1.4481,0.9185]]]]

Actual:   [[[[0.1886, 0.3763], [0.0347, 0.521]], [[1.3438, 0.7168], [1.4481, 0.9185]]]]

Expected: [[[[0.1886, 0.3763], [0.0347, 0.521]], [[1.3438, 0.7168], [1.4481, 0.9185]]]]