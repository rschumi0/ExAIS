import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min90233 = tf.keras.layers.Input(shape=([1, 2]))
in1Min90233 = tf.keras.layers.Input(shape=([1, 2]))
in0Con74863 = tf.keras.layers.Input(shape=([6]))
in0Dot33721 = tf.keras.layers.Input(shape=([3]))
in1Dot33721 = tf.keras.layers.Input(shape=([3]))
in0Con95391 = tf.keras.layers.Input(shape=([2, 2, 3]))
in0Add62356 = tf.keras.layers.Input(shape=([2, 2]))
in1Add62356 = tf.keras.layers.Input(shape=([2, 2]))

Min90233 = keras.layers.Minimum(name = 'Min90233', )([in0Min90233,in1Min90233])
Fla27131 = keras.layers.Flatten(name = 'Fla27131', )(Min90233)
Con74863 = keras.layers.Concatenate(axis=1, name = 'Con74863', )([Fla27131,in0Con74863])
Dot33721 = keras.layers.Dot(axes=(1, 1), name = 'Dot33721', )([in0Dot33721,in1Dot33721])
Res1003 = keras.layers.Reshape((1, 1), name = 'Res1003', )(Dot33721)
Res90315 = keras.layers.Reshape((1, 1, 1), name = 'Res90315', )(Res1003)
Zer63821 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer63821', )(Res90315)
Con95391 = keras.layers.Concatenate(axis=3, name = 'Con95391', )([Zer63821,in0Con95391])
Add62356 = keras.layers.Add(name = 'Add62356', )([in0Add62356,in1Add62356])
Res10486 = keras.layers.Reshape((2, 2, 1), name = 'Res10486', )(Add62356)
Loc67946 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(1, 1), name = 'Loc67946', )(Res10486)
Add71490 = keras.layers.Add(name = 'Add71490', )([Con95391,Loc67946])
Res85036 = keras.layers.Reshape((2, 8), name = 'Res85036', )(Add71490)
Glo8580 = keras.layers.GlobalMaxPool1D(name = 'Glo8580', )(Res85036)
Min36114 = keras.layers.Minimum(name = 'Min36114', )([Con74863,Glo8580])
model = tf.keras.models.Model(inputs=[in0Min90233,in1Min90233,in0Con74863,in0Dot33721,in1Dot33721,in0Con95391,in0Add62356,in1Add62356], outputs=Min36114)
w = model.get_layer('Loc67946').get_weights() 
w[0] = np.array([[[0.5091, 0.667, 0.9839, 0.7446]], [[0.6973, 0.208, 0.6944, 0.6718]], [[0.1812, 0.9284, 0.7146, 0.2117]], [[0.6607, 0.7274, 0.9494, 0.718]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc67946').set_weights(w) 
in0Min90233 = tf.constant([[[0.12, 0.4266]]])
in1Min90233 = tf.constant([[[0.7247, 0.5432]]])
in0Con74863 = tf.constant([[0.2042, 0.3699, 0.2042, 0.265, 0.7687, 0.0193]])
in0Dot33721 = tf.constant([[0.8926, 0.2588, 0.6161]])
in1Dot33721 = tf.constant([[0.9782, 0.1211, 0.6333]])
in0Con95391 = tf.constant([[[[0.4512, 0.0097, 0.7855], [0.0904, 0.6668, 0.2613]], [[0.537, 0.4676, 0.4376], [0.1905, 0.7241, 0.6031]]]])
in0Add62356 = tf.constant([[[0.0525, 0.2614], [0.9626, 0.8661]]])
in1Add62356 = tf.constant([[[0.4073, 0.3347], [0.8311, 0.4596]]])
print (np.array2string(model.predict([in0Min90233,in1Min90233,in0Con74863,in0Dot33721,in1Dot33721,in0Con95391,in0Add62356,in1Add62356],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min36114.png')

LMin90233 = minimum_layer([[[[0.12, 0.4266]]], [[[0.7247, 0.5432]]]], Min90233), 
LFla27131 = flatten_layer(Min90233, Fla27131), 
LCon74863 = concatenate_layer([Fla27131,[[0.2042, 0.3699, 0.2042, 0.265, 0.7687, 0.0193]]], 1, Con74863), 
LDot33721 = dot_layer([[0.8926, 0.2588, 0.6161]], [[0.9782, 0.1211, 0.6333]], 1, 1, Dot33721), 
LRes1003 = reshape_layer(Dot33721, [1, 1], Res1003), 
LRes90315 = reshape_layer(Res1003, [1, 1, 1], Res90315), 
LZer63821 = zero_padding2D_layer(Res90315, 1, 0, 1, 0, Zer63821), 
LCon95391 = concatenate_layer([Zer63821,[[[[0.4512, 0.0097, 0.7855], [0.0904, 0.6668, 0.2613]], [[0.537, 0.4676, 0.4376], [0.1905, 0.7241, 0.6031]]]]], 3, Con95391), 
LAdd62356 = add_layer([[[[0.0525, 0.2614], [0.9626, 0.8661]]], [[[0.4073, 0.3347], [0.8311, 0.4596]]]], Add62356), 
LRes10486 = reshape_layer(Add62356, [2, 2, 1], Res10486), 
LLoc67946 = locally_connected2D_layer(Res10486, 1, 1,[[[0.5091, 0.667, 0.9839, 0.7446]], [[0.6973, 0.208, 0.6944, 0.6718]], [[0.1812, 0.9284, 0.7146, 0.2117]], [[0.6607, 0.7274, 0.9494, 0.718]]],[[[0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0]]], 1, 1, Loc67946), 
LAdd71490 = add_layer([Con95391,Loc67946], Add71490), 
LRes85036 = reshape_layer(Add71490, [2, 8], Res85036), 
LGlo8580 = global_max_pool1D_layer(Res85036, Glo8580), 
LMin36114 = minimum_layer([Con74863,Glo8580], Min36114), 
exec_layers([LMin90233,LFla27131,LCon74863,LDot33721,LRes1003,LRes90315,LZer63821,LCon95391,LAdd62356,LRes10486,LLoc67946,LAdd71490,LRes85036,LGlo8580,LMin36114],["Min90233","Fla27131","Con74863","Dot33721","Res1003","Res90315","Zer63821","Con95391","Add62356","Res10486","Loc67946","Add71490","Res85036","Glo8580","Min36114"],Min36114,"Min36114")

Actual (Unparsed): [[0.1200000, 0.4266000, 0.2042000, 0.3699000, 0.2042000, 0.2650000, 0.7687000, 0.0193000]]

Expected (Unparsed): [[0.12,0.4266,0.2042,0.3699,0.2042,0.265,0.7687,0.0193]]

Actual:   [[0.12, 0.4266, 0.2042, 0.3699, 0.2042, 0.265, 0.7687, 0.0193]]

Expected: [[0.12, 0.4266, 0.2042, 0.3699, 0.2042, 0.265, 0.7687, 0.0193]]