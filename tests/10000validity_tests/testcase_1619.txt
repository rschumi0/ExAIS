import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max41514 = tf.keras.layers.Input(shape=([2, 2]))
in0Con69805 = tf.keras.layers.Input(shape=([2]))
in0Dot15658 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot15658 = tf.keras.layers.Input(shape=([3, 3]))
in0Min73457 = tf.keras.layers.Input(shape=([2, 1]))
in1Min73457 = tf.keras.layers.Input(shape=([2, 1]))

Max41514 = keras.layers.MaxPool1D(pool_size=(1), strides=(2), padding='same', name = 'Max41514', )(in0Max41514)
Up_75680 = keras.layers.UpSampling1D(size=(1), name = 'Up_75680', )(Max41514)
Res45045 = keras.layers.Reshape((1, 2, 1), name = 'Res45045', )(Up_75680)
Max46449 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max46449', )(Res45045)
Res73865 = keras.layers.Reshape((1, 1), name = 'Res73865', )(Max46449)
Fla1933 = keras.layers.Flatten(name = 'Fla1933', )(Res73865)
Con69805 = keras.layers.Concatenate(axis=1, name = 'Con69805', )([Fla1933,in0Con69805])
Dot15658 = keras.layers.Dot(axes=(1, 1), name = 'Dot15658', )([in0Dot15658,in1Dot15658])
Glo44498 = keras.layers.GlobalMaxPool1D(name = 'Glo44498', )(Dot15658)
Max72313 = keras.layers.Maximum(name = 'Max72313', )([Con69805,Glo44498])
Res2018 = keras.layers.Reshape((3, 1), name = 'Res2018', )(Max72313)
Min73457 = keras.layers.Minimum(name = 'Min73457', )([in0Min73457,in1Min73457])
Zer23536 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer23536', )(Min73457)
Max48292 = keras.layers.Maximum(name = 'Max48292', )([Res2018,Zer23536])
model = tf.keras.models.Model(inputs=[in0Max41514,in0Con69805,in0Dot15658,in1Dot15658,in0Min73457,in1Min73457], outputs=Max48292)
in0Max41514 = tf.constant([[[1.4957, 1.6515], [1.9472, 1.7331]]])
in0Con69805 = tf.constant([[0.3385, 0.2032]])
in0Dot15658 = tf.constant([[[0.4851, 0.5354, 0.6059], [0.4096, 0.8019, 0.4997], [0.2768, 0.7528, 0.3962]]])
in1Dot15658 = tf.constant([[[0.7277, 0.1002, 0.3164], [0.5047, 0.2246, 0.5356], [0.0208, 0.5832, 0.2919]]])
in0Min73457 = tf.constant([[[0.7921], [0.6579]]])
in1Min73457 = tf.constant([[[0.0319], [0.3003]]])
print (np.array2string(model.predict([in0Max41514,in0Con69805,in0Dot15658,in1Dot15658,in0Min73457,in1Min73457],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max48292.png')

LMax41514 = max_pool1D_layer([[[1.4957, 1.6515], [1.9472, 1.7331]]], 1, 2, true, Max41514), 
LUp_75680 = up_sampling1D_layer(Max41514, 1, Up_75680), 
LRes45045 = reshape_layer(Up_75680, [1, 2, 1], Res45045), 
LMax46449 = max_pool2D_layer(Res45045, 1, 2, Max46449), 
LRes73865 = reshape_layer(Max46449, [1, 1], Res73865), 
LFla1933 = flatten_layer(Res73865, Fla1933), 
LCon69805 = concatenate_layer([Fla1933,[[0.3385, 0.2032]]], 1, Con69805), 
LDot15658 = dot_layer([[[0.4851, 0.5354, 0.6059], [0.4096, 0.8019, 0.4997], [0.2768, 0.7528, 0.3962]]], [[[0.7277, 0.1002, 0.3164], [0.5047, 0.2246, 0.5356], [0.0208, 0.5832, 0.2919]]], 1, 1, Dot15658), 
LGlo44498 = global_max_pool1D_layer(Dot15658, Glo44498), 
LMax72313 = maximum_layer([Con69805,Glo44498], Max72313), 
LRes2018 = reshape_layer(Max72313, [3, 1], Res2018), 
LMin73457 = minimum_layer([[[[0.7921], [0.6579]]], [[[0.0319], [0.3003]]]], Min73457), 
LZer23536 = zero_padding1D_layer(Min73457, 1, 0, Zer23536), 
LMax48292 = maximum_layer([Res2018,Zer23536], Max48292), 
exec_layers([LMax41514,LUp_75680,LRes45045,LMax46449,LRes73865,LFla1933,LCon69805,LDot15658,LGlo44498,LMax72313,LRes2018,LMin73457,LZer23536,LMax48292],["Max41514","Up_75680","Res45045","Max46449","Res73865","Fla1933","Con69805","Dot15658","Glo44498","Max72313","Res2018","Min73457","Zer23536","Max48292"],Max48292,"Max48292")

Actual (Unparsed): [[[1.6515000], [0.6727868], [0.8186405]]]

Expected (Unparsed): [[[1.6515],[0.67278678],[0.81864052]]]

Actual:   [[[1.6515], [0.6728], [0.8187]]]

Expected: [[[1.6515], [0.6728], [0.8187]]]