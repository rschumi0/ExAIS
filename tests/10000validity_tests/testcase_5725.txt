import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep13802 = tf.keras.layers.Input(shape=([1, 2]))
in0Max50938 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max50938 = tf.keras.layers.Input(shape=([1, 2, 2]))

Sep13802 = keras.layers.SeparableConv1D(3, (1),strides=(1), padding='valid', name = 'Sep13802', )(in0Sep13802)
Res75966 = keras.layers.Reshape((1, 3, 1), name = 'Res75966', )(Sep13802)
Res19496 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res19496', )(Res75966)
Up_37928 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_37928', )(Res19496)
Res21937 = keras.layers.Reshape((2, 3, 1), name = 'Res21937', )(Up_37928)
Sep27779 = keras.layers.SeparableConv2D(2, (2, 3),strides=(2, 2), padding='same', name = 'Sep27779', )(Res21937)
Res9799 = keras.layers.Reshape((1, 4), name = 'Res9799', )(Sep27779)
Max50938 = keras.layers.Maximum(name = 'Max50938', )([in0Max50938,in1Max50938])
Res75124 = keras.layers.Reshape((1, 4), name = 'Res75124', )(Max50938)
Dot34068 = keras.layers.Dot(axes=(2, 2), name = 'Dot34068', )([Res9799,Res75124])
model = tf.keras.models.Model(inputs=[in0Sep13802,in0Max50938,in1Max50938], outputs=Dot34068)
w = model.get_layer('Sep13802').get_weights() 
w[0] = np.array([[[0.7331], [0.1563]]])
w[1] = np.array([[[0.567, 0.6622, 0.599], [0.2107, 0.7546, 0.8774]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep13802').set_weights(w) 
w = model.get_layer('Sep27779').get_weights() 
w[0] = np.array([[[[0.4945]], [[0.659]], [[0.2161]]], [[[0.9176]], [[0.7745]], [[0.2782]]]])
w[1] = np.array([[[[0.8775, 0.1077]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep27779').set_weights(w) 
in0Sep13802 = tf.constant([[[0.8695, 0.6916]]])
in0Max50938 = tf.constant([[[[0.7598, 0.3103], [0.6068, 0.6851]]]])
in1Max50938 = tf.constant([[[[0.0609, 0.1978], [0.6765, 0.2823]]]])
print (np.array2string(model.predict([in0Sep13802,in0Max50938,in1Max50938],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot34068.png')

LSep13802 = separable_conv1D_layer([[[0.8695, 0.6916]]], 1,[[[[0.7331], [0.1563]]],[[[0.567, 0.6622, 0.599], [0.2107, 0.7546, 0.8774]]]],[0, 0, 0], 1, false, Sep13802), 
LRes75966 = reshape_layer(Sep13802, [1, 3, 1], Res75966), 
LRes19496 = reshape_layer(Res75966, [1, 3, 1, 1], Res19496), 
LUp_37928 = up_sampling3D_layer(Res19496, 2, 1, 1, Up_37928), 
LRes21937 = reshape_layer(Up_37928, [2, 3, 1], Res21937), 
LSep27779 = separable_conv2D_layer(Res21937, 2, 3,[[[[[0.4945]], [[0.659]], [[0.2161]]], [[[0.9176]], [[0.7745]], [[0.2782]]]],[[[[0.8775, 0.1077]]]]],[0, 0], 2, 2, true, Sep27779), 
LRes9799 = reshape_layer(Sep27779, [1, 4], Res9799), 
LMax50938 = maximum_layer([[[[[0.7598, 0.3103], [0.6068, 0.6851]]]], [[[[0.0609, 0.1978], [0.6765, 0.2823]]]]], Max50938), 
LRes75124 = reshape_layer(Max50938, [1, 4], Res75124), 
LDot34068 = dot_layer(Res9799,Res75124, 2, 2, Dot34068), 
exec_layers([LSep13802,LRes75966,LRes19496,LUp_37928,LRes21937,LSep27779,LRes9799,LMax50938,LRes75124,LDot34068],["Sep13802","Res75966","Res19496","Up_37928","Res21937","Sep27779","Res9799","Max50938","Res75124","Dot34068"],Dot34068,"Dot34068")

Actual (Unparsed): [[[1.4906531]]]

Expected (Unparsed): [[[1.4906530522768646]]]

Actual:   [[[1.4907]]]

Expected: [[[1.4907]]]