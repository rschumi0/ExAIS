import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave58520 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Ave58520 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Ave58520 = keras.layers.Average(name = 'Ave58520', )([in0Ave58520,in1Ave58520])
Res91505 = keras.layers.Reshape((1, 2, 2), name = 'Res91505', )(Ave58520)
Max20434 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max20434', )(Res91505)
Res98049 = keras.layers.Reshape((1, 4), name = 'Res98049', )(Max20434)
Per56572 = keras.layers.Permute((2,1), name = 'Per56572',)(Res98049)
model = tf.keras.models.Model(inputs=[in0Ave58520,in1Ave58520], outputs=Per56572)
in0Ave58520 = tf.constant([[[[[0.022, 0.8352]], [[0.4137, 0.923]]]]])
in1Ave58520 = tf.constant([[[[[0.3513, 0.2777]], [[0.3119, 0.9594]]]]])
print (np.array2string(model.predict([in0Ave58520,in1Ave58520],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per56572.png')

LAve58520 = average_layer([[[[[[0.022, 0.8352]], [[0.4137, 0.923]]]]], [[[[[0.3513, 0.2777]], [[0.3119, 0.9594]]]]]], Ave58520), 
LRes91505 = reshape_layer(Ave58520, [1, 2, 2], Res91505), 
LMax20434 = max_pool2D_layer(Res91505, 1, 1, Max20434), 
LRes98049 = reshape_layer(Max20434, [1, 4], Res98049), 
LPer56572 = permute_layer(Res98049, 2,1, Per56572), 
exec_layers([LAve58520,LRes91505,LMax20434,LRes98049,LPer56572],["Ave58520","Res91505","Max20434","Res98049","Per56572"],Per56572,"Per56572")

Actual (Unparsed): [[[0.1866500], [0.5564500], [0.3628000], [0.9412000]]]

Expected (Unparsed): [[[0.18665],[0.55645],[0.3628],[0.9412]]]

Actual:   [[[0.1867], [0.5565], [0.3628], [0.9412]]]

Expected: [[[0.1867], [0.5565], [0.3628], [0.9412]]]