import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul72427 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Mul72427 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con64225 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Ave23115 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave23115 = tf.keras.layers.Input(shape=([2, 2, 2]))

Mul72427 = keras.layers.Multiply(name = 'Mul72427', )([in0Mul72427,in1Mul72427])
Res80373 = keras.layers.Reshape((1, 1, 1), name = 'Res80373', )(Mul72427)
Up_7253 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_7253', )(Res80373)
Zer666 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer666', )(Up_7253)
Con64225 = keras.layers.Concatenate(axis=3, name = 'Con64225', )([Zer666,in0Con64225])
Ave23115 = keras.layers.Average(name = 'Ave23115', )([in0Ave23115,in1Ave23115])
Cro43190 = keras.layers.Cropping2D(cropping=((0, 0), (0, 1)), name = 'Cro43190', )(Ave23115)
Add93658 = keras.layers.Add(name = 'Add93658', )([Con64225,Cro43190])
Mas69805 = keras.layers.Masking(mask_value=1, name = 'Mas69805', )(Add93658)
model = tf.keras.models.Model(inputs=[in0Mul72427,in1Mul72427,in0Con64225,in0Ave23115,in1Ave23115], outputs=Mas69805)
in0Mul72427 = tf.constant([[[[[0.0071]]]]])
in1Mul72427 = tf.constant([[[[[0.187]]]]])
in0Con64225 = tf.constant([[[[0.3785]], [[0.4695]]]])
in0Ave23115 = tf.constant([[[[0.7731, 0.5847], [0.9401, 0.5485]], [[0.2099, 0.2376], [0.0174, 0.5679]]]])
in1Ave23115 = tf.constant([[[[0.5608, 0.7585], [0.6292, 0.7467]], [[0.7138, 0.0298], [0.0612, 0.8298]]]])
print (np.array2string(model.predict([in0Mul72427,in1Mul72427,in0Con64225,in0Ave23115,in1Ave23115],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas69805.png')

LMul72427 = multiply_layer([[[[[[0.0071]]]]], [[[[[0.187]]]]]], Mul72427), 
LRes80373 = reshape_layer(Mul72427, [1, 1, 1], Res80373), 
LUp_7253 = up_sampling2D_layer(Res80373, 1, 1, Up_7253), 
LZer666 = zero_padding2D_layer(Up_7253, 1, 0, 0, 0, Zer666), 
LCon64225 = concatenate_layer([Zer666,[[[[0.3785]], [[0.4695]]]]], 3, Con64225), 
LAve23115 = average_layer([[[[[0.7731, 0.5847], [0.9401, 0.5485]], [[0.2099, 0.2376], [0.0174, 0.5679]]]], [[[[0.5608, 0.7585], [0.6292, 0.7467]], [[0.7138, 0.0298], [0.0612, 0.8298]]]]], Ave23115), 
LCro43190 = cropping2D_layer(Ave23115, 0, 0, 0, 1, Cro43190), 
LAdd93658 = add_layer([Con64225,Cro43190], Add93658), 
LMas69805 = masking_layer(Add93658, 1, Mas69805), 
exec_layers([LMul72427,LRes80373,LUp_7253,LZer666,LCon64225,LAve23115,LCro43190,LAdd93658,LMas69805],["Mul72427","Res80373","Up_7253","Zer666","Con64225","Ave23115","Cro43190","Add93658","Mas69805"],Mas69805,"Mas69805")

Actual (Unparsed): [[[[0.6669500, 1.0501000]], [[0.4631777, 0.6032000]]]]

Expected (Unparsed): [[[[0.6669499999999999,1.0501]],[[0.46317769999999997,0.6032]]]]

Actual:   [[[[0.667, 1.0501]], [[0.4632, 0.6032]]]]

Expected: [[[[0.667, 1.0501]], [[0.4632, 0.6032]]]]