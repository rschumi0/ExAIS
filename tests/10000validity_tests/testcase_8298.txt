import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub9865 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in1Sub9865 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))

Sub9865 = keras.layers.Subtract(name = 'Sub9865', )([in0Sub9865,in1Sub9865])
Res98887 = keras.layers.Reshape((3, 3, 4), name = 'Res98887', )(Sub9865)
Res1983 = keras.layers.Reshape((3, 12), name = 'Res1983', )(Res98887)
Max92998 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max92998', )(Res1983)
Zer54624 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer54624', )(Max92998)
model = tf.keras.models.Model(inputs=[in0Sub9865,in1Sub9865], outputs=Zer54624)
in0Sub9865 = tf.constant([[[[[0.1274, 0.3081], [0.408, 0.0476]], [[0.565, 0.6684], [0.2442, 0.9125]], [[0.2277, 0.0472], [0.733, 0.8639]]], [[[0.5277, 0.6131], [0.438, 0.611]], [[0.0791, 0.5132], [0.212, 0.182]], [[0.6057, 0.4453], [0.6821, 0.6428]]], [[[0.1478, 0.7179], [0.8196, 0.3155]], [[0.5764, 0.2074], [0.8884, 0.7394]], [[0.3735, 0.4802], [0.8985, 0.9897]]]]])
in1Sub9865 = tf.constant([[[[[0.6104, 0.4887], [0.0639, 0.1276]], [[0.0688, 0.6765], [0.6598, 0.495]], [[0.4863, 0.0266], [0.1073, 0.2847]]], [[[0.9816, 0.5778], [0.0743, 0.3194]], [[0.8149, 0.1955], [0.8744, 0.2544]], [[0.7756, 0.9357], [0.4717, 0.4833]]], [[[0.6516, 0.1671], [0.9524, 0.869]], [[0.4323, 0.7266], [0.4135, 0.0498]], [[0.126, 0.7782], [0.8355, 0.4774]]]]])
print (np.array2string(model.predict([in0Sub9865,in1Sub9865],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer54624.png')

LSub9865 = subtract_layer([[[[[0.1274, 0.3081], [0.408, 0.0476]], [[0.565, 0.6684], [0.2442, 0.9125]], [[0.2277, 0.0472], [0.733, 0.8639]]], [[[0.5277, 0.6131], [0.438, 0.611]], [[0.0791, 0.5132], [0.212, 0.182]], [[0.6057, 0.4453], [0.6821, 0.6428]]], [[[0.1478, 0.7179], [0.8196, 0.3155]], [[0.5764, 0.2074], [0.8884, 0.7394]], [[0.3735, 0.4802], [0.8985, 0.9897]]]]], [[[[[0.6104, 0.4887], [0.0639, 0.1276]], [[0.0688, 0.6765], [0.6598, 0.495]], [[0.4863, 0.0266], [0.1073, 0.2847]]], [[[0.9816, 0.5778], [0.0743, 0.3194]], [[0.8149, 0.1955], [0.8744, 0.2544]], [[0.7756, 0.9357], [0.4717, 0.4833]]], [[[0.6516, 0.1671], [0.9524, 0.869]], [[0.4323, 0.7266], [0.4135, 0.0498]], [[0.126, 0.7782], [0.8355, 0.4774]]]]], Sub9865), 
LRes98887 = reshape_layer(Sub9865, [3, 3, 4], Res98887), 
LRes1983 = reshape_layer(Res98887, [3, 12], Res1983), 
LMax92998 = max_pool1D_layer(Res1983, 1, Max92998), 
LZer54624 = zero_padding1D_layer(Max92998, 1, 1, Zer54624), 
exec_layers([LSub9865,LRes98887,LRes1983,LMax92998,LZer54624],["Sub9865","Res98887","Res1983","Max92998","Zer54624"],Zer54624,"Zer54624")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [-0.4830000, -0.1806000, 0.3441000, -0.0800000, 0.4962000, -0.0081000, -0.4156000, 0.4175000, -0.2586000, 0.0206000, 0.6257000, 0.5792000], [-0.4539000, 0.0353000, 0.3637000, 0.2916000, -0.7358000, 0.3177000, -0.6624000, -0.0724000, -0.1699000, -0.4904000, 0.2104000, 0.1595000], [-0.5038000, 0.5508000, -0.1328000, -0.5535000, 0.1441000, -0.5192000, 0.4749000, 0.6896000, 0.2475000, -0.2980000, 0.0630000, 0.5123000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0],[-0.48300000000000004,-0.18060000000000004,0.34409999999999996,-0.07999999999999999,0.4962,-0.008099999999999996,-0.4156000000000001,0.4175,-0.2586,0.0206,0.6256999999999999,0.5791999999999999],[-0.4539000000000001,0.0353,0.3637,0.29159999999999997,-0.7358,0.3177,-0.6624,-0.07240000000000002,-0.16989999999999994,-0.4904,0.21040000000000003,0.15950000000000003],[-0.5038,0.5508,-0.13280000000000003,-0.5535,0.1441,-0.5192,0.4749,0.6896,0.2475,-0.298,0.06299999999999994,0.5123],[0,0,0,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [-0.483, -0.1806, 0.3441, -0.08, 0.4962, -0.0081, -0.4156, 0.4175, -0.2586, 0.0206, 0.6257, 0.5792], [-0.4539, 0.0353, 0.3637, 0.2916, -0.7358, 0.3177, -0.6624, -0.0724, -0.1699, -0.4904, 0.2104, 0.1595], [-0.5038, 0.5508, -0.1328, -0.5535, 0.1441, -0.5192, 0.4749, 0.6896, 0.2475, -0.298, 0.063, 0.5123], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [-0.483, -0.1806, 0.3441, -0.0799, 0.4962, -0.008, -0.4156, 0.4175, -0.2586, 0.0206, 0.6257, 0.5792], [-0.4539, 0.0353, 0.3637, 0.2916, -0.7358, 0.3177, -0.6624, -0.0724, -0.1698, -0.4904, 0.2105, 0.1596], [-0.5038, 0.5508, -0.1328, -0.5535, 0.1441, -0.5192, 0.4749, 0.6896, 0.2475, -0.298, 0.063, 0.5123], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]