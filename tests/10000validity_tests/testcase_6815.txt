import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot30328 = tf.keras.layers.Input(shape=([2]))
in1Dot30328 = tf.keras.layers.Input(shape=([2]))
in0Con27616 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))
in0Sub1004 = tf.keras.layers.Input(shape=([3, 3, 3, 3]))
in1Sub1004 = tf.keras.layers.Input(shape=([3, 3, 3, 3]))

Dot30328 = keras.layers.Dot(axes=(1, 1), name = 'Dot30328', )([in0Dot30328,in1Dot30328])
Res52550 = keras.layers.Reshape((1, 1), name = 'Res52550', )(Dot30328)
Res65735 = keras.layers.Reshape((1, 1, 1), name = 'Res65735', )(Res52550)
Cro68737 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro68737', )(Res65735)
Res87014 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res87014', )(Cro68737)
Zer88513 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (2, 0)), name = 'Zer88513', )(Res87014)
Con27616 = keras.layers.Concatenate(axis=4, name = 'Con27616', )([Zer88513,in0Con27616])
Sub1004 = keras.layers.Subtract(name = 'Sub1004', )([in0Sub1004,in1Sub1004])
Min94353 = keras.layers.Minimum(name = 'Min94353', )([Con27616,Sub1004])
model = tf.keras.models.Model(inputs=[in0Dot30328,in1Dot30328,in0Con27616,in0Sub1004,in1Sub1004], outputs=Min94353)
in0Dot30328 = tf.constant([[0.1576, 0.1699]])
in1Dot30328 = tf.constant([[0.7177, 0.1174]])
in0Con27616 = tf.constant([[[[[0.3505, 0.6094], [0.1669, 0.1339], [0.4651, 0.0196]], [[0.7949, 0.987], [0.4279, 0.2807], [0.1203, 0.0741]], [[0.7549, 0.322], [0.4744, 0.6958], [0.7826, 0.6214]]], [[[0.4165, 0.4777], [0.7889, 0.4579], [0.8238, 0.9698]], [[0.7925, 0.2781], [0.7, 0.176], [0.1353, 0.125]], [[0.7029, 0.6008], [0.0059, 0.4258], [0.0922, 0.0117]]], [[[0.6508, 0.5595], [0.5217, 0.0067], [0.1385, 0.5321]], [[0.863, 0.649], [0.1879, 0.7772], [0.0334, 0.8863]], [[0.7576, 0.5679], [0.6269, 0.206], [0.802, 0.7781]]]]])
in0Sub1004 = tf.constant([[[[[0.688, 0.3249, 0.6482], [0.2719, 0.2972, 0.2642], [0.2053, 0.0323, 0.959]], [[0.9746, 0.5107, 0.0193], [0.373, 0.6501, 0.8094], [0.8386, 0.4032, 0.0813]], [[0.4319, 0.3293, 0.7523], [0.619, 0.4316, 0.6837], [0.9633, 0.7077, 0.4964]]], [[[0.8533, 0.3318, 0.8612], [0.8015, 0.2284, 0.2042], [0.4749, 0.4428, 0.3135]], [[0.4433, 0.0596, 0.9713], [0.0047, 0.5466, 0.3175], [0.3341, 0.1222, 0.0211]], [[0.9828, 0.2208, 0.0504], [0.1332, 0.4976, 0.4124], [0.6932, 0.0863, 0.409]]], [[[0.2343, 0.4662, 0.0042], [0.8339, 0.6271, 0.717], [0.8448, 0.4631, 0.6646]], [[0.7877, 0.5071, 0.3544], [0.5744, 0.9175, 0.9529], [0.1978, 0.4448, 0.3197]], [[0.1172, 0.8276, 0.8365], [0.0611, 0.7494, 0.5029], [0.4644, 0.8243, 0.0947]]]]])
in1Sub1004 = tf.constant([[[[[0.8816, 0.9585, 0.236], [0.5057, 0.6727, 0.4702], [0.2101, 0.6528, 0.6662]], [[0.5524, 0.6736, 0.9947], [0.2147, 0.3064, 0.1148], [0.5646, 0.2658, 0.2648]], [[0.6298, 0.9288, 0.7316], [0.858, 0.5271, 0.3832], [0.3209, 0.5982, 0.0956]]], [[[0.0684, 0.9578, 0.3088], [0.8421, 0.7012, 0.5632], [0.8225, 0.3582, 0.0518]], [[0.284, 0.5794, 0.9943], [0.1252, 0.2241, 0.4666], [0.6801, 0.2459, 0.3495]], [[0.0567, 0.5636, 0.8914], [0.5205, 0.1281, 0.617], [0.1701, 0.5373, 0.9797]]], [[[0.9975, 0.298, 0.6779], [0.5874, 0.7444, 0.2938], [0.4513, 0.0934, 0.3457]], [[0.38, 0.1958, 0.4678], [0.8105, 0.2575, 0.709], [0.4358, 0.1503, 0.5019]], [[0.3131, 0.9272, 0.5872], [0.8191, 0.6317, 0.3693], [0.3865, 0.7952, 0.8809]]]]])
print (np.array2string(model.predict([in0Dot30328,in1Dot30328,in0Con27616,in0Sub1004,in1Sub1004],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min94353.png')

LDot30328 = dot_layer([[0.1576, 0.1699]], [[0.7177, 0.1174]], 1, 1, Dot30328), 
LRes52550 = reshape_layer(Dot30328, [1, 1], Res52550), 
LRes65735 = reshape_layer(Res52550, [1, 1, 1], Res65735), 
LCro68737 = cropping2D_layer(Res65735, 0, 0, 0, 0, Cro68737), 
LRes87014 = reshape_layer(Cro68737, [1, 1, 1, 1], Res87014), 
LZer88513 = zero_padding3D_layer(Res87014, 2, 0, 2, 0, 2, 0, Zer88513), 
LCon27616 = concatenate_layer([Zer88513,[[[[[0.3505, 0.6094], [0.1669, 0.1339], [0.4651, 0.0196]], [[0.7949, 0.987], [0.4279, 0.2807], [0.1203, 0.0741]], [[0.7549, 0.322], [0.4744, 0.6958], [0.7826, 0.6214]]], [[[0.4165, 0.4777], [0.7889, 0.4579], [0.8238, 0.9698]], [[0.7925, 0.2781], [0.7, 0.176], [0.1353, 0.125]], [[0.7029, 0.6008], [0.0059, 0.4258], [0.0922, 0.0117]]], [[[0.6508, 0.5595], [0.5217, 0.0067], [0.1385, 0.5321]], [[0.863, 0.649], [0.1879, 0.7772], [0.0334, 0.8863]], [[0.7576, 0.5679], [0.6269, 0.206], [0.802, 0.7781]]]]]], 4, Con27616), 
LSub1004 = subtract_layer([[[[[0.688, 0.3249, 0.6482], [0.2719, 0.2972, 0.2642], [0.2053, 0.0323, 0.959]], [[0.9746, 0.5107, 0.0193], [0.373, 0.6501, 0.8094], [0.8386, 0.4032, 0.0813]], [[0.4319, 0.3293, 0.7523], [0.619, 0.4316, 0.6837], [0.9633, 0.7077, 0.4964]]], [[[0.8533, 0.3318, 0.8612], [0.8015, 0.2284, 0.2042], [0.4749, 0.4428, 0.3135]], [[0.4433, 0.0596, 0.9713], [0.0047, 0.5466, 0.3175], [0.3341, 0.1222, 0.0211]], [[0.9828, 0.2208, 0.0504], [0.1332, 0.4976, 0.4124], [0.6932, 0.0863, 0.409]]], [[[0.2343, 0.4662, 0.0042], [0.8339, 0.6271, 0.717], [0.8448, 0.4631, 0.6646]], [[0.7877, 0.5071, 0.3544], [0.5744, 0.9175, 0.9529], [0.1978, 0.4448, 0.3197]], [[0.1172, 0.8276, 0.8365], [0.0611, 0.7494, 0.5029], [0.4644, 0.8243, 0.0947]]]]], [[[[[0.8816, 0.9585, 0.236], [0.5057, 0.6727, 0.4702], [0.2101, 0.6528, 0.6662]], [[0.5524, 0.6736, 0.9947], [0.2147, 0.3064, 0.1148], [0.5646, 0.2658, 0.2648]], [[0.6298, 0.9288, 0.7316], [0.858, 0.5271, 0.3832], [0.3209, 0.5982, 0.0956]]], [[[0.0684, 0.9578, 0.3088], [0.8421, 0.7012, 0.5632], [0.8225, 0.3582, 0.0518]], [[0.284, 0.5794, 0.9943], [0.1252, 0.2241, 0.4666], [0.6801, 0.2459, 0.3495]], [[0.0567, 0.5636, 0.8914], [0.5205, 0.1281, 0.617], [0.1701, 0.5373, 0.9797]]], [[[0.9975, 0.298, 0.6779], [0.5874, 0.7444, 0.2938], [0.4513, 0.0934, 0.3457]], [[0.38, 0.1958, 0.4678], [0.8105, 0.2575, 0.709], [0.4358, 0.1503, 0.5019]], [[0.3131, 0.9272, 0.5872], [0.8191, 0.6317, 0.3693], [0.3865, 0.7952, 0.8809]]]]], Sub1004), 
LMin94353 = minimum_layer([Con27616,Sub1004], Min94353), 
exec_layers([LDot30328,LRes52550,LRes65735,LCro68737,LRes87014,LZer88513,LCon27616,LSub1004,LMin94353],["Dot30328","Res52550","Res65735","Cro68737","Res87014","Zer88513","Con27616","Sub1004","Min94353"],Min94353,"Min94353")

Actual (Unparsed): [[[[[-0.1936000, -0.6336000, 0.4122000], [-0.2338000, -0.3755000, -0.2060000], [-0.0048000, -0.6205000, 0.0196000]], [[0.0000000, -0.1629000, -0.9754000], [0.0000000, 0.3437000, 0.2807000], [0.0000000, 0.1203000, -0.1835000]], [[-0.1979000, -0.5995000, 0.0207000], [-0.2390000, -0.0955000, 0.3005000], [0.0000000, 0.1095000, 0.4008000]]], [[[0.0000000, -0.6260000, 0.4777000], [-0.0406000, -0.4728000, -0.3590000], [-0.3476000, 0.0846000, 0.2617000]], [[0.0000000, -0.5198000, -0.0230000], [-0.1205000, 0.3225000, -0.1491000], [-0.3460000, -0.1237000, -0.3284000]], [[0.0000000, -0.3428000, -0.8410000], [-0.3873000, 0.0059000, -0.2046000], [0.0000000, -0.4510000, -0.5707000]]], [[[-0.7632000, 0.1682000, -0.6737000], [0.0000000, -0.1173000, 0.0067000], [0.0000000, 0.1385000, 0.3189000]], [[0.0000000, 0.3113000, -0.1134000], [-0.2361000, 0.1879000, 0.2439000], [-0.2380000, 0.0334000, -0.1822000]], [[-0.1959000, -0.0996000, 0.2493000], [-0.7580000, 0.1177000, 0.1336000], [0.0779000, 0.0291000, -0.7862000]]]]]

Expected (Unparsed): [[[[[-0.1936000000000001,-0.6335999999999999,0.4122],[-0.23380000000000006,-0.37549999999999994,-0.20600000000000002],[-0.004799999999999999,-0.6205,0.0196]],[[0,-0.16289999999999993,-0.9754],[0,0.3437,0.2807],[0,0.1203,-0.1835]],[[-0.19790000000000002,-0.5994999999999999,0.02069999999999994],[-0.239,-0.09550000000000003,0.3005],[0,0.10950000000000004,0.4008]]],[[[0,-0.626,0.4777],[-0.04059999999999997,-0.47280000000000005,-0.35900000000000004],[-0.3476,0.08460000000000001,0.2617]],[[0,-0.5198,-0.02299999999999991],[-0.12050000000000001,0.3225,-0.1491],[-0.34600000000000003,-0.1237,-0.32839999999999997]],[[0,-0.3428,-0.841],[-0.3873,0.0059,-0.2046],[0,-0.451,-0.5707]]],[[[-0.7632000000000001,0.16820000000000002,-0.6737],[0,-0.11729999999999996,0.0067],[0,0.1385,0.31889999999999996]],[[0,0.3113,-0.1134],[-0.23609999999999998,0.1879,0.2439],[-0.23800000000000002,0.0334,-0.18220000000000003]],[[-0.1959,-0.09960000000000002,0.24929999999999997],[-0.758,0.11769999999999992,0.1336],[0.07789999999999997,0.029100000000000015,-0.7862]]]]]

Actual:   [[[[[-0.1936, -0.6336, 0.4122], [-0.2338, -0.3755, -0.206], [-0.0048, -0.6205, 0.0196]], [[0, -0.1629, -0.9754], [0, 0.3437, 0.2807], [0, 0.1203, -0.1835]], [[-0.1979, -0.5995, 0.0207], [-0.239, -0.0955, 0.3005], [0, 0.1095, 0.4008]]], [[[0, -0.626, 0.4777], [-0.0406, -0.4728, -0.359], [-0.3476, 0.0846, 0.2617]], [[0, -0.5198, -0.023], [-0.1205, 0.3225, -0.1491], [-0.346, -0.1237, -0.3284]], [[0, -0.3428, -0.841], [-0.3873, 0.0059, -0.2046], [0, -0.451, -0.5707]]], [[[-0.7632, 0.1682, -0.6737], [0, -0.1173, 0.0067], [0, 0.1385, 0.3189]], [[0, 0.3113, -0.1134], [-0.2361, 0.1879, 0.2439], [-0.238, 0.0334, -0.1822]], [[-0.1959, -0.0996, 0.2493], [-0.758, 0.1177, 0.1336], [0.0779, 0.0291, -0.7862]]]]]

Expected: [[[[[-0.1936, -0.6335, 0.4122], [-0.2338, -0.3754, -0.206], [-0.0047, -0.6205, 0.0196]], [[0, -0.1628, -0.9754], [0, 0.3437, 0.2807], [0, 0.1203, -0.1835]], [[-0.1979, -0.5994, 0.0207], [-0.239, -0.0955, 0.3005], [0, 0.1096, 0.4008]]], [[[0, -0.626, 0.4777], [-0.0405, -0.4728, -0.359], [-0.3476, 0.0847, 0.2617]], [[0, -0.5198, -0.0229], [-0.1205, 0.3225, -0.1491], [-0.346, -0.1237, -0.3283]], [[0, -0.3428, -0.841], [-0.3873, 0.0059, -0.2046], [0, -0.451, -0.5707]]], [[[-0.7632, 0.1683, -0.6737], [0, -0.1172, 0.0067], [0, 0.1385, 0.3189]], [[0, 0.3113, -0.1134], [-0.236, 0.1879, 0.2439], [-0.238, 0.0334, -0.1822]], [[-0.1959, -0.0996, 0.2493], [-0.758, 0.1177, 0.1336], [0.0779, 0.0292, -0.7862]]]]]