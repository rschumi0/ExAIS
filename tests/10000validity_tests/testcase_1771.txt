import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla39318 = tf.keras.layers.Input(shape=([3, 3]))
in0Dot82031 = tf.keras.layers.Input(shape=([2]))
in1Dot82031 = tf.keras.layers.Input(shape=([2]))
in0Con13536 = tf.keras.layers.Input(shape=([8]))

Fla39318 = keras.layers.Flatten(name = 'Fla39318', )(in0Fla39318)
Dot82031 = keras.layers.Dot(axes=(1, 1), name = 'Dot82031', )([in0Dot82031,in1Dot82031])
Con13536 = keras.layers.Concatenate(axis=1, name = 'Con13536', )([Dot82031,in0Con13536])
Mul84031 = keras.layers.Multiply(name = 'Mul84031', )([Fla39318,Con13536])
Res51564 = keras.layers.Reshape((9, 1), name = 'Res51564', )(Mul84031)
Res8403 = keras.layers.Reshape((9, 1, 1), name = 'Res8403', )(Res51564)
Ave8548 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(8, 1), padding='same', name = 'Ave8548', )(Res8403)
model = tf.keras.models.Model(inputs=[in0Fla39318,in0Dot82031,in1Dot82031,in0Con13536], outputs=Ave8548)
in0Fla39318 = tf.constant([[[1.8457, 1.9286, 1.9416], [1.9277, 1.6037, 1.5176], [1.0975, 1.1151, 1.8886]]])
in0Dot82031 = tf.constant([[0.4418, 0.8647]])
in1Dot82031 = tf.constant([[0.0749, 0.8389]])
in0Con13536 = tf.constant([[0.3193, 0.2951, 0.3076, 0.8827, 0.1559, 0.0283, 0.6199, 0.7872]])
print (np.array2string(model.predict([in0Fla39318,in0Dot82031,in1Dot82031,in0Con13536],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave8548.png')

LFla39318 = flatten_layer([[[1.8457, 1.9286, 1.9416], [1.9277, 1.6037, 1.5176], [1.0975, 1.1151, 1.8886]]], Fla39318), 
LDot82031 = dot_layer([[0.4418, 0.8647]], [[0.0749, 0.8389]], 1, 1, Dot82031), 
LCon13536 = concatenate_layer([Dot82031,[[0.3193, 0.2951, 0.3076, 0.8827, 0.1559, 0.0283, 0.6199, 0.7872]]], 1, Con13536), 
LMul84031 = multiply_layer([Fla39318,Con13536], Mul84031), 
LRes51564 = reshape_layer(Mul84031, [9, 1], Res51564), 
LRes8403 = reshape_layer(Res51564, [9, 1, 1], Res8403), 
LAve8548 = average_pooling2D_layer(Res8403, 1, 1, 8, 1, true, Ave8548), 
exec_layers([LFla39318,LDot82031,LCon13536,LMul84031,LRes51564,LRes8403,LAve8548],["Fla39318","Dot82031","Con13536","Mul84031","Res51564","Res8403","Ave8548"],Ave8548,"Ave8548")

Actual (Unparsed): [[[[1.3999408]], [[1.4867059]]]]

Expected (Unparsed): [[[[1.3999406556049998]],[[1.4867059200000001]]]]

Actual:   [[[[1.4]], [[1.4868]]]]

Expected: [[[[1.4]], [[1.4868]]]]