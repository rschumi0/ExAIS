import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max9368 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max9368 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave91538 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Ave91538 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Max9368 = keras.layers.Maximum(name = 'Max9368', )([in0Max9368,in1Max9368])
Res92995 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res92995', )(Max9368)
Ave91538 = keras.layers.Average(name = 'Ave91538', )([in0Ave91538,in1Ave91538])
Min20592 = keras.layers.Minimum(name = 'Min20592', )([Res92995,Ave91538])
Res90259 = keras.layers.Reshape((1, 2, 1), name = 'Res90259', )(Min20592)
Res20219 = keras.layers.Reshape((1, 2), name = 'Res20219', )(Res90259)
Per18913 = keras.layers.Permute((1,2), name = 'Per18913',)(Res20219)
model = tf.keras.models.Model(inputs=[in0Max9368,in1Max9368,in0Ave91538,in1Ave91538], outputs=Per18913)
in0Max9368 = tf.constant([[[[0.9731], [0.9194]]]])
in1Max9368 = tf.constant([[[[0.8487], [0.1308]]]])
in0Ave91538 = tf.constant([[[[[0.732]], [[0.1778]]]]])
in1Ave91538 = tf.constant([[[[[0.9119]], [[0.6025]]]]])
print (np.array2string(model.predict([in0Max9368,in1Max9368,in0Ave91538,in1Ave91538],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per18913.png')

LMax9368 = maximum_layer([[[[[0.9731], [0.9194]]]], [[[[0.8487], [0.1308]]]]], Max9368), 
LRes92995 = reshape_layer(Max9368, [1, 2, 1, 1], Res92995), 
LAve91538 = average_layer([[[[[[0.732]], [[0.1778]]]]], [[[[[0.9119]], [[0.6025]]]]]], Ave91538), 
LMin20592 = minimum_layer([Res92995,Ave91538], Min20592), 
LRes90259 = reshape_layer(Min20592, [1, 2, 1], Res90259), 
LRes20219 = reshape_layer(Res90259, [1, 2], Res20219), 
LPer18913 = permute_layer(Res20219, 1,2, Per18913), 
exec_layers([LMax9368,LRes92995,LAve91538,LMin20592,LRes90259,LRes20219,LPer18913],["Max9368","Res92995","Ave91538","Min20592","Res90259","Res20219","Per18913"],Per18913,"Per18913")

Actual (Unparsed): [[[0.8219500, 0.3901500]]]

Expected (Unparsed): [[[0.82195,0.39015]]]

Actual:   [[[0.822, 0.3902]]]

Expected: [[[0.822, 0.3902]]]