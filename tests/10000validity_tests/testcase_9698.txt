import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add33955 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Add33955 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Max11265 = tf.keras.layers.Input(shape=([2, 2]))
in1Max11265 = tf.keras.layers.Input(shape=([2, 2]))
in0Con40612 = tf.keras.layers.Input(shape=([2, 6]))

Add33955 = keras.layers.Add(name = 'Add33955', )([in0Add33955,in1Add33955])
Res82168 = keras.layers.Reshape((2, 2, 4), name = 'Res82168', )(Add33955)
Res94803 = keras.layers.Reshape((2, 8), name = 'Res94803', )(Res82168)
Max11265 = keras.layers.Maximum(name = 'Max11265', )([in0Max11265,in1Max11265])
Con40612 = keras.layers.Concatenate(axis=2, name = 'Con40612', )([Max11265,in0Con40612])
Add50404 = keras.layers.Add(name = 'Add50404', )([Res94803,Con40612])
model = tf.keras.models.Model(inputs=[in0Add33955,in1Add33955,in0Max11265,in1Max11265,in0Con40612], outputs=Add50404)
in0Add33955 = tf.constant([[[[[0.8999, 0.4034], [0.9646, 0.6754]], [[0.403, 0.8501], [0.7842, 0.8644]]], [[[0.0307, 0.2474], [0.0874, 0.5826]], [[0.3083, 0.7336], [0.6905, 0.9971]]]]])
in1Add33955 = tf.constant([[[[[0.7231, 0.3265], [0.0775, 0.1125]], [[0.9282, 0.315], [0.3263, 0.8626]]], [[[0.5717, 0.566], [0.9349, 0.4487]], [[0.7241, 0.5611], [0.5916, 0.4215]]]]])
in0Max11265 = tf.constant([[[0.0269, 0.1621], [0.2226, 0.9555]]])
in1Max11265 = tf.constant([[[0.3668, 0.0778], [0.9756, 0.0045]]])
in0Con40612 = tf.constant([[[0.2979, 0.555, 0.3275, 0.379, 0.5566, 0.8671], [0.1919, 0.853, 0.3897, 0.915, 0.009, 0.1944]]])
print (np.array2string(model.predict([in0Add33955,in1Add33955,in0Max11265,in1Max11265,in0Con40612],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add50404.png')

LAdd33955 = add_layer([[[[[[0.8999, 0.4034], [0.9646, 0.6754]], [[0.403, 0.8501], [0.7842, 0.8644]]], [[[0.0307, 0.2474], [0.0874, 0.5826]], [[0.3083, 0.7336], [0.6905, 0.9971]]]]], [[[[[0.7231, 0.3265], [0.0775, 0.1125]], [[0.9282, 0.315], [0.3263, 0.8626]]], [[[0.5717, 0.566], [0.9349, 0.4487]], [[0.7241, 0.5611], [0.5916, 0.4215]]]]]], Add33955), 
LRes82168 = reshape_layer(Add33955, [2, 2, 4], Res82168), 
LRes94803 = reshape_layer(Res82168, [2, 8], Res94803), 
LMax11265 = maximum_layer([[[[0.0269, 0.1621], [0.2226, 0.9555]]], [[[0.3668, 0.0778], [0.9756, 0.0045]]]], Max11265), 
LCon40612 = concatenate_layer([Max11265,[[[0.2979, 0.555, 0.3275, 0.379, 0.5566, 0.8671], [0.1919, 0.853, 0.3897, 0.915, 0.009, 0.1944]]]], 2, Con40612), 
LAdd50404 = add_layer([Res94803,Con40612], Add50404), 
exec_layers([LAdd33955,LRes82168,LRes94803,LMax11265,LCon40612,LAdd50404],["Add33955","Res82168","Res94803","Max11265","Con40612","Add50404"],Add50404,"Add50404")

Actual (Unparsed): [[[1.9898000, 0.8920000, 1.3400000, 1.3429000, 1.6587000, 1.5441000, 1.6671000, 2.5941001], [1.5780000, 1.7689000, 1.2142000, 1.8843000, 1.4221000, 2.2097000, 1.2911000, 1.6130000]]]

Expected (Unparsed): [[[1.9898,0.892,1.34,1.3429000000000002,1.6587,1.5441,1.6671,2.5941],[1.5779999999999998,1.7689,1.2142,1.8842999999999999,1.4221,2.2097,1.2911,1.613]]]

Actual:   [[[1.9898, 0.892, 1.34, 1.3429, 1.6587, 1.5441, 1.6671, 2.5942], [1.578, 1.7689, 1.2142, 1.8843, 1.4221, 2.2097, 1.2911, 1.613]]]

Expected: [[[1.9898, 0.892, 1.34, 1.343, 1.6587, 1.5441, 1.6671, 2.5941], [1.578, 1.7689, 1.2142, 1.8843, 1.4221, 2.2097, 1.2911, 1.613]]]