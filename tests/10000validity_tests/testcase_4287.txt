import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add88579 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add88579 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Loc47627 = tf.keras.layers.Input(shape=([2, 1]))

Add88579 = keras.layers.Add(name = 'Add88579', )([in0Add88579,in1Add88579])
Res28260 = keras.layers.Reshape((1, 2, 2), name = 'Res28260', )(Add88579)
Res85028 = keras.layers.Reshape((1, 4), name = 'Res85028', )(Res28260)
Loc47627 = keras.layers.LocallyConnected1D(4, (2),strides=(10), name = 'Loc47627', )(in0Loc47627)
Mul18846 = keras.layers.Multiply(name = 'Mul18846', )([Res85028,Loc47627])
model = tf.keras.models.Model(inputs=[in0Add88579,in1Add88579,in0Loc47627], outputs=Mul18846)
w = model.get_layer('Loc47627').get_weights() 
w[0] = np.array([[[0.9126, 0.0772, 0.0375, 0.08], [0.8751, 0.9832, 0.1182, 0.3175]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc47627').set_weights(w) 
in0Add88579 = tf.constant([[[[[0.4244], [0.1749]], [[0.0157], [0.3785]]]]])
in1Add88579 = tf.constant([[[[[0.8299], [0.9163]], [[0.6101], [0.1961]]]]])
in0Loc47627 = tf.constant([[[0.9458], [0.2341]]])
print (np.array2string(model.predict([in0Add88579,in1Add88579,in0Loc47627],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul18846.png')

LAdd88579 = add_layer([[[[[[0.4244], [0.1749]], [[0.0157], [0.3785]]]]], [[[[[0.8299], [0.9163]], [[0.6101], [0.1961]]]]]], Add88579), 
LRes28260 = reshape_layer(Add88579, [1, 2, 2], Res28260), 
LRes85028 = reshape_layer(Res28260, [1, 4], Res85028), 
LLoc47627 = locally_connected1D_layer([[[0.9458], [0.2341]]], 2,[[[0.9126, 0.0772, 0.0375, 0.08], [0.8751, 0.9832, 0.1182, 0.3175]]],[[0, 0, 0, 0]], 10, Loc47627), 
LMul18846 = multiply_layer([Res85028,Loc47627], Mul18846), 
exec_layers([LAdd88579,LRes28260,LRes85028,LLoc47627,LMul18846],["Add88579","Res28260","Res85028","Loc47627","Mul18846"],Mul18846,"Mul18846")

Actual (Unparsed): [[[1.3395899, 0.3308332, 0.0395118, 0.0861847]]]

Expected (Unparsed): [[[1.3395898788569998,0.330833158656,0.03951183549599999,0.08618468495]]]

Actual:   [[[1.3396, 0.3309, 0.0396, 0.0862]]]

Expected: [[[1.3396, 0.3309, 0.0396, 0.0862]]]