import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul48544 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Mul48544 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con96232 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Min94015 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Min94015 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Max51538 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max51538 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con38855 = tf.keras.layers.Input(shape=([2, 4, 1]))
in0Ave53102 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Ave53102 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Mul48544 = keras.layers.Multiply(name = 'Mul48544', )([in0Mul48544,in1Mul48544])
Res15316 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res15316', )(Mul48544)
Zer5171 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer5171', )(Res15316)
Con96232 = keras.layers.Concatenate(axis=4, name = 'Con96232', )([Zer5171,in0Con96232])
Min94015 = keras.layers.Minimum(name = 'Min94015', )([in0Min94015,in1Min94015])
Min65839 = keras.layers.Minimum(name = 'Min65839', )([Con96232,Min94015])
Res42085 = keras.layers.Reshape((2, 2, 4), name = 'Res42085', )(Min65839)
Res64935 = keras.layers.Reshape((2, 8), name = 'Res64935', )(Res42085)
Max51538 = keras.layers.Maximum(name = 'Max51538', )([in0Max51538,in1Max51538])
Zer72204 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer72204', )(Max51538)
Con38855 = keras.layers.Concatenate(axis=3, name = 'Con38855', )([Zer72204,in0Con38855])
Ave53102 = keras.layers.Average(name = 'Ave53102', )([in0Ave53102,in1Ave53102])
Res61064 = keras.layers.Reshape((1, 2, 2), name = 'Res61064', )(Ave53102)
Up_75006 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_75006', )(Res61064)
Min15508 = keras.layers.Minimum(name = 'Min15508', )([Con38855,Up_75006])
Res62665 = keras.layers.Reshape((2, 8), name = 'Res62665', )(Min15508)
Dot13821 = keras.layers.Dot(axes=(1, 1), name = 'Dot13821', )([Res64935,Res62665])
model = tf.keras.models.Model(inputs=[in0Mul48544,in1Mul48544,in0Con96232,in0Min94015,in1Min94015,in0Max51538,in1Max51538,in0Con38855,in0Ave53102,in1Ave53102], outputs=Dot13821)
in0Mul48544 = tf.constant([[[[0.0635], [0.6328]]]])
in1Mul48544 = tf.constant([[[[0.9532], [0.3624]]]])
in0Con96232 = tf.constant([[[[[0.6523], [0.1127]], [[0.7961], [0.1064]]], [[[0.0541], [0.3983]], [[0.2629], [0.9182]]]]])
in0Min94015 = tf.constant([[[[[0.9224, 0.3099], [0.361, 0.7009]], [[0.7308, 0.5666], [0.1548, 0.8279]]], [[[0.2217, 0.6645], [0.2442, 0.9618]], [[0.7726, 0.3854], [0.295, 0.2917]]]]])
in1Min94015 = tf.constant([[[[[0.6829, 0.4368], [0.2921, 0.8941]], [[0.5245, 0.0778], [0.7462, 0.5577]]], [[[0.4567, 0.9346], [0.5756, 0.3487]], [[0.274, 0.8643], [0.3989, 0.5903]]]]])
in0Max51538 = tf.constant([[[[0.7445], [0.7695]]]])
in1Max51538 = tf.constant([[[[0.0909], [0.4252]]]])
in0Con38855 = tf.constant([[[[0.7233], [0.6156], [0.2967], [0.0232]], [[0.026], [0.8324], [0.4492], [0.1536]]]])
in0Ave53102 = tf.constant([[[[[0.4853, 0.4643]], [[0.9731, 0.2858]]]]])
in1Ave53102 = tf.constant([[[[[0.224, 0.0523]], [[0.9382, 0.4038]]]]])
print (np.array2string(model.predict([in0Mul48544,in1Mul48544,in0Con96232,in0Min94015,in1Min94015,in0Max51538,in1Max51538,in0Con38855,in0Ave53102,in1Ave53102],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot13821.png')

LMul48544 = multiply_layer([[[[[0.0635], [0.6328]]]], [[[[0.9532], [0.3624]]]]], Mul48544), 
LRes15316 = reshape_layer(Mul48544, [1, 2, 1, 1], Res15316), 
LZer5171 = zero_padding3D_layer(Res15316, 1, 0, 0, 0, 1, 0, Zer5171), 
LCon96232 = concatenate_layer([Zer5171,[[[[[0.6523], [0.1127]], [[0.7961], [0.1064]]], [[[0.0541], [0.3983]], [[0.2629], [0.9182]]]]]], 4, Con96232), 
LMin94015 = minimum_layer([[[[[[0.9224, 0.3099], [0.361, 0.7009]], [[0.7308, 0.5666], [0.1548, 0.8279]]], [[[0.2217, 0.6645], [0.2442, 0.9618]], [[0.7726, 0.3854], [0.295, 0.2917]]]]], [[[[[0.6829, 0.4368], [0.2921, 0.8941]], [[0.5245, 0.0778], [0.7462, 0.5577]]], [[[0.4567, 0.9346], [0.5756, 0.3487]], [[0.274, 0.8643], [0.3989, 0.5903]]]]]], Min94015), 
LMin65839 = minimum_layer([Con96232,Min94015], Min65839), 
LRes42085 = reshape_layer(Min65839, [2, 2, 4], Res42085), 
LRes64935 = reshape_layer(Res42085, [2, 8], Res64935), 
LMax51538 = maximum_layer([[[[[0.7445], [0.7695]]]], [[[[0.0909], [0.4252]]]]], Max51538), 
LZer72204 = zero_padding2D_layer(Max51538, 1, 0, 2, 0, Zer72204), 
LCon38855 = concatenate_layer([Zer72204,[[[[0.7233], [0.6156], [0.2967], [0.0232]], [[0.026], [0.8324], [0.4492], [0.1536]]]]], 3, Con38855), 
LAve53102 = average_layer([[[[[[0.4853, 0.4643]], [[0.9731, 0.2858]]]]], [[[[[0.224, 0.0523]], [[0.9382, 0.4038]]]]]], Ave53102), 
LRes61064 = reshape_layer(Ave53102, [1, 2, 2], Res61064), 
LUp_75006 = up_sampling2D_layer(Res61064, 2, 2, Up_75006), 
LMin15508 = minimum_layer([Con38855,Up_75006], Min15508), 
LRes62665 = reshape_layer(Min15508, [2, 8], Res62665), 
LDot13821 = dot_layer(Res64935,Res62665, 1, 1, Dot13821), 
exec_layers([LMul48544,LRes15316,LZer5171,LCon96232,LMin94015,LMin65839,LRes42085,LRes64935,LMax51538,LZer72204,LCon38855,LAve53102,LRes61064,LUp_75006,LMin15508,LRes62665,LDot13821],["Mul48544","Res15316","Zer5171","Con96232","Min94015","Min65839","Res42085","Res64935","Max51538","Zer72204","Con38855","Ave53102","Res61064","Up_75006","Min15508","Res62665","Dot13821"],Dot13821,"Dot13821")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0814538, 0.0000000, 0.0940212, 0.0402774, 0.1106010, 0.0416300, 0.0154994], [0.0000000, 0.0015737, 0.0000000, 0.0156344, 0.0450632, 0.0208701, 0.0465765, 0.0092971], [0.0000000, 0.0381766, 0.0000000, 0.1191796, 0.2596071, 0.1536698, 0.2683246, 0.0561750], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0269311, 0.0000000, 0.0880028, 0.1957290, 0.1137312, 0.2023016, 0.0421864], [0.0000000, 0.0059625, 0.0000000, 0.0592351, 0.1707337, 0.0790719, 0.1764669, 0.0352246], [0.0000000, 0.0350673, 0.0000000, 0.1028292, 0.2171706, 0.1321470, 0.2244632, 0.0472736]]]

Expected (Unparsed): [[[0,0.0,0,0.0,0.0,0.0,0.0,0.0],[0.0,0.08145377,0.0,0.0940212,0.040277450000000006,0.11060101,0.04162995,0.01549944],[0.0,0.0015737332,0.0,0.01563443406,0.04506324490000001,0.020870123360000003,0.046576449900000004,0.00929713152],[0.0,0.03817661,0.0,0.11917961999999999,0.25960715,0.15366985,0.26832465,0.056174959999999996],[0,0.0,0,0.0,0.0,0.0,0.0,0.0],[0.0,0.02693114,0.0,0.08800281,0.19572905000000004,0.11373118000000002,0.20230155,0.0421864],[0.0,0.00596249472,0.0,0.059235091776,0.17073374304000002,0.07907185305600001,0.17646691104,0.035224584191999996],[0.0,0.03506732,0.0,0.10282923,0.21717065000000002,0.13214704,0.22446315,0.0472736]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0.0815, 0, 0.0941, 0.0403, 0.1107, 0.0417, 0.0155], [0, 0.0016, 0, 0.0157, 0.0451, 0.0209, 0.0466, 0.0093], [0, 0.0382, 0, 0.1192, 0.2597, 0.1537, 0.2684, 0.0562], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0.027, 0, 0.0881, 0.1958, 0.1138, 0.2024, 0.0422], [0, 0.006, 0, 0.0593, 0.1708, 0.0791, 0.1765, 0.0353], [0, 0.0351, 0, 0.1029, 0.2172, 0.1322, 0.2245, 0.0473]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0.0815, 0, 0.0941, 0.0403, 0.1107, 0.0417, 0.0155], [0, 0.0016, 0, 0.0157, 0.0451, 0.0209, 0.0466, 0.0093], [0, 0.0382, 0, 0.1192, 0.2597, 0.1537, 0.2684, 0.0562], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0.027, 0, 0.0881, 0.1958, 0.1138, 0.2024, 0.0422], [0, 0.006, 0, 0.0593, 0.1708, 0.0791, 0.1765, 0.0353], [0, 0.0351, 0, 0.1029, 0.2172, 0.1322, 0.2245, 0.0473]]]