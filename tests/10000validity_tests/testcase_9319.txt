import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave64364 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave64364 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Ave64364 = keras.layers.Average(name = 'Ave64364', )([in0Ave64364,in1Ave64364])
ELU5242 = keras.layers.ELU(alpha=0.7376974594142993, name = 'ELU5242', )(Ave64364)
Res46618 = keras.layers.Reshape((1, 1, 4), name = 'Res46618', )(ELU5242)
Res63925 = keras.layers.Reshape((1, 4), name = 'Res63925', )(Res46618)
Per6823 = keras.layers.Permute((2,1), name = 'Per6823',)(Res63925)
model = tf.keras.models.Model(inputs=[in0Ave64364,in1Ave64364], outputs=Per6823)
in0Ave64364 = tf.constant([[[[[0.4985, 0.6947], [0.3533, 0.7642]]]]])
in1Ave64364 = tf.constant([[[[[0.463, 0.1103], [0.5172, 0.9482]]]]])
print (np.array2string(model.predict([in0Ave64364,in1Ave64364],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per6823.png')

LAve64364 = average_layer([[[[[[0.4985, 0.6947], [0.3533, 0.7642]]]]], [[[[[0.463, 0.1103], [0.5172, 0.9482]]]]]], Ave64364), 
LELU5242 = elu_layer(Ave64364, 0.7376974594142993, ELU5242), 
LRes46618 = reshape_layer(ELU5242, [1, 1, 4], Res46618), 
LRes63925 = reshape_layer(Res46618, [1, 4], Res63925), 
LPer6823 = permute_layer(Res63925, 2,1, Per6823), 
exec_layers([LAve64364,LELU5242,LRes46618,LRes63925,LPer6823],["Ave64364","ELU5242","Res46618","Res63925","Per6823"],Per6823,"Per6823")

Actual (Unparsed): [[[0.4807500], [0.4025000], [0.4352500], [0.8562000]]]

Expected (Unparsed): [[[0.48075],[0.40249999999999997],[0.43525],[0.8562000000000001]]]

Actual:   [[[0.4808], [0.4025], [0.4353], [0.8562]]]

Expected: [[[0.4808], [0.4025], [0.4353], [0.8563]]]