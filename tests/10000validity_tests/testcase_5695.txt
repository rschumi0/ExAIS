import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max99507 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Max99507 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Min58873 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min58873 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Add92449 = tf.keras.layers.Input(shape=([2, 2]))
in1Add92449 = tf.keras.layers.Input(shape=([2, 2]))
in0Con29648 = tf.keras.layers.Input(shape=([3]))
in0Con57854 = tf.keras.layers.Input(shape=([4]))

Max99507 = keras.layers.Maximum(name = 'Max99507', )([in0Max99507,in1Max99507])
Res35008 = keras.layers.Reshape((2, 2, 2), name = 'Res35008', )(Max99507)
Res94278 = keras.layers.Reshape((2, 4), name = 'Res94278', )(Res35008)
Fla56522 = keras.layers.Flatten(name = 'Fla56522', )(Res94278)
Min58873 = keras.layers.Minimum(name = 'Min58873', )([in0Min58873,in1Min58873])
Res99162 = keras.layers.Reshape((2, 2), name = 'Res99162', )(Min58873)
Fla97577 = keras.layers.Flatten(name = 'Fla97577', )(Res99162)
Add92449 = keras.layers.Add(name = 'Add92449', )([in0Add92449,in1Add92449])
Res5150 = keras.layers.Reshape((2, 2, 1), name = 'Res5150', )(Add92449)
Zer44894 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer44894', )(Res5150)
Glo70224 = keras.layers.GlobalAveragePooling2D(name = 'Glo70224', )(Zer44894)
Con29648 = keras.layers.Concatenate(axis=1, name = 'Con29648', )([Glo70224,in0Con29648])
Min7819 = keras.layers.Minimum(name = 'Min7819', )([Fla97577,Con29648])
Con57854 = keras.layers.Concatenate(axis=1, name = 'Con57854', )([Min7819,in0Con57854])
Sub19567 = keras.layers.Subtract(name = 'Sub19567', )([Fla56522,Con57854])
model = tf.keras.models.Model(inputs=[in0Max99507,in1Max99507,in0Min58873,in1Min58873,in0Add92449,in1Add92449,in0Con29648,in0Con57854], outputs=Sub19567)
in0Max99507 = tf.constant([[[[[0.2799, 0.0583]], [[0.2952, 0.4234]]], [[[0.1563, 0.8476]], [[0.5235, 0.8027]]]]])
in1Max99507 = tf.constant([[[[[0.4349, 0.2134]], [[0.889, 0.8153]]], [[[0.7927, 0.8961]], [[0.4749, 0.6176]]]]])
in0Min58873 = tf.constant([[[[0.125, 0.0546]], [[0.2881, 0.0872]]]])
in1Min58873 = tf.constant([[[[0.6477, 0.5994]], [[0.6115, 0.0827]]]])
in0Add92449 = tf.constant([[[0.9153, 0.7551], [0.4754, 0.9752]]])
in1Add92449 = tf.constant([[[0.8118, 0.8793], [0.4525, 0.3674]]])
in0Con29648 = tf.constant([[0.7836, 0.5781, 0.4145]])
in0Con57854 = tf.constant([[0.7723, 0.8031, 0.9282, 0.1164]])
print (np.array2string(model.predict([in0Max99507,in1Max99507,in0Min58873,in1Min58873,in0Add92449,in1Add92449,in0Con29648,in0Con57854],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub19567.png')

LMax99507 = maximum_layer([[[[[[0.2799, 0.0583]], [[0.2952, 0.4234]]], [[[0.1563, 0.8476]], [[0.5235, 0.8027]]]]], [[[[[0.4349, 0.2134]], [[0.889, 0.8153]]], [[[0.7927, 0.8961]], [[0.4749, 0.6176]]]]]], Max99507), 
LRes35008 = reshape_layer(Max99507, [2, 2, 2], Res35008), 
LRes94278 = reshape_layer(Res35008, [2, 4], Res94278), 
LFla56522 = flatten_layer(Res94278, Fla56522), 
LMin58873 = minimum_layer([[[[[0.125, 0.0546]], [[0.2881, 0.0872]]]], [[[[0.6477, 0.5994]], [[0.6115, 0.0827]]]]], Min58873), 
LRes99162 = reshape_layer(Min58873, [2, 2], Res99162), 
LFla97577 = flatten_layer(Res99162, Fla97577), 
LAdd92449 = add_layer([[[[0.9153, 0.7551], [0.4754, 0.9752]]], [[[0.8118, 0.8793], [0.4525, 0.3674]]]], Add92449), 
LRes5150 = reshape_layer(Add92449, [2, 2, 1], Res5150), 
LZer44894 = zero_padding2D_layer(Res5150, 1, 1, 1, 1, Zer44894), 
LGlo70224 = global_average_pooling2D_layer(Zer44894, Glo70224), 
LCon29648 = concatenate_layer([Glo70224,[[0.7836, 0.5781, 0.4145]]], 1, Con29648), 
LMin7819 = minimum_layer([Fla97577,Con29648], Min7819), 
LCon57854 = concatenate_layer([Min7819,[[0.7723, 0.8031, 0.9282, 0.1164]]], 1, Con57854), 
LSub19567 = subtract_layer(Fla56522,Con57854, Sub19567), 
exec_layers([LMax99507,LRes35008,LRes94278,LFla56522,LMin58873,LRes99162,LFla97577,LAdd92449,LRes5150,LZer44894,LGlo70224,LCon29648,LMin7819,LCon57854,LSub19567],["Max99507","Res35008","Res94278","Fla56522","Min58873","Res99162","Fla97577","Add92449","Res5150","Zer44894","Glo70224","Con29648","Min7819","Con57854","Sub19567"],Sub19567,"Sub19567")

Actual (Unparsed): [[0.3099000, 0.1588000, 0.6009000, 0.7326000, 0.0204000, 0.0930000, -0.4047000, 0.6863000]]

Expected (Unparsed): [[0.3099,0.1588,0.6009,0.7326,0.020399999999999974,0.09299999999999997,-0.40470000000000006,0.6862999999999999]]

Actual:   [[0.3099, 0.1588, 0.6009, 0.7326, 0.0204, 0.093, -0.4047, 0.6863]]

Expected: [[0.3099, 0.1588, 0.6009, 0.7326, 0.0204, 0.093, -0.4047, 0.6863]]