import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo25282 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Glo25282 = keras.layers.GlobalMaxPool3D(name = 'Glo25282', )(in0Glo25282)
Res53017 = keras.layers.Reshape((2, 1), name = 'Res53017', )(Glo25282)
Res13284 = keras.layers.Reshape((2, 1, 1), name = 'Res13284', )(Res53017)
Res27845 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res27845', )(Res13284)
Glo43007 = keras.layers.GlobalMaxPool3D(name = 'Glo43007', )(Res27845)
Res89269 = keras.layers.Reshape((1, 1), name = 'Res89269', )(Glo43007)
Res81592 = keras.layers.Reshape((1, 1, 1), name = 'Res81592', )(Res89269)
Res63454 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res63454', )(Res81592)
Con58344 = keras.layers.Conv3DTranspose(4, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con58344', )(Res63454)
Res90389 = keras.layers.Reshape((1, 1, 4), name = 'Res90389', )(Con58344)
Res72196 = keras.layers.Reshape((1, 4), name = 'Res72196', )(Res90389)
Ave13295 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave13295', )(Res72196)
model = tf.keras.models.Model(inputs=[in0Glo25282], outputs=Ave13295)
w = model.get_layer('Con58344').get_weights() 
w[0] = np.array([[[[[0.2583], [0.3416], [0.9814], [0.8779]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con58344').set_weights(w) 
in0Glo25282 = tf.constant([[[[[1.1877, 1.0441]], [[1.0487, 1.6016]]]]])
print (np.array2string(model.predict([in0Glo25282],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave13295.png')

LGlo25282 = global_max_pool3D_layer([[[[[1.1877, 1.0441]], [[1.0487, 1.6016]]]]], Glo25282), 
LRes53017 = reshape_layer(Glo25282, [2, 1], Res53017), 
LRes13284 = reshape_layer(Res53017, [2, 1, 1], Res13284), 
LRes27845 = reshape_layer(Res13284, [2, 1, 1, 1], Res27845), 
LGlo43007 = global_max_pool3D_layer(Res27845, Glo43007), 
LRes89269 = reshape_layer(Glo43007, [1, 1], Res89269), 
LRes81592 = reshape_layer(Res89269, [1, 1, 1], Res81592), 
LRes63454 = reshape_layer(Res81592, [1, 1, 1, 1], Res63454), 
LCon58344 = conv3D_transpose_layer(Res63454, 1, 1, 1,[[[[[0.2583], [0.3416], [0.9814], [0.8779]]]]],[0, 0, 0, 0], 1, 1, 1, false, Con58344), 
LRes90389 = reshape_layer(Con58344, [1, 1, 4], Res90389), 
LRes72196 = reshape_layer(Res90389, [1, 4], Res72196), 
LAve13295 = average_pooling1D_layer(Res72196, 1, Ave13295), 
exec_layers([LGlo25282,LRes53017,LRes13284,LRes27845,LGlo43007,LRes89269,LRes81592,LRes63454,LCon58344,LRes90389,LRes72196,LAve13295],["Glo25282","Res53017","Res13284","Res27845","Glo43007","Res89269","Res81592","Res63454","Con58344","Res90389","Res72196","Ave13295"],Ave13295,"Ave13295")

Actual (Unparsed): [[[0.4136933, 0.5471066, 1.5718103, 1.4060447]]]

Expected (Unparsed): [[[0.41369327999999994,0.54710656,1.57181024,1.40604464]]]

Actual:   [[[0.4137, 0.5472, 1.5719, 1.4061]]]

Expected: [[[0.4137, 0.5472, 1.5719, 1.4061]]]