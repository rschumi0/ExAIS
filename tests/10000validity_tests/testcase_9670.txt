import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max26841 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max26841 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Add50172 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add50172 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con88447 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Max5544 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Max5544 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Max26841 = keras.layers.Maximum(name = 'Max26841', )([in0Max26841,in1Max26841])
Res26199 = keras.layers.Reshape((1, 2, 4), name = 'Res26199', )(Max26841)
Add50172 = keras.layers.Add(name = 'Add50172', )([in0Add50172,in1Add50172])
Zer64701 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer64701', )(Add50172)
Con88447 = keras.layers.Concatenate(axis=3, name = 'Con88447', )([Zer64701,in0Con88447])
Add70088 = keras.layers.Add(name = 'Add70088', )([Res26199,Con88447])
Res28855 = keras.layers.Reshape((1, 2, 4, 1), name = 'Res28855', )(Add70088)
Zer62249 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (3, 0)), name = 'Zer62249', )(Res28855)
Max5544 = keras.layers.Maximum(name = 'Max5544', )([in0Max5544,in1Max5544])
Zer81853 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (6, 0)), name = 'Zer81853', )(Max5544)
Mul35901 = keras.layers.Multiply(name = 'Mul35901', )([Zer62249,Zer81853])
model = tf.keras.models.Model(inputs=[in0Max26841,in1Max26841,in0Add50172,in1Add50172,in0Con88447,in0Max5544,in1Max5544], outputs=Mul35901)
in0Max26841 = tf.constant([[[[[0.3814, 0.2972], [0.8865, 0.2929]], [[0.2488, 0.0204], [0.0875, 0.6423]]]]])
in1Max26841 = tf.constant([[[[[0.1041, 0.4662], [0.98, 0.6078]], [[0.9441, 0.2946], [0.5125, 0.8736]]]]])
in0Add50172 = tf.constant([[[[0.9542]]]])
in1Add50172 = tf.constant([[[[0.1852]]]])
in0Con88447 = tf.constant([[[[0.4366, 0.1795, 0.2035], [0.9804, 0.2897, 0.1616]]]])
in0Max5544 = tf.constant([[[[[0.3806]]], [[[0.2207]]]]])
in1Max5544 = tf.constant([[[[[0.6193]]], [[[0.3525]]]]])
print (np.array2string(model.predict([in0Max26841,in1Max26841,in0Add50172,in1Add50172,in0Con88447,in0Max5544,in1Max5544],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul35901.png')

LMax26841 = maximum_layer([[[[[[0.3814, 0.2972], [0.8865, 0.2929]], [[0.2488, 0.0204], [0.0875, 0.6423]]]]], [[[[[0.1041, 0.4662], [0.98, 0.6078]], [[0.9441, 0.2946], [0.5125, 0.8736]]]]]], Max26841), 
LRes26199 = reshape_layer(Max26841, [1, 2, 4], Res26199), 
LAdd50172 = add_layer([[[[[0.9542]]]], [[[[0.1852]]]]], Add50172), 
LZer64701 = zero_padding2D_layer(Add50172, 0, 0, 1, 0, Zer64701), 
LCon88447 = concatenate_layer([Zer64701,[[[[0.4366, 0.1795, 0.2035], [0.9804, 0.2897, 0.1616]]]]], 3, Con88447), 
LAdd70088 = add_layer([Res26199,Con88447], Add70088), 
LRes28855 = reshape_layer(Add70088, [1, 2, 4, 1], Res28855), 
LZer62249 = zero_padding3D_layer(Res28855, 1, 0, 1, 0, 3, 0, Zer62249), 
LMax5544 = maximum_layer([[[[[[0.3806]]], [[[0.2207]]]]], [[[[[0.6193]]], [[[0.3525]]]]]], Max5544), 
LZer81853 = zero_padding3D_layer(Max5544, 0, 0, 2, 0, 6, 0, Zer81853), 
LMul35901 = multiply_layer([Zer62249,Zer81853], Mul35901), 
exec_layers([LMax26841,LRes26199,LAdd50172,LZer64701,LCon88447,LAdd70088,LRes28855,LZer62249,LMax5544,LZer81853,LMul35901],["Max26841","Res26199","Add50172","Zer64701","Con88447","Add70088","Res28855","Zer62249","Max5544","Zer81853","Mul35901"],Mul35901,"Mul35901")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.3649080]]]]]

Expected (Unparsed): [[[[[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0],[0],[0.0]]],[[[0],[0],[0],[0],[0],[0],[0]],[[0],[0],[0],[0.0],[0.0],[0.0],[0.0]],[[0],[0],[0],[0.0],[0.0],[0.0],[0.364908]]]]]

Actual:   [[[[[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0.365]]]]]

Expected: [[[[[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0.365]]]]]