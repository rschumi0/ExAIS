import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc85199 = tf.keras.layers.Input(shape=([2, 2]))

Loc85199 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc85199', )(in0Loc85199)
ReL94933 = keras.layers.ReLU(max_value=4.8498471842413755, negative_slope=5.984466695984102, threshold=2.0909235413965344, name = 'ReL94933', )(Loc85199)
Lea16054 = keras.layers.LeakyReLU(alpha=5.311554766322275, name = 'Lea16054', )(ReL94933)
Res49947 = keras.layers.Reshape((2, 4, 1), name = 'Res49947', )(Lea16054)
Res81529 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res81529', )(Res49947)
Con5742 = keras.layers.Conv3DTranspose(2, (1, 2, 1),strides=(1, 2, 1), padding='same', name = 'Con5742', )(Res81529)
model = tf.keras.models.Model(inputs=[in0Loc85199], outputs=Con5742)
w = model.get_layer('Loc85199').get_weights() 
w[0] = np.array([[[0.5033, 0.9045, 0.4944, 0.0852], [0.9858, 0.4566, 0.2391, 0.5786]], [[0.2648, 0.2223, 0.3436, 0.0098], [0.9812, 0.8926, 0.5198, 0.7679]]])
w[1] = np.array([[0, 0, 0, 0], [0, 0, 0, 0]])
model.get_layer('Loc85199').set_weights(w) 
w = model.get_layer('Con5742').get_weights() 
w[0] = np.array([[[[[0.1157], [0.017]]], [[[0.8435], [0.1433]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con5742').set_weights(w) 
in0Loc85199 = tf.constant([[[0.4037, 0.4321], [0.568, 0.4089]]])
print (np.array2string(model.predict([in0Loc85199],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con5742.png')

LLoc85199 = locally_connected1D_layer([[[0.4037, 0.4321], [0.568, 0.4089]]], 1,[[[0.5033, 0.9045, 0.4944, 0.0852], [0.9858, 0.4566, 0.2391, 0.5786]], [[0.2648, 0.2223, 0.3436, 0.0098], [0.9812, 0.8926, 0.5198, 0.7679]]],[[0, 0, 0, 0], [0, 0, 0, 0]], 1, Loc85199), 
LReL94933 = relu_layer(Loc85199, 4.8498471842413755, 5.984466695984102, 2.0909235413965344, ReL94933), 
LLea16054 = leaky_relu_layer(ReL94933, 5.311554766322275, Lea16054), 
LRes49947 = reshape_layer(Lea16054, [2, 4, 1], Res49947), 
LRes81529 = reshape_layer(Res49947, [2, 4, 1, 1], Res81529), 
LCon5742 = conv3D_transpose_layer(Res81529, 1, 2, 1,[[[[[0.1157], [0.017]]], [[[0.8435], [0.1433]]]]],[0, 0], 1, 2, 1, true, Con5742), 
exec_layers([LLoc85199,LReL94933,LLea16054,LRes49947,LRes81529,LCon5742],["Loc85199","ReL94933","Lea16054","Res49947","Res81529","Con5742"],Con5742,"Con5742")

Actual (Unparsed): [[[[[-5.3760297, -0.7899093]], [[-39.1934404, -6.6584707]], [[-5.6213453, -0.8259539]], [[-40.9818904, -6.9623057]], [[-6.5758615, -0.9662026]], [[-47.9407014, -8.1445199]], [[-6.6438852, -0.9761975]], [[-48.4366220, -8.2287705]]], [[[-5.6611546, -0.8318032]], [[-41.2721170, -7.0116116]], [[-5.8831742, -0.8644249]], [[-42.8907295, -7.2865934]], [[-6.1904104, -0.9095676]], [[-45.1306064, -7.6671202]], [[-6.5146039, -0.9572020]], [[-47.4941091, -8.0686495]]]]]

Expected (Unparsed): [[[[[-5.376029540293787,-0.7899092669403146]],[[-39.19343921553855,-6.658470467796887]],[[-5.621345081694937,-0.8259539013726356]],[[-40.98188916516577,-6.962305533335216]],[[-6.575861284557212,-0.966202608794059]],[[-47.94070003045816,-8.144519637658156]],[[-6.643885009052384,-0.9761974516325889]],[[-48.43662061482875,-8.228770283467647]]],[[[-5.661154470821896,-0.8318031633878327]],[[-41.2721157833904,-7.011611371380965]],[[-5.883173985926746,-0.8644248726080785]],[[-42.89072823793613,-7.286593190866921]],[[-6.190410233854754,-0.9095676229518654]],[[-45.130605291758734,-7.667120021706019]],[[-6.5146037472732035,-0.9572019334800732]],[[-47.49410769943775,-8.068649239276146]]]]]

Actual:   [[[[[-5.376, -0.7899]], [[-39.1934, -6.6584]], [[-5.6213, -0.8259]], [[-40.9818, -6.9623]], [[-6.5758, -0.9662]], [[-47.9407, -8.1445]], [[-6.6438, -0.9761]], [[-48.4366, -8.2287]]], [[[-5.6611, -0.8318]], [[-41.2721, -7.0116]], [[-5.8831, -0.8644]], [[-42.8907, -7.2865]], [[-6.1904, -0.9095]], [[-45.1306, -7.6671]], [[-6.5146, -0.9572]], [[-47.4941, -8.0686]]]]]

Expected: [[[[[-5.376, -0.7899]], [[-39.1934, -6.6584]], [[-5.6213, -0.8259]], [[-40.9818, -6.9623]], [[-6.5758, -0.9662]], [[-47.9407, -8.1445]], [[-6.6438, -0.9761]], [[-48.4366, -8.2287]]], [[[-5.6611, -0.8318]], [[-41.2721, -7.0116]], [[-5.8831, -0.8644]], [[-42.8907, -7.2865]], [[-6.1904, -0.9095]], [[-45.1306, -7.6671]], [[-6.5146, -0.9572]], [[-47.4941, -8.0686]]]]]