import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo17064 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Glo17064 = keras.layers.GlobalMaxPool3D(name = 'Glo17064', )(in0Glo17064)
Fla56240 = keras.layers.Flatten(name = 'Fla56240', )(Glo17064)
Res55020 = keras.layers.Reshape((2, 1), name = 'Res55020', )(Fla56240)
Res13559 = keras.layers.Reshape((2, 1, 1), name = 'Res13559', )(Res55020)
Res72022 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res72022', )(Res13559)
Up_25816 = keras.layers.UpSampling3D(size=(1, 2, 1), name = 'Up_25816', )(Res72022)
Res26841 = keras.layers.Reshape((2, 2, 1), name = 'Res26841', )(Up_25816)
Res58588 = keras.layers.Reshape((2, 2), name = 'Res58588', )(Res26841)
Sep68775 = keras.layers.SeparableConv1D(4, (1),strides=(2), padding='same', name = 'Sep68775', )(Res58588)
model = tf.keras.models.Model(inputs=[in0Glo17064], outputs=Sep68775)
w = model.get_layer('Sep68775').get_weights() 
w[0] = np.array([[[0.2838], [0.3598]]])
w[1] = np.array([[[0.1436, 0.7187, 0.1483, 0.9623], [0.4114, 0.1611, 0.3757, 0.0555]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep68775').set_weights(w) 
in0Glo17064 = tf.constant([[[[[1.1021, 1.5903], [1.1161, 1.0861]], [[1.2122, 1.5052], [1.1498, 1.5229]]], [[[1.0372, 1.9356], [1.5022, 1.3691]], [[1.4782, 1.9598], [1.163, 1.6458]]]]])
print (np.array2string(model.predict([in0Glo17064],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep68775.png')

LGlo17064 = global_max_pool3D_layer([[[[[1.1021, 1.5903], [1.1161, 1.0861]], [[1.2122, 1.5052], [1.1498, 1.5229]]], [[[1.0372, 1.9356], [1.5022, 1.3691]], [[1.4782, 1.9598], [1.163, 1.6458]]]]], Glo17064), 
LFla56240 = flatten_layer(Glo17064, Fla56240), 
LRes55020 = reshape_layer(Fla56240, [2, 1], Res55020), 
LRes13559 = reshape_layer(Res55020, [2, 1, 1], Res13559), 
LRes72022 = reshape_layer(Res13559, [2, 1, 1, 1], Res72022), 
LUp_25816 = up_sampling3D_layer(Res72022, 1, 2, 1, Up_25816), 
LRes26841 = reshape_layer(Up_25816, [2, 2, 1], Res26841), 
LRes58588 = reshape_layer(Res26841, [2, 2], Res58588), 
LSep68775 = separable_conv1D_layer(Res58588, 1,[[[[0.2838], [0.3598]]],[[[0.1436, 0.7187, 0.1483, 0.9623], [0.4114, 0.1611, 0.3757, 0.0555]]]],[0, 0, 0, 0], 2, true, Sep68775), 
exec_layers([LGlo17064,LFla56240,LRes55020,LRes13559,LRes72022,LUp_25816,LRes26841,LRes58588,LSep68775],["Glo17064","Fla56240","Res55020","Res13559","Res72022","Up_25816","Res26841","Res58588","Sep68775"],Sep68775,"Sep68775")

Actual (Unparsed): [[[0.2835784, 0.3934725, 0.2662866, 0.4402492]]]

Expected (Unparsed): [[[0.28357840588,0.39347250784800003,0.26628658167999997,0.44024921320800003]]]

Actual:   [[[0.2836, 0.3935, 0.2663, 0.4403]]]

Expected: [[[0.2836, 0.3935, 0.2663, 0.4403]]]