import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul30593 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul30593 = tf.keras.layers.Input(shape=([1, 2]))
in0Sub50069 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub50069 = tf.keras.layers.Input(shape=([2, 2]))

Mul30593 = keras.layers.Multiply(name = 'Mul30593', )([in0Mul30593,in1Mul30593])
Res48644 = keras.layers.Reshape((1, 2, 1), name = 'Res48644', )(Mul30593)
Max16194 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Max16194', )(Res48644)
Thr99216 = keras.layers.ThresholdedReLU(theta=2.185909048251127, name = 'Thr99216', )(Max16194)
Res57822 = keras.layers.Reshape((1, 2), name = 'Res57822', )(Thr99216)
Zer37741 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer37741', )(Res57822)
Sub50069 = keras.layers.Subtract(name = 'Sub50069', )([in0Sub50069,in1Sub50069])
Sub306 = keras.layers.Subtract(name = 'Sub306', )([Zer37741,Sub50069])
model = tf.keras.models.Model(inputs=[in0Mul30593,in1Mul30593,in0Sub50069,in1Sub50069], outputs=Sub306)
in0Mul30593 = tf.constant([[[0.0004, 0.8478]]])
in1Mul30593 = tf.constant([[[0.0136, 0.3688]]])
in0Sub50069 = tf.constant([[[0.9964, 0.9397], [0.1993, 0.7671]]])
in1Sub50069 = tf.constant([[[0.7623, 0.2096], [0.3311, 0.4073]]])
print (np.array2string(model.predict([in0Mul30593,in1Mul30593,in0Sub50069,in1Sub50069],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub306.png')

LMul30593 = multiply_layer([[[[0.0004, 0.8478]]], [[[0.0136, 0.3688]]]], Mul30593), 
LRes48644 = reshape_layer(Mul30593, [1, 2, 1], Res48644), 
LMax16194 = max_pool2D_layer(Res48644, 1, 1, 1, 1, true, Max16194), 
LThr99216 = thresholded_relu_layer(Max16194, 2.185909048251127, Thr99216), 
LRes57822 = reshape_layer(Thr99216, [1, 2], Res57822), 
LZer37741 = zero_padding1D_layer(Res57822, 1, 0, Zer37741), 
LSub50069 = subtract_layer([[[0.9964, 0.9397], [0.1993, 0.7671]]], [[[0.7623, 0.2096], [0.3311, 0.4073]]], Sub50069), 
LSub306 = subtract_layer(Zer37741,Sub50069, Sub306), 
exec_layers([LMul30593,LRes48644,LMax16194,LThr99216,LRes57822,LZer37741,LSub50069,LSub306],["Mul30593","Res48644","Max16194","Thr99216","Res57822","Zer37741","Sub50069","Sub306"],Sub306,"Sub306")

Actual (Unparsed): [[[-0.2341000, -0.7301000], [0.1318000, -0.3598000]]]

Expected (Unparsed): [[[-0.23409999999999997,-0.7301],[0.1318,-0.3598]]]

Actual:   [[[-0.2341, -0.7301], [0.1318, -0.3598]]]

Expected: [[[-0.234, -0.7301], [0.1318, -0.3598]]]