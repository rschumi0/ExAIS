import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max18761 = tf.keras.layers.Input(shape=([2, 1]))
in0ELU62516 = tf.keras.layers.Input(shape=([1, 1]))
in0Con13378 = tf.keras.layers.Input(shape=([7]))
in0Max2383 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max2383 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Mul38272 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul38272 = tf.keras.layers.Input(shape=([2, 1]))
in0Con16385 = tf.keras.layers.Input(shape=([5]))
in0Con11384 = tf.keras.layers.Input(shape=([1]))

Max18761 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max18761', )(in0Max18761)
Fla87599 = keras.layers.Flatten(name = 'Fla87599', )(Max18761)
ELU62516 = keras.layers.ELU(alpha=9.359789415821133, name = 'ELU62516', input_shape=(1, 1))(in0ELU62516)
Fla69612 = keras.layers.Flatten(name = 'Fla69612', )(ELU62516)
Con13378 = keras.layers.Concatenate(axis=1, name = 'Con13378', )([Fla69612,in0Con13378])
Max2383 = keras.layers.Maximum(name = 'Max2383', )([in0Max2383,in1Max2383])
Res96219 = keras.layers.Reshape((2, 4), name = 'Res96219', )(Max2383)
Fla86730 = keras.layers.Flatten(name = 'Fla86730', )(Res96219)
Mul38272 = keras.layers.Multiply(name = 'Mul38272', )([in0Mul38272,in1Mul38272])
Sim11557 = keras.layers.SimpleRNN(3,name = 'Sim11557', )(Mul38272)
ELU29209 = keras.layers.ELU(alpha=9.722355345715492, name = 'ELU29209', )(Sim11557)
Con16385 = keras.layers.Concatenate(axis=1, name = 'Con16385', )([ELU29209,in0Con16385])
Sub84888 = keras.layers.Subtract(name = 'Sub84888', )([Fla86730,Con16385])
Dot2536 = keras.layers.Dot(axes=(1, 1), name = 'Dot2536', )([Con13378,Sub84888])
Con11384 = keras.layers.Concatenate(axis=1, name = 'Con11384', )([Dot2536,in0Con11384])
Min1409 = keras.layers.Minimum(name = 'Min1409', )([Fla87599,Con11384])
model = tf.keras.models.Model(inputs=[in0Max18761,in0ELU62516,in0Con13378,in0Max2383,in1Max2383,in0Mul38272,in1Mul38272,in0Con16385,in0Con11384], outputs=Min1409)
w = model.get_layer('Sim11557').get_weights() 
w[0] = np.array([[4, 7, 3]])
w[1] = np.array([[8, 2, 4], [2, 5, 10], [10, 8, 8]])
w[2] = np.array([8, 7, 8])
model.get_layer('Sim11557').set_weights(w) 
in0Max18761 = tf.constant([[[1.8051], [1.7934]]])
in0ELU62516 = tf.constant([[[0.825]]])
in0Con13378 = tf.constant([[0.3982, 0.7497, 0.3242, 0.9911, 0.7987, 0.3501, 0.8082]])
in0Max2383 = tf.constant([[[[0.8633, 0.6902], [0.5188, 0.1862]], [[0.1914, 0.6952], [0.2295, 0.0361]]]])
in1Max2383 = tf.constant([[[[0.1106, 0.766], [0.7512, 0.5389]], [[0.2289, 0.4793], [0.3833, 0.6714]]]])
in0Mul38272 = tf.constant([[[0.487], [0.1757]]])
in1Mul38272 = tf.constant([[[0.1045], [0.8609]]])
in0Con16385 = tf.constant([[0.8919, 0.0746, 0.8416, 0.6509, 0.0182]])
in0Con11384 = tf.constant([[0.5421]])
print (np.array2string(model.predict([in0Max18761,in0ELU62516,in0Con13378,in0Max2383,in1Max2383,in0Mul38272,in1Mul38272,in0Con16385,in0Con11384],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min1409.png')

LMax18761 = max_pool1D_layer([[[1.8051], [1.7934]]], 1, Max18761), 
LFla87599 = flatten_layer(Max18761, Fla87599), 
LELU62516 = elu_layer([[[0.825]]], 9.359789415821133, ELU62516), 
LFla69612 = flatten_layer(ELU62516, Fla69612), 
LCon13378 = concatenate_layer([Fla69612,[[0.3982, 0.7497, 0.3242, 0.9911, 0.7987, 0.3501, 0.8082]]], 1, Con13378), 
LMax2383 = maximum_layer([[[[[0.8633, 0.6902], [0.5188, 0.1862]], [[0.1914, 0.6952], [0.2295, 0.0361]]]], [[[[0.1106, 0.766], [0.7512, 0.5389]], [[0.2289, 0.4793], [0.3833, 0.6714]]]]], Max2383), 
LRes96219 = reshape_layer(Max2383, [2, 4], Res96219), 
LFla86730 = flatten_layer(Res96219, Fla86730), 
LMul38272 = multiply_layer([[[[0.487], [0.1757]]], [[[0.1045], [0.8609]]]], Mul38272), 
LSim11557 = simple_rnn_layer(Mul38272,[[4, 7, 3]],[[8, 2, 4], [2, 5, 10], [10, 8, 8]],[8, 7, 8], Sim11557), 
LELU29209 = elu_layer(Sim11557, 9.722355345715492, ELU29209), 
LCon16385 = concatenate_layer([ELU29209,[[0.8919, 0.0746, 0.8416, 0.6509, 0.0182]]], 1, Con16385), 
LSub84888 = subtract_layer(Fla86730,Con16385, Sub84888), 
LDot2536 = dot_layer(Con13378,Sub84888, 1, 1, Dot2536), 
LCon11384 = concatenate_layer([Dot2536,[[0.5421]]], 1, Con11384), 
LMin1409 = minimum_layer([Fla87599,Con11384], Min1409), 
exec_layers([LMax18761,LFla87599,LELU62516,LFla69612,LCon13378,LMax2383,LRes96219,LFla86730,LMul38272,LSim11557,LELU29209,LCon16385,LSub84888,LDot2536,LCon11384,LMin1409],["Max18761","Fla87599","ELU62516","Fla69612","Con13378","Max2383","Res96219","Fla86730","Mul38272","Sim11557","ELU29209","Con16385","Sub84888","Dot2536","Con11384","Min1409"],Min1409,"Min1409")

Actual (Unparsed): [[-0.0366977, 0.5421000]]

Expected (Unparsed): [[-0.036697729999999984,0.5421]]

Actual:   [[-0.0366, 0.5421]]

Expected: [[-0.0366, 0.5421]]