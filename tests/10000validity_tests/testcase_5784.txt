import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo90779 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con20327 = tf.keras.layers.Input(shape=([2, 3]))
in0Cro76998 = tf.keras.layers.Input(shape=([2, 3, 4]))

Glo90779 = keras.layers.GlobalMaxPool2D(name = 'Glo90779', )(in0Glo90779)
Res63536 = keras.layers.Reshape((2, 1), name = 'Res63536', )(Glo90779)
Con20327 = keras.layers.Concatenate(axis=2, name = 'Con20327', )([Res63536,in0Con20327])
Cro76998 = keras.layers.Cropping2D(cropping=((0, 1), (2, 0)), name = 'Cro76998', )(in0Cro76998)
Res88853 = keras.layers.Reshape((1, 4), name = 'Res88853', )(Cro76998)
Dot47958 = keras.layers.Dot(axes=(2, 2), name = 'Dot47958', )([Con20327,Res88853])
Res87117 = keras.layers.Reshape((2, 1, 1), name = 'Res87117', )(Dot47958)
Res85833 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res85833', )(Res87117)
Glo1117 = keras.layers.GlobalMaxPool3D(name = 'Glo1117', )(Res85833)
Res5667 = keras.layers.Reshape((1, 1), name = 'Res5667', )(Glo1117)
Res54730 = keras.layers.Reshape((1, 1, 1), name = 'Res54730', )(Res5667)
Up_9891 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_9891', )(Res54730)
model = tf.keras.models.Model(inputs=[in0Glo90779,in0Con20327,in0Cro76998], outputs=Up_9891)
in0Glo90779 = tf.constant([[[[1.1651, 1.3081]]]])
in0Con20327 = tf.constant([[[0.551, 0.4219, 0.7749], [0.6192, 0.488, 0.6297]]])
in0Cro76998 = tf.constant([[[[1.6842, 1.5326, 1.0217, 1.1552], [1.4504, 1.6995, 1.4937, 1.0549], [1.624, 1.398, 1.9499, 1.4948]], [[1.47, 1.9102, 1.2592, 1.6566], [1.3038, 1.5157, 1.1857, 1.096], [1.5406, 1.788, 1.1593, 1.2419]]]])
print (np.array2string(model.predict([in0Glo90779,in0Con20327,in0Cro76998],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_9891.png')

LGlo90779 = global_max_pool2D_layer([[[[1.1651, 1.3081]]]], Glo90779), 
LRes63536 = reshape_layer(Glo90779, [2, 1], Res63536), 
LCon20327 = concatenate_layer([Res63536,[[[0.551, 0.4219, 0.7749], [0.6192, 0.488, 0.6297]]]], 2, Con20327), 
LCro76998 = cropping2D_layer([[[[1.6842, 1.5326, 1.0217, 1.1552], [1.4504, 1.6995, 1.4937, 1.0549], [1.624, 1.398, 1.9499, 1.4948]], [[1.47, 1.9102, 1.2592, 1.6566], [1.3038, 1.5157, 1.1857, 1.096], [1.5406, 1.788, 1.1593, 1.2419]]]], 0, 1, 2, 0, Cro76998), 
LRes88853 = reshape_layer(Cro76998, [1, 4], Res88853), 
LDot47958 = dot_layer(Con20327,Res88853, 2, 2, Dot47958), 
LRes87117 = reshape_layer(Dot47958, [2, 1, 1], Res87117), 
LRes85833 = reshape_layer(Res87117, [2, 1, 1, 1], Res85833), 
LGlo1117 = global_max_pool3D_layer(Res85833, Glo1117), 
LRes5667 = reshape_layer(Glo1117, [1, 1], Res5667), 
LRes54730 = reshape_layer(Res5667, [1, 1, 1], Res54730), 
LUp_9891 = up_sampling2D_layer(Res54730, 1, 1, Up_9891), 
exec_layers([LGlo90779,LRes63536,LCon20327,LCro76998,LRes88853,LDot47958,LRes87117,LRes85833,LGlo1117,LRes5667,LRes54730,LUp_9891],["Glo90779","Res63536","Con20327","Cro76998","Res88853","Dot47958","Res87117","Res85833","Glo1117","Res5667","Res54730","Up_9891"],Up_9891,"Up_9891")

Actual (Unparsed): [[[[4.8828227]]]]

Expected (Unparsed): [[[[4.88282276]]]]

Actual:   [[[[4.8829]]]]

Expected: [[[[4.8829]]]]