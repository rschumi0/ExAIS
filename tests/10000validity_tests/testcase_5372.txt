import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0LST39407 = tf.keras.layers.Input(shape=([3, 2]))

LST39407 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST39407', )(in0LST39407)
Res23509 = keras.layers.Reshape((1, 1), name = 'Res23509', )(LST39407)
Con99452 = keras.layers.Conv1D(2, (1),strides=(1), padding='valid', dilation_rate=(1), name = 'Con99452', )(Res23509)
Con7844 = keras.layers.Conv1D(4, (1),strides=(9), padding='valid', dilation_rate=(1), name = 'Con7844', )(Con99452)
model = tf.keras.models.Model(inputs=[in0LST39407], outputs=Con7844)
w = model.get_layer('LST39407').get_weights() 
w[0] = np.array([[9, 3, 6, 7], [7, 4, 4, 1]])
w[1] = np.array([[6, 3, 5, 9]])
w[2] = np.array([9, 10, 8, 9])
model.get_layer('LST39407').set_weights(w) 
w = model.get_layer('Con99452').get_weights() 
w[0] = np.array([[[0.4679, 0.0145]]])
w[1] = np.array([0, 0])
model.get_layer('Con99452').set_weights(w) 
w = model.get_layer('Con7844').get_weights() 
w[0] = np.array([[[0.5697, 0.5439, 0.7127, 0.1037], [0.7903, 0.0621, 0.8939, 0.3832]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con7844').set_weights(w) 
in0LST39407 = tf.constant([[[6, 8], [6, 6], [9, 6]]])
print (np.array2string(model.predict([in0LST39407],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con7844.png')

LLST39407 = lstm_layer([[[6, 8], [6, 6], [9, 6]]],[[9, 3, 6, 7], [7, 4, 4, 1]],[[6, 3, 5, 9]],[9, 10, 8, 9], LST39407), 
LRes23509 = reshape_layer(LST39407, [1, 1], Res23509), 
LCon99452 = conv1D_layer(Res23509, 1,[[[0.4679, 0.0145]]],[0, 0], 1, false, 1, Con99452), 
LCon7844 = conv1D_layer(Con99452, 1,[[[0.5697, 0.5439, 0.7127, 0.1037], [0.7903, 0.0621, 0.8939, 0.3832]]],[0, 0, 0, 0], 9, false, 1, Con7844), 
exec_layers([LLST39407,LRes23509,LCon99452,LCon7844],["LST39407","Res23509","Con99452","Con7844"],Con7844,"Con7844")

Actual (Unparsed): [[[0.2766471, 0.2541283, 0.3447207, 0.0538102]]]

Expected (Unparsed): [[[0.2766470928283971,0.25412828731304377,0.34472067913213833,0.05381020279961215]]]

Actual:   [[[0.2767, 0.2542, 0.3448, 0.0539]]]

Expected: [[[0.2767, 0.2542, 0.3448, 0.0539]]]