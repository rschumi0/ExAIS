import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con25409 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Con25409 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con25409', )(in0Con25409)
Fla15243 = keras.layers.Flatten(name = 'Fla15243', )(Con25409)
Res75583 = keras.layers.Reshape((3, 1), name = 'Res75583', )(Fla15243)
Res43947 = keras.layers.Reshape((3, 1, 1), name = 'Res43947', )(Res75583)
Res1723 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res1723', )(Res43947)
Con55963 = keras.layers.Conv3DTranspose(4, (2, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con55963', )(Res1723)
Res42588 = keras.layers.Reshape((3, 1, 4), name = 'Res42588', )(Con55963)
Con57093 = keras.layers.Conv2D(2, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con57093', )(Res42588)
Glo81718 = keras.layers.GlobalMaxPool2D(name = 'Glo81718', )(Con57093)
model = tf.keras.models.Model(inputs=[in0Con25409], outputs=Glo81718)
w = model.get_layer('Con25409').get_weights() 
w[0] = np.array([[[[[0.4213, 0.7926], [0.7032, 0.9149], [0.9344, 0.9721]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con25409').set_weights(w) 
w = model.get_layer('Con55963').get_weights() 
w[0] = np.array([[[[[0.4959], [0.4378], [0.7558], [0.5695]]]], [[[[0.3598], [0.9631], [0.8392], [0.744]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con55963').set_weights(w) 
w = model.get_layer('Con57093').get_weights() 
w[0] = np.array([[[[0.2203, 0.0902], [0.1039, 0.1446], [0.7964, 0.2441], [0.3107, 0.1395]]]])
w[1] = np.array([0, 0])
model.get_layer('Con57093').set_weights(w) 
in0Con25409 = tf.constant([[[[[0.4781, 0.7661]]]]])
print (np.array2string(model.predict([in0Con25409],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo81718.png')

LCon25409 = conv3D_transpose_layer([[[[[0.4781, 0.7661]]]]], 1, 1, 1,[[[[[0.4213, 0.7926], [0.7032, 0.9149], [0.9344, 0.9721]]]]],[0, 0, 0], 1, 1, 1, false, Con25409), 
LFla15243 = flatten_layer(Con25409, Fla15243), 
LRes75583 = reshape_layer(Fla15243, [3, 1], Res75583), 
LRes43947 = reshape_layer(Res75583, [3, 1, 1], Res43947), 
LRes1723 = reshape_layer(Res43947, [3, 1, 1, 1], Res1723), 
LCon55963 = conv3D_transpose_layer(Res1723, 2, 1, 1,[[[[[0.4959], [0.4378], [0.7558], [0.5695]]]], [[[[0.3598], [0.9631], [0.8392], [0.744]]]]],[0, 0, 0, 0], 1, 1, 1, true, Con55963), 
LRes42588 = reshape_layer(Con55963, [3, 1, 4], Res42588), 
LCon57093 = conv2D_layer(Res42588, 1, 1,[[[[0.2203, 0.0902], [0.1039, 0.1446], [0.7964, 0.2441], [0.3107, 0.1395]]]],[0, 0], 1, 1, true, 1, 1, Con57093), 
LGlo81718 = global_max_pool2D_layer(Con57093, Glo81718), 
exec_layers([LCon25409,LFla15243,LRes75583,LRes43947,LRes1723,LCon55963,LRes42588,LCon57093,LGlo81718],["Con25409","Fla15243","Res75583","Res43947","Res1723","Con55963","Res42588","Con57093","Glo81718"],Glo81718,"Glo81718")

Actual (Unparsed): [[2.2312052, 0.9413692]]

Expected (Unparsed): [[2.231205202686057,0.9413691964642819]]

Actual:   [[2.2313, 0.9414]]

Expected: [[2.2313, 0.9414]]