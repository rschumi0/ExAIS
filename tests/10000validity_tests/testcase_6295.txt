import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min28349 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Min28349 = tf.keras.layers.Input(shape=([1, 1, 1]))

Min28349 = keras.layers.Minimum(name = 'Min28349', )([in0Min28349,in1Min28349])
Res95390 = keras.layers.Reshape((1, 1), name = 'Res95390', )(Min28349)
LST50655 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST50655', )(Res95390)
Res4439 = keras.layers.Reshape((1, 1), name = 'Res4439', )(LST50655)
Res35340 = keras.layers.Reshape((1, 1, 1), name = 'Res35340', )(Res4439)
Res13729 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res13729', )(Res35340)
Con60312 = keras.layers.Conv3D(2, (1, 1, 1),strides=(1, 1, 4), padding='same', dilation_rate=(1, 1, 1), name = 'Con60312', )(Res13729)
Res42832 = keras.layers.Reshape((1, 1, 2), name = 'Res42832', )(Con60312)
Res45177 = keras.layers.Reshape((1, 2), name = 'Res45177', )(Res42832)
Glo12458 = keras.layers.GlobalMaxPool1D(name = 'Glo12458', )(Res45177)
model = tf.keras.models.Model(inputs=[in0Min28349,in1Min28349], outputs=Glo12458)
w = model.get_layer('LST50655').get_weights() 
w[0] = np.array([[5, 6, 7, 10]])
w[1] = np.array([[3, 4, 6, 4]])
w[2] = np.array([7, 7, 4, 6])
model.get_layer('LST50655').set_weights(w) 
w = model.get_layer('Con60312').get_weights() 
w[0] = np.array([[[[[0.6994, 0.1638]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con60312').set_weights(w) 
in0Min28349 = tf.constant([[[[0.7445]]]])
in1Min28349 = tf.constant([[[[0.7016]]]])
print (np.array2string(model.predict([in0Min28349,in1Min28349],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo12458.png')

LMin28349 = minimum_layer([[[[[0.7445]]]], [[[[0.7016]]]]], Min28349), 
LRes95390 = reshape_layer(Min28349, [1, 1], Res95390), 
LLST50655 = lstm_layer(Res95390,[[5, 6, 7, 10]],[[3, 4, 6, 4]],[7, 7, 4, 6], LST50655), 
LRes4439 = reshape_layer(LST50655, [1, 1], Res4439), 
LRes35340 = reshape_layer(Res4439, [1, 1, 1], Res35340), 
LRes13729 = reshape_layer(Res35340, [1, 1, 1, 1], Res13729), 
LCon60312 = conv3D_layer(Res13729, 1, 1, 1,[[[[[0.6994, 0.1638]]]]],[0, 0], 1, 1, 4, true, 1, 1, 1, Con60312), 
LRes42832 = reshape_layer(Con60312, [1, 1, 2], Res42832), 
LRes45177 = reshape_layer(Res42832, [1, 2], Res45177), 
LGlo12458 = global_max_pool1D_layer(Res45177, Glo12458), 
exec_layers([LMin28349,LRes95390,LLST50655,LRes4439,LRes35340,LRes13729,LCon60312,LRes42832,LRes45177,LGlo12458],["Min28349","Res95390","LST50655","Res4439","Res35340","Res13729","Con60312","Res42832","Res45177","Glo12458"],Glo12458,"Glo12458")

Actual (Unparsed): [[0.5326497, 0.1247470]]

Expected (Unparsed): [[0.5326497333533668,0.12474696357346508]]

Actual:   [[0.5327, 0.1248]]

Expected: [[0.5327, 0.1248]]