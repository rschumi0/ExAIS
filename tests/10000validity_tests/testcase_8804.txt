import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot84908 = tf.keras.layers.Input(shape=([3]))
in1Dot84908 = tf.keras.layers.Input(shape=([3]))

Dot84908 = keras.layers.Dot(axes=(1, 1), name = 'Dot84908', )([in0Dot84908,in1Dot84908])
Res83317 = keras.layers.Reshape((1, 1), name = 'Res83317', )(Dot84908)
Res72006 = keras.layers.Reshape((1, 1, 1), name = 'Res72006', )(Res83317)
Max18895 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(7, 1), padding='same', name = 'Max18895', )(Res72006)
Glo28916 = keras.layers.GlobalMaxPool2D(name = 'Glo28916', )(Max18895)
Res81520 = keras.layers.Reshape((1, 1), name = 'Res81520', )(Glo28916)
Loc7044 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc7044', )(Res81520)
model = tf.keras.models.Model(inputs=[in0Dot84908,in1Dot84908], outputs=Loc7044)
w = model.get_layer('Loc7044').get_weights() 
w[0] = np.array([[[0.5318, 0.8838, 0.3823, 0.6233]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc7044').set_weights(w) 
in0Dot84908 = tf.constant([[0.0435, 0.3285, 0.7148]])
in1Dot84908 = tf.constant([[0.1277, 0.6191, 0.8263]])
print (np.array2string(model.predict([in0Dot84908,in1Dot84908],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc7044.png')

LDot84908 = dot_layer([[0.0435, 0.3285, 0.7148]], [[0.1277, 0.6191, 0.8263]], 1, 1, Dot84908), 
LRes83317 = reshape_layer(Dot84908, [1, 1], Res83317), 
LRes72006 = reshape_layer(Res83317, [1, 1, 1], Res72006), 
LMax18895 = max_pool2D_layer(Res72006, 1, 1, 7, 1, true, Max18895), 
LGlo28916 = global_max_pool2D_layer(Max18895, Glo28916), 
LRes81520 = reshape_layer(Glo28916, [1, 1], Res81520), 
LLoc7044 = locally_connected1D_layer(Res81520, 1,[[[0.5318, 0.8838, 0.3823, 0.6233]]],[[0, 0, 0, 0]], 1, Loc7044), 
exec_layers([LDot84908,LRes83317,LRes72006,LMax18895,LGlo28916,LRes81520,LLoc7044],["Dot84908","Res83317","Res72006","Max18895","Glo28916","Res81520","Loc7044"],Loc7044,"Loc7044")

Actual (Unparsed): [[[0.4252106, 0.7066587, 0.3056751, 0.4983711]]]

Expected (Unparsed): [[[0.42521054957200005,0.706658675652,0.305675052842,0.49837107098199995]]]

Actual:   [[[0.4253, 0.7067, 0.3057, 0.4984]]]

Expected: [[[0.4253, 0.7067, 0.3057, 0.4984]]]