import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lay29911 = tf.keras.layers.Input(shape=([2]))
in0Con91559 = tf.keras.layers.Input(shape=([2, 1]))
in0Min74313 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Min74313 = tf.keras.layers.Input(shape=([1, 2, 1]))

Lay29911 = keras.layers.LayerNormalization(axis=1, epsilon=2.23577588999396, name = 'Lay29911', )(in0Lay29911)
Res88709 = keras.layers.Reshape((2, 1), name = 'Res88709', )(Lay29911)
Con91559 = keras.layers.Concatenate(axis=2, name = 'Con91559', )([Res88709,in0Con91559])
Min74313 = keras.layers.Minimum(name = 'Min74313', )([in0Min74313,in1Min74313])
Res9491 = keras.layers.Reshape((1, 2), name = 'Res9491', )(Min74313)
Cro73579 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro73579', )(Res9491)
Zer93471 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer93471', )(Cro73579)
Ave74068 = keras.layers.Average(name = 'Ave74068', )([Con91559,Zer93471])
Sof74320 = keras.layers.Softmax(axis=1, name = 'Sof74320', )(Ave74068)
model = tf.keras.models.Model(inputs=[in0Lay29911,in0Con91559,in0Min74313,in1Min74313], outputs=Sof74320)
in0Lay29911 = tf.constant([[1.3757, 1.9787]])
in0Con91559 = tf.constant([[[0.5651], [0.2914]]])
in0Min74313 = tf.constant([[[[0.3044], [0.4629]]]])
in1Min74313 = tf.constant([[[[0.3321], [0.8348]]]])
print (np.array2string(model.predict([in0Lay29911,in0Con91559,in0Min74313,in1Min74313],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sof74320.png')

LLay29911 = layer_normalization_layer([[1.3757, 1.9787]], 1, 2.23577588999396, Lay29911), 
LRes88709 = reshape_layer(Lay29911, [2, 1], Res88709), 
LCon91559 = concatenate_layer([Res88709,[[[0.5651], [0.2914]]]], 2, Con91559), 
LMin74313 = minimum_layer([[[[[0.3044], [0.4629]]]], [[[[0.3321], [0.8348]]]]], Min74313), 
LRes9491 = reshape_layer(Min74313, [1, 2], Res9491), 
LCro73579 = cropping1D_layer(Res9491, 0, 0, Cro73579), 
LZer93471 = zero_padding1D_layer(Cro73579, 1, 0, Zer93471), 
LAve74068 = average_layer([Con91559,Zer93471], Ave74068), 
LSof74320 = softmax_layer(Ave74068, 1, Sof74320), 
exec_layers([LLay29911,LRes88709,LCon91559,LMin74313,LRes9491,LCro73579,LZer93471,LAve74068,LSof74320],["Lay29911","Res88709","Con91559","Min74313","Res9491","Cro73579","Zer93471","Ave74068","Sof74320"],Sof74320,"Sof74320")

Actual (Unparsed): [[[0.4134163, 0.4763676], [0.5865837, 0.5236324]]]

Expected (Unparsed): [[[0.41341633021585705,0.4763676215332094],[0.5865836697841429,0.5236323784667907]]]

Actual:   [[[0.4135, 0.4764], [0.5866, 0.5237]]]

Expected: [[[0.4135, 0.4764], [0.5866, 0.5237]]]