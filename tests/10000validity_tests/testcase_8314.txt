import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub69475 = tf.keras.layers.Input(shape=([2, 2, 3, 2]))
in1Sub69475 = tf.keras.layers.Input(shape=([2, 2, 3, 2]))

Sub69475 = keras.layers.Subtract(name = 'Sub69475', )([in0Sub69475,in1Sub69475])
Res7630 = keras.layers.Reshape((2, 2, 6), name = 'Res7630', )(Sub69475)
Res22980 = keras.layers.Reshape((2, 12), name = 'Res22980', )(Res7630)
Glo29052 = keras.layers.GlobalAveragePooling1D(name = 'Glo29052', )(Res22980)
Res13569 = keras.layers.Reshape((12, 1), name = 'Res13569', )(Glo29052)
Con76942 = keras.layers.Conv1D(4, (7),strides=(4), padding='same', dilation_rate=(1), name = 'Con76942', )(Res13569)
Res23937 = keras.layers.Reshape((3, 4, 1), name = 'Res23937', )(Con76942)
Zer76295 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer76295', )(Res23937)
model = tf.keras.models.Model(inputs=[in0Sub69475,in1Sub69475], outputs=Zer76295)
w = model.get_layer('Con76942').get_weights() 
w[0] = np.array([[[0.9585, 0.0135, 0.0144, 0.7595]], [[0.4785, 0.7556, 0.3667, 0.7155]], [[0.3311, 0.6832, 0.5289, 0.8243]], [[0.3305, 0.5605, 0.0847, 0.171]], [[0.3909, 0.8754, 0.5253, 0.2251]], [[0.161, 0.8269, 0.7225, 0.6654]], [[0.3598, 0.7128, 0.9405, 0.9321]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con76942').set_weights(w) 
in0Sub69475 = tf.constant([[[[[0.7801, 0.3833], [0.3744, 0.4746], [0.843, 0.4866]], [[0.4745, 0.8352], [0.407, 0.274], [0.6045, 0.2188]]], [[[0.1037, 0.254], [0.439, 0.8897], [0.1876, 0.9533]], [[0.6075, 0.7409], [0.4039, 0.8779], [0.8501, 0.6015]]]]])
in1Sub69475 = tf.constant([[[[[0.2216, 0.1862], [0.806, 0.5066], [0.4305, 0.2267]], [[0.441, 0.999], [0.5907, 0.9662], [0.1857, 0.1095]]], [[[0.7172, 0.8637], [0.8325, 0.3915], [0.8861, 0.926]], [[0.1151, 0.2737], [0.1559, 0.5263], [0.6849, 0.0403]]]]])
print (np.array2string(model.predict([in0Sub69475,in1Sub69475],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer76295.png')

LSub69475 = subtract_layer([[[[[0.7801, 0.3833], [0.3744, 0.4746], [0.843, 0.4866]], [[0.4745, 0.8352], [0.407, 0.274], [0.6045, 0.2188]]], [[[0.1037, 0.254], [0.439, 0.8897], [0.1876, 0.9533]], [[0.6075, 0.7409], [0.4039, 0.8779], [0.8501, 0.6015]]]]], [[[[[0.2216, 0.1862], [0.806, 0.5066], [0.4305, 0.2267]], [[0.441, 0.999], [0.5907, 0.9662], [0.1857, 0.1095]]], [[[0.7172, 0.8637], [0.8325, 0.3915], [0.8861, 0.926]], [[0.1151, 0.2737], [0.1559, 0.5263], [0.6849, 0.0403]]]]], Sub69475), 
LRes7630 = reshape_layer(Sub69475, [2, 2, 6], Res7630), 
LRes22980 = reshape_layer(Res7630, [2, 12], Res22980), 
LGlo29052 = global_average_pooling1D_layer(Res22980, Glo29052), 
LRes13569 = reshape_layer(Glo29052, [12, 1], Res13569), 
LCon76942 = conv1D_layer(Res13569, 7,[[[0.9585, 0.0135, 0.0144, 0.7595]], [[0.4785, 0.7556, 0.3667, 0.7155]], [[0.3311, 0.6832, 0.5289, 0.8243]], [[0.3305, 0.5605, 0.0847, 0.171]], [[0.3909, 0.8754, 0.5253, 0.2251]], [[0.161, 0.8269, 0.7225, 0.6654]], [[0.3598, 0.7128, 0.9405, 0.9321]]],[0, 0, 0, 0], 4, true, 1, Con76942), 
LRes23937 = reshape_layer(Con76942, [3, 4, 1], Res23937), 
LZer76295 = zero_padding2D_layer(Res23937, 1, 1, 1, 1, Zer76295), 
exec_layers([LSub69475,LRes7630,LRes22980,LGlo29052,LRes13569,LCon76942,LRes23937,LZer76295],["Sub69475","Res7630","Res22980","Glo29052","Res13569","Con76942","Res23937","Zer76295"],Zer76295,"Zer76295")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [-0.0980494], [-0.2047903], [0.0000464], [-0.1691072], [0.0000000]], [[0.0000000], [0.2926535], [0.1785802], [-0.0081103], [0.1348605], [0.0000000]], [[0.0000000], [0.3319571], [0.3671354], [0.1247414], [0.1232380], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0],[0],[0],[0]],[[0],[-0.09804938500000003],[-0.20479031500000006],[4.6424999999933325e-5],[-0.16910722000000006],[0]],[[0],[0.292653525],[0.17858022],[-0.008110319999999976],[0.13486053],[0]],[[0],[0.3319571200000001],[0.36713538],[0.12474144000000001],[0.12323796000000006],[0]],[[0],[0],[0],[0],[0],[0]]]]

Actual:   [[[[0], [0], [0], [0], [0], [0]], [[0], [-0.098], [-0.2047], [0.0001], [-0.1691], [0]], [[0], [0.2927], [0.1786], [-0.0081], [0.1349], [0]], [[0], [0.332], [0.3672], [0.1248], [0.1233], [0]], [[0], [0], [0], [0], [0], [0]]]]

Expected: [[[[0], [0], [0], [0], [0], [0]], [[0], [-0.098], [-0.2047], [0.0001], [-0.1691], [0]], [[0], [0.2927], [0.1786], [-0.0081], [0.1349], [0]], [[0], [0.332], [0.3672], [0.1248], [0.1233], [0]], [[0], [0], [0], [0], [0], [0]]]]