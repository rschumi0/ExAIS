import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer79533 = tf.keras.layers.Input(shape=([3, 2, 4, 4]))

Zer79533 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer79533', )(in0Zer79533)
Res69271 = keras.layers.Reshape((5, 4, 24), name = 'Res69271', )(Zer79533)
Dep70659 = keras.layers.DepthwiseConv2D((2, 2),strides=(2, 2), padding='same', name = 'Dep70659', )(Res69271)
model = tf.keras.models.Model(inputs=[in0Zer79533], outputs=Dep70659)
w = model.get_layer('Dep70659').get_weights() 
w[0] = np.array([[[[0.4199], [0.5358], [0.5169], [0.7278], [0.2313], [0.9547], [0.5913], [0.0157], [0.2756], [0.9141], [0.6618], [0.7052], [0.341], [0.9724], [0.9746], [0.3346], [0.0821], [0.6113], [0.602], [0.7504], [0.546], [0.9755], [0.3762], [0.9468]], [[0.5816], [0.9635], [0.4469], [0.2525], [0.9501], [0.3787], [0.7357], [0.4512], [0.9929], [0.5524], [0.9878], [0.1427], [0.7882], [0.8364], [0.0872], [0.1526], [0.8263], [0.6275], [0.7902], [0.0809], [0.371], [0.1377], [0.061], [0.1428]]], [[[0.8354], [0.9496], [0.7458], [0.2997], [0.7017], [0.5083], [0.4088], [0.3062], [0.7366], [0.0928], [0.7752], [0.7025], [0.518], [0.4822], [0.3693], [0.9737], [0.5745], [0.4873], [0.6235], [0.0655], [0.7634], [0.751], [0.9407], [0.196]], [[0.8629], [0.7407], [0.9386], [0.4386], [0.7415], [0.6521], [0.3768], [0.8598], [0.8782], [0.0213], [0.076], [0.0955], [0.4575], [0.2065], [0.4719], [0.1204], [0.7375], [0.5388], [0.3189], [0.6282], [0.9009], [0.8647], [0.4525], [0.8711]]]])
w[1] = np.array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])
model.get_layer('Dep70659').set_weights(w) 
in0Zer79533 = tf.constant([[[[[1.331, 1.7503, 1.7843, 1.3175], [1.835, 1.7302, 1.6775, 1.5368], [1.8488, 1.8109, 1.0002, 1.6234], [1.592, 1.4063, 1.9891, 1.8728]], [[1.477, 1.1345, 1.786, 1.2507], [1.8242, 1.5293, 1.7875, 1.2535], [1.4375, 1.0471, 1.7086, 1.1225], [1.5092, 1.1155, 1.48, 1.9547]]], [[[1.947, 1.197, 1.4921, 1.8703], [1.6221, 1.0989, 1.3677, 1.548], [1.229, 1.0523, 1.4041, 1.1207], [1.4141, 1.4032, 1.057, 1.6322]], [[1.5831, 1.1108, 1.3569, 1.0034], [1.3289, 1.6343, 1.9469, 1.7273], [1.735, 1.2009, 1.5085, 1.3208], [1.9041, 1.8974, 1.7029, 1.8942]]], [[[1.9388, 1.5032, 1.399, 1.0729], [1.2558, 1.4923, 1.8772, 1.8989], [1.5564, 1.1711, 1.9079, 1.277], [1.9943, 1.4916, 1.0856, 1.9861]], [[1.0833, 1.6796, 1.5656, 1.2746], [1.6679, 1.4548, 1.4016, 1.5793], [1.8471, 1.2807, 1.007, 1.966], [1.0822, 1.7826, 1.8774, 1.4736]]]]])
print (np.array2string(model.predict([in0Zer79533],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep70659.png')

LZer79533 = zero_padding3D_layer([[[[[1.331, 1.7503, 1.7843, 1.3175], [1.835, 1.7302, 1.6775, 1.5368], [1.8488, 1.8109, 1.0002, 1.6234], [1.592, 1.4063, 1.9891, 1.8728]], [[1.477, 1.1345, 1.786, 1.2507], [1.8242, 1.5293, 1.7875, 1.2535], [1.4375, 1.0471, 1.7086, 1.1225], [1.5092, 1.1155, 1.48, 1.9547]]], [[[1.947, 1.197, 1.4921, 1.8703], [1.6221, 1.0989, 1.3677, 1.548], [1.229, 1.0523, 1.4041, 1.1207], [1.4141, 1.4032, 1.057, 1.6322]], [[1.5831, 1.1108, 1.3569, 1.0034], [1.3289, 1.6343, 1.9469, 1.7273], [1.735, 1.2009, 1.5085, 1.3208], [1.9041, 1.8974, 1.7029, 1.8942]]], [[[1.9388, 1.5032, 1.399, 1.0729], [1.2558, 1.4923, 1.8772, 1.8989], [1.5564, 1.1711, 1.9079, 1.277], [1.9943, 1.4916, 1.0856, 1.9861]], [[1.0833, 1.6796, 1.5656, 1.2746], [1.6679, 1.4548, 1.4016, 1.5793], [1.8471, 1.2807, 1.007, 1.966], [1.0822, 1.7826, 1.8774, 1.4736]]]]], 1, 1, 1, 1, 1, 1, Zer79533), 
LRes69271 = reshape_layer(Zer79533, [5, 4, 24], Res69271), 
LDep70659 = depthwise_conv2D_layer(Res69271, 2, 2,[[[[0.4199], [0.5358], [0.5169], [0.7278], [0.2313], [0.9547], [0.5913], [0.0157], [0.2756], [0.9141], [0.6618], [0.7052], [0.341], [0.9724], [0.9746], [0.3346], [0.0821], [0.6113], [0.602], [0.7504], [0.546], [0.9755], [0.3762], [0.9468]], [[0.5816], [0.9635], [0.4469], [0.2525], [0.9501], [0.3787], [0.7357], [0.4512], [0.9929], [0.5524], [0.9878], [0.1427], [0.7882], [0.8364], [0.0872], [0.1526], [0.8263], [0.6275], [0.7902], [0.0809], [0.371], [0.1377], [0.061], [0.1428]]], [[[0.8354], [0.9496], [0.7458], [0.2997], [0.7017], [0.5083], [0.4088], [0.3062], [0.7366], [0.0928], [0.7752], [0.7025], [0.518], [0.4822], [0.3693], [0.9737], [0.5745], [0.4873], [0.6235], [0.0655], [0.7634], [0.751], [0.9407], [0.196]], [[0.8629], [0.7407], [0.9386], [0.4386], [0.7415], [0.6521], [0.3768], [0.8598], [0.8782], [0.0213], [0.076], [0.0955], [0.4575], [0.2065], [0.4719], [0.1204], [0.7375], [0.5388], [0.3189], [0.6282], [0.9009], [0.8647], [0.4525], [0.8711]]]],[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 2, 2, true, Dep70659), 
exec_layers([LZer79533,LRes69271,LDep70659],["Zer79533","Res69271","Dep70659"],Dep70659,"Dep70659")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.9869365, 1.1413707, 0.6723242, 1.1327865, 1.6114970, 0.0368533, 0.1274900, 0.1467644, 0.8458260, 0.3739508, 0.4719944, 0.1954574, 1.1741000, 0.7577144, 0.6343240, 1.1764930, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.0364109, 0.5766664, 0.7301168, 0.3829643, 1.3437057, 0.1419190, 1.3856700, 0.8805837, 0.7446250, 0.5049116, 0.6309860, 1.0929782, 0.8670354, 0.5435831, 0.9227800, 0.1280328, 0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 3.2874649, 1.4335407, 1.6248812, 1.7663589, 2.7134267, 0.6388183, 1.4936812, 0.4022445, 1.6807508, 1.1219759, 1.0227755, 0.3247696, 2.6392671, 1.6841821, 1.1814393, 1.3797130, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.1263226, 1.9142215, 1.4423523, 0.4060359, 1.5948199, 1.6289191, 2.3749787, 2.3275503, 1.5484328, 1.7853086, 1.8420692, 2.3562338, 0.7780505, 2.0285416, 2.1957048, 1.5179285, 0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0,0.0,0.0,0.9869365,1.14137063,0.67232424,1.1327865,1.611497,0.03685326,0.12749,0.1467644,0.8458260000000001,0.37395084999999995,0.47199438,0.19545736,1.1741000000000001,0.75771444,0.6343239900000001,1.17649296,0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0,1.0364109000000001,0.57666635,0.7301168,0.38296434,1.34370572,0.14191904,1.3856700000000002,0.8805837500000001,0.744625,0.50491162,0.63098598,1.09297825,0.8670354000000001,0.54358315,0.92278,0.12803285,0.0,0.0,0.0,0.0]],[[0.0,0.0,0.0,0.0,3.2874649000000002,1.43354062,1.62488117,1.76635878,2.7134266499999997,0.6388183500000001,1.49368126,0.40224455000000003,1.6807508000000002,1.12197587,1.0227755299999999,0.32476962,2.6392670799999998,1.6841820799999998,1.18143924,1.379713,0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0,1.12632264,1.91422144,1.4423522500000001,0.4060359,1.59481998,1.6289190700000002,2.3749787400000004,2.32755021,1.5484328,1.7853087000000003,1.8420692,2.35623388,0.77805051,2.0285415999999996,2.1957047000000003,1.51792848,0.0,0.0,0.0,0.0]],[[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]]]]

Actual:   [[[[0, 0, 0, 0, 0.987, 1.1414, 0.6724, 1.1328, 1.6115, 0.0369, 0.1275, 0.1468, 0.8459, 0.374, 0.472, 0.1955, 1.1741, 0.7578, 0.6344, 1.1765, 0, 0, 0, 0], [0, 0, 0, 0, 1.0365, 0.5767, 0.7302, 0.383, 1.3438, 0.142, 1.3857, 0.8806, 0.7447, 0.505, 0.631, 1.093, 0.8671, 0.5436, 0.9228, 0.1281, 0, 0, 0, 0]], [[0, 0, 0, 0, 3.2875, 1.4336, 1.6249, 1.7664, 2.7135, 0.6389, 1.4937, 0.4023, 1.6808, 1.122, 1.0228, 0.3248, 2.6393, 1.6842, 1.1815, 1.3798, 0, 0, 0, 0], [0, 0, 0, 0, 1.1264, 1.9143, 1.4424, 0.4061, 1.5949, 1.629, 2.375, 2.3276, 1.5485, 1.7854, 1.8421, 2.3563, 0.7781, 2.0286, 2.1958, 1.518, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]]

Expected: [[[[0, 0, 0, 0, 0.987, 1.1414, 0.6724, 1.1328, 1.6115, 0.0369, 0.1275, 0.1468, 0.8459, 0.374, 0.472, 0.1955, 1.1742, 0.7578, 0.6344, 1.1765, 0, 0, 0, 0], [0, 0, 0, 0, 1.0365, 0.5767, 0.7302, 0.383, 1.3438, 0.142, 1.3857, 0.8806, 0.7447, 0.505, 0.631, 1.093, 0.8671, 0.5436, 0.9228, 0.1281, 0, 0, 0, 0]], [[0, 0, 0, 0, 3.2875, 1.4336, 1.6249, 1.7664, 2.7135, 0.6389, 1.4937, 0.4023, 1.6808, 1.122, 1.0228, 0.3248, 2.6393, 1.6842, 1.1815, 1.3798, 0, 0, 0, 0], [0, 0, 0, 0, 1.1264, 1.9143, 1.4424, 0.4061, 1.5949, 1.629, 2.375, 2.3276, 1.5485, 1.7854, 1.8421, 2.3563, 0.7781, 2.0286, 2.1958, 1.518, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]]