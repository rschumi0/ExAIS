import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul18283 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul18283 = tf.keras.layers.Input(shape=([2, 2]))
in0Con90779 = tf.keras.layers.Input(shape=([2, 12]))
in0Max69133 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Max69133 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0ELU66195 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Mul18283 = keras.layers.Multiply(name = 'Mul18283', )([in0Mul18283,in1Mul18283])
Con90779 = keras.layers.Concatenate(axis=2, name = 'Con90779', )([Mul18283,in0Con90779])
Max69133 = keras.layers.Maximum(name = 'Max69133', )([in0Max69133,in1Max69133])
Zer57170 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (6, 0)), name = 'Zer57170', )(Max69133)
ELU66195 = keras.layers.ELU(alpha=1.2175368163514761, name = 'ELU66195', input_shape=(1, 2, 2, 1))(in0ELU66195)
Up_85208 = keras.layers.UpSampling3D(size=(1, 1, 2), name = 'Up_85208', )(ELU66195)
Zer48369 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (3, 0)), name = 'Zer48369', )(Up_85208)
Min69021 = keras.layers.Minimum(name = 'Min69021', )([Zer57170,Zer48369])
Res33419 = keras.layers.Reshape((2, 2, 7), name = 'Res33419', )(Min69021)
Res23396 = keras.layers.Reshape((2, 14), name = 'Res23396', )(Res33419)
Dot50435 = keras.layers.Dot(axes=(1, 1), name = 'Dot50435', )([Con90779,Res23396])
model = tf.keras.models.Model(inputs=[in0Mul18283,in1Mul18283,in0Con90779,in0Max69133,in1Max69133,in0ELU66195], outputs=Dot50435)
in0Mul18283 = tf.constant([[[0.2938, 0.376], [0.2799, 0.2126]]])
in1Mul18283 = tf.constant([[[0.4181, 0.0516], [0.221, 0.5119]]])
in0Con90779 = tf.constant([[[0.1486, 0.8612, 0.8711, 0.4456, 0.0942, 0.5462, 0.5567, 0.0719, 0.8357, 0.1177, 0.4167, 0.059], [0.8113, 0.2354, 0.9008, 0.2945, 0.4993, 0.9116, 0.6831, 0.2842, 0.0776, 0.4405, 0.8478, 0.5016]]])
in0Max69133 = tf.constant([[[[[0.619]], [[0.4678]]], [[[0.4154]], [[0.1643]]]]])
in1Max69133 = tf.constant([[[[[0.4738]], [[0.6741]]], [[[0.2993]], [[0.107]]]]])
in0ELU66195 = tf.constant([[[[[0.957], [0.8961]], [[0.6482], [0.0988]]]]])
print (np.array2string(model.predict([in0Mul18283,in1Mul18283,in0Con90779,in0Max69133,in1Max69133,in0ELU66195],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot50435.png')

LMul18283 = multiply_layer([[[[0.2938, 0.376], [0.2799, 0.2126]]], [[[0.4181, 0.0516], [0.221, 0.5119]]]], Mul18283), 
LCon90779 = concatenate_layer([Mul18283,[[[0.1486, 0.8612, 0.8711, 0.4456, 0.0942, 0.5462, 0.5567, 0.0719, 0.8357, 0.1177, 0.4167, 0.059], [0.8113, 0.2354, 0.9008, 0.2945, 0.4993, 0.9116, 0.6831, 0.2842, 0.0776, 0.4405, 0.8478, 0.5016]]]], 2, Con90779), 
LMax69133 = maximum_layer([[[[[[0.619]], [[0.4678]]], [[[0.4154]], [[0.1643]]]]], [[[[[0.4738]], [[0.6741]]], [[[0.2993]], [[0.107]]]]]], Max69133), 
LZer57170 = zero_padding3D_layer(Max69133, 0, 0, 0, 0, 6, 0, Zer57170), 
LELU66195 = elu_layer([[[[[0.957], [0.8961]], [[0.6482], [0.0988]]]]], 1.2175368163514761, ELU66195), 
LUp_85208 = up_sampling3D_layer(ELU66195, 1, 1, 2, Up_85208), 
LZer48369 = zero_padding3D_layer(Up_85208, 1, 0, 0, 0, 3, 0, Zer48369), 
LMin69021 = minimum_layer([Zer57170,Zer48369], Min69021), 
LRes33419 = reshape_layer(Min69021, [2, 2, 7], Res33419), 
LRes23396 = reshape_layer(Res33419, [2, 14], Res23396), 
LDot50435 = dot_layer(Con90779,Res23396, 1, 1, Dot50435), 
exec_layers([LMul18283,LCon90779,LMax69133,LZer57170,LELU66195,LUp_85208,LZer48369,LMin69021,LRes33419,LRes23396,LDot50435],["Mul18283","Con90779","Max69133","Zer57170","ELU66195","Up_85208","Zer48369","Min69021","Res33419","Res23396","Dot50435"],Dot50435,"Dot50435")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0256958, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0061116], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0452080, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0107524], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.3370140, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0801564], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0977852, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0232575], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.3741923, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0889990], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.1223353, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0290966], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.2074092, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0493308], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.3786786, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0900661], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.2837597, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0674903], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.1180567, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0280790], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0322350, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0076669], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.1829837, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0435214], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.3521761, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0837626], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.2083647, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0495581]]]

Expected (Unparsed): [[[0.0,0.0,0.0,0.0,0.0,0.0,0.02569577166,0.0,0.0,0.0,0.0,0.0,0.0,0.006111560519999999],[0.0,0.0,0.0,0.0,0.0,0.0,0.045207957076000005,0.0,0.0,0.0,0.0,0.0,0.0,0.010752398072000001],[0.0,0.0,0.0,0.0,0.0,0.0,0.33701402,0.0,0.0,0.0,0.0,0.0,0.0,0.08015644],[0.0,0.0,0.0,0.0,0.0,0.0,0.09778516,0.0,0.0,0.0,0.0,0.0,0.0,0.02325752],[0.0,0.0,0.0,0.0,0.0,0.0,0.37419232,0.0,0.0,0.0,0.0,0.0,0.0,0.08899904],[0.0,0.0,0.0,0.0,0.0,0.0,0.1223353,0.0,0.0,0.0,0.0,0.0,0.0,0.029096599999999997],[0.0,0.0,0.0,0.0,0.0,0.0,0.20740922,0.0,0.0,0.0,0.0,0.0,0.0,0.04933084],[0.0,0.0,0.0,0.0,0.0,0.0,0.37867863999999996,0.0,0.0,0.0,0.0,0.0,0.0,0.09006607999999999],[0.0,0.0,0.0,0.0,0.0,0.0,0.28375974000000004,0.0,0.0,0.0,0.0,0.0,0.0,0.06749028],[0.0,0.0,0.0,0.0,0.0,0.0,0.11805668,0.0,0.0,0.0,0.0,0.0,0.0,0.02807896],[0.0,0.0,0.0,0.0,0.0,0.0,0.03223504,0.0,0.0,0.0,0.0,0.0,0.0,0.00766688],[0.0,0.0,0.0,0.0,0.0,0.0,0.1829837,0.0,0.0,0.0,0.0,0.0,0.0,0.0435214],[0.0,0.0,0.0,0.0,0.0,0.0,0.35217612,0.0,0.0,0.0,0.0,0.0,0.0,0.08376264],[0.0,0.0,0.0,0.0,0.0,0.0,0.20836464000000002,0.0,0.0,0.0,0.0,0.0,0.0,0.049558080000000004]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0.0257, 0, 0, 0, 0, 0, 0, 0.0062], [0, 0, 0, 0, 0, 0, 0.0453, 0, 0, 0, 0, 0, 0, 0.0108], [0, 0, 0, 0, 0, 0, 0.3371, 0, 0, 0, 0, 0, 0, 0.0802], [0, 0, 0, 0, 0, 0, 0.0978, 0, 0, 0, 0, 0, 0, 0.0233], [0, 0, 0, 0, 0, 0, 0.3742, 0, 0, 0, 0, 0, 0, 0.089], [0, 0, 0, 0, 0, 0, 0.1224, 0, 0, 0, 0, 0, 0, 0.0291], [0, 0, 0, 0, 0, 0, 0.2075, 0, 0, 0, 0, 0, 0, 0.0494], [0, 0, 0, 0, 0, 0, 0.3787, 0, 0, 0, 0, 0, 0, 0.0901], [0, 0, 0, 0, 0, 0, 0.2838, 0, 0, 0, 0, 0, 0, 0.0675], [0, 0, 0, 0, 0, 0, 0.1181, 0, 0, 0, 0, 0, 0, 0.0281], [0, 0, 0, 0, 0, 0, 0.0323, 0, 0, 0, 0, 0, 0, 0.0077], [0, 0, 0, 0, 0, 0, 0.183, 0, 0, 0, 0, 0, 0, 0.0436], [0, 0, 0, 0, 0, 0, 0.3522, 0, 0, 0, 0, 0, 0, 0.0838], [0, 0, 0, 0, 0, 0, 0.2084, 0, 0, 0, 0, 0, 0, 0.0496]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0.0257, 0, 0, 0, 0, 0, 0, 0.0062], [0, 0, 0, 0, 0, 0, 0.0453, 0, 0, 0, 0, 0, 0, 0.0108], [0, 0, 0, 0, 0, 0, 0.3371, 0, 0, 0, 0, 0, 0, 0.0802], [0, 0, 0, 0, 0, 0, 0.0978, 0, 0, 0, 0, 0, 0, 0.0233], [0, 0, 0, 0, 0, 0, 0.3742, 0, 0, 0, 0, 0, 0, 0.089], [0, 0, 0, 0, 0, 0, 0.1224, 0, 0, 0, 0, 0, 0, 0.0291], [0, 0, 0, 0, 0, 0, 0.2075, 0, 0, 0, 0, 0, 0, 0.0494], [0, 0, 0, 0, 0, 0, 0.3787, 0, 0, 0, 0, 0, 0, 0.0901], [0, 0, 0, 0, 0, 0, 0.2838, 0, 0, 0, 0, 0, 0, 0.0675], [0, 0, 0, 0, 0, 0, 0.1181, 0, 0, 0, 0, 0, 0, 0.0281], [0, 0, 0, 0, 0, 0, 0.0323, 0, 0, 0, 0, 0, 0, 0.0077], [0, 0, 0, 0, 0, 0, 0.183, 0, 0, 0, 0, 0, 0, 0.0436], [0, 0, 0, 0, 0, 0, 0.3522, 0, 0, 0, 0, 0, 0, 0.0838], [0, 0, 0, 0, 0, 0, 0.2084, 0, 0, 0, 0, 0, 0, 0.0496]]]