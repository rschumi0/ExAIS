import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot3044 = tf.keras.layers.Input(shape=([2]))
in1Dot3044 = tf.keras.layers.Input(shape=([2]))
in0Con44657 = tf.keras.layers.Input(shape=([1]))
in0Glo8384 = tf.keras.layers.Input(shape=([1, 2]))
in0Con27232 = tf.keras.layers.Input(shape=([6]))
in0Per70157 = tf.keras.layers.Input(shape=([2, 3]))
in0Con51306 = tf.keras.layers.Input(shape=([2]))
in0ELU29889 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Dot77478 = tf.keras.layers.Input(shape=([3]))
in1Dot77478 = tf.keras.layers.Input(shape=([3]))
in0Con90300 = tf.keras.layers.Input(shape=([7]))

Dot3044 = keras.layers.Dot(axes=(1, 1), name = 'Dot3044', )([in0Dot3044,in1Dot3044])
Con44657 = keras.layers.Concatenate(axis=1, name = 'Con44657', )([Dot3044,in0Con44657])
Glo8384 = keras.layers.GlobalMaxPool1D(name = 'Glo8384', )(in0Glo8384)
Min32646 = keras.layers.Minimum(name = 'Min32646', )([Con44657,Glo8384])
Con27232 = keras.layers.Concatenate(axis=1, name = 'Con27232', )([Min32646,in0Con27232])
Per70157 = keras.layers.Permute((2,1), name = 'Per70157',)(in0Per70157)
Fla42891 = keras.layers.Flatten(name = 'Fla42891', )(Per70157)
Con51306 = keras.layers.Concatenate(axis=1, name = 'Con51306', )([Fla42891,in0Con51306])
ELU29889 = keras.layers.ELU(alpha=-4.62735215743209, name = 'ELU29889', input_shape=(2, 2, 2))(in0ELU29889)
Res62137 = keras.layers.Reshape((2, 4), name = 'Res62137', )(ELU29889)
Fla23649 = keras.layers.Flatten(name = 'Fla23649', )(Res62137)
Dot77478 = keras.layers.Dot(axes=(1, 1), name = 'Dot77478', )([in0Dot77478,in1Dot77478])
Con90300 = keras.layers.Concatenate(axis=1, name = 'Con90300', )([Dot77478,in0Con90300])
Max59226 = keras.layers.Maximum(name = 'Max59226', )([Fla23649,Con90300])
Ave35776 = keras.layers.Average(name = 'Ave35776', )([Con51306,Max59226])
Sub69308 = keras.layers.Subtract(name = 'Sub69308', )([Con27232,Ave35776])
model = tf.keras.models.Model(inputs=[in0Dot3044,in1Dot3044,in0Con44657,in0Glo8384,in0Con27232,in0Per70157,in0Con51306,in0ELU29889,in0Dot77478,in1Dot77478,in0Con90300], outputs=Sub69308)
in0Dot3044 = tf.constant([[0.6924, 0.11]])
in1Dot3044 = tf.constant([[0.1286, 0.1342]])
in0Con44657 = tf.constant([[0.9564]])
in0Glo8384 = tf.constant([[[1.2551, 1.8124]]])
in0Con27232 = tf.constant([[0.9341, 0.2218, 0.2825, 0.8941, 0.3908, 0.2405]])
in0Per70157 = tf.constant([[[1.6244, 1.0942, 1.0135], [1.3279, 1.0314, 1.5341]]])
in0Con51306 = tf.constant([[0.0425, 0.3977]])
in0ELU29889 = tf.constant([[[[0.6574, 0.4426], [0.8598, 0.5071]], [[0.1098, 0.2095], [0.9713, 0.226]]]])
in0Dot77478 = tf.constant([[0.9535, 0.4363, 0.8119]])
in1Dot77478 = tf.constant([[0.8847, 0.565, 0.0389]])
in0Con90300 = tf.constant([[0.7222, 0.5478, 0.8813, 0.7487, 0.6671, 0.17, 0.4736]])
print (np.array2string(model.predict([in0Dot3044,in1Dot3044,in0Con44657,in0Glo8384,in0Con27232,in0Per70157,in0Con51306,in0ELU29889,in0Dot77478,in1Dot77478,in0Con90300],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub69308.png')

LDot3044 = dot_layer([[0.6924, 0.11]], [[0.1286, 0.1342]], 1, 1, Dot3044), 
LCon44657 = concatenate_layer([Dot3044,[[0.9564]]], 1, Con44657), 
LGlo8384 = global_max_pool1D_layer([[[1.2551, 1.8124]]], Glo8384), 
LMin32646 = minimum_layer([Con44657,Glo8384], Min32646), 
LCon27232 = concatenate_layer([Min32646,[[0.9341, 0.2218, 0.2825, 0.8941, 0.3908, 0.2405]]], 1, Con27232), 
LPer70157 = permute_layer([[[1.6244, 1.0942, 1.0135], [1.3279, 1.0314, 1.5341]]], 2,1, Per70157), 
LFla42891 = flatten_layer(Per70157, Fla42891), 
LCon51306 = concatenate_layer([Fla42891,[[0.0425, 0.3977]]], 1, Con51306), 
LELU29889 = elu_layer([[[[0.6574, 0.4426], [0.8598, 0.5071]], [[0.1098, 0.2095], [0.9713, 0.226]]]], -4.62735215743209, ELU29889), 
LRes62137 = reshape_layer(ELU29889, [2, 4], Res62137), 
LFla23649 = flatten_layer(Res62137, Fla23649), 
LDot77478 = dot_layer([[0.9535, 0.4363, 0.8119]], [[0.8847, 0.565, 0.0389]], 1, 1, Dot77478), 
LCon90300 = concatenate_layer([Dot77478,[[0.7222, 0.5478, 0.8813, 0.7487, 0.6671, 0.17, 0.4736]]], 1, Con90300), 
LMax59226 = maximum_layer([Fla23649,Con90300], Max59226), 
LAve35776 = average_layer([Con51306,Max59226], Ave35776), 
LSub69308 = subtract_layer(Con27232,Ave35776, Sub69308), 
exec_layers([LDot3044,LCon44657,LGlo8384,LMin32646,LCon27232,LPer70157,LFla42891,LCon51306,LELU29889,LRes62137,LFla23649,LDot77478,LCon90300,LMax59226,LAve35776,LSub69308],["Dot3044","Con44657","Glo8384","Min32646","Con27232","Per70157","Fla42891","Con51306","ELU29889","Res62137","Fla23649","Dot77478","Con90300","Max59226","Ave35776","Sub69308"],Sub69308,"Sub69308")

Actual (Unparsed): [[-1.2692223, -0.0686500, -0.0429000, -0.7345500, -0.5986000, -0.2065000, -0.1161000, -0.1951500]]

Expected (Unparsed): [[-1.26922229,-0.06864999999999999,-0.04290000000000005,-0.73455,-0.5986,-0.20650000000000002,-0.11610000000000004,-0.19515]]

Actual:   [[-1.2692, -0.0686, -0.0429, -0.7345, -0.5986, -0.2065, -0.1161, -0.1951]]

Expected: [[-1.2692, -0.0686, -0.0429, -0.7345, -0.5986, -0.2065, -0.1161, -0.1951]]