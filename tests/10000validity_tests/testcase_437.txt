import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave81626 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave81626 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Max96857 = tf.keras.layers.Input(shape=([1, 2]))
in1Max96857 = tf.keras.layers.Input(shape=([1, 2]))

Ave81626 = keras.layers.Average(name = 'Ave81626', )([in0Ave81626,in1Ave81626])
Zer31030 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer31030', )(Ave81626)
Max96857 = keras.layers.Maximum(name = 'Max96857', )([in0Max96857,in1Max96857])
Res11694 = keras.layers.Reshape((1, 2, 1), name = 'Res11694', )(Max96857)
Dep41801 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep41801', )(Res11694)
Lea85434 = keras.layers.LeakyReLU(alpha=8.56473659087666, name = 'Lea85434', )(Dep41801)
Add63410 = keras.layers.Add(name = 'Add63410', )([Zer31030,Lea85434])
Zer63578 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer63578', )(Add63410)
Con48741 = keras.layers.Conv2D(2, (2, 1),strides=(2, 11), padding='valid', dilation_rate=(1, 1), name = 'Con48741', )(Zer63578)
model = tf.keras.models.Model(inputs=[in0Ave81626,in1Ave81626,in0Max96857,in1Max96857], outputs=Con48741)
w = model.get_layer('Dep41801').get_weights() 
w[0] = np.array([[[[0.5359]]]])
w[1] = np.array([0])
model.get_layer('Dep41801').set_weights(w) 
w = model.get_layer('Con48741').get_weights() 
w[0] = np.array([[[[0.6578, 0.2047]]], [[[0.0865, 0.2158]]]])
w[1] = np.array([0, 0])
model.get_layer('Con48741').set_weights(w) 
in0Ave81626 = tf.constant([[[[0.6113]]]])
in1Ave81626 = tf.constant([[[[0.3685]]]])
in0Max96857 = tf.constant([[[0.2934, 0.5302]]])
in1Max96857 = tf.constant([[[0.9321, 0.2264]]])
print (np.array2string(model.predict([in0Ave81626,in1Ave81626,in0Max96857,in1Max96857],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con48741.png')

LAve81626 = average_layer([[[[[0.6113]]]], [[[[0.3685]]]]], Ave81626), 
LZer31030 = zero_padding2D_layer(Ave81626, 0, 0, 1, 0, Zer31030), 
LMax96857 = maximum_layer([[[[0.2934, 0.5302]]], [[[0.9321, 0.2264]]]], Max96857), 
LRes11694 = reshape_layer(Max96857, [1, 2, 1], Res11694), 
LDep41801 = depthwise_conv2D_layer(Res11694, 1, 1,[[[[0.5359]]]],[0], 1, 1, true, Dep41801), 
LLea85434 = leaky_relu_layer(Dep41801, 8.56473659087666, Lea85434), 
LAdd63410 = add_layer([Zer31030,Lea85434], Add63410), 
LZer63578 = zero_padding2D_layer(Add63410, 1, 1, 1, 1, Zer63578), 
LCon48741 = conv2D_layer(Zer63578, 2, 1,[[[[0.6578, 0.2047]]], [[[0.0865, 0.2158]]]],[0, 0], 2, 11, false, 1, 1, Con48741), 
exec_layers([LAve81626,LZer31030,LMax96857,LRes11694,LDep41801,LLea85434,LAdd63410,LZer63578,LCon48741],["Ave81626","Zer31030","Max96857","Res11694","Dep41801","Lea85434","Add63410","Zer63578","Con48741"],Con48741,"Con48741")

Actual (Unparsed): [[[[0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0]]]]

Actual:   [[[[0, 0]]]]

Expected: [[[[0, 0]]]]