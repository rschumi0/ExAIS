import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul72416 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Mul72416 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Mul72416 = keras.layers.Multiply(name = 'Mul72416', )([in0Mul72416,in1Mul72416])
Lea20878 = keras.layers.LeakyReLU(alpha=9.230192561950078, name = 'Lea20878', )(Mul72416)
Res96411 = keras.layers.Reshape((2, 2, 4), name = 'Res96411', )(Lea20878)
Res63996 = keras.layers.Reshape((2, 8), name = 'Res63996', )(Res96411)
Sep7368 = keras.layers.SeparableConv1D(3, (1),strides=(2), padding='same', name = 'Sep7368', )(Res63996)
Up_78783 = keras.layers.UpSampling1D(size=(2), name = 'Up_78783', )(Sep7368)
model = tf.keras.models.Model(inputs=[in0Mul72416,in1Mul72416], outputs=Up_78783)
w = model.get_layer('Sep7368').get_weights() 
w[0] = np.array([[[0.6278], [0.2737], [0.5538], [0.112], [0.9427], [0.3928], [0.3866], [0.8027]]])
w[1] = np.array([[[0.02, 0.893, 0.2058], [0.2899, 0.5512, 0.5385], [0.3074, 0.4536, 0.3128], [0.1164, 0.2562, 0.1414], [0.0369, 0.7255, 0.753], [0.6204, 0.5483, 0.1915], [0.1368, 0.9775, 0.6326], [0.2967, 0.613, 0.1768]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep7368').set_weights(w) 
in0Mul72416 = tf.constant([[[[[0.8591, 0.5431], [0.3052, 0.5532]], [[0.0595, 0.206], [0.0158, 0.4801]]], [[[0.962, 0.8887], [0.5065, 0.8867]], [[0.3267, 0.1533], [0.6705, 0.1416]]]]])
in1Mul72416 = tf.constant([[[[[0.1488, 0.6417], [0.0543, 0.9667]], [[0.1446, 0.1885], [0.5555, 0.8229]]], [[[0.2122, 0.707], [0.3426, 0.0234]], [[0.932, 0.4918], [0.8001, 0.4448]]]]])
print (np.array2string(model.predict([in0Mul72416,in1Mul72416],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_78783.png')

LMul72416 = multiply_layer([[[[[[0.8591, 0.5431], [0.3052, 0.5532]], [[0.0595, 0.206], [0.0158, 0.4801]]], [[[0.962, 0.8887], [0.5065, 0.8867]], [[0.3267, 0.1533], [0.6705, 0.1416]]]]], [[[[[0.1488, 0.6417], [0.0543, 0.9667]], [[0.1446, 0.1885], [0.5555, 0.8229]]], [[[0.2122, 0.707], [0.3426, 0.0234]], [[0.932, 0.4918], [0.8001, 0.4448]]]]]], Mul72416), 
LLea20878 = leaky_relu_layer(Mul72416, 9.230192561950078, Lea20878), 
LRes96411 = reshape_layer(Lea20878, [2, 2, 4], Res96411), 
LRes63996 = reshape_layer(Res96411, [2, 8], Res63996), 
LSep7368 = separable_conv1D_layer(Res63996, 1,[[[[0.6278], [0.2737], [0.5538], [0.112], [0.9427], [0.3928], [0.3866], [0.8027]]],[[[0.02, 0.893, 0.2058], [0.2899, 0.5512, 0.5385], [0.3074, 0.4536, 0.3128], [0.1164, 0.2562, 0.1414], [0.0369, 0.7255, 0.753], [0.6204, 0.5483, 0.1915], [0.1368, 0.9775, 0.6326], [0.2967, 0.613, 0.1768]]]],[0, 0, 0], 2, true, Sep7368), 
LUp_78783 = up_sampling1D_layer(Sep7368, 2, Up_78783), 
exec_layers([LMul72416,LLea20878,LRes96411,LRes63996,LSep7368,LUp_78783],["Mul72416","Lea20878","Res96411","Res63996","Sep7368","Up_78783"],Up_78783,"Up_78783")

Actual (Unparsed): [[[0.1433683, 0.3557148, 0.1464646], [0.1433683, 0.3557148, 0.1464646]]]

Expected (Unparsed): [[[0.1433682996451644,0.35571478318477556,0.1464645902383515],[0.1433682996451644,0.35571478318477556,0.1464645902383515]]]

Actual:   [[[0.1434, 0.3558, 0.1465], [0.1434, 0.3558, 0.1465]]]

Expected: [[[0.1434, 0.3558, 0.1465], [0.1434, 0.3558, 0.1465]]]