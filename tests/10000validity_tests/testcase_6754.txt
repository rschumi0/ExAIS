import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub92356 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub92356 = tf.keras.layers.Input(shape=([2, 2]))
in0Con72274 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Max29765 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Max29765 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Min74409 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Min74409 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con88747 = tf.keras.layers.Input(shape=([7]))

Sub92356 = keras.layers.Subtract(name = 'Sub92356', )([in0Sub92356,in1Sub92356])
Res12501 = keras.layers.Reshape((2, 2, 1), name = 'Res12501', )(Sub92356)
Res65025 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res65025', )(Res12501)
Con72274 = keras.layers.Concatenate(axis=4, name = 'Con72274', )([Res65025,in0Con72274])
Max29765 = keras.layers.Maximum(name = 'Max29765', )([in0Max29765,in1Max29765])
Zer44941 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer44941', )(Max29765)
Max87766 = keras.layers.Maximum(name = 'Max87766', )([Con72274,Zer44941])
Res21885 = keras.layers.Reshape((2, 2, 2), name = 'Res21885', )(Max87766)
Res89713 = keras.layers.Reshape((2, 4), name = 'Res89713', )(Res21885)
Fla23823 = keras.layers.Flatten(name = 'Fla23823', )(Res89713)
Min74409 = keras.layers.Minimum(name = 'Min74409', )([in0Min74409,in1Min74409])
ReL72207 = keras.layers.ReLU(max_value=8.678542016260991, negative_slope=8.79588293839296, threshold=0.18229488343081357, name = 'ReL72207', )(Min74409)
Res32464 = keras.layers.Reshape((1, 2, 2), name = 'Res32464', )(ReL72207)
Res6122 = keras.layers.Reshape((1, 4), name = 'Res6122', )(Res32464)
Per39928 = keras.layers.Permute((1,2), name = 'Per39928',)(Res6122)
Res60919 = keras.layers.Reshape((1, 4, 1), name = 'Res60919', )(Per39928)
Glo26047 = keras.layers.GlobalMaxPool2D(name = 'Glo26047', )(Res60919)
Con88747 = keras.layers.Concatenate(axis=1, name = 'Con88747', )([Glo26047,in0Con88747])
Ave25760 = keras.layers.Average(name = 'Ave25760', )([Fla23823,Con88747])
model = tf.keras.models.Model(inputs=[in0Sub92356,in1Sub92356,in0Con72274,in0Max29765,in1Max29765,in0Min74409,in1Min74409,in0Con88747], outputs=Ave25760)
in0Sub92356 = tf.constant([[[0.6667, 0.0572], [0.2171, 0.612]]])
in1Sub92356 = tf.constant([[[0.135, 0.1283], [0.4751, 0.5509]]])
in0Con72274 = tf.constant([[[[[0.9373]], [[0.9071]]], [[[0.7762]], [[0.987]]]]])
in0Max29765 = tf.constant([[[[[0.129, 0.1737]]]]])
in1Max29765 = tf.constant([[[[[0.6156, 0.3794]]]]])
in0Min74409 = tf.constant([[[[[0.3294], [0.9706]], [[0.6377], [0.6074]]]]])
in1Min74409 = tf.constant([[[[[0.5488], [0.9101]], [[0.0213], [0.6399]]]]])
in0Con88747 = tf.constant([[0.6313, 0.8322, 0.4702, 0.8991, 0.7555, 0.2936, 0.3407]])
print (np.array2string(model.predict([in0Sub92356,in1Sub92356,in0Con72274,in0Max29765,in1Max29765,in0Min74409,in1Min74409,in0Con88747],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave25760.png')

LSub92356 = subtract_layer([[[0.6667, 0.0572], [0.2171, 0.612]]], [[[0.135, 0.1283], [0.4751, 0.5509]]], Sub92356), 
LRes12501 = reshape_layer(Sub92356, [2, 2, 1], Res12501), 
LRes65025 = reshape_layer(Res12501, [2, 2, 1, 1], Res65025), 
LCon72274 = concatenate_layer([Res65025,[[[[[0.9373]], [[0.9071]]], [[[0.7762]], [[0.987]]]]]], 4, Con72274), 
LMax29765 = maximum_layer([[[[[[0.129, 0.1737]]]]], [[[[[0.6156, 0.3794]]]]]], Max29765), 
LZer44941 = zero_padding3D_layer(Max29765, 1, 0, 1, 0, 0, 0, Zer44941), 
LMax87766 = maximum_layer([Con72274,Zer44941], Max87766), 
LRes21885 = reshape_layer(Max87766, [2, 2, 2], Res21885), 
LRes89713 = reshape_layer(Res21885, [2, 4], Res89713), 
LFla23823 = flatten_layer(Res89713, Fla23823), 
LMin74409 = minimum_layer([[[[[[0.3294], [0.9706]], [[0.6377], [0.6074]]]]], [[[[[0.5488], [0.9101]], [[0.0213], [0.6399]]]]]], Min74409), 
LReL72207 = relu_layer(Min74409, 8.678542016260991, 8.79588293839296, 0.18229488343081357, ReL72207), 
LRes32464 = reshape_layer(ReL72207, [1, 2, 2], Res32464), 
LRes6122 = reshape_layer(Res32464, [1, 4], Res6122), 
LPer39928 = permute_layer(Res6122, 1,2, Per39928), 
LRes60919 = reshape_layer(Per39928, [1, 4, 1], Res60919), 
LGlo26047 = global_max_pool2D_layer(Res60919, Glo26047), 
LCon88747 = concatenate_layer([Glo26047,[[0.6313, 0.8322, 0.4702, 0.8991, 0.7555, 0.2936, 0.3407]]], 1, Con88747), 
LAve25760 = average_layer([Fla23823,Con88747], Ave25760), 
exec_layers([LSub92356,LRes12501,LRes65025,LCon72274,LMax29765,LZer44941,LMax87766,LRes21885,LRes89713,LFla23823,LMin74409,LReL72207,LRes32464,LRes6122,LPer39928,LRes60919,LGlo26047,LCon88747,LAve25760],["Sub92356","Res12501","Res65025","Con72274","Max29765","Zer44941","Max87766","Res21885","Res89713","Fla23823","Min74409","ReL72207","Res32464","Res6122","Per39928","Res60919","Glo26047","Con88747","Ave25760"],Ave25760,"Ave25760")

Actual (Unparsed): [[0.7209000, 0.7843000, 0.4161000, 0.6886500, 0.4495500, 0.7658500, 0.4546000, 0.6638500]]

Expected (Unparsed): [[0.7209,0.7843,0.4161,0.68865,0.44955,0.7658499999999999,0.4546,0.66385]]

Actual:   [[0.7209, 0.7843, 0.4161, 0.6887, 0.4496, 0.7659, 0.4546, 0.6639]]

Expected: [[0.7209, 0.7843, 0.4161, 0.6887, 0.4496, 0.7659, 0.4546, 0.6639]]