import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add68817 = tf.keras.layers.Input(shape=([2, 1]))
in1Add68817 = tf.keras.layers.Input(shape=([2, 1]))
in0Con48438 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Mul55609 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul55609 = tf.keras.layers.Input(shape=([2, 2, 2]))

Add68817 = keras.layers.Add(name = 'Add68817', )([in0Add68817,in1Add68817])
Res62480 = keras.layers.Reshape((2, 1, 1), name = 'Res62480', )(Add68817)
Zer75024 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer75024', )(Res62480)
Con48438 = keras.layers.Concatenate(axis=3, name = 'Con48438', )([Zer75024,in0Con48438])
Mul55609 = keras.layers.Multiply(name = 'Mul55609', )([in0Mul55609,in1Mul55609])
Min172 = keras.layers.Minimum(name = 'Min172', )([Con48438,Mul55609])
Res29896 = keras.layers.Reshape((2, 4), name = 'Res29896', )(Min172)
Max83953 = keras.layers.MaxPool1D(pool_size=(2), name = 'Max83953', )(Res29896)
model = tf.keras.models.Model(inputs=[in0Add68817,in1Add68817,in0Con48438,in0Mul55609,in1Mul55609], outputs=Max83953)
in0Add68817 = tf.constant([[[0.0571], [0.9038]]])
in1Add68817 = tf.constant([[[0.4451], [0.6108]]])
in0Con48438 = tf.constant([[[[0.2804], [0.9294]], [[0.5671], [0.8375]]]])
in0Mul55609 = tf.constant([[[[0.2512, 0.1231], [0.9432, 0.5875]], [[0.6386, 0.2254], [0.0509, 0.2302]]]])
in1Mul55609 = tf.constant([[[[0.2078, 0.8552], [0.5516, 0.2492]], [[0.3804, 0.4653], [0.0054, 0.9634]]]])
print (np.array2string(model.predict([in0Add68817,in1Add68817,in0Con48438,in0Mul55609,in1Mul55609],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max83953.png')

LAdd68817 = add_layer([[[[0.0571], [0.9038]]], [[[0.4451], [0.6108]]]], Add68817), 
LRes62480 = reshape_layer(Add68817, [2, 1, 1], Res62480), 
LZer75024 = zero_padding2D_layer(Res62480, 0, 0, 1, 0, Zer75024), 
LCon48438 = concatenate_layer([Zer75024,[[[[0.2804], [0.9294]], [[0.5671], [0.8375]]]]], 3, Con48438), 
LMul55609 = multiply_layer([[[[[0.2512, 0.1231], [0.9432, 0.5875]], [[0.6386, 0.2254], [0.0509, 0.2302]]]], [[[[0.2078, 0.8552], [0.5516, 0.2492]], [[0.3804, 0.4653], [0.0054, 0.9634]]]]], Mul55609), 
LMin172 = minimum_layer([Con48438,Mul55609], Min172), 
LRes29896 = reshape_layer(Min172, [2, 4], Res29896), 
LMax83953 = max_pool1D_layer(Res29896, 2, Max83953), 
exec_layers([LAdd68817,LRes62480,LZer75024,LCon48438,LMul55609,LMin172,LRes29896,LMax83953],["Add68817","Res62480","Zer75024","Con48438","Mul55609","Min172","Res29896","Max83953"],Max83953,"Max83953")

Actual (Unparsed): [[[0.0000000, 0.1052751, 0.5022000, 0.2217747]]]

Expected (Unparsed): [[[0,0.10527512,0.5022,0.22177468]]]

Actual:   [[[0, 0.1053, 0.5022, 0.2218]]]

Expected: [[[0, 0.1053, 0.5022, 0.2218]]]