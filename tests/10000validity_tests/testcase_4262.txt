import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lay52844 = tf.keras.layers.Input(shape=([4, 3]))
in0Add82822 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add82822 = tf.keras.layers.Input(shape=([1, 1, 1]))

Lay52844 = keras.layers.LayerNormalization(axis=2, epsilon=2.035971005342068, name = 'Lay52844', )(in0Lay52844)
Res36403 = keras.layers.Reshape((4, 3, 1), name = 'Res36403', )(Lay52844)
Add82822 = keras.layers.Add(name = 'Add82822', )([in0Add82822,in1Add82822])
Zer22310 = keras.layers.ZeroPadding2D(padding=((3, 0), (2, 0)), name = 'Zer22310', )(Add82822)
Min93580 = keras.layers.Minimum(name = 'Min93580', )([Res36403,Zer22310])
Dep51224 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep51224', )(Min93580)
model = tf.keras.models.Model(inputs=[in0Lay52844,in0Add82822,in1Add82822], outputs=Dep51224)
w = model.get_layer('Dep51224').get_weights() 
w[0] = np.array([[[[0.3497]]]])
w[1] = np.array([0])
model.get_layer('Dep51224').set_weights(w) 
in0Lay52844 = tf.constant([[[1.5384, 1.3755, 1.4718], [1.9373, 1.5631, 1.3588], [1.7312, 1.9128, 1.8175], [1.6332, 1.638, 1.3462]]])
in0Add82822 = tf.constant([[[[0.0967]]]])
in1Add82822 = tf.constant([[[[0.2987]]]])
print (np.array2string(model.predict([in0Lay52844,in0Add82822,in1Add82822],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep51224.png')

LLay52844 = layer_normalization_layer([[[1.5384, 1.3755, 1.4718], [1.9373, 1.5631, 1.3588], [1.7312, 1.9128, 1.8175], [1.6332, 1.638, 1.3462]]], 2, 2.035971005342068, Lay52844), 
LRes36403 = reshape_layer(Lay52844, [4, 3, 1], Res36403), 
LAdd82822 = add_layer([[[[[0.0967]]]], [[[[0.2987]]]]], Add82822), 
LZer22310 = zero_padding2D_layer(Add82822, 3, 0, 2, 0, Zer22310), 
LMin93580 = minimum_layer([Res36403,Zer22310], Min93580), 
LDep51224 = depthwise_conv2D_layer(Min93580, 1, 1,[[[[0.3497]]]],[0], 1, 1, true, Dep51224), 
exec_layers([LLay52844,LRes36403,LAdd82822,LZer22310,LMin93580,LDep51224],["Lay52844","Res36403","Add82822","Zer22310","Min93580","Dep51224"],Dep51224,"Dep51224")

Actual (Unparsed): [[[[0.0000000], [-0.0211518], [0.0000000]], [[0.0000000], [-0.0136882], [-0.0630673]], [[-0.0218562], [0.0000000], [-0.0007342]], [[0.0000000], [0.0000000], [-0.0470696]]]]

Expected (Unparsed): [[[[0.0],[-0.02115179205695122],[0.0]],[[0.0],[-0.013688209869837873],[-0.06306727890588044]],[[-0.021856236660119658],[0.0],[-0.0007342520714486172]],[[0.0],[0.0],[-0.047069619432768536]]]]

Actual:   [[[[0], [-0.0211], [0]], [[0], [-0.0136], [-0.063]], [[-0.0218], [0], [-0.0007]], [[0], [0], [-0.047]]]]

Expected: [[[[0], [-0.0211], [0]], [[0], [-0.0136], [-0.063]], [[-0.0218], [0], [-0.0007]], [[0], [0], [-0.047]]]]