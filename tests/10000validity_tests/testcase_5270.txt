import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min97920 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Min97920 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con41078 = tf.keras.layers.Input(shape=([11]))
in0Fla68938 = tf.keras.layers.Input(shape=([4, 1, 3]))

Min97920 = keras.layers.Minimum(name = 'Min97920', )([in0Min97920,in1Min97920])
Res82865 = keras.layers.Reshape((1, 1), name = 'Res82865', )(Min97920)
Fla73415 = keras.layers.Flatten(name = 'Fla73415', )(Res82865)
Con41078 = keras.layers.Concatenate(axis=1, name = 'Con41078', )([Fla73415,in0Con41078])
Fla68938 = keras.layers.Flatten(name = 'Fla68938', )(in0Fla68938)
Mul60136 = keras.layers.Multiply(name = 'Mul60136', )([Con41078,Fla68938])
model = tf.keras.models.Model(inputs=[in0Min97920,in1Min97920,in0Con41078,in0Fla68938], outputs=Mul60136)
in0Min97920 = tf.constant([[[[0.3908]]]])
in1Min97920 = tf.constant([[[[0.7732]]]])
in0Con41078 = tf.constant([[0.4777, 0.4862, 0.9433, 0.114, 0.6185, 0.2447, 0.1698, 0.9563, 0.2783, 0.6533, 0.5505]])
in0Fla68938 = tf.constant([[[[1.8224, 1.5284, 1.7976]], [[1.2309, 1.6527, 1.4598]], [[1.2795, 1.5739, 1.3162]], [[1.4137, 1.473, 1.4822]]]])
print (np.array2string(model.predict([in0Min97920,in1Min97920,in0Con41078,in0Fla68938],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul60136.png')

LMin97920 = minimum_layer([[[[[0.3908]]]], [[[[0.7732]]]]], Min97920), 
LRes82865 = reshape_layer(Min97920, [1, 1], Res82865), 
LFla73415 = flatten_layer(Res82865, Fla73415), 
LCon41078 = concatenate_layer([Fla73415,[[0.4777, 0.4862, 0.9433, 0.114, 0.6185, 0.2447, 0.1698, 0.9563, 0.2783, 0.6533, 0.5505]]], 1, Con41078), 
LFla68938 = flatten_layer([[[[1.8224, 1.5284, 1.7976]], [[1.2309, 1.6527, 1.4598]], [[1.2795, 1.5739, 1.3162]], [[1.4137, 1.473, 1.4822]]]], Fla68938), 
LMul60136 = multiply_layer([Con41078,Fla68938], Mul60136), 
exec_layers([LMin97920,LRes82865,LFla73415,LCon41078,LFla68938,LMul60136],["Min97920","Res82865","Fla73415","Con41078","Fla68938","Mul60136"],Mul60136,"Mul60136")

Actual (Unparsed): [[0.7121939, 0.7301166, 0.8739931, 1.1611080, 0.1884078, 0.9028863, 0.3130937, 0.2672482, 1.2586821, 0.3934327, 0.9623109, 0.8159511]]

Expected (Unparsed): [[0.7121939199999999,0.73011668,0.8739931200000001,1.1611079700000002,0.18840780000000001,0.9028863,0.31309365,0.26724822000000004,1.2586820600000002,0.39343270999999996,0.9623109000000001,0.8159510999999999]]

Actual:   [[0.7122, 0.7302, 0.874, 1.1612, 0.1885, 0.9029, 0.3131, 0.2673, 1.2587, 0.3935, 0.9624, 0.816]]

Expected: [[0.7122, 0.7302, 0.874, 1.1612, 0.1885, 0.9029, 0.3131, 0.2673, 1.2587, 0.3935, 0.9624, 0.816]]