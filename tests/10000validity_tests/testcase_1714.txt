import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave35244 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Ave35244 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Lay54135 = tf.keras.layers.Input(shape=([4]))
in0Con87407 = tf.keras.layers.Input(shape=([1, 1, 3, 1]))

Ave35244 = keras.layers.Average(name = 'Ave35244', )([in0Ave35244,in1Ave35244])
Zer11832 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer11832', )(Ave35244)
Lay54135 = keras.layers.LayerNormalization(axis=1, epsilon=2.159799090162023, name = 'Lay54135', )(in0Lay54135)
Res51722 = keras.layers.Reshape((4, 1), name = 'Res51722', )(Lay54135)
Res74856 = keras.layers.Reshape((4, 1, 1), name = 'Res74856', )(Res51722)
Con24475 = keras.layers.Conv2D(4, (4, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con24475', )(Res74856)
Res16289 = keras.layers.Reshape((1, 1, 4, 1), name = 'Res16289', )(Con24475)
Cro34296 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (1, 0)), name = 'Cro34296', )(Res16289)
Con87407 = keras.layers.Concatenate(axis=4, name = 'Con87407', )([Cro34296,in0Con87407])
Add62516 = keras.layers.Add(name = 'Add62516', )([Zer11832,Con87407])
model = tf.keras.models.Model(inputs=[in0Ave35244,in1Ave35244,in0Lay54135,in0Con87407], outputs=Add62516)
w = model.get_layer('Con24475').get_weights() 
w[0] = np.array([[[[0.22, 0.3234, 0.8567, 0.0272]]], [[[0.4656, 0.5866, 0.5354, 0.6366]]], [[[0.6716, 0.9188, 0.4307, 0.2986]]], [[[0.7393, 0.4562, 0.061, 0.6935]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con24475').set_weights(w) 
in0Ave35244 = tf.constant([[[[[0.5109, 0.552]]]]])
in1Ave35244 = tf.constant([[[[[0.4965, 0.7015]]]]])
in0Lay54135 = tf.constant([[1.3979, 1.8161, 1.7632, 1.2904]])
in0Con87407 = tf.constant([[[[[0.926], [0.6701], [0.8426]]]]])
print (np.array2string(model.predict([in0Ave35244,in1Ave35244,in0Lay54135,in0Con87407],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add62516.png')

LAve35244 = average_layer([[[[[[0.5109, 0.552]]]]], [[[[[0.4965, 0.7015]]]]]], Ave35244), 
LZer11832 = zero_padding3D_layer(Ave35244, 0, 0, 0, 0, 2, 0, Zer11832), 
LLay54135 = layer_normalization_layer([[1.3979, 1.8161, 1.7632, 1.2904]], 1, 2.159799090162023, Lay54135), 
LRes51722 = reshape_layer(Lay54135, [4, 1], Res51722), 
LRes74856 = reshape_layer(Res51722, [4, 1, 1], Res74856), 
LCon24475 = conv2D_layer(Res74856, 4, 1,[[[[0.22, 0.3234, 0.8567, 0.0272]]], [[[0.4656, 0.5866, 0.5354, 0.6366]]], [[[0.6716, 0.9188, 0.4307, 0.2986]]], [[[0.7393, 0.4562, 0.061, 0.6935]]]],[0, 0, 0, 0], 1, 1, false, 1, 1, Con24475), 
LRes16289 = reshape_layer(Con24475, [1, 1, 4, 1], Res16289), 
LCro34296 = cropping3D_layer(Res16289, 0, 0, 0, 0, 1, 0, Cro34296), 
LCon87407 = concatenate_layer([Cro34296,[[[[[0.926], [0.6701], [0.8426]]]]]], 4, Con87407), 
LAdd62516 = add_layer([Zer11832,Con87407], Add62516), 
exec_layers([LAve35244,LZer11832,LLay54135,LRes51722,LRes74856,LCon24475,LRes16289,LCro34296,LCon87407,LAdd62516],["Ave35244","Zer11832","Lay54135","Res51722","Res74856","Con24475","Res16289","Cro34296","Con87407","Add62516"],Add62516,"Add62516")

Actual (Unparsed): [[[[[0.0980134, 0.9260000], [0.0378741, 0.6701000], [0.5177593, 1.4693500]]]]]

Expected (Unparsed): [[[[[0.09801336671969721,0.926],[0.03787407889632353,0.6701],[0.5177592814528408,1.46935]]]]]

Actual:   [[[[[0.0981, 0.926], [0.0379, 0.6701], [0.5178, 1.4694]]]]]

Expected: [[[[[0.0981, 0.926], [0.0379, 0.6701], [0.5178, 1.4694]]]]]