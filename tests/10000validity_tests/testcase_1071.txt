import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul83897 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul83897 = tf.keras.layers.Input(shape=([1, 2]))
in0Dot91868 = tf.keras.layers.Input(shape=([3]))
in1Dot91868 = tf.keras.layers.Input(shape=([3]))

Mul83897 = keras.layers.Multiply(name = 'Mul83897', )([in0Mul83897,in1Mul83897])
Mas8151 = keras.layers.Masking(mask_value=1, name = 'Mas8151', )(Mul83897)
Res92085 = keras.layers.Reshape((1, 2, 1), name = 'Res92085', )(Mas8151)
Dot91868 = keras.layers.Dot(axes=(1, 1), name = 'Dot91868', )([in0Dot91868,in1Dot91868])
Res60169 = keras.layers.Reshape((1, 1), name = 'Res60169', )(Dot91868)
Res17757 = keras.layers.Reshape((1, 1, 1), name = 'Res17757', )(Res60169)
Max36828 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Max36828', )(Res17757)
Zer94078 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer94078', )(Max36828)
Max44305 = keras.layers.Maximum(name = 'Max44305', )([Res92085,Zer94078])
model = tf.keras.models.Model(inputs=[in0Mul83897,in1Mul83897,in0Dot91868,in1Dot91868], outputs=Max44305)
in0Mul83897 = tf.constant([[[0.6497, 0.1438]]])
in1Mul83897 = tf.constant([[[0.3316, 0.377]]])
in0Dot91868 = tf.constant([[0.7102, 0.4685, 0.3466]])
in1Dot91868 = tf.constant([[0.2519, 0.3845, 0.6198]])
print (np.array2string(model.predict([in0Mul83897,in1Mul83897,in0Dot91868,in1Dot91868],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max44305.png')

LMul83897 = multiply_layer([[[[0.6497, 0.1438]]], [[[0.3316, 0.377]]]], Mul83897), 
LMas8151 = masking_layer(Mul83897, 1, Mas8151), 
LRes92085 = reshape_layer(Mas8151, [1, 2, 1], Res92085), 
LDot91868 = dot_layer([[0.7102, 0.4685, 0.3466]], [[0.2519, 0.3845, 0.6198]], 1, 1, Dot91868), 
LRes60169 = reshape_layer(Dot91868, [1, 1], Res60169), 
LRes17757 = reshape_layer(Res60169, [1, 1, 1], Res17757), 
LMax36828 = max_pool2D_layer(Res17757, 1, 1, 1, 1, true, Max36828), 
LZer94078 = zero_padding2D_layer(Max36828, 0, 0, 1, 0, Zer94078), 
LMax44305 = maximum_layer([Res92085,Zer94078], Max44305), 
exec_layers([LMul83897,LMas8151,LRes92085,LDot91868,LRes60169,LRes17757,LMax36828,LZer94078,LMax44305],["Mul83897","Mas8151","Res92085","Dot91868","Res60169","Res17757","Max36828","Zer94078","Max44305"],Max44305,"Max44305")

Actual (Unparsed): [[[[0.2154405], [0.5738603]]]]

Expected (Unparsed): [[[[0.21544052000000002],[0.57386031]]]]

Actual:   [[[[0.2155], [0.5739]]]]

Expected: [[[[0.2155], [0.5739]]]]