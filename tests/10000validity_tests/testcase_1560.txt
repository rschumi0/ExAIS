import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add2920 = tf.keras.layers.Input(shape=([2, 1]))
in1Add2920 = tf.keras.layers.Input(shape=([2, 1]))
in0ELU95687 = tf.keras.layers.Input(shape=([1, 2]))
in0Dot24119 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot24119 = tf.keras.layers.Input(shape=([2, 2]))
in0Max18053 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max18053 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con23480 = tf.keras.layers.Input(shape=([2]))
in0Con53315 = tf.keras.layers.Input(shape=([2]))

Add2920 = keras.layers.Add(name = 'Add2920', )([in0Add2920,in1Add2920])
ELU28770 = keras.layers.ELU(alpha=4.244073020394904, name = 'ELU28770', )(Add2920)
Lay10437 = keras.layers.LayerNormalization(axis=2, epsilon=2.3965745984475877, name = 'Lay10437', )(ELU28770)
Thr66152 = keras.layers.ThresholdedReLU(theta=0.83909618938534, name = 'Thr66152', )(Lay10437)
Res98096 = keras.layers.Reshape((2, 1, 1), name = 'Res98096', )(Thr66152)
Zer65586 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer65586', )(Res98096)
ELU95687 = keras.layers.ELU(alpha=2.4180038312303704, name = 'ELU95687', input_shape=(1, 2))(in0ELU95687)
Res92365 = keras.layers.Reshape((1, 2, 1), name = 'Res92365', )(ELU95687)
PRe40930 = keras.layers.PReLU(name = 'PRe40930', )(Res92365)
Zer5184 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer5184', )(PRe40930)
Ave52802 = keras.layers.Average(name = 'Ave52802', )([Zer65586,Zer5184])
Res781 = keras.layers.Reshape((2, 3), name = 'Res781', )(Ave52802)
Fla98590 = keras.layers.Flatten(name = 'Fla98590', )(Res781)
Dot24119 = keras.layers.Dot(axes=(2, 1), name = 'Dot24119', )([in0Dot24119,in1Dot24119])
Fla43688 = keras.layers.Flatten(name = 'Fla43688', )(Dot24119)
Max18053 = keras.layers.Maximum(name = 'Max18053', )([in0Max18053,in1Max18053])
Res27191 = keras.layers.Reshape((1, 1, 2), name = 'Res27191', )(Max18053)
Glo13703 = keras.layers.GlobalMaxPool2D(name = 'Glo13703', )(Res27191)
Con23480 = keras.layers.Concatenate(axis=1, name = 'Con23480', )([Glo13703,in0Con23480])
Sub76127 = keras.layers.Subtract(name = 'Sub76127', )([Fla43688,Con23480])
Con53315 = keras.layers.Concatenate(axis=1, name = 'Con53315', )([Sub76127,in0Con53315])
Add2574 = keras.layers.Add(name = 'Add2574', )([Fla98590,Con53315])
model = tf.keras.models.Model(inputs=[in0Add2920,in1Add2920,in0ELU95687,in0Dot24119,in1Dot24119,in0Max18053,in1Max18053,in0Con23480,in0Con53315], outputs=Add2574)
w = model.get_layer('PRe40930').get_weights() 
w[0] = np.array([[[0.6722], [0.0297]]])
model.get_layer('PRe40930').set_weights(w) 
in0Add2920 = tf.constant([[[0.6756], [0.4607]]])
in1Add2920 = tf.constant([[[0.6394], [0.6641]]])
in0ELU95687 = tf.constant([[[0.4729, 0.4323]]])
in0Dot24119 = tf.constant([[[0.5914, 0.8119], [0.5103, 0.8258]]])
in1Dot24119 = tf.constant([[[0.4606, 0.5404], [0.3374, 0.1113]]])
in0Max18053 = tf.constant([[[[[0.1864], [0.9103]]]]])
in1Max18053 = tf.constant([[[[[0.1406], [0.9592]]]]])
in0Con23480 = tf.constant([[0.8728, 0.4955]])
in0Con53315 = tf.constant([[0.2746, 0.8731]])
print (np.array2string(model.predict([in0Add2920,in1Add2920,in0ELU95687,in0Dot24119,in1Dot24119,in0Max18053,in1Max18053,in0Con23480,in0Con53315],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add2574.png')

LAdd2920 = add_layer([[[[0.6756], [0.4607]]], [[[0.6394], [0.6641]]]], Add2920), 
LELU28770 = elu_layer(Add2920, 4.244073020394904, ELU28770), 
LLay10437 = layer_normalization_layer(ELU28770, 2, 2.3965745984475877, Lay10437), 
LThr66152 = thresholded_relu_layer(Lay10437, 0.83909618938534, Thr66152), 
LRes98096 = reshape_layer(Thr66152, [2, 1, 1], Res98096), 
LZer65586 = zero_padding2D_layer(Res98096, 0, 0, 2, 0, Zer65586), 
LELU95687 = elu_layer([[[0.4729, 0.4323]]], 2.4180038312303704, ELU95687), 
LRes92365 = reshape_layer(ELU95687, [1, 2, 1], Res92365), 
LPRe40930 = prelu_layer(Res92365, [[[0.6722], [0.0297]]], PRe40930), 
LZer5184 = zero_padding2D_layer(PRe40930, 1, 0, 1, 0, Zer5184), 
LAve52802 = average_layer([Zer65586,Zer5184], Ave52802), 
LRes781 = reshape_layer(Ave52802, [2, 3], Res781), 
LFla98590 = flatten_layer(Res781, Fla98590), 
LDot24119 = dot_layer([[[0.5914, 0.8119], [0.5103, 0.8258]]], [[[0.4606, 0.5404], [0.3374, 0.1113]]], 2, 1, Dot24119), 
LFla43688 = flatten_layer(Dot24119, Fla43688), 
LMax18053 = maximum_layer([[[[[[0.1864], [0.9103]]]]], [[[[[0.1406], [0.9592]]]]]], Max18053), 
LRes27191 = reshape_layer(Max18053, [1, 1, 2], Res27191), 
LGlo13703 = global_max_pool2D_layer(Res27191, Glo13703), 
LCon23480 = concatenate_layer([Glo13703,[[0.8728, 0.4955]]], 1, Con23480), 
LSub76127 = subtract_layer(Fla43688,Con23480, Sub76127), 
LCon53315 = concatenate_layer([Sub76127,[[0.2746, 0.8731]]], 1, Con53315), 
LAdd2574 = add_layer([Fla98590,Con53315], Add2574), 
exec_layers([LAdd2920,LELU28770,LLay10437,LThr66152,LRes98096,LZer65586,LELU95687,LRes92365,LPRe40930,LZer5184,LAve52802,LRes781,LFla98590,LDot24119,LFla43688,LMax18053,LRes27191,LGlo13703,LCon23480,LSub76127,LCon53315,LAdd2574],["Add2920","ELU28770","Lay10437","Thr66152","Res98096","Zer65586","ELU95687","Res92365","PRe40930","Zer5184","Ave52802","Res781","Fla98590","Dot24119","Fla43688","Max18053","Res27191","Glo13703","Con23480","Sub76127","Con53315","Add2574"],Add2574,"Add2574")

Actual (Unparsed): [[0.3599339, -0.5492430, -0.3591309, -0.1278223, 0.5110500, 1.0892500]]

Expected (Unparsed): [[0.35993390000000003,-0.5492429700000001,-0.35913090000000003,-0.12782233999999998,0.51105,1.08925]]

Actual:   [[0.36, -0.5492, -0.3591, -0.1278, 0.5111, 1.0893]]

Expected: [[0.36, -0.5492, -0.3591, -0.1278, 0.5111, 1.0893]]