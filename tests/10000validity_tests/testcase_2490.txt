import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave9280 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave9280 = tf.keras.layers.Input(shape=([1, 2]))
in0Glo69658 = tf.keras.layers.Input(shape=([1, 2]))

Ave9280 = keras.layers.Average(name = 'Ave9280', )([in0Ave9280,in1Ave9280])
Fla32459 = keras.layers.Flatten(name = 'Fla32459', )(Ave9280)
Glo69658 = keras.layers.GlobalMaxPool1D(name = 'Glo69658', )(in0Glo69658)
Max36761 = keras.layers.Maximum(name = 'Max36761', )([Fla32459,Glo69658])
Res39033 = keras.layers.Reshape((2, 1), name = 'Res39033', )(Max36761)
Res89128 = keras.layers.Reshape((2, 1, 1), name = 'Res89128', )(Res39033)
Sep36152 = keras.layers.SeparableConv2D(3, (2, 1),strides=(1, 1), padding='valid', name = 'Sep36152', )(Res89128)
model = tf.keras.models.Model(inputs=[in0Ave9280,in1Ave9280,in0Glo69658], outputs=Sep36152)
w = model.get_layer('Sep36152').get_weights() 
w[0] = np.array([[[[0.8158]]], [[[0.6623]]]])
w[1] = np.array([[[[0.5559, 0.849, 0.5166]]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep36152').set_weights(w) 
in0Ave9280 = tf.constant([[[0.9612, 0.4078]]])
in1Ave9280 = tf.constant([[[0.5166, 0.1077]]])
in0Glo69658 = tf.constant([[[1.5479, 1.7722]]])
print (np.array2string(model.predict([in0Ave9280,in1Ave9280,in0Glo69658],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep36152.png')

LAve9280 = average_layer([[[[0.9612, 0.4078]]], [[[0.5166, 0.1077]]]], Ave9280), 
LFla32459 = flatten_layer(Ave9280, Fla32459), 
LGlo69658 = global_max_pool1D_layer([[[1.5479, 1.7722]]], Glo69658), 
LMax36761 = maximum_layer([Fla32459,Glo69658], Max36761), 
LRes39033 = reshape_layer(Max36761, [2, 1], Res39033), 
LRes89128 = reshape_layer(Res39033, [2, 1, 1], Res89128), 
LSep36152 = separable_conv2D_layer(Res89128, 2, 1,[[[[[0.8158]]], [[[0.6623]]]],[[[[0.5559, 0.849, 0.5166]]]]],[0, 0, 0], 1, 1, false, Sep36152), 
exec_layers([LAve9280,LFla32459,LGlo69658,LMax36761,LRes39033,LRes89128,LSep36152],["Ave9280","Fla32459","Glo69658","Max36761","Res39033","Res89128","Sep36152"],Sep36152,"Sep36152")

Actual (Unparsed): [[[[1.3544530, 2.0685926, 1.2586984]]]]

Expected (Unparsed): [[[[1.354453062792,2.06859264312,1.258698421008]]]]

Actual:   [[[[1.3545, 2.0686, 1.2587]]]]

Expected: [[[[1.3545, 2.0686, 1.2587]]]]