import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con74285 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Bat55419 = tf.keras.layers.Input(shape=([4, 3]))
in0Con1978 = tf.keras.layers.Input(shape=([4, 5]))

Con74285 = keras.layers.Conv3D(4, (1, 2, 1),strides=(1, 1, 6), padding='same', dilation_rate=(1, 1, 1), name = 'Con74285', )(in0Con74285)
Res77975 = keras.layers.Reshape((1, 2, 4), name = 'Res77975', )(Con74285)
Res61561 = keras.layers.Reshape((1, 8), name = 'Res61561', )(Res77975)
Zer89127 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer89127', )(Res61561)
Bat55419 = keras.layers.BatchNormalization(axis=2, epsilon=0.37636089490832425,  name = 'Bat55419', )(in0Bat55419)
Con1978 = keras.layers.Concatenate(axis=2, name = 'Con1978', )([Bat55419,in0Con1978])
Add83657 = keras.layers.Add(name = 'Add83657', )([Zer89127,Con1978])
Loc71004 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc71004', )(Add83657)
Up_66783 = keras.layers.UpSampling1D(size=(1), name = 'Up_66783', )(Loc71004)
model = tf.keras.models.Model(inputs=[in0Con74285,in0Bat55419,in0Con1978], outputs=Up_66783)
w = model.get_layer('Con74285').get_weights() 
w[0] = np.array([[[[[0.8775, 0.2936, 0.9586, 0.4609]]], [[[0.4875, 0.6461, 0.5636, 0.6786]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con74285').set_weights(w) 
w = model.get_layer('Bat55419').get_weights() 
w[0] = np.array([0.7341, 0.4447, 0.8443])
w[1] = np.array([0.9603, 0.3699, 0.722])
w[2] = np.array([0.7407, 0.6962, 0.7518])
w[3] = np.array([0.1184, 0.7632, 0.0611])
model.get_layer('Bat55419').set_weights(w) 
w = model.get_layer('Loc71004').get_weights() 
w[0] = np.array([[[0.3844, 0.3883, 0.9467], [0.5048, 0.5176, 0.4043], [0.8486, 0.6613, 0.6122], [0.3044, 0.9913, 0.5864], [0.6889, 0.3819, 0.546], [0.1587, 0.6767, 0.0665], [0.0057, 0.6003, 0.453], [0.0725, 0.7807, 0.8341]], [[0.4616, 0.6484, 0.4033], [0.6838, 0.1649, 0.3674], [0.5181, 0.4587, 0.0595], [0.5412, 0.701, 0.1156], [0.4945, 0.2623, 0.551], [0.6347, 0.0748, 0.2817], [0.4278, 0.4602, 0.9978], [0.419, 0.6733, 0.8637]], [[0.2787, 0.9623, 0.1435], [0.8645, 0.4512, 0.5693], [0.4061, 0.9098, 0.9966], [0.506, 0.0124, 0.8569], [0.4494, 0.6705, 0.84], [0.9326, 0.8563, 0.7429], [0.6202, 0.2438, 0.0234], [0.973, 0.4134, 0.1103]], [[0.7763, 0.572, 0.9782], [0.9531, 0.2809, 0.411], [0.6895, 0.7277, 0.3221], [0.7445, 0.9045, 0.9217], [0.3243, 0.9747, 0.452], [0.9499, 0.8112, 0.0534], [0.2235, 0.3747, 0.9487], [0.9758, 0.6826, 0.7563]]])
w[1] = np.array([[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]])
model.get_layer('Loc71004').set_weights(w) 
in0Con74285 = tf.constant([[[[[0.0504]], [[0.0256]]]]])
in0Bat55419 = tf.constant([[[1.1248, 1.7418, 1.2044], [1.9757, 1.9764, 1.1862], [1.5265, 1.5764, 1.4361], [1.1832, 1.9979, 1.0125]]])
in0Con1978 = tf.constant([[[0.5411, 0.9424, 0.6821, 0.4788, 0.9404], [0.9377, 0.4371, 0.4653, 0.455, 0.9839], [0.6903, 0.4204, 0.3495, 0.7049, 0.0338], [0.6498, 0.1977, 0.1442, 0.1634, 0.4253]]])
print (np.array2string(model.predict([in0Con74285,in0Bat55419,in0Con1978],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_66783.png')

LCon74285 = conv3D_layer([[[[[0.0504]], [[0.0256]]]]], 1, 2, 1,[[[[[0.8775, 0.2936, 0.9586, 0.4609]]], [[[0.4875, 0.6461, 0.5636, 0.6786]]]]],[0, 0, 0, 0], 1, 1, 6, true, 1, 1, 1, Con74285), 
LRes77975 = reshape_layer(Con74285, [1, 2, 4], Res77975), 
LRes61561 = reshape_layer(Res77975, [1, 8], Res61561), 
LZer89127 = zero_padding1D_layer(Res61561, 3, 0, Zer89127), 
LBat55419 = batch_normalization_layer([[[1.1248, 1.7418, 1.2044], [1.9757, 1.9764, 1.1862], [1.5265, 1.5764, 1.4361], [1.1832, 1.9979, 1.0125]]], 2, 0.37636089490832425, [0.7341, 0.4447, 0.8443], [0.9603, 0.3699, 0.722], [0.7407, 0.6962, 0.7518], [0.1184, 0.7632, 0.0611], Bat55419), 
LCon1978 = concatenate_layer([Bat55419,[[[0.5411, 0.9424, 0.6821, 0.4788, 0.9404], [0.9377, 0.4371, 0.4653, 0.455, 0.9839], [0.6903, 0.4204, 0.3495, 0.7049, 0.0338], [0.6498, 0.1977, 0.1442, 0.1634, 0.4253]]]], 2, Con1978), 
LAdd83657 = add_layer([Zer89127,Con1978], Add83657), 
LLoc71004 = locally_connected1D_layer(Add83657, 1,[[[0.3844, 0.3883, 0.9467], [0.5048, 0.5176, 0.4043], [0.8486, 0.6613, 0.6122], [0.3044, 0.9913, 0.5864], [0.6889, 0.3819, 0.546], [0.1587, 0.6767, 0.0665], [0.0057, 0.6003, 0.453], [0.0725, 0.7807, 0.8341]], [[0.4616, 0.6484, 0.4033], [0.6838, 0.1649, 0.3674], [0.5181, 0.4587, 0.0595], [0.5412, 0.701, 0.1156], [0.4945, 0.2623, 0.551], [0.6347, 0.0748, 0.2817], [0.4278, 0.4602, 0.9978], [0.419, 0.6733, 0.8637]], [[0.2787, 0.9623, 0.1435], [0.8645, 0.4512, 0.5693], [0.4061, 0.9098, 0.9966], [0.506, 0.0124, 0.8569], [0.4494, 0.6705, 0.84], [0.9326, 0.8563, 0.7429], [0.6202, 0.2438, 0.0234], [0.973, 0.4134, 0.1103]], [[0.7763, 0.572, 0.9782], [0.9531, 0.2809, 0.411], [0.6895, 0.7277, 0.3221], [0.7445, 0.9045, 0.9217], [0.3243, 0.9747, 0.452], [0.9499, 0.8112, 0.0534], [0.2235, 0.3747, 0.9487], [0.9758, 0.6826, 0.7563]]],[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], 1, Loc71004), 
LUp_66783 = up_sampling1D_layer(Loc71004, 1, Up_66783), 
exec_layers([LCon74285,LRes77975,LRes61561,LZer89127,LBat55419,LCon1978,LAdd83657,LLoc71004,LUp_66783],["Con74285","Res77975","Res61561","Zer89127","Bat55419","Con1978","Add83657","Loc71004","Up_66783"],Up_66783,"Up_66783")

Actual (Unparsed): [[[3.0258948, 4.1844482, 4.2884755], [3.9430730, 3.8715040, 3.0990080], [3.1151379, 4.2727739, 3.4894369], [4.0158418, 3.2550622, 3.4471561]]]

Expected (Unparsed): [[[3.0258948970533064,4.18444828152666,4.288475608813186],[3.9430730302668424,3.8715039727915133,3.0990080114874496],[3.1151378790748865,4.272773938840285,3.4894369076130842],[4.015841731541143,3.255062124811619,3.4471560829338435]]]

Actual:   [[[3.0259, 4.1845, 4.2885], [3.9431, 3.8716, 3.0991], [3.1152, 4.2728, 3.4895], [4.0159, 3.2551, 3.4472]]]

Expected: [[[3.0259, 4.1845, 4.2885], [3.9431, 3.8716, 3.0991], [3.1152, 4.2728, 3.4895], [4.0159, 3.2551, 3.4472]]]