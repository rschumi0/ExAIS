import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub84377 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in1Sub84377 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))

Sub84377 = keras.layers.Subtract(name = 'Sub84377', )([in0Sub84377,in1Sub84377])
Con25484 = keras.layers.Conv3DTranspose(2, (2, 3, 1),strides=(1, 1, 1), padding='same', name = 'Con25484', )(Sub84377)
model = tf.keras.models.Model(inputs=[in0Sub84377,in1Sub84377], outputs=Con25484)
w = model.get_layer('Con25484').get_weights() 
w[0] = np.array([[[[[0.4216, 0.2732], [0.613, 0.833]]], [[[0.7683, 0.1307], [0.0309, 0.9492]]], [[[0.3738, 0.0035], [0.1412, 0.8616]]]], [[[[0.0376, 0.6159], [0.6921, 0.2698]]], [[[0.1955, 0.9337], [0.5565, 0.0138]]], [[[0.3875, 0.7758], [0.8937, 0.3383]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con25484').set_weights(w) 
in0Sub84377 = tf.constant([[[[[0.3439, 0.1591], [0.4547, 0.8328]], [[0.8739, 0.3197], [0.3506, 0.2416]], [[0.0531, 0.5593], [0.5604, 0.7329]]], [[[0.8259, 0.1092], [0.4963, 0.0165]], [[0.7087, 0.5233], [0.1532, 0.7073]], [[0.2536, 0.8245], [0.5797, 0.6406]]], [[[0.4532, 0.7866], [0.3388, 0.655]], [[0.321, 0.6226], [0.3638, 0.2523]], [[0.3261, 0.2956], [0.8864, 0.4527]]]]])
in1Sub84377 = tf.constant([[[[[0.7093, 0.7815], [0.7907, 0.7184]], [[0.9617, 0.8695], [0.8283, 0.0366]], [[0.9086, 0.5095], [0.6217, 0.1273]]], [[[0.909, 0.2877], [0.277, 0.2641]], [[0.6551, 0.3464], [0.727, 0.3861]], [[0.9338, 0.9472], [0.6387, 0.0167]]], [[[0.5025, 0.9262], [0.8277, 0.0038]], [[0.9185, 0.4848], [0.6466, 0.2474]], [[0.7656, 0.1201], [0.7399, 0.3931]]]]])
print (np.array2string(model.predict([in0Sub84377,in1Sub84377],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con25484.png')

LSub84377 = subtract_layer([[[[[0.3439, 0.1591], [0.4547, 0.8328]], [[0.8739, 0.3197], [0.3506, 0.2416]], [[0.0531, 0.5593], [0.5604, 0.7329]]], [[[0.8259, 0.1092], [0.4963, 0.0165]], [[0.7087, 0.5233], [0.1532, 0.7073]], [[0.2536, 0.8245], [0.5797, 0.6406]]], [[[0.4532, 0.7866], [0.3388, 0.655]], [[0.321, 0.6226], [0.3638, 0.2523]], [[0.3261, 0.2956], [0.8864, 0.4527]]]]], [[[[[0.7093, 0.7815], [0.7907, 0.7184]], [[0.9617, 0.8695], [0.8283, 0.0366]], [[0.9086, 0.5095], [0.6217, 0.1273]]], [[[0.909, 0.2877], [0.277, 0.2641]], [[0.6551, 0.3464], [0.727, 0.3861]], [[0.9338, 0.9472], [0.6387, 0.0167]]], [[[0.5025, 0.9262], [0.8277, 0.0038]], [[0.9185, 0.4848], [0.6466, 0.2474]], [[0.7656, 0.1201], [0.7399, 0.3931]]]]], Sub84377), 
LCon25484 = conv3D_transpose_layer(Sub84377, 2, 3, 1,[[[[[0.4216, 0.2732], [0.613, 0.833]]], [[[0.7683, 0.1307], [0.0309, 0.9492]]], [[[0.3738, 0.0035], [0.1412, 0.8616]]]], [[[[0.0376, 0.6159], [0.6921, 0.2698]]], [[[0.1955, 0.9337], [0.5565, 0.0138]]], [[[0.3875, 0.7758], [0.8937, 0.3383]]]]],[0, 0], 1, 1, 1, true, Con25484), 
exec_layers([LSub84377,LCon25484],["Sub84377","Con25484"],Con25484,"Con25484")

Actual (Unparsed): [[[[[-0.5493063, -1.1138777], [-0.3885891, -0.0238590]], [[-0.6251540, -1.5953756], [-0.3258140, 0.6978368]], [[-0.6855157, -0.4652698], [-0.1457916, 0.6821181]]], [[[-1.0107425, -0.4128221], [0.1313899, -0.7731378]], [[-1.4441383, -1.6873506], [0.2550669, 0.1846998]], [[-1.0992890, -0.7173623], [0.3502466, 0.4027830]]], [[[-0.3423254, -0.3493960], [-0.4204586, 0.2418936]], [[-0.6934900, -0.7443797], [0.1435995, 0.5522376]], [[-0.6271283, -0.0851114], [0.6124926, -0.4029771]]]]]

Expected (Unparsed): [[[[[-0.54930634,-1.11387774],[-0.38858903999999994,-0.02385902000000001]],[[-0.6251539599999999,-1.5953756],[-0.32581397,0.6978368100000001]],[[-0.6855157299999999,-0.46526983],[-0.14579162999999998,0.68211811]]],[[[-1.01074252,-0.41282213],[0.13138988999999995,-0.7731378]],[[-1.4441383399999999,-1.6873506500000004],[0.2550669499999999,0.1846997399999999]],[[-1.09928905,-0.7173623700000001],[0.35024660999999996,0.40278298]]],[[[-0.3423253799999999,-0.34939606000000006],[-0.42045859999999996,0.24189368000000006]],[[-0.6934899999999999,-0.74437979],[0.14359951,0.55223761]],[[-0.6271282699999999,-0.08511143999999995],[0.6124925699999999,-0.40297713]]]]]

Actual:   [[[[[-0.5493, -1.1138], [-0.3885, -0.0238]], [[-0.6251, -1.5953], [-0.3258, 0.6979]], [[-0.6855, -0.4652], [-0.1457, 0.6822]]], [[[-1.0107, -0.4128], [0.1314, -0.7731]], [[-1.4441, -1.6873], [0.2551, 0.1847]], [[-1.0992, -0.7173], [0.3503, 0.4028]]], [[[-0.3423, -0.3493], [-0.4204, 0.2419]], [[-0.6934, -0.7443], [0.1436, 0.5523]], [[-0.6271, -0.0851], [0.6125, -0.4029]]]]]

Expected: [[[[[-0.5493, -1.1138], [-0.3885, -0.0238]], [[-0.6251, -1.5953], [-0.3258, 0.6979]], [[-0.6855, -0.4652], [-0.1457, 0.6822]]], [[[-1.0107, -0.4128], [0.1314, -0.7731]], [[-1.4441, -1.6873], [0.2551, 0.1847]], [[-1.0992, -0.7173], [0.3503, 0.4028]]], [[[-0.3423, -0.3493], [-0.4204, 0.2419]], [[-0.6934, -0.7443], [0.1436, 0.5523]], [[-0.6271, -0.0851], [0.6125, -0.4029]]]]]