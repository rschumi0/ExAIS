import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max47575 = tf.keras.layers.Input(shape=([2, 1]))
in1Max47575 = tf.keras.layers.Input(shape=([2, 1]))
in0Con35727 = tf.keras.layers.Input(shape=([1]))
in0Glo78383 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Max47575 = keras.layers.Maximum(name = 'Max47575', )([in0Max47575,in1Max47575])
Res7745 = keras.layers.Reshape((2, 1, 1), name = 'Res7745', )(Max47575)
Res44012 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res44012', )(Res7745)
Glo72270 = keras.layers.GlobalMaxPool3D(name = 'Glo72270', )(Res44012)
Sof8869 = keras.layers.Softmax(axis=1, name = 'Sof8869', )(Glo72270)
Con35727 = keras.layers.Concatenate(axis=1, name = 'Con35727', )([Sof8869,in0Con35727])
Glo78383 = keras.layers.GlobalMaxPool3D(name = 'Glo78383', )(in0Glo78383)
Add93757 = keras.layers.Add(name = 'Add93757', )([Con35727,Glo78383])
model = tf.keras.models.Model(inputs=[in0Max47575,in1Max47575,in0Con35727,in0Glo78383], outputs=Add93757)
in0Max47575 = tf.constant([[[0.0074], [0.9859]]])
in1Max47575 = tf.constant([[[0.8367], [0.0585]]])
in0Con35727 = tf.constant([[0.746]])
in0Glo78383 = tf.constant([[[[[1.9349, 1.731], [1.3798, 1.1883]]]]])
print (np.array2string(model.predict([in0Max47575,in1Max47575,in0Con35727,in0Glo78383],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add93757.png')

LMax47575 = maximum_layer([[[[0.0074], [0.9859]]], [[[0.8367], [0.0585]]]], Max47575), 
LRes7745 = reshape_layer(Max47575, [2, 1, 1], Res7745), 
LRes44012 = reshape_layer(Res7745, [2, 1, 1, 1], Res44012), 
LGlo72270 = global_max_pool3D_layer(Res44012, Glo72270), 
LSof8869 = softmax_layer(Glo72270, 1, Sof8869), 
LCon35727 = concatenate_layer([Sof8869,[[0.746]]], 1, Con35727), 
LGlo78383 = global_max_pool3D_layer([[[[[1.9349, 1.731], [1.3798, 1.1883]]]]], Glo78383), 
LAdd93757 = add_layer([Con35727,Glo78383], Add93757), 
exec_layers([LMax47575,LRes7745,LRes44012,LGlo72270,LSof8869,LCon35727,LGlo78383,LAdd93757],["Max47575","Res7745","Res44012","Glo72270","Sof8869","Con35727","Glo78383","Add93757"],Add93757,"Add93757")

Actual (Unparsed): [[2.9349000, 2.4769999]]

Expected (Unparsed): [[2.9349,2.4770000000000003]]

Actual:   [[2.9349, 2.477]]

Expected: [[2.9349, 2.4771]]