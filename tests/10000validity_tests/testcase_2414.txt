import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add60261 = tf.keras.layers.Input(shape=([2, 2]))
in1Add60261 = tf.keras.layers.Input(shape=([2, 2]))

Add60261 = keras.layers.Add(name = 'Add60261', )([in0Add60261,in1Add60261])
Con68936 = keras.layers.Conv1D(4, (2),strides=(1), padding='same', dilation_rate=(1), name = 'Con68936', )(Add60261)
Res37865 = keras.layers.Reshape((2, 4, 1), name = 'Res37865', )(Con68936)
Con74964 = keras.layers.Conv2DTranspose(2, (2, 3),strides=(1, 1), padding='same', name = 'Con74964', )(Res37865)
Thr41368 = keras.layers.ThresholdedReLU(theta=3.2146143148816666, name = 'Thr41368', )(Con74964)
model = tf.keras.models.Model(inputs=[in0Add60261,in1Add60261], outputs=Thr41368)
w = model.get_layer('Con68936').get_weights() 
w[0] = np.array([[[0.5967, 0.4871, 0.1486, 0.3193], [0.5855, 0.2574, 0.1246, 0.3993]], [[0.5838, 0.5266, 0.5841, 0.4505], [0.612, 0.8346, 0.8448, 0.9517]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con68936').set_weights(w) 
w = model.get_layer('Con74964').get_weights() 
w[0] = np.array([[[[0.0567], [0.0548]], [[0.2792], [0.6893]], [[0.1601], [0.2498]]], [[[0.0172], [0.7629]], [[0.8998], [0.192]], [[0.1988], [0.0513]]]])
w[1] = np.array([0, 0])
model.get_layer('Con74964').set_weights(w) 
in0Add60261 = tf.constant([[[0.0746, 0.4212], [0.9712, 0.9971]]])
in1Add60261 = tf.constant([[[0.9203, 0.9243], [0.0579, 0.4357]]])
print (np.array2string(model.predict([in0Add60261,in1Add60261],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr41368.png')

LAdd60261 = add_layer([[[[0.0746, 0.4212], [0.9712, 0.9971]]], [[[0.9203, 0.9243], [0.0579, 0.4357]]]], Add60261), 
LCon68936 = conv1D_layer(Add60261, 2,[[[0.5967, 0.4871, 0.1486, 0.3193], [0.5855, 0.2574, 0.1246, 0.3993]], [[0.5838, 0.5266, 0.5841, 0.4505], [0.612, 0.8346, 0.8448, 0.9517]]],[0, 0, 0, 0], 1, true, 1, Con68936), 
LRes37865 = reshape_layer(Con68936, [2, 4, 1], Res37865), 
LCon74964 = conv2D_transpose_layer(Res37865, 2, 3,[[[[0.0567], [0.0548]], [[0.2792], [0.6893]], [[0.1601], [0.2498]]], [[[0.0172], [0.7629]], [[0.8998], [0.192]], [[0.1988], [0.0513]]]],[0, 0], 1, 1, true, Con74964), 
LThr41368 = thresholded_relu_layer(Con74964, 3.2146143148816666, Thr41368), 
exec_layers([LAdd60261,LCon68936,LRes37865,LCon74964,LThr41368],["Add60261","Con68936","Res37865","Con74964","Thr41368"],Thr41368,"Thr41368")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 3.5578112], [3.4106188, 3.2434216], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0],[0,0],[0,0],[0,0]],[[0,3.557811190492],[3.410618789681,3.243421601616],[0,0],[0,0]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0], [0, 0]], [[0, 3.5579], [3.4107, 3.2435], [0, 0], [0, 0]]]]

Expected: [[[[0, 0], [0, 0], [0, 0], [0, 0]], [[0, 3.5579], [3.4107, 3.2435], [0, 0], [0, 0]]]]