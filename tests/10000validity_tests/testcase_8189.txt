import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep33941 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Sof18320 = tf.keras.layers.Input(shape=([1, 1]))
in0Con97072 = tf.keras.layers.Input(shape=([1, 2]))

Dep33941 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='valid', name = 'Dep33941', )(in0Dep33941)
Den51029 = keras.layers.Dense(3,name = 'Den51029', )(Dep33941)
Res51586 = keras.layers.Reshape((1, 3), name = 'Res51586', )(Den51029)
Sof18320 = keras.layers.Softmax(axis=1, name = 'Sof18320', input_shape=(1, 1))(in0Sof18320)
Con97072 = keras.layers.Concatenate(axis=2, name = 'Con97072', )([Sof18320,in0Con97072])
Ave79882 = keras.layers.Average(name = 'Ave79882', )([Res51586,Con97072])
model = tf.keras.models.Model(inputs=[in0Dep33941,in0Sof18320,in0Con97072], outputs=Ave79882)
w = model.get_layer('Dep33941').get_weights() 
w[0] = np.array([[[[0.8142]], [[0.1093]]]])
w[1] = np.array([0])
model.get_layer('Dep33941').set_weights(w) 
w = model.get_layer('Den51029').get_weights() 
w[0] = np.array([[0.2738, 0.7051, 0.0851]])
w[1] = np.array([0.06, 0.1127, 0.9999])
model.get_layer('Den51029').set_weights(w) 
in0Dep33941 = tf.constant([[[[0.7494], [0.8595]]]])
in0Sof18320 = tf.constant([[[0.2389]]])
in0Con97072 = tf.constant([[[0.2755, 0.1796]]])
print (np.array2string(model.predict([in0Dep33941,in0Sof18320,in0Con97072],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave79882.png')

LDep33941 = depthwise_conv2D_layer([[[[0.7494], [0.8595]]]], 1, 2,[[[[0.8142]], [[0.1093]]]],[0], 1, 1, false, Dep33941), 
LDen51029 = dense_layer(Dep33941, [[0.2738, 0.7051, 0.0851]],[0.06, 0.1127, 0.9999], Den51029), 
LRes51586 = reshape_layer(Den51029, [1, 3], Res51586), 
LSof18320 = softmax_layer([[[0.2389]]], 1, Sof18320), 
LCon97072 = concatenate_layer([Sof18320,[[[0.2755, 0.1796]]]], 2, Con97072), 
LAve79882 = average_layer([Res51586,Con97072], Ave79882), 
exec_layers([LDep33941,LDen51029,LRes51586,LSof18320,LCon97072,LAve79882],["Dep33941","Den51029","Res51586","Sof18320","Con97072","Ave79882"],Ave79882,"Ave79882")

Actual (Unparsed): [[[0.6263920, 0.4423322, 0.6197097]]]

Expected (Unparsed): [[[0.626391951227,0.44233215781650004,0.6197096605165]]]

Actual:   [[[0.6264, 0.4424, 0.6198]]]

Expected: [[[0.6264, 0.4424, 0.6198]]]