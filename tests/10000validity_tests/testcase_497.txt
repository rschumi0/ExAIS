import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot62132 = tf.keras.layers.Input(shape=([2]))
in1Dot62132 = tf.keras.layers.Input(shape=([2]))

Dot62132 = keras.layers.Dot(axes=(1, 1), name = 'Dot62132', )([in0Dot62132,in1Dot62132])
Res68755 = keras.layers.Reshape((1, 1), name = 'Res68755', )(Dot62132)
GRU26298 = keras.layers.GRU(3,reset_after=False, recurrent_activation='sigmoid', name = 'GRU26298', )(Res68755)
Res77607 = keras.layers.Reshape((3, 1), name = 'Res77607', )(GRU26298)
Res58247 = keras.layers.Reshape((3, 1, 1), name = 'Res58247', )(Res77607)
Res25277 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res25277', )(Res58247)
Glo36005 = keras.layers.GlobalAveragePooling3D(name = 'Glo36005', )(Res25277)
model = tf.keras.models.Model(inputs=[in0Dot62132,in1Dot62132], outputs=Glo36005)
w = model.get_layer('GRU26298').get_weights() 
w[0] = np.array([[10, 3, 4, 1, 7, 2, 6, 1, 4]])
w[1] = np.array([[7, 2, 6, 10, 6, 3, 3, 4, 8], [5, 4, 10, 8, 10, 9, 9, 6, 9], [5, 7, 8, 5, 8, 7, 8, 1, 3]])
w[2] = np.array([1, 6, 3, 1, 7, 3, 6, 3, 6])
model.get_layer('GRU26298').set_weights(w) 
in0Dot62132 = tf.constant([[0.9009, 0.8087]])
in1Dot62132 = tf.constant([[0.1494, 0.9546]])
print (np.array2string(model.predict([in0Dot62132,in1Dot62132],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo36005.png')

LDot62132 = dot_layer([[0.9009, 0.8087]], [[0.1494, 0.9546]], 1, 1, Dot62132), 
LRes68755 = reshape_layer(Dot62132, [1, 1], Res68755), 
LGRU26298 = gru_layer(Res68755,[[10, 3, 4, 1, 7, 2, 6, 1, 4]],[[7, 2, 6, 10, 6, 3, 3, 4, 8], [5, 4, 10, 8, 10, 9, 9, 6, 9], [5, 7, 8, 5, 8, 7, 8, 1, 3]],[1, 6, 3, 1, 7, 3, 6, 3, 6], false, GRU26298), 
LRes77607 = reshape_layer(GRU26298, [3, 1], Res77607), 
LRes58247 = reshape_layer(Res77607, [3, 1, 1], Res58247), 
LRes25277 = reshape_layer(Res58247, [3, 1, 1, 1], Res25277), 
LGlo36005 = global_average_pooling3D_layer(Res25277, Glo36005), 
exec_layers([LDot62132,LRes68755,LGRU26298,LRes77607,LRes58247,LRes25277,LGlo36005],["Dot62132","Res68755","GRU26298","Res77607","Res58247","Res25277","Glo36005"],Glo36005,"Glo36005")

Actual (Unparsed): [[0.0005097]]

Expected (Unparsed): [[0.0005096526654889171]]

Actual:   [[0.0006]]

Expected: [[0.0006]]