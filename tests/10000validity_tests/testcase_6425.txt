import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave19285 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Ave19285 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Dot28556 = tf.keras.layers.Input(shape=([3]))
in1Dot28556 = tf.keras.layers.Input(shape=([3]))
in0Con3563 = tf.keras.layers.Input(shape=([15]))

Ave19285 = keras.layers.Average(name = 'Ave19285', )([in0Ave19285,in1Ave19285])
Thr55022 = keras.layers.ThresholdedReLU(theta=1.65197204946826, name = 'Thr55022', )(Ave19285)
Up_83071 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_83071', )(Thr55022)
Res72939 = keras.layers.Reshape((2, 2, 4), name = 'Res72939', )(Up_83071)
Res68612 = keras.layers.Reshape((2, 8), name = 'Res68612', )(Res72939)
Fla44173 = keras.layers.Flatten(name = 'Fla44173', )(Res68612)
Dot28556 = keras.layers.Dot(axes=(1, 1), name = 'Dot28556', )([in0Dot28556,in1Dot28556])
Con3563 = keras.layers.Concatenate(axis=1, name = 'Con3563', )([Dot28556,in0Con3563])
Mul23881 = keras.layers.Multiply(name = 'Mul23881', )([Fla44173,Con3563])
model = tf.keras.models.Model(inputs=[in0Ave19285,in1Ave19285,in0Dot28556,in1Dot28556,in0Con3563], outputs=Mul23881)
in0Ave19285 = tf.constant([[[[[0.1001, 0.8032]]]]])
in1Ave19285 = tf.constant([[[[[0.6392, 0.0151]]]]])
in0Dot28556 = tf.constant([[0.2081, 0.6042, 0.5519]])
in1Dot28556 = tf.constant([[0.6943, 0.74, 0.6448]])
in0Con3563 = tf.constant([[0.017, 0.2985, 0.6384, 0.7046, 0.8119, 0.0157, 0.2644, 0.8543, 0.5508, 0.0218, 0.6369, 0.0419, 0.7805, 0.164, 0.5284]])
print (np.array2string(model.predict([in0Ave19285,in1Ave19285,in0Dot28556,in1Dot28556,in0Con3563],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul23881.png')

LAve19285 = average_layer([[[[[[0.1001, 0.8032]]]]], [[[[[0.6392, 0.0151]]]]]], Ave19285), 
LThr55022 = thresholded_relu_layer(Ave19285, 1.65197204946826, Thr55022), 
LUp_83071 = up_sampling3D_layer(Thr55022, 2, 2, 2, Up_83071), 
LRes72939 = reshape_layer(Up_83071, [2, 2, 4], Res72939), 
LRes68612 = reshape_layer(Res72939, [2, 8], Res68612), 
LFla44173 = flatten_layer(Res68612, Fla44173), 
LDot28556 = dot_layer([[0.2081, 0.6042, 0.5519]], [[0.6943, 0.74, 0.6448]], 1, 1, Dot28556), 
LCon3563 = concatenate_layer([Dot28556,[[0.017, 0.2985, 0.6384, 0.7046, 0.8119, 0.0157, 0.2644, 0.8543, 0.5508, 0.0218, 0.6369, 0.0419, 0.7805, 0.164, 0.5284]]], 1, Con3563), 
LMul23881 = multiply_layer([Fla44173,Con3563], Mul23881), 
exec_layers([LAve19285,LThr55022,LUp_83071,LRes72939,LRes68612,LFla44173,LDot28556,LCon3563,LMul23881],["Ave19285","Thr55022","Up_83071","Res72939","Res68612","Fla44173","Dot28556","Con3563","Mul23881"],Mul23881,"Mul23881")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]]

Actual:   [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]

Expected: [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]