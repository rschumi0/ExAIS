import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul41979 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul41979 = tf.keras.layers.Input(shape=([2, 1, 2]))

Mul41979 = keras.layers.Multiply(name = 'Mul41979', )([in0Mul41979,in1Mul41979])
Bat90914 = keras.layers.BatchNormalization(axis=3, epsilon=0.9667138356823191,  name = 'Bat90914', )(Mul41979)
Loc78054 = keras.layers.LocallyConnected2D(4, (2, 1),strides=(4, 1), name = 'Loc78054', )(Bat90914)
Con66551 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='valid', name = 'Con66551', )(Loc78054)
model = tf.keras.models.Model(inputs=[in0Mul41979,in1Mul41979], outputs=Con66551)
w = model.get_layer('Bat90914').get_weights() 
w[0] = np.array([0.5531, 0.4648])
w[1] = np.array([0.3348, 0.9477])
w[2] = np.array([0.8787, 0.1991])
w[3] = np.array([0.865, 0.8563])
model.get_layer('Bat90914').set_weights(w) 
w = model.get_layer('Loc78054').get_weights() 
w[0] = np.array([[[0.8002, 0.1158, 0.7696, 0.872], [0.5525, 0.2759, 0.7106, 0.5823], [0.2694, 0.7461, 0.2866, 0.4302], [0.1653, 0.4279, 0.2298, 0.4839]]])
w[1] = np.array([[[0, 0, 0, 0]]])
model.get_layer('Loc78054').set_weights(w) 
w = model.get_layer('Con66551').get_weights() 
w[0] = np.array([[[[0.1454, 0.4675, 0.0246, 0.5278], [0.3297, 0.1773, 0.5892, 0.0491], [0.0692, 0.1099, 0.8642, 0.6857]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con66551').set_weights(w) 
in0Mul41979 = tf.constant([[[[0.6023, 0.0416]], [[0.8826, 0.5801]]]])
in1Mul41979 = tf.constant([[[[0.7357, 0.1369]], [[0.4307, 0.1035]]]])
print (np.array2string(model.predict([in0Mul41979,in1Mul41979],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con66551.png')

LMul41979 = multiply_layer([[[[[0.6023, 0.0416]], [[0.8826, 0.5801]]]], [[[[0.7357, 0.1369]], [[0.4307, 0.1035]]]]], Mul41979), 
LBat90914 = batch_normalization_layer(Mul41979, 3, 0.9667138356823191, [0.5531, 0.4648], [0.3348, 0.9477], [0.8787, 0.1991], [0.865, 0.8563], Bat90914), 
LLoc78054 = locally_connected2D_layer(Bat90914, 2, 1,[[[0.8002, 0.1158, 0.7696, 0.872], [0.5525, 0.2759, 0.7106, 0.5823], [0.2694, 0.7461, 0.2866, 0.4302], [0.1653, 0.4279, 0.2298, 0.4839]]],[[[0, 0, 0, 0]]], 4, 1, Loc78054), 
LCon66551 = conv2D_transpose_layer(Loc78054, 1, 1,[[[[0.1454, 0.4675, 0.0246, 0.5278], [0.3297, 0.1773, 0.5892, 0.0491], [0.0692, 0.1099, 0.8642, 0.6857]]]],[0, 0, 0], 1, 1, false, Con66551), 
exec_layers([LMul41979,LBat90914,LLoc78054,LCon66551],["Mul41979","Bat90914","Loc78054","Con66551"],Con66551,"Con66551")

Actual (Unparsed): [[[[1.0905578, 1.0344981, 1.7762075]]]]

Expected (Unparsed): [[[[1.0905577523653411,1.0344980781499726,1.776207523908884]]]]

Actual:   [[[[1.0906, 1.0345, 1.7763]]]]

Expected: [[[[1.0906, 1.0345, 1.7763]]]]