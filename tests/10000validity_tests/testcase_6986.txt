import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max67880 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max67880 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Dot10082 = tf.keras.layers.Input(shape=([2]))
in1Dot10082 = tf.keras.layers.Input(shape=([2]))
in0Con98886 = tf.keras.layers.Input(shape=([1]))

Max67880 = keras.layers.Maximum(name = 'Max67880', )([in0Max67880,in1Max67880])
Res62591 = keras.layers.Reshape((1, 1, 2), name = 'Res62591', )(Max67880)
Res35676 = keras.layers.Reshape((1, 2), name = 'Res35676', )(Res62591)
Fla49937 = keras.layers.Flatten(name = 'Fla49937', )(Res35676)
Dot10082 = keras.layers.Dot(axes=(1, 1), name = 'Dot10082', )([in0Dot10082,in1Dot10082])
Con98886 = keras.layers.Concatenate(axis=1, name = 'Con98886', )([Dot10082,in0Con98886])
Mul18346 = keras.layers.Multiply(name = 'Mul18346', )([Fla49937,Con98886])
model = tf.keras.models.Model(inputs=[in0Max67880,in1Max67880,in0Dot10082,in1Dot10082,in0Con98886], outputs=Mul18346)
in0Max67880 = tf.constant([[[[[0.856], [0.999]]]]])
in1Max67880 = tf.constant([[[[[0.6901], [0.5637]]]]])
in0Dot10082 = tf.constant([[0.8491, 0.1477]])
in1Dot10082 = tf.constant([[0.9498, 0.8764]])
in0Con98886 = tf.constant([[0.7642]])
print (np.array2string(model.predict([in0Max67880,in1Max67880,in0Dot10082,in1Dot10082,in0Con98886],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul18346.png')

LMax67880 = maximum_layer([[[[[[0.856], [0.999]]]]], [[[[[0.6901], [0.5637]]]]]], Max67880), 
LRes62591 = reshape_layer(Max67880, [1, 1, 2], Res62591), 
LRes35676 = reshape_layer(Res62591, [1, 2], Res35676), 
LFla49937 = flatten_layer(Res35676, Fla49937), 
LDot10082 = dot_layer([[0.8491, 0.1477]], [[0.9498, 0.8764]], 1, 1, Dot10082), 
LCon98886 = concatenate_layer([Dot10082,[[0.7642]]], 1, Con98886), 
LMul18346 = multiply_layer([Fla49937,Con98886], Mul18346), 
exec_layers([LMax67880,LRes62591,LRes35676,LFla49937,LDot10082,LCon98886,LMul18346],["Max67880","Res62591","Res35676","Fla49937","Dot10082","Con98886","Mul18346"],Mul18346,"Mul18346")

Actual (Unparsed): [[0.8011471, 0.7634358]]

Expected (Unparsed): [[0.80114705776,0.7634358]]

Actual:   [[0.8012, 0.7635]]

Expected: [[0.8012, 0.7635]]