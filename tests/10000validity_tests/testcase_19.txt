import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul98762 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul98762 = tf.keras.layers.Input(shape=([1, 2, 2]))

Mul98762 = keras.layers.Multiply(name = 'Mul98762', )([in0Mul98762,in1Mul98762])
Res42019 = keras.layers.Reshape((1, 2, 2, 1), name = 'Res42019', )(Mul98762)
Up_35797 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_35797', )(Res42019)
Res92366 = keras.layers.Reshape((2, 4, 4), name = 'Res92366', )(Up_35797)
Res99371 = keras.layers.Reshape((2, 16), name = 'Res99371', )(Res92366)
Glo50216 = keras.layers.GlobalMaxPool1D(name = 'Glo50216', )(Res99371)
model = tf.keras.models.Model(inputs=[in0Mul98762,in1Mul98762], outputs=Glo50216)
in0Mul98762 = tf.constant([[[[0.7752, 0.8362], [0.0716, 0.0079]]]])
in1Mul98762 = tf.constant([[[[0.526, 0.7094], [0.368, 0.8479]]]])
print (np.array2string(model.predict([in0Mul98762,in1Mul98762],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo50216.png')

LMul98762 = multiply_layer([[[[[0.7752, 0.8362], [0.0716, 0.0079]]]], [[[[0.526, 0.7094], [0.368, 0.8479]]]]], Mul98762), 
LRes42019 = reshape_layer(Mul98762, [1, 2, 2, 1], Res42019), 
LUp_35797 = up_sampling3D_layer(Res42019, 2, 2, 2, Up_35797), 
LRes92366 = reshape_layer(Up_35797, [2, 4, 4], Res92366), 
LRes99371 = reshape_layer(Res92366, [2, 16], Res99371), 
LGlo50216 = global_max_pool1D_layer(Res99371, Glo50216), 
exec_layers([LMul98762,LRes42019,LUp_35797,LRes92366,LRes99371,LGlo50216],["Mul98762","Res42019","Up_35797","Res92366","Res99371","Glo50216"],Glo50216,"Glo50216")

Actual (Unparsed): [[0.4077552, 0.4077552, 0.5932003, 0.5932003, 0.4077552, 0.4077552, 0.5932003, 0.5932003, 0.0263488, 0.0263488, 0.0066984, 0.0066984, 0.0263488, 0.0263488, 0.0066984, 0.0066984]]

Expected (Unparsed): [[0.40775520000000004,0.40775520000000004,0.59320028,0.59320028,0.40775520000000004,0.40775520000000004,0.59320028,0.59320028,0.0263488,0.0263488,0.00669841,0.00669841,0.0263488,0.0263488,0.00669841,0.00669841]]

Actual:   [[0.4078, 0.4078, 0.5933, 0.5933, 0.4078, 0.4078, 0.5933, 0.5933, 0.0264, 0.0264, 0.0067, 0.0067, 0.0264, 0.0264, 0.0067, 0.0067]]

Expected: [[0.4078, 0.4078, 0.5933, 0.5933, 0.4078, 0.4078, 0.5933, 0.5933, 0.0264, 0.0264, 0.0067, 0.0067, 0.0264, 0.0264, 0.0067, 0.0067]]