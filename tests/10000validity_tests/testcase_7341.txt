import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave6786 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Ave6786 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Glo50891 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Min15013 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Min15013 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con47323 = tf.keras.layers.Input(shape=([2, 3, 3]))

Ave6786 = keras.layers.Average(name = 'Ave6786', )([in0Ave6786,in1Ave6786])
Res94497 = keras.layers.Reshape((2, 1, 4), name = 'Res94497', )(Ave6786)
Zer2193 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer2193', )(Res94497)
Glo50891 = keras.layers.GlobalAveragePooling3D(name = 'Glo50891', )(in0Glo50891)
Res41963 = keras.layers.Reshape((2, 1), name = 'Res41963', )(Glo50891)
Res14853 = keras.layers.Reshape((2, 1, 1), name = 'Res14853', )(Res41963)
Zer93718 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer93718', )(Res14853)
Min15013 = keras.layers.Minimum(name = 'Min15013', )([in0Min15013,in1Min15013])
Zer21407 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer21407', )(Min15013)
Add88399 = keras.layers.Add(name = 'Add88399', )([Zer93718,Zer21407])
Con47323 = keras.layers.Concatenate(axis=3, name = 'Con47323', )([Add88399,in0Con47323])
Min34140 = keras.layers.Minimum(name = 'Min34140', )([Zer2193,Con47323])
Res97296 = keras.layers.Reshape((2, 12), name = 'Res97296', )(Min34140)
Zer71261 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer71261', )(Res97296)
Cro70441 = keras.layers.Cropping1D(cropping=((2, 0)), name = 'Cro70441', )(Zer71261)
Thr16066 = keras.layers.ThresholdedReLU(theta=3.4581766681776887, name = 'Thr16066', )(Cro70441)
model = tf.keras.models.Model(inputs=[in0Ave6786,in1Ave6786,in0Glo50891,in0Min15013,in1Min15013,in0Con47323], outputs=Thr16066)
in0Ave6786 = tf.constant([[[[[0.8853, 0.4008], [0.4326, 0.4709]]], [[[0.7866, 0.4491], [0.7897, 0.8814]]]]])
in1Ave6786 = tf.constant([[[[[0.0741, 0.7059], [0.0387, 0.1452]]], [[[0.4683, 0.8972], [0.7057, 0.3461]]]]])
in0Glo50891 = tf.constant([[[[[1.1311, 1.8513]]], [[[1.9456, 1.6384]]]]])
in0Min15013 = tf.constant([[[[0.7863], [0.0535]]]])
in1Min15013 = tf.constant([[[[0.9999], [0.8809]]]])
in0Con47323 = tf.constant([[[[0.5916, 0.7967, 0.3039], [0.4128, 0.082, 0.137], [0.3659, 0.7763, 0.4956]], [[0.8721, 0.543, 0.9915], [0.1387, 0.6695, 0.9995], [0.338, 0.9591, 0.5361]]]])
print (np.array2string(model.predict([in0Ave6786,in1Ave6786,in0Glo50891,in0Min15013,in1Min15013,in0Con47323],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr16066.png')

LAve6786 = average_layer([[[[[[0.8853, 0.4008], [0.4326, 0.4709]]], [[[0.7866, 0.4491], [0.7897, 0.8814]]]]], [[[[[0.0741, 0.7059], [0.0387, 0.1452]]], [[[0.4683, 0.8972], [0.7057, 0.3461]]]]]], Ave6786), 
LRes94497 = reshape_layer(Ave6786, [2, 1, 4], Res94497), 
LZer2193 = zero_padding2D_layer(Res94497, 0, 0, 2, 0, Zer2193), 
LGlo50891 = global_average_pooling3D_layer([[[[[1.1311, 1.8513]]], [[[1.9456, 1.6384]]]]], Glo50891), 
LRes41963 = reshape_layer(Glo50891, [2, 1], Res41963), 
LRes14853 = reshape_layer(Res41963, [2, 1, 1], Res14853), 
LZer93718 = zero_padding2D_layer(Res14853, 0, 0, 2, 0, Zer93718), 
LMin15013 = minimum_layer([[[[[0.7863], [0.0535]]]], [[[[0.9999], [0.8809]]]]], Min15013), 
LZer21407 = zero_padding2D_layer(Min15013, 1, 0, 1, 0, Zer21407), 
LAdd88399 = add_layer([Zer93718,Zer21407], Add88399), 
LCon47323 = concatenate_layer([Add88399,[[[[0.5916, 0.7967, 0.3039], [0.4128, 0.082, 0.137], [0.3659, 0.7763, 0.4956]], [[0.8721, 0.543, 0.9915], [0.1387, 0.6695, 0.9995], [0.338, 0.9591, 0.5361]]]]], 3, Con47323), 
LMin34140 = minimum_layer([Zer2193,Con47323], Min34140), 
LRes97296 = reshape_layer(Min34140, [2, 12], Res97296), 
LZer71261 = zero_padding1D_layer(Res97296, 1, 0, Zer71261), 
LCro70441 = cropping1D_layer(Zer71261, 2, 0, Cro70441), 
LThr16066 = thresholded_relu_layer(Cro70441, 3.4581766681776887, Thr16066), 
exec_layers([LAve6786,LRes94497,LZer2193,LGlo50891,LRes41963,LRes14853,LZer93718,LMin15013,LZer21407,LAdd88399,LCon47323,LMin34140,LRes97296,LZer71261,LCro70441,LThr16066],["Ave6786","Res94497","Zer2193","Glo50891","Res41963","Res14853","Zer93718","Min15013","Zer21407","Add88399","Con47323","Min34140","Res97296","Zer71261","Cro70441","Thr16066"],Thr16066,"Thr16066")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]