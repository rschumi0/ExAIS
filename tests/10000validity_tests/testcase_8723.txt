import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con33572 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Sub51752 = tf.keras.layers.Input(shape=([3]))
in1Sub51752 = tf.keras.layers.Input(shape=([3]))
in0Fla82057 = tf.keras.layers.Input(shape=([1]))
in0Con91721 = tf.keras.layers.Input(shape=([2]))
in0Con5182 = tf.keras.layers.Input(shape=([1]))
in0Con8169 = tf.keras.layers.Input(shape=([4, 1]))
in0Mul23452 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul23452 = tf.keras.layers.Input(shape=([2, 2]))

Con33572 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con33572', )(in0Con33572)
Res66349 = keras.layers.Reshape((1, 4), name = 'Res66349', )(Con33572)
Fla64765 = keras.layers.Flatten(name = 'Fla64765', )(Res66349)
Sub51752 = keras.layers.Subtract(name = 'Sub51752', )([in0Sub51752,in1Sub51752])
Fla82057 = keras.layers.Flatten(name = 'Fla82057', )(in0Fla82057)
Con91721 = keras.layers.Concatenate(axis=1, name = 'Con91721', )([Fla82057,in0Con91721])
Add35303 = keras.layers.Add(name = 'Add35303', )([Sub51752,Con91721])
Con5182 = keras.layers.Concatenate(axis=1, name = 'Con5182', )([Add35303,in0Con5182])
Min97819 = keras.layers.Minimum(name = 'Min97819', )([Fla64765,Con5182])
Res91630 = keras.layers.Reshape((4, 1), name = 'Res91630', )(Min97819)
Con8169 = keras.layers.Concatenate(axis=2, name = 'Con8169', )([Res91630,in0Con8169])
Mul23452 = keras.layers.Multiply(name = 'Mul23452', )([in0Mul23452,in1Mul23452])
Dot6670 = keras.layers.Dot(axes=(2, 2), name = 'Dot6670', )([Con8169,Mul23452])
Zer13917 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer13917', )(Dot6670)
Res33750 = keras.layers.Reshape((6, 2, 1), name = 'Res33750', )(Zer13917)
Res97397 = keras.layers.Reshape((6, 2, 1, 1), name = 'Res97397', )(Res33750)
Zer17672 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer17672', )(Res97397)
model = tf.keras.models.Model(inputs=[in0Con33572,in0Sub51752,in1Sub51752,in0Fla82057,in0Con91721,in0Con5182,in0Con8169,in0Mul23452,in1Mul23452], outputs=Zer17672)
w = model.get_layer('Con33572').get_weights() 
w[0] = np.array([[[[0.2567, 0.8013, 0.1824, 0.3562]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con33572').set_weights(w) 
in0Con33572 = tf.constant([[[[0.6675]]]])
in0Sub51752 = tf.constant([[0.4028, 0.7409, 0.5522]])
in1Sub51752 = tf.constant([[0.5287, 0.8138, 0.7335]])
in0Fla82057 = tf.constant([[1.4901]])
in0Con91721 = tf.constant([[0.4398, 0.8936]])
in0Con5182 = tf.constant([[0.8887]])
in0Con8169 = tf.constant([[[0.8949], [0.7631], [0.8031], [0.6132]]])
in0Mul23452 = tf.constant([[[0.3886, 0.7167], [0.9906, 0.2828]]])
in1Mul23452 = tf.constant([[[0.9258, 0.6154], [0.5073, 0.4711]]])
print (np.array2string(model.predict([in0Con33572,in0Sub51752,in1Sub51752,in0Fla82057,in0Con91721,in0Con5182,in0Con8169,in0Mul23452,in1Mul23452],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer17672.png')

LCon33572 = conv2D_layer([[[[0.6675]]]], 1, 1,[[[[0.2567, 0.8013, 0.1824, 0.3562]]]],[0, 0, 0, 0], 1, 1, true, 1, 1, Con33572), 
LRes66349 = reshape_layer(Con33572, [1, 4], Res66349), 
LFla64765 = flatten_layer(Res66349, Fla64765), 
LSub51752 = subtract_layer([[0.4028, 0.7409, 0.5522]], [[0.5287, 0.8138, 0.7335]], Sub51752), 
LFla82057 = flatten_layer([[1.4901]], Fla82057), 
LCon91721 = concatenate_layer([Fla82057,[[0.4398, 0.8936]]], 1, Con91721), 
LAdd35303 = add_layer([Sub51752,Con91721], Add35303), 
LCon5182 = concatenate_layer([Add35303,[[0.8887]]], 1, Con5182), 
LMin97819 = minimum_layer([Fla64765,Con5182], Min97819), 
LRes91630 = reshape_layer(Min97819, [4, 1], Res91630), 
LCon8169 = concatenate_layer([Res91630,[[[0.8949], [0.7631], [0.8031], [0.6132]]]], 2, Con8169), 
LMul23452 = multiply_layer([[[[0.3886, 0.7167], [0.9906, 0.2828]]], [[[0.9258, 0.6154], [0.5073, 0.4711]]]], Mul23452), 
LDot6670 = dot_layer(Con8169,Mul23452, 2, 2, Dot6670), 
LZer13917 = zero_padding1D_layer(Dot6670, 1, 1, Zer13917), 
LRes33750 = reshape_layer(Zer13917, [6, 2, 1], Res33750), 
LRes97397 = reshape_layer(Res33750, [6, 2, 1, 1], Res97397), 
LZer17672 = zero_padding3D_layer(Res97397, 1, 1, 1, 1, 1, 1, Zer17672), 
exec_layers([LCon33572,LRes66349,LFla64765,LSub51752,LFla82057,LCon91721,LAdd35303,LCon5182,LMin97819,LRes91630,LCon8169,LMul23452,LDot6670,LZer13917,LRes33750,LRes97397,LZer17672],["Con33572","Res66349","Fla64765","Sub51752","Fla82057","Con91721","Add35303","Con5182","Min97819","Res91630","Con8169","Mul23452","Dot6670","Zer13917","Res33750","Res97397","Zer17672"],Zer17672,"Zer17672")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.4563470], [0.0000000]], [[0.0000000], [0.2053323], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.4685689], [0.0000000]], [[0.0000000], [0.2860444], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.3980153], [0.0000000]], [[0.0000000], [0.1681789], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.3559955], [0.0000000]], [[0.0000000], [0.2011785], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.45634696456382995],[0]],[[0],[0.205332283893705],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.46856883543],[0]],[[0],[0.28604434807],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.39801523667975997],[0]],[[0],[0.16817886852576],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.3559954575853799],[0]],[[0],[0.20117846522463],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.4564], [0]], [[0], [0.2054], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.4686], [0]], [[0], [0.2861], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.3981], [0]], [[0], [0.1682], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.356], [0]], [[0], [0.2012], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.4564], [0]], [[0], [0.2054], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.4686], [0]], [[0], [0.2861], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.3981], [0]], [[0], [0.1682], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.356], [0]], [[0], [0.2012], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]