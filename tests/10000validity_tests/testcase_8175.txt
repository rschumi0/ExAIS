import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo3598 = tf.keras.layers.Input(shape=([2, 1]))
in0Max2172 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Max2172 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Min74169 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min74169 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Dot43291 = tf.keras.layers.Input(shape=([3]))
in1Dot43291 = tf.keras.layers.Input(shape=([3]))
in0Con78569 = tf.keras.layers.Input(shape=([1]))
in0Con42931 = tf.keras.layers.Input(shape=([6]))

Glo3598 = keras.layers.GlobalAveragePooling1D(name = 'Glo3598', )(in0Glo3598)
Res34497 = keras.layers.Reshape((1, 1), name = 'Res34497', )(Glo3598)
Glo56972 = keras.layers.GlobalAveragePooling1D(name = 'Glo56972', )(Res34497)
Res91529 = keras.layers.Reshape((1, 1), name = 'Res91529', )(Glo56972)
Res52050 = keras.layers.Reshape((1, 1, 1), name = 'Res52050', )(Res91529)
Res28199 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res28199', )(Res52050)
Zer79644 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer79644', )(Res28199)
Max2172 = keras.layers.Maximum(name = 'Max2172', )([in0Max2172,in1Max2172])
Ave15940 = keras.layers.Average(name = 'Ave15940', )([Zer79644,Max2172])
Res28508 = keras.layers.Reshape((2, 2, 2), name = 'Res28508', )(Ave15940)
Res72296 = keras.layers.Reshape((2, 4), name = 'Res72296', )(Res28508)
Max17775 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max17775', )(Res72296)
Fla45952 = keras.layers.Flatten(name = 'Fla45952', )(Max17775)
Min74169 = keras.layers.Minimum(name = 'Min74169', )([in0Min74169,in1Min74169])
Res72658 = keras.layers.Reshape((1, 2), name = 'Res72658', )(Min74169)
Fla68014 = keras.layers.Flatten(name = 'Fla68014', )(Res72658)
Dot43291 = keras.layers.Dot(axes=(1, 1), name = 'Dot43291', )([in0Dot43291,in1Dot43291])
Con78569 = keras.layers.Concatenate(axis=1, name = 'Con78569', )([Dot43291,in0Con78569])
Mul96373 = keras.layers.Multiply(name = 'Mul96373', )([Fla68014,Con78569])
Con42931 = keras.layers.Concatenate(axis=1, name = 'Con42931', )([Mul96373,in0Con42931])
Sub64479 = keras.layers.Subtract(name = 'Sub64479', )([Fla45952,Con42931])
model = tf.keras.models.Model(inputs=[in0Glo3598,in0Max2172,in1Max2172,in0Min74169,in1Min74169,in0Dot43291,in1Dot43291,in0Con78569,in0Con42931], outputs=Sub64479)
in0Glo3598 = tf.constant([[[1.817], [1.6205]]])
in0Max2172 = tf.constant([[[[[0.1486], [0.9825]], [[0.3631], [0.8598]]], [[[0.0369], [0.0673]], [[0.6928], [0.6706]]]]])
in1Max2172 = tf.constant([[[[[0.0871], [0.4913]], [[0.5116], [0.6016]]], [[[0.1174], [0.1142]], [[0.5109], [0.7166]]]]])
in0Min74169 = tf.constant([[[[0.2297, 0.2405]]]])
in1Min74169 = tf.constant([[[[0.5836, 0.756]]]])
in0Dot43291 = tf.constant([[0.4767, 0.3738, 0.5438]])
in1Dot43291 = tf.constant([[0.9361, 0.3618, 0.8679]])
in0Con78569 = tf.constant([[0.6444]])
in0Con42931 = tf.constant([[0.0702, 0.9114, 0.9425, 0.4966, 0.0632, 0.233]])
print (np.array2string(model.predict([in0Glo3598,in0Max2172,in1Max2172,in0Min74169,in1Min74169,in0Dot43291,in1Dot43291,in0Con78569,in0Con42931],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub64479.png')

LGlo3598 = global_average_pooling1D_layer([[[1.817], [1.6205]]], Glo3598), 
LRes34497 = reshape_layer(Glo3598, [1, 1], Res34497), 
LGlo56972 = global_average_pooling1D_layer(Res34497, Glo56972), 
LRes91529 = reshape_layer(Glo56972, [1, 1], Res91529), 
LRes52050 = reshape_layer(Res91529, [1, 1, 1], Res52050), 
LRes28199 = reshape_layer(Res52050, [1, 1, 1, 1], Res28199), 
LZer79644 = zero_padding3D_layer(Res28199, 1, 0, 1, 0, 1, 0, Zer79644), 
LMax2172 = maximum_layer([[[[[[0.1486], [0.9825]], [[0.3631], [0.8598]]], [[[0.0369], [0.0673]], [[0.6928], [0.6706]]]]], [[[[[0.0871], [0.4913]], [[0.5116], [0.6016]]], [[[0.1174], [0.1142]], [[0.5109], [0.7166]]]]]], Max2172), 
LAve15940 = average_layer([Zer79644,Max2172], Ave15940), 
LRes28508 = reshape_layer(Ave15940, [2, 2, 2], Res28508), 
LRes72296 = reshape_layer(Res28508, [2, 4], Res72296), 
LMax17775 = max_pool1D_layer(Res72296, 1, 1, false, Max17775), 
LFla45952 = flatten_layer(Max17775, Fla45952), 
LMin74169 = minimum_layer([[[[[0.2297, 0.2405]]]], [[[[0.5836, 0.756]]]]], Min74169), 
LRes72658 = reshape_layer(Min74169, [1, 2], Res72658), 
LFla68014 = flatten_layer(Res72658, Fla68014), 
LDot43291 = dot_layer([[0.4767, 0.3738, 0.5438]], [[0.9361, 0.3618, 0.8679]], 1, 1, Dot43291), 
LCon78569 = concatenate_layer([Dot43291,[[0.6444]]], 1, Con78569), 
LMul96373 = multiply_layer([Fla68014,Con78569], Mul96373), 
LCon42931 = concatenate_layer([Mul96373,[[0.0702, 0.9114, 0.9425, 0.4966, 0.0632, 0.233]]], 1, Con42931), 
LSub64479 = subtract_layer(Fla45952,Con42931, Sub64479), 
exec_layers([LGlo3598,LRes34497,LGlo56972,LRes91529,LRes52050,LRes28199,LZer79644,LMax2172,LAve15940,LRes28508,LRes72296,LMax17775,LFla45952,LMin74169,LRes72658,LFla68014,LDot43291,LCon78569,LMul96373,LCon42931,LSub64479],["Glo3598","Res34497","Glo56972","Res91529","Res52050","Res28199","Zer79644","Max2172","Ave15940","Res28508","Res72296","Max17775","Fla45952","Min74169","Res72658","Fla68014","Dot43291","Con78569","Mul96373","Con42931","Sub64479"],Sub64479,"Sub64479")

Actual (Unparsed): [[-0.1676760, 0.3362718, 0.1856000, -0.4815000, -0.8838000, -0.4395000, 0.2832000, 0.9846750]]

Expected (Unparsed): [[-0.16767602478099997,0.3362718,0.18560000000000004,-0.4815,-0.8838,-0.4395,0.2832,0.9846750000000001]]

Actual:   [[-0.1676, 0.3363, 0.1856, -0.4815, -0.8838, -0.4395, 0.2832, 0.9847]]

Expected: [[-0.1676, 0.3363, 0.1857, -0.4815, -0.8838, -0.4395, 0.2832, 0.9847]]