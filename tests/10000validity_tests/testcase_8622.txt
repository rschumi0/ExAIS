import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den31930 = tf.keras.layers.Input(shape=([2, 2]))

Den31930 = keras.layers.Dense(3,name = 'Den31930', )(in0Den31930)
Sim61586 = keras.layers.SimpleRNN(2,name = 'Sim61586', )(Den31930)
Res41984 = keras.layers.Reshape((2, 1), name = 'Res41984', )(Sim61586)
Res76500 = keras.layers.Reshape((2, 1, 1), name = 'Res76500', )(Res41984)
Res7832 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res7832', )(Res76500)
Up_56505 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_56505', )(Res7832)
Res2103 = keras.layers.Reshape((4, 2, 2), name = 'Res2103', )(Up_56505)
Res66572 = keras.layers.Reshape((4, 4), name = 'Res66572', )(Res2103)
Glo89602 = keras.layers.GlobalAveragePooling1D(name = 'Glo89602', )(Res66572)
model = tf.keras.models.Model(inputs=[in0Den31930], outputs=Glo89602)
w = model.get_layer('Den31930').get_weights() 
w[0] = np.array([[0.4308, 0.4167, 0.8645], [0.1839, 0.9309, 0.6708]])
w[1] = np.array([0.0103, 0.9598, 0.1335])
model.get_layer('Den31930').set_weights(w) 
w = model.get_layer('Sim61586').get_weights() 
w[0] = np.array([[4, 2], [8, 2], [10, 8]])
w[1] = np.array([[1, 6], [5, 3]])
w[2] = np.array([6, 6])
model.get_layer('Sim61586').set_weights(w) 
in0Den31930 = tf.constant([[[0.445, 0.5065], [0.103, 0.6651]]])
print (np.array2string(model.predict([in0Den31930],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo89602.png')

LDen31930 = dense_layer([[[0.445, 0.5065], [0.103, 0.6651]]], [[0.4308, 0.4167, 0.8645], [0.1839, 0.9309, 0.6708]],[0.0103, 0.9598, 0.1335], Den31930), 
LSim61586 = simple_rnn_layer(Den31930,[[4, 2], [8, 2], [10, 8]],[[1, 6], [5, 3]],[6, 6], Sim61586), 
LRes41984 = reshape_layer(Sim61586, [2, 1], Res41984), 
LRes76500 = reshape_layer(Res41984, [2, 1, 1], Res76500), 
LRes7832 = reshape_layer(Res76500, [2, 1, 1, 1], Res7832), 
LUp_56505 = up_sampling3D_layer(Res7832, 2, 2, 2, Up_56505), 
LRes2103 = reshape_layer(Up_56505, [4, 2, 2], Res2103), 
LRes66572 = reshape_layer(Res2103, [4, 4], Res66572), 
LGlo89602 = global_average_pooling1D_layer(Res66572, Glo89602), 
exec_layers([LDen31930,LSim61586,LRes41984,LRes76500,LRes7832,LUp_56505,LRes2103,LRes66572,LGlo89602],["Den31930","Sim61586","Res41984","Res76500","Res7832","Up_56505","Res2103","Res66572","Glo89602"],Glo89602,"Glo89602")

Actual (Unparsed): [[1.0000000, 1.0000000, 1.0000000, 1.0000000]]

Expected (Unparsed): [[1.0,1.0,1.0,1.0]]

Actual:   [[1, 1, 1, 1]]

Expected: [[1, 1, 1, 1]]