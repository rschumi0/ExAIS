import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub59341 = tf.keras.layers.Input(shape=([3]))
in1Sub59341 = tf.keras.layers.Input(shape=([3]))
in0Con23215 = tf.keras.layers.Input(shape=([1, 3, 1]))
in0Ave43535 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max99870 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Max99870 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con45048 = tf.keras.layers.Input(shape=([4]))

Sub59341 = keras.layers.Subtract(name = 'Sub59341', )([in0Sub59341,in1Sub59341])
Res22374 = keras.layers.Reshape((3, 1), name = 'Res22374', )(Sub59341)
Per6581 = keras.layers.Permute((2,1), name = 'Per6581',)(Res22374)
Res90488 = keras.layers.Reshape((1, 3, 1), name = 'Res90488', )(Per6581)
Con23215 = keras.layers.Concatenate(axis=3, name = 'Con23215', )([Res90488,in0Con23215])
Ave43535 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(8, 1), padding='valid', name = 'Ave43535', )(in0Ave43535)
ReL7692 = keras.layers.ReLU(max_value=3.7493849172983063, negative_slope=4.627341544419815, threshold=4.602142041761937, name = 'ReL7692', )(Ave43535)
Zer25358 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer25358', )(ReL7692)
Max22301 = keras.layers.Maximum(name = 'Max22301', )([Con23215,Zer25358])
Res52621 = keras.layers.Reshape((1, 6), name = 'Res52621', )(Max22301)
Fla37834 = keras.layers.Flatten(name = 'Fla37834', )(Res52621)
Max99870 = keras.layers.Maximum(name = 'Max99870', )([in0Max99870,in1Max99870])
Lay8575 = keras.layers.LayerNormalization(axis=1, epsilon=2.6134449398417896, name = 'Lay8575', )(Max99870)
Res76392 = keras.layers.Reshape((2, 2), name = 'Res76392', )(Lay8575)
Glo84590 = keras.layers.GlobalMaxPool1D(name = 'Glo84590', )(Res76392)
Con45048 = keras.layers.Concatenate(axis=1, name = 'Con45048', )([Glo84590,in0Con45048])
Ave73640 = keras.layers.Average(name = 'Ave73640', )([Fla37834,Con45048])
Res84492 = keras.layers.Reshape((6, 1), name = 'Res84492', )(Ave73640)
Res12781 = keras.layers.Reshape((6, 1, 1), name = 'Res12781', )(Res84492)
Res53174 = keras.layers.Reshape((6, 1, 1, 1), name = 'Res53174', )(Res12781)
Glo58561 = keras.layers.GlobalMaxPool3D(name = 'Glo58561', )(Res53174)
model = tf.keras.models.Model(inputs=[in0Sub59341,in1Sub59341,in0Con23215,in0Ave43535,in0Max99870,in1Max99870,in0Con45048], outputs=Glo58561)
in0Sub59341 = tf.constant([[0.79, 0.0909, 0.2381]])
in1Sub59341 = tf.constant([[0.9741, 0.0548, 0.4152]])
in0Con23215 = tf.constant([[[[0.6873], [0.3837], [0.1205]]]])
in0Ave43535 = tf.constant([[[[1.4727, 1.6504]]]])
in0Max99870 = tf.constant([[[[0.6514, 0.4313]], [[0.2425, 0.8607]]]])
in1Max99870 = tf.constant([[[[0.7449, 0.5029]], [[0.218, 0.3778]]]])
in0Con45048 = tf.constant([[0.715, 0.9184, 0.4008, 0.3553]])
print (np.array2string(model.predict([in0Sub59341,in1Sub59341,in0Con23215,in0Ave43535,in0Max99870,in1Max99870,in0Con45048],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo58561.png')

LSub59341 = subtract_layer([[0.79, 0.0909, 0.2381]], [[0.9741, 0.0548, 0.4152]], Sub59341), 
LRes22374 = reshape_layer(Sub59341, [3, 1], Res22374), 
LPer6581 = permute_layer(Res22374, 2,1, Per6581), 
LRes90488 = reshape_layer(Per6581, [1, 3, 1], Res90488), 
LCon23215 = concatenate_layer([Res90488,[[[[0.6873], [0.3837], [0.1205]]]]], 3, Con23215), 
LAve43535 = average_pooling2D_layer([[[[1.4727, 1.6504]]]], 1, 1, 8, 1, false, Ave43535), 
LReL7692 = relu_layer(Ave43535, 3.7493849172983063, 4.627341544419815, 4.602142041761937, ReL7692), 
LZer25358 = zero_padding2D_layer(ReL7692, 0, 0, 2, 0, Zer25358), 
LMax22301 = maximum_layer([Con23215,Zer25358], Max22301), 
LRes52621 = reshape_layer(Max22301, [1, 6], Res52621), 
LFla37834 = flatten_layer(Res52621, Fla37834), 
LMax99870 = maximum_layer([[[[[0.6514, 0.4313]], [[0.2425, 0.8607]]]], [[[[0.7449, 0.5029]], [[0.218, 0.3778]]]]], Max99870), 
LLay8575 = layer_normalization_layer(Max99870, 1, 2.6134449398417896, Lay8575), 
LRes76392 = reshape_layer(Lay8575, [2, 2], Res76392), 
LGlo84590 = global_max_pool1D_layer(Res76392, Glo84590), 
LCon45048 = concatenate_layer([Glo84590,[[0.715, 0.9184, 0.4008, 0.3553]]], 1, Con45048), 
LAve73640 = average_layer([Fla37834,Con45048], Ave73640), 
LRes84492 = reshape_layer(Ave73640, [6, 1], Res84492), 
LRes12781 = reshape_layer(Res84492, [6, 1, 1], Res12781), 
LRes53174 = reshape_layer(Res12781, [6, 1, 1, 1], Res53174), 
LGlo58561 = global_max_pool3D_layer(Res53174, Glo58561), 
exec_layers([LSub59341,LRes22374,LPer6581,LRes90488,LCon23215,LAve43535,LReL7692,LZer25358,LMax22301,LRes52621,LFla37834,LMax99870,LLay8575,LRes76392,LGlo84590,LCon45048,LAve73640,LRes84492,LRes12781,LRes53174,LGlo58561],["Sub59341","Res22374","Per6581","Res90488","Con23215","Ave43535","ReL7692","Zer25358","Max22301","Res52621","Fla37834","Max99870","Lay8575","Res76392","Glo84590","Con45048","Ave73640","Res84492","Res12781","Res53174","Glo58561"],Glo58561,"Glo58561")

Actual (Unparsed): [[0.6510500]]

Expected (Unparsed): [[0.65105]]

Actual:   [[0.6511]]

Expected: [[0.6511]]