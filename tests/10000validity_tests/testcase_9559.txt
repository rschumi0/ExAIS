import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla53326 = tf.keras.layers.Input(shape=([1]))
in0Con69075 = tf.keras.layers.Input(shape=([2, 3]))
in0Min58917 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Min58917 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))

Fla53326 = keras.layers.Flatten(name = 'Fla53326', )(in0Fla53326)
Res56314 = keras.layers.Reshape((1, 1), name = 'Res56314', )(Fla53326)
Zer64577 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer64577', )(Res56314)
Con69075 = keras.layers.Concatenate(axis=2, name = 'Con69075', )([Zer64577,in0Con69075])
Min58917 = keras.layers.Minimum(name = 'Min58917', )([in0Min58917,in1Min58917])
Thr2632 = keras.layers.ThresholdedReLU(theta=8.883298465477361, name = 'Thr2632', )(Min58917)
Res31044 = keras.layers.Reshape((2, 1, 4), name = 'Res31044', )(Thr2632)
Res64147 = keras.layers.Reshape((2, 4), name = 'Res64147', )(Res31044)
Per49611 = keras.layers.Permute((1,2), name = 'Per49611',)(Res64147)
Sub68007 = keras.layers.Subtract(name = 'Sub68007', )([Con69075,Per49611])
model = tf.keras.models.Model(inputs=[in0Fla53326,in0Con69075,in0Min58917,in1Min58917], outputs=Sub68007)
in0Fla53326 = tf.constant([[1.1911]])
in0Con69075 = tf.constant([[[0.9072, 0.0709, 0.2307], [0.5048, 0.2047, 0.0679]]])
in0Min58917 = tf.constant([[[[[0.7373, 0.4096], [0.4568, 0.4636]]], [[[0.0994, 0.8168], [0.8416, 0.7718]]]]])
in1Min58917 = tf.constant([[[[[0.0501, 0.4494], [0.7362, 0.878]]], [[[0.8064, 0.8319], [0.4777, 0.9007]]]]])
print (np.array2string(model.predict([in0Fla53326,in0Con69075,in0Min58917,in1Min58917],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub68007.png')

LFla53326 = flatten_layer([[1.1911]], Fla53326), 
LRes56314 = reshape_layer(Fla53326, [1, 1], Res56314), 
LZer64577 = zero_padding1D_layer(Res56314, 1, 0, Zer64577), 
LCon69075 = concatenate_layer([Zer64577,[[[0.9072, 0.0709, 0.2307], [0.5048, 0.2047, 0.0679]]]], 2, Con69075), 
LMin58917 = minimum_layer([[[[[[0.7373, 0.4096], [0.4568, 0.4636]]], [[[0.0994, 0.8168], [0.8416, 0.7718]]]]], [[[[[0.0501, 0.4494], [0.7362, 0.878]]], [[[0.8064, 0.8319], [0.4777, 0.9007]]]]]], Min58917), 
LThr2632 = thresholded_relu_layer(Min58917, 8.883298465477361, Thr2632), 
LRes31044 = reshape_layer(Thr2632, [2, 1, 4], Res31044), 
LRes64147 = reshape_layer(Res31044, [2, 4], Res64147), 
LPer49611 = permute_layer(Res64147, 1,2, Per49611), 
LSub68007 = subtract_layer(Con69075,Per49611, Sub68007), 
exec_layers([LFla53326,LRes56314,LZer64577,LCon69075,LMin58917,LThr2632,LRes31044,LRes64147,LPer49611,LSub68007],["Fla53326","Res56314","Zer64577","Con69075","Min58917","Thr2632","Res31044","Res64147","Per49611","Sub68007"],Sub68007,"Sub68007")

Actual (Unparsed): [[[0.0000000, 0.9072000, 0.0709000, 0.2307000], [1.1911000, 0.5048000, 0.2047000, 0.0679000]]]

Expected (Unparsed): [[[0,0.9072,0.0709,0.2307],[1.1911,0.5048,0.2047,0.0679]]]

Actual:   [[[0, 0.9072, 0.0709, 0.2307], [1.1911, 0.5048, 0.2047, 0.0679]]]

Expected: [[[0, 0.9072, 0.0709, 0.2307], [1.1911, 0.5048, 0.2047, 0.0679]]]