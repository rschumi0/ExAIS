import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max26663 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Max26663 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con9938 = tf.keras.layers.Input(shape=([2, 3]))
in0Max21574 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Max21574 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Max3954 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max3954 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max72538 = tf.keras.layers.Input(shape=([2, 1]))
in1Max72538 = tf.keras.layers.Input(shape=([2, 1]))
in0Con66470 = tf.keras.layers.Input(shape=([2, 1]))

Max26663 = keras.layers.Maximum(name = 'Max26663', )([in0Max26663,in1Max26663])
Res32381 = keras.layers.Reshape((2, 1, 1), name = 'Res32381', )(Max26663)
Res6941 = keras.layers.Reshape((2, 1), name = 'Res6941', )(Res32381)
Con9938 = keras.layers.Concatenate(axis=2, name = 'Con9938', )([Res6941,in0Con9938])
Max21574 = keras.layers.Maximum(name = 'Max21574', )([in0Max21574,in1Max21574])
Res80144 = keras.layers.Reshape((2, 2), name = 'Res80144', )(Max21574)
Con41032 = keras.layers.Conv1D(4, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con41032', )(Res80144)
Zer20791 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer20791', )(Con41032)
Max86077 = keras.layers.Maximum(name = 'Max86077', )([Con9938,Zer20791])
Res60711 = keras.layers.Reshape((2, 4, 1), name = 'Res60711', )(Max86077)
Loc94856 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 10), name = 'Loc94856', )(Res60711)
Res30474 = keras.layers.Reshape((2, 2), name = 'Res30474', )(Loc94856)
Max3954 = keras.layers.Maximum(name = 'Max3954', )([in0Max3954,in1Max3954])
Res90285 = keras.layers.Reshape((1, 2), name = 'Res90285', )(Max3954)
Zer76732 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer76732', )(Res90285)
Max72538 = keras.layers.Maximum(name = 'Max72538', )([in0Max72538,in1Max72538])
Con66470 = keras.layers.Concatenate(axis=2, name = 'Con66470', )([Max72538,in0Con66470])
Sub76374 = keras.layers.Subtract(name = 'Sub76374', )([Zer76732,Con66470])
Den75210 = keras.layers.Dense(2,name = 'Den75210', )(Sub76374)
Min46201 = keras.layers.Minimum(name = 'Min46201', )([Res30474,Den75210])
model = tf.keras.models.Model(inputs=[in0Max26663,in1Max26663,in0Con9938,in0Max21574,in1Max21574,in0Max3954,in1Max3954,in0Max72538,in1Max72538,in0Con66470], outputs=Min46201)
w = model.get_layer('Con41032').get_weights() 
w[0] = np.array([[[0.9308, 0.2146, 0.2403, 0.5665], [0.131, 0.5528, 0.737, 0.3985]], [[0.0946, 0.8884, 0.5974, 0.9035], [0.9078, 0.3215, 0.2338, 0.5453]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con41032').set_weights(w) 
w = model.get_layer('Loc94856').get_weights() 
w[0] = np.array([[[0.671, 0.2785]], [[0.099, 0.2571]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc94856').set_weights(w) 
w = model.get_layer('Den75210').get_weights() 
w[0] = np.array([[0.0062, 0.4219], [0.8617, 0.7224]])
w[1] = np.array([0.3322, 0.7913])
model.get_layer('Den75210').set_weights(w) 
in0Max26663 = tf.constant([[[[[0.7875]]], [[[0.9848]]]]])
in1Max26663 = tf.constant([[[[[0.8104]]], [[[0.5377]]]]])
in0Con9938 = tf.constant([[[0.9892, 0.7347, 0.9894], [0.2183, 0.4879, 0.6685]]])
in0Max21574 = tf.constant([[[[0.5248], [0.6222]], [[0.4244], [0.5253]]]])
in1Max21574 = tf.constant([[[[0.5016], [0.7391]], [[0.2795], [0.9789]]]])
in0Max3954 = tf.constant([[[[0.3112, 0.1047]]]])
in1Max3954 = tf.constant([[[[0.2054, 0.9599]]]])
in0Max72538 = tf.constant([[[0.9852], [0.8581]]])
in1Max72538 = tf.constant([[[0.7379], [0.667]]])
in0Con66470 = tf.constant([[[0.0211], [0.0685]]])
print (np.array2string(model.predict([in0Max26663,in1Max26663,in0Con9938,in0Max21574,in1Max21574,in0Max3954,in1Max3954,in0Max72538,in1Max72538,in0Con66470],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min46201.png')

LMax26663 = maximum_layer([[[[[[0.7875]]], [[[0.9848]]]]], [[[[[0.8104]]], [[[0.5377]]]]]], Max26663), 
LRes32381 = reshape_layer(Max26663, [2, 1, 1], Res32381), 
LRes6941 = reshape_layer(Res32381, [2, 1], Res6941), 
LCon9938 = concatenate_layer([Res6941,[[[0.9892, 0.7347, 0.9894], [0.2183, 0.4879, 0.6685]]]], 2, Con9938), 
LMax21574 = maximum_layer([[[[[0.5248], [0.6222]], [[0.4244], [0.5253]]]], [[[[0.5016], [0.7391]], [[0.2795], [0.9789]]]]], Max21574), 
LRes80144 = reshape_layer(Max21574, [2, 2], Res80144), 
LCon41032 = conv1D_layer(Res80144, 2,[[[0.9308, 0.2146, 0.2403, 0.5665], [0.131, 0.5528, 0.737, 0.3985]], [[0.0946, 0.8884, 0.5974, 0.9035], [0.9078, 0.3215, 0.2338, 0.5453]]],[0, 0, 0, 0], 1, false, 1, Con41032), 
LZer20791 = zero_padding1D_layer(Con41032, 1, 0, Zer20791), 
LMax86077 = maximum_layer([Con9938,Zer20791], Max86077), 
LRes60711 = reshape_layer(Max86077, [2, 4, 1], Res60711), 
LLoc94856 = locally_connected2D_layer(Res60711, 1, 1,[[[0.671, 0.2785]], [[0.099, 0.2571]]],[[[0, 0]], [[0, 0]]], 1, 10, Loc94856), 
LRes30474 = reshape_layer(Loc94856, [2, 2], Res30474), 
LMax3954 = maximum_layer([[[[[0.3112, 0.1047]]]], [[[[0.2054, 0.9599]]]]], Max3954), 
LRes90285 = reshape_layer(Max3954, [1, 2], Res90285), 
LZer76732 = zero_padding1D_layer(Res90285, 1, 0, Zer76732), 
LMax72538 = maximum_layer([[[[0.9852], [0.8581]]], [[[0.7379], [0.667]]]], Max72538), 
LCon66470 = concatenate_layer([Max72538,[[[0.0211], [0.0685]]]], 2, Con66470), 
LSub76374 = subtract_layer(Zer76732,Con66470, Sub76374), 
LDen75210 = dense_layer(Sub76374, [[0.0062, 0.4219], [0.8617, 0.7224]],[0.3322, 0.7913], Den75210), 
LMin46201 = minimum_layer([Res30474,Den75210], Min46201), 
exec_layers([LMax26663,LRes32381,LRes6941,LCon9938,LMax21574,LRes80144,LCon41032,LZer20791,LMax86077,LRes60711,LLoc94856,LRes30474,LMax3954,LRes90285,LZer76732,LMax72538,LCon66470,LSub76374,LDen75210,LMin46201],["Max26663","Res32381","Res6941","Con9938","Max21574","Res80144","Con41032","Zer20791","Max86077","Res60711","Loc94856","Res30474","Max3954","Res90285","Zer76732","Max72538","Con66470","Sub76374","Den75210","Min46201"],Min46201,"Min46201")

Actual (Unparsed): [[[0.3079099, 0.2256964], [0.1498959, 0.3892750]]]

Expected (Unparsed): [[[0.30790989,0.22569640000000002],[0.1498958604,0.38927500715999996]]]

Actual:   [[[0.308, 0.2257], [0.1499, 0.3893]]]

Expected: [[[0.308, 0.2257], [0.1499, 0.3893]]]