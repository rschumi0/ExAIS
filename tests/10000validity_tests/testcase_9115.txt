import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave51577 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Ave51577 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Sub9446 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub9446 = tf.keras.layers.Input(shape=([3, 3]))
in0Con46777 = tf.keras.layers.Input(shape=([3, 1]))

Ave51577 = keras.layers.Average(name = 'Ave51577', )([in0Ave51577,in1Ave51577])
Res9441 = keras.layers.Reshape((2, 2, 2), name = 'Res9441', )(Ave51577)
Res61853 = keras.layers.Reshape((2, 4), name = 'Res61853', )(Res9441)
Zer99377 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer99377', )(Res61853)
Sub9446 = keras.layers.Subtract(name = 'Sub9446', )([in0Sub9446,in1Sub9446])
Con46777 = keras.layers.Concatenate(axis=2, name = 'Con46777', )([Sub9446,in0Con46777])
Add35010 = keras.layers.Add(name = 'Add35010', )([Zer99377,Con46777])
Res60118 = keras.layers.Reshape((3, 4, 1), name = 'Res60118', )(Add35010)
Glo35282 = keras.layers.GlobalMaxPool2D(name = 'Glo35282', )(Res60118)
model = tf.keras.models.Model(inputs=[in0Ave51577,in1Ave51577,in0Sub9446,in1Sub9446,in0Con46777], outputs=Glo35282)
in0Ave51577 = tf.constant([[[[[0.5965], [0.0409]], [[0.8033], [0.744]]], [[[0.9199], [0.98]], [[0.5263], [0.8129]]]]])
in1Ave51577 = tf.constant([[[[[0.8099], [0.8539]], [[0.3701], [0.8134]]], [[[0.0732], [0.2539]], [[0.8804], [0.4708]]]]])
in0Sub9446 = tf.constant([[[0.3846, 0.402, 0.4418], [0.5488, 0.9873, 0.2133], [0.3085, 0.4303, 0.5657]]])
in1Sub9446 = tf.constant([[[0.8552, 0.8018, 0.4571], [0.5722, 0.1355, 0.4028], [0.6275, 0.7222, 0.1891]]])
in0Con46777 = tf.constant([[[0.8825], [0.9584], [0.1007]]])
print (np.array2string(model.predict([in0Ave51577,in1Ave51577,in0Sub9446,in1Sub9446,in0Con46777],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo35282.png')

LAve51577 = average_layer([[[[[[0.5965], [0.0409]], [[0.8033], [0.744]]], [[[0.9199], [0.98]], [[0.5263], [0.8129]]]]], [[[[[0.8099], [0.8539]], [[0.3701], [0.8134]]], [[[0.0732], [0.2539]], [[0.8804], [0.4708]]]]]], Ave51577), 
LRes9441 = reshape_layer(Ave51577, [2, 2, 2], Res9441), 
LRes61853 = reshape_layer(Res9441, [2, 4], Res61853), 
LZer99377 = zero_padding1D_layer(Res61853, 1, 0, Zer99377), 
LSub9446 = subtract_layer([[[0.3846, 0.402, 0.4418], [0.5488, 0.9873, 0.2133], [0.3085, 0.4303, 0.5657]]], [[[0.8552, 0.8018, 0.4571], [0.5722, 0.1355, 0.4028], [0.6275, 0.7222, 0.1891]]], Sub9446), 
LCon46777 = concatenate_layer([Sub9446,[[[0.8825], [0.9584], [0.1007]]]], 2, Con46777), 
LAdd35010 = add_layer([Zer99377,Con46777], Add35010), 
LRes60118 = reshape_layer(Add35010, [3, 4, 1], Res60118), 
LGlo35282 = global_max_pool2D_layer(Res60118, Glo35282), 
exec_layers([LAve51577,LRes9441,LRes61853,LZer99377,LSub9446,LCon46777,LAdd35010,LRes60118,LGlo35282],["Ave51577","Res9441","Res61853","Zer99377","Sub9446","Con46777","Add35010","Res60118","Glo35282"],Glo35282,"Glo35282")

Actual (Unparsed): [[1.7371000]]

Expected (Unparsed): [[1.7370999999999999]]

Actual:   [[1.7371]]

Expected: [[1.7371]]