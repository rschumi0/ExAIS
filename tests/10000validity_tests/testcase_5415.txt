import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep51854 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Min49076 = tf.keras.layers.Input(shape=([1, 2]))
in1Min49076 = tf.keras.layers.Input(shape=([1, 2]))

Dep51854 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep51854', )(in0Dep51854)
Res33064 = keras.layers.Reshape((1, 2), name = 'Res33064', )(Dep51854)
Min49076 = keras.layers.Minimum(name = 'Min49076', )([in0Min49076,in1Min49076])
Sub23158 = keras.layers.Subtract(name = 'Sub23158', )([Res33064,Min49076])
Res84238 = keras.layers.Reshape((1, 2, 1), name = 'Res84238', )(Sub23158)
Glo8758 = keras.layers.GlobalMaxPool2D(name = 'Glo8758', )(Res84238)
Res34515 = keras.layers.Reshape((1, 1), name = 'Res34515', )(Glo8758)
Res66670 = keras.layers.Reshape((1, 1, 1), name = 'Res66670', )(Res34515)
Ave78412 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave78412', )(Res66670)
model = tf.keras.models.Model(inputs=[in0Dep51854,in0Min49076,in1Min49076], outputs=Ave78412)
w = model.get_layer('Dep51854').get_weights() 
w[0] = np.array([[[[0.8216]]]])
w[1] = np.array([0])
model.get_layer('Dep51854').set_weights(w) 
in0Dep51854 = tf.constant([[[[0.0054], [0.0299]]]])
in0Min49076 = tf.constant([[[0.4933, 0.2527]]])
in1Min49076 = tf.constant([[[0.1842, 0.4672]]])
print (np.array2string(model.predict([in0Dep51854,in0Min49076,in1Min49076],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave78412.png')

LDep51854 = depthwise_conv2D_layer([[[[0.0054], [0.0299]]]], 1, 1,[[[[0.8216]]]],[0], 1, 1, false, Dep51854), 
LRes33064 = reshape_layer(Dep51854, [1, 2], Res33064), 
LMin49076 = minimum_layer([[[[0.4933, 0.2527]]], [[[0.1842, 0.4672]]]], Min49076), 
LSub23158 = subtract_layer(Res33064,Min49076, Sub23158), 
LRes84238 = reshape_layer(Sub23158, [1, 2, 1], Res84238), 
LGlo8758 = global_max_pool2D_layer(Res84238, Glo8758), 
LRes34515 = reshape_layer(Glo8758, [1, 1], Res34515), 
LRes66670 = reshape_layer(Res34515, [1, 1, 1], Res66670), 
LAve78412 = average_pooling2D_layer(Res66670, 1, 1, Ave78412), 
exec_layers([LDep51854,LRes33064,LMin49076,LSub23158,LRes84238,LGlo8758,LRes34515,LRes66670,LAve78412],["Dep51854","Res33064","Min49076","Sub23158","Res84238","Glo8758","Res34515","Res66670","Ave78412"],Ave78412,"Ave78412")

Actual (Unparsed): [[[[-0.1797634]]]]

Expected (Unparsed): [[[[-0.17976336]]]]

Actual:   [[[[-0.1797]]]]

Expected: [[[[-0.1797]]]]