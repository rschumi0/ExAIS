import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave74902 = tf.keras.layers.Input(shape=([2, 2]))
in0Con8289 = tf.keras.layers.Input(shape=([2]))
in0Mul97078 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul97078 = tf.keras.layers.Input(shape=([2, 1]))
in0Con47172 = tf.keras.layers.Input(shape=([2, 1]))
in0Min96397 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Min96397 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Lay41262 = tf.keras.layers.Input(shape=([4]))

Ave74902 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='valid', name = 'Ave74902', )(in0Ave74902)
Thr92181 = keras.layers.ThresholdedReLU(theta=7.808341926866659, name = 'Thr92181', )(Ave74902)
Fla49639 = keras.layers.Flatten(name = 'Fla49639', )(Thr92181)
Con8289 = keras.layers.Concatenate(axis=1, name = 'Con8289', )([Fla49639,in0Con8289])
Mul97078 = keras.layers.Multiply(name = 'Mul97078', )([in0Mul97078,in1Mul97078])
Con47172 = keras.layers.Concatenate(axis=2, name = 'Con47172', )([Mul97078,in0Con47172])
Min96397 = keras.layers.Minimum(name = 'Min96397', )([in0Min96397,in1Min96397])
Res4065 = keras.layers.Reshape((2, 2, 1), name = 'Res4065', )(Min96397)
Res75679 = keras.layers.Reshape((2, 2), name = 'Res75679', )(Res4065)
Dot7103 = keras.layers.Dot(axes=(1, 1), name = 'Dot7103', )([Con47172,Res75679])
Fla34378 = keras.layers.Flatten(name = 'Fla34378', )(Dot7103)
Lay41262 = keras.layers.LayerNormalization(axis=1, epsilon=2.187590197669803, name = 'Lay41262', )(in0Lay41262)
Ave96866 = keras.layers.Average(name = 'Ave96866', )([Fla34378,Lay41262])
Dot65924 = keras.layers.Dot(axes=(1, 1), name = 'Dot65924', )([Con8289,Ave96866])
model = tf.keras.models.Model(inputs=[in0Ave74902,in0Con8289,in0Mul97078,in1Mul97078,in0Con47172,in0Min96397,in1Min96397,in0Lay41262], outputs=Dot65924)
in0Ave74902 = tf.constant([[[1.2874, 1.8031], [1.6248, 1.9185]]])
in0Con8289 = tf.constant([[0.5584, 0.8619]])
in0Mul97078 = tf.constant([[[0.6819], [0.8403]]])
in1Mul97078 = tf.constant([[[0.4824], [0.2264]]])
in0Con47172 = tf.constant([[[0.2283], [0.9073]]])
in0Min96397 = tf.constant([[[[[0.4737]], [[0.7611]]], [[[0.2219]], [[0.1979]]]]])
in1Min96397 = tf.constant([[[[[0.7627]], [[0.4809]]], [[[0.4954]], [[0.1557]]]]])
in0Lay41262 = tf.constant([[1.0263, 1.1822, 1.6738, 1.8424]])
print (np.array2string(model.predict([in0Ave74902,in0Con8289,in0Mul97078,in1Mul97078,in0Con47172,in0Min96397,in1Min96397,in0Lay41262],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot65924.png')

LAve74902 = average_pooling1D_layer([[[1.2874, 1.8031], [1.6248, 1.9185]]], 2, 1, false, Ave74902), 
LThr92181 = thresholded_relu_layer(Ave74902, 7.808341926866659, Thr92181), 
LFla49639 = flatten_layer(Thr92181, Fla49639), 
LCon8289 = concatenate_layer([Fla49639,[[0.5584, 0.8619]]], 1, Con8289), 
LMul97078 = multiply_layer([[[[0.6819], [0.8403]]], [[[0.4824], [0.2264]]]], Mul97078), 
LCon47172 = concatenate_layer([Mul97078,[[[0.2283], [0.9073]]]], 2, Con47172), 
LMin96397 = minimum_layer([[[[[[0.4737]], [[0.7611]]], [[[0.2219]], [[0.1979]]]]], [[[[[0.7627]], [[0.4809]]], [[[0.4954]], [[0.1557]]]]]], Min96397), 
LRes4065 = reshape_layer(Min96397, [2, 2, 1], Res4065), 
LRes75679 = reshape_layer(Res4065, [2, 2], Res75679), 
LDot7103 = dot_layer(Con47172,Res75679, 1, 1, Dot7103), 
LFla34378 = flatten_layer(Dot7103, Fla34378), 
LLay41262 = layer_normalization_layer([[1.0263, 1.1822, 1.6738, 1.8424]], 1, 2.187590197669803, Lay41262), 
LAve96866 = average_layer([Fla34378,Lay41262], Ave96866), 
LDot65924 = dot_layer(Con8289,Ave96866, 1, 1, Dot65924), 
exec_layers([LAve74902,LThr92181,LFla49639,LCon8289,LMul97078,LCon47172,LMin96397,LRes4065,LRes75679,LDot7103,LFla34378,LLay41262,LAve96866,LDot65924],["Ave74902","Thr92181","Fla49639","Con8289","Mul97078","Con47172","Min96397","Res4065","Res75679","Dot7103","Fla34378","Lay41262","Ave96866","Dot65924"],Dot65924,"Dot65924")

Actual (Unparsed): [[0.3560817]]

Expected (Unparsed): [[0.3560816687434798]]

Actual:   [[0.3561]]

Expected: [[0.3561]]