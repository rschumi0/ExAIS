import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max94585 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max94585 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Min61806 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min61806 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con4246 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Max63559 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max63559 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Add89884 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add89884 = tf.keras.layers.Input(shape=([2, 1, 1]))

Max94585 = keras.layers.Maximum(name = 'Max94585', )([in0Max94585,in1Max94585])
Res74928 = keras.layers.Reshape((1, 1, 1), name = 'Res74928', )(Max94585)
Res89410 = keras.layers.Reshape((1, 1), name = 'Res89410', )(Res74928)
Zer31461 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer31461', )(Res89410)
Res41413 = keras.layers.Reshape((3, 1, 1), name = 'Res41413', )(Zer31461)
Res81861 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res81861', )(Res41413)
Zer21079 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (2, 0)), name = 'Zer21079', )(Res81861)
Min61806 = keras.layers.Minimum(name = 'Min61806', )([in0Min61806,in1Min61806])
Zer43909 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer43909', )(Min61806)
Con4246 = keras.layers.Concatenate(axis=3, name = 'Con4246', )([Zer43909,in0Con4246])
Max63559 = keras.layers.Maximum(name = 'Max63559', )([in0Max63559,in1Max63559])
Add51959 = keras.layers.Add(name = 'Add51959', )([Con4246,Max63559])
Res60762 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res60762', )(Add51959)
Zer95318 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (1, 0)), name = 'Zer95318', )(Res60762)
Add89884 = keras.layers.Add(name = 'Add89884', )([in0Add89884,in1Add89884])
Res9113 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res9113', )(Add89884)
Zer44579 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer44579', )(Res9113)
Ave40393 = keras.layers.Average(name = 'Ave40393', )([Zer95318,Zer44579])
Min45991 = keras.layers.Minimum(name = 'Min45991', )([Zer21079,Ave40393])
model = tf.keras.models.Model(inputs=[in0Max94585,in1Max94585,in0Min61806,in1Min61806,in0Con4246,in0Max63559,in1Max63559,in0Add89884,in1Add89884], outputs=Min45991)
in0Max94585 = tf.constant([[[[[0.6365]]]]])
in1Max94585 = tf.constant([[[[[0.1939]]]]])
in0Min61806 = tf.constant([[[[0.4793]], [[0.4116]]]])
in1Min61806 = tf.constant([[[[0.4997]], [[0.106]]]])
in0Con4246 = tf.constant([[[[0.3742], [0.4002]], [[0.7825], [0.1293]]]])
in0Max63559 = tf.constant([[[[0.7375, 0.2996], [0.476, 0.8977]], [[0.0515, 0.3856], [0.6489, 0.4607]]]])
in1Max63559 = tf.constant([[[[0.9627, 0.2667], [0.1141, 0.762]], [[0.7954, 0.2583], [0.2312, 0.8175]]]])
in0Add89884 = tf.constant([[[[0.2864]], [[0.2498]]]])
in1Add89884 = tf.constant([[[[0.4309]], [[0.2068]]]])
print (np.array2string(model.predict([in0Max94585,in1Max94585,in0Min61806,in1Min61806,in0Con4246,in0Max63559,in1Max63559,in0Add89884,in1Add89884],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min45991.png')

LMax94585 = maximum_layer([[[[[[0.6365]]]]], [[[[[0.1939]]]]]], Max94585), 
LRes74928 = reshape_layer(Max94585, [1, 1, 1], Res74928), 
LRes89410 = reshape_layer(Res74928, [1, 1], Res89410), 
LZer31461 = zero_padding1D_layer(Res89410, 1, 1, Zer31461), 
LRes41413 = reshape_layer(Zer31461, [3, 1, 1], Res41413), 
LRes81861 = reshape_layer(Res41413, [3, 1, 1, 1], Res81861), 
LZer21079 = zero_padding3D_layer(Res81861, 1, 0, 2, 0, 2, 0, Zer21079), 
LMin61806 = minimum_layer([[[[[0.4793]], [[0.4116]]]], [[[[0.4997]], [[0.106]]]]], Min61806), 
LZer43909 = zero_padding2D_layer(Min61806, 0, 0, 1, 0, Zer43909), 
LCon4246 = concatenate_layer([Zer43909,[[[[0.3742], [0.4002]], [[0.7825], [0.1293]]]]], 3, Con4246), 
LMax63559 = maximum_layer([[[[[0.7375, 0.2996], [0.476, 0.8977]], [[0.0515, 0.3856], [0.6489, 0.4607]]]], [[[[0.9627, 0.2667], [0.1141, 0.762]], [[0.7954, 0.2583], [0.2312, 0.8175]]]]], Max63559), 
LAdd51959 = add_layer([Con4246,Max63559], Add51959), 
LRes60762 = reshape_layer(Add51959, [2, 2, 2, 1], Res60762), 
LZer95318 = zero_padding3D_layer(Res60762, 2, 0, 1, 0, 1, 0, Zer95318), 
LAdd89884 = add_layer([[[[[0.2864]], [[0.2498]]]], [[[[0.4309]], [[0.2068]]]]], Add89884), 
LRes9113 = reshape_layer(Add89884, [2, 1, 1, 1], Res9113), 
LZer44579 = zero_padding3D_layer(Res9113, 1, 1, 1, 1, 1, 1, Zer44579), 
LAve40393 = average_layer([Zer95318,Zer44579], Ave40393), 
LMin45991 = minimum_layer([Zer21079,Ave40393], Min45991), 
exec_layers([LMax94585,LRes74928,LRes89410,LZer31461,LRes41413,LRes81861,LZer21079,LMin61806,LZer43909,LCon4246,LMax63559,LAdd51959,LRes60762,LZer95318,LAdd89884,LRes9113,LZer44579,LAve40393,LMin45991],["Max94585","Res74928","Res89410","Zer31461","Res41413","Res81861","Zer21079","Min61806","Zer43909","Con4246","Max63559","Add51959","Res60762","Zer95318","Add89884","Res9113","Zer44579","Ave40393","Min45991"],Min45991,"Min45991")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.6365000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0.6365]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0.6365]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0.6365]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]