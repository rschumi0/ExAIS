import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo18129 = tf.keras.layers.Input(shape=([1, 2]))
in0Con6328 = tf.keras.layers.Input(shape=([3, 1]))
in0Sub61715 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub61715 = tf.keras.layers.Input(shape=([3, 2]))
in0Add82275 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add82275 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Mul65890 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Mul65890 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Glo18129 = keras.layers.GlobalMaxPool1D(name = 'Glo18129', )(in0Glo18129)
Res54973 = keras.layers.Reshape((2, 1), name = 'Res54973', )(Glo18129)
Zer62349 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer62349', )(Res54973)
Con6328 = keras.layers.Concatenate(axis=2, name = 'Con6328', )([Zer62349,in0Con6328])
Sub61715 = keras.layers.Subtract(name = 'Sub61715', )([in0Sub61715,in1Sub61715])
Mul67203 = keras.layers.Multiply(name = 'Mul67203', )([Con6328,Sub61715])
Res12958 = keras.layers.Reshape((3, 2, 1), name = 'Res12958', )(Mul67203)
Res50214 = keras.layers.Reshape((3, 2, 1, 1), name = 'Res50214', )(Res12958)
Zer96489 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer96489', )(Res50214)
Add82275 = keras.layers.Add(name = 'Add82275', )([in0Add82275,in1Add82275])
Zer77364 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (1, 0)), name = 'Zer77364', )(Add82275)
Max56922 = keras.layers.Maximum(name = 'Max56922', )([Zer96489,Zer77364])
Mul65890 = keras.layers.Multiply(name = 'Mul65890', )([in0Mul65890,in1Mul65890])
Zer69213 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (2, 0)), name = 'Zer69213', )(Mul65890)
Add50733 = keras.layers.Add(name = 'Add50733', )([Max56922,Zer69213])
model = tf.keras.models.Model(inputs=[in0Glo18129,in0Con6328,in0Sub61715,in1Sub61715,in0Add82275,in1Add82275,in0Mul65890,in1Mul65890], outputs=Add50733)
in0Glo18129 = tf.constant([[[1.1293, 1.1623]]])
in0Con6328 = tf.constant([[[0.7435], [0.911], [0.5491]]])
in0Sub61715 = tf.constant([[[0.455, 0.384], [0.4151, 0.2904], [0.2791, 0.4254]]])
in1Sub61715 = tf.constant([[[0.664, 0.5907], [0.6585, 0.8084], [0.1844, 0.4039]]])
in0Add82275 = tf.constant([[[[[0.468], [0.6983]]]]])
in1Add82275 = tf.constant([[[[[0.3753], [0.635]]]]])
in0Mul65890 = tf.constant([[[[[0.4742]], [[0.743]]], [[[0.3525]], [[0.3445]]]]])
in1Mul65890 = tf.constant([[[[[0.8026]], [[0.7386]]], [[[0.7023]], [[0.0648]]]]])
print (np.array2string(model.predict([in0Glo18129,in0Con6328,in0Sub61715,in1Sub61715,in0Add82275,in1Add82275,in0Mul65890,in1Mul65890],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add50733.png')

LGlo18129 = global_max_pool1D_layer([[[1.1293, 1.1623]]], Glo18129), 
LRes54973 = reshape_layer(Glo18129, [2, 1], Res54973), 
LZer62349 = zero_padding1D_layer(Res54973, 1, 0, Zer62349), 
LCon6328 = concatenate_layer([Zer62349,[[[0.7435], [0.911], [0.5491]]]], 2, Con6328), 
LSub61715 = subtract_layer([[[0.455, 0.384], [0.4151, 0.2904], [0.2791, 0.4254]]], [[[0.664, 0.5907], [0.6585, 0.8084], [0.1844, 0.4039]]], Sub61715), 
LMul67203 = multiply_layer([Con6328,Sub61715], Mul67203), 
LRes12958 = reshape_layer(Mul67203, [3, 2, 1], Res12958), 
LRes50214 = reshape_layer(Res12958, [3, 2, 1, 1], Res50214), 
LZer96489 = zero_padding3D_layer(Res50214, 0, 0, 0, 0, 2, 0, Zer96489), 
LAdd82275 = add_layer([[[[[[0.468], [0.6983]]]]], [[[[[0.3753], [0.635]]]]]], Add82275), 
LZer77364 = zero_padding3D_layer(Add82275, 2, 0, 1, 0, 1, 0, Zer77364), 
LMax56922 = maximum_layer([Zer96489,Zer77364], Max56922), 
LMul65890 = multiply_layer([[[[[[0.4742]], [[0.743]]], [[[0.3525]], [[0.3445]]]]], [[[[[0.8026]], [[0.7386]]], [[[0.7023]], [[0.0648]]]]]], Mul65890), 
LZer69213 = zero_padding3D_layer(Mul65890, 1, 0, 0, 0, 2, 0, Zer69213), 
LAdd50733 = add_layer([Max56922,Zer69213], Add50733), 
exec_layers([LGlo18129,LRes54973,LZer62349,LCon6328,LSub61715,LMul67203,LRes12958,LRes50214,LZer96489,LAdd82275,LZer77364,LMax56922,LMul65890,LZer69213,LAdd50733],["Glo18129","Res54973","Zer62349","Con6328","Sub61715","Mul67203","Res12958","Res50214","Zer96489","Add82275","Zer77364","Max56922","Mul65890","Zer69213","Add50733"],Add50733,"Add50733")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.3805929]], [[0.0000000], [0.0000000], [0.5487798]]], [[[0.0000000], [0.0000000], [0.3576306]], [[0.0000000], [0.8433000], [1.3556236]]]]]

Expected (Unparsed): [[[[[0],[0],[0.0]],[[0],[0],[0]]],[[[0],[0],[0.38059292]],[[0],[0],[0.5487798]]],[[[0],[0],[0.35763056000000004]],[[0],[0.8433],[1.3556236]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0.3806]], [[0], [0], [0.5488]]], [[[0], [0], [0.3577]], [[0], [0.8433], [1.3557]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0.3806]], [[0], [0], [0.5488]]], [[[0], [0], [0.3577]], [[0], [0.8433], [1.3557]]]]]