import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub9534 = tf.keras.layers.Input(shape=([2]))
in1Sub9534 = tf.keras.layers.Input(shape=([2]))
in0Con82389 = tf.keras.layers.Input(shape=([1, 1]))

Sub9534 = keras.layers.Subtract(name = 'Sub9534', )([in0Sub9534,in1Sub9534])
Con82389 = keras.layers.Conv1D(4, (1),strides=(1), padding='valid', dilation_rate=(1), name = 'Con82389', )(in0Con82389)
Sim99498 = keras.layers.SimpleRNN(2,name = 'Sim99498', )(Con82389)
Dot51175 = keras.layers.Dot(axes=(1, 1), name = 'Dot51175', )([Sub9534,Sim99498])
Res79003 = keras.layers.Reshape((1, 1), name = 'Res79003', )(Dot51175)
Res61415 = keras.layers.Reshape((1, 1, 1), name = 'Res61415', )(Res79003)
Zer4917 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer4917', )(Res61415)
model = tf.keras.models.Model(inputs=[in0Sub9534,in1Sub9534,in0Con82389], outputs=Zer4917)
w = model.get_layer('Con82389').get_weights() 
w[0] = np.array([[[0.1208, 0.8351, 0.5762, 0.2977]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con82389').set_weights(w) 
w = model.get_layer('Sim99498').get_weights() 
w[0] = np.array([[7, 3], [6, 2], [5, 10], [10, 2]])
w[1] = np.array([[5, 3], [1, 4]])
w[2] = np.array([4, 10])
model.get_layer('Sim99498').set_weights(w) 
in0Sub9534 = tf.constant([[0.3565, 0.1329]])
in1Sub9534 = tf.constant([[0.2278, 0.7585]])
in0Con82389 = tf.constant([[[0.4076]]])
print (np.array2string(model.predict([in0Sub9534,in1Sub9534,in0Con82389],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer4917.png')

LSub9534 = subtract_layer([[0.3565, 0.1329]], [[0.2278, 0.7585]], Sub9534), 
LCon82389 = conv1D_layer([[[0.4076]]], 1,[[[0.1208, 0.8351, 0.5762, 0.2977]]],[0, 0, 0, 0], 1, false, 1, Con82389), 
LSim99498 = simple_rnn_layer(Con82389,[[7, 3], [6, 2], [5, 10], [10, 2]],[[5, 3], [1, 4]],[4, 10], Sim99498), 
LDot51175 = dot_layer(Sub9534,Sim99498, 1, 1, Dot51175), 
LRes79003 = reshape_layer(Dot51175, [1, 1], Res79003), 
LRes61415 = reshape_layer(Res79003, [1, 1, 1], Res61415), 
LZer4917 = zero_padding2D_layer(Res61415, 1, 1, 1, 1, Zer4917), 
exec_layers([LSub9534,LCon82389,LSim99498,LDot51175,LRes79003,LRes61415,LZer4917],["Sub9534","Con82389","Sim99498","Dot51175","Res79003","Res61415","Zer4917"],Zer4917,"Zer4917")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [-0.4969000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[-0.4969000061489237],[0]],[[0],[0],[0]]]]

Actual:   [[[[0], [0], [0]], [[0], [-0.4969], [0]], [[0], [0], [0]]]]

Expected: [[[[0], [0], [0]], [[0], [-0.4969], [0]], [[0], [0], [0]]]]