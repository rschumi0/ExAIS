import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer36417 = tf.keras.layers.Input(shape=([2, 3, 1]))

Zer36417 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer36417', )(in0Zer36417)
Loc979 = keras.layers.LocallyConnected2D(3, (2, 5),strides=(7, 10), name = 'Loc979', )(Zer36417)
Ave91826 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave91826', )(Loc979)
model = tf.keras.models.Model(inputs=[in0Zer36417], outputs=Ave91826)
w = model.get_layer('Loc979').get_weights() 
w[0] = np.array([[[0.5584, 0.0432, 0.8909], [0.8866, 0.2403, 0.5617], [0.8362, 0.2159, 0.1775], [0.3774, 0.6547, 0.4741], [0.6032, 0.6142, 0.3396], [0.3144, 0.8071, 0.2571], [0.3295, 0.759, 0.4332], [0.3545, 0.3475, 0.0496], [0.2068, 0.3234, 0.0351], [0.6891, 0.6527, 0.5494]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc979').set_weights(w) 
in0Zer36417 = tf.constant([[[[1.6111], [1.1661], [1.8314]], [[1.8876], [1.6989], [1.796]]]])
print (np.array2string(model.predict([in0Zer36417],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave91826.png')

LZer36417 = zero_padding2D_layer([[[[1.6111], [1.1661], [1.8314]], [[1.8876], [1.6989], [1.796]]]], 1, 1, 1, 1, Zer36417), 
LLoc979 = locally_connected2D_layer(Zer36417, 2, 5,[[[0.5584, 0.0432, 0.8909], [0.8866, 0.2403, 0.5617], [0.8362, 0.2159, 0.1775], [0.3774, 0.6547, 0.4741], [0.6032, 0.6142, 0.3396], [0.3144, 0.8071, 0.2571], [0.3295, 0.759, 0.4332], [0.3545, 0.3475, 0.0496], [0.2068, 0.3234, 0.0351], [0.6891, 0.6527, 0.5494]]],[[[0, 0, 0]]], 7, 10, Loc979), 
LAve91826 = average_pooling2D_layer(Loc979, 1, 1, Ave91826), 
exec_layers([LZer36417,LLoc979,LAve91826],["Zer36417","Loc979","Ave91826"],Ave91826,"Ave91826")

Actual (Unparsed): [[[[1.3229734, 2.2203194, 0.8200492]]]]

Expected (Unparsed): [[[[1.32297342,2.22031941,0.8200492199999999]]]]

Actual:   [[[[1.323, 2.2204, 0.8201]]]]

Expected: [[[[1.323, 2.2204, 0.8201]]]]