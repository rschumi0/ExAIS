import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max51622 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Lea96129 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Max72157 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Max72157 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Max51622 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max51622', )(in0Max51622)
Res68138 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res68138', )(Max51622)
Lea96129 = keras.layers.LeakyReLU(alpha=4.148476897232163, name = 'Lea96129', input_shape=(1, 1, 2, 1))(in0Lea96129)
Mul28041 = keras.layers.Multiply(name = 'Mul28041', )([Res68138,Lea96129])
Zer4700 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer4700', )(Mul28041)
Max72157 = keras.layers.Maximum(name = 'Max72157', )([in0Max72157,in1Max72157])
Add32271 = keras.layers.Add(name = 'Add32271', )([Zer4700,Max72157])
model = tf.keras.models.Model(inputs=[in0Max51622,in0Lea96129,in0Max72157,in1Max72157], outputs=Add32271)
in0Max51622 = tf.constant([[[[1.17, 1.7334], [1.1536, 1.6688]]]])
in0Lea96129 = tf.constant([[[[[0.3426], [0.989]]]]])
in0Max72157 = tf.constant([[[[[0.6446], [0.3464]], [[0.0846], [0.3689]]], [[[0.2127], [0.3474]], [[0.2618], [0.6479]]]]])
in1Max72157 = tf.constant([[[[[0.7993], [0.7352]], [[0.6816], [0.6879]]], [[[0.1798], [0.0035]], [[0.6508], [0.1442]]]]])
print (np.array2string(model.predict([in0Max51622,in0Lea96129,in0Max72157,in1Max72157],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add32271.png')

LMax51622 = max_pool2D_layer([[[[1.17, 1.7334], [1.1536, 1.6688]]]], 1, 2, Max51622), 
LRes68138 = reshape_layer(Max51622, [1, 1, 2, 1], Res68138), 
LLea96129 = leaky_relu_layer([[[[[0.3426], [0.989]]]]], 4.148476897232163, Lea96129), 
LMul28041 = multiply_layer([Res68138,Lea96129], Mul28041), 
LZer4700 = zero_padding3D_layer(Mul28041, 1, 0, 1, 0, 0, 0, Zer4700), 
LMax72157 = maximum_layer([[[[[[0.6446], [0.3464]], [[0.0846], [0.3689]]], [[[0.2127], [0.3474]], [[0.2618], [0.6479]]]]], [[[[[0.7993], [0.7352]], [[0.6816], [0.6879]]], [[[0.1798], [0.0035]], [[0.6508], [0.1442]]]]]], Max72157), 
LAdd32271 = add_layer([Zer4700,Max72157], Add32271), 
exec_layers([LMax51622,LRes68138,LLea96129,LMul28041,LZer4700,LMax72157,LAdd32271],["Max51622","Res68138","Lea96129","Mul28041","Zer4700","Max72157","Add32271"],Add32271,"Add32271")

Actual (Unparsed): [[[[[0.7993000], [0.7352000]], [[0.6816000], [0.6879000]]], [[[0.2127000], [0.3474000]], [[1.0516420], [2.3622326]]]]]

Expected (Unparsed): [[[[[0.7993],[0.7352]],[[0.6816],[0.6879]]],[[[0.2127],[0.3474]],[[1.051642],[2.3622326]]]]]

Actual:   [[[[[0.7993], [0.7352]], [[0.6816], [0.6879]]], [[[0.2127], [0.3474]], [[1.0517], [2.3623]]]]]

Expected: [[[[[0.7993], [0.7352]], [[0.6816], [0.6879]]], [[[0.2127], [0.3474]], [[1.0517], [2.3623]]]]]