import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max23573 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Max23573 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Add64726 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add64726 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con32815 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Max23573 = keras.layers.Maximum(name = 'Max23573', )([in0Max23573,in1Max23573])
Zer34509 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer34509', )(Max23573)
Add64726 = keras.layers.Add(name = 'Add64726', )([in0Add64726,in1Add64726])
Con32815 = keras.layers.Concatenate(axis=4, name = 'Con32815', )([Add64726,in0Con32815])
Ave74328 = keras.layers.Average(name = 'Ave74328', )([Zer34509,Con32815])
Res79338 = keras.layers.Reshape((1, 2, 4), name = 'Res79338', )(Ave74328)
Res17700 = keras.layers.Reshape((1, 8), name = 'Res17700', )(Res79338)
Glo25618 = keras.layers.GlobalMaxPool1D(name = 'Glo25618', )(Res17700)
model = tf.keras.models.Model(inputs=[in0Max23573,in1Max23573,in0Add64726,in1Add64726,in0Con32815], outputs=Glo25618)
in0Max23573 = tf.constant([[[[[0.0402, 0.8912], [0.7164, 0.7032]]]]])
in1Max23573 = tf.constant([[[[[0.0095, 0.6389], [0.9999, 0.8425]]]]])
in0Add64726 = tf.constant([[[[[0.7882], [0.2063]], [[0.0645], [0.1734]]]]])
in1Add64726 = tf.constant([[[[[0.5296], [0.3612]], [[0.4448], [0.288]]]]])
in0Con32815 = tf.constant([[[[[0.9151], [0.9417]], [[0.6842], [0.1938]]]]])
print (np.array2string(model.predict([in0Max23573,in1Max23573,in0Add64726,in1Add64726,in0Con32815],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo25618.png')

LMax23573 = maximum_layer([[[[[[0.0402, 0.8912], [0.7164, 0.7032]]]]], [[[[[0.0095, 0.6389], [0.9999, 0.8425]]]]]], Max23573), 
LZer34509 = zero_padding3D_layer(Max23573, 0, 0, 1, 0, 0, 0, Zer34509), 
LAdd64726 = add_layer([[[[[[0.7882], [0.2063]], [[0.0645], [0.1734]]]]], [[[[[0.5296], [0.3612]], [[0.4448], [0.288]]]]]], Add64726), 
LCon32815 = concatenate_layer([Add64726,[[[[[0.9151], [0.9417]], [[0.6842], [0.1938]]]]]], 4, Con32815), 
LAve74328 = average_layer([Zer34509,Con32815], Ave74328), 
LRes79338 = reshape_layer(Ave74328, [1, 2, 4], Res79338), 
LRes17700 = reshape_layer(Res79338, [1, 8], Res17700), 
LGlo25618 = global_max_pool1D_layer(Res17700, Glo25618), 
exec_layers([LMax23573,LZer34509,LAdd64726,LCon32815,LAve74328,LRes79338,LRes17700,LGlo25618],["Max23573","Zer34509","Add64726","Con32815","Ave74328","Res79338","Res17700","Glo25618"],Glo25618,"Glo25618")

Actual (Unparsed): [[0.6589000, 0.4575500, 0.2837500, 0.4708500, 0.2747500, 0.7877000, 0.7306500, 0.5181500]]

Expected (Unparsed): [[0.6589,0.45755,0.28375,0.47085,0.27475,0.7877000000000001,0.73065,0.51815]]

Actual:   [[0.6589, 0.4576, 0.2838, 0.4709, 0.2748, 0.7877, 0.7307, 0.5182]]

Expected: [[0.6589, 0.4576, 0.2838, 0.4709, 0.2748, 0.7878, 0.7307, 0.5182]]