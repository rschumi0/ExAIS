import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave78762 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave78762 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0ELU36542 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Min93702 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Min93702 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Ave78762 = keras.layers.Average(name = 'Ave78762', )([in0Ave78762,in1Ave78762])
ELU36542 = keras.layers.ELU(alpha=9.829253873851744, name = 'ELU36542', input_shape=(2, 2, 2))(in0ELU36542)
Sub17022 = keras.layers.Subtract(name = 'Sub17022', )([Ave78762,ELU36542])
Res52456 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res52456', )(Sub17022)
Min93702 = keras.layers.Minimum(name = 'Min93702', )([in0Min93702,in1Min93702])
Zer64983 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer64983', )(Min93702)
Min32859 = keras.layers.Minimum(name = 'Min32859', )([Res52456,Zer64983])
Res11531 = keras.layers.Reshape((2, 2, 2), name = 'Res11531', )(Min32859)
Res74826 = keras.layers.Reshape((2, 4), name = 'Res74826', )(Res11531)
Zer97272 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer97272', )(Res74826)
model = tf.keras.models.Model(inputs=[in0Ave78762,in1Ave78762,in0ELU36542,in0Min93702,in1Min93702], outputs=Zer97272)
in0Ave78762 = tf.constant([[[[0.2021, 0.1], [0.9881, 0.3184]], [[0.0197, 0.9024], [0.1775, 0.4696]]]])
in1Ave78762 = tf.constant([[[[0.22, 0.4073], [0.52, 0.538]], [[0.8668, 0.8752], [0.5482, 0.9614]]]])
in0ELU36542 = tf.constant([[[[0.9558, 0.1469], [0.5831, 0.3974]], [[0.9688, 0.4049], [0.4047, 0.7021]]]])
in0Min93702 = tf.constant([[[[[0.9581], [0.4083]]], [[[0.9759], [0.1015]]]]])
in1Min93702 = tf.constant([[[[[0.0299], [0.0256]]], [[[0.5675], [0.5152]]]]])
print (np.array2string(model.predict([in0Ave78762,in1Ave78762,in0ELU36542,in0Min93702,in1Min93702],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer97272.png')

LAve78762 = average_layer([[[[[0.2021, 0.1], [0.9881, 0.3184]], [[0.0197, 0.9024], [0.1775, 0.4696]]]], [[[[0.22, 0.4073], [0.52, 0.538]], [[0.8668, 0.8752], [0.5482, 0.9614]]]]], Ave78762), 
LELU36542 = elu_layer([[[[0.9558, 0.1469], [0.5831, 0.3974]], [[0.9688, 0.4049], [0.4047, 0.7021]]]], 9.829253873851744, ELU36542), 
LSub17022 = subtract_layer(Ave78762,ELU36542, Sub17022), 
LRes52456 = reshape_layer(Sub17022, [2, 2, 2, 1], Res52456), 
LMin93702 = minimum_layer([[[[[[0.9581], [0.4083]]], [[[0.9759], [0.1015]]]]], [[[[[0.0299], [0.0256]]], [[[0.5675], [0.5152]]]]]], Min93702), 
LZer64983 = zero_padding3D_layer(Min93702, 0, 0, 1, 0, 0, 0, Zer64983), 
LMin32859 = minimum_layer([Res52456,Zer64983], Min32859), 
LRes11531 = reshape_layer(Min32859, [2, 2, 2], Res11531), 
LRes74826 = reshape_layer(Res11531, [2, 4], Res74826), 
LZer97272 = zero_padding1D_layer(Res74826, 1, 1, Zer97272), 
exec_layers([LAve78762,LELU36542,LSub17022,LRes52456,LMin93702,LZer64983,LMin32859,LRes11531,LRes74826,LZer97272],["Ave78762","ELU36542","Sub17022","Res52456","Min93702","Zer64983","Min32859","Res11531","Res74826","Zer97272"],Zer97272,"Zer97272")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [-0.7447500, 0.0000000, 0.0299000, 0.0256000], [-0.5255500, 0.0000000, -0.0418500, 0.0134000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0],[-0.74475,0,0.0299,0.0256],[-0.52555,0,-0.04185,0.013400000000000079],[0,0,0,0]]]

Actual:   [[[0, 0, 0, 0], [-0.7447, 0, 0.0299, 0.0256], [-0.5255, 0, -0.0418, 0.0134], [0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0], [-0.7447, 0, 0.0299, 0.0256], [-0.5255, 0, -0.0418, 0.0135], [0, 0, 0, 0]]]