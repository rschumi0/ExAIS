import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub12934 = tf.keras.layers.Input(shape=([3, 2, 2]))
in1Sub12934 = tf.keras.layers.Input(shape=([3, 2, 2]))
in0Con96911 = tf.keras.layers.Input(shape=([3, 3, 2, 1]))
in0Sub54868 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in1Sub54868 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in0Dot10570 = tf.keras.layers.Input(shape=([3]))
in1Dot10570 = tf.keras.layers.Input(shape=([3]))
in0Con81561 = tf.keras.layers.Input(shape=([3, 3, 3]))

Sub12934 = keras.layers.Subtract(name = 'Sub12934', )([in0Sub12934,in1Sub12934])
Res76779 = keras.layers.Reshape((3, 2, 2, 1), name = 'Res76779', )(Sub12934)
Glo69695 = keras.layers.GlobalMaxPool3D(name = 'Glo69695', )(Res76779)
Res48291 = keras.layers.Reshape((1, 1), name = 'Res48291', )(Glo69695)
Res4539 = keras.layers.Reshape((1, 1, 1), name = 'Res4539', )(Res48291)
Res50389 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res50389', )(Res4539)
Zer22205 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (1, 0)), name = 'Zer22205', )(Res50389)
Con96911 = keras.layers.Concatenate(axis=4, name = 'Con96911', )([Zer22205,in0Con96911])
Sub54868 = keras.layers.Subtract(name = 'Sub54868', )([in0Sub54868,in1Sub54868])
Add3125 = keras.layers.Add(name = 'Add3125', )([Con96911,Sub54868])
Res27256 = keras.layers.Reshape((3, 3, 4), name = 'Res27256', )(Add3125)
Dot10570 = keras.layers.Dot(axes=(1, 1), name = 'Dot10570', )([in0Dot10570,in1Dot10570])
Res60859 = keras.layers.Reshape((1, 1), name = 'Res60859', )(Dot10570)
Res51295 = keras.layers.Reshape((1, 1, 1), name = 'Res51295', )(Res60859)
Ave3994 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 11), padding='valid', name = 'Ave3994', )(Res51295)
Zer82286 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer82286', )(Ave3994)
Con81561 = keras.layers.Concatenate(axis=3, name = 'Con81561', )([Zer82286,in0Con81561])
Add62729 = keras.layers.Add(name = 'Add62729', )([Res27256,Con81561])
Res5584 = keras.layers.Reshape((3, 3, 4, 1), name = 'Res5584', )(Add62729)
Glo33861 = keras.layers.GlobalAveragePooling3D(name = 'Glo33861', )(Res5584)
model = tf.keras.models.Model(inputs=[in0Sub12934,in1Sub12934,in0Con96911,in0Sub54868,in1Sub54868,in0Dot10570,in1Dot10570,in0Con81561], outputs=Glo33861)
in0Sub12934 = tf.constant([[[[0.105, 0.8935], [0.5913, 0.846]], [[0.8885, 0.1757], [0.8354, 0.634]], [[0.295, 0.8069], [0.7711, 0.0543]]]])
in1Sub12934 = tf.constant([[[[0.1677, 0.3854], [0.2266, 0.6218]], [[0.8242, 0.3812], [0.295, 0.7489]], [[0.0797, 0.0744], [0.7241, 0.5058]]]])
in0Con96911 = tf.constant([[[[[0.9281], [0.7794]], [[0.2507], [0.9931]], [[0.8968], [0.5604]]], [[[0.6294], [0.112]], [[0.9466], [0.1922]], [[0.3003], [0.2152]]], [[[0.2855], [0.2502]], [[0.8923], [0.0498]], [[0.9826], [0.4355]]]]])
in0Sub54868 = tf.constant([[[[[0.9046, 0.5313], [0.2207, 0.5686]], [[0.8281, 0.1957], [0.1058, 0.8689]], [[0.8542, 0.3638], [0.546, 0.9091]]], [[[0.8318, 0.2779], [0.4069, 0.4473]], [[0.9376, 0.8272], [0.6278, 0.2696]], [[0.1691, 0.8754], [0.9004, 0.0658]]], [[[0.5234, 0.0483], [0.3492, 0.0047]], [[0.84, 0.4096], [0.8578, 0.4649]], [[0.1246, 0.8282], [0.6626, 0.5176]]]]])
in1Sub54868 = tf.constant([[[[[0.539, 0.9998], [0.8446, 0.1823]], [[0.1394, 0.0201], [0.389, 0.1804]], [[0.8802, 0.1314], [0.5551, 0.8955]]], [[[0.3577, 0.7615], [0.4006, 0.5165]], [[0.2647, 0.258], [0.4384, 0.8893]], [[0.5502, 0.7841], [0.5679, 0.4287]]], [[[0.833, 0.6864], [0.6224, 0.5551]], [[0.7071, 0.2726], [0.0976, 0.5108]], [[0.1932, 0.3412], [0.8873, 0.0844]]]]])
in0Dot10570 = tf.constant([[0.741, 0.9974, 0.1428]])
in1Dot10570 = tf.constant([[0.7254, 0.8667, 0.2571]])
in0Con81561 = tf.constant([[[[0.006, 0.3487, 0.5394], [0.5649, 0.8028, 0.4027], [0.9809, 0.643, 0.8639]], [[0.6935, 0.3328, 0.6935], [0.8918, 0.4306, 0.5436], [0.616, 0.1181, 0.6645]], [[0.0618, 0.7416, 0.1818], [0.006, 0.2435, 0.146], [0.0618, 0.1568, 0.5357]]]])
print (np.array2string(model.predict([in0Sub12934,in1Sub12934,in0Con96911,in0Sub54868,in1Sub54868,in0Dot10570,in1Dot10570,in0Con81561],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo33861.png')

LSub12934 = subtract_layer([[[[0.105, 0.8935], [0.5913, 0.846]], [[0.8885, 0.1757], [0.8354, 0.634]], [[0.295, 0.8069], [0.7711, 0.0543]]]], [[[[0.1677, 0.3854], [0.2266, 0.6218]], [[0.8242, 0.3812], [0.295, 0.7489]], [[0.0797, 0.0744], [0.7241, 0.5058]]]], Sub12934), 
LRes76779 = reshape_layer(Sub12934, [3, 2, 2, 1], Res76779), 
LGlo69695 = global_max_pool3D_layer(Res76779, Glo69695), 
LRes48291 = reshape_layer(Glo69695, [1, 1], Res48291), 
LRes4539 = reshape_layer(Res48291, [1, 1, 1], Res4539), 
LRes50389 = reshape_layer(Res4539, [1, 1, 1, 1], Res50389), 
LZer22205 = zero_padding3D_layer(Res50389, 2, 0, 2, 0, 1, 0, Zer22205), 
LCon96911 = concatenate_layer([Zer22205,[[[[[0.9281], [0.7794]], [[0.2507], [0.9931]], [[0.8968], [0.5604]]], [[[0.6294], [0.112]], [[0.9466], [0.1922]], [[0.3003], [0.2152]]], [[[0.2855], [0.2502]], [[0.8923], [0.0498]], [[0.9826], [0.4355]]]]]], 4, Con96911), 
LSub54868 = subtract_layer([[[[[0.9046, 0.5313], [0.2207, 0.5686]], [[0.8281, 0.1957], [0.1058, 0.8689]], [[0.8542, 0.3638], [0.546, 0.9091]]], [[[0.8318, 0.2779], [0.4069, 0.4473]], [[0.9376, 0.8272], [0.6278, 0.2696]], [[0.1691, 0.8754], [0.9004, 0.0658]]], [[[0.5234, 0.0483], [0.3492, 0.0047]], [[0.84, 0.4096], [0.8578, 0.4649]], [[0.1246, 0.8282], [0.6626, 0.5176]]]]], [[[[[0.539, 0.9998], [0.8446, 0.1823]], [[0.1394, 0.0201], [0.389, 0.1804]], [[0.8802, 0.1314], [0.5551, 0.8955]]], [[[0.3577, 0.7615], [0.4006, 0.5165]], [[0.2647, 0.258], [0.4384, 0.8893]], [[0.5502, 0.7841], [0.5679, 0.4287]]], [[[0.833, 0.6864], [0.6224, 0.5551]], [[0.7071, 0.2726], [0.0976, 0.5108]], [[0.1932, 0.3412], [0.8873, 0.0844]]]]], Sub54868), 
LAdd3125 = add_layer([Con96911,Sub54868], Add3125), 
LRes27256 = reshape_layer(Add3125, [3, 3, 4], Res27256), 
LDot10570 = dot_layer([[0.741, 0.9974, 0.1428]], [[0.7254, 0.8667, 0.2571]], 1, 1, Dot10570), 
LRes60859 = reshape_layer(Dot10570, [1, 1], Res60859), 
LRes51295 = reshape_layer(Res60859, [1, 1, 1], Res51295), 
LAve3994 = average_pooling2D_layer(Res51295, 1, 1, 1, 11, false, Ave3994), 
LZer82286 = zero_padding2D_layer(Ave3994, 2, 0, 2, 0, Zer82286), 
LCon81561 = concatenate_layer([Zer82286,[[[[0.006, 0.3487, 0.5394], [0.5649, 0.8028, 0.4027], [0.9809, 0.643, 0.8639]], [[0.6935, 0.3328, 0.6935], [0.8918, 0.4306, 0.5436], [0.616, 0.1181, 0.6645]], [[0.0618, 0.7416, 0.1818], [0.006, 0.2435, 0.146], [0.0618, 0.1568, 0.5357]]]]], 3, Con81561), 
LAdd62729 = add_layer([Res27256,Con81561], Add62729), 
LRes5584 = reshape_layer(Add62729, [3, 3, 4, 1], Res5584), 
LGlo33861 = global_average_pooling3D_layer(Res5584, Glo33861), 
exec_layers([LSub12934,LRes76779,LGlo69695,LRes48291,LRes4539,LRes50389,LZer22205,LCon96911,LSub54868,LAdd3125,LRes27256,LDot10570,LRes60859,LRes51295,LAve3994,LZer82286,LCon81561,LAdd62729,LRes5584,LGlo33861],["Sub12934","Res76779","Glo69695","Res48291","Res4539","Res50389","Zer22205","Con96911","Sub54868","Add3125","Res27256","Dot10570","Res60859","Res51295","Ave3994","Zer82286","Con81561","Add62729","Res5584","Glo33861"],Glo33861,"Glo33861")

Actual (Unparsed): [[0.7094995]]

Expected (Unparsed): [[0.709499496111111]]

Actual:   [[0.7095]]

Expected: [[0.7095]]