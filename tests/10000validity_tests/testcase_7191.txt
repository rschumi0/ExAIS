import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min84519 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Min84519 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Dot10465 = tf.keras.layers.Input(shape=([2]))
in1Dot10465 = tf.keras.layers.Input(shape=([2]))
in0Con87277 = tf.keras.layers.Input(shape=([1]))
in0Con7497 = tf.keras.layers.Input(shape=([2, 1]))
in0Add46136 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add46136 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con85651 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Max24221 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Max24221 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Mul51541 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul51541 = tf.keras.layers.Input(shape=([2, 1]))
in0Con83521 = tf.keras.layers.Input(shape=([2, 1]))

Min84519 = keras.layers.Minimum(name = 'Min84519', )([in0Min84519,in1Min84519])
Res21408 = keras.layers.Reshape((2, 1, 2), name = 'Res21408', )(Min84519)
Res26664 = keras.layers.Reshape((2, 2), name = 'Res26664', )(Res21408)
Ave4977 = keras.layers.AveragePooling1D(pool_size=(2), strides=(3), padding='same', name = 'Ave4977', )(Res26664)
Fla98961 = keras.layers.Flatten(name = 'Fla98961', )(Ave4977)
Dot10465 = keras.layers.Dot(axes=(1, 1), name = 'Dot10465', )([in0Dot10465,in1Dot10465])
Con87277 = keras.layers.Concatenate(axis=1, name = 'Con87277', )([Dot10465,in0Con87277])
Add8981 = keras.layers.Add(name = 'Add8981', )([Fla98961,Con87277])
Res6536 = keras.layers.Reshape((2, 1), name = 'Res6536', )(Add8981)
Con7497 = keras.layers.Concatenate(axis=2, name = 'Con7497', )([Res6536,in0Con7497])
Add46136 = keras.layers.Add(name = 'Add46136', )([in0Add46136,in1Add46136])
Con85651 = keras.layers.Concatenate(axis=3, name = 'Con85651', )([Add46136,in0Con85651])
Max24221 = keras.layers.Maximum(name = 'Max24221', )([in0Max24221,in1Max24221])
Add81743 = keras.layers.Add(name = 'Add81743', )([Con85651,Max24221])
Res49860 = keras.layers.Reshape((2, 2), name = 'Res49860', )(Add81743)
Mul51541 = keras.layers.Multiply(name = 'Mul51541', )([in0Mul51541,in1Mul51541])
Con83521 = keras.layers.Concatenate(axis=2, name = 'Con83521', )([Mul51541,in0Con83521])
Max16238 = keras.layers.Maximum(name = 'Max16238', )([Res49860,Con83521])
Mul72258 = keras.layers.Multiply(name = 'Mul72258', )([Con7497,Max16238])
model = tf.keras.models.Model(inputs=[in0Min84519,in1Min84519,in0Dot10465,in1Dot10465,in0Con87277,in0Con7497,in0Add46136,in1Add46136,in0Con85651,in0Max24221,in1Max24221,in0Mul51541,in1Mul51541,in0Con83521], outputs=Mul72258)
in0Min84519 = tf.constant([[[[[0.6948, 0.217]]], [[[0.9944, 0.269]]]]])
in1Min84519 = tf.constant([[[[[0.8562, 0.8336]]], [[[0.4301, 0.5391]]]]])
in0Dot10465 = tf.constant([[0.3935, 0.8971]])
in1Dot10465 = tf.constant([[0.2518, 0.6669]])
in0Con87277 = tf.constant([[0.373]])
in0Con7497 = tf.constant([[[0.1128], [0.7428]]])
in0Add46136 = tf.constant([[[[0.9575]], [[0.2783]]]])
in1Add46136 = tf.constant([[[[0.3731]], [[0.2485]]]])
in0Con85651 = tf.constant([[[[0.9192]], [[0.6548]]]])
in0Max24221 = tf.constant([[[[0.0516, 0.1763]], [[0.5952, 0.0084]]]])
in1Max24221 = tf.constant([[[[0.5893, 0.094]], [[0.2825, 0.3785]]]])
in0Mul51541 = tf.constant([[[0.9298], [0.4711]]])
in1Mul51541 = tf.constant([[[0.0613], [0.3165]]])
in0Con83521 = tf.constant([[[0.1754], [0.8724]]])
print (np.array2string(model.predict([in0Min84519,in1Min84519,in0Dot10465,in1Dot10465,in0Con87277,in0Con7497,in0Add46136,in1Add46136,in0Con85651,in0Max24221,in1Max24221,in0Mul51541,in1Mul51541,in0Con83521],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul72258.png')

LMin84519 = minimum_layer([[[[[[0.6948, 0.217]]], [[[0.9944, 0.269]]]]], [[[[[0.8562, 0.8336]]], [[[0.4301, 0.5391]]]]]], Min84519), 
LRes21408 = reshape_layer(Min84519, [2, 1, 2], Res21408), 
LRes26664 = reshape_layer(Res21408, [2, 2], Res26664), 
LAve4977 = average_pooling1D_layer(Res26664, 2, 3, true, Ave4977), 
LFla98961 = flatten_layer(Ave4977, Fla98961), 
LDot10465 = dot_layer([[0.3935, 0.8971]], [[0.2518, 0.6669]], 1, 1, Dot10465), 
LCon87277 = concatenate_layer([Dot10465,[[0.373]]], 1, Con87277), 
LAdd8981 = add_layer([Fla98961,Con87277], Add8981), 
LRes6536 = reshape_layer(Add8981, [2, 1], Res6536), 
LCon7497 = concatenate_layer([Res6536,[[[0.1128], [0.7428]]]], 2, Con7497), 
LAdd46136 = add_layer([[[[[0.9575]], [[0.2783]]]], [[[[0.3731]], [[0.2485]]]]], Add46136), 
LCon85651 = concatenate_layer([Add46136,[[[[0.9192]], [[0.6548]]]]], 3, Con85651), 
LMax24221 = maximum_layer([[[[[0.0516, 0.1763]], [[0.5952, 0.0084]]]], [[[[0.5893, 0.094]], [[0.2825, 0.3785]]]]], Max24221), 
LAdd81743 = add_layer([Con85651,Max24221], Add81743), 
LRes49860 = reshape_layer(Add81743, [2, 2], Res49860), 
LMul51541 = multiply_layer([[[[0.9298], [0.4711]]], [[[0.0613], [0.3165]]]], Mul51541), 
LCon83521 = concatenate_layer([Mul51541,[[[0.1754], [0.8724]]]], 2, Con83521), 
LMax16238 = maximum_layer([Res49860,Con83521], Max16238), 
LMul72258 = multiply_layer([Con7497,Max16238], Mul72258), 
exec_layers([LMin84519,LRes21408,LRes26664,LAve4977,LFla98961,LDot10465,LCon87277,LAdd8981,LRes6536,LCon7497,LAdd46136,LCon85651,LMax24221,LAdd81743,LRes49860,LMul51541,LCon83521,LMax16238,LMul72258],["Min84519","Res21408","Res26664","Ave4977","Fla98961","Dot10465","Con87277","Add8981","Res6536","Con7497","Add46136","Con85651","Max24221","Add81743","Res49860","Mul51541","Con83521","Max16238","Mul72258"],Mul72258,"Mul72258")

Actual (Unparsed): [[[2.4187078, 0.1235724], [0.6911520, 0.7675352]]]

Expected (Unparsed): [[[2.4187078558710007,0.12357239999999999],[0.6911519999999999,0.7675352400000001]]]

Actual:   [[[2.4188, 0.1236], [0.6912, 0.7676]]]

Expected: [[[2.4188, 0.1236], [0.6912, 0.7676]]]