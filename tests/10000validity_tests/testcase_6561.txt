import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Thr20779 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Max21509 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Max21509 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Min18421 = tf.keras.layers.Input(shape=([2, 2]))
in1Min18421 = tf.keras.layers.Input(shape=([2, 2]))
in0Con15358 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot72649 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot72649 = tf.keras.layers.Input(shape=([2, 3]))
in0Con16876 = tf.keras.layers.Input(shape=([3, 1]))

Thr20779 = keras.layers.ThresholdedReLU(theta=7.56790020631074, name = 'Thr20779', input_shape=(1, 2, 2, 1))(in0Thr20779)
Res2781 = keras.layers.Reshape((1, 2, 2), name = 'Res2781', )(Thr20779)
Res31071 = keras.layers.Reshape((1, 4), name = 'Res31071', )(Res2781)
Zer42655 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer42655', )(Res31071)
Max21509 = keras.layers.Maximum(name = 'Max21509', )([in0Max21509,in1Max21509])
Res45897 = keras.layers.Reshape((1, 2, 2), name = 'Res45897', )(Max21509)
Res30299 = keras.layers.Reshape((1, 4), name = 'Res30299', )(Res45897)
Zer78438 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer78438', )(Res30299)
Min18421 = keras.layers.Minimum(name = 'Min18421', )([in0Min18421,in1Min18421])
Con15358 = keras.layers.Concatenate(axis=2, name = 'Con15358', )([Min18421,in0Con15358])
Mul74486 = keras.layers.Multiply(name = 'Mul74486', )([Zer78438,Con15358])
Sub65054 = keras.layers.Subtract(name = 'Sub65054', )([Zer42655,Mul74486])
Zer60329 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer60329', )(Sub65054)
Dot72649 = keras.layers.Dot(axes=(1, 1), name = 'Dot72649', )([in0Dot72649,in1Dot72649])
Con16876 = keras.layers.Concatenate(axis=2, name = 'Con16876', )([Dot72649,in0Con16876])
Add24804 = keras.layers.Add(name = 'Add24804', )([Zer60329,Con16876])
model = tf.keras.models.Model(inputs=[in0Thr20779,in0Max21509,in1Max21509,in0Min18421,in1Min18421,in0Con15358,in0Dot72649,in1Dot72649,in0Con16876], outputs=Add24804)
in0Thr20779 = tf.constant([[[[[0.1768], [0.7556]], [[0.751], [0.6163]]]]])
in0Max21509 = tf.constant([[[[[0.1918, 0.1539]], [[0.3672, 0.8905]]]]])
in1Max21509 = tf.constant([[[[[0.1249, 0.5931]], [[0.4463, 0.1544]]]]])
in0Min18421 = tf.constant([[[0.5343, 0.5835], [0.2436, 0.7611]]])
in1Min18421 = tf.constant([[[0.8726, 0.7323], [0.2556, 0.8405]]])
in0Con15358 = tf.constant([[[0.728, 0.2117], [0.0023, 0.2736]]])
in0Dot72649 = tf.constant([[[0.3885, 0.5134, 0.3789], [0.5392, 0.32, 0.9338]]])
in1Dot72649 = tf.constant([[[0.0303, 0.1946, 0.3788], [0.744, 0.8162, 0.5324]]])
in0Con16876 = tf.constant([[[0.4567], [0.3915], [0.2353]]])
print (np.array2string(model.predict([in0Thr20779,in0Max21509,in1Max21509,in0Min18421,in1Min18421,in0Con15358,in0Dot72649,in1Dot72649,in0Con16876],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add24804.png')

LThr20779 = thresholded_relu_layer([[[[[0.1768], [0.7556]], [[0.751], [0.6163]]]]], 7.56790020631074, Thr20779), 
LRes2781 = reshape_layer(Thr20779, [1, 2, 2], Res2781), 
LRes31071 = reshape_layer(Res2781, [1, 4], Res31071), 
LZer42655 = zero_padding1D_layer(Res31071, 1, 0, Zer42655), 
LMax21509 = maximum_layer([[[[[[0.1918, 0.1539]], [[0.3672, 0.8905]]]]], [[[[[0.1249, 0.5931]], [[0.4463, 0.1544]]]]]], Max21509), 
LRes45897 = reshape_layer(Max21509, [1, 2, 2], Res45897), 
LRes30299 = reshape_layer(Res45897, [1, 4], Res30299), 
LZer78438 = zero_padding1D_layer(Res30299, 1, 0, Zer78438), 
LMin18421 = minimum_layer([[[[0.5343, 0.5835], [0.2436, 0.7611]]], [[[0.8726, 0.7323], [0.2556, 0.8405]]]], Min18421), 
LCon15358 = concatenate_layer([Min18421,[[[0.728, 0.2117], [0.0023, 0.2736]]]], 2, Con15358), 
LMul74486 = multiply_layer([Zer78438,Con15358], Mul74486), 
LSub65054 = subtract_layer(Zer42655,Mul74486, Sub65054), 
LZer60329 = zero_padding1D_layer(Sub65054, 1, 0, Zer60329), 
LDot72649 = dot_layer([[[0.3885, 0.5134, 0.3789], [0.5392, 0.32, 0.9338]]], [[[0.0303, 0.1946, 0.3788], [0.744, 0.8162, 0.5324]]], 1, 1, Dot72649), 
LCon16876 = concatenate_layer([Dot72649,[[[0.4567], [0.3915], [0.2353]]]], 2, Con16876), 
LAdd24804 = add_layer([Zer60329,Con16876], Add24804), 
exec_layers([LThr20779,LRes2781,LRes31071,LZer42655,LMax21509,LRes45897,LRes30299,LZer78438,LMin18421,LCon15358,LMul74486,LSub65054,LZer60329,LDot72649,LCon16876,LAdd24804],["Thr20779","Res2781","Res31071","Zer42655","Max21509","Res45897","Res30299","Zer78438","Min18421","Con15358","Mul74486","Sub65054","Zer60329","Dot72649","Con16876","Add24804"],Add24804,"Add24804")

Actual (Unparsed): [[[0.4129364, 0.5156972, 0.4342339, 0.4567000], [0.2536360, 0.3610916, 0.3648439, 0.3915000], [0.6595054, 0.3844931, 0.6396560, -0.0083408]]]

Expected (Unparsed): [[[0.41293635,0.5156971400000001,0.43423388,0.4567],[0.25363602,0.36109164000000005,0.36484392,0.3915],[0.65950539,0.38449309,0.63965595,-0.008340799999999982]]]

Actual:   [[[0.413, 0.5157, 0.4343, 0.4567], [0.2537, 0.3611, 0.3649, 0.3915], [0.6596, 0.3845, 0.6397, -0.0083]]]

Expected: [[[0.413, 0.5157, 0.4343, 0.4567], [0.2537, 0.3611, 0.3649, 0.3915], [0.6596, 0.3845, 0.6397, -0.0083]]]