import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0LST76356 = tf.keras.layers.Input(shape=([1, 1]))

LST76356 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST76356', )(in0LST76356)
Mas83337 = keras.layers.Masking(mask_value=1, name = 'Mas83337', )(LST76356)
model = tf.keras.models.Model(inputs=[in0LST76356], outputs=Mas83337)
w = model.get_layer('LST76356').get_weights() 
w[0] = np.array([[2, 5, 5, 7, 2, 10, 7, 2, 7, 4, 2, 10]])
w[1] = np.array([[3, 10, 7, 5, 8, 2, 10, 1, 1, 1, 8, 9], [6, 3, 7, 3, 8, 9, 5, 1, 7, 7, 9, 4], [4, 5, 9, 4, 2, 9, 9, 9, 8, 8, 1, 3]])
w[2] = np.array([2, 4, 6, 9, 5, 10, 10, 10, 10, 6, 4, 8])
model.get_layer('LST76356').set_weights(w) 
in0LST76356 = tf.constant([[[8]]])
print (np.array2string(model.predict([in0LST76356],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas83337.png')

LLST76356 = lstm_layer([[[8]]],[[2, 5, 5, 7, 2, 10, 7, 2, 7, 4, 2, 10]],[[3, 10, 7, 5, 8, 2, 10, 1, 1, 1, 8, 9], [6, 3, 7, 3, 8, 9, 5, 1, 7, 7, 9, 4], [4, 5, 9, 4, 2, 9, 9, 9, 8, 8, 1, 3]],[2, 4, 6, 9, 5, 10, 10, 10, 10, 6, 4, 8], LST76356), 
LMas83337 = masking_layer(LST76356, 1, Mas83337), 
exec_layers([LLST76356,LMas83337],["LST76356","Mas83337"],Mas83337,"Mas83337")

Actual (Unparsed): [[0.7615941, 0.7615942, 0.7615942]]

Expected (Unparsed): [[0.7615941495595642,0.7615941543860022,0.7615941559557649]]

Actual:   [[0.7616, 0.7616, 0.7616]]

Expected: [[0.7616, 0.7616, 0.7616]]