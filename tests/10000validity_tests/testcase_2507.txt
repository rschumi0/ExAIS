import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max57666 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Max57666 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Con32393 = tf.keras.layers.Input(shape=([11, 2, 1, 1]))
in0Min55303 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Min55303 = tf.keras.layers.Input(shape=([1, 2, 1]))

Max57666 = keras.layers.Maximum(name = 'Max57666', )([in0Max57666,in1Max57666])
Res96909 = keras.layers.Reshape((2, 1, 4), name = 'Res96909', )(Max57666)
Res55760 = keras.layers.Reshape((2, 4), name = 'Res55760', )(Res96909)
Ave22822 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='valid', name = 'Ave22822', )(Res55760)
Res50039 = keras.layers.Reshape((1, 4, 1), name = 'Res50039', )(Ave22822)
Glo4888 = keras.layers.GlobalAveragePooling2D(name = 'Glo4888', )(Res50039)
Res58328 = keras.layers.Reshape((1, 1), name = 'Res58328', )(Glo4888)
Res39613 = keras.layers.Reshape((1, 1, 1), name = 'Res39613', )(Res58328)
Res27077 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res27077', )(Res39613)
Zer31054 = keras.layers.ZeroPadding3D(padding=((10, 0), (1, 0), (0, 0)), name = 'Zer31054', )(Res27077)
Con32393 = keras.layers.Concatenate(axis=4, name = 'Con32393', )([Zer31054,in0Con32393])
Min55303 = keras.layers.Minimum(name = 'Min55303', )([in0Min55303,in1Min55303])
Res1087 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res1087', )(Min55303)
Con60176 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(11, 1, 1), padding='same', name = 'Con60176', )(Res1087)
Min29425 = keras.layers.Minimum(name = 'Min29425', )([Con32393,Con60176])
model = tf.keras.models.Model(inputs=[in0Max57666,in1Max57666,in0Con32393,in0Min55303,in1Min55303], outputs=Min29425)
w = model.get_layer('Con60176').get_weights() 
w[0] = np.array([[[[[0.4383], [0.5633]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con60176').set_weights(w) 
in0Max57666 = tf.constant([[[[[0.6207, 0.5115], [0.9312, 0.014]]], [[[0.2186, 0.521], [0.1078, 0.1338]]]]])
in1Max57666 = tf.constant([[[[[0.4945, 0.8107], [0.2795, 0.6617]]], [[[0.0307, 0.9379], [0.9069, 0.5769]]]]])
in0Con32393 = tf.constant([[[[[0.5606]], [[0.012]]], [[[0.6276]], [[0.3273]]], [[[0.3638]], [[0.6971]]], [[[0.96]], [[0.1848]]], [[[0.5922]], [[0.6705]]], [[[0.1614]], [[0.677]]], [[[0.5448]], [[0.0304]]], [[[0.4364]], [[0.7259]]], [[[0.8626]], [[0.7599]]], [[[0.0814]], [[0.3869]]], [[[0.3949]], [[0.7962]]]]])
in0Min55303 = tf.constant([[[[0.6657], [0.4428]]]])
in1Min55303 = tf.constant([[[[0.2952], [0.6918]]]])
print (np.array2string(model.predict([in0Max57666,in1Max57666,in0Con32393,in0Min55303,in1Min55303],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min29425.png')

LMax57666 = maximum_layer([[[[[[0.6207, 0.5115], [0.9312, 0.014]]], [[[0.2186, 0.521], [0.1078, 0.1338]]]]], [[[[[0.4945, 0.8107], [0.2795, 0.6617]]], [[[0.0307, 0.9379], [0.9069, 0.5769]]]]]], Max57666), 
LRes96909 = reshape_layer(Max57666, [2, 1, 4], Res96909), 
LRes55760 = reshape_layer(Res96909, [2, 4], Res55760), 
LAve22822 = average_pooling1D_layer(Res55760, 2, 1, false, Ave22822), 
LRes50039 = reshape_layer(Ave22822, [1, 4, 1], Res50039), 
LGlo4888 = global_average_pooling2D_layer(Res50039, Glo4888), 
LRes58328 = reshape_layer(Glo4888, [1, 1], Res58328), 
LRes39613 = reshape_layer(Res58328, [1, 1, 1], Res39613), 
LRes27077 = reshape_layer(Res39613, [1, 1, 1, 1], Res27077), 
LZer31054 = zero_padding3D_layer(Res27077, 10, 0, 1, 0, 0, 0, Zer31054), 
LCon32393 = concatenate_layer([Zer31054,[[[[[0.5606]], [[0.012]]], [[[0.6276]], [[0.3273]]], [[[0.3638]], [[0.6971]]], [[[0.96]], [[0.1848]]], [[[0.5922]], [[0.6705]]], [[[0.1614]], [[0.677]]], [[[0.5448]], [[0.0304]]], [[[0.4364]], [[0.7259]]], [[[0.8626]], [[0.7599]]], [[[0.0814]], [[0.3869]]], [[[0.3949]], [[0.7962]]]]]], 4, Con32393), 
LMin55303 = minimum_layer([[[[[0.6657], [0.4428]]]], [[[[0.2952], [0.6918]]]]], Min55303), 
LRes1087 = reshape_layer(Min55303, [1, 2, 1, 1], Res1087), 
LCon60176 = conv3D_transpose_layer(Res1087, 1, 1, 1,[[[[[0.4383], [0.5633]]]]],[0, 0], 11, 1, 1, true, Con60176), 
LMin29425 = minimum_layer([Con32393,Con60176], Min29425), 
exec_layers([LMax57666,LRes96909,LRes55760,LAve22822,LRes50039,LGlo4888,LRes58328,LRes39613,LRes27077,LZer31054,LCon32393,LMin55303,LRes1087,LCon60176,LMin29425],["Max57666","Res96909","Res55760","Ave22822","Res50039","Glo4888","Res58328","Res39613","Res27077","Zer31054","Con32393","Min55303","Res1087","Con60176","Min29425"],Min29425,"Min29425")

Actual (Unparsed): [[[[[0.0000000, 0.1662862]], [[0.0000000, 0.0120000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0,0.16628616000000002]],[[0,0.012]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]],[[[0,0]],[[0,0]]]]]

Actual:   [[[[[0, 0.1663]], [[0, 0.012]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]]]]

Expected: [[[[[0, 0.1663]], [[0, 0.012]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]]]]]