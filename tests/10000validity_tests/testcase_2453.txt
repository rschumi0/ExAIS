import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add25906 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add25906 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Zer69385 = tf.keras.layers.Input(shape=([2, 4, 4]))
in0ELU95284 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con22045 = tf.keras.layers.Input(shape=([1]))

Add25906 = keras.layers.Add(name = 'Add25906', )([in0Add25906,in1Add25906])
Res65929 = keras.layers.Reshape((2, 1), name = 'Res65929', )(Add25906)
Fla93271 = keras.layers.Flatten(name = 'Fla93271', )(Res65929)
Zer69385 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer69385', )(in0Zer69385)
Res14640 = keras.layers.Reshape((4, 6, 4, 1), name = 'Res14640', )(Zer69385)
ELU95284 = keras.layers.ELU(alpha=4.770964886360357, name = 'ELU95284', input_shape=(2, 1, 1, 1))(in0ELU95284)
Zer78140 = keras.layers.ZeroPadding3D(padding=((2, 0), (5, 0), (3, 0)), name = 'Zer78140', )(ELU95284)
Min8192 = keras.layers.Minimum(name = 'Min8192', )([Res14640,Zer78140])
Res54255 = keras.layers.Reshape((4, 6, 4), name = 'Res54255', )(Min8192)
Res57170 = keras.layers.Reshape((4, 24), name = 'Res57170', )(Res54255)
GRU60317 = keras.layers.GRU(1,reset_after=False, recurrent_activation='sigmoid', name = 'GRU60317', )(Res57170)
Con22045 = keras.layers.Concatenate(axis=1, name = 'Con22045', )([GRU60317,in0Con22045])
Ave37664 = keras.layers.Average(name = 'Ave37664', )([Fla93271,Con22045])
model = tf.keras.models.Model(inputs=[in0Add25906,in1Add25906,in0Zer69385,in0ELU95284,in0Con22045], outputs=Ave37664)
w = model.get_layer('GRU60317').get_weights() 
w[0] = np.array([[2, 5, 2], [10, 3, 6], [3, 4, 4], [6, 2, 10], [9, 9, 4], [4, 1, 6], [4, 4, 1], [1, 3, 2], [10, 8, 1], [1, 10, 2], [5, 2, 6], [7, 6, 5], [8, 3, 4], [7, 6, 4], [9, 6, 2], [1, 10, 10], [3, 5, 10], [2, 3, 1], [9, 1, 3], [3, 3, 3], [6, 2, 5], [2, 10, 9], [2, 7, 8], [8, 5, 10]])
w[1] = np.array([[5, 7, 9]])
w[2] = np.array([6, 10, 2])
model.get_layer('GRU60317').set_weights(w) 
in0Add25906 = tf.constant([[[[0.8772]], [[0.6149]]]])
in1Add25906 = tf.constant([[[[0.5347]], [[0.838]]]])
in0Zer69385 = tf.constant([[[[1.0511, 1.0924, 1.4329, 1.0542], [1.8319, 1.9289, 1.0826, 1.0816], [1.7699, 1.2749, 1.6975, 1.5924], [1.3437, 1.6311, 1.9684, 1.8845]], [[1.6967, 1.22, 1.8398, 1.3499], [1.3036, 1.4162, 1.5313, 1.5483], [1.5579, 1.1097, 1.4377, 1.5315], [1.2166, 1.1493, 1.4403, 1.4161]]]])
in0ELU95284 = tf.constant([[[[[0.7474]]], [[[0.6861]]]]])
in0Con22045 = tf.constant([[0.0243]])
print (np.array2string(model.predict([in0Add25906,in1Add25906,in0Zer69385,in0ELU95284,in0Con22045],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave37664.png')

LAdd25906 = add_layer([[[[[0.8772]], [[0.6149]]]], [[[[0.5347]], [[0.838]]]]], Add25906), 
LRes65929 = reshape_layer(Add25906, [2, 1], Res65929), 
LFla93271 = flatten_layer(Res65929, Fla93271), 
LZer69385 = zero_padding2D_layer([[[[1.0511, 1.0924, 1.4329, 1.0542], [1.8319, 1.9289, 1.0826, 1.0816], [1.7699, 1.2749, 1.6975, 1.5924], [1.3437, 1.6311, 1.9684, 1.8845]], [[1.6967, 1.22, 1.8398, 1.3499], [1.3036, 1.4162, 1.5313, 1.5483], [1.5579, 1.1097, 1.4377, 1.5315], [1.2166, 1.1493, 1.4403, 1.4161]]]], 1, 1, 1, 1, Zer69385), 
LRes14640 = reshape_layer(Zer69385, [4, 6, 4, 1], Res14640), 
LELU95284 = elu_layer([[[[[0.7474]]], [[[0.6861]]]]], 4.770964886360357, ELU95284), 
LZer78140 = zero_padding3D_layer(ELU95284, 2, 0, 5, 0, 3, 0, Zer78140), 
LMin8192 = minimum_layer([Res14640,Zer78140], Min8192), 
LRes54255 = reshape_layer(Min8192, [4, 6, 4], Res54255), 
LRes57170 = reshape_layer(Res54255, [4, 24], Res57170), 
LGRU60317 = gru_layer(Res57170,[[2, 5, 2], [10, 3, 6], [3, 4, 4], [6, 2, 10], [9, 9, 4], [4, 1, 6], [4, 4, 1], [1, 3, 2], [10, 8, 1], [1, 10, 2], [5, 2, 6], [7, 6, 5], [8, 3, 4], [7, 6, 4], [9, 6, 2], [1, 10, 10], [3, 5, 10], [2, 3, 1], [9, 1, 3], [3, 3, 3], [6, 2, 5], [2, 10, 9], [2, 7, 8], [8, 5, 10]],[[5, 7, 9]],[6, 10, 2], false, GRU60317), 
LCon22045 = concatenate_layer([GRU60317,[[0.0243]]], 1, Con22045), 
LAve37664 = average_layer([Fla93271,Con22045], Ave37664), 
exec_layers([LAdd25906,LRes65929,LFla93271,LZer69385,LRes14640,LELU95284,LZer78140,LMin8192,LRes54255,LRes57170,LGRU60317,LCon22045,LAve37664],["Add25906","Res65929","Fla93271","Zer69385","Res14640","ELU95284","Zer78140","Min8192","Res54255","Res57170","GRU60317","Con22045","Ave37664"],Ave37664,"Ave37664")

Actual (Unparsed): [[0.7106275, 0.7386000]]

Expected (Unparsed): [[0.7106274845097521,0.7386]]

Actual:   [[0.7107, 0.7386]]

Expected: [[0.7107, 0.7386]]