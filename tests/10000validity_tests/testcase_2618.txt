import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot81646 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot81646 = tf.keras.layers.Input(shape=([3, 2]))
in0Min88910 = tf.keras.layers.Input(shape=([2, 1]))
in1Min88910 = tf.keras.layers.Input(shape=([2, 1]))
in0Con74836 = tf.keras.layers.Input(shape=([3, 2]))
in0Con16950 = tf.keras.layers.Input(shape=([3, 3, 1]))
in0Min6503 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min6503 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Ave25382 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Ave25382 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0ReL65843 = tf.keras.layers.Input(shape=([2, 2]))
in0Con95544 = tf.keras.layers.Input(shape=([2, 2]))
in0Min78789 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min78789 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Ave93563 = tf.keras.layers.Input(shape=([2, 1]))
in0Con86746 = tf.keras.layers.Input(shape=([2, 1]))
in0Con22366 = tf.keras.layers.Input(shape=([2, 2]))
in0Con25226 = tf.keras.layers.Input(shape=([3, 2]))

Dot81646 = keras.layers.Dot(axes=(2, 2), name = 'Dot81646', )([in0Dot81646,in1Dot81646])
Min88910 = keras.layers.Minimum(name = 'Min88910', )([in0Min88910,in1Min88910])
Zer56502 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer56502', )(Min88910)
Con74836 = keras.layers.Concatenate(axis=2, name = 'Con74836', )([Zer56502,in0Con74836])
Min7131 = keras.layers.Minimum(name = 'Min7131', )([Dot81646,Con74836])
Res61657 = keras.layers.Reshape((3, 3, 1), name = 'Res61657', )(Min7131)
Con16950 = keras.layers.Concatenate(axis=3, name = 'Con16950', )([Res61657,in0Con16950])
Min6503 = keras.layers.Minimum(name = 'Min6503', )([in0Min6503,in1Min6503])
Zer2820 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer2820', )(Min6503)
Add90379 = keras.layers.Add(name = 'Add90379', )([Con16950,Zer2820])
ReL87038 = keras.layers.ReLU(max_value=5.423641701800044, negative_slope=1.5292952285959223, threshold=1.0115315049870621, name = 'ReL87038', )(Add90379)
Res22418 = keras.layers.Reshape((3, 6), name = 'Res22418', )(ReL87038)
Ave25382 = keras.layers.Average(name = 'Ave25382', )([in0Ave25382,in1Ave25382])
Res79162 = keras.layers.Reshape((2, 1, 4), name = 'Res79162', )(Ave25382)
Res4754 = keras.layers.Reshape((2, 4), name = 'Res4754', )(Res79162)
ReL65843 = keras.layers.ReLU(max_value=7.247095823015912, negative_slope=5.52003244919525, threshold=1.3401714486631688, name = 'ReL65843', input_shape=(2, 2))(in0ReL65843)
ELU74872 = keras.layers.ELU(alpha=-7.0034702073223, name = 'ELU74872', )(ReL65843)
Con95544 = keras.layers.Concatenate(axis=2, name = 'Con95544', )([ELU74872,in0Con95544])
Max17536 = keras.layers.Maximum(name = 'Max17536', )([Res4754,Con95544])
Min78789 = keras.layers.Minimum(name = 'Min78789', )([in0Min78789,in1Min78789])
Res25800 = keras.layers.Reshape((2, 2), name = 'Res25800', )(Min78789)
Ave93563 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave93563', )(in0Ave93563)
Zer87837 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer87837', )(Ave93563)
Con86746 = keras.layers.Concatenate(axis=2, name = 'Con86746', )([Zer87837,in0Con86746])
Add24680 = keras.layers.Add(name = 'Add24680', )([Res25800,Con86746])
Con22366 = keras.layers.Concatenate(axis=2, name = 'Con22366', )([Add24680,in0Con22366])
Min38184 = keras.layers.Minimum(name = 'Min38184', )([Max17536,Con22366])
Zer94808 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer94808', )(Min38184)
Con25226 = keras.layers.Concatenate(axis=2, name = 'Con25226', )([Zer94808,in0Con25226])
Sub44803 = keras.layers.Subtract(name = 'Sub44803', )([Res22418,Con25226])
model = tf.keras.models.Model(inputs=[in0Dot81646,in1Dot81646,in0Min88910,in1Min88910,in0Con74836,in0Con16950,in0Min6503,in1Min6503,in0Ave25382,in1Ave25382,in0ReL65843,in0Con95544,in0Min78789,in1Min78789,in0Ave93563,in0Con86746,in0Con22366,in0Con25226], outputs=Sub44803)
in0Dot81646 = tf.constant([[[0.4325, 0.9364], [0.4699, 0.7545], [0.9201, 0.5465]]])
in1Dot81646 = tf.constant([[[0.7074, 0.7776], [0.5062, 0.5302], [0.6782, 0.6817]]])
in0Min88910 = tf.constant([[[0.5432], [0.8534]]])
in1Min88910 = tf.constant([[[0.2043], [0.1785]]])
in0Con74836 = tf.constant([[[0.2581, 0.4302], [0.4354, 0.6002], [0.2114, 0.9404]]])
in0Con16950 = tf.constant([[[[0.1059], [0.7558], [0.2022]], [[0.6814], [0.224], [0.7792]], [[0.2733], [0.7347], [0.2692]]]])
in0Min6503 = tf.constant([[[[0.2117, 0.7197]], [[0.1969, 0.596]]]])
in1Min6503 = tf.constant([[[[0.0959, 0.7774]], [[0.1504, 0.047]]]])
in0Ave25382 = tf.constant([[[[[0.8026, 0.6975], [0.2287, 0.2443]]], [[[0.2669, 0.3491], [0.1376, 0.5273]]]]])
in1Ave25382 = tf.constant([[[[[0.7203, 0.2654], [0.3909, 0.3355]]], [[[0.0345, 0.2139], [0.8955, 0.1863]]]]])
in0ReL65843 = tf.constant([[[0.3039, 0.4654], [0.0011, 0.1991]]])
in0Con95544 = tf.constant([[[0.4064, 0.7246], [0.0023, 0.2098]]])
in0Min78789 = tf.constant([[[[0.0752, 0.787]], [[0.2946, 0.3431]]]])
in1Min78789 = tf.constant([[[[0.598, 0.2792]], [[0.4511, 0.8825]]]])
in0Ave93563 = tf.constant([[[1.827], [1.9226]]])
in0Con86746 = tf.constant([[[0.464], [0.7931]]])
in0Con22366 = tf.constant([[[0.8603, 0.1205], [0.7617, 0.0204]]])
in0Con25226 = tf.constant([[[0.4484, 0.4016], [0.2793, 0.5498], [0.1878, 0.6825]]])
print (np.array2string(model.predict([in0Dot81646,in1Dot81646,in0Min88910,in1Min88910,in0Con74836,in0Con16950,in0Min6503,in1Min6503,in0Ave25382,in1Ave25382,in0ReL65843,in0Con95544,in0Min78789,in1Min78789,in0Ave93563,in0Con86746,in0Con22366,in0Con25226],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub44803.png')

LDot81646 = dot_layer([[[0.4325, 0.9364], [0.4699, 0.7545], [0.9201, 0.5465]]], [[[0.7074, 0.7776], [0.5062, 0.5302], [0.6782, 0.6817]]], 2, 2, Dot81646), 
LMin88910 = minimum_layer([[[[0.5432], [0.8534]]], [[[0.2043], [0.1785]]]], Min88910), 
LZer56502 = zero_padding1D_layer(Min88910, 1, 0, Zer56502), 
LCon74836 = concatenate_layer([Zer56502,[[[0.2581, 0.4302], [0.4354, 0.6002], [0.2114, 0.9404]]]], 2, Con74836), 
LMin7131 = minimum_layer([Dot81646,Con74836], Min7131), 
LRes61657 = reshape_layer(Min7131, [3, 3, 1], Res61657), 
LCon16950 = concatenate_layer([Res61657,[[[[0.1059], [0.7558], [0.2022]], [[0.6814], [0.224], [0.7792]], [[0.2733], [0.7347], [0.2692]]]]], 3, Con16950), 
LMin6503 = minimum_layer([[[[[0.2117, 0.7197]], [[0.1969, 0.596]]]], [[[[0.0959, 0.7774]], [[0.1504, 0.047]]]]], Min6503), 
LZer2820 = zero_padding2D_layer(Min6503, 1, 0, 2, 0, Zer2820), 
LAdd90379 = add_layer([Con16950,Zer2820], Add90379), 
LReL87038 = relu_layer(Add90379, 5.423641701800044, 1.5292952285959223, 1.0115315049870621, ReL87038), 
LRes22418 = reshape_layer(ReL87038, [3, 6], Res22418), 
LAve25382 = average_layer([[[[[[0.8026, 0.6975], [0.2287, 0.2443]]], [[[0.2669, 0.3491], [0.1376, 0.5273]]]]], [[[[[0.7203, 0.2654], [0.3909, 0.3355]]], [[[0.0345, 0.2139], [0.8955, 0.1863]]]]]], Ave25382), 
LRes79162 = reshape_layer(Ave25382, [2, 1, 4], Res79162), 
LRes4754 = reshape_layer(Res79162, [2, 4], Res4754), 
LReL65843 = relu_layer([[[0.3039, 0.4654], [0.0011, 0.1991]]], 7.247095823015912, 5.52003244919525, 1.3401714486631688, ReL65843), 
LELU74872 = elu_layer(ReL65843, -7.0034702073223, ELU74872), 
LCon95544 = concatenate_layer([ELU74872,[[[0.4064, 0.7246], [0.0023, 0.2098]]]], 2, Con95544), 
LMax17536 = maximum_layer([Res4754,Con95544], Max17536), 
LMin78789 = minimum_layer([[[[[0.0752, 0.787]], [[0.2946, 0.3431]]]], [[[[0.598, 0.2792]], [[0.4511, 0.8825]]]]], Min78789), 
LRes25800 = reshape_layer(Min78789, [2, 2], Res25800), 
LAve93563 = average_pooling1D_layer([[[1.827], [1.9226]]], 2, Ave93563), 
LZer87837 = zero_padding1D_layer(Ave93563, 1, 0, Zer87837), 
LCon86746 = concatenate_layer([Zer87837,[[[0.464], [0.7931]]]], 2, Con86746), 
LAdd24680 = add_layer([Res25800,Con86746], Add24680), 
LCon22366 = concatenate_layer([Add24680,[[[0.8603, 0.1205], [0.7617, 0.0204]]]], 2, Con22366), 
LMin38184 = minimum_layer([Max17536,Con22366], Min38184), 
LZer94808 = zero_padding1D_layer(Min38184, 1, 0, Zer94808), 
LCon25226 = concatenate_layer([Zer94808,[[[0.4484, 0.4016], [0.2793, 0.5498], [0.1878, 0.6825]]]], 2, Con25226), 
LSub44803 = subtract_layer(Res22418,Con25226, Sub44803), 
exec_layers([LDot81646,LMin88910,LZer56502,LCon74836,LMin7131,LRes61657,LCon16950,LMin6503,LZer2820,LAdd90379,LReL87038,LRes22418,LAve25382,LRes79162,LRes4754,LReL65843,LELU74872,LCon95544,LMax17536,LMin78789,LRes25800,LAve93563,LZer87837,LCon86746,LAdd24680,LCon22366,LMin38184,LZer94808,LCon25226,LSub44803],["Dot81646","Min88910","Zer56502","Con74836","Min7131","Res61657","Con16950","Min6503","Zer2820","Add90379","ReL87038","Res22418","Ave25382","Res79162","Res4754","ReL65843","ELU74872","Con95544","Max17536","Min78789","Res25800","Ave93563","Zer87837","Con86746","Add24680","Con22366","Min38184","Zer94808","Con25226","Sub44803"],Sub44803,"Sub44803")

Actual (Unparsed): [[[-1.5469303, -1.3849779, -1.1522192, -0.3910890, -1.3374275, -1.6393068], [-1.3096953, -1.2480685, -1.2874751, -1.3248682, -0.7616879, 0.9491000], [-3.4433511, -2.2651739, -1.7401873, -0.4437571, 0.9030000, -1.7458672]]]

Expected (Unparsed): [[[-1.5469303041511664,-1.3849779394428583,-1.152219205650559,-0.3910889703783682,-1.3374274968092006,-1.639306808929071],[-1.3096952889490194,-1.2480685353859051,-1.2874751616205018,-1.3248681729456797,-0.761687895525545,0.9490999999999999],[-3.4433511058467943,-2.265173918175901,-1.7401872928259885,-0.44375709970174215,0.903,-1.7458671528691356]]]

Actual:   [[[-1.5469, -1.3849, -1.1522, -0.391, -1.3374, -1.6393], [-1.3096, -1.248, -1.2874, -1.3248, -0.7616, 0.9491], [-3.4433, -2.2651, -1.7401, -0.4437, 0.903, -1.7458]]]

Expected: [[[-1.5469, -1.3849, -1.1522, -0.391, -1.3374, -1.6393], [-1.3096, -1.248, -1.2874, -1.3248, -0.7616, 0.9491], [-3.4433, -2.2651, -1.7401, -0.4437, 0.903, -1.7458]]]