import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul99410 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul99410 = tf.keras.layers.Input(shape=([2, 2]))

Mul99410 = keras.layers.Multiply(name = 'Mul99410', )([in0Mul99410,in1Mul99410])
Res84109 = keras.layers.Reshape((2, 2, 1), name = 'Res84109', )(Mul99410)
Glo45514 = keras.layers.GlobalMaxPool2D(name = 'Glo45514', )(Res84109)
Res43651 = keras.layers.Reshape((1, 1), name = 'Res43651', )(Glo45514)
Res86247 = keras.layers.Reshape((1, 1, 1), name = 'Res86247', )(Res43651)
Glo53345 = keras.layers.GlobalAveragePooling2D(name = 'Glo53345', )(Res86247)
Lay41619 = keras.layers.LayerNormalization(axis=1, epsilon=1.3574091145642988, name = 'Lay41619', )(Glo53345)
model = tf.keras.models.Model(inputs=[in0Mul99410,in1Mul99410], outputs=Lay41619)
in0Mul99410 = tf.constant([[[0.7848, 0.2847], [0.1901, 0.7427]]])
in1Mul99410 = tf.constant([[[0.2565, 0.4874], [0.8552, 0.0641]]])
print (np.array2string(model.predict([in0Mul99410,in1Mul99410],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Lay41619.png')

LMul99410 = multiply_layer([[[[0.7848, 0.2847], [0.1901, 0.7427]]], [[[0.2565, 0.4874], [0.8552, 0.0641]]]], Mul99410), 
LRes84109 = reshape_layer(Mul99410, [2, 2, 1], Res84109), 
LGlo45514 = global_max_pool2D_layer(Res84109, Glo45514), 
LRes43651 = reshape_layer(Glo45514, [1, 1], Res43651), 
LRes86247 = reshape_layer(Res43651, [1, 1, 1], Res86247), 
LGlo53345 = global_average_pooling2D_layer(Res86247, Glo53345), 
LLay41619 = layer_normalization_layer(Glo53345, 1, 1.3574091145642988, Lay41619), 
exec_layers([LMul99410,LRes84109,LGlo45514,LRes43651,LRes86247,LGlo53345,LLay41619],["Mul99410","Res84109","Glo45514","Res43651","Res86247","Glo53345","Lay41619"],Lay41619,"Lay41619")

Actual (Unparsed): [[0.0000000]]

Expected (Unparsed): [[0.0]]

Actual:   [[0]]

Expected: [[0]]