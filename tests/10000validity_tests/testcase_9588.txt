import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min52701 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Min52701 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Up_29944 = tf.keras.layers.Input(shape=([1, 1, 3, 1]))
in0Ave80795 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Ave80795 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Min52701 = keras.layers.Minimum(name = 'Min52701', )([in0Min52701,in1Min52701])
Res9544 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res9544', )(Min52701)
Zer22675 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (2, 0)), name = 'Zer22675', )(Res9544)
Up_29944 = keras.layers.UpSampling3D(size=(1, 2, 1), name = 'Up_29944', )(in0Up_29944)
Max48184 = keras.layers.Maximum(name = 'Max48184', )([Zer22675,Up_29944])
Ave80795 = keras.layers.Average(name = 'Ave80795', )([in0Ave80795,in1Ave80795])
Zer41486 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer41486', )(Ave80795)
Mul81142 = keras.layers.Multiply(name = 'Mul81142', )([Max48184,Zer41486])
model = tf.keras.models.Model(inputs=[in0Min52701,in1Min52701,in0Up_29944,in0Ave80795,in1Ave80795], outputs=Mul81142)
in0Min52701 = tf.constant([[[[0.2852]]]])
in1Min52701 = tf.constant([[[[0.9611]]]])
in0Up_29944 = tf.constant([[[[[1.5561], [1.496], [1.0708]]]]])
in0Ave80795 = tf.constant([[[[[0.1239], [0.6492]]]]])
in1Ave80795 = tf.constant([[[[[0.1307], [0.2055]]]]])
print (np.array2string(model.predict([in0Min52701,in1Min52701,in0Up_29944,in0Ave80795,in1Ave80795],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul81142.png')

LMin52701 = minimum_layer([[[[[0.2852]]]], [[[[0.9611]]]]], Min52701), 
LRes9544 = reshape_layer(Min52701, [1, 1, 1, 1], Res9544), 
LZer22675 = zero_padding3D_layer(Res9544, 0, 0, 1, 0, 2, 0, Zer22675), 
LUp_29944 = up_sampling3D_layer([[[[[1.5561], [1.496], [1.0708]]]]], 1, 2, 1, Up_29944), 
LMax48184 = maximum_layer([Zer22675,Up_29944], Max48184), 
LAve80795 = average_layer([[[[[[0.1239], [0.6492]]]]], [[[[[0.1307], [0.2055]]]]]], Ave80795), 
LZer41486 = zero_padding3D_layer(Ave80795, 0, 0, 1, 0, 1, 0, Zer41486), 
LMul81142 = multiply_layer([Max48184,Zer41486], Mul81142), 
exec_layers([LMin52701,LRes9544,LZer22675,LUp_29944,LMax48184,LAve80795,LZer41486,LMul81142],["Min52701","Res9544","Zer22675","Up_29944","Max48184","Ave80795","Zer41486","Mul81142"],Mul81142,"Mul81142")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.1904408], [0.4576064]]]]]

Expected (Unparsed): [[[[[0.0],[0.0],[0.0]],[[0.0],[0.1904408],[0.45760638]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0.1905], [0.4577]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0.1905], [0.4577]]]]]