import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_79358 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0Con84870 = tf.keras.layers.Input(shape=([6, 1]))
in0Zer39248 = tf.keras.layers.Input(shape=([4, 4]))

Up_79358 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_79358', )(in0Up_79358)
Thr66931 = keras.layers.ThresholdedReLU(theta=4.230063556143888, name = 'Thr66931', )(Up_79358)
Res95881 = keras.layers.Reshape((4, 3), name = 'Res95881', )(Thr66931)
Zer39465 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer39465', )(Res95881)
Con84870 = keras.layers.Concatenate(axis=2, name = 'Con84870', )([Zer39465,in0Con84870])
Zer39248 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer39248', )(in0Zer39248)
Sub958 = keras.layers.Subtract(name = 'Sub958', )([Con84870,Zer39248])
model = tf.keras.models.Model(inputs=[in0Up_79358,in0Con84870,in0Zer39248], outputs=Sub958)
in0Up_79358 = tf.constant([[[[1.1438], [1.406], [1.0781]], [[1.7323], [1.4835], [1.6085]], [[1.873], [1.8072], [1.8729]], [[1.7235], [1.2824], [1.2372]]]])
in0Con84870 = tf.constant([[[0.2943], [0.8155], [0.0013], [0.9239], [0.2977], [0.4122]]])
in0Zer39248 = tf.constant([[[1.8118, 1.3768, 1.2663, 1.5074], [1.1116, 1.3212, 1.7594, 1.9884], [1.0721, 1.3928, 1.2466, 1.7432], [1.5667, 1.8868, 1.416, 1.0742]]])
print (np.array2string(model.predict([in0Up_79358,in0Con84870,in0Zer39248],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub958.png')

LUp_79358 = up_sampling2D_layer([[[[1.1438], [1.406], [1.0781]], [[1.7323], [1.4835], [1.6085]], [[1.873], [1.8072], [1.8729]], [[1.7235], [1.2824], [1.2372]]]], 1, 1, Up_79358), 
LThr66931 = thresholded_relu_layer(Up_79358, 4.230063556143888, Thr66931), 
LRes95881 = reshape_layer(Thr66931, [4, 3], Res95881), 
LZer39465 = zero_padding1D_layer(Res95881, 2, 0, Zer39465), 
LCon84870 = concatenate_layer([Zer39465,[[[0.2943], [0.8155], [0.0013], [0.9239], [0.2977], [0.4122]]]], 2, Con84870), 
LZer39248 = zero_padding1D_layer([[[1.8118, 1.3768, 1.2663, 1.5074], [1.1116, 1.3212, 1.7594, 1.9884], [1.0721, 1.3928, 1.2466, 1.7432], [1.5667, 1.8868, 1.416, 1.0742]]], 1, 1, Zer39248), 
LSub958 = subtract_layer(Con84870,Zer39248, Sub958), 
exec_layers([LUp_79358,LThr66931,LRes95881,LZer39465,LCon84870,LZer39248,LSub958],["Up_79358","Thr66931","Res95881","Zer39465","Con84870","Zer39248","Sub958"],Sub958,"Sub958")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.2943000], [-1.8118000, -1.3767999, -1.2663000, -0.6919000], [-1.1116000, -1.3212000, -1.7594000, -1.9871000], [-1.0721000, -1.3928000, -1.2466000, -0.8192999], [-1.5667000, -1.8868001, -1.4160000, -0.7765000], [0.0000000, 0.0000000, 0.0000000, 0.4122000]]]

Expected (Unparsed): [[[0,0,0,0.2943],[-1.8118,-1.3768,-1.2663,-0.6919000000000001],[-1.1116,-1.3212,-1.7594,-1.9870999999999999],[-1.0721,-1.3928,-1.2466,-0.8193],[-1.5667,-1.8868,-1.416,-0.7765],[0,0,0,0.4122]]]

Actual:   [[[0, 0, 0, 0.2943], [-1.8118, -1.3767, -1.2663, -0.6919], [-1.1116, -1.3212, -1.7594, -1.9871], [-1.0721, -1.3928, -1.2466, -0.8192], [-1.5667, -1.8868, -1.416, -0.7765], [0, 0, 0, 0.4122]]]

Expected: [[[0, 0, 0, 0.2943], [-1.8118, -1.3768, -1.2663, -0.6919], [-1.1116, -1.3212, -1.7594, -1.987], [-1.0721, -1.3928, -1.2466, -0.8193], [-1.5667, -1.8868, -1.416, -0.7765], [0, 0, 0, 0.4122]]]