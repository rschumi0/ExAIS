import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro66008 = tf.keras.layers.Input(shape=([4, 1, 1]))
in0Glo54064 = tf.keras.layers.Input(shape=([1, 2, 2]))

Cro66008 = keras.layers.Cropping2D(cropping=((2, 1), (0, 0)), name = 'Cro66008', )(in0Cro66008)
Res59315 = keras.layers.Reshape((1, 1), name = 'Res59315', )(Cro66008)
Fla45187 = keras.layers.Flatten(name = 'Fla45187', )(Res59315)
Glo54064 = keras.layers.GlobalAveragePooling2D(name = 'Glo54064', )(in0Glo54064)
Res98202 = keras.layers.Reshape((2, 1), name = 'Res98202', )(Glo54064)
Res78799 = keras.layers.Reshape((2, 1, 1), name = 'Res78799', )(Res98202)
Res45495 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res45495', )(Res78799)
Glo70846 = keras.layers.GlobalMaxPool3D(name = 'Glo70846', )(Res45495)
Dot46433 = keras.layers.Dot(axes=(1, 1), name = 'Dot46433', )([Fla45187,Glo70846])
model = tf.keras.models.Model(inputs=[in0Cro66008,in0Glo54064], outputs=Dot46433)
in0Cro66008 = tf.constant([[[[1.1546]], [[1.8159]], [[1.9674]], [[1.3292]]]])
in0Glo54064 = tf.constant([[[[1.911, 1.864], [1.0664, 1.6055]]]])
print (np.array2string(model.predict([in0Cro66008,in0Glo54064],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot46433.png')

LCro66008 = cropping2D_layer([[[[1.1546]], [[1.8159]], [[1.9674]], [[1.3292]]]], 2, 1, 0, 0, Cro66008), 
LRes59315 = reshape_layer(Cro66008, [1, 1], Res59315), 
LFla45187 = flatten_layer(Res59315, Fla45187), 
LGlo54064 = global_average_pooling2D_layer([[[[1.911, 1.864], [1.0664, 1.6055]]]], Glo54064), 
LRes98202 = reshape_layer(Glo54064, [2, 1], Res98202), 
LRes78799 = reshape_layer(Res98202, [2, 1, 1], Res78799), 
LRes45495 = reshape_layer(Res78799, [2, 1, 1, 1], Res45495), 
LGlo70846 = global_max_pool3D_layer(Res45495, Glo70846), 
LDot46433 = dot_layer(Fla45187,Glo70846, 1, 1, Dot46433), 
exec_layers([LCro66008,LRes59315,LFla45187,LGlo54064,LRes98202,LRes78799,LRes45495,LGlo70846,LDot46433],["Cro66008","Res59315","Fla45187","Glo54064","Res98202","Res78799","Res45495","Glo70846","Dot46433"],Dot46433,"Dot46433")

Actual (Unparsed): [[3.4129470]]

Expected (Unparsed): [[3.41294715]]

Actual:   [[3.413]]

Expected: [[3.413]]