import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave88293 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Ave88293 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Ave14311 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave14311 = tf.keras.layers.Input(shape=([2, 1]))
in0Con73969 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Add13149 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Add13149 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Max28035 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Max28035 = tf.keras.layers.Input(shape=([2, 1, 2]))

Ave88293 = keras.layers.Average(name = 'Ave88293', )([in0Ave88293,in1Ave88293])
Res39953 = keras.layers.Reshape((1, 2, 2), name = 'Res39953', )(Ave88293)
Zer61205 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer61205', )(Res39953)
Ave14311 = keras.layers.Average(name = 'Ave14311', )([in0Ave14311,in1Ave14311])
Res21317 = keras.layers.Reshape((2, 1, 1), name = 'Res21317', )(Ave14311)
Res17905 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res17905', )(Res21317)
Con73969 = keras.layers.Concatenate(axis=4, name = 'Con73969', )([Res17905,in0Con73969])
Add13149 = keras.layers.Add(name = 'Add13149', )([in0Add13149,in1Add13149])
Zer1993 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer1993', )(Add13149)
Ave64150 = keras.layers.Average(name = 'Ave64150', )([Con73969,Zer1993])
Res4194 = keras.layers.Reshape((2, 1, 2), name = 'Res4194', )(Ave64150)
Max28035 = keras.layers.Maximum(name = 'Max28035', )([in0Max28035,in1Max28035])
Sub22235 = keras.layers.Subtract(name = 'Sub22235', )([Res4194,Max28035])
Zer60403 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer60403', )(Sub22235)
Add16987 = keras.layers.Add(name = 'Add16987', )([Zer61205,Zer60403])
model = tf.keras.models.Model(inputs=[in0Ave88293,in1Ave88293,in0Ave14311,in1Ave14311,in0Con73969,in0Add13149,in1Add13149,in0Max28035,in1Max28035], outputs=Add16987)
in0Ave88293 = tf.constant([[[[[0.4023], [0.6857]], [[0.6118], [0.6378]]]]])
in1Ave88293 = tf.constant([[[[[0.2726], [0.8847]], [[0.457], [0.2109]]]]])
in0Ave14311 = tf.constant([[[0.6149], [0.3628]]])
in1Ave14311 = tf.constant([[[0.5492], [0.5341]]])
in0Con73969 = tf.constant([[[[[0.8958]]], [[[0.4439]]]]])
in0Add13149 = tf.constant([[[[[0.6569, 0.5591]]]]])
in1Add13149 = tf.constant([[[[[0.9701, 0.1764]]]]])
in0Max28035 = tf.constant([[[[0.6237, 0.8539]], [[0.0572, 0.3136]]]])
in1Max28035 = tf.constant([[[[0.0227, 0.5955]], [[0.6609, 0.695]]]])
print (np.array2string(model.predict([in0Ave88293,in1Ave88293,in0Ave14311,in1Ave14311,in0Con73969,in0Add13149,in1Add13149,in0Max28035,in1Max28035],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add16987.png')

LAve88293 = average_layer([[[[[[0.4023], [0.6857]], [[0.6118], [0.6378]]]]], [[[[[0.2726], [0.8847]], [[0.457], [0.2109]]]]]], Ave88293), 
LRes39953 = reshape_layer(Ave88293, [1, 2, 2], Res39953), 
LZer61205 = zero_padding2D_layer(Res39953, 1, 0, 1, 0, Zer61205), 
LAve14311 = average_layer([[[[0.6149], [0.3628]]], [[[0.5492], [0.5341]]]], Ave14311), 
LRes21317 = reshape_layer(Ave14311, [2, 1, 1], Res21317), 
LRes17905 = reshape_layer(Res21317, [2, 1, 1, 1], Res17905), 
LCon73969 = concatenate_layer([Res17905,[[[[[0.8958]]], [[[0.4439]]]]]], 4, Con73969), 
LAdd13149 = add_layer([[[[[[0.6569, 0.5591]]]]], [[[[[0.9701, 0.1764]]]]]], Add13149), 
LZer1993 = zero_padding3D_layer(Add13149, 1, 0, 0, 0, 0, 0, Zer1993), 
LAve64150 = average_layer([Con73969,Zer1993], Ave64150), 
LRes4194 = reshape_layer(Ave64150, [2, 1, 2], Res4194), 
LMax28035 = maximum_layer([[[[[0.6237, 0.8539]], [[0.0572, 0.3136]]]], [[[[0.0227, 0.5955]], [[0.6609, 0.695]]]]], Max28035), 
LSub22235 = subtract_layer(Res4194,Max28035, Sub22235), 
LZer60403 = zero_padding2D_layer(Sub22235, 0, 0, 2, 0, Zer60403), 
LAdd16987 = add_layer([Zer61205,Zer60403], Add16987), 
exec_layers([LAve88293,LRes39953,LZer61205,LAve14311,LRes21317,LRes17905,LCon73969,LAdd13149,LZer1993,LAve64150,LRes4194,LMax28035,LSub22235,LZer60403,LAdd16987],["Ave88293","Res39953","Zer61205","Ave14311","Res21317","Res17905","Con73969","Add13149","Zer1993","Ave64150","Res4194","Max28035","Sub22235","Zer60403","Add16987"],Add16987,"Add16987")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.3326750, -0.4060000]], [[0.0000000, 0.0000000], [0.3374500, 0.7852000], [0.9112250, 0.3190500]]]]

Expected (Unparsed): [[[[0,0],[0,0],[-0.33267500000000005,-0.40599999999999997]],[[0,0],[0.33745,0.7852],[0.911225,0.31905000000000006]]]]

Actual:   [[[[0, 0], [0, 0], [-0.3326, -0.406]], [[0, 0], [0.3375, 0.7852], [0.9113, 0.3191]]]]

Expected: [[[[0, 0], [0, 0], [-0.3326, -0.4059]], [[0, 0], [0.3375, 0.7852], [0.9113, 0.3191]]]]