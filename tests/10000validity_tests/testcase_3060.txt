import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub57664 = tf.keras.layers.Input(shape=([3, 2, 2]))
in1Sub57664 = tf.keras.layers.Input(shape=([3, 2, 2]))

Sub57664 = keras.layers.Subtract(name = 'Sub57664', )([in0Sub57664,in1Sub57664])
Res27257 = keras.layers.Reshape((3, 4), name = 'Res27257', )(Sub57664)
Glo19761 = keras.layers.GlobalMaxPool1D(name = 'Glo19761', )(Res27257)
Res45746 = keras.layers.Reshape((4, 1), name = 'Res45746', )(Glo19761)
Res25899 = keras.layers.Reshape((4, 1, 1), name = 'Res25899', )(Res45746)
Res89631 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res89631', )(Res25899)
Up_2053 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_2053', )(Res89631)
model = tf.keras.models.Model(inputs=[in0Sub57664,in1Sub57664], outputs=Up_2053)
in0Sub57664 = tf.constant([[[[0.3778, 0.8218], [0.7984, 0.8401]], [[0.4011, 0.0325], [0.1738, 0.6897]], [[0.6776, 0.83], [0.9948, 0.9924]]]])
in1Sub57664 = tf.constant([[[[0.7459, 0.536], [0.488, 0.2909]], [[0.551, 0.771], [0.1089, 0.4631]], [[0.3042, 0.7108], [0.3657, 0.3431]]]])
print (np.array2string(model.predict([in0Sub57664,in1Sub57664],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_2053.png')

LSub57664 = subtract_layer([[[[0.3778, 0.8218], [0.7984, 0.8401]], [[0.4011, 0.0325], [0.1738, 0.6897]], [[0.6776, 0.83], [0.9948, 0.9924]]]], [[[[0.7459, 0.536], [0.488, 0.2909]], [[0.551, 0.771], [0.1089, 0.4631]], [[0.3042, 0.7108], [0.3657, 0.3431]]]], Sub57664), 
LRes27257 = reshape_layer(Sub57664, [3, 4], Res27257), 
LGlo19761 = global_max_pool1D_layer(Res27257, Glo19761), 
LRes45746 = reshape_layer(Glo19761, [4, 1], Res45746), 
LRes25899 = reshape_layer(Res45746, [4, 1, 1], Res25899), 
LRes89631 = reshape_layer(Res25899, [4, 1, 1, 1], Res89631), 
LUp_2053 = up_sampling3D_layer(Res89631, 2, 1, 1, Up_2053), 
exec_layers([LSub57664,LRes27257,LGlo19761,LRes45746,LRes25899,LRes89631,LUp_2053],["Sub57664","Res27257","Glo19761","Res45746","Res25899","Res89631","Up_2053"],Up_2053,"Up_2053")

Actual (Unparsed): [[[[[0.3734000]]], [[[0.3734000]]], [[[0.2858000]]], [[[0.2858000]]], [[[0.6291000]]], [[[0.6291000]]], [[[0.6493000]]], [[[0.6493000]]]]]

Expected (Unparsed): [[[[[0.37339999999999995]]],[[[0.37339999999999995]]],[[[0.28579999999999994]]],[[[0.28579999999999994]]],[[[0.6291]]],[[[0.6291]]],[[[0.6493]]],[[[0.6493]]]]]

Actual:   [[[[[0.3734]]], [[[0.3734]]], [[[0.2858]]], [[[0.2858]]], [[[0.6291]]], [[[0.6291]]], [[[0.6493]]], [[[0.6493]]]]]

Expected: [[[[[0.3734]]], [[[0.3734]]], [[[0.2858]]], [[[0.2858]]], [[[0.6291]]], [[[0.6291]]], [[[0.6493]]], [[[0.6493]]]]]