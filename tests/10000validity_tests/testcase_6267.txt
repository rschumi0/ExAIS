import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU21719 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con57721 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Mul50909 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Mul50909 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Glo86138 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con71094 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave10495 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave10495 = tf.keras.layers.Input(shape=([1, 1, 2]))

ELU21719 = keras.layers.ELU(alpha=1.1060244718029253, name = 'ELU21719', input_shape=(2, 1, 1))(in0ELU21719)
Res37532 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res37532', )(ELU21719)
Zer39748 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer39748', )(Res37532)
Con57721 = keras.layers.Concatenate(axis=4, name = 'Con57721', )([Zer39748,in0Con57721])
Mul50909 = keras.layers.Multiply(name = 'Mul50909', )([in0Mul50909,in1Mul50909])
Ave73115 = keras.layers.Average(name = 'Ave73115', )([Con57721,Mul50909])
Res62790 = keras.layers.Reshape((2, 2, 2), name = 'Res62790', )(Ave73115)
Max79553 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(2, 1), padding='same', name = 'Max79553', )(Res62790)
Glo86138 = keras.layers.GlobalAveragePooling2D(name = 'Glo86138', )(in0Glo86138)
Res80048 = keras.layers.Reshape((1, 1), name = 'Res80048', )(Glo86138)
Res42333 = keras.layers.Reshape((1, 1, 1), name = 'Res42333', )(Res80048)
Con71094 = keras.layers.Concatenate(axis=3, name = 'Con71094', )([Res42333,in0Con71094])
Ave10495 = keras.layers.Average(name = 'Ave10495', )([in0Ave10495,in1Ave10495])
Sub770 = keras.layers.Subtract(name = 'Sub770', )([Con71094,Ave10495])
ELU26205 = keras.layers.ELU(alpha=-4.46678667277282, name = 'ELU26205', )(Sub770)
Zer28294 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer28294', )(ELU26205)
Sub16377 = keras.layers.Subtract(name = 'Sub16377', )([Max79553,Zer28294])
model = tf.keras.models.Model(inputs=[in0ELU21719,in0Con57721,in0Mul50909,in1Mul50909,in0Glo86138,in0Con71094,in0Ave10495,in1Ave10495], outputs=Sub16377)
in0ELU21719 = tf.constant([[[[0.7509]], [[0.3463]]]])
in0Con57721 = tf.constant([[[[[0.3001]], [[0.984]]], [[[0.1603]], [[0.0228]]]]])
in0Mul50909 = tf.constant([[[[[0.7881, 0.1927]], [[0.4033, 0.094]]], [[[0.0359, 0.5123]], [[0.0446, 0.735]]]]])
in1Mul50909 = tf.constant([[[[[0.1244, 0.6308]], [[0.5508, 0.2747]]], [[[0.1503, 0.9207]], [[0.975, 0.0122]]]]])
in0Glo86138 = tf.constant([[[[1.3989]]]])
in0Con71094 = tf.constant([[[[0.8079]]]])
in0Ave10495 = tf.constant([[[[0.0817, 0.8865]]]])
in1Ave10495 = tf.constant([[[[0.0009, 0.6816]]]])
print (np.array2string(model.predict([in0ELU21719,in0Con57721,in0Mul50909,in1Mul50909,in0Glo86138,in0Con71094,in0Ave10495,in1Ave10495],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub16377.png')

LELU21719 = elu_layer([[[[0.7509]], [[0.3463]]]], 1.1060244718029253, ELU21719), 
LRes37532 = reshape_layer(ELU21719, [2, 1, 1, 1], Res37532), 
LZer39748 = zero_padding3D_layer(Res37532, 0, 0, 1, 0, 0, 0, Zer39748), 
LCon57721 = concatenate_layer([Zer39748,[[[[[0.3001]], [[0.984]]], [[[0.1603]], [[0.0228]]]]]], 4, Con57721), 
LMul50909 = multiply_layer([[[[[[0.7881, 0.1927]], [[0.4033, 0.094]]], [[[0.0359, 0.5123]], [[0.0446, 0.735]]]]], [[[[[0.1244, 0.6308]], [[0.5508, 0.2747]]], [[[0.1503, 0.9207]], [[0.975, 0.0122]]]]]], Mul50909), 
LAve73115 = average_layer([Con57721,Mul50909], Ave73115), 
LRes62790 = reshape_layer(Ave73115, [2, 2, 2], Res62790), 
LMax79553 = max_pool2D_layer(Res62790, 2, 1, 2, 1, true, Max79553), 
LGlo86138 = global_average_pooling2D_layer([[[[1.3989]]]], Glo86138), 
LRes80048 = reshape_layer(Glo86138, [1, 1], Res80048), 
LRes42333 = reshape_layer(Res80048, [1, 1, 1], Res42333), 
LCon71094 = concatenate_layer([Res42333,[[[[0.8079]]]]], 3, Con71094), 
LAve10495 = average_layer([[[[[0.0817, 0.8865]]]], [[[[0.0009, 0.6816]]]]], Ave10495), 
LSub770 = subtract_layer(Con71094,Ave10495, Sub770), 
LELU26205 = elu_layer(Sub770, -4.46678667277282, ELU26205), 
LZer28294 = zero_padding2D_layer(ELU26205, 0, 0, 1, 0, Zer28294), 
LSub16377 = subtract_layer(Max79553,Zer28294, Sub16377), 
exec_layers([LELU21719,LRes37532,LZer39748,LCon57721,LMul50909,LAve73115,LRes62790,LMax79553,LGlo86138,LRes80048,LRes42333,LCon71094,LAve10495,LSub770,LELU26205,LZer28294,LSub16377],["ELU21719","Res37532","Zer39748","Con57721","Mul50909","Ave73115","Res62790","Max79553","Glo86138","Res80048","Res42333","Con71094","Ave10495","Sub770","ELU26205","Zer28294","Sub16377"],Sub16377,"Sub16377")

Actual (Unparsed): [[[[0.0490198, 0.3159873], [-0.8710812, 0.4810609]]]]

Expected (Unparsed): [[[[0.04901982,0.31598730499999994],[-0.8710811800000001,0.4810608999999999]]]]

Actual:   [[[[0.0491, 0.316], [-0.871, 0.4811]]]]

Expected: [[[[0.0491, 0.316], [-0.871, 0.4811]]]]