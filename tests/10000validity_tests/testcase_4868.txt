import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add32603 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add32603 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Add32603 = keras.layers.Add(name = 'Add32603', )([in0Add32603,in1Add32603])
Res51570 = keras.layers.Reshape((1, 2, 2), name = 'Res51570', )(Add32603)
Con53341 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 1), padding='valid', name = 'Con53341', )(Res51570)
Loc71218 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(1, 1), name = 'Loc71218', )(Con53341)
Cro37374 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro37374', )(Loc71218)
model = tf.keras.models.Model(inputs=[in0Add32603,in1Add32603], outputs=Cro37374)
w = model.get_layer('Con53341').get_weights() 
w[0] = np.array([[[[0.0943, 0.5818], [0.0318, 0.3805], [0.3287, 0.9889], [0.8327, 0.586]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con53341').set_weights(w) 
w = model.get_layer('Loc71218').get_weights() 
w[0] = np.array([[[0.0938, 0.7541, 0.7284, 0.5668], [0.2776, 0.3697, 0.8634, 0.5122], [0.5262, 0.4647, 0.141, 0.8983], [0.8304, 0.142, 0.7724, 0.0384]], [[0.2646, 0.2312, 0.3926, 0.4386], [0.9215, 0.787, 0.3592, 0.9379], [0.097, 0.557, 0.1527, 0.8148], [0.1831, 0.6335, 0.9134, 0.4882]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc71218').set_weights(w) 
in0Add32603 = tf.constant([[[[[0.5003], [0.893]], [[0.9589], [0.9028]]]]])
in1Add32603 = tf.constant([[[[[0.1513], [0.7299]], [[0.3097], [0.389]]]]])
print (np.array2string(model.predict([in0Add32603,in1Add32603],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro37374.png')

LAdd32603 = add_layer([[[[[[0.5003], [0.893]], [[0.9589], [0.9028]]]]], [[[[[0.1513], [0.7299]], [[0.3097], [0.389]]]]]], Add32603), 
LRes51570 = reshape_layer(Add32603, [1, 2, 2], Res51570), 
LCon53341 = conv2D_transpose_layer(Res51570, 1, 1,[[[[0.0943, 0.5818], [0.0318, 0.3805], [0.3287, 0.9889], [0.8327, 0.586]]]],[0, 0, 0, 0], 1, 1, false, Con53341), 
LLoc71218 = locally_connected2D_layer(Con53341, 1, 1,[[[0.0938, 0.7541, 0.7284, 0.5668], [0.2776, 0.3697, 0.8634, 0.5122], [0.5262, 0.4647, 0.141, 0.8983], [0.8304, 0.142, 0.7724, 0.0384]], [[0.2646, 0.2312, 0.3926, 0.4386], [0.9215, 0.787, 0.3592, 0.9379], [0.097, 0.557, 0.1527, 0.8148], [0.1831, 0.6335, 0.9134, 0.4882]]],[[[0, 0, 0, 0], [0, 0, 0, 0]]], 1, 1, Loc71218), 
LCro37374 = cropping2D_layer(Loc71218, 0, 0, 1, 0, Cro37374), 
exec_layers([LAdd32603,LRes51570,LCon53341,LLoc71218,LCro37374],["Add32603","Res51570","Con53341","Loc71218","Cro37374"],Cro37374,"Cro37374")

Actual (Unparsed): [[[[1.2170260, 2.7125747, 2.4481443, 3.1468688]]]]

Expected (Unparsed): [[[[1.217026013624,2.712574671074,2.448144326904,3.14686882159]]]]

Actual:   [[[[1.2171, 2.7126, 2.4482, 3.1469]]]]

Expected: [[[[1.2171, 2.7126, 2.4482, 3.1469]]]]