import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave85762 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave85762 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max4944 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max4944 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave85762 = keras.layers.Average(name = 'Ave85762', )([in0Ave85762,in1Ave85762])
Zer11750 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer11750', )(Ave85762)
Max4944 = keras.layers.Maximum(name = 'Max4944', )([in0Max4944,in1Max4944])
Max18159 = keras.layers.Maximum(name = 'Max18159', )([Zer11750,Max4944])
model = tf.keras.models.Model(inputs=[in0Ave85762,in1Ave85762,in0Max4944,in1Max4944], outputs=Max18159)
in0Ave85762 = tf.constant([[[[0.9602, 0.0188]]]])
in1Ave85762 = tf.constant([[[[0.2239, 0.1026]]]])
in0Max4944 = tf.constant([[[[0.2783, 0.7009], [0.719, 0.0593]], [[0.7463, 0.2099], [0.3255, 0.8187]]]])
in1Max4944 = tf.constant([[[[0.7775, 0.2938], [0.9313, 0.7787]], [[0.2697, 0.7135], [0.202, 0.7227]]]])
print (np.array2string(model.predict([in0Ave85762,in1Ave85762,in0Max4944,in1Max4944],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max18159.png')

LAve85762 = average_layer([[[[[0.9602, 0.0188]]]], [[[[0.2239, 0.1026]]]]], Ave85762), 
LZer11750 = zero_padding2D_layer(Ave85762, 1, 0, 1, 0, Zer11750), 
LMax4944 = maximum_layer([[[[[0.2783, 0.7009], [0.719, 0.0593]], [[0.7463, 0.2099], [0.3255, 0.8187]]]], [[[[0.7775, 0.2938], [0.9313, 0.7787]], [[0.2697, 0.7135], [0.202, 0.7227]]]]], Max4944), 
LMax18159 = maximum_layer([Zer11750,Max4944], Max18159), 
exec_layers([LAve85762,LZer11750,LMax4944,LMax18159],["Ave85762","Zer11750","Max4944","Max18159"],Max18159,"Max18159")

Actual (Unparsed): [[[[0.7775000, 0.7009000], [0.9313000, 0.7787000]], [[0.7463000, 0.7135000], [0.5920500, 0.8187000]]]]

Expected (Unparsed): [[[[0.7775,0.7009],[0.9313,0.7787]],[[0.7463,0.7135],[0.59205,0.8187]]]]

Actual:   [[[[0.7775, 0.7009], [0.9313, 0.7787]], [[0.7463, 0.7135], [0.5921, 0.8187]]]]

Expected: [[[[0.7775, 0.7009], [0.9313, 0.7787]], [[0.7463, 0.7135], [0.5921, 0.8187]]]]