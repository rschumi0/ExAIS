import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul29756 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Mul29756 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Mul29756 = keras.layers.Multiply(name = 'Mul29756', )([in0Mul29756,in1Mul29756])
Res73261 = keras.layers.Reshape((1, 2, 2), name = 'Res73261', )(Mul29756)
Res47884 = keras.layers.Reshape((1, 4), name = 'Res47884', )(Res73261)
LST82669 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST82669', )(Res47884)
Thr86585 = keras.layers.ThresholdedReLU(theta=3.8278765562103985, name = 'Thr86585', )(LST82669)
model = tf.keras.models.Model(inputs=[in0Mul29756,in1Mul29756], outputs=Thr86585)
w = model.get_layer('LST82669').get_weights() 
w[0] = np.array([[1, 9, 8, 10, 8, 9, 10, 4, 4, 8, 3, 1], [9, 2, 5, 8, 6, 1, 8, 8, 5, 3, 5, 8], [8, 8, 8, 2, 3, 9, 8, 8, 3, 4, 10, 2], [10, 9, 7, 7, 8, 8, 6, 8, 3, 2, 10, 3]])
w[1] = np.array([[10, 5, 9, 10, 9, 3, 6, 6, 6, 1, 8, 6], [6, 2, 10, 10, 8, 4, 3, 1, 7, 1, 6, 10], [10, 3, 2, 8, 6, 5, 7, 8, 10, 1, 9, 1]])
w[2] = np.array([7, 1, 10, 5, 2, 8, 9, 4, 6, 7, 2, 2])
model.get_layer('LST82669').set_weights(w) 
in0Mul29756 = tf.constant([[[[[0.0473, 0.0389]], [[0.616, 0.6976]]]]])
in1Mul29756 = tf.constant([[[[[0.4723, 0.6472]], [[0.2598, 0.1712]]]]])
print (np.array2string(model.predict([in0Mul29756,in1Mul29756],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr86585.png')

LMul29756 = multiply_layer([[[[[[0.0473, 0.0389]], [[0.616, 0.6976]]]]], [[[[[0.4723, 0.6472]], [[0.2598, 0.1712]]]]]], Mul29756), 
LRes73261 = reshape_layer(Mul29756, [1, 2, 2], Res73261), 
LRes47884 = reshape_layer(Res73261, [1, 4], Res47884), 
LLST82669 = lstm_layer(Res47884,[[1, 9, 8, 10, 8, 9, 10, 4, 4, 8, 3, 1], [9, 2, 5, 8, 6, 1, 8, 8, 5, 3, 5, 8], [8, 8, 8, 2, 3, 9, 8, 8, 3, 4, 10, 2], [10, 9, 7, 7, 8, 8, 6, 8, 3, 2, 10, 3]],[[10, 5, 9, 10, 9, 3, 6, 6, 6, 1, 8, 6], [6, 2, 10, 10, 8, 4, 3, 1, 7, 1, 6, 10], [10, 3, 2, 8, 6, 5, 7, 8, 10, 1, 9, 1]],[7, 1, 10, 5, 2, 8, 9, 4, 6, 7, 2, 2], LST82669), 
LThr86585 = thresholded_relu_layer(LST82669, 3.8278765562103985, Thr86585), 
exec_layers([LMul29756,LRes73261,LRes47884,LLST82669,LThr86585],["Mul29756","Res73261","Res47884","LST82669","Thr86585"],Thr86585,"Thr86585")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0,0,0]]

Actual:   [[0, 0, 0]]

Expected: [[0, 0, 0]]