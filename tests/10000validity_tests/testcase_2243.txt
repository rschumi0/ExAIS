import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo60302 = tf.keras.layers.Input(shape=([2, 2]))
in0Con18828 = tf.keras.layers.Input(shape=([4, 3]))
in0Ave24814 = tf.keras.layers.Input(shape=([2, 1]))

Glo60302 = keras.layers.GlobalMaxPool1D(name = 'Glo60302', )(in0Glo60302)
Res94743 = keras.layers.Reshape((2, 1), name = 'Res94743', )(Glo60302)
Zer53277 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer53277', )(Res94743)
Con18828 = keras.layers.Concatenate(axis=2, name = 'Con18828', )([Zer53277,in0Con18828])
Ave24814 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='same', name = 'Ave24814', )(in0Ave24814)
Res38620 = keras.layers.Reshape((2, 1, 1), name = 'Res38620', )(Ave24814)
Res83282 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res83282', )(Res38620)
Up_21101 = keras.layers.UpSampling3D(size=(1, 2, 2), name = 'Up_21101', )(Res83282)
Res71501 = keras.layers.Reshape((2, 2, 2), name = 'Res71501', )(Up_21101)
Res25715 = keras.layers.Reshape((2, 4), name = 'Res25715', )(Res71501)
Zer3063 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer3063', )(Res25715)
Min53223 = keras.layers.Minimum(name = 'Min53223', )([Con18828,Zer3063])
model = tf.keras.models.Model(inputs=[in0Glo60302,in0Con18828,in0Ave24814], outputs=Min53223)
in0Glo60302 = tf.constant([[[1.7255, 1.1343], [1.2436, 1.6336]]])
in0Con18828 = tf.constant([[[0.0929, 0.2366, 0.3041], [0.5344, 0.7328, 0.8433], [0.7327, 0.0439, 0.4188], [0.7636, 0.6335, 0.1371]]])
in0Ave24814 = tf.constant([[[1.0921], [1.9607]]])
print (np.array2string(model.predict([in0Glo60302,in0Con18828,in0Ave24814],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min53223.png')

LGlo60302 = global_max_pool1D_layer([[[1.7255, 1.1343], [1.2436, 1.6336]]], Glo60302), 
LRes94743 = reshape_layer(Glo60302, [2, 1], Res94743), 
LZer53277 = zero_padding1D_layer(Res94743, 2, 0, Zer53277), 
LCon18828 = concatenate_layer([Zer53277,[[[0.0929, 0.2366, 0.3041], [0.5344, 0.7328, 0.8433], [0.7327, 0.0439, 0.4188], [0.7636, 0.6335, 0.1371]]]], 2, Con18828), 
LAve24814 = average_pooling1D_layer([[[1.0921], [1.9607]]], 2, 1, true, Ave24814), 
LRes38620 = reshape_layer(Ave24814, [2, 1, 1], Res38620), 
LRes83282 = reshape_layer(Res38620, [2, 1, 1, 1], Res83282), 
LUp_21101 = up_sampling3D_layer(Res83282, 1, 2, 2, Up_21101), 
LRes71501 = reshape_layer(Up_21101, [2, 2, 2], Res71501), 
LRes25715 = reshape_layer(Res71501, [2, 4], Res25715), 
LZer3063 = zero_padding1D_layer(Res25715, 1, 1, Zer3063), 
LMin53223 = minimum_layer([Con18828,Zer3063], Min53223), 
exec_layers([LGlo60302,LRes94743,LZer53277,LCon18828,LAve24814,LRes38620,LRes83282,LUp_21101,LRes71501,LRes25715,LZer3063,LMin53223],["Glo60302","Res94743","Zer53277","Con18828","Ave24814","Res38620","Res83282","Up_21101","Res71501","Res25715","Zer3063","Min53223"],Min53223,"Min53223")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.5344000, 0.7328000, 0.8433000], [1.7255000, 0.7327000, 0.0439000, 0.4188000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0],[0,0.5344,0.7328,0.8433],[1.7255,0.7327,0.0439,0.4188],[0,0,0,0]]]

Actual:   [[[0, 0, 0, 0], [0, 0.5344, 0.7328, 0.8433], [1.7255, 0.7327, 0.0439, 0.4188], [0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0], [0, 0.5344, 0.7328, 0.8433], [1.7255, 0.7327, 0.0439, 0.4188], [0, 0, 0, 0]]]