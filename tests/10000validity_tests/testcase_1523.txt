import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave91338 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con6601 = tf.keras.layers.Input(shape=([1]))
in0Sub3331 = tf.keras.layers.Input(shape=([3]))
in1Sub3331 = tf.keras.layers.Input(shape=([3]))

Ave91338 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Ave91338', )(in0Ave91338)
Res91608 = keras.layers.Reshape((1, 2), name = 'Res91608', )(Ave91338)
Fla82209 = keras.layers.Flatten(name = 'Fla82209', )(Res91608)
Con6601 = keras.layers.Concatenate(axis=1, name = 'Con6601', )([Fla82209,in0Con6601])
Sub3331 = keras.layers.Subtract(name = 'Sub3331', )([in0Sub3331,in1Sub3331])
Sub32 = keras.layers.Subtract(name = 'Sub32', )([Con6601,Sub3331])
model = tf.keras.models.Model(inputs=[in0Ave91338,in0Con6601,in0Sub3331,in1Sub3331], outputs=Sub32)
in0Ave91338 = tf.constant([[[[1.8768, 1.0169]]]])
in0Con6601 = tf.constant([[0.3318]])
in0Sub3331 = tf.constant([[0.5816, 0.6673, 0.5014]])
in1Sub3331 = tf.constant([[0.2793, 0.6047, 0.402]])
print (np.array2string(model.predict([in0Ave91338,in0Con6601,in0Sub3331,in1Sub3331],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub32.png')

LAve91338 = average_pooling2D_layer([[[[1.8768, 1.0169]]]], 1, 1, 1, 1, true, Ave91338), 
LRes91608 = reshape_layer(Ave91338, [1, 2], Res91608), 
LFla82209 = flatten_layer(Res91608, Fla82209), 
LCon6601 = concatenate_layer([Fla82209,[[0.3318]]], 1, Con6601), 
LSub3331 = subtract_layer([[0.5816, 0.6673, 0.5014]], [[0.2793, 0.6047, 0.402]], Sub3331), 
LSub32 = subtract_layer(Con6601,Sub3331, Sub32), 
exec_layers([LAve91338,LRes91608,LFla82209,LCon6601,LSub3331,LSub32],["Ave91338","Res91608","Fla82209","Con6601","Sub3331","Sub32"],Sub32,"Sub32")

Actual (Unparsed): [[1.5744999, 0.9543000, 0.2324000]]

Expected (Unparsed): [[1.5745,0.9542999999999999,0.23240000000000005]]

Actual:   [[1.5745, 0.9543, 0.2324]]

Expected: [[1.5745, 0.9543, 0.2325]]