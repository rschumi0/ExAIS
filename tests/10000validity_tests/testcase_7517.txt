import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot33004 = tf.keras.layers.Input(shape=([2]))
in1Dot33004 = tf.keras.layers.Input(shape=([2]))
in0Add37600 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add37600 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Min16264 = tf.keras.layers.Input(shape=([2, 2]))
in1Min16264 = tf.keras.layers.Input(shape=([2, 2]))
in0LST28787 = tf.keras.layers.Input(shape=([2, 2]))
in0Con19351 = tf.keras.layers.Input(shape=([2, 1]))

Dot33004 = keras.layers.Dot(axes=(1, 1), name = 'Dot33004', )([in0Dot33004,in1Dot33004])
Res62075 = keras.layers.Reshape((1, 1), name = 'Res62075', )(Dot33004)
Res11139 = keras.layers.Reshape((1, 1, 1), name = 'Res11139', )(Res62075)
Res68776 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res68776', )(Res11139)
Zer84642 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer84642', )(Res68776)
Add37600 = keras.layers.Add(name = 'Add37600', )([in0Add37600,in1Add37600])
Bat84364 = keras.layers.BatchNormalization(axis=2, epsilon=0.18946699978305215,  name = 'Bat84364', )(Add37600)
Add14696 = keras.layers.Add(name = 'Add14696', )([Zer84642,Bat84364])
Res12090 = keras.layers.Reshape((1, 1, 2), name = 'Res12090', )(Add14696)
Res88117 = keras.layers.Reshape((1, 2), name = 'Res88117', )(Res12090)
Zer55613 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer55613', )(Res88117)
Min16264 = keras.layers.Minimum(name = 'Min16264', )([in0Min16264,in1Min16264])
LST28787 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST28787', )(in0LST28787)
Res7484 = keras.layers.Reshape((1, 1), name = 'Res7484', )(LST28787)
Cro32157 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro32157', )(Res7484)
Zer61839 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer61839', )(Cro32157)
Con19351 = keras.layers.Concatenate(axis=2, name = 'Con19351', )([Zer61839,in0Con19351])
Add87048 = keras.layers.Add(name = 'Add87048', )([Min16264,Con19351])
Add53150 = keras.layers.Add(name = 'Add53150', )([Zer55613,Add87048])
model = tf.keras.models.Model(inputs=[in0Dot33004,in1Dot33004,in0Add37600,in1Add37600,in0Min16264,in1Min16264,in0LST28787,in0Con19351], outputs=Add53150)
w = model.get_layer('Bat84364').get_weights() 
w[0] = np.array([0.6356])
w[1] = np.array([0.0136])
w[2] = np.array([0.3688])
w[3] = np.array([0.1261])
model.get_layer('Bat84364').set_weights(w) 
w = model.get_layer('LST28787').get_weights() 
w[0] = np.array([[10, 4, 10, 9], [8, 6, 8, 7]])
w[1] = np.array([[3, 3, 5, 6]])
w[2] = np.array([5, 1, 6, 2])
model.get_layer('LST28787').set_weights(w) 
in0Dot33004 = tf.constant([[0.6022, 0.0143]])
in1Dot33004 = tf.constant([[0.4554, 0.3049]])
in0Add37600 = tf.constant([[[[[0.4755], [0.2117]]]]])
in1Add37600 = tf.constant([[[[[0.2537], [0.4541]]]]])
in0Min16264 = tf.constant([[[0.9507, 0.9126], [0.8349, 0.9892]]])
in1Min16264 = tf.constant([[[0.7319, 0.5591], [0.3836, 0.4292]]])
in0LST28787 = tf.constant([[[10, 7], [6, 6]]])
in0Con19351 = tf.constant([[[0.8586], [0.7657]]])
print (np.array2string(model.predict([in0Dot33004,in1Dot33004,in0Add37600,in1Add37600,in0Min16264,in1Min16264,in0LST28787,in0Con19351],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add53150.png')

LDot33004 = dot_layer([[0.6022, 0.0143]], [[0.4554, 0.3049]], 1, 1, Dot33004), 
LRes62075 = reshape_layer(Dot33004, [1, 1], Res62075), 
LRes11139 = reshape_layer(Res62075, [1, 1, 1], Res11139), 
LRes68776 = reshape_layer(Res11139, [1, 1, 1, 1], Res68776), 
LZer84642 = zero_padding3D_layer(Res68776, 0, 0, 0, 0, 1, 0, Zer84642), 
LAdd37600 = add_layer([[[[[[0.4755], [0.2117]]]]], [[[[[0.2537], [0.4541]]]]]], Add37600), 
LBat84364 = batch_normalization_layer(Add37600, 2, 0.18946699978305215, [0.6356], [0.0136], [0.3688], [0.1261], Bat84364), 
LAdd14696 = add_layer([Zer84642,Bat84364], Add14696), 
LRes12090 = reshape_layer(Add14696, [1, 1, 2], Res12090), 
LRes88117 = reshape_layer(Res12090, [1, 2], Res88117), 
LZer55613 = zero_padding1D_layer(Res88117, 1, 0, Zer55613), 
LMin16264 = minimum_layer([[[[0.9507, 0.9126], [0.8349, 0.9892]]], [[[0.7319, 0.5591], [0.3836, 0.4292]]]], Min16264), 
LLST28787 = lstm_layer([[[10, 7], [6, 6]]],[[10, 4, 10, 9], [8, 6, 8, 7]],[[3, 3, 5, 6]],[5, 1, 6, 2], LST28787), 
LRes7484 = reshape_layer(LST28787, [1, 1], Res7484), 
LCro32157 = cropping1D_layer(Res7484, 0, 0, Cro32157), 
LZer61839 = zero_padding1D_layer(Cro32157, 1, 0, Zer61839), 
LCon19351 = concatenate_layer([Zer61839,[[[0.8586], [0.7657]]]], 2, Con19351), 
LAdd87048 = add_layer([Min16264,Con19351], Add87048), 
LAdd53150 = add_layer([Zer55613,Add87048], Add53150), 
exec_layers([LDot33004,LRes62075,LRes11139,LRes68776,LZer84642,LAdd37600,LBat84364,LAdd14696,LRes12090,LRes88117,LZer55613,LMin16264,LLST28787,LRes7484,LCro32157,LZer61839,LCon19351,LAdd87048,LAdd53150],["Dot33004","Res62075","Res11139","Res68776","Zer84642","Add37600","Bat84364","Add14696","Res12090","Res88117","Zer55613","Min16264","LST28787","Res7484","Cro32157","Zer61839","Con19351","Add87048","Add53150"],Add53150,"Add53150")

Actual (Unparsed): [[[0.7319000, 1.4177000], [1.7690047, 1.8231447]]]

Expected (Unparsed): [[[0.7319,1.4177],[1.7690047246377976,1.8231447134153949]]]

Actual:   [[[0.7319, 1.4177], [1.7691, 1.8232]]]

Expected: [[[0.7319, 1.4177], [1.7691, 1.8232]]]