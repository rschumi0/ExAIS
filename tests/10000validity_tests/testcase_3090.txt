import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave78356 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave78356 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con8727 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave84648 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave84648 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con16453 = tf.keras.layers.Input(shape=([3, 1]))
in0Ave56033 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Ave56033 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Dot64824 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot64824 = tf.keras.layers.Input(shape=([2, 3]))
in0Sub65054 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub65054 = tf.keras.layers.Input(shape=([2, 3]))
in0Con56594 = tf.keras.layers.Input(shape=([3, 1]))

Ave78356 = keras.layers.Average(name = 'Ave78356', )([in0Ave78356,in1Ave78356])
Res24610 = keras.layers.Reshape((1, 1), name = 'Res24610', )(Ave78356)
Con8727 = keras.layers.Concatenate(axis=2, name = 'Con8727', )([Res24610,in0Con8727])
Ave84648 = keras.layers.Average(name = 'Ave84648', )([in0Ave84648,in1Ave84648])
Res53663 = keras.layers.Reshape((2, 1), name = 'Res53663', )(Ave84648)
Sep1364 = keras.layers.SeparableConv1D(3, (1),strides=(2), padding='same', name = 'Sep1364', )(Res53663)
Min2712 = keras.layers.Minimum(name = 'Min2712', )([Con8727,Sep1364])
Zer86521 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer86521', )(Min2712)
Con16453 = keras.layers.Concatenate(axis=2, name = 'Con16453', )([Zer86521,in0Con16453])
Ave56033 = keras.layers.Average(name = 'Ave56033', )([in0Ave56033,in1Ave56033])
Res12481 = keras.layers.Reshape((2, 2, 2), name = 'Res12481', )(Ave56033)
Res4922 = keras.layers.Reshape((2, 4), name = 'Res4922', )(Res12481)
Zer38089 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer38089', )(Res4922)
Dot64824 = keras.layers.Dot(axes=(1, 1), name = 'Dot64824', )([in0Dot64824,in1Dot64824])
Sub65054 = keras.layers.Subtract(name = 'Sub65054', )([in0Sub65054,in1Sub65054])
Zer4237 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer4237', )(Sub65054)
Sub30353 = keras.layers.Subtract(name = 'Sub30353', )([Dot64824,Zer4237])
Con56594 = keras.layers.Concatenate(axis=2, name = 'Con56594', )([Sub30353,in0Con56594])
Sub50827 = keras.layers.Subtract(name = 'Sub50827', )([Zer38089,Con56594])
Add59828 = keras.layers.Add(name = 'Add59828', )([Con16453,Sub50827])
model = tf.keras.models.Model(inputs=[in0Ave78356,in1Ave78356,in0Con8727,in0Ave84648,in1Ave84648,in0Con16453,in0Ave56033,in1Ave56033,in0Dot64824,in1Dot64824,in0Sub65054,in1Sub65054,in0Con56594], outputs=Add59828)
w = model.get_layer('Sep1364').get_weights() 
w[0] = np.array([[[0.9561]]])
w[1] = np.array([[[0.6872, 0.1002, 0.0034]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep1364').set_weights(w) 
in0Ave78356 = tf.constant([[[[0.3201]]]])
in1Ave78356 = tf.constant([[[[0.19]]]])
in0Con8727 = tf.constant([[[0.9955, 0.6567]]])
in0Ave84648 = tf.constant([[[[0.5903]], [[0.112]]]])
in1Ave84648 = tf.constant([[[[0.7253]], [[0.0644]]]])
in0Con16453 = tf.constant([[[0.447], [0.2661], [0.8421]]])
in0Ave56033 = tf.constant([[[[[0.5594], [0.2445]], [[0.5203], [0.4867]]], [[[0.6899], [0.278]], [[0.9105], [0.8852]]]]])
in1Ave56033 = tf.constant([[[[[0.2078], [0.6346]], [[0.2587], [0.943]]], [[[0.7664], [0.105]], [[0.1654], [0.689]]]]])
in0Dot64824 = tf.constant([[[0.7908, 0.3352, 0.4247], [0.7813, 0.3497, 0.6266]]])
in1Dot64824 = tf.constant([[[0.7727, 0.0779, 0.7545], [0.1831, 0.8316, 0.6411]]])
in0Sub65054 = tf.constant([[[0.0251, 0.5646, 0.2831], [0.7804, 0.9474, 0.6483]]])
in1Sub65054 = tf.constant([[[0.1068, 0.6021, 0.7], [0.8353, 0.6631, 0.8039]]])
in0Con56594 = tf.constant([[[0.5354], [0.3116], [0.8237]]])
print (np.array2string(model.predict([in0Ave78356,in1Ave78356,in0Con8727,in0Ave84648,in1Ave84648,in0Con16453,in0Ave56033,in1Ave56033,in0Dot64824,in1Dot64824,in0Sub65054,in1Sub65054,in0Con56594],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add59828.png')

LAve78356 = average_layer([[[[[0.3201]]]], [[[[0.19]]]]], Ave78356), 
LRes24610 = reshape_layer(Ave78356, [1, 1], Res24610), 
LCon8727 = concatenate_layer([Res24610,[[[0.9955, 0.6567]]]], 2, Con8727), 
LAve84648 = average_layer([[[[[0.5903]], [[0.112]]]], [[[[0.7253]], [[0.0644]]]]], Ave84648), 
LRes53663 = reshape_layer(Ave84648, [2, 1], Res53663), 
LSep1364 = separable_conv1D_layer(Res53663, 1,[[[[0.9561]]],[[[0.6872, 0.1002, 0.0034]]]],[0, 0, 0], 2, true, Sep1364), 
LMin2712 = minimum_layer([Con8727,Sep1364], Min2712), 
LZer86521 = zero_padding1D_layer(Min2712, 1, 1, Zer86521), 
LCon16453 = concatenate_layer([Zer86521,[[[0.447], [0.2661], [0.8421]]]], 2, Con16453), 
LAve56033 = average_layer([[[[[[0.5594], [0.2445]], [[0.5203], [0.4867]]], [[[0.6899], [0.278]], [[0.9105], [0.8852]]]]], [[[[[0.2078], [0.6346]], [[0.2587], [0.943]]], [[[0.7664], [0.105]], [[0.1654], [0.689]]]]]], Ave56033), 
LRes12481 = reshape_layer(Ave56033, [2, 2, 2], Res12481), 
LRes4922 = reshape_layer(Res12481, [2, 4], Res4922), 
LZer38089 = zero_padding1D_layer(Res4922, 1, 0, Zer38089), 
LDot64824 = dot_layer([[[0.7908, 0.3352, 0.4247], [0.7813, 0.3497, 0.6266]]], [[[0.7727, 0.0779, 0.7545], [0.1831, 0.8316, 0.6411]]], 1, 1, Dot64824), 
LSub65054 = subtract_layer([[[0.0251, 0.5646, 0.2831], [0.7804, 0.9474, 0.6483]]], [[[0.1068, 0.6021, 0.7], [0.8353, 0.6631, 0.8039]]], Sub65054), 
LZer4237 = zero_padding1D_layer(Sub65054, 1, 0, Zer4237), 
LSub30353 = subtract_layer(Dot64824,Zer4237, Sub30353), 
LCon56594 = concatenate_layer([Sub30353,[[[0.5354], [0.3116], [0.8237]]]], 2, Con56594), 
LSub50827 = subtract_layer(Zer38089,Con56594, Sub50827), 
LAdd59828 = add_layer([Con16453,Sub50827], Add59828), 
exec_layers([LAve78356,LRes24610,LCon8727,LAve84648,LRes53663,LSep1364,LMin2712,LZer86521,LCon16453,LAve56033,LRes12481,LRes4922,LZer38089,LDot64824,LSub65054,LZer4237,LSub30353,LCon56594,LSub50827,LAdd59828],["Ave78356","Res24610","Con8727","Ave84648","Res53663","Sep1364","Min2712","Zer86521","Con16453","Ave56033","Res12481","Res4922","Zer38089","Dot64824","Sub65054","Zer4237","Sub30353","Con56594","Sub50827","Add59828"],Add59828,"Add59828")

Actual (Unparsed): [[[-0.7541072, -0.7113324, -1.0975500, -0.0884000], [0.2339109, 0.1481454, -0.5023627, 0.6693500], [0.2303538, -0.0783648, -0.3397994, 0.8055000]]]

Expected (Unparsed): [[[-0.75410719,-0.7113324,-1.0975500299999998,-0.08839999999999998],[0.23391088999999998,0.148145442516,-0.502362733228,0.66935],[0.2303538499999998,-0.07836469000000001,-0.33979941,0.8054999999999999]]]

Actual:   [[[-0.7541, -0.7113, -1.0975, -0.0884], [0.234, 0.1482, -0.5023, 0.6694], [0.2304, -0.0783, -0.3397, 0.8055]]]

Expected: [[[-0.7541, -0.7113, -1.0975, -0.0883], [0.234, 0.1482, -0.5023, 0.6694], [0.2304, -0.0783, -0.3397, 0.8055]]]