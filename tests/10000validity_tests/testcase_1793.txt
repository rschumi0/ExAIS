import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave30358 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave30358 = tf.keras.layers.Input(shape=([1, 2, 1]))

Ave30358 = keras.layers.Average(name = 'Ave30358', )([in0Ave30358,in1Ave30358])
Con39845 = keras.layers.Conv2D(4, (1, 2),strides=(1, 2), padding='valid', dilation_rate=(1, 1), name = 'Con39845', )(Ave30358)
model = tf.keras.models.Model(inputs=[in0Ave30358,in1Ave30358], outputs=Con39845)
w = model.get_layer('Con39845').get_weights() 
w[0] = np.array([[[[0.7887, 0.7306, 0.3194, 0.7042]], [[0.5403, 0.4476, 0.2807, 0.9838]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con39845').set_weights(w) 
in0Ave30358 = tf.constant([[[[0.2824], [0.9429]]]])
in1Ave30358 = tf.constant([[[[0.3782], [0.092]]]])
print (np.array2string(model.predict([in0Ave30358,in1Ave30358],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con39845.png')

LAve30358 = average_layer([[[[[0.2824], [0.9429]]]], [[[[0.3782], [0.092]]]]], Ave30358), 
LCon39845 = conv2D_layer(Ave30358, 1, 2,[[[[0.7887, 0.7306, 0.3194, 0.7042]], [[0.5403, 0.4476, 0.2807, 0.9838]]]],[0, 0, 0, 0], 1, 2, false, 1, 1, Con39845), 
exec_layers([LAve30358,LCon39845],["Ave30358","Con39845"],Con39845,"Con39845")

Actual (Unparsed): [[[[0.5400858, 0.4729278, 0.2507460, 0.7416646]]]]

Expected (Unparsed): [[[[0.5400858449999999,0.4729278,0.250746035,0.74166457]]]]

Actual:   [[[[0.5401, 0.473, 0.2508, 0.7417]]]]

Expected: [[[[0.5401, 0.473, 0.2508, 0.7417]]]]