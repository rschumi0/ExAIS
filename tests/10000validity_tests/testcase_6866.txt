import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo22414 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con11962 = tf.keras.layers.Input(shape=([1, 3]))
in0Cro72205 = tf.keras.layers.Input(shape=([4, 4]))

Glo22414 = keras.layers.GlobalMaxPool2D(name = 'Glo22414', )(in0Glo22414)
Res50615 = keras.layers.Reshape((1, 1), name = 'Res50615', )(Glo22414)
Ave45336 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave45336', )(Res50615)
Con11962 = keras.layers.Concatenate(axis=2, name = 'Con11962', )([Ave45336,in0Con11962])
Cro72205 = keras.layers.Cropping1D(cropping=((1, 1)), name = 'Cro72205', )(in0Cro72205)
Res27555 = keras.layers.Reshape((2, 4, 1), name = 'Res27555', )(Cro72205)
Con16648 = keras.layers.Conv2D(4, (2, 3),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con16648', )(Res27555)
Zer21303 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer21303', )(Con16648)
Max2989 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(1, 10), padding='valid', name = 'Max2989', )(Zer21303)
Res52370 = keras.layers.Reshape((2, 4), name = 'Res52370', )(Max2989)
Dot45277 = keras.layers.Dot(axes=(2, 2), name = 'Dot45277', )([Con11962,Res52370])
model = tf.keras.models.Model(inputs=[in0Glo22414,in0Con11962,in0Cro72205], outputs=Dot45277)
w = model.get_layer('Con16648').get_weights() 
w[0] = np.array([[[[0.8727, 0.9376, 0.0421, 0.766]], [[0.6353, 0.0489, 0.5634, 0.7575]], [[0.2106, 0.3706, 0.5271, 0.2131]]], [[[0.7165, 0.8843, 0.2804, 0.3024]], [[0.1077, 0.8685, 0.5783, 0.9569]], [[0.3319, 0.2985, 0.0703, 0.4939]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con16648').set_weights(w) 
in0Glo22414 = tf.constant([[[[1.2679], [1.2787]]]])
in0Con11962 = tf.constant([[[0.4101, 0.8608, 0.3762]]])
in0Cro72205 = tf.constant([[[1.5019, 1.1524, 1.0217, 1.9619], [1.3876, 1.039, 1.1836, 1.7047], [1.1071, 1.5468, 1.6242, 1.8522], [1.7631, 1.1447, 1.0528, 1.2367]]])
print (np.array2string(model.predict([in0Glo22414,in0Con11962,in0Cro72205],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot45277.png')

LGlo22414 = global_max_pool2D_layer([[[[1.2679], [1.2787]]]], Glo22414), 
LRes50615 = reshape_layer(Glo22414, [1, 1], Res50615), 
LAve45336 = average_pooling1D_layer(Res50615, 1, 1, false, Ave45336), 
LCon11962 = concatenate_layer([Ave45336,[[[0.4101, 0.8608, 0.3762]]]], 2, Con11962), 
LCro72205 = cropping1D_layer([[[1.5019, 1.1524, 1.0217, 1.9619], [1.3876, 1.039, 1.1836, 1.7047], [1.1071, 1.5468, 1.6242, 1.8522], [1.7631, 1.1447, 1.0528, 1.2367]]], 1, 1, Cro72205), 
LRes27555 = reshape_layer(Cro72205, [2, 4, 1], Res27555), 
LCon16648 = conv2D_layer(Res27555, 2, 3,[[[[0.8727, 0.9376, 0.0421, 0.766]], [[0.6353, 0.0489, 0.5634, 0.7575]], [[0.2106, 0.3706, 0.5271, 0.2131]]], [[[0.7165, 0.8843, 0.2804, 0.3024]], [[0.1077, 0.8685, 0.5783, 0.9569]], [[0.3319, 0.2985, 0.0703, 0.4939]]]],[0, 0, 0, 0], 1, 1, false, 1, 1, Con16648), 
LZer21303 = zero_padding2D_layer(Con16648, 1, 1, 1, 1, Zer21303), 
LMax2989 = max_pool2D_layer(Zer21303, 2, 1, 1, 10, false, Max2989), 
LRes52370 = reshape_layer(Max2989, [2, 4], Res52370), 
LDot45277 = dot_layer(Con11962,Res52370, 2, 2, Dot45277), 
exec_layers([LGlo22414,LRes50615,LAve45336,LCon11962,LCro72205,LRes27555,LCon16648,LZer21303,LMax2989,LRes52370,LDot45277],["Glo22414","Res50615","Ave45336","Con11962","Cro72205","Res27555","Con16648","Zer21303","Max2989","Res52370","Dot45277"],Dot45277,"Dot45277")

Actual (Unparsed): [[[0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0.0,0.0]]]

Actual:   [[[0, 0]]]

Expected: [[[0, 0]]]