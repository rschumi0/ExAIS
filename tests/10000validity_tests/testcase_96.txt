import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add31125 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add31125 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Min28804 = tf.keras.layers.Input(shape=([2, 1]))
in1Min28804 = tf.keras.layers.Input(shape=([2, 1]))
in0Con70548 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot76838 = tf.keras.layers.Input(shape=([3]))
in1Dot76838 = tf.keras.layers.Input(shape=([3]))
in0Con71503 = tf.keras.layers.Input(shape=([3]))

Add31125 = keras.layers.Add(name = 'Add31125', )([in0Add31125,in1Add31125])
Res33872 = keras.layers.Reshape((2, 2), name = 'Res33872', )(Add31125)
Min28804 = keras.layers.Minimum(name = 'Min28804', )([in0Min28804,in1Min28804])
Con70548 = keras.layers.Concatenate(axis=2, name = 'Con70548', )([Min28804,in0Con70548])
Sub26896 = keras.layers.Subtract(name = 'Sub26896', )([Res33872,Con70548])
Fla42536 = keras.layers.Flatten(name = 'Fla42536', )(Sub26896)
Dot76838 = keras.layers.Dot(axes=(1, 1), name = 'Dot76838', )([in0Dot76838,in1Dot76838])
Con71503 = keras.layers.Concatenate(axis=1, name = 'Con71503', )([Dot76838,in0Con71503])
Min74360 = keras.layers.Minimum(name = 'Min74360', )([Fla42536,Con71503])
model = tf.keras.models.Model(inputs=[in0Add31125,in1Add31125,in0Min28804,in1Min28804,in0Con70548,in0Dot76838,in1Dot76838,in0Con71503], outputs=Min74360)
in0Add31125 = tf.constant([[[[0.7278, 0.7363]], [[0.5057, 0.4266]]]])
in1Add31125 = tf.constant([[[[0.0176, 0.2648]], [[0.3305, 0.6763]]]])
in0Min28804 = tf.constant([[[0.8898], [0.0532]]])
in1Min28804 = tf.constant([[[0.8779], [0.6681]]])
in0Con70548 = tf.constant([[[0.8548], [0.2922]]])
in0Dot76838 = tf.constant([[0.7996, 0.5043, 0.7309]])
in1Dot76838 = tf.constant([[0.2443, 0.3743, 0.9188]])
in0Con71503 = tf.constant([[0.8493, 0.0033, 0.3536]])
print (np.array2string(model.predict([in0Add31125,in1Add31125,in0Min28804,in1Min28804,in0Con70548,in0Dot76838,in1Dot76838,in0Con71503],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min74360.png')

LAdd31125 = add_layer([[[[[0.7278, 0.7363]], [[0.5057, 0.4266]]]], [[[[0.0176, 0.2648]], [[0.3305, 0.6763]]]]], Add31125), 
LRes33872 = reshape_layer(Add31125, [2, 2], Res33872), 
LMin28804 = minimum_layer([[[[0.8898], [0.0532]]], [[[0.8779], [0.6681]]]], Min28804), 
LCon70548 = concatenate_layer([Min28804,[[[0.8548], [0.2922]]]], 2, Con70548), 
LSub26896 = subtract_layer(Res33872,Con70548, Sub26896), 
LFla42536 = flatten_layer(Sub26896, Fla42536), 
LDot76838 = dot_layer([[0.7996, 0.5043, 0.7309]], [[0.2443, 0.3743, 0.9188]], 1, 1, Dot76838), 
LCon71503 = concatenate_layer([Dot76838,[[0.8493, 0.0033, 0.3536]]], 1, Con71503), 
LMin74360 = minimum_layer([Fla42536,Con71503], Min74360), 
exec_layers([LAdd31125,LRes33872,LMin28804,LCon70548,LSub26896,LFla42536,LDot76838,LCon71503,LMin74360],["Add31125","Res33872","Min28804","Con70548","Sub26896","Fla42536","Dot76838","Con71503","Min74360"],Min74360,"Min74360")

Actual (Unparsed): [[-0.1325000, 0.1463000, 0.0033000, 0.3536000]]

Expected (Unparsed): [[-0.13250000000000006,0.14629999999999987,0.0033,0.3536]]

Actual:   [[-0.1325, 0.1463, 0.0033, 0.3536]]

Expected: [[-0.1325, 0.1463, 0.0033, 0.3536]]