import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min39691 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min39691 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con62312 = tf.keras.layers.Input(shape=([6]))
in0Con4489 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Max46184 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Max46184 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Ave16674 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave16674 = tf.keras.layers.Input(shape=([2, 1]))
in0Con23330 = tf.keras.layers.Input(shape=([2, 3]))
in0Glo23604 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con23674 = tf.keras.layers.Input(shape=([6]))

Min39691 = keras.layers.Minimum(name = 'Min39691', )([in0Min39691,in1Min39691])
Res1589 = keras.layers.Reshape((2, 1), name = 'Res1589', )(Min39691)
Fla78685 = keras.layers.Flatten(name = 'Fla78685', )(Res1589)
Con62312 = keras.layers.Concatenate(axis=1, name = 'Con62312', )([Fla78685,in0Con62312])
Con4489 = keras.layers.Conv3D(2, (1, 1, 2),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con4489', )(in0Con4489)
Max46184 = keras.layers.Maximum(name = 'Max46184', )([in0Max46184,in1Max46184])
Sub65188 = keras.layers.Subtract(name = 'Sub65188', )([Con4489,Max46184])
Res82936 = keras.layers.Reshape((1, 1, 4), name = 'Res82936', )(Sub65188)
Res56183 = keras.layers.Reshape((1, 4), name = 'Res56183', )(Res82936)
Zer43794 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer43794', )(Res56183)
Ave16674 = keras.layers.Average(name = 'Ave16674', )([in0Ave16674,in1Ave16674])
Up_12 = keras.layers.UpSampling1D(size=(1), name = 'Up_12', )(Ave16674)
Con23330 = keras.layers.Concatenate(axis=2, name = 'Con23330', )([Up_12,in0Con23330])
Ave57621 = keras.layers.Average(name = 'Ave57621', )([Zer43794,Con23330])
Fla88170 = keras.layers.Flatten(name = 'Fla88170', )(Ave57621)
Glo23604 = keras.layers.GlobalAveragePooling2D(name = 'Glo23604', )(in0Glo23604)
Con23674 = keras.layers.Concatenate(axis=1, name = 'Con23674', )([Glo23604,in0Con23674])
Mul3489 = keras.layers.Multiply(name = 'Mul3489', )([Fla88170,Con23674])
Sub2313 = keras.layers.Subtract(name = 'Sub2313', )([Con62312,Mul3489])
model = tf.keras.models.Model(inputs=[in0Min39691,in1Min39691,in0Con62312,in0Con4489,in0Max46184,in1Max46184,in0Ave16674,in1Ave16674,in0Con23330,in0Glo23604,in0Con23674], outputs=Sub2313)
w = model.get_layer('Con4489').get_weights() 
w[0] = np.array([[[[[0.6239, 0.0971], [0.3649, 0.6757]], [[0.8566, 0.7977], [0.1192, 0.8597]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con4489').set_weights(w) 
in0Min39691 = tf.constant([[[[0.4753]], [[0.357]]]])
in1Min39691 = tf.constant([[[[0.0262]], [[0.2608]]]])
in0Con62312 = tf.constant([[0.1913, 0.6705, 0.4612, 0.0743, 0.0646, 0.2551]])
in0Con4489 = tf.constant([[[[[0.4755, 0.3372], [0.9953, 0.4913]]]]])
in0Max46184 = tf.constant([[[[[0.0811, 0.2041], [0.0935, 0.2042]]]]])
in1Max46184 = tf.constant([[[[[0.6649, 0.0882], [0.2779, 0.5503]]]]])
in0Ave16674 = tf.constant([[[0.8191], [0.4983]]])
in1Ave16674 = tf.constant([[[0.2133], [0.6636]]])
in0Con23330 = tf.constant([[[0.3624, 0.736, 0.7456], [0.4611, 0.3227, 0.2265]]])
in0Glo23604 = tf.constant([[[[1.3843, 1.7227]], [[1.4803, 1.0299]]]])
in0Con23674 = tf.constant([[0.5389, 0.3668, 0.0817, 0.3103, 0.9914, 0.1768]])
print (np.array2string(model.predict([in0Min39691,in1Min39691,in0Con62312,in0Con4489,in0Max46184,in1Max46184,in0Ave16674,in1Ave16674,in0Con23330,in0Glo23604,in0Con23674],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub2313.png')

LMin39691 = minimum_layer([[[[[0.4753]], [[0.357]]]], [[[[0.0262]], [[0.2608]]]]], Min39691), 
LRes1589 = reshape_layer(Min39691, [2, 1], Res1589), 
LFla78685 = flatten_layer(Res1589, Fla78685), 
LCon62312 = concatenate_layer([Fla78685,[[0.1913, 0.6705, 0.4612, 0.0743, 0.0646, 0.2551]]], 1, Con62312), 
LCon4489 = conv3D_layer([[[[[0.4755, 0.3372], [0.9953, 0.4913]]]]], 1, 1, 2,[[[[[0.6239, 0.0971], [0.3649, 0.6757]], [[0.8566, 0.7977], [0.1192, 0.8597]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con4489), 
LMax46184 = maximum_layer([[[[[[0.0811, 0.2041], [0.0935, 0.2042]]]]], [[[[[0.6649, 0.0882], [0.2779, 0.5503]]]]]], Max46184), 
LSub65188 = subtract_layer(Con4489,Max46184, Sub65188), 
LRes82936 = reshape_layer(Sub65188, [1, 1, 4], Res82936), 
LRes56183 = reshape_layer(Res82936, [1, 4], Res56183), 
LZer43794 = zero_padding1D_layer(Res56183, 1, 0, Zer43794), 
LAve16674 = average_layer([[[[0.8191], [0.4983]]], [[[0.2133], [0.6636]]]], Ave16674), 
LUp_12 = up_sampling1D_layer(Ave16674, 1, Up_12), 
LCon23330 = concatenate_layer([Up_12,[[[0.3624, 0.736, 0.7456], [0.4611, 0.3227, 0.2265]]]], 2, Con23330), 
LAve57621 = average_layer([Zer43794,Con23330], Ave57621), 
LFla88170 = flatten_layer(Ave57621, Fla88170), 
LGlo23604 = global_average_pooling2D_layer([[[[1.3843, 1.7227]], [[1.4803, 1.0299]]]], Glo23604), 
LCon23674 = concatenate_layer([Glo23604,[[0.5389, 0.3668, 0.0817, 0.3103, 0.9914, 0.1768]]], 1, Con23674), 
LMul3489 = multiply_layer([Fla88170,Con23674], Mul3489), 
LSub2313 = subtract_layer(Con62312,Mul3489, Sub2313), 
exec_layers([LMin39691,LRes1589,LFla78685,LCon62312,LCon4489,LMax46184,LSub65188,LRes82936,LRes56183,LZer43794,LAve16674,LUp_12,LCon23330,LAve57621,LFla88170,LGlo23604,LCon23674,LMul3489,LSub2313],["Min39691","Res1589","Fla78685","Con62312","Con4489","Max46184","Sub65188","Res82936","Res56183","Zer43794","Ave16674","Up_12","Con23330","Ave57621","Fla88170","Glo23604","Con23674","Mul3489","Sub2313"],Sub2313,"Sub2313")

Actual (Unparsed): [[-0.3434766, 0.0114145, -0.0070152, 0.5337569, 0.4102643, -0.1967996, -0.3542878, 0.2458344]]

Expected (Unparsed): [[-0.34347663,0.01141443999999997,-0.007015200000000027,0.53375696,0.4102643118805,-0.19679956982650001,-0.354287834928,0.24583435046399998]]

Actual:   [[-0.3434, 0.0115, -0.007, 0.5338, 0.4103, -0.1967, -0.3542, 0.2459]]

Expected: [[-0.3434, 0.0115, -0.007, 0.5338, 0.4103, -0.1967, -0.3542, 0.2459]]