import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max87851 = tf.keras.layers.Input(shape=([1, 1]))
in1Max87851 = tf.keras.layers.Input(shape=([1, 1]))
in0Add19481 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add19481 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Max87851 = keras.layers.Maximum(name = 'Max87851', )([in0Max87851,in1Max87851])
Res52644 = keras.layers.Reshape((1, 1, 1), name = 'Res52644', )(Max87851)
Res59850 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res59850', )(Res52644)
Up_91167 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_91167', )(Res59850)
Res13003 = keras.layers.Reshape((2, 2, 2), name = 'Res13003', )(Up_91167)
Ave70408 = keras.layers.AveragePooling2D(pool_size=(2, 2), strides=(1, 1), padding='same', name = 'Ave70408', )(Res13003)
Res12831 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res12831', )(Ave70408)
Add19481 = keras.layers.Add(name = 'Add19481', )([in0Add19481,in1Add19481])
Zer3836 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer3836', )(Add19481)
Min35355 = keras.layers.Minimum(name = 'Min35355', )([Res12831,Zer3836])
model = tf.keras.models.Model(inputs=[in0Max87851,in1Max87851,in0Add19481,in1Add19481], outputs=Min35355)
in0Max87851 = tf.constant([[[0.8178]]])
in1Max87851 = tf.constant([[[0.6223]]])
in0Add19481 = tf.constant([[[[[0.0966], [0.5789]]]]])
in1Add19481 = tf.constant([[[[[0.5184], [0.2639]]]]])
print (np.array2string(model.predict([in0Max87851,in1Max87851,in0Add19481,in1Add19481],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min35355.png')

LMax87851 = maximum_layer([[[[0.8178]]], [[[0.6223]]]], Max87851), 
LRes52644 = reshape_layer(Max87851, [1, 1, 1], Res52644), 
LRes59850 = reshape_layer(Res52644, [1, 1, 1, 1], Res59850), 
LUp_91167 = up_sampling3D_layer(Res59850, 2, 2, 2, Up_91167), 
LRes13003 = reshape_layer(Up_91167, [2, 2, 2], Res13003), 
LAve70408 = average_pooling2D_layer(Res13003, 2, 2, 1, 1, true, Ave70408), 
LRes12831 = reshape_layer(Ave70408, [2, 2, 2, 1], Res12831), 
LAdd19481 = add_layer([[[[[[0.0966], [0.5789]]]]], [[[[[0.5184], [0.2639]]]]]], Add19481), 
LZer3836 = zero_padding3D_layer(Add19481, 1, 0, 1, 0, 0, 0, Zer3836), 
LMin35355 = minimum_layer([Res12831,Zer3836], Min35355), 
exec_layers([LMax87851,LRes52644,LRes59850,LUp_91167,LRes13003,LAve70408,LRes12831,LAdd19481,LZer3836,LMin35355],["Max87851","Res52644","Res59850","Up_91167","Res13003","Ave70408","Res12831","Add19481","Zer3836","Min35355"],Min35355,"Min35355")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000]], [[0.6150000], [0.8178000]]]]]

Expected (Unparsed): [[[[[0],[0]],[[0],[0]]],[[[0],[0]],[[0.615],[0.8178]]]]]

Actual:   [[[[[0], [0]], [[0], [0]]], [[[0], [0]], [[0.615], [0.8178]]]]]

Expected: [[[[[0], [0]], [[0], [0]]], [[[0], [0]], [[0.615], [0.8178]]]]]