import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub42712 = tf.keras.layers.Input(shape=([3, 2, 2]))
in1Sub42712 = tf.keras.layers.Input(shape=([3, 2, 2]))
in0Glo20461 = tf.keras.layers.Input(shape=([1, 2]))
in0Con33530 = tf.keras.layers.Input(shape=([10]))

Sub42712 = keras.layers.Subtract(name = 'Sub42712', )([in0Sub42712,in1Sub42712])
Res17665 = keras.layers.Reshape((3, 4), name = 'Res17665', )(Sub42712)
Fla46289 = keras.layers.Flatten(name = 'Fla46289', )(Res17665)
Glo20461 = keras.layers.GlobalAveragePooling1D(name = 'Glo20461', )(in0Glo20461)
Con33530 = keras.layers.Concatenate(axis=1, name = 'Con33530', )([Glo20461,in0Con33530])
Max27355 = keras.layers.Maximum(name = 'Max27355', )([Fla46289,Con33530])
Res72560 = keras.layers.Reshape((12, 1), name = 'Res72560', )(Max27355)
Res75764 = keras.layers.Reshape((12, 1, 1), name = 'Res75764', )(Res72560)
Res80466 = keras.layers.Reshape((12, 1, 1, 1), name = 'Res80466', )(Res75764)
Glo80696 = keras.layers.GlobalAveragePooling3D(name = 'Glo80696', )(Res80466)
model = tf.keras.models.Model(inputs=[in0Sub42712,in1Sub42712,in0Glo20461,in0Con33530], outputs=Glo80696)
in0Sub42712 = tf.constant([[[[0.7499, 0.2815], [0.6401, 0.8538]], [[0.9493, 0.0674], [0.9647, 0.6696]], [[0.3858, 0.2728], [0.1397, 0.6997]]]])
in1Sub42712 = tf.constant([[[[0.9953, 0.7118], [0.9564, 0.519]], [[0.6518, 0.5825], [0.1858, 0.6916]], [[0.3299, 0.4108], [0.508, 0.4342]]]])
in0Glo20461 = tf.constant([[[1.6962, 1.4702]]])
in0Con33530 = tf.constant([[0.6851, 0.399, 0.5085, 0.7503, 0.9671, 0.0465, 0.691, 0.3198, 0.9023, 0.5228]])
print (np.array2string(model.predict([in0Sub42712,in1Sub42712,in0Glo20461,in0Con33530],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo80696.png')

LSub42712 = subtract_layer([[[[0.7499, 0.2815], [0.6401, 0.8538]], [[0.9493, 0.0674], [0.9647, 0.6696]], [[0.3858, 0.2728], [0.1397, 0.6997]]]], [[[[0.9953, 0.7118], [0.9564, 0.519]], [[0.6518, 0.5825], [0.1858, 0.6916]], [[0.3299, 0.4108], [0.508, 0.4342]]]], Sub42712), 
LRes17665 = reshape_layer(Sub42712, [3, 4], Res17665), 
LFla46289 = flatten_layer(Res17665, Fla46289), 
LGlo20461 = global_average_pooling1D_layer([[[1.6962, 1.4702]]], Glo20461), 
LCon33530 = concatenate_layer([Glo20461,[[0.6851, 0.399, 0.5085, 0.7503, 0.9671, 0.0465, 0.691, 0.3198, 0.9023, 0.5228]]], 1, Con33530), 
LMax27355 = maximum_layer([Fla46289,Con33530], Max27355), 
LRes72560 = reshape_layer(Max27355, [12, 1], Res72560), 
LRes75764 = reshape_layer(Res72560, [12, 1, 1], Res75764), 
LRes80466 = reshape_layer(Res75764, [12, 1, 1, 1], Res80466), 
LGlo80696 = global_average_pooling3D_layer(Res80466, Glo80696), 
exec_layers([LSub42712,LRes17665,LFla46289,LGlo20461,LCon33530,LMax27355,LRes72560,LRes75764,LRes80466,LGlo80696],["Sub42712","Res17665","Fla46289","Glo20461","Con33530","Max27355","Res72560","Res75764","Res80466","Glo80696"],Glo80696,"Glo80696")

Actual (Unparsed): [[0.7465667]]

Expected (Unparsed): [[0.7465666666666667]]

Actual:   [[0.7466]]

Expected: [[0.7466]]