import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave47235 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Ave47235 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Ave62970 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave62970 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con91086 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Dot39772 = tf.keras.layers.Input(shape=([2]))
in1Dot39772 = tf.keras.layers.Input(shape=([2]))
in0Con28539 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add12396 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add12396 = tf.keras.layers.Input(shape=([1, 1, 2]))

Ave47235 = keras.layers.Average(name = 'Ave47235', )([in0Ave47235,in1Ave47235])
Res34699 = keras.layers.Reshape((1, 1, 2), name = 'Res34699', )(Ave47235)
Zer45809 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer45809', )(Res34699)
Ave62970 = keras.layers.Average(name = 'Ave62970', )([in0Ave62970,in1Ave62970])
Res85187 = keras.layers.Reshape((1, 1), name = 'Res85187', )(Ave62970)
Ave3189 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave3189', )(Res85187)
Res83384 = keras.layers.Reshape((1, 1, 1), name = 'Res83384', )(Ave3189)
Up_48067 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_48067', )(Res83384)
Con91086 = keras.layers.Concatenate(axis=3, name = 'Con91086', )([Up_48067,in0Con91086])
Mul21875 = keras.layers.Multiply(name = 'Mul21875', )([Zer45809,Con91086])
Res53374 = keras.layers.Reshape((2, 2), name = 'Res53374', )(Mul21875)
Dot39772 = keras.layers.Dot(axes=(1, 1), name = 'Dot39772', )([in0Dot39772,in1Dot39772])
Res31297 = keras.layers.Reshape((1, 1), name = 'Res31297', )(Dot39772)
Res99397 = keras.layers.Reshape((1, 1, 1), name = 'Res99397', )(Res31297)
Con28539 = keras.layers.Concatenate(axis=3, name = 'Con28539', )([Res99397,in0Con28539])
Add12396 = keras.layers.Add(name = 'Add12396', )([in0Add12396,in1Add12396])
Sub34422 = keras.layers.Subtract(name = 'Sub34422', )([Con28539,Add12396])
Res2510 = keras.layers.Reshape((1, 2), name = 'Res2510', )(Sub34422)
Dot39126 = keras.layers.Dot(axes=(2, 2), name = 'Dot39126', )([Res53374,Res2510])
model = tf.keras.models.Model(inputs=[in0Ave47235,in1Ave47235,in0Ave62970,in1Ave62970,in0Con91086,in0Dot39772,in1Dot39772,in0Con28539,in0Add12396,in1Add12396], outputs=Dot39126)
in0Ave47235 = tf.constant([[[[[0.4387], [0.2525]]]]])
in1Ave47235 = tf.constant([[[[[0.9812], [0.2116]]]]])
in0Ave62970 = tf.constant([[[[0.4809]]]])
in1Ave62970 = tf.constant([[[[0.4124]]]])
in0Con91086 = tf.constant([[[[0.9464]], [[0.6276]]]])
in0Dot39772 = tf.constant([[0.6808, 0.6868]])
in1Dot39772 = tf.constant([[0.2943, 0.6551]])
in0Con28539 = tf.constant([[[[0.9623]]]])
in0Add12396 = tf.constant([[[[0.537, 0.4604]]]])
in1Add12396 = tf.constant([[[[0.5778, 0.3587]]]])
print (np.array2string(model.predict([in0Ave47235,in1Ave47235,in0Ave62970,in1Ave62970,in0Con91086,in0Dot39772,in1Dot39772,in0Con28539,in0Add12396,in1Add12396],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot39126.png')

LAve47235 = average_layer([[[[[[0.4387], [0.2525]]]]], [[[[[0.9812], [0.2116]]]]]], Ave47235), 
LRes34699 = reshape_layer(Ave47235, [1, 1, 2], Res34699), 
LZer45809 = zero_padding2D_layer(Res34699, 1, 0, 0, 0, Zer45809), 
LAve62970 = average_layer([[[[[0.4809]]]], [[[[0.4124]]]]], Ave62970), 
LRes85187 = reshape_layer(Ave62970, [1, 1], Res85187), 
LAve3189 = average_pooling1D_layer(Res85187, 1, Ave3189), 
LRes83384 = reshape_layer(Ave3189, [1, 1, 1], Res83384), 
LUp_48067 = up_sampling2D_layer(Res83384, 2, 1, Up_48067), 
LCon91086 = concatenate_layer([Up_48067,[[[[0.9464]], [[0.6276]]]]], 3, Con91086), 
LMul21875 = multiply_layer([Zer45809,Con91086], Mul21875), 
LRes53374 = reshape_layer(Mul21875, [2, 2], Res53374), 
LDot39772 = dot_layer([[0.6808, 0.6868]], [[0.2943, 0.6551]], 1, 1, Dot39772), 
LRes31297 = reshape_layer(Dot39772, [1, 1], Res31297), 
LRes99397 = reshape_layer(Res31297, [1, 1, 1], Res99397), 
LCon28539 = concatenate_layer([Res99397,[[[[0.9623]]]]], 3, Con28539), 
LAdd12396 = add_layer([[[[[0.537, 0.4604]]]], [[[[0.5778, 0.3587]]]]], Add12396), 
LSub34422 = subtract_layer(Con28539,Add12396, Sub34422), 
LRes2510 = reshape_layer(Sub34422, [1, 2], Res2510), 
LDot39126 = dot_layer(Res53374,Res2510, 2, 2, Dot39126), 
exec_layers([LAve47235,LRes34699,LZer45809,LAve62970,LRes85187,LAve3189,LRes83384,LUp_48067,LCon91086,LMul21875,LRes53374,LDot39772,LRes31297,LRes99397,LCon28539,LAdd12396,LSub34422,LRes2510,LDot39126],["Ave47235","Res34699","Zer45809","Ave62970","Res85187","Ave3189","Res83384","Up_48067","Con91086","Mul21875","Res53374","Dot39772","Res31297","Res99397","Con28539","Add12396","Sub34422","Res2510","Dot39126"],Dot39126,"Dot39126")

Actual (Unparsed): [[[0.0000000], [-0.1264434]]]

Expected (Unparsed): [[[0.0],[-0.1264433611808649]]]

Actual:   [[[0], [-0.1264]]]

Expected: [[[0], [-0.1264]]]