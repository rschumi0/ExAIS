import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub91426 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in1Sub91426 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))

Sub91426 = keras.layers.Subtract(name = 'Sub91426', )([in0Sub91426,in1Sub91426])
Up_23536 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_23536', )(Sub91426)
model = tf.keras.models.Model(inputs=[in0Sub91426,in1Sub91426], outputs=Up_23536)
in0Sub91426 = tf.constant([[[[[0.9322, 0.6484], [0.0045, 0.9864]], [[0.2797, 0.5061], [0.4335, 0.7813]], [[0.5989, 0.906], [0.1765, 0.6742]]], [[[0.2555, 0.5976], [0.8012, 0.5429]], [[0.0051, 0.6291], [0.2788, 0.5619]], [[0.436, 0.4088], [0.0245, 0.8446]]], [[[0.3334, 0.6436], [0.8361, 0.9824]], [[0.1961, 0.3647], [0.1292, 0.4238]], [[0.5093, 0.8152], [0.9429, 0.0285]]]]])
in1Sub91426 = tf.constant([[[[[0.4068, 0.4495], [0.4199, 0.9359]], [[0.0368, 0.673], [0.8543, 0.0947]], [[0.2914, 0.2395], [0.9424, 0.4146]]], [[[0.5519, 0.4111], [0.5741, 0.5201]], [[0.7591, 0.09], [0.3577, 0.517]], [[0.4257, 0.1317], [0.0827, 0.0095]]], [[[0.1732, 0.963], [0.4975, 0.852]], [[0.9995, 0.4435], [0.0994, 0.7577]], [[0.7603, 0.6361], [0.1204, 0.9446]]]]])
print (np.array2string(model.predict([in0Sub91426,in1Sub91426],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_23536.png')

LSub91426 = subtract_layer([[[[[0.9322, 0.6484], [0.0045, 0.9864]], [[0.2797, 0.5061], [0.4335, 0.7813]], [[0.5989, 0.906], [0.1765, 0.6742]]], [[[0.2555, 0.5976], [0.8012, 0.5429]], [[0.0051, 0.6291], [0.2788, 0.5619]], [[0.436, 0.4088], [0.0245, 0.8446]]], [[[0.3334, 0.6436], [0.8361, 0.9824]], [[0.1961, 0.3647], [0.1292, 0.4238]], [[0.5093, 0.8152], [0.9429, 0.0285]]]]], [[[[[0.4068, 0.4495], [0.4199, 0.9359]], [[0.0368, 0.673], [0.8543, 0.0947]], [[0.2914, 0.2395], [0.9424, 0.4146]]], [[[0.5519, 0.4111], [0.5741, 0.5201]], [[0.7591, 0.09], [0.3577, 0.517]], [[0.4257, 0.1317], [0.0827, 0.0095]]], [[[0.1732, 0.963], [0.4975, 0.852]], [[0.9995, 0.4435], [0.0994, 0.7577]], [[0.7603, 0.6361], [0.1204, 0.9446]]]]], Sub91426), 
LUp_23536 = up_sampling3D_layer(Sub91426, 2, 2, 1, Up_23536), 
exec_layers([LSub91426,LUp_23536],["Sub91426","Up_23536"],Up_23536,"Up_23536")

Actual (Unparsed): [[[[[0.5254000, 0.1989000], [-0.4154000, 0.0505000]], [[0.5254000, 0.1989000], [-0.4154000, 0.0505000]], [[0.2429000, -0.1669000], [-0.4208000, 0.6866000]], [[0.2429000, -0.1669000], [-0.4208000, 0.6866000]], [[0.3075000, 0.6665000], [-0.7659000, 0.2596000]], [[0.3075000, 0.6665000], [-0.7659000, 0.2596000]]], [[[0.5254000, 0.1989000], [-0.4154000, 0.0505000]], [[0.5254000, 0.1989000], [-0.4154000, 0.0505000]], [[0.2429000, -0.1669000], [-0.4208000, 0.6866000]], [[0.2429000, -0.1669000], [-0.4208000, 0.6866000]], [[0.3075000, 0.6665000], [-0.7659000, 0.2596000]], [[0.3075000, 0.6665000], [-0.7659000, 0.2596000]]], [[[-0.2964000, 0.1865000], [0.2271000, 0.0228000]], [[-0.2964000, 0.1865000], [0.2271000, 0.0228000]], [[-0.7540000, 0.5391000], [-0.0789000, 0.0449000]], [[-0.7540000, 0.5391000], [-0.0789000, 0.0449000]], [[0.0103000, 0.2771000], [-0.0582000, 0.8351000]], [[0.0103000, 0.2771000], [-0.0582000, 0.8351000]]], [[[-0.2964000, 0.1865000], [0.2271000, 0.0228000]], [[-0.2964000, 0.1865000], [0.2271000, 0.0228000]], [[-0.7540000, 0.5391000], [-0.0789000, 0.0449000]], [[-0.7540000, 0.5391000], [-0.0789000, 0.0449000]], [[0.0103000, 0.2771000], [-0.0582000, 0.8351000]], [[0.0103000, 0.2771000], [-0.0582000, 0.8351000]]], [[[0.1602000, -0.3194000], [0.3386000, 0.1304000]], [[0.1602000, -0.3194000], [0.3386000, 0.1304000]], [[-0.8034000, -0.0788000], [0.0298000, -0.3339000]], [[-0.8034000, -0.0788000], [0.0298000, -0.3339000]], [[-0.2510000, 0.1791000], [0.8225000, -0.9161000]], [[-0.2510000, 0.1791000], [0.8225000, -0.9161000]]], [[[0.1602000, -0.3194000], [0.3386000, 0.1304000]], [[0.1602000, -0.3194000], [0.3386000, 0.1304000]], [[-0.8034000, -0.0788000], [0.0298000, -0.3339000]], [[-0.8034000, -0.0788000], [0.0298000, -0.3339000]], [[-0.2510000, 0.1791000], [0.8225000, -0.9161000]], [[-0.2510000, 0.1791000], [0.8225000, -0.9161000]]]]]

Expected (Unparsed): [[[[[0.5254000000000001,0.19889999999999997],[-0.4154,0.0505000000000001]],[[0.5254000000000001,0.19889999999999997],[-0.4154,0.0505000000000001]],[[0.2429,-0.16690000000000005],[-0.42079999999999995,0.6866]],[[0.2429,-0.16690000000000005],[-0.42079999999999995,0.6866]],[[0.3075,0.6665000000000001],[-0.7659,0.2596]],[[0.3075,0.6665000000000001],[-0.7659,0.2596]]],[[[0.5254000000000001,0.19889999999999997],[-0.4154,0.0505000000000001]],[[0.5254000000000001,0.19889999999999997],[-0.4154,0.0505000000000001]],[[0.2429,-0.16690000000000005],[-0.42079999999999995,0.6866]],[[0.2429,-0.16690000000000005],[-0.42079999999999995,0.6866]],[[0.3075,0.6665000000000001],[-0.7659,0.2596]],[[0.3075,0.6665000000000001],[-0.7659,0.2596]]],[[[-0.29639999999999994,0.1865],[0.22709999999999997,0.022800000000000042]],[[-0.29639999999999994,0.1865],[0.22709999999999997,0.022800000000000042]],[[-0.754,0.5391],[-0.07890000000000003,0.04489999999999994]],[[-0.754,0.5391],[-0.07890000000000003,0.04489999999999994]],[[0.010299999999999976,0.2771],[-0.058199999999999995,0.8351000000000001]],[[0.010299999999999976,0.2771],[-0.058199999999999995,0.8351000000000001]]],[[[-0.29639999999999994,0.1865],[0.22709999999999997,0.022800000000000042]],[[-0.29639999999999994,0.1865],[0.22709999999999997,0.022800000000000042]],[[-0.754,0.5391],[-0.07890000000000003,0.04489999999999994]],[[-0.754,0.5391],[-0.07890000000000003,0.04489999999999994]],[[0.010299999999999976,0.2771],[-0.058199999999999995,0.8351000000000001]],[[0.010299999999999976,0.2771],[-0.058199999999999995,0.8351000000000001]]],[[[0.16019999999999998,-0.3194],[0.33859999999999996,0.13040000000000007]],[[0.16019999999999998,-0.3194],[0.33859999999999996,0.13040000000000007]],[[-0.8034000000000001,-0.07879999999999998],[0.029800000000000007,-0.33390000000000003]],[[-0.8034000000000001,-0.07879999999999998],[0.029800000000000007,-0.33390000000000003]],[[-0.251,0.17910000000000004],[0.8225,-0.9161]],[[-0.251,0.17910000000000004],[0.8225,-0.9161]]],[[[0.16019999999999998,-0.3194],[0.33859999999999996,0.13040000000000007]],[[0.16019999999999998,-0.3194],[0.33859999999999996,0.13040000000000007]],[[-0.8034000000000001,-0.07879999999999998],[0.029800000000000007,-0.33390000000000003]],[[-0.8034000000000001,-0.07879999999999998],[0.029800000000000007,-0.33390000000000003]],[[-0.251,0.17910000000000004],[0.8225,-0.9161]],[[-0.251,0.17910000000000004],[0.8225,-0.9161]]]]]

Actual:   [[[[[0.5254, 0.1989], [-0.4154, 0.0505]], [[0.5254, 0.1989], [-0.4154, 0.0505]], [[0.2429, -0.1669], [-0.4208, 0.6866]], [[0.2429, -0.1669], [-0.4208, 0.6866]], [[0.3075, 0.6665], [-0.7659, 0.2596]], [[0.3075, 0.6665], [-0.7659, 0.2596]]], [[[0.5254, 0.1989], [-0.4154, 0.0505]], [[0.5254, 0.1989], [-0.4154, 0.0505]], [[0.2429, -0.1669], [-0.4208, 0.6866]], [[0.2429, -0.1669], [-0.4208, 0.6866]], [[0.3075, 0.6665], [-0.7659, 0.2596]], [[0.3075, 0.6665], [-0.7659, 0.2596]]], [[[-0.2964, 0.1865], [0.2271, 0.0228]], [[-0.2964, 0.1865], [0.2271, 0.0228]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[0.0103, 0.2771], [-0.0582, 0.8351]], [[0.0103, 0.2771], [-0.0582, 0.8351]]], [[[-0.2964, 0.1865], [0.2271, 0.0228]], [[-0.2964, 0.1865], [0.2271, 0.0228]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[0.0103, 0.2771], [-0.0582, 0.8351]], [[0.0103, 0.2771], [-0.0582, 0.8351]]], [[[0.1602, -0.3194], [0.3386, 0.1304]], [[0.1602, -0.3194], [0.3386, 0.1304]], [[-0.8034, -0.0788], [0.0298, -0.3339]], [[-0.8034, -0.0788], [0.0298, -0.3339]], [[-0.251, 0.1791], [0.8225, -0.9161]], [[-0.251, 0.1791], [0.8225, -0.9161]]], [[[0.1602, -0.3194], [0.3386, 0.1304]], [[0.1602, -0.3194], [0.3386, 0.1304]], [[-0.8034, -0.0788], [0.0298, -0.3339]], [[-0.8034, -0.0788], [0.0298, -0.3339]], [[-0.251, 0.1791], [0.8225, -0.9161]], [[-0.251, 0.1791], [0.8225, -0.9161]]]]]

Expected: [[[[[0.5255, 0.1989], [-0.4154, 0.0506]], [[0.5255, 0.1989], [-0.4154, 0.0506]], [[0.2429, -0.1669], [-0.4207, 0.6866]], [[0.2429, -0.1669], [-0.4207, 0.6866]], [[0.3075, 0.6666], [-0.7659, 0.2596]], [[0.3075, 0.6666], [-0.7659, 0.2596]]], [[[0.5255, 0.1989], [-0.4154, 0.0506]], [[0.5255, 0.1989], [-0.4154, 0.0506]], [[0.2429, -0.1669], [-0.4207, 0.6866]], [[0.2429, -0.1669], [-0.4207, 0.6866]], [[0.3075, 0.6666], [-0.7659, 0.2596]], [[0.3075, 0.6666], [-0.7659, 0.2596]]], [[[-0.2963, 0.1865], [0.2271, 0.0229]], [[-0.2963, 0.1865], [0.2271, 0.0229]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[0.0103, 0.2771], [-0.0581, 0.8352]], [[0.0103, 0.2771], [-0.0581, 0.8352]]], [[[-0.2963, 0.1865], [0.2271, 0.0229]], [[-0.2963, 0.1865], [0.2271, 0.0229]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[-0.754, 0.5391], [-0.0789, 0.0449]], [[0.0103, 0.2771], [-0.0581, 0.8352]], [[0.0103, 0.2771], [-0.0581, 0.8352]]], [[[0.1602, -0.3194], [0.3386, 0.1305]], [[0.1602, -0.3194], [0.3386, 0.1305]], [[-0.8034, -0.0787], [0.0299, -0.3339]], [[-0.8034, -0.0787], [0.0299, -0.3339]], [[-0.251, 0.1792], [0.8225, -0.9161]], [[-0.251, 0.1792], [0.8225, -0.9161]]], [[[0.1602, -0.3194], [0.3386, 0.1305]], [[0.1602, -0.3194], [0.3386, 0.1305]], [[-0.8034, -0.0787], [0.0299, -0.3339]], [[-0.8034, -0.0787], [0.0299, -0.3339]], [[-0.251, 0.1792], [0.8225, -0.9161]], [[-0.251, 0.1792], [0.8225, -0.9161]]]]]