import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sim33659 = tf.keras.layers.Input(shape=([2, 2]))
in0Con76146 = tf.keras.layers.Input(shape=([1, 3]))
in0Loc45145 = tf.keras.layers.Input(shape=([1, 2]))

Sim33659 = keras.layers.SimpleRNN(1,name = 'Sim33659', )(in0Sim33659)
Res8824 = keras.layers.Reshape((1, 1), name = 'Res8824', )(Sim33659)
Con76146 = keras.layers.Concatenate(axis=2, name = 'Con76146', )([Res8824,in0Con76146])
Loc45145 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc45145', )(in0Loc45145)
Sub57675 = keras.layers.Subtract(name = 'Sub57675', )([Con76146,Loc45145])
ELU84531 = keras.layers.ELU(alpha=2.595308135446386, name = 'ELU84531', )(Sub57675)
model = tf.keras.models.Model(inputs=[in0Sim33659,in0Con76146,in0Loc45145], outputs=ELU84531)
w = model.get_layer('Sim33659').get_weights() 
w[0] = np.array([[3], [1]])
w[1] = np.array([[1]])
w[2] = np.array([10])
model.get_layer('Sim33659').set_weights(w) 
w = model.get_layer('Loc45145').get_weights() 
w[0] = np.array([[[0.6157, 0.3765, 0.8605, 0.5652], [0.5195, 0.3299, 0.4143, 0.5271]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc45145').set_weights(w) 
in0Sim33659 = tf.constant([[[9, 8], [10, 10]]])
in0Con76146 = tf.constant([[[0.6673, 0.8316, 0.8847]]])
in0Loc45145 = tf.constant([[[0.9631, 0.5643]]])
print (np.array2string(model.predict([in0Sim33659,in0Con76146,in0Loc45145],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ELU84531.png')

LSim33659 = simple_rnn_layer([[[9, 8], [10, 10]]],[[3], [1]],[[1]],[10], Sim33659), 
LRes8824 = reshape_layer(Sim33659, [1, 1], Res8824), 
LCon76146 = concatenate_layer([Res8824,[[[0.6673, 0.8316, 0.8847]]]], 2, Con76146), 
LLoc45145 = locally_connected1D_layer([[[0.9631, 0.5643]]], 1,[[[0.6157, 0.3765, 0.8605, 0.5652], [0.5195, 0.3299, 0.4143, 0.5271]]],[[0, 0, 0, 0]], 1, Loc45145), 
LSub57675 = subtract_layer(Con76146,Loc45145, Sub57675), 
LELU84531 = elu_layer(Sub57675, 2.595308135446386, ELU84531), 
exec_layers([LSim33659,LRes8824,LCon76146,LLoc45145,LSub57675,LELU84531],["Sim33659","Res8824","Con76146","Loc45145","Sub57675","ELU84531"],ELU84531,"ELU84531")

Actual (Unparsed): [[[0.1138655, 0.1185303, -0.5351799, 0.0429133]]]

Expected (Unparsed): [[[0.11386548000000007,0.11853027999999999,-0.5351799402321283,0.04291335000000007]]]

Actual:   [[[0.1139, 0.1186, -0.5351, 0.043]]]

Expected: [[[0.1139, 0.1186, -0.5351, 0.043]]]