import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot39962 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot39962 = tf.keras.layers.Input(shape=([3, 2]))

Dot39962 = keras.layers.Dot(axes=(1, 1), name = 'Dot39962', )([in0Dot39962,in1Dot39962])
Res77849 = keras.layers.Reshape((2, 2, 1), name = 'Res77849', )(Dot39962)
Con74129 = keras.layers.Conv2DTranspose(4, (2, 1),strides=(1, 1), padding='valid', name = 'Con74129', )(Res77849)
Res14769 = keras.layers.Reshape((3, 2, 4, 1), name = 'Res14769', )(Con74129)
Glo92174 = keras.layers.GlobalMaxPool3D(name = 'Glo92174', )(Res14769)
model = tf.keras.models.Model(inputs=[in0Dot39962,in1Dot39962], outputs=Glo92174)
w = model.get_layer('Con74129').get_weights() 
w[0] = np.array([[[[0.8046], [0.3141], [0.1126], [0.0572]]], [[[0.9062], [0.5171], [0.8898], [0.164]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con74129').set_weights(w) 
in0Dot39962 = tf.constant([[[0.726, 0.1537], [0.9902, 0.0351], [0.7258, 0.1053]]])
in1Dot39962 = tf.constant([[[0.5799, 0.9109], [0.5188, 0.1963], [0.8671, 0.3912]]])
print (np.array2string(model.predict([in0Dot39962,in1Dot39962],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo92174.png')

LDot39962 = dot_layer([[[0.726, 0.1537], [0.9902, 0.0351], [0.7258, 0.1053]]], [[[0.5799, 0.9109], [0.5188, 0.1963], [0.8671, 0.3912]]], 1, 1, Dot39962), 
LRes77849 = reshape_layer(Dot39962, [2, 2, 1], Res77849), 
LCon74129 = conv2D_transpose_layer(Res77849, 2, 1,[[[[0.8046], [0.3141], [0.1126], [0.0572]]], [[[0.9062], [0.5171], [0.8898], [0.164]]]],[0, 0, 0, 0], 1, 1, false, Con74129), 
LRes14769 = reshape_layer(Con74129, [3, 2, 4, 1], Res14769), 
LGlo92174 = global_max_pool3D_layer(Res14769, Glo92174), 
exec_layers([LDot39962,LRes77849,LCon74129,LRes14769,LGlo92174],["Dot39962","Res77849","Con74129","Res14769","Glo92174"],Glo92174,"Glo92174")

Actual (Unparsed): [[1.5771858]]

Expected (Unparsed): [[1.577185789152]]

Actual:   [[1.5772]]

Expected: [[1.5772]]