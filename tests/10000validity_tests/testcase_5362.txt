import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub18833 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub18833 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Zer37745 = tf.keras.layers.Input(shape=([2, 1]))
in0Con48700 = tf.keras.layers.Input(shape=([4, 3]))
in0Ave80293 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave80293 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot60687 = tf.keras.layers.Input(shape=([3]))
in1Dot60687 = tf.keras.layers.Input(shape=([3]))
in0Con80412 = tf.keras.layers.Input(shape=([3]))
in0Con53269 = tf.keras.layers.Input(shape=([12]))

Sub18833 = keras.layers.Subtract(name = 'Sub18833', )([in0Sub18833,in1Sub18833])
Res58795 = keras.layers.Reshape((2, 4), name = 'Res58795', )(Sub18833)
Zer11704 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer11704', )(Res58795)
Zer37745 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer37745', )(in0Zer37745)
Con48700 = keras.layers.Concatenate(axis=2, name = 'Con48700', )([Zer37745,in0Con48700])
Mul3267 = keras.layers.Multiply(name = 'Mul3267', )([Zer11704,Con48700])
Fla20376 = keras.layers.Flatten(name = 'Fla20376', )(Mul3267)
Ave80293 = keras.layers.Average(name = 'Ave80293', )([in0Ave80293,in1Ave80293])
Fla15261 = keras.layers.Flatten(name = 'Fla15261', )(Ave80293)
Dot60687 = keras.layers.Dot(axes=(1, 1), name = 'Dot60687', )([in0Dot60687,in1Dot60687])
Con80412 = keras.layers.Concatenate(axis=1, name = 'Con80412', )([Dot60687,in0Con80412])
Max90322 = keras.layers.Maximum(name = 'Max90322', )([Fla15261,Con80412])
Con53269 = keras.layers.Concatenate(axis=1, name = 'Con53269', )([Max90322,in0Con53269])
Sub43131 = keras.layers.Subtract(name = 'Sub43131', )([Fla20376,Con53269])
Res81981 = keras.layers.Reshape((16, 1), name = 'Res81981', )(Sub43131)
Res52488 = keras.layers.Reshape((16, 1, 1), name = 'Res52488', )(Res81981)
Up_32168 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_32168', )(Res52488)
model = tf.keras.models.Model(inputs=[in0Sub18833,in1Sub18833,in0Zer37745,in0Con48700,in0Ave80293,in1Ave80293,in0Dot60687,in1Dot60687,in0Con80412,in0Con53269], outputs=Up_32168)
in0Sub18833 = tf.constant([[[[0.6434, 0.8594], [0.5284, 0.7629]], [[0.7696, 0.9161], [0.6146, 0.5746]]]])
in1Sub18833 = tf.constant([[[[0.6407, 0.0854], [0.47, 0.4871]], [[0.0816, 0.0458], [0.3655, 0.1106]]]])
in0Zer37745 = tf.constant([[[1.7148], [1.7727]]])
in0Con48700 = tf.constant([[[0.2522, 0.0063, 0.0342], [0.6137, 0.2595, 0.8248], [0.9781, 0.7313, 0.0277], [0.9466, 0.0484, 0.5262]]])
in0Ave80293 = tf.constant([[[0.4848, 0.1707], [0.9085, 0.0955]]])
in1Ave80293 = tf.constant([[[0.6511, 0.894], [0.2507, 0.7886]]])
in0Dot60687 = tf.constant([[0.6003, 0.2241, 0.8064]])
in1Dot60687 = tf.constant([[0.9995, 0.8683, 0.8744]])
in0Con80412 = tf.constant([[0.7056, 0.3394, 0.1106]])
in0Con53269 = tf.constant([[0.5126, 0.6503, 0.5232, 0.2686, 0.6008, 0.0277, 0.0845, 0.9752, 0.5119, 0.3245, 0.9142, 0.391]])
print (np.array2string(model.predict([in0Sub18833,in1Sub18833,in0Zer37745,in0Con48700,in0Ave80293,in1Ave80293,in0Dot60687,in1Dot60687,in0Con80412,in0Con53269],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_32168.png')

LSub18833 = subtract_layer([[[[0.6434, 0.8594], [0.5284, 0.7629]], [[0.7696, 0.9161], [0.6146, 0.5746]]]], [[[[0.6407, 0.0854], [0.47, 0.4871]], [[0.0816, 0.0458], [0.3655, 0.1106]]]], Sub18833), 
LRes58795 = reshape_layer(Sub18833, [2, 4], Res58795), 
LZer11704 = zero_padding1D_layer(Res58795, 2, 0, Zer11704), 
LZer37745 = zero_padding1D_layer([[[1.7148], [1.7727]]], 1, 1, Zer37745), 
LCon48700 = concatenate_layer([Zer37745,[[[0.2522, 0.0063, 0.0342], [0.6137, 0.2595, 0.8248], [0.9781, 0.7313, 0.0277], [0.9466, 0.0484, 0.5262]]]], 2, Con48700), 
LMul3267 = multiply_layer([Zer11704,Con48700], Mul3267), 
LFla20376 = flatten_layer(Mul3267, Fla20376), 
LAve80293 = average_layer([[[[0.4848, 0.1707], [0.9085, 0.0955]]], [[[0.6511, 0.894], [0.2507, 0.7886]]]], Ave80293), 
LFla15261 = flatten_layer(Ave80293, Fla15261), 
LDot60687 = dot_layer([[0.6003, 0.2241, 0.8064]], [[0.9995, 0.8683, 0.8744]], 1, 1, Dot60687), 
LCon80412 = concatenate_layer([Dot60687,[[0.7056, 0.3394, 0.1106]]], 1, Con80412), 
LMax90322 = maximum_layer([Fla15261,Con80412], Max90322), 
LCon53269 = concatenate_layer([Max90322,[[0.5126, 0.6503, 0.5232, 0.2686, 0.6008, 0.0277, 0.0845, 0.9752, 0.5119, 0.3245, 0.9142, 0.391]]], 1, Con53269), 
LSub43131 = subtract_layer(Fla20376,Con53269, Sub43131), 
LRes81981 = reshape_layer(Sub43131, [16, 1], Res81981), 
LRes52488 = reshape_layer(Res81981, [16, 1, 1], Res52488), 
LUp_32168 = up_sampling2D_layer(Res52488, 2, 1, Up_32168), 
exec_layers([LSub18833,LRes58795,LZer11704,LZer37745,LCon48700,LMul3267,LFla20376,LAve80293,LFla15261,LDot60687,LCon80412,LMax90322,LCon53269,LSub43131,LRes81981,LRes52488,LUp_32168],["Sub18833","Res58795","Zer11704","Zer37745","Con48700","Mul3267","Fla20376","Ave80293","Fla15261","Dot60687","Con80412","Max90322","Con53269","Sub43131","Res81981","Res52488","Up_32168"],Up_32168,"Up_32168")

Actual (Unparsed): [[[[-1.4997021]], [[-1.4997021]], [[-0.7056000]], [[-0.7056000]], [[-0.5796000]], [[-0.5796000]], [[-0.4420500]], [[-0.4420500]], [[-0.5126000]], [[-0.5126000]], [[-0.6503000]], [[-0.6503000]], [[-0.5232000]], [[-0.5232000]], [[-0.2686000]], [[-0.2686000]], [[-0.5960136]], [[-0.5960136]], [[0.7293494]], [[0.7293494]], [[-0.0417921]], [[-0.0417921]], [[-0.9675603]], [[-0.9675603]], [[-0.5119000]], [[-0.5119000]], [[0.4993260]], [[0.4993260]], [[-0.9021436]], [[-0.9021436]], [[-0.1468432]], [[-0.1468432]]]]

Expected (Unparsed): [[[[-1.4997020399999998]],[[-1.4997020399999998]],[[-0.7056]],[[-0.7056]],[[-0.5796]],[[-0.5796]],[[-0.44205]],[[-0.44205]],[[-0.5126]],[[-0.5126]],[[-0.6503]],[[-0.6503]],[[-0.5232]],[[-0.5232]],[[-0.2686]],[[-0.2686]],[[-0.5960137100000001]],[[-0.5960137100000001]],[[0.7293494]],[[0.7293494]],[[-0.04179208]],[[-0.04179208]],[[-0.9675603399999999]],[[-0.9675603399999999]],[[-0.5119]],[[-0.5119]],[[0.49932598000000006]],[[0.49932598000000006]],[[-0.9021435600000001]],[[-0.9021435600000001]],[[-0.14684320000000003]],[[-0.14684320000000003]]]]

Actual:   [[[[-1.4997]], [[-1.4997]], [[-0.7056]], [[-0.7056]], [[-0.5796]], [[-0.5796]], [[-0.442]], [[-0.442]], [[-0.5126]], [[-0.5126]], [[-0.6503]], [[-0.6503]], [[-0.5232]], [[-0.5232]], [[-0.2686]], [[-0.2686]], [[-0.596]], [[-0.596]], [[0.7294]], [[0.7294]], [[-0.0417]], [[-0.0417]], [[-0.9675]], [[-0.9675]], [[-0.5119]], [[-0.5119]], [[0.4994]], [[0.4994]], [[-0.9021]], [[-0.9021]], [[-0.1468]], [[-0.1468]]]]

Expected: [[[[-1.4997]], [[-1.4997]], [[-0.7056]], [[-0.7056]], [[-0.5796]], [[-0.5796]], [[-0.442]], [[-0.442]], [[-0.5126]], [[-0.5126]], [[-0.6503]], [[-0.6503]], [[-0.5232]], [[-0.5232]], [[-0.2686]], [[-0.2686]], [[-0.596]], [[-0.596]], [[0.7294]], [[0.7294]], [[-0.0417]], [[-0.0417]], [[-0.9675]], [[-0.9675]], [[-0.5119]], [[-0.5119]], [[0.4994]], [[0.4994]], [[-0.9021]], [[-0.9021]], [[-0.1468]], [[-0.1468]]]]