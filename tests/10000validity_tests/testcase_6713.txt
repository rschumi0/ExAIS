import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot24496 = tf.keras.layers.Input(shape=([2]))
in1Dot24496 = tf.keras.layers.Input(shape=([2]))
in0Con90358 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Dot75640 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot75640 = tf.keras.layers.Input(shape=([2, 3]))
in0Con27414 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Add22252 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add22252 = tf.keras.layers.Input(shape=([1, 2, 2]))

Dot24496 = keras.layers.Dot(axes=(1, 1), name = 'Dot24496', )([in0Dot24496,in1Dot24496])
Res10538 = keras.layers.Reshape((1, 1), name = 'Res10538', )(Dot24496)
Res34759 = keras.layers.Reshape((1, 1, 1), name = 'Res34759', )(Res10538)
Zer71935 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer71935', )(Res34759)
Con90358 = keras.layers.Concatenate(axis=3, name = 'Con90358', )([Zer71935,in0Con90358])
Dot75640 = keras.layers.Dot(axes=(2, 2), name = 'Dot75640', )([in0Dot75640,in1Dot75640])
Res41198 = keras.layers.Reshape((2, 2, 1), name = 'Res41198', )(Dot75640)
Con27414 = keras.layers.Concatenate(axis=3, name = 'Con27414', )([Res41198,in0Con27414])
Add22252 = keras.layers.Add(name = 'Add22252', )([in0Add22252,in1Add22252])
Zer14839 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer14839', )(Add22252)
Sub20285 = keras.layers.Subtract(name = 'Sub20285', )([Con27414,Zer14839])
Add51463 = keras.layers.Add(name = 'Add51463', )([Con90358,Sub20285])
model = tf.keras.models.Model(inputs=[in0Dot24496,in1Dot24496,in0Con90358,in0Dot75640,in1Dot75640,in0Con27414,in0Add22252,in1Add22252], outputs=Add51463)
in0Dot24496 = tf.constant([[0.7524, 0.7471]])
in1Dot24496 = tf.constant([[0.5739, 0.5285]])
in0Con90358 = tf.constant([[[[0.5192], [0.1752]], [[0.0268], [0.9479]]]])
in0Dot75640 = tf.constant([[[0.7838, 0.4537, 0.8074], [0.3889, 0.0548, 0.3113]]])
in1Dot75640 = tf.constant([[[0.1018, 0.3896, 0.5888], [0.7376, 0.1143, 0.4876]]])
in0Con27414 = tf.constant([[[[0.9427], [0.3752]], [[0.595], [0.7541]]]])
in0Add22252 = tf.constant([[[[0.874, 0.2884], [0.7093, 0.9712]]]])
in1Add22252 = tf.constant([[[[0.5712, 0.3724], [0.0976, 0.0953]]]])
print (np.array2string(model.predict([in0Dot24496,in1Dot24496,in0Con90358,in0Dot75640,in1Dot75640,in0Con27414,in0Add22252,in1Add22252],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add51463.png')

LDot24496 = dot_layer([[0.7524, 0.7471]], [[0.5739, 0.5285]], 1, 1, Dot24496), 
LRes10538 = reshape_layer(Dot24496, [1, 1], Res10538), 
LRes34759 = reshape_layer(Res10538, [1, 1, 1], Res34759), 
LZer71935 = zero_padding2D_layer(Res34759, 1, 0, 1, 0, Zer71935), 
LCon90358 = concatenate_layer([Zer71935,[[[[0.5192], [0.1752]], [[0.0268], [0.9479]]]]], 3, Con90358), 
LDot75640 = dot_layer([[[0.7838, 0.4537, 0.8074], [0.3889, 0.0548, 0.3113]]], [[[0.1018, 0.3896, 0.5888], [0.7376, 0.1143, 0.4876]]], 2, 2, Dot75640), 
LRes41198 = reshape_layer(Dot75640, [2, 2, 1], Res41198), 
LCon27414 = concatenate_layer([Res41198,[[[[0.9427], [0.3752]], [[0.595], [0.7541]]]]], 3, Con27414), 
LAdd22252 = add_layer([[[[[0.874, 0.2884], [0.7093, 0.9712]]]], [[[[0.5712, 0.3724], [0.0976, 0.0953]]]]], Add22252), 
LZer14839 = zero_padding2D_layer(Add22252, 1, 0, 0, 0, Zer14839), 
LSub20285 = subtract_layer(Con27414,Zer14839, Sub20285), 
LAdd51463 = add_layer([Con90358,Sub20285], Add51463), 
exec_layers([LDot24496,LRes10538,LRes34759,LZer71935,LCon90358,LDot75640,LRes41198,LCon27414,LAdd22252,LZer14839,LSub20285,LAdd51463],["Dot24496","Res10538","Res34759","Zer71935","Con90358","Dot75640","Res41198","Con27414","Add22252","Zer14839","Sub20285","Add51463"],Add51463,"Add51463")

Actual (Unparsed): [[[[0.7319495, 1.4619001], [1.0236770, 0.5504000]], [[-1.2009665, -0.0390000], [0.4646509, 0.6355000]]]]

Expected (Unparsed): [[[[0.73194948,1.4619],[1.02367703,0.5504]],[[-1.20096646,-0.039000000000000076],[0.4646508699999998,0.6355]]]]

Actual:   [[[[0.732, 1.462], [1.0237, 0.5504]], [[-1.2009, -0.039], [0.4647, 0.6355]]]]

Expected: [[[[0.732, 1.4619], [1.0237, 0.5504]], [[-1.2009, -0.039], [0.4647, 0.6355]]]]