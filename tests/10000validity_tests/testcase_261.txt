import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo46268 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con45520 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Add72448 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Add72448 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Max11093 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Max11093 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con93187 = tf.keras.layers.Input(shape=([2, 2, 1]))

Glo46268 = keras.layers.GlobalAveragePooling3D(name = 'Glo46268', )(in0Glo46268)
Res92221 = keras.layers.Reshape((1, 1), name = 'Res92221', )(Glo46268)
Res91813 = keras.layers.Reshape((1, 1, 1), name = 'Res91813', )(Res92221)
Zer17715 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer17715', )(Res91813)
Con45520 = keras.layers.Concatenate(axis=3, name = 'Con45520', )([Zer17715,in0Con45520])
Add72448 = keras.layers.Add(name = 'Add72448', )([in0Add72448,in1Add72448])
Res91884 = keras.layers.Reshape((1, 1, 2), name = 'Res91884', )(Add72448)
Zer75834 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer75834', )(Res91884)
Max11093 = keras.layers.Maximum(name = 'Max11093', )([in0Max11093,in1Max11093])
Con93187 = keras.layers.Concatenate(axis=3, name = 'Con93187', )([Max11093,in0Con93187])
Add75401 = keras.layers.Add(name = 'Add75401', )([Zer75834,Con93187])
Max28292 = keras.layers.Maximum(name = 'Max28292', )([Con45520,Add75401])
model = tf.keras.models.Model(inputs=[in0Glo46268,in0Con45520,in0Add72448,in1Add72448,in0Max11093,in1Max11093,in0Con93187], outputs=Max28292)
in0Glo46268 = tf.constant([[[[[1.5275], [1.6424]]]]])
in0Con45520 = tf.constant([[[[0.3288], [0.9982]], [[0.6737], [0.041]]]])
in0Add72448 = tf.constant([[[[[0.824, 0.592]]]]])
in1Add72448 = tf.constant([[[[[0.5341, 0.7164]]]]])
in0Max11093 = tf.constant([[[[0.3612], [0.0471]], [[0.2902], [0.7378]]]])
in1Max11093 = tf.constant([[[[0.2944], [0.791]], [[0.3198], [0.3162]]]])
in0Con93187 = tf.constant([[[[0.9104], [0.6325]], [[0.3076], [0.3918]]]])
print (np.array2string(model.predict([in0Glo46268,in0Con45520,in0Add72448,in1Add72448,in0Max11093,in1Max11093,in0Con93187],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max28292.png')

LGlo46268 = global_average_pooling3D_layer([[[[[1.5275], [1.6424]]]]], Glo46268), 
LRes92221 = reshape_layer(Glo46268, [1, 1], Res92221), 
LRes91813 = reshape_layer(Res92221, [1, 1, 1], Res91813), 
LZer17715 = zero_padding2D_layer(Res91813, 1, 0, 1, 0, Zer17715), 
LCon45520 = concatenate_layer([Zer17715,[[[[0.3288], [0.9982]], [[0.6737], [0.041]]]]], 3, Con45520), 
LAdd72448 = add_layer([[[[[[0.824, 0.592]]]]], [[[[[0.5341, 0.7164]]]]]], Add72448), 
LRes91884 = reshape_layer(Add72448, [1, 1, 2], Res91884), 
LZer75834 = zero_padding2D_layer(Res91884, 1, 0, 1, 0, Zer75834), 
LMax11093 = maximum_layer([[[[[0.3612], [0.0471]], [[0.2902], [0.7378]]]], [[[[0.2944], [0.791]], [[0.3198], [0.3162]]]]], Max11093), 
LCon93187 = concatenate_layer([Max11093,[[[[0.9104], [0.6325]], [[0.3076], [0.3918]]]]], 3, Con93187), 
LAdd75401 = add_layer([Zer75834,Con93187], Add75401), 
LMax28292 = maximum_layer([Con45520,Add75401], Max28292), 
exec_layers([LGlo46268,LRes92221,LRes91813,LZer17715,LCon45520,LAdd72448,LRes91884,LZer75834,LMax11093,LCon93187,LAdd75401,LMax28292],["Glo46268","Res92221","Res91813","Zer17715","Con45520","Add72448","Res91884","Zer75834","Max11093","Con93187","Add75401","Max28292"],Max28292,"Max28292")

Actual (Unparsed): [[[[0.3612000, 0.9104000], [0.7910000, 0.9982000]], [[0.3198000, 0.6737000], [2.0959000, 1.7002000]]]]

Expected (Unparsed): [[[[0.3612,0.9104],[0.791,0.9982]],[[0.3198,0.6737],[2.0959,1.7002]]]]

Actual:   [[[[0.3612, 0.9104], [0.791, 0.9982]], [[0.3198, 0.6737], [2.0959, 1.7002]]]]

Expected: [[[[0.3612, 0.9104], [0.791, 0.9982]], [[0.3198, 0.6737], [2.0959, 1.7002]]]]