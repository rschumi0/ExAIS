import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave72842 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Ave72842 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Ave72842 = keras.layers.Average(name = 'Ave72842', )([in0Ave72842,in1Ave72842])
Res979 = keras.layers.Reshape((1, 2, 4), name = 'Res979', )(Ave72842)
Res61171 = keras.layers.Reshape((1, 8), name = 'Res61171', )(Res979)
Glo40305 = keras.layers.GlobalMaxPool1D(name = 'Glo40305', )(Res61171)
model = tf.keras.models.Model(inputs=[in0Ave72842,in1Ave72842], outputs=Glo40305)
in0Ave72842 = tf.constant([[[[[0.9759, 0.0307], [0.3825, 0.6912]], [[0.5166, 0.0474], [0.4268, 0.3908]]]]])
in1Ave72842 = tf.constant([[[[[0.349, 0.4453], [0.2188, 0.8266]], [[0.7463, 0.3847], [0.4683, 0.0727]]]]])
print (np.array2string(model.predict([in0Ave72842,in1Ave72842],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo40305.png')

LAve72842 = average_layer([[[[[[0.9759, 0.0307], [0.3825, 0.6912]], [[0.5166, 0.0474], [0.4268, 0.3908]]]]], [[[[[0.349, 0.4453], [0.2188, 0.8266]], [[0.7463, 0.3847], [0.4683, 0.0727]]]]]], Ave72842), 
LRes979 = reshape_layer(Ave72842, [1, 2, 4], Res979), 
LRes61171 = reshape_layer(Res979, [1, 8], Res61171), 
LGlo40305 = global_max_pool1D_layer(Res61171, Glo40305), 
exec_layers([LAve72842,LRes979,LRes61171,LGlo40305],["Ave72842","Res979","Res61171","Glo40305"],Glo40305,"Glo40305")

Actual (Unparsed): [[0.6624500, 0.2380000, 0.3006500, 0.7589000, 0.6314500, 0.2160500, 0.4475500, 0.2317500]]

Expected (Unparsed): [[0.66245,0.238,0.30065,0.7589,0.63145,0.21605,0.44755,0.23174999999999998]]

Actual:   [[0.6625, 0.238, 0.3007, 0.7589, 0.6315, 0.2161, 0.4476, 0.2318]]

Expected: [[0.6625, 0.238, 0.3007, 0.7589, 0.6315, 0.2161, 0.4476, 0.2318]]