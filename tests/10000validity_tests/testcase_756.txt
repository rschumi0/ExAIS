import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max55840 = tf.keras.layers.Input(shape=([1, 2]))
in1Max55840 = tf.keras.layers.Input(shape=([1, 2]))
in0Con40143 = tf.keras.layers.Input(shape=([1, 1]))
in0Add91059 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add91059 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max56179 = tf.keras.layers.Input(shape=([1, 2]))
in1Max56179 = tf.keras.layers.Input(shape=([1, 2]))

Max55840 = keras.layers.Maximum(name = 'Max55840', )([in0Max55840,in1Max55840])
Res70269 = keras.layers.Reshape((1, 2, 1), name = 'Res70269', )(Max55840)
Glo22411 = keras.layers.GlobalAveragePooling2D(name = 'Glo22411', )(Res70269)
Res68523 = keras.layers.Reshape((1, 1), name = 'Res68523', )(Glo22411)
Con40143 = keras.layers.Concatenate(axis=2, name = 'Con40143', )([Res68523,in0Con40143])
Add91059 = keras.layers.Add(name = 'Add91059', )([in0Add91059,in1Add91059])
Res32697 = keras.layers.Reshape((1, 2), name = 'Res32697', )(Add91059)
Max56179 = keras.layers.Maximum(name = 'Max56179', )([in0Max56179,in1Max56179])
Add87069 = keras.layers.Add(name = 'Add87069', )([Res32697,Max56179])
Mul65342 = keras.layers.Multiply(name = 'Mul65342', )([Con40143,Add87069])
model = tf.keras.models.Model(inputs=[in0Max55840,in1Max55840,in0Con40143,in0Add91059,in1Add91059,in0Max56179,in1Max56179], outputs=Mul65342)
in0Max55840 = tf.constant([[[0.7382, 0.0591]]])
in1Max55840 = tf.constant([[[0.5124, 0.5541]]])
in0Con40143 = tf.constant([[[0.5971]]])
in0Add91059 = tf.constant([[[[0.1079, 0.5582]]]])
in1Add91059 = tf.constant([[[[0.0687, 0.7762]]]])
in0Max56179 = tf.constant([[[0.4639, 0.1224]]])
in1Max56179 = tf.constant([[[0.8244, 0.5332]]])
print (np.array2string(model.predict([in0Max55840,in1Max55840,in0Con40143,in0Add91059,in1Add91059,in0Max56179,in1Max56179],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul65342.png')

LMax55840 = maximum_layer([[[[0.7382, 0.0591]]], [[[0.5124, 0.5541]]]], Max55840), 
LRes70269 = reshape_layer(Max55840, [1, 2, 1], Res70269), 
LGlo22411 = global_average_pooling2D_layer(Res70269, Glo22411), 
LRes68523 = reshape_layer(Glo22411, [1, 1], Res68523), 
LCon40143 = concatenate_layer([Res68523,[[[0.5971]]]], 2, Con40143), 
LAdd91059 = add_layer([[[[[0.1079, 0.5582]]]], [[[[0.0687, 0.7762]]]]], Add91059), 
LRes32697 = reshape_layer(Add91059, [1, 2], Res32697), 
LMax56179 = maximum_layer([[[[0.4639, 0.1224]]], [[[0.8244, 0.5332]]]], Max56179), 
LAdd87069 = add_layer([Res32697,Max56179], Add87069), 
LMul65342 = multiply_layer([Con40143,Add87069], Mul65342), 
exec_layers([LMax55840,LRes70269,LGlo22411,LRes68523,LCon40143,LAdd91059,LRes32697,LMax56179,LAdd87069,LMul65342],["Max55840","Res70269","Glo22411","Res68523","Con40143","Add91059","Res32697","Max56179","Add87069","Mul65342"],Mul65342,"Mul65342")

Actual (Unparsed): [[[0.6467961, 1.1151440]]]

Expected (Unparsed): [[[0.6467961499999999,1.11514396]]]

Actual:   [[[0.6468, 1.1152]]]

Expected: [[[0.6468, 1.1152]]]