import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max21353 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max21353 = tf.keras.layers.Input(shape=([1, 1, 2]))

Max21353 = keras.layers.Maximum(name = 'Max21353', )([in0Max21353,in1Max21353])
Res33947 = keras.layers.Reshape((1, 2), name = 'Res33947', )(Max21353)
Glo33280 = keras.layers.GlobalMaxPool1D(name = 'Glo33280', )(Res33947)
Res54499 = keras.layers.Reshape((2, 1), name = 'Res54499', )(Glo33280)
Res12060 = keras.layers.Reshape((2, 1, 1), name = 'Res12060', )(Res54499)
Ave10645 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 1), padding='same', name = 'Ave10645', )(Res12060)
model = tf.keras.models.Model(inputs=[in0Max21353,in1Max21353], outputs=Ave10645)
in0Max21353 = tf.constant([[[[0.3166, 0.162]]]])
in1Max21353 = tf.constant([[[[0.4765, 0.354]]]])
print (np.array2string(model.predict([in0Max21353,in1Max21353],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave10645.png')

LMax21353 = maximum_layer([[[[[0.3166, 0.162]]]], [[[[0.4765, 0.354]]]]], Max21353), 
LRes33947 = reshape_layer(Max21353, [1, 2], Res33947), 
LGlo33280 = global_max_pool1D_layer(Res33947, Glo33280), 
LRes54499 = reshape_layer(Glo33280, [2, 1], Res54499), 
LRes12060 = reshape_layer(Res54499, [2, 1, 1], Res12060), 
LAve10645 = average_pooling2D_layer(Res12060, 2, 1, 1, 1, true, Ave10645), 
exec_layers([LMax21353,LRes33947,LGlo33280,LRes54499,LRes12060,LAve10645],["Max21353","Res33947","Glo33280","Res54499","Res12060","Ave10645"],Ave10645,"Ave10645")

Actual (Unparsed): [[[[0.4152500]], [[0.3540000]]]]

Expected (Unparsed): [[[[0.41525]],[[0.354]]]]

Actual:   [[[[0.4153]], [[0.354]]]]

Expected: [[[[0.4153]], [[0.354]]]]