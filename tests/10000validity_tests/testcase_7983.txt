import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot13608 = tf.keras.layers.Input(shape=([3]))
in1Dot13608 = tf.keras.layers.Input(shape=([3]))

Dot13608 = keras.layers.Dot(axes=(1, 1), name = 'Dot13608', )([in0Dot13608,in1Dot13608])
Res60857 = keras.layers.Reshape((1, 1), name = 'Res60857', )(Dot13608)
Res41579 = keras.layers.Reshape((1, 1, 1), name = 'Res41579', )(Res60857)
Con32245 = keras.layers.Conv2D(3, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con32245', )(Res41579)
Res79518 = keras.layers.Reshape((1, 3), name = 'Res79518', )(Con32245)
LST60598 = keras.layers.LSTM(2,recurrent_activation='sigmoid', name = 'LST60598', )(Res79518)
Sof36170 = keras.layers.Softmax(axis=1, name = 'Sof36170', )(LST60598)
model = tf.keras.models.Model(inputs=[in0Dot13608,in1Dot13608], outputs=Sof36170)
w = model.get_layer('Con32245').get_weights() 
w[0] = np.array([[[[0.2871, 0.1323, 0.222]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con32245').set_weights(w) 
w = model.get_layer('LST60598').get_weights() 
w[0] = np.array([[9, 1, 4, 2, 4, 8, 7, 6], [1, 2, 1, 6, 1, 10, 2, 4], [1, 6, 5, 3, 2, 3, 6, 1]])
w[1] = np.array([[3, 7, 10, 9, 4, 2, 3, 4], [1, 4, 8, 10, 5, 3, 3, 3]])
w[2] = np.array([3, 6, 5, 3, 9, 8, 7, 5])
model.get_layer('LST60598').set_weights(w) 
in0Dot13608 = tf.constant([[0.7789, 0.676, 0.3678]])
in1Dot13608 = tf.constant([[0.4345, 0.0068, 0.5068]])
print (np.array2string(model.predict([in0Dot13608,in1Dot13608],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sof36170.png')

LDot13608 = dot_layer([[0.7789, 0.676, 0.3678]], [[0.4345, 0.0068, 0.5068]], 1, 1, Dot13608), 
LRes60857 = reshape_layer(Dot13608, [1, 1], Res60857), 
LRes41579 = reshape_layer(Res60857, [1, 1, 1], Res41579), 
LCon32245 = conv2D_layer(Res41579, 1, 1,[[[[0.2871, 0.1323, 0.222]]]],[0, 0, 0], 1, 1, true, 1, 1, Con32245), 
LRes79518 = reshape_layer(Con32245, [1, 3], Res79518), 
LLST60598 = lstm_layer(Res79518,[[9, 1, 4, 2, 4, 8, 7, 6], [1, 2, 1, 6, 1, 10, 2, 4], [1, 6, 5, 3, 2, 3, 6, 1]],[[3, 7, 10, 9, 4, 2, 3, 4], [1, 4, 8, 10, 5, 3, 3, 3]],[3, 6, 5, 3, 9, 8, 7, 5], LST60598), 
LSof36170 = softmax_layer(LST60598, 1, Sof36170), 
exec_layers([LDot13608,LRes60857,LRes41579,LCon32245,LRes79518,LLST60598,LSof36170],["Dot13608","Res60857","Res41579","Con32245","Res79518","LST60598","Sof36170"],Sof36170,"Sof36170")

Actual (Unparsed): [[0.4993153, 0.5006847]]

Expected (Unparsed): [[0.4993153278373573,0.5006846721626427]]

Actual:   [[0.4994, 0.5007]]

Expected: [[0.4994, 0.5007]]