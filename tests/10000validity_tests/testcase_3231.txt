import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro6625 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Con33155 = tf.keras.layers.Input(shape=([6, 3]))
in0Cro77234 = tf.keras.layers.Input(shape=([4, 4, 4]))
in0Dot49173 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot49173 = tf.keras.layers.Input(shape=([2, 2]))
in0Con94568 = tf.keras.layers.Input(shape=([2, 2]))

Cro6625 = keras.layers.Cropping3D(cropping=((1, 0), (0, 1), (0, 0)), name = 'Cro6625', )(in0Cro6625)
Res41542 = keras.layers.Reshape((1, 1, 1), name = 'Res41542', )(Cro6625)
PRe91435 = keras.layers.PReLU(name = 'PRe91435', )(Res41542)
Res7479 = keras.layers.Reshape((1, 1), name = 'Res7479', )(PRe91435)
Zer6158 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer6158', )(Res7479)
Zer64277 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer64277', )(Zer6158)
Con33155 = keras.layers.Concatenate(axis=2, name = 'Con33155', )([Zer64277,in0Con33155])
Cro77234 = keras.layers.Cropping2D(cropping=((2, 0), (2, 1)), name = 'Cro77234', )(in0Cro77234)
Res64453 = keras.layers.Reshape((2, 4), name = 'Res64453', )(Cro77234)
Dot49173 = keras.layers.Dot(axes=(2, 1), name = 'Dot49173', )([in0Dot49173,in1Dot49173])
Con94568 = keras.layers.Concatenate(axis=2, name = 'Con94568', )([Dot49173,in0Con94568])
Mul27067 = keras.layers.Multiply(name = 'Mul27067', )([Res64453,Con94568])
Dot87259 = keras.layers.Dot(axes=(2, 2), name = 'Dot87259', )([Con33155,Mul27067])
model = tf.keras.models.Model(inputs=[in0Cro6625,in0Con33155,in0Cro77234,in0Dot49173,in1Dot49173,in0Con94568], outputs=Dot87259)
w = model.get_layer('PRe91435').get_weights() 
w[0] = np.array([[[0.4564]]])
model.get_layer('PRe91435').set_weights(w) 
in0Cro6625 = tf.constant([[[[[1.5727]], [[1.4742]]], [[[1.8946]], [[1.0999]]]]])
in0Con33155 = tf.constant([[[0.3374, 0.2583, 0.6806], [0.912, 0.9949, 0.6713], [0.8861, 0.9249, 0.4489], [0.0787, 0.9727, 0.5398], [0.8922, 0.2697, 0.0974], [0.1695, 0.0806, 0.1192]]])
in0Cro77234 = tf.constant([[[[1.2486, 1.9513, 1.1011, 1.7975], [1.0792, 1.2872, 1.7413, 1.4917], [1.9261, 1.601, 1.9961, 1.8685], [1.5497, 1.7131, 1.3343, 1.3049]], [[1.1968, 1.6956, 1.3807, 1.3132], [1.3995, 1.4254, 1.0382, 1.4673], [1.8692, 1.2159, 1.5012, 1.9383], [1.7526, 1.4029, 1.065, 1.0849]], [[1.9321, 1.8417, 1.4484, 1.6338], [1.4987, 1.6277, 1.678, 1.8635], [1.0039, 2, 1.4537, 1.8641], [1.6045, 1.3055, 1.315, 1.3798]], [[1.7562, 1.109, 1.8551, 1.9639], [1.6814, 1.0171, 1.6958, 1.177], [1.4398, 1.5525, 1.9256, 1.338], [1.065, 1.4619, 1.2311, 1.9061]]]])
in0Dot49173 = tf.constant([[[0.8933, 0.1701], [0.0047, 0.9118]]])
in1Dot49173 = tf.constant([[[0.9099, 0.7035], [0.2999, 0.9848]]])
in0Con94568 = tf.constant([[[0.0861, 0.0152], [0.2547, 0.7573]]])
print (np.array2string(model.predict([in0Cro6625,in0Con33155,in0Cro77234,in0Dot49173,in1Dot49173,in0Con94568],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot87259.png')

LCro6625 = cropping3D_layer([[[[[1.5727]], [[1.4742]]], [[[1.8946]], [[1.0999]]]]], 1, 0, 0, 1, 0, 0, Cro6625), 
LRes41542 = reshape_layer(Cro6625, [1, 1, 1], Res41542), 
LPRe91435 = prelu_layer(Res41542, [[[0.4564]]], PRe91435), 
LRes7479 = reshape_layer(PRe91435, [1, 1], Res7479), 
LZer6158 = zero_padding1D_layer(Res7479, 3, 0, Zer6158), 
LZer64277 = zero_padding1D_layer(Zer6158, 2, 0, Zer64277), 
LCon33155 = concatenate_layer([Zer64277,[[[0.3374, 0.2583, 0.6806], [0.912, 0.9949, 0.6713], [0.8861, 0.9249, 0.4489], [0.0787, 0.9727, 0.5398], [0.8922, 0.2697, 0.0974], [0.1695, 0.0806, 0.1192]]]], 2, Con33155), 
LCro77234 = cropping2D_layer([[[[1.2486, 1.9513, 1.1011, 1.7975], [1.0792, 1.2872, 1.7413, 1.4917], [1.9261, 1.601, 1.9961, 1.8685], [1.5497, 1.7131, 1.3343, 1.3049]], [[1.1968, 1.6956, 1.3807, 1.3132], [1.3995, 1.4254, 1.0382, 1.4673], [1.8692, 1.2159, 1.5012, 1.9383], [1.7526, 1.4029, 1.065, 1.0849]], [[1.9321, 1.8417, 1.4484, 1.6338], [1.4987, 1.6277, 1.678, 1.8635], [1.0039, 2, 1.4537, 1.8641], [1.6045, 1.3055, 1.315, 1.3798]], [[1.7562, 1.109, 1.8551, 1.9639], [1.6814, 1.0171, 1.6958, 1.177], [1.4398, 1.5525, 1.9256, 1.338], [1.065, 1.4619, 1.2311, 1.9061]]]], 2, 0, 2, 1, Cro77234), 
LRes64453 = reshape_layer(Cro77234, [2, 4], Res64453), 
LDot49173 = dot_layer([[[0.8933, 0.1701], [0.0047, 0.9118]]], [[[0.9099, 0.7035], [0.2999, 0.9848]]], 2, 1, Dot49173), 
LCon94568 = concatenate_layer([Dot49173,[[[0.0861, 0.0152], [0.2547, 0.7573]]]], 2, Con94568), 
LMul27067 = multiply_layer([Res64453,Con94568], Mul27067), 
LDot87259 = dot_layer(Con33155,Mul27067, 2, 2, Dot87259), 
exec_layers([LCro6625,LRes41542,LPRe91435,LRes7479,LZer6158,LZer64277,LCon33155,LCro77234,LRes64453,LDot49173,LCon94568,LMul27067,LDot87259],["Cro6625","Res41542","PRe91435","Res7479","Zer6158","Zer64277","Con33155","Cro77234","Res64453","Dot49173","Con94568","Mul27067","Dot87259"],Dot87259,"Dot87259")

Actual (Unparsed): [[[0.5887218, 1.2883985], [1.5953607, 2.4442132], [1.5390674, 2.1482921], [0.2623241, 1.1341388], [1.4568113, 1.4793206], [1.9262819, 1.1550656]]]

Expected (Unparsed): [[[0.5887218433670001,1.2883985026737148],[1.5953607435290003,2.4442131587772002],[1.5390674775070001,2.1482920464400723],[0.26232416259700003,1.1341387154226075],[1.456811395529,1.479320540930145],[1.9262817872531406,1.1550655446354157]]]

Actual:   [[[0.5888, 1.2884], [1.5954, 2.4443], [1.5391, 2.1483], [0.2624, 1.1342], [1.4569, 1.4794], [1.9263, 1.1551]]]

Expected: [[[0.5888, 1.2884], [1.5954, 2.4443], [1.5391, 2.1483], [0.2624, 1.1342], [1.4569, 1.4794], [1.9263, 1.1551]]]