import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0PRe98841 = tf.keras.layers.Input(shape=([1, 1]))
in0Con78822 = tf.keras.layers.Input(shape=([2, 1]))
in0Max87491 = tf.keras.layers.Input(shape=([2, 2]))
in1Max87491 = tf.keras.layers.Input(shape=([2, 2]))

PRe98841 = keras.layers.PReLU(name = 'PRe98841', input_shape=(1, 1))(in0PRe98841)
Zer69363 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer69363', )(PRe98841)
Con78822 = keras.layers.Concatenate(axis=2, name = 'Con78822', )([Zer69363,in0Con78822])
Max87491 = keras.layers.Maximum(name = 'Max87491', )([in0Max87491,in1Max87491])
Ave6788 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='same', name = 'Ave6788', )(Max87491)
Sub22913 = keras.layers.Subtract(name = 'Sub22913', )([Con78822,Ave6788])
Zer92306 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer92306', )(Sub22913)
model = tf.keras.models.Model(inputs=[in0PRe98841,in0Con78822,in0Max87491,in1Max87491], outputs=Zer92306)
w = model.get_layer('PRe98841').get_weights() 
w[0] = np.array([[0.3058]])
model.get_layer('PRe98841').set_weights(w) 
in0PRe98841 = tf.constant([[[0.6151]]])
in0Con78822 = tf.constant([[[0.3736], [0.3267]]])
in0Max87491 = tf.constant([[[0.7103, 0.0515], [0.3764, 0.8515]]])
in1Max87491 = tf.constant([[[0.2993, 0.2218], [0.6405, 0.1519]]])
print (np.array2string(model.predict([in0PRe98841,in0Con78822,in0Max87491,in1Max87491],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer92306.png')

LPRe98841 = prelu_layer([[[0.6151]]], [[0.3058]], PRe98841), 
LZer69363 = zero_padding1D_layer(PRe98841, 1, 0, Zer69363), 
LCon78822 = concatenate_layer([Zer69363,[[[0.3736], [0.3267]]]], 2, Con78822), 
LMax87491 = maximum_layer([[[[0.7103, 0.0515], [0.3764, 0.8515]]], [[[0.2993, 0.2218], [0.6405, 0.1519]]]], Max87491), 
LAve6788 = average_pooling1D_layer(Max87491, 2, 1, true, Ave6788), 
LSub22913 = subtract_layer(Con78822,Ave6788, Sub22913), 
LZer92306 = zero_padding1D_layer(Sub22913, 1, 1, Zer92306), 
exec_layers([LPRe98841,LZer69363,LCon78822,LMax87491,LAve6788,LSub22913,LZer92306],["PRe98841","Zer69363","Con78822","Max87491","Ave6788","Sub22913","Zer92306"],Zer92306,"Zer92306")

Actual (Unparsed): [[[0.0000000, 0.0000000], [-0.6754000, -0.1630500], [-0.0254000, -0.5248000], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0],[-0.6754,-0.16305000000000008],[-0.025399999999999978,-0.5248],[0,0]]]

Actual:   [[[0, 0], [-0.6754, -0.163], [-0.0254, -0.5248], [0, 0]]]

Expected: [[[0, 0], [-0.6754, -0.163], [-0.0253, -0.5248], [0, 0]]]