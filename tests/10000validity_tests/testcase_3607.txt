import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0PRe47407 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Glo34642 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot65961 = tf.keras.layers.Input(shape=([3]))
in1Dot65961 = tf.keras.layers.Input(shape=([3]))
in0Con47439 = tf.keras.layers.Input(shape=([3]))
in0Sim54119 = tf.keras.layers.Input(shape=([1, 1]))
in0Con29840 = tf.keras.layers.Input(shape=([3]))

PRe47407 = keras.layers.PReLU(name = 'PRe47407', input_shape=(2, 1, 1, 2))(in0PRe47407)
Res8566 = keras.layers.Reshape((2, 1, 2), name = 'Res8566', )(PRe47407)
Res20042 = keras.layers.Reshape((2, 2), name = 'Res20042', )(Res8566)
Fla56140 = keras.layers.Flatten(name = 'Fla56140', )(Res20042)
Glo34642 = keras.layers.GlobalAveragePooling1D(name = 'Glo34642', )(in0Glo34642)
Dot65961 = keras.layers.Dot(axes=(1, 1), name = 'Dot65961', )([in0Dot65961,in1Dot65961])
Min71791 = keras.layers.Minimum(name = 'Min71791', )([Glo34642,Dot65961])
Con47439 = keras.layers.Concatenate(axis=1, name = 'Con47439', )([Min71791,in0Con47439])
Min64637 = keras.layers.Minimum(name = 'Min64637', )([Fla56140,Con47439])
Sim54119 = keras.layers.SimpleRNN(1,name = 'Sim54119', )(in0Sim54119)
Con29840 = keras.layers.Concatenate(axis=1, name = 'Con29840', )([Sim54119,in0Con29840])
Min94881 = keras.layers.Minimum(name = 'Min94881', )([Min64637,Con29840])
model = tf.keras.models.Model(inputs=[in0PRe47407,in0Glo34642,in0Dot65961,in1Dot65961,in0Con47439,in0Sim54119,in0Con29840], outputs=Min94881)
w = model.get_layer('PRe47407').get_weights() 
w[0] = np.array([[[[0.323, 0.4908]]], [[[0.1191, 0.8768]]]])
model.get_layer('PRe47407').set_weights(w) 
w = model.get_layer('Sim54119').get_weights() 
w[0] = np.array([[2]])
w[1] = np.array([[10]])
w[2] = np.array([4])
model.get_layer('Sim54119').set_weights(w) 
in0PRe47407 = tf.constant([[[[[0.1604, 0.5534]]], [[[0.983, 0.5847]]]]])
in0Glo34642 = tf.constant([[[1.2387]]])
in0Dot65961 = tf.constant([[0.1905, 0.5787, 0.3922]])
in1Dot65961 = tf.constant([[0.8838, 0.061, 0.1575]])
in0Con47439 = tf.constant([[0.2101, 0.9333, 0.94]])
in0Sim54119 = tf.constant([[[10]]])
in0Con29840 = tf.constant([[0.9326, 0.8432, 0.2812]])
print (np.array2string(model.predict([in0PRe47407,in0Glo34642,in0Dot65961,in1Dot65961,in0Con47439,in0Sim54119,in0Con29840],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min94881.png')

LPRe47407 = prelu_layer([[[[[0.1604, 0.5534]]], [[[0.983, 0.5847]]]]], [[[[0.323, 0.4908]]], [[[0.1191, 0.8768]]]], PRe47407), 
LRes8566 = reshape_layer(PRe47407, [2, 1, 2], Res8566), 
LRes20042 = reshape_layer(Res8566, [2, 2], Res20042), 
LFla56140 = flatten_layer(Res20042, Fla56140), 
LGlo34642 = global_average_pooling1D_layer([[[1.2387]]], Glo34642), 
LDot65961 = dot_layer([[0.1905, 0.5787, 0.3922]], [[0.8838, 0.061, 0.1575]], 1, 1, Dot65961), 
LMin71791 = minimum_layer([Glo34642,Dot65961], Min71791), 
LCon47439 = concatenate_layer([Min71791,[[0.2101, 0.9333, 0.94]]], 1, Con47439), 
LMin64637 = minimum_layer([Fla56140,Con47439], Min64637), 
LSim54119 = simple_rnn_layer([[[10]]],[[2]],[[10]],[4], Sim54119), 
LCon29840 = concatenate_layer([Sim54119,[[0.9326, 0.8432, 0.2812]]], 1, Con29840), 
LMin94881 = minimum_layer([Min64637,Con29840], Min94881), 
exec_layers([LPRe47407,LRes8566,LRes20042,LFla56140,LGlo34642,LDot65961,LMin71791,LCon47439,LMin64637,LSim54119,LCon29840,LMin94881],["PRe47407","Res8566","Res20042","Fla56140","Glo34642","Dot65961","Min71791","Con47439","Min64637","Sim54119","Con29840","Min94881"],Min94881,"Min94881")

Actual (Unparsed): [[0.1604000, 0.2101000, 0.8432000, 0.2812000]]

Expected (Unparsed): [[0.1604,0.2101,0.8432,0.2812]]

Actual:   [[0.1604, 0.2101, 0.8432, 0.2812]]

Expected: [[0.1604, 0.2101, 0.8432, 0.2812]]