import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min99545 = tf.keras.layers.Input(shape=([2, 1]))
in1Min99545 = tf.keras.layers.Input(shape=([2, 1]))

Min99545 = keras.layers.Minimum(name = 'Min99545', )([in0Min99545,in1Min99545])
Res11558 = keras.layers.Reshape((2, 1, 1), name = 'Res11558', )(Min99545)
Cro9861 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro9861', )(Res11558)
Res14483 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res14483', )(Cro9861)
Zer99946 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer99946', )(Res14483)
Res4822 = keras.layers.Reshape((3, 3, 3), name = 'Res4822', )(Zer99946)
Res51967 = keras.layers.Reshape((3, 9), name = 'Res51967', )(Res4822)
Loc62230 = keras.layers.LocallyConnected1D(3, (2),strides=(1), name = 'Loc62230', )(Res51967)
Res59868 = keras.layers.Reshape((2, 3, 1), name = 'Res59868', )(Loc62230)
Up_35498 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_35498', )(Res59868)
model = tf.keras.models.Model(inputs=[in0Min99545,in1Min99545], outputs=Up_35498)
w = model.get_layer('Loc62230').get_weights() 
w[0] = np.array([[[0.7308, 0.4151, 0.1482], [0.9918, 0.1069, 0.0732], [0.715, 0.6699, 0.6027], [0.3234, 0.1727, 0.2808], [0.82, 0.5881, 0.6017], [0.5565, 0.1526, 0.3352], [0.2573, 0.9091, 0.1304], [0.4025, 0.0397, 0.09], [0.805, 0.5711, 0.9904], [0.5398, 0.3141, 0.9575], [0.152, 0.015, 0.6998], [0.4246, 0.7669, 0.531], [0.6465, 0.7467, 0.5847], [0.5294, 0.0505, 0.7067], [0.9964, 0.4451, 0.2359], [0.6532, 0.8228, 0.5273], [0.1933, 0.2975, 0.8437], [0.8505, 0.432, 0.6947]], [[0.5777, 0.9415, 0.9076], [0.4183, 0.3936, 0.3429], [0.0178, 0.9131, 0.7671], [0.7371, 0.8415, 0.8877], [0.3872, 0.961, 0.6386], [0.3998, 0.8548, 0.3564], [0.1233, 0.9738, 0.9218], [0.4231, 0.179, 0.6923], [0.5722, 0.6657, 0.4914], [0.708, 0.7603, 0.8603], [0.0416, 0.0315, 0.29], [0.706, 0.5248, 0.7709], [0.1448, 0.9713, 0.5367], [0.2187, 0.5589, 0.7967], [0.8057, 0.3163, 0.2575], [0.7754, 0.8388, 0.0587], [0.5899, 0.794, 0.0968], [0.3446, 0.7254, 0.3898]]])
w[1] = np.array([[0, 0, 0], [0, 0, 0]])
model.get_layer('Loc62230').set_weights(w) 
in0Min99545 = tf.constant([[[0.3895], [0.3208]]])
in1Min99545 = tf.constant([[[0.4829], [0.8524]]])
print (np.array2string(model.predict([in0Min99545,in1Min99545],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_35498.png')

LMin99545 = minimum_layer([[[[0.3895], [0.3208]]], [[[0.4829], [0.8524]]]], Min99545), 
LRes11558 = reshape_layer(Min99545, [2, 1, 1], Res11558), 
LCro9861 = cropping2D_layer(Res11558, 1, 0, 0, 0, Cro9861), 
LRes14483 = reshape_layer(Cro9861, [1, 1, 1, 1], Res14483), 
LZer99946 = zero_padding3D_layer(Res14483, 1, 1, 1, 1, 1, 1, Zer99946), 
LRes4822 = reshape_layer(Zer99946, [3, 3, 3], Res4822), 
LRes51967 = reshape_layer(Res4822, [3, 9], Res51967), 
LLoc62230 = locally_connected1D_layer(Res51967, 2,[[[0.7308, 0.4151, 0.1482], [0.9918, 0.1069, 0.0732], [0.715, 0.6699, 0.6027], [0.3234, 0.1727, 0.2808], [0.82, 0.5881, 0.6017], [0.5565, 0.1526, 0.3352], [0.2573, 0.9091, 0.1304], [0.4025, 0.0397, 0.09], [0.805, 0.5711, 0.9904], [0.5398, 0.3141, 0.9575], [0.152, 0.015, 0.6998], [0.4246, 0.7669, 0.531], [0.6465, 0.7467, 0.5847], [0.5294, 0.0505, 0.7067], [0.9964, 0.4451, 0.2359], [0.6532, 0.8228, 0.5273], [0.1933, 0.2975, 0.8437], [0.8505, 0.432, 0.6947]], [[0.5777, 0.9415, 0.9076], [0.4183, 0.3936, 0.3429], [0.0178, 0.9131, 0.7671], [0.7371, 0.8415, 0.8877], [0.3872, 0.961, 0.6386], [0.3998, 0.8548, 0.3564], [0.1233, 0.9738, 0.9218], [0.4231, 0.179, 0.6923], [0.5722, 0.6657, 0.4914], [0.708, 0.7603, 0.8603], [0.0416, 0.0315, 0.29], [0.706, 0.5248, 0.7709], [0.1448, 0.9713, 0.5367], [0.2187, 0.5589, 0.7967], [0.8057, 0.3163, 0.2575], [0.7754, 0.8388, 0.0587], [0.5899, 0.794, 0.0968], [0.3446, 0.7254, 0.3898]]],[[0, 0, 0], [0, 0, 0]], 1, Loc62230), 
LRes59868 = reshape_layer(Loc62230, [2, 3, 1], Res59868), 
LUp_35498 = up_sampling2D_layer(Res59868, 2, 2, Up_35498), 
exec_layers([LMin99545,LRes11558,LCro9861,LRes14483,LZer99946,LRes4822,LRes51967,LLoc62230,LRes59868,LUp_35498],["Min99545","Res11558","Cro9861","Res14483","Zer99946","Res4822","Res51967","Loc62230","Res59868","Up_35498"],Up_35498,"Up_35498")

Actual (Unparsed): [[[[0.1698315], [0.1698315], [0.0162004], [0.0162004], [0.2267094], [0.2267094]], [[0.1698315], [0.1698315], [0.0162004], [0.0162004], [0.2267094], [0.2267094]], [[0.1242138], [0.1242138], [0.3082888], [0.3082888], [0.2048629], [0.2048629]], [[0.1242138], [0.1242138], [0.3082888], [0.3082888], [0.2048629], [0.2048629]]]]

Expected (Unparsed): [[[[0.16983151999999999],[0.16983151999999999],[0.0162004],[0.0162004],[0.22670935999999997],[0.22670935999999997]],[[0.16983151999999999],[0.16983151999999999],[0.0162004],[0.0162004],[0.22670935999999997],[0.22670935999999997]],[[0.12421375999999999],[0.12421375999999999],[0.3082888],[0.3082888],[0.20486287999999997],[0.20486287999999997]],[[0.12421375999999999],[0.12421375999999999],[0.3082888],[0.3082888],[0.20486287999999997],[0.20486287999999997]]]]

Actual:   [[[[0.1699], [0.1699], [0.0163], [0.0163], [0.2268], [0.2268]], [[0.1699], [0.1699], [0.0163], [0.0163], [0.2268], [0.2268]], [[0.1243], [0.1243], [0.3083], [0.3083], [0.2049], [0.2049]], [[0.1243], [0.1243], [0.3083], [0.3083], [0.2049], [0.2049]]]]

Expected: [[[[0.1699], [0.1699], [0.0163], [0.0163], [0.2268], [0.2268]], [[0.1699], [0.1699], [0.0163], [0.0163], [0.2268], [0.2268]], [[0.1243], [0.1243], [0.3083], [0.3083], [0.2049], [0.2049]], [[0.1243], [0.1243], [0.3083], [0.3083], [0.2049], [0.2049]]]]