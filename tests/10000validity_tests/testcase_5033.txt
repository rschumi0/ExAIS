import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_19046 = tf.keras.layers.Input(shape=([1, 3, 4, 4]))
in0Loc83138 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con37262 = tf.keras.layers.Input(shape=([2, 6, 14]))

Up_19046 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_19046', )(in0Up_19046)
Res15390 = keras.layers.Reshape((2, 6, 16), name = 'Res15390', )(Up_19046)
Loc83138 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(1, 3), name = 'Loc83138', )(in0Loc83138)
Zer56304 = keras.layers.ZeroPadding2D(padding=((1, 0), (5, 0)), name = 'Zer56304', )(Loc83138)
Con37262 = keras.layers.Concatenate(axis=3, name = 'Con37262', )([Zer56304,in0Con37262])
Min54137 = keras.layers.Minimum(name = 'Min54137', )([Res15390,Con37262])
model = tf.keras.models.Model(inputs=[in0Up_19046,in0Loc83138,in0Con37262], outputs=Min54137)
w = model.get_layer('Loc83138').get_weights() 
w[0] = np.array([[[0.9907, 0.7487], [0.7873, 0.3121]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc83138').set_weights(w) 
in0Up_19046 = tf.constant([[[[[1.182, 1.6975, 1.2374, 1.3116], [1.5797, 1.0743, 1.3025, 1.0905], [1.8418, 1.3025, 1.7794, 1.7189], [1.4632, 1.5507, 1.1279, 1.0787]], [[1.1988, 1.1933, 1.3852, 1.528], [1.9007, 1.2453, 1.4564, 1.6508], [1.4861, 1.4783, 1.6702, 1.5061], [1.1845, 1.9921, 1.0477, 1.6225]], [[1.4458, 1.4102, 1.3527, 1.3968], [1.1469, 1.5401, 1.1389, 1.742], [1.0255, 1.2927, 1.6939, 1.7966], [1.5887, 1.8909, 1.9862, 1.265]]]]])
in0Loc83138 = tf.constant([[[[0.1018], [0.9145]]]])
in0Con37262 = tf.constant([[[[0.4671, 0.9867, 0.8097, 0.7902, 0.4768, 0.4882, 0.677, 0.6349, 0.1286, 0.0761, 0.4322, 0.1105, 0.7651, 0.2243], [0.1731, 0.4918, 0.9091, 0.826, 0.7254, 0.133, 0.0959, 0.9672, 0.5136, 0.1331, 0.1339, 0.4903, 0.6374, 0.9229], [0.6538, 0.4589, 0.9721, 0.0844, 0.9824, 0.105, 0.933, 0.449, 0.0925, 0.0886, 0.3977, 0.5349, 0.6217, 0.9336], [0.1607, 0.6859, 0.7265, 0.3186, 0.2138, 0.8499, 0.8474, 0.491, 0.0888, 0.796, 0.2931, 0.4564, 0.4792, 0.713], [0.9222, 0.7443, 0.3631, 0.5521, 0.1025, 0.4964, 0.8937, 0.1819, 0.553, 0.3388, 0.3911, 0.4106, 0.6412, 0.0037], [0.8745, 0.1935, 0.1992, 0.9453, 0.7061, 0.8952, 0.9448, 0.2622, 0.0838, 0.3035, 0.1532, 0.0774, 0.3153, 0.201]], [[0.3085, 0.1606, 0.0356, 0.6956, 0.0839, 0.9766, 0.7855, 0.1798, 0.1496, 0.5385, 0.6621, 0.7458, 0.9852, 0.4118], [0.0712, 0.1171, 0.0898, 0.9642, 0.966, 0.6756, 0.7208, 0.4927, 0.3376, 0.9588, 0.5726, 0.1691, 0.1408, 0.0817], [0.6065, 0.8422, 0.2835, 0.9009, 0.5838, 0.6092, 0.7849, 0.3744, 0.7219, 0.7279, 0.7181, 0.4999, 0.2895, 0.8777], [0.0912, 0.4127, 0.8924, 0.999, 0.3943, 0.7149, 0.6594, 0.9407, 0.1389, 0.869, 0.5327, 0.9266, 0.3542, 0.5418], [0.3918, 0.4188, 0.6672, 0.1099, 0.7944, 0.2948, 0.2891, 0.1497, 0.7059, 0.3878, 0.9611, 0.6279, 0.7073, 0.341], [0.6688, 0.6786, 0.8183, 0.4199, 0.7253, 0.3089, 0.2578, 0.392, 0.6444, 0.1106, 0.1701, 0.8393, 0.0784, 0.0707]]]])
print (np.array2string(model.predict([in0Up_19046,in0Loc83138,in0Con37262],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min54137.png')

LUp_19046 = up_sampling3D_layer([[[[[1.182, 1.6975, 1.2374, 1.3116], [1.5797, 1.0743, 1.3025, 1.0905], [1.8418, 1.3025, 1.7794, 1.7189], [1.4632, 1.5507, 1.1279, 1.0787]], [[1.1988, 1.1933, 1.3852, 1.528], [1.9007, 1.2453, 1.4564, 1.6508], [1.4861, 1.4783, 1.6702, 1.5061], [1.1845, 1.9921, 1.0477, 1.6225]], [[1.4458, 1.4102, 1.3527, 1.3968], [1.1469, 1.5401, 1.1389, 1.742], [1.0255, 1.2927, 1.6939, 1.7966], [1.5887, 1.8909, 1.9862, 1.265]]]]], 2, 2, 1, Up_19046), 
LRes15390 = reshape_layer(Up_19046, [2, 6, 16], Res15390), 
LLoc83138 = locally_connected2D_layer([[[[0.1018], [0.9145]]]], 1, 2,[[[0.9907, 0.7487], [0.7873, 0.3121]]],[[[0, 0]]], 1, 3, Loc83138), 
LZer56304 = zero_padding2D_layer(Loc83138, 1, 0, 5, 0, Zer56304), 
LCon37262 = concatenate_layer([Zer56304,[[[[0.4671, 0.9867, 0.8097, 0.7902, 0.4768, 0.4882, 0.677, 0.6349, 0.1286, 0.0761, 0.4322, 0.1105, 0.7651, 0.2243], [0.1731, 0.4918, 0.9091, 0.826, 0.7254, 0.133, 0.0959, 0.9672, 0.5136, 0.1331, 0.1339, 0.4903, 0.6374, 0.9229], [0.6538, 0.4589, 0.9721, 0.0844, 0.9824, 0.105, 0.933, 0.449, 0.0925, 0.0886, 0.3977, 0.5349, 0.6217, 0.9336], [0.1607, 0.6859, 0.7265, 0.3186, 0.2138, 0.8499, 0.8474, 0.491, 0.0888, 0.796, 0.2931, 0.4564, 0.4792, 0.713], [0.9222, 0.7443, 0.3631, 0.5521, 0.1025, 0.4964, 0.8937, 0.1819, 0.553, 0.3388, 0.3911, 0.4106, 0.6412, 0.0037], [0.8745, 0.1935, 0.1992, 0.9453, 0.7061, 0.8952, 0.9448, 0.2622, 0.0838, 0.3035, 0.1532, 0.0774, 0.3153, 0.201]], [[0.3085, 0.1606, 0.0356, 0.6956, 0.0839, 0.9766, 0.7855, 0.1798, 0.1496, 0.5385, 0.6621, 0.7458, 0.9852, 0.4118], [0.0712, 0.1171, 0.0898, 0.9642, 0.966, 0.6756, 0.7208, 0.4927, 0.3376, 0.9588, 0.5726, 0.1691, 0.1408, 0.0817], [0.6065, 0.8422, 0.2835, 0.9009, 0.5838, 0.6092, 0.7849, 0.3744, 0.7219, 0.7279, 0.7181, 0.4999, 0.2895, 0.8777], [0.0912, 0.4127, 0.8924, 0.999, 0.3943, 0.7149, 0.6594, 0.9407, 0.1389, 0.869, 0.5327, 0.9266, 0.3542, 0.5418], [0.3918, 0.4188, 0.6672, 0.1099, 0.7944, 0.2948, 0.2891, 0.1497, 0.7059, 0.3878, 0.9611, 0.6279, 0.7073, 0.341], [0.6688, 0.6786, 0.8183, 0.4199, 0.7253, 0.3089, 0.2578, 0.392, 0.6444, 0.1106, 0.1701, 0.8393, 0.0784, 0.0707]]]]], 3, Con37262), 
LMin54137 = minimum_layer([Res15390,Con37262], Min54137), 
exec_layers([LUp_19046,LRes15390,LLoc83138,LZer56304,LCon37262,LMin54137],["Up_19046","Res15390","Loc83138","Zer56304","Con37262","Min54137"],Min54137,"Min54137")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.4671000, 0.9867000, 0.8097000, 0.7902000, 0.4768000, 0.4882000, 0.6770000, 0.6349000, 0.1286000, 0.0761000, 0.4322000, 0.1105000, 0.7651000, 0.2243000], [0.0000000, 0.0000000, 0.1731000, 0.4918000, 0.9091000, 0.8260000, 0.7254000, 0.1330000, 0.0959000, 0.9672000, 0.5136000, 0.1331000, 0.1339000, 0.4903000, 0.6374000, 0.9229000], [0.0000000, 0.0000000, 0.6538000, 0.4589000, 0.9721000, 0.0844000, 0.9824000, 0.1050000, 0.9330000, 0.4490000, 0.0925000, 0.0886000, 0.3977000, 0.5349000, 0.6217000, 0.9336000], [0.0000000, 0.0000000, 0.1607000, 0.6859000, 0.7265000, 0.3186000, 0.2138000, 0.8499000, 0.8474000, 0.4910000, 0.0888000, 0.7960000, 0.2931000, 0.4564000, 0.4792000, 0.7130000], [0.0000000, 0.0000000, 0.9222000, 0.7443000, 0.3631000, 0.5521000, 0.1025000, 0.4964000, 0.8937000, 0.1819000, 0.5530000, 0.3388000, 0.3911000, 0.4106000, 0.6412000, 0.0037000], [0.0000000, 0.0000000, 0.8745000, 0.1935000, 0.1992000, 0.9453000, 0.7061000, 0.8952000, 0.9448000, 0.2622000, 0.0838000, 0.3035000, 0.1532000, 0.0774000, 0.3153000, 0.2010000]], [[0.0000000, 0.0000000, 0.3085000, 0.1606000, 0.0356000, 0.6956000, 0.0839000, 0.9766000, 0.7855000, 0.1798000, 0.1496000, 0.5385000, 0.6621000, 0.7458000, 0.9852000, 0.4118000], [0.0000000, 0.0000000, 0.0712000, 0.1171000, 0.0898000, 0.9642000, 0.9660000, 0.6756000, 0.7208000, 0.4927000, 0.3376000, 0.9588000, 0.5726000, 0.1691000, 0.1408000, 0.0817000], [0.0000000, 0.0000000, 0.6065000, 0.8422000, 0.2835000, 0.9009000, 0.5838000, 0.6092000, 0.7849000, 0.3744000, 0.7219000, 0.7279000, 0.7181000, 0.4999000, 0.2895000, 0.8777000], [0.0000000, 0.0000000, 0.0912000, 0.4127000, 0.8924000, 0.9990000, 0.3943000, 0.7149000, 0.6594000, 0.9407000, 0.1389000, 0.8690000, 0.5327000, 0.9266000, 0.3542000, 0.5418000], [0.0000000, 0.0000000, 0.3918000, 0.4188000, 0.6672000, 0.1099000, 0.7944000, 0.2948000, 0.2891000, 0.1497000, 0.7059000, 0.3878000, 0.9611000, 0.6279000, 0.7073000, 0.3410000], [0.8208391, 0.3616331, 0.6688000, 0.6786000, 0.8183000, 0.4199000, 0.7253000, 0.3089000, 0.2578000, 0.3920000, 0.6444000, 0.1106000, 0.1701000, 0.8393000, 0.0784000, 0.0707000]]]]

Expected (Unparsed): [[[[0,0,0.4671,0.9867,0.8097,0.7902,0.4768,0.4882,0.677,0.6349,0.1286,0.0761,0.4322,0.1105,0.7651,0.2243],[0,0,0.1731,0.4918,0.9091,0.826,0.7254,0.133,0.0959,0.9672,0.5136,0.1331,0.1339,0.4903,0.6374,0.9229],[0,0,0.6538,0.4589,0.9721,0.0844,0.9824,0.105,0.933,0.449,0.0925,0.0886,0.3977,0.5349,0.6217,0.9336],[0,0,0.1607,0.6859,0.7265,0.3186,0.2138,0.8499,0.8474,0.491,0.0888,0.796,0.2931,0.4564,0.4792,0.713],[0,0,0.9222,0.7443,0.3631,0.5521,0.1025,0.4964,0.8937,0.1819,0.553,0.3388,0.3911,0.4106,0.6412,0.0037],[0,0,0.8745,0.1935,0.1992,0.9453,0.7061,0.8952,0.9448,0.2622,0.0838,0.3035,0.1532,0.0774,0.3153,0.201]],[[0,0,0.3085,0.1606,0.0356,0.6956,0.0839,0.9766,0.7855,0.1798,0.1496,0.5385,0.6621,0.7458,0.9852,0.4118],[0,0,0.0712,0.1171,0.0898,0.9642,0.966,0.6756,0.7208,0.4927,0.3376,0.9588,0.5726,0.1691,0.1408,0.0817],[0,0,0.6065,0.8422,0.2835,0.9009,0.5838,0.6092,0.7849,0.3744,0.7219,0.7279,0.7181,0.4999,0.2895,0.8777],[0,0,0.0912,0.4127,0.8924,0.999,0.3943,0.7149,0.6594,0.9407,0.1389,0.869,0.5327,0.9266,0.3542,0.5418],[0,0,0.3918,0.4188,0.6672,0.1099,0.7944,0.2948,0.2891,0.1497,0.7059,0.3878,0.9611,0.6279,0.7073,0.341],[0.8208391100000001,0.36163311,0.6688,0.6786,0.8183,0.4199,0.7253,0.3089,0.2578,0.392,0.6444,0.1106,0.1701,0.8393,0.0784,0.0707]]]]

Actual:   [[[[0, 0, 0.4671, 0.9867, 0.8097, 0.7902, 0.4768, 0.4882, 0.677, 0.6349, 0.1286, 0.0761, 0.4322, 0.1105, 0.7651, 0.2243], [0, 0, 0.1731, 0.4918, 0.9091, 0.826, 0.7254, 0.133, 0.0959, 0.9672, 0.5136, 0.1331, 0.1339, 0.4903, 0.6374, 0.9229], [0, 0, 0.6538, 0.4589, 0.9721, 0.0844, 0.9824, 0.105, 0.933, 0.449, 0.0925, 0.0886, 0.3977, 0.5349, 0.6217, 0.9336], [0, 0, 0.1607, 0.6859, 0.7265, 0.3186, 0.2138, 0.8499, 0.8474, 0.491, 0.0888, 0.796, 0.2931, 0.4564, 0.4792, 0.713], [0, 0, 0.9222, 0.7443, 0.3631, 0.5521, 0.1025, 0.4964, 0.8937, 0.1819, 0.553, 0.3388, 0.3911, 0.4106, 0.6412, 0.0037], [0, 0, 0.8745, 0.1935, 0.1992, 0.9453, 0.7061, 0.8952, 0.9448, 0.2622, 0.0838, 0.3035, 0.1532, 0.0774, 0.3153, 0.201]], [[0, 0, 0.3085, 0.1606, 0.0356, 0.6956, 0.0839, 0.9766, 0.7855, 0.1798, 0.1496, 0.5385, 0.6621, 0.7458, 0.9852, 0.4118], [0, 0, 0.0712, 0.1171, 0.0898, 0.9642, 0.966, 0.6756, 0.7208, 0.4927, 0.3376, 0.9588, 0.5726, 0.1691, 0.1408, 0.0817], [0, 0, 0.6065, 0.8422, 0.2835, 0.9009, 0.5838, 0.6092, 0.7849, 0.3744, 0.7219, 0.7279, 0.7181, 0.4999, 0.2895, 0.8777], [0, 0, 0.0912, 0.4127, 0.8924, 0.999, 0.3943, 0.7149, 0.6594, 0.9407, 0.1389, 0.869, 0.5327, 0.9266, 0.3542, 0.5418], [0, 0, 0.3918, 0.4188, 0.6672, 0.1099, 0.7944, 0.2948, 0.2891, 0.1497, 0.7059, 0.3878, 0.9611, 0.6279, 0.7073, 0.341], [0.8209, 0.3617, 0.6688, 0.6786, 0.8183, 0.4199, 0.7253, 0.3089, 0.2578, 0.392, 0.6444, 0.1106, 0.1701, 0.8393, 0.0784, 0.0707]]]]

Expected: [[[[0, 0, 0.4671, 0.9867, 0.8097, 0.7902, 0.4768, 0.4882, 0.677, 0.6349, 0.1286, 0.0761, 0.4322, 0.1105, 0.7651, 0.2243], [0, 0, 0.1731, 0.4918, 0.9091, 0.826, 0.7254, 0.133, 0.0959, 0.9672, 0.5136, 0.1331, 0.1339, 0.4903, 0.6374, 0.9229], [0, 0, 0.6538, 0.4589, 0.9721, 0.0844, 0.9824, 0.105, 0.933, 0.449, 0.0925, 0.0886, 0.3977, 0.5349, 0.6217, 0.9336], [0, 0, 0.1607, 0.6859, 0.7265, 0.3186, 0.2138, 0.8499, 0.8474, 0.491, 0.0888, 0.796, 0.2931, 0.4564, 0.4792, 0.713], [0, 0, 0.9222, 0.7443, 0.3631, 0.5521, 0.1025, 0.4964, 0.8937, 0.1819, 0.553, 0.3388, 0.3911, 0.4106, 0.6412, 0.0037], [0, 0, 0.8745, 0.1935, 0.1992, 0.9453, 0.7061, 0.8952, 0.9448, 0.2622, 0.0838, 0.3035, 0.1532, 0.0774, 0.3153, 0.201]], [[0, 0, 0.3085, 0.1606, 0.0356, 0.6956, 0.0839, 0.9766, 0.7855, 0.1798, 0.1496, 0.5385, 0.6621, 0.7458, 0.9852, 0.4118], [0, 0, 0.0712, 0.1171, 0.0898, 0.9642, 0.966, 0.6756, 0.7208, 0.4927, 0.3376, 0.9588, 0.5726, 0.1691, 0.1408, 0.0817], [0, 0, 0.6065, 0.8422, 0.2835, 0.9009, 0.5838, 0.6092, 0.7849, 0.3744, 0.7219, 0.7279, 0.7181, 0.4999, 0.2895, 0.8777], [0, 0, 0.0912, 0.4127, 0.8924, 0.999, 0.3943, 0.7149, 0.6594, 0.9407, 0.1389, 0.869, 0.5327, 0.9266, 0.3542, 0.5418], [0, 0, 0.3918, 0.4188, 0.6672, 0.1099, 0.7944, 0.2948, 0.2891, 0.1497, 0.7059, 0.3878, 0.9611, 0.6279, 0.7073, 0.341], [0.8209, 0.3617, 0.6688, 0.6786, 0.8183, 0.4199, 0.7253, 0.3089, 0.2578, 0.392, 0.6444, 0.1106, 0.1701, 0.8393, 0.0784, 0.0707]]]]