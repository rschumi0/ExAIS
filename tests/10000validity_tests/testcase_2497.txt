import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro72777 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot47663 = tf.keras.layers.Input(shape=([3]))
in1Dot47663 = tf.keras.layers.Input(shape=([3]))

Cro72777 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro72777', )(in0Cro72777)
GRU25605 = keras.layers.GRU(1,reset_after=True, recurrent_activation='sigmoid', name = 'GRU25605', )(Cro72777)
Res77433 = keras.layers.Reshape((1, 1), name = 'Res77433', )(GRU25605)
Glo70309 = keras.layers.GlobalAveragePooling1D(name = 'Glo70309', )(Res77433)
Dot47663 = keras.layers.Dot(axes=(1, 1), name = 'Dot47663', )([in0Dot47663,in1Dot47663])
Add86093 = keras.layers.Add(name = 'Add86093', )([Glo70309,Dot47663])
Res80929 = keras.layers.Reshape((1, 1), name = 'Res80929', )(Add86093)
Up_21817 = keras.layers.UpSampling1D(size=(1), name = 'Up_21817', )(Res80929)
model = tf.keras.models.Model(inputs=[in0Cro72777,in0Dot47663,in1Dot47663], outputs=Up_21817)
w = model.get_layer('GRU25605').get_weights() 
w[0] = np.array([[10, 1, 2]])
w[1] = np.array([[5, 6, 7]])
w[2] = np.array([[9, 7, 4], [3, 3, 3]])
model.get_layer('GRU25605').set_weights(w) 
in0Cro72777 = tf.constant([[[1.4476], [1.3249], [1.3925]]])
in0Dot47663 = tf.constant([[0.3159, 0.9703, 0.544]])
in1Dot47663 = tf.constant([[0.2311, 0.952, 0.9497]])
print (np.array2string(model.predict([in0Cro72777,in0Dot47663,in1Dot47663],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_21817.png')

LCro72777 = cropping1D_layer([[[1.4476], [1.3249], [1.3925]]], 0, 0, Cro72777), 
LGRU25605 = gru_layer(Cro72777,[[10, 1, 2]],[[5, 6, 7]],[[9, 7, 4], [3, 3, 3]], true, GRU25605), 
LRes77433 = reshape_layer(GRU25605, [1, 1], Res77433), 
LGlo70309 = global_average_pooling1D_layer(Res77433, Glo70309), 
LDot47663 = dot_layer([[0.3159, 0.9703, 0.544]], [[0.2311, 0.952, 0.9497]], 1, 1, Dot47663), 
LAdd86093 = add_layer([Glo70309,Dot47663], Add86093), 
LRes80929 = reshape_layer(Add86093, [1, 1], Res80929), 
LUp_21817 = up_sampling1D_layer(Res80929, 1, Up_21817), 
exec_layers([LCro72777,LGRU25605,LRes77433,LGlo70309,LDot47663,LAdd86093,LRes80929,LUp_21817],["Cro72777","GRU25605","Res77433","Glo70309","Dot47663","Add86093","Res80929","Up_21817"],Up_21817,"Up_21817")

Actual (Unparsed): [[[1.5133670]]]

Expected (Unparsed): [[[1.5133668900195076]]]

Actual:   [[[1.5134]]]

Expected: [[[1.5134]]]