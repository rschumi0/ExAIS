import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_71245 = tf.keras.layers.Input(shape=([3, 2, 4]))

Up_71245 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_71245', )(in0Up_71245)
Res22498 = keras.layers.Reshape((3, 4, 4, 1), name = 'Res22498', )(Up_71245)
Glo90750 = keras.layers.GlobalMaxPool3D(name = 'Glo90750', )(Res22498)
Res25526 = keras.layers.Reshape((1, 1), name = 'Res25526', )(Glo90750)
Res5557 = keras.layers.Reshape((1, 1, 1), name = 'Res5557', )(Res25526)
Con6580 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 1), padding='same', name = 'Con6580', )(Res5557)
model = tf.keras.models.Model(inputs=[in0Up_71245], outputs=Con6580)
w = model.get_layer('Con6580').get_weights() 
w[0] = np.array([[[[0.4644], [0.4731], [0.1037], [0.2911]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con6580').set_weights(w) 
in0Up_71245 = tf.constant([[[[1.6462, 1.4632, 1.1334, 1.7943], [1.5002, 1.5376, 1.9964, 1.8424]], [[1.9807, 1.2732, 1.5738, 1.0185], [1.6105, 1.3965, 1.0123, 1.2416]], [[1.4481, 1.9848, 1.8114, 1.4611], [1.2067, 1.4145, 1.4588, 1.2315]]]])
print (np.array2string(model.predict([in0Up_71245],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con6580.png')

LUp_71245 = up_sampling2D_layer([[[[1.6462, 1.4632, 1.1334, 1.7943], [1.5002, 1.5376, 1.9964, 1.8424]], [[1.9807, 1.2732, 1.5738, 1.0185], [1.6105, 1.3965, 1.0123, 1.2416]], [[1.4481, 1.9848, 1.8114, 1.4611], [1.2067, 1.4145, 1.4588, 1.2315]]]], 1, 2, Up_71245), 
LRes22498 = reshape_layer(Up_71245, [3, 4, 4, 1], Res22498), 
LGlo90750 = global_max_pool3D_layer(Res22498, Glo90750), 
LRes25526 = reshape_layer(Glo90750, [1, 1], Res25526), 
LRes5557 = reshape_layer(Res25526, [1, 1, 1], Res5557), 
LCon6580 = conv2D_transpose_layer(Res5557, 1, 1,[[[[0.4644], [0.4731], [0.1037], [0.2911]]]],[0, 0, 0, 0], 1, 1, true, Con6580), 
exec_layers([LUp_71245,LRes22498,LGlo90750,LRes25526,LRes5557,LCon6580],["Up_71245","Res22498","Glo90750","Res25526","Res5557","Con6580"],Con6580,"Con6580")

Actual (Unparsed): [[[[0.9271282, 0.9444968, 0.2070267, 0.5811520]]]]

Expected (Unparsed): [[[[0.92712816,0.94449684,0.20702668,0.5811520400000001]]]]

Actual:   [[[[0.9272, 0.9445, 0.2071, 0.5812]]]]

Expected: [[[[0.9272, 0.9445, 0.2071, 0.5812]]]]