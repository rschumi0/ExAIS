import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max47954 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max47954 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Max47954 = keras.layers.Maximum(name = 'Max47954', )([in0Max47954,in1Max47954])
Res28931 = keras.layers.Reshape((1, 2, 4), name = 'Res28931', )(Max47954)
Res24173 = keras.layers.Reshape((1, 8), name = 'Res24173', )(Res28931)
Up_40103 = keras.layers.UpSampling1D(size=(1), name = 'Up_40103', )(Res24173)
Den86099 = keras.layers.Dense(2,name = 'Den86099', )(Up_40103)
model = tf.keras.models.Model(inputs=[in0Max47954,in1Max47954], outputs=Den86099)
w = model.get_layer('Den86099').get_weights() 
w[0] = np.array([[0.747, 0.9676], [0.0517, 0.4969], [0.8813, 0.3094], [0.3883, 0.1243], [0.6327, 0.4419], [0.9271, 0.3973], [0.1465, 0.5958], [0.3559, 0.9308]])
w[1] = np.array([0.618, 0.2938])
model.get_layer('Den86099').set_weights(w) 
in0Max47954 = tf.constant([[[[[0.5323, 0.4499], [0.4554, 0.0571]], [[0.592, 0.9915], [0.1585, 0.1027]]]]])
in1Max47954 = tf.constant([[[[[0.3137, 0.3896], [0.9621, 0.245]], [[0.69, 0.6822], [0.8793, 0.9403]]]]])
print (np.array2string(model.predict([in0Max47954,in1Max47954],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den86099.png')

LMax47954 = maximum_layer([[[[[[0.5323, 0.4499], [0.4554, 0.0571]], [[0.592, 0.9915], [0.1585, 0.1027]]]]], [[[[[0.3137, 0.3896], [0.9621, 0.245]], [[0.69, 0.6822], [0.8793, 0.9403]]]]]], Max47954), 
LRes28931 = reshape_layer(Max47954, [1, 2, 4], Res28931), 
LRes24173 = reshape_layer(Res28931, [1, 8], Res24173), 
LUp_40103 = up_sampling1D_layer(Res24173, 1, Up_40103), 
LDen86099 = dense_layer(Up_40103, [[0.747, 0.9676], [0.0517, 0.4969], [0.8813, 0.3094], [0.3883, 0.1243], [0.6327, 0.4419], [0.9271, 0.3973], [0.1465, 0.5958], [0.3559, 0.9308]],[0.618, 0.2938], Den86099), 
exec_layers([LMax47954,LRes28931,LRes24173,LUp_40103,LDen86099],["Max47954","Res28931","Res24173","Up_40103","Den86099"],Den86099,"Den86099")

Actual (Unparsed): [[[3.8011731, 3.4584882]]]

Expected (Unparsed): [[[3.8011730299999997,3.45848816]]]

Actual:   [[[3.8012, 3.4585]]]

Expected: [[[3.8012, 3.4585]]]