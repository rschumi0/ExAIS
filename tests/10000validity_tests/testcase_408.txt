import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo73361 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Con50017 = tf.keras.layers.Input(shape=([2, 1]))
in0Add39612 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add39612 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con31128 = tf.keras.layers.Input(shape=([2, 5, 1, 2]))
in0Cro30587 = tf.keras.layers.Input(shape=([2, 3, 1, 3]))

Glo73361 = keras.layers.GlobalMaxPool3D(name = 'Glo73361', )(in0Glo73361)
Res40320 = keras.layers.Reshape((2, 1), name = 'Res40320', )(Glo73361)
Con50017 = keras.layers.Concatenate(axis=2, name = 'Con50017', )([Res40320,in0Con50017])
Add39612 = keras.layers.Add(name = 'Add39612', )([in0Add39612,in1Add39612])
Res21849 = keras.layers.Reshape((1, 2), name = 'Res21849', )(Add39612)
Dot81962 = keras.layers.Dot(axes=(2, 2), name = 'Dot81962', )([Con50017,Res21849])
Res62224 = keras.layers.Reshape((2, 1, 1), name = 'Res62224', )(Dot81962)
Res77829 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res77829', )(Res62224)
Zer55505 = keras.layers.ZeroPadding3D(padding=((0, 0), (4, 0), (0, 0)), name = 'Zer55505', )(Res77829)
Con31128 = keras.layers.Concatenate(axis=4, name = 'Con31128', )([Zer55505,in0Con31128])
Cro30587 = keras.layers.Cropping3D(cropping=((1, 0), (0, 0), (0, 0)), name = 'Cro30587', )(in0Cro30587)
Zer58769 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (0, 0)), name = 'Zer58769', )(Cro30587)
Ave43999 = keras.layers.Average(name = 'Ave43999', )([Con31128,Zer58769])
Res14232 = keras.layers.Reshape((2, 5, 3), name = 'Res14232', )(Ave43999)
Res69925 = keras.layers.Reshape((2, 15), name = 'Res69925', )(Res14232)
Max46556 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max46556', )(Res69925)
model = tf.keras.models.Model(inputs=[in0Glo73361,in0Con50017,in0Add39612,in1Add39612,in0Con31128,in0Cro30587], outputs=Max46556)
in0Glo73361 = tf.constant([[[[[1.5339, 1.2208]], [[1.8084, 1.7638]]]]])
in0Con50017 = tf.constant([[[0.268], [0.345]]])
in0Add39612 = tf.constant([[[[0.2066, 0.0036]]]])
in1Add39612 = tf.constant([[[[0.9991, 0.6409]]]])
in0Con31128 = tf.constant([[[[[0.1473, 0.8594]], [[0.4737, 0.9132]], [[0.0385, 0.5223]], [[0.1659, 0.9184]], [[0.6714, 0.1927]]], [[[0.4615, 0.2813]], [[0.952, 0.293]], [[0.0121, 0.1337]], [[0.9654, 0.8263]], [[0.3276, 0.8593]]]]])
in0Cro30587 = tf.constant([[[[[1.3302, 1.0713, 1.966]], [[1.5554, 1.6747, 1.3683]], [[1.0069, 1.1549, 1.2176]]], [[[1.894, 1.7146, 1.7244]], [[1.6317, 1.1197, 1.7423]], [[1.2963, 1.996, 1.4276]]]]])
print (np.array2string(model.predict([in0Glo73361,in0Con50017,in0Add39612,in1Add39612,in0Con31128,in0Cro30587],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max46556.png')

LGlo73361 = global_max_pool3D_layer([[[[[1.5339, 1.2208]], [[1.8084, 1.7638]]]]], Glo73361), 
LRes40320 = reshape_layer(Glo73361, [2, 1], Res40320), 
LCon50017 = concatenate_layer([Res40320,[[[0.268], [0.345]]]], 2, Con50017), 
LAdd39612 = add_layer([[[[[0.2066, 0.0036]]]], [[[[0.9991, 0.6409]]]]], Add39612), 
LRes21849 = reshape_layer(Add39612, [1, 2], Res21849), 
LDot81962 = dot_layer(Con50017,Res21849, 2, 2, Dot81962), 
LRes62224 = reshape_layer(Dot81962, [2, 1, 1], Res62224), 
LRes77829 = reshape_layer(Res62224, [2, 1, 1, 1], Res77829), 
LZer55505 = zero_padding3D_layer(Res77829, 0, 0, 4, 0, 0, 0, Zer55505), 
LCon31128 = concatenate_layer([Zer55505,[[[[[0.1473, 0.8594]], [[0.4737, 0.9132]], [[0.0385, 0.5223]], [[0.1659, 0.9184]], [[0.6714, 0.1927]]], [[[0.4615, 0.2813]], [[0.952, 0.293]], [[0.0121, 0.1337]], [[0.9654, 0.8263]], [[0.3276, 0.8593]]]]]], 4, Con31128), 
LCro30587 = cropping3D_layer([[[[[1.3302, 1.0713, 1.966]], [[1.5554, 1.6747, 1.3683]], [[1.0069, 1.1549, 1.2176]]], [[[1.894, 1.7146, 1.7244]], [[1.6317, 1.1197, 1.7423]], [[1.2963, 1.996, 1.4276]]]]], 1, 0, 0, 0, 0, 0, Cro30587), 
LZer58769 = zero_padding3D_layer(Cro30587, 1, 0, 2, 0, 0, 0, Zer58769), 
LAve43999 = average_layer([Con31128,Zer58769], Ave43999), 
LRes14232 = reshape_layer(Ave43999, [2, 5, 3], Res14232), 
LRes69925 = reshape_layer(Res14232, [2, 15], Res69925), 
LMax46556 = max_pool1D_layer(Res69925, 1, 1, true, Max46556), 
exec_layers([LGlo73361,LRes40320,LCon50017,LAdd39612,LRes21849,LDot81962,LRes62224,LRes77829,LZer55505,LCon31128,LCro30587,LZer58769,LAve43999,LRes14232,LRes69925,LMax46556],["Glo73361","Res40320","Con50017","Add39612","Res21849","Dot81962","Res62224","Res77829","Zer55505","Con31128","Cro30587","Zer58769","Ave43999","Res14232","Res69925","Max46556"],Max46556,"Max46556")

Actual (Unparsed): [[[0.0000000, 0.0736500, 0.4297000, 0.0000000, 0.2368500, 0.4566000, 0.0000000, 0.0192500, 0.2611500, 0.0000000, 0.0829500, 0.4592000, 1.1765570, 0.3357000, 0.0963500], [0.0000000, 0.2307500, 0.1406500, 0.0000000, 0.4760000, 0.1465000, 0.9470000, 0.8633500, 0.9290500, 0.8158500, 1.0425500, 1.2843000, 1.8226331, 1.1618000, 1.1434500]]]

Expected (Unparsed): [[[0,0.07365,0.4297,0,0.23685,0.4566,0,0.01925,0.26115,0,0.08295,0.4592,1.17655694,0.3357,0.09635],[0,0.23075,0.14065,0,0.476,0.1465,0.947,0.86335,0.9290499999999999,0.81585,1.0425499999999999,1.2843,1.82263308,1.1618,1.14345]]]

Actual:   [[[0, 0.0737, 0.4297, 0, 0.2369, 0.4566, 0, 0.0193, 0.2612, 0, 0.083, 0.4592, 1.1766, 0.3357, 0.0964], [0, 0.2308, 0.1407, 0, 0.476, 0.1465, 0.947, 0.8634, 0.9291, 0.8159, 1.0426, 1.2843, 1.8227, 1.1618, 1.1435]]]

Expected: [[[0, 0.0737, 0.4297, 0, 0.2369, 0.4566, 0, 0.0193, 0.2612, 0, 0.083, 0.4592, 1.1766, 0.3357, 0.0964], [0, 0.2308, 0.1407, 0, 0.476, 0.1465, 0.947, 0.8634, 0.9291, 0.8159, 1.0426, 1.2843, 1.8227, 1.1618, 1.1435]]]