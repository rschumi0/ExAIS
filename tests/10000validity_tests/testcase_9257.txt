import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub20299 = tf.keras.layers.Input(shape=([2, 3, 3, 3]))
in1Sub20299 = tf.keras.layers.Input(shape=([2, 3, 3, 3]))

Sub20299 = keras.layers.Subtract(name = 'Sub20299', )([in0Sub20299,in1Sub20299])
Res22408 = keras.layers.Reshape((2, 3, 9), name = 'Res22408', )(Sub20299)
Res36533 = keras.layers.Reshape((2, 27), name = 'Res36533', )(Res22408)
Cro69315 = keras.layers.Cropping1D(cropping=((0, 1)), name = 'Cro69315', )(Res36533)
model = tf.keras.models.Model(inputs=[in0Sub20299,in1Sub20299], outputs=Cro69315)
in0Sub20299 = tf.constant([[[[[0.9915, 0.3087, 0.4564], [0.9594, 0.4484, 0.3928], [0.5478, 0.4308, 0.7828]], [[0.7437, 0.9457, 0.8386], [0.7231, 0.5802, 0.3671], [0.3836, 0.0097, 0.6447]], [[0.2402, 0.1268, 0.4227], [0.8248, 0.6509, 0.8591], [0.7098, 0.6679, 0.927]]], [[[0.7739, 0.1331, 0.6884], [0.8813, 0.7252, 0.6504], [0.1404, 0.5451, 0.768]], [[0.3275, 0.2371, 0.822], [0.6264, 0.437, 0.6318], [0.8634, 0.7102, 0.8406]], [[0.3456, 0.1306, 0.3104], [0.6758, 0.2263, 0.039], [0.6446, 0.0706, 0.4527]]]]])
in1Sub20299 = tf.constant([[[[[0.8075, 0.4935, 0.5978], [0.5606, 0.6311, 0.2728], [0.442, 0.9609, 0.5801]], [[0.519, 0.8072, 0.944], [0.6921, 0.9316, 0.9157], [0.7193, 0.5679, 0.3115]], [[0.0624, 0.1282, 0.4075], [0.9627, 0.5815, 0.2837], [0.8296, 0.3819, 0.2505]]], [[[0.5423, 0.0098, 0.3538], [0.6173, 0.8928, 0.6359], [0.8864, 0.9652, 0.0588]], [[0.9367, 0.7791, 0.1513], [0.3546, 0.5683, 0.9938], [0.3495, 0.6095, 0.4569]], [[0.4195, 0.8109, 0.2812], [0.7915, 0.0649, 0.1105], [0.2139, 0.2373, 0.1897]]]]])
print (np.array2string(model.predict([in0Sub20299,in1Sub20299],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro69315.png')

LSub20299 = subtract_layer([[[[[0.9915, 0.3087, 0.4564], [0.9594, 0.4484, 0.3928], [0.5478, 0.4308, 0.7828]], [[0.7437, 0.9457, 0.8386], [0.7231, 0.5802, 0.3671], [0.3836, 0.0097, 0.6447]], [[0.2402, 0.1268, 0.4227], [0.8248, 0.6509, 0.8591], [0.7098, 0.6679, 0.927]]], [[[0.7739, 0.1331, 0.6884], [0.8813, 0.7252, 0.6504], [0.1404, 0.5451, 0.768]], [[0.3275, 0.2371, 0.822], [0.6264, 0.437, 0.6318], [0.8634, 0.7102, 0.8406]], [[0.3456, 0.1306, 0.3104], [0.6758, 0.2263, 0.039], [0.6446, 0.0706, 0.4527]]]]], [[[[[0.8075, 0.4935, 0.5978], [0.5606, 0.6311, 0.2728], [0.442, 0.9609, 0.5801]], [[0.519, 0.8072, 0.944], [0.6921, 0.9316, 0.9157], [0.7193, 0.5679, 0.3115]], [[0.0624, 0.1282, 0.4075], [0.9627, 0.5815, 0.2837], [0.8296, 0.3819, 0.2505]]], [[[0.5423, 0.0098, 0.3538], [0.6173, 0.8928, 0.6359], [0.8864, 0.9652, 0.0588]], [[0.9367, 0.7791, 0.1513], [0.3546, 0.5683, 0.9938], [0.3495, 0.6095, 0.4569]], [[0.4195, 0.8109, 0.2812], [0.7915, 0.0649, 0.1105], [0.2139, 0.2373, 0.1897]]]]], Sub20299), 
LRes22408 = reshape_layer(Sub20299, [2, 3, 9], Res22408), 
LRes36533 = reshape_layer(Res22408, [2, 27], Res36533), 
LCro69315 = cropping1D_layer(Res36533, 0, 1, Cro69315), 
exec_layers([LSub20299,LRes22408,LRes36533,LCro69315],["Sub20299","Res22408","Res36533","Cro69315"],Cro69315,"Cro69315")

Actual (Unparsed): [[[0.1840000, -0.1848000, -0.1414000, 0.3988000, -0.1827000, 0.1200000, 0.1058000, -0.5301000, 0.2027000, 0.2247000, 0.1385000, -0.1054000, 0.0310000, -0.3514000, -0.5486000, -0.3357000, -0.5582000, 0.3332000, 0.1778000, -0.0014000, 0.0152000, -0.1379000, 0.0694000, 0.5754000, -0.1198000, 0.2860000, 0.6765000]]]

Expected (Unparsed): [[[0.18400000000000005,-0.18480000000000002,-0.14140000000000003,0.39880000000000004,-0.18269999999999997,0.12,0.10579999999999995,-0.5301,0.2027000000000001,0.2247,0.13849999999999996,-0.10539999999999994,0.030999999999999917,-0.35139999999999993,-0.5486,-0.33570000000000005,-0.5581999999999999,0.33320000000000005,0.1778,-0.0014000000000000123,0.015200000000000047,-0.13790000000000002,0.06940000000000002,0.5753999999999999,-0.11980000000000002,0.28600000000000003,0.6765000000000001]]]

Actual:   [[[0.184, -0.1848, -0.1414, 0.3988, -0.1827, 0.12, 0.1058, -0.5301, 0.2027, 0.2247, 0.1385, -0.1054, 0.031, -0.3514, -0.5486, -0.3357, -0.5582, 0.3332, 0.1778, -0.0014, 0.0152, -0.1379, 0.0694, 0.5754, -0.1198, 0.286, 0.6765]]]

Expected: [[[0.1841, -0.1848, -0.1414, 0.3989, -0.1826, 0.12, 0.1058, -0.5301, 0.2028, 0.2247, 0.1385, -0.1053, 0.031, -0.3513, -0.5486, -0.3357, -0.5581, 0.3333, 0.1778, -0.0014, 0.0153, -0.1379, 0.0695, 0.5754, -0.1198, 0.2861, 0.6766]]]