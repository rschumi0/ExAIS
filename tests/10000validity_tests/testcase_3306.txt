import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sof32906 = tf.keras.layers.Input(shape=([2, 2]))
in0Con54892 = tf.keras.layers.Input(shape=([3, 2, 2, 2]))
in0Sub15561 = tf.keras.layers.Input(shape=([3, 2, 2, 3]))
in1Sub15561 = tf.keras.layers.Input(shape=([3, 2, 2, 3]))

Sof32906 = keras.layers.Softmax(axis=1, name = 'Sof32906', input_shape=(2, 2))(in0Sof32906)
Res5810 = keras.layers.Reshape((2, 2, 1), name = 'Res5810', )(Sof32906)
Res10631 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res10631', )(Res5810)
Zer61470 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer61470', )(Res10631)
Con54892 = keras.layers.Concatenate(axis=4, name = 'Con54892', )([Zer61470,in0Con54892])
Sub15561 = keras.layers.Subtract(name = 'Sub15561', )([in0Sub15561,in1Sub15561])
Add11932 = keras.layers.Add(name = 'Add11932', )([Con54892,Sub15561])
model = tf.keras.models.Model(inputs=[in0Sof32906,in0Con54892,in0Sub15561,in1Sub15561], outputs=Add11932)
in0Sof32906 = tf.constant([[[0.9286, 0.7996], [0.133, 0.3225]]])
in0Con54892 = tf.constant([[[[[0.2684, 0.3556], [0.7248, 0.9379]], [[0.1671, 0.8832], [0.7672, 0.3746]]], [[[0.1808, 0.5755], [0.472, 0.1476]], [[0.8828, 0.0511], [0.8, 0.141]]], [[[0.9052, 0.531], [0.3437, 0.6802]], [[0.0373, 0.2415], [0.4761, 0.3594]]]]])
in0Sub15561 = tf.constant([[[[[0.2251, 0.2107, 0.5943], [0.1647, 0.6682, 0.554]], [[0.4959, 0.2914, 0.513], [0.9993, 0.9903, 0.1354]]], [[[0.1651, 0.2415, 0.8463], [0.5489, 0.6478, 0.3424]], [[0.5543, 0.762, 0.462], [0.7967, 0.6674, 0.7622]]], [[[0.1158, 0.4015, 0.9827], [0.219, 0.8564, 0.765]], [[0.2484, 0.2957, 0.2964], [0.7135, 0.5724, 0.5603]]]]])
in1Sub15561 = tf.constant([[[[[0.6948, 0.4289, 0.6042], [0.7379, 0.6263, 0.8807]], [[0.8628, 0.23, 0.653], [0.0046, 0.2903, 0.1674]]], [[[0.3976, 0.1229, 0.2293], [0.2605, 0.1117, 0.3033]], [[0.5368, 0.865, 0.4278], [0.7087, 0.4788, 0.488]]], [[[0.4932, 0.5016, 0.3807], [0.4289, 0.0909, 0.5388]], [[0.7482, 0.3686, 0.6718], [0.9153, 0.7189, 0.5001]]]]])
print (np.array2string(model.predict([in0Sof32906,in0Con54892,in0Sub15561,in1Sub15561],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add11932.png')

LSof32906 = softmax_layer([[[0.9286, 0.7996], [0.133, 0.3225]]], 1, Sof32906), 
LRes5810 = reshape_layer(Sof32906, [2, 2, 1], Res5810), 
LRes10631 = reshape_layer(Res5810, [2, 2, 1, 1], Res10631), 
LZer61470 = zero_padding3D_layer(Res10631, 1, 0, 0, 0, 1, 0, Zer61470), 
LCon54892 = concatenate_layer([Zer61470,[[[[[0.2684, 0.3556], [0.7248, 0.9379]], [[0.1671, 0.8832], [0.7672, 0.3746]]], [[[0.1808, 0.5755], [0.472, 0.1476]], [[0.8828, 0.0511], [0.8, 0.141]]], [[[0.9052, 0.531], [0.3437, 0.6802]], [[0.0373, 0.2415], [0.4761, 0.3594]]]]]], 4, Con54892), 
LSub15561 = subtract_layer([[[[[0.2251, 0.2107, 0.5943], [0.1647, 0.6682, 0.554]], [[0.4959, 0.2914, 0.513], [0.9993, 0.9903, 0.1354]]], [[[0.1651, 0.2415, 0.8463], [0.5489, 0.6478, 0.3424]], [[0.5543, 0.762, 0.462], [0.7967, 0.6674, 0.7622]]], [[[0.1158, 0.4015, 0.9827], [0.219, 0.8564, 0.765]], [[0.2484, 0.2957, 0.2964], [0.7135, 0.5724, 0.5603]]]]], [[[[[0.6948, 0.4289, 0.6042], [0.7379, 0.6263, 0.8807]], [[0.8628, 0.23, 0.653], [0.0046, 0.2903, 0.1674]]], [[[0.3976, 0.1229, 0.2293], [0.2605, 0.1117, 0.3033]], [[0.5368, 0.865, 0.4278], [0.7087, 0.4788, 0.488]]], [[[0.4932, 0.5016, 0.3807], [0.4289, 0.0909, 0.5388]], [[0.7482, 0.3686, 0.6718], [0.9153, 0.7189, 0.5001]]]]], Sub15561), 
LAdd11932 = add_layer([Con54892,Sub15561], Add11932), 
exec_layers([LSof32906,LRes5810,LRes10631,LZer61470,LCon54892,LSub15561,LAdd11932],["Sof32906","Res5810","Res10631","Zer61470","Con54892","Sub15561","Add11932"],Add11932,"Add11932")

Actual (Unparsed): [[[[[-0.4697000, 0.0502000, 0.3457000], [-0.5732000, 0.7667000, 0.6112000]], [[-0.3669000, 0.2285000, 0.7432000], [0.9947000, 1.4672000, 0.3426000]]], [[[-0.2325000, 0.2994000, 1.1925000], [0.9774325, 1.0081000, 0.1867000]], [[0.0175000, 0.7798000, 0.0853000], [0.7050629, 0.9886000, 0.4152000]]], [[[-0.3774000, 0.8051000, 1.1330000], [0.1010675, 1.1092000, 0.9064000]], [[-0.4998000, -0.0356000, -0.1339000], [0.1811372, 0.3295999, 0.4196000]]]]]

Expected (Unparsed): [[[[[-0.4697,0.05020000000000002,0.3457000000000001],[-0.5731999999999999,0.7667,0.6112]],[[-0.3669,0.22849999999999998,0.7432],[0.9946999999999999,1.4672,0.3426]]],[[[-0.2325,0.2994,1.1925],[0.9774324925860127,1.0081,0.18669999999999998]],[[0.01749999999999996,0.7798,0.08530000000000001],[0.7050628485640734,0.9886,0.4152]]],[[[-0.3774,0.8050999999999999,1.133],[0.10106750741398726,1.1092,0.9064000000000001]],[[-0.49979999999999997,-0.035599999999999965,-0.13389999999999996],[0.18113715143592668,0.32960000000000006,0.41960000000000003]]]]]

Actual:   [[[[[-0.4697, 0.0502, 0.3457], [-0.5732, 0.7667, 0.6112]], [[-0.3669, 0.2285, 0.7432], [0.9947, 1.4672, 0.3426]]], [[[-0.2325, 0.2994, 1.1925], [0.9775, 1.0081, 0.1867]], [[0.0175, 0.7798, 0.0853], [0.7051, 0.9886, 0.4152]]], [[[-0.3774, 0.8051, 1.133], [0.1011, 1.1092, 0.9064]], [[-0.4998, -0.0356, -0.1339], [0.1812, 0.3296, 0.4196]]]]]

Expected: [[[[[-0.4697, 0.0503, 0.3458], [-0.5731, 0.7667, 0.6112]], [[-0.3669, 0.2285, 0.7432], [0.9947, 1.4672, 0.3426]]], [[[-0.2325, 0.2994, 1.1925], [0.9775, 1.0081, 0.1867]], [[0.0175, 0.7798, 0.0854], [0.7051, 0.9886, 0.4152]]], [[[-0.3774, 0.8051, 1.133], [0.1011, 1.1092, 0.9065]], [[-0.4997, -0.0355, -0.1338], [0.1812, 0.3297, 0.4197]]]]]