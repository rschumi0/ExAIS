import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add77959 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add77959 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Max11140 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Max11140 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con95638 = tf.keras.layers.Input(shape=([2]))

Add77959 = keras.layers.Add(name = 'Add77959', )([in0Add77959,in1Add77959])
Res33378 = keras.layers.Reshape((2, 2), name = 'Res33378', )(Add77959)
Fla54970 = keras.layers.Flatten(name = 'Fla54970', )(Res33378)
Max11140 = keras.layers.Maximum(name = 'Max11140', )([in0Max11140,in1Max11140])
Thr86280 = keras.layers.ThresholdedReLU(theta=8.398014656730187, name = 'Thr86280', )(Max11140)
Glo84667 = keras.layers.GlobalMaxPool2D(name = 'Glo84667', )(Thr86280)
Con95638 = keras.layers.Concatenate(axis=1, name = 'Con95638', )([Glo84667,in0Con95638])
Mul48759 = keras.layers.Multiply(name = 'Mul48759', )([Fla54970,Con95638])
model = tf.keras.models.Model(inputs=[in0Add77959,in1Add77959,in0Max11140,in1Max11140,in0Con95638], outputs=Mul48759)
in0Add77959 = tf.constant([[[[0.2334, 0.7736]], [[0.7444, 0.3032]]]])
in1Add77959 = tf.constant([[[[0.8058, 0.7041]], [[0.6732, 0.6475]]]])
in0Max11140 = tf.constant([[[[0.2296, 0.734]], [[0.875, 0.8368]]]])
in1Max11140 = tf.constant([[[[0.9055, 0.6491]], [[0.6936, 0.8397]]]])
in0Con95638 = tf.constant([[0.3124, 0.3674]])
print (np.array2string(model.predict([in0Add77959,in1Add77959,in0Max11140,in1Max11140,in0Con95638],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul48759.png')

LAdd77959 = add_layer([[[[[0.2334, 0.7736]], [[0.7444, 0.3032]]]], [[[[0.8058, 0.7041]], [[0.6732, 0.6475]]]]], Add77959), 
LRes33378 = reshape_layer(Add77959, [2, 2], Res33378), 
LFla54970 = flatten_layer(Res33378, Fla54970), 
LMax11140 = maximum_layer([[[[[0.2296, 0.734]], [[0.875, 0.8368]]]], [[[[0.9055, 0.6491]], [[0.6936, 0.8397]]]]], Max11140), 
LThr86280 = thresholded_relu_layer(Max11140, 8.398014656730187, Thr86280), 
LGlo84667 = global_max_pool2D_layer(Thr86280, Glo84667), 
LCon95638 = concatenate_layer([Glo84667,[[0.3124, 0.3674]]], 1, Con95638), 
LMul48759 = multiply_layer([Fla54970,Con95638], Mul48759), 
exec_layers([LAdd77959,LRes33378,LFla54970,LMax11140,LThr86280,LGlo84667,LCon95638,LMul48759],["Add77959","Res33378","Fla54970","Max11140","Thr86280","Glo84667","Con95638","Mul48759"],Mul48759,"Mul48759")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.4428583, 0.3492872]]

Expected (Unparsed): [[0.0,0.0,0.44285824,0.34928718]]

Actual:   [[0, 0, 0.4429, 0.3493]]

Expected: [[0, 0, 0.4429, 0.3493]]