import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max19776 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max19776 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Max19776 = keras.layers.Maximum(name = 'Max19776', )([in0Max19776,in1Max19776])
Res16457 = keras.layers.Reshape((1, 2, 4), name = 'Res16457', )(Max19776)
Res95032 = keras.layers.Reshape((1, 8), name = 'Res95032', )(Res16457)
Zer10899 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer10899', )(Res95032)
Zer72035 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer72035', )(Zer10899)
Res30204 = keras.layers.Reshape((4, 8, 1), name = 'Res30204', )(Zer72035)
Con42817 = keras.layers.Conv2DTranspose(2, (4, 6),strides=(1, 1), padding='valid', name = 'Con42817', )(Res30204)
model = tf.keras.models.Model(inputs=[in0Max19776,in1Max19776], outputs=Con42817)
w = model.get_layer('Con42817').get_weights() 
w[0] = np.array([[[[0.5419], [0.086]], [[0.2667], [0.8037]], [[0.7045], [0.5198]], [[0.5329], [0.7721]], [[0.7796], [0.1091]], [[0.7412], [0.1965]]], [[[0.8553], [0.6366]], [[0.2841], [0.9172]], [[0.392], [0.5282]], [[0.961], [0.4143]], [[0.571], [0.5867]], [[0.7417], [0.9974]]], [[[0.0391], [0.1147]], [[0.7009], [0.026]], [[0.4531], [0.1744]], [[0.0296], [0.9184]], [[0.6414], [0.2228]], [[0.8983], [0.769]]], [[[0.7807], [0.2564]], [[0.4754], [0.3726]], [[0.712], [0.9011]], [[0.5891], [0.3304]], [[0.4121], [0.5892]], [[0.3634], [0.7011]]]])
w[1] = np.array([0, 0])
model.get_layer('Con42817').set_weights(w) 
in0Max19776 = tf.constant([[[[[0.581, 0.2875], [0.3489, 0.0282]], [[0.6773, 0.4799], [0.738, 0.6318]]]]])
in1Max19776 = tf.constant([[[[[0.541, 0.9254], [0.3493, 0.6925]], [[0.557, 0.5052], [0.6854, 0.9042]]]]])
print (np.array2string(model.predict([in0Max19776,in1Max19776],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con42817.png')

LMax19776 = maximum_layer([[[[[[0.581, 0.2875], [0.3489, 0.0282]], [[0.6773, 0.4799], [0.738, 0.6318]]]]], [[[[[0.541, 0.9254], [0.3493, 0.6925]], [[0.557, 0.5052], [0.6854, 0.9042]]]]]], Max19776), 
LRes16457 = reshape_layer(Max19776, [1, 2, 4], Res16457), 
LRes95032 = reshape_layer(Res16457, [1, 8], Res95032), 
LZer10899 = zero_padding1D_layer(Res95032, 1, 1, Zer10899), 
LZer72035 = zero_padding1D_layer(Zer10899, 1, 0, Zer72035), 
LRes30204 = reshape_layer(Zer72035, [4, 8, 1], Res30204), 
LCon42817 = conv2D_transpose_layer(Res30204, 4, 6,[[[[0.5419], [0.086]], [[0.2667], [0.8037]], [[0.7045], [0.5198]], [[0.5329], [0.7721]], [[0.7796], [0.1091]], [[0.7412], [0.1965]]], [[[0.8553], [0.6366]], [[0.2841], [0.9172]], [[0.392], [0.5282]], [[0.961], [0.4143]], [[0.571], [0.5867]], [[0.7417], [0.9974]]], [[[0.0391], [0.1147]], [[0.7009], [0.026]], [[0.4531], [0.1744]], [[0.0296], [0.9184]], [[0.6414], [0.2228]], [[0.8983], [0.769]]], [[[0.7807], [0.2564]], [[0.4754], [0.3726]], [[0.712], [0.9011]], [[0.5891], [0.3304]], [[0.4121], [0.5892]], [[0.3634], [0.7011]]]],[0, 0], 1, 1, false, Con42817), 
exec_layers([LMax19776,LRes16457,LRes95032,LZer10899,LZer72035,LRes30204,LCon42817],["Max19776","Res16457","Res95032","Zer10899","Zer72035","Res30204","Con42817"],Con42817,"Con42817")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.3148439, 0.0499660], [0.6564270, 0.5465341], [0.8454043, 1.0757876], [1.4299833, 1.2699004], [1.7438937, 1.5742646], [2.2804910, 1.4325769], [2.3390709, 1.5761868], [2.2024313, 1.6006273], [2.0715963, 1.7103526], [1.9261578, 1.2280197], [1.4316472, 0.8779204], [1.2519199, 0.2436652], [0.6701931, 0.1776753]], [[0.4969293, 0.3698646], [0.9565567, 1.1220028], [0.7894144, 1.3780255], [1.6126292, 1.4907280], [2.1340199, 1.9750963], [2.1909869, 2.5757449], [2.5915523, 2.7057611], [2.4864451, 2.5546409], [1.9320420, 2.5165196], [1.8544870, 1.7552917], [1.6650411, 1.3114812], [1.0636728, 1.2665753], [0.6706452, 0.9018491]], [[0.0227171, 0.0666407], [0.4434060, 0.1212494], [0.9255216, 0.1654515], [0.7083975, 0.7834917], [1.0701687, 1.1359434], [1.9340477, 1.1700935], [1.7656610, 1.6413536], [1.5595183, 1.2559396], [2.0395885, 1.2996270], [1.3639917, 1.4688739], [0.9539387, 1.3833425], [1.2428993, 0.7689777], [0.8122429, 0.6953298]], [[0.4535867, 0.1489684], [0.9986672, 0.4537532], [1.1263057, 0.9579036], [1.7078439, 1.3335465], [1.8912674, 1.3945168], [2.0077234, 2.0739005], [2.1867549, 2.0711832], [2.2277688, 1.8387466], [1.7836958, 2.0534117], [1.5328699, 1.8311287], [1.0203837, 1.0877730], [0.6408100, 1.0501664], [0.3285863, 0.6339346]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0]],[[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0]],[[0.3148439,0.04996599999999999],[0.6564269600000001,0.5465340999999999],[0.8454043499999999,1.0757875799999999],[1.4299832600000002,1.26990043],[1.74389373,1.57426463],[2.2804910499999997,1.4325768799999998],[2.3390709,1.5761867600000004],[2.2024313099999997,1.60062729],[2.0715963,1.71035254],[1.92615778,1.22801973],[1.43164722,0.8779204199999999],[1.25191992,0.24366522000000002],[0.67019304,0.1776753]],[[0.49692929999999996,0.3698646],[0.9565567199999999,1.12200284],[0.7894144299999999,1.37802546],[1.6126291799999999,1.49072804],[2.13401994,1.9750963599999998],[2.19098689,2.57574495],[2.5915523,2.7057611199999996],[2.48644507,2.55464092],[1.9320419699999998,2.51651961],[1.8544870100000002,1.7552917],[1.6650410399999998,1.31148114],[1.0636728,1.26657534],[0.67064514,0.90184908]],[[0.0227171,0.0666407],[0.44340603999999995,0.12124937999999999],[0.9255215899999999,0.16545151],[0.7083974599999999,0.7834917099999998],[1.07016875,1.13594339],[1.9340477799999998,1.17009348],[1.7656609499999998,1.64135356],[1.5595183100000003,1.25593964],[2.03958847,1.29962702],[1.36399169,1.46887394],[0.9539386799999999,1.38334248],[1.24289928,0.76897776],[0.81224286,0.6953298]],[[0.45358669999999995,0.1489684],[0.99866718,0.45375316],[1.1263056699999998,0.9579036599999999],[1.7078438699999998,1.33354652],[1.89126745,1.39451681],[2.00772343,2.0739005099999996],[2.18675492,2.07118325],[2.22776884,1.8387465499999998],[1.7836958299999996,2.05341171],[1.5328699399999999,1.83112869],[1.0203837,1.0877729999999999],[0.64081002,1.05016644],[0.32858628,0.63393462]],[[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0.3149, 0.05], [0.6565, 0.5466], [0.8455, 1.0758], [1.43, 1.27], [1.7439, 1.5743], [2.2805, 1.4326], [2.3391, 1.5762], [2.2025, 1.6007], [2.0716, 1.7104], [1.9262, 1.2281], [1.4317, 0.878], [1.252, 0.2437], [0.6702, 0.1777]], [[0.497, 0.3699], [0.9566, 1.1221], [0.7895, 1.3781], [1.6127, 1.4908], [2.1341, 1.9751], [2.191, 2.5758], [2.5916, 2.7058], [2.4865, 2.5547], [1.9321, 2.5166], [1.8545, 1.7553], [1.6651, 1.3115], [1.0637, 1.2666], [0.6707, 0.9019]], [[0.0228, 0.0667], [0.4435, 0.1213], [0.9256, 0.1655], [0.7084, 0.7835], [1.0702, 1.136], [1.9341, 1.1701], [1.7657, 1.6414], [1.5596, 1.256], [2.0396, 1.2997], [1.364, 1.4689], [0.954, 1.3834], [1.2429, 0.769], [0.8123, 0.6954]], [[0.4536, 0.149], [0.9987, 0.4538], [1.1264, 0.958], [1.7079, 1.3336], [1.8913, 1.3946], [2.0078, 2.074], [2.1868, 2.0712], [2.2278, 1.8388], [1.7837, 2.0535], [1.5329, 1.8312], [1.0204, 1.0878], [0.6409, 1.0502], [0.3286, 0.634]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]]

Expected: [[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0.3149, 0.05], [0.6565, 0.5466], [0.8455, 1.0758], [1.43, 1.27], [1.7439, 1.5743], [2.2805, 1.4326], [2.3391, 1.5762], [2.2025, 1.6007], [2.0716, 1.7104], [1.9262, 1.2281], [1.4317, 0.878], [1.252, 0.2437], [0.6702, 0.1777]], [[0.497, 0.3699], [0.9566, 1.1221], [0.7895, 1.3781], [1.6127, 1.4908], [2.1341, 1.9751], [2.191, 2.5758], [2.5916, 2.7058], [2.4865, 2.5547], [1.9321, 2.5166], [1.8545, 1.7553], [1.6651, 1.3115], [1.0637, 1.2666], [0.6707, 0.9019]], [[0.0228, 0.0667], [0.4435, 0.1213], [0.9256, 0.1655], [0.7084, 0.7835], [1.0702, 1.136], [1.9341, 1.1701], [1.7657, 1.6414], [1.5596, 1.256], [2.0396, 1.2997], [1.364, 1.4689], [0.954, 1.3834], [1.2429, 0.769], [0.8123, 0.6954]], [[0.4536, 0.149], [0.9987, 0.4538], [1.1264, 0.958], [1.7079, 1.3336], [1.8913, 1.3946], [2.0078, 2.074], [2.1868, 2.0712], [2.2278, 1.8388], [1.7837, 2.0535], [1.5329, 1.8312], [1.0204, 1.0878], [0.6409, 1.0502], [0.3286, 0.634]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]]