import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max18364 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max18364 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Dot89384 = tf.keras.layers.Input(shape=([3]))
in1Dot89384 = tf.keras.layers.Input(shape=([3]))
in0Con92652 = tf.keras.layers.Input(shape=([3, 1]))

Max18364 = keras.layers.Maximum(name = 'Max18364', )([in0Max18364,in1Max18364])
Res66707 = keras.layers.Reshape((1, 1, 2), name = 'Res66707', )(Max18364)
Res65425 = keras.layers.Reshape((1, 2), name = 'Res65425', )(Res66707)
Zer55541 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer55541', )(Res65425)
Dot89384 = keras.layers.Dot(axes=(1, 1), name = 'Dot89384', )([in0Dot89384,in1Dot89384])
Res39891 = keras.layers.Reshape((1, 1), name = 'Res39891', )(Dot89384)
Zer6863 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer6863', )(Res39891)
Con92652 = keras.layers.Concatenate(axis=2, name = 'Con92652', )([Zer6863,in0Con92652])
Mul85980 = keras.layers.Multiply(name = 'Mul85980', )([Zer55541,Con92652])
model = tf.keras.models.Model(inputs=[in0Max18364,in1Max18364,in0Dot89384,in1Dot89384,in0Con92652], outputs=Mul85980)
in0Max18364 = tf.constant([[[[[0.1211], [0.2306]]]]])
in1Max18364 = tf.constant([[[[[0.2229], [0.1563]]]]])
in0Dot89384 = tf.constant([[0.4784, 0.4496, 0.2156]])
in1Dot89384 = tf.constant([[0.4843, 0.732, 0.0317]])
in0Con92652 = tf.constant([[[0.2199], [0.3618], [0.3684]]])
print (np.array2string(model.predict([in0Max18364,in1Max18364,in0Dot89384,in1Dot89384,in0Con92652],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul85980.png')

LMax18364 = maximum_layer([[[[[[0.1211], [0.2306]]]]], [[[[[0.2229], [0.1563]]]]]], Max18364), 
LRes66707 = reshape_layer(Max18364, [1, 1, 2], Res66707), 
LRes65425 = reshape_layer(Res66707, [1, 2], Res65425), 
LZer55541 = zero_padding1D_layer(Res65425, 2, 0, Zer55541), 
LDot89384 = dot_layer([[0.4784, 0.4496, 0.2156]], [[0.4843, 0.732, 0.0317]], 1, 1, Dot89384), 
LRes39891 = reshape_layer(Dot89384, [1, 1], Res39891), 
LZer6863 = zero_padding1D_layer(Res39891, 1, 1, Zer6863), 
LCon92652 = concatenate_layer([Zer6863,[[[0.2199], [0.3618], [0.3684]]]], 2, Con92652), 
LMul85980 = multiply_layer([Zer55541,Con92652], Mul85980), 
exec_layers([LMax18364,LRes66707,LRes65425,LZer55541,LDot89384,LRes39891,LZer6863,LCon92652,LMul85980],["Max18364","Res66707","Res65425","Zer55541","Dot89384","Res39891","Zer6863","Con92652","Mul85980"],Mul85980,"Mul85980")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0849530]]]

Expected (Unparsed): [[[0,0.0],[0.0,0.0],[0.0,0.08495304000000001]]]

Actual:   [[[0, 0], [0, 0], [0, 0.085]]]

Expected: [[[0, 0], [0, 0], [0, 0.085]]]