import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con79906 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Dot29269 = tf.keras.layers.Input(shape=([2]))
in1Dot29269 = tf.keras.layers.Input(shape=([2]))
in0Con91818 = tf.keras.layers.Input(shape=([17]))

Con79906 = keras.layers.Conv2D(2, (1, 2),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con79906', )(in0Con79906)
Res30389 = keras.layers.Reshape((2, 2), name = 'Res30389', )(Con79906)
Fla30348 = keras.layers.Flatten(name = 'Fla30348', )(Res30389)
Res99844 = keras.layers.Reshape((4, 1), name = 'Res99844', )(Fla30348)
Res20715 = keras.layers.Reshape((4, 1, 1), name = 'Res20715', )(Res99844)
Zer50077 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer50077', )(Res20715)
Res64952 = keras.layers.Reshape((6, 3), name = 'Res64952', )(Zer50077)
Fla49554 = keras.layers.Flatten(name = 'Fla49554', )(Res64952)
Dot29269 = keras.layers.Dot(axes=(1, 1), name = 'Dot29269', )([in0Dot29269,in1Dot29269])
Res11398 = keras.layers.Reshape((1, 1), name = 'Res11398', )(Dot29269)
Res25868 = keras.layers.Reshape((1, 1, 1), name = 'Res25868', )(Res11398)
Res97437 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res97437', )(Res25868)
Glo98070 = keras.layers.GlobalAveragePooling3D(name = 'Glo98070', )(Res97437)
Con91818 = keras.layers.Concatenate(axis=1, name = 'Con91818', )([Glo98070,in0Con91818])
Add69573 = keras.layers.Add(name = 'Add69573', )([Fla49554,Con91818])
model = tf.keras.models.Model(inputs=[in0Con79906,in0Dot29269,in1Dot29269,in0Con91818], outputs=Add69573)
w = model.get_layer('Con79906').get_weights() 
w[0] = np.array([[[[0.1948, 0.6293]], [[0.4697, 0.0306]]]])
w[1] = np.array([0, 0])
model.get_layer('Con79906').set_weights(w) 
in0Con79906 = tf.constant([[[[0.0451], [0.0703]], [[0.6215], [0.0656]]]])
in0Dot29269 = tf.constant([[0.582, 0.9966]])
in1Dot29269 = tf.constant([[0.2377, 0.117]])
in0Con91818 = tf.constant([[0.9227, 0.5858, 0.5408, 0.4842, 0.7837, 0.2755, 0.2497, 0.6002, 0.1018, 0.8129, 0.8035, 0.7948, 0.8609, 0.6757, 0.3325, 0.419, 0.8557]])
print (np.array2string(model.predict([in0Con79906,in0Dot29269,in1Dot29269,in0Con91818],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add69573.png')

LCon79906 = conv2D_layer([[[[0.0451], [0.0703]], [[0.6215], [0.0656]]]], 1, 2,[[[[0.1948, 0.6293]], [[0.4697, 0.0306]]]],[0, 0], 1, 1, false, 1, 1, Con79906), 
LRes30389 = reshape_layer(Con79906, [2, 2], Res30389), 
LFla30348 = flatten_layer(Res30389, Fla30348), 
LRes99844 = reshape_layer(Fla30348, [4, 1], Res99844), 
LRes20715 = reshape_layer(Res99844, [4, 1, 1], Res20715), 
LZer50077 = zero_padding2D_layer(Res20715, 1, 1, 1, 1, Zer50077), 
LRes64952 = reshape_layer(Zer50077, [6, 3], Res64952), 
LFla49554 = flatten_layer(Res64952, Fla49554), 
LDot29269 = dot_layer([[0.582, 0.9966]], [[0.2377, 0.117]], 1, 1, Dot29269), 
LRes11398 = reshape_layer(Dot29269, [1, 1], Res11398), 
LRes25868 = reshape_layer(Res11398, [1, 1, 1], Res25868), 
LRes97437 = reshape_layer(Res25868, [1, 1, 1, 1], Res97437), 
LGlo98070 = global_average_pooling3D_layer(Res97437, Glo98070), 
LCon91818 = concatenate_layer([Glo98070,[[0.9227, 0.5858, 0.5408, 0.4842, 0.7837, 0.2755, 0.2497, 0.6002, 0.1018, 0.8129, 0.8035, 0.7948, 0.8609, 0.6757, 0.3325, 0.419, 0.8557]]], 1, Con91818), 
LAdd69573 = add_layer([Fla49554,Con91818], Add69573), 
exec_layers([LCon79906,LRes30389,LFla30348,LRes99844,LRes20715,LZer50077,LRes64952,LFla49554,LDot29269,LRes11398,LRes25868,LRes97437,LGlo98070,LCon91818,LAdd69573],["Con79906","Res30389","Fla30348","Res99844","Res20715","Zer50077","Res64952","Fla49554","Dot29269","Res11398","Res25868","Res97437","Glo98070","Con91818","Add69573"],Add69573,"Add69573")

Actual (Unparsed): [[0.2549436, 0.9227000, 0.5858000, 0.5408000, 0.5260054, 0.7837000, 0.2755000, 0.2802326, 0.6002000, 0.1018000, 0.9647805, 0.8035000, 0.7948000, 1.2540173, 0.6757000, 0.3325000, 0.4190000, 0.8557000]]

Expected (Unparsed): [[0.2549436,0.9227,0.5858,0.5408,0.52600539,0.7837,0.2755,0.28023261,0.6002,0.1018,0.9647805199999999,0.8035,0.7948,1.25401731,0.6757,0.3325,0.419,0.8557]]

Actual:   [[0.255, 0.9227, 0.5858, 0.5408, 0.5261, 0.7837, 0.2755, 0.2803, 0.6002, 0.1018, 0.9648, 0.8035, 0.7948, 1.2541, 0.6757, 0.3325, 0.419, 0.8557]]

Expected: [[0.255, 0.9227, 0.5858, 0.5408, 0.5261, 0.7837, 0.2755, 0.2803, 0.6002, 0.1018, 0.9648, 0.8035, 0.7948, 1.2541, 0.6757, 0.3325, 0.419, 0.8557]]