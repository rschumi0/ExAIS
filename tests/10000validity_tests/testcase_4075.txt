import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max5324 = tf.keras.layers.Input(shape=([1, 1]))
in1Max5324 = tf.keras.layers.Input(shape=([1, 1]))
in0Con30473 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Max3653 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Max3653 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Mul12454 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Mul12454 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))

Max5324 = keras.layers.Maximum(name = 'Max5324', )([in0Max5324,in1Max5324])
Res73337 = keras.layers.Reshape((1, 1, 1), name = 'Res73337', )(Max5324)
Res99987 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res99987', )(Res73337)
Zer38342 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer38342', )(Res99987)
Con30473 = keras.layers.Concatenate(axis=4, name = 'Con30473', )([Zer38342,in0Con30473])
Max3653 = keras.layers.Maximum(name = 'Max3653', )([in0Max3653,in1Max3653])
Max542 = keras.layers.Maximum(name = 'Max542', )([Con30473,Max3653])
Up_10656 = keras.layers.UpSampling3D(size=(1, 2, 1), name = 'Up_10656', )(Max542)
Res95855 = keras.layers.Reshape((2, 2, 2), name = 'Res95855', )(Up_10656)
Mul12454 = keras.layers.Multiply(name = 'Mul12454', )([in0Mul12454,in1Mul12454])
Thr15764 = keras.layers.ThresholdedReLU(theta=6.566636744418271, name = 'Thr15764', )(Mul12454)
Res8836 = keras.layers.Reshape((2, 2, 2), name = 'Res8836', )(Thr15764)
Sep65891 = keras.layers.SeparableConv2D(2, (1, 1),strides=(1, 1), padding='same', name = 'Sep65891', )(Res8836)
Mul35742 = keras.layers.Multiply(name = 'Mul35742', )([Res95855,Sep65891])
model = tf.keras.models.Model(inputs=[in0Max5324,in1Max5324,in0Con30473,in0Max3653,in1Max3653,in0Mul12454,in1Mul12454], outputs=Mul35742)
w = model.get_layer('Sep65891').get_weights() 
w[0] = np.array([[[[0.0986], [0.7665]]]])
w[1] = np.array([[[[0.9325, 0.9006], [0.9957, 0.6337]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep65891').set_weights(w) 
in0Max5324 = tf.constant([[[0.054]]])
in1Max5324 = tf.constant([[[0.6016]]])
in0Con30473 = tf.constant([[[[[0.5965]]], [[[0.7576]]]]])
in0Max3653 = tf.constant([[[[[0.4969, 0.8254]]], [[[0.7656, 0.076]]]]])
in1Max3653 = tf.constant([[[[[0.7822, 0.2704]]], [[[0.5661, 0.4307]]]]])
in0Mul12454 = tf.constant([[[[[0.0338, 0.5121]], [[0.2519, 0.3533]]], [[[0.7992, 0.1093]], [[0.0073, 0.1146]]]]])
in1Mul12454 = tf.constant([[[[[0.0578, 0.7608]], [[0.5352, 0.1094]]], [[[0.496, 0.2782]], [[0.1419, 0.2539]]]]])
print (np.array2string(model.predict([in0Max5324,in1Max5324,in0Con30473,in0Max3653,in1Max3653,in0Mul12454,in1Mul12454],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul35742.png')

LMax5324 = maximum_layer([[[[0.054]]], [[[0.6016]]]], Max5324), 
LRes73337 = reshape_layer(Max5324, [1, 1, 1], Res73337), 
LRes99987 = reshape_layer(Res73337, [1, 1, 1, 1], Res99987), 
LZer38342 = zero_padding3D_layer(Res99987, 1, 0, 0, 0, 0, 0, Zer38342), 
LCon30473 = concatenate_layer([Zer38342,[[[[[0.5965]]], [[[0.7576]]]]]], 4, Con30473), 
LMax3653 = maximum_layer([[[[[[0.4969, 0.8254]]], [[[0.7656, 0.076]]]]], [[[[[0.7822, 0.2704]]], [[[0.5661, 0.4307]]]]]], Max3653), 
LMax542 = maximum_layer([Con30473,Max3653], Max542), 
LUp_10656 = up_sampling3D_layer(Max542, 1, 2, 1, Up_10656), 
LRes95855 = reshape_layer(Up_10656, [2, 2, 2], Res95855), 
LMul12454 = multiply_layer([[[[[[0.0338, 0.5121]], [[0.2519, 0.3533]]], [[[0.7992, 0.1093]], [[0.0073, 0.1146]]]]], [[[[[0.0578, 0.7608]], [[0.5352, 0.1094]]], [[[0.496, 0.2782]], [[0.1419, 0.2539]]]]]], Mul12454), 
LThr15764 = thresholded_relu_layer(Mul12454, 6.566636744418271, Thr15764), 
LRes8836 = reshape_layer(Thr15764, [2, 2, 2], Res8836), 
LSep65891 = separable_conv2D_layer(Res8836, 1, 1,[[[[[0.0986], [0.7665]]]],[[[[0.9325, 0.9006], [0.9957, 0.6337]]]]],[0, 0], 1, 1, true, Sep65891), 
LMul35742 = multiply_layer([Res95855,Sep65891], Mul35742), 
exec_layers([LMax5324,LRes73337,LRes99987,LZer38342,LCon30473,LMax3653,LMax542,LUp_10656,LRes95855,LMul12454,LThr15764,LRes8836,LSep65891,LMul35742],["Max5324","Res73337","Res99987","Zer38342","Con30473","Max3653","Max542","Up_10656","Res95855","Mul12454","Thr15764","Res8836","Sep65891","Mul35742"],Mul35742,"Mul35742")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0],[0.0,0.0]],[[0.0,0.0],[0.0,0.0]]]]

Actual:   [[[[0, 0], [0, 0]], [[0, 0], [0, 0]]]]

Expected: [[[[0, 0], [0, 0]], [[0, 0], [0, 0]]]]