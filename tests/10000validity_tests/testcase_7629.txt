import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave62540 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave62540 = tf.keras.layers.Input(shape=([1, 1]))

Ave62540 = keras.layers.Average(name = 'Ave62540', )([in0Ave62540,in1Ave62540])
Sim25698 = keras.layers.SimpleRNN(2,name = 'Sim25698', )(Ave62540)
Res84366 = keras.layers.Reshape((2, 1), name = 'Res84366', )(Sim25698)
Res84556 = keras.layers.Reshape((2, 1, 1), name = 'Res84556', )(Res84366)
Up_24115 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_24115', )(Res84556)
Up_34610 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_34610', )(Up_24115)
model = tf.keras.models.Model(inputs=[in0Ave62540,in1Ave62540], outputs=Up_34610)
w = model.get_layer('Sim25698').get_weights() 
w[0] = np.array([[5, 3]])
w[1] = np.array([[4, 3], [2, 9]])
w[2] = np.array([5, 8])
model.get_layer('Sim25698').set_weights(w) 
in0Ave62540 = tf.constant([[[0.5197]]])
in1Ave62540 = tf.constant([[[0.7187]]])
print (np.array2string(model.predict([in0Ave62540,in1Ave62540],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_34610.png')

LAve62540 = average_layer([[[[0.5197]]], [[[0.7187]]]], Ave62540), 
LSim25698 = simple_rnn_layer(Ave62540,[[5, 3]],[[4, 3], [2, 9]],[5, 8], Sim25698), 
LRes84366 = reshape_layer(Sim25698, [2, 1], Res84366), 
LRes84556 = reshape_layer(Res84366, [2, 1, 1], Res84556), 
LUp_24115 = up_sampling2D_layer(Res84556, 1, 2, Up_24115), 
LUp_34610 = up_sampling2D_layer(Up_24115, 1, 1, Up_34610), 
exec_layers([LAve62540,LSim25698,LRes84366,LRes84556,LUp_24115,LUp_34610],["Ave62540","Sim25698","Res84366","Res84556","Up_24115","Up_34610"],Up_34610,"Up_34610")

Actual (Unparsed): [[[[0.9999998], [0.9999998]], [[1.0000000], [1.0000000]]]]

Expected (Unparsed): [[[[0.999999814247912],[0.999999814247912]],[[0.9999999945194086],[0.9999999945194086]]]]

Actual:   [[[[1], [1]], [[1], [1]]]]

Expected: [[[[1], [1]], [[1], [1]]]]