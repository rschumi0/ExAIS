import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo50658 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con58292 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot3196 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot3196 = tf.keras.layers.Input(shape=([3, 3]))

Glo50658 = keras.layers.GlobalAveragePooling3D(name = 'Glo50658', )(in0Glo50658)
Res35223 = keras.layers.Reshape((1, 1), name = 'Res35223', )(Glo50658)
Zer3849 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer3849', )(Res35223)
Con58292 = keras.layers.Concatenate(axis=2, name = 'Con58292', )([Zer3849,in0Con58292])
Dot3196 = keras.layers.Dot(axes=(1, 1), name = 'Dot3196', )([in0Dot3196,in1Dot3196])
Ave24353 = keras.layers.Average(name = 'Ave24353', )([Con58292,Dot3196])
Res57882 = keras.layers.Reshape((3, 3, 1), name = 'Res57882', )(Ave24353)
Cro56382 = keras.layers.Cropping2D(cropping=((0, 1), (2, 0)), name = 'Cro56382', )(Res57882)
Res68370 = keras.layers.Reshape((2, 1), name = 'Res68370', )(Cro56382)
Ave25959 = keras.layers.AveragePooling1D(pool_size=(2), strides=(3), padding='valid', name = 'Ave25959', )(Res68370)
model = tf.keras.models.Model(inputs=[in0Glo50658,in0Con58292,in0Dot3196,in1Dot3196], outputs=Ave25959)
in0Glo50658 = tf.constant([[[[[1.0808], [1.9504]], [[1.1221], [1.4557]]]]])
in0Con58292 = tf.constant([[[0.8042, 0.4472], [0.9973, 0.3736], [0.8243, 0.8167]]])
in0Dot3196 = tf.constant([[[0.8724, 0.6395, 0.0901], [0.7724, 0.299, 0.2306], [0.9371, 0.584, 0.9386]]])
in1Dot3196 = tf.constant([[[0.0733, 0.4862, 0.6625], [0.6606, 0.5987, 0.5911], [0.6578, 0.021, 0.4539]]])
print (np.array2string(model.predict([in0Glo50658,in0Con58292,in0Dot3196,in1Dot3196],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave25959.png')

LGlo50658 = global_average_pooling3D_layer([[[[[1.0808], [1.9504]], [[1.1221], [1.4557]]]]], Glo50658), 
LRes35223 = reshape_layer(Glo50658, [1, 1], Res35223), 
LZer3849 = zero_padding1D_layer(Res35223, 2, 0, Zer3849), 
LCon58292 = concatenate_layer([Zer3849,[[[0.8042, 0.4472], [0.9973, 0.3736], [0.8243, 0.8167]]]], 2, Con58292), 
LDot3196 = dot_layer([[[0.8724, 0.6395, 0.0901], [0.7724, 0.299, 0.2306], [0.9371, 0.584, 0.9386]]], [[[0.0733, 0.4862, 0.6625], [0.6606, 0.5987, 0.5911], [0.6578, 0.021, 0.4539]]], 1, 1, Dot3196), 
LAve24353 = average_layer([Con58292,Dot3196], Ave24353), 
LRes57882 = reshape_layer(Ave24353, [3, 3, 1], Res57882), 
LCro56382 = cropping2D_layer(Res57882, 0, 1, 2, 0, Cro56382), 
LRes68370 = reshape_layer(Cro56382, [2, 1], Res68370), 
LAve25959 = average_pooling1D_layer(Res68370, 2, 3, false, Ave25959), 
exec_layers([LGlo50658,LRes35223,LZer3849,LCon58292,LDot3196,LAve24353,LRes57882,LCro56382,LRes68370,LAve25959],["Glo50658","Res35223","Zer3849","Con58292","Dot3196","Ave24353","Res57882","Cro56382","Res68370","Ave25959"],Ave25959,"Ave25959")

Actual (Unparsed): [[[0.7865414]]]

Expected (Unparsed): [[[0.786541395]]]

Actual:   [[[0.7866]]]

Expected: [[[0.7866]]]