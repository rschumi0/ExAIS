import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo66310 = tf.keras.layers.Input(shape=([1, 1]))
in0Con10633 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub17476 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub17476 = tf.keras.layers.Input(shape=([2, 3]))
in0Add64253 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add64253 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Add88124 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add88124 = tf.keras.layers.Input(shape=([2, 1, 1]))

Glo66310 = keras.layers.GlobalMaxPool1D(name = 'Glo66310', )(in0Glo66310)
Res43723 = keras.layers.Reshape((1, 1), name = 'Res43723', )(Glo66310)
Zer92034 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer92034', )(Res43723)
Con10633 = keras.layers.Concatenate(axis=2, name = 'Con10633', )([Zer92034,in0Con10633])
Sub17476 = keras.layers.Subtract(name = 'Sub17476', )([in0Sub17476,in1Sub17476])
Min2074 = keras.layers.Minimum(name = 'Min2074', )([Con10633,Sub17476])
Zer78325 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer78325', )(Min2074)
Per52698 = keras.layers.Permute((1,2), name = 'Per52698',)(Zer78325)
Res98281 = keras.layers.Reshape((3, 3, 1), name = 'Res98281', )(Per52698)
Add64253 = keras.layers.Add(name = 'Add64253', )([in0Add64253,in1Add64253])
Glo98491 = keras.layers.GlobalMaxPool2D(name = 'Glo98491', )(Add64253)
Res83711 = keras.layers.Reshape((2, 1), name = 'Res83711', )(Glo98491)
Res17593 = keras.layers.Reshape((2, 1, 1), name = 'Res17593', )(Res83711)
Add88124 = keras.layers.Add(name = 'Add88124', )([in0Add88124,in1Add88124])
Min9547 = keras.layers.Minimum(name = 'Min9547', )([Res17593,Add88124])
Zer24224 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer24224', )(Min9547)
Add83835 = keras.layers.Add(name = 'Add83835', )([Res98281,Zer24224])
model = tf.keras.models.Model(inputs=[in0Glo66310,in0Con10633,in0Sub17476,in1Sub17476,in0Add64253,in1Add64253,in0Add88124,in1Add88124], outputs=Add83835)
in0Glo66310 = tf.constant([[[1.6221]]])
in0Con10633 = tf.constant([[[0.62, 0.04], [0.2103, 0.0991]]])
in0Sub17476 = tf.constant([[[0.5232, 0.7671, 0.9535], [0.9173, 0.6024, 0.9192]]])
in1Sub17476 = tf.constant([[[0.341, 0.9349, 0.2433], [0.5768, 0.0216, 0.7443]]])
in0Add64253 = tf.constant([[[[0.2371, 0.2305], [0.7474, 0.6058]], [[0.944, 0.9335], [0.1996, 0.2146]]]])
in1Add64253 = tf.constant([[[[0.0957, 0.9825], [0.8359, 0.6486]], [[0.3056, 0.2097], [0.4507, 0.0051]]]])
in0Add88124 = tf.constant([[[[0.5848]], [[0.8404]]]])
in1Add88124 = tf.constant([[[[0.355]], [[0.9651]]]])
print (np.array2string(model.predict([in0Glo66310,in0Con10633,in0Sub17476,in1Sub17476,in0Add64253,in1Add64253,in0Add88124,in1Add88124],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add83835.png')

LGlo66310 = global_max_pool1D_layer([[[1.6221]]], Glo66310), 
LRes43723 = reshape_layer(Glo66310, [1, 1], Res43723), 
LZer92034 = zero_padding1D_layer(Res43723, 1, 0, Zer92034), 
LCon10633 = concatenate_layer([Zer92034,[[[0.62, 0.04], [0.2103, 0.0991]]]], 2, Con10633), 
LSub17476 = subtract_layer([[[0.5232, 0.7671, 0.9535], [0.9173, 0.6024, 0.9192]]], [[[0.341, 0.9349, 0.2433], [0.5768, 0.0216, 0.7443]]], Sub17476), 
LMin2074 = minimum_layer([Con10633,Sub17476], Min2074), 
LZer78325 = zero_padding1D_layer(Min2074, 1, 0, Zer78325), 
LPer52698 = permute_layer(Zer78325, 1,2, Per52698), 
LRes98281 = reshape_layer(Per52698, [3, 3, 1], Res98281), 
LAdd64253 = add_layer([[[[[0.2371, 0.2305], [0.7474, 0.6058]], [[0.944, 0.9335], [0.1996, 0.2146]]]], [[[[0.0957, 0.9825], [0.8359, 0.6486]], [[0.3056, 0.2097], [0.4507, 0.0051]]]]], Add64253), 
LGlo98491 = global_max_pool2D_layer(Add64253, Glo98491), 
LRes83711 = reshape_layer(Glo98491, [2, 1], Res83711), 
LRes17593 = reshape_layer(Res83711, [2, 1, 1], Res17593), 
LAdd88124 = add_layer([[[[[0.5848]], [[0.8404]]]], [[[[0.355]], [[0.9651]]]]], Add88124), 
LMin9547 = minimum_layer([Res17593,Add88124], Min9547), 
LZer24224 = zero_padding2D_layer(Min9547, 1, 0, 2, 0, Zer24224), 
LAdd83835 = add_layer([Res98281,Zer24224], Add83835), 
exec_layers([LGlo66310,LRes43723,LZer92034,LCon10633,LSub17476,LMin2074,LZer78325,LPer52698,LRes98281,LAdd64253,LGlo98491,LRes83711,LRes17593,LAdd88124,LMin9547,LZer24224,LAdd83835],["Glo66310","Res43723","Zer92034","Con10633","Sub17476","Min2074","Zer78325","Per52698","Res98281","Add64253","Glo98491","Res83711","Res17593","Add88124","Min9547","Zer24224","Add83835"],Add83835,"Add83835")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [-0.1678000], [0.9798000]], [[0.3405000], [0.2103000], [1.3535000]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[-0.16779999999999995],[0.9798]],[[0.3405],[0.2103],[1.3535]]]]

Actual:   [[[[0], [0], [0]], [[0], [-0.1678], [0.9798]], [[0.3405], [0.2103], [1.3535]]]]

Expected: [[[[0], [0], [0]], [[0], [-0.1677], [0.9798]], [[0.3405], [0.2103], [1.3535]]]]