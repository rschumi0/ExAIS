import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave29386 = tf.keras.layers.Input(shape=([1, 2]))
in0Max65468 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max65468 = tf.keras.layers.Input(shape=([1, 1, 2]))

Ave29386 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave29386', )(in0Ave29386)
Fla5223 = keras.layers.Flatten(name = 'Fla5223', )(Ave29386)
Max65468 = keras.layers.Maximum(name = 'Max65468', )([in0Max65468,in1Max65468])
Thr50040 = keras.layers.ThresholdedReLU(theta=7.089326971910316, name = 'Thr50040', )(Max65468)
Lay97116 = keras.layers.LayerNormalization(axis=1, epsilon=2.143726426662184, name = 'Lay97116', )(Thr50040)
Loc87975 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 1), name = 'Loc87975', )(Lay97116)
Fla80910 = keras.layers.Flatten(name = 'Fla80910', )(Loc87975)
Ave66750 = keras.layers.Average(name = 'Ave66750', )([Fla5223,Fla80910])
model = tf.keras.models.Model(inputs=[in0Ave29386,in0Max65468,in1Max65468], outputs=Ave66750)
w = model.get_layer('Loc87975').get_weights() 
w[0] = np.array([[[0.9772, 0.8808], [0.4724, 0.2719]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc87975').set_weights(w) 
in0Ave29386 = tf.constant([[[1.4482, 1.5613]]])
in0Max65468 = tf.constant([[[[0.6628, 0.4104]]]])
in1Max65468 = tf.constant([[[[0.7808, 0.669]]]])
print (np.array2string(model.predict([in0Ave29386,in0Max65468,in1Max65468],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave66750.png')

LAve29386 = average_pooling1D_layer([[[1.4482, 1.5613]]], 1, Ave29386), 
LFla5223 = flatten_layer(Ave29386, Fla5223), 
LMax65468 = maximum_layer([[[[[0.6628, 0.4104]]]], [[[[0.7808, 0.669]]]]], Max65468), 
LThr50040 = thresholded_relu_layer(Max65468, 7.089326971910316, Thr50040), 
LLay97116 = layer_normalization_layer(Thr50040, 1, 2.143726426662184, Lay97116), 
LLoc87975 = locally_connected2D_layer(Lay97116, 1, 1,[[[0.9772, 0.8808], [0.4724, 0.2719]]],[[[0, 0]]], 1, 1, Loc87975), 
LFla80910 = flatten_layer(Loc87975, Fla80910), 
LAve66750 = average_layer([Fla5223,Fla80910], Ave66750), 
exec_layers([LAve29386,LFla5223,LMax65468,LThr50040,LLay97116,LLoc87975,LFla80910,LAve66750],["Ave29386","Fla5223","Max65468","Thr50040","Lay97116","Loc87975","Fla80910","Ave66750"],Ave66750,"Ave66750")

Actual (Unparsed): [[0.7241000, 0.7806500]]

Expected (Unparsed): [[0.7241,0.78065]]

Actual:   [[0.7241, 0.7807]]

Expected: [[0.7241, 0.7807]]