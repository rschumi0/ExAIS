import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul28580 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul28580 = tf.keras.layers.Input(shape=([2, 2, 1]))

Mul28580 = keras.layers.Multiply(name = 'Mul28580', )([in0Mul28580,in1Mul28580])
Ave47111 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave47111', )(Mul28580)
model = tf.keras.models.Model(inputs=[in0Mul28580,in1Mul28580], outputs=Ave47111)
in0Mul28580 = tf.constant([[[[0.2168], [0.3495]], [[0.6937], [0.8149]]]])
in1Mul28580 = tf.constant([[[[0.4874], [0.1081]], [[0.2876], [0.8953]]]])
print (np.array2string(model.predict([in0Mul28580,in1Mul28580],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave47111.png')

LMul28580 = multiply_layer([[[[[0.2168], [0.3495]], [[0.6937], [0.8149]]]], [[[[0.4874], [0.1081]], [[0.2876], [0.8953]]]]], Mul28580), 
LAve47111 = average_pooling2D_layer(Mul28580, 1, 1, Ave47111), 
exec_layers([LMul28580,LAve47111],["Mul28580","Ave47111"],Ave47111,"Ave47111")

Actual (Unparsed): [[[[0.1056683], [0.0377809]], [[0.1995081], [0.7295799]]]]

Expected (Unparsed): [[[[0.10566832],[0.03778095]],[[0.19950812],[0.72957997]]]]

Actual:   [[[[0.1057], [0.0378]], [[0.1996], [0.7296]]]]

Expected: [[[[0.1057], [0.0378]], [[0.1996], [0.7296]]]]