import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con76461 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con39612 = tf.keras.layers.Input(shape=([1, 1, 3, 1]))
in0Thr89123 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Con76461 = keras.layers.Conv2D(3, (2, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con76461', )(in0Con76461)
Res58624 = keras.layers.Reshape((1, 1, 3, 1), name = 'Res58624', )(Con76461)
Con39612 = keras.layers.Concatenate(axis=4, name = 'Con39612', )([Res58624,in0Con39612])
Thr89123 = keras.layers.ThresholdedReLU(theta=3.5457685125580816, name = 'Thr89123', input_shape=(1, 1, 1, 2))(in0Thr89123)
Zer35696 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer35696', )(Thr89123)
Max93059 = keras.layers.Maximum(name = 'Max93059', )([Con39612,Zer35696])
Res25680 = keras.layers.Reshape((1, 1, 6), name = 'Res25680', )(Max93059)
Res10818 = keras.layers.Reshape((1, 6), name = 'Res10818', )(Res25680)
Glo4302 = keras.layers.GlobalMaxPool1D(name = 'Glo4302', )(Res10818)
Res68288 = keras.layers.Reshape((6, 1), name = 'Res68288', )(Glo4302)
Glo22093 = keras.layers.GlobalAveragePooling1D(name = 'Glo22093', )(Res68288)
model = tf.keras.models.Model(inputs=[in0Con76461,in0Con39612,in0Thr89123], outputs=Glo22093)
w = model.get_layer('Con76461').get_weights() 
w[0] = np.array([[[[0.087, 0.4502, 0.6344]]], [[[0.254, 0.3928, 0.5966]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con76461').set_weights(w) 
in0Con76461 = tf.constant([[[[0.5559]], [[0.9729]]]])
in0Con39612 = tf.constant([[[[[0.0245], [0.2919], [0.9389]]]]])
in0Thr89123 = tf.constant([[[[[0.4571, 0.0656]]]]])
print (np.array2string(model.predict([in0Con76461,in0Con39612,in0Thr89123],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo22093.png')

LCon76461 = conv2D_layer([[[[0.5559]], [[0.9729]]]], 2, 1,[[[[0.087, 0.4502, 0.6344]]], [[[0.254, 0.3928, 0.5966]]]],[0, 0, 0], 1, 1, false, 1, 1, Con76461), 
LRes58624 = reshape_layer(Con76461, [1, 1, 3, 1], Res58624), 
LCon39612 = concatenate_layer([Res58624,[[[[[0.0245], [0.2919], [0.9389]]]]]], 4, Con39612), 
LThr89123 = thresholded_relu_layer([[[[[0.4571, 0.0656]]]]], 3.5457685125580816, Thr89123), 
LZer35696 = zero_padding3D_layer(Thr89123, 0, 0, 0, 0, 2, 0, Zer35696), 
LMax93059 = maximum_layer([Con39612,Zer35696], Max93059), 
LRes25680 = reshape_layer(Max93059, [1, 1, 6], Res25680), 
LRes10818 = reshape_layer(Res25680, [1, 6], Res10818), 
LGlo4302 = global_max_pool1D_layer(Res10818, Glo4302), 
LRes68288 = reshape_layer(Glo4302, [6, 1], Res68288), 
LGlo22093 = global_average_pooling1D_layer(Res68288, Glo22093), 
exec_layers([LCon76461,LRes58624,LCon39612,LThr89123,LZer35696,LMax93059,LRes25680,LRes10818,LGlo4302,LRes68288,LGlo22093],["Con76461","Res58624","Con39612","Thr89123","Zer35696","Max93059","Res25680","Res10818","Glo4302","Res68288","Glo22093"],Glo22093,"Glo22093")

Actual (Unparsed): [[0.5193827]]

Expected (Unparsed): [[0.5193827166666666]]

Actual:   [[0.5194]]

Expected: [[0.5194]]