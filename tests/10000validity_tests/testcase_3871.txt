import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add70487 = tf.keras.layers.Input(shape=([1, 2]))
in1Add70487 = tf.keras.layers.Input(shape=([1, 2]))
in0Con56191 = tf.keras.layers.Input(shape=([78]))
in0Zer21827 = tf.keras.layers.Input(shape=([3, 2, 2, 1]))
in0Sub85157 = tf.keras.layers.Input(shape=([2]))
in1Sub85157 = tf.keras.layers.Input(shape=([2]))
in0Con1934 = tf.keras.layers.Input(shape=([78]))

Add70487 = keras.layers.Add(name = 'Add70487', )([in0Add70487,in1Add70487])
Fla86408 = keras.layers.Flatten(name = 'Fla86408', )(Add70487)
Con56191 = keras.layers.Concatenate(axis=1, name = 'Con56191', )([Fla86408,in0Con56191])
Zer21827 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer21827', )(in0Zer21827)
ReL57355 = keras.layers.ReLU(max_value=4.400076816763709, negative_slope=8.986169233193891, threshold=5.3472812277358495, name = 'ReL57355', )(Zer21827)
Res145 = keras.layers.Reshape((5, 4, 4), name = 'Res145', )(ReL57355)
Res93928 = keras.layers.Reshape((5, 16), name = 'Res93928', )(Res145)
Fla56356 = keras.layers.Flatten(name = 'Fla56356', )(Res93928)
Sub85157 = keras.layers.Subtract(name = 'Sub85157', )([in0Sub85157,in1Sub85157])
Con1934 = keras.layers.Concatenate(axis=1, name = 'Con1934', )([Sub85157,in0Con1934])
Sub65607 = keras.layers.Subtract(name = 'Sub65607', )([Fla56356,Con1934])
Add40306 = keras.layers.Add(name = 'Add40306', )([Con56191,Sub65607])
Bat92698 = keras.layers.BatchNormalization(axis=1, epsilon=0.6339539623916527,  name = 'Bat92698', )(Add40306)
model = tf.keras.models.Model(inputs=[in0Add70487,in1Add70487,in0Con56191,in0Zer21827,in0Sub85157,in1Sub85157,in0Con1934], outputs=Bat92698)
w = model.get_layer('Bat92698').get_weights() 
w[0] = np.array([0.6968, 0.6797, 0.0336, 0.2135, 0.2416, 0.5337, 0.4775, 0.591, 0.4249, 0.0053, 0.4058, 0.0014, 0.0499, 0.3467, 0.0285, 0.2169, 0.2049, 0.8193, 0.8383, 0.9886, 0.252, 0.3201, 0.8599, 0.5164, 0.3206, 0.8788, 0.2553, 0.4794, 0.7523, 0.7933, 0.3342, 0.064, 0.1917, 0.6121, 0.9718, 0.6989, 0.9176, 0.523, 0.5403, 0.8792, 0.5732, 0.9591, 0.7231, 0.5497, 0.6668, 0.3979, 0.0026, 0.0039, 0.087, 0.394, 0.1829, 0.149, 0.4052, 0.8607, 0.0446, 0.2946, 0.9225, 0.495, 0.1141, 0.3239, 0.2599, 0.0279, 0.5748, 0.2269, 0.7847, 0.6727, 0.5464, 0.4895, 0.3243, 0.7437, 0.3176, 0.7657, 0.4232, 0.9219, 0.6262, 0.5859, 0.8679, 0.0571, 0.7553, 0.6009])
w[1] = np.array([0.3253, 0.7092, 0.0319, 1, 0.7191, 0.8611, 0.3035, 0.299, 0.4025, 0.3595, 0.1004, 0.6475, 0.2773, 0.6805, 0.4874, 0.1723, 0.755, 0.5562, 0.0593, 0.6417, 0.8619, 0.8491, 0.1401, 0.9154, 0.8447, 0.8159, 0.0082, 0.2235, 0.3554, 0.5615, 0.891, 0.3112, 0.6595, 0.0536, 0.5443, 0.8799, 0.3466, 0.5411, 0.4656, 0.5554, 0.7005, 0.5993, 0.1779, 0.8258, 0.2325, 0.3102, 0.564, 0.0017, 0.8744, 0.2811, 0.9303, 0.2752, 0.9839, 0.3006, 0.3397, 0.3785, 0.6227, 0.4368, 0.7597, 0.1777, 0.5343, 0.2951, 0.7471, 0.776, 0.8708, 0.968, 0.7104, 0.3454, 0.9963, 0.9351, 0.2772, 0.9578, 0.6273, 0.7997, 0.9278, 0.1472, 0.1651, 0.2855, 0.8519, 0.7937])
w[2] = np.array([0.3174, 0.3591, 0.9362, 0.1954, 0.0144, 0.6928, 0.8951, 0.8686, 0.1808, 0.9361, 0.8216, 0.7001, 0.1423, 0.4267, 0.8519, 0.565, 0.3176, 0.0392, 0.2159, 0.4184, 0.3744, 0.8415, 0.6732, 0.1718, 0.2129, 0.1108, 0.2255, 0.3726, 0.9811, 0.0472, 0.0374, 0.8193, 0.823, 0.2133, 0.7002, 0.7651, 0.2154, 0.3284, 0.3274, 0.2916, 0.5552, 0.5518, 0.4859, 0.7633, 0.13, 0.7975, 0.6329, 0.0171, 0.7223, 0.9442, 0.5564, 0.0833, 0.8781, 0.0235, 0.2971, 0.7879, 0.3054, 0.604, 0.1677, 0.5449, 0.9577, 0.6214, 0.7785, 0.0081, 0.1058, 0.8476, 0.4312, 0.0268, 0.1043, 0.0436, 0.8453, 0.5234, 0.618, 0.5903, 0.948, 0.4953, 0.7902, 0.0588, 0.3743, 0.3317])
w[3] = np.array([0.2067, 0.7437, 0.4013, 0.0338, 0.537, 0.6592, 0.2719, 0.7248, 0.4195, 0.8786, 0.249, 0.0483, 0.4986, 0.3815, 0.2879, 0.6641, 0.5168, 0.7657, 0.9129, 0.0747, 0.0213, 0.2832, 0.7409, 0.4388, 0.5511, 0.6576, 0.1083, 0.8639, 0.1383, 0.0596, 0.4254, 0.9088, 0.5788, 0.4263, 0.2085, 0.6701, 0.206, 0.0415, 0.2201, 0.8827, 0.8352, 0.9179, 0.7884, 0.9182, 0.1383, 0.0614, 0.166, 0.4316, 0.9546, 0.1398, 0.7431, 0.677, 0.9465, 0.4259, 0.035, 0.1893, 0.5696, 0.1411, 0.6239, 0.6121, 0.5419, 0.4843, 0.6587, 0.9406, 0.8685, 0.7025, 0.0881, 0.346, 0.0076, 0.5288, 0.5348, 0.0466, 0.9461, 0.1958, 0.6067, 0.4006, 0.7975, 0.0181, 0.4839, 0.5105])
model.get_layer('Bat92698').set_weights(w) 
in0Add70487 = tf.constant([[[0.8896, 0.4434]]])
in1Add70487 = tf.constant([[[0.3328, 0.4316]]])
in0Con56191 = tf.constant([[0.6608, 0.7595, 0.5591, 0.3508, 0.2739, 0.517, 0.5509, 0.3352, 0.1218, 0.8917, 0.8611, 0.0037, 0.8297, 0.6345, 0.3196, 0.3768, 0.6268, 0.7756, 0.7624, 0.2677, 0.5923, 0.4729, 0.0564, 0.1576, 0.7383, 0.6678, 0.3864, 0.0658, 0.2451, 0.7789, 0.6649, 0.7531, 0.2907, 0.9833, 0.7465, 0.7442, 0.6908, 0.8585, 0.1147, 0.2068, 0.0022, 0.2871, 0.8438, 0.681, 0.8333, 0.5637, 0.9327, 0.0195, 0.8514, 0.5854, 0.5585, 0.6684, 0.3818, 0.8547, 0.4044, 0.5935, 0.55, 0.781, 0.9777, 0.7447, 0.638, 0.4258, 0.7535, 0.9334, 0.6946, 0.4046, 0.0559, 0.4014, 0.4701, 0.1334, 0.8182, 0.1536, 0.4286, 0.986, 0.7515, 0.3413, 0.9333, 0.2145]])
in0Zer21827 = tf.constant([[[[[1.8347], [1.0949]], [[1.7806], [1.4464]]], [[[1.8212], [1.7281]], [[1.3803], [1.826]]], [[[1.9095], [1.8491]], [[1.3214], [1.9996]]]]])
in0Sub85157 = tf.constant([[0.2393, 0.5785]])
in1Sub85157 = tf.constant([[0.1022, 0.5409]])
in0Con1934 = tf.constant([[0.1839, 0.0594, 0.8767, 0.4156, 0.86, 0.7227, 0.5976, 0.9331, 0.7724, 0.1678, 0.066, 0.0368, 0.053, 0.5054, 0.9244, 0.9519, 0.0473, 0.2598, 0.564, 0.2641, 0.1498, 0.1141, 0.1915, 0.4731, 0.4882, 0.3527, 0.7791, 0.5108, 0.0914, 0.0574, 0.9032, 0.3434, 0.2051, 0.5877, 0.707, 0.5747, 0.1021, 0.2562, 0.6114, 0.1823, 0.0765, 0.3963, 0.9408, 0.1238, 0.3069, 0.2098, 0.3327, 0.5813, 0.9281, 0.8834, 0.6549, 0.0277, 0.9602, 0.4667, 0.1674, 0.1427, 0.7079, 0.9142, 0.834, 0.8357, 0.8693, 0.5134, 0.0169, 0.285, 0.8655, 0.644, 0.2642, 0.9526, 0.8437, 0.4419, 0.5426, 0.9892, 0.3919, 0.4792, 0.0584, 0.3131, 0.2528, 0.0133]])
print (np.array2string(model.predict([in0Add70487,in1Add70487,in0Con56191,in0Zer21827,in0Sub85157,in1Sub85157,in0Con1934],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Bat92698.png')

LAdd70487 = add_layer([[[[0.8896, 0.4434]]], [[[0.3328, 0.4316]]]], Add70487), 
LFla86408 = flatten_layer(Add70487, Fla86408), 
LCon56191 = concatenate_layer([Fla86408,[[0.6608, 0.7595, 0.5591, 0.3508, 0.2739, 0.517, 0.5509, 0.3352, 0.1218, 0.8917, 0.8611, 0.0037, 0.8297, 0.6345, 0.3196, 0.3768, 0.6268, 0.7756, 0.7624, 0.2677, 0.5923, 0.4729, 0.0564, 0.1576, 0.7383, 0.6678, 0.3864, 0.0658, 0.2451, 0.7789, 0.6649, 0.7531, 0.2907, 0.9833, 0.7465, 0.7442, 0.6908, 0.8585, 0.1147, 0.2068, 0.0022, 0.2871, 0.8438, 0.681, 0.8333, 0.5637, 0.9327, 0.0195, 0.8514, 0.5854, 0.5585, 0.6684, 0.3818, 0.8547, 0.4044, 0.5935, 0.55, 0.781, 0.9777, 0.7447, 0.638, 0.4258, 0.7535, 0.9334, 0.6946, 0.4046, 0.0559, 0.4014, 0.4701, 0.1334, 0.8182, 0.1536, 0.4286, 0.986, 0.7515, 0.3413, 0.9333, 0.2145]]], 1, Con56191), 
LZer21827 = zero_padding3D_layer([[[[[1.8347], [1.0949]], [[1.7806], [1.4464]]], [[[1.8212], [1.7281]], [[1.3803], [1.826]]], [[[1.9095], [1.8491]], [[1.3214], [1.9996]]]]], 1, 1, 1, 1, 1, 1, Zer21827), 
LReL57355 = relu_layer(Zer21827, 4.400076816763709, 8.986169233193891, 5.3472812277358495, ReL57355), 
LRes145 = reshape_layer(ReL57355, [5, 4, 4], Res145), 
LRes93928 = reshape_layer(Res145, [5, 16], Res93928), 
LFla56356 = flatten_layer(Res93928, Fla56356), 
LSub85157 = subtract_layer([[0.2393, 0.5785]], [[0.1022, 0.5409]], Sub85157), 
LCon1934 = concatenate_layer([Sub85157,[[0.1839, 0.0594, 0.8767, 0.4156, 0.86, 0.7227, 0.5976, 0.9331, 0.7724, 0.1678, 0.066, 0.0368, 0.053, 0.5054, 0.9244, 0.9519, 0.0473, 0.2598, 0.564, 0.2641, 0.1498, 0.1141, 0.1915, 0.4731, 0.4882, 0.3527, 0.7791, 0.5108, 0.0914, 0.0574, 0.9032, 0.3434, 0.2051, 0.5877, 0.707, 0.5747, 0.1021, 0.2562, 0.6114, 0.1823, 0.0765, 0.3963, 0.9408, 0.1238, 0.3069, 0.2098, 0.3327, 0.5813, 0.9281, 0.8834, 0.6549, 0.0277, 0.9602, 0.4667, 0.1674, 0.1427, 0.7079, 0.9142, 0.834, 0.8357, 0.8693, 0.5134, 0.0169, 0.285, 0.8655, 0.644, 0.2642, 0.9526, 0.8437, 0.4419, 0.5426, 0.9892, 0.3919, 0.4792, 0.0584, 0.3131, 0.2528, 0.0133]]], 1, Con1934), 
LSub65607 = subtract_layer(Fla56356,Con1934, Sub65607), 
LAdd40306 = add_layer([Con56191,Sub65607], Add40306), 
LBat92698 = batch_normalization_layer(Add40306, 1, 0.6339539623916527, [0.6968, 0.6797, 0.0336, 0.2135, 0.2416, 0.5337, 0.4775, 0.591, 0.4249, 0.0053, 0.4058, 0.0014, 0.0499, 0.3467, 0.0285, 0.2169, 0.2049, 0.8193, 0.8383, 0.9886, 0.252, 0.3201, 0.8599, 0.5164, 0.3206, 0.8788, 0.2553, 0.4794, 0.7523, 0.7933, 0.3342, 0.064, 0.1917, 0.6121, 0.9718, 0.6989, 0.9176, 0.523, 0.5403, 0.8792, 0.5732, 0.9591, 0.7231, 0.5497, 0.6668, 0.3979, 0.0026, 0.0039, 0.087, 0.394, 0.1829, 0.149, 0.4052, 0.8607, 0.0446, 0.2946, 0.9225, 0.495, 0.1141, 0.3239, 0.2599, 0.0279, 0.5748, 0.2269, 0.7847, 0.6727, 0.5464, 0.4895, 0.3243, 0.7437, 0.3176, 0.7657, 0.4232, 0.9219, 0.6262, 0.5859, 0.8679, 0.0571, 0.7553, 0.6009], [0.3253, 0.7092, 0.0319, 1, 0.7191, 0.8611, 0.3035, 0.299, 0.4025, 0.3595, 0.1004, 0.6475, 0.2773, 0.6805, 0.4874, 0.1723, 0.755, 0.5562, 0.0593, 0.6417, 0.8619, 0.8491, 0.1401, 0.9154, 0.8447, 0.8159, 0.0082, 0.2235, 0.3554, 0.5615, 0.891, 0.3112, 0.6595, 0.0536, 0.5443, 0.8799, 0.3466, 0.5411, 0.4656, 0.5554, 0.7005, 0.5993, 0.1779, 0.8258, 0.2325, 0.3102, 0.564, 0.0017, 0.8744, 0.2811, 0.9303, 0.2752, 0.9839, 0.3006, 0.3397, 0.3785, 0.6227, 0.4368, 0.7597, 0.1777, 0.5343, 0.2951, 0.7471, 0.776, 0.8708, 0.968, 0.7104, 0.3454, 0.9963, 0.9351, 0.2772, 0.9578, 0.6273, 0.7997, 0.9278, 0.1472, 0.1651, 0.2855, 0.8519, 0.7937], [0.3174, 0.3591, 0.9362, 0.1954, 0.0144, 0.6928, 0.8951, 0.8686, 0.1808, 0.9361, 0.8216, 0.7001, 0.1423, 0.4267, 0.8519, 0.565, 0.3176, 0.0392, 0.2159, 0.4184, 0.3744, 0.8415, 0.6732, 0.1718, 0.2129, 0.1108, 0.2255, 0.3726, 0.9811, 0.0472, 0.0374, 0.8193, 0.823, 0.2133, 0.7002, 0.7651, 0.2154, 0.3284, 0.3274, 0.2916, 0.5552, 0.5518, 0.4859, 0.7633, 0.13, 0.7975, 0.6329, 0.0171, 0.7223, 0.9442, 0.5564, 0.0833, 0.8781, 0.0235, 0.2971, 0.7879, 0.3054, 0.604, 0.1677, 0.5449, 0.9577, 0.6214, 0.7785, 0.0081, 0.1058, 0.8476, 0.4312, 0.0268, 0.1043, 0.0436, 0.8453, 0.5234, 0.618, 0.5903, 0.948, 0.4953, 0.7902, 0.0588, 0.3743, 0.3317], [0.2067, 0.7437, 0.4013, 0.0338, 0.537, 0.6592, 0.2719, 0.7248, 0.4195, 0.8786, 0.249, 0.0483, 0.4986, 0.3815, 0.2879, 0.6641, 0.5168, 0.7657, 0.9129, 0.0747, 0.0213, 0.2832, 0.7409, 0.4388, 0.5511, 0.6576, 0.1083, 0.8639, 0.1383, 0.0596, 0.4254, 0.9088, 0.5788, 0.4263, 0.2085, 0.6701, 0.206, 0.0415, 0.2201, 0.8827, 0.8352, 0.9179, 0.7884, 0.9182, 0.1383, 0.0614, 0.166, 0.4316, 0.9546, 0.1398, 0.7431, 0.677, 0.9465, 0.4259, 0.035, 0.1893, 0.5696, 0.1411, 0.6239, 0.6121, 0.5419, 0.4843, 0.6587, 0.9406, 0.8685, 0.7025, 0.0881, 0.346, 0.0076, 0.5288, 0.5348, 0.0466, 0.9461, 0.1958, 0.6067, 0.4006, 0.7975, 0.0181, 0.4839, 0.5105], Bat92698), 
exec_layers([LAdd70487,LFla86408,LCon56191,LZer21827,LReL57355,LRes145,LRes93928,LFla56356,LSub85157,LCon1934,LSub65607,LAdd40306,LBat92698],["Add70487","Fla86408","Con56191","Zer21827","ReL57355","Res145","Res93928","Fla56356","Sub85157","Con1934","Sub65607","Add40306","Bat92698"],Bat92698,"Bat92698")

Actual (Unparsed): [[-35.6091271, -26.8400790, -1.5700720, -11.4225746, -10.0834172, -22.0461810, -24.5471031, -24.6083406, -19.5840522, 0.1458141, -21.2869387, 0.5660957, -1.9451817, -16.0099213, -0.9411668, -9.0585722, -8.5994028, -33.1459140, -32.0834982, -55.6740550, -14.1519174, -9.9812810, -28.0528499, -22.9489917, -13.4092750, -24.2978192, -10.3720302, -18.6212461, -41.9563467, -45.6798882, -14.6737128, -2.1697744, -7.8898109, -28.3940455, -50.9822436, -28.7548780, -47.9392832, -19.7237405, -18.3957965, -33.5273629, -22.5207046, -27.2523019, -19.3471091, -20.7606364, -36.4002863, -22.7331190, 0.4240058, -0.1785726, -2.4508924, -21.9164385, -6.6577554, -6.0275893, -14.8178661, -25.0108493, -1.4222102, -15.3530973, -39.8403836, -19.9904546, -2.3339026, -13.9618644, -11.1777412, -0.9914690, -24.0565347, -7.9301757, -29.4870985, -27.1088713, -30.5749850, -23.5468350, -18.5855684, -32.6158130, -14.1973705, -44.4143570, -15.6656973, -49.2748053, -26.5989306, -27.5254399, -34.7622252, -3.1144962, -33.2562567, -26.2700848]]

Expected (Unparsed): [[-35.609127047489686,-26.840079058194195,-1.5700720195740019,-11.422574563545362,-10.08341718365939,-22.046181034647525,-24.54710308124965,-24.60834059391975,-19.584052224365507,0.1458141443473222,-21.286938654010324,0.5660956784397468,-1.9451817460928575,-16.009921259750964,-0.9411667853540229,-9.058572206577995,-8.599402778952328,-33.145914030052275,-32.08349819162599,-55.674055073326,-14.151917392021923,-9.981280919627627,-28.05284998778619,-22.948991679906783,-13.409275047812494,-24.297818828492936,-10.372030300876554,-18.62124614690941,-41.95634667848927,-45.679888185788066,-14.673712835765798,-2.1697744074268286,-7.889810910201319,-28.394045509309635,-50.982243613565224,-28.754877947189968,-47.939283178343764,-19.72374059901342,-18.39579623551014,-33.527362893290636,-22.520704636577012,-27.252302185000605,-19.34710894838674,-20.760636407910102,-36.40028633044596,-22.733118974218293,0.4240058264055599,-0.17857261327866478,-2.4508923970784005,-21.916438472327172,-6.657755392536052,-6.027589304443059,-14.81786608903065,-25.01084932258874,-1.4222101708334036,-15.353097341655147,-39.84038355230992,-19.9904547937806,-2.333902656341103,-13.9618643631525,-11.177741188550787,-0.9914689676352373,-24.05653465566441,-7.930175651957855,-29.487098500833174,-27.108871282525605,-30.574985027107918,-23.546835017733805,-18.585568431820708,-32.615812953870304,-14.19737051813769,-44.41435702160385,-15.66569734061749,-49.274805264722296,-26.598930577894905,-27.525439915672482,-34.7622251801075,-3.1144962281939437,-33.256256694024955,-26.270084783167903]]

Actual:   [[-35.6091, -26.84, -1.57, -11.4225, -10.0834, -22.0461, -24.5471, -24.6083, -19.584, 0.1459, -21.2869, 0.5661, -1.9451, -16.0099, -0.9411, -9.0585, -8.5994, -33.1459, -32.0834, -55.674, -14.1519, -9.9812, -28.0528, -22.9489, -13.4092, -24.2978, -10.372, -18.6212, -41.9563, -45.6798, -14.6737, -2.1697, -7.8898, -28.394, -50.9822, -28.7548, -47.9392, -19.7237, -18.3957, -33.5273, -22.5207, -27.2523, -19.3471, -20.7606, -36.4002, -22.7331, 0.4241, -0.1785, -2.4508, -21.9164, -6.6577, -6.0275, -14.8178, -25.0108, -1.4222, -15.353, -39.8403, -19.9904, -2.3339, -13.9618, -11.1777, -0.9914, -24.0565, -7.9301, -29.487, -27.1088, -30.5749, -23.5468, -18.5855, -32.6158, -14.1973, -44.4143, -15.6656, -49.2748, -26.5989, -27.5254, -34.7622, -3.1144, -33.2562, -26.27]]

Expected: [[-35.6091, -26.84, -1.57, -11.4225, -10.0834, -22.0461, -24.5471, -24.6083, -19.584, 0.1459, -21.2869, 0.5661, -1.9451, -16.0099, -0.9411, -9.0585, -8.5994, -33.1459, -32.0834, -55.674, -14.1519, -9.9812, -28.0528, -22.9489, -13.4092, -24.2978, -10.372, -18.6212, -41.9563, -45.6798, -14.6737, -2.1697, -7.8898, -28.394, -50.9822, -28.7548, -47.9392, -19.7237, -18.3957, -33.5273, -22.5207, -27.2523, -19.3471, -20.7606, -36.4002, -22.7331, 0.4241, -0.1785, -2.4508, -21.9164, -6.6577, -6.0275, -14.8178, -25.0108, -1.4222, -15.353, -39.8403, -19.9904, -2.3339, -13.9618, -11.1777, -0.9914, -24.0565, -7.9301, -29.487, -27.1088, -30.5749, -23.5468, -18.5855, -32.6158, -14.1973, -44.4143, -15.6656, -49.2748, -26.5989, -27.5254, -34.7622, -3.1144, -33.2562, -26.27]]