import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub60379 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))
in1Sub60379 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))
in0ELU98625 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Sub60379 = keras.layers.Subtract(name = 'Sub60379', )([in0Sub60379,in1Sub60379])
Res5182 = keras.layers.Reshape((3, 3, 6), name = 'Res5182', )(Sub60379)
Glo14067 = keras.layers.GlobalMaxPool2D(name = 'Glo14067', )(Res5182)
Res18624 = keras.layers.Reshape((6, 1), name = 'Res18624', )(Glo14067)
Res1903 = keras.layers.Reshape((6, 1, 1), name = 'Res1903', )(Res18624)
Res50363 = keras.layers.Reshape((6, 1, 1, 1), name = 'Res50363', )(Res1903)
Zer62825 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer62825', )(Res50363)
ELU98625 = keras.layers.ELU(alpha=-7.975003740303636, name = 'ELU98625', input_shape=(1, 1, 2, 1))(in0ELU98625)
Zer70272 = keras.layers.ZeroPadding3D(padding=((5, 0), (0, 0), (1, 0)), name = 'Zer70272', )(ELU98625)
Ave61835 = keras.layers.Average(name = 'Ave61835', )([Zer62825,Zer70272])
model = tf.keras.models.Model(inputs=[in0Sub60379,in1Sub60379,in0ELU98625], outputs=Ave61835)
in0Sub60379 = tf.constant([[[[[0.925, 0.0615], [0.7207, 0.3446], [0.6805, 0.5409]], [[0.7228, 0.6657], [0.2989, 0.2001], [0.2273, 0.8986]], [[0.972, 0.5228], [0.3172, 0.0897], [0.5236, 0.4257]]], [[[0.3071, 0.9453], [0.957, 0.9796], [0.527, 0.4824]], [[0.808, 0.0456], [0.0413, 0.331], [0.483, 0.9393]], [[0.7141, 0.5111], [0.3238, 0.3193], [0.4256, 0.5344]]], [[[0.6211, 0.7199], [0.0468, 0.3661], [0.1708, 0.5414]], [[0.9891, 0.1235], [0.2603, 0.8521], [0.7564, 0.3836]], [[0.1595, 0.0578], [0.952, 0.6275], [0.293, 0.3502]]]]])
in1Sub60379 = tf.constant([[[[[0.6152, 0.6559], [0.2721, 0.8594], [0.5988, 0.7802]], [[0.8798, 0.6027], [0.9362, 0.2101], [0.9155, 0.6494]], [[0.7923, 0.3428], [0.5323, 0.4013], [0.6454, 0.5886]]], [[[0.3302, 0.5264], [0.804, 0.962], [0.0011, 0.8778]], [[0.2273, 0.9124], [0.7685, 0.6797], [0.8881, 0.772]], [[0.2094, 0.3686], [0.5949, 0.7601], [0.3039, 0.7408]]], [[[0.2719, 0.6956], [0.7173, 0.4763], [0.184, 0.4439]], [[0.3866, 0.6845], [0.4923, 0.6527], [0.459, 0.8476]], [[0.8238, 0.5143], [0.5076, 0.4266], [0.2506, 0.1333]]]]])
in0ELU98625 = tf.constant([[[[[0.7372], [0.4382]]]]])
print (np.array2string(model.predict([in0Sub60379,in1Sub60379,in0ELU98625],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave61835.png')

LSub60379 = subtract_layer([[[[[0.925, 0.0615], [0.7207, 0.3446], [0.6805, 0.5409]], [[0.7228, 0.6657], [0.2989, 0.2001], [0.2273, 0.8986]], [[0.972, 0.5228], [0.3172, 0.0897], [0.5236, 0.4257]]], [[[0.3071, 0.9453], [0.957, 0.9796], [0.527, 0.4824]], [[0.808, 0.0456], [0.0413, 0.331], [0.483, 0.9393]], [[0.7141, 0.5111], [0.3238, 0.3193], [0.4256, 0.5344]]], [[[0.6211, 0.7199], [0.0468, 0.3661], [0.1708, 0.5414]], [[0.9891, 0.1235], [0.2603, 0.8521], [0.7564, 0.3836]], [[0.1595, 0.0578], [0.952, 0.6275], [0.293, 0.3502]]]]], [[[[[0.6152, 0.6559], [0.2721, 0.8594], [0.5988, 0.7802]], [[0.8798, 0.6027], [0.9362, 0.2101], [0.9155, 0.6494]], [[0.7923, 0.3428], [0.5323, 0.4013], [0.6454, 0.5886]]], [[[0.3302, 0.5264], [0.804, 0.962], [0.0011, 0.8778]], [[0.2273, 0.9124], [0.7685, 0.6797], [0.8881, 0.772]], [[0.2094, 0.3686], [0.5949, 0.7601], [0.3039, 0.7408]]], [[[0.2719, 0.6956], [0.7173, 0.4763], [0.184, 0.4439]], [[0.3866, 0.6845], [0.4923, 0.6527], [0.459, 0.8476]], [[0.8238, 0.5143], [0.5076, 0.4266], [0.2506, 0.1333]]]]], Sub60379), 
LRes5182 = reshape_layer(Sub60379, [3, 3, 6], Res5182), 
LGlo14067 = global_max_pool2D_layer(Res5182, Glo14067), 
LRes18624 = reshape_layer(Glo14067, [6, 1], Res18624), 
LRes1903 = reshape_layer(Res18624, [6, 1, 1], Res1903), 
LRes50363 = reshape_layer(Res1903, [6, 1, 1, 1], Res50363), 
LZer62825 = zero_padding3D_layer(Res50363, 0, 0, 0, 0, 2, 0, Zer62825), 
LELU98625 = elu_layer([[[[[0.7372], [0.4382]]]]], -7.975003740303636, ELU98625), 
LZer70272 = zero_padding3D_layer(ELU98625, 5, 0, 0, 0, 1, 0, Zer70272), 
LAve61835 = average_layer([Zer62825,Zer70272], Ave61835), 
exec_layers([LSub60379,LRes5182,LGlo14067,LRes18624,LRes1903,LRes50363,LZer62825,LELU98625,LZer70272,LAve61835],["Sub60379","Res5182","Glo14067","Res18624","Res1903","Res50363","Zer62825","ELU98625","Zer70272","Ave61835"],Ave61835,"Ave61835")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.3012500]]], [[[0.0000000], [0.0000000], [0.2094500]]], [[[0.0000000], [0.0000000], [0.2243000]]], [[[0.0000000], [0.0000000], [0.1004500]]], [[[0.0000000], [0.0000000], [0.2629500]]], [[[0.0000000], [0.3686000], [0.3437000]]]]]

Expected (Unparsed): [[[[[0],[0],[0.30125]]],[[[0],[0],[0.20945000000000003]]],[[[0],[0],[0.2243]]],[[[0],[0],[0.10044999999999998]]],[[[0],[0],[0.26295]]],[[[0],[0.3686],[0.3437]]]]]

Actual:   [[[[[0], [0], [0.3013]]], [[[0], [0], [0.2095]]], [[[0], [0], [0.2243]]], [[[0], [0], [0.1005]]], [[[0], [0], [0.263]]], [[[0], [0.3686], [0.3437]]]]]

Expected: [[[[[0], [0], [0.3013]]], [[[0], [0], [0.2095]]], [[[0], [0], [0.2243]]], [[[0], [0], [0.1005]]], [[[0], [0], [0.263]]], [[[0], [0.3686], [0.3437]]]]]