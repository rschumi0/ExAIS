import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add49026 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Add49026 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Con19221 = tf.keras.layers.Input(shape=([2, 4]))
in0Dep3060 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con47471 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Ave98490 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Ave98490 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Mul27399 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul27399 = tf.keras.layers.Input(shape=([1, 2]))
in0Con2887 = tf.keras.layers.Input(shape=([1, 6]))

Add49026 = keras.layers.Add(name = 'Add49026', )([in0Add49026,in1Add49026])
Res10928 = keras.layers.Reshape((2, 2, 2), name = 'Res10928', )(Add49026)
Res95006 = keras.layers.Reshape((2, 4), name = 'Res95006', )(Res10928)
Con19221 = keras.layers.Concatenate(axis=2, name = 'Con19221', )([Res95006,in0Con19221])
Dep3060 = keras.layers.DepthwiseConv2D((1, 2),strides=(2, 2), padding='same', name = 'Dep3060', )(in0Dep3060)
Res39889 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res39889', )(Dep3060)
Zer27181 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer27181', )(Res39889)
Con47471 = keras.layers.Concatenate(axis=4, name = 'Con47471', )([Zer27181,in0Con47471])
Ave98490 = keras.layers.Average(name = 'Ave98490', )([in0Ave98490,in1Ave98490])
Add13025 = keras.layers.Add(name = 'Add13025', )([Con47471,Ave98490])
Res25489 = keras.layers.Reshape((1, 2, 4), name = 'Res25489', )(Add13025)
Res10799 = keras.layers.Reshape((1, 8), name = 'Res10799', )(Res25489)
Mul27399 = keras.layers.Multiply(name = 'Mul27399', )([in0Mul27399,in1Mul27399])
Con2887 = keras.layers.Concatenate(axis=2, name = 'Con2887', )([Mul27399,in0Con2887])
Max94102 = keras.layers.Maximum(name = 'Max94102', )([Res10799,Con2887])
Zer75296 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer75296', )(Max94102)
Max82625 = keras.layers.Maximum(name = 'Max82625', )([Con19221,Zer75296])
Loc76133 = keras.layers.LocallyConnected1D(3, (2),strides=(1), name = 'Loc76133', )(Max82625)
model = tf.keras.models.Model(inputs=[in0Add49026,in1Add49026,in0Con19221,in0Dep3060,in0Con47471,in0Ave98490,in1Ave98490,in0Mul27399,in1Mul27399,in0Con2887], outputs=Loc76133)
w = model.get_layer('Dep3060').get_weights() 
w[0] = np.array([[[[0.6536]], [[0.9431]]]])
w[1] = np.array([0])
model.get_layer('Dep3060').set_weights(w) 
w = model.get_layer('Loc76133').get_weights() 
w[0] = np.array([[[0.363, 0.6718, 0.5162], [0.5307, 0.4613, 0.198], [0.4683, 0.5493, 0.9385], [0.1213, 0.7154, 0.329], [0.0135, 0.9055, 0.732], [0.7528, 0.2333, 0.7073], [0.6503, 0.9671, 0.0524], [0.0478, 0.1958, 0.9577], [0.4884, 0.8022, 0.3575], [0.5969, 0.5756, 0.7084], [0.6963, 0.9395, 0.5199], [0.886, 0.1497, 0.2291], [0.4366, 0.1772, 0.4236], [0.2862, 0.2955, 0.4737], [0.5826, 0.6927, 0.2366], [0.5797, 0.2436, 0.4629]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc76133').set_weights(w) 
in0Add49026 = tf.constant([[[[[0.8058, 0.1629]], [[0.4327, 0.749]]], [[[0.2206, 0.3274]], [[0.1061, 0.3752]]]]])
in1Add49026 = tf.constant([[[[[0.9858, 0.6308]], [[0.8356, 0.5377]]], [[[0.7834, 0.2039]], [[0.3193, 0.5473]]]]])
in0Con19221 = tf.constant([[[0.6263, 0.6295, 0.8208, 0.0122], [0.7572, 0.8462, 0.0583, 0.924]]])
in0Dep3060 = tf.constant([[[[0.7248], [0.5016]], [[0.7731], [0.9138]]]])
in0Con47471 = tf.constant([[[[[0.0147], [0.9677]], [[0.2681], [0.9023]]]]])
in0Ave98490 = tf.constant([[[[[0.3993, 0.6473], [0.4965, 0.1497]], [[0.1473, 0.4704], [0.3609, 0.1701]]]]])
in1Ave98490 = tf.constant([[[[[0.9215, 0.4127], [0.9629, 0.5531]], [[0.8044, 0.9128], [0.9059, 0.9953]]]]])
in0Mul27399 = tf.constant([[[0.2362, 0.8394]]])
in1Mul27399 = tf.constant([[[0.1744, 0.4019]]])
in0Con2887 = tf.constant([[[0.0291, 0.0374, 0.6572, 0.7267, 0.3122, 0.3938]]])
print (np.array2string(model.predict([in0Add49026,in1Add49026,in0Con19221,in0Dep3060,in0Con47471,in0Ave98490,in1Ave98490,in0Mul27399,in1Mul27399,in0Con2887],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc76133.png')

LAdd49026 = add_layer([[[[[[0.8058, 0.1629]], [[0.4327, 0.749]]], [[[0.2206, 0.3274]], [[0.1061, 0.3752]]]]], [[[[[0.9858, 0.6308]], [[0.8356, 0.5377]]], [[[0.7834, 0.2039]], [[0.3193, 0.5473]]]]]], Add49026), 
LRes10928 = reshape_layer(Add49026, [2, 2, 2], Res10928), 
LRes95006 = reshape_layer(Res10928, [2, 4], Res95006), 
LCon19221 = concatenate_layer([Res95006,[[[0.6263, 0.6295, 0.8208, 0.0122], [0.7572, 0.8462, 0.0583, 0.924]]]], 2, Con19221), 
LDep3060 = depthwise_conv2D_layer([[[[0.7248], [0.5016]], [[0.7731], [0.9138]]]], 1, 2,[[[[0.6536]], [[0.9431]]]],[0], 2, 2, true, Dep3060), 
LRes39889 = reshape_layer(Dep3060, [1, 1, 1, 1], Res39889), 
LZer27181 = zero_padding3D_layer(Res39889, 0, 0, 1, 0, 1, 0, Zer27181), 
LCon47471 = concatenate_layer([Zer27181,[[[[[0.0147], [0.9677]], [[0.2681], [0.9023]]]]]], 4, Con47471), 
LAve98490 = average_layer([[[[[[0.3993, 0.6473], [0.4965, 0.1497]], [[0.1473, 0.4704], [0.3609, 0.1701]]]]], [[[[[0.9215, 0.4127], [0.9629, 0.5531]], [[0.8044, 0.9128], [0.9059, 0.9953]]]]]], Ave98490), 
LAdd13025 = add_layer([Con47471,Ave98490], Add13025), 
LRes25489 = reshape_layer(Add13025, [1, 2, 4], Res25489), 
LRes10799 = reshape_layer(Res25489, [1, 8], Res10799), 
LMul27399 = multiply_layer([[[[0.2362, 0.8394]]], [[[0.1744, 0.4019]]]], Mul27399), 
LCon2887 = concatenate_layer([Mul27399,[[[0.0291, 0.0374, 0.6572, 0.7267, 0.3122, 0.3938]]]], 2, Con2887), 
LMax94102 = maximum_layer([Res10799,Con2887], Max94102), 
LZer75296 = zero_padding1D_layer(Max94102, 1, 0, Zer75296), 
LMax82625 = maximum_layer([Con19221,Zer75296], Max82625), 
LLoc76133 = locally_connected1D_layer(Max82625, 2,[[[0.363, 0.6718, 0.5162], [0.5307, 0.4613, 0.198], [0.4683, 0.5493, 0.9385], [0.1213, 0.7154, 0.329], [0.0135, 0.9055, 0.732], [0.7528, 0.2333, 0.7073], [0.6503, 0.9671, 0.0524], [0.0478, 0.1958, 0.9577], [0.4884, 0.8022, 0.3575], [0.5969, 0.5756, 0.7084], [0.6963, 0.9395, 0.5199], [0.886, 0.1497, 0.2291], [0.4366, 0.1772, 0.4236], [0.2862, 0.2955, 0.4737], [0.5826, 0.6927, 0.2366], [0.5797, 0.2436, 0.4629]]],[[0, 0, 0]], 1, Loc76133), 
exec_layers([LAdd49026,LRes10928,LRes95006,LCon19221,LDep3060,LRes39889,LZer27181,LCon47471,LAve98490,LAdd13025,LRes25489,LRes10799,LMul27399,LCon2887,LMax94102,LZer75296,LMax82625,LLoc76133],["Add49026","Res10928","Res95006","Con19221","Dep3060","Res39889","Zer27181","Con47471","Ave98490","Add13025","Res25489","Res10799","Mul27399","Con2887","Max94102","Zer75296","Max82625","Loc76133"],Loc76133,"Loc76133")

Actual (Unparsed): [[[7.7173106, 8.5731447, 6.9170024]]]

Expected (Unparsed): [[[7.717310608624,8.573144623848002,6.917002347584]]]

Actual:   [[[7.7174, 8.5732, 6.9171]]]

Expected: [[[7.7174, 8.5732, 6.9171]]]