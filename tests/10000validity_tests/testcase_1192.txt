import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul34072 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Mul34072 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Mul34072 = keras.layers.Multiply(name = 'Mul34072', )([in0Mul34072,in1Mul34072])
Res49139 = keras.layers.Reshape((1, 1, 1), name = 'Res49139', )(Mul34072)
Res74495 = keras.layers.Reshape((1, 1), name = 'Res74495', )(Res49139)
Con43952 = keras.layers.Conv1D(4, (1),strides=(1), padding='valid', dilation_rate=(1), name = 'Con43952', )(Res74495)
LST45883 = keras.layers.LSTM(2,recurrent_activation='sigmoid', name = 'LST45883', )(Con43952)
model = tf.keras.models.Model(inputs=[in0Mul34072,in1Mul34072], outputs=LST45883)
w = model.get_layer('Con43952').get_weights() 
w[0] = np.array([[[0.0267, 0.1773, 0.8367, 0.4001]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con43952').set_weights(w) 
w = model.get_layer('LST45883').get_weights() 
w[0] = np.array([[2, 6, 7, 1, 5, 7, 8, 9], [3, 9, 5, 7, 5, 10, 7, 10], [5, 7, 3, 10, 6, 4, 7, 10], [8, 3, 4, 3, 9, 2, 4, 6]])
w[1] = np.array([[1, 5, 4, 4, 9, 10, 3, 6], [3, 3, 3, 2, 6, 8, 10, 4]])
w[2] = np.array([6, 6, 4, 8, 8, 2, 4, 3])
model.get_layer('LST45883').set_weights(w) 
in0Mul34072 = tf.constant([[[[[0.973]]]]])
in1Mul34072 = tf.constant([[[[[0.9498]]]]])
print (np.array2string(model.predict([in0Mul34072,in1Mul34072],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST45883.png')

LMul34072 = multiply_layer([[[[[[0.973]]]]], [[[[[0.9498]]]]]], Mul34072), 
LRes49139 = reshape_layer(Mul34072, [1, 1, 1], Res49139), 
LRes74495 = reshape_layer(Res49139, [1, 1], Res74495), 
LCon43952 = conv1D_layer(Res74495, 1,[[[0.0267, 0.1773, 0.8367, 0.4001]]],[0, 0, 0, 0], 1, false, 1, Con43952), 
LLST45883 = lstm_layer(Con43952,[[2, 6, 7, 1, 5, 7, 8, 9], [3, 9, 5, 7, 5, 10, 7, 10], [5, 7, 3, 10, 6, 4, 7, 10], [8, 3, 4, 3, 9, 2, 4, 6]],[[1, 5, 4, 4, 9, 10, 3, 6], [3, 3, 3, 2, 6, 8, 10, 4]],[6, 6, 4, 8, 8, 2, 4, 3], LST45883), 
exec_layers([LMul34072,LRes49139,LRes74495,LCon43952,LLST45883],["Mul34072","Res49139","Res74495","Con43952","LST45883"],LST45883,"LST45883")

Actual (Unparsed): [[0.7615898, 0.7615934]]

Expected (Unparsed): [[0.7615898016607917,0.7615933797320935]]

Actual:   [[0.7616, 0.7616]]

Expected: [[0.7616, 0.7616]]