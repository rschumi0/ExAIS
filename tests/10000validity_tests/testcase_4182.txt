import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Per7175 = tf.keras.layers.Input(shape=([4, 2]))

Per7175 = keras.layers.Permute((2,1), name = 'Per7175',)(in0Per7175)
Res36695 = keras.layers.Reshape((2, 4, 1), name = 'Res36695', )(Per7175)
Res66550 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res66550', )(Res36695)
Con34428 = keras.layers.Conv3D(2, (1, 3, 1),strides=(1, 6, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con34428', )(Res66550)
model = tf.keras.models.Model(inputs=[in0Per7175], outputs=Con34428)
w = model.get_layer('Con34428').get_weights() 
w[0] = np.array([[[[[0.3, 0.1742]]], [[[0.9836, 0.3642]]], [[[0.6117, 0.7956]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con34428').set_weights(w) 
in0Per7175 = tf.constant([[[1.812, 1.9125], [1.137, 1.2211], [1.7442, 1.0213], [1.166, 1.3682]]])
print (np.array2string(model.predict([in0Per7175],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con34428.png')

LPer7175 = permute_layer([[[1.812, 1.9125], [1.137, 1.2211], [1.7442, 1.0213], [1.166, 1.3682]]], 2,1, Per7175), 
LRes36695 = reshape_layer(Per7175, [2, 4, 1], Res36695), 
LRes66550 = reshape_layer(Res36695, [2, 4, 1, 1], Res66550), 
LCon34428 = conv3D_layer(Res66550, 1, 3, 1,[[[[[0.3, 0.1742]]], [[[0.9836, 0.3642]]], [[[0.6117, 0.7956]]]]],[0, 0], 1, 6, 1, true, 1, 1, 1, Con34428), 
exec_layers([LPer7175,LRes36695,LRes66550,LCon34428],["Per7175","Res36695","Res66550","Con34428"],Con34428,"Con34428")

Actual (Unparsed): [[[[[2.7288803, 2.1174313]]], [[[2.3995531, 1.5904284]]]]]

Expected (Unparsed): [[[[[2.72888034,2.11743132]]],[[[2.3995531700000003,1.5904284000000002]]]]]

Actual:   [[[[[2.7289, 2.1175]]], [[[2.3996, 1.5905]]]]]

Expected: [[[[[2.7289, 2.1175]]], [[[2.3996, 1.5905]]]]]