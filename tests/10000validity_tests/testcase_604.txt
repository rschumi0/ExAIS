import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max25246 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max25246 = tf.keras.layers.Input(shape=([1, 2, 1]))

Max25246 = keras.layers.Maximum(name = 'Max25246', )([in0Max25246,in1Max25246])
Dep90239 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep90239', )(Max25246)
Con50711 = keras.layers.Conv2DTranspose(4, (1, 2),strides=(1, 1), padding='same', name = 'Con50711', )(Dep90239)
Res52131 = keras.layers.Reshape((1, 8), name = 'Res52131', )(Con50711)
Glo82184 = keras.layers.GlobalAveragePooling1D(name = 'Glo82184', )(Res52131)
model = tf.keras.models.Model(inputs=[in0Max25246,in1Max25246], outputs=Glo82184)
w = model.get_layer('Dep90239').get_weights() 
w[0] = np.array([[[[0.5323]]]])
w[1] = np.array([0])
model.get_layer('Dep90239').set_weights(w) 
w = model.get_layer('Con50711').get_weights() 
w[0] = np.array([[[[0.8371], [0.9538], [0.2195], [0.0047]], [[0.0489], [0.0075], [0.4576], [0.1172]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con50711').set_weights(w) 
in0Max25246 = tf.constant([[[[0.7567], [0.1516]]]])
in1Max25246 = tf.constant([[[[0.4196], [0.2967]]]])
print (np.array2string(model.predict([in0Max25246,in1Max25246],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo82184.png')

LMax25246 = maximum_layer([[[[[0.7567], [0.1516]]]], [[[[0.4196], [0.2967]]]]], Max25246), 
LDep90239 = depthwise_conv2D_layer(Max25246, 1, 1,[[[[0.5323]]]],[0], 1, 1, false, Dep90239), 
LCon50711 = conv2D_transpose_layer(Dep90239, 1, 2,[[[[0.8371], [0.9538], [0.2195], [0.0047]], [[0.0489], [0.0075], [0.4576], [0.1172]]]],[0, 0, 0, 0], 1, 1, true, Con50711), 
LRes52131 = reshape_layer(Con50711, [1, 8], Res52131), 
LGlo82184 = global_average_pooling1D_layer(Res52131, Glo82184), 
exec_layers([LMax25246,LDep90239,LCon50711,LRes52131,LGlo82184],["Max25246","Dep90239","Con50711","Res52131","Glo82184"],Glo82184,"Glo82184")

Actual (Unparsed): [[0.3371767, 0.3841824, 0.0884127, 0.0018931, 0.1519026, 0.1536578, 0.2189837, 0.0479494]]

Expected (Unparsed): [[0.337176689311,0.384182446858,0.088412714495,0.001893119627,0.15190255745999998,0.153657822033,0.21898373271100002,0.047949440279]]

Actual:   [[0.3372, 0.3842, 0.0885, 0.0019, 0.152, 0.1537, 0.219, 0.048]]

Expected: [[0.3372, 0.3842, 0.0885, 0.0019, 0.152, 0.1537, 0.219, 0.048]]