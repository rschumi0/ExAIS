import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sim6769 = tf.keras.layers.Input(shape=([1, 2]))

Sim6769 = keras.layers.SimpleRNN(2,name = 'Sim6769', )(in0Sim6769)
Res99059 = keras.layers.Reshape((2, 1), name = 'Res99059', )(Sim6769)
Res27336 = keras.layers.Reshape((2, 1, 1), name = 'Res27336', )(Res99059)
Res46390 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res46390', )(Res27336)
Cro68379 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 0)), name = 'Cro68379', )(Res46390)
Res81451 = keras.layers.Reshape((2, 1, 1), name = 'Res81451', )(Cro68379)
Res44744 = keras.layers.Reshape((2, 1), name = 'Res44744', )(Res81451)
Sim19876 = keras.layers.SimpleRNN(2,name = 'Sim19876', )(Res44744)
Res75274 = keras.layers.Reshape((2, 1), name = 'Res75274', )(Sim19876)
Res14360 = keras.layers.Reshape((2, 1, 1), name = 'Res14360', )(Res75274)
Ave31722 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 1), padding='valid', name = 'Ave31722', )(Res14360)
Res49200 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res49200', )(Ave31722)
Zer13875 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer13875', )(Res49200)
model = tf.keras.models.Model(inputs=[in0Sim6769], outputs=Zer13875)
w = model.get_layer('Sim6769').get_weights() 
w[0] = np.array([[1, 4], [5, 5]])
w[1] = np.array([[3, 4], [5, 7]])
w[2] = np.array([3, 10])
model.get_layer('Sim6769').set_weights(w) 
w = model.get_layer('Sim19876').get_weights() 
w[0] = np.array([[9, 10]])
w[1] = np.array([[2, 8], [3, 4]])
w[2] = np.array([7, 9])
model.get_layer('Sim19876').set_weights(w) 
in0Sim6769 = tf.constant([[[6, 8]]])
print (np.array2string(model.predict([in0Sim6769],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer13875.png')

LSim6769 = simple_rnn_layer([[[6, 8]]],[[1, 4], [5, 5]],[[3, 4], [5, 7]],[3, 10], Sim6769), 
LRes99059 = reshape_layer(Sim6769, [2, 1], Res99059), 
LRes27336 = reshape_layer(Res99059, [2, 1, 1], Res27336), 
LRes46390 = reshape_layer(Res27336, [2, 1, 1, 1], Res46390), 
LCro68379 = cropping3D_layer(Res46390, 0, 0, 0, 0, 0, 0, Cro68379), 
LRes81451 = reshape_layer(Cro68379, [2, 1, 1], Res81451), 
LRes44744 = reshape_layer(Res81451, [2, 1], Res44744), 
LSim19876 = simple_rnn_layer(Res44744,[[9, 10]],[[2, 8], [3, 4]],[7, 9], Sim19876), 
LRes75274 = reshape_layer(Sim19876, [2, 1], Res75274), 
LRes14360 = reshape_layer(Res75274, [2, 1, 1], Res14360), 
LAve31722 = average_pooling2D_layer(Res14360, 2, 1, 1, 1, false, Ave31722), 
LRes49200 = reshape_layer(Ave31722, [1, 1, 1, 1], Res49200), 
LZer13875 = zero_padding3D_layer(Res49200, 1, 1, 1, 1, 1, 1, Zer13875), 
exec_layers([LSim6769,LRes99059,LRes27336,LRes46390,LCro68379,LRes81451,LRes44744,LSim19876,LRes75274,LRes14360,LAve31722,LRes49200,LZer13875],["Sim6769","Res99059","Res27336","Res46390","Cro68379","Res81451","Res44744","Sim19876","Res75274","Res14360","Ave31722","Res49200","Zer13875"],Zer13875,"Zer13875")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]