import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub82753 = tf.keras.layers.Input(shape=([3]))
in1Sub82753 = tf.keras.layers.Input(shape=([3]))
in0Con40188 = tf.keras.layers.Input(shape=([3, 3, 3, 1]))
in0Sub21399 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))
in1Sub21399 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))

Sub82753 = keras.layers.Subtract(name = 'Sub82753', )([in0Sub82753,in1Sub82753])
Res45568 = keras.layers.Reshape((3, 1), name = 'Res45568', )(Sub82753)
Res76302 = keras.layers.Reshape((3, 1, 1), name = 'Res76302', )(Res45568)
Res6838 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res6838', )(Res76302)
Zer72199 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (2, 0)), name = 'Zer72199', )(Res6838)
Con40188 = keras.layers.Concatenate(axis=4, name = 'Con40188', )([Zer72199,in0Con40188])
Sub21399 = keras.layers.Subtract(name = 'Sub21399', )([in0Sub21399,in1Sub21399])
Max1725 = keras.layers.Maximum(name = 'Max1725', )([Con40188,Sub21399])
Res5463 = keras.layers.Reshape((3, 3, 6), name = 'Res5463', )(Max1725)
Res11428 = keras.layers.Reshape((3, 18), name = 'Res11428', )(Res5463)
Glo846 = keras.layers.GlobalMaxPool1D(name = 'Glo846', )(Res11428)
Res7214 = keras.layers.Reshape((18, 1), name = 'Res7214', )(Glo846)
Res4396 = keras.layers.Reshape((18, 1, 1), name = 'Res4396', )(Res7214)
Zer97863 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer97863', )(Res4396)
model = tf.keras.models.Model(inputs=[in0Sub82753,in1Sub82753,in0Con40188,in0Sub21399,in1Sub21399], outputs=Zer97863)
in0Sub82753 = tf.constant([[0.1996, 0.7938, 0.7241]])
in1Sub82753 = tf.constant([[0.7282, 0.6494, 0.2886]])
in0Con40188 = tf.constant([[[[[0.9235], [0.1858], [0.4467]], [[0.12], [0.6964], [0.495]], [[0.3826], [0.2988], [0.9417]]], [[[0.0969], [0.4691], [0.3026]], [[0.9892], [0.341], [0.4444]], [[0.9549], [0.2302], [0.3385]]], [[[0.7961], [0.8387], [0.9598]], [[0.8993], [0.0987], [0.4482]], [[0.2623], [0.3405], [0.7177]]]]])
in0Sub21399 = tf.constant([[[[[0.3175, 0.8546], [0.7852, 0.9386], [0.4428, 0.4529]], [[0.0956, 0.5128], [0.2519, 0.6493], [0.2044, 0.0779]], [[0.4496, 0.9208], [0.0902, 0.9369], [0.7554, 0.0291]]], [[[0.7052, 0.1478], [0.6897, 0.993], [0.6872, 0.3883]], [[0.2754, 0.2965], [0.3817, 0.08], [0.8473, 0.8846]], [[0.3162, 0.503], [0.6629, 0.0105], [0.6019, 0.0893]]], [[[0.4238, 0.6701], [0.478, 0.2135], [0.1296, 0.1826]], [[0.3584, 0.5705], [0.9143, 0.4565], [0.2936, 0.6698]], [[0.6414, 0.6215], [0.7166, 0.0634], [0.0719, 0.9968]]]]])
in1Sub21399 = tf.constant([[[[[0.7084, 0.6741], [0.3625, 0.8198], [0.7868, 0.991]], [[0.497, 0.7622], [0.4012, 0.9625], [0.0125, 0.0283]], [[0.8961, 0.1294], [0.0405, 0.7421], [0.6999, 0.9151]]], [[[0.2506, 0.4127], [0.8852, 0.0165], [0.7597, 0.4925]], [[0.054, 0.5266], [0.4488, 0.4354], [0.7063, 0.7553]], [[0.4134, 0.2016], [0.8644, 0.7196], [0.4699, 0.8599]]], [[[0.7483, 0.9196], [0.7364, 0.7923], [0.7222, 0.3325]], [[0.3106, 0.019], [0.5644, 0.5196], [0.9811, 0.3311]], [[0.3567, 0.3638], [0.7248, 0.244], [0.9278, 0.2338]]]]])
print (np.array2string(model.predict([in0Sub82753,in1Sub82753,in0Con40188,in0Sub21399,in1Sub21399],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer97863.png')

LSub82753 = subtract_layer([[0.1996, 0.7938, 0.7241]], [[0.7282, 0.6494, 0.2886]], Sub82753), 
LRes45568 = reshape_layer(Sub82753, [3, 1], Res45568), 
LRes76302 = reshape_layer(Res45568, [3, 1, 1], Res76302), 
LRes6838 = reshape_layer(Res76302, [3, 1, 1, 1], Res6838), 
LZer72199 = zero_padding3D_layer(Res6838, 0, 0, 2, 0, 2, 0, Zer72199), 
LCon40188 = concatenate_layer([Zer72199,[[[[[0.9235], [0.1858], [0.4467]], [[0.12], [0.6964], [0.495]], [[0.3826], [0.2988], [0.9417]]], [[[0.0969], [0.4691], [0.3026]], [[0.9892], [0.341], [0.4444]], [[0.9549], [0.2302], [0.3385]]], [[[0.7961], [0.8387], [0.9598]], [[0.8993], [0.0987], [0.4482]], [[0.2623], [0.3405], [0.7177]]]]]], 4, Con40188), 
LSub21399 = subtract_layer([[[[[0.3175, 0.8546], [0.7852, 0.9386], [0.4428, 0.4529]], [[0.0956, 0.5128], [0.2519, 0.6493], [0.2044, 0.0779]], [[0.4496, 0.9208], [0.0902, 0.9369], [0.7554, 0.0291]]], [[[0.7052, 0.1478], [0.6897, 0.993], [0.6872, 0.3883]], [[0.2754, 0.2965], [0.3817, 0.08], [0.8473, 0.8846]], [[0.3162, 0.503], [0.6629, 0.0105], [0.6019, 0.0893]]], [[[0.4238, 0.6701], [0.478, 0.2135], [0.1296, 0.1826]], [[0.3584, 0.5705], [0.9143, 0.4565], [0.2936, 0.6698]], [[0.6414, 0.6215], [0.7166, 0.0634], [0.0719, 0.9968]]]]], [[[[[0.7084, 0.6741], [0.3625, 0.8198], [0.7868, 0.991]], [[0.497, 0.7622], [0.4012, 0.9625], [0.0125, 0.0283]], [[0.8961, 0.1294], [0.0405, 0.7421], [0.6999, 0.9151]]], [[[0.2506, 0.4127], [0.8852, 0.0165], [0.7597, 0.4925]], [[0.054, 0.5266], [0.4488, 0.4354], [0.7063, 0.7553]], [[0.4134, 0.2016], [0.8644, 0.7196], [0.4699, 0.8599]]], [[[0.7483, 0.9196], [0.7364, 0.7923], [0.7222, 0.3325]], [[0.3106, 0.019], [0.5644, 0.5196], [0.9811, 0.3311]], [[0.3567, 0.3638], [0.7248, 0.244], [0.9278, 0.2338]]]]], Sub21399), 
LMax1725 = maximum_layer([Con40188,Sub21399], Max1725), 
LRes5463 = reshape_layer(Max1725, [3, 3, 6], Res5463), 
LRes11428 = reshape_layer(Res5463, [3, 18], Res11428), 
LGlo846 = global_max_pool1D_layer(Res11428, Glo846), 
LRes7214 = reshape_layer(Glo846, [18, 1], Res7214), 
LRes4396 = reshape_layer(Res7214, [18, 1, 1], Res4396), 
LZer97863 = zero_padding2D_layer(Res4396, 1, 1, 1, 1, Zer97863), 
exec_layers([LSub82753,LRes45568,LRes76302,LRes6838,LZer72199,LCon40188,LSub21399,LMax1725,LRes5463,LRes11428,LGlo846,LRes7214,LRes4396,LZer97863],["Sub82753","Res45568","Res76302","Res6838","Zer72199","Con40188","Sub21399","Max1725","Res5463","Res11428","Glo846","Res7214","Res4396","Zer97863"],Zer97863,"Zer97863")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.4546000], [0.0000000]], [[0.0000000], [0.9235000], [0.0000000]], [[0.0000000], [0.4227000], [0.0000000]], [[0.0000000], [0.9765000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.9598000], [0.0000000]], [[0.0000000], [0.2214000], [0.0000000]], [[0.0000000], [0.9892000], [0.0000000]], [[0.0000000], [0.3499000], [0.0000000]], [[0.0000000], [0.6964000], [0.0000000]], [[0.0000000], [0.1919000], [0.0000000]], [[0.0000000], [0.4950000], [0.0000000]], [[0.0000000], [0.2847000], [0.0000000]], [[0.0000000], [0.9549000], [0.0000000]], [[0.0000000], [0.0497000], [0.0000000]], [[0.0000000], [0.3405000], [0.0000000]], [[0.0000000], [0.4355000], [0.0000000]], [[0.0000000], [0.9417000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[0.45460000000000006],[0]],[[0],[0.9235],[0]],[[0],[0.4227],[0]],[[0],[0.9765],[0]],[[0],[0],[0]],[[0],[0.9598],[0]],[[0],[0.22139999999999999],[0]],[[0],[0.9892],[0]],[[0],[0.3499],[0]],[[0],[0.6964],[0]],[[0],[0.1919],[0]],[[0],[0.495],[0]],[[0],[0.28469999999999995],[0]],[[0],[0.9549],[0]],[[0],[0.0497],[0]],[[0],[0.3405],[0]],[[0],[0.43549999999999994],[0]],[[0],[0.9417],[0]],[[0],[0],[0]]]]

Actual:   [[[[0], [0], [0]], [[0], [0.4546], [0]], [[0], [0.9235], [0]], [[0], [0.4227], [0]], [[0], [0.9765], [0]], [[0], [0], [0]], [[0], [0.9598], [0]], [[0], [0.2214], [0]], [[0], [0.9892], [0]], [[0], [0.3499], [0]], [[0], [0.6964], [0]], [[0], [0.1919], [0]], [[0], [0.495], [0]], [[0], [0.2847], [0]], [[0], [0.9549], [0]], [[0], [0.0497], [0]], [[0], [0.3405], [0]], [[0], [0.4355], [0]], [[0], [0.9417], [0]], [[0], [0], [0]]]]

Expected: [[[[0], [0], [0]], [[0], [0.4547], [0]], [[0], [0.9235], [0]], [[0], [0.4227], [0]], [[0], [0.9765], [0]], [[0], [0], [0]], [[0], [0.9598], [0]], [[0], [0.2214], [0]], [[0], [0.9892], [0]], [[0], [0.3499], [0]], [[0], [0.6964], [0]], [[0], [0.1919], [0]], [[0], [0.495], [0]], [[0], [0.2847], [0]], [[0], [0.9549], [0]], [[0], [0.0497], [0]], [[0], [0.3405], [0]], [[0], [0.4355], [0]], [[0], [0.9417], [0]], [[0], [0], [0]]]]