import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con5569 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Max61985 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max61985 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con91108 = tf.keras.layers.Input(shape=([3, 2]))
in0Min37143 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min37143 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con6288 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot76859 = tf.keras.layers.Input(shape=([2]))
in1Dot76859 = tf.keras.layers.Input(shape=([2]))
in0Con34218 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot63624 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot63624 = tf.keras.layers.Input(shape=([2, 3]))

Con5569 = keras.layers.Conv2D(3, (2, 2),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con5569', )(in0Con5569)
Res65326 = keras.layers.Reshape((1, 3), name = 'Res65326', )(Con5569)
Max61985 = keras.layers.Maximum(name = 'Max61985', )([in0Max61985,in1Max61985])
Res24086 = keras.layers.Reshape((1, 4), name = 'Res24086', )(Max61985)
Dot80872 = keras.layers.Dot(axes=(1, 1), name = 'Dot80872', )([Res65326,Res24086])
Res48648 = keras.layers.Reshape((3, 4, 1), name = 'Res48648', )(Dot80872)
Res84455 = keras.layers.Reshape((3, 4, 1, 1), name = 'Res84455', )(Res48648)
Glo16649 = keras.layers.GlobalAveragePooling3D(name = 'Glo16649', )(Res84455)
Res91129 = keras.layers.Reshape((1, 1), name = 'Res91129', )(Glo16649)
Zer14999 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer14999', )(Res91129)
Con91108 = keras.layers.Concatenate(axis=2, name = 'Con91108', )([Zer14999,in0Con91108])
Min37143 = keras.layers.Minimum(name = 'Min37143', )([in0Min37143,in1Min37143])
Res85441 = keras.layers.Reshape((2, 1), name = 'Res85441', )(Min37143)
Zer82251 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer82251', )(Res85441)
Con6288 = keras.layers.Concatenate(axis=2, name = 'Con6288', )([Zer82251,in0Con6288])
Dot76859 = keras.layers.Dot(axes=(1, 1), name = 'Dot76859', )([in0Dot76859,in1Dot76859])
Res18901 = keras.layers.Reshape((1, 1), name = 'Res18901', )(Dot76859)
Zer73973 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer73973', )(Res18901)
Con34218 = keras.layers.Concatenate(axis=2, name = 'Con34218', )([Zer73973,in0Con34218])
Dot63624 = keras.layers.Dot(axes=(1, 1), name = 'Dot63624', )([in0Dot63624,in1Dot63624])
Add35865 = keras.layers.Add(name = 'Add35865', )([Con34218,Dot63624])
Max11519 = keras.layers.Maximum(name = 'Max11519', )([Con6288,Add35865])
Add48798 = keras.layers.Add(name = 'Add48798', )([Con91108,Max11519])
model = tf.keras.models.Model(inputs=[in0Con5569,in0Max61985,in1Max61985,in0Con91108,in0Min37143,in1Min37143,in0Con6288,in0Dot76859,in1Dot76859,in0Con34218,in0Dot63624,in1Dot63624], outputs=Add48798)
w = model.get_layer('Con5569').get_weights() 
w[0] = np.array([[[[0.9329, 0.5553, 0.6648]], [[0.8503, 0.2931, 0.3803]]], [[[0.6992, 0.1737, 0.5427]], [[0.2282, 0.1605, 0.1175]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con5569').set_weights(w) 
in0Con5569 = tf.constant([[[[0.2542], [0.0416]], [[0.7377], [0.5655]]]])
in0Max61985 = tf.constant([[[[0.6649, 0.3456], [0.0377, 0.5986]]]])
in1Max61985 = tf.constant([[[[0.7247, 0.4996], [0.6807, 0.8409]]]])
in0Con91108 = tf.constant([[[0.0599, 0.6395], [0.5829, 0.253], [0.9319, 0.3886]]])
in0Min37143 = tf.constant([[[[0.962]], [[0.7687]]]])
in1Min37143 = tf.constant([[[[0.6641]], [[0.9302]]]])
in0Con6288 = tf.constant([[[0.867, 0.787], [0.2543, 0.4987], [0.9404, 0.2186]]])
in0Dot76859 = tf.constant([[0.4532, 0.51]])
in1Dot76859 = tf.constant([[0.3501, 0.774]])
in0Con34218 = tf.constant([[[0.3431, 0.9024], [0.8112, 0.3107], [0.7609, 0.7751]]])
in0Dot63624 = tf.constant([[[0.9865, 0.4365, 0.7063], [0.4769, 0.8076, 0.7895]]])
in1Dot63624 = tf.constant([[[0.455, 0.0906, 0.5441], [0.9549, 0.1515, 0.3217]]])
print (np.array2string(model.predict([in0Con5569,in0Max61985,in1Max61985,in0Con91108,in0Min37143,in1Min37143,in0Con6288,in0Dot76859,in1Dot76859,in0Con34218,in0Dot63624,in1Dot63624],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add48798.png')

LCon5569 = conv2D_layer([[[[0.2542], [0.0416]], [[0.7377], [0.5655]]]], 2, 2,[[[[0.9329, 0.5553, 0.6648]], [[0.8503, 0.2931, 0.3803]]], [[[0.6992, 0.1737, 0.5427]], [[0.2282, 0.1605, 0.1175]]]],[0, 0, 0], 1, 1, false, 1, 1, Con5569), 
LRes65326 = reshape_layer(Con5569, [1, 3], Res65326), 
LMax61985 = maximum_layer([[[[[0.6649, 0.3456], [0.0377, 0.5986]]]], [[[[0.7247, 0.4996], [0.6807, 0.8409]]]]], Max61985), 
LRes24086 = reshape_layer(Max61985, [1, 4], Res24086), 
LDot80872 = dot_layer(Res65326,Res24086, 1, 1, Dot80872), 
LRes48648 = reshape_layer(Dot80872, [3, 4, 1], Res48648), 
LRes84455 = reshape_layer(Res48648, [3, 4, 1, 1], Res84455), 
LGlo16649 = global_average_pooling3D_layer(Res84455, Glo16649), 
LRes91129 = reshape_layer(Glo16649, [1, 1], Res91129), 
LZer14999 = zero_padding1D_layer(Res91129, 2, 0, Zer14999), 
LCon91108 = concatenate_layer([Zer14999,[[[0.0599, 0.6395], [0.5829, 0.253], [0.9319, 0.3886]]]], 2, Con91108), 
LMin37143 = minimum_layer([[[[[0.962]], [[0.7687]]]], [[[[0.6641]], [[0.9302]]]]], Min37143), 
LRes85441 = reshape_layer(Min37143, [2, 1], Res85441), 
LZer82251 = zero_padding1D_layer(Res85441, 1, 0, Zer82251), 
LCon6288 = concatenate_layer([Zer82251,[[[0.867, 0.787], [0.2543, 0.4987], [0.9404, 0.2186]]]], 2, Con6288), 
LDot76859 = dot_layer([[0.4532, 0.51]], [[0.3501, 0.774]], 1, 1, Dot76859), 
LRes18901 = reshape_layer(Dot76859, [1, 1], Res18901), 
LZer73973 = zero_padding1D_layer(Res18901, 2, 0, Zer73973), 
LCon34218 = concatenate_layer([Zer73973,[[[0.3431, 0.9024], [0.8112, 0.3107], [0.7609, 0.7751]]]], 2, Con34218), 
LDot63624 = dot_layer([[[0.9865, 0.4365, 0.7063], [0.4769, 0.8076, 0.7895]]], [[[0.455, 0.0906, 0.5441], [0.9549, 0.1515, 0.3217]]], 1, 1, Dot63624), 
LAdd35865 = add_layer([Con34218,Dot63624], Add35865), 
LMax11519 = maximum_layer([Con6288,Add35865], Max11519), 
LAdd48798 = add_layer([Con91108,Max11519], Add48798), 
exec_layers([LCon5569,LRes65326,LMax61985,LRes24086,LDot80872,LRes48648,LRes84455,LGlo16649,LRes91129,LZer14999,LCon91108,LMin37143,LRes85441,LZer82251,LCon6288,LDot76859,LRes18901,LZer73973,LCon34218,LDot63624,LAdd35865,LMax11519,LAdd48798],["Con5569","Res65326","Max61985","Res24086","Dot80872","Res48648","Res84455","Glo16649","Res91129","Zer14999","Con91108","Min37143","Res85441","Zer82251","Con6288","Dot76859","Res18901","Zer73973","Con34218","Dot63624","Add35865","Max11519","Add48798"],Add48798,"Add48798")

Actual (Unparsed): [[[0.9042494, 0.9269000, 2.2320734], [0.9697848, 1.5559983, 1.0610046], [2.0728657, 1.8764001, 1.8019800]]]

Expected (Unparsed): [[[0.90424931,0.9269,2.23207338],[0.96978474,1.5559983,1.0610045700000001],[2.0728656634805,1.87640003,1.8019799800000003]]]

Actual:   [[[0.9043, 0.9269, 2.2321], [0.9698, 1.556, 1.0611], [2.0729, 1.8765, 1.802]]]

Expected: [[[0.9043, 0.9269, 2.2321], [0.9698, 1.556, 1.0611], [2.0729, 1.8765, 1.802]]]