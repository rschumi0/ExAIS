import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max82547 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max82547 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Add17130 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add17130 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave32850 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave32850 = tf.keras.layers.Input(shape=([2, 2, 1]))

Max82547 = keras.layers.Maximum(name = 'Max82547', )([in0Max82547,in1Max82547])
Res53667 = keras.layers.Reshape((1, 2), name = 'Res53667', )(Max82547)
Glo59424 = keras.layers.GlobalMaxPool1D(name = 'Glo59424', )(Res53667)
Res5214 = keras.layers.Reshape((2, 1), name = 'Res5214', )(Glo59424)
Res43963 = keras.layers.Reshape((2, 1, 1), name = 'Res43963', )(Res5214)
Zer57824 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer57824', )(Res43963)
Add17130 = keras.layers.Add(name = 'Add17130', )([in0Add17130,in1Add17130])
Sub49529 = keras.layers.Subtract(name = 'Sub49529', )([Zer57824,Add17130])
Ave32850 = keras.layers.Average(name = 'Ave32850', )([in0Ave32850,in1Ave32850])
Min34374 = keras.layers.Minimum(name = 'Min34374', )([Sub49529,Ave32850])
model = tf.keras.models.Model(inputs=[in0Max82547,in1Max82547,in0Add17130,in1Add17130,in0Ave32850,in1Ave32850], outputs=Min34374)
in0Max82547 = tf.constant([[[[0.7005], [0.8104]]]])
in1Max82547 = tf.constant([[[[0.0816], [0.3624]]]])
in0Add17130 = tf.constant([[[[0.4173], [0.824]], [[0.1535], [0.4464]]]])
in1Add17130 = tf.constant([[[[0.1607], [0.4867]], [[0.3019], [0.3252]]]])
in0Ave32850 = tf.constant([[[[0.6215], [0.9633]], [[0.9067], [0.153]]]])
in1Ave32850 = tf.constant([[[[0.7422], [0.7656]], [[0.8505], [0.7186]]]])
print (np.array2string(model.predict([in0Max82547,in1Max82547,in0Add17130,in1Add17130,in0Ave32850,in1Ave32850],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min34374.png')

LMax82547 = maximum_layer([[[[[0.7005], [0.8104]]]], [[[[0.0816], [0.3624]]]]], Max82547), 
LRes53667 = reshape_layer(Max82547, [1, 2], Res53667), 
LGlo59424 = global_max_pool1D_layer(Res53667, Glo59424), 
LRes5214 = reshape_layer(Glo59424, [2, 1], Res5214), 
LRes43963 = reshape_layer(Res5214, [2, 1, 1], Res43963), 
LZer57824 = zero_padding2D_layer(Res43963, 0, 0, 1, 0, Zer57824), 
LAdd17130 = add_layer([[[[[0.4173], [0.824]], [[0.1535], [0.4464]]]], [[[[0.1607], [0.4867]], [[0.3019], [0.3252]]]]], Add17130), 
LSub49529 = subtract_layer(Zer57824,Add17130, Sub49529), 
LAve32850 = average_layer([[[[[0.6215], [0.9633]], [[0.9067], [0.153]]]], [[[[0.7422], [0.7656]], [[0.8505], [0.7186]]]]], Ave32850), 
LMin34374 = minimum_layer([Sub49529,Ave32850], Min34374), 
exec_layers([LMax82547,LRes53667,LGlo59424,LRes5214,LRes43963,LZer57824,LAdd17130,LSub49529,LAve32850,LMin34374],["Max82547","Res53667","Glo59424","Res5214","Res43963","Zer57824","Add17130","Sub49529","Ave32850","Min34374"],Min34374,"Min34374")

Actual (Unparsed): [[[[-0.5780000], [-0.6102000]], [[-0.4554000], [0.0388000]]]]

Expected (Unparsed): [[[[-0.5780000000000001],[-0.6102]],[[-0.4554],[0.038799999999999946]]]]

Actual:   [[[[-0.578], [-0.6102]], [[-0.4554], [0.0388]]]]

Expected: [[[[-0.578], [-0.6102]], [[-0.4554], [0.0388]]]]