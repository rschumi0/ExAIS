import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo48105 = tf.keras.layers.Input(shape=([1, 1]))
in0Con87888 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Max44454 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max44454 = tf.keras.layers.Input(shape=([1, 1, 2]))

Glo48105 = keras.layers.GlobalAveragePooling1D(name = 'Glo48105', )(in0Glo48105)
Mas75063 = keras.layers.Masking(mask_value=1, name = 'Mas75063', )(Glo48105)
Res43022 = keras.layers.Reshape((1, 1), name = 'Res43022', )(Mas75063)
Res83592 = keras.layers.Reshape((1, 1, 1), name = 'Res83592', )(Res43022)
Con87888 = keras.layers.Concatenate(axis=3, name = 'Con87888', )([Res83592,in0Con87888])
Max44454 = keras.layers.Maximum(name = 'Max44454', )([in0Max44454,in1Max44454])
Max82870 = keras.layers.Maximum(name = 'Max82870', )([Con87888,Max44454])
model = tf.keras.models.Model(inputs=[in0Glo48105,in0Con87888,in0Max44454,in1Max44454], outputs=Max82870)
in0Glo48105 = tf.constant([[[1.5529]]])
in0Con87888 = tf.constant([[[[0.2908]]]])
in0Max44454 = tf.constant([[[[0.8072, 0.8257]]]])
in1Max44454 = tf.constant([[[[0.4478, 0.6971]]]])
print (np.array2string(model.predict([in0Glo48105,in0Con87888,in0Max44454,in1Max44454],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max82870.png')

LGlo48105 = global_average_pooling1D_layer([[[1.5529]]], Glo48105), 
LMas75063 = masking_layer(Glo48105, 1, Mas75063), 
LRes43022 = reshape_layer(Mas75063, [1, 1], Res43022), 
LRes83592 = reshape_layer(Res43022, [1, 1, 1], Res83592), 
LCon87888 = concatenate_layer([Res83592,[[[[0.2908]]]]], 3, Con87888), 
LMax44454 = maximum_layer([[[[[0.8072, 0.8257]]]], [[[[0.4478, 0.6971]]]]], Max44454), 
LMax82870 = maximum_layer([Con87888,Max44454], Max82870), 
exec_layers([LGlo48105,LMas75063,LRes43022,LRes83592,LCon87888,LMax44454,LMax82870],["Glo48105","Mas75063","Res43022","Res83592","Con87888","Max44454","Max82870"],Max82870,"Max82870")

Actual (Unparsed): [[[[1.5529000, 0.8257000]]]]

Expected (Unparsed): [[[[1.5529,0.8257]]]]

Actual:   [[[[1.5529, 0.8257]]]]

Expected: [[[[1.5529, 0.8257]]]]