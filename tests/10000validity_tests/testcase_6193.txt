import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave69329 = tf.keras.layers.Input(shape=([1, 2, 1]))

Ave69329 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 8), padding='valid', name = 'Ave69329', )(in0Ave69329)
Res7002 = keras.layers.Reshape((1, 1), name = 'Res7002', )(Ave69329)
Loc34135 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc34135', )(Res7002)
Ave42686 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave42686', )(Loc34135)
model = tf.keras.models.Model(inputs=[in0Ave69329], outputs=Ave42686)
w = model.get_layer('Loc34135').get_weights() 
w[0] = np.array([[[0.2781, 0.0196]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc34135').set_weights(w) 
in0Ave69329 = tf.constant([[[[1.8123], [1.7952]]]])
print (np.array2string(model.predict([in0Ave69329],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave42686.png')

LAve69329 = average_pooling2D_layer([[[[1.8123], [1.7952]]]], 1, 1, 1, 8, false, Ave69329), 
LRes7002 = reshape_layer(Ave69329, [1, 1], Res7002), 
LLoc34135 = locally_connected1D_layer(Res7002, 1,[[[0.2781, 0.0196]]],[[0, 0]], 1, Loc34135), 
LAve42686 = average_pooling1D_layer(Loc34135, 1, 1, true, Ave42686), 
exec_layers([LAve69329,LRes7002,LLoc34135,LAve42686],["Ave69329","Res7002","Loc34135","Ave42686"],Ave42686,"Ave42686")

Actual (Unparsed): [[[0.5040006, 0.0355211]]]

Expected (Unparsed): [[[0.5040006300000001,0.03552108]]]

Actual:   [[[0.5041, 0.0356]]]

Expected: [[[0.5041, 0.0356]]]