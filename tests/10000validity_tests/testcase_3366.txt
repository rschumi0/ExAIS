import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot71720 = tf.keras.layers.Input(shape=([3]))
in1Dot71720 = tf.keras.layers.Input(shape=([3]))

Dot71720 = keras.layers.Dot(axes=(1, 1), name = 'Dot71720', )([in0Dot71720,in1Dot71720])
Res21494 = keras.layers.Reshape((1, 1), name = 'Res21494', )(Dot71720)
Res8198 = keras.layers.Reshape((1, 1, 1), name = 'Res8198', )(Res21494)
Glo67043 = keras.layers.GlobalAveragePooling2D(name = 'Glo67043', )(Res8198)
Res35819 = keras.layers.Reshape((1, 1), name = 'Res35819', )(Glo67043)
Res63993 = keras.layers.Reshape((1, 1, 1), name = 'Res63993', )(Res35819)
Glo42757 = keras.layers.GlobalAveragePooling2D(name = 'Glo42757', )(Res63993)
model = tf.keras.models.Model(inputs=[in0Dot71720,in1Dot71720], outputs=Glo42757)
in0Dot71720 = tf.constant([[0.5038, 0.2451, 0.5913]])
in1Dot71720 = tf.constant([[0.3431, 0.0705, 0.3804]])
print (np.array2string(model.predict([in0Dot71720,in1Dot71720],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo42757.png')

LDot71720 = dot_layer([[0.5038, 0.2451, 0.5913]], [[0.3431, 0.0705, 0.3804]], 1, 1, Dot71720), 
LRes21494 = reshape_layer(Dot71720, [1, 1], Res21494), 
LRes8198 = reshape_layer(Res21494, [1, 1, 1], Res8198), 
LGlo67043 = global_average_pooling2D_layer(Res8198, Glo67043), 
LRes35819 = reshape_layer(Glo67043, [1, 1], Res35819), 
LRes63993 = reshape_layer(Res35819, [1, 1, 1], Res63993), 
LGlo42757 = global_average_pooling2D_layer(Res63993, Glo42757), 
exec_layers([LDot71720,LRes21494,LRes8198,LGlo67043,LRes35819,LRes63993,LGlo42757],["Dot71720","Res21494","Res8198","Glo67043","Res35819","Res63993","Glo42757"],Glo42757,"Glo42757")

Actual (Unparsed): [[0.4150639]]

Expected (Unparsed): [[0.41506385]]

Actual:   [[0.4151]]

Expected: [[0.4151]]