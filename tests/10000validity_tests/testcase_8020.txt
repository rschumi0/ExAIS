import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot13279 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot13279 = tf.keras.layers.Input(shape=([3, 2]))

Dot13279 = keras.layers.Dot(axes=(1, 1), name = 'Dot13279', )([in0Dot13279,in1Dot13279])
Max78094 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max78094', )(Dot13279)
Loc85928 = keras.layers.LocallyConnected1D(4, (2),strides=(12), name = 'Loc85928', )(Max78094)
model = tf.keras.models.Model(inputs=[in0Dot13279,in1Dot13279], outputs=Loc85928)
w = model.get_layer('Loc85928').get_weights() 
w[0] = np.array([[[0.236, 0.5856, 0.3881, 0.2047], [0.7749, 0.0309, 0.3076, 0.2], [0.8236, 0.1455, 0.141, 0.5037], [0.0737, 0.2191, 0.8298, 0.9793]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc85928').set_weights(w) 
in0Dot13279 = tf.constant([[[0.0297, 0.4098], [0.3136, 0.4418], [0.7022, 0.1249]]])
in1Dot13279 = tf.constant([[[0.8614, 0.4591], [0.2631, 0.4833], [0.208, 0.1217]]])
print (np.array2string(model.predict([in0Dot13279,in1Dot13279],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc85928.png')

LDot13279 = dot_layer([[[0.0297, 0.4098], [0.3136, 0.4418], [0.7022, 0.1249]]], [[[0.8614, 0.4591], [0.2631, 0.4833], [0.208, 0.1217]]], 1, 1, Dot13279), 
LMax78094 = max_pool1D_layer(Dot13279, 1, Max78094), 
LLoc85928 = locally_connected1D_layer(Max78094, 2,[[[0.236, 0.5856, 0.3881, 0.2047], [0.7749, 0.0309, 0.3076, 0.2], [0.8236, 0.1455, 0.141, 0.5037], [0.0737, 0.2191, 0.8298, 0.9793]]],[[0, 0, 0, 0]], 12, Loc85928), 
exec_layers([LDot13279,LMax78094,LLoc85928],["Dot13279","Max78094","Loc85928"],Loc85928,"Loc85928")

Actual (Unparsed): [[[0.6927971, 0.3199638, 0.5914745, 0.7598295]]]

Expected (Unparsed): [[[0.692797138866,0.31996375595,0.5914745503279999,0.759829524333]]]

Actual:   [[[0.6928, 0.32, 0.5915, 0.7599]]]

Expected: [[[0.6928, 0.32, 0.5915, 0.7599]]]