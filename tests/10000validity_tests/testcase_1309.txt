import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub34358 = tf.keras.layers.Input(shape=([3, 3, 2, 3]))
in1Sub34358 = tf.keras.layers.Input(shape=([3, 3, 2, 3]))

Sub34358 = keras.layers.Subtract(name = 'Sub34358', )([in0Sub34358,in1Sub34358])
Res28748 = keras.layers.Reshape((3, 3, 6), name = 'Res28748', )(Sub34358)
Cro63318 = keras.layers.Cropping2D(cropping=((1, 0), (2, 0)), name = 'Cro63318', )(Res28748)
Res62802 = keras.layers.Reshape((2, 1, 6, 1), name = 'Res62802', )(Cro63318)
Cro93812 = keras.layers.Cropping3D(cropping=((1, 0), (0, 0), (4, 1)), name = 'Cro93812', )(Res62802)
Glo67271 = keras.layers.GlobalAveragePooling3D(name = 'Glo67271', )(Cro93812)
model = tf.keras.models.Model(inputs=[in0Sub34358,in1Sub34358], outputs=Glo67271)
in0Sub34358 = tf.constant([[[[[0.4318, 0.0894, 0.7271], [0.3696, 0.9997, 0.0977]], [[0.5346, 0.5262, 0.7674], [0.2067, 0.7214, 0.5164]], [[0.8655, 0.0042, 0.0697], [0.6532, 0.721, 0.49]]], [[[0.4529, 0.3747, 0.3013], [0.7976, 0.5305, 0.3415]], [[0.366, 0.4345, 0.5648], [0.6594, 0.1662, 0.2633]], [[0.0707, 0.4684, 0.8354], [0.5438, 0.4609, 0.4903]]], [[[0.0553, 0.2303, 0.3205], [0.7753, 0.4464, 0.3753]], [[0.4609, 0.8083, 0.5324], [0.9307, 0.4354, 0.3389]], [[0.0591, 0.4557, 0.776], [0.7862, 0.9109, 0.2438]]]]])
in1Sub34358 = tf.constant([[[[[0.8113, 0.8358, 0.8581], [0.1604, 0.5577, 0.8928]], [[0.8979, 0.0493, 0.8441], [0.3853, 0.0009, 0.9081]], [[0.5248, 0.5228, 0.6692], [0.1613, 0.3623, 0.005]]], [[[0.8232, 0.2651, 0.9223], [0.3503, 0.1902, 0.5664]], [[0.6121, 0.9658, 0.5427], [0.8101, 0.8147, 0.8181]], [[0.8506, 0.9377, 0.924], [0.5794, 0.653, 0.8536]]], [[[0.9701, 0.4209, 0.7281], [0.6484, 0.4389, 0.2059]], [[0.4492, 0.3634, 0.8363], [0.6947, 0.0477, 0.7571]], [[0.524, 0.5143, 0.3754], [0.6903, 0.3653, 0.0707]]]]])
print (np.array2string(model.predict([in0Sub34358,in1Sub34358],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo67271.png')

LSub34358 = subtract_layer([[[[[0.4318, 0.0894, 0.7271], [0.3696, 0.9997, 0.0977]], [[0.5346, 0.5262, 0.7674], [0.2067, 0.7214, 0.5164]], [[0.8655, 0.0042, 0.0697], [0.6532, 0.721, 0.49]]], [[[0.4529, 0.3747, 0.3013], [0.7976, 0.5305, 0.3415]], [[0.366, 0.4345, 0.5648], [0.6594, 0.1662, 0.2633]], [[0.0707, 0.4684, 0.8354], [0.5438, 0.4609, 0.4903]]], [[[0.0553, 0.2303, 0.3205], [0.7753, 0.4464, 0.3753]], [[0.4609, 0.8083, 0.5324], [0.9307, 0.4354, 0.3389]], [[0.0591, 0.4557, 0.776], [0.7862, 0.9109, 0.2438]]]]], [[[[[0.8113, 0.8358, 0.8581], [0.1604, 0.5577, 0.8928]], [[0.8979, 0.0493, 0.8441], [0.3853, 0.0009, 0.9081]], [[0.5248, 0.5228, 0.6692], [0.1613, 0.3623, 0.005]]], [[[0.8232, 0.2651, 0.9223], [0.3503, 0.1902, 0.5664]], [[0.6121, 0.9658, 0.5427], [0.8101, 0.8147, 0.8181]], [[0.8506, 0.9377, 0.924], [0.5794, 0.653, 0.8536]]], [[[0.9701, 0.4209, 0.7281], [0.6484, 0.4389, 0.2059]], [[0.4492, 0.3634, 0.8363], [0.6947, 0.0477, 0.7571]], [[0.524, 0.5143, 0.3754], [0.6903, 0.3653, 0.0707]]]]], Sub34358), 
LRes28748 = reshape_layer(Sub34358, [3, 3, 6], Res28748), 
LCro63318 = cropping2D_layer(Res28748, 1, 0, 2, 0, Cro63318), 
LRes62802 = reshape_layer(Cro63318, [2, 1, 6, 1], Res62802), 
LCro93812 = cropping3D_layer(Res62802, 1, 0, 0, 0, 4, 1, Cro93812), 
LGlo67271 = global_average_pooling3D_layer(Cro93812, Glo67271), 
exec_layers([LSub34358,LRes28748,LCro63318,LRes62802,LCro93812,LGlo67271],["Sub34358","Res28748","Cro63318","Res62802","Cro93812","Glo67271"],Glo67271,"Glo67271")

Actual (Unparsed): [[0.5456000]]

Expected (Unparsed): [[0.5456000000000001]]

Actual:   [[0.5456]]

Expected: [[0.5457]]