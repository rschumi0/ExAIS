import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min34835 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Min34835 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Add50386 = tf.keras.layers.Input(shape=([2, 2]))
in1Add50386 = tf.keras.layers.Input(shape=([2, 2]))
in0Con58003 = tf.keras.layers.Input(shape=([2, 2]))

Min34835 = keras.layers.Minimum(name = 'Min34835', )([in0Min34835,in1Min34835])
Res56844 = keras.layers.Reshape((1, 1, 4), name = 'Res56844', )(Min34835)
Res82503 = keras.layers.Reshape((1, 4), name = 'Res82503', )(Res56844)
Zer36079 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer36079', )(Res82503)
Add50386 = keras.layers.Add(name = 'Add50386', )([in0Add50386,in1Add50386])
Con58003 = keras.layers.Concatenate(axis=2, name = 'Con58003', )([Add50386,in0Con58003])
Min50626 = keras.layers.Minimum(name = 'Min50626', )([Zer36079,Con58003])
Res8191 = keras.layers.Reshape((2, 4, 1), name = 'Res8191', )(Min50626)
Res87414 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res87414', )(Res8191)
Glo18344 = keras.layers.GlobalAveragePooling3D(name = 'Glo18344', )(Res87414)
Res54258 = keras.layers.Reshape((1, 1), name = 'Res54258', )(Glo18344)
Per82206 = keras.layers.Permute((1,2), name = 'Per82206',)(Res54258)
model = tf.keras.models.Model(inputs=[in0Min34835,in1Min34835,in0Add50386,in1Add50386,in0Con58003], outputs=Per82206)
in0Min34835 = tf.constant([[[[[0.7914, 0.6649], [0.1463, 0.9831]]]]])
in1Min34835 = tf.constant([[[[[0.4672, 0.1358], [0.9586, 0.1833]]]]])
in0Add50386 = tf.constant([[[0.4214, 0.6842], [0.6522, 0.648]]])
in1Add50386 = tf.constant([[[0.4212, 0.3433], [0.9766, 0.4804]]])
in0Con58003 = tf.constant([[[0.2842, 0.2115], [0.7855, 0.9802]]])
print (np.array2string(model.predict([in0Min34835,in1Min34835,in0Add50386,in1Add50386,in0Con58003],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per82206.png')

LMin34835 = minimum_layer([[[[[[0.7914, 0.6649], [0.1463, 0.9831]]]]], [[[[[0.4672, 0.1358], [0.9586, 0.1833]]]]]], Min34835), 
LRes56844 = reshape_layer(Min34835, [1, 1, 4], Res56844), 
LRes82503 = reshape_layer(Res56844, [1, 4], Res82503), 
LZer36079 = zero_padding1D_layer(Res82503, 1, 0, Zer36079), 
LAdd50386 = add_layer([[[[0.4214, 0.6842], [0.6522, 0.648]]], [[[0.4212, 0.3433], [0.9766, 0.4804]]]], Add50386), 
LCon58003 = concatenate_layer([Add50386,[[[0.2842, 0.2115], [0.7855, 0.9802]]]], 2, Con58003), 
LMin50626 = minimum_layer([Zer36079,Con58003], Min50626), 
LRes8191 = reshape_layer(Min50626, [2, 4, 1], Res8191), 
LRes87414 = reshape_layer(Res8191, [2, 4, 1, 1], Res87414), 
LGlo18344 = global_average_pooling3D_layer(Res87414, Glo18344), 
LRes54258 = reshape_layer(Glo18344, [1, 1], Res54258), 
LPer82206 = permute_layer(Res54258, 1,2, Per82206), 
exec_layers([LMin34835,LRes56844,LRes82503,LZer36079,LAdd50386,LCon58003,LMin50626,LRes8191,LRes87414,LGlo18344,LRes54258,LPer82206],["Min34835","Res56844","Res82503","Zer36079","Add50386","Con58003","Min50626","Res8191","Res87414","Glo18344","Res54258","Per82206"],Per82206,"Per82206")

Actual (Unparsed): [[[0.1165750]]]

Expected (Unparsed): [[[0.116575]]]

Actual:   [[[0.1166]]]

Expected: [[[0.1166]]]