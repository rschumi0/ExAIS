import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min54982 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Min54982 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Min54982 = keras.layers.Minimum(name = 'Min54982', )([in0Min54982,in1Min54982])
Res15906 = keras.layers.Reshape((2, 1, 2), name = 'Res15906', )(Min54982)
Res68361 = keras.layers.Reshape((2, 2), name = 'Res68361', )(Res15906)
Glo85226 = keras.layers.GlobalAveragePooling1D(name = 'Glo85226', )(Res68361)
Res21813 = keras.layers.Reshape((2, 1), name = 'Res21813', )(Glo85226)
Res23375 = keras.layers.Reshape((2, 1, 1), name = 'Res23375', )(Res21813)
Glo91231 = keras.layers.GlobalAveragePooling2D(name = 'Glo91231', )(Res23375)
model = tf.keras.models.Model(inputs=[in0Min54982,in1Min54982], outputs=Glo91231)
in0Min54982 = tf.constant([[[[[0.9119], [0.2791]]], [[[0.7818], [0.7888]]]]])
in1Min54982 = tf.constant([[[[[0.8504], [0.1331]]], [[[0.9299], [0.2003]]]]])
print (np.array2string(model.predict([in0Min54982,in1Min54982],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo91231.png')

LMin54982 = minimum_layer([[[[[[0.9119], [0.2791]]], [[[0.7818], [0.7888]]]]], [[[[[0.8504], [0.1331]]], [[[0.9299], [0.2003]]]]]], Min54982), 
LRes15906 = reshape_layer(Min54982, [2, 1, 2], Res15906), 
LRes68361 = reshape_layer(Res15906, [2, 2], Res68361), 
LGlo85226 = global_average_pooling1D_layer(Res68361, Glo85226), 
LRes21813 = reshape_layer(Glo85226, [2, 1], Res21813), 
LRes23375 = reshape_layer(Res21813, [2, 1, 1], Res23375), 
LGlo91231 = global_average_pooling2D_layer(Res23375, Glo91231), 
exec_layers([LMin54982,LRes15906,LRes68361,LGlo85226,LRes21813,LRes23375,LGlo91231],["Min54982","Res15906","Res68361","Glo85226","Res21813","Res23375","Glo91231"],Glo91231,"Glo91231")

Actual (Unparsed): [[0.4914000]]

Expected (Unparsed): [[0.49140000000000006]]

Actual:   [[0.4914]]

Expected: [[0.4915]]