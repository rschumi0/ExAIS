import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max68473 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max41257 = tf.keras.layers.Input(shape=([1, 1]))
in1Max41257 = tf.keras.layers.Input(shape=([1, 1]))
in0Con53998 = tf.keras.layers.Input(shape=([1, 1]))
in0Con33961 = tf.keras.layers.Input(shape=([1, 4]))
in0Add62662 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Add62662 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con74274 = tf.keras.layers.Input(shape=([4, 2, 1, 2]))
in0Up_35660 = tf.keras.layers.Input(shape=([2, 2, 1, 3]))

Max68473 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Max68473', )(in0Max68473)
Res78127 = keras.layers.Reshape((1, 2), name = 'Res78127', )(Max68473)
Max41257 = keras.layers.Maximum(name = 'Max41257', )([in0Max41257,in1Max41257])
Con53998 = keras.layers.Concatenate(axis=2, name = 'Con53998', )([Max41257,in0Con53998])
Sub32106 = keras.layers.Subtract(name = 'Sub32106', )([Res78127,Con53998])
Con33961 = keras.layers.Concatenate(axis=2, name = 'Con33961', )([Sub32106,in0Con33961])
Add62662 = keras.layers.Add(name = 'Add62662', )([in0Add62662,in1Add62662])
Zer42039 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (0, 0)), name = 'Zer42039', )(Add62662)
Con74274 = keras.layers.Concatenate(axis=4, name = 'Con74274', )([Zer42039,in0Con74274])
Up_35660 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_35660', )(in0Up_35660)
Ave99512 = keras.layers.Average(name = 'Ave99512', )([Con74274,Up_35660])
Res53152 = keras.layers.Reshape((4, 2, 3), name = 'Res53152', )(Ave99512)
Res34982 = keras.layers.Reshape((4, 6), name = 'Res34982', )(Res53152)
Zer61960 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer61960', )(Res34982)
Dot79914 = keras.layers.Dot(axes=(2, 2), name = 'Dot79914', )([Con33961,Zer61960])
Res64505 = keras.layers.Reshape((1, 7, 1), name = 'Res64505', )(Dot79914)
Cro75835 = keras.layers.Cropping2D(cropping=((0, 0), (3, 0)), name = 'Cro75835', )(Res64505)
model = tf.keras.models.Model(inputs=[in0Max68473,in0Max41257,in1Max41257,in0Con53998,in0Con33961,in0Add62662,in1Add62662,in0Con74274,in0Up_35660], outputs=Cro75835)
in0Max68473 = tf.constant([[[[1.7018, 1.8571]]]])
in0Max41257 = tf.constant([[[0.6642]]])
in1Max41257 = tf.constant([[[0.7256]]])
in0Con53998 = tf.constant([[[0.3126]]])
in0Con33961 = tf.constant([[[0.5835, 0.3503, 0.847, 0.4755]]])
in0Add62662 = tf.constant([[[[[0.9562]]], [[[0.381]]]]])
in1Add62662 = tf.constant([[[[[0.3668]]], [[[0.1154]]]]])
in0Con74274 = tf.constant([[[[[0.7845, 0.1168]], [[0.8326, 0.1879]]], [[[0.5575, 0.7576]], [[0.259, 0.2175]]], [[[0.9735, 0.7019]], [[0.875, 0.7201]]], [[[0.2975, 0.6519]], [[0.6898, 0.7135]]]]])
in0Up_35660 = tf.constant([[[[[1.8385, 1.63, 1.8923]], [[1.9765, 1.5003, 1.2175]]], [[[1.4221, 1.6938, 1.2536]], [[1.4493, 1.566, 1.4976]]]]])
print (np.array2string(model.predict([in0Max68473,in0Max41257,in1Max41257,in0Con53998,in0Con33961,in0Add62662,in1Add62662,in0Con74274,in0Up_35660],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro75835.png')

LMax68473 = max_pool2D_layer([[[[1.7018, 1.8571]]]], 1, 1, 1, 1, false, Max68473), 
LRes78127 = reshape_layer(Max68473, [1, 2], Res78127), 
LMax41257 = maximum_layer([[[[0.6642]]], [[[0.7256]]]], Max41257), 
LCon53998 = concatenate_layer([Max41257,[[[0.3126]]]], 2, Con53998), 
LSub32106 = subtract_layer(Res78127,Con53998, Sub32106), 
LCon33961 = concatenate_layer([Sub32106,[[[0.5835, 0.3503, 0.847, 0.4755]]]], 2, Con33961), 
LAdd62662 = add_layer([[[[[[0.9562]]], [[[0.381]]]]], [[[[[0.3668]]], [[[0.1154]]]]]], Add62662), 
LZer42039 = zero_padding3D_layer(Add62662, 2, 0, 1, 0, 0, 0, Zer42039), 
LCon74274 = concatenate_layer([Zer42039,[[[[[0.7845, 0.1168]], [[0.8326, 0.1879]]], [[[0.5575, 0.7576]], [[0.259, 0.2175]]], [[[0.9735, 0.7019]], [[0.875, 0.7201]]], [[[0.2975, 0.6519]], [[0.6898, 0.7135]]]]]], 4, Con74274), 
LUp_35660 = up_sampling3D_layer([[[[[1.8385, 1.63, 1.8923]], [[1.9765, 1.5003, 1.2175]]], [[[1.4221, 1.6938, 1.2536]], [[1.4493, 1.566, 1.4976]]]]], 2, 1, 1, Up_35660), 
LAve99512 = average_layer([Con74274,Up_35660], Ave99512), 
LRes53152 = reshape_layer(Ave99512, [4, 2, 3], Res53152), 
LRes34982 = reshape_layer(Res53152, [4, 6], Res34982), 
LZer61960 = zero_padding1D_layer(Res34982, 3, 0, Zer61960), 
LDot79914 = dot_layer(Con33961,Zer61960, 2, 2, Dot79914), 
LRes64505 = reshape_layer(Dot79914, [1, 7, 1], Res64505), 
LCro75835 = cropping2D_layer(Res64505, 0, 0, 3, 0, Cro75835), 
exec_layers([LMax68473,LRes78127,LMax41257,LCon53998,LSub32106,LCon33961,LAdd62662,LZer42039,LCon74274,LUp_35660,LAve99512,LRes53152,LRes34982,LZer61960,LDot79914,LRes64505,LCro75835],["Max68473","Res78127","Max41257","Con53998","Sub32106","Con33961","Add62662","Zer42039","Con74274","Up_35660","Ave99512","Res53152","Res34982","Zer61960","Dot79914","Res64505","Cro75835"],Cro75835,"Cro75835")

Actual (Unparsed): [[[[5.0164255], [4.7921959], [5.3710566], [4.6096478]]]]

Expected (Unparsed): [[[[5.016425375],[4.792195825],[5.37105658],[4.60964774]]]]

Actual:   [[[[5.0165], [4.7922], [5.3711], [4.6097]]]]

Expected: [[[[5.0165], [4.7922], [5.3711], [4.6097]]]]