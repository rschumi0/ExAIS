import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max73902 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max73902 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Dot55266 = tf.keras.layers.Input(shape=([3]))
in1Dot55266 = tf.keras.layers.Input(shape=([3]))
in0Mul75117 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul75117 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con3805 = tf.keras.layers.Input(shape=([1, 1]))

Max73902 = keras.layers.Maximum(name = 'Max73902', )([in0Max73902,in1Max73902])
Res37347 = keras.layers.Reshape((1, 1, 2), name = 'Res37347', )(Max73902)
Res4222 = keras.layers.Reshape((1, 2), name = 'Res4222', )(Res37347)
Dot55266 = keras.layers.Dot(axes=(1, 1), name = 'Dot55266', )([in0Dot55266,in1Dot55266])
Res96801 = keras.layers.Reshape((1, 1), name = 'Res96801', )(Dot55266)
Mul75117 = keras.layers.Multiply(name = 'Mul75117', )([in0Mul75117,in1Mul75117])
Res97745 = keras.layers.Reshape((1, 1), name = 'Res97745', )(Mul75117)
Dot13746 = keras.layers.Dot(axes=(2, 1), name = 'Dot13746', )([Res96801,Res97745])
Con3805 = keras.layers.Concatenate(axis=2, name = 'Con3805', )([Dot13746,in0Con3805])
Add24226 = keras.layers.Add(name = 'Add24226', )([Res4222,Con3805])
model = tf.keras.models.Model(inputs=[in0Max73902,in1Max73902,in0Dot55266,in1Dot55266,in0Mul75117,in1Mul75117,in0Con3805], outputs=Add24226)
in0Max73902 = tf.constant([[[[[0.5156], [0.4787]]]]])
in1Max73902 = tf.constant([[[[[0.9575], [0.2716]]]]])
in0Dot55266 = tf.constant([[0.349, 0.1262, 0.7962]])
in1Dot55266 = tf.constant([[0.1268, 0.8105, 0.3402]])
in0Mul75117 = tf.constant([[[[0.8688]]]])
in1Mul75117 = tf.constant([[[[0.3341]]]])
in0Con3805 = tf.constant([[[0.9312]]])
print (np.array2string(model.predict([in0Max73902,in1Max73902,in0Dot55266,in1Dot55266,in0Mul75117,in1Mul75117,in0Con3805],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add24226.png')

LMax73902 = maximum_layer([[[[[[0.5156], [0.4787]]]]], [[[[[0.9575], [0.2716]]]]]], Max73902), 
LRes37347 = reshape_layer(Max73902, [1, 1, 2], Res37347), 
LRes4222 = reshape_layer(Res37347, [1, 2], Res4222), 
LDot55266 = dot_layer([[0.349, 0.1262, 0.7962]], [[0.1268, 0.8105, 0.3402]], 1, 1, Dot55266), 
LRes96801 = reshape_layer(Dot55266, [1, 1], Res96801), 
LMul75117 = multiply_layer([[[[[0.8688]]]], [[[[0.3341]]]]], Mul75117), 
LRes97745 = reshape_layer(Mul75117, [1, 1], Res97745), 
LDot13746 = dot_layer(Res96801,Res97745, 2, 1, Dot13746), 
LCon3805 = concatenate_layer([Dot13746,[[[0.9312]]]], 2, Con3805), 
LAdd24226 = add_layer([Res4222,Con3805], Add24226), 
exec_layers([LMax73902,LRes37347,LRes4222,LDot55266,LRes96801,LMul75117,LRes97745,LDot13746,LCon3805,LAdd24226],["Max73902","Res37347","Res4222","Dot55266","Res96801","Mul75117","Res97745","Dot13746","Con3805","Add24226"],Add24226,"Add24226")

Actual (Unparsed): [[[1.0786587, 1.4099000]]]

Expected (Unparsed): [[[1.0786586698660832,1.4099]]]

Actual:   [[[1.0787, 1.4099]]]

Expected: [[[1.0787, 1.4099]]]