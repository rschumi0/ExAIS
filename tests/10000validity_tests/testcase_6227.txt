import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot79611 = tf.keras.layers.Input(shape=([3]))
in1Dot79611 = tf.keras.layers.Input(shape=([3]))
in0Dot29319 = tf.keras.layers.Input(shape=([3]))
in1Dot29319 = tf.keras.layers.Input(shape=([3]))

Dot79611 = keras.layers.Dot(axes=(1, 1), name = 'Dot79611', )([in0Dot79611,in1Dot79611])
Res12720 = keras.layers.Reshape((1, 1), name = 'Res12720', )(Dot79611)
LST19247 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST19247', )(Res12720)
Dot29319 = keras.layers.Dot(axes=(1, 1), name = 'Dot29319', )([in0Dot29319,in1Dot29319])
Add94289 = keras.layers.Add(name = 'Add94289', )([LST19247,Dot29319])
model = tf.keras.models.Model(inputs=[in0Dot79611,in1Dot79611,in0Dot29319,in1Dot29319], outputs=Add94289)
w = model.get_layer('LST19247').get_weights() 
w[0] = np.array([[7, 2, 7, 10]])
w[1] = np.array([[7, 10, 9, 10]])
w[2] = np.array([3, 3, 10, 2])
model.get_layer('LST19247').set_weights(w) 
in0Dot79611 = tf.constant([[0.5254, 0.3814, 0.8716]])
in1Dot79611 = tf.constant([[0.2665, 0.2841, 0.101]])
in0Dot29319 = tf.constant([[0.4012, 0.7581, 0.8779]])
in1Dot29319 = tf.constant([[0.0038, 0.4757, 0.0695]])
print (np.array2string(model.predict([in0Dot79611,in1Dot79611,in0Dot29319,in1Dot29319],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add94289.png')

LDot79611 = dot_layer([[0.5254, 0.3814, 0.8716]], [[0.2665, 0.2841, 0.101]], 1, 1, Dot79611), 
LRes12720 = reshape_layer(Dot79611, [1, 1], Res12720), 
LLST19247 = lstm_layer(Res12720,[[7, 2, 7, 10]],[[7, 10, 9, 10]],[3, 3, 10, 2], LST19247), 
LDot29319 = dot_layer([[0.4012, 0.7581, 0.8779]], [[0.0038, 0.4757, 0.0695]], 1, 1, Dot29319), 
LAdd94289 = add_layer([LST19247,Dot29319], Add94289), 
exec_layers([LDot79611,LRes12720,LLST19247,LDot29319,LAdd94289],["Dot79611","Res12720","LST19247","Dot29319","Add94289"],Add94289,"Add94289")

Actual (Unparsed): [[1.1792389]]

Expected (Unparsed): [[1.179238912609934]]

Actual:   [[1.1793]]

Expected: [[1.1793]]