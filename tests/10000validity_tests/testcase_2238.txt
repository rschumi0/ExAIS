import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min82418 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Min82418 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Min82418 = keras.layers.Minimum(name = 'Min82418', )([in0Min82418,in1Min82418])
Res68717 = keras.layers.Reshape((1, 1, 2), name = 'Res68717', )(Min82418)
Glo12024 = keras.layers.GlobalMaxPool2D(name = 'Glo12024', )(Res68717)
Res41386 = keras.layers.Reshape((2, 1), name = 'Res41386', )(Glo12024)
Res60117 = keras.layers.Reshape((2, 1, 1), name = 'Res60117', )(Res41386)
Ave96979 = keras.layers.AveragePooling2D(pool_size=(2, 1), name = 'Ave96979', )(Res60117)
model = tf.keras.models.Model(inputs=[in0Min82418,in1Min82418], outputs=Ave96979)
in0Min82418 = tf.constant([[[[[0.3538], [0.506]]]]])
in1Min82418 = tf.constant([[[[[0.7561], [0.8157]]]]])
print (np.array2string(model.predict([in0Min82418,in1Min82418],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave96979.png')

LMin82418 = minimum_layer([[[[[[0.3538], [0.506]]]]], [[[[[0.7561], [0.8157]]]]]], Min82418), 
LRes68717 = reshape_layer(Min82418, [1, 1, 2], Res68717), 
LGlo12024 = global_max_pool2D_layer(Res68717, Glo12024), 
LRes41386 = reshape_layer(Glo12024, [2, 1], Res41386), 
LRes60117 = reshape_layer(Res41386, [2, 1, 1], Res60117), 
LAve96979 = average_pooling2D_layer(Res60117, 2, 1, Ave96979), 
exec_layers([LMin82418,LRes68717,LGlo12024,LRes41386,LRes60117,LAve96979],["Min82418","Res68717","Glo12024","Res41386","Res60117","Ave96979"],Ave96979,"Ave96979")

Actual (Unparsed): [[[[0.4299000]]]]

Expected (Unparsed): [[[[0.4299]]]]

Actual:   [[[[0.4299]]]]

Expected: [[[[0.4299]]]]