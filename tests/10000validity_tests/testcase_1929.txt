import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub79115 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub79115 = tf.keras.layers.Input(shape=([2, 3, 2]))

Sub79115 = keras.layers.Subtract(name = 'Sub79115', )([in0Sub79115,in1Sub79115])
Res3329 = keras.layers.Reshape((2, 6), name = 'Res3329', )(Sub79115)
Per54875 = keras.layers.Permute((2,1), name = 'Per54875',)(Res3329)
model = tf.keras.models.Model(inputs=[in0Sub79115,in1Sub79115], outputs=Per54875)
in0Sub79115 = tf.constant([[[[0.3973, 0.3964], [0.7504, 0.8428], [0.7066, 0.7476]], [[0.4501, 0.9576], [0.0753, 0.7112], [0.0063, 0.5618]]]])
in1Sub79115 = tf.constant([[[[0.4803, 0.6494], [0.8604, 0.1747], [0.0189, 0.635]], [[0.2906, 0.1025], [0.6649, 0.6444], [0.5682, 0.1354]]]])
print (np.array2string(model.predict([in0Sub79115,in1Sub79115],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per54875.png')

LSub79115 = subtract_layer([[[[0.3973, 0.3964], [0.7504, 0.8428], [0.7066, 0.7476]], [[0.4501, 0.9576], [0.0753, 0.7112], [0.0063, 0.5618]]]], [[[[0.4803, 0.6494], [0.8604, 0.1747], [0.0189, 0.635]], [[0.2906, 0.1025], [0.6649, 0.6444], [0.5682, 0.1354]]]], Sub79115), 
LRes3329 = reshape_layer(Sub79115, [2, 6], Res3329), 
LPer54875 = permute_layer(Res3329, 2,1, Per54875), 
exec_layers([LSub79115,LRes3329,LPer54875],["Sub79115","Res3329","Per54875"],Per54875,"Per54875")

Actual (Unparsed): [[[-0.0830000, 0.1595000], [-0.2530000, 0.8551000], [-0.1100000, -0.5896000], [0.6681000, 0.0668000], [0.6877000, -0.5619000], [0.1126000, 0.4264000]]]

Expected (Unparsed): [[[-0.08300000000000002,0.15949999999999998],[-0.253,0.8551],[-0.1100000000000001,-0.5896],[0.6681,0.06680000000000008],[0.6877,-0.5619000000000001],[0.11260000000000003,0.4264]]]

Actual:   [[[-0.083, 0.1595], [-0.253, 0.8551], [-0.11, -0.5896], [0.6681, 0.0668], [0.6877, -0.5619], [0.1126, 0.4264]]]

Expected: [[[-0.083, 0.1595], [-0.253, 0.8551], [-0.11, -0.5896], [0.6681, 0.0669], [0.6877, -0.5619], [0.1127, 0.4264]]]