import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc45761 = tf.keras.layers.Input(shape=([1, 1]))
in0Add86420 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Add86420 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Loc45761 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc45761', )(in0Loc45761)
Res36532 = keras.layers.Reshape((1, 3, 1), name = 'Res36532', )(Loc45761)
Zer87865 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer87865', )(Res36532)
Add86420 = keras.layers.Add(name = 'Add86420', )([in0Add86420,in1Add86420])
Res74547 = keras.layers.Reshape((2, 1, 2), name = 'Res74547', )(Add86420)
Res71204 = keras.layers.Reshape((2, 2), name = 'Res71204', )(Res74547)
Res26754 = keras.layers.Reshape((2, 2, 1), name = 'Res26754', )(Res71204)
Cro61428 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro61428', )(Res26754)
Zer24025 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer24025', )(Cro61428)
Add90784 = keras.layers.Add(name = 'Add90784', )([Zer87865,Zer24025])
model = tf.keras.models.Model(inputs=[in0Loc45761,in0Add86420,in1Add86420], outputs=Add90784)
w = model.get_layer('Loc45761').get_weights() 
w[0] = np.array([[[0.3695, 0.8063, 0.3135]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc45761').set_weights(w) 
in0Loc45761 = tf.constant([[[0.5866]]])
in0Add86420 = tf.constant([[[[[0.3783, 0.8483]]], [[[0.9805, 0.8212]]]]])
in1Add86420 = tf.constant([[[[[0.5993, 0.9312]]], [[[0.5306, 0.7207]]]]])
print (np.array2string(model.predict([in0Loc45761,in0Add86420,in1Add86420],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add90784.png')

LLoc45761 = locally_connected1D_layer([[[0.5866]]], 1,[[[0.3695, 0.8063, 0.3135]]],[[0, 0, 0]], 1, Loc45761), 
LRes36532 = reshape_layer(Loc45761, [1, 3, 1], Res36532), 
LZer87865 = zero_padding2D_layer(Res36532, 1, 0, 1, 0, Zer87865), 
LAdd86420 = add_layer([[[[[[0.3783, 0.8483]]], [[[0.9805, 0.8212]]]]], [[[[[0.5993, 0.9312]]], [[[0.5306, 0.7207]]]]]], Add86420), 
LRes74547 = reshape_layer(Add86420, [2, 1, 2], Res74547), 
LRes71204 = reshape_layer(Res74547, [2, 2], Res71204), 
LRes26754 = reshape_layer(Res71204, [2, 2, 1], Res26754), 
LCro61428 = cropping2D_layer(Res26754, 0, 0, 0, 0, Cro61428), 
LZer24025 = zero_padding2D_layer(Cro61428, 0, 0, 2, 0, Zer24025), 
LAdd90784 = add_layer([Zer87865,Zer24025], Add90784), 
exec_layers([LLoc45761,LRes36532,LZer87865,LAdd86420,LRes74547,LRes71204,LRes26754,LCro61428,LZer24025,LAdd90784],["Loc45761","Res36532","Zer87865","Add86420","Res74547","Res71204","Res26754","Cro61428","Zer24025","Add90784"],Add90784,"Add90784")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.9776000], [1.7795000]], [[0.0000000], [0.2167487], [1.9840756], [1.7257991]]]]

Expected (Unparsed): [[[[0],[0],[0.9776],[1.7795]],[[0],[0.2167487],[1.9840755799999998],[1.7257991000000001]]]]

Actual:   [[[[0], [0], [0.9776], [1.7795]], [[0], [0.2168], [1.9841], [1.7258]]]]

Expected: [[[[0], [0], [0.9776], [1.7795]], [[0], [0.2168], [1.9841], [1.7258]]]]