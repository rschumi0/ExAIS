import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add60774 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Add60774 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Add60774 = keras.layers.Add(name = 'Add60774', )([in0Add60774,in1Add60774])
Res69639 = keras.layers.Reshape((2, 1, 1), name = 'Res69639', )(Add60774)
Zer47020 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer47020', )(Res69639)
Res70080 = keras.layers.Reshape((4, 3, 1, 1), name = 'Res70080', )(Zer47020)
Con67876 = keras.layers.Conv3DTranspose(2, (2, 2, 1),strides=(1, 1, 1), padding='same', name = 'Con67876', )(Res70080)
Res51384 = keras.layers.Reshape((4, 3, 2), name = 'Res51384', )(Con67876)
Res73736 = keras.layers.Reshape((4, 6), name = 'Res73736', )(Res51384)
Con15294 = keras.layers.Conv1D(2, (4),strides=(3), padding='same', dilation_rate=(1), name = 'Con15294', )(Res73736)
model = tf.keras.models.Model(inputs=[in0Add60774,in1Add60774], outputs=Con15294)
w = model.get_layer('Con67876').get_weights() 
w[0] = np.array([[[[[0.8959], [0.7825]]], [[[0.8896], [0.1598]]]], [[[[0.1891], [0.5284]]], [[[0.7385], [0.5474]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con67876').set_weights(w) 
w = model.get_layer('Con15294').get_weights() 
w[0] = np.array([[[0.3234, 0.6285], [0.3425, 0.3053], [0.6397, 0.9971], [0.5858, 0.4887], [0.8749, 0.6978], [0.0384, 0.5746]], [[0.9101, 0.1579], [0.7795, 0.5574], [0.4131, 0.1332], [0.6002, 0.4011], [0.252, 0.8378], [0.8679, 0.7458]], [[0.7739, 0.0746], [0.4777, 0.8069], [0.7046, 0.4178], [0.7468, 0.4811], [0.1384, 0.746], [0.9667, 0.6898]], [[0.3307, 0.4586], [0.2052, 0.2901], [0.778, 0.5213], [0.8705, 0.4597], [0.3797, 0.0823], [0.4934, 0.325]]])
w[1] = np.array([0, 0])
model.get_layer('Con15294').set_weights(w) 
in0Add60774 = tf.constant([[[[[0.5634]]], [[[0.0405]]]]])
in1Add60774 = tf.constant([[[[[0.1816]]], [[[0.9809]]]]])
print (np.array2string(model.predict([in0Add60774,in1Add60774],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con15294.png')

LAdd60774 = add_layer([[[[[[0.5634]]], [[[0.0405]]]]], [[[[[0.1816]]], [[[0.9809]]]]]], Add60774), 
LRes69639 = reshape_layer(Add60774, [2, 1, 1], Res69639), 
LZer47020 = zero_padding2D_layer(Res69639, 1, 1, 1, 1, Zer47020), 
LRes70080 = reshape_layer(Zer47020, [4, 3, 1, 1], Res70080), 
LCon67876 = conv3D_transpose_layer(Res70080, 2, 2, 1,[[[[[0.8959], [0.7825]]], [[[0.8896], [0.1598]]]], [[[[0.1891], [0.5284]]], [[[0.7385], [0.5474]]]]],[0, 0], 1, 1, 1, true, Con67876), 
LRes51384 = reshape_layer(Con67876, [4, 3, 2], Res51384), 
LRes73736 = reshape_layer(Res51384, [4, 6], Res73736), 
LCon15294 = conv1D_layer(Res73736, 4,[[[0.3234, 0.6285], [0.3425, 0.3053], [0.6397, 0.9971], [0.5858, 0.4887], [0.8749, 0.6978], [0.0384, 0.5746]], [[0.9101, 0.1579], [0.7795, 0.5574], [0.4131, 0.1332], [0.6002, 0.4011], [0.252, 0.8378], [0.8679, 0.7458]], [[0.7739, 0.0746], [0.4777, 0.8069], [0.7046, 0.4178], [0.7468, 0.4811], [0.1384, 0.746], [0.9667, 0.6898]], [[0.3307, 0.4586], [0.2052, 0.2901], [0.778, 0.5213], [0.8705, 0.4597], [0.3797, 0.0823], [0.4934, 0.325]]],[0, 0], 3, true, 1, Con15294), 
exec_layers([LAdd60774,LRes69639,LZer47020,LRes70080,LCon67876,LRes51384,LRes73736,LCon15294],["Add60774","Res69639","Zer47020","Res70080","Con67876","Res51384","Res73736","Con15294"],Con15294,"Con15294")

Actual (Unparsed): [[[3.8080643, 2.5403482], [3.7516058, 4.2730886]]]

Expected (Unparsed): [[[3.8080644140960005,2.54034826695],[3.7516058848160005,4.2730886208020005]]]

Actual:   [[[3.8081, 2.5404], [3.7517, 4.2731]]]

Expected: [[[3.8081, 2.5404], [3.7517, 4.2731]]]