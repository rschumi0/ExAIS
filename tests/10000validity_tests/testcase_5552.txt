import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave39367 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave39367 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0ELU6348 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Dot88412 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot88412 = tf.keras.layers.Input(shape=([3, 2]))
in0Con36120 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave22956 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave22956 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave39367 = keras.layers.Average(name = 'Ave39367', )([in0Ave39367,in1Ave39367])
Max62543 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Max62543', )(Ave39367)
Thr21696 = keras.layers.ThresholdedReLU(theta=4.981610790973717, name = 'Thr21696', )(Max62543)
ELU6348 = keras.layers.ELU(alpha=8.483648498671528, name = 'ELU6348', input_shape=(1, 2, 1, 1))(in0ELU6348)
Res56531 = keras.layers.Reshape((1, 2, 1), name = 'Res56531', )(ELU6348)
Res52140 = keras.layers.Reshape((1, 2), name = 'Res52140', )(Res56531)
Zer37175 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer37175', )(Res52140)
Dot88412 = keras.layers.Dot(axes=(1, 1), name = 'Dot88412', )([in0Dot88412,in1Dot88412])
Dot34681 = keras.layers.Dot(axes=(1, 1), name = 'Dot34681', )([Zer37175,Dot88412])
Res30099 = keras.layers.Reshape((2, 2, 1), name = 'Res30099', )(Dot34681)
Cro38489 = keras.layers.Cropping2D(cropping=((1, 0), (1, 0)), name = 'Cro38489', )(Res30099)
Con36120 = keras.layers.Concatenate(axis=3, name = 'Con36120', )([Cro38489,in0Con36120])
Add80148 = keras.layers.Add(name = 'Add80148', )([Thr21696,Con36120])
Zer38851 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer38851', )(Add80148)
Ave22956 = keras.layers.Average(name = 'Ave22956', )([in0Ave22956,in1Ave22956])
Add90997 = keras.layers.Add(name = 'Add90997', )([Zer38851,Ave22956])
model = tf.keras.models.Model(inputs=[in0Ave39367,in1Ave39367,in0ELU6348,in0Dot88412,in1Dot88412,in0Con36120,in0Ave22956,in1Ave22956], outputs=Add90997)
in0Ave39367 = tf.constant([[[[0.0178, 0.1289]]]])
in1Ave39367 = tf.constant([[[[0.1752, 0.0865]]]])
in0ELU6348 = tf.constant([[[[[0.8621]], [[0.2832]]]]])
in0Dot88412 = tf.constant([[[0.2219, 0.3445], [0.3582, 0.5047], [0.1307, 0.6128]]])
in1Dot88412 = tf.constant([[[0.5501, 0.4562], [0.0617, 0.9815], [0.2366, 0.7486]]])
in0Con36120 = tf.constant([[[[0.3961]]]])
in0Ave22956 = tf.constant([[[[0.8337, 0.9814], [0.3729, 0.2131]], [[0.7285, 0.1871], [0.4875, 0.084]]]])
in1Ave22956 = tf.constant([[[[0.0361, 0.6434], [0.3711, 0.46]], [[0.2548, 0.897], [0.5214, 0.2135]]]])
print (np.array2string(model.predict([in0Ave39367,in1Ave39367,in0ELU6348,in0Dot88412,in1Dot88412,in0Con36120,in0Ave22956,in1Ave22956],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add90997.png')

LAve39367 = average_layer([[[[[0.0178, 0.1289]]]], [[[[0.1752, 0.0865]]]]], Ave39367), 
LMax62543 = max_pool2D_layer(Ave39367, 1, 1, 1, 1, false, Max62543), 
LThr21696 = thresholded_relu_layer(Max62543, 4.981610790973717, Thr21696), 
LELU6348 = elu_layer([[[[[0.8621]], [[0.2832]]]]], 8.483648498671528, ELU6348), 
LRes56531 = reshape_layer(ELU6348, [1, 2, 1], Res56531), 
LRes52140 = reshape_layer(Res56531, [1, 2], Res52140), 
LZer37175 = zero_padding1D_layer(Res52140, 1, 0, Zer37175), 
LDot88412 = dot_layer([[[0.2219, 0.3445], [0.3582, 0.5047], [0.1307, 0.6128]]], [[[0.5501, 0.4562], [0.0617, 0.9815], [0.2366, 0.7486]]], 1, 1, Dot88412), 
LDot34681 = dot_layer(Zer37175,Dot88412, 1, 1, Dot34681), 
LRes30099 = reshape_layer(Dot34681, [2, 2, 1], Res30099), 
LCro38489 = cropping2D_layer(Res30099, 1, 0, 1, 0, Cro38489), 
LCon36120 = concatenate_layer([Cro38489,[[[[0.3961]]]]], 3, Con36120), 
LAdd80148 = add_layer([Thr21696,Con36120], Add80148), 
LZer38851 = zero_padding2D_layer(Add80148, 1, 0, 1, 0, Zer38851), 
LAve22956 = average_layer([[[[[0.8337, 0.9814], [0.3729, 0.2131]], [[0.7285, 0.1871], [0.4875, 0.084]]]], [[[[0.0361, 0.6434], [0.3711, 0.46]], [[0.2548, 0.897], [0.5214, 0.2135]]]]], Ave22956), 
LAdd90997 = add_layer([Zer38851,Ave22956], Add90997), 
exec_layers([LAve39367,LMax62543,LThr21696,LELU6348,LRes56531,LRes52140,LZer37175,LDot88412,LDot34681,LRes30099,LCro38489,LCon36120,LAdd80148,LZer38851,LAve22956,LAdd90997],["Ave39367","Max62543","Thr21696","ELU6348","Res56531","Res52140","Zer37175","Dot88412","Dot34681","Res30099","Cro38489","Con36120","Add80148","Zer38851","Ave22956","Add90997"],Add90997,"Add90997")

Actual (Unparsed): [[[[0.4349000, 0.8124000], [0.3720000, 0.3365500]], [[0.4916500, 0.5420500], [0.8191605, 0.5448500]]]]

Expected (Unparsed): [[[[0.4349,0.8124],[0.372,0.33655]],[[0.49165000000000003,0.54205],[0.819160539696,0.5448500000000001]]]]

Actual:   [[[[0.4349, 0.8124], [0.372, 0.3366]], [[0.4917, 0.5421], [0.8192, 0.5449]]]]

Expected: [[[[0.4349, 0.8124], [0.372, 0.3366]], [[0.4917, 0.5421], [0.8192, 0.5449]]]]