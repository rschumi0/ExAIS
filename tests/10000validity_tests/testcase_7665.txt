import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub53629 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub53629 = tf.keras.layers.Input(shape=([3, 2]))
in0Max28628 = tf.keras.layers.Input(shape=([1, 1]))
in1Max28628 = tf.keras.layers.Input(shape=([1, 1]))
in0Con65829 = tf.keras.layers.Input(shape=([3, 1]))
in0Con62169 = tf.keras.layers.Input(shape=([3, 2, 3, 1]))
in0Max29717 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max29717 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Ave63214 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave63214 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con9121 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Sub53629 = keras.layers.Subtract(name = 'Sub53629', )([in0Sub53629,in1Sub53629])
Max28628 = keras.layers.Maximum(name = 'Max28628', )([in0Max28628,in1Max28628])
Zer31478 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer31478', )(Max28628)
Con65829 = keras.layers.Concatenate(axis=2, name = 'Con65829', )([Zer31478,in0Con65829])
Add48541 = keras.layers.Add(name = 'Add48541', )([Sub53629,Con65829])
Res84238 = keras.layers.Reshape((3, 2, 1), name = 'Res84238', )(Add48541)
Res4171 = keras.layers.Reshape((3, 2, 1, 1), name = 'Res4171', )(Res84238)
Zer1966 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer1966', )(Res4171)
Con62169 = keras.layers.Concatenate(axis=4, name = 'Con62169', )([Zer1966,in0Con62169])
Max29717 = keras.layers.Maximum(name = 'Max29717', )([in0Max29717,in1Max29717])
Ave63214 = keras.layers.Average(name = 'Ave63214', )([in0Ave63214,in1Ave63214])
ELU27311 = keras.layers.ELU(alpha=-3.931449368282749, name = 'ELU27311', )(Ave63214)
Zer23957 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer23957', )(ELU27311)
Con9121 = keras.layers.Concatenate(axis=4, name = 'Con9121', )([Zer23957,in0Con9121])
Min95038 = keras.layers.Minimum(name = 'Min95038', )([Max29717,Con9121])
Zer51210 = keras.layers.ZeroPadding3D(padding=((2, 0), (0, 0), (1, 0)), name = 'Zer51210', )(Min95038)
Mul29106 = keras.layers.Multiply(name = 'Mul29106', )([Con62169,Zer51210])
model = tf.keras.models.Model(inputs=[in0Sub53629,in1Sub53629,in0Max28628,in1Max28628,in0Con65829,in0Con62169,in0Max29717,in1Max29717,in0Ave63214,in1Ave63214,in0Con9121], outputs=Mul29106)
in0Sub53629 = tf.constant([[[0.5258, 0.7547], [0.7884, 0.265], [0.1961, 0.4401]]])
in1Sub53629 = tf.constant([[[0.5175, 0.9263], [0.9807, 0.7861], [0.38, 0.4879]]])
in0Max28628 = tf.constant([[[0.3924]]])
in1Max28628 = tf.constant([[[0.1531]]])
in0Con65829 = tf.constant([[[0.6689], [0.2861], [0.2945]]])
in0Con62169 = tf.constant([[[[[0.1871], [0.9921], [0.9458]], [[0.6048], [0.7969], [0.5041]]], [[[0.9653], [0.4586], [0.3483]], [[0.9564], [0.5115], [0.8284]]], [[[0.5683], [0.8223], [0.3173]], [[0.9088], [0.7759], [0.2243]]]]])
in0Max29717 = tf.constant([[[[[0.7684, 0.0676], [0.2375, 0.2753]], [[0.9841, 0.6152], [0.7203, 0.8896]]]]])
in1Max29717 = tf.constant([[[[[0.0723, 0.6631], [0.7897, 0.0757]], [[0.342, 0.7291], [0.6394, 0.3015]]]]])
in0Ave63214 = tf.constant([[[[[0.8464]]]]])
in1Ave63214 = tf.constant([[[[[0.8152]]]]])
in0Con9121 = tf.constant([[[[[0.7542], [0.4845]], [[0.2367], [0.4524]]]]])
print (np.array2string(model.predict([in0Sub53629,in1Sub53629,in0Max28628,in1Max28628,in0Con65829,in0Con62169,in0Max29717,in1Max29717,in0Ave63214,in1Ave63214,in0Con9121],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul29106.png')

LSub53629 = subtract_layer([[[0.5258, 0.7547], [0.7884, 0.265], [0.1961, 0.4401]]], [[[0.5175, 0.9263], [0.9807, 0.7861], [0.38, 0.4879]]], Sub53629), 
LMax28628 = maximum_layer([[[[0.3924]]], [[[0.1531]]]], Max28628), 
LZer31478 = zero_padding1D_layer(Max28628, 2, 0, Zer31478), 
LCon65829 = concatenate_layer([Zer31478,[[[0.6689], [0.2861], [0.2945]]]], 2, Con65829), 
LAdd48541 = add_layer([Sub53629,Con65829], Add48541), 
LRes84238 = reshape_layer(Add48541, [3, 2, 1], Res84238), 
LRes4171 = reshape_layer(Res84238, [3, 2, 1, 1], Res4171), 
LZer1966 = zero_padding3D_layer(Res4171, 0, 0, 0, 0, 2, 0, Zer1966), 
LCon62169 = concatenate_layer([Zer1966,[[[[[0.1871], [0.9921], [0.9458]], [[0.6048], [0.7969], [0.5041]]], [[[0.9653], [0.4586], [0.3483]], [[0.9564], [0.5115], [0.8284]]], [[[0.5683], [0.8223], [0.3173]], [[0.9088], [0.7759], [0.2243]]]]]], 4, Con62169), 
LMax29717 = maximum_layer([[[[[[0.7684, 0.0676], [0.2375, 0.2753]], [[0.9841, 0.6152], [0.7203, 0.8896]]]]], [[[[[0.0723, 0.6631], [0.7897, 0.0757]], [[0.342, 0.7291], [0.6394, 0.3015]]]]]], Max29717), 
LAve63214 = average_layer([[[[[[0.8464]]]]], [[[[[0.8152]]]]]], Ave63214), 
LELU27311 = elu_layer(Ave63214, -3.931449368282749, ELU27311), 
LZer23957 = zero_padding3D_layer(ELU27311, 0, 0, 1, 0, 1, 0, Zer23957), 
LCon9121 = concatenate_layer([Zer23957,[[[[[0.7542], [0.4845]], [[0.2367], [0.4524]]]]]], 4, Con9121), 
LMin95038 = minimum_layer([Max29717,Con9121], Min95038), 
LZer51210 = zero_padding3D_layer(Min95038, 2, 0, 0, 0, 1, 0, Zer51210), 
LMul29106 = multiply_layer([Con62169,Zer51210], Mul29106), 
exec_layers([LSub53629,LMax28628,LZer31478,LCon65829,LAdd48541,LRes84238,LRes4171,LZer1966,LCon62169,LMax29717,LAve63214,LELU27311,LZer23957,LCon9121,LMin95038,LZer51210,LMul29106],["Sub53629","Max28628","Zer31478","Con65829","Add48541","Res84238","Res4171","Zer1966","Con62169","Max29717","Ave63214","ELU27311","Zer23957","Con9121","Min95038","Zer51210","Mul29106"],Mul29106,"Mul29106")

Actual (Unparsed): [[[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000], [0.0000000, 0.5452671], [0.0000000, 0.0873527]], [[0.0000000, 0.0000000], [0.0000000, 0.1836555], [0.1776980, 0.1014733]]]]]

Expected (Unparsed): [[[[[0,0.0],[0,0.0],[0.0,0.0]],[[0,0.0],[0,0.0],[0.0,0.0]]],[[[0,0.0],[0,0.0],[-0.0,0.0]],[[0,0.0],[0,0.0],[-0.0,0.0]]],[[[0,0.0],[0,0.54526713],[0.0,0.08735269000000001]],[[0,0.0],[0,0.18365553],[0.17769801,0.10147332]]]]]

Actual:   [[[[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]]], [[[0, 0], [0, 0], [-0, 0]], [[0, 0], [0, 0], [-0, 0]]], [[[0, 0], [0, 0.5453], [0, 0.0874]], [[0, 0], [0, 0.1837], [0.1777, 0.1015]]]]]

Expected: [[[[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]]], [[[0, 0], [0, 0], [-0, 0]], [[0, 0], [0, 0], [-0, 0]]], [[[0, 0], [0, 0.5453], [0, 0.0874]], [[0, 0], [0, 0.1837], [0.1777, 0.1015]]]]]