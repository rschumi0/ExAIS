import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con71754 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0ReL45125 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Max14053 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max14053 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con87604 = tf.keras.layers.Input(shape=([4, 1, 3]))

Con71754 = keras.layers.Conv3D(2, (2, 1, 2),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con71754', )(in0Con71754)
Up_21306 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_21306', )(Con71754)
ReL45125 = keras.layers.ReLU(max_value=5.551242631306724, negative_slope=7.380677086612603, threshold=5.189095826589054, name = 'ReL45125', input_shape=(2, 1, 1, 2))(in0ReL45125)
Zer80015 = keras.layers.ZeroPadding3D(padding=((2, 0), (0, 0), (1, 0)), name = 'Zer80015', )(ReL45125)
Max17771 = keras.layers.Maximum(name = 'Max17771', )([Up_21306,Zer80015])
Res20261 = keras.layers.Reshape((4, 1, 4), name = 'Res20261', )(Max17771)
Max14053 = keras.layers.Maximum(name = 'Max14053', )([in0Max14053,in1Max14053])
Zer72490 = keras.layers.ZeroPadding2D(padding=((3, 0), (0, 0)), name = 'Zer72490', )(Max14053)
Con87604 = keras.layers.Concatenate(axis=3, name = 'Con87604', )([Zer72490,in0Con87604])
Add25215 = keras.layers.Add(name = 'Add25215', )([Res20261,Con87604])
ReL1593 = keras.layers.ReLU(max_value=1.5936773700996636, negative_slope=7.84354524669055, threshold=9.18676865036732, name = 'ReL1593', )(Add25215)
Res65790 = keras.layers.Reshape((4, 1, 4, 1), name = 'Res65790', )(ReL1593)
Cro69415 = keras.layers.Cropping3D(cropping=((1, 1), (0, 0), (3, 0)), name = 'Cro69415', )(Res65790)
model = tf.keras.models.Model(inputs=[in0Con71754,in0ReL45125,in0Max14053,in1Max14053,in0Con87604], outputs=Cro69415)
w = model.get_layer('Con71754').get_weights() 
w[0] = np.array([[[[[0.6363, 0.7058]], [[0.9942, 0.8786]]]], [[[[0.7951, 0.4612]], [[0.8327, 0.2483]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con71754').set_weights(w) 
in0Con71754 = tf.constant([[[[[0.4555], [0.9846]]], [[[0.1285], [0.7499]]]]])
in0ReL45125 = tf.constant([[[[[0.3798, 0.6724]]], [[[0.9875, 0.0193]]]]])
in0Max14053 = tf.constant([[[[0.0168]]]])
in1Max14053 = tf.constant([[[[0.9811]]]])
in0Con87604 = tf.constant([[[[0.3632, 0.2554, 0.3197]], [[0.1095, 0.1495, 0.3242]], [[0.8799, 0.2509, 0.2933]], [[0.6671, 0.465, 0.3974]]]])
print (np.array2string(model.predict([in0Con71754,in0ReL45125,in0Max14053,in1Max14053,in0Con87604],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro69415.png')

LCon71754 = conv3D_layer([[[[[0.4555], [0.9846]]], [[[0.1285], [0.7499]]]]], 2, 1, 2,[[[[[0.6363, 0.7058]], [[0.9942, 0.8786]]]], [[[[0.7951, 0.4612]], [[0.8327, 0.2483]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con71754), 
LUp_21306 = up_sampling3D_layer(Con71754, 2, 1, 1, Up_21306), 
LReL45125 = relu_layer([[[[[0.3798, 0.6724]]], [[[0.9875, 0.0193]]]]], 5.551242631306724, 7.380677086612603, 5.189095826589054, ReL45125), 
LZer80015 = zero_padding3D_layer(ReL45125, 2, 0, 0, 0, 1, 0, Zer80015), 
LMax17771 = maximum_layer([Up_21306,Zer80015], Max17771), 
LRes20261 = reshape_layer(Max17771, [4, 1, 4], Res20261), 
LMax14053 = maximum_layer([[[[[0.0168]]]], [[[[0.9811]]]]], Max14053), 
LZer72490 = zero_padding2D_layer(Max14053, 3, 0, 0, 0, Zer72490), 
LCon87604 = concatenate_layer([Zer72490,[[[[0.3632, 0.2554, 0.3197]], [[0.1095, 0.1495, 0.3242]], [[0.8799, 0.2509, 0.2933]], [[0.6671, 0.465, 0.3974]]]]], 3, Con87604), 
LAdd25215 = add_layer([Res20261,Con87604], Add25215), 
LReL1593 = relu_layer(Add25215, 1.5936773700996636, 7.84354524669055, 9.18676865036732, ReL1593), 
LRes65790 = reshape_layer(ReL1593, [4, 1, 4, 1], Res65790), 
LCro69415 = cropping3D_layer(Res65790, 1, 1, 0, 0, 3, 0, Cro69415), 
exec_layers([LCon71754,LUp_21306,LReL45125,LZer80015,LMax17771,LRes20261,LMax14053,LZer72490,LCon87604,LAdd25215,LReL1593,LRes65790,LCro69415],["Con71754","Up_21306","ReL45125","Zer80015","Max17771","Res20261","Max14053","Zer72490","Con87604","Add25215","ReL1593","Res65790","Cro69415"],Cro69415,"Cro69415")

Actual (Unparsed): [[[[[-61.3505174]]], [[[-65.6048968]]]]]

Expected (Unparsed): [[[[[-61.350517422640365]]],[[[-65.60489668026788]]]]]

Actual:   [[[[[-61.3505]]], [[[-65.6048]]]]]

Expected: [[[[[-61.3505]]], [[[-65.6048]]]]]