import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul38533 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Mul38533 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con35261 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Mul73184 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Mul73184 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Max56606 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max56606 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Dot66533 = tf.keras.layers.Input(shape=([2]))
in1Dot66533 = tf.keras.layers.Input(shape=([2]))
in0Con51826 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Dep74605 = tf.keras.layers.Input(shape=([2, 1, 2]))

Mul38533 = keras.layers.Multiply(name = 'Mul38533', )([in0Mul38533,in1Mul38533])
Con35261 = keras.layers.Concatenate(axis=3, name = 'Con35261', )([Mul38533,in0Con35261])
Mul73184 = keras.layers.Multiply(name = 'Mul73184', )([in0Mul73184,in1Mul73184])
Res28214 = keras.layers.Reshape((1, 1, 1), name = 'Res28214', )(Mul73184)
Max56606 = keras.layers.Maximum(name = 'Max56606', )([in0Max56606,in1Max56606])
Res20832 = keras.layers.Reshape((1, 1), name = 'Res20832', )(Max56606)
Fla83644 = keras.layers.Flatten(name = 'Fla83644', )(Res20832)
Dot66533 = keras.layers.Dot(axes=(1, 1), name = 'Dot66533', )([in0Dot66533,in1Dot66533])
Min41863 = keras.layers.Minimum(name = 'Min41863', )([Fla83644,Dot66533])
Res45962 = keras.layers.Reshape((1, 1, 1), name = 'Res45962', )(Min41863)
Add75157 = keras.layers.Add(name = 'Add75157', )([Res28214,Res45962])
Con51826 = keras.layers.Concatenate(axis=3, name = 'Con51826', )([Add75157,in0Con51826])
Dep74605 = keras.layers.DepthwiseConv2D((1, 1),strides=(2, 2), padding='same', name = 'Dep74605', )(in0Dep74605)
Sof32416 = keras.layers.Softmax(axis=1, name = 'Sof32416', )(Dep74605)
Max64966 = keras.layers.Maximum(name = 'Max64966', )([Con51826,Sof32416])
Zer87258 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer87258', )(Max64966)
Sub84613 = keras.layers.Subtract(name = 'Sub84613', )([Con35261,Zer87258])
model = tf.keras.models.Model(inputs=[in0Mul38533,in1Mul38533,in0Con35261,in0Mul73184,in1Mul73184,in0Max56606,in1Max56606,in0Dot66533,in1Dot66533,in0Con51826,in0Dep74605], outputs=Sub84613)
w = model.get_layer('Dep74605').get_weights() 
w[0] = np.array([[[[0.5212], [0.8375]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep74605').set_weights(w) 
in0Mul38533 = tf.constant([[[[0.6097], [0.4309]]]])
in1Mul38533 = tf.constant([[[[0.4615], [0.2815]]]])
in0Con35261 = tf.constant([[[[0.6196], [0.9718]]]])
in0Mul73184 = tf.constant([[[[[0.3215]]]]])
in1Mul73184 = tf.constant([[[[[0.4889]]]]])
in0Max56606 = tf.constant([[[[0.4613]]]])
in1Max56606 = tf.constant([[[[0.3113]]]])
in0Dot66533 = tf.constant([[0.2873, 0.4499]])
in1Dot66533 = tf.constant([[0.2887, 0.4359]])
in0Con51826 = tf.constant([[[[0.8363]]]])
in0Dep74605 = tf.constant([[[[0.4626, 0.2053]], [[0.5082, 0.676]]]])
print (np.array2string(model.predict([in0Mul38533,in1Mul38533,in0Con35261,in0Mul73184,in1Mul73184,in0Max56606,in1Max56606,in0Dot66533,in1Dot66533,in0Con51826,in0Dep74605],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub84613.png')

LMul38533 = multiply_layer([[[[[0.6097], [0.4309]]]], [[[[0.4615], [0.2815]]]]], Mul38533), 
LCon35261 = concatenate_layer([Mul38533,[[[[0.6196], [0.9718]]]]], 3, Con35261), 
LMul73184 = multiply_layer([[[[[[0.3215]]]]], [[[[[0.4889]]]]]], Mul73184), 
LRes28214 = reshape_layer(Mul73184, [1, 1, 1], Res28214), 
LMax56606 = maximum_layer([[[[[0.4613]]]], [[[[0.3113]]]]], Max56606), 
LRes20832 = reshape_layer(Max56606, [1, 1], Res20832), 
LFla83644 = flatten_layer(Res20832, Fla83644), 
LDot66533 = dot_layer([[0.2873, 0.4499]], [[0.2887, 0.4359]], 1, 1, Dot66533), 
LMin41863 = minimum_layer([Fla83644,Dot66533], Min41863), 
LRes45962 = reshape_layer(Min41863, [1, 1, 1], Res45962), 
LAdd75157 = add_layer([Res28214,Res45962], Add75157), 
LCon51826 = concatenate_layer([Add75157,[[[[0.8363]]]]], 3, Con51826), 
LDep74605 = depthwise_conv2D_layer([[[[0.4626, 0.2053]], [[0.5082, 0.676]]]], 1, 1,[[[[0.5212], [0.8375]]]],[0, 0], 2, 2, true, Dep74605), 
LSof32416 = softmax_layer(Dep74605, 1, Sof32416), 
LMax64966 = maximum_layer([Con51826,Sof32416], Max64966), 
LZer87258 = zero_padding2D_layer(Max64966, 0, 0, 1, 0, Zer87258), 
LSub84613 = subtract_layer(Con35261,Zer87258, Sub84613), 
exec_layers([LMul38533,LCon35261,LMul73184,LRes28214,LMax56606,LRes20832,LFla83644,LDot66533,LMin41863,LRes45962,LAdd75157,LCon51826,LDep74605,LSof32416,LMax64966,LZer87258,LSub84613],["Mul38533","Con35261","Mul73184","Res28214","Max56606","Res20832","Fla83644","Dot66533","Min41863","Res45962","Add75157","Con51826","Dep74605","Sof32416","Max64966","Zer87258","Sub84613"],Sub84613,"Sub84613")

Actual (Unparsed): [[[[0.2813766, 0.6196000], [-0.8787016, -0.0282000]]]]

Expected (Unparsed): [[[[0.28137655,0.6196],[-0.87870165,-0.028200000000000003]]]]

Actual:   [[[[0.2814, 0.6196], [-0.8787, -0.0282]]]]

Expected: [[[[0.2814, 0.6196], [-0.8787, -0.0282]]]]