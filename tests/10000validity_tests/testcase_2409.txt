import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min32161 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Min32161 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con58684 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Min32161 = keras.layers.Minimum(name = 'Min32161', )([in0Min32161,in1Min32161])
Res9627 = keras.layers.Reshape((1, 1, 2), name = 'Res9627', )(Min32161)
Res2697 = keras.layers.Reshape((1, 2), name = 'Res2697', )(Res9627)
Con99501 = keras.layers.Conv1D(4, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con99501', )(Res2697)
Res30507 = keras.layers.Reshape((1, 4, 1), name = 'Res30507', )(Con99501)
Res65731 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res65731', )(Res30507)
Zer10540 = keras.layers.ZeroPadding3D(padding=((10, 0), (1, 0), (3, 0)), name = 'Zer10540', )(Res65731)
Con58684 = keras.layers.Conv3DTranspose(2, (1, 1, 2),strides=(1, 1, 1), padding='valid', name = 'Con58684', )(in0Con58684)
Res31607 = keras.layers.Reshape((1, 1, 6), name = 'Res31607', )(Con58684)
Con14665 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(9, 1), padding='valid', name = 'Con14665', )(Res31607)
Res93300 = keras.layers.Reshape((9, 1, 2, 1), name = 'Res93300', )(Con14665)
Zer37415 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer37415', )(Res93300)
Zer72112 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer72112', )(Zer37415)
Mul3244 = keras.layers.Multiply(name = 'Mul3244', )([Zer10540,Zer72112])
Bat51678 = keras.layers.BatchNormalization(axis=1, epsilon=0.4579818878637637,  name = 'Bat51678', )(Mul3244)
model = tf.keras.models.Model(inputs=[in0Min32161,in1Min32161,in0Con58684], outputs=Bat51678)
w = model.get_layer('Con99501').get_weights() 
w[0] = np.array([[[0.8713, 0.7357, 0.7089, 0.8792], [0.8028, 0.5598, 0.5727, 0.0009]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con99501').set_weights(w) 
w = model.get_layer('Con58684').get_weights() 
w[0] = np.array([[[[[0.7274], [0.4108]], [[0.958], [0.0099]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con58684').set_weights(w) 
w = model.get_layer('Con14665').get_weights() 
w[0] = np.array([[[[0.45, 0.0425, 0.701, 0.0627, 0.0032, 0.5036], [0.5814, 0.0905, 0.3858, 0.777, 0.0775, 0.7318]]]])
w[1] = np.array([0, 0])
model.get_layer('Con14665').set_weights(w) 
w = model.get_layer('Bat51678').get_weights() 
w[0] = np.array([0.518, 0.3374, 0.5951, 0.8718, 0.8702, 0.428, 0.7883, 0.2767, 0.7958, 0.2774, 0.8701])
w[1] = np.array([0.3199, 0.2576, 0.6373, 0.8966, 0.9854, 0.4972, 0.1374, 0.837, 0.5817, 0.6591, 0.7593])
w[2] = np.array([0.0617, 0.5227, 0.3753, 0.7889, 0.9413, 0.0208, 0.657, 0.2771, 0.6201, 0.0825, 0.1882])
w[3] = np.array([0.3918, 0.5392, 0.9399, 0.6532, 0.43, 0.0872, 0.3278, 0.0388, 0.6698, 0.8327, 0.8185])
model.get_layer('Bat51678').set_weights(w) 
in0Min32161 = tf.constant([[[[[0.7044], [0.1259]]]]])
in1Min32161 = tf.constant([[[[[0.3275], [0.899]]]]])
in0Con58684 = tf.constant([[[[[0.7182], [0.7249]]]]])
print (np.array2string(model.predict([in0Min32161,in1Min32161,in0Con58684],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Bat51678.png')

LMin32161 = minimum_layer([[[[[[0.7044], [0.1259]]]]], [[[[[0.3275], [0.899]]]]]], Min32161), 
LRes9627 = reshape_layer(Min32161, [1, 1, 2], Res9627), 
LRes2697 = reshape_layer(Res9627, [1, 2], Res2697), 
LCon99501 = conv1D_layer(Res2697, 1,[[[0.8713, 0.7357, 0.7089, 0.8792], [0.8028, 0.5598, 0.5727, 0.0009]]],[0, 0, 0, 0], 1, true, 1, Con99501), 
LRes30507 = reshape_layer(Con99501, [1, 4, 1], Res30507), 
LRes65731 = reshape_layer(Res30507, [1, 4, 1, 1], Res65731), 
LZer10540 = zero_padding3D_layer(Res65731, 10, 0, 1, 0, 3, 0, Zer10540), 
LCon58684 = conv3D_transpose_layer([[[[[0.7182], [0.7249]]]]], 1, 1, 2,[[[[[0.7274], [0.4108]], [[0.958], [0.0099]]]]],[0, 0], 1, 1, 1, false, Con58684), 
LRes31607 = reshape_layer(Con58684, [1, 1, 6], Res31607), 
LCon14665 = conv2D_transpose_layer(Res31607, 1, 1,[[[[0.45, 0.0425, 0.701, 0.0627, 0.0032, 0.5036], [0.5814, 0.0905, 0.3858, 0.777, 0.0775, 0.7318]]]],[0, 0], 9, 1, false, Con14665), 
LRes93300 = reshape_layer(Con14665, [9, 1, 2, 1], Res93300), 
LZer37415 = zero_padding3D_layer(Res93300, 1, 1, 1, 1, 1, 1, Zer37415), 
LZer72112 = zero_padding3D_layer(Zer37415, 0, 0, 2, 0, 0, 0, Zer72112), 
LMul3244 = multiply_layer([Zer10540,Zer72112], Mul3244), 
LBat51678 = batch_normalization_layer(Mul3244, 1, 0.4579818878637637, [0.518, 0.3374, 0.5951, 0.8718, 0.8702, 0.428, 0.7883, 0.2767, 0.7958, 0.2774, 0.8701], [0.3199, 0.2576, 0.6373, 0.8966, 0.9854, 0.4972, 0.1374, 0.837, 0.5817, 0.6591, 0.7593], [0.0617, 0.5227, 0.3753, 0.7889, 0.9413, 0.0208, 0.657, 0.2771, 0.6201, 0.0825, 0.1882], [0.3918, 0.5392, 0.9399, 0.6532, 0.43, 0.0872, 0.3278, 0.0388, 0.6698, 0.8327, 0.8185], Bat51678), 
exec_layers([LMin32161,LRes9627,LRes2697,LCon99501,LRes30507,LRes65731,LZer10540,LCon58684,LRes31607,LCon14665,LRes93300,LZer37415,LZer72112,LMul3244,LBat51678],["Min32161","Res9627","Res2697","Con99501","Res30507","Res65731","Zer10540","Con58684","Res31607","Con14665","Res93300","Zer37415","Zer72112","Mul3244","Bat51678"],Bat51678,"Bat51678")

Actual (Unparsed): [[[[[0.2852294], [0.2852294], [0.2852294], [0.2852294]], [[0.2852294], [0.2852294], [0.2852294], [0.2852294]], [[0.2852294], [0.2852294], [0.2852294], [0.2852294]], [[0.2852294], [0.2852294], [0.2852294], [0.2852294]], [[0.2852294], [0.2852294], [0.2852294], [0.2852294]]], [[[0.0809920], [0.0809920], [0.0809920], [0.0809920]], [[0.0809920], [0.0809920], [0.0809920], [0.0809920]], [[0.0809920], [0.0809920], [0.0809920], [0.0809920]], [[0.0809920], [0.0809920], [0.0809920], [0.0809920]], [[0.0809920], [0.0809920], [0.0809920], [0.0809920]]], [[[0.4483994], [0.4483994], [0.4483994], [0.4483994]], [[0.4483994], [0.4483994], [0.4483994], [0.4483994]], [[0.4483994], [0.4483994], [0.4483994], [0.4483994]], [[0.4483994], [0.4483994], [0.4483994], [0.4483994]], [[0.4483994], [0.4483994], [0.4483994], [0.4483994]]], [[[0.2441515], [0.2441515], [0.2441515], [0.2441515]], [[0.2441515], [0.2441515], [0.2441515], [0.2441515]], [[0.2441515], [0.2441515], [0.2441515], [0.2441515]], [[0.2441515], [0.2441515], [0.2441515], [0.2441515]], [[0.2441515], [0.2441515], [0.2441515], [0.2441515]]], [[[0.1161492], [0.1161492], [0.1161492], [0.1161492]], [[0.1161492], [0.1161492], [0.1161492], [0.1161492]], [[0.1161492], [0.1161492], [0.1161492], [0.1161492]], [[0.1161492], [0.1161492], [0.1161492], [0.1161492]], [[0.1161492], [0.1161492], [0.1161492], [0.1161492]]], [[[0.4851431], [0.4851431], [0.4851431], [0.4851431]], [[0.4851431], [0.4851431], [0.4851431], [0.4851431]], [[0.4851431], [0.4851431], [0.4851431], [0.4851431]], [[0.4851431], [0.4851431], [0.4851431], [0.4851431]], [[0.4851431], [0.4851431], [0.4851431], [0.4851431]]], [[[-0.4468596], [-0.4468596], [-0.4468596], [-0.4468596]], [[-0.4468596], [-0.4468596], [-0.4468596], [-0.4468596]], [[-0.4468596], [-0.4468596], [-0.4468596], [-0.4468596]], [[-0.4468596], [-0.4468596], [-0.4468596], [-0.4468596]], [[-0.4468596], [-0.4468596], [-0.4468596], [-0.4468596]]], [[[0.7282166], [0.7282166], [0.7282166], [0.7282166]], [[0.7282166], [0.7282166], [0.7282166], [0.7282166]], [[0.7282166], [0.7282166], [0.7282166], [0.7282166]], [[0.7282166], [0.7282166], [0.7282166], [0.7282166]], [[0.7282166], [0.7282166], [0.7282166], [0.7282166]]], [[[0.1170209], [0.1170209], [0.1170209], [0.1170209]], [[0.1170209], [0.1170209], [0.1170209], [0.1170209]], [[0.1170209], [0.1170209], [0.1170209], [0.1170209]], [[0.1170209], [0.1170209], [0.1170209], [0.1170209]], [[0.1170209], [0.1170209], [0.1170209], [0.1170209]]], [[[0.6389558], [0.6389558], [0.6389558], [0.6389558]], [[0.6389558], [0.6389558], [0.6389558], [0.6389558]], [[0.6389558], [0.6389558], [0.6389558], [0.6389558]], [[0.6389558], [0.6389558], [0.6389558], [0.6389558]], [[0.6389558], [0.6389558], [0.6389558], [0.6389558]]], [[[0.6143623], [0.6143623], [0.6143623], [0.6143623]], [[0.6143623], [0.6143623], [0.6143623], [0.6143623]], [[0.6143623], [0.6143623], [0.6143623], [0.6143623]], [[0.6143623], [0.6143623], [0.6143623], [0.6143623]], [[0.6143623], [0.6143623], [0.6143623], [0.6143623]]]]]

Expected (Unparsed): [[[[[0.28522941348399133],[0.28522941348399133],[0.28522941348399133],[0.28522941348399133]],[[0.28522941348399133],[0.28522941348399133],[0.28522941348399133],[0.28522941348399133]],[[0.28522941348399133],[0.28522941348399133],[0.28522941348399133],[0.28522941348399133]],[[0.28522941348399133],[0.28522941348399133],[0.28522941348399133],[0.28522941348399133]],[[0.28522941348399133],[0.28522941348399133],[0.28522941348399133],[0.28522941348399133]]],[[[0.080991993847566],[0.080991993847566],[0.080991993847566],[0.080991993847566]],[[0.080991993847566],[0.080991993847566],[0.080991993847566],[0.080991993847566]],[[0.080991993847566],[0.080991993847566],[0.080991993847566],[0.080991993847566]],[[0.080991993847566],[0.080991993847566],[0.080991993847566],[0.080991993847566]],[[0.080991993847566],[0.080991993847566],[0.080991993847566],[0.080991993847566]]],[[[0.4483994267944971],[0.4483994267944971],[0.4483994267944971],[0.4483994267944971]],[[0.4483994267944971],[0.4483994267944971],[0.4483994267944971],[0.4483994267944971]],[[0.4483994267944971],[0.4483994267944971],[0.4483994267944971],[0.4483994267944971]],[[0.4483994267944971],[0.4483994267944971],[0.4483994267944971],[0.4483994267944971]],[[0.4483994267944971],[0.4483994267944971],[0.4483994267944971],[0.4483994267944971]]],[[[0.24415148976238177],[0.24415148976238177],[0.24415148976238177],[0.24415148976238177]],[[0.24415148976238177],[0.24415148976238177],[0.24415148976238177],[0.24415148976238177]],[[0.24415148976238177],[0.24415148976238177],[0.24415148976238177],[0.24415148976238177]],[[0.24415148976238177],[0.24415148976238177],[0.24415148976238177],[0.24415148976238177]],[[0.24415148976238177],[0.24415148976238177],[0.24415148976238177],[0.24415148976238177]]],[[[0.11614923041478376],[0.11614923041478376],[0.11614923041478376],[0.11614923041478376]],[[0.11614923041478376],[0.11614923041478376],[0.11614923041478376],[0.11614923041478376]],[[0.11614923041478376],[0.11614923041478376],[0.11614923041478376],[0.11614923041478376]],[[0.11614923041478376],[0.11614923041478376],[0.11614923041478376],[0.11614923041478376]],[[0.11614923041478376],[0.11614923041478376],[0.11614923041478376],[0.11614923041478376]]],[[[0.4851430795811135],[0.4851430795811135],[0.4851430795811135],[0.4851430795811135]],[[0.4851430795811135],[0.4851430795811135],[0.4851430795811135],[0.4851430795811135]],[[0.4851430795811135],[0.4851430795811135],[0.4851430795811135],[0.4851430795811135]],[[0.4851430795811135],[0.4851430795811135],[0.4851430795811135],[0.4851430795811135]],[[0.4851430795811135],[0.4851430795811135],[0.4851430795811135],[0.4851430795811135]]],[[[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585]],[[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585]],[[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585]],[[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585]],[[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585],[-0.44685964304328585]]],[[[0.7282165549917224],[0.7282165549917224],[0.7282165549917224],[0.7282165549917224]],[[0.7282165549917224],[0.7282165549917224],[0.7282165549917224],[0.7282165549917224]],[[0.7282165549917224],[0.7282165549917224],[0.7282165549917224],[0.7282165549917224]],[[0.7282165549917224],[0.7282165549917224],[0.7282165549917224],[0.7282165549917224]],[[0.7282165549917224],[0.7282165549917224],[0.7282165549917224],[0.7282165549917224]]],[[[0.11702093333524954],[0.11702093333524954],[0.11702093333524954],[0.11702093333524954]],[[0.11702093333524954],[0.11702093333524954],[0.11702093333524954],[0.11702093333524954]],[[0.11702093333524954],[0.11702093333524954],[0.11702093333524954],[0.11702093333524954]],[[0.11702093333524954],[0.11702093333524954],[0.11702093333524954],[0.11702093333524954]],[[0.11702093333524954],[0.11702093333524954],[0.11702093333524954],[0.11702093333524954]]],[[[0.6389557641535243],[0.6389557641535243],[0.6389557641535243],[0.6389557641535243]],[[0.6389557641535243],[0.6389557641535243],[0.6389557641535243],[0.6389557641535243]],[[0.6389557641535243],[0.6389557641535243],[0.6389557641535243],[0.6389557641535243]],[[0.6389557641535243],[0.6389557641535243],[0.6389557641535243],[0.6389557641535243]],[[0.6389557641535243],[0.6389557641535243],[0.6389557641535243],[0.6389557641535243]]],[[[0.6143622686247627],[0.6143622686247627],[0.6143622686247627],[0.6143622686247627]],[[0.6143622686247627],[0.6143622686247627],[0.6143622686247627],[0.6143622686247627]],[[0.6143622686247627],[0.6143622686247627],[0.6143622686247627],[0.6143622686247627]],[[0.6143622686247627],[0.6143622686247627],[0.6143622686247627],[0.6143622686247627]],[[0.6143622686247627],[0.6143622686247627],[0.6143622686247627],[0.6143622686247627]]]]]

Actual:   [[[[[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]]], [[[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]]], [[[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]]], [[[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]]], [[[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]]], [[[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]]], [[[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]]], [[[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]]], [[[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]]], [[[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]]], [[[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]]]]]

Expected: [[[[[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]], [[0.2853], [0.2853], [0.2853], [0.2853]]], [[[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]], [[0.081], [0.081], [0.081], [0.081]]], [[[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]], [[0.4484], [0.4484], [0.4484], [0.4484]]], [[[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]], [[0.2442], [0.2442], [0.2442], [0.2442]]], [[[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]], [[0.1162], [0.1162], [0.1162], [0.1162]]], [[[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]], [[0.4852], [0.4852], [0.4852], [0.4852]]], [[[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]], [[-0.4468], [-0.4468], [-0.4468], [-0.4468]]], [[[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]], [[0.7283], [0.7283], [0.7283], [0.7283]]], [[[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]], [[0.1171], [0.1171], [0.1171], [0.1171]]], [[[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]], [[0.639], [0.639], [0.639], [0.639]]], [[[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]], [[0.6144], [0.6144], [0.6144], [0.6144]]]]]