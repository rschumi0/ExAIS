import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave99710 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave99710 = tf.keras.layers.Input(shape=([1, 2]))
in0Con41135 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Cro54430 = tf.keras.layers.Input(shape=([3, 3, 2]))
in0Con81904 = tf.keras.layers.Input(shape=([2]))
in0Fla65501 = tf.keras.layers.Input(shape=([2, 3]))

Ave99710 = keras.layers.Average(name = 'Ave99710', )([in0Ave99710,in1Ave99710])
Res17040 = keras.layers.Reshape((1, 2, 1), name = 'Res17040', )(Ave99710)
Con41135 = keras.layers.Concatenate(axis=3, name = 'Con41135', )([Res17040,in0Con41135])
Cro54430 = keras.layers.Cropping2D(cropping=((1, 1), (2, 0)), name = 'Cro54430', )(in0Cro54430)
Zer57188 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer57188', )(Cro54430)
Add13085 = keras.layers.Add(name = 'Add13085', )([Con41135,Zer57188])
Res36197 = keras.layers.Reshape((1, 4), name = 'Res36197', )(Add13085)
Fla20771 = keras.layers.Flatten(name = 'Fla20771', )(Res36197)
Con81904 = keras.layers.Concatenate(axis=1, name = 'Con81904', )([Fla20771,in0Con81904])
Fla65501 = keras.layers.Flatten(name = 'Fla65501', )(in0Fla65501)
Dot7316 = keras.layers.Dot(axes=(1, 1), name = 'Dot7316', )([Con81904,Fla65501])
Res93701 = keras.layers.Reshape((1, 1), name = 'Res93701', )(Dot7316)
Cro56459 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro56459', )(Res93701)
model = tf.keras.models.Model(inputs=[in0Ave99710,in1Ave99710,in0Con41135,in0Cro54430,in0Con81904,in0Fla65501], outputs=Cro56459)
in0Ave99710 = tf.constant([[[0.5763, 0.3663]]])
in1Ave99710 = tf.constant([[[0.2292, 0.5081]]])
in0Con41135 = tf.constant([[[[0.3015], [0.3473]]]])
in0Cro54430 = tf.constant([[[[1.505, 1.0921], [1.2062, 1.3969], [1.489, 1.5486]], [[1.3874, 1.3503], [1.9558, 1.9631], [1.9279, 1.3175]], [[1.3608, 1.5936], [1.0393, 1.0113], [1.8906, 1.005]]]])
in0Con81904 = tf.constant([[0.5078, 0.3815]])
in0Fla65501 = tf.constant([[[1.1631, 1.6895, 1.2352], [1.2466, 1.1703, 1.4588]]])
print (np.array2string(model.predict([in0Ave99710,in1Ave99710,in0Con41135,in0Cro54430,in0Con81904,in0Fla65501],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro56459.png')

LAve99710 = average_layer([[[[0.5763, 0.3663]]], [[[0.2292, 0.5081]]]], Ave99710), 
LRes17040 = reshape_layer(Ave99710, [1, 2, 1], Res17040), 
LCon41135 = concatenate_layer([Res17040,[[[[0.3015], [0.3473]]]]], 3, Con41135), 
LCro54430 = cropping2D_layer([[[[1.505, 1.0921], [1.2062, 1.3969], [1.489, 1.5486]], [[1.3874, 1.3503], [1.9558, 1.9631], [1.9279, 1.3175]], [[1.3608, 1.5936], [1.0393, 1.0113], [1.8906, 1.005]]]], 1, 1, 2, 0, Cro54430), 
LZer57188 = zero_padding2D_layer(Cro54430, 0, 0, 1, 0, Zer57188), 
LAdd13085 = add_layer([Con41135,Zer57188], Add13085), 
LRes36197 = reshape_layer(Add13085, [1, 4], Res36197), 
LFla20771 = flatten_layer(Res36197, Fla20771), 
LCon81904 = concatenate_layer([Fla20771,[[0.5078, 0.3815]]], 1, Con81904), 
LFla65501 = flatten_layer([[[1.1631, 1.6895, 1.2352], [1.2466, 1.1703, 1.4588]]], Fla65501), 
LDot7316 = dot_layer(Con81904,Fla65501, 1, 1, Dot7316), 
LRes93701 = reshape_layer(Dot7316, [1, 1], Res93701), 
LCro56459 = cropping1D_layer(Res93701, 0, 0, Cro56459), 
exec_layers([LAve99710,LRes17040,LCon41135,LCro54430,LZer57188,LAdd13085,LRes36197,LFla20771,LCon81904,LFla65501,LDot7316,LRes93701,LCro56459],["Ave99710","Res17040","Con41135","Cro54430","Zer57188","Add13085","Res36197","Fla20771","Con81904","Fla65501","Dot7316","Res93701","Cro56459"],Cro56459,"Cro56459")

Actual (Unparsed): [[[7.1253446]]]

Expected (Unparsed): [[[7.125344515]]]

Actual:   [[[7.1254]]]

Expected: [[[7.1254]]]