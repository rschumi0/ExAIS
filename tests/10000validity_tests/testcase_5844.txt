import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub44266 = tf.keras.layers.Input(shape=([3, 2, 2, 3]))
in1Sub44266 = tf.keras.layers.Input(shape=([3, 2, 2, 3]))

Sub44266 = keras.layers.Subtract(name = 'Sub44266', )([in0Sub44266,in1Sub44266])
Res1979 = keras.layers.Reshape((3, 2, 6), name = 'Res1979', )(Sub44266)
Glo21649 = keras.layers.GlobalAveragePooling2D(name = 'Glo21649', )(Res1979)
model = tf.keras.models.Model(inputs=[in0Sub44266,in1Sub44266], outputs=Glo21649)
in0Sub44266 = tf.constant([[[[[0.2771, 0.8598, 0.7293], [0.1334, 0.7235, 0.4962]], [[0.309, 0.746, 0.3132], [0.8748, 0.417, 0.4108]]], [[[0.9202, 0.233, 0.6225], [0.2787, 0.38, 0.7162]], [[0.9436, 0.6575, 0.1314], [0.1704, 0.9505, 0.922]]], [[[0.2323, 0.1005, 0.6804], [0.5683, 0.9958, 0.3646]], [[0.2321, 0.4985, 0.5564], [0.3426, 0.7363, 0.1806]]]]])
in1Sub44266 = tf.constant([[[[[0.5204, 0.5115, 0.5098], [0.4129, 0.4817, 0.588]], [[0.5927, 0.0431, 0.5904], [0.658, 0.5396, 0.1388]]], [[[0.5507, 0.0033, 0.292], [0.7891, 0.3938, 0.6543]], [[0.1922, 0.9268, 0.123], [0.0547, 0.7168, 0.3067]]], [[[0.8598, 0.6026, 0.3061], [0.0466, 0.4341, 0.2525]], [[0.7436, 0.9459, 0.4561], [0.8048, 0.9011, 0.1323]]]]])
print (np.array2string(model.predict([in0Sub44266,in1Sub44266],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo21649.png')

LSub44266 = subtract_layer([[[[[0.2771, 0.8598, 0.7293], [0.1334, 0.7235, 0.4962]], [[0.309, 0.746, 0.3132], [0.8748, 0.417, 0.4108]]], [[[0.9202, 0.233, 0.6225], [0.2787, 0.38, 0.7162]], [[0.9436, 0.6575, 0.1314], [0.1704, 0.9505, 0.922]]], [[[0.2323, 0.1005, 0.6804], [0.5683, 0.9958, 0.3646]], [[0.2321, 0.4985, 0.5564], [0.3426, 0.7363, 0.1806]]]]], [[[[[0.5204, 0.5115, 0.5098], [0.4129, 0.4817, 0.588]], [[0.5927, 0.0431, 0.5904], [0.658, 0.5396, 0.1388]]], [[[0.5507, 0.0033, 0.292], [0.7891, 0.3938, 0.6543]], [[0.1922, 0.9268, 0.123], [0.0547, 0.7168, 0.3067]]], [[[0.8598, 0.6026, 0.3061], [0.0466, 0.4341, 0.2525]], [[0.7436, 0.9459, 0.4561], [0.8048, 0.9011, 0.1323]]]]], Sub44266), 
LRes1979 = reshape_layer(Sub44266, [3, 2, 6], Res1979), 
LGlo21649 = global_average_pooling2D_layer(Res1979, Glo21649), 
exec_layers([LSub44266,LRes1979,LGlo21649],["Sub44266","Res1979","Glo21649"],Glo21649,"Glo21649")

Actual (Unparsed): [[-0.0908500, 0.0103500, 0.1259667, -0.0663167, 0.1226667, 0.1696333]]

Expected (Unparsed): [[-0.09085,0.010350000000000017,0.12596666666666667,-0.06631666666666663,0.12266666666666666,0.16963333333333333]]

Actual:   [[-0.0908, 0.0104, 0.126, -0.0663, 0.1227, 0.1697]]

Expected: [[-0.0908, 0.0104, 0.126, -0.0663, 0.1227, 0.1697]]