import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot71084 = tf.keras.layers.Input(shape=([3]))
in1Dot71084 = tf.keras.layers.Input(shape=([3]))

Dot71084 = keras.layers.Dot(axes=(1, 1), name = 'Dot71084', )([in0Dot71084,in1Dot71084])
Res56228 = keras.layers.Reshape((1, 1), name = 'Res56228', )(Dot71084)
Res23930 = keras.layers.Reshape((1, 1, 1), name = 'Res23930', )(Res56228)
Loc59111 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(1, 1), name = 'Loc59111', )(Res23930)
Loc56063 = keras.layers.LocallyConnected2D(3, (1, 1),strides=(1, 1), name = 'Loc56063', )(Loc59111)
model = tf.keras.models.Model(inputs=[in0Dot71084,in1Dot71084], outputs=Loc56063)
w = model.get_layer('Loc59111').get_weights() 
w[0] = np.array([[[0.9061, 0.0601, 0.7933, 0.6423]]])
w[1] = np.array([[[0, 0, 0, 0]]])
model.get_layer('Loc59111').set_weights(w) 
w = model.get_layer('Loc56063').get_weights() 
w[0] = np.array([[[0.2978, 0.5542, 0.844], [0.336, 0.6395, 0.732], [0.8388, 0.9175, 0.1218], [0.2492, 0.5217, 0.5099]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc56063').set_weights(w) 
in0Dot71084 = tf.constant([[0.1349, 0.0331, 0.7244]])
in1Dot71084 = tf.constant([[0.8141, 0.4789, 0.7604]])
print (np.array2string(model.predict([in0Dot71084,in1Dot71084],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc56063.png')

LDot71084 = dot_layer([[0.1349, 0.0331, 0.7244]], [[0.8141, 0.4789, 0.7604]], 1, 1, Dot71084), 
LRes56228 = reshape_layer(Dot71084, [1, 1], Res56228), 
LRes23930 = reshape_layer(Res56228, [1, 1, 1], Res23930), 
LLoc59111 = locally_connected2D_layer(Res23930, 1, 1,[[[0.9061, 0.0601, 0.7933, 0.6423]]],[[[0, 0, 0, 0]]], 1, 1, Loc59111), 
LLoc56063 = locally_connected2D_layer(Loc59111, 1, 1,[[[0.2978, 0.5542, 0.844], [0.336, 0.6395, 0.732], [0.8388, 0.9175, 0.1218], [0.2492, 0.5217, 0.5099]]],[[[0, 0, 0]]], 1, 1, Loc56063), 
exec_layers([LDot71084,LRes56228,LRes23930,LLoc59111,LLoc56063],["Dot71084","Res56228","Res23930","Loc59111","Loc56063"],Loc56063,"Loc56063")

Actual (Unparsed): [[[[0.7546517, 1.0848035, 0.8340486]]]]

Expected (Unparsed): [[[[0.7546517479746673,1.0848035133971115,0.8340486432998666]]]]

Actual:   [[[[0.7547, 1.0849, 0.8341]]]]

Expected: [[[[0.7547, 1.0849, 0.8341]]]]