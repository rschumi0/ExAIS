import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave59391 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave59391 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con78312 = tf.keras.layers.Input(shape=([2]))
in0Ave1666 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave1666 = tf.keras.layers.Input(shape=([1, 1]))
in0Con89230 = tf.keras.layers.Input(shape=([2]))
in0Sub97333 = tf.keras.layers.Input(shape=([3]))
in1Sub97333 = tf.keras.layers.Input(shape=([3]))
in0Con75865 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot9915 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot9915 = tf.keras.layers.Input(shape=([2, 2]))

Ave59391 = keras.layers.Average(name = 'Ave59391', )([in0Ave59391,in1Ave59391])
Res51225 = keras.layers.Reshape((1, 1, 1), name = 'Res51225', )(Ave59391)
Cro73221 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro73221', )(Res51225)
Res5801 = keras.layers.Reshape((1, 1), name = 'Res5801', )(Cro73221)
Fla97929 = keras.layers.Flatten(name = 'Fla97929', )(Res5801)
Con78312 = keras.layers.Concatenate(axis=1, name = 'Con78312', )([Fla97929,in0Con78312])
Ave1666 = keras.layers.Average(name = 'Ave1666', )([in0Ave1666,in1Ave1666])
Fla49828 = keras.layers.Flatten(name = 'Fla49828', )(Ave1666)
Con89230 = keras.layers.Concatenate(axis=1, name = 'Con89230', )([Fla49828,in0Con89230])
Sub97333 = keras.layers.Subtract(name = 'Sub97333', )([in0Sub97333,in1Sub97333])
Min51447 = keras.layers.Minimum(name = 'Min51447', )([Con89230,Sub97333])
Min95403 = keras.layers.Minimum(name = 'Min95403', )([Con78312,Min51447])
Res36084 = keras.layers.Reshape((3, 1), name = 'Res36084', )(Min95403)
Con75865 = keras.layers.Concatenate(axis=2, name = 'Con75865', )([Res36084,in0Con75865])
Dot9915 = keras.layers.Dot(axes=(1, 2), name = 'Dot9915', )([in0Dot9915,in1Dot9915])
Zer47517 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer47517', )(Dot9915)
Mul35381 = keras.layers.Multiply(name = 'Mul35381', )([Con75865,Zer47517])
model = tf.keras.models.Model(inputs=[in0Ave59391,in1Ave59391,in0Con78312,in0Ave1666,in1Ave1666,in0Con89230,in0Sub97333,in1Sub97333,in0Con75865,in0Dot9915,in1Dot9915], outputs=Mul35381)
in0Ave59391 = tf.constant([[[[[0.7946]]]]])
in1Ave59391 = tf.constant([[[[[0.5508]]]]])
in0Con78312 = tf.constant([[0.7523, 0.7598]])
in0Ave1666 = tf.constant([[[0.8654]]])
in1Ave1666 = tf.constant([[[0.2073]]])
in0Con89230 = tf.constant([[0.5591, 0.9567]])
in0Sub97333 = tf.constant([[0.6681, 0.2008, 0.5405]])
in1Sub97333 = tf.constant([[0.5319, 0.3531, 0.3901]])
in0Con75865 = tf.constant([[[0.9077], [0.8074], [0.7533]]])
in0Dot9915 = tf.constant([[[0.6108, 0.9092], [0.9396, 0.074]]])
in1Dot9915 = tf.constant([[[0.7741, 0.7399], [0.9513, 0.647]]])
print (np.array2string(model.predict([in0Ave59391,in1Ave59391,in0Con78312,in0Ave1666,in1Ave1666,in0Con89230,in0Sub97333,in1Sub97333,in0Con75865,in0Dot9915,in1Dot9915],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul35381.png')

LAve59391 = average_layer([[[[[[0.7946]]]]], [[[[[0.5508]]]]]], Ave59391), 
LRes51225 = reshape_layer(Ave59391, [1, 1, 1], Res51225), 
LCro73221 = cropping2D_layer(Res51225, 0, 0, 0, 0, Cro73221), 
LRes5801 = reshape_layer(Cro73221, [1, 1], Res5801), 
LFla97929 = flatten_layer(Res5801, Fla97929), 
LCon78312 = concatenate_layer([Fla97929,[[0.7523, 0.7598]]], 1, Con78312), 
LAve1666 = average_layer([[[[0.8654]]], [[[0.2073]]]], Ave1666), 
LFla49828 = flatten_layer(Ave1666, Fla49828), 
LCon89230 = concatenate_layer([Fla49828,[[0.5591, 0.9567]]], 1, Con89230), 
LSub97333 = subtract_layer([[0.6681, 0.2008, 0.5405]], [[0.5319, 0.3531, 0.3901]], Sub97333), 
LMin51447 = minimum_layer([Con89230,Sub97333], Min51447), 
LMin95403 = minimum_layer([Con78312,Min51447], Min95403), 
LRes36084 = reshape_layer(Min95403, [3, 1], Res36084), 
LCon75865 = concatenate_layer([Res36084,[[[0.9077], [0.8074], [0.7533]]]], 2, Con75865), 
LDot9915 = dot_layer([[[0.6108, 0.9092], [0.9396, 0.074]]], [[[0.7741, 0.7399], [0.9513, 0.647]]], 1, 2, Dot9915), 
LZer47517 = zero_padding1D_layer(Dot9915, 1, 0, Zer47517), 
LMul35381 = multiply_layer([Con75865,Zer47517], Mul35381), 
exec_layers([LAve59391,LRes51225,LCro73221,LRes5801,LFla97929,LCon78312,LAve1666,LFla49828,LCon89230,LSub97333,LMin51447,LMin95403,LRes36084,LCon75865,LDot9915,LZer47517,LMul35381],["Ave59391","Res51225","Cro73221","Res5801","Fla97929","Con78312","Ave1666","Fla49828","Con89230","Sub97333","Min51447","Min95403","Res36084","Con75865","Dot9915","Zer47517","Mul35381"],Mul35381,"Mul35381")

Actual (Unparsed): [[[0.0000000, 0.0000000], [-0.1778910, 0.9599786], [0.1140881, 0.6876122]]]

Expected (Unparsed): [[[0.0,0.0],[-0.17789101773600002,0.959978608776],[0.11408807372799999,0.687612209868]]]

Actual:   [[[0, 0], [-0.1778, 0.96], [0.1141, 0.6877]]]

Expected: [[[0, 0], [-0.1778, 0.96], [0.1141, 0.6877]]]