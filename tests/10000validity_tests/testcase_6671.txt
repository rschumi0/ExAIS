import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub44245 = tf.keras.layers.Input(shape=([3]))
in1Sub44245 = tf.keras.layers.Input(shape=([3]))
in0Dot61115 = tf.keras.layers.Input(shape=([2]))
in1Dot61115 = tf.keras.layers.Input(shape=([2]))
in0Con36073 = tf.keras.layers.Input(shape=([2]))

Sub44245 = keras.layers.Subtract(name = 'Sub44245', )([in0Sub44245,in1Sub44245])
Dot61115 = keras.layers.Dot(axes=(1, 1), name = 'Dot61115', )([in0Dot61115,in1Dot61115])
Con36073 = keras.layers.Concatenate(axis=1, name = 'Con36073', )([Dot61115,in0Con36073])
Ave70856 = keras.layers.Average(name = 'Ave70856', )([Sub44245,Con36073])
model = tf.keras.models.Model(inputs=[in0Sub44245,in1Sub44245,in0Dot61115,in1Dot61115,in0Con36073], outputs=Ave70856)
in0Sub44245 = tf.constant([[0.3962, 0.549, 0.7496]])
in1Sub44245 = tf.constant([[0.9925, 0.3759, 0.542]])
in0Dot61115 = tf.constant([[0.6663, 0.2767]])
in1Dot61115 = tf.constant([[0.4262, 0.0106]])
in0Con36073 = tf.constant([[0.3236, 0.6653]])
print (np.array2string(model.predict([in0Sub44245,in1Sub44245,in0Dot61115,in1Dot61115,in0Con36073],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave70856.png')

LSub44245 = subtract_layer([[0.3962, 0.549, 0.7496]], [[0.9925, 0.3759, 0.542]], Sub44245), 
LDot61115 = dot_layer([[0.6663, 0.2767]], [[0.4262, 0.0106]], 1, 1, Dot61115), 
LCon36073 = concatenate_layer([Dot61115,[[0.3236, 0.6653]]], 1, Con36073), 
LAve70856 = average_layer([Sub44245,Con36073], Ave70856), 
exec_layers([LSub44245,LDot61115,LCon36073,LAve70856],["Sub44245","Dot61115","Con36073","Ave70856"],Ave70856,"Ave70856")

Actual (Unparsed): [[-0.1546950, 0.2483500, 0.4364500]]

Expected (Unparsed): [[-0.15469496000000002,0.24835000000000002,0.43645]]

Actual:   [[-0.1546, 0.2484, 0.4365]]

Expected: [[-0.1546, 0.2484, 0.4365]]