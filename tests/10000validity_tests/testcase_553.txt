import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo93930 = tf.keras.layers.Input(shape=([1, 1]))
in0Con70708 = tf.keras.layers.Input(shape=([3, 7]))
in0Sub78908 = tf.keras.layers.Input(shape=([3, 3, 2]))
in1Sub78908 = tf.keras.layers.Input(shape=([3, 3, 2]))
in0Con60524 = tf.keras.layers.Input(shape=([3, 2]))
in0Mul86963 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Mul86963 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Mul69121 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul69121 = tf.keras.layers.Input(shape=([1, 2]))
in0Con44540 = tf.keras.layers.Input(shape=([1, 6]))

Glo93930 = keras.layers.GlobalMaxPool1D(name = 'Glo93930', )(in0Glo93930)
Res51605 = keras.layers.Reshape((1, 1), name = 'Res51605', )(Glo93930)
Glo89063 = keras.layers.GlobalAveragePooling1D(name = 'Glo89063', )(Res51605)
Res28740 = keras.layers.Reshape((1, 1), name = 'Res28740', )(Glo89063)
Zer47006 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer47006', )(Res28740)
Con70708 = keras.layers.Concatenate(axis=2, name = 'Con70708', )([Zer47006,in0Con70708])
Sub78908 = keras.layers.Subtract(name = 'Sub78908', )([in0Sub78908,in1Sub78908])
Res24660 = keras.layers.Reshape((3, 6), name = 'Res24660', )(Sub78908)
Con60524 = keras.layers.Concatenate(axis=2, name = 'Con60524', )([Res24660,in0Con60524])
Mul86963 = keras.layers.Multiply(name = 'Mul86963', )([in0Mul86963,in1Mul86963])
ReL57621 = keras.layers.ReLU(max_value=0.5352717622053448, negative_slope=5.256543817914749, threshold=7.883322231106339, name = 'ReL57621', )(Mul86963)
Res80726 = keras.layers.Reshape((1, 2, 4), name = 'Res80726', )(ReL57621)
Res52935 = keras.layers.Reshape((1, 8), name = 'Res52935', )(Res80726)
Mul69121 = keras.layers.Multiply(name = 'Mul69121', )([in0Mul69121,in1Mul69121])
Con44540 = keras.layers.Concatenate(axis=2, name = 'Con44540', )([Mul69121,in0Con44540])
Max63061 = keras.layers.Maximum(name = 'Max63061', )([Res52935,Con44540])
Zer88341 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer88341', )(Max63061)
Sub55160 = keras.layers.Subtract(name = 'Sub55160', )([Con60524,Zer88341])
Max76591 = keras.layers.Maximum(name = 'Max76591', )([Con70708,Sub55160])
model = tf.keras.models.Model(inputs=[in0Glo93930,in0Con70708,in0Sub78908,in1Sub78908,in0Con60524,in0Mul86963,in1Mul86963,in0Mul69121,in1Mul69121,in0Con44540], outputs=Max76591)
in0Glo93930 = tf.constant([[[1.163]]])
in0Con70708 = tf.constant([[[0.6025, 0.3752, 0.21, 0.7864, 0.7795, 0.1389, 0.6273], [0.0339, 0.5156, 0.9931, 0.7337, 0.9035, 0.0911, 0.6654], [0.5315, 0.5013, 0.0589, 0.6655, 0.2713, 0.9494, 0.4477]]])
in0Sub78908 = tf.constant([[[[0.8423, 0.5053], [0.1983, 0.3781], [0.5947, 0.4977]], [[0.1132, 0.4091], [0.1663, 0.5806], [0.5063, 0.1116]], [[0.8658, 0.2299], [0.8953, 0.9523], [0.7754, 0.2999]]]])
in1Sub78908 = tf.constant([[[[0.9192, 0.2467], [0.646, 0.1768], [0.8829, 0.3973]], [[0.594, 0.1376], [0.189, 0.2393], [0.0334, 0.2466]], [[0.9761, 0.0257], [0.584, 0.1246], [0.2928, 0.4197]]]])
in0Con60524 = tf.constant([[[0.1022, 0.7083], [0.5548, 0.2128], [0.0422, 0.1199]]])
in0Mul86963 = tf.constant([[[[[0.6657, 0.8394], [0.3089, 0.0976]], [[0.1081, 0.9819], [0.387, 0.215]]]]])
in1Mul86963 = tf.constant([[[[[0.3835, 0.716], [0.3218, 0.0379]], [[0.0079, 0.2217], [0.691, 0.4998]]]]])
in0Mul69121 = tf.constant([[[0.2421, 0.4847]]])
in1Mul69121 = tf.constant([[[0.0552, 0.309]]])
in0Con44540 = tf.constant([[[0.3701, 0.6242, 0.3104, 0.5382, 0.0593, 0.1719]]])
print (np.array2string(model.predict([in0Glo93930,in0Con70708,in0Sub78908,in1Sub78908,in0Con60524,in0Mul86963,in1Mul86963,in0Mul69121,in1Mul69121,in0Con44540],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max76591.png')

LGlo93930 = global_max_pool1D_layer([[[1.163]]], Glo93930), 
LRes51605 = reshape_layer(Glo93930, [1, 1], Res51605), 
LGlo89063 = global_average_pooling1D_layer(Res51605, Glo89063), 
LRes28740 = reshape_layer(Glo89063, [1, 1], Res28740), 
LZer47006 = zero_padding1D_layer(Res28740, 2, 0, Zer47006), 
LCon70708 = concatenate_layer([Zer47006,[[[0.6025, 0.3752, 0.21, 0.7864, 0.7795, 0.1389, 0.6273], [0.0339, 0.5156, 0.9931, 0.7337, 0.9035, 0.0911, 0.6654], [0.5315, 0.5013, 0.0589, 0.6655, 0.2713, 0.9494, 0.4477]]]], 2, Con70708), 
LSub78908 = subtract_layer([[[[0.8423, 0.5053], [0.1983, 0.3781], [0.5947, 0.4977]], [[0.1132, 0.4091], [0.1663, 0.5806], [0.5063, 0.1116]], [[0.8658, 0.2299], [0.8953, 0.9523], [0.7754, 0.2999]]]], [[[[0.9192, 0.2467], [0.646, 0.1768], [0.8829, 0.3973]], [[0.594, 0.1376], [0.189, 0.2393], [0.0334, 0.2466]], [[0.9761, 0.0257], [0.584, 0.1246], [0.2928, 0.4197]]]], Sub78908), 
LRes24660 = reshape_layer(Sub78908, [3, 6], Res24660), 
LCon60524 = concatenate_layer([Res24660,[[[0.1022, 0.7083], [0.5548, 0.2128], [0.0422, 0.1199]]]], 2, Con60524), 
LMul86963 = multiply_layer([[[[[[0.6657, 0.8394], [0.3089, 0.0976]], [[0.1081, 0.9819], [0.387, 0.215]]]]], [[[[[0.3835, 0.716], [0.3218, 0.0379]], [[0.0079, 0.2217], [0.691, 0.4998]]]]]], Mul86963), 
LReL57621 = relu_layer(Mul86963, 0.5352717622053448, 5.256543817914749, 7.883322231106339, ReL57621), 
LRes80726 = reshape_layer(ReL57621, [1, 2, 4], Res80726), 
LRes52935 = reshape_layer(Res80726, [1, 8], Res52935), 
LMul69121 = multiply_layer([[[[0.2421, 0.4847]]], [[[0.0552, 0.309]]]], Mul69121), 
LCon44540 = concatenate_layer([Mul69121,[[[0.3701, 0.6242, 0.3104, 0.5382, 0.0593, 0.1719]]]], 2, Con44540), 
LMax63061 = maximum_layer([Res52935,Con44540], Max63061), 
LZer88341 = zero_padding1D_layer(Max63061, 2, 0, Zer88341), 
LSub55160 = subtract_layer(Con60524,Zer88341, Sub55160), 
LMax76591 = maximum_layer([Con70708,Sub55160], Max76591), 
exec_layers([LGlo93930,LRes51605,LGlo89063,LRes28740,LZer47006,LCon70708,LSub78908,LRes24660,LCon60524,LMul86963,LReL57621,LRes80726,LRes52935,LMul69121,LCon44540,LMax63061,LZer88341,LSub55160,LMax76591],["Glo93930","Res51605","Glo89063","Res28740","Zer47006","Con70708","Sub78908","Res24660","Con60524","Mul86963","ReL57621","Res80726","Res52935","Mul69121","Con44540","Max63061","Zer88341","Sub55160","Max76591"],Max76591,"Max76591")

Actual (Unparsed): [[[0.0000000, 0.6025000, 0.3752000, 0.2100000, 0.7864000, 0.7795000, 0.1389000, 0.7083000], [0.0000000, 0.2715000, 0.5156000, 0.9931000, 0.7337000, 0.9035000, 0.5548000, 0.6654000], [1.1630000, 0.5315000, 0.5013000, 0.2035000, 0.6655000, 0.2713000, 0.9494000, 0.4477000]]]

Expected (Unparsed): [[[0,0.6025,0.3752,0.21,0.7864,0.7795,0.1389,0.7083],[0,0.2715,0.5156,0.9931,0.7337,0.9035,0.5548,0.6654],[1.163,0.5315,0.5013,0.20350000000000001,0.6655,0.2713,0.9494,0.4477]]]

Actual:   [[[0, 0.6025, 0.3752, 0.21, 0.7864, 0.7795, 0.1389, 0.7083], [0, 0.2715, 0.5156, 0.9931, 0.7337, 0.9035, 0.5548, 0.6654], [1.163, 0.5315, 0.5013, 0.2035, 0.6655, 0.2713, 0.9494, 0.4477]]]

Expected: [[[0, 0.6025, 0.3752, 0.21, 0.7864, 0.7795, 0.1389, 0.7083], [0, 0.2715, 0.5156, 0.9931, 0.7337, 0.9035, 0.5548, 0.6654], [1.163, 0.5315, 0.5013, 0.2036, 0.6655, 0.2713, 0.9494, 0.4477]]]