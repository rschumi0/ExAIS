import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub98120 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub98120 = tf.keras.layers.Input(shape=([3, 2]))
in0Con41516 = tf.keras.layers.Input(shape=([3, 5]))
in0Ave93411 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave93411 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Min35701 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Min35701 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Sub98120 = keras.layers.Subtract(name = 'Sub98120', )([in0Sub98120,in1Sub98120])
Res85109 = keras.layers.Reshape((3, 2, 1), name = 'Res85109', )(Sub98120)
Cro63981 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro63981', )(Res85109)
Res89715 = keras.layers.Reshape((3, 1), name = 'Res89715', )(Cro63981)
Con41516 = keras.layers.Concatenate(axis=2, name = 'Con41516', )([Res89715,in0Con41516])
Ave93411 = keras.layers.Average(name = 'Ave93411', )([in0Ave93411,in1Ave93411])
Res1284 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res1284', )(Ave93411)
Zer72526 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer72526', )(Res1284)
Min35701 = keras.layers.Minimum(name = 'Min35701', )([in0Min35701,in1Min35701])
Zer91685 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer91685', )(Min35701)
Max49878 = keras.layers.Maximum(name = 'Max49878', )([Zer72526,Zer91685])
Res6386 = keras.layers.Reshape((1, 2, 3), name = 'Res6386', )(Max49878)
Res22058 = keras.layers.Reshape((1, 6), name = 'Res22058', )(Res6386)
Cro74566 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro74566', )(Res22058)
Zer10533 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer10533', )(Cro74566)
Add32361 = keras.layers.Add(name = 'Add32361', )([Con41516,Zer10533])
model = tf.keras.models.Model(inputs=[in0Sub98120,in1Sub98120,in0Con41516,in0Ave93411,in1Ave93411,in0Min35701,in1Min35701], outputs=Add32361)
in0Sub98120 = tf.constant([[[0.8766, 0.2308], [0.0806, 0.7892], [0.5688, 0.3431]]])
in1Sub98120 = tf.constant([[[0.8422, 0.9224], [0.3373, 0.2773], [0.7893, 0.0866]]])
in0Con41516 = tf.constant([[[0.7686, 0.3603, 0.5635, 0.3562, 0.4801], [0.522, 0.8395, 0.312, 0.0056, 0.2032], [0.5989, 0.3355, 0.6888, 0.1673, 0.2277]]])
in0Ave93411 = tf.constant([[[[0.7771], [0.4472]]]])
in1Ave93411 = tf.constant([[[[0.0969], [0.7954]]]])
in0Min35701 = tf.constant([[[[[0.27], [0.0033]]]]])
in1Min35701 = tf.constant([[[[[0.1207], [0.3793]]]]])
print (np.array2string(model.predict([in0Sub98120,in1Sub98120,in0Con41516,in0Ave93411,in1Ave93411,in0Min35701,in1Min35701],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add32361.png')

LSub98120 = subtract_layer([[[0.8766, 0.2308], [0.0806, 0.7892], [0.5688, 0.3431]]], [[[0.8422, 0.9224], [0.3373, 0.2773], [0.7893, 0.0866]]], Sub98120), 
LRes85109 = reshape_layer(Sub98120, [3, 2, 1], Res85109), 
LCro63981 = cropping2D_layer(Res85109, 0, 0, 1, 0, Cro63981), 
LRes89715 = reshape_layer(Cro63981, [3, 1], Res89715), 
LCon41516 = concatenate_layer([Res89715,[[[0.7686, 0.3603, 0.5635, 0.3562, 0.4801], [0.522, 0.8395, 0.312, 0.0056, 0.2032], [0.5989, 0.3355, 0.6888, 0.1673, 0.2277]]]], 2, Con41516), 
LAve93411 = average_layer([[[[[0.7771], [0.4472]]]], [[[[0.0969], [0.7954]]]]], Ave93411), 
LRes1284 = reshape_layer(Ave93411, [1, 2, 1, 1], Res1284), 
LZer72526 = zero_padding3D_layer(Res1284, 0, 0, 0, 0, 2, 0, Zer72526), 
LMin35701 = minimum_layer([[[[[[0.27], [0.0033]]]]], [[[[[0.1207], [0.3793]]]]]], Min35701), 
LZer91685 = zero_padding3D_layer(Min35701, 0, 0, 1, 0, 1, 0, Zer91685), 
LMax49878 = maximum_layer([Zer72526,Zer91685], Max49878), 
LRes6386 = reshape_layer(Max49878, [1, 2, 3], Res6386), 
LRes22058 = reshape_layer(Res6386, [1, 6], Res22058), 
LCro74566 = cropping1D_layer(Res22058, 0, 0, Cro74566), 
LZer10533 = zero_padding1D_layer(Cro74566, 2, 0, Zer10533), 
LAdd32361 = add_layer([Con41516,Zer10533], Add32361), 
exec_layers([LSub98120,LRes85109,LCro63981,LRes89715,LCon41516,LAve93411,LRes1284,LZer72526,LMin35701,LZer91685,LMax49878,LRes6386,LRes22058,LCro74566,LZer10533,LAdd32361],["Sub98120","Res85109","Cro63981","Res89715","Con41516","Ave93411","Res1284","Zer72526","Min35701","Zer91685","Max49878","Res6386","Res22058","Cro74566","Zer10533","Add32361"],Add32361,"Add32361")

Actual (Unparsed): [[[-0.6916000, 0.7686000, 0.3603000, 0.5635000, 0.3562000, 0.4801000], [0.5119000, 0.5220000, 0.8395000, 0.3120000, 0.0056000, 0.2032000], [0.2565000, 0.5989000, 0.7725000, 0.6888000, 0.2880000, 0.8490000]]]

Expected (Unparsed): [[[-0.6916,0.7686,0.3603,0.5635,0.3562,0.4801],[0.5119,0.522,0.8395,0.312,0.0056,0.2032],[0.2565,0.5989,0.7725,0.6888,0.28800000000000003,0.849]]]

Actual:   [[[-0.6916, 0.7686, 0.3603, 0.5635, 0.3562, 0.4801], [0.5119, 0.522, 0.8395, 0.312, 0.0056, 0.2032], [0.2565, 0.5989, 0.7725, 0.6888, 0.288, 0.849]]]

Expected: [[[-0.6916, 0.7686, 0.3603, 0.5635, 0.3562, 0.4801], [0.5119, 0.522, 0.8395, 0.312, 0.0056, 0.2032], [0.2565, 0.5989, 0.7725, 0.6888, 0.2881, 0.849]]]