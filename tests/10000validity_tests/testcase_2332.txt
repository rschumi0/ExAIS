import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max2773 = tf.keras.layers.Input(shape=([1, 2]))
in0Glo55094 = tf.keras.layers.Input(shape=([1, 1]))

Max2773 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max2773', )(in0Max2773)
Res56775 = keras.layers.Reshape((1, 2, 1), name = 'Res56775', )(Max2773)
Glo55094 = keras.layers.GlobalMaxPool1D(name = 'Glo55094', )(in0Glo55094)
Res53565 = keras.layers.Reshape((1, 1), name = 'Res53565', )(Glo55094)
Res24625 = keras.layers.Reshape((1, 1, 1), name = 'Res24625', )(Res53565)
Res55826 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res55826', )(Res24625)
Con11906 = keras.layers.Conv3D(2, (1, 1, 1),strides=(1, 3, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con11906', )(Res55826)
Res81505 = keras.layers.Reshape((1, 2, 1), name = 'Res81505', )(Con11906)
Mul90998 = keras.layers.Multiply(name = 'Mul90998', )([Res56775,Res81505])
Res29919 = keras.layers.Reshape((1, 2), name = 'Res29919', )(Mul90998)
Zer56929 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer56929', )(Res29919)
model = tf.keras.models.Model(inputs=[in0Max2773,in0Glo55094], outputs=Zer56929)
w = model.get_layer('Con11906').get_weights() 
w[0] = np.array([[[[[0.4427, 0.6546]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con11906').set_weights(w) 
in0Max2773 = tf.constant([[[1.1955, 1.6256]]])
in0Glo55094 = tf.constant([[[1.1028]]])
print (np.array2string(model.predict([in0Max2773,in0Glo55094],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer56929.png')

LMax2773 = max_pool1D_layer([[[1.1955, 1.6256]]], 1, 1, true, Max2773), 
LRes56775 = reshape_layer(Max2773, [1, 2, 1], Res56775), 
LGlo55094 = global_max_pool1D_layer([[[1.1028]]], Glo55094), 
LRes53565 = reshape_layer(Glo55094, [1, 1], Res53565), 
LRes24625 = reshape_layer(Res53565, [1, 1, 1], Res24625), 
LRes55826 = reshape_layer(Res24625, [1, 1, 1, 1], Res55826), 
LCon11906 = conv3D_layer(Res55826, 1, 1, 1,[[[[[0.4427, 0.6546]]]]],[0, 0], 1, 3, 1, false, 1, 1, 1, Con11906), 
LRes81505 = reshape_layer(Con11906, [1, 2, 1], Res81505), 
LMul90998 = multiply_layer([Res56775,Res81505], Mul90998), 
LRes29919 = reshape_layer(Mul90998, [1, 2], Res29919), 
LZer56929 = zero_padding1D_layer(Res29919, 1, 1, Zer56929), 
exec_layers([LMax2773,LRes56775,LGlo55094,LRes53565,LRes24625,LRes55826,LCon11906,LRes81505,LMul90998,LRes29919,LZer56929],["Max2773","Res56775","Glo55094","Res53565","Res24625","Res55826","Con11906","Res81505","Mul90998","Res29919","Zer56929"],Zer56929,"Zer56929")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.5836545, 1.1735091], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0],[0.58365452898,1.1735090657279998],[0,0]]]

Actual:   [[[0, 0], [0.5837, 1.1736], [0, 0]]]

Expected: [[[0, 0], [0.5837, 1.1736], [0, 0]]]