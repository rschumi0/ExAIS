import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sim47338 = tf.keras.layers.Input(shape=([1, 2]))

Sim47338 = keras.layers.SimpleRNN(1,name = 'Sim47338', )(in0Sim47338)
Res89851 = keras.layers.Reshape((1, 1), name = 'Res89851', )(Sim47338)
Res23825 = keras.layers.Reshape((1, 1, 1), name = 'Res23825', )(Res89851)
Glo73955 = keras.layers.GlobalAveragePooling2D(name = 'Glo73955', )(Res23825)
model = tf.keras.models.Model(inputs=[in0Sim47338], outputs=Glo73955)
w = model.get_layer('Sim47338').get_weights() 
w[0] = np.array([[9], [5]])
w[1] = np.array([[8]])
w[2] = np.array([1])
model.get_layer('Sim47338').set_weights(w) 
in0Sim47338 = tf.constant([[[8, 8]]])
print (np.array2string(model.predict([in0Sim47338],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo73955.png')

LSim47338 = simple_rnn_layer([[[8, 8]]],[[9], [5]],[[8]],[1], Sim47338), 
LRes89851 = reshape_layer(Sim47338, [1, 1], Res89851), 
LRes23825 = reshape_layer(Res89851, [1, 1, 1], Res23825), 
LGlo73955 = global_average_pooling2D_layer(Res23825, Glo73955), 
exec_layers([LSim47338,LRes89851,LRes23825,LGlo73955],["Sim47338","Res89851","Res23825","Glo73955"],Glo73955,"Glo73955")

Actual (Unparsed): [[1.0000000]]

Expected (Unparsed): [[1.0]]

Actual:   [[1]]

Expected: [[1]]