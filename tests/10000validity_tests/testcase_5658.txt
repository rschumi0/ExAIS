import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas92884 = tf.keras.layers.Input(shape=([2]))
in0Mul80487 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul80487 = tf.keras.layers.Input(shape=([1, 1, 1]))

Mas92884 = keras.layers.Masking(mask_value=1, name = 'Mas92884', )(in0Mas92884)
Res64911 = keras.layers.Reshape((2, 1), name = 'Res64911', )(Mas92884)
LST65135 = keras.layers.LSTM(2,recurrent_activation='sigmoid', name = 'LST65135', )(Res64911)
Res95504 = keras.layers.Reshape((2, 1), name = 'Res95504', )(LST65135)
Res53031 = keras.layers.Reshape((2, 1, 1), name = 'Res53031', )(Res95504)
Mul80487 = keras.layers.Multiply(name = 'Mul80487', )([in0Mul80487,in1Mul80487])
Zer68140 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer68140', )(Mul80487)
Min62242 = keras.layers.Minimum(name = 'Min62242', )([Res53031,Zer68140])
model = tf.keras.models.Model(inputs=[in0Mas92884,in0Mul80487,in1Mul80487], outputs=Min62242)
w = model.get_layer('LST65135').get_weights() 
w[0] = np.array([[9, 9, 2, 4, 2, 7, 5, 3]])
w[1] = np.array([[9, 5, 8, 3, 7, 3, 2, 1], [7, 4, 8, 4, 2, 4, 2, 5]])
w[2] = np.array([4, 1, 4, 10, 7, 6, 4, 6])
model.get_layer('LST65135').set_weights(w) 
in0Mas92884 = tf.constant([[1.8563, 1.6053]])
in0Mul80487 = tf.constant([[[[0.0245]]]])
in1Mul80487 = tf.constant([[[[0.2659]]]])
print (np.array2string(model.predict([in0Mas92884,in0Mul80487,in1Mul80487],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min62242.png')

LMas92884 = masking_layer([[1.8563, 1.6053]], 1, Mas92884), 
LRes64911 = reshape_layer(Mas92884, [2, 1], Res64911), 
LLST65135 = lstm_layer(Res64911,[[9, 9, 2, 4, 2, 7, 5, 3]],[[9, 5, 8, 3, 7, 3, 2, 1], [7, 4, 8, 4, 2, 4, 2, 5]],[4, 1, 4, 10, 7, 6, 4, 6], LST65135), 
LRes95504 = reshape_layer(LST65135, [2, 1], Res95504), 
LRes53031 = reshape_layer(Res95504, [2, 1, 1], Res53031), 
LMul80487 = multiply_layer([[[[[0.0245]]]], [[[[0.2659]]]]], Mul80487), 
LZer68140 = zero_padding2D_layer(Mul80487, 1, 0, 0, 0, Zer68140), 
LMin62242 = minimum_layer([Res53031,Zer68140], Min62242), 
exec_layers([LMas92884,LRes64911,LLST65135,LRes95504,LRes53031,LMul80487,LZer68140,LMin62242],["Mas92884","Res64911","LST65135","Res95504","Res53031","Mul80487","Zer68140","Min62242"],Min62242,"Min62242")

Actual (Unparsed): [[[[0.0000000]], [[0.0065145]]]]

Expected (Unparsed): [[[[0]],[[0.006514550000000001]]]]

Actual:   [[[[0]], [[0.0066]]]]

Expected: [[[[0]], [[0.0066]]]]