import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min26363 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min26363 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con30103 = tf.keras.layers.Input(shape=([4, 2]))
in0Min21592 = tf.keras.layers.Input(shape=([2, 2]))
in1Min21592 = tf.keras.layers.Input(shape=([2, 2]))
in0Ave88866 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave88866 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con29207 = tf.keras.layers.Input(shape=([4, 3]))

Min26363 = keras.layers.Minimum(name = 'Min26363', )([in0Min26363,in1Min26363])
Res75884 = keras.layers.Reshape((2, 2), name = 'Res75884', )(Min26363)
Zer99767 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer99767', )(Res75884)
Con30103 = keras.layers.Concatenate(axis=2, name = 'Con30103', )([Zer99767,in0Con30103])
Min21592 = keras.layers.Minimum(name = 'Min21592', )([in0Min21592,in1Min21592])
Res62106 = keras.layers.Reshape((2, 2, 1), name = 'Res62106', )(Min21592)
Zer83974 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer83974', )(Res62106)
Res84957 = keras.layers.Reshape((4, 4), name = 'Res84957', )(Zer83974)
Ave88866 = keras.layers.Average(name = 'Ave88866', )([in0Ave88866,in1Ave88866])
Res45280 = keras.layers.Reshape((1, 2), name = 'Res45280', )(Ave88866)
Per67058 = keras.layers.Permute((2,1), name = 'Per67058',)(Res45280)
Zer36223 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer36223', )(Per67058)
Con29207 = keras.layers.Concatenate(axis=2, name = 'Con29207', )([Zer36223,in0Con29207])
Max47425 = keras.layers.Maximum(name = 'Max47425', )([Res84957,Con29207])
Add98156 = keras.layers.Add(name = 'Add98156', )([Con30103,Max47425])
model = tf.keras.models.Model(inputs=[in0Min26363,in1Min26363,in0Con30103,in0Min21592,in1Min21592,in0Ave88866,in1Ave88866,in0Con29207], outputs=Add98156)
in0Min26363 = tf.constant([[[[0.3982, 0.5419]], [[0.856, 0.7776]]]])
in1Min26363 = tf.constant([[[[0.2259, 0.9065]], [[0.5925, 0.2237]]]])
in0Con30103 = tf.constant([[[0.9942, 0.2625], [0.9833, 0.3174], [0.2173, 0.1827], [0.7139, 0.0852]]])
in0Min21592 = tf.constant([[[0.9127, 0.8406], [0.4113, 0.6261]]])
in1Min21592 = tf.constant([[[0.8796, 0.3504], [0.0665, 0.3282]]])
in0Ave88866 = tf.constant([[[[0.0674], [0.6301]]]])
in1Ave88866 = tf.constant([[[[0.7778], [0.1974]]]])
in0Con29207 = tf.constant([[[0.4928, 0.9798, 0.2268], [0.8801, 0.2671, 0.504], [0.74, 0.2672, 0.9189], [0.1203, 0.5172, 0.7653]]])
print (np.array2string(model.predict([in0Min26363,in1Min26363,in0Con30103,in0Min21592,in1Min21592,in0Ave88866,in1Ave88866,in0Con29207],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add98156.png')

LMin26363 = minimum_layer([[[[[0.3982, 0.5419]], [[0.856, 0.7776]]]], [[[[0.2259, 0.9065]], [[0.5925, 0.2237]]]]], Min26363), 
LRes75884 = reshape_layer(Min26363, [2, 2], Res75884), 
LZer99767 = zero_padding1D_layer(Res75884, 2, 0, Zer99767), 
LCon30103 = concatenate_layer([Zer99767,[[[0.9942, 0.2625], [0.9833, 0.3174], [0.2173, 0.1827], [0.7139, 0.0852]]]], 2, Con30103), 
LMin21592 = minimum_layer([[[[0.9127, 0.8406], [0.4113, 0.6261]]], [[[0.8796, 0.3504], [0.0665, 0.3282]]]], Min21592), 
LRes62106 = reshape_layer(Min21592, [2, 2, 1], Res62106), 
LZer83974 = zero_padding2D_layer(Res62106, 1, 1, 1, 1, Zer83974), 
LRes84957 = reshape_layer(Zer83974, [4, 4], Res84957), 
LAve88866 = average_layer([[[[[0.0674], [0.6301]]]], [[[[0.7778], [0.1974]]]]], Ave88866), 
LRes45280 = reshape_layer(Ave88866, [1, 2], Res45280), 
LPer67058 = permute_layer(Res45280, 2,1, Per67058), 
LZer36223 = zero_padding1D_layer(Per67058, 2, 0, Zer36223), 
LCon29207 = concatenate_layer([Zer36223,[[[0.4928, 0.9798, 0.2268], [0.8801, 0.2671, 0.504], [0.74, 0.2672, 0.9189], [0.1203, 0.5172, 0.7653]]]], 2, Con29207), 
LMax47425 = maximum_layer([Res84957,Con29207], Max47425), 
LAdd98156 = add_layer([Con30103,Max47425], Add98156), 
exec_layers([LMin26363,LRes75884,LZer99767,LCon30103,LMin21592,LRes62106,LZer83974,LRes84957,LAve88866,LRes45280,LPer67058,LZer36223,LCon29207,LMax47425,LAdd98156],["Min26363","Res75884","Zer99767","Con30103","Min21592","Res62106","Zer83974","Res84957","Ave88866","Res45280","Per67058","Zer36223","Con29207","Max47425","Add98156"],Add98156,"Add98156")

Actual (Unparsed): [[[0.0000000, 0.4928000, 1.9740000, 0.4893000], [0.0000000, 0.8801000, 1.3337000, 0.8214000], [0.6485000, 1.2819000, 0.5455000, 1.1016000], [1.0062500, 0.3440000, 1.2311000, 0.8505000]]]

Expected (Unparsed): [[[0,0.4928,1.974,0.4893],[0,0.8801,1.3336999999999999,0.8214],[0.6485000000000001,1.2819,0.5455,1.1016000000000001],[1.00625,0.34400000000000003,1.2311,0.8505]]]

Actual:   [[[0, 0.4928, 1.974, 0.4893], [0, 0.8801, 1.3337, 0.8214], [0.6485, 1.2819, 0.5455, 1.1016], [1.0063, 0.344, 1.2311, 0.8505]]]

Expected: [[[0, 0.4928, 1.974, 0.4893], [0, 0.8801, 1.3337, 0.8214], [0.6486, 1.2819, 0.5455, 1.1017], [1.0063, 0.3441, 1.2311, 0.8505]]]