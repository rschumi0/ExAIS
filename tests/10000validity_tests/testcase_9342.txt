import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max44913 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con80155 = tf.keras.layers.Input(shape=([2, 2, 5]))
in0Mul81873 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul81873 = tf.keras.layers.Input(shape=([2, 2]))
in0Con73678 = tf.keras.layers.Input(shape=([2, 2, 3, 1]))
in0Sub55619 = tf.keras.layers.Input(shape=([2, 2, 3, 2]))
in1Sub55619 = tf.keras.layers.Input(shape=([2, 2, 3, 2]))
in0Con25982 = tf.keras.layers.Input(shape=([2, 10]))
in0Add92288 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add92288 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Mul46298 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Mul46298 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Min45435 = tf.keras.layers.Input(shape=([1, 2]))
in1Min45435 = tf.keras.layers.Input(shape=([1, 2]))

Max44913 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Max44913', )(in0Max44913)
Glo99213 = keras.layers.GlobalAveragePooling2D(name = 'Glo99213', )(Max44913)
Res602 = keras.layers.Reshape((1, 1), name = 'Res602', )(Glo99213)
Res21411 = keras.layers.Reshape((1, 1, 1), name = 'Res21411', )(Res602)
Zer84892 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer84892', )(Res21411)
Con80155 = keras.layers.Concatenate(axis=3, name = 'Con80155', )([Zer84892,in0Con80155])
Mul81873 = keras.layers.Multiply(name = 'Mul81873', )([in0Mul81873,in1Mul81873])
Res48815 = keras.layers.Reshape((2, 2, 1), name = 'Res48815', )(Mul81873)
Res9446 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res9446', )(Res48815)
Zer64528 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer64528', )(Res9446)
Con73678 = keras.layers.Concatenate(axis=4, name = 'Con73678', )([Zer64528,in0Con73678])
Sub55619 = keras.layers.Subtract(name = 'Sub55619', )([in0Sub55619,in1Sub55619])
Mul96281 = keras.layers.Multiply(name = 'Mul96281', )([Con73678,Sub55619])
Res8190 = keras.layers.Reshape((2, 2, 6), name = 'Res8190', )(Mul96281)
Dep2323 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep2323', )(Res8190)
Min24932 = keras.layers.Minimum(name = 'Min24932', )([Con80155,Dep2323])
Res34085 = keras.layers.Reshape((2, 12), name = 'Res34085', )(Min24932)
Con25982 = keras.layers.Concatenate(axis=2, name = 'Con25982', )([Res34085,in0Con25982])
Add92288 = keras.layers.Add(name = 'Add92288', )([in0Add92288,in1Add92288])
Res61476 = keras.layers.Reshape((1, 1, 2), name = 'Res61476', )(Add92288)
Res74703 = keras.layers.Reshape((1, 2), name = 'Res74703', )(Res61476)
Zer74939 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer74939', )(Res74703)
Mul46298 = keras.layers.Multiply(name = 'Mul46298', )([in0Mul46298,in1Mul46298])
Res11878 = keras.layers.Reshape((1, 2), name = 'Res11878', )(Mul46298)
Min45435 = keras.layers.Minimum(name = 'Min45435', )([in0Min45435,in1Min45435])
Dot39290 = keras.layers.Dot(axes=(1, 1), name = 'Dot39290', )([Res11878,Min45435])
Mul56092 = keras.layers.Multiply(name = 'Mul56092', )([Zer74939,Dot39290])
Dot42757 = keras.layers.Dot(axes=(1, 1), name = 'Dot42757', )([Con25982,Mul56092])
model = tf.keras.models.Model(inputs=[in0Max44913,in0Con80155,in0Mul81873,in1Mul81873,in0Con73678,in0Sub55619,in1Sub55619,in0Con25982,in0Add92288,in1Add92288,in0Mul46298,in1Mul46298,in0Min45435,in1Min45435], outputs=Dot42757)
w = model.get_layer('Dep2323').get_weights() 
w[0] = np.array([[[[0.9513], [0.0757], [0.9109], [0.3364], [0.7555], [0.7837]]]])
w[1] = np.array([0, 0, 0, 0, 0, 0])
model.get_layer('Dep2323').set_weights(w) 
in0Max44913 = tf.constant([[[[1.231]]]])
in0Con80155 = tf.constant([[[[0.6431, 0.3249, 0.3131, 0.4796, 0.93], [0.2134, 0.5275, 0.0557, 0.9959, 0.7447]], [[0.2137, 0.1952, 0.5499, 0.9351, 0.0598], [0.7688, 0.7857, 0.8873, 0.8035, 0.1236]]]])
in0Mul81873 = tf.constant([[[0.7245, 0.3742], [0.3857, 0.3374]]])
in1Mul81873 = tf.constant([[[0.5853, 0.7704], [0.0873, 0.0178]]])
in0Con73678 = tf.constant([[[[[0.8068], [0.9327], [0.3457]], [[0.5804], [0.457], [0.0708]]], [[[0.8631], [0.4766], [0.4977]], [[0.7085], [0.1993], [0.5719]]]]])
in0Sub55619 = tf.constant([[[[[0.0388, 0.3742], [0.0325, 0.5348], [0.3729, 0.656]], [[0.8188, 0.9673], [0.0219, 0.4552], [0.0871, 0.1926]]], [[[0.6234, 0.2893], [0.415, 0.7546], [0.3024, 0.3363]], [[0.01, 0.3468], [0.7813, 0.8033], [0.6674, 0.7747]]]]])
in1Sub55619 = tf.constant([[[[[0.8758, 0.4896], [0.4951, 0.5585], [0.2952, 0.0945]], [[0.8483, 0.7857], [0.4421, 0.2284], [0.7673, 0.4295]]], [[[0.0796, 0.1414], [0.9647, 0.1139], [0.3172, 0.9017]], [[0.0709, 0.2209], [0.3584, 0.1271], [0.414, 0.316]]]]])
in0Con25982 = tf.constant([[[0.742, 0.6388, 0.5945, 0.0888, 0.2703, 0.8694, 0.1818, 0.3391, 0.0537, 0.3302], [0.6181, 0.4666, 0.144, 0.6639, 0.4341, 0.7611, 0.1583, 0.3902, 0.7775, 0.0507]]])
in0Add92288 = tf.constant([[[[[0.8454], [0.4021]]]]])
in1Add92288 = tf.constant([[[[[0.083], [0.0946]]]]])
in0Mul46298 = tf.constant([[[[0.4401], [0.1967]]]])
in1Mul46298 = tf.constant([[[[0.4039], [0.4425]]]])
in0Min45435 = tf.constant([[[0.4878, 0.4441]]])
in1Min45435 = tf.constant([[[0.2437, 0.7474]]])
print (np.array2string(model.predict([in0Max44913,in0Con80155,in0Mul81873,in1Mul81873,in0Con73678,in0Sub55619,in1Sub55619,in0Con25982,in0Add92288,in1Add92288,in0Mul46298,in1Mul46298,in0Min45435,in1Min45435],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot42757.png')

LMax44913 = max_pool2D_layer([[[[1.231]]]], 1, 1, 1, 1, false, Max44913), 
LGlo99213 = global_average_pooling2D_layer(Max44913, Glo99213), 
LRes602 = reshape_layer(Glo99213, [1, 1], Res602), 
LRes21411 = reshape_layer(Res602, [1, 1, 1], Res21411), 
LZer84892 = zero_padding2D_layer(Res21411, 1, 0, 1, 0, Zer84892), 
LCon80155 = concatenate_layer([Zer84892,[[[[0.6431, 0.3249, 0.3131, 0.4796, 0.93], [0.2134, 0.5275, 0.0557, 0.9959, 0.7447]], [[0.2137, 0.1952, 0.5499, 0.9351, 0.0598], [0.7688, 0.7857, 0.8873, 0.8035, 0.1236]]]]], 3, Con80155), 
LMul81873 = multiply_layer([[[[0.7245, 0.3742], [0.3857, 0.3374]]], [[[0.5853, 0.7704], [0.0873, 0.0178]]]], Mul81873), 
LRes48815 = reshape_layer(Mul81873, [2, 2, 1], Res48815), 
LRes9446 = reshape_layer(Res48815, [2, 2, 1, 1], Res9446), 
LZer64528 = zero_padding3D_layer(Res9446, 0, 0, 0, 0, 2, 0, Zer64528), 
LCon73678 = concatenate_layer([Zer64528,[[[[[0.8068], [0.9327], [0.3457]], [[0.5804], [0.457], [0.0708]]], [[[0.8631], [0.4766], [0.4977]], [[0.7085], [0.1993], [0.5719]]]]]], 4, Con73678), 
LSub55619 = subtract_layer([[[[[0.0388, 0.3742], [0.0325, 0.5348], [0.3729, 0.656]], [[0.8188, 0.9673], [0.0219, 0.4552], [0.0871, 0.1926]]], [[[0.6234, 0.2893], [0.415, 0.7546], [0.3024, 0.3363]], [[0.01, 0.3468], [0.7813, 0.8033], [0.6674, 0.7747]]]]], [[[[[0.8758, 0.4896], [0.4951, 0.5585], [0.2952, 0.0945]], [[0.8483, 0.7857], [0.4421, 0.2284], [0.7673, 0.4295]]], [[[0.0796, 0.1414], [0.9647, 0.1139], [0.3172, 0.9017]], [[0.0709, 0.2209], [0.3584, 0.1271], [0.414, 0.316]]]]], Sub55619), 
LMul96281 = multiply_layer([Con73678,Sub55619], Mul96281), 
LRes8190 = reshape_layer(Mul96281, [2, 2, 6], Res8190), 
LDep2323 = depthwise_conv2D_layer(Res8190, 1, 1,[[[[0.9513], [0.0757], [0.9109], [0.3364], [0.7555], [0.7837]]]],[0, 0, 0, 0, 0, 0], 1, 1, true, Dep2323), 
LMin24932 = minimum_layer([Con80155,Dep2323], Min24932), 
LRes34085 = reshape_layer(Min24932, [2, 12], Res34085), 
LCon25982 = concatenate_layer([Res34085,[[[0.742, 0.6388, 0.5945, 0.0888, 0.2703, 0.8694, 0.1818, 0.3391, 0.0537, 0.3302], [0.6181, 0.4666, 0.144, 0.6639, 0.4341, 0.7611, 0.1583, 0.3902, 0.7775, 0.0507]]]], 2, Con25982), 
LAdd92288 = add_layer([[[[[[0.8454], [0.4021]]]]], [[[[[0.083], [0.0946]]]]]], Add92288), 
LRes61476 = reshape_layer(Add92288, [1, 1, 2], Res61476), 
LRes74703 = reshape_layer(Res61476, [1, 2], Res74703), 
LZer74939 = zero_padding1D_layer(Res74703, 1, 0, Zer74939), 
LMul46298 = multiply_layer([[[[[0.4401], [0.1967]]]], [[[[0.4039], [0.4425]]]]], Mul46298), 
LRes11878 = reshape_layer(Mul46298, [1, 2], Res11878), 
LMin45435 = minimum_layer([[[[0.4878, 0.4441]]], [[[0.2437, 0.7474]]]], Min45435), 
LDot39290 = dot_layer(Res11878,Min45435, 1, 1, Dot39290), 
LMul56092 = multiply_layer([Zer74939,Dot39290], Mul56092), 
LDot42757 = dot_layer(Con25982,Mul56092, 1, 1, Dot42757), 
exec_layers([LMax44913,LGlo99213,LRes602,LRes21411,LZer84892,LCon80155,LMul81873,LRes48815,LRes9446,LZer64528,LCon73678,LSub55619,LMul96281,LRes8190,LDep2323,LMin24932,LRes34085,LCon25982,LAdd92288,LRes61476,LRes74703,LZer74939,LMul46298,LRes11878,LMin45435,LDot39290,LMul56092,LDot42757],["Max44913","Glo99213","Res602","Res21411","Zer84892","Con80155","Mul81873","Res48815","Res9446","Zer64528","Con73678","Sub55619","Mul96281","Res8190","Dep2323","Min24932","Res34085","Con25982","Add92288","Res61476","Res74703","Zer74939","Mul46298","Res11878","Min45435","Dot39290","Mul56092","Dot42757"],Dot42757,"Dot42757")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0001903, 0.0001855], [0.0000000, 0.0000000], [0.0020229, 0.0019722], [-0.0000074, -0.0000072], [-0.0043429, -0.0042341], [0.0000000, 0.0000000], [0.0001330, 0.0001296], [0.0000000, 0.0000000], [0.0008928, 0.0008704], [0.0000226, 0.0000221], [0.0024340, 0.0023731], [0.0121721, 0.0118673], [0.0091887, 0.0089585], [0.0028358, 0.0027647], [0.0130741, 0.0127466], [0.0085487, 0.0083346], [0.0149882, 0.0146128], [0.0031174, 0.0030393], [0.0076841, 0.0074917], [0.0153112, 0.0149277], [0.0009984, 0.0009734]]]

Expected (Unparsed): [[[0.0,0.0],[0.00019029766789681405,0.00018553153520970927],[0.0,0.0],[0.0020228936217325595,0.0019722288946256395],[-7.414269405897802e-6,-7.228574057357789e-6],[-0.004342917581984873,-0.004234146299216848],[0.0,0.0],[0.0001329749268584263,0.00012964448065553867],[0.0,0.0],[0.0008927847189017272,0.0008704243270044789],[2.2641982777039594e-5,2.20748991369341e-5],[0.0024340347076371484,0.0023730726763635576],[0.012172142821929785,0.011867283343530056],[0.009188677949704639,0.008958541349443657],[0.0028357685914219203,0.0027647448656662804],[0.013074074776701479,0.012746625807748916],[0.008548660732890664,0.008334553792956475],[0.014988218575911275,0.014612828592073655],[0.0031173761668200693,0.0030392993905206406],[0.007684145169255787,0.007491690601270713],[0.015311181109934327,0.014927702312885647],[0.0009984268582298012,0.000973420588120003]]]

Actual:   [[[0, 0], [0.0002, 0.0002], [0, 0], [0.0021, 0.002], [-0, -0], [-0.0043, -0.0042], [0, 0], [0.0002, 0.0002], [0, 0], [0.0009, 0.0009], [0.0001, 0.0001], [0.0025, 0.0024], [0.0122, 0.0119], [0.0092, 0.009], [0.0029, 0.0028], [0.0131, 0.0128], [0.0086, 0.0084], [0.015, 0.0147], [0.0032, 0.0031], [0.0077, 0.0075], [0.0154, 0.015], [0.001, 0.001]]]

Expected: [[[0, 0], [0.0002, 0.0002], [0, 0], [0.0021, 0.002], [-0, -0], [-0.0043, -0.0042], [0, 0], [0.0002, 0.0002], [0, 0], [0.0009, 0.0009], [0.0001, 0.0001], [0.0025, 0.0024], [0.0122, 0.0119], [0.0092, 0.009], [0.0029, 0.0028], [0.0131, 0.0128], [0.0086, 0.0084], [0.015, 0.0147], [0.0032, 0.0031], [0.0077, 0.0075], [0.0154, 0.015], [0.001, 0.001]]]