import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep63779 = tf.keras.layers.Input(shape=([2, 1]))
in0Add34710 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add34710 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Sep63779 = keras.layers.SeparableConv1D(4, (1),strides=(2), padding='same', name = 'Sep63779', )(in0Sep63779)
Fla9675 = keras.layers.Flatten(name = 'Fla9675', )(Sep63779)
Add34710 = keras.layers.Add(name = 'Add34710', )([in0Add34710,in1Add34710])
Fla14237 = keras.layers.Flatten(name = 'Fla14237', )(Add34710)
Mul15127 = keras.layers.Multiply(name = 'Mul15127', )([Fla9675,Fla14237])
model = tf.keras.models.Model(inputs=[in0Sep63779,in0Add34710,in1Add34710], outputs=Mul15127)
w = model.get_layer('Sep63779').get_weights() 
w[0] = np.array([[[0.4384]]])
w[1] = np.array([[[0.7224, 0.6811, 0.9134, 0.5856]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep63779').set_weights(w) 
in0Sep63779 = tf.constant([[[0.0251], [0.8793]]])
in0Add34710 = tf.constant([[[[[0.2572], [0.2552]], [[0.9341], [0.544]]]]])
in1Add34710 = tf.constant([[[[[0.1685], [0.9464]], [[0.0904], [0.5072]]]]])
print (np.array2string(model.predict([in0Sep63779,in0Add34710,in1Add34710],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul15127.png')

LSep63779 = separable_conv1D_layer([[[0.0251], [0.8793]]], 1,[[[[0.4384]]],[[[0.7224, 0.6811, 0.9134, 0.5856]]]],[0, 0, 0, 0], 2, true, Sep63779), 
LFla9675 = flatten_layer(Sep63779, Fla9675), 
LAdd34710 = add_layer([[[[[[0.2572], [0.2552]], [[0.9341], [0.544]]]]], [[[[[0.1685], [0.9464]], [[0.0904], [0.5072]]]]]], Add34710), 
LFla14237 = flatten_layer(Add34710, Fla14237), 
LMul15127 = multiply_layer([Fla9675,Fla14237], Mul15127), 
exec_layers([LSep63779,LFla9675,LAdd34710,LFla14237,LMul15127],["Sep63779","Fla9675","Add34710","Fla14237","Mul15127"],Mul15127,"Mul15127")

Actual (Unparsed): [[0.0033840, 0.0090057, 0.0102972, 0.0067738]]

Expected (Unparsed): [[0.0033839633786112004,0.009005650053478401,0.010297154688672,0.006773773757644802]]

Actual:   [[0.0034, 0.0091, 0.0103, 0.0068]]

Expected: [[0.0034, 0.0091, 0.0103, 0.0068]]