import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc73115 = tf.keras.layers.Input(shape=([2, 1]))
in0Sof79906 = tf.keras.layers.Input(shape=([1, 1]))
in0Con6234 = tf.keras.layers.Input(shape=([1, 1]))

Loc73115 = keras.layers.LocallyConnected1D(2, (2),strides=(1), name = 'Loc73115', )(in0Loc73115)
Sof79906 = keras.layers.Softmax(axis=1, name = 'Sof79906', input_shape=(1, 1))(in0Sof79906)
Ave26790 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave26790', )(Sof79906)
Con6234 = keras.layers.Concatenate(axis=2, name = 'Con6234', )([Ave26790,in0Con6234])
Add95851 = keras.layers.Add(name = 'Add95851', )([Loc73115,Con6234])
model = tf.keras.models.Model(inputs=[in0Loc73115,in0Sof79906,in0Con6234], outputs=Add95851)
w = model.get_layer('Loc73115').get_weights() 
w[0] = np.array([[[0.2169, 0.661], [0.0074, 0.0423]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc73115').set_weights(w) 
in0Loc73115 = tf.constant([[[0.7578], [0.0777]]])
in0Sof79906 = tf.constant([[[0.5005]]])
in0Con6234 = tf.constant([[[0.2819]]])
print (np.array2string(model.predict([in0Loc73115,in0Sof79906,in0Con6234],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add95851.png')

LLoc73115 = locally_connected1D_layer([[[0.7578], [0.0777]]], 2,[[[0.2169, 0.661], [0.0074, 0.0423]]],[[0, 0]], 1, Loc73115), 
LSof79906 = softmax_layer([[[0.5005]]], 1, Sof79906), 
LAve26790 = average_pooling1D_layer(Sof79906, 1, Ave26790), 
LCon6234 = concatenate_layer([Ave26790,[[[0.2819]]]], 2, Con6234), 
LAdd95851 = add_layer([Loc73115,Con6234], Add95851), 
exec_layers([LLoc73115,LSof79906,LAve26790,LCon6234,LAdd95851],["Loc73115","Sof79906","Ave26790","Con6234","Add95851"],Add95851,"Add95851")

Actual (Unparsed): [[[1.1649418, 0.7860925]]]

Expected (Unparsed): [[[1.1649418,0.78609251]]]

Actual:   [[[1.165, 0.7861]]]

Expected: [[[1.165, 0.7861]]]