import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo71234 = tf.keras.layers.Input(shape=([1, 1]))
in0Con32012 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot78223 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot78223 = tf.keras.layers.Input(shape=([2, 2]))
in0Con35661 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Ave19946 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Ave19946 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Max71422 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Max71422 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Glo71234 = keras.layers.GlobalAveragePooling1D(name = 'Glo71234', )(in0Glo71234)
Res43500 = keras.layers.Reshape((1, 1), name = 'Res43500', )(Glo71234)
Zer42632 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer42632', )(Res43500)
Con32012 = keras.layers.Concatenate(axis=2, name = 'Con32012', )([Zer42632,in0Con32012])
Dot78223 = keras.layers.Dot(axes=(1, 2), name = 'Dot78223', )([in0Dot78223,in1Dot78223])
Min3687 = keras.layers.Minimum(name = 'Min3687', )([Con32012,Dot78223])
Res25475 = keras.layers.Reshape((2, 2, 1), name = 'Res25475', )(Min3687)
Res60581 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res60581', )(Res25475)
Con35661 = keras.layers.Concatenate(axis=4, name = 'Con35661', )([Res60581,in0Con35661])
Ave19946 = keras.layers.Average(name = 'Ave19946', )([in0Ave19946,in1Ave19946])
Zer30796 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer30796', )(Ave19946)
Sub35340 = keras.layers.Subtract(name = 'Sub35340', )([Con35661,Zer30796])
Max71422 = keras.layers.Maximum(name = 'Max71422', )([in0Max71422,in1Max71422])
Zer90383 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer90383', )(Max71422)
Mul3086 = keras.layers.Multiply(name = 'Mul3086', )([Sub35340,Zer90383])
model = tf.keras.models.Model(inputs=[in0Glo71234,in0Con32012,in0Dot78223,in1Dot78223,in0Con35661,in0Ave19946,in1Ave19946,in0Max71422,in1Max71422], outputs=Mul3086)
in0Glo71234 = tf.constant([[[1.1682]]])
in0Con32012 = tf.constant([[[0.8987], [0.6594]]])
in0Dot78223 = tf.constant([[[0.7548, 0.3998], [0.6219, 0.6551]]])
in1Dot78223 = tf.constant([[[0.8404, 0.5367], [0.7047, 0.5665]]])
in0Con35661 = tf.constant([[[[[0.959]], [[0.6815]]], [[[0.2346]], [[0.2466]]]]])
in0Ave19946 = tf.constant([[[[[0.065, 0.0319]], [[0.1358, 0.89]]]]])
in1Ave19946 = tf.constant([[[[[0.0969, 0.6775]], [[0.8775, 0.267]]]]])
in0Max71422 = tf.constant([[[[[0.8156, 0.2759]]]]])
in1Max71422 = tf.constant([[[[[0.2383, 0.9967]]]]])
print (np.array2string(model.predict([in0Glo71234,in0Con32012,in0Dot78223,in1Dot78223,in0Con35661,in0Ave19946,in1Ave19946,in0Max71422,in1Max71422],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul3086.png')

LGlo71234 = global_average_pooling1D_layer([[[1.1682]]], Glo71234), 
LRes43500 = reshape_layer(Glo71234, [1, 1], Res43500), 
LZer42632 = zero_padding1D_layer(Res43500, 1, 0, Zer42632), 
LCon32012 = concatenate_layer([Zer42632,[[[0.8987], [0.6594]]]], 2, Con32012), 
LDot78223 = dot_layer([[[0.7548, 0.3998], [0.6219, 0.6551]]], [[[0.8404, 0.5367], [0.7047, 0.5665]]], 1, 2, Dot78223), 
LMin3687 = minimum_layer([Con32012,Dot78223], Min3687), 
LRes25475 = reshape_layer(Min3687, [2, 2, 1], Res25475), 
LRes60581 = reshape_layer(Res25475, [2, 2, 1, 1], Res60581), 
LCon35661 = concatenate_layer([Res60581,[[[[[0.959]], [[0.6815]]], [[[0.2346]], [[0.2466]]]]]], 4, Con35661), 
LAve19946 = average_layer([[[[[[0.065, 0.0319]], [[0.1358, 0.89]]]]], [[[[[0.0969, 0.6775]], [[0.8775, 0.267]]]]]], Ave19946), 
LZer30796 = zero_padding3D_layer(Ave19946, 1, 0, 0, 0, 0, 0, Zer30796), 
LSub35340 = subtract_layer(Con35661,Zer30796, Sub35340), 
LMax71422 = maximum_layer([[[[[[0.8156, 0.2759]]]]], [[[[[0.2383, 0.9967]]]]]], Max71422), 
LZer90383 = zero_padding3D_layer(Max71422, 1, 0, 1, 0, 0, 0, Zer90383), 
LMul3086 = multiply_layer([Sub35340,Zer90383], Mul3086), 
exec_layers([LGlo71234,LRes43500,LZer42632,LCon32012,LDot78223,LMin3687,LRes25475,LRes60581,LCon35661,LAve19946,LZer30796,LSub35340,LMax71422,LZer90383,LMul3086],["Glo71234","Res43500","Zer42632","Con32012","Dot78223","Min3687","Res25475","Res60581","Con35661","Ave19946","Zer30796","Sub35340","Max71422","Zer90383","Mul3086"],Mul3086,"Mul3086")

Actual (Unparsed): [[[[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, -0.0000000]], [[0.1192433, -0.3308047]]]]]

Expected (Unparsed): [[[[[0,0.0]],[[0.0,0.0]]],[[[0.0,-0.0]],[[0.11924333807600002,-0.33080473]]]]]

Actual:   [[[[[0, 0]], [[0, 0]]], [[[0, -0]], [[0.1193, -0.3308]]]]]

Expected: [[[[[0, 0]], [[0, 0]]], [[[0, -0]], [[0.1193, -0.3308]]]]]