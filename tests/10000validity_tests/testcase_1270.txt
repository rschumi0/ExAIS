import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min4939 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min4939 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con29629 = tf.keras.layers.Input(shape=([2]))
in0Add81056 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add81056 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Max60976 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max60976 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Con40502 = tf.keras.layers.Input(shape=([2]))

Min4939 = keras.layers.Minimum(name = 'Min4939', )([in0Min4939,in1Min4939])
Res12106 = keras.layers.Reshape((1, 2), name = 'Res12106', )(Min4939)
Fla49146 = keras.layers.Flatten(name = 'Fla49146', )(Res12106)
Con29629 = keras.layers.Concatenate(axis=1, name = 'Con29629', )([Fla49146,in0Con29629])
Add81056 = keras.layers.Add(name = 'Add81056', )([in0Add81056,in1Add81056])
Res33239 = keras.layers.Reshape((2, 2), name = 'Res33239', )(Add81056)
Fla29108 = keras.layers.Flatten(name = 'Fla29108', )(Res33239)
Max60976 = keras.layers.Maximum(name = 'Max60976', )([in0Max60976,in1Max60976])
Glo12117 = keras.layers.GlobalMaxPool3D(name = 'Glo12117', )(Max60976)
Con40502 = keras.layers.Concatenate(axis=1, name = 'Con40502', )([Glo12117,in0Con40502])
Ave34006 = keras.layers.Average(name = 'Ave34006', )([Fla29108,Con40502])
Sub35555 = keras.layers.Subtract(name = 'Sub35555', )([Con29629,Ave34006])
Res46679 = keras.layers.Reshape((4, 1), name = 'Res46679', )(Sub35555)
Res91104 = keras.layers.Reshape((4, 1, 1), name = 'Res91104', )(Res46679)
Res62979 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res62979', )(Res91104)
Up_80276 = keras.layers.UpSampling3D(size=(1, 2, 1), name = 'Up_80276', )(Res62979)
model = tf.keras.models.Model(inputs=[in0Min4939,in1Min4939,in0Con29629,in0Add81056,in1Add81056,in0Max60976,in1Max60976,in0Con40502], outputs=Up_80276)
in0Min4939 = tf.constant([[[[0.8137, 0.0991]]]])
in1Min4939 = tf.constant([[[[0.9181, 0.4795]]]])
in0Con29629 = tf.constant([[0.6646, 0.8932]])
in0Add81056 = tf.constant([[[[0.2679], [0.0477]], [[0.1232], [0.6903]]]])
in1Add81056 = tf.constant([[[[0.6368], [0.4475]], [[0.4378], [0.6471]]]])
in0Max60976 = tf.constant([[[[[0.3742, 0.9749], [0.6031, 0.7292]], [[0.7581, 0.8269], [0.0999, 0.6158]]], [[[0.3996, 0.6966], [0.0504, 0.5445]], [[0.2308, 0.146], [0.2427, 0.3276]]]]])
in1Max60976 = tf.constant([[[[[0.7573, 0.2366], [0.1744, 0.1596]], [[0.6164, 0.7222], [0.9592, 0.5148]]], [[[0.3795, 0.454], [0.046, 0.1166]], [[0.0991, 0.9059], [0.9662, 0.037]]]]])
in0Con40502 = tf.constant([[0.2915, 0.5504]])
print (np.array2string(model.predict([in0Min4939,in1Min4939,in0Con29629,in0Add81056,in1Add81056,in0Max60976,in1Max60976,in0Con40502],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_80276.png')

LMin4939 = minimum_layer([[[[[0.8137, 0.0991]]]], [[[[0.9181, 0.4795]]]]], Min4939), 
LRes12106 = reshape_layer(Min4939, [1, 2], Res12106), 
LFla49146 = flatten_layer(Res12106, Fla49146), 
LCon29629 = concatenate_layer([Fla49146,[[0.6646, 0.8932]]], 1, Con29629), 
LAdd81056 = add_layer([[[[[0.2679], [0.0477]], [[0.1232], [0.6903]]]], [[[[0.6368], [0.4475]], [[0.4378], [0.6471]]]]], Add81056), 
LRes33239 = reshape_layer(Add81056, [2, 2], Res33239), 
LFla29108 = flatten_layer(Res33239, Fla29108), 
LMax60976 = maximum_layer([[[[[[0.3742, 0.9749], [0.6031, 0.7292]], [[0.7581, 0.8269], [0.0999, 0.6158]]], [[[0.3996, 0.6966], [0.0504, 0.5445]], [[0.2308, 0.146], [0.2427, 0.3276]]]]], [[[[[0.7573, 0.2366], [0.1744, 0.1596]], [[0.6164, 0.7222], [0.9592, 0.5148]]], [[[0.3795, 0.454], [0.046, 0.1166]], [[0.0991, 0.9059], [0.9662, 0.037]]]]]], Max60976), 
LGlo12117 = global_max_pool3D_layer(Max60976, Glo12117), 
LCon40502 = concatenate_layer([Glo12117,[[0.2915, 0.5504]]], 1, Con40502), 
LAve34006 = average_layer([Fla29108,Con40502], Ave34006), 
LSub35555 = subtract_layer(Con29629,Ave34006, Sub35555), 
LRes46679 = reshape_layer(Sub35555, [4, 1], Res46679), 
LRes91104 = reshape_layer(Res46679, [4, 1, 1], Res91104), 
LRes62979 = reshape_layer(Res91104, [4, 1, 1, 1], Res62979), 
LUp_80276 = up_sampling3D_layer(Res62979, 1, 2, 1, Up_80276), 
exec_layers([LMin4939,LRes12106,LFla49146,LCon29629,LAdd81056,LRes33239,LFla29108,LMax60976,LGlo12117,LCon40502,LAve34006,LSub35555,LRes46679,LRes91104,LRes62979,LUp_80276],["Min4939","Res12106","Fla49146","Con29629","Add81056","Res33239","Fla29108","Max60976","Glo12117","Con40502","Ave34006","Sub35555","Res46679","Res91104","Res62979","Up_80276"],Up_80276,"Up_80276")

Actual (Unparsed): [[[[[-0.1217500]], [[-0.1217500]]], [[[-0.6359500]], [[-0.6359500]]], [[[0.2383500]], [[0.2383500]]], [[[-0.0507000]], [[-0.0507000]]]]]

Expected (Unparsed): [[[[[-0.12175000000000002]],[[-0.12175000000000002]]],[[[-0.63595]],[[-0.63595]]],[[[0.23834999999999995]],[[0.23834999999999995]]],[[[-0.05070000000000008]],[[-0.05070000000000008]]]]]

Actual:   [[[[[-0.1217]], [[-0.1217]]], [[[-0.6359]], [[-0.6359]]], [[[0.2384]], [[0.2384]]], [[[-0.0507]], [[-0.0507]]]]]

Expected: [[[[[-0.1217]], [[-0.1217]]], [[[-0.6359]], [[-0.6359]]], [[[0.2384]], [[0.2384]]], [[[-0.0507]], [[-0.0507]]]]]