import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max65 = tf.keras.layers.Input(shape=([1, 2, 1]))

Max65 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max65', )(in0Max65)
Res70420 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res70420', )(Max65)
Zer40586 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer40586', )(Res70420)
Res35799 = keras.layers.Reshape((3, 3, 3), name = 'Res35799', )(Zer40586)
Res89379 = keras.layers.Reshape((3, 9), name = 'Res89379', )(Res35799)
Max93347 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max93347', )(Res89379)
model = tf.keras.models.Model(inputs=[in0Max65], outputs=Max93347)
in0Max65 = tf.constant([[[[1.7168], [1.0962]]]])
print (np.array2string(model.predict([in0Max65],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max93347.png')

LMax65 = max_pool2D_layer([[[[1.7168], [1.0962]]]], 1, 2, Max65), 
LRes70420 = reshape_layer(Max65, [1, 1, 1, 1], Res70420), 
LZer40586 = zero_padding3D_layer(Res70420, 1, 1, 1, 1, 1, 1, Zer40586), 
LRes35799 = reshape_layer(Zer40586, [3, 3, 3], Res35799), 
LRes89379 = reshape_layer(Res35799, [3, 9], Res89379), 
LMax93347 = max_pool1D_layer(Res89379, 1, 1, false, Max93347), 
exec_layers([LMax65,LRes70420,LZer40586,LRes35799,LRes89379,LMax93347],["Max65","Res70420","Zer40586","Res35799","Res89379","Max93347"],Max93347,"Max93347")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.7168000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0],[0,0,0,0,1.7168,0,0,0,0],[0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 1.7168, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 1.7168, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]]]