import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc92403 = tf.keras.layers.Input(shape=([2, 2, 2]))

Loc92403 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(1, 1), name = 'Loc92403', )(in0Loc92403)
Loc59227 = keras.layers.LocallyConnected2D(3, (1, 1),strides=(1, 1), name = 'Loc59227', )(Loc92403)
model = tf.keras.models.Model(inputs=[in0Loc92403], outputs=Loc59227)
w = model.get_layer('Loc92403').get_weights() 
w[0] = np.array([[[0.3063, 0.6232], [0.0046, 0.7118], [0.5004, 0.9994], [0.3143, 0.3449]], [[0.9364, 0.7041], [0.9622, 0.0311], [0.3437, 0.4592], [0.4527, 0.9893]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc92403').set_weights(w) 
w = model.get_layer('Loc59227').get_weights() 
w[0] = np.array([[[0.7408, 0.0388, 0.9834], [0.3635, 0.0911, 0.4647]], [[0.3841, 0.207, 0.314], [0.0725, 0.0854, 0.7919]]])
w[1] = np.array([[[0, 0, 0]], [[0, 0, 0]]])
model.get_layer('Loc59227').set_weights(w) 
in0Loc92403 = tf.constant([[[[0.9788, 0.8373], [0.2255, 0.9824]], [[0.0908, 0.5216], [0.8195, 0.5975]]]])
print (np.array2string(model.predict([in0Loc92403],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc59227.png')

LLoc92403 = locally_connected2D_layer([[[[0.9788, 0.8373], [0.2255, 0.9824]], [[0.0908, 0.5216], [0.8195, 0.5975]]]], 1, 2,[[[0.3063, 0.6232], [0.0046, 0.7118], [0.5004, 0.9994], [0.3143, 0.3449]], [[0.9364, 0.7041], [0.9622, 0.0311], [0.3437, 0.4592], [0.4527, 0.9893]]],[[[0, 0]], [[0, 0]]], 1, 1, Loc92403), 
LLoc59227 = locally_connected2D_layer(Loc92403, 1, 1,[[[0.7408, 0.0388, 0.9834], [0.3635, 0.0911, 0.4647]], [[0.3841, 0.207, 0.314], [0.0725, 0.0854, 0.7919]]],[[[0, 0, 0]], [[0, 0, 0]]], 1, 1, Loc59227), 
exec_layers([LLoc92403,LLoc59227],["Loc92403","Loc59227"],Loc59227,"Loc59227")

Actual (Unparsed): [[[[1.1807353, 0.1894031, 1.5358264]], [[0.5134618, 0.3252482, 1.1872394]]]]

Expected (Unparsed): [[[[1.180735251092,0.189403080188,1.535826397008]],[[0.513461778539,0.325248142506,1.187239331521]]]]

Actual:   [[[[1.1808, 0.1895, 1.5359]], [[0.5135, 0.3253, 1.1873]]]]

Expected: [[[[1.1808, 0.1895, 1.5359]], [[0.5135, 0.3253, 1.1873]]]]