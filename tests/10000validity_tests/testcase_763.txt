import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max70376 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0ELU92226 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con27492 = tf.keras.layers.Input(shape=([1, 14]))
in0Den80839 = tf.keras.layers.Input(shape=([5, 2]))

Max70376 = keras.layers.MaxPool2D(pool_size=(2, 2), strides=(8, 1), padding='valid', name = 'Max70376', )(in0Max70376)
ELU92226 = keras.layers.ELU(alpha=6.977103151415189, name = 'ELU92226', input_shape=(1, 1, 1))(in0ELU92226)
Mul63436 = keras.layers.Multiply(name = 'Mul63436', )([Max70376,ELU92226])
Res79685 = keras.layers.Reshape((1, 1), name = 'Res79685', )(Mul63436)
Con27492 = keras.layers.Concatenate(axis=2, name = 'Con27492', )([Res79685,in0Con27492])
Den80839 = keras.layers.Dense(1,name = 'Den80839', )(in0Den80839)
Res63782 = keras.layers.Reshape((5, 1, 1), name = 'Res63782', )(Den80839)
Res47868 = keras.layers.Reshape((5, 1, 1, 1), name = 'Res47868', )(Res63782)
Con6030 = keras.layers.Conv3DTranspose(3, (4, 1, 1),strides=(1, 5, 1), padding='same', name = 'Con6030', )(Res47868)
Res48386 = keras.layers.Reshape((5, 5, 3), name = 'Res48386', )(Con6030)
Res47862 = keras.layers.Reshape((5, 15), name = 'Res47862', )(Res48386)
Dot55170 = keras.layers.Dot(axes=(2, 2), name = 'Dot55170', )([Con27492,Res47862])
model = tf.keras.models.Model(inputs=[in0Max70376,in0ELU92226,in0Con27492,in0Den80839], outputs=Dot55170)
w = model.get_layer('Den80839').get_weights() 
w[0] = np.array([[0.5885], [0.4467]])
w[1] = np.array([0.253])
model.get_layer('Den80839').set_weights(w) 
w = model.get_layer('Con6030').get_weights() 
w[0] = np.array([[[[[0.7], [0.2388], [0.169]]]], [[[[0.3928], [0.5078], [0.6461]]]], [[[[0.4163], [0.3595], [0.8704]]]], [[[[0.5582], [0.1974], [0.4211]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con6030').set_weights(w) 
in0Max70376 = tf.constant([[[[1.8611], [1.9277]], [[1.7757], [1.9214]]]])
in0ELU92226 = tf.constant([[[[0.9825]]]])
in0Con27492 = tf.constant([[[0.5067, 0.6267, 0.2697, 0.0446, 0.1904, 0.3073, 0.0646, 0.1935, 0.8856, 0.4159, 0.8684, 0.4549, 0.0801, 0.2828]]])
in0Den80839 = tf.constant([[[0.951, 0.975], [0.0424, 0.6769], [0.7362, 0.8227], [0.9498, 0.4355], [0.5738, 0.9185]]])
print (np.array2string(model.predict([in0Max70376,in0ELU92226,in0Con27492,in0Den80839],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot55170.png')

LMax70376 = max_pool2D_layer([[[[1.8611], [1.9277]], [[1.7757], [1.9214]]]], 2, 2, 8, 1, false, Max70376), 
LELU92226 = elu_layer([[[[0.9825]]]], 6.977103151415189, ELU92226), 
LMul63436 = multiply_layer([Max70376,ELU92226], Mul63436), 
LRes79685 = reshape_layer(Mul63436, [1, 1], Res79685), 
LCon27492 = concatenate_layer([Res79685,[[[0.5067, 0.6267, 0.2697, 0.0446, 0.1904, 0.3073, 0.0646, 0.1935, 0.8856, 0.4159, 0.8684, 0.4549, 0.0801, 0.2828]]]], 2, Con27492), 
LDen80839 = dense_layer([[[0.951, 0.975], [0.0424, 0.6769], [0.7362, 0.8227], [0.9498, 0.4355], [0.5738, 0.9185]]], [[0.5885], [0.4467]],[0.253], Den80839), 
LRes63782 = reshape_layer(Den80839, [5, 1, 1], Res63782), 
LRes47868 = reshape_layer(Res63782, [5, 1, 1, 1], Res47868), 
LCon6030 = conv3D_transpose_layer(Res47868, 4, 1, 1,[[[[[0.7], [0.2388], [0.169]]]], [[[[0.3928], [0.5078], [0.6461]]]], [[[[0.4163], [0.3595], [0.8704]]]], [[[[0.5582], [0.1974], [0.4211]]]]],[0, 0, 0], 1, 5, 1, true, Con6030), 
LRes48386 = reshape_layer(Con6030, [5, 5, 3], Res48386), 
LRes47862 = reshape_layer(Res48386, [5, 15], Res47862), 
LDot55170 = dot_layer(Con27492,Res47862, 2, 2, Dot55170), 
exec_layers([LMax70376,LELU92226,LMul63436,LRes79685,LCon27492,LDen80839,LRes63782,LRes47868,LCon6030,LRes48386,LRes47862,LDot55170],["Max70376","ELU92226","Mul63436","Res79685","Con27492","Den80839","Res63782","Res47868","Con6030","Res48386","Res47862","Dot55170"],Dot55170,"Dot55170")

Actual (Unparsed): [[[2.6562282, 4.3445653, 5.6982066, 5.3918098, 4.4310063]]]

Expected (Unparsed): [[[2.6562281314713236,4.344565269307778,5.6982064596043775,5.391809671797553,4.431006246636323]]]

Actual:   [[[2.6563, 4.3446, 5.6983, 5.3919, 4.4311]]]

Expected: [[[2.6563, 4.3446, 5.6983, 5.3919, 4.4311]]]