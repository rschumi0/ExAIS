import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max52519 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max52519 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Mul62003 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul62003 = tf.keras.layers.Input(shape=([2, 1]))

Max52519 = keras.layers.Maximum(name = 'Max52519', )([in0Max52519,in1Max52519])
Dep29994 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='same', name = 'Dep29994', )(Max52519)
Res41110 = keras.layers.Reshape((2, 1), name = 'Res41110', )(Dep29994)
Mul62003 = keras.layers.Multiply(name = 'Mul62003', )([in0Mul62003,in1Mul62003])
Dot9608 = keras.layers.Dot(axes=(1, 1), name = 'Dot9608', )([Res41110,Mul62003])
model = tf.keras.models.Model(inputs=[in0Max52519,in1Max52519,in0Mul62003,in1Mul62003], outputs=Dot9608)
w = model.get_layer('Dep29994').get_weights() 
w[0] = np.array([[[[0.0485]], [[0.6176]]]])
w[1] = np.array([0])
model.get_layer('Dep29994').set_weights(w) 
in0Max52519 = tf.constant([[[[0.0264]], [[0.4762]]]])
in1Max52519 = tf.constant([[[[0.8848]], [[0.5274]]]])
in0Mul62003 = tf.constant([[[0.7307], [0.4288]]])
in1Mul62003 = tf.constant([[[0.6966], [0.681]]])
print (np.array2string(model.predict([in0Max52519,in1Max52519,in0Mul62003,in1Mul62003],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot9608.png')

LMax52519 = maximum_layer([[[[[0.0264]], [[0.4762]]]], [[[[0.8848]], [[0.5274]]]]], Max52519), 
LDep29994 = depthwise_conv2D_layer(Max52519, 1, 2,[[[[0.0485]], [[0.6176]]]],[0], 1, 1, true, Dep29994), 
LRes41110 = reshape_layer(Dep29994, [2, 1], Res41110), 
LMul62003 = multiply_layer([[[[0.7307], [0.4288]]], [[[0.6966], [0.681]]]], Mul62003), 
LDot9608 = dot_layer(Res41110,Mul62003, 1, 1, Dot9608), 
exec_layers([LMax52519,LDep29994,LRes41110,LMul62003,LDot9608],["Max52519","Dep29994","Res41110","Mul62003","Dot9608"],Dot9608,"Dot9608")

Actual (Unparsed): [[[0.0293122]]]

Expected (Unparsed): [[[0.029312222579856002]]]

Actual:   [[[0.0294]]]

Expected: [[[0.0294]]]