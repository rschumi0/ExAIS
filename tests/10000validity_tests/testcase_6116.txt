import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul3381 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul3381 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con4740 = tf.keras.layers.Input(shape=([2, 4]))
in0Sub58605 = tf.keras.layers.Input(shape=([2, 2, 3]))
in1Sub58605 = tf.keras.layers.Input(shape=([2, 2, 3]))

Mul3381 = keras.layers.Multiply(name = 'Mul3381', )([in0Mul3381,in1Mul3381])
Res92391 = keras.layers.Reshape((2, 2), name = 'Res92391', )(Mul3381)
Con4740 = keras.layers.Concatenate(axis=2, name = 'Con4740', )([Res92391,in0Con4740])
Sub58605 = keras.layers.Subtract(name = 'Sub58605', )([in0Sub58605,in1Sub58605])
Res40221 = keras.layers.Reshape((2, 6), name = 'Res40221', )(Sub58605)
Dot44347 = keras.layers.Dot(axes=(2, 2), name = 'Dot44347', )([Con4740,Res40221])
model = tf.keras.models.Model(inputs=[in0Mul3381,in1Mul3381,in0Con4740,in0Sub58605,in1Sub58605], outputs=Dot44347)
in0Mul3381 = tf.constant([[[[0.7114, 0.0723]], [[0.0008, 0.8453]]]])
in1Mul3381 = tf.constant([[[[0.0133, 0.7697]], [[0.2821, 0.3324]]]])
in0Con4740 = tf.constant([[[0.4136, 0.6813, 0.1823, 0.0147], [0.7883, 0.1746, 0.114, 0.9569]]])
in0Sub58605 = tf.constant([[[[0.2601, 0.6351, 0.4634], [0.2045, 0.7695, 0.1068]], [[0.5833, 0.9052, 0.6618], [0.6005, 0.881, 0.3103]]]])
in1Sub58605 = tf.constant([[[[0.9807, 0.2107, 0.0921], [0.426, 0.6389, 0.6413]], [[0.4254, 0.366, 0.5337], [0.9612, 0.1291, 0.7749]]]])
print (np.array2string(model.predict([in0Mul3381,in1Mul3381,in0Con4740,in0Sub58605,in1Sub58605],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot44347.png')

LMul3381 = multiply_layer([[[[[0.7114, 0.0723]], [[0.0008, 0.8453]]]], [[[[0.0133, 0.7697]], [[0.2821, 0.3324]]]]], Mul3381), 
LRes92391 = reshape_layer(Mul3381, [2, 2], Res92391), 
LCon4740 = concatenate_layer([Res92391,[[[0.4136, 0.6813, 0.1823, 0.0147], [0.7883, 0.1746, 0.114, 0.9569]]]], 2, Con4740), 
LSub58605 = subtract_layer([[[[0.2601, 0.6351, 0.4634], [0.2045, 0.7695, 0.1068]], [[0.5833, 0.9052, 0.6618], [0.6005, 0.881, 0.3103]]]], [[[[0.9807, 0.2107, 0.0921], [0.426, 0.6389, 0.6413]], [[0.4254, 0.366, 0.5337], [0.9612, 0.1291, 0.7749]]]], Sub58605), 
LRes40221 = reshape_layer(Sub58605, [2, 6], Res40221), 
LDot44347 = dot_layer(Con4740,Res40221, 2, 2, Dot44347), 
exec_layers([LMul3381,LRes92391,LCon4740,LSub58605,LRes40221,LDot44347],["Mul3381","Res92391","Con4740","Sub58605","Res40221","Dot44347"],Dot44347,"Dot44347")

Actual (Unparsed): [[[0.0354125, -0.0310209], [-0.1234685, -0.1693173]]]

Expected (Unparsed): [[[0.03541248379199997,-0.031020902249999975],[-0.12346844063999995,-0.1693173085039999]]]

Actual:   [[[0.0355, -0.031], [-0.1234, -0.1693]]]

Expected: [[[0.0355, -0.031], [-0.1234, -0.1693]]]