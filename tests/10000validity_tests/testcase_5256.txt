import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul61146 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul61146 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con27487 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot2547 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot2547 = tf.keras.layers.Input(shape=([3, 2]))
in0Con47565 = tf.keras.layers.Input(shape=([3, 3, 5, 3]))
in0Dep21442 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con68376 = tf.keras.layers.Input(shape=([2, 1, 3, 3]))
in0Mul30959 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul30959 = tf.keras.layers.Input(shape=([2, 1, 1]))

Mul61146 = keras.layers.Multiply(name = 'Mul61146', )([in0Mul61146,in1Mul61146])
Res90672 = keras.layers.Reshape((2, 2), name = 'Res90672', )(Mul61146)
Zer40643 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer40643', )(Res90672)
Con27487 = keras.layers.Concatenate(axis=2, name = 'Con27487', )([Zer40643,in0Con27487])
Dot2547 = keras.layers.Dot(axes=(2, 2), name = 'Dot2547', )([in0Dot2547,in1Dot2547])
Sub4915 = keras.layers.Subtract(name = 'Sub4915', )([Con27487,Dot2547])
Res25758 = keras.layers.Reshape((3, 3, 1), name = 'Res25758', )(Sub4915)
Res7701 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res7701', )(Res25758)
Zer46928 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (4, 0)), name = 'Zer46928', )(Res7701)
Con47565 = keras.layers.Concatenate(axis=4, name = 'Con47565', )([Zer46928,in0Con47565])
Dep21442 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep21442', )(in0Dep21442)
Res37912 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res37912', )(Dep21442)
Zer254 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer254', )(Res37912)
Con68376 = keras.layers.Concatenate(axis=4, name = 'Con68376', )([Zer254,in0Con68376])
Mul30959 = keras.layers.Multiply(name = 'Mul30959', )([in0Mul30959,in1Mul30959])
Res71693 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res71693', )(Mul30959)
Con93181 = keras.layers.Conv3D(4, (1, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con93181', )(Res71693)
Zer42540 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer42540', )(Con93181)
Sub60380 = keras.layers.Subtract(name = 'Sub60380', )([Con68376,Zer42540])
Zer10339 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (2, 0)), name = 'Zer10339', )(Sub60380)
Sub71128 = keras.layers.Subtract(name = 'Sub71128', )([Con47565,Zer10339])
model = tf.keras.models.Model(inputs=[in0Mul61146,in1Mul61146,in0Con27487,in0Dot2547,in1Dot2547,in0Con47565,in0Dep21442,in0Con68376,in0Mul30959,in1Mul30959], outputs=Sub71128)
w = model.get_layer('Dep21442').get_weights() 
w[0] = np.array([[[[0.7273], [0.7246]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep21442').set_weights(w) 
w = model.get_layer('Con93181').get_weights() 
w[0] = np.array([[[[[0.603, 0.8528, 0.8067, 0.6986]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con93181').set_weights(w) 
in0Mul61146 = tf.constant([[[[0.9034], [0.6632]], [[0.5907], [0.182]]]])
in1Mul61146 = tf.constant([[[[0.7314], [0.7593]], [[0.2444], [0.2126]]]])
in0Con27487 = tf.constant([[[0.937], [0.8127], [0.43]]])
in0Dot2547 = tf.constant([[[0.6105, 0.5281], [0.9754, 0.5857], [0.6053, 0.546]]])
in1Dot2547 = tf.constant([[[0.4433, 0.9485], [0.7731, 0.5278], [0.0008, 0.9838]]])
in0Con47565 = tf.constant([[[[[0.0522, 0.2126, 0.4365], [0.2357, 0.8101, 0.8224], [0.896, 0.7214, 0.0943], [0.5923, 0.4648, 0.3792], [0.5094, 0.8525, 0.654]], [[0.4166, 0.2959, 0.5256], [0.5157, 0.9527, 0.5526], [0.8186, 0.1752, 0.1985], [0.4342, 0.4223, 0.4944], [0.8922, 0.3901, 0.5238]], [[0.4459, 0.3272, 0.607], [0.387, 0.1373, 0.6508], [0.6939, 0.7305, 0.0686], [0.9752, 0.3052, 0.6437], [0.1268, 0.2465, 0.8359]]], [[[0.3215, 0.0258, 0.744], [0.5417, 0.4665, 0.3876], [0.5463, 0.4406, 0.8151], [0.4233, 0.2938, 0.1321], [0.8726, 0.2243, 0.1007]], [[0.233, 0.6116, 0.0002], [0.5253, 0.4783, 0.5807], [0.2119, 0.0962, 0.655], [0.6013, 0.4395, 0.0066], [0.4496, 0.9872, 0.9977]], [[0.2424, 0.9742, 0.0113], [0.7643, 0.5868, 0.2102], [0.1669, 0.4258, 0.659], [0.8549, 0.6221, 0.3557], [0.3858, 0.0916, 0.1498]]], [[[0.6445, 0.0799, 0.6174], [0.7314, 0.3763, 0.6046], [0.8553, 0.9786, 0.1056], [0.9413, 0.6553, 0.494], [0.6361, 0.8446, 0.9461]], [[0.3017, 0.6169, 0.1685], [0.7356, 0.5179, 0.1845], [0.879, 0.5817, 0.5039], [0.8577, 0.7295, 0.1522], [0.8443, 0.1636, 0.068]], [[0.7768, 0.6304, 0.0173], [0.2716, 0.958, 0.6906], [0.7096, 0.8573, 0.6503], [0.6069, 0.4667, 0.4059], [0.7461, 0.5861, 0.9353]]]]])
in0Dep21442 = tf.constant([[[[0.7057, 0.014]]]])
in0Con68376 = tf.constant([[[[[0.186, 0.5343, 0.4614], [0.6638, 0.4367, 0.1387], [0.7455, 0.4063, 0.7046]]], [[[0.6018, 0.2827, 0.603], [0.4279, 0.4833, 0.717], [0.6255, 0.5724, 0.2781]]]]])
in0Mul30959 = tf.constant([[[[0.4434]], [[0.224]]]])
in1Mul30959 = tf.constant([[[[0.3575]], [[0.5545]]]])
print (np.array2string(model.predict([in0Mul61146,in1Mul61146,in0Con27487,in0Dot2547,in1Dot2547,in0Con47565,in0Dep21442,in0Con68376,in0Mul30959,in1Mul30959],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub71128.png')

LMul61146 = multiply_layer([[[[[0.9034], [0.6632]], [[0.5907], [0.182]]]], [[[[0.7314], [0.7593]], [[0.2444], [0.2126]]]]], Mul61146), 
LRes90672 = reshape_layer(Mul61146, [2, 2], Res90672), 
LZer40643 = zero_padding1D_layer(Res90672, 1, 0, Zer40643), 
LCon27487 = concatenate_layer([Zer40643,[[[0.937], [0.8127], [0.43]]]], 2, Con27487), 
LDot2547 = dot_layer([[[0.6105, 0.5281], [0.9754, 0.5857], [0.6053, 0.546]]], [[[0.4433, 0.9485], [0.7731, 0.5278], [0.0008, 0.9838]]], 2, 2, Dot2547), 
LSub4915 = subtract_layer(Con27487,Dot2547, Sub4915), 
LRes25758 = reshape_layer(Sub4915, [3, 3, 1], Res25758), 
LRes7701 = reshape_layer(Res25758, [3, 3, 1, 1], Res7701), 
LZer46928 = zero_padding3D_layer(Res7701, 0, 0, 0, 0, 4, 0, Zer46928), 
LCon47565 = concatenate_layer([Zer46928,[[[[[0.0522, 0.2126, 0.4365], [0.2357, 0.8101, 0.8224], [0.896, 0.7214, 0.0943], [0.5923, 0.4648, 0.3792], [0.5094, 0.8525, 0.654]], [[0.4166, 0.2959, 0.5256], [0.5157, 0.9527, 0.5526], [0.8186, 0.1752, 0.1985], [0.4342, 0.4223, 0.4944], [0.8922, 0.3901, 0.5238]], [[0.4459, 0.3272, 0.607], [0.387, 0.1373, 0.6508], [0.6939, 0.7305, 0.0686], [0.9752, 0.3052, 0.6437], [0.1268, 0.2465, 0.8359]]], [[[0.3215, 0.0258, 0.744], [0.5417, 0.4665, 0.3876], [0.5463, 0.4406, 0.8151], [0.4233, 0.2938, 0.1321], [0.8726, 0.2243, 0.1007]], [[0.233, 0.6116, 0.0002], [0.5253, 0.4783, 0.5807], [0.2119, 0.0962, 0.655], [0.6013, 0.4395, 0.0066], [0.4496, 0.9872, 0.9977]], [[0.2424, 0.9742, 0.0113], [0.7643, 0.5868, 0.2102], [0.1669, 0.4258, 0.659], [0.8549, 0.6221, 0.3557], [0.3858, 0.0916, 0.1498]]], [[[0.6445, 0.0799, 0.6174], [0.7314, 0.3763, 0.6046], [0.8553, 0.9786, 0.1056], [0.9413, 0.6553, 0.494], [0.6361, 0.8446, 0.9461]], [[0.3017, 0.6169, 0.1685], [0.7356, 0.5179, 0.1845], [0.879, 0.5817, 0.5039], [0.8577, 0.7295, 0.1522], [0.8443, 0.1636, 0.068]], [[0.7768, 0.6304, 0.0173], [0.2716, 0.958, 0.6906], [0.7096, 0.8573, 0.6503], [0.6069, 0.4667, 0.4059], [0.7461, 0.5861, 0.9353]]]]]], 4, Con47565), 
LDep21442 = depthwise_conv2D_layer([[[[0.7057, 0.014]]]], 1, 1,[[[[0.7273], [0.7246]]]],[0, 0], 1, 1, true, Dep21442), 
LRes37912 = reshape_layer(Dep21442, [1, 1, 2, 1], Res37912), 
LZer254 = zero_padding3D_layer(Res37912, 1, 0, 0, 0, 1, 0, Zer254), 
LCon68376 = concatenate_layer([Zer254,[[[[[0.186, 0.5343, 0.4614], [0.6638, 0.4367, 0.1387], [0.7455, 0.4063, 0.7046]]], [[[0.6018, 0.2827, 0.603], [0.4279, 0.4833, 0.717], [0.6255, 0.5724, 0.2781]]]]]], 4, Con68376), 
LMul30959 = multiply_layer([[[[[0.4434]], [[0.224]]]], [[[[0.3575]], [[0.5545]]]]], Mul30959), 
LRes71693 = reshape_layer(Mul30959, [2, 1, 1, 1], Res71693), 
LCon93181 = conv3D_layer(Res71693, 1, 1, 1,[[[[[0.603, 0.8528, 0.8067, 0.6986]]]]],[0, 0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con93181), 
LZer42540 = zero_padding3D_layer(Con93181, 0, 0, 0, 0, 2, 0, Zer42540), 
LSub60380 = subtract_layer(Con68376,Zer42540, Sub60380), 
LZer10339 = zero_padding3D_layer(Sub60380, 1, 0, 2, 0, 2, 0, Zer10339), 
LSub71128 = subtract_layer(Con47565,Zer10339, Sub71128), 
exec_layers([LMul61146,LRes90672,LZer40643,LCon27487,LDot2547,LSub4915,LRes25758,LRes7701,LZer46928,LCon47565,LDep21442,LRes37912,LZer254,LCon68376,LMul30959,LRes71693,LCon93181,LZer42540,LSub60380,LZer10339,LSub71128],["Mul61146","Res90672","Zer40643","Con27487","Dot2547","Sub4915","Res25758","Res7701","Zer46928","Con47565","Dep21442","Res37912","Zer254","Con68376","Mul30959","Res71693","Con93181","Zer42540","Sub60380","Zer10339","Sub71128"],Sub71128,"Sub71128")

Actual (Unparsed): [[[[[0.0000000, 0.0522000, 0.2126000, 0.4365000], [0.0000000, 0.2357000, 0.8101000, 0.8224000], [0.0000000, 0.8960000, 0.7214000, 0.0943000], [0.0000000, 0.5923000, 0.4648000, 0.3792000], [-0.7715375, 0.5094000, 0.8525000, 0.6540000]], [[0.0000000, 0.4166000, 0.2959000, 0.5256000], [0.0000000, 0.5157000, 0.9527000, 0.5526000], [0.0000000, 0.8186000, 0.1752000, 0.1985000], [0.0000000, 0.4342000, 0.4223000, 0.4944000], [-0.7507087, 0.8922000, 0.3901000, 0.5238000]], [[0.0000000, 0.4459000, 0.3272000, 0.6070000], [0.0000000, 0.3870000, 0.1373000, 0.6508000], [0.0000000, 0.6939000, 0.7305000, 0.0686000], [0.0000000, 0.9752000, 0.3052000, 0.6437000], [0.4169668, 0.1268000, 0.2465000, 0.8359000]]], [[[0.0000000, 0.3215000, 0.0258000, 0.7440000], [0.0000000, 0.5417000, 0.4665000, 0.3876000], [0.0000000, 0.5463000, 0.4406000, 0.8151000], [0.0000000, 0.4233000, 0.2938000, 0.1321000], [-0.3271845, 0.8726000, 0.2243000, 0.1007000]], [[0.0000000, 0.2330000, 0.6116000, 0.0002000], [0.0000000, 0.5253000, 0.4783000, 0.5807000], [0.0000000, 0.2119000, 0.0962000, 0.6550000], [0.0000000, 0.6013000, 0.4395000, 0.0066000], [-0.5596464, 0.4496000, 0.9872000, 0.9977000]], [[0.0000000, 0.2424000, 0.9742000, 0.0113000], [0.0000000, 0.7643000, 0.5868000, 0.2102000], [0.0000000, -0.0191000, -0.1085000, 0.1976000], [0.0000000, 0.1911000, 0.1854000, 0.2170000], [0.3312929, -0.2245180, -0.1868256, -0.4440611]]], [[[0.0000000, 0.6445000, 0.0799000, 0.6174000], [0.0000000, 0.7314000, 0.3763000, 0.6046000], [0.0000000, 0.8553000, 0.9786000, 0.1056000], [0.0000000, 0.9413000, 0.6553000, 0.4940000], [-0.6418434, 0.6361000, 0.8446000, 0.9461000]], [[0.0000000, 0.3017000, 0.6169000, 0.1685000], [0.0000000, 0.7356000, 0.5179000, 0.1845000], [0.0000000, 0.8790000, 0.5817000, 0.5039000], [0.0000000, 0.8577000, 0.7295000, 0.1522000], [-0.7174431, 0.8443000, 0.1636000, 0.0680000]], [[0.0000000, 0.7768000, 0.6304000, 0.0173000], [0.0000000, 0.2716000, 0.9580000, 0.6906000], [0.0000000, 0.1077999, 0.5746000, 0.0473000], [-0.5132556, 0.1790000, -0.0166000, -0.3111000], [-0.0428860, 0.2265246, 0.1138986, 0.7439717]]]]]

Expected (Unparsed): [[[[[0,0.0522,0.2126,0.4365],[0,0.2357,0.8101,0.8224],[0,0.896,0.7214,0.0943],[0,0.5923,0.4648,0.3792],[-0.7715375,0.5094,0.8525,0.654]],[[0,0.4166,0.2959,0.5256],[0,0.5157,0.9527,0.5526],[0,0.8186,0.1752,0.1985],[0,0.4342,0.4223,0.4944],[-0.75070873,0.8922,0.3901,0.5238]],[[0,0.4459,0.3272,0.607],[0,0.387,0.1373,0.6508],[0,0.6939,0.7305,0.0686],[0,0.9752,0.3052,0.6437],[0.41696681999999996,0.1268,0.2465,0.8359]]],[[[0,0.3215,0.0258,0.744],[0,0.5417,0.4665,0.3876],[0,0.5463,0.4406,0.8151],[0,0.4233,0.2938,0.1321],[-0.32718451000000004,0.8726,0.2243,0.1007]],[[0,0.233,0.6116,0.0002],[0,0.5253,0.4783,0.5807],[0,0.2119,0.0962,0.655],[0,0.6013,0.4395,0.0066],[-0.55964644,0.4496,0.9872,0.9977]],[[0,0.2424,0.9742,0.0113],[0,0.7643,0.5868,0.2102],[0,-0.019100000000000006,-0.10849999999999999,0.19760000000000005],[0,0.19110000000000005,0.1854,0.21700000000000003],[0.3312928665,-0.22451798160000008,-0.18682554615000002,-0.44406107170000003]]],[[[0,0.6445,0.0799,0.6174],[0,0.7314,0.3763,0.6046],[0,0.8553,0.9786,0.1056],[0,0.9413,0.6553,0.494],[-0.64184341,0.6361,0.8446,0.9461]],[[0,0.3017,0.6169,0.1685],[0,0.7356,0.5179,0.1845],[0,0.879,0.5817,0.5039],[0,0.8577,0.7295,0.1522],[-0.7174430300000001,0.8443,0.1636,0.068]],[[0,0.7768,0.6304,0.0173],[0,0.2716,0.958,0.6906],[0,0.1078,0.5746,0.04730000000000001],[-0.51325561,0.179,-0.016600000000000004,-0.3111],[-0.04288601600000008,0.22652458240000006,0.11389859359999993,0.7439717088]]]]]

Actual:   [[[[[0, 0.0522, 0.2126, 0.4365], [0, 0.2357, 0.8101, 0.8224], [0, 0.896, 0.7214, 0.0943], [0, 0.5923, 0.4648, 0.3792], [-0.7715, 0.5094, 0.8525, 0.654]], [[0, 0.4166, 0.2959, 0.5256], [0, 0.5157, 0.9527, 0.5526], [0, 0.8186, 0.1752, 0.1985], [0, 0.4342, 0.4223, 0.4944], [-0.7507, 0.8922, 0.3901, 0.5238]], [[0, 0.4459, 0.3272, 0.607], [0, 0.387, 0.1373, 0.6508], [0, 0.6939, 0.7305, 0.0686], [0, 0.9752, 0.3052, 0.6437], [0.417, 0.1268, 0.2465, 0.8359]]], [[[0, 0.3215, 0.0258, 0.744], [0, 0.5417, 0.4665, 0.3876], [0, 0.5463, 0.4406, 0.8151], [0, 0.4233, 0.2938, 0.1321], [-0.3271, 0.8726, 0.2243, 0.1007]], [[0, 0.233, 0.6116, 0.0002], [0, 0.5253, 0.4783, 0.5807], [0, 0.2119, 0.0962, 0.655], [0, 0.6013, 0.4395, 0.0066], [-0.5596, 0.4496, 0.9872, 0.9977]], [[0, 0.2424, 0.9742, 0.0113], [0, 0.7643, 0.5868, 0.2102], [0, -0.0191, -0.1085, 0.1976], [0, 0.1911, 0.1854, 0.217], [0.3313, -0.2245, -0.1868, -0.444]]], [[[0, 0.6445, 0.0799, 0.6174], [0, 0.7314, 0.3763, 0.6046], [0, 0.8553, 0.9786, 0.1056], [0, 0.9413, 0.6553, 0.494], [-0.6418, 0.6361, 0.8446, 0.9461]], [[0, 0.3017, 0.6169, 0.1685], [0, 0.7356, 0.5179, 0.1845], [0, 0.879, 0.5817, 0.5039], [0, 0.8577, 0.7295, 0.1522], [-0.7174, 0.8443, 0.1636, 0.068]], [[0, 0.7768, 0.6304, 0.0173], [0, 0.2716, 0.958, 0.6906], [0, 0.1078, 0.5746, 0.0473], [-0.5132, 0.179, -0.0166, -0.3111], [-0.0428, 0.2266, 0.1139, 0.744]]]]]

Expected: [[[[[0, 0.0522, 0.2126, 0.4365], [0, 0.2357, 0.8101, 0.8224], [0, 0.896, 0.7214, 0.0943], [0, 0.5923, 0.4648, 0.3792], [-0.7715, 0.5094, 0.8525, 0.654]], [[0, 0.4166, 0.2959, 0.5256], [0, 0.5157, 0.9527, 0.5526], [0, 0.8186, 0.1752, 0.1985], [0, 0.4342, 0.4223, 0.4944], [-0.7507, 0.8922, 0.3901, 0.5238]], [[0, 0.4459, 0.3272, 0.607], [0, 0.387, 0.1373, 0.6508], [0, 0.6939, 0.7305, 0.0686], [0, 0.9752, 0.3052, 0.6437], [0.417, 0.1268, 0.2465, 0.8359]]], [[[0, 0.3215, 0.0258, 0.744], [0, 0.5417, 0.4665, 0.3876], [0, 0.5463, 0.4406, 0.8151], [0, 0.4233, 0.2938, 0.1321], [-0.3271, 0.8726, 0.2243, 0.1007]], [[0, 0.233, 0.6116, 0.0002], [0, 0.5253, 0.4783, 0.5807], [0, 0.2119, 0.0962, 0.655], [0, 0.6013, 0.4395, 0.0066], [-0.5596, 0.4496, 0.9872, 0.9977]], [[0, 0.2424, 0.9742, 0.0113], [0, 0.7643, 0.5868, 0.2102], [0, -0.0191, -0.1084, 0.1977], [0, 0.1912, 0.1854, 0.2171], [0.3313, -0.2245, -0.1868, -0.444]]], [[[0, 0.6445, 0.0799, 0.6174], [0, 0.7314, 0.3763, 0.6046], [0, 0.8553, 0.9786, 0.1056], [0, 0.9413, 0.6553, 0.494], [-0.6418, 0.6361, 0.8446, 0.9461]], [[0, 0.3017, 0.6169, 0.1685], [0, 0.7356, 0.5179, 0.1845], [0, 0.879, 0.5817, 0.5039], [0, 0.8577, 0.7295, 0.1522], [-0.7174, 0.8443, 0.1636, 0.068]], [[0, 0.7768, 0.6304, 0.0173], [0, 0.2716, 0.958, 0.6906], [0, 0.1078, 0.5746, 0.0474], [-0.5132, 0.179, -0.0166, -0.3111], [-0.0428, 0.2266, 0.1139, 0.744]]]]]