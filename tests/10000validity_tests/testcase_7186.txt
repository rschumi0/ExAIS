import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo62900 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con49415 = tf.keras.layers.Input(shape=([4, 2, 1]))
in0Ave84644 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Ave84644 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Mul59881 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Mul59881 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Dot3286 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot3286 = tf.keras.layers.Input(shape=([2, 2]))
in0Con26405 = tf.keras.layers.Input(shape=([2, 2]))
in0Max51525 = tf.keras.layers.Input(shape=([2, 1]))
in1Max51525 = tf.keras.layers.Input(shape=([2, 1]))
in0Con56224 = tf.keras.layers.Input(shape=([4, 3]))

Glo62900 = keras.layers.GlobalMaxPool2D(name = 'Glo62900', )(in0Glo62900)
Res55986 = keras.layers.Reshape((2, 1), name = 'Res55986', )(Glo62900)
Res53030 = keras.layers.Reshape((2, 1, 1), name = 'Res53030', )(Res55986)
Zer88237 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer88237', )(Res53030)
Con49415 = keras.layers.Concatenate(axis=3, name = 'Con49415', )([Zer88237,in0Con49415])
Ave84644 = keras.layers.Average(name = 'Ave84644', )([in0Ave84644,in1Ave84644])
Res95413 = keras.layers.Reshape((2, 2, 2), name = 'Res95413', )(Ave84644)
Up_70233 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_70233', )(Res95413)
Sub75203 = keras.layers.Subtract(name = 'Sub75203', )([Con49415,Up_70233])
Res72688 = keras.layers.Reshape((4, 4), name = 'Res72688', )(Sub75203)
Mul59881 = keras.layers.Multiply(name = 'Mul59881', )([in0Mul59881,in1Mul59881])
Res25021 = keras.layers.Reshape((2, 1, 4), name = 'Res25021', )(Mul59881)
Res79473 = keras.layers.Reshape((2, 4), name = 'Res79473', )(Res25021)
Up_72036 = keras.layers.UpSampling1D(size=(1), name = 'Up_72036', )(Res79473)
Dot3286 = keras.layers.Dot(axes=(2, 1), name = 'Dot3286', )([in0Dot3286,in1Dot3286])
Con26405 = keras.layers.Concatenate(axis=2, name = 'Con26405', )([Dot3286,in0Con26405])
Sub73585 = keras.layers.Subtract(name = 'Sub73585', )([Up_72036,Con26405])
Zer31896 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer31896', )(Sub73585)
Mul96767 = keras.layers.Multiply(name = 'Mul96767', )([Res72688,Zer31896])
Max51525 = keras.layers.Maximum(name = 'Max51525', )([in0Max51525,in1Max51525])
Zer2434 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer2434', )(Max51525)
Con56224 = keras.layers.Concatenate(axis=2, name = 'Con56224', )([Zer2434,in0Con56224])
Min48404 = keras.layers.Minimum(name = 'Min48404', )([Mul96767,Con56224])
model = tf.keras.models.Model(inputs=[in0Glo62900,in0Con49415,in0Ave84644,in1Ave84644,in0Mul59881,in1Mul59881,in0Dot3286,in1Dot3286,in0Con26405,in0Max51525,in1Max51525,in0Con56224], outputs=Min48404)
in0Glo62900 = tf.constant([[[[1.5479, 1.6014]]]])
in0Con49415 = tf.constant([[[[0.1497], [0.6894]], [[0.5299], [0.639]], [[0.3985], [0.7759]], [[0.8073], [0.0837]]]])
in0Ave84644 = tf.constant([[[[[0.171], [0.3071]], [[0.6225], [0.2647]]], [[[0.4166], [0.2511]], [[0.4813], [0.6705]]]]])
in1Ave84644 = tf.constant([[[[[0.0943], [0.0101]], [[0.0744], [0.8477]]], [[[0.0356], [0.5395]], [[0.0883], [0.0158]]]]])
in0Mul59881 = tf.constant([[[[[0.7777, 0.0663], [0.7712, 0.8089]]], [[[0.0605, 0.2058], [0.3625, 0.1446]]]]])
in1Mul59881 = tf.constant([[[[[0.3618, 0.6362], [0.2351, 0.631]]], [[[0.0459, 0.1267], [0.5763, 0.0627]]]]])
in0Dot3286 = tf.constant([[[0.6157, 0.7047], [0.8047, 0.1252]]])
in1Dot3286 = tf.constant([[[0.6374, 0.1421], [0.9486, 0.9024]]])
in0Con26405 = tf.constant([[[0.391, 0.5376], [0.4852, 0.8274]]])
in0Max51525 = tf.constant([[[0.1338], [0.7427]]])
in1Max51525 = tf.constant([[[0.896], [0.1584]]])
in0Con56224 = tf.constant([[[0.2943, 0.3175, 0.9864], [0.2894, 0.2815, 0.6509], [0.5702, 0.0954, 0.8561], [0.6454, 0.9005, 0.3349]]])
print (np.array2string(model.predict([in0Glo62900,in0Con49415,in0Ave84644,in1Ave84644,in0Mul59881,in1Mul59881,in0Dot3286,in1Dot3286,in0Con26405,in0Max51525,in1Max51525,in0Con56224],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min48404.png')

LGlo62900 = global_max_pool2D_layer([[[[1.5479, 1.6014]]]], Glo62900), 
LRes55986 = reshape_layer(Glo62900, [2, 1], Res55986), 
LRes53030 = reshape_layer(Res55986, [2, 1, 1], Res53030), 
LZer88237 = zero_padding2D_layer(Res53030, 2, 0, 1, 0, Zer88237), 
LCon49415 = concatenate_layer([Zer88237,[[[[0.1497], [0.6894]], [[0.5299], [0.639]], [[0.3985], [0.7759]], [[0.8073], [0.0837]]]]], 3, Con49415), 
LAve84644 = average_layer([[[[[[0.171], [0.3071]], [[0.6225], [0.2647]]], [[[0.4166], [0.2511]], [[0.4813], [0.6705]]]]], [[[[[0.0943], [0.0101]], [[0.0744], [0.8477]]], [[[0.0356], [0.5395]], [[0.0883], [0.0158]]]]]], Ave84644), 
LRes95413 = reshape_layer(Ave84644, [2, 2, 2], Res95413), 
LUp_70233 = up_sampling2D_layer(Res95413, 2, 1, Up_70233), 
LSub75203 = subtract_layer(Con49415,Up_70233, Sub75203), 
LRes72688 = reshape_layer(Sub75203, [4, 4], Res72688), 
LMul59881 = multiply_layer([[[[[[0.7777, 0.0663], [0.7712, 0.8089]]], [[[0.0605, 0.2058], [0.3625, 0.1446]]]]], [[[[[0.3618, 0.6362], [0.2351, 0.631]]], [[[0.0459, 0.1267], [0.5763, 0.0627]]]]]], Mul59881), 
LRes25021 = reshape_layer(Mul59881, [2, 1, 4], Res25021), 
LRes79473 = reshape_layer(Res25021, [2, 4], Res79473), 
LUp_72036 = up_sampling1D_layer(Res79473, 1, Up_72036), 
LDot3286 = dot_layer([[[0.6157, 0.7047], [0.8047, 0.1252]]], [[[0.6374, 0.1421], [0.9486, 0.9024]]], 2, 1, Dot3286), 
LCon26405 = concatenate_layer([Dot3286,[[[0.391, 0.5376], [0.4852, 0.8274]]]], 2, Con26405), 
LSub73585 = subtract_layer(Up_72036,Con26405, Sub73585), 
LZer31896 = zero_padding1D_layer(Sub73585, 2, 0, Zer31896), 
LMul96767 = multiply_layer([Res72688,Zer31896], Mul96767), 
LMax51525 = maximum_layer([[[[0.1338], [0.7427]]], [[[0.896], [0.1584]]]], Max51525), 
LZer2434 = zero_padding1D_layer(Max51525, 2, 0, Zer2434), 
LCon56224 = concatenate_layer([Zer2434,[[[0.2943, 0.3175, 0.9864], [0.2894, 0.2815, 0.6509], [0.5702, 0.0954, 0.8561], [0.6454, 0.9005, 0.3349]]]], 2, Con56224), 
LMin48404 = minimum_layer([Mul96767,Con56224], Min48404), 
exec_layers([LGlo62900,LRes55986,LRes53030,LZer88237,LCon49415,LAve84644,LRes95413,LUp_70233,LSub75203,LRes72688,LMul59881,LRes25021,LRes79473,LUp_72036,LDot3286,LCon26405,LSub73585,LZer31896,LMul96767,LMax51525,LZer2434,LCon56224,LMin48404],["Glo62900","Res55986","Res53030","Zer88237","Con49415","Ave84644","Res95413","Up_70233","Sub75203","Res72688","Mul59881","Res25021","Res79473","Up_72036","Dot3286","Con26405","Sub73585","Zer31896","Mul96767","Max51525","Zer2434","Con56224","Min48404"],Min48404,"Min48404")

Actual (Unparsed): [[[0.0000000, -0.0000000, -0.0000000, 0.0000000], [0.0000000, 0.0000000, -0.0000000, 0.0000000], [0.1762571, -0.0021799, -0.2648605, -0.0117639], [0.1421951, -0.0829164, -0.3637650, 0.2123166]]]

Expected (Unparsed): [[[-0.0,-0.0,-0.0,0.0],[-0.0,0.0,-0.0,0.0],[0.17625710061400005,-0.002179943008000025,-0.26486055052800006,-0.01176391927500002],[0.14219509265500002,-0.08291643788000001,-0.36376505975,0.212316647331]]]

Actual:   [[[0, -0, -0, 0], [0, 0, -0, 0], [0.1763, -0.0021, -0.2648, -0.0117], [0.1422, -0.0829, -0.3637, 0.2124]]]

Expected: [[[-0, -0, -0, 0], [-0, 0, -0, 0], [0.1763, -0.0021, -0.2648, -0.0117], [0.1422, -0.0829, -0.3637, 0.2124]]]