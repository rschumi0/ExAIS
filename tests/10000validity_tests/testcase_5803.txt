import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub10394 = tf.keras.layers.Input(shape=([2]))
in1Sub10394 = tf.keras.layers.Input(shape=([2]))
in0Add10161 = tf.keras.layers.Input(shape=([2, 1]))
in1Add10161 = tf.keras.layers.Input(shape=([2, 1]))

Sub10394 = keras.layers.Subtract(name = 'Sub10394', )([in0Sub10394,in1Sub10394])
Res61521 = keras.layers.Reshape((2, 1), name = 'Res61521', )(Sub10394)
Add10161 = keras.layers.Add(name = 'Add10161', )([in0Add10161,in1Add10161])
Add256 = keras.layers.Add(name = 'Add256', )([Res61521,Add10161])
model = tf.keras.models.Model(inputs=[in0Sub10394,in1Sub10394,in0Add10161,in1Add10161], outputs=Add256)
in0Sub10394 = tf.constant([[0.5508, 0.4981]])
in1Sub10394 = tf.constant([[0.9068, 0.9205]])
in0Add10161 = tf.constant([[[0.8265], [0.2262]]])
in1Add10161 = tf.constant([[[0.5954], [0.5053]]])
print (np.array2string(model.predict([in0Sub10394,in1Sub10394,in0Add10161,in1Add10161],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add256.png')

LSub10394 = subtract_layer([[0.5508, 0.4981]], [[0.9068, 0.9205]], Sub10394), 
LRes61521 = reshape_layer(Sub10394, [2, 1], Res61521), 
LAdd10161 = add_layer([[[[0.8265], [0.2262]]], [[[0.5954], [0.5053]]]], Add10161), 
LAdd256 = add_layer([Res61521,Add10161], Add256), 
exec_layers([LSub10394,LRes61521,LAdd10161,LAdd256],["Sub10394","Res61521","Add10161","Add256"],Add256,"Add256")

Actual (Unparsed): [[[1.0659000], [0.3091000]]]

Expected (Unparsed): [[[1.0658999999999998],[0.30910000000000004]]]

Actual:   [[[1.0659], [0.3091]]]

Expected: [[[1.0659], [0.3092]]]