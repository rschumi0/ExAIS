import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot61217 = tf.keras.layers.Input(shape=([2]))
in1Dot61217 = tf.keras.layers.Input(shape=([2]))
in0Max15560 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Max15560 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Ave81665 = tf.keras.layers.Input(shape=([1, 1]))

Dot61217 = keras.layers.Dot(axes=(1, 1), name = 'Dot61217', )([in0Dot61217,in1Dot61217])
Res69039 = keras.layers.Reshape((1, 1), name = 'Res69039', )(Dot61217)
Zer63441 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer63441', )(Res69039)
Max15560 = keras.layers.Maximum(name = 'Max15560', )([in0Max15560,in1Max15560])
Res64486 = keras.layers.Reshape((2, 1, 1), name = 'Res64486', )(Max15560)
Res8771 = keras.layers.Reshape((2, 1), name = 'Res8771', )(Res64486)
Ave81665 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave81665', )(in0Ave81665)
Zer64753 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer64753', )(Ave81665)
Sub91166 = keras.layers.Subtract(name = 'Sub91166', )([Res8771,Zer64753])
Sub94150 = keras.layers.Subtract(name = 'Sub94150', )([Zer63441,Sub91166])
model = tf.keras.models.Model(inputs=[in0Dot61217,in1Dot61217,in0Max15560,in1Max15560,in0Ave81665], outputs=Sub94150)
in0Dot61217 = tf.constant([[0.9201, 0.0185]])
in1Dot61217 = tf.constant([[0.8551, 0.902]])
in0Max15560 = tf.constant([[[[[0.0027]]], [[[0.764]]]]])
in1Max15560 = tf.constant([[[[[0.0358]]], [[[0.1378]]]]])
in0Ave81665 = tf.constant([[[1.9914]]])
print (np.array2string(model.predict([in0Dot61217,in1Dot61217,in0Max15560,in1Max15560,in0Ave81665],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub94150.png')

LDot61217 = dot_layer([[0.9201, 0.0185]], [[0.8551, 0.902]], 1, 1, Dot61217), 
LRes69039 = reshape_layer(Dot61217, [1, 1], Res69039), 
LZer63441 = zero_padding1D_layer(Res69039, 1, 0, Zer63441), 
LMax15560 = maximum_layer([[[[[[0.0027]]], [[[0.764]]]]], [[[[[0.0358]]], [[[0.1378]]]]]], Max15560), 
LRes64486 = reshape_layer(Max15560, [2, 1, 1], Res64486), 
LRes8771 = reshape_layer(Res64486, [2, 1], Res8771), 
LAve81665 = average_pooling1D_layer([[[1.9914]]], 1, Ave81665), 
LZer64753 = zero_padding1D_layer(Ave81665, 1, 0, Zer64753), 
LSub91166 = subtract_layer(Res8771,Zer64753, Sub91166), 
LSub94150 = subtract_layer(Zer63441,Sub91166, Sub94150), 
exec_layers([LDot61217,LRes69039,LZer63441,LMax15560,LRes64486,LRes8771,LAve81665,LZer64753,LSub91166,LSub94150],["Dot61217","Res69039","Zer63441","Max15560","Res64486","Res8771","Ave81665","Zer64753","Sub91166","Sub94150"],Sub94150,"Sub94150")

Actual (Unparsed): [[[-0.0358000], [2.0308645]]]

Expected (Unparsed): [[[-0.0358],[2.03086451]]]

Actual:   [[[-0.0358], [2.0309]]]

Expected: [[[-0.0358], [2.0309]]]