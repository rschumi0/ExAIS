import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave9409 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con81836 = tf.keras.layers.Input(shape=([1]))
in0Add14193 = tf.keras.layers.Input(shape=([1, 1]))
in1Add14193 = tf.keras.layers.Input(shape=([1, 1]))

Ave9409 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Ave9409', )(in0Ave9409)
Res55832 = keras.layers.Reshape((1, 1), name = 'Res55832', )(Ave9409)
Fla88196 = keras.layers.Flatten(name = 'Fla88196', )(Res55832)
Con81836 = keras.layers.Concatenate(axis=1, name = 'Con81836', )([Fla88196,in0Con81836])
Add14193 = keras.layers.Add(name = 'Add14193', )([in0Add14193,in1Add14193])
Sim26180 = keras.layers.SimpleRNN(2,name = 'Sim26180', )(Add14193)
Max85647 = keras.layers.Maximum(name = 'Max85647', )([Con81836,Sim26180])
model = tf.keras.models.Model(inputs=[in0Ave9409,in0Con81836,in0Add14193,in1Add14193], outputs=Max85647)
w = model.get_layer('Sim26180').get_weights() 
w[0] = np.array([[1, 6]])
w[1] = np.array([[6, 5], [6, 5]])
w[2] = np.array([4, 1])
model.get_layer('Sim26180').set_weights(w) 
in0Ave9409 = tf.constant([[[[1.8334]]]])
in0Con81836 = tf.constant([[0.5169]])
in0Add14193 = tf.constant([[[0.5724]]])
in1Add14193 = tf.constant([[[0.5081]]])
print (np.array2string(model.predict([in0Ave9409,in0Con81836,in0Add14193,in1Add14193],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max85647.png')

LAve9409 = average_pooling2D_layer([[[[1.8334]]]], 1, 1, 1, 1, true, Ave9409), 
LRes55832 = reshape_layer(Ave9409, [1, 1], Res55832), 
LFla88196 = flatten_layer(Res55832, Fla88196), 
LCon81836 = concatenate_layer([Fla88196,[[0.5169]]], 1, Con81836), 
LAdd14193 = add_layer([[[[0.5724]]], [[[0.5081]]]], Add14193), 
LSim26180 = simple_rnn_layer(Add14193,[[1, 6]],[[6, 5], [6, 5]],[4, 1], Sim26180), 
LMax85647 = maximum_layer([Con81836,Sim26180], Max85647), 
exec_layers([LAve9409,LRes55832,LFla88196,LCon81836,LAdd14193,LSim26180,LMax85647],["Ave9409","Res55832","Fla88196","Con81836","Add14193","Sim26180","Max85647"],Max85647,"Max85647")

Actual (Unparsed): [[1.8334000, 0.9999994]]

Expected (Unparsed): [[1.8334,0.9999993670365365]]

Actual:   [[1.8334, 1]]

Expected: [[1.8334, 1]]