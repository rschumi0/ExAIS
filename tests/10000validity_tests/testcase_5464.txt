import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave63694 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave63694 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con4315 = tf.keras.layers.Input(shape=([1]))
in0Sub86991 = tf.keras.layers.Input(shape=([3]))
in1Sub86991 = tf.keras.layers.Input(shape=([3]))

Ave63694 = keras.layers.Average(name = 'Ave63694', )([in0Ave63694,in1Ave63694])
Cro84795 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro84795', )(Ave63694)
Res21281 = keras.layers.Reshape((1, 2), name = 'Res21281', )(Cro84795)
Per59877 = keras.layers.Permute((1,2), name = 'Per59877',)(Res21281)
Fla19038 = keras.layers.Flatten(name = 'Fla19038', )(Per59877)
Con4315 = keras.layers.Concatenate(axis=1, name = 'Con4315', )([Fla19038,in0Con4315])
Sub86991 = keras.layers.Subtract(name = 'Sub86991', )([in0Sub86991,in1Sub86991])
Mul20907 = keras.layers.Multiply(name = 'Mul20907', )([Con4315,Sub86991])
model = tf.keras.models.Model(inputs=[in0Ave63694,in1Ave63694,in0Con4315,in0Sub86991,in1Sub86991], outputs=Mul20907)
in0Ave63694 = tf.constant([[[[0.4411, 0.3013]]]])
in1Ave63694 = tf.constant([[[[0.7623, 0.4537]]]])
in0Con4315 = tf.constant([[0.3062]])
in0Sub86991 = tf.constant([[0.0879, 0.5131, 0.4492]])
in1Sub86991 = tf.constant([[0.6082, 0.9919, 0.3504]])
print (np.array2string(model.predict([in0Ave63694,in1Ave63694,in0Con4315,in0Sub86991,in1Sub86991],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul20907.png')

LAve63694 = average_layer([[[[[0.4411, 0.3013]]]], [[[[0.7623, 0.4537]]]]], Ave63694), 
LCro84795 = cropping2D_layer(Ave63694, 0, 0, 0, 0, Cro84795), 
LRes21281 = reshape_layer(Cro84795, [1, 2], Res21281), 
LPer59877 = permute_layer(Res21281, 1,2, Per59877), 
LFla19038 = flatten_layer(Per59877, Fla19038), 
LCon4315 = concatenate_layer([Fla19038,[[0.3062]]], 1, Con4315), 
LSub86991 = subtract_layer([[0.0879, 0.5131, 0.4492]], [[0.6082, 0.9919, 0.3504]], Sub86991), 
LMul20907 = multiply_layer([Con4315,Sub86991], Mul20907), 
exec_layers([LAve63694,LCro84795,LRes21281,LPer59877,LFla19038,LCon4315,LSub86991,LMul20907],["Ave63694","Cro84795","Res21281","Per59877","Fla19038","Con4315","Sub86991","Mul20907"],Mul20907,"Mul20907")

Actual (Unparsed): [[-0.3130645, -0.1807470, 0.0302526]]

Expected (Unparsed): [[-0.31306451,-0.180747,0.03025256]]

Actual:   [[-0.313, -0.1807, 0.0303]]

Expected: [[-0.313, -0.1807, 0.0303]]