import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave48204 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave48204 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul61874 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul61874 = tf.keras.layers.Input(shape=([2, 1]))
in0Con30397 = tf.keras.layers.Input(shape=([7]))

Ave48204 = keras.layers.Average(name = 'Ave48204', )([in0Ave48204,in1Ave48204])
Zer54884 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer54884', )(Ave48204)
Fla72065 = keras.layers.Flatten(name = 'Fla72065', )(Zer54884)
Mul61874 = keras.layers.Multiply(name = 'Mul61874', )([in0Mul61874,in1Mul61874])
Res72462 = keras.layers.Reshape((2, 1, 1), name = 'Res72462', )(Mul61874)
Glo16632 = keras.layers.GlobalMaxPool2D(name = 'Glo16632', )(Res72462)
Con30397 = keras.layers.Concatenate(axis=1, name = 'Con30397', )([Glo16632,in0Con30397])
Max7140 = keras.layers.Maximum(name = 'Max7140', )([Fla72065,Con30397])
model = tf.keras.models.Model(inputs=[in0Ave48204,in1Ave48204,in0Mul61874,in1Mul61874,in0Con30397], outputs=Max7140)
in0Ave48204 = tf.constant([[[0.4597, 0.6092], [0.8158, 0.1289]]])
in1Ave48204 = tf.constant([[[0.8714, 0.9857], [0.1441, 0.6849]]])
in0Mul61874 = tf.constant([[[0.9514], [0.8778]]])
in1Mul61874 = tf.constant([[[0.5959], [0.5793]]])
in0Con30397 = tf.constant([[0.7356, 0.4107, 0.7795, 0.4128, 0.4227, 0.593, 0.8599]])
print (np.array2string(model.predict([in0Ave48204,in1Ave48204,in0Mul61874,in1Mul61874,in0Con30397],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max7140.png')

LAve48204 = average_layer([[[[0.4597, 0.6092], [0.8158, 0.1289]]], [[[0.8714, 0.9857], [0.1441, 0.6849]]]], Ave48204), 
LZer54884 = zero_padding1D_layer(Ave48204, 1, 1, Zer54884), 
LFla72065 = flatten_layer(Zer54884, Fla72065), 
LMul61874 = multiply_layer([[[[0.9514], [0.8778]]], [[[0.5959], [0.5793]]]], Mul61874), 
LRes72462 = reshape_layer(Mul61874, [2, 1, 1], Res72462), 
LGlo16632 = global_max_pool2D_layer(Res72462, Glo16632), 
LCon30397 = concatenate_layer([Glo16632,[[0.7356, 0.4107, 0.7795, 0.4128, 0.4227, 0.593, 0.8599]]], 1, Con30397), 
LMax7140 = maximum_layer([Fla72065,Con30397], Max7140), 
exec_layers([LAve48204,LZer54884,LFla72065,LMul61874,LRes72462,LGlo16632,LCon30397,LMax7140],["Ave48204","Zer54884","Fla72065","Mul61874","Res72462","Glo16632","Con30397","Max7140"],Max7140,"Max7140")

Actual (Unparsed): [[0.5669392, 0.7356000, 0.6655500, 0.7974500, 0.4799500, 0.4227000, 0.5930000, 0.8599000]]

Expected (Unparsed): [[0.56693926,0.7356,0.66555,0.79745,0.47995,0.4227,0.593,0.8599]]

Actual:   [[0.567, 0.7356, 0.6656, 0.7975, 0.48, 0.4227, 0.593, 0.8599]]

Expected: [[0.567, 0.7356, 0.6656, 0.7975, 0.48, 0.4227, 0.593, 0.8599]]