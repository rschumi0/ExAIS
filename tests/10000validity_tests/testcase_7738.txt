import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add9515 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add9515 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Max56782 = tf.keras.layers.Input(shape=([2, 2]))

Add9515 = keras.layers.Add(name = 'Add9515', )([in0Add9515,in1Add9515])
Res86860 = keras.layers.Reshape((1, 2, 1), name = 'Res86860', )(Add9515)
Max56782 = keras.layers.MaxPool1D(pool_size=(2), strides=(6), padding='valid', name = 'Max56782', )(in0Max56782)
Res24168 = keras.layers.Reshape((1, 2, 1), name = 'Res24168', )(Max56782)
Sub43259 = keras.layers.Subtract(name = 'Sub43259', )([Res86860,Res24168])
Res12816 = keras.layers.Reshape((1, 2), name = 'Res12816', )(Sub43259)
Ave24773 = keras.layers.AveragePooling1D(pool_size=(1), strides=(10), padding='valid', name = 'Ave24773', )(Res12816)
model = tf.keras.models.Model(inputs=[in0Add9515,in1Add9515,in0Max56782], outputs=Ave24773)
in0Add9515 = tf.constant([[[[[0.5458]], [[0.6301]]]]])
in1Add9515 = tf.constant([[[[[0.516]], [[0.8024]]]]])
in0Max56782 = tf.constant([[[1.8361, 1.1541], [1.5287, 1.7726]]])
print (np.array2string(model.predict([in0Add9515,in1Add9515,in0Max56782],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave24773.png')

LAdd9515 = add_layer([[[[[[0.5458]], [[0.6301]]]]], [[[[[0.516]], [[0.8024]]]]]], Add9515), 
LRes86860 = reshape_layer(Add9515, [1, 2, 1], Res86860), 
LMax56782 = max_pool1D_layer([[[1.8361, 1.1541], [1.5287, 1.7726]]], 2, 6, false, Max56782), 
LRes24168 = reshape_layer(Max56782, [1, 2, 1], Res24168), 
LSub43259 = subtract_layer(Res86860,Res24168, Sub43259), 
LRes12816 = reshape_layer(Sub43259, [1, 2], Res12816), 
LAve24773 = average_pooling1D_layer(Res12816, 1, 10, false, Ave24773), 
exec_layers([LAdd9515,LRes86860,LMax56782,LRes24168,LSub43259,LRes12816,LAve24773],["Add9515","Res86860","Max56782","Res24168","Sub43259","Res12816","Ave24773"],Ave24773,"Ave24773")

Actual (Unparsed): [[[-0.7743000, -0.3401000]]]

Expected (Unparsed): [[[-0.7743000000000002,-0.34009999999999985]]]

Actual:   [[[-0.7743, -0.3401]]]

Expected: [[[-0.7743, -0.34]]]