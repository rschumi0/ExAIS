import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min39056 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Min39056 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Con70921 = tf.keras.layers.Input(shape=([2, 4, 3]))
in0Min5228 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min5228 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Min39056 = keras.layers.Minimum(name = 'Min39056', )([in0Min39056,in1Min39056])
Res49553 = keras.layers.Reshape((2, 1, 4), name = 'Res49553', )(Min39056)
Res58294 = keras.layers.Reshape((2, 4), name = 'Res58294', )(Res49553)
Con87194 = keras.layers.Conv1D(4, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con87194', )(Res58294)
Res64432 = keras.layers.Reshape((2, 4, 1), name = 'Res64432', )(Con87194)
Con70921 = keras.layers.Concatenate(axis=3, name = 'Con70921', )([Res64432,in0Con70921])
Min5228 = keras.layers.Minimum(name = 'Min5228', )([in0Min5228,in1Min5228])
Res57135 = keras.layers.Reshape((1, 1, 1), name = 'Res57135', )(Min5228)
Con15465 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con15465', )(Res57135)
Zer48722 = keras.layers.ZeroPadding2D(padding=((1, 0), (3, 0)), name = 'Zer48722', )(Con15465)
Mul89309 = keras.layers.Multiply(name = 'Mul89309', )([Con70921,Zer48722])
Res6872 = keras.layers.Reshape((2, 4, 4, 1), name = 'Res6872', )(Mul89309)
Glo19123 = keras.layers.GlobalAveragePooling3D(name = 'Glo19123', )(Res6872)
model = tf.keras.models.Model(inputs=[in0Min39056,in1Min39056,in0Con70921,in0Min5228,in1Min5228], outputs=Glo19123)
w = model.get_layer('Con87194').get_weights() 
w[0] = np.array([[[0.1613, 0.8041, 0.786, 0.8492], [0.3018, 0.2324, 0.4342, 0.7772], [0.3647, 0.9936, 0.5608, 0.3595], [0.1831, 0.9308, 0.0782, 0.1783]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con87194').set_weights(w) 
w = model.get_layer('Con15465').get_weights() 
w[0] = np.array([[[[0.1245, 0.2765, 0.9173, 0.0769]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con15465').set_weights(w) 
in0Min39056 = tf.constant([[[[[0.8478, 0.0872], [0.0924, 0.6414]]], [[[0.2068, 0.6245], [0.8666, 0.31]]]]])
in1Min39056 = tf.constant([[[[[0.4885, 0.3067], [0.2975, 0.0023]]], [[[0.7191, 0.7506], [0.6485, 0.2931]]]]])
in0Con70921 = tf.constant([[[[0.9629, 0.0197, 0.5513], [0.7993, 0.1903, 0.5816], [0.8233, 0.9395, 0.6051], [0.8528, 0.408, 0.7025]], [[0.8981, 0.4452, 0.5565], [0.2664, 0.6164, 0.3053], [0.7388, 0.5361, 0.633], [0.6658, 0.9479, 0.1196]]]])
in0Min5228 = tf.constant([[[[[0.9463]]]]])
in1Min5228 = tf.constant([[[[[0.3435]]]]])
print (np.array2string(model.predict([in0Min39056,in1Min39056,in0Con70921,in0Min5228,in1Min5228],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo19123.png')

LMin39056 = minimum_layer([[[[[[0.8478, 0.0872], [0.0924, 0.6414]]], [[[0.2068, 0.6245], [0.8666, 0.31]]]]], [[[[[0.4885, 0.3067], [0.2975, 0.0023]]], [[[0.7191, 0.7506], [0.6485, 0.2931]]]]]], Min39056), 
LRes49553 = reshape_layer(Min39056, [2, 1, 4], Res49553), 
LRes58294 = reshape_layer(Res49553, [2, 4], Res58294), 
LCon87194 = conv1D_layer(Res58294, 1,[[[0.1613, 0.8041, 0.786, 0.8492], [0.3018, 0.2324, 0.4342, 0.7772], [0.3647, 0.9936, 0.5608, 0.3595], [0.1831, 0.9308, 0.0782, 0.1783]]],[0, 0, 0, 0], 1, true, 1, Con87194), 
LRes64432 = reshape_layer(Con87194, [2, 4, 1], Res64432), 
LCon70921 = concatenate_layer([Res64432,[[[[0.9629, 0.0197, 0.5513], [0.7993, 0.1903, 0.5816], [0.8233, 0.9395, 0.6051], [0.8528, 0.408, 0.7025]], [[0.8981, 0.4452, 0.5565], [0.2664, 0.6164, 0.3053], [0.7388, 0.5361, 0.633], [0.6658, 0.9479, 0.1196]]]]], 3, Con70921), 
LMin5228 = minimum_layer([[[[[[0.9463]]]]], [[[[[0.3435]]]]]], Min5228), 
LRes57135 = reshape_layer(Min5228, [1, 1, 1], Res57135), 
LCon15465 = conv2D_layer(Res57135, 1, 1,[[[[0.1245, 0.2765, 0.9173, 0.0769]]]],[0, 0, 0, 0], 1, 1, true, 1, 1, Con15465), 
LZer48722 = zero_padding2D_layer(Con15465, 1, 0, 3, 0, Zer48722), 
LMul89309 = multiply_layer([Con70921,Zer48722], Mul89309), 
LRes6872 = reshape_layer(Mul89309, [2, 4, 4, 1], Res6872), 
LGlo19123 = global_average_pooling3D_layer(Res6872, Glo19123), 
exec_layers([LMin39056,LRes49553,LRes58294,LCon87194,LRes64432,LCon70921,LMin5228,LRes57135,LCon15465,LZer48722,LMul89309,LRes6872,LGlo19123],["Min39056","Res49553","Res58294","Con87194","Res64432","Con70921","Min5228","Res57135","Con15465","Zer48722","Mul89309","Res6872","Glo19123"],Glo19123,"Glo19123")

Actual (Unparsed): [[0.0126732]]

Expected (Unparsed): [[0.012673248451411875]]

Actual:   [[0.0127]]

Expected: [[0.0127]]