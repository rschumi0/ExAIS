import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con56515 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Con56515 = keras.layers.Conv3DTranspose(2, (1, 1, 2),strides=(1, 5, 1), padding='same', name = 'Con56515', )(in0Con56515)
Res30748 = keras.layers.Reshape((1, 5, 4), name = 'Res30748', )(Con56515)
Res78900 = keras.layers.Reshape((1, 20), name = 'Res78900', )(Res30748)
Glo43847 = keras.layers.GlobalAveragePooling1D(name = 'Glo43847', )(Res78900)
model = tf.keras.models.Model(inputs=[in0Con56515], outputs=Glo43847)
w = model.get_layer('Con56515').get_weights() 
w[0] = np.array([[[[[0.2504], [0.85]], [[0.3002], [0.0187]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con56515').set_weights(w) 
in0Con56515 = tf.constant([[[[[0.9065], [0.4264]]]]])
print (np.array2string(model.predict([in0Con56515],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo43847.png')

LCon56515 = conv3D_transpose_layer([[[[[0.9065], [0.4264]]]]], 1, 1, 2,[[[[[0.2504], [0.85]], [[0.3002], [0.0187]]]]],[0, 0], 1, 5, 1, true, Con56515), 
LRes30748 = reshape_layer(Con56515, [1, 5, 4], Res30748), 
LRes78900 = reshape_layer(Res30748, [1, 20], Res78900), 
LGlo43847 = global_average_pooling1D_layer(Res78900, Glo43847), 
exec_layers([LCon56515,LRes30748,LRes78900,LGlo43847],["Con56515","Res30748","Res78900","Glo43847"],Glo43847,"Glo43847")

Actual (Unparsed): [[0.2269876, 0.7705250, 0.3789019, 0.3793916, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0.2269876,0.7705249999999999,0.37890186000000003,0.37939154999999997,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]

Actual:   [[0.227, 0.7706, 0.379, 0.3794, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]

Expected: [[0.227, 0.7706, 0.379, 0.3794, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]