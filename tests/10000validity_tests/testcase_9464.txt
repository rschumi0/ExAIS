import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot69537 = tf.keras.layers.Input(shape=([2]))
in1Dot69537 = tf.keras.layers.Input(shape=([2]))
in0Con18199 = tf.keras.layers.Input(shape=([1, 2]))
in0Up_54670 = tf.keras.layers.Input(shape=([1, 4, 1, 1]))
in0Con95018 = tf.keras.layers.Input(shape=([1, 8]))
in0Con30759 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Dot69537 = keras.layers.Dot(axes=(1, 1), name = 'Dot69537', )([in0Dot69537,in1Dot69537])
Res72793 = keras.layers.Reshape((1, 1), name = 'Res72793', )(Dot69537)
Con18199 = keras.layers.Concatenate(axis=2, name = 'Con18199', )([Res72793,in0Con18199])
Up_54670 = keras.layers.UpSampling3D(size=(1, 2, 1), name = 'Up_54670', )(in0Up_54670)
Res39834 = keras.layers.Reshape((1, 8, 1), name = 'Res39834', )(Up_54670)
Res21528 = keras.layers.Reshape((1, 8), name = 'Res21528', )(Res39834)
Con95018 = keras.layers.Concatenate(axis=2, name = 'Con95018', )([Res21528,in0Con95018])
Con30759 = keras.layers.Conv3DTranspose(4, (2, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con30759', )(in0Con30759)
Res37524 = keras.layers.Reshape((2, 2, 8), name = 'Res37524', )(Con30759)
Res79538 = keras.layers.Reshape((2, 16), name = 'Res79538', )(Res37524)
Zer48363 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer48363', )(Res79538)
Dot27142 = keras.layers.Dot(axes=(2, 2), name = 'Dot27142', )([Con95018,Zer48363])
Sub62893 = keras.layers.Subtract(name = 'Sub62893', )([Con18199,Dot27142])
model = tf.keras.models.Model(inputs=[in0Dot69537,in1Dot69537,in0Con18199,in0Up_54670,in0Con95018,in0Con30759], outputs=Sub62893)
w = model.get_layer('Con30759').get_weights() 
w[0] = np.array([[[[[0.8929, 0.6293], [0.0888, 0.2528], [0.492, 0.3715], [0.1575, 0.7878]]]], [[[[0.1505, 0.7893], [0.1173, 0.6483], [0.7224, 0.4608], [0.864, 0.3773]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con30759').set_weights(w) 
in0Dot69537 = tf.constant([[0.6715, 0.725]])
in1Dot69537 = tf.constant([[0.3862, 0.0373]])
in0Con18199 = tf.constant([[[0.6096, 0.4858]]])
in0Up_54670 = tf.constant([[[[[1.0873]], [[1.6335]], [[1.1318]], [[1.6135]]]]])
in0Con95018 = tf.constant([[[0.0408, 0.0471, 0.2553, 0.9147, 0.2304, 0.564, 0.0473, 0.0495]]])
in0Con30759 = tf.constant([[[[[0.6799, 0.0866], [0.8199, 0.9194]], [[0.7911, 0.4212], [0.5116, 0.3394]]], [[[0.8949, 0.0954], [0.6965, 0.0662]], [[0.5701, 0.3407], [0.3648, 0.821]]]]])
print (np.array2string(model.predict([in0Dot69537,in1Dot69537,in0Con18199,in0Up_54670,in0Con95018,in0Con30759],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub62893.png')

LDot69537 = dot_layer([[0.6715, 0.725]], [[0.3862, 0.0373]], 1, 1, Dot69537), 
LRes72793 = reshape_layer(Dot69537, [1, 1], Res72793), 
LCon18199 = concatenate_layer([Res72793,[[[0.6096, 0.4858]]]], 2, Con18199), 
LUp_54670 = up_sampling3D_layer([[[[[1.0873]], [[1.6335]], [[1.1318]], [[1.6135]]]]], 1, 2, 1, Up_54670), 
LRes39834 = reshape_layer(Up_54670, [1, 8, 1], Res39834), 
LRes21528 = reshape_layer(Res39834, [1, 8], Res21528), 
LCon95018 = concatenate_layer([Res21528,[[[0.0408, 0.0471, 0.2553, 0.9147, 0.2304, 0.564, 0.0473, 0.0495]]]], 2, Con95018), 
LCon30759 = conv3D_transpose_layer([[[[[0.6799, 0.0866], [0.8199, 0.9194]], [[0.7911, 0.4212], [0.5116, 0.3394]]], [[[0.8949, 0.0954], [0.6965, 0.0662]], [[0.5701, 0.3407], [0.3648, 0.821]]]]], 2, 1, 1,[[[[[0.8929, 0.6293], [0.0888, 0.2528], [0.492, 0.3715], [0.1575, 0.7878]]]], [[[[0.1505, 0.7893], [0.1173, 0.6483], [0.7224, 0.4608], [0.864, 0.3773]]]]],[0, 0, 0, 0], 1, 1, 1, true, Con30759), 
LRes37524 = reshape_layer(Con30759, [2, 2, 8], Res37524), 
LRes79538 = reshape_layer(Res37524, [2, 16], Res79538), 
LZer48363 = zero_padding1D_layer(Res79538, 1, 0, Zer48363), 
LDot27142 = dot_layer(Con95018,Zer48363, 2, 2, Dot27142), 
LSub62893 = subtract_layer(Con18199,Dot27142, Sub62893), 
exec_layers([LDot69537,LRes72793,LCon18199,LUp_54670,LRes39834,LRes21528,LCon95018,LCon30759,LRes37524,LRes79538,LZer48363,LDot27142,LSub62893],["Dot69537","Res72793","Con18199","Up_54670","Res39834","Res21528","Con95018","Con30759","Res37524","Res79538","Zer48363","Dot27142","Sub62893"],Sub62893,"Sub62893")

Actual (Unparsed): [[[0.2863758, -6.3607235, -12.8317849]]]

Expected (Unparsed): [[[0.2863758,-6.360723623197999,-12.831784990557999]]]

Actual:   [[[0.2864, -6.3607, -12.8317]]]

Expected: [[[0.2864, -6.3607, -12.8317]]]