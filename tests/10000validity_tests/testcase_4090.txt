import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max14416 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Max14416 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Max14416 = keras.layers.Maximum(name = 'Max14416', )([in0Max14416,in1Max14416])
Glo89869 = keras.layers.GlobalMaxPool3D(name = 'Glo89869', )(Max14416)
Res39447 = keras.layers.Reshape((1, 1), name = 'Res39447', )(Glo89869)
Res24088 = keras.layers.Reshape((1, 1, 1), name = 'Res24088', )(Res39447)
Con77538 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='same', name = 'Con77538', )(Res24088)
Res41876 = keras.layers.Reshape((1, 3), name = 'Res41876', )(Con77538)
Up_71667 = keras.layers.UpSampling1D(size=(1), name = 'Up_71667', )(Res41876)
model = tf.keras.models.Model(inputs=[in0Max14416,in1Max14416], outputs=Up_71667)
w = model.get_layer('Con77538').get_weights() 
w[0] = np.array([[[[0.8243], [0.2407], [0.3816]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con77538').set_weights(w) 
in0Max14416 = tf.constant([[[[[0.723]], [[0.8371]]]]])
in1Max14416 = tf.constant([[[[[0.977]], [[0.8935]]]]])
print (np.array2string(model.predict([in0Max14416,in1Max14416],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_71667.png')

LMax14416 = maximum_layer([[[[[[0.723]], [[0.8371]]]]], [[[[[0.977]], [[0.8935]]]]]], Max14416), 
LGlo89869 = global_max_pool3D_layer(Max14416, Glo89869), 
LRes39447 = reshape_layer(Glo89869, [1, 1], Res39447), 
LRes24088 = reshape_layer(Res39447, [1, 1, 1], Res24088), 
LCon77538 = conv2D_transpose_layer(Res24088, 1, 1,[[[[0.8243], [0.2407], [0.3816]]]],[0, 0, 0], 1, 1, true, Con77538), 
LRes41876 = reshape_layer(Con77538, [1, 3], Res41876), 
LUp_71667 = up_sampling1D_layer(Res41876, 1, Up_71667), 
exec_layers([LMax14416,LGlo89869,LRes39447,LRes24088,LCon77538,LRes41876,LUp_71667],["Max14416","Glo89869","Res39447","Res24088","Con77538","Res41876","Up_71667"],Up_71667,"Up_71667")

Actual (Unparsed): [[[0.8053411, 0.2351639, 0.3728232]]]

Expected (Unparsed): [[[0.8053411,0.23516389999999998,0.37282319999999997]]]

Actual:   [[[0.8054, 0.2352, 0.3729]]]

Expected: [[[0.8054, 0.2352, 0.3729]]]