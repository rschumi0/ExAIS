import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min6038 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Min6038 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con56232 = tf.keras.layers.Input(shape=([2, 1]))
in0Sub95193 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub95193 = tf.keras.layers.Input(shape=([2, 3]))

Min6038 = keras.layers.Minimum(name = 'Min6038', )([in0Min6038,in1Min6038])
Res17972 = keras.layers.Reshape((1, 1, 2), name = 'Res17972', )(Min6038)
Res8696 = keras.layers.Reshape((1, 2), name = 'Res8696', )(Res17972)
Zer29141 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer29141', )(Res8696)
Con56232 = keras.layers.Concatenate(axis=2, name = 'Con56232', )([Zer29141,in0Con56232])
Sub95193 = keras.layers.Subtract(name = 'Sub95193', )([in0Sub95193,in1Sub95193])
Mul42008 = keras.layers.Multiply(name = 'Mul42008', )([Con56232,Sub95193])
model = tf.keras.models.Model(inputs=[in0Min6038,in1Min6038,in0Con56232,in0Sub95193,in1Sub95193], outputs=Mul42008)
in0Min6038 = tf.constant([[[[[0.9407, 0.4558]]]]])
in1Min6038 = tf.constant([[[[[0.9397, 0.3591]]]]])
in0Con56232 = tf.constant([[[0.2354], [0.9441]]])
in0Sub95193 = tf.constant([[[0.6601, 0.0473, 0.3673], [0.5613, 0.3413, 0.438]]])
in1Sub95193 = tf.constant([[[0.7369, 0.8557, 0.2979], [0.9422, 0.8442, 0.5302]]])
print (np.array2string(model.predict([in0Min6038,in1Min6038,in0Con56232,in0Sub95193,in1Sub95193],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul42008.png')

LMin6038 = minimum_layer([[[[[[0.9407, 0.4558]]]]], [[[[[0.9397, 0.3591]]]]]], Min6038), 
LRes17972 = reshape_layer(Min6038, [1, 1, 2], Res17972), 
LRes8696 = reshape_layer(Res17972, [1, 2], Res8696), 
LZer29141 = zero_padding1D_layer(Res8696, 1, 0, Zer29141), 
LCon56232 = concatenate_layer([Zer29141,[[[0.2354], [0.9441]]]], 2, Con56232), 
LSub95193 = subtract_layer([[[0.6601, 0.0473, 0.3673], [0.5613, 0.3413, 0.438]]], [[[0.7369, 0.8557, 0.2979], [0.9422, 0.8442, 0.5302]]], Sub95193), 
LMul42008 = multiply_layer([Con56232,Sub95193], Mul42008), 
exec_layers([LMin6038,LRes17972,LRes8696,LZer29141,LCon56232,LSub95193,LMul42008],["Min6038","Res17972","Res8696","Zer29141","Con56232","Sub95193","Mul42008"],Mul42008,"Mul42008")

Actual (Unparsed): [[[-0.0000000, -0.0000000, 0.0163368], [-0.3579318, -0.1805914, -0.0870460]]]

Expected (Unparsed): [[[-0.0,-0.0,0.016336760000000002],[-0.35793173,-0.18059138999999996,-0.08704602]]]

Actual:   [[[-0, -0, 0.0164], [-0.3579, -0.1805, -0.087]]]

Expected: [[[-0, -0, 0.0164], [-0.3579, -0.1805, -0.087]]]