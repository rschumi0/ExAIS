import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0GRU2452 = tf.keras.layers.Input(shape=([3, 2]))
in0Ave37794 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave37794 = tf.keras.layers.Input(shape=([1, 1]))

GRU2452 = keras.layers.GRU(1,reset_after=True, recurrent_activation='sigmoid', name = 'GRU2452', )(in0GRU2452)
Res59691 = keras.layers.Reshape((1, 1), name = 'Res59691', )(GRU2452)
Res95217 = keras.layers.Reshape((1, 1, 1), name = 'Res95217', )(Res59691)
Ave37794 = keras.layers.Average(name = 'Ave37794', )([in0Ave37794,in1Ave37794])
Res84472 = keras.layers.Reshape((1, 1, 1), name = 'Res84472', )(Ave37794)
Ave70709 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave70709', )(Res84472)
Min37495 = keras.layers.Minimum(name = 'Min37495', )([Res95217,Ave70709])
model = tf.keras.models.Model(inputs=[in0GRU2452,in0Ave37794,in1Ave37794], outputs=Min37495)
w = model.get_layer('GRU2452').get_weights() 
w[0] = np.array([[7, 1, 9], [3, 4, 2]])
w[1] = np.array([[4, 5, 1]])
w[2] = np.array([[6, 2, 1], [1, 7, 9]])
model.get_layer('GRU2452').set_weights(w) 
in0GRU2452 = tf.constant([[[7, 2], [5, 4], [2, 9]]])
in0Ave37794 = tf.constant([[[0.7511]]])
in1Ave37794 = tf.constant([[[0.13]]])
print (np.array2string(model.predict([in0GRU2452,in0Ave37794,in1Ave37794],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min37495.png')

LGRU2452 = gru_layer([[[7, 2], [5, 4], [2, 9]]],[[7, 1, 9], [3, 4, 2]],[[4, 5, 1]],[[6, 2, 1], [1, 7, 9]], true, GRU2452), 
LRes59691 = reshape_layer(GRU2452, [1, 1], Res59691), 
LRes95217 = reshape_layer(Res59691, [1, 1, 1], Res95217), 
LAve37794 = average_layer([[[[0.7511]]], [[[0.13]]]], Ave37794), 
LRes84472 = reshape_layer(Ave37794, [1, 1, 1], Res84472), 
LAve70709 = average_pooling2D_layer(Res84472, 1, 1, 1, 1, false, Ave70709), 
LMin37495 = minimum_layer([Res95217,Ave70709], Min37495), 
exec_layers([LGRU2452,LRes59691,LRes95217,LAve37794,LRes84472,LAve70709,LMin37495],["GRU2452","Res59691","Res95217","Ave37794","Res84472","Ave70709","Min37495"],Min37495,"Min37495")

Actual (Unparsed): [[[[0.0000000]]]]

Expected (Unparsed): [[[[0.0]]]]

Actual:   [[[[0]]]]

Expected: [[[[0]]]]