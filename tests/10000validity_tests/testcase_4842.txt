import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot54048 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot54048 = tf.keras.layers.Input(shape=([3, 3]))
in0Glo72495 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Con34992 = tf.keras.layers.Input(shape=([7]))

Dot54048 = keras.layers.Dot(axes=(2, 1), name = 'Dot54048', )([in0Dot54048,in1Dot54048])
Fla59474 = keras.layers.Flatten(name = 'Fla59474', )(Dot54048)
Glo72495 = keras.layers.GlobalMaxPool3D(name = 'Glo72495', )(in0Glo72495)
Con34992 = keras.layers.Concatenate(axis=1, name = 'Con34992', )([Glo72495,in0Con34992])
Mul53654 = keras.layers.Multiply(name = 'Mul53654', )([Fla59474,Con34992])
model = tf.keras.models.Model(inputs=[in0Dot54048,in1Dot54048,in0Glo72495,in0Con34992], outputs=Mul53654)
in0Dot54048 = tf.constant([[[0.1347, 0.0185, 0.314], [0.009, 0.1388, 0.1439], [0.6426, 0.4113, 0.0638]]])
in1Dot54048 = tf.constant([[[0.451, 0.0501, 0.7993], [0.916, 0.3, 0.9756], [0.2766, 0.1846, 0.5869]]])
in0Glo72495 = tf.constant([[[[[1.3458, 1.5209], [1.0927, 1.805]], [[1.7272, 1.8183], [1.7746, 1.8144]]], [[[1.215, 1.2139], [1.6775, 1.3466]], [[1.2276, 1.7741], [1.5793, 1.1224]]]]])
in0Con34992 = tf.constant([[0.5969, 0.2051, 0.7304, 0.7976, 0.0927, 0.358, 0.4277]])
print (np.array2string(model.predict([in0Dot54048,in1Dot54048,in0Glo72495,in0Con34992],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul53654.png')

LDot54048 = dot_layer([[[0.1347, 0.0185, 0.314], [0.009, 0.1388, 0.1439], [0.6426, 0.4113, 0.0638]]], [[[0.451, 0.0501, 0.7993], [0.916, 0.3, 0.9756], [0.2766, 0.1846, 0.5869]]], 2, 1, Dot54048), 
LFla59474 = flatten_layer(Dot54048, Fla59474), 
LGlo72495 = global_max_pool3D_layer([[[[[1.3458, 1.5209], [1.0927, 1.805]], [[1.7272, 1.8183], [1.7746, 1.8144]]], [[[1.215, 1.2139], [1.6775, 1.3466]], [[1.2276, 1.7741], [1.5793, 1.1224]]]]], Glo72495), 
LCon34992 = concatenate_layer([Glo72495,[[0.5969, 0.2051, 0.7304, 0.7976, 0.0927, 0.358, 0.4277]]], 1, Con34992), 
LMul53654 = multiply_layer([Fla59474,Con34992], Mul53654), 
exec_layers([LDot54048,LFla59474,LGlo72495,LCon34992,LMul53654],["Dot54048","Fla59474","Glo72495","Con34992","Mul53654"],Mul53654,"Mul53654")

Actual (Unparsed): [[0.2920071, 0.1277590, 0.1850395, 0.0350726, 0.0501455, 0.1811046, 0.0634263, 0.0599155, 0.4073153]]

Expected (Unparsed): [[0.29200705826,0.12775897652100002,0.18503954317899998,0.035072620954,0.050145495136,0.18110456346399997,0.063426311496,0.05991550292,0.407315253436]]

Actual:   [[0.2921, 0.1278, 0.1851, 0.0351, 0.0502, 0.1812, 0.0635, 0.06, 0.4074]]

Expected: [[0.2921, 0.1278, 0.1851, 0.0351, 0.0502, 0.1812, 0.0635, 0.06, 0.4074]]