import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max87378 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max87378 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0ELU14710 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Min5488 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Min5488 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Glo17926 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con62206 = tf.keras.layers.Input(shape=([11]))

Max87378 = keras.layers.Maximum(name = 'Max87378', )([in0Max87378,in1Max87378])
Res74236 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res74236', )(Max87378)
Zer29495 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer29495', )(Res74236)
ELU14710 = keras.layers.ELU(alpha=9.36087773206571, name = 'ELU14710', input_shape=(1, 1, 2, 1))(in0ELU14710)
Add77639 = keras.layers.Add(name = 'Add77639', )([Zer29495,ELU14710])
Zer42252 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer42252', )(Add77639)
Min5488 = keras.layers.Minimum(name = 'Min5488', )([in0Min5488,in1Min5488])
Zer43045 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer43045', )(Min5488)
Sub58634 = keras.layers.Subtract(name = 'Sub58634', )([Zer42252,Zer43045])
Up_75627 = keras.layers.UpSampling3D(size=(1, 2, 1), name = 'Up_75627', )(Sub58634)
Res1823 = keras.layers.Reshape((1, 4, 3), name = 'Res1823', )(Up_75627)
Res25523 = keras.layers.Reshape((1, 12), name = 'Res25523', )(Res1823)
Fla60904 = keras.layers.Flatten(name = 'Fla60904', )(Res25523)
Glo17926 = keras.layers.GlobalMaxPool2D(name = 'Glo17926', )(in0Glo17926)
Con62206 = keras.layers.Concatenate(axis=1, name = 'Con62206', )([Glo17926,in0Con62206])
Ave38127 = keras.layers.Average(name = 'Ave38127', )([Fla60904,Con62206])
model = tf.keras.models.Model(inputs=[in0Max87378,in1Max87378,in0ELU14710,in0Min5488,in1Min5488,in0Glo17926,in0Con62206], outputs=Ave38127)
in0Max87378 = tf.constant([[[[0.933]]]])
in1Max87378 = tf.constant([[[[0.6826]]]])
in0ELU14710 = tf.constant([[[[[0.9571], [0.8688]]]]])
in0Min5488 = tf.constant([[[[[0.2591]], [[0.8776]]]]])
in1Min5488 = tf.constant([[[[[0.503]], [[0.0609]]]]])
in0Glo17926 = tf.constant([[[[1.5731], [1.6611]]]])
in0Con62206 = tf.constant([[0.8679, 0.5817, 0.5013, 0.4846, 0.7756, 0.5246, 0.6097, 0.1139, 0.8598, 0.6466, 0.8209]])
print (np.array2string(model.predict([in0Max87378,in1Max87378,in0ELU14710,in0Min5488,in1Min5488,in0Glo17926,in0Con62206],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave38127.png')

LMax87378 = maximum_layer([[[[[0.933]]]], [[[[0.6826]]]]], Max87378), 
LRes74236 = reshape_layer(Max87378, [1, 1, 1, 1], Res74236), 
LZer29495 = zero_padding3D_layer(Res74236, 0, 0, 0, 0, 1, 0, Zer29495), 
LELU14710 = elu_layer([[[[[0.9571], [0.8688]]]]], 9.36087773206571, ELU14710), 
LAdd77639 = add_layer([Zer29495,ELU14710], Add77639), 
LZer42252 = zero_padding3D_layer(Add77639, 0, 0, 1, 0, 1, 0, Zer42252), 
LMin5488 = minimum_layer([[[[[[0.2591]], [[0.8776]]]]], [[[[[0.503]], [[0.0609]]]]]], Min5488), 
LZer43045 = zero_padding3D_layer(Min5488, 0, 0, 0, 0, 2, 0, Zer43045), 
LSub58634 = subtract_layer(Zer42252,Zer43045, Sub58634), 
LUp_75627 = up_sampling3D_layer(Sub58634, 1, 2, 1, Up_75627), 
LRes1823 = reshape_layer(Up_75627, [1, 4, 3], Res1823), 
LRes25523 = reshape_layer(Res1823, [1, 12], Res25523), 
LFla60904 = flatten_layer(Res25523, Fla60904), 
LGlo17926 = global_max_pool2D_layer([[[[1.5731], [1.6611]]]], Glo17926), 
LCon62206 = concatenate_layer([Glo17926,[[0.8679, 0.5817, 0.5013, 0.4846, 0.7756, 0.5246, 0.6097, 0.1139, 0.8598, 0.6466, 0.8209]]], 1, Con62206), 
LAve38127 = average_layer([Fla60904,Con62206], Ave38127), 
exec_layers([LMax87378,LRes74236,LZer29495,LELU14710,LAdd77639,LZer42252,LMin5488,LZer43045,LSub58634,LUp_75627,LRes1823,LRes25523,LFla60904,LGlo17926,LCon62206,LAve38127],["Max87378","Res74236","Zer29495","ELU14710","Add77639","Zer42252","Min5488","Zer43045","Sub58634","Up_75627","Res1823","Res25523","Fla60904","Glo17926","Con62206","Ave38127"],Ave38127,"Ave38127")

Actual (Unparsed): [[0.8305500, 0.4339500, 0.1613000, 0.2506500, 0.2423000, 0.2582500, 0.2623000, 0.7834000, 0.9274000, 0.4299000, 0.8018500, 1.2809000]]

Expected (Unparsed): [[0.83055,0.43395,0.1613,0.25065,0.2423,0.25825,0.2623,0.7834,0.9274,0.4299,0.80185,1.2809]]

Actual:   [[0.8306, 0.434, 0.1613, 0.2507, 0.2423, 0.2583, 0.2623, 0.7834, 0.9274, 0.4299, 0.8019, 1.2809]]

Expected: [[0.8306, 0.434, 0.1613, 0.2507, 0.2423, 0.2583, 0.2623, 0.7834, 0.9274, 0.4299, 0.8019, 1.2809]]