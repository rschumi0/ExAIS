import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add27290 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Add27290 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Add27290 = keras.layers.Add(name = 'Add27290', )([in0Add27290,in1Add27290])
Res89553 = keras.layers.Reshape((2, 2, 1), name = 'Res89553', )(Add27290)
Up_88540 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_88540', )(Res89553)
Con6283 = keras.layers.Conv2D(3, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con6283', )(Up_88540)
Res5600 = keras.layers.Reshape((4, 6), name = 'Res5600', )(Con6283)
Cro47312 = keras.layers.Cropping1D(cropping=((3, 0)), name = 'Cro47312', )(Res5600)
Res87068 = keras.layers.Reshape((1, 6, 1), name = 'Res87068', )(Cro47312)
Zer69191 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer69191', )(Res87068)
model = tf.keras.models.Model(inputs=[in0Add27290,in1Add27290], outputs=Zer69191)
w = model.get_layer('Con6283').get_weights() 
w[0] = np.array([[[[0.0361, 0.091, 0.8012]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con6283').set_weights(w) 
in0Add27290 = tf.constant([[[[[0.7901]], [[0.2833]]], [[[0.5645]], [[0.2335]]]]])
in1Add27290 = tf.constant([[[[[0.7897]], [[0.6736]]], [[[0.7671]], [[0.1721]]]]])
print (np.array2string(model.predict([in0Add27290,in1Add27290],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer69191.png')

LAdd27290 = add_layer([[[[[[0.7901]], [[0.2833]]], [[[0.5645]], [[0.2335]]]]], [[[[[0.7897]], [[0.6736]]], [[[0.7671]], [[0.1721]]]]]], Add27290), 
LRes89553 = reshape_layer(Add27290, [2, 2, 1], Res89553), 
LUp_88540 = up_sampling2D_layer(Res89553, 2, 1, Up_88540), 
LCon6283 = conv2D_layer(Up_88540, 1, 1,[[[[0.0361, 0.091, 0.8012]]]],[0, 0, 0], 1, 1, false, 1, 1, Con6283), 
LRes5600 = reshape_layer(Con6283, [4, 6], Res5600), 
LCro47312 = cropping1D_layer(Res5600, 3, 0, Cro47312), 
LRes87068 = reshape_layer(Cro47312, [1, 6, 1], Res87068), 
LZer69191 = zero_padding2D_layer(Res87068, 1, 1, 1, 1, Zer69191), 
exec_layers([LAdd27290,LRes89553,LUp_88540,LCon6283,LRes5600,LCro47312,LRes87068,LZer69191],["Add27290","Res89553","Up_88540","Con6283","Res5600","Cro47312","Res87068","Zer69191"],Zer69191,"Zer69191")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0480708], [0.1211756], [1.0668779], [0.0146422], [0.0369096], [0.3249667], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0],[0],[0],[0],[0],[0]],[[0],[0.04807076],[0.12117559999999998],[1.06687792],[0.014642160000000001],[0.0369096],[0.32496672000000004],[0]],[[0],[0],[0],[0],[0],[0],[0],[0]]]]

Actual:   [[[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0.0481], [0.1212], [1.0669], [0.0147], [0.037], [0.325], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]]]

Expected: [[[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0.0481], [0.1212], [1.0669], [0.0147], [0.037], [0.325], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]]]