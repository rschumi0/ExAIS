import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot67574 = tf.keras.layers.Input(shape=([3]))
in1Dot67574 = tf.keras.layers.Input(shape=([3]))
in0Ave97328 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave97328 = tf.keras.layers.Input(shape=([1, 2]))

Dot67574 = keras.layers.Dot(axes=(1, 1), name = 'Dot67574', )([in0Dot67574,in1Dot67574])
Res44366 = keras.layers.Reshape((1, 1), name = 'Res44366', )(Dot67574)
Ave97328 = keras.layers.Average(name = 'Ave97328', )([in0Ave97328,in1Ave97328])
Dot84248 = keras.layers.Dot(axes=(2, 1), name = 'Dot84248', )([Res44366,Ave97328])
model = tf.keras.models.Model(inputs=[in0Dot67574,in1Dot67574,in0Ave97328,in1Ave97328], outputs=Dot84248)
in0Dot67574 = tf.constant([[0.1184, 0.677, 0.9275]])
in1Dot67574 = tf.constant([[0.1897, 0.2416, 0.1105]])
in0Ave97328 = tf.constant([[[0.6684, 0.4996]]])
in1Ave97328 = tf.constant([[[0.4779, 0.4007]]])
print (np.array2string(model.predict([in0Dot67574,in1Dot67574,in0Ave97328,in1Ave97328],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot84248.png')

LDot67574 = dot_layer([[0.1184, 0.677, 0.9275]], [[0.1897, 0.2416, 0.1105]], 1, 1, Dot67574), 
LRes44366 = reshape_layer(Dot67574, [1, 1], Res44366), 
LAve97328 = average_layer([[[[0.6684, 0.4996]]], [[[0.4779, 0.4007]]]], Ave97328), 
LDot84248 = dot_layer(Res44366,Ave97328, 2, 1, Dot84248), 
exec_layers([LDot67574,LRes44366,LAve97328,LDot84248],["Dot67574","Res44366","Ave97328","Dot84248"],Dot84248,"Dot84248")

Actual (Unparsed): [[[0.1653609, 0.1298739]]]

Expected (Unparsed): [[[0.16536089925450004,0.12987387036450002]]]

Actual:   [[[0.1654, 0.1299]]]

Expected: [[[0.1654, 0.1299]]]