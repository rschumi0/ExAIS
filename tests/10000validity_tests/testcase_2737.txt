import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave99825 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Sub64992 = tf.keras.layers.Input(shape=([3, 3, 2]))
in1Sub64992 = tf.keras.layers.Input(shape=([3, 3, 2]))
in0Add60141 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Add60141 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Ave99825 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(6, 5), padding='same', name = 'Ave99825', )(in0Ave99825)
Res10789 = keras.layers.Reshape((1, 2), name = 'Res10789', )(Ave99825)
Per74153 = keras.layers.Permute((1,2), name = 'Per74153',)(Res10789)
Res91129 = keras.layers.Reshape((1, 2, 1), name = 'Res91129', )(Per74153)
Res23113 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res23113', )(Res91129)
Zer46569 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (1, 0)), name = 'Zer46569', )(Res23113)
Sub64992 = keras.layers.Subtract(name = 'Sub64992', )([in0Sub64992,in1Sub64992])
ReL25933 = keras.layers.ReLU(max_value=3.5300770664665246, negative_slope=0.4685734707141885, threshold=2.92924433508945, name = 'ReL25933', )(Sub64992)
Res29633 = keras.layers.Reshape((3, 3, 2, 1), name = 'Res29633', )(ReL25933)
Add60141 = keras.layers.Add(name = 'Add60141', )([in0Add60141,in1Add60141])
Zer16174 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer16174', )(Add60141)
Add36640 = keras.layers.Add(name = 'Add36640', )([Res29633,Zer16174])
Add20892 = keras.layers.Add(name = 'Add20892', )([Zer46569,Add36640])
model = tf.keras.models.Model(inputs=[in0Ave99825,in0Sub64992,in1Sub64992,in0Add60141,in1Add60141], outputs=Add20892)
in0Ave99825 = tf.constant([[[[1.7788, 1.1797], [1.9668, 1.5746]]]])
in0Sub64992 = tf.constant([[[[0.7875, 0.3362], [0.2299, 0.6897], [0.7094, 0.5791]], [[0.8672, 0.3476], [0.2392, 0.9389], [0.758, 0.2477]], [[0.5468, 0.4849], [0.1586, 0.4722], [0.7705, 0.9886]]]])
in1Sub64992 = tf.constant([[[[0.1866, 0.5442], [0.3177, 0.8922], [0.9598, 0.8607]], [[0.6887, 0.628], [0.9348, 0.7985], [0.3309, 0.7842]], [[0.1704, 0.261], [0.8504, 0.3528], [0.9538, 0.6837]]]])
in0Add60141 = tf.constant([[[[[0.7617]], [[0.307]]], [[[0.4701]], [[0.5514]]]]])
in1Add60141 = tf.constant([[[[[0.8386]], [[0.0575]]], [[[0.9704]], [[0.2894]]]]])
print (np.array2string(model.predict([in0Ave99825,in0Sub64992,in1Sub64992,in0Add60141,in1Add60141],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add20892.png')

LAve99825 = average_pooling2D_layer([[[[1.7788, 1.1797], [1.9668, 1.5746]]]], 1, 1, 6, 5, true, Ave99825), 
LRes10789 = reshape_layer(Ave99825, [1, 2], Res10789), 
LPer74153 = permute_layer(Res10789, 1,2, Per74153), 
LRes91129 = reshape_layer(Per74153, [1, 2, 1], Res91129), 
LRes23113 = reshape_layer(Res91129, [1, 2, 1, 1], Res23113), 
LZer46569 = zero_padding3D_layer(Res23113, 2, 0, 1, 0, 1, 0, Zer46569), 
LSub64992 = subtract_layer([[[[0.7875, 0.3362], [0.2299, 0.6897], [0.7094, 0.5791]], [[0.8672, 0.3476], [0.2392, 0.9389], [0.758, 0.2477]], [[0.5468, 0.4849], [0.1586, 0.4722], [0.7705, 0.9886]]]], [[[[0.1866, 0.5442], [0.3177, 0.8922], [0.9598, 0.8607]], [[0.6887, 0.628], [0.9348, 0.7985], [0.3309, 0.7842]], [[0.1704, 0.261], [0.8504, 0.3528], [0.9538, 0.6837]]]], Sub64992), 
LReL25933 = relu_layer(Sub64992, 3.5300770664665246, 0.4685734707141885, 2.92924433508945, ReL25933), 
LRes29633 = reshape_layer(ReL25933, [3, 3, 2, 1], Res29633), 
LAdd60141 = add_layer([[[[[[0.7617]], [[0.307]]], [[[0.4701]], [[0.5514]]]]], [[[[[0.8386]], [[0.0575]]], [[[0.9704]], [[0.2894]]]]]], Add60141), 
LZer16174 = zero_padding3D_layer(Add60141, 1, 0, 1, 0, 1, 0, Zer16174), 
LAdd36640 = add_layer([Res29633,Zer16174], Add36640), 
LAdd20892 = add_layer([Zer46569,Add36640], Add20892), 
exec_layers([LAve99825,LRes10789,LPer74153,LRes91129,LRes23113,LZer46569,LSub64992,LReL25933,LRes29633,LAdd60141,LZer16174,LAdd36640,LAdd20892],["Ave99825","Res10789","Per74153","Res91129","Res23113","Zer46569","Sub64992","ReL25933","Res29633","Add60141","Zer16174","Add36640","Add20892"],Add20892,"Add20892")

Actual (Unparsed): [[[[[-1.0910004], [-1.4700295]], [[-1.4137069], [-1.4674523]], [[-1.4898970], [-1.5045165]]], [[[-1.2889258], [-1.5039542]], [[-1.6985059], [0.2935215]], [[-1.1724385], [-1.2594558]]], [[[-1.1961951], [-1.2676526]], [[-1.6967253], [1.9026815]], [[-1.4584557], [0.7908019]]]]]

Expected (Unparsed): [[[[[-1.0910003861105833],[-1.4700294665712903]],[[-1.4137069353914449],[-1.4674523124823622]],[[-1.4898969817295717],[-1.5045164740158545]]],[[[-1.2889258201402565],[-1.5039541858509975]],[[-1.6985058908915285],[0.293521530625533]],[[-1.1724384553207092],[-1.2594558517009011]]],[[[-1.1961951302859186],[-1.2676525845698323]],[[-1.6967253117028147],[1.9026814877405351]],[[-1.4584557018446498],[0.790801866558017]]]]]

Actual:   [[[[[-1.091], [-1.47]], [[-1.4137], [-1.4674]], [[-1.4898], [-1.5045]]], [[[-1.2889], [-1.5039]], [[-1.6985], [0.2936]], [[-1.1724], [-1.2594]]], [[[-1.1961], [-1.2676]], [[-1.6967], [1.9027]], [[-1.4584], [0.7909]]]]]

Expected: [[[[[-1.091], [-1.47]], [[-1.4137], [-1.4674]], [[-1.4898], [-1.5045]]], [[[-1.2889], [-1.5039]], [[-1.6985], [0.2936]], [[-1.1724], [-1.2594]]], [[[-1.1961], [-1.2676]], [[-1.6967], [1.9027]], [[-1.4584], [0.7909]]]]]