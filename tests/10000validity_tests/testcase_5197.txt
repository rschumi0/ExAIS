import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul73194 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Mul73194 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Min47786 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min47786 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Ave65710 = tf.keras.layers.Input(shape=([1, 2, 2]))

Mul73194 = keras.layers.Multiply(name = 'Mul73194', )([in0Mul73194,in1Mul73194])
Res2178 = keras.layers.Reshape((2, 2, 2), name = 'Res2178', )(Mul73194)
Min47786 = keras.layers.Minimum(name = 'Min47786', )([in0Min47786,in1Min47786])
Ave65710 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 5), padding='same', name = 'Ave65710', )(in0Ave65710)
Max36663 = keras.layers.Maximum(name = 'Max36663', )([Min47786,Ave65710])
Zer98336 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer98336', )(Max36663)
Max51508 = keras.layers.Maximum(name = 'Max51508', )([Res2178,Zer98336])
model = tf.keras.models.Model(inputs=[in0Mul73194,in1Mul73194,in0Min47786,in1Min47786,in0Ave65710], outputs=Max51508)
in0Mul73194 = tf.constant([[[[[0.9672, 0.372]], [[0.1435, 0.9093]]], [[[0.0517, 0.0088]], [[0.3058, 0.6615]]]]])
in1Mul73194 = tf.constant([[[[[0.7092, 0.2518]], [[0.7938, 0.4508]]], [[[0.6013, 0.7211]], [[0.0961, 0.1852]]]]])
in0Min47786 = tf.constant([[[[0.7098, 0.8454]]]])
in1Min47786 = tf.constant([[[[0.6655, 0.2791]]]])
in0Ave65710 = tf.constant([[[[1.3036, 1.9783], [1.0949, 1.7007]]]])
print (np.array2string(model.predict([in0Mul73194,in1Mul73194,in0Min47786,in1Min47786,in0Ave65710],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max51508.png')

LMul73194 = multiply_layer([[[[[[0.9672, 0.372]], [[0.1435, 0.9093]]], [[[0.0517, 0.0088]], [[0.3058, 0.6615]]]]], [[[[[0.7092, 0.2518]], [[0.7938, 0.4508]]], [[[0.6013, 0.7211]], [[0.0961, 0.1852]]]]]], Mul73194), 
LRes2178 = reshape_layer(Mul73194, [2, 2, 2], Res2178), 
LMin47786 = minimum_layer([[[[[0.7098, 0.8454]]]], [[[[0.6655, 0.2791]]]]], Min47786), 
LAve65710 = average_pooling2D_layer([[[[1.3036, 1.9783], [1.0949, 1.7007]]]], 1, 1, 1, 5, true, Ave65710), 
LMax36663 = maximum_layer([Min47786,Ave65710], Max36663), 
LZer98336 = zero_padding2D_layer(Max36663, 1, 0, 1, 0, Zer98336), 
LMax51508 = maximum_layer([Res2178,Zer98336], Max51508), 
exec_layers([LMul73194,LRes2178,LMin47786,LAve65710,LMax36663,LZer98336,LMax51508],["Mul73194","Res2178","Min47786","Ave65710","Max36663","Zer98336","Max51508"],Max51508,"Max51508")

Actual (Unparsed): [[[[0.6859383, 0.0936696], [0.1139103, 0.4099125]], [[0.0310872, 0.0063457], [1.3036000, 1.9783000]]]]

Expected (Unparsed): [[[[0.68593824,0.0936696],[0.11391029999999998,0.40991244]],[[0.03108721,0.00634568],[1.3036,1.9783]]]]

Actual:   [[[[0.686, 0.0937], [0.114, 0.41]], [[0.0311, 0.0064], [1.3036, 1.9783]]]]

Expected: [[[[0.686, 0.0937], [0.114, 0.41]], [[0.0311, 0.0064], [1.3036, 1.9783]]]]