import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_85828 = tf.keras.layers.Input(shape=([2, 3, 1, 3]))

Up_85828 = keras.layers.UpSampling3D(size=(1, 1, 1), name = 'Up_85828', )(in0Up_85828)
Res72660 = keras.layers.Reshape((2, 3, 3), name = 'Res72660', )(Up_85828)
Res93559 = keras.layers.Reshape((2, 9), name = 'Res93559', )(Res72660)
GRU83184 = keras.layers.GRU(1,reset_after=True, recurrent_activation='sigmoid', name = 'GRU83184', )(Res93559)
Res17518 = keras.layers.Reshape((1, 1), name = 'Res17518', )(GRU83184)
Res44602 = keras.layers.Reshape((1, 1, 1), name = 'Res44602', )(Res17518)
Sep92155 = keras.layers.SeparableConv2D(4, (1, 1),strides=(1, 1), padding='valid', name = 'Sep92155', )(Res44602)
Glo6445 = keras.layers.GlobalMaxPool2D(name = 'Glo6445', )(Sep92155)
model = tf.keras.models.Model(inputs=[in0Up_85828], outputs=Glo6445)
w = model.get_layer('GRU83184').get_weights() 
w[0] = np.array([[8, 4, 3], [10, 6, 1], [5, 8, 2], [6, 9, 3], [1, 7, 10], [4, 5, 7], [8, 7, 8], [6, 8, 8], [6, 9, 7]])
w[1] = np.array([[3, 10, 10]])
w[2] = np.array([[5, 5, 8], [3, 3, 8]])
model.get_layer('GRU83184').set_weights(w) 
w = model.get_layer('Sep92155').get_weights() 
w[0] = np.array([[[[0.7594]]]])
w[1] = np.array([[[[0.0788, 0.9743, 0.0511, 0.4586]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep92155').set_weights(w) 
in0Up_85828 = tf.constant([[[[[1.6041, 1.0434, 1.2163]], [[1.031, 1.4602, 1.0095]], [[1.2388, 1.7564, 1.7457]]], [[[1.0147, 1.3622, 1.9511]], [[1.3513, 1.8614, 1.8869]], [[1.0315, 1.0275, 1.2266]]]]])
print (np.array2string(model.predict([in0Up_85828],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo6445.png')

LUp_85828 = up_sampling3D_layer([[[[[1.6041, 1.0434, 1.2163]], [[1.031, 1.4602, 1.0095]], [[1.2388, 1.7564, 1.7457]]], [[[1.0147, 1.3622, 1.9511]], [[1.3513, 1.8614, 1.8869]], [[1.0315, 1.0275, 1.2266]]]]], 1, 1, 1, Up_85828), 
LRes72660 = reshape_layer(Up_85828, [2, 3, 3], Res72660), 
LRes93559 = reshape_layer(Res72660, [2, 9], Res93559), 
LGRU83184 = gru_layer(Res93559,[[8, 4, 3], [10, 6, 1], [5, 8, 2], [6, 9, 3], [1, 7, 10], [4, 5, 7], [8, 7, 8], [6, 8, 8], [6, 9, 7]],[[3, 10, 10]],[[5, 5, 8], [3, 3, 8]], true, GRU83184), 
LRes17518 = reshape_layer(GRU83184, [1, 1], Res17518), 
LRes44602 = reshape_layer(Res17518, [1, 1, 1], Res44602), 
LSep92155 = separable_conv2D_layer(Res44602, 1, 1,[[[[[0.7594]]]],[[[[0.0788, 0.9743, 0.0511, 0.4586]]]]],[0, 0, 0, 0], 1, 1, false, Sep92155), 
LGlo6445 = global_max_pool2D_layer(Sep92155, Glo6445), 
exec_layers([LUp_85828,LRes72660,LRes93559,LGRU83184,LRes17518,LRes44602,LSep92155,LGlo6445],["Up_85828","Res72660","Res93559","GRU83184","Res17518","Res44602","Sep92155","Glo6445"],Glo6445,"Glo6445")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0.0,0.0,0.0,0.0]]

Actual:   [[0, 0, 0, 0]]

Expected: [[0, 0, 0, 0]]