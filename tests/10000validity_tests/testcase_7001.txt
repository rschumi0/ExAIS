import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add7702 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Add7702 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Sub11024 = tf.keras.layers.Input(shape=([2]))
in1Sub11024 = tf.keras.layers.Input(shape=([2]))
in0Con75210 = tf.keras.layers.Input(shape=([6]))

Add7702 = keras.layers.Add(name = 'Add7702', )([in0Add7702,in1Add7702])
Thr26749 = keras.layers.ThresholdedReLU(theta=9.20566358632277, name = 'Thr26749', )(Add7702)
Res77291 = keras.layers.Reshape((1, 2, 4), name = 'Res77291', )(Thr26749)
Res69414 = keras.layers.Reshape((1, 8), name = 'Res69414', )(Res77291)
Fla12587 = keras.layers.Flatten(name = 'Fla12587', )(Res69414)
Sub11024 = keras.layers.Subtract(name = 'Sub11024', )([in0Sub11024,in1Sub11024])
Con75210 = keras.layers.Concatenate(axis=1, name = 'Con75210', )([Sub11024,in0Con75210])
Ave51784 = keras.layers.Average(name = 'Ave51784', )([Fla12587,Con75210])
model = tf.keras.models.Model(inputs=[in0Add7702,in1Add7702,in0Sub11024,in1Sub11024,in0Con75210], outputs=Ave51784)
in0Add7702 = tf.constant([[[[[0.0726, 0.8266], [0.1755, 0.3264]], [[0.3083, 0.6577], [0.7079, 0.0445]]]]])
in1Add7702 = tf.constant([[[[[0.2126, 0.4664], [0.0137, 0.6901]], [[0.4132, 0.7206], [0.4698, 0.465]]]]])
in0Sub11024 = tf.constant([[0.906, 0.4814]])
in1Sub11024 = tf.constant([[0.54, 0.813]])
in0Con75210 = tf.constant([[0.9518, 0.6892, 0.2514, 0.7232, 0.4677, 0.2602]])
print (np.array2string(model.predict([in0Add7702,in1Add7702,in0Sub11024,in1Sub11024,in0Con75210],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave51784.png')

LAdd7702 = add_layer([[[[[[0.0726, 0.8266], [0.1755, 0.3264]], [[0.3083, 0.6577], [0.7079, 0.0445]]]]], [[[[[0.2126, 0.4664], [0.0137, 0.6901]], [[0.4132, 0.7206], [0.4698, 0.465]]]]]], Add7702), 
LThr26749 = thresholded_relu_layer(Add7702, 9.20566358632277, Thr26749), 
LRes77291 = reshape_layer(Thr26749, [1, 2, 4], Res77291), 
LRes69414 = reshape_layer(Res77291, [1, 8], Res69414), 
LFla12587 = flatten_layer(Res69414, Fla12587), 
LSub11024 = subtract_layer([[0.906, 0.4814]], [[0.54, 0.813]], Sub11024), 
LCon75210 = concatenate_layer([Sub11024,[[0.9518, 0.6892, 0.2514, 0.7232, 0.4677, 0.2602]]], 1, Con75210), 
LAve51784 = average_layer([Fla12587,Con75210], Ave51784), 
exec_layers([LAdd7702,LThr26749,LRes77291,LRes69414,LFla12587,LSub11024,LCon75210,LAve51784],["Add7702","Thr26749","Res77291","Res69414","Fla12587","Sub11024","Con75210","Ave51784"],Ave51784,"Ave51784")

Actual (Unparsed): [[0.1830000, -0.1658000, 0.4759000, 0.3446000, 0.1257000, 0.3616000, 0.2338500, 0.1301000]]

Expected (Unparsed): [[0.183,-0.16579999999999998,0.4759,0.3446,0.1257,0.3616,0.23385,0.1301]]

Actual:   [[0.183, -0.1658, 0.4759, 0.3446, 0.1257, 0.3616, 0.2339, 0.1301]]

Expected: [[0.183, -0.1657, 0.4759, 0.3446, 0.1257, 0.3616, 0.2339, 0.1301]]