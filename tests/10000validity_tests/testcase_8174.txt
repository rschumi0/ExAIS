import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max92216 = tf.keras.layers.Input(shape=([1, 2]))
in1Max92216 = tf.keras.layers.Input(shape=([1, 2]))
in0Con47336 = tf.keras.layers.Input(shape=([1, 2]))
in0Mul53934 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul53934 = tf.keras.layers.Input(shape=([1, 2, 2]))

Max92216 = keras.layers.Maximum(name = 'Max92216', )([in0Max92216,in1Max92216])
Con47336 = keras.layers.Concatenate(axis=2, name = 'Con47336', )([Max92216,in0Con47336])
Mul53934 = keras.layers.Multiply(name = 'Mul53934', )([in0Mul53934,in1Mul53934])
Res38109 = keras.layers.Reshape((1, 4), name = 'Res38109', )(Mul53934)
Max93885 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max93885', )(Res38109)
Ave84112 = keras.layers.Average(name = 'Ave84112', )([Con47336,Max93885])
Res31225 = keras.layers.Reshape((1, 4, 1), name = 'Res31225', )(Ave84112)
Glo44469 = keras.layers.GlobalAveragePooling2D(name = 'Glo44469', )(Res31225)
model = tf.keras.models.Model(inputs=[in0Max92216,in1Max92216,in0Con47336,in0Mul53934,in1Mul53934], outputs=Glo44469)
in0Max92216 = tf.constant([[[0.1665, 0.0115]]])
in1Max92216 = tf.constant([[[0.5856, 0.8205]]])
in0Con47336 = tf.constant([[[0.8348, 0.0299]]])
in0Mul53934 = tf.constant([[[[0.7974, 0.8021], [0.1577, 0.4529]]]])
in1Mul53934 = tf.constant([[[[0.3153, 0.2254], [0.7512, 0.1438]]]])
print (np.array2string(model.predict([in0Max92216,in1Max92216,in0Con47336,in0Mul53934,in1Mul53934],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo44469.png')

LMax92216 = maximum_layer([[[[0.1665, 0.0115]]], [[[0.5856, 0.8205]]]], Max92216), 
LCon47336 = concatenate_layer([Max92216,[[[0.8348, 0.0299]]]], 2, Con47336), 
LMul53934 = multiply_layer([[[[[0.7974, 0.8021], [0.1577, 0.4529]]]], [[[[0.3153, 0.2254], [0.7512, 0.1438]]]]], Mul53934), 
LRes38109 = reshape_layer(Mul53934, [1, 4], Res38109), 
LMax93885 = max_pool1D_layer(Res38109, 1, Max93885), 
LAve84112 = average_layer([Con47336,Max93885], Ave84112), 
LRes31225 = reshape_layer(Ave84112, [1, 4, 1], Res31225), 
LGlo44469 = global_average_pooling2D_layer(Res31225, Glo44469), 
exec_layers([LMax92216,LCon47336,LMul53934,LRes38109,LMax93885,LAve84112,LRes31225,LGlo44469],["Max92216","Con47336","Mul53934","Res38109","Max93885","Ave84112","Res31225","Glo44469"],Glo44469,"Glo44469")

Actual (Unparsed): [[0.3608256]]

Expected (Unparsed): [[0.36082560249999995]]

Actual:   [[0.3609]]

Expected: [[0.3609]]