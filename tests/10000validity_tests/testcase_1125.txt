import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max91578 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max91578 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Max91578 = keras.layers.Maximum(name = 'Max91578', )([in0Max91578,in1Max91578])
Res52171 = keras.layers.Reshape((1, 1, 2), name = 'Res52171', )(Max91578)
Res49258 = keras.layers.Reshape((1, 2), name = 'Res49258', )(Res52171)
Ave31967 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave31967', )(Res49258)
model = tf.keras.models.Model(inputs=[in0Max91578,in1Max91578], outputs=Ave31967)
in0Max91578 = tf.constant([[[[[0.8866], [0.7911]]]]])
in1Max91578 = tf.constant([[[[[0.7273], [0.2086]]]]])
print (np.array2string(model.predict([in0Max91578,in1Max91578],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave31967.png')

LMax91578 = maximum_layer([[[[[[0.8866], [0.7911]]]]], [[[[[0.7273], [0.2086]]]]]], Max91578), 
LRes52171 = reshape_layer(Max91578, [1, 1, 2], Res52171), 
LRes49258 = reshape_layer(Res52171, [1, 2], Res49258), 
LAve31967 = average_pooling1D_layer(Res49258, 1, 1, false, Ave31967), 
exec_layers([LMax91578,LRes52171,LRes49258,LAve31967],["Max91578","Res52171","Res49258","Ave31967"],Ave31967,"Ave31967")

Actual (Unparsed): [[[0.8866000, 0.7911000]]]

Expected (Unparsed): [[[0.8866,0.7911]]]

Actual:   [[[0.8866, 0.7911]]]

Expected: [[[0.8866, 0.7911]]]