import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer99965 = tf.keras.layers.Input(shape=([4, 3, 1, 1]))
in0Con64279 = tf.keras.layers.Input(shape=([8, 11]))
in0Lay83204 = tf.keras.layers.Input(shape=([1, 4]))

Zer99965 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer99965', )(in0Zer99965)
Res82179 = keras.layers.Reshape((6, 5, 3), name = 'Res82179', )(Zer99965)
Zer86937 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer86937', )(Res82179)
Res61545 = keras.layers.Reshape((8, 21), name = 'Res61545', )(Zer86937)
Con64279 = keras.layers.Concatenate(axis=2, name = 'Con64279', )([Res61545,in0Con64279])
Lay83204 = keras.layers.LayerNormalization(axis=1, epsilon=2.5653304449770857, name = 'Lay83204', )(in0Lay83204)
Res72670 = keras.layers.Reshape((1, 4, 1), name = 'Res72670', )(Lay83204)
Con49216 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 2), padding='same', name = 'Con49216', )(Res72670)
Res20449 = keras.layers.Reshape((1, 32), name = 'Res20449', )(Con49216)
Dot93555 = keras.layers.Dot(axes=(2, 2), name = 'Dot93555', )([Con64279,Res20449])
model = tf.keras.models.Model(inputs=[in0Zer99965,in0Con64279,in0Lay83204], outputs=Dot93555)
w = model.get_layer('Con49216').get_weights() 
w[0] = np.array([[[[0.1625], [0.5334], [0.186], [0.3288]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con49216').set_weights(w) 
in0Zer99965 = tf.constant([[[[[1.8378]], [[1.7909]], [[1.1069]]], [[[1.3967]], [[1.1846]], [[1.5692]]], [[[1.7606]], [[1.7168]], [[1.9194]]], [[[1.2458]], [[1.3593]], [[1.6869]]]]])
in0Con64279 = tf.constant([[[0.7964, 0.6392, 0.5144, 0.791, 0.2592, 0.1917, 0.4705, 0.1789, 0.189, 0.7512, 0.2232], [0.569, 0.5624, 0.7438, 0.9104, 0.9442, 0.7221, 0.1181, 0.9021, 0.0919, 0.9605, 0.9394], [0.3602, 0.3209, 0.6496, 0.7386, 0.7429, 0.628, 0.0125, 0.4418, 0.2369, 0.959, 0.5475], [0.2919, 0.4114, 0.8049, 0.0607, 0.0277, 0.2219, 0.7501, 0.2416, 0.7319, 0.8612, 0.7464], [0.724, 0.181, 0.8544, 0.8239, 0.6164, 0.2326, 0.2243, 0.6725, 0.5543, 0.7741, 0.517], [0.0249, 0.4332, 0.0203, 0.9701, 0.0583, 0.1107, 0.4972, 0.1286, 0.0911, 0.5359, 0.878], [0.7736, 0.7003, 0.9549, 0.9466, 0.1104, 0.0072, 0.0748, 0.3571, 0.7847, 0.2882, 0.3221], [0.5302, 0.4439, 0.2563, 0.6255, 0.9801, 0.2399, 0.3281, 0.4713, 0.603, 0.8843, 0.9407]]])
in0Lay83204 = tf.constant([[[1.8882, 1.9911, 1.4378, 1.0905]]])
print (np.array2string(model.predict([in0Zer99965,in0Con64279,in0Lay83204],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot93555.png')

LZer99965 = zero_padding3D_layer([[[[[1.8378]], [[1.7909]], [[1.1069]]], [[[1.3967]], [[1.1846]], [[1.5692]]], [[[1.7606]], [[1.7168]], [[1.9194]]], [[[1.2458]], [[1.3593]], [[1.6869]]]]], 1, 1, 1, 1, 1, 1, Zer99965), 
LRes82179 = reshape_layer(Zer99965, [6, 5, 3], Res82179), 
LZer86937 = zero_padding2D_layer(Res82179, 1, 1, 1, 1, Zer86937), 
LRes61545 = reshape_layer(Zer86937, [8, 21], Res61545), 
LCon64279 = concatenate_layer([Res61545,[[[0.7964, 0.6392, 0.5144, 0.791, 0.2592, 0.1917, 0.4705, 0.1789, 0.189, 0.7512, 0.2232], [0.569, 0.5624, 0.7438, 0.9104, 0.9442, 0.7221, 0.1181, 0.9021, 0.0919, 0.9605, 0.9394], [0.3602, 0.3209, 0.6496, 0.7386, 0.7429, 0.628, 0.0125, 0.4418, 0.2369, 0.959, 0.5475], [0.2919, 0.4114, 0.8049, 0.0607, 0.0277, 0.2219, 0.7501, 0.2416, 0.7319, 0.8612, 0.7464], [0.724, 0.181, 0.8544, 0.8239, 0.6164, 0.2326, 0.2243, 0.6725, 0.5543, 0.7741, 0.517], [0.0249, 0.4332, 0.0203, 0.9701, 0.0583, 0.1107, 0.4972, 0.1286, 0.0911, 0.5359, 0.878], [0.7736, 0.7003, 0.9549, 0.9466, 0.1104, 0.0072, 0.0748, 0.3571, 0.7847, 0.2882, 0.3221], [0.5302, 0.4439, 0.2563, 0.6255, 0.9801, 0.2399, 0.3281, 0.4713, 0.603, 0.8843, 0.9407]]]], 2, Con64279), 
LLay83204 = layer_normalization_layer([[[1.8882, 1.9911, 1.4378, 1.0905]]], 1, 2.5653304449770857, Lay83204), 
LRes72670 = reshape_layer(Lay83204, [1, 4, 1], Res72670), 
LCon49216 = conv2D_transpose_layer(Res72670, 1, 1,[[[[0.1625], [0.5334], [0.186], [0.3288]]]],[0, 0, 0, 0], 1, 2, true, Con49216), 
LRes20449 = reshape_layer(Con49216, [1, 32], Res20449), 
LDot93555 = dot_layer(Con64279,Res20449, 2, 2, Dot93555), 
exec_layers([LZer99965,LRes82179,LZer86937,LRes61545,LCon64279,LLay83204,LRes72670,LCon49216,LRes20449,LDot93555],["Zer99965","Res82179","Zer86937","Res61545","Con64279","Lay83204","Res72670","Con49216","Res20449","Dot93555"],Dot93555,"Dot93555")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]

Expected (Unparsed): [[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]]]

Actual:   [[[0], [0], [0], [0], [0], [0], [0], [0]]]

Expected: [[[0], [0], [0], [0], [0], [0], [0], [0]]]