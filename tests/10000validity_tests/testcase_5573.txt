import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub35947 = tf.keras.layers.Input(shape=([2]))
in1Sub35947 = tf.keras.layers.Input(shape=([2]))
in0Con83759 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot55252 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot55252 = tf.keras.layers.Input(shape=([2, 3]))
in0Con24072 = tf.keras.layers.Input(shape=([4, 1]))
in0Glo17041 = tf.keras.layers.Input(shape=([2, 1]))
in0PRe15082 = tf.keras.layers.Input(shape=([1, 1]))
in0Con73697 = tf.keras.layers.Input(shape=([11]))

Sub35947 = keras.layers.Subtract(name = 'Sub35947', )([in0Sub35947,in1Sub35947])
Res73090 = keras.layers.Reshape((2, 1), name = 'Res73090', )(Sub35947)
Con83759 = keras.layers.Concatenate(axis=2, name = 'Con83759', )([Res73090,in0Con83759])
Dot55252 = keras.layers.Dot(axes=(2, 2), name = 'Dot55252', )([in0Dot55252,in1Dot55252])
Sub15959 = keras.layers.Subtract(name = 'Sub15959', )([Con83759,Dot55252])
Up_79214 = keras.layers.UpSampling1D(size=(2), name = 'Up_79214', )(Sub15959)
Con24072 = keras.layers.Concatenate(axis=2, name = 'Con24072', )([Up_79214,in0Con24072])
Glo17041 = keras.layers.GlobalMaxPool1D(name = 'Glo17041', )(in0Glo17041)
Den54733 = keras.layers.Dense(3,name = 'Den54733', )(Glo17041)
Res44957 = keras.layers.Reshape((3, 1), name = 'Res44957', )(Den54733)
Con8928 = keras.layers.Conv1D(3, (3),strides=(1), padding='valid', dilation_rate=(1), name = 'Con8928', )(Res44957)
Zer84494 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer84494', )(Con8928)
Max20354 = keras.layers.Maximum(name = 'Max20354', )([Con24072,Zer84494])
Fla73194 = keras.layers.Flatten(name = 'Fla73194', )(Max20354)
PRe15082 = keras.layers.PReLU(name = 'PRe15082', input_shape=(1, 1))(in0PRe15082)
Res76822 = keras.layers.Reshape((1, 1, 1), name = 'Res76822', )(PRe15082)
Glo32716 = keras.layers.GlobalMaxPool2D(name = 'Glo32716', )(Res76822)
Con73697 = keras.layers.Concatenate(axis=1, name = 'Con73697', )([Glo32716,in0Con73697])
Sub6047 = keras.layers.Subtract(name = 'Sub6047', )([Fla73194,Con73697])
model = tf.keras.models.Model(inputs=[in0Sub35947,in1Sub35947,in0Con83759,in0Dot55252,in1Dot55252,in0Con24072,in0Glo17041,in0PRe15082,in0Con73697], outputs=Sub6047)
w = model.get_layer('Den54733').get_weights() 
w[0] = np.array([[0.6395, 0.6658, 0.7101]])
w[1] = np.array([0.7627, 0.294, 0.5772])
model.get_layer('Den54733').set_weights(w) 
w = model.get_layer('Con8928').get_weights() 
w[0] = np.array([[[0.124, 0.0131, 0.6584]], [[0.7422, 0.3042, 0.6218]], [[0.4633, 0.1685, 0.0675]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con8928').set_weights(w) 
w = model.get_layer('PRe15082').get_weights() 
w[0] = np.array([[0.1743]])
model.get_layer('PRe15082').set_weights(w) 
in0Sub35947 = tf.constant([[0.3356, 0.7287]])
in1Sub35947 = tf.constant([[0.1064, 0.8188]])
in0Con83759 = tf.constant([[[0.9084], [0.8937]]])
in0Dot55252 = tf.constant([[[0.1175, 0.4598, 0.11], [0.2437, 0.0619, 0.8327]]])
in1Dot55252 = tf.constant([[[0.5182, 0.7469, 0.6941], [0.5127, 0.1635, 0.7879]]])
in0Con24072 = tf.constant([[[0.7615], [0.9067], [0.3831], [0.336]]])
in0Glo17041 = tf.constant([[[1.8125], [1.891]]])
in0PRe15082 = tf.constant([[[0.5395]]])
in0Con73697 = tf.constant([[0.9761, 0.0667, 0.2369, 0.3377, 0.7939, 0.4714, 0.2868, 0.9985, 0.57, 0.6583, 0.775]])
print (np.array2string(model.predict([in0Sub35947,in1Sub35947,in0Con83759,in0Dot55252,in1Dot55252,in0Con24072,in0Glo17041,in0PRe15082,in0Con73697],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub6047.png')

LSub35947 = subtract_layer([[0.3356, 0.7287]], [[0.1064, 0.8188]], Sub35947), 
LRes73090 = reshape_layer(Sub35947, [2, 1], Res73090), 
LCon83759 = concatenate_layer([Res73090,[[[0.9084], [0.8937]]]], 2, Con83759), 
LDot55252 = dot_layer([[[0.1175, 0.4598, 0.11], [0.2437, 0.0619, 0.8327]]], [[[0.5182, 0.7469, 0.6941], [0.5127, 0.1635, 0.7879]]], 2, 2, Dot55252), 
LSub15959 = subtract_layer(Con83759,Dot55252, Sub15959), 
LUp_79214 = up_sampling1D_layer(Sub15959, 2, Up_79214), 
LCon24072 = concatenate_layer([Up_79214,[[[0.7615], [0.9067], [0.3831], [0.336]]]], 2, Con24072), 
LGlo17041 = global_max_pool1D_layer([[[1.8125], [1.891]]], Glo17041), 
LDen54733 = dense_layer(Glo17041, [[0.6395, 0.6658, 0.7101]],[0.7627, 0.294, 0.5772], Den54733), 
LRes44957 = reshape_layer(Den54733, [3, 1], Res44957), 
LCon8928 = conv1D_layer(Res44957, 3,[[[0.124, 0.0131, 0.6584]], [[0.7422, 0.3042, 0.6218]], [[0.4633, 0.1685, 0.0675]]],[0, 0, 0], 1, false, 1, Con8928), 
LZer84494 = zero_padding1D_layer(Con8928, 3, 0, Zer84494), 
LMax20354 = maximum_layer([Con24072,Zer84494], Max20354), 
LFla73194 = flatten_layer(Max20354, Fla73194), 
LPRe15082 = prelu_layer([[[0.5395]]], [[0.1743]], PRe15082), 
LRes76822 = reshape_layer(PRe15082, [1, 1, 1], Res76822), 
LGlo32716 = global_max_pool2D_layer(Res76822, Glo32716), 
LCon73697 = concatenate_layer([Glo32716,[[0.9761, 0.0667, 0.2369, 0.3377, 0.7939, 0.4714, 0.2868, 0.9985, 0.57, 0.6583, 0.775]]], 1, Con73697), 
LSub6047 = subtract_layer(Fla73194,Con73697, Sub6047), 
exec_layers([LSub35947,LRes73090,LCon83759,LDot55252,LSub15959,LUp_79214,LCon24072,LGlo17041,LDen54733,LRes44957,LCon8928,LZer84494,LMax20354,LFla73194,LPRe15082,LRes76822,LGlo32716,LCon73697,LSub6047],["Sub35947","Res73090","Con83759","Dot55252","Sub15959","Up_79214","Con24072","Glo17041","Den54733","Res44957","Con8928","Zer84494","Max20354","Fla73194","PRe15082","Res76822","Glo32716","Con73697","Sub6047"],Sub6047,"Sub6047")

Actual (Unparsed): [[-0.5395000, -0.2897886, 0.6948000, -0.2369000, 0.3486114, 0.1128000, -0.4714000, -0.1842500, -0.6154000, 1.7167202, 0.1634841, 1.6186339]]

Expected (Unparsed): [[-0.5395,-0.2897885499999999,0.6948,-0.2369,0.34861145000000004,0.1127999999999999,-0.4714,-0.18424996999999993,-0.6154000000000001,1.7167201341900005,0.16348403306000003,1.6186338040900003]]

Actual:   [[-0.5395, -0.2897, 0.6948, -0.2369, 0.3487, 0.1128, -0.4714, -0.1842, -0.6154, 1.7168, 0.1635, 1.6187]]

Expected: [[-0.5395, -0.2897, 0.6948, -0.2369, 0.3487, 0.1128, -0.4714, -0.1842, -0.6154, 1.7168, 0.1635, 1.6187]]