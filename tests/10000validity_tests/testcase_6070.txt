import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max98707 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max98707 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave30147 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave30147 = tf.keras.layers.Input(shape=([2, 2]))

Max98707 = keras.layers.Maximum(name = 'Max98707', )([in0Max98707,in1Max98707])
Res74034 = keras.layers.Reshape((1, 2), name = 'Res74034', )(Max98707)
Zer30636 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer30636', )(Res74034)
Ave30147 = keras.layers.Average(name = 'Ave30147', )([in0Ave30147,in1Ave30147])
Ave61299 = keras.layers.Average(name = 'Ave61299', )([Zer30636,Ave30147])
Res18158 = keras.layers.Reshape((2, 2, 1), name = 'Res18158', )(Ave61299)
Res57559 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res57559', )(Res18158)
Con47333 = keras.layers.Conv3D(2, (1, 1, 1),strides=(4, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con47333', )(Res57559)
Thr72554 = keras.layers.ThresholdedReLU(theta=9.65240390471973, name = 'Thr72554', )(Con47333)
model = tf.keras.models.Model(inputs=[in0Max98707,in1Max98707,in0Ave30147,in1Ave30147], outputs=Thr72554)
w = model.get_layer('Con47333').get_weights() 
w[0] = np.array([[[[[0.6908, 0.87]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con47333').set_weights(w) 
in0Max98707 = tf.constant([[[[0.263], [0.211]]]])
in1Max98707 = tf.constant([[[[0.0654], [0.5906]]]])
in0Ave30147 = tf.constant([[[0.9969, 0.6361], [0.1597, 0.5615]]])
in1Ave30147 = tf.constant([[[0.3394, 0.5509], [0.1011, 0.6641]]])
print (np.array2string(model.predict([in0Max98707,in1Max98707,in0Ave30147,in1Ave30147],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr72554.png')

LMax98707 = maximum_layer([[[[[0.263], [0.211]]]], [[[[0.0654], [0.5906]]]]], Max98707), 
LRes74034 = reshape_layer(Max98707, [1, 2], Res74034), 
LZer30636 = zero_padding1D_layer(Res74034, 1, 0, Zer30636), 
LAve30147 = average_layer([[[[0.9969, 0.6361], [0.1597, 0.5615]]], [[[0.3394, 0.5509], [0.1011, 0.6641]]]], Ave30147), 
LAve61299 = average_layer([Zer30636,Ave30147], Ave61299), 
LRes18158 = reshape_layer(Ave61299, [2, 2, 1], Res18158), 
LRes57559 = reshape_layer(Res18158, [2, 2, 1, 1], Res57559), 
LCon47333 = conv3D_layer(Res57559, 1, 1, 1,[[[[[0.6908, 0.87]]]]],[0, 0], 4, 1, 1, false, 1, 1, 1, Con47333), 
LThr72554 = thresholded_relu_layer(Con47333, 9.65240390471973, Thr72554), 
exec_layers([LMax98707,LRes74034,LZer30636,LAve30147,LAve61299,LRes18158,LRes57559,LCon47333,LThr72554],["Max98707","Res74034","Zer30636","Ave30147","Ave61299","Res18158","Res57559","Con47333","Thr72554"],Thr72554,"Thr72554")

Actual (Unparsed): [[[[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0,0]],[[0,0]]]]]

Actual:   [[[[[0, 0]], [[0, 0]]]]]

Expected: [[[[[0, 0]], [[0, 0]]]]]