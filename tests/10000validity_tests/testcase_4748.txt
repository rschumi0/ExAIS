import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul50304 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul50304 = tf.keras.layers.Input(shape=([2, 1, 2]))

Mul50304 = keras.layers.Multiply(name = 'Mul50304', )([in0Mul50304,in1Mul50304])
Res37199 = keras.layers.Reshape((2, 1, 2, 1), name = 'Res37199', )(Mul50304)
Glo60678 = keras.layers.GlobalAveragePooling3D(name = 'Glo60678', )(Res37199)
Res44829 = keras.layers.Reshape((1, 1), name = 'Res44829', )(Glo60678)
LST22951 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST22951', )(Res44829)
Res90379 = keras.layers.Reshape((3, 1), name = 'Res90379', )(LST22951)
Sep36078 = keras.layers.SeparableConv1D(3, (2),strides=(2), padding='valid', name = 'Sep36078', )(Res90379)
model = tf.keras.models.Model(inputs=[in0Mul50304,in1Mul50304], outputs=Sep36078)
w = model.get_layer('LST22951').get_weights() 
w[0] = np.array([[7, 5, 6, 8, 3, 2, 8, 2, 5, 10, 10, 7]])
w[1] = np.array([[5, 5, 9, 9, 8, 8, 3, 8, 4, 1, 8, 10], [3, 4, 2, 4, 3, 7, 7, 6, 1, 10, 7, 3], [2, 5, 2, 1, 4, 6, 2, 7, 1, 2, 7, 6]])
w[2] = np.array([5, 4, 5, 4, 10, 7, 10, 10, 9, 5, 2, 3])
model.get_layer('LST22951').set_weights(w) 
w = model.get_layer('Sep36078').get_weights() 
w[0] = np.array([[[0.2204]], [[0.8747]]])
w[1] = np.array([[[0.2708, 0.0317, 0.647]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep36078').set_weights(w) 
in0Mul50304 = tf.constant([[[[0.9372, 0.1644]], [[0.8333, 0.581]]]])
in1Mul50304 = tf.constant([[[[0.591, 0.0262]], [[0.6688, 0.2296]]]])
print (np.array2string(model.predict([in0Mul50304,in1Mul50304],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep36078.png')

LMul50304 = multiply_layer([[[[[0.9372, 0.1644]], [[0.8333, 0.581]]]], [[[[0.591, 0.0262]], [[0.6688, 0.2296]]]]], Mul50304), 
LRes37199 = reshape_layer(Mul50304, [2, 1, 2, 1], Res37199), 
LGlo60678 = global_average_pooling3D_layer(Res37199, Glo60678), 
LRes44829 = reshape_layer(Glo60678, [1, 1], Res44829), 
LLST22951 = lstm_layer(Res44829,[[7, 5, 6, 8, 3, 2, 8, 2, 5, 10, 10, 7]],[[5, 5, 9, 9, 8, 8, 3, 8, 4, 1, 8, 10], [3, 4, 2, 4, 3, 7, 7, 6, 1, 10, 7, 3], [2, 5, 2, 1, 4, 6, 2, 7, 1, 2, 7, 6]],[5, 4, 5, 4, 10, 7, 10, 10, 9, 5, 2, 3], LST22951), 
LRes90379 = reshape_layer(LST22951, [3, 1], Res90379), 
LSep36078 = separable_conv1D_layer(Res90379, 2,[[[[0.2204]], [[0.8747]]],[[[0.2708, 0.0317, 0.647]]]],[0, 0, 0], 2, false, Sep36078), 
exec_layers([LMul50304,LRes37199,LGlo60678,LRes44829,LLST22951,LRes90379,LSep36078],["Mul50304","Res37199","Glo60678","Res44829","LST22951","Res90379","Sep36078"],Sep36078,"Sep36078")

Actual (Unparsed): [[[0.2243715, 0.0262651, 0.5360723]]]

Expected (Unparsed): [[[0.22437154198087322,0.026265058643994393,0.5360723325761632]]]

Actual:   [[[0.2244, 0.0263, 0.5361]]]

Expected: [[[0.2244, 0.0263, 0.5361]]]