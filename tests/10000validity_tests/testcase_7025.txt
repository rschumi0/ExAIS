import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den89051 = tf.keras.layers.Input(shape=([2, 2]))
in0Con81508 = tf.keras.layers.Input(shape=([2, 3]))
in0Cro10163 = tf.keras.layers.Input(shape=([4, 4]))

Den89051 = keras.layers.Dense(1,name = 'Den89051', )(in0Den89051)
Con81508 = keras.layers.Concatenate(axis=2, name = 'Con81508', )([Den89051,in0Con81508])
Cro10163 = keras.layers.Cropping1D(cropping=((1, 2)), name = 'Cro10163', )(in0Cro10163)
Zer59965 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer59965', )(Cro10163)
Mul63341 = keras.layers.Multiply(name = 'Mul63341', )([Con81508,Zer59965])
ELU76102 = keras.layers.ELU(alpha=-0.6207948471610152, name = 'ELU76102', )(Mul63341)
Loc63163 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc63163', )(ELU76102)
Zer78558 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer78558', )(Loc63163)
model = tf.keras.models.Model(inputs=[in0Den89051,in0Con81508,in0Cro10163], outputs=Zer78558)
w = model.get_layer('Den89051').get_weights() 
w[0] = np.array([[0.0844], [0.0674]])
w[1] = np.array([0.4787])
model.get_layer('Den89051').set_weights(w) 
w = model.get_layer('Loc63163').get_weights() 
w[0] = np.array([[[0.1438, 0.1948], [0.551, 0.4425], [0.7427, 0.2836], [0.6161, 0.5954]], [[0.3994, 0.6374], [0.5284, 0.8182], [0.4039, 0.8271], [0.5351, 0.2177]]])
w[1] = np.array([[0, 0], [0, 0]])
model.get_layer('Loc63163').set_weights(w) 
in0Den89051 = tf.constant([[[0.4228, 0.5726], [0.5929, 0.5805]]])
in0Con81508 = tf.constant([[[0.6155, 0.8005, 0.5114], [0.7059, 0.1255, 0.0528]]])
in0Cro10163 = tf.constant([[[1.3565, 1.3848, 1.5304, 1.4009], [1.835, 1.8118, 1.7123, 1.9456], [1.1852, 1.016, 1.2521, 1.4947], [1.1934, 1.5888, 1.7593, 1.516]]])
print (np.array2string(model.predict([in0Den89051,in0Con81508,in0Cro10163],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer78558.png')

LDen89051 = dense_layer([[[0.4228, 0.5726], [0.5929, 0.5805]]], [[0.0844], [0.0674]],[0.4787], Den89051), 
LCon81508 = concatenate_layer([Den89051,[[[0.6155, 0.8005, 0.5114], [0.7059, 0.1255, 0.0528]]]], 2, Con81508), 
LCro10163 = cropping1D_layer([[[1.3565, 1.3848, 1.5304, 1.4009], [1.835, 1.8118, 1.7123, 1.9456], [1.1852, 1.016, 1.2521, 1.4947], [1.1934, 1.5888, 1.7593, 1.516]]], 1, 2, Cro10163), 
LZer59965 = zero_padding1D_layer(Cro10163, 1, 0, Zer59965), 
LMul63341 = multiply_layer([Con81508,Zer59965], Mul63341), 
LELU76102 = elu_layer(Mul63341, -0.6207948471610152, ELU76102), 
LLoc63163 = locally_connected1D_layer(ELU76102, 1,[[[0.1438, 0.1948], [0.551, 0.4425], [0.7427, 0.2836], [0.6161, 0.5954]], [[0.3994, 0.6374], [0.5284, 0.8182], [0.4039, 0.8271], [0.5351, 0.2177]]],[[0, 0], [0, 0]], 1, Loc63163), 
LZer78558 = zero_padding1D_layer(Loc63163, 1, 1, Zer78558), 
exec_layers([LDen89051,LCon81508,LCro10163,LZer59965,LMul63341,LELU76102,LLoc63163,LZer78558],["Den89051","Con81508","Cro10163","Zer59965","Mul63341","ELU76102","Loc63163","Zer78558"],Zer78558,"Zer78558")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [1.2337509, 1.9107320], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0],[0.0,0.0],[1.23375086667854,1.91073201267834],[0,0]]]

Actual:   [[[0, 0], [0, 0], [1.2338, 1.9108], [0, 0]]]

Expected: [[[0, 0], [0, 0], [1.2338, 1.9108], [0, 0]]]