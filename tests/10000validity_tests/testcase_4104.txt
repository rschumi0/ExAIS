import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro46368 = tf.keras.layers.Input(shape=([1, 4, 2]))
in0Con45788 = tf.keras.layers.Input(shape=([6]))
in0Mul80764 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Mul80764 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Glo57381 = tf.keras.layers.Input(shape=([1, 2]))
in0Con83276 = tf.keras.layers.Input(shape=([7]))

Cro46368 = keras.layers.Cropping2D(cropping=((0, 0), (2, 1)), name = 'Cro46368', )(in0Cro46368)
Res78272 = keras.layers.Reshape((1, 2), name = 'Res78272', )(Cro46368)
Fla32163 = keras.layers.Flatten(name = 'Fla32163', )(Res78272)
Con45788 = keras.layers.Concatenate(axis=1, name = 'Con45788', )([Fla32163,in0Con45788])
Mul80764 = keras.layers.Multiply(name = 'Mul80764', )([in0Mul80764,in1Mul80764])
Res38422 = keras.layers.Reshape((2, 2, 2), name = 'Res38422', )(Mul80764)
Res32688 = keras.layers.Reshape((2, 4), name = 'Res32688', )(Res38422)
Fla85041 = keras.layers.Flatten(name = 'Fla85041', )(Res32688)
Glo57381 = keras.layers.GlobalMaxPool1D(name = 'Glo57381', )(in0Glo57381)
Res84202 = keras.layers.Reshape((2, 1), name = 'Res84202', )(Glo57381)
Glo46375 = keras.layers.GlobalAveragePooling1D(name = 'Glo46375', )(Res84202)
Con83276 = keras.layers.Concatenate(axis=1, name = 'Con83276', )([Glo46375,in0Con83276])
Mul63648 = keras.layers.Multiply(name = 'Mul63648', )([Fla85041,Con83276])
Sub88148 = keras.layers.Subtract(name = 'Sub88148', )([Con45788,Mul63648])
model = tf.keras.models.Model(inputs=[in0Cro46368,in0Con45788,in0Mul80764,in1Mul80764,in0Glo57381,in0Con83276], outputs=Sub88148)
in0Cro46368 = tf.constant([[[[1.9618, 1.691], [1.9259, 1.8076], [1.7701, 1.8365], [1.6366, 1.0468]]]])
in0Con45788 = tf.constant([[0.0412, 0.2308, 0.8109, 0.6667, 0.5291, 0.1277]])
in0Mul80764 = tf.constant([[[[[0.3433, 0.126]], [[0.4868, 0.5175]]], [[[0.5075, 0.2165]], [[0.5508, 0.787]]]]])
in1Mul80764 = tf.constant([[[[[0.6768, 0.5712]], [[0.8426, 0.1074]]], [[[0.3068, 0.4225]], [[0.0455, 0.6215]]]]])
in0Glo57381 = tf.constant([[[1.1638, 1.5999]]])
in0Con83276 = tf.constant([[0.8693, 0.4839, 0.561, 0.0892, 0.8163, 0.2682, 0.1894]])
print (np.array2string(model.predict([in0Cro46368,in0Con45788,in0Mul80764,in1Mul80764,in0Glo57381,in0Con83276],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub88148.png')

LCro46368 = cropping2D_layer([[[[1.9618, 1.691], [1.9259, 1.8076], [1.7701, 1.8365], [1.6366, 1.0468]]]], 0, 0, 2, 1, Cro46368), 
LRes78272 = reshape_layer(Cro46368, [1, 2], Res78272), 
LFla32163 = flatten_layer(Res78272, Fla32163), 
LCon45788 = concatenate_layer([Fla32163,[[0.0412, 0.2308, 0.8109, 0.6667, 0.5291, 0.1277]]], 1, Con45788), 
LMul80764 = multiply_layer([[[[[[0.3433, 0.126]], [[0.4868, 0.5175]]], [[[0.5075, 0.2165]], [[0.5508, 0.787]]]]], [[[[[0.6768, 0.5712]], [[0.8426, 0.1074]]], [[[0.3068, 0.4225]], [[0.0455, 0.6215]]]]]], Mul80764), 
LRes38422 = reshape_layer(Mul80764, [2, 2, 2], Res38422), 
LRes32688 = reshape_layer(Res38422, [2, 4], Res32688), 
LFla85041 = flatten_layer(Res32688, Fla85041), 
LGlo57381 = global_max_pool1D_layer([[[1.1638, 1.5999]]], Glo57381), 
LRes84202 = reshape_layer(Glo57381, [2, 1], Res84202), 
LGlo46375 = global_average_pooling1D_layer(Res84202, Glo46375), 
LCon83276 = concatenate_layer([Glo46375,[[0.8693, 0.4839, 0.561, 0.0892, 0.8163, 0.2682, 0.1894]]], 1, Con83276), 
LMul63648 = multiply_layer([Fla85041,Con83276], Mul63648), 
LSub88148 = subtract_layer(Con45788,Mul63648, Sub88148), 
exec_layers([LCro46368,LRes78272,LFla32163,LCon45788,LMul80764,LRes38422,LRes32688,LFla85041,LGlo57381,LRes84202,LGlo46375,LCon83276,LMul63648,LSub88148],["Cro46368","Res78272","Fla32163","Con45788","Mul80764","Res38422","Res32688","Fla85041","Glo57381","Res84202","Glo46375","Con83276","Mul63648","Sub88148"],Sub88148,"Sub88148")

Actual (Unparsed): [[1.4490334, 1.7739355, -0.1572850, 0.1996199, 0.7970114, 0.5920320, 0.5223785, 0.0350606]]

Expected (Unparsed): [[1.449033453736,1.77393543584,-0.15728497935199998,0.1996199005,0.7970114707999999,0.592032018625,0.52237853252,0.03506057729999999]]

Actual:   [[1.4491, 1.774, -0.1572, 0.1997, 0.7971, 0.5921, 0.5224, 0.0351]]

Expected: [[1.4491, 1.774, -0.1572, 0.1997, 0.7971, 0.5921, 0.5224, 0.0351]]