import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min46598 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Min46598 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Zer9810 = tf.keras.layers.Input(shape=([3, 2, 3, 1]))

Min46598 = keras.layers.Minimum(name = 'Min46598', )([in0Min46598,in1Min46598])
Res27367 = keras.layers.Reshape((2, 1, 4), name = 'Res27367', )(Min46598)
Res7677 = keras.layers.Reshape((2, 4), name = 'Res7677', )(Res27367)
Max4772 = keras.layers.MaxPool1D(pool_size=(1), strides=(9), padding='same', name = 'Max4772', )(Res7677)
Res84521 = keras.layers.Reshape((1, 4, 1), name = 'Res84521', )(Max4772)
Res67994 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res67994', )(Res84521)
Zer61559 = keras.layers.ZeroPadding3D(padding=((4, 0), (0, 0), (4, 0)), name = 'Zer61559', )(Res67994)
Zer9810 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer9810', )(in0Zer9810)
Ave38782 = keras.layers.Average(name = 'Ave38782', )([Zer61559,Zer9810])
model = tf.keras.models.Model(inputs=[in0Min46598,in1Min46598,in0Zer9810], outputs=Ave38782)
in0Min46598 = tf.constant([[[[[0.1768, 0.2692], [0.7094, 0.4499]]], [[[0.526, 0.1698], [0.2026, 0.3929]]]]])
in1Min46598 = tf.constant([[[[[0.7985, 0.8291], [0.433, 0.6219]]], [[[0.9818, 0.6206], [0.3329, 0.1407]]]]])
in0Zer9810 = tf.constant([[[[[1.4428], [1.277], [1.7592]], [[1.8167], [1.5597], [1.771]]], [[[1.71], [1.4759], [1.9227]], [[1.0586], [1.1476], [1.0752]]], [[[1.4388], [1.0412], [1.8811]], [[1.9133], [1.6706], [1.8826]]]]])
print (np.array2string(model.predict([in0Min46598,in1Min46598,in0Zer9810],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave38782.png')

LMin46598 = minimum_layer([[[[[[0.1768, 0.2692], [0.7094, 0.4499]]], [[[0.526, 0.1698], [0.2026, 0.3929]]]]], [[[[[0.7985, 0.8291], [0.433, 0.6219]]], [[[0.9818, 0.6206], [0.3329, 0.1407]]]]]], Min46598), 
LRes27367 = reshape_layer(Min46598, [2, 1, 4], Res27367), 
LRes7677 = reshape_layer(Res27367, [2, 4], Res7677), 
LMax4772 = max_pool1D_layer(Res7677, 1, 9, true, Max4772), 
LRes84521 = reshape_layer(Max4772, [1, 4, 1], Res84521), 
LRes67994 = reshape_layer(Res84521, [1, 4, 1, 1], Res67994), 
LZer61559 = zero_padding3D_layer(Res67994, 4, 0, 0, 0, 4, 0, Zer61559), 
LZer9810 = zero_padding3D_layer([[[[[1.4428], [1.277], [1.7592]], [[1.8167], [1.5597], [1.771]]], [[[1.71], [1.4759], [1.9227]], [[1.0586], [1.1476], [1.0752]]], [[[1.4388], [1.0412], [1.8811]], [[1.9133], [1.6706], [1.8826]]]]], 1, 1, 1, 1, 1, 1, Zer9810), 
LAve38782 = average_layer([Zer61559,Zer9810], Ave38782), 
exec_layers([LMin46598,LRes27367,LRes7677,LMax4772,LRes84521,LRes67994,LZer61559,LZer9810,LAve38782],["Min46598","Res27367","Res7677","Max4772","Res84521","Res67994","Zer61559","Zer9810","Ave38782"],Ave38782,"Ave38782")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.7214000], [0.6385000], [0.8796000], [0.0000000]], [[0.0000000], [0.9083500], [0.7798500], [0.8855000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.8550000], [0.7379500], [0.9613500], [0.0000000]], [[0.0000000], [0.5293000], [0.5738000], [0.5376000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.7194000], [0.5206000], [0.9405500], [0.0000000]], [[0.0000000], [0.9566500], [0.8353000], [0.9413000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0884000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.1346000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.2165000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.2249500]]]]]

Expected (Unparsed): [[[[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]]],[[[0],[0],[0],[0],[0]],[[0],[0.7214],[0.6385],[0.8796],[0]],[[0],[0.90835],[0.77985],[0.8855],[0]],[[0],[0],[0],[0],[0]]],[[[0],[0],[0],[0],[0]],[[0],[0.855],[0.73795],[0.96135],[0]],[[0],[0.5293],[0.5738],[0.5376],[0]],[[0],[0],[0],[0],[0]]],[[[0],[0],[0],[0],[0]],[[0],[0.7194],[0.5206],[0.94055],[0]],[[0],[0.95665],[0.8353],[0.9413],[0]],[[0],[0],[0],[0],[0]]],[[[0],[0],[0],[0],[0.0884]],[[0],[0],[0],[0],[0.1346]],[[0],[0],[0],[0],[0.2165]],[[0],[0],[0],[0],[0.22495]]]]]

Actual:   [[[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0.7214], [0.6385], [0.8796], [0]], [[0], [0.9084], [0.7799], [0.8855], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0.855], [0.738], [0.9614], [0]], [[0], [0.5293], [0.5738], [0.5376], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0.7194], [0.5206], [0.9406], [0]], [[0], [0.9567], [0.8353], [0.9413], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0.0884]], [[0], [0], [0], [0], [0.1346]], [[0], [0], [0], [0], [0.2165]], [[0], [0], [0], [0], [0.225]]]]]

Expected: [[[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0.7214], [0.6385], [0.8796], [0]], [[0], [0.9084], [0.7799], [0.8855], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0.855], [0.738], [0.9614], [0]], [[0], [0.5293], [0.5738], [0.5376], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0.7194], [0.5206], [0.9406], [0]], [[0], [0.9567], [0.8353], [0.9413], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0.0884]], [[0], [0], [0], [0], [0.1346]], [[0], [0], [0], [0], [0.2165]], [[0], [0], [0], [0], [0.225]]]]]