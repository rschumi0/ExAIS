import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul88705 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul88705 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Glo2658 = tf.keras.layers.Input(shape=([2, 1]))

Mul88705 = keras.layers.Multiply(name = 'Mul88705', )([in0Mul88705,in1Mul88705])
Res87872 = keras.layers.Reshape((2, 2), name = 'Res87872', )(Mul88705)
Max64680 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max64680', )(Res87872)
Glo2658 = keras.layers.GlobalMaxPool1D(name = 'Glo2658', )(in0Glo2658)
Res7015 = keras.layers.Reshape((1, 1), name = 'Res7015', )(Glo2658)
Loc91680 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc91680', )(Res7015)
Zer17078 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer17078', )(Loc91680)
Sub99876 = keras.layers.Subtract(name = 'Sub99876', )([Max64680,Zer17078])
Cro46253 = keras.layers.Cropping1D(cropping=((0, 1)), name = 'Cro46253', )(Sub99876)
model = tf.keras.models.Model(inputs=[in0Mul88705,in1Mul88705,in0Glo2658], outputs=Cro46253)
w = model.get_layer('Loc91680').get_weights() 
w[0] = np.array([[[0.0709, 0.9547]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc91680').set_weights(w) 
in0Mul88705 = tf.constant([[[[0.1918, 0.5112]], [[0.5516, 0.6432]]]])
in1Mul88705 = tf.constant([[[[0.3429, 0.2193]], [[0.8309, 0.0686]]]])
in0Glo2658 = tf.constant([[[1.4721], [1.5634]]])
print (np.array2string(model.predict([in0Mul88705,in1Mul88705,in0Glo2658],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro46253.png')

LMul88705 = multiply_layer([[[[[0.1918, 0.5112]], [[0.5516, 0.6432]]]], [[[[0.3429, 0.2193]], [[0.8309, 0.0686]]]]], Mul88705), 
LRes87872 = reshape_layer(Mul88705, [2, 2], Res87872), 
LMax64680 = max_pool1D_layer(Res87872, 1, Max64680), 
LGlo2658 = global_max_pool1D_layer([[[1.4721], [1.5634]]], Glo2658), 
LRes7015 = reshape_layer(Glo2658, [1, 1], Res7015), 
LLoc91680 = locally_connected1D_layer(Res7015, 1,[[[0.0709, 0.9547]]],[[0, 0]], 1, Loc91680), 
LZer17078 = zero_padding1D_layer(Loc91680, 1, 0, Zer17078), 
LSub99876 = subtract_layer(Max64680,Zer17078, Sub99876), 
LCro46253 = cropping1D_layer(Sub99876, 0, 1, Cro46253), 
exec_layers([LMul88705,LRes87872,LMax64680,LGlo2658,LRes7015,LLoc91680,LZer17078,LSub99876,LCro46253],["Mul88705","Res87872","Max64680","Glo2658","Res7015","Loc91680","Zer17078","Sub99876","Cro46253"],Cro46253,"Cro46253")

Actual (Unparsed): [[[0.0657682, 0.1121062]]]

Expected (Unparsed): [[[0.06576822,0.11210616]]]

Actual:   [[[0.0658, 0.1122]]]

Expected: [[[0.0658, 0.1122]]]