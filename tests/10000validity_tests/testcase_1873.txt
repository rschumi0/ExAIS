import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add42728 = tf.keras.layers.Input(shape=([1, 1]))
in1Add42728 = tf.keras.layers.Input(shape=([1, 1]))
in0PRe75082 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Fla79958 = tf.keras.layers.Input(shape=([3, 2]))
in0Con57234 = tf.keras.layers.Input(shape=([2]))
in0Sep52602 = tf.keras.layers.Input(shape=([2, 1, 2]))

Add42728 = keras.layers.Add(name = 'Add42728', )([in0Add42728,in1Add42728])
Thr8063 = keras.layers.ThresholdedReLU(theta=9.695427630557758, name = 'Thr8063', )(Add42728)
Fla15242 = keras.layers.Flatten(name = 'Fla15242', )(Thr8063)
PRe75082 = keras.layers.PReLU(name = 'PRe75082', input_shape=(2, 2, 2, 1))(in0PRe75082)
Res84819 = keras.layers.Reshape((2, 2, 2), name = 'Res84819', )(PRe75082)
Res50733 = keras.layers.Reshape((2, 4), name = 'Res50733', )(Res84819)
Fla8598 = keras.layers.Flatten(name = 'Fla8598', )(Res50733)
Fla79958 = keras.layers.Flatten(name = 'Fla79958', )(in0Fla79958)
Con57234 = keras.layers.Concatenate(axis=1, name = 'Con57234', )([Fla79958,in0Con57234])
Sub88007 = keras.layers.Subtract(name = 'Sub88007', )([Fla8598,Con57234])
Res33135 = keras.layers.Reshape((8, 1), name = 'Res33135', )(Sub88007)
Glo87005 = keras.layers.GlobalMaxPool1D(name = 'Glo87005', )(Res33135)
Sep52602 = keras.layers.SeparableConv2D(3, (1, 1),strides=(2, 2), padding='valid', name = 'Sep52602', )(in0Sep52602)
Res66861 = keras.layers.Reshape((1, 1, 3, 1), name = 'Res66861', )(Sep52602)
Glo90867 = keras.layers.GlobalAveragePooling3D(name = 'Glo90867', )(Res66861)
Min70059 = keras.layers.Minimum(name = 'Min70059', )([Glo87005,Glo90867])
Mul23639 = keras.layers.Multiply(name = 'Mul23639', )([Fla15242,Min70059])
model = tf.keras.models.Model(inputs=[in0Add42728,in1Add42728,in0PRe75082,in0Fla79958,in0Con57234,in0Sep52602], outputs=Mul23639)
w = model.get_layer('PRe75082').get_weights() 
w[0] = np.array([[[[0.7318], [0.3156]], [[0.1037], [0.4641]]], [[[0.475], [0.5913]], [[0.7], [0.7147]]]])
model.get_layer('PRe75082').set_weights(w) 
w = model.get_layer('Sep52602').get_weights() 
w[0] = np.array([[[[0.0226], [0.968]]]])
w[1] = np.array([[[[0.8744, 0.0144, 0.2037], [0.1886, 0.9374, 0.2991]]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep52602').set_weights(w) 
in0Add42728 = tf.constant([[[0.1321]]])
in1Add42728 = tf.constant([[[0.7415]]])
in0PRe75082 = tf.constant([[[[[0.6635], [0.0914]], [[0.5297], [0.5349]]], [[[0.6424], [0.346]], [[0.1495], [0.881]]]]])
in0Fla79958 = tf.constant([[[1.4641, 1.4577], [1.5776, 1.0799], [1.1554, 1.0975]]])
in0Con57234 = tf.constant([[0.8994, 0.2415]])
in0Sep52602 = tf.constant([[[[0.9951, 0.8683]], [[0.774, 0.6816]]]])
print (np.array2string(model.predict([in0Add42728,in1Add42728,in0PRe75082,in0Fla79958,in0Con57234,in0Sep52602],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul23639.png')

LAdd42728 = add_layer([[[[0.1321]]], [[[0.7415]]]], Add42728), 
LThr8063 = thresholded_relu_layer(Add42728, 9.695427630557758, Thr8063), 
LFla15242 = flatten_layer(Thr8063, Fla15242), 
LPRe75082 = prelu_layer([[[[[0.6635], [0.0914]], [[0.5297], [0.5349]]], [[[0.6424], [0.346]], [[0.1495], [0.881]]]]], [[[[0.7318], [0.3156]], [[0.1037], [0.4641]]], [[[0.475], [0.5913]], [[0.7], [0.7147]]]], PRe75082), 
LRes84819 = reshape_layer(PRe75082, [2, 2, 2], Res84819), 
LRes50733 = reshape_layer(Res84819, [2, 4], Res50733), 
LFla8598 = flatten_layer(Res50733, Fla8598), 
LFla79958 = flatten_layer([[[1.4641, 1.4577], [1.5776, 1.0799], [1.1554, 1.0975]]], Fla79958), 
LCon57234 = concatenate_layer([Fla79958,[[0.8994, 0.2415]]], 1, Con57234), 
LSub88007 = subtract_layer(Fla8598,Con57234, Sub88007), 
LRes33135 = reshape_layer(Sub88007, [8, 1], Res33135), 
LGlo87005 = global_max_pool1D_layer(Res33135, Glo87005), 
LSep52602 = separable_conv2D_layer([[[[0.9951, 0.8683]], [[0.774, 0.6816]]]], 1, 1,[[[[[0.0226], [0.968]]]],[[[[0.8744, 0.0144, 0.2037], [0.1886, 0.9374, 0.2991]]]]],[0, 0, 0], 2, 2, false, Sep52602), 
LRes66861 = reshape_layer(Sep52602, [1, 1, 3, 1], Res66861), 
LGlo90867 = global_average_pooling3D_layer(Res66861, Glo90867), 
LMin70059 = minimum_layer([Glo87005,Glo90867], Min70059), 
LMul23639 = multiply_layer([Fla15242,Min70059], Mul23639), 
exec_layers([LAdd42728,LThr8063,LFla15242,LPRe75082,LRes84819,LRes50733,LFla8598,LFla79958,LCon57234,LSub88007,LRes33135,LGlo87005,LSep52602,LRes66861,LGlo90867,LMin70059,LMul23639],["Add42728","Thr8063","Fla15242","PRe75082","Res84819","Res50733","Fla8598","Fla79958","Con57234","Sub88007","Res33135","Glo87005","Sep52602","Res66861","Glo90867","Min70059","Mul23639"],Mul23639,"Mul23639")

Actual (Unparsed): [[0.0000000]]

Expected (Unparsed): [[0.0]]

Actual:   [[0]]

Expected: [[0]]