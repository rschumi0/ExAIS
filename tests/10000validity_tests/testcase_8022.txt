import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0PRe78638 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Dep67843 = tf.keras.layers.Input(shape=([1, 2, 1]))

PRe78638 = keras.layers.PReLU(name = 'PRe78638', input_shape=(2, 1, 1))(in0PRe78638)
Zer1385 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer1385', )(PRe78638)
Dep67843 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep67843', )(in0Dep67843)
Zer81128 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer81128', )(Dep67843)
Ave93645 = keras.layers.Average(name = 'Ave93645', )([Zer1385,Zer81128])
model = tf.keras.models.Model(inputs=[in0PRe78638,in0Dep67843], outputs=Ave93645)
w = model.get_layer('PRe78638').get_weights() 
w[0] = np.array([[[0.1825]], [[0.2681]]])
model.get_layer('PRe78638').set_weights(w) 
w = model.get_layer('Dep67843').get_weights() 
w[0] = np.array([[[[0.5417]]]])
w[1] = np.array([0])
model.get_layer('Dep67843').set_weights(w) 
in0PRe78638 = tf.constant([[[[0.043]], [[0.2567]]]])
in0Dep67843 = tf.constant([[[[0.7356], [0.8451]]]])
print (np.array2string(model.predict([in0PRe78638,in0Dep67843],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave93645.png')

LPRe78638 = prelu_layer([[[[0.043]], [[0.2567]]]], [[[0.1825]], [[0.2681]]], PRe78638), 
LZer1385 = zero_padding2D_layer(PRe78638, 0, 0, 2, 0, Zer1385), 
LDep67843 = depthwise_conv2D_layer([[[[0.7356], [0.8451]]]], 1, 1,[[[[0.5417]]]],[0], 1, 1, true, Dep67843), 
LZer81128 = zero_padding2D_layer(Dep67843, 1, 0, 1, 0, Zer81128), 
LAve93645 = average_layer([Zer1385,Zer81128], Ave93645), 
exec_layers([LPRe78638,LZer1385,LDep67843,LZer81128,LAve93645],["PRe78638","Zer1385","Dep67843","Zer81128","Ave93645"],Ave93645,"Ave93645")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0215000]], [[0.0000000], [0.1992373], [0.3572453]]]]

Expected (Unparsed): [[[[0],[0],[0.0215]],[[0],[0.19923726],[0.357245335]]]]

Actual:   [[[[0], [0], [0.0215]], [[0], [0.1993], [0.3573]]]]

Expected: [[[[0], [0], [0.0215]], [[0], [0.1993], [0.3573]]]]