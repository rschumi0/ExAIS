import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub75041 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub75041 = tf.keras.layers.Input(shape=([3, 3]))
in0Dot62668 = tf.keras.layers.Input(shape=([2]))
in1Dot62668 = tf.keras.layers.Input(shape=([2]))
in0Con26267 = tf.keras.layers.Input(shape=([8]))

Sub75041 = keras.layers.Subtract(name = 'Sub75041', )([in0Sub75041,in1Sub75041])
Fla34726 = keras.layers.Flatten(name = 'Fla34726', )(Sub75041)
Dot62668 = keras.layers.Dot(axes=(1, 1), name = 'Dot62668', )([in0Dot62668,in1Dot62668])
Con26267 = keras.layers.Concatenate(axis=1, name = 'Con26267', )([Dot62668,in0Con26267])
Mul15086 = keras.layers.Multiply(name = 'Mul15086', )([Fla34726,Con26267])
Res2086 = keras.layers.Reshape((9, 1), name = 'Res2086', )(Mul15086)
Res68425 = keras.layers.Reshape((9, 1, 1), name = 'Res68425', )(Res2086)
Cro71426 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro71426', )(Res68425)
model = tf.keras.models.Model(inputs=[in0Sub75041,in1Sub75041,in0Dot62668,in1Dot62668,in0Con26267], outputs=Cro71426)
in0Sub75041 = tf.constant([[[0.0758, 0.8458, 0.254], [0.2824, 0.1535, 0.2529], [0.4735, 0.1507, 0.187]]])
in1Sub75041 = tf.constant([[[0.9428, 0.9079, 0.4852], [0.8955, 0.8484, 0.6074], [0.3028, 0.4526, 0.0111]]])
in0Dot62668 = tf.constant([[0.443, 0.1964]])
in1Dot62668 = tf.constant([[0.3495, 0.2195]])
in0Con26267 = tf.constant([[0.5145, 0.861, 0.2026, 0.5216, 0.3563, 0.3325, 0.0441, 0.1101]])
print (np.array2string(model.predict([in0Sub75041,in1Sub75041,in0Dot62668,in1Dot62668,in0Con26267],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro71426.png')

LSub75041 = subtract_layer([[[0.0758, 0.8458, 0.254], [0.2824, 0.1535, 0.2529], [0.4735, 0.1507, 0.187]]], [[[0.9428, 0.9079, 0.4852], [0.8955, 0.8484, 0.6074], [0.3028, 0.4526, 0.0111]]], Sub75041), 
LFla34726 = flatten_layer(Sub75041, Fla34726), 
LDot62668 = dot_layer([[0.443, 0.1964]], [[0.3495, 0.2195]], 1, 1, Dot62668), 
LCon26267 = concatenate_layer([Dot62668,[[0.5145, 0.861, 0.2026, 0.5216, 0.3563, 0.3325, 0.0441, 0.1101]]], 1, Con26267), 
LMul15086 = multiply_layer([Fla34726,Con26267], Mul15086), 
LRes2086 = reshape_layer(Mul15086, [9, 1], Res2086), 
LRes68425 = reshape_layer(Res2086, [9, 1, 1], Res68425), 
LCro71426 = cropping2D_layer(Res68425, 1, 0, 0, 0, Cro71426), 
exec_layers([LSub75041,LFla34726,LDot62668,LCon26267,LMul15086,LRes2086,LRes68425,LCro71426],["Sub75041","Fla34726","Dot62668","Con26267","Mul15086","Res2086","Res68425","Cro71426"],Cro71426,"Cro71426")

Actual (Unparsed): [[[[-0.0319504]], [[-0.1990632]], [[-0.1242141]], [[-0.3624598]], [[-0.1263083]], [[0.0567578]], [[-0.0133138]], [[0.0193666]]]]

Expected (Unparsed): [[[[-0.03195045000000002]],[[-0.19906320000000002]],[[-0.12421406]],[[-0.36245984]],[[-0.12630835]],[[0.05675774999999999]],[[-0.01331379]],[[0.01936659]]]]

Actual:   [[[[-0.0319]], [[-0.199]], [[-0.1242]], [[-0.3624]], [[-0.1263]], [[0.0568]], [[-0.0133]], [[0.0194]]]]

Expected: [[[[-0.0319]], [[-0.199]], [[-0.1242]], [[-0.3624]], [[-0.1263]], [[0.0568]], [[-0.0133]], [[0.0194]]]]