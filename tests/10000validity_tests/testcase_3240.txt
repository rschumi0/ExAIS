import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas79182 = tf.keras.layers.Input(shape=([4]))
in0Mul4414 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul4414 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Max30891 = tf.keras.layers.Input(shape=([2, 1]))
in1Max30891 = tf.keras.layers.Input(shape=([2, 1]))

Mas79182 = keras.layers.Masking(mask_value=1, name = 'Mas79182', )(in0Mas79182)
Res5492 = keras.layers.Reshape((4, 1), name = 'Res5492', )(Mas79182)
Mul4414 = keras.layers.Multiply(name = 'Mul4414', )([in0Mul4414,in1Mul4414])
Res9938 = keras.layers.Reshape((4, 1), name = 'Res9938', )(Mul4414)
Sub80328 = keras.layers.Subtract(name = 'Sub80328', )([Res5492,Res9938])
Glo28222 = keras.layers.GlobalAveragePooling1D(name = 'Glo28222', )(Sub80328)
ELU49526 = keras.layers.ELU(alpha=-0.08558441148009344, name = 'ELU49526', )(Glo28222)
Res75598 = keras.layers.Reshape((1, 1), name = 'Res75598', )(ELU49526)
Zer79995 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer79995', )(Res75598)
Max30891 = keras.layers.Maximum(name = 'Max30891', )([in0Max30891,in1Max30891])
Mul67296 = keras.layers.Multiply(name = 'Mul67296', )([Zer79995,Max30891])
model = tf.keras.models.Model(inputs=[in0Mas79182,in0Mul4414,in1Mul4414,in0Max30891,in1Max30891], outputs=Mul67296)
in0Mas79182 = tf.constant([[1.251, 1.2558, 1.9644, 1.005]])
in0Mul4414 = tf.constant([[[[0.2728, 0.035], [0.8813, 0.9905]]]])
in1Mul4414 = tf.constant([[[[0.84, 0.069], [0.0942, 0.4016]]]])
in0Max30891 = tf.constant([[[0.5974], [0.0628]]])
in1Max30891 = tf.constant([[[0.7307], [0.4283]]])
print (np.array2string(model.predict([in0Mas79182,in0Mul4414,in1Mul4414,in0Max30891,in1Max30891],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul67296.png')

LMas79182 = masking_layer([[1.251, 1.2558, 1.9644, 1.005]], 1, Mas79182), 
LRes5492 = reshape_layer(Mas79182, [4, 1], Res5492), 
LMul4414 = multiply_layer([[[[[0.2728, 0.035], [0.8813, 0.9905]]]], [[[[0.84, 0.069], [0.0942, 0.4016]]]]], Mul4414), 
LRes9938 = reshape_layer(Mul4414, [4, 1], Res9938), 
LSub80328 = subtract_layer(Res5492,Res9938, Sub80328), 
LGlo28222 = global_average_pooling1D_layer(Sub80328, Glo28222), 
LELU49526 = elu_layer(Glo28222, -0.08558441148009344, ELU49526), 
LRes75598 = reshape_layer(ELU49526, [1, 1], Res75598), 
LZer79995 = zero_padding1D_layer(Res75598, 1, 0, Zer79995), 
LMax30891 = maximum_layer([[[[0.5974], [0.0628]]], [[[0.7307], [0.4283]]]], Max30891), 
LMul67296 = multiply_layer([Zer79995,Max30891], Mul67296), 
exec_layers([LMas79182,LRes5492,LMul4414,LRes9938,LSub80328,LGlo28222,LELU49526,LRes75598,LZer79995,LMax30891,LMul67296],["Mas79182","Res5492","Mul4414","Res9938","Sub80328","Glo28222","ELU49526","Res75598","Zer79995","Max30891","Mul67296"],Mul67296,"Mul67296")

Actual (Unparsed): [[[0.0000000], [0.5100871]]]

Expected (Unparsed): [[[0.0],[0.5100870694105]]]

Actual:   [[[0], [0.5101]]]

Expected: [[[0], [0.5101]]]