import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot12356 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot12356 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot76481 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot76481 = tf.keras.layers.Input(shape=([3, 2]))

Dot12356 = keras.layers.Dot(axes=(2, 2), name = 'Dot12356', )([in0Dot12356,in1Dot12356])
Dot76481 = keras.layers.Dot(axes=(1, 1), name = 'Dot76481', )([in0Dot76481,in1Dot76481])
Sub63621 = keras.layers.Subtract(name = 'Sub63621', )([Dot12356,Dot76481])
ReL39591 = keras.layers.ReLU(max_value=6.480086271260503, negative_slope=4.337935113985026, threshold=5.960166000557319, name = 'ReL39591', )(Sub63621)
Res1287 = keras.layers.Reshape((2, 2, 1), name = 'Res1287', )(ReL39591)
Glo96803 = keras.layers.GlobalAveragePooling2D(name = 'Glo96803', )(Res1287)
Res43397 = keras.layers.Reshape((1, 1), name = 'Res43397', )(Glo96803)
Up_68935 = keras.layers.UpSampling1D(size=(2), name = 'Up_68935', )(Res43397)
model = tf.keras.models.Model(inputs=[in0Dot12356,in1Dot12356,in0Dot76481,in1Dot76481], outputs=Up_68935)
in0Dot12356 = tf.constant([[[0.1982, 0.3674], [0.6291, 0.2475]]])
in1Dot12356 = tf.constant([[[0.5901, 0.5326], [0.9548, 0.4594]]])
in0Dot76481 = tf.constant([[[0.2857, 0.8767], [0.7876, 0.2223], [0.3359, 0.2163]]])
in1Dot76481 = tf.constant([[[0.7343, 0.9902], [0.8494, 0.0101], [0.8821, 0.9116]]])
print (np.array2string(model.predict([in0Dot12356,in1Dot12356,in0Dot76481,in1Dot76481],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_68935.png')

LDot12356 = dot_layer([[[0.1982, 0.3674], [0.6291, 0.2475]]], [[[0.5901, 0.5326], [0.9548, 0.4594]]], 2, 2, Dot12356), 
LDot76481 = dot_layer([[[0.2857, 0.8767], [0.7876, 0.2223], [0.3359, 0.2163]]], [[[0.7343, 0.9902], [0.8494, 0.0101], [0.8821, 0.9116]]], 1, 1, Dot76481), 
LSub63621 = subtract_layer(Dot12356,Dot76481, Sub63621), 
LReL39591 = relu_layer(Sub63621, 6.480086271260503, 4.337935113985026, 5.960166000557319, ReL39591), 
LRes1287 = reshape_layer(ReL39591, [2, 2, 1], Res1287), 
LGlo96803 = global_average_pooling2D_layer(Res1287, Glo96803), 
LRes43397 = reshape_layer(Glo96803, [1, 1], Res43397), 
LUp_68935 = up_sampling1D_layer(Res43397, 2, Up_68935), 
exec_layers([LDot12356,LDot76481,LSub63621,LReL39591,LRes1287,LGlo96803,LRes43397,LUp_68935],["Dot12356","Dot76481","Sub63621","ReL39591","Res1287","Glo96803","Res43397","Up_68935"],Up_68935,"Up_68935")

Actual (Unparsed): [[[-27.9966388], [-27.9966388]]]

Expected (Unparsed): [[[-27.996638931464783],[-27.996638931464783]]]

Actual:   [[[-27.9966], [-27.9966]]]

Expected: [[[-27.9966], [-27.9966]]]