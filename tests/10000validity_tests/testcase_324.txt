import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_27810 = tf.keras.layers.Input(shape=([4, 3, 4]))

Up_27810 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_27810', )(in0Up_27810)
Res50141 = keras.layers.Reshape((4, 24), name = 'Res50141', )(Up_27810)
Sep89603 = keras.layers.SeparableConv1D(2, (3),strides=(2), padding='valid', name = 'Sep89603', )(Res50141)
model = tf.keras.models.Model(inputs=[in0Up_27810], outputs=Sep89603)
w = model.get_layer('Sep89603').get_weights() 
w[0] = np.array([[[0.997], [0.4209], [0.5314], [0.8202], [0.9631], [0.6765], [0.3093], [0.1234], [0.8273], [0.4629], [0.691], [0.8901], [0.1941], [0.2587], [0.2311], [0.9742], [0.7234], [0.7253], [0.9783], [0.9916], [0.3141], [0.323], [0.0443], [0.8858]], [[0.5008], [0.9831], [0.8583], [0.3156], [0.2926], [0.961], [0.409], [0.0833], [0.9022], [0.563], [0.2629], [0.2822], [0.8127], [0.0468], [0.9129], [0.8375], [0.4131], [0.6245], [0.0594], [0.6366], [0.9977], [0.166], [0.7559], [0.5024]], [[0.2664], [0.8945], [0.9597], [0.8498], [0.5931], [0.0939], [0.9229], [0.9831], [0.2326], [0.6082], [0.028], [0.641], [0.3275], [0.7001], [0.1301], [0.5792], [0.0448], [0.6605], [0.1996], [0.6884], [0.4248], [0.4103], [0.0799], [0.3923]]])
w[1] = np.array([[[0.4333, 0.7147], [0.764, 0.3755], [0.0906, 0.5852], [0.4758, 0.0389], [0.4907, 0.5364], [0.1297, 0.7186], [0.77, 0.3381], [0.8747, 0.3309], [0.1448, 0.2943], [0.8835, 0.6391], [0.7179, 0.5252], [0.5307, 0.9599], [0.5291, 0.0096], [0.108, 0.7324], [0.3791, 0.0913], [0.4933, 0.0623], [0.7992, 0.3531], [0.2992, 0.4411], [0.166, 0.9857], [0.4191, 0.4569], [0.3688, 0.0429], [0.5614, 0.4638], [0.6232, 0.2575], [0.3154, 0.8582]]])
w[2] = np.array([0, 0])
model.get_layer('Sep89603').set_weights(w) 
in0Up_27810 = tf.constant([[[[1.8093, 1.881, 1.0412, 1.2107], [1.9582, 1.3133, 1.9468, 1.4498], [1.4529, 1.4403, 1.4345, 1.7758]], [[1.6877, 1.7616, 1.8988, 1.921], [1.082, 1.5463, 1.0656, 1.3995], [1.9689, 1.9556, 1.2511, 1.6917]], [[1.2865, 1.0823, 1.3948, 1.6588], [1.4741, 1.5829, 1.5059, 1.1847], [1.15, 1.2297, 1.8557, 1.834]], [[1.5982, 1.8881, 1.7112, 1.1334], [1.829, 1.1393, 1.6635, 1.9392], [1.9948, 1.0096, 1.6311, 1.2359]]]])
print (np.array2string(model.predict([in0Up_27810],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep89603.png')

LUp_27810 = up_sampling2D_layer([[[[1.8093, 1.881, 1.0412, 1.2107], [1.9582, 1.3133, 1.9468, 1.4498], [1.4529, 1.4403, 1.4345, 1.7758]], [[1.6877, 1.7616, 1.8988, 1.921], [1.082, 1.5463, 1.0656, 1.3995], [1.9689, 1.9556, 1.2511, 1.6917]], [[1.2865, 1.0823, 1.3948, 1.6588], [1.4741, 1.5829, 1.5059, 1.1847], [1.15, 1.2297, 1.8557, 1.834]], [[1.5982, 1.8881, 1.7112, 1.1334], [1.829, 1.1393, 1.6635, 1.9392], [1.9948, 1.0096, 1.6311, 1.2359]]]], 1, 2, Up_27810), 
LRes50141 = reshape_layer(Up_27810, [4, 24], Res50141), 
LSep89603 = separable_conv1D_layer(Res50141, 3,[[[[0.997], [0.4209], [0.5314], [0.8202], [0.9631], [0.6765], [0.3093], [0.1234], [0.8273], [0.4629], [0.691], [0.8901], [0.1941], [0.2587], [0.2311], [0.9742], [0.7234], [0.7253], [0.9783], [0.9916], [0.3141], [0.323], [0.0443], [0.8858]], [[0.5008], [0.9831], [0.8583], [0.3156], [0.2926], [0.961], [0.409], [0.0833], [0.9022], [0.563], [0.2629], [0.2822], [0.8127], [0.0468], [0.9129], [0.8375], [0.4131], [0.6245], [0.0594], [0.6366], [0.9977], [0.166], [0.7559], [0.5024]], [[0.2664], [0.8945], [0.9597], [0.8498], [0.5931], [0.0939], [0.9229], [0.9831], [0.2326], [0.6082], [0.028], [0.641], [0.3275], [0.7001], [0.1301], [0.5792], [0.0448], [0.6605], [0.1996], [0.6884], [0.4248], [0.4103], [0.0799], [0.3923]]],[[[0.4333, 0.7147], [0.764, 0.3755], [0.0906, 0.5852], [0.4758, 0.0389], [0.4907, 0.5364], [0.1297, 0.7186], [0.77, 0.3381], [0.8747, 0.3309], [0.1448, 0.2943], [0.8835, 0.6391], [0.7179, 0.5252], [0.5307, 0.9599], [0.5291, 0.0096], [0.108, 0.7324], [0.3791, 0.0913], [0.4933, 0.0623], [0.7992, 0.3531], [0.2992, 0.4411], [0.166, 0.9857], [0.4191, 0.4569], [0.3688, 0.0429], [0.5614, 0.4638], [0.6232, 0.2575], [0.3154, 0.8582]]]],[0, 0], 2, false, Sep89603), 
exec_layers([LUp_27810,LRes50141,LSep89603],["Up_27810","Res50141","Sep89603"],Sep89603,"Sep89603")

Actual (Unparsed): [[[27.4979869, 27.4676026]]]

Expected (Unparsed): [[[27.497986882707,27.467602644307004]]]

Actual:   [[[27.498, 27.4677]]]

Expected: [[[27.498, 27.4677]]]