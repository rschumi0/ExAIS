import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul21936 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul21936 = tf.keras.layers.Input(shape=([1, 2]))
in0Con10372 = tf.keras.layers.Input(shape=([1, 1]))
in0Sub22474 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub22474 = tf.keras.layers.Input(shape=([2, 3]))

Mul21936 = keras.layers.Multiply(name = 'Mul21936', )([in0Mul21936,in1Mul21936])
Lea54934 = keras.layers.LeakyReLU(alpha=9.278874147313308, name = 'Lea54934', )(Mul21936)
Con10372 = keras.layers.Concatenate(axis=2, name = 'Con10372', )([Lea54934,in0Con10372])
Sub22474 = keras.layers.Subtract(name = 'Sub22474', )([in0Sub22474,in1Sub22474])
Res84838 = keras.layers.Reshape((2, 3, 1), name = 'Res84838', )(Sub22474)
Ave52503 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave52503', )(Res84838)
Res28307 = keras.layers.Reshape((2, 3), name = 'Res28307', )(Ave52503)
Max34609 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='valid', name = 'Max34609', )(Res28307)
Mul4192 = keras.layers.Multiply(name = 'Mul4192', )([Con10372,Max34609])
model = tf.keras.models.Model(inputs=[in0Mul21936,in1Mul21936,in0Con10372,in0Sub22474,in1Sub22474], outputs=Mul4192)
in0Mul21936 = tf.constant([[[0.9298, 0.9731]]])
in1Mul21936 = tf.constant([[[0.6613, 0.2437]]])
in0Con10372 = tf.constant([[[0.1678]]])
in0Sub22474 = tf.constant([[[0.252, 0.7502, 0.5533], [0.9292, 0.7705, 0.3237]]])
in1Sub22474 = tf.constant([[[0.906, 0.8194, 0.8833], [0.0031, 0.1956, 0.6477]]])
print (np.array2string(model.predict([in0Mul21936,in1Mul21936,in0Con10372,in0Sub22474,in1Sub22474],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul4192.png')

LMul21936 = multiply_layer([[[[0.9298, 0.9731]]], [[[0.6613, 0.2437]]]], Mul21936), 
LLea54934 = leaky_relu_layer(Mul21936, 9.278874147313308, Lea54934), 
LCon10372 = concatenate_layer([Lea54934,[[[0.1678]]]], 2, Con10372), 
LSub22474 = subtract_layer([[[0.252, 0.7502, 0.5533], [0.9292, 0.7705, 0.3237]]], [[[0.906, 0.8194, 0.8833], [0.0031, 0.1956, 0.6477]]], Sub22474), 
LRes84838 = reshape_layer(Sub22474, [2, 3, 1], Res84838), 
LAve52503 = average_pooling2D_layer(Res84838, 1, 1, Ave52503), 
LRes28307 = reshape_layer(Ave52503, [2, 3], Res28307), 
LMax34609 = max_pool1D_layer(Res28307, 2, 1, false, Max34609), 
LMul4192 = multiply_layer([Con10372,Max34609], Mul4192), 
exec_layers([LMul21936,LLea54934,LCon10372,LSub22474,LRes84838,LAve52503,LRes28307,LMax34609,LMul4192],["Mul21936","Lea54934","Con10372","Sub22474","Res84838","Ave52503","Res28307","Max34609","Mul4192"],Mul4192,"Mul4192")

Actual (Unparsed): [[[0.5694373, 0.1363344, -0.0543672]]]

Expected (Unparsed): [[[0.569437348914,0.136334355803,-0.05436720000000001]]]

Actual:   [[[0.5695, 0.1364, -0.0543]]]

Expected: [[[0.5695, 0.1364, -0.0543]]]