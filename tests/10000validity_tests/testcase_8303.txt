import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo85392 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0LST75514 = tf.keras.layers.Input(shape=([2, 1]))

Glo85392 = keras.layers.GlobalMaxPool3D(name = 'Glo85392', )(in0Glo85392)
Thr71105 = keras.layers.ThresholdedReLU(theta=3.2786670426061564, name = 'Thr71105', )(Glo85392)
Res64625 = keras.layers.Reshape((1, 1), name = 'Res64625', )(Thr71105)
LST75514 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST75514', )(in0LST75514)
Res9709 = keras.layers.Reshape((3, 1), name = 'Res9709', )(LST75514)
Res27820 = keras.layers.Reshape((3, 1, 1), name = 'Res27820', )(Res9709)
Max695 = keras.layers.MaxPool2D(pool_size=(3, 1), name = 'Max695', )(Res27820)
Res76940 = keras.layers.Reshape((1, 1), name = 'Res76940', )(Max695)
Dot93944 = keras.layers.Dot(axes=(2, 2), name = 'Dot93944', )([Res64625,Res76940])
model = tf.keras.models.Model(inputs=[in0Glo85392,in0LST75514], outputs=Dot93944)
w = model.get_layer('LST75514').get_weights() 
w[0] = np.array([[7, 2, 3, 8, 2, 2, 7, 6, 3, 9, 9, 10]])
w[1] = np.array([[1, 3, 8, 9, 3, 6, 10, 2, 2, 3, 8, 2], [1, 7, 8, 9, 3, 10, 4, 1, 2, 4, 10, 4], [6, 5, 10, 2, 6, 10, 2, 8, 9, 7, 5, 10]])
w[2] = np.array([8, 4, 8, 3, 6, 6, 1, 7, 10, 9, 3, 1])
model.get_layer('LST75514').set_weights(w) 
in0Glo85392 = tf.constant([[[[[1.6499], [1.6023]]]]])
in0LST75514 = tf.constant([[[8], [3]]])
print (np.array2string(model.predict([in0Glo85392,in0LST75514],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot93944.png')

LGlo85392 = global_max_pool3D_layer([[[[[1.6499], [1.6023]]]]], Glo85392), 
LThr71105 = thresholded_relu_layer(Glo85392, 3.2786670426061564, Thr71105), 
LRes64625 = reshape_layer(Thr71105, [1, 1], Res64625), 
LLST75514 = lstm_layer([[[8], [3]]],[[7, 2, 3, 8, 2, 2, 7, 6, 3, 9, 9, 10]],[[1, 3, 8, 9, 3, 6, 10, 2, 2, 3, 8, 2], [1, 7, 8, 9, 3, 10, 4, 1, 2, 4, 10, 4], [6, 5, 10, 2, 6, 10, 2, 8, 9, 7, 5, 10]],[8, 4, 8, 3, 6, 6, 1, 7, 10, 9, 3, 1], LST75514), 
LRes9709 = reshape_layer(LST75514, [3, 1], Res9709), 
LRes27820 = reshape_layer(Res9709, [3, 1, 1], Res27820), 
LMax695 = max_pool2D_layer(Res27820, 3, 1, Max695), 
LRes76940 = reshape_layer(Max695, [1, 1], Res76940), 
LDot93944 = dot_layer(Res64625,Res76940, 2, 2, Dot93944), 
exec_layers([LGlo85392,LThr71105,LRes64625,LLST75514,LRes9709,LRes27820,LMax695,LRes76940,LDot93944],["Glo85392","Thr71105","Res64625","LST75514","Res9709","Res27820","Max695","Res76940","Dot93944"],Dot93944,"Dot93944")

Actual (Unparsed): [[[0.0000000]]]

Expected (Unparsed): [[[0.0]]]

Actual:   [[[0]]]

Expected: [[[0]]]