import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul8319 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul8319 = tf.keras.layers.Input(shape=([1, 1, 1]))

Mul8319 = keras.layers.Multiply(name = 'Mul8319', )([in0Mul8319,in1Mul8319])
Max28494 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(2, 1), padding='same', name = 'Max28494', )(Mul8319)
Den7001 = keras.layers.Dense(2,name = 'Den7001', )(Max28494)
Res52200 = keras.layers.Reshape((1, 2), name = 'Res52200', )(Den7001)
Zer71606 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer71606', )(Res52200)
Res16229 = keras.layers.Reshape((3, 2, 1), name = 'Res16229', )(Zer71606)
Res69172 = keras.layers.Reshape((3, 2, 1, 1), name = 'Res69172', )(Res16229)
Con99413 = keras.layers.Conv3DTranspose(2, (2, 2, 1),strides=(1, 1, 1), padding='valid', name = 'Con99413', )(Res69172)
model = tf.keras.models.Model(inputs=[in0Mul8319,in1Mul8319], outputs=Con99413)
w = model.get_layer('Den7001').get_weights() 
w[0] = np.array([[0.8445, 0.727]])
w[1] = np.array([0.5634, 0.3616])
model.get_layer('Den7001').set_weights(w) 
w = model.get_layer('Con99413').get_weights() 
w[0] = np.array([[[[[0.6841], [0.2424]]], [[[0.2619], [0.4201]]]], [[[[0.3495], [0.0433]]], [[[0.8996], [0.853]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con99413').set_weights(w) 
in0Mul8319 = tf.constant([[[[0.7468]]]])
in1Mul8319 = tf.constant([[[[0.5571]]]])
print (np.array2string(model.predict([in0Mul8319,in1Mul8319],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con99413.png')

LMul8319 = multiply_layer([[[[[0.7468]]]], [[[[0.5571]]]]], Mul8319), 
LMax28494 = max_pool2D_layer(Mul8319, 2, 1, 2, 1, true, Max28494), 
LDen7001 = dense_layer(Max28494, [[0.8445, 0.727]],[0.5634, 0.3616], Den7001), 
LRes52200 = reshape_layer(Den7001, [1, 2], Res52200), 
LZer71606 = zero_padding1D_layer(Res52200, 1, 1, Zer71606), 
LRes16229 = reshape_layer(Zer71606, [3, 2, 1], Res16229), 
LRes69172 = reshape_layer(Res16229, [3, 2, 1, 1], Res69172), 
LCon99413 = conv3D_transpose_layer(Res69172, 2, 2, 1,[[[[[0.6841], [0.2424]]], [[[0.2619], [0.4201]]]], [[[[0.3495], [0.0433]]], [[[0.8996], [0.853]]]]],[0, 0], 1, 1, 1, false, Con99413), 
exec_layers([LMul8319,LMax28494,LDen7001,LRes52200,LZer71606,LRes16229,LRes69172,LCon99413],["Mul8319","Max28494","Den7001","Res52200","Zer71606","Res16229","Res69172","Con99413"],Con99413,"Con99413")

Actual (Unparsed): [[[[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.6257789, 0.2217348]], [[0.6938577, 0.5452543]], [[0.1739180, 0.2789728]]], [[[0.3197043, 0.0396086]], [[1.0549970, 0.8090337]], [[0.5973908, 0.5664455]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]]],[[[0.6257789053051861,0.22173484380350403]],[[0.6938577428247701,0.54525431864829]],[[0.173918030966964,0.278972756048956]]],[[[0.31970432305827,0.039608575646418]],[[1.054996962609036,0.809033709293728]],[[0.597390838708976,0.56644551513868]]],[[[0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]]]]]

Actual:   [[[[[0, 0]], [[0, 0]], [[0, 0]]], [[[0.6258, 0.2218]], [[0.6939, 0.5453]], [[0.174, 0.279]]], [[[0.3198, 0.0397]], [[1.055, 0.8091]], [[0.5974, 0.5665]]], [[[0, 0]], [[0, 0]], [[0, 0]]]]]

Expected: [[[[[0, 0]], [[0, 0]], [[0, 0]]], [[[0.6258, 0.2218]], [[0.6939, 0.5453]], [[0.174, 0.279]]], [[[0.3198, 0.0397]], [[1.055, 0.8091]], [[0.5974, 0.5665]]], [[[0, 0]], [[0, 0]], [[0, 0]]]]]