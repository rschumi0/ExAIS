import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub69508 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in1Sub69508 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in0Ave25833 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave25833 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con52546 = tf.keras.layers.Input(shape=([2, 11]))

Sub69508 = keras.layers.Subtract(name = 'Sub69508', )([in0Sub69508,in1Sub69508])
Res27311 = keras.layers.Reshape((2, 3, 4), name = 'Res27311', )(Sub69508)
Res87488 = keras.layers.Reshape((2, 12), name = 'Res87488', )(Res27311)
Ave25833 = keras.layers.Average(name = 'Ave25833', )([in0Ave25833,in1Ave25833])
Res20653 = keras.layers.Reshape((2, 1), name = 'Res20653', )(Ave25833)
Max23951 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max23951', )(Res20653)
Con52546 = keras.layers.Concatenate(axis=2, name = 'Con52546', )([Max23951,in0Con52546])
Min96682 = keras.layers.Minimum(name = 'Min96682', )([Res87488,Con52546])
Res60444 = keras.layers.Reshape((2, 12, 1), name = 'Res60444', )(Min96682)
Glo52725 = keras.layers.GlobalMaxPool2D(name = 'Glo52725', )(Res60444)
Res35762 = keras.layers.Reshape((1, 1), name = 'Res35762', )(Glo52725)
Res94774 = keras.layers.Reshape((1, 1, 1), name = 'Res94774', )(Res35762)
Up_70513 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_70513', )(Res94774)
model = tf.keras.models.Model(inputs=[in0Sub69508,in1Sub69508,in0Ave25833,in1Ave25833,in0Con52546], outputs=Up_70513)
in0Sub69508 = tf.constant([[[[[0.2239, 0.4536], [0.7569, 0.6677]], [[0.3505, 0.6676], [0.0483, 0.2387]], [[0.4536, 0.8807], [0.1616, 0.9488]]], [[[0.8524, 0.4626], [0.5094, 0.1129]], [[0.5001, 0.0469], [0.0942, 0.9057]], [[0.4818, 0.127], [0.5833, 0.1546]]]]])
in1Sub69508 = tf.constant([[[[[0.2744, 0.2609], [0.9595, 0.649]], [[0.3583, 0.2502], [0.5768, 0.6524]], [[0.9437, 0.3067], [0.1382, 0.092]]], [[[0.0277, 0.4006], [0.5818, 0.7219]], [[0.735, 0.6975], [0.113, 0.4093]], [[0.909, 0.2328], [0.6521, 0.5757]]]]])
in0Ave25833 = tf.constant([[[[0.2222]], [[0.7474]]]])
in1Ave25833 = tf.constant([[[[0.7818]], [[0.7425]]]])
in0Con52546 = tf.constant([[[0.3172, 0.0056, 0.65, 0.4873, 0.4184, 0.6731, 0.3574, 0.5533, 0.5279, 0.9042, 0.917], [0.0902, 0.3147, 0.5983, 0.2969, 0.8077, 0.2937, 0.7763, 0.8449, 0.5072, 0.478, 0.6298]]])
print (np.array2string(model.predict([in0Sub69508,in1Sub69508,in0Ave25833,in1Ave25833,in0Con52546],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_70513.png')

LSub69508 = subtract_layer([[[[[0.2239, 0.4536], [0.7569, 0.6677]], [[0.3505, 0.6676], [0.0483, 0.2387]], [[0.4536, 0.8807], [0.1616, 0.9488]]], [[[0.8524, 0.4626], [0.5094, 0.1129]], [[0.5001, 0.0469], [0.0942, 0.9057]], [[0.4818, 0.127], [0.5833, 0.1546]]]]], [[[[[0.2744, 0.2609], [0.9595, 0.649]], [[0.3583, 0.2502], [0.5768, 0.6524]], [[0.9437, 0.3067], [0.1382, 0.092]]], [[[0.0277, 0.4006], [0.5818, 0.7219]], [[0.735, 0.6975], [0.113, 0.4093]], [[0.909, 0.2328], [0.6521, 0.5757]]]]], Sub69508), 
LRes27311 = reshape_layer(Sub69508, [2, 3, 4], Res27311), 
LRes87488 = reshape_layer(Res27311, [2, 12], Res87488), 
LAve25833 = average_layer([[[[[0.2222]], [[0.7474]]]], [[[[0.7818]], [[0.7425]]]]], Ave25833), 
LRes20653 = reshape_layer(Ave25833, [2, 1], Res20653), 
LMax23951 = max_pool1D_layer(Res20653, 1, 1, false, Max23951), 
LCon52546 = concatenate_layer([Max23951,[[[0.3172, 0.0056, 0.65, 0.4873, 0.4184, 0.6731, 0.3574, 0.5533, 0.5279, 0.9042, 0.917], [0.0902, 0.3147, 0.5983, 0.2969, 0.8077, 0.2937, 0.7763, 0.8449, 0.5072, 0.478, 0.6298]]]], 2, Con52546), 
LMin96682 = minimum_layer([Res87488,Con52546], Min96682), 
LRes60444 = reshape_layer(Min96682, [2, 12, 1], Res60444), 
LGlo52725 = global_max_pool2D_layer(Res60444, Glo52725), 
LRes35762 = reshape_layer(Glo52725, [1, 1], Res35762), 
LRes94774 = reshape_layer(Res35762, [1, 1, 1], Res94774), 
LUp_70513 = up_sampling2D_layer(Res94774, 2, 2, Up_70513), 
exec_layers([LSub69508,LRes27311,LRes87488,LAve25833,LRes20653,LMax23951,LCon52546,LMin96682,LRes60444,LGlo52725,LRes35762,LRes94774,LUp_70513],["Sub69508","Res27311","Res87488","Ave25833","Res20653","Max23951","Con52546","Min96682","Res60444","Glo52725","Res35762","Res94774","Up_70513"],Up_70513,"Up_70513")

Actual (Unparsed): [[[[0.8568000], [0.8568000]], [[0.8568000], [0.8568000]]]]

Expected (Unparsed): [[[[0.8568],[0.8568]],[[0.8568],[0.8568]]]]

Actual:   [[[[0.8568], [0.8568]], [[0.8568], [0.8568]]]]

Expected: [[[[0.8568], [0.8568]], [[0.8568], [0.8568]]]]