import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot480 = tf.keras.layers.Input(shape=([3]))
in1Dot480 = tf.keras.layers.Input(shape=([3]))
in0Con22206 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot78978 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot78978 = tf.keras.layers.Input(shape=([2, 3]))

Dot480 = keras.layers.Dot(axes=(1, 1), name = 'Dot480', )([in0Dot480,in1Dot480])
Res63248 = keras.layers.Reshape((1, 1), name = 'Res63248', )(Dot480)
Zer21126 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer21126', )(Res63248)
Con22206 = keras.layers.Concatenate(axis=2, name = 'Con22206', )([Zer21126,in0Con22206])
Dot78978 = keras.layers.Dot(axes=(1, 1), name = 'Dot78978', )([in0Dot78978,in1Dot78978])
Ave56448 = keras.layers.Average(name = 'Ave56448', )([Con22206,Dot78978])
model = tf.keras.models.Model(inputs=[in0Dot480,in1Dot480,in0Con22206,in0Dot78978,in1Dot78978], outputs=Ave56448)
in0Dot480 = tf.constant([[0.8847, 0.5201, 0.5152]])
in1Dot480 = tf.constant([[0.516, 0.2589, 0.2051]])
in0Con22206 = tf.constant([[[0.6353, 0.3212], [0.5973, 0.882], [0.9241, 0.9304]]])
in0Dot78978 = tf.constant([[[0.4441, 0.1398, 0.8153], [0.4739, 0.0522, 0.5803]]])
in1Dot78978 = tf.constant([[[0.0163, 0.2979, 0.8938], [0.9151, 0.5367, 0.5439]]])
print (np.array2string(model.predict([in0Dot480,in1Dot480,in0Con22206,in0Dot78978,in1Dot78978],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave56448.png')

LDot480 = dot_layer([[0.8847, 0.5201, 0.5152]], [[0.516, 0.2589, 0.2051]], 1, 1, Dot480), 
LRes63248 = reshape_layer(Dot480, [1, 1], Res63248), 
LZer21126 = zero_padding1D_layer(Res63248, 2, 0, Zer21126), 
LCon22206 = concatenate_layer([Zer21126,[[[0.6353, 0.3212], [0.5973, 0.882], [0.9241, 0.9304]]]], 2, Con22206), 
LDot78978 = dot_layer([[[0.4441, 0.1398, 0.8153], [0.4739, 0.0522, 0.5803]]], [[[0.0163, 0.2979, 0.8938], [0.9151, 0.5367, 0.5439]]], 1, 1, Dot78978), 
LAve56448 = average_layer([Con22206,Dot78978], Ave56448), 
exec_layers([LDot480,LRes63248,LZer21126,LCon22206,LDot78978,LAve56448],["Dot480","Res63248","Zer21126","Con22206","Dot78978","Ave56448"],Ave56448,"Ave56448")

Actual (Unparsed): [[[0.2204524, 0.5109697, 0.4879454], [0.0250235, 0.3334811, 0.5176724], [0.6205742, 0.7392124, 0.9873702]]]

Expected (Unparsed): [[[0.22045235999999999,0.51096976,0.487945395],[0.025023480000000004,0.33348108000000004,0.51767241],[0.6205742650000001,0.73921244,0.987370155]]]

Actual:   [[[0.2205, 0.511, 0.488], [0.0251, 0.3335, 0.5177], [0.6206, 0.7393, 0.9874]]]

Expected: [[[0.2205, 0.511, 0.488], [0.0251, 0.3335, 0.5177], [0.6206, 0.7393, 0.9874]]]