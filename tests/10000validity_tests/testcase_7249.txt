import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot78453 = tf.keras.layers.Input(shape=([2]))
in1Dot78453 = tf.keras.layers.Input(shape=([2]))
in0Con76528 = tf.keras.layers.Input(shape=([1, 1, 3]))
in0Cro52693 = tf.keras.layers.Input(shape=([3, 1, 3, 4]))

Dot78453 = keras.layers.Dot(axes=(1, 1), name = 'Dot78453', )([in0Dot78453,in1Dot78453])
Res99899 = keras.layers.Reshape((1, 1), name = 'Res99899', )(Dot78453)
Res40694 = keras.layers.Reshape((1, 1, 1), name = 'Res40694', )(Res99899)
Con76528 = keras.layers.Concatenate(axis=3, name = 'Con76528', )([Res40694,in0Con76528])
Cro52693 = keras.layers.Cropping3D(cropping=((1, 1), (0, 0), (2, 0)), name = 'Cro52693', )(in0Cro52693)
Res34511 = keras.layers.Reshape((1, 1, 4), name = 'Res34511', )(Cro52693)
Max11353 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max11353', )(Res34511)
Max19491 = keras.layers.Maximum(name = 'Max19491', )([Con76528,Max11353])
Res10503 = keras.layers.Reshape((1, 4), name = 'Res10503', )(Max19491)
Max60606 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max60606', )(Res10503)
Res27555 = keras.layers.Reshape((1, 4, 1), name = 'Res27555', )(Max60606)
Glo89355 = keras.layers.GlobalMaxPool2D(name = 'Glo89355', )(Res27555)
model = tf.keras.models.Model(inputs=[in0Dot78453,in1Dot78453,in0Con76528,in0Cro52693], outputs=Glo89355)
in0Dot78453 = tf.constant([[0.3341, 0.8807]])
in1Dot78453 = tf.constant([[0.5634, 0.097]])
in0Con76528 = tf.constant([[[[0.2619, 0.0635, 0.1516]]]])
in0Cro52693 = tf.constant([[[[[1.8795, 1.641, 1.8981, 1.6245], [1.293, 1.3458, 1.1706, 1.739], [1.4426, 1.9733, 1.5705, 1.5959]]], [[[1.003, 1.8234, 1.4549, 1.6146], [1.1624, 1.0973, 1.5966, 1.925], [1.2545, 1.6991, 1.9392, 1.7738]]], [[[1.9694, 1.4662, 1.5447, 1.885], [1.777, 1.5822, 1.855, 1.8948], [1.3351, 1.8869, 1.48, 1.0187]]]]])
print (np.array2string(model.predict([in0Dot78453,in1Dot78453,in0Con76528,in0Cro52693],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo89355.png')

LDot78453 = dot_layer([[0.3341, 0.8807]], [[0.5634, 0.097]], 1, 1, Dot78453), 
LRes99899 = reshape_layer(Dot78453, [1, 1], Res99899), 
LRes40694 = reshape_layer(Res99899, [1, 1, 1], Res40694), 
LCon76528 = concatenate_layer([Res40694,[[[[0.2619, 0.0635, 0.1516]]]]], 3, Con76528), 
LCro52693 = cropping3D_layer([[[[[1.8795, 1.641, 1.8981, 1.6245], [1.293, 1.3458, 1.1706, 1.739], [1.4426, 1.9733, 1.5705, 1.5959]]], [[[1.003, 1.8234, 1.4549, 1.6146], [1.1624, 1.0973, 1.5966, 1.925], [1.2545, 1.6991, 1.9392, 1.7738]]], [[[1.9694, 1.4662, 1.5447, 1.885], [1.777, 1.5822, 1.855, 1.8948], [1.3351, 1.8869, 1.48, 1.0187]]]]], 1, 1, 0, 0, 2, 0, Cro52693), 
LRes34511 = reshape_layer(Cro52693, [1, 1, 4], Res34511), 
LMax11353 = max_pool2D_layer(Res34511, 1, 1, Max11353), 
LMax19491 = maximum_layer([Con76528,Max11353], Max19491), 
LRes10503 = reshape_layer(Max19491, [1, 4], Res10503), 
LMax60606 = max_pool1D_layer(Res10503, 1, 1, true, Max60606), 
LRes27555 = reshape_layer(Max60606, [1, 4, 1], Res27555), 
LGlo89355 = global_max_pool2D_layer(Res27555, Glo89355), 
exec_layers([LDot78453,LRes99899,LRes40694,LCon76528,LCro52693,LRes34511,LMax11353,LMax19491,LRes10503,LMax60606,LRes27555,LGlo89355],["Dot78453","Res99899","Res40694","Con76528","Cro52693","Res34511","Max11353","Max19491","Res10503","Max60606","Res27555","Glo89355"],Glo89355,"Glo89355")

Actual (Unparsed): [[1.9392000]]

Expected (Unparsed): [[1.9392]]

Actual:   [[1.9392]]

Expected: [[1.9392]]