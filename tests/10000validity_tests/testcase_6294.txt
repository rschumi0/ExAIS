import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro60656 = tf.keras.layers.Input(shape=([1, 1, 4, 1]))
in0Add37146 = tf.keras.layers.Input(shape=([1, 2]))
in1Add37146 = tf.keras.layers.Input(shape=([1, 2]))
in0Con27624 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave89154 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave89154 = tf.keras.layers.Input(shape=([1, 1]))
in0Con86417 = tf.keras.layers.Input(shape=([1, 2]))
in0Con37565 = tf.keras.layers.Input(shape=([1, 3, 3]))
in0Dot90523 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot90523 = tf.keras.layers.Input(shape=([3, 3]))
in0Ave4039 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con29335 = tf.keras.layers.Input(shape=([1, 11]))

Cro60656 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 1)), name = 'Cro60656', )(in0Cro60656)
Res91148 = keras.layers.Reshape((1, 1, 3), name = 'Res91148', )(Cro60656)
Res86304 = keras.layers.Reshape((1, 3), name = 'Res86304', )(Res91148)
Add37146 = keras.layers.Add(name = 'Add37146', )([in0Add37146,in1Add37146])
Con27624 = keras.layers.Concatenate(axis=2, name = 'Con27624', )([Add37146,in0Con27624])
Max26340 = keras.layers.Maximum(name = 'Max26340', )([Res86304,Con27624])
Ave89154 = keras.layers.Average(name = 'Ave89154', )([in0Ave89154,in1Ave89154])
Con86417 = keras.layers.Concatenate(axis=2, name = 'Con86417', )([Ave89154,in0Con86417])
Min28502 = keras.layers.Minimum(name = 'Min28502', )([Max26340,Con86417])
Res42217 = keras.layers.Reshape((1, 3, 1), name = 'Res42217', )(Min28502)
Con37565 = keras.layers.Concatenate(axis=3, name = 'Con37565', )([Res42217,in0Con37565])
Dot90523 = keras.layers.Dot(axes=(1, 1), name = 'Dot90523', )([in0Dot90523,in1Dot90523])
Res88775 = keras.layers.Reshape((3, 3, 1), name = 'Res88775', )(Dot90523)
Sep80449 = keras.layers.SeparableConv2D(4, (2, 3),strides=(3, 3), padding='same', name = 'Sep80449', )(Res88775)
Zer7443 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer7443', )(Sep80449)
Add26315 = keras.layers.Add(name = 'Add26315', )([Con37565,Zer7443])
Res62521 = keras.layers.Reshape((1, 12), name = 'Res62521', )(Add26315)
Ave4039 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave4039', )(in0Ave4039)
Res75575 = keras.layers.Reshape((1, 1), name = 'Res75575', )(Ave4039)
Glo72960 = keras.layers.GlobalAveragePooling1D(name = 'Glo72960', )(Res75575)
Res38979 = keras.layers.Reshape((1, 1), name = 'Res38979', )(Glo72960)
Cro5723 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro5723', )(Res38979)
Cro19686 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro19686', )(Cro5723)
Con29335 = keras.layers.Concatenate(axis=2, name = 'Con29335', )([Cro19686,in0Con29335])
Ave24233 = keras.layers.Average(name = 'Ave24233', )([Res62521,Con29335])
model = tf.keras.models.Model(inputs=[in0Cro60656,in0Add37146,in1Add37146,in0Con27624,in0Ave89154,in1Ave89154,in0Con86417,in0Con37565,in0Dot90523,in1Dot90523,in0Ave4039,in0Con29335], outputs=Ave24233)
w = model.get_layer('Sep80449').get_weights() 
w[0] = np.array([[[[0.076]], [[0.8473]], [[0.8237]]], [[[0.1022]], [[0.1684]], [[0.9606]]]])
w[1] = np.array([[[[0.009, 0.7893, 0.0302, 0.5761]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep80449').set_weights(w) 
in0Cro60656 = tf.constant([[[[[1.3466], [1.3151], [1.5256], [1.3334]]]]])
in0Add37146 = tf.constant([[[0.4746, 0.2188]]])
in1Add37146 = tf.constant([[[0.5629, 0.8094]]])
in0Con27624 = tf.constant([[[0.0918]]])
in0Ave89154 = tf.constant([[[0.1514]]])
in1Ave89154 = tf.constant([[[0.3919]]])
in0Con86417 = tf.constant([[[0.3567, 0.1885]]])
in0Con37565 = tf.constant([[[[0.9811, 0.4474, 0.2198], [0.8308, 0.5182, 0.2007], [0.3056, 0.011, 0.4889]]]])
in0Dot90523 = tf.constant([[[0.6908, 0.8554, 0.3794], [0.1504, 0.1035, 0.6537], [0.7791, 0.2137, 0.1789]]])
in1Dot90523 = tf.constant([[[0.6718, 0.9392, 0.3169], [0.7966, 0.4866, 0.5605], [0.7136, 0.7629, 0.9082]]])
in0Ave4039 = tf.constant([[[[1.9826]]]])
in0Con29335 = tf.constant([[[0.4529, 0.9306, 0.331, 0.8068, 0.5324, 0.8438, 0.7409, 0.6439, 0.4755, 0.6304, 0.757]]])
print (np.array2string(model.predict([in0Cro60656,in0Add37146,in1Add37146,in0Con27624,in0Ave89154,in1Ave89154,in0Con86417,in0Con37565,in0Dot90523,in1Dot90523,in0Ave4039,in0Con29335],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave24233.png')

LCro60656 = cropping3D_layer([[[[[1.3466], [1.3151], [1.5256], [1.3334]]]]], 0, 0, 0, 0, 0, 1, Cro60656), 
LRes91148 = reshape_layer(Cro60656, [1, 1, 3], Res91148), 
LRes86304 = reshape_layer(Res91148, [1, 3], Res86304), 
LAdd37146 = add_layer([[[[0.4746, 0.2188]]], [[[0.5629, 0.8094]]]], Add37146), 
LCon27624 = concatenate_layer([Add37146,[[[0.0918]]]], 2, Con27624), 
LMax26340 = maximum_layer([Res86304,Con27624], Max26340), 
LAve89154 = average_layer([[[[0.1514]]], [[[0.3919]]]], Ave89154), 
LCon86417 = concatenate_layer([Ave89154,[[[0.3567, 0.1885]]]], 2, Con86417), 
LMin28502 = minimum_layer([Max26340,Con86417], Min28502), 
LRes42217 = reshape_layer(Min28502, [1, 3, 1], Res42217), 
LCon37565 = concatenate_layer([Res42217,[[[[0.9811, 0.4474, 0.2198], [0.8308, 0.5182, 0.2007], [0.3056, 0.011, 0.4889]]]]], 3, Con37565), 
LDot90523 = dot_layer([[[0.6908, 0.8554, 0.3794], [0.1504, 0.1035, 0.6537], [0.7791, 0.2137, 0.1789]]], [[[0.6718, 0.9392, 0.3169], [0.7966, 0.4866, 0.5605], [0.7136, 0.7629, 0.9082]]], 1, 1, Dot90523), 
LRes88775 = reshape_layer(Dot90523, [3, 3, 1], Res88775), 
LSep80449 = separable_conv2D_layer(Res88775, 2, 3,[[[[[0.076]], [[0.8473]], [[0.8237]]], [[[0.1022]], [[0.1684]], [[0.9606]]]],[[[[0.009, 0.7893, 0.0302, 0.5761]]]]],[0, 0, 0, 0], 3, 3, true, Sep80449), 
LZer7443 = zero_padding2D_layer(Sep80449, 0, 0, 2, 0, Zer7443), 
LAdd26315 = add_layer([Con37565,Zer7443], Add26315), 
LRes62521 = reshape_layer(Add26315, [1, 12], Res62521), 
LAve4039 = average_pooling2D_layer([[[[1.9826]]]], 1, 1, 1, 1, false, Ave4039), 
LRes75575 = reshape_layer(Ave4039, [1, 1], Res75575), 
LGlo72960 = global_average_pooling1D_layer(Res75575, Glo72960), 
LRes38979 = reshape_layer(Glo72960, [1, 1], Res38979), 
LCro5723 = cropping1D_layer(Res38979, 0, 0, Cro5723), 
LCro19686 = cropping1D_layer(Cro5723, 0, 0, Cro19686), 
LCon29335 = concatenate_layer([Cro19686,[[[0.4529, 0.9306, 0.331, 0.8068, 0.5324, 0.8438, 0.7409, 0.6439, 0.4755, 0.6304, 0.757]]]], 2, Con29335), 
LAve24233 = average_layer([Res62521,Con29335], Ave24233), 
exec_layers([LCro60656,LRes91148,LRes86304,LAdd37146,LCon27624,LMax26340,LAve89154,LCon86417,LMin28502,LRes42217,LCon37565,LDot90523,LRes88775,LSep80449,LZer7443,LAdd26315,LRes62521,LAve4039,LRes75575,LGlo72960,LRes38979,LCro5723,LCro19686,LCon29335,LAve24233],["Cro60656","Res91148","Res86304","Add37146","Con27624","Max26340","Ave89154","Con86417","Min28502","Res42217","Con37565","Dot90523","Res88775","Sep80449","Zer7443","Add26315","Res62521","Ave4039","Res75575","Glo72960","Res38979","Cro5723","Cro19686","Con29335","Ave24233"],Ave24233,"Ave24233")

Actual (Unparsed): [[[1.1271250, 0.7170000, 0.6890000, 0.2754000, 0.5817500, 0.6816000, 0.6810000, 0.4708000, 0.4287599, 1.4920558, 0.3628455, 1.4269251]]]

Expected (Unparsed): [[[1.127125,0.717,0.6890000000000001,0.2754,0.58175,0.6816,0.681,0.4708,0.4287599296539115,1.4920558306480387,0.36284554172756966,1.4269250526242683]]]

Actual:   [[[1.1272, 0.717, 0.689, 0.2754, 0.5818, 0.6816, 0.681, 0.4708, 0.4288, 1.4921, 0.3629, 1.427]]]

Expected: [[[1.1272, 0.717, 0.6891, 0.2754, 0.5818, 0.6816, 0.681, 0.4708, 0.4288, 1.4921, 0.3629, 1.427]]]