import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max30922 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Mul30384 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul30384 = tf.keras.layers.Input(shape=([2, 2, 1]))

Max30922 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max30922', )(in0Max30922)
Glo37843 = keras.layers.GlobalAveragePooling2D(name = 'Glo37843', )(Max30922)
Res44758 = keras.layers.Reshape((2, 1), name = 'Res44758', )(Glo37843)
Res82186 = keras.layers.Reshape((2, 1, 1), name = 'Res82186', )(Res44758)
Cro16309 = keras.layers.Cropping2D(cropping=((0, 1), (0, 0)), name = 'Cro16309', )(Res82186)
Zer23419 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer23419', )(Cro16309)
Mul30384 = keras.layers.Multiply(name = 'Mul30384', )([in0Mul30384,in1Mul30384])
Max87879 = keras.layers.Maximum(name = 'Max87879', )([Zer23419,Mul30384])
model = tf.keras.models.Model(inputs=[in0Max30922,in0Mul30384,in1Mul30384], outputs=Max87879)
in0Max30922 = tf.constant([[[[1.9005, 1.603], [1.5724, 1.4881]], [[1.862, 1.8159], [1.5851, 1.1397]]]])
in0Mul30384 = tf.constant([[[[0.1872], [0.355]], [[0.699], [0.1864]]]])
in1Mul30384 = tf.constant([[[[0.8744], [0.8129]], [[0.9732], [0.4591]]]])
print (np.array2string(model.predict([in0Max30922,in0Mul30384,in1Mul30384],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max87879.png')

LMax30922 = max_pool2D_layer([[[[1.9005, 1.603], [1.5724, 1.4881]], [[1.862, 1.8159], [1.5851, 1.1397]]]], 1, 1, Max30922), 
LGlo37843 = global_average_pooling2D_layer(Max30922, Glo37843), 
LRes44758 = reshape_layer(Glo37843, [2, 1], Res44758), 
LRes82186 = reshape_layer(Res44758, [2, 1, 1], Res82186), 
LCro16309 = cropping2D_layer(Res82186, 0, 1, 0, 0, Cro16309), 
LZer23419 = zero_padding2D_layer(Cro16309, 1, 0, 1, 0, Zer23419), 
LMul30384 = multiply_layer([[[[[0.1872], [0.355]], [[0.699], [0.1864]]]], [[[[0.8744], [0.8129]], [[0.9732], [0.4591]]]]], Mul30384), 
LMax87879 = maximum_layer([Zer23419,Mul30384], Max87879), 
exec_layers([LMax30922,LGlo37843,LRes44758,LRes82186,LCro16309,LZer23419,LMul30384,LMax87879],["Max30922","Glo37843","Res44758","Res82186","Cro16309","Zer23419","Mul30384","Max87879"],Max87879,"Max87879")

Actual (Unparsed): [[[[0.1636877], [0.2885795]], [[0.6802668], [1.7300000]]]]

Expected (Unparsed): [[[[0.16368768],[0.2885795]],[[0.6802668],[1.73]]]]

Actual:   [[[[0.1637], [0.2886]], [[0.6803], [1.73]]]]

Expected: [[[[0.1637], [0.2886]], [[0.6803], [1.73]]]]