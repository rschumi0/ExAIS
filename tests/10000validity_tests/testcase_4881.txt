import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max10690 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max10690 = tf.keras.layers.Input(shape=([1, 1, 1]))

Max10690 = keras.layers.Maximum(name = 'Max10690', )([in0Max10690,in1Max10690])
Res73621 = keras.layers.Reshape((1, 1), name = 'Res73621', )(Max10690)
LST86313 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST86313', )(Res73621)
Lay41900 = keras.layers.LayerNormalization(axis=1, epsilon=1.459880123273586, name = 'Lay41900', )(LST86313)
model = tf.keras.models.Model(inputs=[in0Max10690,in1Max10690], outputs=Lay41900)
w = model.get_layer('LST86313').get_weights() 
w[0] = np.array([[5, 6, 6, 5, 9, 9, 1, 5, 2, 8, 8, 5]])
w[1] = np.array([[6, 6, 5, 3, 5, 2, 1, 10, 3, 6, 8, 3], [7, 6, 1, 7, 8, 3, 2, 9, 3, 7, 6, 2], [2, 8, 8, 1, 9, 1, 9, 5, 6, 10, 1, 7]])
w[2] = np.array([6, 3, 4, 8, 6, 1, 5, 2, 3, 10, 2, 3])
model.get_layer('LST86313').set_weights(w) 
in0Max10690 = tf.constant([[[[0.6707]]]])
in1Max10690 = tf.constant([[[[0.2631]]]])
print (np.array2string(model.predict([in0Max10690,in1Max10690],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Lay41900.png')

LMax10690 = maximum_layer([[[[[0.6707]]]], [[[[0.2631]]]]], Max10690), 
LRes73621 = reshape_layer(Max10690, [1, 1], Res73621), 
LLST86313 = lstm_layer(Res73621,[[5, 6, 6, 5, 9, 9, 1, 5, 2, 8, 8, 5]],[[6, 6, 5, 3, 5, 2, 1, 10, 3, 6, 8, 3], [7, 6, 1, 7, 8, 3, 2, 9, 3, 7, 6, 2], [2, 8, 8, 1, 9, 1, 9, 5, 6, 10, 1, 7]],[6, 3, 4, 8, 6, 1, 5, 2, 3, 10, 2, 3], LST86313), 
LLay41900 = layer_normalization_layer(LST86313, 1, 1.459880123273586, Lay41900), 
exec_layers([LMax10690,LRes73621,LLST86313,LLay41900],["Max10690","Res73621","LST86313","Lay41900"],Lay41900,"Lay41900")

Actual (Unparsed): [[0.0006576, -0.0000271, -0.0006304]]

Expected (Unparsed): [[0.0006575663175493609,-2.7125817423404608e-5,-0.0006304405001255887]]

Actual:   [[0.0007, -0, -0.0006]]

Expected: [[0.0007, -0, -0.0006]]