import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul46285 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Mul46285 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Con23369 = tf.keras.layers.Input(shape=([2, 1]))
in0Glo11069 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con59254 = tf.keras.layers.Input(shape=([7, 1, 2]))
in0Con48766 = tf.keras.layers.Input(shape=([1, 1, 1]))

Mul46285 = keras.layers.Multiply(name = 'Mul46285', )([in0Mul46285,in1Mul46285])
Res64830 = keras.layers.Reshape((2, 2, 1), name = 'Res64830', )(Mul46285)
Res27506 = keras.layers.Reshape((2, 2), name = 'Res27506', )(Res64830)
Con23369 = keras.layers.Concatenate(axis=2, name = 'Con23369', )([Res27506,in0Con23369])
Glo11069 = keras.layers.GlobalAveragePooling2D(name = 'Glo11069', )(in0Glo11069)
Res67225 = keras.layers.Reshape((1, 1), name = 'Res67225', )(Glo11069)
Res73546 = keras.layers.Reshape((1, 1, 1), name = 'Res73546', )(Res67225)
Zer98900 = keras.layers.ZeroPadding2D(padding=((6, 0), (0, 0)), name = 'Zer98900', )(Res73546)
Con59254 = keras.layers.Concatenate(axis=3, name = 'Con59254', )([Zer98900,in0Con59254])
Con48766 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(7, 1), padding='same', name = 'Con48766', )(in0Con48766)
ELU518 = keras.layers.ELU(alpha=-8.963839499735588, name = 'ELU518', )(Con48766)
Mul51097 = keras.layers.Multiply(name = 'Mul51097', )([Con59254,ELU518])
Res73559 = keras.layers.Reshape((7, 3), name = 'Res73559', )(Mul51097)
Dot6161 = keras.layers.Dot(axes=(2, 2), name = 'Dot6161', )([Con23369,Res73559])
model = tf.keras.models.Model(inputs=[in0Mul46285,in1Mul46285,in0Con23369,in0Glo11069,in0Con59254,in0Con48766], outputs=Dot6161)
w = model.get_layer('Con48766').get_weights() 
w[0] = np.array([[[[0.3592], [0.1482], [0.641]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con48766').set_weights(w) 
in0Mul46285 = tf.constant([[[[[0.0682]], [[0.0662]]], [[[0.6216]], [[0.9912]]]]])
in1Mul46285 = tf.constant([[[[[0.8227]], [[0.2864]]], [[[0.1596]], [[0.4634]]]]])
in0Con23369 = tf.constant([[[0.0669], [0.1058]]])
in0Glo11069 = tf.constant([[[[1.1112], [1.8463]], [[1.2246], [1.0411]]]])
in0Con59254 = tf.constant([[[[0.3507, 0.7181]], [[0.3164, 0.1383]], [[0.5903, 0.099]], [[0.5655, 0.1596]], [[0.9951, 0.7914]], [[0.8193, 0.6324]], [[0.4742, 0.7787]]]])
in0Con48766 = tf.constant([[[[0.8015]]]])
print (np.array2string(model.predict([in0Mul46285,in1Mul46285,in0Con23369,in0Glo11069,in0Con59254,in0Con48766],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot6161.png')

LMul46285 = multiply_layer([[[[[[0.0682]], [[0.0662]]], [[[0.6216]], [[0.9912]]]]], [[[[[0.8227]], [[0.2864]]], [[[0.1596]], [[0.4634]]]]]], Mul46285), 
LRes64830 = reshape_layer(Mul46285, [2, 2, 1], Res64830), 
LRes27506 = reshape_layer(Res64830, [2, 2], Res27506), 
LCon23369 = concatenate_layer([Res27506,[[[0.0669], [0.1058]]]], 2, Con23369), 
LGlo11069 = global_average_pooling2D_layer([[[[1.1112], [1.8463]], [[1.2246], [1.0411]]]], Glo11069), 
LRes67225 = reshape_layer(Glo11069, [1, 1], Res67225), 
LRes73546 = reshape_layer(Res67225, [1, 1, 1], Res73546), 
LZer98900 = zero_padding2D_layer(Res73546, 6, 0, 0, 0, Zer98900), 
LCon59254 = concatenate_layer([Zer98900,[[[[0.3507, 0.7181]], [[0.3164, 0.1383]], [[0.5903, 0.099]], [[0.5655, 0.1596]], [[0.9951, 0.7914]], [[0.8193, 0.6324]], [[0.4742, 0.7787]]]]], 3, Con59254), 
LCon48766 = conv2D_transpose_layer([[[[0.8015]]]], 1, 1,[[[[0.3592], [0.1482], [0.641]]]],[0, 0, 0], 7, 1, true, Con48766), 
LELU518 = elu_layer(Con48766, -8.963839499735588, ELU518), 
LMul51097 = multiply_layer([Con59254,ELU518], Mul51097), 
LRes73559 = reshape_layer(Mul51097, [7, 3], Res73559), 
LDot6161 = dot_layer(Con23369,Res73559, 2, 2, Dot6161), 
exec_layers([LMul46285,LRes64830,LRes27506,LCon23369,LGlo11069,LRes67225,LRes73546,LZer98900,LCon59254,LCon48766,LELU518,LMul51097,LRes73559,LDot6161],["Mul46285","Res64830","Res27506","Con23369","Glo11069","Res67225","Res73546","Zer98900","Con59254","Con48766","ELU518","Mul51097","Res73559","Dot6161"],Dot6161,"Dot6161")

Actual (Unparsed): [[[0.0254714, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0581670, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0.02547136219899576,0.0,0.0,0.0,0.0,0.0,0.0],[0.05816697780655662,0.0,0.0,0.0,0.0,0.0,0.0]]]

Actual:   [[[0.0255, 0, 0, 0, 0, 0, 0], [0.0582, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0.0255, 0, 0, 0, 0, 0, 0], [0.0582, 0, 0, 0, 0, 0, 0]]]