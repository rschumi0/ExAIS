import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub93055 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub93055 = tf.keras.layers.Input(shape=([3, 2]))
in0Sub92460 = tf.keras.layers.Input(shape=([3]))
in1Sub92460 = tf.keras.layers.Input(shape=([3]))
in0Mul36294 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul36294 = tf.keras.layers.Input(shape=([2, 1]))

Sub93055 = keras.layers.Subtract(name = 'Sub93055', )([in0Sub93055,in1Sub93055])
Res62549 = keras.layers.Reshape((3, 2, 1), name = 'Res62549', )(Sub93055)
Res8688 = keras.layers.Reshape((3, 2, 1, 1), name = 'Res8688', )(Res62549)
Cro16094 = keras.layers.Cropping3D(cropping=((1, 1), (1, 0), (0, 0)), name = 'Cro16094', )(Res8688)
Res81909 = keras.layers.Reshape((1, 1, 1), name = 'Res81909', )(Cro16094)
Res94991 = keras.layers.Reshape((1, 1), name = 'Res94991', )(Res81909)
Zer17637 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer17637', )(Res94991)
Sub92460 = keras.layers.Subtract(name = 'Sub92460', )([in0Sub92460,in1Sub92460])
Res39655 = keras.layers.Reshape((3, 1), name = 'Res39655', )(Sub92460)
Mul36294 = keras.layers.Multiply(name = 'Mul36294', )([in0Mul36294,in1Mul36294])
Zer67047 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer67047', )(Mul36294)
Add88914 = keras.layers.Add(name = 'Add88914', )([Res39655,Zer67047])
Mas43442 = keras.layers.Masking(mask_value=2, name = 'Mas43442', )(Add88914)
Min52953 = keras.layers.Minimum(name = 'Min52953', )([Zer17637,Mas43442])
Thr96886 = keras.layers.ThresholdedReLU(theta=5.193668968259655, name = 'Thr96886', )(Min52953)
model = tf.keras.models.Model(inputs=[in0Sub93055,in1Sub93055,in0Sub92460,in1Sub92460,in0Mul36294,in1Mul36294], outputs=Thr96886)
in0Sub93055 = tf.constant([[[0.1829, 0.5151], [0.6716, 0.6122], [0.1201, 0.9951]]])
in1Sub93055 = tf.constant([[[0.9012, 0.419], [0.4745, 0.7949], [0.0673, 0.5685]]])
in0Sub92460 = tf.constant([[0.9351, 0.3461, 0.2618]])
in1Sub92460 = tf.constant([[0.8612, 0.0583, 0.5317]])
in0Mul36294 = tf.constant([[[0.4689], [0.9399]]])
in1Mul36294 = tf.constant([[[0.0159], [0.9922]]])
print (np.array2string(model.predict([in0Sub93055,in1Sub93055,in0Sub92460,in1Sub92460,in0Mul36294,in1Mul36294],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr96886.png')

LSub93055 = subtract_layer([[[0.1829, 0.5151], [0.6716, 0.6122], [0.1201, 0.9951]]], [[[0.9012, 0.419], [0.4745, 0.7949], [0.0673, 0.5685]]], Sub93055), 
LRes62549 = reshape_layer(Sub93055, [3, 2, 1], Res62549), 
LRes8688 = reshape_layer(Res62549, [3, 2, 1, 1], Res8688), 
LCro16094 = cropping3D_layer(Res8688, 1, 1, 1, 0, 0, 0, Cro16094), 
LRes81909 = reshape_layer(Cro16094, [1, 1, 1], Res81909), 
LRes94991 = reshape_layer(Res81909, [1, 1], Res94991), 
LZer17637 = zero_padding1D_layer(Res94991, 2, 0, Zer17637), 
LSub92460 = subtract_layer([[0.9351, 0.3461, 0.2618]], [[0.8612, 0.0583, 0.5317]], Sub92460), 
LRes39655 = reshape_layer(Sub92460, [3, 1], Res39655), 
LMul36294 = multiply_layer([[[[0.4689], [0.9399]]], [[[0.0159], [0.9922]]]], Mul36294), 
LZer67047 = zero_padding1D_layer(Mul36294, 1, 0, Zer67047), 
LAdd88914 = add_layer([Res39655,Zer67047], Add88914), 
LMas43442 = masking_layer(Add88914, 2, Mas43442), 
LMin52953 = minimum_layer([Zer17637,Mas43442], Min52953), 
LThr96886 = thresholded_relu_layer(Min52953, 5.193668968259655, Thr96886), 
exec_layers([LSub93055,LRes62549,LRes8688,LCro16094,LRes81909,LRes94991,LZer17637,LSub92460,LRes39655,LMul36294,LZer67047,LAdd88914,LMas43442,LMin52953,LThr96886],["Sub93055","Res62549","Res8688","Cro16094","Res81909","Res94991","Zer17637","Sub92460","Res39655","Mul36294","Zer67047","Add88914","Mas43442","Min52953","Thr96886"],Thr96886,"Thr96886")

Actual (Unparsed): [[[0.0000000], [0.0000000], [-0.0000000]]]

Expected (Unparsed): [[[0],[0],[0]]]

Actual:   [[[0], [0], [-0]]]

Expected: [[[0], [0], [0]]]