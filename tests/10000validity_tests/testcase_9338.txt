import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot57727 = tf.keras.layers.Input(shape=([3]))
in1Dot57727 = tf.keras.layers.Input(shape=([3]))

Dot57727 = keras.layers.Dot(axes=(1, 1), name = 'Dot57727', )([in0Dot57727,in1Dot57727])
Res14042 = keras.layers.Reshape((1, 1), name = 'Res14042', )(Dot57727)
Glo6508 = keras.layers.GlobalMaxPool1D(name = 'Glo6508', )(Res14042)
Res59288 = keras.layers.Reshape((1, 1), name = 'Res59288', )(Glo6508)
Per38148 = keras.layers.Permute((2,1), name = 'Per38148',)(Res59288)
Res72565 = keras.layers.Reshape((1, 1, 1), name = 'Res72565', )(Per38148)
Con13464 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(1, 1), padding='same', name = 'Con13464', )(Res72565)
model = tf.keras.models.Model(inputs=[in0Dot57727,in1Dot57727], outputs=Con13464)
w = model.get_layer('Con13464').get_weights() 
w[0] = np.array([[[[0.3977], [0.7313]]]])
w[1] = np.array([0, 0])
model.get_layer('Con13464').set_weights(w) 
in0Dot57727 = tf.constant([[0.0985, 0.6702, 0.0372]])
in1Dot57727 = tf.constant([[0.6692, 0.7392, 0.5317]])
print (np.array2string(model.predict([in0Dot57727,in1Dot57727],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con13464.png')

LDot57727 = dot_layer([[0.0985, 0.6702, 0.0372]], [[0.6692, 0.7392, 0.5317]], 1, 1, Dot57727), 
LRes14042 = reshape_layer(Dot57727, [1, 1], Res14042), 
LGlo6508 = global_max_pool1D_layer(Res14042, Glo6508), 
LRes59288 = reshape_layer(Glo6508, [1, 1], Res59288), 
LPer38148 = permute_layer(Res59288, 2,1, Per38148), 
LRes72565 = reshape_layer(Per38148, [1, 1, 1], Res72565), 
LCon13464 = conv2D_transpose_layer(Res72565, 1, 1,[[[[0.3977], [0.7313]]]],[0, 0], 1, 1, true, Con13464), 
exec_layers([LDot57727,LRes14042,LGlo6508,LRes59288,LPer38148,LRes72565,LCon13464],["Dot57727","Res14042","Glo6508","Res59288","Per38148","Res72565","Con13464"],Con13464,"Con13464")

Actual (Unparsed): [[[[0.2311064, 0.4249637]]]]

Expected (Unparsed): [[[[0.231106365256,0.424963753864]]]]

Actual:   [[[[0.2312, 0.425]]]]

Expected: [[[[0.2312, 0.425]]]]