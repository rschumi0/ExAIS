import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep71218 = tf.keras.layers.Input(shape=([2, 2, 2]))

Dep71218 = keras.layers.DepthwiseConv2D((2, 2),strides=(2, 2), padding='valid', name = 'Dep71218', )(in0Dep71218)
Res90390 = keras.layers.Reshape((1, 2), name = 'Res90390', )(Dep71218)
Glo45128 = keras.layers.GlobalAveragePooling1D(name = 'Glo45128', )(Res90390)
model = tf.keras.models.Model(inputs=[in0Dep71218], outputs=Glo45128)
w = model.get_layer('Dep71218').get_weights() 
w[0] = np.array([[[[0.636], [0.6474]], [[0.9571], [0.798]]], [[[0.0734], [0.7167]], [[0.7898], [0.6818]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep71218').set_weights(w) 
in0Dep71218 = tf.constant([[[[0.877, 0.1759], [0.4502, 0.5336]], [[0.8362, 0.675], [0.0272, 0.7949]]]])
print (np.array2string(model.predict([in0Dep71218],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo45128.png')

LDep71218 = depthwise_conv2D_layer([[[[0.877, 0.1759], [0.4502, 0.5336]], [[0.8362, 0.675], [0.0272, 0.7949]]]], 2, 2,[[[[0.636], [0.6474]], [[0.9571], [0.798]]], [[[0.0734], [0.7167]], [[0.7898], [0.6818]]]],[0, 0], 2, 2, false, Dep71218), 
LRes90390 = reshape_layer(Dep71218, [1, 2], Res90390), 
LGlo45128 = global_average_pooling1D_layer(Res90390, Glo45128), 
exec_layers([LDep71218,LRes90390,LGlo45128],["Dep71218","Res90390","Glo45128"],Glo45128,"Glo45128")

Actual (Unparsed): [[1.0715180, 1.5654258]]

Expected (Unparsed): [[1.0715180599999998,1.56542578]]

Actual:   [[1.0716, 1.5655]]

Expected: [[1.0716, 1.5655]]