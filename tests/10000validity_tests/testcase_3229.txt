import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub62006 = tf.keras.layers.Input(shape=([3, 2, 3, 3]))
in1Sub62006 = tf.keras.layers.Input(shape=([3, 2, 3, 3]))
in0PRe24735 = tf.keras.layers.Input(shape=([2, 2]))
in0Con10821 = tf.keras.layers.Input(shape=([3, 16]))
in0Max13350 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Max13350 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Sub62006 = keras.layers.Subtract(name = 'Sub62006', )([in0Sub62006,in1Sub62006])
Res9272 = keras.layers.Reshape((3, 2, 9), name = 'Res9272', )(Sub62006)
Res74972 = keras.layers.Reshape((3, 18), name = 'Res74972', )(Res9272)
PRe24735 = keras.layers.PReLU(name = 'PRe24735', input_shape=(2, 2))(in0PRe24735)
Zer46824 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer46824', )(PRe24735)
Con10821 = keras.layers.Concatenate(axis=2, name = 'Con10821', )([Zer46824,in0Con10821])
Sub50019 = keras.layers.Subtract(name = 'Sub50019', )([Res74972,Con10821])
Res90469 = keras.layers.Reshape((3, 18, 1), name = 'Res90469', )(Sub50019)
Glo19804 = keras.layers.GlobalMaxPool2D(name = 'Glo19804', )(Res90469)
Res34765 = keras.layers.Reshape((1, 1), name = 'Res34765', )(Glo19804)
Cro54632 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro54632', )(Res34765)
Res56932 = keras.layers.Reshape((1, 1, 1), name = 'Res56932', )(Cro54632)
Res419 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res419', )(Res56932)
Zer81331 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer81331', )(Res419)
Max13350 = keras.layers.Maximum(name = 'Max13350', )([in0Max13350,in1Max13350])
Add79237 = keras.layers.Add(name = 'Add79237', )([Zer81331,Max13350])
model = tf.keras.models.Model(inputs=[in0Sub62006,in1Sub62006,in0PRe24735,in0Con10821,in0Max13350,in1Max13350], outputs=Add79237)
w = model.get_layer('PRe24735').get_weights() 
w[0] = np.array([[0.1904, 0.2981], [0.0309, 0.9886]])
model.get_layer('PRe24735').set_weights(w) 
in0Sub62006 = tf.constant([[[[[0.682, 0.977, 0.5482], [0.6711, 0.8978, 0.4499], [0.825, 0.4883, 0.2999]], [[0.7797, 0.9053, 0.9159], [0.076, 0.848, 0.5771], [0.9288, 0.8751, 0.8204]]], [[[0.5684, 0.8674, 0.5068], [0.9668, 0.2437, 0.4043], [0.1632, 0.3054, 0.8981]], [[0.3734, 0.4024, 0.2306], [0.4501, 0.5757, 0.0788], [0.3281, 0.0385, 0.1084]]], [[[0.1163, 0.6489, 0.0154], [0.7243, 0.5305, 0.8187], [0.0918, 0.2238, 0.3796]], [[0.4911, 0.9425, 0.9039], [0.3952, 0.8197, 0.4031], [0.6452, 0.8819, 0.8197]]]]])
in1Sub62006 = tf.constant([[[[[0.5058, 0.3057, 0.1055], [0.7163, 0.9894, 0.7073], [0.795, 0.6376, 0.5933]], [[0.6499, 0.5712, 0.2996], [0.3987, 0.0699, 0.0864], [0.6502, 0.7159, 0.672]]], [[[0.4092, 0.7936, 0.5335], [0.1038, 0.7207, 0.9003], [0.3421, 0.0205, 0.7035]], [[0.222, 0.225, 0.1905], [0.0965, 0.7762, 0.4694], [0.1304, 0.7682, 0.7465]]], [[[0.5915, 0.6253, 0.3158], [0.1482, 0.5927, 0.8914], [0.6359, 0.8537, 0.4689]], [[0.0662, 0.1351, 0.6389], [0.4786, 0.1755, 0.245], [0.5202, 0.4445, 0.7193]]]]])
in0PRe24735 = tf.constant([[[0.6941, 0.278], [0.4071, 0.5407]]])
in0Con10821 = tf.constant([[[0.4624, 0.1888, 0.9085, 0.0603, 0.916, 0.5437, 0.0857, 0.4136, 0.0695, 0.8943, 0.5095, 0.3958, 0.8505, 0.2232, 0.5968, 0.3001], [0.7622, 0.9464, 0.6488, 0.0229, 0.3779, 0.6645, 0.1637, 0.5855, 0.514, 0.8396, 0.9079, 0.5678, 0.0244, 0.8596, 0.9948, 0.4128], [0.0632, 0.2968, 0.329, 0.2346, 0.2225, 0.4238, 0.0354, 0.8493, 0.1666, 0.2106, 0.9128, 0.2353, 0.2583, 0.0953, 0.5241, 0.5251]]])
in0Max13350 = tf.constant([[[[[0.5472]], [[0.7348]]]]])
in1Max13350 = tf.constant([[[[[0.2836]], [[0.7028]]]]])
print (np.array2string(model.predict([in0Sub62006,in1Sub62006,in0PRe24735,in0Con10821,in0Max13350,in1Max13350],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add79237.png')

LSub62006 = subtract_layer([[[[[0.682, 0.977, 0.5482], [0.6711, 0.8978, 0.4499], [0.825, 0.4883, 0.2999]], [[0.7797, 0.9053, 0.9159], [0.076, 0.848, 0.5771], [0.9288, 0.8751, 0.8204]]], [[[0.5684, 0.8674, 0.5068], [0.9668, 0.2437, 0.4043], [0.1632, 0.3054, 0.8981]], [[0.3734, 0.4024, 0.2306], [0.4501, 0.5757, 0.0788], [0.3281, 0.0385, 0.1084]]], [[[0.1163, 0.6489, 0.0154], [0.7243, 0.5305, 0.8187], [0.0918, 0.2238, 0.3796]], [[0.4911, 0.9425, 0.9039], [0.3952, 0.8197, 0.4031], [0.6452, 0.8819, 0.8197]]]]], [[[[[0.5058, 0.3057, 0.1055], [0.7163, 0.9894, 0.7073], [0.795, 0.6376, 0.5933]], [[0.6499, 0.5712, 0.2996], [0.3987, 0.0699, 0.0864], [0.6502, 0.7159, 0.672]]], [[[0.4092, 0.7936, 0.5335], [0.1038, 0.7207, 0.9003], [0.3421, 0.0205, 0.7035]], [[0.222, 0.225, 0.1905], [0.0965, 0.7762, 0.4694], [0.1304, 0.7682, 0.7465]]], [[[0.5915, 0.6253, 0.3158], [0.1482, 0.5927, 0.8914], [0.6359, 0.8537, 0.4689]], [[0.0662, 0.1351, 0.6389], [0.4786, 0.1755, 0.245], [0.5202, 0.4445, 0.7193]]]]], Sub62006), 
LRes9272 = reshape_layer(Sub62006, [3, 2, 9], Res9272), 
LRes74972 = reshape_layer(Res9272, [3, 18], Res74972), 
LPRe24735 = prelu_layer([[[0.6941, 0.278], [0.4071, 0.5407]]], [[0.1904, 0.2981], [0.0309, 0.9886]], PRe24735), 
LZer46824 = zero_padding1D_layer(PRe24735, 1, 0, Zer46824), 
LCon10821 = concatenate_layer([Zer46824,[[[0.4624, 0.1888, 0.9085, 0.0603, 0.916, 0.5437, 0.0857, 0.4136, 0.0695, 0.8943, 0.5095, 0.3958, 0.8505, 0.2232, 0.5968, 0.3001], [0.7622, 0.9464, 0.6488, 0.0229, 0.3779, 0.6645, 0.1637, 0.5855, 0.514, 0.8396, 0.9079, 0.5678, 0.0244, 0.8596, 0.9948, 0.4128], [0.0632, 0.2968, 0.329, 0.2346, 0.2225, 0.4238, 0.0354, 0.8493, 0.1666, 0.2106, 0.9128, 0.2353, 0.2583, 0.0953, 0.5241, 0.5251]]]], 2, Con10821), 
LSub50019 = subtract_layer(Res74972,Con10821, Sub50019), 
LRes90469 = reshape_layer(Sub50019, [3, 18, 1], Res90469), 
LGlo19804 = global_max_pool2D_layer(Res90469, Glo19804), 
LRes34765 = reshape_layer(Glo19804, [1, 1], Res34765), 
LCro54632 = cropping1D_layer(Res34765, 0, 0, Cro54632), 
LRes56932 = reshape_layer(Cro54632, [1, 1, 1], Res56932), 
LRes419 = reshape_layer(Res56932, [1, 1, 1, 1], Res419), 
LZer81331 = zero_padding3D_layer(Res419, 0, 0, 1, 0, 0, 0, Zer81331), 
LMax13350 = maximum_layer([[[[[[0.5472]], [[0.7348]]]]], [[[[[0.2836]], [[0.7028]]]]]], Max13350), 
LAdd79237 = add_layer([Zer81331,Max13350], Add79237), 
exec_layers([LSub62006,LRes9272,LRes74972,LPRe24735,LZer46824,LCon10821,LSub50019,LRes90469,LGlo19804,LRes34765,LCro54632,LRes56932,LRes419,LZer81331,LMax13350,LAdd79237],["Sub62006","Res9272","Res74972","PRe24735","Zer46824","Con10821","Sub50019","Res90469","Glo19804","Res34765","Cro54632","Res56932","Res419","Zer81331","Max13350","Add79237"],Add79237,"Add79237")

Actual (Unparsed): [[[[[0.5472000]], [[1.4061000]]]]]

Expected (Unparsed): [[[[[0.5472]],[[1.4061]]]]]

Actual:   [[[[[0.5472]], [[1.4061]]]]]

Expected: [[[[[0.5472]], [[1.4061]]]]]