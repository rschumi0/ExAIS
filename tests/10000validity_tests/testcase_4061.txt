import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add39590 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add39590 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Add98382 = tf.keras.layers.Input(shape=([2, 1]))
in1Add98382 = tf.keras.layers.Input(shape=([2, 1]))

Add39590 = keras.layers.Add(name = 'Add39590', )([in0Add39590,in1Add39590])
Res28967 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res28967', )(Add39590)
Glo55555 = keras.layers.GlobalMaxPool3D(name = 'Glo55555', )(Res28967)
Res15707 = keras.layers.Reshape((1, 1), name = 'Res15707', )(Glo55555)
Zer16664 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer16664', )(Res15707)
Add98382 = keras.layers.Add(name = 'Add98382', )([in0Add98382,in1Add98382])
Ave92050 = keras.layers.Average(name = 'Ave92050', )([Zer16664,Add98382])
Res89275 = keras.layers.Reshape((2, 1, 1), name = 'Res89275', )(Ave92050)
Ave4804 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 1), padding='valid', name = 'Ave4804', )(Res89275)
model = tf.keras.models.Model(inputs=[in0Add39590,in1Add39590,in0Add98382,in1Add98382], outputs=Ave4804)
in0Add39590 = tf.constant([[[[0.7381, 0.7564]]]])
in1Add39590 = tf.constant([[[[0.5537, 0.8762]]]])
in0Add98382 = tf.constant([[[0.9442], [0.717]]])
in1Add98382 = tf.constant([[[0.8435], [0.3337]]])
print (np.array2string(model.predict([in0Add39590,in1Add39590,in0Add98382,in1Add98382],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave4804.png')

LAdd39590 = add_layer([[[[[0.7381, 0.7564]]]], [[[[0.5537, 0.8762]]]]], Add39590), 
LRes28967 = reshape_layer(Add39590, [1, 1, 2, 1], Res28967), 
LGlo55555 = global_max_pool3D_layer(Res28967, Glo55555), 
LRes15707 = reshape_layer(Glo55555, [1, 1], Res15707), 
LZer16664 = zero_padding1D_layer(Res15707, 1, 0, Zer16664), 
LAdd98382 = add_layer([[[[0.9442], [0.717]]], [[[0.8435], [0.3337]]]], Add98382), 
LAve92050 = average_layer([Zer16664,Add98382], Ave92050), 
LRes89275 = reshape_layer(Ave92050, [2, 1, 1], Res89275), 
LAve4804 = average_pooling2D_layer(Res89275, 2, 1, 1, 1, false, Ave4804), 
exec_layers([LAdd39590,LRes28967,LGlo55555,LRes15707,LZer16664,LAdd98382,LAve92050,LRes89275,LAve4804],["Add39590","Res28967","Glo55555","Res15707","Zer16664","Add98382","Ave92050","Res89275","Ave4804"],Ave4804,"Ave4804")

Actual (Unparsed): [[[[1.1177500]]]]

Expected (Unparsed): [[[[1.11775]]]]

Actual:   [[[[1.1178]]]]

Expected: [[[[1.1178]]]]