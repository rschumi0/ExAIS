import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave32623 = tf.keras.layers.Input(shape=([1, 2]))

Ave32623 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave32623', )(in0Ave32623)
Res178 = keras.layers.Reshape((1, 2, 1), name = 'Res178', )(Ave32623)
Up_75639 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_75639', )(Res178)
Dep37672 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='same', name = 'Dep37672', )(Up_75639)
Res57134 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res57134', )(Dep37672)
Glo16476 = keras.layers.GlobalAveragePooling3D(name = 'Glo16476', )(Res57134)
Res27324 = keras.layers.Reshape((1, 1), name = 'Res27324', )(Glo16476)
Res94071 = keras.layers.Reshape((1, 1, 1), name = 'Res94071', )(Res27324)
Res96603 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res96603', )(Res94071)
Glo78112 = keras.layers.GlobalMaxPool3D(name = 'Glo78112', )(Res96603)
model = tf.keras.models.Model(inputs=[in0Ave32623], outputs=Glo78112)
w = model.get_layer('Dep37672').get_weights() 
w[0] = np.array([[[[0.8904]], [[0.6653]]]])
w[1] = np.array([0])
model.get_layer('Dep37672').set_weights(w) 
in0Ave32623 = tf.constant([[[1.6865, 1.5279]]])
print (np.array2string(model.predict([in0Ave32623],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo78112.png')

LAve32623 = average_pooling1D_layer([[[1.6865, 1.5279]]], 1, Ave32623), 
LRes178 = reshape_layer(Ave32623, [1, 2, 1], Res178), 
LUp_75639 = up_sampling2D_layer(Res178, 1, 1, Up_75639), 
LDep37672 = depthwise_conv2D_layer(Up_75639, 1, 2,[[[[0.8904]], [[0.6653]]]],[0], 1, 1, true, Dep37672), 
LRes57134 = reshape_layer(Dep37672, [1, 2, 1, 1], Res57134), 
LGlo16476 = global_average_pooling3D_layer(Res57134, Glo16476), 
LRes27324 = reshape_layer(Glo16476, [1, 1], Res27324), 
LRes94071 = reshape_layer(Res27324, [1, 1, 1], Res94071), 
LRes96603 = reshape_layer(Res94071, [1, 1, 1, 1], Res96603), 
LGlo78112 = global_max_pool3D_layer(Res96603, Glo78112), 
exec_layers([LAve32623,LRes178,LUp_75639,LDep37672,LRes57134,LGlo16476,LRes27324,LRes94071,LRes96603,LGlo78112],["Ave32623","Res178","Up_75639","Dep37672","Res57134","Glo16476","Res27324","Res94071","Res96603","Glo78112"],Glo78112,"Glo78112")

Actual (Unparsed): [[1.9393068]]

Expected (Unparsed): [[1.9393068150000001]]

Actual:   [[1.9394]]

Expected: [[1.9394]]