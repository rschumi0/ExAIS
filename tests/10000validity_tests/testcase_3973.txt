import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min23702 = tf.keras.layers.Input(shape=([1, 1]))
in1Min23702 = tf.keras.layers.Input(shape=([1, 1]))
in0Con79764 = tf.keras.layers.Input(shape=([1, 7]))
in0Mas60158 = tf.keras.layers.Input(shape=([1, 4, 2]))

Min23702 = keras.layers.Minimum(name = 'Min23702', )([in0Min23702,in1Min23702])
Con79764 = keras.layers.Concatenate(axis=2, name = 'Con79764', )([Min23702,in0Con79764])
Mas60158 = keras.layers.Masking(mask_value=2, name = 'Mas60158', )(in0Mas60158)
Res52046 = keras.layers.Reshape((1, 8), name = 'Res52046', )(Mas60158)
Ave54212 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave54212', )(Res52046)
Lea58343 = keras.layers.LeakyReLU(alpha=5.052902421070443, name = 'Lea58343', )(Ave54212)
Sub9086 = keras.layers.Subtract(name = 'Sub9086', )([Con79764,Lea58343])
model = tf.keras.models.Model(inputs=[in0Min23702,in1Min23702,in0Con79764,in0Mas60158], outputs=Sub9086)
in0Min23702 = tf.constant([[[0.6292]]])
in1Min23702 = tf.constant([[[0.9788]]])
in0Con79764 = tf.constant([[[0.3764, 0.3851, 0.7683, 0.1577, 0.0599, 0.421, 0.3585]]])
in0Mas60158 = tf.constant([[[[1.5471, 1.8614], [1.5844, 1.1303], [1.0773, 1.0072], [1.5135, 1.27]]]])
print (np.array2string(model.predict([in0Min23702,in1Min23702,in0Con79764,in0Mas60158],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub9086.png')

LMin23702 = minimum_layer([[[[0.6292]]], [[[0.9788]]]], Min23702), 
LCon79764 = concatenate_layer([Min23702,[[[0.3764, 0.3851, 0.7683, 0.1577, 0.0599, 0.421, 0.3585]]]], 2, Con79764), 
LMas60158 = masking_layer([[[[1.5471, 1.8614], [1.5844, 1.1303], [1.0773, 1.0072], [1.5135, 1.27]]]], 2, Mas60158), 
LRes52046 = reshape_layer(Mas60158, [1, 8], Res52046), 
LAve54212 = average_pooling1D_layer(Res52046, 1, Ave54212), 
LLea58343 = leaky_relu_layer(Ave54212, 5.052902421070443, Lea58343), 
LSub9086 = subtract_layer(Con79764,Lea58343, Sub9086), 
exec_layers([LMin23702,LCon79764,LMas60158,LRes52046,LAve54212,LLea58343,LSub9086],["Min23702","Con79764","Mas60158","Res52046","Ave54212","Lea58343","Sub9086"],Sub9086,"Sub9086")

Actual (Unparsed): [[[-0.9179000, -1.4850000, -1.1993001, -0.3620000, -0.9196000, -0.9473000, -1.0925000, -0.9115000]]]

Expected (Unparsed): [[[-0.9178999999999999,-1.4849999999999999,-1.1993,-0.3620000000000001,-0.9196,-0.9473000000000001,-1.0925,-0.9115]]]

Actual:   [[[-0.9179, -1.485, -1.1993, -0.362, -0.9196, -0.9473, -1.0925, -0.9115]]]

Expected: [[[-0.9178, -1.4849, -1.1993, -0.362, -0.9196, -0.9473, -1.0925, -0.9115]]]