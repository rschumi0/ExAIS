import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub40243 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub40243 = tf.keras.layers.Input(shape=([2, 3]))

Sub40243 = keras.layers.Subtract(name = 'Sub40243', )([in0Sub40243,in1Sub40243])
Res23401 = keras.layers.Reshape((2, 3, 1), name = 'Res23401', )(Sub40243)
Ave99959 = keras.layers.AveragePooling2D(pool_size=(2, 3), strides=(1, 1), padding='valid', name = 'Ave99959', )(Res23401)
model = tf.keras.models.Model(inputs=[in0Sub40243,in1Sub40243], outputs=Ave99959)
in0Sub40243 = tf.constant([[[0.5356, 0.6274, 0.0777], [0.7059, 0.79, 0.1085]]])
in1Sub40243 = tf.constant([[[0.0966, 0.2996, 0.3599], [0.5281, 0.2719, 0.2829]]])
print (np.array2string(model.predict([in0Sub40243,in1Sub40243],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave99959.png')

LSub40243 = subtract_layer([[[0.5356, 0.6274, 0.0777], [0.7059, 0.79, 0.1085]]], [[[0.0966, 0.2996, 0.3599], [0.5281, 0.2719, 0.2829]]], Sub40243), 
LRes23401 = reshape_layer(Sub40243, [2, 3, 1], Res23401), 
LAve99959 = average_pooling2D_layer(Res23401, 2, 3, 1, 1, false, Ave99959), 
exec_layers([LSub40243,LRes23401,LAve99959],["Sub40243","Res23401","Ave99959"],Ave99959,"Ave99959")

Actual (Unparsed): [[[[0.1676833]]]]

Expected (Unparsed): [[[[0.16768333333333332]]]]

Actual:   [[[[0.1677]]]]

Expected: [[[[0.1677]]]]