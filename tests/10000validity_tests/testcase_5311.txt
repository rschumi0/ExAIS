import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul39330 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul39330 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con52591 = tf.keras.layers.Input(shape=([1, 1]))
in0Mul33357 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul33357 = tf.keras.layers.Input(shape=([1, 2]))

Mul39330 = keras.layers.Multiply(name = 'Mul39330', )([in0Mul39330,in1Mul39330])
Res66864 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res66864', )(Mul39330)
Glo92380 = keras.layers.GlobalMaxPool3D(name = 'Glo92380', )(Res66864)
Res90011 = keras.layers.Reshape((1, 1), name = 'Res90011', )(Glo92380)
Con52591 = keras.layers.Concatenate(axis=2, name = 'Con52591', )([Res90011,in0Con52591])
Mul33357 = keras.layers.Multiply(name = 'Mul33357', )([in0Mul33357,in1Mul33357])
Sub881 = keras.layers.Subtract(name = 'Sub881', )([Con52591,Mul33357])
model = tf.keras.models.Model(inputs=[in0Mul39330,in1Mul39330,in0Con52591,in0Mul33357,in1Mul33357], outputs=Sub881)
in0Mul39330 = tf.constant([[[[0.341, 0.0396]]]])
in1Mul39330 = tf.constant([[[[0.1901, 0.7591]]]])
in0Con52591 = tf.constant([[[0.7122]]])
in0Mul33357 = tf.constant([[[0.9285, 0.685]]])
in1Mul33357 = tf.constant([[[0.419, 0.0687]]])
print (np.array2string(model.predict([in0Mul39330,in1Mul39330,in0Con52591,in0Mul33357,in1Mul33357],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub881.png')

LMul39330 = multiply_layer([[[[[0.341, 0.0396]]]], [[[[0.1901, 0.7591]]]]], Mul39330), 
LRes66864 = reshape_layer(Mul39330, [1, 1, 2, 1], Res66864), 
LGlo92380 = global_max_pool3D_layer(Res66864, Glo92380), 
LRes90011 = reshape_layer(Glo92380, [1, 1], Res90011), 
LCon52591 = concatenate_layer([Res90011,[[[0.7122]]]], 2, Con52591), 
LMul33357 = multiply_layer([[[[0.9285, 0.685]]], [[[0.419, 0.0687]]]], Mul33357), 
LSub881 = subtract_layer(Con52591,Mul33357, Sub881), 
exec_layers([LMul39330,LRes66864,LGlo92380,LRes90011,LCon52591,LMul33357,LSub881],["Mul39330","Res66864","Glo92380","Res90011","Con52591","Mul33357","Sub881"],Sub881,"Sub881")

Actual (Unparsed): [[[-0.3242174, 0.6651405]]]

Expected (Unparsed): [[[-0.3242174,0.6651405]]]

Actual:   [[[-0.3242, 0.6652]]]

Expected: [[[-0.3242, 0.6652]]]