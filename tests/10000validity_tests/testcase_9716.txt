import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add58741 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add58741 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con55895 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Ave61854 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Ave61854 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Add58741 = keras.layers.Add(name = 'Add58741', )([in0Add58741,in1Add58741])
Glo53424 = keras.layers.GlobalMaxPool2D(name = 'Glo53424', )(Add58741)
Res28552 = keras.layers.Reshape((1, 1), name = 'Res28552', )(Glo53424)
Res39080 = keras.layers.Reshape((1, 1, 1), name = 'Res39080', )(Res28552)
Res49393 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res49393', )(Res39080)
Zer83864 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer83864', )(Res49393)
Con55895 = keras.layers.Concatenate(axis=4, name = 'Con55895', )([Zer83864,in0Con55895])
Ave61854 = keras.layers.Average(name = 'Ave61854', )([in0Ave61854,in1Ave61854])
Mul58993 = keras.layers.Multiply(name = 'Mul58993', )([Con55895,Ave61854])
model = tf.keras.models.Model(inputs=[in0Add58741,in1Add58741,in0Con55895,in0Ave61854,in1Ave61854], outputs=Mul58993)
in0Add58741 = tf.constant([[[[0.232], [0.1618]], [[0.2009], [0.976]]]])
in1Add58741 = tf.constant([[[[0.1939], [0.4308]], [[0.2817], [0.2786]]]])
in0Con55895 = tf.constant([[[[[0.6517]]], [[[0.3697]]]]])
in0Ave61854 = tf.constant([[[[[0.2479, 0.5589]]], [[[0.7239, 0.6094]]]]])
in1Ave61854 = tf.constant([[[[[0.5107, 0.0305]]], [[[0.823, 0.5173]]]]])
print (np.array2string(model.predict([in0Add58741,in1Add58741,in0Con55895,in0Ave61854,in1Ave61854],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul58993.png')

LAdd58741 = add_layer([[[[[0.232], [0.1618]], [[0.2009], [0.976]]]], [[[[0.1939], [0.4308]], [[0.2817], [0.2786]]]]], Add58741), 
LGlo53424 = global_max_pool2D_layer(Add58741, Glo53424), 
LRes28552 = reshape_layer(Glo53424, [1, 1], Res28552), 
LRes39080 = reshape_layer(Res28552, [1, 1, 1], Res39080), 
LRes49393 = reshape_layer(Res39080, [1, 1, 1, 1], Res49393), 
LZer83864 = zero_padding3D_layer(Res49393, 1, 0, 0, 0, 0, 0, Zer83864), 
LCon55895 = concatenate_layer([Zer83864,[[[[[0.6517]]], [[[0.3697]]]]]], 4, Con55895), 
LAve61854 = average_layer([[[[[[0.2479, 0.5589]]], [[[0.7239, 0.6094]]]]], [[[[[0.5107, 0.0305]]], [[[0.823, 0.5173]]]]]], Ave61854), 
LMul58993 = multiply_layer([Con55895,Ave61854], Mul58993), 
exec_layers([LAdd58741,LGlo53424,LRes28552,LRes39080,LRes49393,LZer83864,LCon55895,LAve61854,LMul58993],["Add58741","Glo53424","Res28552","Res39080","Res49393","Zer83864","Con55895","Ave61854","Mul58993"],Mul58993,"Mul58993")

Actual (Unparsed): [[[[[0.0000000, 0.1920560]]], [[[0.9703704, 0.2082705]]]]]

Expected (Unparsed): [[[[[0.0,0.19205598999999995]]],[[[0.9703703699999999,0.208270495]]]]]

Actual:   [[[[[0, 0.1921]]], [[[0.9704, 0.2083]]]]]

Expected: [[[[[0, 0.1921]]], [[[0.9704, 0.2083]]]]]