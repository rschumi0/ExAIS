import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max41813 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Sof53954 = tf.keras.layers.Input(shape=([1, 2]))

Max41813 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max41813', )(in0Max41813)
Res28309 = keras.layers.Reshape((2, 2), name = 'Res28309', )(Max41813)
Sof53954 = keras.layers.Softmax(axis=1, name = 'Sof53954', input_shape=(1, 2))(in0Sof53954)
Zer78796 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer78796', )(Sof53954)
Add43896 = keras.layers.Add(name = 'Add43896', )([Res28309,Zer78796])
Con93627 = keras.layers.Conv1D(4, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con93627', )(Add43896)
model = tf.keras.models.Model(inputs=[in0Max41813,in0Sof53954], outputs=Con93627)
w = model.get_layer('Con93627').get_weights() 
w[0] = np.array([[[0.0497, 0.6367, 0.2282, 0.1576], [0.1468, 0.1854, 0.4537, 0.6869]], [[0.0685, 0.2107, 0.4221, 0.2574], [0.1423, 0.7262, 0.7015, 0.1629]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con93627').set_weights(w) 
in0Max41813 = tf.constant([[[[1.0199, 1.4394]], [[1.4569, 1.268]]]])
in0Sof53954 = tf.constant([[[0.0558, 0.6458]]])
print (np.array2string(model.predict([in0Max41813,in0Sof53954],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con93627.png')

LMax41813 = max_pool2D_layer([[[[1.0199, 1.4394]], [[1.4569, 1.268]]]], 1, 1, Max41813), 
LRes28309 = reshape_layer(Max41813, [2, 2], Res28309), 
LSof53954 = softmax_layer([[[0.0558, 0.6458]]], 1, Sof53954), 
LZer78796 = zero_padding1D_layer(Sof53954, 1, 0, Zer78796), 
LAdd43896 = add_layer([Res28309,Zer78796], Add43896), 
LCon93627 = conv1D_layer(Add43896, 2,[[[0.0497, 0.6367, 0.2282, 0.1576], [0.1468, 0.1854, 0.4537, 0.6869]], [[0.0685, 0.2107, 0.4221, 0.2574], [0.1423, 0.7262, 0.7015, 0.1629]]],[0, 0, 0, 0], 1, false, 1, Con93627), 
exec_layers([LMax41813,LRes28309,LSof53954,LZer78796,LAdd43896,LCon93627],["Max41813","Res28309","Sof53954","Zer78796","Add43896","Con93627"],Con93627,"Con93627")

Actual (Unparsed): [[[0.7530270, 3.0809255, 3.5138564, 2.1513233]]]

Expected (Unparsed): [[[0.7530270000000001,3.08092552,3.5138564499999996,2.1513233599999997]]]

Actual:   [[[0.7531, 3.081, 3.5139, 2.1514]]]

Expected: [[[0.7531, 3.081, 3.5139, 2.1514]]]