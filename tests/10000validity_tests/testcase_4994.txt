import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min46470 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min46470 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con13686 = tf.keras.layers.Input(shape=([3, 3, 1]))
in0Ave49963 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave49963 = tf.keras.layers.Input(shape=([1, 2, 2]))

Min46470 = keras.layers.Minimum(name = 'Min46470', )([in0Min46470,in1Min46470])
Res69360 = keras.layers.Reshape((1, 1, 1), name = 'Res69360', )(Min46470)
Res93490 = keras.layers.Reshape((1, 1), name = 'Res93490', )(Res69360)
Zer65896 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer65896', )(Res93490)
Res37940 = keras.layers.Reshape((3, 1, 1), name = 'Res37940', )(Zer65896)
Zer47331 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer47331', )(Res37940)
Con13686 = keras.layers.Concatenate(axis=3, name = 'Con13686', )([Zer47331,in0Con13686])
Ave49963 = keras.layers.Average(name = 'Ave49963', )([in0Ave49963,in1Ave49963])
Zer2526 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer2526', )(Ave49963)
Add74695 = keras.layers.Add(name = 'Add74695', )([Con13686,Zer2526])
model = tf.keras.models.Model(inputs=[in0Min46470,in1Min46470,in0Con13686,in0Ave49963,in1Ave49963], outputs=Add74695)
in0Min46470 = tf.constant([[[[[0.9174]]]]])
in1Min46470 = tf.constant([[[[[0.4459]]]]])
in0Con13686 = tf.constant([[[[0.2188], [0.1742], [0.6823]], [[0.5285], [0.7852], [0.8333]], [[0.0736], [0.8543], [0.7876]]]])
in0Ave49963 = tf.constant([[[[0.142, 0.1281], [0.2668, 0.4315]]]])
in1Ave49963 = tf.constant([[[[0.2785, 0.8708], [0.947, 0.7436]]]])
print (np.array2string(model.predict([in0Min46470,in1Min46470,in0Con13686,in0Ave49963,in1Ave49963],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add74695.png')

LMin46470 = minimum_layer([[[[[[0.9174]]]]], [[[[[0.4459]]]]]], Min46470), 
LRes69360 = reshape_layer(Min46470, [1, 1, 1], Res69360), 
LRes93490 = reshape_layer(Res69360, [1, 1], Res93490), 
LZer65896 = zero_padding1D_layer(Res93490, 1, 1, Zer65896), 
LRes37940 = reshape_layer(Zer65896, [3, 1, 1], Res37940), 
LZer47331 = zero_padding2D_layer(Res37940, 0, 0, 2, 0, Zer47331), 
LCon13686 = concatenate_layer([Zer47331,[[[[0.2188], [0.1742], [0.6823]], [[0.5285], [0.7852], [0.8333]], [[0.0736], [0.8543], [0.7876]]]]], 3, Con13686), 
LAve49963 = average_layer([[[[[0.142, 0.1281], [0.2668, 0.4315]]]], [[[[0.2785, 0.8708], [0.947, 0.7436]]]]], Ave49963), 
LZer2526 = zero_padding2D_layer(Ave49963, 2, 0, 1, 0, Zer2526), 
LAdd74695 = add_layer([Con13686,Zer2526], Add74695), 
exec_layers([LMin46470,LRes69360,LRes93490,LZer65896,LRes37940,LZer47331,LCon13686,LAve49963,LZer2526,LAdd74695],["Min46470","Res69360","Res93490","Zer65896","Res37940","Zer47331","Con13686","Ave49963","Zer2526","Add74695"],Add74695,"Add74695")

Actual (Unparsed): [[[[0.0000000, 0.2188000], [0.0000000, 0.1742000], [0.0000000, 0.6823000]], [[0.0000000, 0.5285000], [0.0000000, 0.7852000], [0.4459000, 0.8333000]], [[0.0000000, 0.0736000], [0.2102500, 1.3537500], [0.6069000, 1.3751500]]]]

Expected (Unparsed): [[[[0,0.2188],[0,0.1742],[0,0.6823]],[[0,0.5285],[0,0.7852],[0.4459,0.8333]],[[0,0.0736],[0.21025,1.35375],[0.6069,1.37515]]]]

Actual:   [[[[0, 0.2188], [0, 0.1742], [0, 0.6823]], [[0, 0.5285], [0, 0.7852], [0.4459, 0.8333]], [[0, 0.0736], [0.2103, 1.3538], [0.6069, 1.3752]]]]

Expected: [[[[0, 0.2188], [0, 0.1742], [0, 0.6823]], [[0, 0.5285], [0, 0.7852], [0.4459, 0.8333]], [[0, 0.0736], [0.2103, 1.3538], [0.6069, 1.3752]]]]