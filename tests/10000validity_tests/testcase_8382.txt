import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave59523 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Ave59523 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Sub1165 = tf.keras.layers.Input(shape=([2]))
in1Sub1165 = tf.keras.layers.Input(shape=([2]))
in0Con67120 = tf.keras.layers.Input(shape=([6]))
in0Max35047 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max35047 = tf.keras.layers.Input(shape=([2, 1, 1]))

Ave59523 = keras.layers.Average(name = 'Ave59523', )([in0Ave59523,in1Ave59523])
Res61747 = keras.layers.Reshape((2, 2, 2), name = 'Res61747', )(Ave59523)
Res61660 = keras.layers.Reshape((2, 4), name = 'Res61660', )(Res61747)
Fla91769 = keras.layers.Flatten(name = 'Fla91769', )(Res61660)
Sub1165 = keras.layers.Subtract(name = 'Sub1165', )([in0Sub1165,in1Sub1165])
Con67120 = keras.layers.Concatenate(axis=1, name = 'Con67120', )([Sub1165,in0Con67120])
Ave11985 = keras.layers.Average(name = 'Ave11985', )([Fla91769,Con67120])
Res60539 = keras.layers.Reshape((8, 1), name = 'Res60539', )(Ave11985)
Max35047 = keras.layers.Maximum(name = 'Max35047', )([in0Max35047,in1Max35047])
Thr22241 = keras.layers.ThresholdedReLU(theta=5.995453966696842, name = 'Thr22241', )(Max35047)
Res19413 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res19413', )(Thr22241)
Glo28428 = keras.layers.GlobalMaxPool3D(name = 'Glo28428', )(Res19413)
Res6532 = keras.layers.Reshape((1, 1), name = 'Res6532', )(Glo28428)
Ave63527 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave63527', )(Res6532)
Zer74847 = keras.layers.ZeroPadding1D(padding=((7, 0)), name = 'Zer74847', )(Ave63527)
Mul35367 = keras.layers.Multiply(name = 'Mul35367', )([Res60539,Zer74847])
model = tf.keras.models.Model(inputs=[in0Ave59523,in1Ave59523,in0Sub1165,in1Sub1165,in0Con67120,in0Max35047,in1Max35047], outputs=Mul35367)
in0Ave59523 = tf.constant([[[[[0.3529], [0.9673]], [[0.254], [0.4854]]], [[[0.8006], [0.8854]], [[0.2006], [0.9151]]]]])
in1Ave59523 = tf.constant([[[[[0.1792], [0.2759]], [[0.9029], [0.5775]]], [[[0.4628], [0.3694]], [[0.1519], [0.0483]]]]])
in0Sub1165 = tf.constant([[0.4317, 0.4098]])
in1Sub1165 = tf.constant([[0.5816, 0.6409]])
in0Con67120 = tf.constant([[0.6036, 0.9407, 0.6034, 0.0948, 0.0139, 0.4158]])
in0Max35047 = tf.constant([[[[0.708]], [[0.6048]]]])
in1Max35047 = tf.constant([[[[0.1406]], [[0.3841]]]])
print (np.array2string(model.predict([in0Ave59523,in1Ave59523,in0Sub1165,in1Sub1165,in0Con67120,in0Max35047,in1Max35047],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul35367.png')

LAve59523 = average_layer([[[[[[0.3529], [0.9673]], [[0.254], [0.4854]]], [[[0.8006], [0.8854]], [[0.2006], [0.9151]]]]], [[[[[0.1792], [0.2759]], [[0.9029], [0.5775]]], [[[0.4628], [0.3694]], [[0.1519], [0.0483]]]]]], Ave59523), 
LRes61747 = reshape_layer(Ave59523, [2, 2, 2], Res61747), 
LRes61660 = reshape_layer(Res61747, [2, 4], Res61660), 
LFla91769 = flatten_layer(Res61660, Fla91769), 
LSub1165 = subtract_layer([[0.4317, 0.4098]], [[0.5816, 0.6409]], Sub1165), 
LCon67120 = concatenate_layer([Sub1165,[[0.6036, 0.9407, 0.6034, 0.0948, 0.0139, 0.4158]]], 1, Con67120), 
LAve11985 = average_layer([Fla91769,Con67120], Ave11985), 
LRes60539 = reshape_layer(Ave11985, [8, 1], Res60539), 
LMax35047 = maximum_layer([[[[[0.708]], [[0.6048]]]], [[[[0.1406]], [[0.3841]]]]], Max35047), 
LThr22241 = thresholded_relu_layer(Max35047, 5.995453966696842, Thr22241), 
LRes19413 = reshape_layer(Thr22241, [2, 1, 1, 1], Res19413), 
LGlo28428 = global_max_pool3D_layer(Res19413, Glo28428), 
LRes6532 = reshape_layer(Glo28428, [1, 1], Res6532), 
LAve63527 = average_pooling1D_layer(Res6532, 1, 1, true, Ave63527), 
LZer74847 = zero_padding1D_layer(Ave63527, 7, 0, Zer74847), 
LMul35367 = multiply_layer([Res60539,Zer74847], Mul35367), 
exec_layers([LAve59523,LRes61747,LRes61660,LFla91769,LSub1165,LCon67120,LAve11985,LRes60539,LMax35047,LThr22241,LRes19413,LGlo28428,LRes6532,LAve63527,LZer74847,LMul35367],["Ave59523","Res61747","Res61660","Fla91769","Sub1165","Con67120","Ave11985","Res60539","Max35047","Thr22241","Res19413","Glo28428","Res6532","Ave63527","Zer74847","Mul35367"],Mul35367,"Mul35367")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]

Expected (Unparsed): [[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]]]

Actual:   [[[0], [0], [0], [0], [0], [0], [0], [0]]]

Expected: [[[0], [0], [0], [0], [0], [0], [0], [0]]]