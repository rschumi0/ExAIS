import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add93890 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add93890 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Add27227 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add27227 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Add93890 = keras.layers.Add(name = 'Add93890', )([in0Add93890,in1Add93890])
Res30388 = keras.layers.Reshape((2, 2), name = 'Res30388', )(Add93890)
Cro41563 = keras.layers.Cropping1D(cropping=((0, 1)), name = 'Cro41563', )(Res30388)
Bat68440 = keras.layers.BatchNormalization(axis=1, epsilon=0.8271377904555987,  name = 'Bat68440', )(Cro41563)
Res16278 = keras.layers.Reshape((1, 2, 1), name = 'Res16278', )(Bat68440)
Res84504 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res84504', )(Res16278)
Zer50429 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer50429', )(Res84504)
Add27227 = keras.layers.Add(name = 'Add27227', )([in0Add27227,in1Add27227])
Max4298 = keras.layers.Maximum(name = 'Max4298', )([Zer50429,Add27227])
Res91057 = keras.layers.Reshape((1, 2, 2), name = 'Res91057', )(Max4298)
Res32619 = keras.layers.Reshape((1, 4), name = 'Res32619', )(Res91057)
Sep10658 = keras.layers.SeparableConv1D(2, (1),strides=(1), padding='same', name = 'Sep10658', )(Res32619)
model = tf.keras.models.Model(inputs=[in0Add93890,in1Add93890,in0Add27227,in1Add27227], outputs=Sep10658)
w = model.get_layer('Bat68440').get_weights() 
w[0] = np.array([0.6549])
w[1] = np.array([0.7142])
w[2] = np.array([0.2132])
w[3] = np.array([0.4589])
model.get_layer('Bat68440').set_weights(w) 
w = model.get_layer('Sep10658').get_weights() 
w[0] = np.array([[[0.2634], [0.4156], [0.1182], [0.9445]]])
w[1] = np.array([[[0.7949, 0.2948], [0.9523, 0.5811], [0.1331, 0.3446], [0.5643, 0.9065]]])
w[2] = np.array([0, 0])
model.get_layer('Sep10658').set_weights(w) 
in0Add93890 = tf.constant([[[[0.0801, 0.3739]], [[0.0709, 0.5628]]]])
in1Add93890 = tf.constant([[[[0.3789, 0.52]], [[0.3497, 0.2154]]]])
in0Add27227 = tf.constant([[[[[0.5959], [0.7612]], [[0.0473], [0.7376]]]]])
in1Add27227 = tf.constant([[[[[0.8416], [0.2358]], [[0.1929], [0.4018]]]]])
print (np.array2string(model.predict([in0Add93890,in1Add93890,in0Add27227,in1Add27227],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep10658.png')

LAdd93890 = add_layer([[[[[0.0801, 0.3739]], [[0.0709, 0.5628]]]], [[[[0.3789, 0.52]], [[0.3497, 0.2154]]]]], Add93890), 
LRes30388 = reshape_layer(Add93890, [2, 2], Res30388), 
LCro41563 = cropping1D_layer(Res30388, 0, 1, Cro41563), 
LBat68440 = batch_normalization_layer(Cro41563, 1, 0.8271377904555987, [0.6549], [0.7142], [0.2132], [0.4589], Bat68440), 
LRes16278 = reshape_layer(Bat68440, [1, 2, 1], Res16278), 
LRes84504 = reshape_layer(Res16278, [1, 2, 1, 1], Res84504), 
LZer50429 = zero_padding3D_layer(Res84504, 0, 0, 0, 0, 1, 0, Zer50429), 
LAdd27227 = add_layer([[[[[[0.5959], [0.7612]], [[0.0473], [0.7376]]]]], [[[[[0.8416], [0.2358]], [[0.1929], [0.4018]]]]]], Add27227), 
LMax4298 = maximum_layer([Zer50429,Add27227], Max4298), 
LRes91057 = reshape_layer(Max4298, [1, 2, 2], Res91057), 
LRes32619 = reshape_layer(Res91057, [1, 4], Res32619), 
LSep10658 = separable_conv1D_layer(Res32619, 1,[[[[0.2634], [0.4156], [0.1182], [0.9445]]],[[[0.7949, 0.2948], [0.9523, 0.5811], [0.1331, 0.3446], [0.5643, 0.9065]]]],[0, 0], 1, true, Sep10658), 
exec_layers([LAdd93890,LRes30388,LCro41563,LBat68440,LRes16278,LRes84504,LZer50429,LAdd27227,LMax4298,LRes91057,LRes32619,LSep10658],["Add93890","Res30388","Cro41563","Bat68440","Res16278","Res84504","Zer50429","Add27227","Max4298","Res91057","Res32619","Sep10658"],Sep10658,"Sep10658")

Actual (Unparsed): [[[1.3066254, 1.3377288]]]

Expected (Unparsed): [[[1.306625378584,1.337728770114]]]

Actual:   [[[1.3067, 1.3378]]]

Expected: [[[1.3067, 1.3378]]]