import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave39061 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave39061 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con67185 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave5932 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave5932 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Mul9777 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Mul9777 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con50034 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Max37714 = tf.keras.layers.Input(shape=([1, 2]))
in0Con19049 = tf.keras.layers.Input(shape=([2, 6]))

Ave39061 = keras.layers.Average(name = 'Ave39061', )([in0Ave39061,in1Ave39061])
Res23939 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res23939', )(Ave39061)
Con67185 = keras.layers.Concatenate(axis=4, name = 'Con67185', )([Res23939,in0Con67185])
Ave5932 = keras.layers.Average(name = 'Ave5932', )([in0Ave5932,in1Ave5932])
Mul80569 = keras.layers.Multiply(name = 'Mul80569', )([Con67185,Ave5932])
Mul9777 = keras.layers.Multiply(name = 'Mul9777', )([in0Mul9777,in1Mul9777])
Zer99616 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer99616', )(Mul9777)
Con50034 = keras.layers.Concatenate(axis=4, name = 'Con50034', )([Zer99616,in0Con50034])
Add55955 = keras.layers.Add(name = 'Add55955', )([Mul80569,Con50034])
Res87160 = keras.layers.Reshape((2, 2, 4), name = 'Res87160', )(Add55955)
Res93405 = keras.layers.Reshape((2, 8), name = 'Res93405', )(Res87160)
Max37714 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max37714', )(in0Max37714)
Thr65068 = keras.layers.ThresholdedReLU(theta=6.491863621748609, name = 'Thr65068', )(Max37714)
Zer57897 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer57897', )(Thr65068)
Con19049 = keras.layers.Concatenate(axis=2, name = 'Con19049', )([Zer57897,in0Con19049])
Sub70621 = keras.layers.Subtract(name = 'Sub70621', )([Res93405,Con19049])
model = tf.keras.models.Model(inputs=[in0Ave39061,in1Ave39061,in0Con67185,in0Ave5932,in1Ave5932,in0Mul9777,in1Mul9777,in0Con50034,in0Max37714,in0Con19049], outputs=Sub70621)
in0Ave39061 = tf.constant([[[[0.2293, 0.052], [0.0287, 0.9814]], [[0.8188, 0.7315], [0.496, 0.9106]]]])
in1Ave39061 = tf.constant([[[[0.4144, 0.975], [0.385, 0.1743]], [[0.4343, 0.364], [0.4992, 0.7992]]]])
in0Con67185 = tf.constant([[[[[0.69], [0.0425]], [[0.3308], [0.796]]], [[[0.0719], [0.6323]], [[0.0531], [0.7989]]]]])
in0Ave5932 = tf.constant([[[[[0.4199, 0.6051], [0.5663, 0.6014]], [[0.6991, 0.2847], [0.7721, 0.4202]]], [[[0.1111, 0.1455], [0.0835, 0.1567]], [[0.0666, 0.2318], [0.3415, 0.502]]]]])
in1Ave5932 = tf.constant([[[[[0.8291, 0.8394], [0.2333, 0.971]], [[0.7952, 0.3184], [0.16, 0.6115]]], [[[0.7226, 0.433], [0.704, 0.5543]], [[0.3113, 0.1593], [0.8692, 0.386]]]]])
in0Mul9777 = tf.constant([[[[[0.2764], [0.5136]]]]])
in1Mul9777 = tf.constant([[[[[0.5211], [0.1817]]]]])
in0Con50034 = tf.constant([[[[[0.982], [0.7747]], [[0.7943], [0.3544]]], [[[0.9453], [0.6635]], [[0.4931], [0.1701]]]]])
in0Max37714 = tf.constant([[[1.0688, 1.2506]]])
in0Con19049 = tf.constant([[[0.8715, 0.6344, 0.6556, 0.2219, 0.3806, 0.1207], [0.3008, 0.6601, 0.0107, 0.8109, 0.9671, 0.4718]]])
print (np.array2string(model.predict([in0Ave39061,in1Ave39061,in0Con67185,in0Ave5932,in1Ave5932,in0Mul9777,in1Mul9777,in0Con50034,in0Max37714,in0Con19049],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub70621.png')

LAve39061 = average_layer([[[[[0.2293, 0.052], [0.0287, 0.9814]], [[0.8188, 0.7315], [0.496, 0.9106]]]], [[[[0.4144, 0.975], [0.385, 0.1743]], [[0.4343, 0.364], [0.4992, 0.7992]]]]], Ave39061), 
LRes23939 = reshape_layer(Ave39061, [2, 2, 2, 1], Res23939), 
LCon67185 = concatenate_layer([Res23939,[[[[[0.69], [0.0425]], [[0.3308], [0.796]]], [[[0.0719], [0.6323]], [[0.0531], [0.7989]]]]]], 4, Con67185), 
LAve5932 = average_layer([[[[[[0.4199, 0.6051], [0.5663, 0.6014]], [[0.6991, 0.2847], [0.7721, 0.4202]]], [[[0.1111, 0.1455], [0.0835, 0.1567]], [[0.0666, 0.2318], [0.3415, 0.502]]]]], [[[[[0.8291, 0.8394], [0.2333, 0.971]], [[0.7952, 0.3184], [0.16, 0.6115]]], [[[0.7226, 0.433], [0.704, 0.5543]], [[0.3113, 0.1593], [0.8692, 0.386]]]]]], Ave5932), 
LMul80569 = multiply_layer([Con67185,Ave5932], Mul80569), 
LMul9777 = multiply_layer([[[[[[0.2764], [0.5136]]]]], [[[[[0.5211], [0.1817]]]]]], Mul9777), 
LZer99616 = zero_padding3D_layer(Mul9777, 1, 0, 1, 0, 0, 0, Zer99616), 
LCon50034 = concatenate_layer([Zer99616,[[[[[0.982], [0.7747]], [[0.7943], [0.3544]]], [[[0.9453], [0.6635]], [[0.4931], [0.1701]]]]]], 4, Con50034), 
LAdd55955 = add_layer([Mul80569,Con50034], Add55955), 
LRes87160 = reshape_layer(Add55955, [2, 2, 4], Res87160), 
LRes93405 = reshape_layer(Res87160, [2, 8], Res93405), 
LMax37714 = max_pool1D_layer([[[1.0688, 1.2506]]], 1, 1, true, Max37714), 
LThr65068 = thresholded_relu_layer(Max37714, 6.491863621748609, Thr65068), 
LZer57897 = zero_padding1D_layer(Thr65068, 1, 0, Zer57897), 
LCon19049 = concatenate_layer([Zer57897,[[[0.8715, 0.6344, 0.6556, 0.2219, 0.3806, 0.1207], [0.3008, 0.6601, 0.0107, 0.8109, 0.9671, 0.4718]]]], 2, Con19049), 
LSub70621 = subtract_layer(Res93405,Con19049, Sub70621), 
exec_layers([LAve39061,LRes23939,LCon67185,LAve5932,LMul80569,LMul9777,LZer99616,LCon50034,LAdd55955,LRes87160,LRes93405,LMax37714,LThr65068,LZer57897,LCon19049,LSub70621],["Ave39061","Res23939","Con67185","Ave5932","Mul80569","Mul9777","Zer99616","Con50034","Add55955","Res87160","Res93405","Max37714","Thr65068","Zer57897","Con19049","Sub70621"],Sub70621,"Sub70621")

Actual (Unparsed): [[[0.2009953, 1.4803525, -0.6662027, 0.1737135, -0.5010520, 0.6721528, -0.1112930, 0.6443166], [0.2611774, 0.9660971, -0.0851234, 0.2281827, 0.2273536, -0.3074163, -0.3562652, 0.0530116]]]

Expected (Unparsed): [[[0.20099532499999997,1.4803525,-0.6662027,0.17371350000000008,-0.5010520224999999,0.67215274,-0.11129300749999999,0.6443166],[0.2611773675,0.9660970750000001,-0.08512343750000004,0.22818265000000004,0.22735356,-0.307416295,-0.35626516499999983,0.05301160000000005]]]

Actual:   [[[0.201, 1.4804, -0.6662, 0.1738, -0.501, 0.6722, -0.1112, 0.6444], [0.2612, 0.9661, -0.0851, 0.2282, 0.2274, -0.3074, -0.3562, 0.0531]]]

Expected: [[[0.201, 1.4804, -0.6662, 0.1738, -0.501, 0.6722, -0.1112, 0.6444], [0.2612, 0.9661, -0.0851, 0.2282, 0.2274, -0.3074, -0.3562, 0.0531]]]