import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot55350 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot55350 = tf.keras.layers.Input(shape=([2, 2]))
in0Con60032 = tf.keras.layers.Input(shape=([5, 2]))
in0Zer79663 = tf.keras.layers.Input(shape=([3, 4]))

Dot55350 = keras.layers.Dot(axes=(1, 1), name = 'Dot55350', )([in0Dot55350,in1Dot55350])
Zer59207 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer59207', )(Dot55350)
Con60032 = keras.layers.Concatenate(axis=2, name = 'Con60032', )([Zer59207,in0Con60032])
Zer79663 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer79663', )(in0Zer79663)
Mul72487 = keras.layers.Multiply(name = 'Mul72487', )([Con60032,Zer79663])
Fla98475 = keras.layers.Flatten(name = 'Fla98475', )(Mul72487)
model = tf.keras.models.Model(inputs=[in0Dot55350,in1Dot55350,in0Con60032,in0Zer79663], outputs=Fla98475)
in0Dot55350 = tf.constant([[[0.7988, 0.6944], [0.1855, 0.4114]]])
in1Dot55350 = tf.constant([[[0.6142, 0.6561], [0.7764, 0.9357]]])
in0Con60032 = tf.constant([[[0.9206, 0.1598], [0.1841, 0.9518], [0.9726, 0.8544], [0.8048, 0.0126], [0.5585, 0.9036]]])
in0Zer79663 = tf.constant([[[1.4951, 1.0664, 1.334, 1.259], [1.4781, 1.7545, 1.8112, 1.4839], [1.746, 1.2173, 1.2948, 1.4724]]])
print (np.array2string(model.predict([in0Dot55350,in1Dot55350,in0Con60032,in0Zer79663],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla98475.png')

LDot55350 = dot_layer([[[0.7988, 0.6944], [0.1855, 0.4114]]], [[[0.6142, 0.6561], [0.7764, 0.9357]]], 1, 1, Dot55350), 
LZer59207 = zero_padding1D_layer(Dot55350, 3, 0, Zer59207), 
LCon60032 = concatenate_layer([Zer59207,[[[0.9206, 0.1598], [0.1841, 0.9518], [0.9726, 0.8544], [0.8048, 0.0126], [0.5585, 0.9036]]]], 2, Con60032), 
LZer79663 = zero_padding1D_layer([[[1.4951, 1.0664, 1.334, 1.259], [1.4781, 1.7545, 1.8112, 1.4839], [1.746, 1.2173, 1.2948, 1.4724]]], 1, 1, Zer79663), 
LMul72487 = multiply_layer([Con60032,Zer79663], Mul72487), 
LFla98475 = flatten_layer(Mul72487, Fla98475), 
exec_layers([LDot55350,LZer59207,LCon60032,LZer79663,LMul72487,LFla98475],["Dot55350","Zer59207","Con60032","Zer79663","Mul72487","Fla98475"],Fla98475,"Fla98475")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.2455894, 1.1983161, 0.0000000, 0.0000000, 1.7615731, 1.2678441, 1.1080905, 0.8492676, 1.0420550, 0.0185522, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0,0,0.0,0.0,0.0,0.0,0.24558940000000004,1.1983161999999998,0.0,0.0,1.76157312,1.26784416,1.10809044936,0.8492676410190001,1.04205504,0.018552239999999998,0.0,0.0,0.0,0.0]]

Actual:   [[0, 0, 0, 0, 0, 0, 0.2456, 1.1984, 0, 0, 1.7616, 1.2679, 1.1081, 0.8493, 1.0421, 0.0186, 0, 0, 0, 0]]

Expected: [[0, 0, 0, 0, 0, 0, 0.2456, 1.1984, 0, 0, 1.7616, 1.2679, 1.1081, 0.8493, 1.0421, 0.0186, 0, 0, 0, 0]]