import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot36604 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot36604 = tf.keras.layers.Input(shape=([3, 3]))
in0Add36824 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add36824 = tf.keras.layers.Input(shape=([2, 2, 1]))

Dot36604 = keras.layers.Dot(axes=(2, 2), name = 'Dot36604', )([in0Dot36604,in1Dot36604])
Res66485 = keras.layers.Reshape((3, 3, 1), name = 'Res66485', )(Dot36604)
Add36824 = keras.layers.Add(name = 'Add36824', )([in0Add36824,in1Add36824])
Zer11591 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer11591', )(Add36824)
Ave30935 = keras.layers.Average(name = 'Ave30935', )([Res66485,Zer11591])
Lea64484 = keras.layers.LeakyReLU(alpha=7.255818630935951, name = 'Lea64484', )(Ave30935)
model = tf.keras.models.Model(inputs=[in0Dot36604,in1Dot36604,in0Add36824,in1Add36824], outputs=Lea64484)
in0Dot36604 = tf.constant([[[0.5894, 0.2031, 0.3685], [0.8704, 0.1892, 0.6278], [0.7365, 0.3477, 0.1559]]])
in1Dot36604 = tf.constant([[[0.5335, 0.7447, 0.7981], [0.1803, 0.3221, 0.9914], [0.5665, 0.2617, 0.6035]]])
in0Add36824 = tf.constant([[[[0.5392], [0.8077]], [[0.2338], [0.7259]]]])
in1Add36824 = tf.constant([[[[0.6715], [0.3972]], [[0.5944], [0.4026]]]])
print (np.array2string(model.predict([in0Dot36604,in1Dot36604,in0Add36824,in1Add36824],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Lea64484.png')

LDot36604 = dot_layer([[[0.5894, 0.2031, 0.3685], [0.8704, 0.1892, 0.6278], [0.7365, 0.3477, 0.1559]]], [[[0.5335, 0.7447, 0.7981], [0.1803, 0.3221, 0.9914], [0.5665, 0.2617, 0.6035]]], 2, 2, Dot36604), 
LRes66485 = reshape_layer(Dot36604, [3, 3, 1], Res66485), 
LAdd36824 = add_layer([[[[[0.5392], [0.8077]], [[0.2338], [0.7259]]]], [[[[0.6715], [0.3972]], [[0.5944], [0.4026]]]]], Add36824), 
LZer11591 = zero_padding2D_layer(Add36824, 1, 0, 1, 0, Zer11591), 
LAve30935 = average_layer([Res66485,Zer11591], Ave30935), 
LLea64484 = leaky_relu_layer(Ave30935, 7.255818630935951, Lea64484), 
exec_layers([LDot36604,LRes66485,LAdd36824,LZer11591,LAve30935,LLea64484],["Dot36604","Res66485","Add36824","Zer11591","Ave30935","Lea64484"],Lea64484,"Lea64484")

Actual (Unparsed): [[[[0.3798967], [0.2685091], [0.3047181]], [[0.5531514], [1.0254877], [1.0631863]], [[0.3881394], [0.6137722], [0.8654030]]]]

Expected (Unparsed): [[[[0.37989666],[0.26850911499999996],[0.30471806]],[[0.55315141],[1.0254876800000001],[1.0631862699999999]],[[0.388139365],[0.61377219],[0.8654029950000001]]]]

Actual:   [[[[0.3799], [0.2686], [0.3048]], [[0.5532], [1.0255], [1.0632]], [[0.3882], [0.6138], [0.8655]]]]

Expected: [[[[0.3799], [0.2686], [0.3048]], [[0.5532], [1.0255], [1.0632]], [[0.3882], [0.6138], [0.8655]]]]