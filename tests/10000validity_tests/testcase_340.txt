import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max13074 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Max13074 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Max13074 = keras.layers.Maximum(name = 'Max13074', )([in0Max13074,in1Max13074])
Res80767 = keras.layers.Reshape((2, 1, 2), name = 'Res80767', )(Max13074)
Up_1302 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_1302', )(Res80767)
Res99656 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res99656', )(Up_1302)
Con6620 = keras.layers.Conv3D(4, (2, 1, 1),strides=(1, 1, 11), padding='valid', dilation_rate=(1, 1, 1), name = 'Con6620', )(Res99656)
model = tf.keras.models.Model(inputs=[in0Max13074,in1Max13074], outputs=Con6620)
w = model.get_layer('Con6620').get_weights() 
w[0] = np.array([[[[[0.9321, 0.9251, 0.4302, 0.9216]]]], [[[[0.0802, 0.2719, 0.4746, 0.4008]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con6620').set_weights(w) 
in0Max13074 = tf.constant([[[[[0.9147], [0.1172]]], [[[0.8285], [0.1087]]]]])
in1Max13074 = tf.constant([[[[[0.15], [0.6551]]], [[[0.2265], [0.1254]]]]])
print (np.array2string(model.predict([in0Max13074,in1Max13074],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con6620.png')

LMax13074 = maximum_layer([[[[[[0.9147], [0.1172]]], [[[0.8285], [0.1087]]]]], [[[[[0.15], [0.6551]]], [[[0.2265], [0.1254]]]]]], Max13074), 
LRes80767 = reshape_layer(Max13074, [2, 1, 2], Res80767), 
LUp_1302 = up_sampling2D_layer(Res80767, 1, 2, Up_1302), 
LRes99656 = reshape_layer(Up_1302, [2, 2, 2, 1], Res99656), 
LCon6620 = conv3D_layer(Res99656, 2, 1, 1,[[[[[0.9321, 0.9251, 0.4302, 0.9216]]]], [[[[0.0802, 0.2719, 0.4746, 0.4008]]]]],[0, 0, 0, 0], 1, 1, 11, false, 1, 1, 1, Con6620), 
exec_layers([LMax13074,LRes80767,LUp_1302,LRes99656,LCon6620],["Max13074","Res80767","Up_1302","Res99656","Con6620"],Con6620,"Con6620")

Actual (Unparsed): [[[[[0.9190375, 1.0714581, 0.7867100, 1.1750503]], [[0.9190375, 1.0714581, 0.7867100, 1.1750503]]]]]

Expected (Unparsed): [[[[[0.91903757,1.07145812,0.78671004,1.17505032]],[[0.91903757,1.07145812,0.78671004,1.17505032]]]]]

Actual:   [[[[[0.9191, 1.0715, 0.7868, 1.1751]], [[0.9191, 1.0715, 0.7868, 1.1751]]]]]

Expected: [[[[[0.9191, 1.0715, 0.7868, 1.1751]], [[0.9191, 1.0715, 0.7868, 1.1751]]]]]