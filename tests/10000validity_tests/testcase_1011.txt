import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub72410 = tf.keras.layers.Input(shape=([2]))
in1Sub72410 = tf.keras.layers.Input(shape=([2]))
in0Con26091 = tf.keras.layers.Input(shape=([2]))
in0Sub70840 = tf.keras.layers.Input(shape=([3]))
in1Sub70840 = tf.keras.layers.Input(shape=([3]))

Sub72410 = keras.layers.Subtract(name = 'Sub72410', )([in0Sub72410,in1Sub72410])
Res93695 = keras.layers.Reshape((2, 1), name = 'Res93695', )(Sub72410)
Res12080 = keras.layers.Reshape((2, 1, 1), name = 'Res12080', )(Res93695)
Glo15228 = keras.layers.GlobalMaxPool2D(name = 'Glo15228', )(Res12080)
Con26091 = keras.layers.Concatenate(axis=1, name = 'Con26091', )([Glo15228,in0Con26091])
Sub70840 = keras.layers.Subtract(name = 'Sub70840', )([in0Sub70840,in1Sub70840])
ELU40568 = keras.layers.ELU(alpha=-2.557060992145872, name = 'ELU40568', )(Sub70840)
Ave17121 = keras.layers.Average(name = 'Ave17121', )([Con26091,ELU40568])
model = tf.keras.models.Model(inputs=[in0Sub72410,in1Sub72410,in0Con26091,in0Sub70840,in1Sub70840], outputs=Ave17121)
in0Sub72410 = tf.constant([[0.8054, 0.5862]])
in1Sub72410 = tf.constant([[0.3977, 0.4593]])
in0Con26091 = tf.constant([[0.448, 0.1931]])
in0Sub70840 = tf.constant([[0.0897, 0.0205, 0.231]])
in1Sub70840 = tf.constant([[0.3148, 0.9421, 0.1118]])
print (np.array2string(model.predict([in0Sub72410,in1Sub72410,in0Con26091,in0Sub70840,in1Sub70840],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave17121.png')

LSub72410 = subtract_layer([[0.8054, 0.5862]], [[0.3977, 0.4593]], Sub72410), 
LRes93695 = reshape_layer(Sub72410, [2, 1], Res93695), 
LRes12080 = reshape_layer(Res93695, [2, 1, 1], Res12080), 
LGlo15228 = global_max_pool2D_layer(Res12080, Glo15228), 
LCon26091 = concatenate_layer([Glo15228,[[0.448, 0.1931]]], 1, Con26091), 
LSub70840 = subtract_layer([[0.0897, 0.0205, 0.231]], [[0.3148, 0.9421, 0.1118]], Sub70840), 
LELU40568 = elu_layer(Sub70840, -2.557060992145872, ELU40568), 
LAve17121 = average_layer([Con26091,ELU40568], Ave17121), 
exec_layers([LSub72410,LRes93695,LRes12080,LGlo15228,LCon26091,LSub70840,LELU40568,LAve17121],["Sub72410","Res93695","Res12080","Glo15228","Con26091","Sub70840","ELU40568","Ave17121"],Ave17121,"Ave17121")

Actual (Unparsed): [[0.4615552, 0.9938263, 0.1561500]]

Expected (Unparsed): [[0.4615552464094873,0.9938263269400048,0.15615]]

Actual:   [[0.4616, 0.9939, 0.1562]]

Expected: [[0.4616, 0.9939, 0.1562]]