import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub6518 = tf.keras.layers.Input(shape=([2, 3, 3, 3]))
in1Sub6518 = tf.keras.layers.Input(shape=([2, 3, 3, 3]))
in0Min32886 = tf.keras.layers.Input(shape=([1, 1]))
in1Min32886 = tf.keras.layers.Input(shape=([1, 1]))
in0Con88584 = tf.keras.layers.Input(shape=([53]))
in0Con2996 = tf.keras.layers.Input(shape=([54, 1]))
in0Add87159 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add87159 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Sub6518 = keras.layers.Subtract(name = 'Sub6518', )([in0Sub6518,in1Sub6518])
Res45356 = keras.layers.Reshape((2, 3, 9), name = 'Res45356', )(Sub6518)
Res15894 = keras.layers.Reshape((2, 27), name = 'Res15894', )(Res45356)
Fla67003 = keras.layers.Flatten(name = 'Fla67003', )(Res15894)
Min32886 = keras.layers.Minimum(name = 'Min32886', )([in0Min32886,in1Min32886])
Glo53638 = keras.layers.GlobalMaxPool1D(name = 'Glo53638', )(Min32886)
Con88584 = keras.layers.Concatenate(axis=1, name = 'Con88584', )([Glo53638,in0Con88584])
Max34428 = keras.layers.Maximum(name = 'Max34428', )([Fla67003,Con88584])
Res37130 = keras.layers.Reshape((54, 1), name = 'Res37130', )(Max34428)
Con2996 = keras.layers.Concatenate(axis=2, name = 'Con2996', )([Res37130,in0Con2996])
Add87159 = keras.layers.Add(name = 'Add87159', )([in0Add87159,in1Add87159])
Res94667 = keras.layers.Reshape((1, 1, 2), name = 'Res94667', )(Add87159)
Res28368 = keras.layers.Reshape((1, 2), name = 'Res28368', )(Res94667)
Ave161 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave161', )(Res28368)
Res34331 = keras.layers.Reshape((1, 2, 1), name = 'Res34331', )(Ave161)
Up_61599 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_61599', )(Res34331)
Res80810 = keras.layers.Reshape((1, 2), name = 'Res80810', )(Up_61599)
Zer97556 = keras.layers.ZeroPadding1D(padding=((53, 0)), name = 'Zer97556', )(Res80810)
Dot33900 = keras.layers.Dot(axes=(1, 1), name = 'Dot33900', )([Con2996,Zer97556])
model = tf.keras.models.Model(inputs=[in0Sub6518,in1Sub6518,in0Min32886,in1Min32886,in0Con88584,in0Con2996,in0Add87159,in1Add87159], outputs=Dot33900)
in0Sub6518 = tf.constant([[[[[0.924, 0.0476, 0.9546], [0.382, 0.3631, 0.3162], [0.9891, 0.4601, 0.7388]], [[0.9263, 0.5421, 0.0321], [0.4088, 0.5478, 0.0229], [0.5988, 0.5191, 0.7774]], [[0.8181, 0.9888, 0.2398], [0.4878, 0.4391, 0.8081], [0.8884, 0.3029, 0.7995]]], [[[0.6891, 0.2058, 0.8194], [0.8255, 0.2907, 0.7394], [0.989, 0.0502, 0.1824]], [[0.7582, 0.8934, 0.5831], [0.4546, 0.3739, 0.0005], [0.8608, 0.1425, 0.5768]], [[0.8702, 0.8821, 0.3266], [0.7048, 0.197, 0.2101], [0.0735, 0.4646, 0.0183]]]]])
in1Sub6518 = tf.constant([[[[[0.8869, 0.2243, 0.9923], [0.901, 0.5422, 0.4009], [0.6063, 0.9212, 0.4077]], [[0.5017, 0.8367, 0.2964], [0.6456, 0.39, 0.0391], [0.5996, 0.3908, 0.4374]], [[0.4013, 0.5862, 0.1695], [0.0817, 0.4322, 0.7999], [0.9065, 0.5791, 0.0869]]], [[[0.2885, 0.5614, 0.6884], [0.5254, 0.9549, 0.5455], [0.113, 0.1316, 0.3]], [[0.4619, 0.1404, 0.8206], [0.5689, 0.3838, 0.0735], [0.8579, 0.6047, 0.8423]], [[0.7249, 0.3772, 0.0335], [0.9262, 0.4589, 0.5401], [0.7588, 0.4189, 0.0088]]]]])
in0Min32886 = tf.constant([[[0.8078]]])
in1Min32886 = tf.constant([[[0.1251]]])
in0Con88584 = tf.constant([[0.6966, 0.0191, 0.691, 0.9115, 0.8902, 0.4878, 0.0126, 0.432, 0.6116, 0.3986, 0.8742, 0.5949, 0.6427, 0.1263, 0.1645, 0.9564, 0.6258, 0.4344, 0.4969, 0.2431, 0.5612, 0.7268, 0.9087, 0.6105, 0.2457, 0.4394, 0.4511, 0.7938, 0.1576, 0.6954, 0.2509, 0.1615, 0.9801, 0.7291, 0.0095, 0.8952, 0.2963, 0.868, 0.4526, 0.131, 0.9835, 0.0569, 0.9402, 0.9194, 0.4921, 0.0049, 0.3071, 0.2852, 0.4988, 0.0412, 0.0122, 0.5055, 0.3939]])
in0Con2996 = tf.constant([[[0.7983], [0.9154], [0.7579], [0.1905], [0.1006], [0.3784], [0.7925], [0.4551], [0.8133], [0.1386], [0.0036], [0.7801], [0.9662], [0.9845], [0.2123], [0.7706], [0.5455], [0.6763], [0.9968], [0.1552], [0.3673], [0.0719], [0.8474], [0.7119], [0.0721], [0.7926], [0.9966], [0.7805], [0.846], [0.8672], [0.1722], [0.1639], [0.3604], [0.6809], [0.2298], [0.0589], [0.2023], [0.5993], [0.7347], [0.1552], [0.7647], [0.8407], [0.0839], [0.1962], [0.1608], [0.5206], [0.6856], [0.1012], [0.2343], [0.3124], [0.0473], [0.2184], [0.1472], [0.8295]]])
in0Add87159 = tf.constant([[[[[0.6881], [0.5714]]]]])
in1Add87159 = tf.constant([[[[[0.1144], [0.5279]]]]])
print (np.array2string(model.predict([in0Sub6518,in1Sub6518,in0Min32886,in1Min32886,in0Con88584,in0Con2996,in0Add87159,in1Add87159],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot33900.png')

LSub6518 = subtract_layer([[[[[0.924, 0.0476, 0.9546], [0.382, 0.3631, 0.3162], [0.9891, 0.4601, 0.7388]], [[0.9263, 0.5421, 0.0321], [0.4088, 0.5478, 0.0229], [0.5988, 0.5191, 0.7774]], [[0.8181, 0.9888, 0.2398], [0.4878, 0.4391, 0.8081], [0.8884, 0.3029, 0.7995]]], [[[0.6891, 0.2058, 0.8194], [0.8255, 0.2907, 0.7394], [0.989, 0.0502, 0.1824]], [[0.7582, 0.8934, 0.5831], [0.4546, 0.3739, 0.0005], [0.8608, 0.1425, 0.5768]], [[0.8702, 0.8821, 0.3266], [0.7048, 0.197, 0.2101], [0.0735, 0.4646, 0.0183]]]]], [[[[[0.8869, 0.2243, 0.9923], [0.901, 0.5422, 0.4009], [0.6063, 0.9212, 0.4077]], [[0.5017, 0.8367, 0.2964], [0.6456, 0.39, 0.0391], [0.5996, 0.3908, 0.4374]], [[0.4013, 0.5862, 0.1695], [0.0817, 0.4322, 0.7999], [0.9065, 0.5791, 0.0869]]], [[[0.2885, 0.5614, 0.6884], [0.5254, 0.9549, 0.5455], [0.113, 0.1316, 0.3]], [[0.4619, 0.1404, 0.8206], [0.5689, 0.3838, 0.0735], [0.8579, 0.6047, 0.8423]], [[0.7249, 0.3772, 0.0335], [0.9262, 0.4589, 0.5401], [0.7588, 0.4189, 0.0088]]]]], Sub6518), 
LRes45356 = reshape_layer(Sub6518, [2, 3, 9], Res45356), 
LRes15894 = reshape_layer(Res45356, [2, 27], Res15894), 
LFla67003 = flatten_layer(Res15894, Fla67003), 
LMin32886 = minimum_layer([[[[0.8078]]], [[[0.1251]]]], Min32886), 
LGlo53638 = global_max_pool1D_layer(Min32886, Glo53638), 
LCon88584 = concatenate_layer([Glo53638,[[0.6966, 0.0191, 0.691, 0.9115, 0.8902, 0.4878, 0.0126, 0.432, 0.6116, 0.3986, 0.8742, 0.5949, 0.6427, 0.1263, 0.1645, 0.9564, 0.6258, 0.4344, 0.4969, 0.2431, 0.5612, 0.7268, 0.9087, 0.6105, 0.2457, 0.4394, 0.4511, 0.7938, 0.1576, 0.6954, 0.2509, 0.1615, 0.9801, 0.7291, 0.0095, 0.8952, 0.2963, 0.868, 0.4526, 0.131, 0.9835, 0.0569, 0.9402, 0.9194, 0.4921, 0.0049, 0.3071, 0.2852, 0.4988, 0.0412, 0.0122, 0.5055, 0.3939]]], 1, Con88584), 
LMax34428 = maximum_layer([Fla67003,Con88584], Max34428), 
LRes37130 = reshape_layer(Max34428, [54, 1], Res37130), 
LCon2996 = concatenate_layer([Res37130,[[[0.7983], [0.9154], [0.7579], [0.1905], [0.1006], [0.3784], [0.7925], [0.4551], [0.8133], [0.1386], [0.0036], [0.7801], [0.9662], [0.9845], [0.2123], [0.7706], [0.5455], [0.6763], [0.9968], [0.1552], [0.3673], [0.0719], [0.8474], [0.7119], [0.0721], [0.7926], [0.9966], [0.7805], [0.846], [0.8672], [0.1722], [0.1639], [0.3604], [0.6809], [0.2298], [0.0589], [0.2023], [0.5993], [0.7347], [0.1552], [0.7647], [0.8407], [0.0839], [0.1962], [0.1608], [0.5206], [0.6856], [0.1012], [0.2343], [0.3124], [0.0473], [0.2184], [0.1472], [0.8295]]]], 2, Con2996), 
LAdd87159 = add_layer([[[[[[0.6881], [0.5714]]]]], [[[[[0.1144], [0.5279]]]]]], Add87159), 
LRes94667 = reshape_layer(Add87159, [1, 1, 2], Res94667), 
LRes28368 = reshape_layer(Res94667, [1, 2], Res28368), 
LAve161 = average_pooling1D_layer(Res28368, 1, 1, true, Ave161), 
LRes34331 = reshape_layer(Ave161, [1, 2, 1], Res34331), 
LUp_61599 = up_sampling2D_layer(Res34331, 1, 1, Up_61599), 
LRes80810 = reshape_layer(Up_61599, [1, 2], Res80810), 
LZer97556 = zero_padding1D_layer(Res80810, 53, 0, Zer97556), 
LDot33900 = dot_layer(Con2996,Zer97556, 1, 1, Dot33900), 
exec_layers([LSub6518,LRes45356,LRes15894,LFla67003,LMin32886,LGlo53638,LCon88584,LMax34428,LRes37130,LCon2996,LAdd87159,LRes94667,LRes28368,LAve161,LRes34331,LUp_61599,LRes80810,LZer97556,LDot33900],["Sub6518","Res45356","Res15894","Fla67003","Min32886","Glo53638","Con88584","Max34428","Res37130","Con2996","Add87159","Res94667","Res28368","Ave161","Res34331","Up_61599","Res80810","Zer97556","Dot33900"],Dot33900,"Dot33900")

Actual (Unparsed): [[[0.3161047, 0.4330143], [0.6656737, 0.9118693]]]

Expected (Unparsed): [[[0.31610475,0.4330142699999999],[0.66567375,0.91186935]]]

Actual:   [[[0.3162, 0.4331], [0.6657, 0.9119]]]

Expected: [[[0.3162, 0.4331], [0.6657, 0.9119]]]