import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul38423 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul38423 = tf.keras.layers.Input(shape=([2, 2]))

Mul38423 = keras.layers.Multiply(name = 'Mul38423', )([in0Mul38423,in1Mul38423])
Res38095 = keras.layers.Reshape((2, 2, 1), name = 'Res38095', )(Mul38423)
Res80027 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res80027', )(Res38095)
Glo89940 = keras.layers.GlobalAveragePooling3D(name = 'Glo89940', )(Res80027)
Res33791 = keras.layers.Reshape((1, 1), name = 'Res33791', )(Glo89940)
Res46533 = keras.layers.Reshape((1, 1, 1), name = 'Res46533', )(Res33791)
Res58230 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res58230', )(Res46533)
Glo13495 = keras.layers.GlobalAveragePooling3D(name = 'Glo13495', )(Res58230)
model = tf.keras.models.Model(inputs=[in0Mul38423,in1Mul38423], outputs=Glo13495)
in0Mul38423 = tf.constant([[[0.2325, 0.5915], [0.1588, 0.1467]]])
in1Mul38423 = tf.constant([[[0.1689, 0.5876], [0.6577, 0.0701]]])
print (np.array2string(model.predict([in0Mul38423,in1Mul38423],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo13495.png')

LMul38423 = multiply_layer([[[[0.2325, 0.5915], [0.1588, 0.1467]]], [[[0.1689, 0.5876], [0.6577, 0.0701]]]], Mul38423), 
LRes38095 = reshape_layer(Mul38423, [2, 2, 1], Res38095), 
LRes80027 = reshape_layer(Res38095, [2, 2, 1, 1], Res80027), 
LGlo89940 = global_average_pooling3D_layer(Res80027, Glo89940), 
LRes33791 = reshape_layer(Glo89940, [1, 1], Res33791), 
LRes46533 = reshape_layer(Res33791, [1, 1, 1], Res46533), 
LRes58230 = reshape_layer(Res46533, [1, 1, 1, 1], Res58230), 
LGlo13495 = global_average_pooling3D_layer(Res58230, Glo13495), 
exec_layers([LMul38423,LRes38095,LRes80027,LGlo89940,LRes33791,LRes46533,LRes58230,LGlo13495],["Mul38423","Res38095","Res80027","Glo89940","Res33791","Res46533","Res58230","Glo13495"],Glo13495,"Glo13495")

Actual (Unparsed): [[0.1253903]]

Expected (Unparsed): [[0.12539027]]

Actual:   [[0.1254]]

Expected: [[0.1254]]