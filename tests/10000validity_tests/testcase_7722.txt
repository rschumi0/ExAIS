import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot74947 = tf.keras.layers.Input(shape=([2]))
in1Dot74947 = tf.keras.layers.Input(shape=([2]))
in0Con42040 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Mul19277 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul19277 = tf.keras.layers.Input(shape=([2, 1, 2]))

Dot74947 = keras.layers.Dot(axes=(1, 1), name = 'Dot74947', )([in0Dot74947,in1Dot74947])
Res31372 = keras.layers.Reshape((1, 1), name = 'Res31372', )(Dot74947)
Res87049 = keras.layers.Reshape((1, 1, 1), name = 'Res87049', )(Res31372)
Max85499 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max85499', )(Res87049)
Zer6467 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer6467', )(Max85499)
Con42040 = keras.layers.Concatenate(axis=3, name = 'Con42040', )([Zer6467,in0Con42040])
Mul19277 = keras.layers.Multiply(name = 'Mul19277', )([in0Mul19277,in1Mul19277])
Max85721 = keras.layers.Maximum(name = 'Max85721', )([Con42040,Mul19277])
model = tf.keras.models.Model(inputs=[in0Dot74947,in1Dot74947,in0Con42040,in0Mul19277,in1Mul19277], outputs=Max85721)
in0Dot74947 = tf.constant([[0.6978, 0.3787]])
in1Dot74947 = tf.constant([[0.6682, 0.4502]])
in0Con42040 = tf.constant([[[[0.8337]], [[0.7605]]]])
in0Mul19277 = tf.constant([[[[0.6747, 0.8543]], [[0.5193, 0.4611]]]])
in1Mul19277 = tf.constant([[[[0.9558, 0.3465]], [[0.6636, 0.1003]]]])
print (np.array2string(model.predict([in0Dot74947,in1Dot74947,in0Con42040,in0Mul19277,in1Mul19277],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max85721.png')

LDot74947 = dot_layer([[0.6978, 0.3787]], [[0.6682, 0.4502]], 1, 1, Dot74947), 
LRes31372 = reshape_layer(Dot74947, [1, 1], Res31372), 
LRes87049 = reshape_layer(Res31372, [1, 1, 1], Res87049), 
LMax85499 = max_pool2D_layer(Res87049, 1, 1, Max85499), 
LZer6467 = zero_padding2D_layer(Max85499, 1, 0, 0, 0, Zer6467), 
LCon42040 = concatenate_layer([Zer6467,[[[[0.8337]], [[0.7605]]]]], 3, Con42040), 
LMul19277 = multiply_layer([[[[[0.6747, 0.8543]], [[0.5193, 0.4611]]]], [[[[0.9558, 0.3465]], [[0.6636, 0.1003]]]]], Mul19277), 
LMax85721 = maximum_layer([Con42040,Mul19277], Max85721), 
exec_layers([LDot74947,LRes31372,LRes87049,LMax85499,LZer6467,LCon42040,LMul19277,LMax85721],["Dot74947","Res31372","Res87049","Max85499","Zer6467","Con42040","Mul19277","Max85721"],Max85721,"Max85721")

Actual (Unparsed): [[[[0.6448783, 0.8337000]], [[0.6367607, 0.7605000]]]]

Expected (Unparsed): [[[[0.6448782599999999,0.8337]],[[0.6367607,0.7605]]]]

Actual:   [[[[0.6449, 0.8337]], [[0.6368, 0.7605]]]]

Expected: [[[[0.6449, 0.8337]], [[0.6368, 0.7605]]]]