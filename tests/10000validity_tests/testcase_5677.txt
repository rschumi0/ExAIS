import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den33265 = tf.keras.layers.Input(shape=([2, 4]))
in0Ave72655 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave72655 = tf.keras.layers.Input(shape=([1, 2]))

Den33265 = keras.layers.Dense(2,name = 'Den33265', )(in0Den33265)
Loc52167 = keras.layers.LocallyConnected1D(2, (2),strides=(1), name = 'Loc52167', )(Den33265)
Ave72655 = keras.layers.Average(name = 'Ave72655', )([in0Ave72655,in1Ave72655])
Min9079 = keras.layers.Minimum(name = 'Min9079', )([Loc52167,Ave72655])
Per48827 = keras.layers.Permute((1,2), name = 'Per48827',)(Min9079)
model = tf.keras.models.Model(inputs=[in0Den33265,in0Ave72655,in1Ave72655], outputs=Per48827)
w = model.get_layer('Den33265').get_weights() 
w[0] = np.array([[0.1792, 0.1419], [0.4492, 0.6544], [0.9579, 0.5792], [0.6789, 0.5526]])
w[1] = np.array([0.2771, 0.2757])
model.get_layer('Den33265').set_weights(w) 
w = model.get_layer('Loc52167').get_weights() 
w[0] = np.array([[[0.8683, 0.0512], [0.9501, 0.5353], [0.3934, 0.5925], [0.4632, 0.8291]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc52167').set_weights(w) 
in0Den33265 = tf.constant([[[0.9378, 0.3958, 0.7392, 0.9466], [0.0489, 0.5439, 0.836, 0.2747]]])
in0Ave72655 = tf.constant([[[0.0795, 0.8727]]])
in1Ave72655 = tf.constant([[[0.6474, 0.3593]]])
print (np.array2string(model.predict([in0Den33265,in0Ave72655,in1Ave72655],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per48827.png')

LDen33265 = dense_layer([[[0.9378, 0.3958, 0.7392, 0.9466], [0.0489, 0.5439, 0.836, 0.2747]]], [[0.1792, 0.1419], [0.4492, 0.6544], [0.9579, 0.5792], [0.6789, 0.5526]],[0.2771, 0.2757], Den33265), 
LLoc52167 = locally_connected1D_layer(Den33265, 2,[[[0.8683, 0.0512], [0.9501, 0.5353], [0.3934, 0.5925], [0.4632, 0.8291]]],[[0, 0]], 1, Loc52167), 
LAve72655 = average_layer([[[[0.0795, 0.8727]]], [[[0.6474, 0.3593]]]], Ave72655), 
LMin9079 = minimum_layer([Loc52167,Ave72655], Min9079), 
LPer48827 = permute_layer(Min9079, 1,2, Per48827), 
exec_layers([LDen33265,LLoc52167,LAve72655,LMin9079,LPer48827],["Den33265","Loc52167","Ave72655","Min9079","Per48827"],Per48827,"Per48827")

Actual (Unparsed): [[[0.3634500, 0.6160000]]]

Expected (Unparsed): [[[0.36345,0.616]]]

Actual:   [[[0.3635, 0.616]]]

Expected: [[[0.3635, 0.616]]]