import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer86643 = tf.keras.layers.Input(shape=([3, 4]))

Zer86643 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer86643', )(in0Zer86643)
Res66332 = keras.layers.Reshape((5, 4, 1), name = 'Res66332', )(Zer86643)
Res19680 = keras.layers.Reshape((5, 4, 1, 1), name = 'Res19680', )(Res66332)
Con43684 = keras.layers.Conv3D(4, (4, 3, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con43684', )(Res19680)
model = tf.keras.models.Model(inputs=[in0Zer86643], outputs=Con43684)
w = model.get_layer('Con43684').get_weights() 
w[0] = np.array([[[[[0.1309, 0.1413, 0.8582, 0.9875]]], [[[0.3466, 0.8244, 0.5378, 0.266]]], [[[0.2483, 0.9114, 0.7022, 0.944]]]], [[[[0.5465, 0.6108, 0.3458, 0.5242]]], [[[0.9194, 0.5713, 0.8172, 0.659]]], [[[0.1064, 0.11, 0.5289, 0.6681]]]], [[[[0.0184, 0.237, 0.7747, 0.4656]]], [[[0.2532, 0.4901, 0.9421, 0.7529]]], [[[0.9927, 0.1265, 0.203, 0.1937]]]], [[[[0.5071, 0.664, 0.7126, 0.5628]]], [[[0.394, 0.109, 0.4565, 0.5321]]], [[[0.2402, 0.4666, 0.1459, 0.8449]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con43684').set_weights(w) 
in0Zer86643 = tf.constant([[[1.7005, 1.8726, 1.3266, 1.0452], [1.3342, 1.5996, 1.9264, 1.7904], [1.922, 1.2331, 1.7765, 1.7335]]])
print (np.array2string(model.predict([in0Zer86643],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con43684.png')

LZer86643 = zero_padding1D_layer([[[1.7005, 1.8726, 1.3266, 1.0452], [1.3342, 1.5996, 1.9264, 1.7904], [1.922, 1.2331, 1.7765, 1.7335]]], 1, 1, Zer86643), 
LRes66332 = reshape_layer(Zer86643, [5, 4, 1], Res66332), 
LRes19680 = reshape_layer(Res66332, [5, 4, 1, 1], Res19680), 
LCon43684 = conv3D_layer(Res19680, 4, 3, 1,[[[[[0.1309, 0.1413, 0.8582, 0.9875]]], [[[0.3466, 0.8244, 0.5378, 0.266]]], [[[0.2483, 0.9114, 0.7022, 0.944]]]], [[[[0.5465, 0.6108, 0.3458, 0.5242]]], [[[0.9194, 0.5713, 0.8172, 0.659]]], [[[0.1064, 0.11, 0.5289, 0.6681]]]], [[[[0.0184, 0.237, 0.7747, 0.4656]]], [[[0.2532, 0.4901, 0.9421, 0.7529]]], [[[0.9927, 0.1265, 0.203, 0.1937]]]], [[[[0.5071, 0.664, 0.7126, 0.5628]]], [[[0.394, 0.109, 0.4565, 0.5321]]], [[[0.2402, 0.4666, 0.1459, 0.8449]]]]],[0, 0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con43684), 
exec_layers([LZer86643,LRes66332,LRes19680,LCon43684],["Zer86643","Res66332","Res19680","Con43684"],Con43684,"Con43684")

Actual (Unparsed): [[[[[7.0212501, 5.8377975, 7.9433261, 8.4492319]], [[6.3904211, 5.3876301, 7.6445685, 8.2000036]]], [[[5.7169321, 6.2183837, 9.1967307, 8.6376098]], [[5.9936024, 5.9675697, 9.1096122, 8.7403481]]]]]

Expected (Unparsed): [[[[[7.0212501099999995,5.8377975399999995,7.94332616,8.44923196]],[[6.39042113,5.3876301,7.644568599999999,8.20000372]]],[[[5.71693216,6.218383729999999,9.196730749999999,8.637609869999999]],[[5.993602469999999,5.967569800000001,9.10961228,8.74034822]]]]]

Actual:   [[[[[7.0213, 5.8378, 7.9434, 8.4493]], [[6.3905, 5.3877, 7.6446, 8.2001]]], [[[5.717, 6.2184, 9.1968, 8.6377]], [[5.9937, 5.9676, 9.1097, 8.7404]]]]]

Expected: [[[[[7.0213, 5.8378, 7.9434, 8.4493]], [[6.3905, 5.3877, 7.6446, 8.2001]]], [[[5.717, 6.2184, 9.1968, 8.6377]], [[5.9937, 5.9676, 9.1097, 8.7404]]]]]