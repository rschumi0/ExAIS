import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave49859 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave49859 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con1439 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave47369 = tf.keras.layers.Input(shape=([2, 1, 2]))

Ave49859 = keras.layers.Average(name = 'Ave49859', )([in0Ave49859,in1Ave49859])
Con1439 = keras.layers.Concatenate(axis=3, name = 'Con1439', )([Ave49859,in0Con1439])
Ave47369 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 2), padding='valid', name = 'Ave47369', )(in0Ave47369)
Max20338 = keras.layers.Maximum(name = 'Max20338', )([Con1439,Ave47369])
Res87421 = keras.layers.Reshape((1, 2), name = 'Res87421', )(Max20338)
Glo60586 = keras.layers.GlobalAveragePooling1D(name = 'Glo60586', )(Res87421)
model = tf.keras.models.Model(inputs=[in0Ave49859,in1Ave49859,in0Con1439,in0Ave47369], outputs=Glo60586)
in0Ave49859 = tf.constant([[[[0.4347]]]])
in1Ave49859 = tf.constant([[[[0.9386]]]])
in0Con1439 = tf.constant([[[[0.8248]]]])
in0Ave47369 = tf.constant([[[[1.3761, 1.9766]], [[1.36, 1.5173]]]])
print (np.array2string(model.predict([in0Ave49859,in1Ave49859,in0Con1439,in0Ave47369],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo60586.png')

LAve49859 = average_layer([[[[[0.4347]]]], [[[[0.9386]]]]], Ave49859), 
LCon1439 = concatenate_layer([Ave49859,[[[[0.8248]]]]], 3, Con1439), 
LAve47369 = average_pooling2D_layer([[[[1.3761, 1.9766]], [[1.36, 1.5173]]]], 2, 1, 1, 2, false, Ave47369), 
LMax20338 = maximum_layer([Con1439,Ave47369], Max20338), 
LRes87421 = reshape_layer(Max20338, [1, 2], Res87421), 
LGlo60586 = global_average_pooling1D_layer(Res87421, Glo60586), 
exec_layers([LAve49859,LCon1439,LAve47369,LMax20338,LRes87421,LGlo60586],["Ave49859","Con1439","Ave47369","Max20338","Res87421","Glo60586"],Glo60586,"Glo60586")

Actual (Unparsed): [[1.3680500, 1.7469500]]

Expected (Unparsed): [[1.3680500000000002,1.74695]]

Actual:   [[1.3681, 1.747]]

Expected: [[1.3681, 1.747]]