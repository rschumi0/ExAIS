import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max24283 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max24283 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Max24283 = keras.layers.Maximum(name = 'Max24283', )([in0Max24283,in1Max24283])
Res48773 = keras.layers.Reshape((1, 1, 1), name = 'Res48773', )(Max24283)
Res75594 = keras.layers.Reshape((1, 1), name = 'Res75594', )(Res48773)
Per79993 = keras.layers.Permute((1,2), name = 'Per79993',)(Res75594)
Res28812 = keras.layers.Reshape((1, 1, 1), name = 'Res28812', )(Per79993)
Con49161 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 1), padding='valid', name = 'Con49161', )(Res28812)
model = tf.keras.models.Model(inputs=[in0Max24283,in1Max24283], outputs=Con49161)
w = model.get_layer('Con49161').get_weights() 
w[0] = np.array([[[[0.3545], [0.4455], [0.4464], [0.819]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con49161').set_weights(w) 
in0Max24283 = tf.constant([[[[[0.8878]]]]])
in1Max24283 = tf.constant([[[[[0.9131]]]]])
print (np.array2string(model.predict([in0Max24283,in1Max24283],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con49161.png')

LMax24283 = maximum_layer([[[[[[0.8878]]]]], [[[[[0.9131]]]]]], Max24283), 
LRes48773 = reshape_layer(Max24283, [1, 1, 1], Res48773), 
LRes75594 = reshape_layer(Res48773, [1, 1], Res75594), 
LPer79993 = permute_layer(Res75594, 1,2, Per79993), 
LRes28812 = reshape_layer(Per79993, [1, 1, 1], Res28812), 
LCon49161 = conv2D_transpose_layer(Res28812, 1, 1,[[[[0.3545], [0.4455], [0.4464], [0.819]]]],[0, 0, 0, 0], 1, 1, false, Con49161), 
exec_layers([LMax24283,LRes48773,LRes75594,LPer79993,LRes28812,LCon49161],["Max24283","Res48773","Res75594","Per79993","Res28812","Con49161"],Con49161,"Con49161")

Actual (Unparsed): [[[[0.3236940, 0.4067861, 0.4076078, 0.7478289]]]]

Expected (Unparsed): [[[[0.32369395,0.40678605,0.40760784000000005,0.7478289]]]]

Actual:   [[[[0.3237, 0.4068, 0.4077, 0.7479]]]]

Expected: [[[[0.3237, 0.4068, 0.4077, 0.7479]]]]