import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_54166 = tf.keras.layers.Input(shape=([1, 3, 3, 1]))
in0Con23162 = tf.keras.layers.Input(shape=([1, 3, 3, 1]))
in0Add89994 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Add89994 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Up_54166 = keras.layers.UpSampling3D(size=(1, 1, 1), name = 'Up_54166', )(in0Up_54166)
Con23162 = keras.layers.Concatenate(axis=4, name = 'Con23162', )([Up_54166,in0Con23162])
Add89994 = keras.layers.Add(name = 'Add89994', )([in0Add89994,in1Add89994])
Zer5796 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (1, 0)), name = 'Zer5796', )(Add89994)
Mul47040 = keras.layers.Multiply(name = 'Mul47040', )([Con23162,Zer5796])
model = tf.keras.models.Model(inputs=[in0Up_54166,in0Con23162,in0Add89994,in1Add89994], outputs=Mul47040)
in0Up_54166 = tf.constant([[[[[1.1247], [1.4271], [1.2298]], [[1.9957], [1.7044], [1.6058]], [[1.3363], [1.3236], [1.3578]]]]])
in0Con23162 = tf.constant([[[[[0.3552], [0.6179], [0.3091]], [[0.4862], [0.2548], [0.7313]], [[0.6979], [0.8508], [0.768]]]]])
in0Add89994 = tf.constant([[[[[0.9627, 0.2198], [0.3519, 0.0173]]]]])
in1Add89994 = tf.constant([[[[[0.774, 0.5638], [0.5194, 0.3487]]]]])
print (np.array2string(model.predict([in0Up_54166,in0Con23162,in0Add89994,in1Add89994],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul47040.png')

LUp_54166 = up_sampling3D_layer([[[[[1.1247], [1.4271], [1.2298]], [[1.9957], [1.7044], [1.6058]], [[1.3363], [1.3236], [1.3578]]]]], 1, 1, 1, Up_54166), 
LCon23162 = concatenate_layer([Up_54166,[[[[[0.3552], [0.6179], [0.3091]], [[0.4862], [0.2548], [0.7313]], [[0.6979], [0.8508], [0.768]]]]]], 4, Con23162), 
LAdd89994 = add_layer([[[[[[0.9627, 0.2198], [0.3519, 0.0173]]]]], [[[[[0.774, 0.5638], [0.5194, 0.3487]]]]]], Add89994), 
LZer5796 = zero_padding3D_layer(Add89994, 0, 0, 2, 0, 1, 0, Zer5796), 
LMul47040 = multiply_layer([Con23162,Zer5796], Mul47040), 
exec_layers([LUp_54166,LCon23162,LAdd89994,LZer5796,LMul47040],["Up_54166","Con23162","Add89994","Zer5796","Mul47040"],Mul47040,"Mul47040")

Actual (Unparsed): [[[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [2.2986962, 0.6666868], [1.1830512, 0.2810880]]]]]

Expected (Unparsed): [[[[[0.0,0.0],[0.0,0.0],[0.0,0.0]],[[0.0,0.0],[0.0,0.0],[0.0,0.0]],[[0.0,0.0],[2.2986961200000002,0.66668688],[1.18305114,0.281088]]]]]

Actual:   [[[[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]], [[0, 0], [2.2987, 0.6667], [1.1831, 0.2811]]]]]

Expected: [[[[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]], [[0, 0], [2.2987, 0.6667], [1.1831, 0.2811]]]]]