import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con21570 = tf.keras.layers.Input(shape=([2, 1, 1]))

Con21570 = keras.layers.Conv2DTranspose(4, (2, 1),strides=(1, 1), padding='same', name = 'Con21570', )(in0Con21570)
Res31329 = keras.layers.Reshape((2, 4), name = 'Res31329', )(Con21570)
Max85012 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max85012', )(Res31329)
model = tf.keras.models.Model(inputs=[in0Con21570], outputs=Max85012)
w = model.get_layer('Con21570').get_weights() 
w[0] = np.array([[[[0.9553], [0.0966], [0.6342], [0.4515]]], [[[0.4438], [0.8827], [0.126], [0.0999]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con21570').set_weights(w) 
in0Con21570 = tf.constant([[[[0.4241]], [[0.6377]]]])
print (np.array2string(model.predict([in0Con21570],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max85012.png')

LCon21570 = conv2D_transpose_layer([[[[0.4241]], [[0.6377]]]], 2, 1,[[[[0.9553], [0.0966], [0.6342], [0.4515]]], [[[0.4438], [0.8827], [0.126], [0.0999]]]],[0, 0, 0, 0], 1, 1, true, Con21570), 
LRes31329 = reshape_layer(Con21570, [2, 4], Res31329), 
LMax85012 = max_pool1D_layer(Res31329, 1, Max85012), 
exec_layers([LCon21570,LRes31329,LMax85012],["Con21570","Res31329","Max85012"],Max85012,"Max85012")

Actual (Unparsed): [[[0.4051427, 0.0409681, 0.2689642, 0.1914812], [0.7974104, 0.4359549, 0.4578660, 0.3302892]]]

Expected (Unparsed): [[[0.40514273,0.04096806,0.26896422,0.19148115],[0.79741039,0.43595489000000004,0.45786594,0.33028914000000004]]]

Actual:   [[[0.4052, 0.041, 0.269, 0.1915], [0.7975, 0.436, 0.4579, 0.3303]]]

Expected: [[[0.4052, 0.041, 0.269, 0.1915], [0.7975, 0.436, 0.4579, 0.3303]]]