import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave17781 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave17781 = tf.keras.layers.Input(shape=([1, 2]))
in0Con91417 = tf.keras.layers.Input(shape=([1, 2]))
in0Add91001 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add91001 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Ave17781 = keras.layers.Average(name = 'Ave17781', )([in0Ave17781,in1Ave17781])
Con91417 = keras.layers.Concatenate(axis=2, name = 'Con91417', )([Ave17781,in0Con91417])
Add91001 = keras.layers.Add(name = 'Add91001', )([in0Add91001,in1Add91001])
Res33878 = keras.layers.Reshape((1, 2, 2), name = 'Res33878', )(Add91001)
Res77573 = keras.layers.Reshape((1, 4), name = 'Res77573', )(Res33878)
Cro22060 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro22060', )(Res77573)
Min29002 = keras.layers.Minimum(name = 'Min29002', )([Con91417,Cro22060])
Cro98872 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro98872', )(Min29002)
model = tf.keras.models.Model(inputs=[in0Ave17781,in1Ave17781,in0Con91417,in0Add91001,in1Add91001], outputs=Cro98872)
in0Ave17781 = tf.constant([[[0.1977, 0.9454]]])
in1Ave17781 = tf.constant([[[0.0073, 0.3028]]])
in0Con91417 = tf.constant([[[0.9034, 0.145]]])
in0Add91001 = tf.constant([[[[[0.2849], [0.1614]], [[0.1339], [0.5637]]]]])
in1Add91001 = tf.constant([[[[[0.4295], [0.1188]], [[0.4192], [0.5833]]]]])
print (np.array2string(model.predict([in0Ave17781,in1Ave17781,in0Con91417,in0Add91001,in1Add91001],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro98872.png')

LAve17781 = average_layer([[[[0.1977, 0.9454]]], [[[0.0073, 0.3028]]]], Ave17781), 
LCon91417 = concatenate_layer([Ave17781,[[[0.9034, 0.145]]]], 2, Con91417), 
LAdd91001 = add_layer([[[[[[0.2849], [0.1614]], [[0.1339], [0.5637]]]]], [[[[[0.4295], [0.1188]], [[0.4192], [0.5833]]]]]], Add91001), 
LRes33878 = reshape_layer(Add91001, [1, 2, 2], Res33878), 
LRes77573 = reshape_layer(Res33878, [1, 4], Res77573), 
LCro22060 = cropping1D_layer(Res77573, 0, 0, Cro22060), 
LMin29002 = minimum_layer([Con91417,Cro22060], Min29002), 
LCro98872 = cropping1D_layer(Min29002, 0, 0, Cro98872), 
exec_layers([LAve17781,LCon91417,LAdd91001,LRes33878,LRes77573,LCro22060,LMin29002,LCro98872],["Ave17781","Con91417","Add91001","Res33878","Res77573","Cro22060","Min29002","Cro98872"],Cro98872,"Cro98872")

Actual (Unparsed): [[[0.1025000, 0.2802000, 0.5531000, 0.1450000]]]

Expected (Unparsed): [[[0.1025,0.2802,0.5531,0.145]]]

Actual:   [[[0.1025, 0.2802, 0.5531, 0.145]]]

Expected: [[[0.1025, 0.2802, 0.5531, 0.145]]]