import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul68313 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul68313 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Glo18756 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Con61298 = tf.keras.layers.Input(shape=([2, 1]))

Mul68313 = keras.layers.Multiply(name = 'Mul68313', )([in0Mul68313,in1Mul68313])
Res1688 = keras.layers.Reshape((2, 2), name = 'Res1688', )(Mul68313)
Glo18756 = keras.layers.GlobalMaxPool3D(name = 'Glo18756', )(in0Glo18756)
Fla54698 = keras.layers.Flatten(name = 'Fla54698', )(Glo18756)
Res64942 = keras.layers.Reshape((2, 1), name = 'Res64942', )(Fla54698)
Ave17873 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='valid', name = 'Ave17873', )(Res64942)
Zer12135 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer12135', )(Ave17873)
Con61298 = keras.layers.Concatenate(axis=2, name = 'Con61298', )([Zer12135,in0Con61298])
Ave35341 = keras.layers.Average(name = 'Ave35341', )([Res1688,Con61298])
Res42381 = keras.layers.Reshape((2, 2, 1), name = 'Res42381', )(Ave35341)
Res90972 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res90972', )(Res42381)
Cro83760 = keras.layers.Cropping3D(cropping=((1, 0), (0, 1), (0, 0)), name = 'Cro83760', )(Res90972)
model = tf.keras.models.Model(inputs=[in0Mul68313,in1Mul68313,in0Glo18756,in0Con61298], outputs=Cro83760)
in0Mul68313 = tf.constant([[[[0.0533], [0.4766]], [[0.7594], [0.8051]]]])
in1Mul68313 = tf.constant([[[[0.8775], [0.5744]], [[0.9097], [0.5036]]]])
in0Glo18756 = tf.constant([[[[[1.6692, 1.8018], [1.1344, 1.3269]]]]])
in0Con61298 = tf.constant([[[0.4437], [0.9064]]])
print (np.array2string(model.predict([in0Mul68313,in1Mul68313,in0Glo18756,in0Con61298],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro83760.png')

LMul68313 = multiply_layer([[[[[0.0533], [0.4766]], [[0.7594], [0.8051]]]], [[[[0.8775], [0.5744]], [[0.9097], [0.5036]]]]], Mul68313), 
LRes1688 = reshape_layer(Mul68313, [2, 2], Res1688), 
LGlo18756 = global_max_pool3D_layer([[[[[1.6692, 1.8018], [1.1344, 1.3269]]]]], Glo18756), 
LFla54698 = flatten_layer(Glo18756, Fla54698), 
LRes64942 = reshape_layer(Fla54698, [2, 1], Res64942), 
LAve17873 = average_pooling1D_layer(Res64942, 2, 1, false, Ave17873), 
LZer12135 = zero_padding1D_layer(Ave17873, 1, 0, Zer12135), 
LCon61298 = concatenate_layer([Zer12135,[[[0.4437], [0.9064]]]], 2, Con61298), 
LAve35341 = average_layer([Res1688,Con61298], Ave35341), 
LRes42381 = reshape_layer(Ave35341, [2, 2, 1], Res42381), 
LRes90972 = reshape_layer(Res42381, [2, 2, 1, 1], Res90972), 
LCro83760 = cropping3D_layer(Res90972, 1, 0, 0, 1, 0, 0, Cro83760), 
exec_layers([LMul68313,LRes1688,LGlo18756,LFla54698,LRes64942,LAve17873,LZer12135,LCon61298,LAve35341,LRes42381,LRes90972,LCro83760],["Mul68313","Res1688","Glo18756","Fla54698","Res64942","Ave17873","Zer12135","Con61298","Ave35341","Res42381","Res90972","Cro83760"],Cro83760,"Cro83760")

Actual (Unparsed): [[[[[1.2131631]]]]]

Expected (Unparsed): [[[[[1.21316309]]]]]

Actual:   [[[[[1.2132]]]]]

Expected: [[[[[1.2132]]]]]