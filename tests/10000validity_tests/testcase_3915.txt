import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min18574 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Min18574 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Ave85962 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con45535 = tf.keras.layers.Input(shape=([7]))

Min18574 = keras.layers.Minimum(name = 'Min18574', )([in0Min18574,in1Min18574])
Res17858 = keras.layers.Reshape((2, 1, 4), name = 'Res17858', )(Min18574)
Res68266 = keras.layers.Reshape((2, 4), name = 'Res68266', )(Res17858)
Fla86747 = keras.layers.Flatten(name = 'Fla86747', )(Res68266)
Ave85962 = keras.layers.AveragePooling2D(pool_size=(2, 2), strides=(2, 4), padding='valid', name = 'Ave85962', )(in0Ave85962)
Res49922 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res49922', )(Ave85962)
Glo37006 = keras.layers.GlobalAveragePooling3D(name = 'Glo37006', )(Res49922)
Con45535 = keras.layers.Concatenate(axis=1, name = 'Con45535', )([Glo37006,in0Con45535])
Min68011 = keras.layers.Minimum(name = 'Min68011', )([Fla86747,Con45535])
model = tf.keras.models.Model(inputs=[in0Min18574,in1Min18574,in0Ave85962,in0Con45535], outputs=Min68011)
in0Min18574 = tf.constant([[[[[0.0467, 0.6484], [0.715, 0.6769]]], [[[0.0778, 0.4463], [0.6733, 0.0097]]]]])
in1Min18574 = tf.constant([[[[[0.9684, 0.8817], [0.0291, 0.3745]]], [[[0.8464, 0.8138], [0.3927, 0.338]]]]])
in0Ave85962 = tf.constant([[[[1.3337], [1.1137]], [[1.4885], [1.8148]]]])
in0Con45535 = tf.constant([[0.7587, 0.6263, 0.1407, 0.4925, 0.0611, 0.2767, 0.0353]])
print (np.array2string(model.predict([in0Min18574,in1Min18574,in0Ave85962,in0Con45535],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min68011.png')

LMin18574 = minimum_layer([[[[[[0.0467, 0.6484], [0.715, 0.6769]]], [[[0.0778, 0.4463], [0.6733, 0.0097]]]]], [[[[[0.9684, 0.8817], [0.0291, 0.3745]]], [[[0.8464, 0.8138], [0.3927, 0.338]]]]]], Min18574), 
LRes17858 = reshape_layer(Min18574, [2, 1, 4], Res17858), 
LRes68266 = reshape_layer(Res17858, [2, 4], Res68266), 
LFla86747 = flatten_layer(Res68266, Fla86747), 
LAve85962 = average_pooling2D_layer([[[[1.3337], [1.1137]], [[1.4885], [1.8148]]]], 2, 2, 2, 4, false, Ave85962), 
LRes49922 = reshape_layer(Ave85962, [1, 1, 1, 1], Res49922), 
LGlo37006 = global_average_pooling3D_layer(Res49922, Glo37006), 
LCon45535 = concatenate_layer([Glo37006,[[0.7587, 0.6263, 0.1407, 0.4925, 0.0611, 0.2767, 0.0353]]], 1, Con45535), 
LMin68011 = minimum_layer([Fla86747,Con45535], Min68011), 
exec_layers([LMin18574,LRes17858,LRes68266,LFla86747,LAve85962,LRes49922,LGlo37006,LCon45535,LMin68011],["Min18574","Res17858","Res68266","Fla86747","Ave85962","Res49922","Glo37006","Con45535","Min68011"],Min68011,"Min68011")

Actual (Unparsed): [[0.0467000, 0.6484000, 0.0291000, 0.1407000, 0.0778000, 0.0611000, 0.2767000, 0.0097000]]

Expected (Unparsed): [[0.0467,0.6484,0.0291,0.1407,0.0778,0.0611,0.2767,0.0097]]

Actual:   [[0.0467, 0.6484, 0.0291, 0.1407, 0.0778, 0.0611, 0.2767, 0.0097]]

Expected: [[0.0467, 0.6484, 0.0291, 0.1407, 0.0778, 0.0611, 0.2767, 0.0097]]