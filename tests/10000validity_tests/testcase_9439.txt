import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min15219 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min15219 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con67125 = tf.keras.layers.Input(shape=([6, 1]))
in0Zer68807 = tf.keras.layers.Input(shape=([4, 2]))

Min15219 = keras.layers.Minimum(name = 'Min15219', )([in0Min15219,in1Min15219])
Res32810 = keras.layers.Reshape((1, 1, 1), name = 'Res32810', )(Min15219)
Res78209 = keras.layers.Reshape((1, 1), name = 'Res78209', )(Res32810)
Glo76124 = keras.layers.GlobalAveragePooling1D(name = 'Glo76124', )(Res78209)
Res82479 = keras.layers.Reshape((1, 1), name = 'Res82479', )(Glo76124)
Zer27706 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer27706', )(Res82479)
Con67125 = keras.layers.Concatenate(axis=2, name = 'Con67125', )([Zer27706,in0Con67125])
Zer68807 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer68807', )(in0Zer68807)
Ave2766 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave2766', )(Zer68807)
Mul16857 = keras.layers.Multiply(name = 'Mul16857', )([Con67125,Ave2766])
model = tf.keras.models.Model(inputs=[in0Min15219,in1Min15219,in0Con67125,in0Zer68807], outputs=Mul16857)
in0Min15219 = tf.constant([[[[[0.3088]]]]])
in1Min15219 = tf.constant([[[[[0.4366]]]]])
in0Con67125 = tf.constant([[[0.8295], [0.2021], [0.2057], [0.8468], [0.9047], [0.7397]]])
in0Zer68807 = tf.constant([[[1.3505, 1.1732], [1.6769, 1.5229], [1.2271, 1.5285], [1.0996, 1.2273]]])
print (np.array2string(model.predict([in0Min15219,in1Min15219,in0Con67125,in0Zer68807],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul16857.png')

LMin15219 = minimum_layer([[[[[[0.3088]]]]], [[[[[0.4366]]]]]], Min15219), 
LRes32810 = reshape_layer(Min15219, [1, 1, 1], Res32810), 
LRes78209 = reshape_layer(Res32810, [1, 1], Res78209), 
LGlo76124 = global_average_pooling1D_layer(Res78209, Glo76124), 
LRes82479 = reshape_layer(Glo76124, [1, 1], Res82479), 
LZer27706 = zero_padding1D_layer(Res82479, 5, 0, Zer27706), 
LCon67125 = concatenate_layer([Zer27706,[[[0.8295], [0.2021], [0.2057], [0.8468], [0.9047], [0.7397]]]], 2, Con67125), 
LZer68807 = zero_padding1D_layer([[[1.3505, 1.1732], [1.6769, 1.5229], [1.2271, 1.5285], [1.0996, 1.2273]]], 1, 1, Zer68807), 
LAve2766 = average_pooling1D_layer(Zer68807, 1, Ave2766), 
LMul16857 = multiply_layer([Con67125,Ave2766], Mul16857), 
exec_layers([LMin15219,LRes32810,LRes78209,LGlo76124,LRes82479,LZer27706,LCon67125,LZer68807,LAve2766,LMul16857],["Min15219","Res32810","Res78209","Glo76124","Res82479","Zer27706","Con67125","Zer68807","Ave2766","Mul16857"],Mul16857,"Mul16857")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.2371037], [0.0000000, 0.3132605], [0.0000000, 1.2943338], [0.0000000, 1.1103383], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0.0],[0.0,0.23710372000000002],[0.0,0.31326053],[0.0,1.2943338],[0.0,1.11033831],[0.0,0.0]]]

Actual:   [[[0, 0], [0, 0.2372], [0, 0.3133], [0, 1.2944], [0, 1.1104], [0, 0]]]

Expected: [[[0, 0], [0, 0.2372], [0, 0.3133], [0, 1.2944], [0, 1.1104], [0, 0]]]