import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul80786 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul80786 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con978 = tf.keras.layers.Input(shape=([1, 1]))
in0Sub10381 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub10381 = tf.keras.layers.Input(shape=([3, 2]))
in0Max35315 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Max35315 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Glo20869 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con40255 = tf.keras.layers.Input(shape=([1]))
in0Con95505 = tf.keras.layers.Input(shape=([1]))

Mul80786 = keras.layers.Multiply(name = 'Mul80786', )([in0Mul80786,in1Mul80786])
Res72308 = keras.layers.Reshape((1, 1), name = 'Res72308', )(Mul80786)
Con978 = keras.layers.Concatenate(axis=2, name = 'Con978', )([Res72308,in0Con978])
Sub10381 = keras.layers.Subtract(name = 'Sub10381', )([in0Sub10381,in1Sub10381])
Ave63038 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave63038', )(Sub10381)
Dot75271 = keras.layers.Dot(axes=(2, 2), name = 'Dot75271', )([Con978,Ave63038])
Fla42723 = keras.layers.Flatten(name = 'Fla42723', )(Dot75271)
Max35315 = keras.layers.Maximum(name = 'Max35315', )([in0Max35315,in1Max35315])
Res94099 = keras.layers.Reshape((2, 1, 1), name = 'Res94099', )(Max35315)
Res54080 = keras.layers.Reshape((2, 1), name = 'Res54080', )(Res94099)
Fla91843 = keras.layers.Flatten(name = 'Fla91843', )(Res54080)
Glo20869 = keras.layers.GlobalAveragePooling3D(name = 'Glo20869', )(in0Glo20869)
Con40255 = keras.layers.Concatenate(axis=1, name = 'Con40255', )([Glo20869,in0Con40255])
Sub68765 = keras.layers.Subtract(name = 'Sub68765', )([Fla91843,Con40255])
Con95505 = keras.layers.Concatenate(axis=1, name = 'Con95505', )([Sub68765,in0Con95505])
Sub15644 = keras.layers.Subtract(name = 'Sub15644', )([Fla42723,Con95505])
model = tf.keras.models.Model(inputs=[in0Mul80786,in1Mul80786,in0Con978,in0Sub10381,in1Sub10381,in0Max35315,in1Max35315,in0Glo20869,in0Con40255,in0Con95505], outputs=Sub15644)
in0Mul80786 = tf.constant([[[[0.7197]]]])
in1Mul80786 = tf.constant([[[[0.999]]]])
in0Con978 = tf.constant([[[0.069]]])
in0Sub10381 = tf.constant([[[0.7684, 0.1622], [0.3534, 0.7853], [0.932, 0.2825]]])
in1Sub10381 = tf.constant([[[0.5095, 0.2868], [0.6339, 0.0041], [0.9325, 0.7239]]])
in0Max35315 = tf.constant([[[[[0.4755]]], [[[0.7573]]]]])
in1Max35315 = tf.constant([[[[[0.2184]]], [[[0.4842]]]]])
in0Glo20869 = tf.constant([[[[[1.4935]], [[1.7182]]]]])
in0Con40255 = tf.constant([[0.3468]])
in0Con95505 = tf.constant([[0.387]])
print (np.array2string(model.predict([in0Mul80786,in1Mul80786,in0Con978,in0Sub10381,in1Sub10381,in0Max35315,in1Max35315,in0Glo20869,in0Con40255,in0Con95505],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub15644.png')

LMul80786 = multiply_layer([[[[[0.7197]]]], [[[[0.999]]]]], Mul80786), 
LRes72308 = reshape_layer(Mul80786, [1, 1], Res72308), 
LCon978 = concatenate_layer([Res72308,[[[0.069]]]], 2, Con978), 
LSub10381 = subtract_layer([[[0.7684, 0.1622], [0.3534, 0.7853], [0.932, 0.2825]]], [[[0.5095, 0.2868], [0.6339, 0.0041], [0.9325, 0.7239]]], Sub10381), 
LAve63038 = average_pooling1D_layer(Sub10381, 1, Ave63038), 
LDot75271 = dot_layer(Con978,Ave63038, 2, 2, Dot75271), 
LFla42723 = flatten_layer(Dot75271, Fla42723), 
LMax35315 = maximum_layer([[[[[[0.4755]]], [[[0.7573]]]]], [[[[[0.2184]]], [[[0.4842]]]]]], Max35315), 
LRes94099 = reshape_layer(Max35315, [2, 1, 1], Res94099), 
LRes54080 = reshape_layer(Res94099, [2, 1], Res54080), 
LFla91843 = flatten_layer(Res54080, Fla91843), 
LGlo20869 = global_average_pooling3D_layer([[[[[1.4935]], [[1.7182]]]]], Glo20869), 
LCon40255 = concatenate_layer([Glo20869,[[0.3468]]], 1, Con40255), 
LSub68765 = subtract_layer(Fla91843,Con40255, Sub68765), 
LCon95505 = concatenate_layer([Sub68765,[[0.387]]], 1, Con95505), 
LSub15644 = subtract_layer(Fla42723,Con95505, Sub15644), 
exec_layers([LMul80786,LRes72308,LCon978,LSub10381,LAve63038,LDot75271,LFla42723,LMax35315,LRes94099,LRes54080,LFla91843,LGlo20869,LCon40255,LSub68765,LCon95505,LSub15644],["Mul80786","Res72308","Con978","Sub10381","Ave63038","Dot75271","Fla42723","Max35315","Res94099","Res54080","Fla91843","Glo20869","Con40255","Sub68765","Con95505","Sub15644"],Sub15644,"Sub15644")

Actual (Unparsed): [[1.3078966, -0.5582712, -0.4178161]]

Expected (Unparsed): [[1.30789659967,-0.5582711741499999,-0.41781609015]]

Actual:   [[1.3079, -0.5582, -0.4178]]

Expected: [[1.3079, -0.5582, -0.4178]]