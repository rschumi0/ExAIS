import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas97149 = tf.keras.layers.Input(shape=([1, 1]))
in0Con86098 = tf.keras.layers.Input(shape=([3, 19]))
in0Con26603 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Per76856 = tf.keras.layers.Input(shape=([1, 2]))
in0Con35882 = tf.keras.layers.Input(shape=([3, 18]))

Mas97149 = keras.layers.Masking(mask_value=1, name = 'Mas97149', )(in0Mas97149)
Zer42359 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer42359', )(Mas97149)
Con86098 = keras.layers.Concatenate(axis=2, name = 'Con86098', )([Zer42359,in0Con86098])
Con26603 = keras.layers.Conv2DTranspose(2, (2, 1),strides=(1, 10), padding='valid', name = 'Con26603', )(in0Con26603)
Res5751 = keras.layers.Reshape((3, 20), name = 'Res5751', )(Con26603)
Per76856 = keras.layers.Permute((1,2), name = 'Per76856',)(in0Per76856)
Zer23277 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer23277', )(Per76856)
Con35882 = keras.layers.Concatenate(axis=2, name = 'Con35882', )([Zer23277,in0Con35882])
Add23351 = keras.layers.Add(name = 'Add23351', )([Res5751,Con35882])
Min14666 = keras.layers.Minimum(name = 'Min14666', )([Con86098,Add23351])
Res63562 = keras.layers.Reshape((3, 20, 1), name = 'Res63562', )(Min14666)
Dep65969 = keras.layers.DepthwiseConv2D((3, 17),strides=(3, 3), padding='valid', name = 'Dep65969', )(Res63562)
ELU31974 = keras.layers.ELU(alpha=8.974050740893212, name = 'ELU31974', )(Dep65969)
model = tf.keras.models.Model(inputs=[in0Mas97149,in0Con86098,in0Con26603,in0Per76856,in0Con35882], outputs=ELU31974)
w = model.get_layer('Con26603').get_weights() 
w[0] = np.array([[[[0.0085], [0.9902]]], [[[0.8136], [0.8561]]]])
w[1] = np.array([0, 0])
model.get_layer('Con26603').set_weights(w) 
w = model.get_layer('Dep65969').get_weights() 
w[0] = np.array([[[[0.4379]], [[0.4593]], [[0.3509]], [[0.7739]], [[0.4438]], [[0.2175]], [[0.7669]], [[0.0989]], [[0.0909]], [[0.9332]], [[0.7398]], [[0.0137]], [[0.4356]], [[0.8408]], [[0.3754]], [[0.8185]], [[0.3333]]], [[[0.3761]], [[0.2894]], [[0.0222]], [[0.4545]], [[0.2844]], [[0.908]], [[0.5044]], [[0.8083]], [[0.721]], [[0.012]], [[0.4884]], [[0.2684]], [[0.2831]], [[0.0805]], [[0.925]], [[0.0683]], [[0.1499]]], [[[0.7927]], [[0.5726]], [[0.6151]], [[0.8895]], [[0.2513]], [[0.3987]], [[0.2554]], [[0.0389]], [[0.1078]], [[0.9284]], [[0.8202]], [[0.2631]], [[0.7909]], [[0.8135]], [[0.8732]], [[0.753]], [[0.4629]]]])
w[1] = np.array([0])
model.get_layer('Dep65969').set_weights(w) 
in0Mas97149 = tf.constant([[[1.807]]])
in0Con86098 = tf.constant([[[0.1245, 0.8312, 0.854, 0.1767, 0.4664, 0.0099, 0.6851, 0.1267, 0.3858, 0.6052, 0.1039, 0.7309, 0.7339, 0.7948, 0.7726, 0.19, 0.4852, 0.4433, 0.8279], [0.2913, 0.8728, 0.4437, 0.7986, 0.2145, 0.4184, 0.9527, 0.3212, 0.0129, 0.3463, 0.4973, 0.5546, 0.9092, 0.6014, 0.2332, 0.3734, 0.4278, 0.58, 0.3399], [0.2645, 0.1664, 0.7239, 0.6558, 0.346, 0.7094, 0.3317, 0.1753, 0.0827, 0.7762, 0.2953, 0.9547, 0.0804, 0.2092, 0.9819, 0.3116, 0.8083, 0.8136, 0.1541]]])
in0Con26603 = tf.constant([[[[0.9255]], [[0.7022]]]])
in0Per76856 = tf.constant([[[1.7656, 1.6605]]])
in0Con35882 = tf.constant([[[0.0387, 0.4346, 0.2703, 0.8946, 0.5876, 0.5978, 0.647, 0.2615, 0.1197, 0.2294, 0.5063, 0.925, 0.2402, 0.3541, 0.8903, 0.7494, 0.0851, 0.1819], [0.0792, 0.9567, 0.77, 0.3636, 0.152, 0.0676, 0.1832, 0.2476, 0.4259, 0.8899, 0.5548, 0.2163, 0.386, 0.5937, 0.8155, 0.8954, 0.3751, 0.8367], [0.7497, 0.4038, 0.8812, 0.9731, 0.3418, 0.8364, 0.7365, 0.6145, 0.517, 0.861, 0.918, 0.1976, 0.6857, 0.6477, 0.9286, 0.7572, 0.1143, 0.3489]]])
print (np.array2string(model.predict([in0Mas97149,in0Con86098,in0Con26603,in0Per76856,in0Con35882],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ELU31974.png')

LMas97149 = masking_layer([[[1.807]]], 1, Mas97149), 
LZer42359 = zero_padding1D_layer(Mas97149, 2, 0, Zer42359), 
LCon86098 = concatenate_layer([Zer42359,[[[0.1245, 0.8312, 0.854, 0.1767, 0.4664, 0.0099, 0.6851, 0.1267, 0.3858, 0.6052, 0.1039, 0.7309, 0.7339, 0.7948, 0.7726, 0.19, 0.4852, 0.4433, 0.8279], [0.2913, 0.8728, 0.4437, 0.7986, 0.2145, 0.4184, 0.9527, 0.3212, 0.0129, 0.3463, 0.4973, 0.5546, 0.9092, 0.6014, 0.2332, 0.3734, 0.4278, 0.58, 0.3399], [0.2645, 0.1664, 0.7239, 0.6558, 0.346, 0.7094, 0.3317, 0.1753, 0.0827, 0.7762, 0.2953, 0.9547, 0.0804, 0.2092, 0.9819, 0.3116, 0.8083, 0.8136, 0.1541]]]], 2, Con86098), 
LCon26603 = conv2D_transpose_layer([[[[0.9255]], [[0.7022]]]], 2, 1,[[[[0.0085], [0.9902]]], [[[0.8136], [0.8561]]]],[0, 0], 1, 10, false, Con26603), 
LRes5751 = reshape_layer(Con26603, [3, 20], Res5751), 
LPer76856 = permute_layer([[[1.7656, 1.6605]]], 1,2, Per76856), 
LZer23277 = zero_padding1D_layer(Per76856, 2, 0, Zer23277), 
LCon35882 = concatenate_layer([Zer23277,[[[0.0387, 0.4346, 0.2703, 0.8946, 0.5876, 0.5978, 0.647, 0.2615, 0.1197, 0.2294, 0.5063, 0.925, 0.2402, 0.3541, 0.8903, 0.7494, 0.0851, 0.1819], [0.0792, 0.9567, 0.77, 0.3636, 0.152, 0.0676, 0.1832, 0.2476, 0.4259, 0.8899, 0.5548, 0.2163, 0.386, 0.5937, 0.8155, 0.8954, 0.3751, 0.8367], [0.7497, 0.4038, 0.8812, 0.9731, 0.3418, 0.8364, 0.7365, 0.6145, 0.517, 0.861, 0.918, 0.1976, 0.6857, 0.6477, 0.9286, 0.7572, 0.1143, 0.3489]]]], 2, Con35882), 
LAdd23351 = add_layer([Res5751,Con35882], Add23351), 
LMin14666 = minimum_layer([Con86098,Add23351], Min14666), 
LRes63562 = reshape_layer(Min14666, [3, 20, 1], Res63562), 
LDep65969 = depthwise_conv2D_layer(Res63562, 3, 17,[[[[0.4379]], [[0.4593]], [[0.3509]], [[0.7739]], [[0.4438]], [[0.2175]], [[0.7669]], [[0.0989]], [[0.0909]], [[0.9332]], [[0.7398]], [[0.0137]], [[0.4356]], [[0.8408]], [[0.3754]], [[0.8185]], [[0.3333]]], [[[0.3761]], [[0.2894]], [[0.0222]], [[0.4545]], [[0.2844]], [[0.908]], [[0.5044]], [[0.8083]], [[0.721]], [[0.012]], [[0.4884]], [[0.2684]], [[0.2831]], [[0.0805]], [[0.925]], [[0.0683]], [[0.1499]]], [[[0.7927]], [[0.5726]], [[0.6151]], [[0.8895]], [[0.2513]], [[0.3987]], [[0.2554]], [[0.0389]], [[0.1078]], [[0.9284]], [[0.8202]], [[0.2631]], [[0.7909]], [[0.8135]], [[0.8732]], [[0.753]], [[0.4629]]]],[0], 3, 3, false, Dep65969), 
LELU31974 = elu_layer(Dep65969, 8.974050740893212, ELU31974), 
exec_layers([LMas97149,LZer42359,LCon86098,LCon26603,LRes5751,LPer76856,LZer23277,LCon35882,LAdd23351,LMin14666,LRes63562,LDep65969,LELU31974],["Mas97149","Zer42359","Con86098","Con26603","Res5751","Per76856","Zer23277","Con35882","Add23351","Min14666","Res63562","Dep65969","ELU31974"],ELU31974,"ELU31974")

Actual (Unparsed): [[[[8.8029859], [8.6773479]]]]

Expected (Unparsed): [[[[8.802985880000003],[8.677347959999999]]]]

Actual:   [[[[8.803], [8.6774]]]]

Expected: [[[[8.803], [8.6774]]]]