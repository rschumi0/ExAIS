import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max9285 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max9285 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Ave33915 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave33915 = tf.keras.layers.Input(shape=([2, 2]))

Max9285 = keras.layers.Maximum(name = 'Max9285', )([in0Max9285,in1Max9285])
Res1176 = keras.layers.Reshape((1, 1, 2), name = 'Res1176', )(Max9285)
Res82778 = keras.layers.Reshape((1, 2), name = 'Res82778', )(Res1176)
Lea55087 = keras.layers.LeakyReLU(alpha=3.706214733014479, name = 'Lea55087', )(Res82778)
Zer85098 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer85098', )(Lea55087)
Ave33915 = keras.layers.Average(name = 'Ave33915', )([in0Ave33915,in1Ave33915])
Mul52232 = keras.layers.Multiply(name = 'Mul52232', )([Zer85098,Ave33915])
model = tf.keras.models.Model(inputs=[in0Max9285,in1Max9285,in0Ave33915,in1Ave33915], outputs=Mul52232)
in0Max9285 = tf.constant([[[[[0.0452], [0.0116]]]]])
in1Max9285 = tf.constant([[[[[0.9115], [0.0922]]]]])
in0Ave33915 = tf.constant([[[0.919, 0.241], [0.4157, 0.5816]]])
in1Ave33915 = tf.constant([[[0.247, 0.033], [0.3159, 0.5615]]])
print (np.array2string(model.predict([in0Max9285,in1Max9285,in0Ave33915,in1Ave33915],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul52232.png')

LMax9285 = maximum_layer([[[[[[0.0452], [0.0116]]]]], [[[[[0.9115], [0.0922]]]]]], Max9285), 
LRes1176 = reshape_layer(Max9285, [1, 1, 2], Res1176), 
LRes82778 = reshape_layer(Res1176, [1, 2], Res82778), 
LLea55087 = leaky_relu_layer(Res82778, 3.706214733014479, Lea55087), 
LZer85098 = zero_padding1D_layer(Lea55087, 1, 0, Zer85098), 
LAve33915 = average_layer([[[[0.919, 0.241], [0.4157, 0.5816]]], [[[0.247, 0.033], [0.3159, 0.5615]]]], Ave33915), 
LMul52232 = multiply_layer([Zer85098,Ave33915], Mul52232), 
exec_layers([LMax9285,LRes1176,LRes82778,LLea55087,LZer85098,LAve33915,LMul52232],["Max9285","Res1176","Res82778","Lea55087","Zer85098","Ave33915","Mul52232"],Mul52232,"Mul52232")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.3334267, 0.0526969]]]

Expected (Unparsed): [[[0.0,0.0],[0.3334267,0.05269691]]]

Actual:   [[[0, 0], [0.3335, 0.0527]]]

Expected: [[[0, 0], [0.3335, 0.0527]]]