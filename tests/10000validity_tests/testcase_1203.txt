import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot47840 = tf.keras.layers.Input(shape=([2]))
in1Dot47840 = tf.keras.layers.Input(shape=([2]))
in0Con94335 = tf.keras.layers.Input(shape=([1, 1]))
in0Mul25287 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul25287 = tf.keras.layers.Input(shape=([1, 2]))

Dot47840 = keras.layers.Dot(axes=(1, 1), name = 'Dot47840', )([in0Dot47840,in1Dot47840])
Sof5717 = keras.layers.Softmax(axis=1, name = 'Sof5717', )(Dot47840)
Res68649 = keras.layers.Reshape((1, 1), name = 'Res68649', )(Sof5717)
Per60393 = keras.layers.Permute((2,1), name = 'Per60393',)(Res68649)
Con94335 = keras.layers.Concatenate(axis=2, name = 'Con94335', )([Per60393,in0Con94335])
Mul25287 = keras.layers.Multiply(name = 'Mul25287', )([in0Mul25287,in1Mul25287])
Mul27761 = keras.layers.Multiply(name = 'Mul27761', )([Con94335,Mul25287])
model = tf.keras.models.Model(inputs=[in0Dot47840,in1Dot47840,in0Con94335,in0Mul25287,in1Mul25287], outputs=Mul27761)
in0Dot47840 = tf.constant([[0.7801, 0.5043]])
in1Dot47840 = tf.constant([[0.2548, 0.8502]])
in0Con94335 = tf.constant([[[0.3771]]])
in0Mul25287 = tf.constant([[[0.7499, 0.5506]]])
in1Mul25287 = tf.constant([[[0.3967, 0.3144]]])
print (np.array2string(model.predict([in0Dot47840,in1Dot47840,in0Con94335,in0Mul25287,in1Mul25287],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul27761.png')

LDot47840 = dot_layer([[0.7801, 0.5043]], [[0.2548, 0.8502]], 1, 1, Dot47840), 
LSof5717 = softmax_layer(Dot47840, 1, Sof5717), 
LRes68649 = reshape_layer(Sof5717, [1, 1], Res68649), 
LPer60393 = permute_layer(Res68649, 2,1, Per60393), 
LCon94335 = concatenate_layer([Per60393,[[[0.3771]]]], 2, Con94335), 
LMul25287 = multiply_layer([[[[0.7499, 0.5506]]], [[[0.3967, 0.3144]]]], Mul25287), 
LMul27761 = multiply_layer([Con94335,Mul25287], Mul27761), 
exec_layers([LDot47840,LSof5717,LRes68649,LPer60393,LCon94335,LMul25287,LMul27761],["Dot47840","Sof5717","Res68649","Per60393","Con94335","Mul25287","Mul27761"],Mul27761,"Mul27761")

Actual (Unparsed): [[[0.2974853, 0.0652793]]]

Expected (Unparsed): [[[0.29748533,0.06527926814400001]]]

Actual:   [[[0.2975, 0.0653]]]

Expected: [[[0.2975, 0.0653]]]