import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min52366 = tf.keras.layers.Input(shape=([1, 1]))
in1Min52366 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot17551 = tf.keras.layers.Input(shape=([3]))
in1Dot17551 = tf.keras.layers.Input(shape=([3]))
in0Con37253 = tf.keras.layers.Input(shape=([7]))
in0Max3112 = tf.keras.layers.Input(shape=([1, 2]))
in1Max3112 = tf.keras.layers.Input(shape=([1, 2]))
in0Con55377 = tf.keras.layers.Input(shape=([6]))
in0Sub4932 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub4932 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Glo96111 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con59744 = tf.keras.layers.Input(shape=([6]))

Min52366 = keras.layers.Minimum(name = 'Min52366', )([in0Min52366,in1Min52366])
Per47013 = keras.layers.Permute((1,2), name = 'Per47013',)(Min52366)
Dot17551 = keras.layers.Dot(axes=(1, 1), name = 'Dot17551', )([in0Dot17551,in1Dot17551])
Res89035 = keras.layers.Reshape((1, 1), name = 'Res89035', )(Dot17551)
PRe41550 = keras.layers.PReLU(name = 'PRe41550', )(Res89035)
Sub17219 = keras.layers.Subtract(name = 'Sub17219', )([Per47013,PRe41550])
Fla22362 = keras.layers.Flatten(name = 'Fla22362', )(Sub17219)
Con37253 = keras.layers.Concatenate(axis=1, name = 'Con37253', )([Fla22362,in0Con37253])
Max3112 = keras.layers.Maximum(name = 'Max3112', )([in0Max3112,in1Max3112])
Fla45652 = keras.layers.Flatten(name = 'Fla45652', )(Max3112)
Con55377 = keras.layers.Concatenate(axis=1, name = 'Con55377', )([Fla45652,in0Con55377])
Sub4932 = keras.layers.Subtract(name = 'Sub4932', )([in0Sub4932,in1Sub4932])
Res79956 = keras.layers.Reshape((2, 4), name = 'Res79956', )(Sub4932)
Fla89057 = keras.layers.Flatten(name = 'Fla89057', )(Res79956)
Glo96111 = keras.layers.GlobalMaxPool2D(name = 'Glo96111', )(in0Glo96111)
Con59744 = keras.layers.Concatenate(axis=1, name = 'Con59744', )([Glo96111,in0Con59744])
Add24454 = keras.layers.Add(name = 'Add24454', )([Fla89057,Con59744])
Sub93626 = keras.layers.Subtract(name = 'Sub93626', )([Con55377,Add24454])
Add17709 = keras.layers.Add(name = 'Add17709', )([Con37253,Sub93626])
model = tf.keras.models.Model(inputs=[in0Min52366,in1Min52366,in0Dot17551,in1Dot17551,in0Con37253,in0Max3112,in1Max3112,in0Con55377,in0Sub4932,in1Sub4932,in0Glo96111,in0Con59744], outputs=Add17709)
w = model.get_layer('PRe41550').get_weights() 
w[0] = np.array([[0.8179]])
model.get_layer('PRe41550').set_weights(w) 
in0Min52366 = tf.constant([[[0.8911]]])
in1Min52366 = tf.constant([[[0.3415]]])
in0Dot17551 = tf.constant([[0.8593, 0.1048, 0.9085]])
in1Dot17551 = tf.constant([[0.981, 0.7162, 0.5826]])
in0Con37253 = tf.constant([[0.4587, 0.9809, 0.3305, 0.2096, 0.9076, 0.0501, 0.0735]])
in0Max3112 = tf.constant([[[0.0406, 0.1003]]])
in1Max3112 = tf.constant([[[0.0598, 0.106]]])
in0Con55377 = tf.constant([[0.6013, 0.2929, 0.0999, 0.1685, 0.059, 0.8489]])
in0Sub4932 = tf.constant([[[[0.6301, 0.1109], [0.4768, 0.2328]], [[0.421, 0.182], [0.8847, 0.9703]]]])
in1Sub4932 = tf.constant([[[[0.0406, 0.7316], [0.8668, 0.2187]], [[0.8611, 0.5107], [0.4579, 0.2972]]]])
in0Glo96111 = tf.constant([[[[1.0139, 1.5522]], [[1.1844, 1.2014]]]])
in0Con59744 = tf.constant([[0.1033, 0.8648, 0.9536, 0.4987, 0.4911, 0.9522]])
print (np.array2string(model.predict([in0Min52366,in1Min52366,in0Dot17551,in1Dot17551,in0Con37253,in0Max3112,in1Max3112,in0Con55377,in0Sub4932,in1Sub4932,in0Glo96111,in0Con59744],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add17709.png')

LMin52366 = minimum_layer([[[[0.8911]]], [[[0.3415]]]], Min52366), 
LPer47013 = permute_layer(Min52366, 1,2, Per47013), 
LDot17551 = dot_layer([[0.8593, 0.1048, 0.9085]], [[0.981, 0.7162, 0.5826]], 1, 1, Dot17551), 
LRes89035 = reshape_layer(Dot17551, [1, 1], Res89035), 
LPRe41550 = prelu_layer(Res89035, [[0.8179]], PRe41550), 
LSub17219 = subtract_layer(Per47013,PRe41550, Sub17219), 
LFla22362 = flatten_layer(Sub17219, Fla22362), 
LCon37253 = concatenate_layer([Fla22362,[[0.4587, 0.9809, 0.3305, 0.2096, 0.9076, 0.0501, 0.0735]]], 1, Con37253), 
LMax3112 = maximum_layer([[[[0.0406, 0.1003]]], [[[0.0598, 0.106]]]], Max3112), 
LFla45652 = flatten_layer(Max3112, Fla45652), 
LCon55377 = concatenate_layer([Fla45652,[[0.6013, 0.2929, 0.0999, 0.1685, 0.059, 0.8489]]], 1, Con55377), 
LSub4932 = subtract_layer([[[[0.6301, 0.1109], [0.4768, 0.2328]], [[0.421, 0.182], [0.8847, 0.9703]]]], [[[[0.0406, 0.7316], [0.8668, 0.2187]], [[0.8611, 0.5107], [0.4579, 0.2972]]]], Sub4932), 
LRes79956 = reshape_layer(Sub4932, [2, 4], Res79956), 
LFla89057 = flatten_layer(Res79956, Fla89057), 
LGlo96111 = global_max_pool2D_layer([[[[1.0139, 1.5522]], [[1.1844, 1.2014]]]], Glo96111), 
LCon59744 = concatenate_layer([Glo96111,[[0.1033, 0.8648, 0.9536, 0.4987, 0.4911, 0.9522]]], 1, Con59744), 
LAdd24454 = add_layer([Fla89057,Con59744], Add24454), 
LSub93626 = subtract_layer(Con55377,Add24454, Sub93626), 
LAdd17709 = add_layer([Con37253,Sub93626], Add17709), 
exec_layers([LMin52366,LPer47013,LDot17551,LRes89035,LPRe41550,LSub17219,LFla22362,LCon37253,LMax3112,LFla45652,LCon55377,LSub4932,LRes79956,LFla89057,LGlo96111,LCon59744,LAdd24454,LSub93626,LAdd17709],["Min52366","Per47013","Dot17551","Res89035","PRe41550","Sub17219","Fla22362","Con37253","Max3112","Fla45652","Con55377","Sub4932","Res79956","Fla89057","Glo96111","Con59744","Add24454","Sub93626","Add17709"],Add17709,"Add17709")

Actual (Unparsed): [[-2.8199231, -0.3668000, 1.8689000, -0.2555000, -0.2040000, 0.9061000, -0.8088000, -0.7029000]]

Expected (Unparsed): [[-2.8199231599999997,-0.3668,1.8689,-0.25550000000000006,-0.20400000000000007,0.9061,-0.8088,-0.7029000000000002]]

Actual:   [[-2.8199, -0.3668, 1.8689, -0.2555, -0.204, 0.9061, -0.8088, -0.7029]]

Expected: [[-2.8199, -0.3668, 1.8689, -0.2555, -0.204, 0.9061, -0.8088, -0.7029]]