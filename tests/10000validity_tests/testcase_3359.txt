import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo55450 = tf.keras.layers.Input(shape=([1, 1]))
in0Con23757 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Sub11395 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub11395 = tf.keras.layers.Input(shape=([2, 3, 3]))

Glo55450 = keras.layers.GlobalMaxPool1D(name = 'Glo55450', )(in0Glo55450)
Res11957 = keras.layers.Reshape((1, 1), name = 'Res11957', )(Glo55450)
Res24723 = keras.layers.Reshape((1, 1, 1), name = 'Res24723', )(Res11957)
Zer61741 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer61741', )(Res24723)
Con23757 = keras.layers.Concatenate(axis=3, name = 'Con23757', )([Zer61741,in0Con23757])
Sub11395 = keras.layers.Subtract(name = 'Sub11395', )([in0Sub11395,in1Sub11395])
Sub17862 = keras.layers.Subtract(name = 'Sub17862', )([Con23757,Sub11395])
Res44278 = keras.layers.Reshape((2, 9), name = 'Res44278', )(Sub17862)
Glo84156 = keras.layers.GlobalMaxPool1D(name = 'Glo84156', )(Res44278)
model = tf.keras.models.Model(inputs=[in0Glo55450,in0Con23757,in0Sub11395,in1Sub11395], outputs=Glo84156)
in0Glo55450 = tf.constant([[[1.37]]])
in0Con23757 = tf.constant([[[[0.8851, 0.9452], [0.5689, 0.6104], [0.5472, 0.0297]], [[0.1424, 0.6326], [0.8422, 0.817], [0.4373, 0.6839]]]])
in0Sub11395 = tf.constant([[[[0.4585, 0.2805, 0.2266], [0.5166, 0.3354, 0.5012], [0.8029, 0.612, 0.8604]], [[0.0558, 0.7923, 0.3855], [0.0147, 0.6303, 0.9376], [0.7205, 0.1132, 0.2728]]]])
in1Sub11395 = tf.constant([[[[0.9043, 0.1039, 0.0226], [0.8721, 0.1309, 0.6619], [0.5324, 0.8365, 0.2859]], [[0.1534, 0.8062, 0.5879], [0.7848, 0.0027, 0.6785], [0.27, 0.8606, 0.5674]]]])
print (np.array2string(model.predict([in0Glo55450,in0Con23757,in0Sub11395,in1Sub11395],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo84156.png')

LGlo55450 = global_max_pool1D_layer([[[1.37]]], Glo55450), 
LRes11957 = reshape_layer(Glo55450, [1, 1], Res11957), 
LRes24723 = reshape_layer(Res11957, [1, 1, 1], Res24723), 
LZer61741 = zero_padding2D_layer(Res24723, 1, 0, 2, 0, Zer61741), 
LCon23757 = concatenate_layer([Zer61741,[[[[0.8851, 0.9452], [0.5689, 0.6104], [0.5472, 0.0297]], [[0.1424, 0.6326], [0.8422, 0.817], [0.4373, 0.6839]]]]], 3, Con23757), 
LSub11395 = subtract_layer([[[[0.4585, 0.2805, 0.2266], [0.5166, 0.3354, 0.5012], [0.8029, 0.612, 0.8604]], [[0.0558, 0.7923, 0.3855], [0.0147, 0.6303, 0.9376], [0.7205, 0.1132, 0.2728]]]], [[[[0.9043, 0.1039, 0.0226], [0.8721, 0.1309, 0.6619], [0.5324, 0.8365, 0.2859]], [[0.1534, 0.8062, 0.5879], [0.7848, 0.0027, 0.6785], [0.27, 0.8606, 0.5674]]]], Sub11395), 
LSub17862 = subtract_layer(Con23757,Sub11395, Sub17862), 
LRes44278 = reshape_layer(Sub17862, [2, 9], Res44278), 
LGlo84156 = global_max_pool1D_layer(Res44278, Glo84156), 
exec_layers([LGlo55450,LRes11957,LRes24723,LZer61741,LCon23757,LSub11395,LSub17862,LRes44278,LGlo84156],["Glo55450","Res11957","Res24723","Zer61741","Con23757","Sub11395","Sub17862","Res44278","Glo84156"],Glo84156,"Glo84156")

Actual (Unparsed): [[0.4458000, 0.7085000, 0.8350000, 0.7701000, 0.3644000, 0.7711000, 0.9195000, 1.1847000, 0.9785000]]

Expected (Unparsed): [[0.4458,0.7084999999999999,0.835,0.7701,0.36439999999999995,0.7711000000000001,0.9195000000000001,1.1847,0.9784999999999999]]

Actual:   [[0.4458, 0.7085, 0.835, 0.7701, 0.3644, 0.7711, 0.9195, 1.1847, 0.9785]]

Expected: [[0.4458, 0.7085, 0.835, 0.7701, 0.3644, 0.7712, 0.9196, 1.1847, 0.9785]]