import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add80491 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Add80491 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Ave42130 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave42130 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Max90809 = tf.keras.layers.Input(shape=([1, 1]))
in1Max90809 = tf.keras.layers.Input(shape=([1, 1]))
in0Con68352 = tf.keras.layers.Input(shape=([3, 3, 1]))

Add80491 = keras.layers.Add(name = 'Add80491', )([in0Add80491,in1Add80491])
Res2994 = keras.layers.Reshape((1, 2, 2), name = 'Res2994', )(Add80491)
Zer4529 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer4529', )(Res2994)
Ave42130 = keras.layers.Average(name = 'Ave42130', )([in0Ave42130,in1Ave42130])
Zer62467 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer62467', )(Ave42130)
Max90809 = keras.layers.Maximum(name = 'Max90809', )([in0Max90809,in1Max90809])
Res89367 = keras.layers.Reshape((1, 1, 1), name = 'Res89367', )(Max90809)
Zer70407 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer70407', )(Res89367)
Mul25465 = keras.layers.Multiply(name = 'Mul25465', )([Zer62467,Zer70407])
Con68352 = keras.layers.Concatenate(axis=3, name = 'Con68352', )([Mul25465,in0Con68352])
Min12919 = keras.layers.Minimum(name = 'Min12919', )([Zer4529,Con68352])
model = tf.keras.models.Model(inputs=[in0Add80491,in1Add80491,in0Ave42130,in1Ave42130,in0Max90809,in1Max90809,in0Con68352], outputs=Min12919)
in0Add80491 = tf.constant([[[[[0.2129, 0.9695]], [[0.7589, 0.9225]]]]])
in1Add80491 = tf.constant([[[[[0.0818, 0.0343]], [[0.7947, 0.292]]]]])
in0Ave42130 = tf.constant([[[[0.4731]]]])
in1Ave42130 = tf.constant([[[[0.7158]]]])
in0Max90809 = tf.constant([[[0.3053]]])
in1Max90809 = tf.constant([[[0.828]]])
in0Con68352 = tf.constant([[[[0.9395], [0.7401], [0.7794]], [[0.3084], [0.2027], [0.2509]], [[0.1307], [0.9205], [0.8842]]]])
print (np.array2string(model.predict([in0Add80491,in1Add80491,in0Ave42130,in1Ave42130,in0Max90809,in1Max90809,in0Con68352],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min12919.png')

LAdd80491 = add_layer([[[[[[0.2129, 0.9695]], [[0.7589, 0.9225]]]]], [[[[[0.0818, 0.0343]], [[0.7947, 0.292]]]]]], Add80491), 
LRes2994 = reshape_layer(Add80491, [1, 2, 2], Res2994), 
LZer4529 = zero_padding2D_layer(Res2994, 2, 0, 1, 0, Zer4529), 
LAve42130 = average_layer([[[[[0.4731]]]], [[[[0.7158]]]]], Ave42130), 
LZer62467 = zero_padding2D_layer(Ave42130, 2, 0, 2, 0, Zer62467), 
LMax90809 = maximum_layer([[[[0.3053]]], [[[0.828]]]], Max90809), 
LRes89367 = reshape_layer(Max90809, [1, 1, 1], Res89367), 
LZer70407 = zero_padding2D_layer(Res89367, 1, 1, 1, 1, Zer70407), 
LMul25465 = multiply_layer([Zer62467,Zer70407], Mul25465), 
LCon68352 = concatenate_layer([Mul25465,[[[[0.9395], [0.7401], [0.7794]], [[0.3084], [0.2027], [0.2509]], [[0.1307], [0.9205], [0.8842]]]]], 3, Con68352), 
LMin12919 = minimum_layer([Zer4529,Con68352], Min12919), 
exec_layers([LAdd80491,LRes2994,LZer4529,LAve42130,LZer62467,LMax90809,LRes89367,LZer70407,LMul25465,LCon68352,LMin12919],["Add80491","Res2994","Zer4529","Ave42130","Zer62467","Max90809","Res89367","Zer70407","Mul25465","Con68352","Min12919"],Min12919,"Min12919")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.9205000], [0.0000000, 0.8842000]]]]

Expected (Unparsed): [[[[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0]],[[0,0],[0,0.9205],[0.0,0.8842]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0.9205], [0, 0.8842]]]]

Expected: [[[[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0.9205], [0, 0.8842]]]]