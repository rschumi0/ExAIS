import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul53419 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul53419 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot5241 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot5241 = tf.keras.layers.Input(shape=([2, 3]))

Mul53419 = keras.layers.Multiply(name = 'Mul53419', )([in0Mul53419,in1Mul53419])
Dot5241 = keras.layers.Dot(axes=(2, 2), name = 'Dot5241', )([in0Dot5241,in1Dot5241])
Max63965 = keras.layers.Maximum(name = 'Max63965', )([Mul53419,Dot5241])
Glo95140 = keras.layers.GlobalMaxPool1D(name = 'Glo95140', )(Max63965)
model = tf.keras.models.Model(inputs=[in0Mul53419,in1Mul53419,in0Dot5241,in1Dot5241], outputs=Glo95140)
in0Mul53419 = tf.constant([[[0.6151, 0.0761], [0.7566, 0.8269]]])
in1Mul53419 = tf.constant([[[0.3973, 0.5632], [0.4459, 0.6209]]])
in0Dot5241 = tf.constant([[[0.994, 0.64, 0.4673], [0.0911, 0.239, 0.9208]]])
in1Dot5241 = tf.constant([[[0.9835, 0.5193, 0.1489], [0.5242, 0.8512, 0.2131]]])
print (np.array2string(model.predict([in0Mul53419,in1Mul53419,in0Dot5241,in1Dot5241],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo95140.png')

LMul53419 = multiply_layer([[[[0.6151, 0.0761], [0.7566, 0.8269]]], [[[0.3973, 0.5632], [0.4459, 0.6209]]]], Mul53419), 
LDot5241 = dot_layer([[[0.994, 0.64, 0.4673], [0.0911, 0.239, 0.9208]]], [[[0.9835, 0.5193, 0.1489], [0.5242, 0.8512, 0.2131]]], 2, 2, Dot5241), 
LMax63965 = maximum_layer([Mul53419,Dot5241], Max63965), 
LGlo95140 = global_max_pool1D_layer(Max63965, Glo95140), 
exec_layers([LMul53419,LDot5241,LMax63965,LGlo95140],["Mul53419","Dot5241","Max63965","Glo95140"],Glo95140,"Glo95140")

Actual (Unparsed): [[1.3795320, 1.1654044]]

Expected (Unparsed): [[1.37953197,1.1654044300000002]]

Actual:   [[1.3796, 1.1655]]

Expected: [[1.3796, 1.1655]]