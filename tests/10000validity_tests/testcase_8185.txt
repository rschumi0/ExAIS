import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave61848 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Ave61848 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con15989 = tf.keras.layers.Input(shape=([4, 1]))
in0Dot19942 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot19942 = tf.keras.layers.Input(shape=([2, 2]))
in0Glo91416 = tf.keras.layers.Input(shape=([1, 2]))
in0Con22127 = tf.keras.layers.Input(shape=([4, 1]))
in0Con87140 = tf.keras.layers.Input(shape=([6, 3, 2]))
in0Add98817 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add98817 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con4331 = tf.keras.layers.Input(shape=([4]))
in0Fla97746 = tf.keras.layers.Input(shape=([3, 2]))
in0Con78873 = tf.keras.layers.Input(shape=([6, 1, 2]))
in0Cro62896 = tf.keras.layers.Input(shape=([4, 1, 3]))

Ave61848 = keras.layers.Average(name = 'Ave61848', )([in0Ave61848,in1Ave61848])
Res43247 = keras.layers.Reshape((2, 1, 1), name = 'Res43247', )(Ave61848)
Res71168 = keras.layers.Reshape((2, 1), name = 'Res71168', )(Res43247)
Zer87272 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer87272', )(Res71168)
Con15989 = keras.layers.Concatenate(axis=2, name = 'Con15989', )([Zer87272,in0Con15989])
Dot19942 = keras.layers.Dot(axes=(2, 1), name = 'Dot19942', )([in0Dot19942,in1Dot19942])
Zer59496 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer59496', )(Dot19942)
Glo91416 = keras.layers.GlobalMaxPool1D(name = 'Glo91416', )(in0Glo91416)
Res24646 = keras.layers.Reshape((2, 1), name = 'Res24646', )(Glo91416)
Zer48382 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer48382', )(Res24646)
Con22127 = keras.layers.Concatenate(axis=2, name = 'Con22127', )([Zer48382,in0Con22127])
Ave31872 = keras.layers.Average(name = 'Ave31872', )([Zer59496,Con22127])
Sub62670 = keras.layers.Subtract(name = 'Sub62670', )([Con15989,Ave31872])
Res56706 = keras.layers.Reshape((4, 2, 1), name = 'Res56706', )(Sub62670)
Zer84515 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer84515', )(Res56706)
Con87140 = keras.layers.Concatenate(axis=3, name = 'Con87140', )([Zer84515,in0Con87140])
Add98817 = keras.layers.Add(name = 'Add98817', )([in0Add98817,in1Add98817])
Res30074 = keras.layers.Reshape((1, 2), name = 'Res30074', )(Add98817)
Fla85171 = keras.layers.Flatten(name = 'Fla85171', )(Res30074)
Con4331 = keras.layers.Concatenate(axis=1, name = 'Con4331', )([Fla85171,in0Con4331])
Fla97746 = keras.layers.Flatten(name = 'Fla97746', )(in0Fla97746)
Mul912 = keras.layers.Multiply(name = 'Mul912', )([Con4331,Fla97746])
Res65511 = keras.layers.Reshape((6, 1), name = 'Res65511', )(Mul912)
Res77224 = keras.layers.Reshape((6, 1, 1), name = 'Res77224', )(Res65511)
Con78873 = keras.layers.Concatenate(axis=3, name = 'Con78873', )([Res77224,in0Con78873])
Cro62896 = keras.layers.Cropping2D(cropping=((2, 1), (0, 0)), name = 'Cro62896', )(in0Cro62896)
Zer52014 = keras.layers.ZeroPadding2D(padding=((5, 0), (0, 0)), name = 'Zer52014', )(Cro62896)
Mul60482 = keras.layers.Multiply(name = 'Mul60482', )([Con78873,Zer52014])
Zer32828 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer32828', )(Mul60482)
Mul82277 = keras.layers.Multiply(name = 'Mul82277', )([Con87140,Zer32828])
model = tf.keras.models.Model(inputs=[in0Ave61848,in1Ave61848,in0Con15989,in0Dot19942,in1Dot19942,in0Glo91416,in0Con22127,in0Con87140,in0Add98817,in1Add98817,in0Con4331,in0Fla97746,in0Con78873,in0Cro62896], outputs=Mul82277)
in0Ave61848 = tf.constant([[[[[0.9865]]], [[[0.7038]]]]])
in1Ave61848 = tf.constant([[[[[0.5531]]], [[[0.7494]]]]])
in0Con15989 = tf.constant([[[0.1477], [0.1083], [0.4371], [0.9812]]])
in0Dot19942 = tf.constant([[[0.8084, 0.759], [0.4789, 0.5505]]])
in1Dot19942 = tf.constant([[[0.1723, 0.3275], [0.6525, 0.7963]]])
in0Glo91416 = tf.constant([[[1.6209, 1.9141]]])
in0Con22127 = tf.constant([[[0.4782], [0.4623], [0.1157], [0.6141]]])
in0Con87140 = tf.constant([[[[0.9671, 0.396], [0.0932, 0.0176], [0.5435, 0.538]], [[0.5736, 0.9652], [0.9441, 0.6765], [0.2884, 0.4325]], [[0.4059, 0.8249], [0.7896, 0.9771], [0.4565, 0.3566]], [[0.6889, 0.4375], [0.5446, 0.4875], [0.4563, 0.4564]], [[0.2473, 0.2793], [0.8591, 0.5414], [0.7457, 0.5156]], [[0.568, 0.8889], [0.6566, 0.8342], [0.9297, 0.4247]]]])
in0Add98817 = tf.constant([[[[0.2427, 0.181]]]])
in1Add98817 = tf.constant([[[[0.2685, 0.8237]]]])
in0Con4331 = tf.constant([[0.1709, 0.5419, 0.8189, 0.5791]])
in0Fla97746 = tf.constant([[[1.3357, 1.7311], [1.8432, 1.2888], [1.6509, 1.6185]]])
in0Con78873 = tf.constant([[[[0.1623, 0.947]], [[0.4576, 0.6605]], [[0.8221, 0.3913]], [[0.7134, 0.4754]], [[0.0597, 0.3238]], [[0.4625, 0.1363]]]])
in0Cro62896 = tf.constant([[[[1.9968, 1.3933, 1.1953]], [[1.7079, 1.4047, 1.1863]], [[1.557, 1.9877, 1.2273]], [[1.8991, 1.099, 1.699]]]])
print (np.array2string(model.predict([in0Ave61848,in1Ave61848,in0Con15989,in0Dot19942,in1Dot19942,in0Glo91416,in0Con22127,in0Con87140,in0Add98817,in1Add98817,in0Con4331,in0Fla97746,in0Con78873,in0Cro62896],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul82277.png')

LAve61848 = average_layer([[[[[[0.9865]]], [[[0.7038]]]]], [[[[[0.5531]]], [[[0.7494]]]]]], Ave61848), 
LRes43247 = reshape_layer(Ave61848, [2, 1, 1], Res43247), 
LRes71168 = reshape_layer(Res43247, [2, 1], Res71168), 
LZer87272 = zero_padding1D_layer(Res71168, 2, 0, Zer87272), 
LCon15989 = concatenate_layer([Zer87272,[[[0.1477], [0.1083], [0.4371], [0.9812]]]], 2, Con15989), 
LDot19942 = dot_layer([[[0.8084, 0.759], [0.4789, 0.5505]]], [[[0.1723, 0.3275], [0.6525, 0.7963]]], 2, 1, Dot19942), 
LZer59496 = zero_padding1D_layer(Dot19942, 2, 0, Zer59496), 
LGlo91416 = global_max_pool1D_layer([[[1.6209, 1.9141]]], Glo91416), 
LRes24646 = reshape_layer(Glo91416, [2, 1], Res24646), 
LZer48382 = zero_padding1D_layer(Res24646, 1, 1, Zer48382), 
LCon22127 = concatenate_layer([Zer48382,[[[0.4782], [0.4623], [0.1157], [0.6141]]]], 2, Con22127), 
LAve31872 = average_layer([Zer59496,Con22127], Ave31872), 
LSub62670 = subtract_layer(Con15989,Ave31872, Sub62670), 
LRes56706 = reshape_layer(Sub62670, [4, 2, 1], Res56706), 
LZer84515 = zero_padding2D_layer(Res56706, 2, 0, 1, 0, Zer84515), 
LCon87140 = concatenate_layer([Zer84515,[[[[0.9671, 0.396], [0.0932, 0.0176], [0.5435, 0.538]], [[0.5736, 0.9652], [0.9441, 0.6765], [0.2884, 0.4325]], [[0.4059, 0.8249], [0.7896, 0.9771], [0.4565, 0.3566]], [[0.6889, 0.4375], [0.5446, 0.4875], [0.4563, 0.4564]], [[0.2473, 0.2793], [0.8591, 0.5414], [0.7457, 0.5156]], [[0.568, 0.8889], [0.6566, 0.8342], [0.9297, 0.4247]]]]], 3, Con87140), 
LAdd98817 = add_layer([[[[[0.2427, 0.181]]]], [[[[0.2685, 0.8237]]]]], Add98817), 
LRes30074 = reshape_layer(Add98817, [1, 2], Res30074), 
LFla85171 = flatten_layer(Res30074, Fla85171), 
LCon4331 = concatenate_layer([Fla85171,[[0.1709, 0.5419, 0.8189, 0.5791]]], 1, Con4331), 
LFla97746 = flatten_layer([[[1.3357, 1.7311], [1.8432, 1.2888], [1.6509, 1.6185]]], Fla97746), 
LMul912 = multiply_layer([Con4331,Fla97746], Mul912), 
LRes65511 = reshape_layer(Mul912, [6, 1], Res65511), 
LRes77224 = reshape_layer(Res65511, [6, 1, 1], Res77224), 
LCon78873 = concatenate_layer([Res77224,[[[[0.1623, 0.947]], [[0.4576, 0.6605]], [[0.8221, 0.3913]], [[0.7134, 0.4754]], [[0.0597, 0.3238]], [[0.4625, 0.1363]]]]], 3, Con78873), 
LCro62896 = cropping2D_layer([[[[1.9968, 1.3933, 1.1953]], [[1.7079, 1.4047, 1.1863]], [[1.557, 1.9877, 1.2273]], [[1.8991, 1.099, 1.699]]]], 2, 1, 0, 0, Cro62896), 
LZer52014 = zero_padding2D_layer(Cro62896, 5, 0, 0, 0, Zer52014), 
LMul60482 = multiply_layer([Con78873,Zer52014], Mul60482), 
LZer32828 = zero_padding2D_layer(Mul60482, 0, 0, 2, 0, Zer32828), 
LMul82277 = multiply_layer([Con87140,Zer32828], Mul82277), 
exec_layers([LAve61848,LRes43247,LRes71168,LZer87272,LCon15989,LDot19942,LZer59496,LGlo91416,LRes24646,LZer48382,LCon22127,LAve31872,LSub62670,LRes56706,LZer84515,LCon87140,LAdd98817,LRes30074,LFla85171,LCon4331,LFla97746,LMul912,LRes65511,LRes77224,LCon78873,LCro62896,LZer52014,LMul60482,LZer32828,LMul82277],["Ave61848","Res43247","Res71168","Zer87272","Con15989","Dot19942","Zer59496","Glo91416","Res24646","Zer48382","Con22127","Ave31872","Sub62670","Res56706","Zer84515","Con87140","Add98817","Res30074","Fla85171","Con4331","Fla97746","Mul912","Res65511","Res77224","Con78873","Cro62896","Zer52014","Mul60482","Zer32828","Mul82277"],Mul82277,"Mul82277")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.5495104, 0.8546837, 0.0710442]]]]

Expected (Unparsed): [[[[0,0.0,0.0],[0,0.0,0.0],[0.0,0.0,0.0]],[[0,0.0,0.0],[0,0.0,0.0],[0.0,0.0,0.0]],[[0,0.0,0.0],[0,0.0,0.0],[-0.0,0.0,0.0]],[[0,0.0,0.0],[-0.0,0.0,0.0],[-0.0,0.0,0.0]],[[0,0.0,0.0],[-0.0,0.0,0.0],[-0.0,0.0,0.0]],[[0,0.0,0.0],[0.0,0.0,0.0],[0.5495103298352938,0.854683669125,0.07104423645300001]]]]

Actual:   [[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [-0, 0, 0]], [[0, 0, 0], [-0, 0, 0], [-0, 0, 0]], [[0, 0, 0], [-0, 0, 0], [-0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0.5496, 0.8547, 0.0711]]]]

Expected: [[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [-0, 0, 0]], [[0, 0, 0], [-0, 0, 0], [-0, 0, 0]], [[0, 0, 0], [-0, 0, 0], [-0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0.5496, 0.8547, 0.0711]]]]