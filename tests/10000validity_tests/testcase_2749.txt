import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul64892 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul64892 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add59239 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add59239 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con24076 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Dot27289 = tf.keras.layers.Input(shape=([2]))
in1Dot27289 = tf.keras.layers.Input(shape=([2]))
in0Con14773 = tf.keras.layers.Input(shape=([1, 3]))

Mul64892 = keras.layers.Multiply(name = 'Mul64892', )([in0Mul64892,in1Mul64892])
Lay33283 = keras.layers.LayerNormalization(axis=1, epsilon=2.94166730735006, name = 'Lay33283', )(Mul64892)
Res33283 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res33283', )(Lay33283)
Con70730 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con70730', )(Res33283)
Zer44400 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer44400', )(Con70730)
Add59239 = keras.layers.Add(name = 'Add59239', )([in0Add59239,in1Add59239])
Con24076 = keras.layers.Concatenate(axis=4, name = 'Con24076', )([Add59239,in0Con24076])
Ave79405 = keras.layers.Average(name = 'Ave79405', )([Zer44400,Con24076])
Res55505 = keras.layers.Reshape((1, 1, 4), name = 'Res55505', )(Ave79405)
Res35500 = keras.layers.Reshape((1, 4), name = 'Res35500', )(Res55505)
Dot27289 = keras.layers.Dot(axes=(1, 1), name = 'Dot27289', )([in0Dot27289,in1Dot27289])
Res79643 = keras.layers.Reshape((1, 1), name = 'Res79643', )(Dot27289)
Per55688 = keras.layers.Permute((1,2), name = 'Per55688',)(Res79643)
Con14773 = keras.layers.Concatenate(axis=2, name = 'Con14773', )([Per55688,in0Con14773])
Mul90624 = keras.layers.Multiply(name = 'Mul90624', )([Res35500,Con14773])
model = tf.keras.models.Model(inputs=[in0Mul64892,in1Mul64892,in0Add59239,in1Add59239,in0Con24076,in0Dot27289,in1Dot27289,in0Con14773], outputs=Mul90624)
w = model.get_layer('Con70730').get_weights() 
w[0] = np.array([[[[[0.3034], [0.0181]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con70730').set_weights(w) 
in0Mul64892 = tf.constant([[[[0.2899]]]])
in1Mul64892 = tf.constant([[[[0.8544]]]])
in0Add59239 = tf.constant([[[[[0.8733], [0.7552]]]]])
in1Add59239 = tf.constant([[[[[0.484], [0.6521]]]]])
in0Con24076 = tf.constant([[[[[0.5144], [0.6513]]]]])
in0Dot27289 = tf.constant([[0.4695, 0.0045]])
in1Dot27289 = tf.constant([[0.8253, 0.3848]])
in0Con14773 = tf.constant([[[0.8441, 0.1411, 0.7609]]])
print (np.array2string(model.predict([in0Mul64892,in1Mul64892,in0Add59239,in1Add59239,in0Con24076,in0Dot27289,in1Dot27289,in0Con14773],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul90624.png')

LMul64892 = multiply_layer([[[[[0.2899]]]], [[[[0.8544]]]]], Mul64892), 
LLay33283 = layer_normalization_layer(Mul64892, 1, 2.94166730735006, Lay33283), 
LRes33283 = reshape_layer(Lay33283, [1, 1, 1, 1], Res33283), 
LCon70730 = conv3D_transpose_layer(Res33283, 1, 1, 1,[[[[[0.3034], [0.0181]]]]],[0, 0], 1, 1, 1, false, Con70730), 
LZer44400 = zero_padding3D_layer(Con70730, 0, 0, 0, 0, 1, 0, Zer44400), 
LAdd59239 = add_layer([[[[[[0.8733], [0.7552]]]]], [[[[[0.484], [0.6521]]]]]], Add59239), 
LCon24076 = concatenate_layer([Add59239,[[[[[0.5144], [0.6513]]]]]], 4, Con24076), 
LAve79405 = average_layer([Zer44400,Con24076], Ave79405), 
LRes55505 = reshape_layer(Ave79405, [1, 1, 4], Res55505), 
LRes35500 = reshape_layer(Res55505, [1, 4], Res35500), 
LDot27289 = dot_layer([[0.4695, 0.0045]], [[0.8253, 0.3848]], 1, 1, Dot27289), 
LRes79643 = reshape_layer(Dot27289, [1, 1], Res79643), 
LPer55688 = permute_layer(Res79643, 1,2, Per55688), 
LCon14773 = concatenate_layer([Per55688,[[[0.8441, 0.1411, 0.7609]]]], 2, Con14773), 
LMul90624 = multiply_layer([Res35500,Con14773], Mul90624), 
exec_layers([LMul64892,LLay33283,LRes33283,LCon70730,LZer44400,LAdd59239,LCon24076,LAve79405,LRes55505,LRes35500,LDot27289,LRes79643,LPer55688,LCon14773,LMul90624],["Mul64892","Lay33283","Res33283","Con70730","Zer44400","Add59239","Con24076","Ave79405","Res55505","Res35500","Dot27289","Res79643","Per55688","Con14773","Mul90624"],Mul90624,"Mul90624")

Actual (Unparsed): [[[0.2641373, 0.2171025, 0.0992850, 0.2477871]]]

Expected (Unparsed): [[[0.2641373325675,0.21710251999999997,0.099285015,0.247787085]]]

Actual:   [[[0.2642, 0.2172, 0.0993, 0.2478]]]

Expected: [[[0.2642, 0.2172, 0.0993, 0.2478]]]