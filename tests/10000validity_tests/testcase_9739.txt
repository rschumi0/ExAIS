import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo7845 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Glo7845 = keras.layers.GlobalMaxPool3D(name = 'Glo7845', )(in0Glo7845)
Res43541 = keras.layers.Reshape((2, 1), name = 'Res43541', )(Glo7845)
PRe78412 = keras.layers.PReLU(name = 'PRe78412', )(Res43541)
Ave12119 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave12119', )(PRe78412)
model = tf.keras.models.Model(inputs=[in0Glo7845], outputs=Ave12119)
w = model.get_layer('PRe78412').get_weights() 
w[0] = np.array([[0.1538], [0.2624]])
model.get_layer('PRe78412').set_weights(w) 
in0Glo7845 = tf.constant([[[[[1.0043, 1.9559]], [[1.0118, 1.1604]]]]])
print (np.array2string(model.predict([in0Glo7845],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave12119.png')

LGlo7845 = global_max_pool3D_layer([[[[[1.0043, 1.9559]], [[1.0118, 1.1604]]]]], Glo7845), 
LRes43541 = reshape_layer(Glo7845, [2, 1], Res43541), 
LPRe78412 = prelu_layer(Res43541, [[0.1538], [0.2624]], PRe78412), 
LAve12119 = average_pooling1D_layer(PRe78412, 1, 1, true, Ave12119), 
exec_layers([LGlo7845,LRes43541,LPRe78412,LAve12119],["Glo7845","Res43541","PRe78412","Ave12119"],Ave12119,"Ave12119")

Actual (Unparsed): [[[1.0118001], [1.9559000]]]

Expected (Unparsed): [[[1.0118],[1.9559]]]

Actual:   [[[1.0119], [1.9559]]]

Expected: [[[1.0118], [1.9559]]]