import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sim7487 = tf.keras.layers.Input(shape=([3, 1]))
in0Con28470 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot55318 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot55318 = tf.keras.layers.Input(shape=([2, 3]))

Sim7487 = keras.layers.SimpleRNN(1,name = 'Sim7487', )(in0Sim7487)
Res11401 = keras.layers.Reshape((1, 1), name = 'Res11401', )(Sim7487)
Con28470 = keras.layers.Concatenate(axis=2, name = 'Con28470', )([Res11401,in0Con28470])
Dot55318 = keras.layers.Dot(axes=(2, 2), name = 'Dot55318', )([in0Dot55318,in1Dot55318])
Cro19152 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro19152', )(Dot55318)
Add27327 = keras.layers.Add(name = 'Add27327', )([Con28470,Cro19152])
model = tf.keras.models.Model(inputs=[in0Sim7487,in0Con28470,in0Dot55318,in1Dot55318], outputs=Add27327)
w = model.get_layer('Sim7487').get_weights() 
w[0] = np.array([[10]])
w[1] = np.array([[7]])
w[2] = np.array([2])
model.get_layer('Sim7487').set_weights(w) 
in0Sim7487 = tf.constant([[[1], [8], [10]]])
in0Con28470 = tf.constant([[[0.5584]]])
in0Dot55318 = tf.constant([[[0.6348, 0.7403, 0.5833], [0.2891, 0.6768, 0.1898]]])
in1Dot55318 = tf.constant([[[0.5201, 0.3123, 0.2164], [0.7834, 0.9845, 0.5566]]])
print (np.array2string(model.predict([in0Sim7487,in0Con28470,in0Dot55318,in1Dot55318],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add27327.png')

LSim7487 = simple_rnn_layer([[[1], [8], [10]]],[[10]],[[7]],[2], Sim7487), 
LRes11401 = reshape_layer(Sim7487, [1, 1], Res11401), 
LCon28470 = concatenate_layer([Res11401,[[[0.5584]]]], 2, Con28470), 
LDot55318 = dot_layer([[[0.6348, 0.7403, 0.5833], [0.2891, 0.6768, 0.1898]]], [[[0.5201, 0.3123, 0.2164], [0.7834, 0.9845, 0.5566]]], 2, 2, Dot55318), 
LCro19152 = cropping1D_layer(Dot55318, 1, 0, Cro19152), 
LAdd27327 = add_layer([Con28470,Cro19152], Add27327), 
exec_layers([LSim7487,LRes11401,LCon28470,LDot55318,LCro19152,LAdd27327],["Sim7487","Res11401","Con28470","Dot55318","Cro19152","Add27327"],Add27327,"Add27327")

Actual (Unparsed): [[[1.4027983, 1.5568332]]]

Expected (Unparsed): [[[1.40279827,1.5568332200000001]]]

Actual:   [[[1.4028, 1.5569]]]

Expected: [[[1.4028, 1.5569]]]