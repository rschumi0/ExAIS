import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max30721 = tf.keras.layers.Input(shape=([1, 2]))
in1Max30721 = tf.keras.layers.Input(shape=([1, 2]))
in0Mul33054 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul33054 = tf.keras.layers.Input(shape=([1, 1]))

Max30721 = keras.layers.Maximum(name = 'Max30721', )([in0Max30721,in1Max30721])
Res13931 = keras.layers.Reshape((1, 2, 1), name = 'Res13931', )(Max30721)
Cro99297 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro99297', )(Res13931)
Res84799 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res84799', )(Cro99297)
Zer42899 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (2, 0)), name = 'Zer42899', )(Res84799)
Mul33054 = keras.layers.Multiply(name = 'Mul33054', )([in0Mul33054,in1Mul33054])
Res23693 = keras.layers.Reshape((1, 1, 1), name = 'Res23693', )(Mul33054)
Res15383 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res15383', )(Res23693)
Zer35327 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer35327', )(Res15383)
Mul49720 = keras.layers.Multiply(name = 'Mul49720', )([Zer42899,Zer35327])
model = tf.keras.models.Model(inputs=[in0Max30721,in1Max30721,in0Mul33054,in1Mul33054], outputs=Mul49720)
in0Max30721 = tf.constant([[[0.4094, 0.0468]]])
in1Max30721 = tf.constant([[[0.4758, 0.3123]]])
in0Mul33054 = tf.constant([[[0.2273]]])
in1Mul33054 = tf.constant([[[0.956]]])
print (np.array2string(model.predict([in0Max30721,in1Max30721,in0Mul33054,in1Mul33054],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul49720.png')

LMax30721 = maximum_layer([[[[0.4094, 0.0468]]], [[[0.4758, 0.3123]]]], Max30721), 
LRes13931 = reshape_layer(Max30721, [1, 2, 1], Res13931), 
LCro99297 = cropping2D_layer(Res13931, 0, 0, 1, 0, Cro99297), 
LRes84799 = reshape_layer(Cro99297, [1, 1, 1, 1], Res84799), 
LZer42899 = zero_padding3D_layer(Res84799, 2, 0, 2, 0, 2, 0, Zer42899), 
LMul33054 = multiply_layer([[[[0.2273]]], [[[0.956]]]], Mul33054), 
LRes23693 = reshape_layer(Mul33054, [1, 1, 1], Res23693), 
LRes15383 = reshape_layer(Res23693, [1, 1, 1, 1], Res15383), 
LZer35327 = zero_padding3D_layer(Res15383, 1, 1, 1, 1, 1, 1, Zer35327), 
LMul49720 = multiply_layer([Zer42899,Zer35327], Mul49720), 
exec_layers([LMax30721,LRes13931,LCro99297,LRes84799,LZer42899,LMul33054,LRes23693,LRes15383,LZer35327,LMul49720],["Max30721","Res13931","Cro99297","Res84799","Zer42899","Mul33054","Res23693","Res15383","Zer35327","Mul49720"],Mul49720,"Mul49720")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0.0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]