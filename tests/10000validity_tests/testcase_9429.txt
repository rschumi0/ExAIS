import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub53399 = tf.keras.layers.Input(shape=([3]))
in1Sub53399 = tf.keras.layers.Input(shape=([3]))

Sub53399 = keras.layers.Subtract(name = 'Sub53399', )([in0Sub53399,in1Sub53399])
Res68479 = keras.layers.Reshape((3, 1), name = 'Res68479', )(Sub53399)
Res46269 = keras.layers.Reshape((3, 1, 1), name = 'Res46269', )(Res68479)
Ave98543 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave98543', )(Res46269)
model = tf.keras.models.Model(inputs=[in0Sub53399,in1Sub53399], outputs=Ave98543)
in0Sub53399 = tf.constant([[0.7423, 0.1062, 0.831]])
in1Sub53399 = tf.constant([[0.8228, 0.0945, 0.9762]])
print (np.array2string(model.predict([in0Sub53399,in1Sub53399],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave98543.png')

LSub53399 = subtract_layer([[0.7423, 0.1062, 0.831]], [[0.8228, 0.0945, 0.9762]], Sub53399), 
LRes68479 = reshape_layer(Sub53399, [3, 1], Res68479), 
LRes46269 = reshape_layer(Res68479, [3, 1, 1], Res46269), 
LAve98543 = average_pooling2D_layer(Res46269, 1, 1, Ave98543), 
exec_layers([LSub53399,LRes68479,LRes46269,LAve98543],["Sub53399","Res68479","Res46269","Ave98543"],Ave98543,"Ave98543")

Actual (Unparsed): [[[[-0.0805000]], [[0.0117000]], [[-0.1452000]]]]

Expected (Unparsed): [[[[-0.08050000000000002]],[[0.011700000000000002]],[[-0.1452]]]]

Actual:   [[[[-0.0805]], [[0.0117]], [[-0.1452]]]]

Expected: [[[[-0.0805]], [[0.0118]], [[-0.1452]]]]