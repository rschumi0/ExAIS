import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sim3935 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave7253 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave7253 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Min17335 = tf.keras.layers.Input(shape=([1, 1]))
in1Min17335 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave19660 = tf.keras.layers.Input(shape=([1, 2, 1]))

Sim3935 = keras.layers.SimpleRNN(1,name = 'Sim3935', )(in0Sim3935)
Res69315 = keras.layers.Reshape((1, 1), name = 'Res69315', )(Sim3935)
Res80959 = keras.layers.Reshape((1, 1, 1), name = 'Res80959', )(Res69315)
Zer77256 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer77256', )(Res80959)
Ave7253 = keras.layers.Average(name = 'Ave7253', )([in0Ave7253,in1Ave7253])
ELU15538 = keras.layers.ELU(alpha=-0.2783244915084673, name = 'ELU15538', )(Ave7253)
Res97586 = keras.layers.Reshape((1, 1), name = 'Res97586', )(ELU15538)
Fla55990 = keras.layers.Flatten(name = 'Fla55990', )(Res97586)
Min17335 = keras.layers.Minimum(name = 'Min17335', )([in0Min17335,in1Min17335])
Res68385 = keras.layers.Reshape((1, 1, 1), name = 'Res68385', )(Min17335)
Glo42236 = keras.layers.GlobalAveragePooling2D(name = 'Glo42236', )(Res68385)
Max1892 = keras.layers.Maximum(name = 'Max1892', )([Fla55990,Glo42236])
Res41269 = keras.layers.Reshape((1, 1), name = 'Res41269', )(Max1892)
Res22610 = keras.layers.Reshape((1, 1, 1), name = 'Res22610', )(Res41269)
Zer78795 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer78795', )(Res22610)
Ave19660 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 1), padding='same', name = 'Ave19660', )(in0Ave19660)
Ave92512 = keras.layers.Average(name = 'Ave92512', )([Zer78795,Ave19660])
Add42680 = keras.layers.Add(name = 'Add42680', )([Zer77256,Ave92512])
model = tf.keras.models.Model(inputs=[in0Sim3935,in0Ave7253,in1Ave7253,in0Min17335,in1Min17335,in0Ave19660], outputs=Add42680)
w = model.get_layer('Sim3935').get_weights() 
w[0] = np.array([[2], [8]])
w[1] = np.array([[3]])
w[2] = np.array([1])
model.get_layer('Sim3935').set_weights(w) 
in0Sim3935 = tf.constant([[[9, 7]]])
in0Ave7253 = tf.constant([[[[0.6964]]]])
in1Ave7253 = tf.constant([[[[0.2951]]]])
in0Min17335 = tf.constant([[[0.369]]])
in1Min17335 = tf.constant([[[0.3888]]])
in0Ave19660 = tf.constant([[[[1.8025], [1.4814]]]])
print (np.array2string(model.predict([in0Sim3935,in0Ave7253,in1Ave7253,in0Min17335,in1Min17335,in0Ave19660],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add42680.png')

LSim3935 = simple_rnn_layer([[[9, 7]]],[[2], [8]],[[3]],[1], Sim3935), 
LRes69315 = reshape_layer(Sim3935, [1, 1], Res69315), 
LRes80959 = reshape_layer(Res69315, [1, 1, 1], Res80959), 
LZer77256 = zero_padding2D_layer(Res80959, 0, 0, 1, 0, Zer77256), 
LAve7253 = average_layer([[[[[0.6964]]]], [[[[0.2951]]]]], Ave7253), 
LELU15538 = elu_layer(Ave7253, -0.2783244915084673, ELU15538), 
LRes97586 = reshape_layer(ELU15538, [1, 1], Res97586), 
LFla55990 = flatten_layer(Res97586, Fla55990), 
LMin17335 = minimum_layer([[[[0.369]]], [[[0.3888]]]], Min17335), 
LRes68385 = reshape_layer(Min17335, [1, 1, 1], Res68385), 
LGlo42236 = global_average_pooling2D_layer(Res68385, Glo42236), 
LMax1892 = maximum_layer([Fla55990,Glo42236], Max1892), 
LRes41269 = reshape_layer(Max1892, [1, 1], Res41269), 
LRes22610 = reshape_layer(Res41269, [1, 1, 1], Res22610), 
LZer78795 = zero_padding2D_layer(Res22610, 0, 0, 1, 0, Zer78795), 
LAve19660 = average_pooling2D_layer([[[[1.8025], [1.4814]]]], 1, 2, 1, 1, true, Ave19660), 
LAve92512 = average_layer([Zer78795,Ave19660], Ave92512), 
LAdd42680 = add_layer([Zer77256,Ave92512], Add42680), 
exec_layers([LSim3935,LRes69315,LRes80959,LZer77256,LAve7253,LELU15538,LRes97586,LFla55990,LMin17335,LRes68385,LGlo42236,LMax1892,LRes41269,LRes22610,LZer78795,LAve19660,LAve92512,LAdd42680],["Sim3935","Res69315","Res80959","Zer77256","Ave7253","ELU15538","Res97586","Fla55990","Min17335","Res68385","Glo42236","Max1892","Res41269","Res22610","Zer78795","Ave19660","Ave92512","Add42680"],Add42680,"Add42680")

Actual (Unparsed): [[[[0.8209750], [1.9885750]]]]

Expected (Unparsed): [[[[0.820975],[1.988575]]]]

Actual:   [[[[0.821], [1.9886]]]]

Expected: [[[[0.821], [1.9886]]]]