import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_45327 = tf.keras.layers.Input(shape=([2, 3, 3]))

Up_45327 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_45327', )(in0Up_45327)
Res39491 = keras.layers.Reshape((4, 18), name = 'Res39491', )(Up_45327)
Ave24876 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='same', name = 'Ave24876', )(Res39491)
Bat3686 = keras.layers.BatchNormalization(axis=1, epsilon=0.6992142219679427,  name = 'Bat3686', )(Ave24876)
model = tf.keras.models.Model(inputs=[in0Up_45327], outputs=Bat3686)
w = model.get_layer('Bat3686').get_weights() 
w[0] = np.array([0.5733, 0.801, 0.5952, 0.2937])
w[1] = np.array([0.4089, 0.9609, 0.0201, 0.2624])
w[2] = np.array([0.822, 0.6024, 0.2687, 0.2537])
w[3] = np.array([0.0082, 0.4247, 0.3323, 0.4918])
model.get_layer('Bat3686').set_weights(w) 
in0Up_45327 = tf.constant([[[[1.9245, 1.8195, 1.4425], [1.3887, 1.3071, 1.251], [1.7629, 1.7861, 1.6382]], [[1.5295, 1.5375, 1.1609], [1.3441, 1.5142, 1.8291], [1.5049, 1.584, 1.4085]]]])
print (np.array2string(model.predict([in0Up_45327],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Bat3686.png')

LUp_45327 = up_sampling2D_layer([[[[1.9245, 1.8195, 1.4425], [1.3887, 1.3071, 1.251], [1.7629, 1.7861, 1.6382]], [[1.5295, 1.5375, 1.1609], [1.3441, 1.5142, 1.8291], [1.5049, 1.584, 1.4085]]]], 2, 2, Up_45327), 
LRes39491 = reshape_layer(Up_45327, [4, 18], Res39491), 
LAve24876 = average_pooling1D_layer(Res39491, 2, 1, true, Ave24876), 
LBat3686 = batch_normalization_layer(Ave24876, 1, 0.6992142219679427, [0.5733, 0.801, 0.5952, 0.2937], [0.4089, 0.9609, 0.0201, 0.2624], [0.822, 0.6024, 0.2687, 0.2537], [0.0082, 0.4247, 0.3323, 0.4918], Bat3686), 
exec_layers([LUp_45327,LRes39491,LAve24876,LBat3686],["Up_45327","Res39491","Ave24876","Bat3686"],Bat3686,"Bat3686")

Actual (Unparsed): [[[1.1603908, 1.0888202, 0.8318479, 1.1603908, 1.0888202, 0.8318479, 0.7951765, 0.7395560, 0.7013168, 0.7951765, 0.7395560, 0.7013168, 1.0502403, 1.0660540, 0.9652418, 1.0502403, 1.0660540, 0.9652418], [1.8105969, 1.7739524, 1.4892594, 1.8105969, 1.7739524, 1.4892594, 1.5381438, 1.5715771, 1.6693459, 1.5381438, 1.5715771, 1.6693459, 1.7402547, 1.7789013, 1.6567281, 1.7402547, 1.7789013, 1.6567281], [0.7589759, 0.7636642, 0.5429625, 0.7589759, 0.7636642, 0.5429625, 0.6503246, 0.7500095, 0.9345527, 0.6503246, 0.7500095, 0.9345527, 0.7445594, 0.7909150, 0.6880654, 0.7445594, 0.7909150, 0.6880654], [0.6057429, 0.6078959, 0.5065454, 0.6057429, 0.6078959, 0.5065454, 0.5558481, 0.6016254, 0.6863712, 0.5558481, 0.6016254, 0.6863712, 0.5991225, 0.6204099, 0.5731794, 0.5991225, 0.6204099, 0.5731794]]]

Expected (Unparsed): [[[1.1603907626075332,1.088820213787768,0.8318478623110879,1.1603907626075332,1.088820213787768,0.8318478623110879,0.7951764763443893,0.7395559355473146,0.7013168137493258,0.7951764763443893,0.7395559355473146,0.7013168137493258,1.0502402798525423,1.0660539630203383,0.9652417328256406,1.0502402798525423,1.0660539630203383,0.9652417328256406],[1.8105968570867783,1.7739524523484635,1.4892594274949174,1.8105968570867783,1.7739524523484635,1.4892594274949174,1.5381438189705663,1.5715771160771728,1.6693458990284702,1.5381438189705663,1.5715771160771728,1.6693458990284702,1.7402547110839515,1.7789013358749783,1.6567281349227003,1.7402547110839515,1.7789013358749783,1.6567281349227003],[0.758975919124415,0.7636642181036308,0.5429625436570455,0.758975919124415,0.7636642181036308,0.5429625436570455,0.650324590281088,0.7500095473266647,0.9345527158960477,0.650324590281088,0.7500095473266647,0.9345527158960477,0.7445593997633262,0.7909149559203228,0.6880653970637756,0.7445593997633262,0.7909149559203228,0.6880653970637756],[0.6057428996686196,0.6078958571833937,0.5065453821753971,0.6057428996686196,0.6078958571833937,0.5065453821753971,0.5558481092637269,0.6016253684216137,0.6863711585969142,0.5558481092637269,0.6016253684216137,0.6863711585969142,0.5991225553106887,0.6204099227380189,0.5731794172576594,0.5991225553106887,0.6204099227380189,0.5731794172576594]]]

Actual:   [[[1.1604, 1.0889, 0.8319, 1.1604, 1.0889, 0.8319, 0.7952, 0.7396, 0.7014, 0.7952, 0.7396, 0.7014, 1.0503, 1.0661, 0.9653, 1.0503, 1.0661, 0.9653], [1.8106, 1.774, 1.4893, 1.8106, 1.774, 1.4893, 1.5382, 1.5716, 1.6694, 1.5382, 1.5716, 1.6694, 1.7403, 1.779, 1.6568, 1.7403, 1.779, 1.6568], [0.759, 0.7637, 0.543, 0.759, 0.7637, 0.543, 0.6504, 0.7501, 0.9346, 0.6504, 0.7501, 0.9346, 0.7446, 0.791, 0.6881, 0.7446, 0.791, 0.6881], [0.6058, 0.6079, 0.5066, 0.6058, 0.6079, 0.5066, 0.5559, 0.6017, 0.6864, 0.5559, 0.6017, 0.6864, 0.5992, 0.6205, 0.5732, 0.5992, 0.6205, 0.5732]]]

Expected: [[[1.1604, 1.0889, 0.8319, 1.1604, 1.0889, 0.8319, 0.7952, 0.7396, 0.7014, 0.7952, 0.7396, 0.7014, 1.0503, 1.0661, 0.9653, 1.0503, 1.0661, 0.9653], [1.8106, 1.774, 1.4893, 1.8106, 1.774, 1.4893, 1.5382, 1.5716, 1.6694, 1.5382, 1.5716, 1.6694, 1.7403, 1.779, 1.6568, 1.7403, 1.779, 1.6568], [0.759, 0.7637, 0.543, 0.759, 0.7637, 0.543, 0.6504, 0.7501, 0.9346, 0.6504, 0.7501, 0.9346, 0.7446, 0.791, 0.6881, 0.7446, 0.791, 0.6881], [0.6058, 0.6079, 0.5066, 0.6058, 0.6079, 0.5066, 0.5559, 0.6017, 0.6864, 0.5559, 0.6017, 0.6864, 0.5992, 0.6205, 0.5732, 0.5992, 0.6205, 0.5732]]]