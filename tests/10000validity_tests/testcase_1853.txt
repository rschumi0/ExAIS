import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave44923 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Ave44923 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Sub64220 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub64220 = tf.keras.layers.Input(shape=([2, 2]))
in0Max41356 = tf.keras.layers.Input(shape=([2, 2]))
in1Max41356 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot16845 = tf.keras.layers.Input(shape=([3]))
in1Dot16845 = tf.keras.layers.Input(shape=([3]))
in0Con25796 = tf.keras.layers.Input(shape=([1]))
in0Con46969 = tf.keras.layers.Input(shape=([2]))

Ave44923 = keras.layers.Average(name = 'Ave44923', )([in0Ave44923,in1Ave44923])
Res70182 = keras.layers.Reshape((1, 2, 2), name = 'Res70182', )(Ave44923)
Res41112 = keras.layers.Reshape((1, 4), name = 'Res41112', )(Res70182)
Fla82540 = keras.layers.Flatten(name = 'Fla82540', )(Res41112)
Sub64220 = keras.layers.Subtract(name = 'Sub64220', )([in0Sub64220,in1Sub64220])
Max65018 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max65018', )(Sub64220)
Fla4360 = keras.layers.Flatten(name = 'Fla4360', )(Max65018)
Max41356 = keras.layers.Maximum(name = 'Max41356', )([in0Max41356,in1Max41356])
Res49381 = keras.layers.Reshape((2, 2, 1), name = 'Res49381', )(Max41356)
Res84707 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res84707', )(Res49381)
Cro7935 = keras.layers.Cropping3D(cropping=((1, 0), (0, 0), (0, 0)), name = 'Cro7935', )(Res84707)
Res45989 = keras.layers.Reshape((1, 2, 1), name = 'Res45989', )(Cro7935)
Res70776 = keras.layers.Reshape((1, 2), name = 'Res70776', )(Res45989)
Fla82838 = keras.layers.Flatten(name = 'Fla82838', )(Res70776)
Dot16845 = keras.layers.Dot(axes=(1, 1), name = 'Dot16845', )([in0Dot16845,in1Dot16845])
Con25796 = keras.layers.Concatenate(axis=1, name = 'Con25796', )([Dot16845,in0Con25796])
Mul69244 = keras.layers.Multiply(name = 'Mul69244', )([Fla82838,Con25796])
Con46969 = keras.layers.Concatenate(axis=1, name = 'Con46969', )([Mul69244,in0Con46969])
Ave9953 = keras.layers.Average(name = 'Ave9953', )([Fla4360,Con46969])
Mul32440 = keras.layers.Multiply(name = 'Mul32440', )([Fla82540,Ave9953])
model = tf.keras.models.Model(inputs=[in0Ave44923,in1Ave44923,in0Sub64220,in1Sub64220,in0Max41356,in1Max41356,in0Dot16845,in1Dot16845,in0Con25796,in0Con46969], outputs=Mul32440)
in0Ave44923 = tf.constant([[[[[0.9315], [0.0383]], [[0.0957], [0.9468]]]]])
in1Ave44923 = tf.constant([[[[[0.9148], [0.0129]], [[0.8585], [0.7979]]]]])
in0Sub64220 = tf.constant([[[0.1323, 0.6965], [0.0412, 0.3125]]])
in1Sub64220 = tf.constant([[[0.4277, 0.8606], [0.1927, 0.9832]]])
in0Max41356 = tf.constant([[[0.0835, 0.4105], [0.5725, 0.6756]]])
in1Max41356 = tf.constant([[[0.4635, 0.328], [0.1317, 0.6263]]])
in0Dot16845 = tf.constant([[0.0143, 0.7824, 0.1774]])
in1Dot16845 = tf.constant([[0.3433, 0.7757, 0.0273]])
in0Con25796 = tf.constant([[0.9791]])
in0Con46969 = tf.constant([[0.1268, 0.7747]])
print (np.array2string(model.predict([in0Ave44923,in1Ave44923,in0Sub64220,in1Sub64220,in0Max41356,in1Max41356,in0Dot16845,in1Dot16845,in0Con25796,in0Con46969],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul32440.png')

LAve44923 = average_layer([[[[[[0.9315], [0.0383]], [[0.0957], [0.9468]]]]], [[[[[0.9148], [0.0129]], [[0.8585], [0.7979]]]]]], Ave44923), 
LRes70182 = reshape_layer(Ave44923, [1, 2, 2], Res70182), 
LRes41112 = reshape_layer(Res70182, [1, 4], Res41112), 
LFla82540 = flatten_layer(Res41112, Fla82540), 
LSub64220 = subtract_layer([[[0.1323, 0.6965], [0.0412, 0.3125]]], [[[0.4277, 0.8606], [0.1927, 0.9832]]], Sub64220), 
LMax65018 = max_pool1D_layer(Sub64220, 1, 1, false, Max65018), 
LFla4360 = flatten_layer(Max65018, Fla4360), 
LMax41356 = maximum_layer([[[[0.0835, 0.4105], [0.5725, 0.6756]]], [[[0.4635, 0.328], [0.1317, 0.6263]]]], Max41356), 
LRes49381 = reshape_layer(Max41356, [2, 2, 1], Res49381), 
LRes84707 = reshape_layer(Res49381, [2, 2, 1, 1], Res84707), 
LCro7935 = cropping3D_layer(Res84707, 1, 0, 0, 0, 0, 0, Cro7935), 
LRes45989 = reshape_layer(Cro7935, [1, 2, 1], Res45989), 
LRes70776 = reshape_layer(Res45989, [1, 2], Res70776), 
LFla82838 = flatten_layer(Res70776, Fla82838), 
LDot16845 = dot_layer([[0.0143, 0.7824, 0.1774]], [[0.3433, 0.7757, 0.0273]], 1, 1, Dot16845), 
LCon25796 = concatenate_layer([Dot16845,[[0.9791]]], 1, Con25796), 
LMul69244 = multiply_layer([Fla82838,Con25796], Mul69244), 
LCon46969 = concatenate_layer([Mul69244,[[0.1268, 0.7747]]], 1, Con46969), 
LAve9953 = average_layer([Fla4360,Con46969], Ave9953), 
LMul32440 = multiply_layer([Fla82540,Ave9953], Mul32440), 
exec_layers([LAve44923,LRes70182,LRes41112,LFla82540,LSub64220,LMax65018,LFla4360,LMax41356,LRes49381,LRes84707,LCro7935,LRes45989,LRes70776,LFla82838,LDot16845,LCon25796,LMul69244,LCon46969,LAve9953,LMul32440],["Ave44923","Res70182","Res41112","Fla82540","Sub64220","Max65018","Fla4360","Max41356","Res49381","Res84707","Cro7935","Res45989","Res70776","Fla82838","Dot16845","Con25796","Mul69244","Con46969","Ave9953","Mul32440"],Mul32440,"Mul32440")

Actual (Unparsed): [[0.0266042, 0.0063665, -0.0058922, 0.0453622]]

Expected (Unparsed): [[0.026604161546064372,0.006366463488,-0.005892185000000007,0.04536220000000004]]

Actual:   [[0.0267, 0.0064, -0.0058, 0.0454]]

Expected: [[0.0267, 0.0064, -0.0058, 0.0454]]