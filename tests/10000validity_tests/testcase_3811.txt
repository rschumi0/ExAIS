import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot52965 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot52965 = tf.keras.layers.Input(shape=([3, 2]))

Dot52965 = keras.layers.Dot(axes=(2, 2), name = 'Dot52965', )([in0Dot52965,in1Dot52965])
Con77740 = keras.layers.Conv1D(4, (2),strides=(1), padding='same', dilation_rate=(1), name = 'Con77740', )(Dot52965)
Res71348 = keras.layers.Reshape((3, 4, 1), name = 'Res71348', )(Con77740)
Max91349 = keras.layers.MaxPool2D(pool_size=(2, 3), name = 'Max91349', )(Res71348)
model = tf.keras.models.Model(inputs=[in0Dot52965,in1Dot52965], outputs=Max91349)
w = model.get_layer('Con77740').get_weights() 
w[0] = np.array([[[0.8037, 0.1985, 0.0036, 0.9008], [0.3864, 0.9388, 0.997, 0.1245], [0.5531, 0.3755, 0.9072, 0.8675]], [[0.4954, 0.5135, 0.3315, 0.7428], [0.5778, 0.652, 0.0953, 0.1842], [0.6717, 0.9431, 0.142, 0.3486]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con77740').set_weights(w) 
in0Dot52965 = tf.constant([[[0.5487, 0.0643], [0.468, 0.1368], [0.9664, 0.6459]]])
in1Dot52965 = tf.constant([[[0.8341, 0.8902], [0.4911, 0.2518], [0.6443, 0.5816]]])
print (np.array2string(model.predict([in0Dot52965,in1Dot52965],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max91349.png')

LDot52965 = dot_layer([[[0.5487, 0.0643], [0.468, 0.1368], [0.9664, 0.6459]]], [[[0.8341, 0.8902], [0.4911, 0.2518], [0.6443, 0.5816]]], 2, 2, Dot52965), 
LCon77740 = conv1D_layer(Dot52965, 2,[[[0.8037, 0.1985, 0.0036, 0.9008], [0.3864, 0.9388, 0.997, 0.1245], [0.5531, 0.3755, 0.9072, 0.8675]], [[0.4954, 0.5135, 0.3315, 0.7428], [0.5778, 0.652, 0.0953, 0.1842], [0.6717, 0.9431, 0.142, 0.3486]]],[0, 0, 0, 0], 1, true, 1, Con77740), 
LRes71348 = reshape_layer(Con77740, [3, 4, 1], Res71348), 
LMax91349 = max_pool2D_layer(Res71348, 2, 3, Max91349), 
exec_layers([LDot52965,LCon77740,LRes71348,LMax91349],["Dot52965","Con77740","Res71348","Max91349"],Max91349,"Max91349")

Actual (Unparsed): [[[[2.5590208]]]]

Expected (Unparsed): [[[[2.559020783718]]]]

Actual:   [[[[2.5591]]]]

Expected: [[[[2.5591]]]]