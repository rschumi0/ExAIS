import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot27535 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot27535 = tf.keras.layers.Input(shape=([2, 3]))
in0Con83676 = tf.keras.layers.Input(shape=([7]))
in0Min72194 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Min72194 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Glo76004 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con9476 = tf.keras.layers.Input(shape=([6]))

Dot27535 = keras.layers.Dot(axes=(2, 2), name = 'Dot27535', )([in0Dot27535,in1Dot27535])
Res28260 = keras.layers.Reshape((2, 2, 1), name = 'Res28260', )(Dot27535)
Glo61764 = keras.layers.GlobalAveragePooling2D(name = 'Glo61764', )(Res28260)
Res37279 = keras.layers.Reshape((1, 1), name = 'Res37279', )(Glo61764)
Ave46433 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave46433', )(Res37279)
Fla7513 = keras.layers.Flatten(name = 'Fla7513', )(Ave46433)
Con83676 = keras.layers.Concatenate(axis=1, name = 'Con83676', )([Fla7513,in0Con83676])
Min72194 = keras.layers.Minimum(name = 'Min72194', )([in0Min72194,in1Min72194])
Res30683 = keras.layers.Reshape((2, 1, 4), name = 'Res30683', )(Min72194)
Res38917 = keras.layers.Reshape((2, 4), name = 'Res38917', )(Res30683)
Fla18634 = keras.layers.Flatten(name = 'Fla18634', )(Res38917)
Glo76004 = keras.layers.GlobalAveragePooling2D(name = 'Glo76004', )(in0Glo76004)
Con9476 = keras.layers.Concatenate(axis=1, name = 'Con9476', )([Glo76004,in0Con9476])
Mul59160 = keras.layers.Multiply(name = 'Mul59160', )([Fla18634,Con9476])
Add14968 = keras.layers.Add(name = 'Add14968', )([Con83676,Mul59160])
model = tf.keras.models.Model(inputs=[in0Dot27535,in1Dot27535,in0Con83676,in0Min72194,in1Min72194,in0Glo76004,in0Con9476], outputs=Add14968)
in0Dot27535 = tf.constant([[[0.6645, 0.1297, 0.6356], [0.1908, 0.1134, 0.5584]]])
in1Dot27535 = tf.constant([[[0.5433, 0.2015, 0.7528], [0.6145, 0.0179, 0.2707]]])
in0Con83676 = tf.constant([[0.6622, 0.3244, 0.2801, 0.1934, 0.0678, 0.2271, 0.7305]])
in0Min72194 = tf.constant([[[[[0.3433, 0.3003], [0.5326, 0.5353]]], [[[0.5603, 0.5549], [0.8371, 0.5773]]]]])
in1Min72194 = tf.constant([[[[[0.382, 0.9116], [0.8964, 0.7754]]], [[[0.7675, 0.0639], [0.1093, 0.7238]]]]])
in0Glo76004 = tf.constant([[[[1.8445, 1.7391], [1.3243, 1.0023]], [[1.1227, 1.0544], [1.9886, 1.4948]]]])
in0Con9476 = tf.constant([[0.5798, 0.1188, 0.5908, 0.4309, 0.5005, 0.1458]])
print (np.array2string(model.predict([in0Dot27535,in1Dot27535,in0Con83676,in0Min72194,in1Min72194,in0Glo76004,in0Con9476],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add14968.png')

LDot27535 = dot_layer([[[0.6645, 0.1297, 0.6356], [0.1908, 0.1134, 0.5584]]], [[[0.5433, 0.2015, 0.7528], [0.6145, 0.0179, 0.2707]]], 2, 2, Dot27535), 
LRes28260 = reshape_layer(Dot27535, [2, 2, 1], Res28260), 
LGlo61764 = global_average_pooling2D_layer(Res28260, Glo61764), 
LRes37279 = reshape_layer(Glo61764, [1, 1], Res37279), 
LAve46433 = average_pooling1D_layer(Res37279, 1, 1, false, Ave46433), 
LFla7513 = flatten_layer(Ave46433, Fla7513), 
LCon83676 = concatenate_layer([Fla7513,[[0.6622, 0.3244, 0.2801, 0.1934, 0.0678, 0.2271, 0.7305]]], 1, Con83676), 
LMin72194 = minimum_layer([[[[[[0.3433, 0.3003], [0.5326, 0.5353]]], [[[0.5603, 0.5549], [0.8371, 0.5773]]]]], [[[[[0.382, 0.9116], [0.8964, 0.7754]]], [[[0.7675, 0.0639], [0.1093, 0.7238]]]]]], Min72194), 
LRes30683 = reshape_layer(Min72194, [2, 1, 4], Res30683), 
LRes38917 = reshape_layer(Res30683, [2, 4], Res38917), 
LFla18634 = flatten_layer(Res38917, Fla18634), 
LGlo76004 = global_average_pooling2D_layer([[[[1.8445, 1.7391], [1.3243, 1.0023]], [[1.1227, 1.0544], [1.9886, 1.4948]]]], Glo76004), 
LCon9476 = concatenate_layer([Glo76004,[[0.5798, 0.1188, 0.5908, 0.4309, 0.5005, 0.1458]]], 1, Con9476), 
LMul59160 = multiply_layer([Fla18634,Con9476], Mul59160), 
LAdd14968 = add_layer([Con83676,Mul59160], Add14968), 
exec_layers([LDot27535,LRes28260,LGlo61764,LRes37279,LAve46433,LFla7513,LCon83676,LMin72194,LRes30683,LRes38917,LFla18634,LGlo76004,LCon9476,LMul59160,LAdd14968],["Dot27535","Res28260","Glo61764","Res37279","Ave46433","Fla7513","Con83676","Min72194","Res30683","Res38917","Fla18634","Glo76004","Con9476","Mul59160","Add14968"],Add14968,"Add14968")

Actual (Unparsed): [[1.1054049, 1.0593918, 0.6332015, 0.3436936, 0.5244252, 0.0953345, 0.2818047, 0.8146703]]

Expected (Unparsed): [[1.1054049525,1.059391795,0.63320148,0.34369364,0.52442524,0.09533451,0.28180465,0.81467034]]

Actual:   [[1.1055, 1.0594, 0.6333, 0.3437, 0.5245, 0.0954, 0.2819, 0.8147]]

Expected: [[1.1055, 1.0594, 0.6333, 0.3437, 0.5245, 0.0954, 0.2819, 0.8147]]