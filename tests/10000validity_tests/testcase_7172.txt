import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_17878 = tf.keras.layers.Input(shape=([3, 3, 1]))
in0Dot97009 = tf.keras.layers.Input(shape=([2]))
in1Dot97009 = tf.keras.layers.Input(shape=([2]))
in0Add55834 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add55834 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Up_17878 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_17878', )(in0Up_17878)
Res60160 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res60160', )(Up_17878)
Zer84786 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer84786', )(Res60160)
Dot97009 = keras.layers.Dot(axes=(1, 1), name = 'Dot97009', )([in0Dot97009,in1Dot97009])
Res42956 = keras.layers.Reshape((1, 1), name = 'Res42956', )(Dot97009)
Res85819 = keras.layers.Reshape((1, 1, 1), name = 'Res85819', )(Res42956)
Res75552 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res75552', )(Res85819)
Zer59512 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer59512', )(Res75552)
Add55834 = keras.layers.Add(name = 'Add55834', )([in0Add55834,in1Add55834])
Min32580 = keras.layers.Minimum(name = 'Min32580', )([Zer59512,Add55834])
Zer80703 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (1, 0)), name = 'Zer80703', )(Min32580)
Ave13454 = keras.layers.Average(name = 'Ave13454', )([Zer84786,Zer80703])
model = tf.keras.models.Model(inputs=[in0Up_17878,in0Dot97009,in1Dot97009,in0Add55834,in1Add55834], outputs=Ave13454)
in0Up_17878 = tf.constant([[[[1.6156], [1.36], [1.4764]], [[1.7091], [1.7137], [1.7008]], [[1.546], [1.5725], [1.2863]]]])
in0Dot97009 = tf.constant([[0.0439, 0.6022]])
in1Dot97009 = tf.constant([[0.517, 0.1062]])
in0Add55834 = tf.constant([[[[[0.1454], [0.9718]], [[0.6123], [0.0232]]]]])
in1Add55834 = tf.constant([[[[[0.5493], [0.9479]], [[0.4683], [0.6884]]]]])
print (np.array2string(model.predict([in0Up_17878,in0Dot97009,in1Dot97009,in0Add55834,in1Add55834],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave13454.png')

LUp_17878 = up_sampling2D_layer([[[[1.6156], [1.36], [1.4764]], [[1.7091], [1.7137], [1.7008]], [[1.546], [1.5725], [1.2863]]]], 1, 1, Up_17878), 
LRes60160 = reshape_layer(Up_17878, [3, 3, 1, 1], Res60160), 
LZer84786 = zero_padding3D_layer(Res60160, 0, 0, 0, 0, 2, 0, Zer84786), 
LDot97009 = dot_layer([[0.0439, 0.6022]], [[0.517, 0.1062]], 1, 1, Dot97009), 
LRes42956 = reshape_layer(Dot97009, [1, 1], Res42956), 
LRes85819 = reshape_layer(Res42956, [1, 1, 1], Res85819), 
LRes75552 = reshape_layer(Res85819, [1, 1, 1, 1], Res75552), 
LZer59512 = zero_padding3D_layer(Res75552, 0, 0, 1, 0, 1, 0, Zer59512), 
LAdd55834 = add_layer([[[[[[0.1454], [0.9718]], [[0.6123], [0.0232]]]]], [[[[[0.5493], [0.9479]], [[0.4683], [0.6884]]]]]], Add55834), 
LMin32580 = minimum_layer([Zer59512,Add55834], Min32580), 
LZer80703 = zero_padding3D_layer(Min32580, 2, 0, 1, 0, 1, 0, Zer80703), 
LAve13454 = average_layer([Zer84786,Zer80703], Ave13454), 
exec_layers([LUp_17878,LRes60160,LZer84786,LDot97009,LRes42956,LRes85819,LRes75552,LZer59512,LAdd55834,LMin32580,LZer80703,LAve13454],["Up_17878","Res60160","Zer84786","Dot97009","Res42956","Res85819","Res75552","Zer59512","Add55834","Min32580","Zer80703","Ave13454"],Ave13454,"Ave13454")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.8078000]], [[0.0000000], [0.0000000], [0.6800000]], [[0.0000000], [0.0000000], [0.7382000]]], [[[0.0000000], [0.0000000], [0.8545500]], [[0.0000000], [0.0000000], [0.8568500]], [[0.0000000], [0.0000000], [0.8504000]]], [[[0.0000000], [0.0000000], [0.7730000]], [[0.0000000], [0.0000000], [0.7862500]], [[0.0000000], [0.0000000], [0.6864749]]]]]

Expected (Unparsed): [[[[[0],[0],[0.8078]],[[0],[0],[0.68]],[[0],[0],[0.7382]]],[[[0],[0],[0.85455]],[[0],[0],[0.85685]],[[0],[0],[0.8504]]],[[[0],[0],[0.773]],[[0],[0],[0.78625]],[[0],[0],[0.68647497]]]]]

Actual:   [[[[[0], [0], [0.8078]], [[0], [0], [0.68]], [[0], [0], [0.7382]]], [[[0], [0], [0.8546]], [[0], [0], [0.8569]], [[0], [0], [0.8504]]], [[[0], [0], [0.773]], [[0], [0], [0.7863]], [[0], [0], [0.6865]]]]]

Expected: [[[[[0], [0], [0.8078]], [[0], [0], [0.68]], [[0], [0], [0.7382]]], [[[0], [0], [0.8546]], [[0], [0], [0.8569]], [[0], [0], [0.8504]]], [[[0], [0], [0.773]], [[0], [0], [0.7863]], [[0], [0], [0.6865]]]]]