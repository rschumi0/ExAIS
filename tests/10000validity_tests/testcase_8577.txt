import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul5468 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Mul5468 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Ave67246 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave67246 = tf.keras.layers.Input(shape=([1, 1, 2]))

Mul5468 = keras.layers.Multiply(name = 'Mul5468', )([in0Mul5468,in1Mul5468])
Res69491 = keras.layers.Reshape((2, 2, 1), name = 'Res69491', )(Mul5468)
Res1080 = keras.layers.Reshape((2, 2), name = 'Res1080', )(Res69491)
Ave82949 = keras.layers.AveragePooling1D(pool_size=(2), strides=(6), padding='valid', name = 'Ave82949', )(Res1080)
Zer26169 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer26169', )(Ave82949)
Ave67246 = keras.layers.Average(name = 'Ave67246', )([in0Ave67246,in1Ave67246])
Res37337 = keras.layers.Reshape((1, 2), name = 'Res37337', )(Ave67246)
Zer77046 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer77046', )(Res37337)
Mul82278 = keras.layers.Multiply(name = 'Mul82278', )([Zer26169,Zer77046])
model = tf.keras.models.Model(inputs=[in0Mul5468,in1Mul5468,in0Ave67246,in1Ave67246], outputs=Mul82278)
in0Mul5468 = tf.constant([[[[[0.3639]], [[0.9971]]], [[[0.3483]], [[0.4555]]]]])
in1Mul5468 = tf.constant([[[[[0.1015]], [[0.7654]]], [[[0.2281]], [[0.3498]]]]])
in0Ave67246 = tf.constant([[[[0.5471, 0.1071]]]])
in1Ave67246 = tf.constant([[[[0.6504, 0.7176]]]])
print (np.array2string(model.predict([in0Mul5468,in1Mul5468,in0Ave67246,in1Ave67246],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul82278.png')

LMul5468 = multiply_layer([[[[[[0.3639]], [[0.9971]]], [[[0.3483]], [[0.4555]]]]], [[[[[0.1015]], [[0.7654]]], [[[0.2281]], [[0.3498]]]]]], Mul5468), 
LRes69491 = reshape_layer(Mul5468, [2, 2, 1], Res69491), 
LRes1080 = reshape_layer(Res69491, [2, 2], Res1080), 
LAve82949 = average_pooling1D_layer(Res1080, 2, 6, false, Ave82949), 
LZer26169 = zero_padding1D_layer(Ave82949, 2, 0, Zer26169), 
LAve67246 = average_layer([[[[[0.5471, 0.1071]]]], [[[[0.6504, 0.7176]]]]], Ave67246), 
LRes37337 = reshape_layer(Ave67246, [1, 2], Res37337), 
LZer77046 = zero_padding1D_layer(Res37337, 1, 1, Zer77046), 
LMul82278 = multiply_layer([Zer26169,Zer77046], Mul82278), 
exec_layers([LMul5468,LRes69491,LRes1080,LAve82949,LZer26169,LAve67246,LRes37337,LZer77046,LMul82278],["Mul5468","Res69491","Res1080","Ave82949","Zer26169","Ave67246","Res37337","Zer77046","Mul82278"],Mul82278,"Mul82278")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0],[0.0,0.0],[0.0,0.0]]]

Actual:   [[[0, 0], [0, 0], [0, 0]]]

Expected: [[[0, 0], [0, 0], [0, 0]]]