import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul59965 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Mul59965 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Thr96339 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con51013 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con18577 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Max79194 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max79194 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Dep32478 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con56781 = tf.keras.layers.Input(shape=([1, 2, 2]))

Mul59965 = keras.layers.Multiply(name = 'Mul59965', )([in0Mul59965,in1Mul59965])
Zer72549 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer72549', )(Mul59965)
Thr96339 = keras.layers.ThresholdedReLU(theta=4.877572765531333, name = 'Thr96339', input_shape=(2, 1, 1, 1))(in0Thr96339)
Con51013 = keras.layers.Concatenate(axis=4, name = 'Con51013', )([Thr96339,in0Con51013])
Ave92146 = keras.layers.Average(name = 'Ave92146', )([Zer72549,Con51013])
Res26111 = keras.layers.Reshape((2, 1, 2), name = 'Res26111', )(Ave92146)
Zer67401 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer67401', )(Res26111)
Con18577 = keras.layers.Concatenate(axis=3, name = 'Con18577', )([Zer67401,in0Con18577])
Max79194 = keras.layers.Maximum(name = 'Max79194', )([in0Max79194,in1Max79194])
Con12433 = keras.layers.Conv2D(3, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con12433', )(Max79194)
Dep32478 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='valid', name = 'Dep32478', )(in0Dep32478)
Zer72346 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer72346', )(Dep32478)
Con56781 = keras.layers.Concatenate(axis=3, name = 'Con56781', )([Zer72346,in0Con56781])
Max73723 = keras.layers.Maximum(name = 'Max73723', )([Con12433,Con56781])
Zer69834 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer69834', )(Max73723)
Mul75545 = keras.layers.Multiply(name = 'Mul75545', )([Con18577,Zer69834])
model = tf.keras.models.Model(inputs=[in0Mul59965,in1Mul59965,in0Thr96339,in0Con51013,in0Con18577,in0Max79194,in1Max79194,in0Dep32478,in0Con56781], outputs=Mul75545)
w = model.get_layer('Con12433').get_weights() 
w[0] = np.array([[[[0.4697, 0.3309, 0.7368]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con12433').set_weights(w) 
w = model.get_layer('Dep32478').get_weights() 
w[0] = np.array([[[[0.5886]], [[0.7071]]]])
w[1] = np.array([0])
model.get_layer('Dep32478').set_weights(w) 
in0Mul59965 = tf.constant([[[[[0.0353, 0.3427]]]]])
in1Mul59965 = tf.constant([[[[[0.6339, 0.5088]]]]])
in0Thr96339 = tf.constant([[[[[0.8234]]], [[[0.2553]]]]])
in0Con51013 = tf.constant([[[[[0.0297]]], [[[0.74]]]]])
in0Con18577 = tf.constant([[[[0.0389], [0.9919], [0.5273]], [[0.8543], [0.6106], [0.354]]]])
in0Max79194 = tf.constant([[[[0.383], [0.8072]]]])
in1Max79194 = tf.constant([[[[0.7597], [0.4096]]]])
in0Dep32478 = tf.constant([[[[0.3639], [0.7702]]]])
in0Con56781 = tf.constant([[[[0.9365, 0.984], [0.7255, 0.9133]]]])
print (np.array2string(model.predict([in0Mul59965,in1Mul59965,in0Thr96339,in0Con51013,in0Con18577,in0Max79194,in1Max79194,in0Dep32478,in0Con56781],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul75545.png')

LMul59965 = multiply_layer([[[[[[0.0353, 0.3427]]]]], [[[[[0.6339, 0.5088]]]]]], Mul59965), 
LZer72549 = zero_padding3D_layer(Mul59965, 1, 0, 0, 0, 0, 0, Zer72549), 
LThr96339 = thresholded_relu_layer([[[[[0.8234]]], [[[0.2553]]]]], 4.877572765531333, Thr96339), 
LCon51013 = concatenate_layer([Thr96339,[[[[[0.0297]]], [[[0.74]]]]]], 4, Con51013), 
LAve92146 = average_layer([Zer72549,Con51013], Ave92146), 
LRes26111 = reshape_layer(Ave92146, [2, 1, 2], Res26111), 
LZer67401 = zero_padding2D_layer(Res26111, 0, 0, 2, 0, Zer67401), 
LCon18577 = concatenate_layer([Zer67401,[[[[0.0389], [0.9919], [0.5273]], [[0.8543], [0.6106], [0.354]]]]], 3, Con18577), 
LMax79194 = maximum_layer([[[[[0.383], [0.8072]]]], [[[[0.7597], [0.4096]]]]], Max79194), 
LCon12433 = conv2D_layer(Max79194, 1, 1,[[[[0.4697, 0.3309, 0.7368]]]],[0, 0, 0], 1, 1, false, 1, 1, Con12433), 
LDep32478 = depthwise_conv2D_layer([[[[0.3639], [0.7702]]]], 1, 2,[[[[0.5886]], [[0.7071]]]],[0], 1, 1, false, Dep32478), 
LZer72346 = zero_padding2D_layer(Dep32478, 0, 0, 1, 0, Zer72346), 
LCon56781 = concatenate_layer([Zer72346,[[[[0.9365, 0.984], [0.7255, 0.9133]]]]], 3, Con56781), 
LMax73723 = maximum_layer([Con12433,Con56781], Max73723), 
LZer69834 = zero_padding2D_layer(Max73723, 1, 0, 1, 0, Zer69834), 
LMul75545 = multiply_layer([Con18577,Zer69834], Mul75545), 
exec_layers([LMul59965,LZer72549,LThr96339,LCon51013,LAve92146,LRes26111,LZer67401,LCon18577,LMax79194,LCon12433,LDep32478,LZer72346,LCon56781,LMax73723,LZer69834,LMul75545],["Mul59965","Zer72549","Thr96339","Con51013","Ave92146","Res26111","Zer67401","Con18577","Max79194","Con12433","Dep32478","Zer72346","Con56781","Max73723","Zer69834","Mul75545"],Mul75545,"Mul75545")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.6008304], [0.0084897, 0.3316862, 0.3233082]]]]

Expected (Unparsed): [[[[0,0,0.0],[0,0,0.0],[0,0.0,0.0]],[[0,0,0.0],[0.0,0.0,0.6008304],[0.008489708150466598,0.33168617944,0.3233082]]]]

Actual:   [[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0.6009], [0.0085, 0.3317, 0.3234]]]]

Expected: [[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0.6009], [0.0085, 0.3317, 0.3234]]]]