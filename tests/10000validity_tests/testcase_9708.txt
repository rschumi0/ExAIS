import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave63434 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave63434 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Mul75107 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul75107 = tf.keras.layers.Input(shape=([2, 2]))
in0Con34348 = tf.keras.layers.Input(shape=([1, 3]))

Ave63434 = keras.layers.Average(name = 'Ave63434', )([in0Ave63434,in1Ave63434])
Res55555 = keras.layers.Reshape((1, 4), name = 'Res55555', )(Ave63434)
Mul75107 = keras.layers.Multiply(name = 'Mul75107', )([in0Mul75107,in1Mul75107])
Res70171 = keras.layers.Reshape((2, 2, 1), name = 'Res70171', )(Mul75107)
Res7478 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res7478', )(Res70171)
Glo14749 = keras.layers.GlobalAveragePooling3D(name = 'Glo14749', )(Res7478)
Res80735 = keras.layers.Reshape((1, 1), name = 'Res80735', )(Glo14749)
Ave64604 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave64604', )(Res80735)
Con34348 = keras.layers.Concatenate(axis=2, name = 'Con34348', )([Ave64604,in0Con34348])
Min6664 = keras.layers.Minimum(name = 'Min6664', )([Res55555,Con34348])
ReL22395 = keras.layers.ReLU(max_value=8.375426804956607, negative_slope=9.588608917916416, threshold=4.523213671530971, name = 'ReL22395', )(Min6664)
model = tf.keras.models.Model(inputs=[in0Ave63434,in1Ave63434,in0Mul75107,in1Mul75107,in0Con34348], outputs=ReL22395)
in0Ave63434 = tf.constant([[[[0.918, 0.4409], [0.8215, 0.9606]]]])
in1Ave63434 = tf.constant([[[[0.1778, 0.9355], [0.1606, 0.8444]]]])
in0Mul75107 = tf.constant([[[0.6905, 0.5841], [0.0256, 0.9386]]])
in1Mul75107 = tf.constant([[[0.3729, 0.0916], [0.091, 0.927]]])
in0Con34348 = tf.constant([[[0.8339, 0.5249, 0.7012]]])
print (np.array2string(model.predict([in0Ave63434,in1Ave63434,in0Mul75107,in1Mul75107,in0Con34348],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ReL22395.png')

LAve63434 = average_layer([[[[[0.918, 0.4409], [0.8215, 0.9606]]]], [[[[0.1778, 0.9355], [0.1606, 0.8444]]]]], Ave63434), 
LRes55555 = reshape_layer(Ave63434, [1, 4], Res55555), 
LMul75107 = multiply_layer([[[[0.6905, 0.5841], [0.0256, 0.9386]]], [[[0.3729, 0.0916], [0.091, 0.927]]]], Mul75107), 
LRes70171 = reshape_layer(Mul75107, [2, 2, 1], Res70171), 
LRes7478 = reshape_layer(Res70171, [2, 2, 1, 1], Res7478), 
LGlo14749 = global_average_pooling3D_layer(Res7478, Glo14749), 
LRes80735 = reshape_layer(Glo14749, [1, 1], Res80735), 
LAve64604 = average_pooling1D_layer(Res80735, 1, Ave64604), 
LCon34348 = concatenate_layer([Ave64604,[[[0.8339, 0.5249, 0.7012]]]], 2, Con34348), 
LMin6664 = minimum_layer([Res55555,Con34348], Min6664), 
LReL22395 = relu_layer(Min6664, 8.375426804956607, 9.588608917916416, 4.523213671530971, ReL22395), 
exec_layers([LAve63434,LRes55555,LMul75107,LRes70171,LRes7478,LGlo14749,LRes80735,LAve64604,LCon34348,LMin6664,LReL22395],["Ave63434","Res55555","Mul75107","Res70171","Res7478","Glo14749","Res80735","Ave64604","Con34348","Min6664","ReL22395"],ReL22395,"ReL22395")

Actual (Unparsed): [[[-40.5345303, -36.7724462, -38.6628405, -36.6477943]]]

Expected (Unparsed): [[[-40.53453026411999,-36.772446291173246,-38.662840539340465,-36.64779437524033]]]

Actual:   [[[-40.5345, -36.7724, -38.6628, -36.6477]]]

Expected: [[[-40.5345, -36.7724, -38.6628, -36.6477]]]