import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave98005 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave98005 = tf.keras.layers.Input(shape=([1, 2]))

Ave98005 = keras.layers.Average(name = 'Ave98005', )([in0Ave98005,in1Ave98005])
Res93389 = keras.layers.Reshape((1, 2, 1), name = 'Res93389', )(Ave98005)
Cro87326 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro87326', )(Res93389)
Res46703 = keras.layers.Reshape((1, 1), name = 'Res46703', )(Cro87326)
Up_8913 = keras.layers.UpSampling1D(size=(1), name = 'Up_8913', )(Res46703)
Res39658 = keras.layers.Reshape((1, 1, 1), name = 'Res39658', )(Up_8913)
Res96302 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res96302', )(Res39658)
Glo43995 = keras.layers.GlobalAveragePooling3D(name = 'Glo43995', )(Res96302)
Fla87583 = keras.layers.Flatten(name = 'Fla87583', )(Glo43995)
model = tf.keras.models.Model(inputs=[in0Ave98005,in1Ave98005], outputs=Fla87583)
in0Ave98005 = tf.constant([[[0.3911, 0.1491]]])
in1Ave98005 = tf.constant([[[0.4973, 0.6701]]])
print (np.array2string(model.predict([in0Ave98005,in1Ave98005],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla87583.png')

LAve98005 = average_layer([[[[0.3911, 0.1491]]], [[[0.4973, 0.6701]]]], Ave98005), 
LRes93389 = reshape_layer(Ave98005, [1, 2, 1], Res93389), 
LCro87326 = cropping2D_layer(Res93389, 0, 0, 1, 0, Cro87326), 
LRes46703 = reshape_layer(Cro87326, [1, 1], Res46703), 
LUp_8913 = up_sampling1D_layer(Res46703, 1, Up_8913), 
LRes39658 = reshape_layer(Up_8913, [1, 1, 1], Res39658), 
LRes96302 = reshape_layer(Res39658, [1, 1, 1, 1], Res96302), 
LGlo43995 = global_average_pooling3D_layer(Res96302, Glo43995), 
LFla87583 = flatten_layer(Glo43995, Fla87583), 
exec_layers([LAve98005,LRes93389,LCro87326,LRes46703,LUp_8913,LRes39658,LRes96302,LGlo43995,LFla87583],["Ave98005","Res93389","Cro87326","Res46703","Up_8913","Res39658","Res96302","Glo43995","Fla87583"],Fla87583,"Fla87583")

Actual (Unparsed): [[0.4096000]]

Expected (Unparsed): [[0.4096]]

Actual:   [[0.4096]]

Expected: [[0.4096]]