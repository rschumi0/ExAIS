import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep38959 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con92589 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Add31167 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add31167 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0PRe61249 = tf.keras.layers.Input(shape=([2, 2]))
in0Min40440 = tf.keras.layers.Input(shape=([1, 1]))
in1Min40440 = tf.keras.layers.Input(shape=([1, 1]))
in0Con36926 = tf.keras.layers.Input(shape=([2, 1]))
in0Con57920 = tf.keras.layers.Input(shape=([2, 2]))

Dep38959 = keras.layers.DepthwiseConv2D((2, 1),strides=(2, 2), padding='same', name = 'Dep38959', )(in0Dep38959)
ReL77235 = keras.layers.ReLU(max_value=3.4753832234456303, negative_slope=4.556021104694643, threshold=5.4468051971401685, name = 'ReL77235', )(Dep38959)
Res3213 = keras.layers.Reshape((1, 1), name = 'Res3213', )(ReL77235)
Cro4800 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro4800', )(Res3213)
Res48732 = keras.layers.Reshape((1, 1, 1), name = 'Res48732', )(Cro4800)
Zer32809 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer32809', )(Res48732)
Con92589 = keras.layers.Concatenate(axis=3, name = 'Con92589', )([Zer32809,in0Con92589])
Add31167 = keras.layers.Add(name = 'Add31167', )([in0Add31167,in1Add31167])
Add48438 = keras.layers.Add(name = 'Add48438', )([Con92589,Add31167])
Res75804 = keras.layers.Reshape((2, 4), name = 'Res75804', )(Add48438)
PRe61249 = keras.layers.PReLU(name = 'PRe61249', input_shape=(2, 2))(in0PRe61249)
Min40440 = keras.layers.Minimum(name = 'Min40440', )([in0Min40440,in1Min40440])
Zer17559 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer17559', )(Min40440)
Con36926 = keras.layers.Concatenate(axis=2, name = 'Con36926', )([Zer17559,in0Con36926])
Max70313 = keras.layers.Maximum(name = 'Max70313', )([PRe61249,Con36926])
Con57920 = keras.layers.Concatenate(axis=2, name = 'Con57920', )([Max70313,in0Con57920])
Sub5031 = keras.layers.Subtract(name = 'Sub5031', )([Res75804,Con57920])
model = tf.keras.models.Model(inputs=[in0Dep38959,in0Con92589,in0Add31167,in1Add31167,in0PRe61249,in0Min40440,in1Min40440,in0Con36926,in0Con57920], outputs=Sub5031)
w = model.get_layer('Dep38959').get_weights() 
w[0] = np.array([[[[0.3536]]], [[[0.2361]]]])
w[1] = np.array([0])
model.get_layer('Dep38959').set_weights(w) 
w = model.get_layer('PRe61249').get_weights() 
w[0] = np.array([[0.7769, 0.7441], [0.9745, 0.4824]])
model.get_layer('PRe61249').set_weights(w) 
in0Dep38959 = tf.constant([[[[0.89], [0.0987]], [[0.5078], [0.3359]]]])
in0Con92589 = tf.constant([[[[0.5367], [0.0637]], [[0.5334], [0.7622]]]])
in0Add31167 = tf.constant([[[[0.7166, 0.2015], [0.6579, 0.5767]], [[0.5296, 0.0505], [0.6529, 0.809]]]])
in1Add31167 = tf.constant([[[[0.6314, 0.5612], [0.4039, 0.9943]], [[0.4348, 0.1834], [0.7577, 0.5915]]]])
in0PRe61249 = tf.constant([[[0.7209, 0.44], [0.527, 0.8844]]])
in0Min40440 = tf.constant([[[0.5622]]])
in1Min40440 = tf.constant([[[0.3942]]])
in0Con36926 = tf.constant([[[0.6973], [0.4365]]])
in0Con57920 = tf.constant([[[0.2735, 0.3858], [0.7134, 0.8652]]])
print (np.array2string(model.predict([in0Dep38959,in0Con92589,in0Add31167,in1Add31167,in0PRe61249,in0Min40440,in1Min40440,in0Con36926,in0Con57920],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub5031.png')

LDep38959 = depthwise_conv2D_layer([[[[0.89], [0.0987]], [[0.5078], [0.3359]]]], 2, 1,[[[[0.3536]]], [[[0.2361]]]],[0], 2, 2, true, Dep38959), 
LReL77235 = relu_layer(Dep38959, 3.4753832234456303, 4.556021104694643, 5.4468051971401685, ReL77235), 
LRes3213 = reshape_layer(ReL77235, [1, 1], Res3213), 
LCro4800 = cropping1D_layer(Res3213, 0, 0, Cro4800), 
LRes48732 = reshape_layer(Cro4800, [1, 1, 1], Res48732), 
LZer32809 = zero_padding2D_layer(Res48732, 1, 0, 1, 0, Zer32809), 
LCon92589 = concatenate_layer([Zer32809,[[[[0.5367], [0.0637]], [[0.5334], [0.7622]]]]], 3, Con92589), 
LAdd31167 = add_layer([[[[[0.7166, 0.2015], [0.6579, 0.5767]], [[0.5296, 0.0505], [0.6529, 0.809]]]], [[[[0.6314, 0.5612], [0.4039, 0.9943]], [[0.4348, 0.1834], [0.7577, 0.5915]]]]], Add31167), 
LAdd48438 = add_layer([Con92589,Add31167], Add48438), 
LRes75804 = reshape_layer(Add48438, [2, 4], Res75804), 
LPRe61249 = prelu_layer([[[0.7209, 0.44], [0.527, 0.8844]]], [[0.7769, 0.7441], [0.9745, 0.4824]], PRe61249), 
LMin40440 = minimum_layer([[[[0.5622]]], [[[0.3942]]]], Min40440), 
LZer17559 = zero_padding1D_layer(Min40440, 1, 0, Zer17559), 
LCon36926 = concatenate_layer([Zer17559,[[[0.6973], [0.4365]]]], 2, Con36926), 
LMax70313 = maximum_layer([PRe61249,Con36926], Max70313), 
LCon57920 = concatenate_layer([Max70313,[[[0.2735, 0.3858], [0.7134, 0.8652]]]], 2, Con57920), 
LSub5031 = subtract_layer(Res75804,Con57920, Sub5031), 
exec_layers([LDep38959,LReL77235,LRes3213,LCro4800,LRes48732,LZer32809,LCon92589,LAdd31167,LAdd48438,LRes75804,LPRe61249,LMin40440,LZer17559,LCon36926,LMax70313,LCon57920,LSub5031],["Dep38959","ReL77235","Res3213","Cro4800","Res48732","Zer32809","Con92589","Add31167","Add48438","Res75804","PRe61249","Min40440","Zer17559","Con36926","Max70313","Con57920","Sub5031"],Sub5031,"Sub5031")

Actual (Unparsed): [[[0.6271000, 0.6021000, 0.7883000, 1.2489000], [0.4374000, -0.1171000, -22.1385328, 1.2975000]]]

Expected (Unparsed): [[[0.6270999999999999,0.6020999999999999,0.7883,1.2489000000000001],[0.4373999999999999,-0.11709999999999998,-22.138532796844064,1.2975]]]

Actual:   [[[0.6271, 0.6021, 0.7883, 1.2489], [0.4374, -0.1171, -22.1385, 1.2975]]]

Expected: [[[0.6271, 0.6021, 0.7883, 1.249], [0.4374, -0.117, -22.1385, 1.2975]]]