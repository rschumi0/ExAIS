import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub48756 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub48756 = tf.keras.layers.Input(shape=([2, 2]))
in0Glo98638 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Con87108 = tf.keras.layers.Input(shape=([1]))
in0Dot14694 = tf.keras.layers.Input(shape=([2]))
in1Dot14694 = tf.keras.layers.Input(shape=([2]))
in0Con76458 = tf.keras.layers.Input(shape=([1]))

Sub48756 = keras.layers.Subtract(name = 'Sub48756', )([in0Sub48756,in1Sub48756])
Ave72875 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='valid', name = 'Ave72875', )(Sub48756)
Fla89531 = keras.layers.Flatten(name = 'Fla89531', )(Ave72875)
Glo98638 = keras.layers.GlobalMaxPool3D(name = 'Glo98638', )(in0Glo98638)
Res42534 = keras.layers.Reshape((2, 1), name = 'Res42534', )(Glo98638)
Res20248 = keras.layers.Reshape((2, 1, 1), name = 'Res20248', )(Res42534)
Res26554 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res26554', )(Res20248)
Glo86268 = keras.layers.GlobalMaxPool3D(name = 'Glo86268', )(Res26554)
Con87108 = keras.layers.Concatenate(axis=1, name = 'Con87108', )([Glo86268,in0Con87108])
Add18096 = keras.layers.Add(name = 'Add18096', )([Fla89531,Con87108])
Dot14694 = keras.layers.Dot(axes=(1, 1), name = 'Dot14694', )([in0Dot14694,in1Dot14694])
Con76458 = keras.layers.Concatenate(axis=1, name = 'Con76458', )([Dot14694,in0Con76458])
Ave45509 = keras.layers.Average(name = 'Ave45509', )([Add18096,Con76458])
model = tf.keras.models.Model(inputs=[in0Sub48756,in1Sub48756,in0Glo98638,in0Con87108,in0Dot14694,in1Dot14694,in0Con76458], outputs=Ave45509)
in0Sub48756 = tf.constant([[[0.8757, 0.1099], [0.9928, 0.3367]]])
in1Sub48756 = tf.constant([[[0.0831, 0.8005], [0.5507, 0.7631]]])
in0Glo98638 = tf.constant([[[[[1.3198, 1.2783]], [[1.6402, 1.2163]]], [[[1.8235, 1.6591]], [[1.2339, 1.1599]]]]])
in0Con87108 = tf.constant([[0.2199]])
in0Dot14694 = tf.constant([[0.5304, 0.322]])
in1Dot14694 = tf.constant([[0.2609, 0.2771]])
in0Con76458 = tf.constant([[0.8349]])
print (np.array2string(model.predict([in0Sub48756,in1Sub48756,in0Glo98638,in0Con87108,in0Dot14694,in1Dot14694,in0Con76458],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave45509.png')

LSub48756 = subtract_layer([[[0.8757, 0.1099], [0.9928, 0.3367]]], [[[0.0831, 0.8005], [0.5507, 0.7631]]], Sub48756), 
LAve72875 = average_pooling1D_layer(Sub48756, 2, 1, false, Ave72875), 
LFla89531 = flatten_layer(Ave72875, Fla89531), 
LGlo98638 = global_max_pool3D_layer([[[[[1.3198, 1.2783]], [[1.6402, 1.2163]]], [[[1.8235, 1.6591]], [[1.2339, 1.1599]]]]], Glo98638), 
LRes42534 = reshape_layer(Glo98638, [2, 1], Res42534), 
LRes20248 = reshape_layer(Res42534, [2, 1, 1], Res20248), 
LRes26554 = reshape_layer(Res20248, [2, 1, 1, 1], Res26554), 
LGlo86268 = global_max_pool3D_layer(Res26554, Glo86268), 
LCon87108 = concatenate_layer([Glo86268,[[0.2199]]], 1, Con87108), 
LAdd18096 = add_layer([Fla89531,Con87108], Add18096), 
LDot14694 = dot_layer([[0.5304, 0.322]], [[0.2609, 0.2771]], 1, 1, Dot14694), 
LCon76458 = concatenate_layer([Dot14694,[[0.8349]]], 1, Con76458), 
LAve45509 = average_layer([Add18096,Con76458], Ave45509), 
exec_layers([LSub48756,LAve72875,LFla89531,LGlo98638,LRes42534,LRes20248,LRes26554,LGlo86268,LCon87108,LAdd18096,LDot14694,LCon76458,LAve45509],["Sub48756","Ave72875","Fla89531","Glo98638","Res42534","Res20248","Res26554","Glo86268","Con87108","Add18096","Dot14694","Con76458","Ave45509"],Ave45509,"Ave45509")

Actual (Unparsed): [[1.3342288, 0.2481500]]

Expected (Unparsed): [[1.3342287800000001,0.24814999999999998]]

Actual:   [[1.3343, 0.2482]]

Expected: [[1.3343, 0.2482]]