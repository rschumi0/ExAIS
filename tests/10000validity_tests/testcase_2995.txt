import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave53949 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Ave53949 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Min85094 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min85094 = tf.keras.layers.Input(shape=([1, 1, 2]))

Ave53949 = keras.layers.Average(name = 'Ave53949', )([in0Ave53949,in1Ave53949])
Res41157 = keras.layers.Reshape((1, 1, 2), name = 'Res41157', )(Ave53949)
Min85094 = keras.layers.Minimum(name = 'Min85094', )([in0Min85094,in1Min85094])
Ave41239 = keras.layers.Average(name = 'Ave41239', )([Res41157,Min85094])
Res60371 = keras.layers.Reshape((1, 2), name = 'Res60371', )(Ave41239)
Con65717 = keras.layers.Conv1D(4, (1),strides=(3), padding='same', dilation_rate=(1), name = 'Con65717', )(Res60371)
model = tf.keras.models.Model(inputs=[in0Ave53949,in1Ave53949,in0Min85094,in1Min85094], outputs=Con65717)
w = model.get_layer('Con65717').get_weights() 
w[0] = np.array([[[0.7593, 0.3523, 0.6045, 0.4388], [0.8445, 0.6846, 0.3138, 0.8169]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con65717').set_weights(w) 
in0Ave53949 = tf.constant([[[[[0.4519, 0.6648]]]]])
in1Ave53949 = tf.constant([[[[[0.4777, 0.8964]]]]])
in0Min85094 = tf.constant([[[[0.5392, 0.0131]]]])
in1Min85094 = tf.constant([[[[0.9651, 0.8393]]]])
print (np.array2string(model.predict([in0Ave53949,in1Ave53949,in0Min85094,in1Min85094],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con65717.png')

LAve53949 = average_layer([[[[[[0.4519, 0.6648]]]]], [[[[[0.4777, 0.8964]]]]]], Ave53949), 
LRes41157 = reshape_layer(Ave53949, [1, 1, 2], Res41157), 
LMin85094 = minimum_layer([[[[[0.5392, 0.0131]]]], [[[[0.9651, 0.8393]]]]], Min85094), 
LAve41239 = average_layer([Res41157,Min85094], Ave41239), 
LRes60371 = reshape_layer(Ave41239, [1, 2], Res60371), 
LCon65717 = conv1D_layer(Res60371, 1,[[[0.7593, 0.3523, 0.6045, 0.4388], [0.8445, 0.6846, 0.3138, 0.8169]]],[0, 0, 0, 0], 3, true, 1, Con65717), 
exec_layers([LAve53949,LRes41157,LMin85094,LAve41239,LRes60371,LCon65717],["Ave53949","Res41157","Min85094","Ave41239","Res60371","Con65717"],Con65717,"Con65717")

Actual (Unparsed): [[[0.7163084, 0.4485381, 0.4279905, 0.5444644]]]

Expected (Unparsed): [[[0.716308425,0.44853811,0.42799053000000004,0.5444643650000001]]]

Actual:   [[[0.7164, 0.4486, 0.428, 0.5445]]]

Expected: [[[0.7164, 0.4486, 0.428, 0.5445]]]