import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add76112 = tf.keras.layers.Input(shape=([1, 1]))
in1Add76112 = tf.keras.layers.Input(shape=([1, 1]))
in0Max8130 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max8130 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con68401 = tf.keras.layers.Input(shape=([2, 3]))
in0Max8376 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Max8376 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave91429 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave91429 = tf.keras.layers.Input(shape=([1, 1]))
in0Con97687 = tf.keras.layers.Input(shape=([2, 3]))

Add76112 = keras.layers.Add(name = 'Add76112', )([in0Add76112,in1Add76112])
Res54482 = keras.layers.Reshape((1, 1, 1), name = 'Res54482', )(Add76112)
Res79406 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res79406', )(Res54482)
Max8130 = keras.layers.Maximum(name = 'Max8130', )([in0Max8130,in1Max8130])
Min88919 = keras.layers.Minimum(name = 'Min88919', )([Res79406,Max8130])
Res33020 = keras.layers.Reshape((1, 1, 1), name = 'Res33020', )(Min88919)
Dep77169 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep77169', )(Res33020)
Res5591 = keras.layers.Reshape((1, 1), name = 'Res5591', )(Dep77169)
Zer92183 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer92183', )(Res5591)
Con68401 = keras.layers.Concatenate(axis=2, name = 'Con68401', )([Zer92183,in0Con68401])
Max8376 = keras.layers.Maximum(name = 'Max8376', )([in0Max8376,in1Max8376])
Mas87735 = keras.layers.Masking(mask_value=1, name = 'Mas87735', )(Max8376)
Res97902 = keras.layers.Reshape((2, 2, 2), name = 'Res97902', )(Mas87735)
Res49956 = keras.layers.Reshape((2, 4), name = 'Res49956', )(Res97902)
Ave91429 = keras.layers.Average(name = 'Ave91429', )([in0Ave91429,in1Ave91429])
Zer93674 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer93674', )(Ave91429)
Con97687 = keras.layers.Concatenate(axis=2, name = 'Con97687', )([Zer93674,in0Con97687])
Sub81799 = keras.layers.Subtract(name = 'Sub81799', )([Res49956,Con97687])
Ave43860 = keras.layers.Average(name = 'Ave43860', )([Con68401,Sub81799])
Res61634 = keras.layers.Reshape((2, 4, 1), name = 'Res61634', )(Ave43860)
Res10459 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res10459', )(Res61634)
Glo8637 = keras.layers.GlobalAveragePooling3D(name = 'Glo8637', )(Res10459)
model = tf.keras.models.Model(inputs=[in0Add76112,in1Add76112,in0Max8130,in1Max8130,in0Con68401,in0Max8376,in1Max8376,in0Ave91429,in1Ave91429,in0Con97687], outputs=Glo8637)
w = model.get_layer('Dep77169').get_weights() 
w[0] = np.array([[[[0.8175]]]])
w[1] = np.array([0])
model.get_layer('Dep77169').set_weights(w) 
in0Add76112 = tf.constant([[[0.2937]]])
in1Add76112 = tf.constant([[[0.0955]]])
in0Max8130 = tf.constant([[[[[0.0451]]]]])
in1Max8130 = tf.constant([[[[[0.7823]]]]])
in0Con68401 = tf.constant([[[0.162, 0.232, 0.7362], [0.2559, 0.8013, 0.6246]]])
in0Max8376 = tf.constant([[[[[0.7587], [0.3394]], [[0.6192], [0.376]]], [[[0.0833], [0.0024]], [[0.0114], [0.1882]]]]])
in1Max8376 = tf.constant([[[[[0.6609], [0.8535]], [[0.8203], [0.1499]]], [[[0.1362], [0.0133]], [[0.6422], [0.6349]]]]])
in0Ave91429 = tf.constant([[[0.64]]])
in1Ave91429 = tf.constant([[[0.4124]]])
in0Con97687 = tf.constant([[[0.2106, 0.592, 0.3319], [0.0676, 0.6684, 0.9258]]])
print (np.array2string(model.predict([in0Add76112,in1Add76112,in0Max8130,in1Max8130,in0Con68401,in0Max8376,in1Max8376,in0Ave91429,in1Ave91429,in0Con97687],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo8637.png')

LAdd76112 = add_layer([[[[0.2937]]], [[[0.0955]]]], Add76112), 
LRes54482 = reshape_layer(Add76112, [1, 1, 1], Res54482), 
LRes79406 = reshape_layer(Res54482, [1, 1, 1, 1], Res79406), 
LMax8130 = maximum_layer([[[[[[0.0451]]]]], [[[[[0.7823]]]]]], Max8130), 
LMin88919 = minimum_layer([Res79406,Max8130], Min88919), 
LRes33020 = reshape_layer(Min88919, [1, 1, 1], Res33020), 
LDep77169 = depthwise_conv2D_layer(Res33020, 1, 1,[[[[0.8175]]]],[0], 1, 1, false, Dep77169), 
LRes5591 = reshape_layer(Dep77169, [1, 1], Res5591), 
LZer92183 = zero_padding1D_layer(Res5591, 1, 0, Zer92183), 
LCon68401 = concatenate_layer([Zer92183,[[[0.162, 0.232, 0.7362], [0.2559, 0.8013, 0.6246]]]], 2, Con68401), 
LMax8376 = maximum_layer([[[[[[0.7587], [0.3394]], [[0.6192], [0.376]]], [[[0.0833], [0.0024]], [[0.0114], [0.1882]]]]], [[[[[0.6609], [0.8535]], [[0.8203], [0.1499]]], [[[0.1362], [0.0133]], [[0.6422], [0.6349]]]]]], Max8376), 
LMas87735 = masking_layer(Max8376, 1, Mas87735), 
LRes97902 = reshape_layer(Mas87735, [2, 2, 2], Res97902), 
LRes49956 = reshape_layer(Res97902, [2, 4], Res49956), 
LAve91429 = average_layer([[[[0.64]]], [[[0.4124]]]], Ave91429), 
LZer93674 = zero_padding1D_layer(Ave91429, 1, 0, Zer93674), 
LCon97687 = concatenate_layer([Zer93674,[[[0.2106, 0.592, 0.3319], [0.0676, 0.6684, 0.9258]]]], 2, Con97687), 
LSub81799 = subtract_layer(Res49956,Con97687, Sub81799), 
LAve43860 = average_layer([Con68401,Sub81799], Ave43860), 
LRes61634 = reshape_layer(Ave43860, [2, 4, 1], Res61634), 
LRes10459 = reshape_layer(Res61634, [2, 4, 1, 1], Res10459), 
LGlo8637 = global_average_pooling3D_layer(Res10459, Glo8637), 
exec_layers([LAdd76112,LRes54482,LRes79406,LMax8130,LMin88919,LRes33020,LDep77169,LRes5591,LZer92183,LCon68401,LMax8376,LMas87735,LRes97902,LRes49956,LAve91429,LZer93674,LCon97687,LSub81799,LAve43860,LRes61634,LRes10459,LGlo8637],["Add76112","Res54482","Res79406","Max8130","Min88919","Res33020","Dep77169","Res5591","Zer92183","Con68401","Max8376","Mas87735","Res97902","Res49956","Ave91429","Zer93674","Con97687","Sub81799","Ave43860","Res61634","Res10459","Glo8637"],Glo8637,"Glo8637")

Actual (Unparsed): [[0.2526732]]

Expected (Unparsed): [[0.2526731875]]

Actual:   [[0.2527]]

Expected: [[0.2527]]