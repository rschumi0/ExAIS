import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave22458 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave22458 = tf.keras.layers.Input(shape=([2, 1]))

Ave22458 = keras.layers.Average(name = 'Ave22458', )([in0Ave22458,in1Ave22458])
Res2474 = keras.layers.Reshape((2, 1, 1), name = 'Res2474', )(Ave22458)
Max42438 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max42438', )(Res2474)
Res6138 = keras.layers.Reshape((2, 1), name = 'Res6138', )(Max42438)
Glo5543 = keras.layers.GlobalAveragePooling1D(name = 'Glo5543', )(Res6138)
model = tf.keras.models.Model(inputs=[in0Ave22458,in1Ave22458], outputs=Glo5543)
in0Ave22458 = tf.constant([[[0.3905], [0.9044]]])
in1Ave22458 = tf.constant([[[0.8623], [0.7236]]])
print (np.array2string(model.predict([in0Ave22458,in1Ave22458],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo5543.png')

LAve22458 = average_layer([[[[0.3905], [0.9044]]], [[[0.8623], [0.7236]]]], Ave22458), 
LRes2474 = reshape_layer(Ave22458, [2, 1, 1], Res2474), 
LMax42438 = max_pool2D_layer(Res2474, 1, 1, Max42438), 
LRes6138 = reshape_layer(Max42438, [2, 1], Res6138), 
LGlo5543 = global_average_pooling1D_layer(Res6138, Glo5543), 
exec_layers([LAve22458,LRes2474,LMax42438,LRes6138,LGlo5543],["Ave22458","Res2474","Max42438","Res6138","Glo5543"],Glo5543,"Glo5543")

Actual (Unparsed): [[0.7202000]]

Expected (Unparsed): [[0.7202]]

Actual:   [[0.7202]]

Expected: [[0.7202]]