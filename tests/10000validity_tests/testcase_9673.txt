import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave62989 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave62989 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Max63192 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Max63192 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con64225 = tf.keras.layers.Input(shape=([1, 3]))

Ave62989 = keras.layers.Average(name = 'Ave62989', )([in0Ave62989,in1Ave62989])
Res88045 = keras.layers.Reshape((1, 4), name = 'Res88045', )(Ave62989)
Max63192 = keras.layers.Maximum(name = 'Max63192', )([in0Max63192,in1Max63192])
Glo46902 = keras.layers.GlobalAveragePooling3D(name = 'Glo46902', )(Max63192)
Res82304 = keras.layers.Reshape((1, 1), name = 'Res82304', )(Glo46902)
Cro1520 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro1520', )(Res82304)
Con64225 = keras.layers.Concatenate(axis=2, name = 'Con64225', )([Cro1520,in0Con64225])
Max78587 = keras.layers.Maximum(name = 'Max78587', )([Res88045,Con64225])
model = tf.keras.models.Model(inputs=[in0Ave62989,in1Ave62989,in0Max63192,in1Max63192,in0Con64225], outputs=Max78587)
in0Ave62989 = tf.constant([[[[0.1894, 0.2892], [0.8042, 0.0814]]]])
in1Ave62989 = tf.constant([[[[0.1482, 0.7944], [0.3249, 0.0328]]]])
in0Max63192 = tf.constant([[[[[0.1678]], [[0.9557]]]]])
in1Max63192 = tf.constant([[[[[0.3608]], [[0.6608]]]]])
in0Con64225 = tf.constant([[[0.0616, 0.0546, 0.5733]]])
print (np.array2string(model.predict([in0Ave62989,in1Ave62989,in0Max63192,in1Max63192,in0Con64225],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max78587.png')

LAve62989 = average_layer([[[[[0.1894, 0.2892], [0.8042, 0.0814]]]], [[[[0.1482, 0.7944], [0.3249, 0.0328]]]]], Ave62989), 
LRes88045 = reshape_layer(Ave62989, [1, 4], Res88045), 
LMax63192 = maximum_layer([[[[[[0.1678]], [[0.9557]]]]], [[[[[0.3608]], [[0.6608]]]]]], Max63192), 
LGlo46902 = global_average_pooling3D_layer(Max63192, Glo46902), 
LRes82304 = reshape_layer(Glo46902, [1, 1], Res82304), 
LCro1520 = cropping1D_layer(Res82304, 0, 0, Cro1520), 
LCon64225 = concatenate_layer([Cro1520,[[[0.0616, 0.0546, 0.5733]]]], 2, Con64225), 
LMax78587 = maximum_layer([Res88045,Con64225], Max78587), 
exec_layers([LAve62989,LRes88045,LMax63192,LGlo46902,LRes82304,LCro1520,LCon64225,LMax78587],["Ave62989","Res88045","Max63192","Glo46902","Res82304","Cro1520","Con64225","Max78587"],Max78587,"Max78587")

Actual (Unparsed): [[[0.6582500, 0.5418000, 0.5645500, 0.5733000]]]

Expected (Unparsed): [[[0.65825,0.5418000000000001,0.56455,0.5733]]]

Actual:   [[[0.6583, 0.5418, 0.5646, 0.5733]]]

Expected: [[[0.6583, 0.5419, 0.5646, 0.5733]]]