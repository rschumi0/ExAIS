import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min56591 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Min56591 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Min56591 = keras.layers.Minimum(name = 'Min56591', )([in0Min56591,in1Min56591])
Res15970 = keras.layers.Reshape((2, 2, 1), name = 'Res15970', )(Min56591)
Res94278 = keras.layers.Reshape((2, 2), name = 'Res94278', )(Res15970)
Con31009 = keras.layers.Conv1D(4, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con31009', )(Res94278)
Res86446 = keras.layers.Reshape((1, 4, 1), name = 'Res86446', )(Con31009)
Con93321 = keras.layers.Conv2DTranspose(4, (1, 4),strides=(3, 7), padding='same', name = 'Con93321', )(Res86446)
model = tf.keras.models.Model(inputs=[in0Min56591,in1Min56591], outputs=Con93321)
w = model.get_layer('Con31009').get_weights() 
w[0] = np.array([[[0.049, 0.9972, 0.5649, 0.9847], [0.6825, 0.4193, 0.196, 0.3589]], [[0.1703, 0.0281, 0.709, 0.0323], [0.063, 0.5978, 0.8665, 0.7819]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con31009').set_weights(w) 
w = model.get_layer('Con93321').get_weights() 
w[0] = np.array([[[[0.6037], [0.4328], [0.1388], [0.9521]], [[0.8345], [0.6875], [0.7465], [0.0056]], [[0.7784], [0.1103], [0.569], [0.0583]], [[0.968], [0.1476], [0.329], [0.3306]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con93321').set_weights(w) 
in0Min56591 = tf.constant([[[[[0.8678]], [[0.9453]]], [[[0.3299]], [[0.3046]]]]])
in1Min56591 = tf.constant([[[[[0.2821]], [[0.0475]]], [[[0.5645]], [[0.9777]]]]])
print (np.array2string(model.predict([in0Min56591,in1Min56591],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con93321.png')

LMin56591 = minimum_layer([[[[[[0.8678]], [[0.9453]]], [[[0.3299]], [[0.3046]]]]], [[[[[0.2821]], [[0.0475]]], [[[0.5645]], [[0.9777]]]]]], Min56591), 
LRes15970 = reshape_layer(Min56591, [2, 2, 1], Res15970), 
LRes94278 = reshape_layer(Res15970, [2, 2], Res94278), 
LCon31009 = conv1D_layer(Res94278, 2,[[[0.049, 0.9972, 0.5649, 0.9847], [0.6825, 0.4193, 0.196, 0.3589]], [[0.1703, 0.0281, 0.709, 0.0323], [0.063, 0.5978, 0.8665, 0.7819]]],[0, 0, 0, 0], 1, false, 1, Con31009), 
LRes86446 = reshape_layer(Con31009, [1, 4, 1], Res86446), 
LCon93321 = conv2D_transpose_layer(Res86446, 1, 4,[[[[0.6037], [0.4328], [0.1388], [0.9521]], [[0.8345], [0.6875], [0.7465], [0.0056]], [[0.7784], [0.1103], [0.569], [0.0583]], [[0.968], [0.1476], [0.329], [0.3306]]]],[0, 0, 0, 0], 3, 7, true, Con93321), 
exec_layers([LMin56591,LRes15970,LRes94278,LCon31009,LRes86446,LCon93321],["Min56591","Res15970","Res94278","Con31009","Res86446","Con93321"],Con93321,"Con93321")

Actual (Unparsed): [[[[0.0734180, 0.0526343, 0.0168799, 0.1157881], [0.1014864, 0.0836092, 0.0907844, 0.0006810], [0.0946639, 0.0134140, 0.0691980, 0.0070901], [0.1177218, 0.0179501, 0.0400108, 0.0402054], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.2973747, 0.2131916, 0.0683711, 0.4689920], [0.4110638, 0.3386535, 0.3677161, 0.0027585], [0.3834297, 0.0543323, 0.2802820, 0.0287178], [0.4768242, 0.0727058, 0.1620611, 0.1628492], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.4023680, 0.2884626, 0.0925107, 0.6345778], [0.5561970, 0.4582210, 0.4975447, 0.0037324], [0.5188062, 0.0735153, 0.3792404, 0.0388571], [0.6451752, 0.0983759, 0.2192796, 0.2203460], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.3282040, 0.2352935, 0.0754592, 0.5176131], [0.4536794, 0.3737622, 0.4058378, 0.0030445], [0.4231804, 0.0599650, 0.3093392, 0.0316950], [0.5262572, 0.0802433, 0.1788622, 0.1797321], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.07341802165400002,0.052634288176000014,0.016879942696000006,0.11578813718200003],[0.10148639899000003,0.08360922625000002,0.09078441803000002,0.0006810351520000001],[0.09466388612800002,0.013413960226000003,0.06919803598,0.007090062386000001],[0.11772179056000003,0.017950140792000004,0.04001081518000001,0.04020539665200001],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.297374735678,0.213191627632,0.068371067272,0.46899202557399994],[0.41106380143,0.33865352125,0.36771615071,0.0027584868639999997],[0.383429674096,0.054332339481999996,0.28028196885999995,0.028717818601999998],[0.47682415791999994,0.07270583234400001,0.16206110326,0.162849242364],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.402368036173,0.288462623912,0.092510656652,0.634577782409],[0.556196995505,0.458221011875,0.497544705985,0.003732418424],[0.518806160936,0.07351531288699999,0.37924037200999994,0.038857141807],[0.6451751847199999,0.098375885604,0.21927958241,0.220345987674],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0.328203998281,0.235293507464,0.075459193244,0.517613097173],[0.453679371485,0.37376221437499996,0.40583780804499997,0.0030444631279999998],[0.42318037479199994,0.05996505053899999,0.3093391999699999,0.03169503577899999],[0.5262571978399999,0.080243349588,0.17886220877,0.179732055378],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]]

Actual:   [[[[0.0735, 0.0527, 0.0169, 0.1158], [0.1015, 0.0837, 0.0908, 0.0007], [0.0947, 0.0135, 0.0692, 0.0071], [0.1178, 0.018, 0.0401, 0.0403], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.2974, 0.2132, 0.0684, 0.469], [0.4111, 0.3387, 0.3678, 0.0028], [0.3835, 0.0544, 0.2803, 0.0288], [0.4769, 0.0728, 0.1621, 0.1629], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.4024, 0.2885, 0.0926, 0.6346], [0.5562, 0.4583, 0.4976, 0.0038], [0.5189, 0.0736, 0.3793, 0.0389], [0.6452, 0.0984, 0.2193, 0.2204], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.3283, 0.2353, 0.0755, 0.5177], [0.4537, 0.3738, 0.4059, 0.0031], [0.4232, 0.06, 0.3094, 0.0317], [0.5263, 0.0803, 0.1789, 0.1798], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]

Expected: [[[[0.0735, 0.0527, 0.0169, 0.1158], [0.1015, 0.0837, 0.0908, 0.0007], [0.0947, 0.0135, 0.0692, 0.0071], [0.1178, 0.018, 0.0401, 0.0403], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.2974, 0.2132, 0.0684, 0.469], [0.4111, 0.3387, 0.3678, 0.0028], [0.3835, 0.0544, 0.2803, 0.0288], [0.4769, 0.0728, 0.1621, 0.1629], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.4024, 0.2885, 0.0926, 0.6346], [0.5562, 0.4583, 0.4976, 0.0038], [0.5189, 0.0736, 0.3793, 0.0389], [0.6452, 0.0984, 0.2193, 0.2204], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.3283, 0.2353, 0.0755, 0.5177], [0.4537, 0.3738, 0.4059, 0.0031], [0.4232, 0.06, 0.3094, 0.0317], [0.5263, 0.0803, 0.1789, 0.1798], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]