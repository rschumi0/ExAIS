import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add86090 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Add86090 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Con91889 = tf.keras.layers.Input(shape=([4]))
in0Fla32959 = tf.keras.layers.Input(shape=([2, 4]))
in0Con88153 = tf.keras.layers.Input(shape=([8, 1]))
in0Ave38662 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave38662 = tf.keras.layers.Input(shape=([1, 1, 2]))

Add86090 = keras.layers.Add(name = 'Add86090', )([in0Add86090,in1Add86090])
Res76429 = keras.layers.Reshape((1, 1, 4), name = 'Res76429', )(Add86090)
Res63328 = keras.layers.Reshape((1, 4), name = 'Res63328', )(Res76429)
Fla7185 = keras.layers.Flatten(name = 'Fla7185', )(Res63328)
Con91889 = keras.layers.Concatenate(axis=1, name = 'Con91889', )([Fla7185,in0Con91889])
Fla32959 = keras.layers.Flatten(name = 'Fla32959', )(in0Fla32959)
Ave7304 = keras.layers.Average(name = 'Ave7304', )([Con91889,Fla32959])
Res45391 = keras.layers.Reshape((8, 1), name = 'Res45391', )(Ave7304)
Con88153 = keras.layers.Concatenate(axis=2, name = 'Con88153', )([Res45391,in0Con88153])
Ave38662 = keras.layers.Average(name = 'Ave38662', )([in0Ave38662,in1Ave38662])
Lay81783 = keras.layers.LayerNormalization(axis=2, epsilon=2.6023802145512924, name = 'Lay81783', )(Ave38662)
Res89966 = keras.layers.Reshape((1, 2), name = 'Res89966', )(Lay81783)
Ave23008 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave23008', )(Res89966)
Zer87288 = keras.layers.ZeroPadding1D(padding=((7, 0)), name = 'Zer87288', )(Ave23008)
Mul52491 = keras.layers.Multiply(name = 'Mul52491', )([Con88153,Zer87288])
model = tf.keras.models.Model(inputs=[in0Add86090,in1Add86090,in0Con91889,in0Fla32959,in0Con88153,in0Ave38662,in1Ave38662], outputs=Mul52491)
in0Add86090 = tf.constant([[[[[0.7715, 0.0246], [0.5198, 0.4297]]]]])
in1Add86090 = tf.constant([[[[[0.414, 0.873], [0.3898, 0.6739]]]]])
in0Con91889 = tf.constant([[0.8805, 0.6942, 0.6951, 0.0408]])
in0Fla32959 = tf.constant([[[1.5067, 1.484, 1.0754, 1.8226], [1.5672, 1.5252, 1.2008, 1.2863]]])
in0Con88153 = tf.constant([[[0.5972], [0.41], [0.2472], [0.9444], [0.0392], [0.2635], [0.7777], [0.6931]]])
in0Ave38662 = tf.constant([[[[0.7172, 0.5037]]]])
in1Ave38662 = tf.constant([[[[0.7759, 0.563]]]])
print (np.array2string(model.predict([in0Add86090,in1Add86090,in0Con91889,in0Fla32959,in0Con88153,in0Ave38662,in1Ave38662],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul52491.png')

LAdd86090 = add_layer([[[[[[0.7715, 0.0246], [0.5198, 0.4297]]]]], [[[[[0.414, 0.873], [0.3898, 0.6739]]]]]], Add86090), 
LRes76429 = reshape_layer(Add86090, [1, 1, 4], Res76429), 
LRes63328 = reshape_layer(Res76429, [1, 4], Res63328), 
LFla7185 = flatten_layer(Res63328, Fla7185), 
LCon91889 = concatenate_layer([Fla7185,[[0.8805, 0.6942, 0.6951, 0.0408]]], 1, Con91889), 
LFla32959 = flatten_layer([[[1.5067, 1.484, 1.0754, 1.8226], [1.5672, 1.5252, 1.2008, 1.2863]]], Fla32959), 
LAve7304 = average_layer([Con91889,Fla32959], Ave7304), 
LRes45391 = reshape_layer(Ave7304, [8, 1], Res45391), 
LCon88153 = concatenate_layer([Res45391,[[[0.5972], [0.41], [0.2472], [0.9444], [0.0392], [0.2635], [0.7777], [0.6931]]]], 2, Con88153), 
LAve38662 = average_layer([[[[[0.7172, 0.5037]]]], [[[[0.7759, 0.563]]]]], Ave38662), 
LLay81783 = layer_normalization_layer(Ave38662, 2, 2.6023802145512924, Lay81783), 
LRes89966 = reshape_layer(Lay81783, [1, 2], Res89966), 
LAve23008 = average_pooling1D_layer(Res89966, 1, 1, false, Ave23008), 
LZer87288 = zero_padding1D_layer(Ave23008, 7, 0, Zer87288), 
LMul52491 = multiply_layer([Con88153,Zer87288], Mul52491), 
exec_layers([LAdd86090,LRes76429,LRes63328,LFla7185,LCon91889,LFla32959,LAve7304,LRes45391,LCon88153,LAve38662,LLay81783,LRes89966,LAve23008,LZer87288,LMul52491],["Add86090","Res76429","Res63328","Fla7185","Con91889","Fla32959","Ave7304","Res45391","Con88153","Ave38662","Lay81783","Res89966","Ave23008","Zer87288","Mul52491"],Mul52491,"Mul52491")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0]]]

Actual:   [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]

Expected: [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]