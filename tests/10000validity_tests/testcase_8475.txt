import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo38399 = tf.keras.layers.Input(shape=([2, 2, 2]))

Glo38399 = keras.layers.GlobalAveragePooling2D(name = 'Glo38399', )(in0Glo38399)
Res91023 = keras.layers.Reshape((2, 1), name = 'Res91023', )(Glo38399)
Res72587 = keras.layers.Reshape((2, 1, 1), name = 'Res72587', )(Res91023)
Res95328 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res95328', )(Res72587)
Glo24663 = keras.layers.GlobalAveragePooling3D(name = 'Glo24663', )(Res95328)
model = tf.keras.models.Model(inputs=[in0Glo38399], outputs=Glo24663)
in0Glo38399 = tf.constant([[[[1.4245, 1.1945], [1.7464, 1.6075]], [[1.5069, 1.4898], [1.9005, 1.543]]]])
print (np.array2string(model.predict([in0Glo38399],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo24663.png')

LGlo38399 = global_average_pooling2D_layer([[[[1.4245, 1.1945], [1.7464, 1.6075]], [[1.5069, 1.4898], [1.9005, 1.543]]]], Glo38399), 
LRes91023 = reshape_layer(Glo38399, [2, 1], Res91023), 
LRes72587 = reshape_layer(Res91023, [2, 1, 1], Res72587), 
LRes95328 = reshape_layer(Res72587, [2, 1, 1, 1], Res95328), 
LGlo24663 = global_average_pooling3D_layer(Res95328, Glo24663), 
exec_layers([LGlo38399,LRes91023,LRes72587,LRes95328,LGlo24663],["Glo38399","Res91023","Res72587","Res95328","Glo24663"],Glo24663,"Glo24663")

Actual (Unparsed): [[1.5516375]]

Expected (Unparsed): [[1.5516375]]

Actual:   [[1.5517]]

Expected: [[1.5517]]