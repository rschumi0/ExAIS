import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub77832 = tf.keras.layers.Input(shape=([2]))
in1Sub77832 = tf.keras.layers.Input(shape=([2]))
in0Ave7353 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave7353 = tf.keras.layers.Input(shape=([2, 2, 1]))

Sub77832 = keras.layers.Subtract(name = 'Sub77832', )([in0Sub77832,in1Sub77832])
Res22639 = keras.layers.Reshape((2, 1), name = 'Res22639', )(Sub77832)
Up_61908 = keras.layers.UpSampling1D(size=(1), name = 'Up_61908', )(Res22639)
Res4714 = keras.layers.Reshape((2, 1, 1), name = 'Res4714', )(Up_61908)
Zer97980 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer97980', )(Res4714)
Ave7353 = keras.layers.Average(name = 'Ave7353', )([in0Ave7353,in1Ave7353])
Min84085 = keras.layers.Minimum(name = 'Min84085', )([Zer97980,Ave7353])
model = tf.keras.models.Model(inputs=[in0Sub77832,in1Sub77832,in0Ave7353,in1Ave7353], outputs=Min84085)
in0Sub77832 = tf.constant([[0.3986, 0.8404]])
in1Sub77832 = tf.constant([[0.0889, 0.4491]])
in0Ave7353 = tf.constant([[[[0.4309], [0.1115]], [[0.5866], [0.2652]]]])
in1Ave7353 = tf.constant([[[[0.008], [0.9156]], [[0.2719], [0.8964]]]])
print (np.array2string(model.predict([in0Sub77832,in1Sub77832,in0Ave7353,in1Ave7353],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min84085.png')

LSub77832 = subtract_layer([[0.3986, 0.8404]], [[0.0889, 0.4491]], Sub77832), 
LRes22639 = reshape_layer(Sub77832, [2, 1], Res22639), 
LUp_61908 = up_sampling1D_layer(Res22639, 1, Up_61908), 
LRes4714 = reshape_layer(Up_61908, [2, 1, 1], Res4714), 
LZer97980 = zero_padding2D_layer(Res4714, 0, 0, 1, 0, Zer97980), 
LAve7353 = average_layer([[[[[0.4309], [0.1115]], [[0.5866], [0.2652]]]], [[[[0.008], [0.9156]], [[0.2719], [0.8964]]]]], Ave7353), 
LMin84085 = minimum_layer([Zer97980,Ave7353], Min84085), 
exec_layers([LSub77832,LRes22639,LUp_61908,LRes4714,LZer97980,LAve7353,LMin84085],["Sub77832","Res22639","Up_61908","Res4714","Zer97980","Ave7353","Min84085"],Min84085,"Min84085")

Actual (Unparsed): [[[[0.0000000], [0.3097000]], [[0.0000000], [0.3913000]]]]

Expected (Unparsed): [[[[0],[0.3097]],[[0],[0.39130000000000004]]]]

Actual:   [[[[0], [0.3097]], [[0], [0.3913]]]]

Expected: [[[[0], [0.3097]], [[0], [0.3914]]]]