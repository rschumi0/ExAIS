import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub88336 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub88336 = tf.keras.layers.Input(shape=([2, 3]))

Sub88336 = keras.layers.Subtract(name = 'Sub88336', )([in0Sub88336,in1Sub88336])
Res50132 = keras.layers.Reshape((2, 3, 1), name = 'Res50132', )(Sub88336)
Res38005 = keras.layers.Reshape((2, 3, 1, 1), name = 'Res38005', )(Res50132)
Zer68061 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer68061', )(Res38005)
Res87265 = keras.layers.Reshape((4, 5, 3), name = 'Res87265', )(Zer68061)
Res47278 = keras.layers.Reshape((4, 15), name = 'Res47278', )(Res87265)
Loc60543 = keras.layers.LocallyConnected1D(4, (3),strides=(1), name = 'Loc60543', )(Res47278)
model = tf.keras.models.Model(inputs=[in0Sub88336,in1Sub88336], outputs=Loc60543)
w = model.get_layer('Loc60543').get_weights() 
w[0] = np.array([[[0.5527, 0.6648, 0.7794, 0.8003], [0.3173, 0.6409, 0.053, 0.3153], [0.196, 0.4809, 0.7997, 0.6919], [0.497, 0.6481, 0.2796, 0.0182], [0.3855, 0.7804, 0.644, 0.4544], [0.5479, 0.3353, 0.5921, 0.7754], [0.1798, 0.6013, 0.3831, 0.072], [0.7267, 0.0705, 0.7153, 0.9292], [0.2361, 0.8847, 0.0598, 0.3847], [0.1398, 0.5686, 0.1344, 0.2372], [0.7822, 0.549, 0.3424, 0.8239], [0.0303, 0.0159, 0.1609, 0.2129], [0.8606, 0.534, 0.662, 0.8682], [0.9024, 0.4325, 0.5792, 0.2369], [0.5366, 0.412, 0.5868, 0.38], [0.2982, 0.9949, 0.7515, 0.7223], [0.0106, 0.4146, 0.4396, 0.2339], [0.2936, 0.291, 0.3095, 0.8699], [0.8271, 0.9717, 0.4098, 0.8954], [0.0306, 0.7303, 0.8133, 0.7992], [0.6211, 0.1113, 0.6656, 0.8622], [0.8509, 0.5825, 0.0053, 0.0884], [0.0937, 0.3174, 0.2191, 0.1255], [0.8484, 0.3661, 0.538, 0.0113], [0.158, 0.6929, 0.5495, 0.0642], [0.9068, 0.5613, 0.3055, 0.003], [0.4473, 0.5272, 0.2374, 0.4307], [0.5384, 0.8678, 0.7564, 0.1432], [0.626, 0.6135, 0.1134, 0.3385], [0.0902, 0.482, 0.8177, 0.6883], [0.1955, 0.9156, 0.6773, 0.4119], [0.1351, 0.115, 0.3089, 0.9414], [0.7365, 0.4308, 0.7894, 0.5084], [0.1124, 0.7247, 0.9743, 0.992], [0.778, 0.3468, 0.8885, 0.6732], [0.5366, 0.1847, 0.5136, 0.113], [0.7361, 0.8404, 0.2413, 0.2369], [0.3384, 0.3617, 0.2379, 0.8483], [0.6122, 0.1153, 0.9765, 0.2149], [0.1562, 0.326, 0.2325, 0.0782], [0.3943, 0.527, 0.9073, 0.4212], [0.6434, 0.6653, 0.1529, 0.5951], [0.3494, 0.8922, 0.3962, 0.9541], [0.1087, 0.1267, 0.0349, 0.9774], [0.6526, 0.3311, 0.7669, 0.9659]], [[0.0545, 0.0578, 0.7461, 0.795], [0.0405, 0.2383, 0.0158, 0.8755], [0.4322, 0.3707, 0.959, 0.4315], [0.4328, 0.2331, 0.8288, 0.4351], [0.6774, 0.0017, 0.7738, 0.0602], [0.7124, 0.1834, 0.155, 0.3101], [0.8451, 0.0874, 0.3703, 0.5561], [0.1058, 0.6535, 0.8434, 0.0833], [0.4082, 0.3328, 0.3172, 0.3817], [0.8546, 0.3721, 0.0951, 0.8432], [0.5379, 0.2918, 0.4185, 0.7302], [0.1206, 0.5687, 0.7359, 0.7658], [0.931, 0.5334, 0.2253, 0.4618], [0.315, 0.2759, 0.562, 0.3516], [0.5008, 0.9168, 0.5919, 0.6183], [0.2933, 0.9448, 0.2639, 0.2267], [0.4995, 0.4475, 0.9056, 0.5509], [0.1074, 0.9721, 0.6818, 0.6689], [0.8855, 0.4366, 0.8688, 0.9466], [0.2564, 0.9861, 0.3963, 0.2678], [0.005, 0.9374, 0.9621, 0.288], [0.6277, 0.9884, 0.9089, 0.381], [0.9028, 0.6808, 0.9675, 0.5328], [0.5684, 0.7012, 0.9155, 0.2943], [0.8286, 0.9817, 0.1811, 0.0455], [0.7812, 0.7147, 0.4272, 0.2486], [0.7558, 0.3412, 0.1931, 0.0705], [0.983, 0.2853, 0.7423, 0.7407], [0.979, 0.7144, 0.3651, 0.2773], [0.5199, 0.8805, 0.5233, 0.7608], [0.1069, 0.669, 0.3829, 0.1668], [0.379, 0.8183, 0.483, 0.8754], [0.0156, 0.9058, 0.5138, 0.3712], [0.2891, 0.5995, 0.4332, 0.316], [0.5812, 0.864, 0.4481, 0.1342], [0.8503, 0.7798, 0.7, 0.484], [0.256, 0.3847, 0.8525, 0.5054], [0.8858, 0.4798, 0.1606, 0.5321], [0.8049, 0.6545, 0.0149, 0.036], [0.4557, 0.8806, 0.4037, 0.9314], [0.7699, 0.9019, 0.2095, 0.0082], [0.2254, 0.3016, 0.7689, 0.1861], [0.4778, 0.5696, 0.6616, 0.4864], [0.1291, 0.7105, 0.2685, 0.1034], [0.6571, 0.9351, 0.2395, 0.7225]]])
w[1] = np.array([[0, 0, 0, 0], [0, 0, 0, 0]])
model.get_layer('Loc60543').set_weights(w) 
in0Sub88336 = tf.constant([[[0.7578, 0.378, 0.5984], [0.9365, 0.1487, 0.3396]]])
in1Sub88336 = tf.constant([[[0.6794, 0.6085, 0.2597], [0.2451, 0.6668, 0.2587]]])
print (np.array2string(model.predict([in0Sub88336,in1Sub88336],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc60543.png')

LSub88336 = subtract_layer([[[0.7578, 0.378, 0.5984], [0.9365, 0.1487, 0.3396]]], [[[0.6794, 0.6085, 0.2597], [0.2451, 0.6668, 0.2587]]], Sub88336), 
LRes50132 = reshape_layer(Sub88336, [2, 3, 1], Res50132), 
LRes38005 = reshape_layer(Res50132, [2, 3, 1, 1], Res38005), 
LZer68061 = zero_padding3D_layer(Res38005, 1, 1, 1, 1, 1, 1, Zer68061), 
LRes87265 = reshape_layer(Zer68061, [4, 5, 3], Res87265), 
LRes47278 = reshape_layer(Res87265, [4, 15], Res47278), 
LLoc60543 = locally_connected1D_layer(Res47278, 3,[[[0.5527, 0.6648, 0.7794, 0.8003], [0.3173, 0.6409, 0.053, 0.3153], [0.196, 0.4809, 0.7997, 0.6919], [0.497, 0.6481, 0.2796, 0.0182], [0.3855, 0.7804, 0.644, 0.4544], [0.5479, 0.3353, 0.5921, 0.7754], [0.1798, 0.6013, 0.3831, 0.072], [0.7267, 0.0705, 0.7153, 0.9292], [0.2361, 0.8847, 0.0598, 0.3847], [0.1398, 0.5686, 0.1344, 0.2372], [0.7822, 0.549, 0.3424, 0.8239], [0.0303, 0.0159, 0.1609, 0.2129], [0.8606, 0.534, 0.662, 0.8682], [0.9024, 0.4325, 0.5792, 0.2369], [0.5366, 0.412, 0.5868, 0.38], [0.2982, 0.9949, 0.7515, 0.7223], [0.0106, 0.4146, 0.4396, 0.2339], [0.2936, 0.291, 0.3095, 0.8699], [0.8271, 0.9717, 0.4098, 0.8954], [0.0306, 0.7303, 0.8133, 0.7992], [0.6211, 0.1113, 0.6656, 0.8622], [0.8509, 0.5825, 0.0053, 0.0884], [0.0937, 0.3174, 0.2191, 0.1255], [0.8484, 0.3661, 0.538, 0.0113], [0.158, 0.6929, 0.5495, 0.0642], [0.9068, 0.5613, 0.3055, 0.003], [0.4473, 0.5272, 0.2374, 0.4307], [0.5384, 0.8678, 0.7564, 0.1432], [0.626, 0.6135, 0.1134, 0.3385], [0.0902, 0.482, 0.8177, 0.6883], [0.1955, 0.9156, 0.6773, 0.4119], [0.1351, 0.115, 0.3089, 0.9414], [0.7365, 0.4308, 0.7894, 0.5084], [0.1124, 0.7247, 0.9743, 0.992], [0.778, 0.3468, 0.8885, 0.6732], [0.5366, 0.1847, 0.5136, 0.113], [0.7361, 0.8404, 0.2413, 0.2369], [0.3384, 0.3617, 0.2379, 0.8483], [0.6122, 0.1153, 0.9765, 0.2149], [0.1562, 0.326, 0.2325, 0.0782], [0.3943, 0.527, 0.9073, 0.4212], [0.6434, 0.6653, 0.1529, 0.5951], [0.3494, 0.8922, 0.3962, 0.9541], [0.1087, 0.1267, 0.0349, 0.9774], [0.6526, 0.3311, 0.7669, 0.9659]], [[0.0545, 0.0578, 0.7461, 0.795], [0.0405, 0.2383, 0.0158, 0.8755], [0.4322, 0.3707, 0.959, 0.4315], [0.4328, 0.2331, 0.8288, 0.4351], [0.6774, 0.0017, 0.7738, 0.0602], [0.7124, 0.1834, 0.155, 0.3101], [0.8451, 0.0874, 0.3703, 0.5561], [0.1058, 0.6535, 0.8434, 0.0833], [0.4082, 0.3328, 0.3172, 0.3817], [0.8546, 0.3721, 0.0951, 0.8432], [0.5379, 0.2918, 0.4185, 0.7302], [0.1206, 0.5687, 0.7359, 0.7658], [0.931, 0.5334, 0.2253, 0.4618], [0.315, 0.2759, 0.562, 0.3516], [0.5008, 0.9168, 0.5919, 0.6183], [0.2933, 0.9448, 0.2639, 0.2267], [0.4995, 0.4475, 0.9056, 0.5509], [0.1074, 0.9721, 0.6818, 0.6689], [0.8855, 0.4366, 0.8688, 0.9466], [0.2564, 0.9861, 0.3963, 0.2678], [0.005, 0.9374, 0.9621, 0.288], [0.6277, 0.9884, 0.9089, 0.381], [0.9028, 0.6808, 0.9675, 0.5328], [0.5684, 0.7012, 0.9155, 0.2943], [0.8286, 0.9817, 0.1811, 0.0455], [0.7812, 0.7147, 0.4272, 0.2486], [0.7558, 0.3412, 0.1931, 0.0705], [0.983, 0.2853, 0.7423, 0.7407], [0.979, 0.7144, 0.3651, 0.2773], [0.5199, 0.8805, 0.5233, 0.7608], [0.1069, 0.669, 0.3829, 0.1668], [0.379, 0.8183, 0.483, 0.8754], [0.0156, 0.9058, 0.5138, 0.3712], [0.2891, 0.5995, 0.4332, 0.316], [0.5812, 0.864, 0.4481, 0.1342], [0.8503, 0.7798, 0.7, 0.484], [0.256, 0.3847, 0.8525, 0.5054], [0.8858, 0.4798, 0.1606, 0.5321], [0.8049, 0.6545, 0.0149, 0.036], [0.4557, 0.8806, 0.4037, 0.9314], [0.7699, 0.9019, 0.2095, 0.0082], [0.2254, 0.3016, 0.7689, 0.1861], [0.4778, 0.5696, 0.6616, 0.4864], [0.1291, 0.7105, 0.2685, 0.1034], [0.6571, 0.9351, 0.2395, 0.7225]]],[[0, 0, 0, 0], [0, 0, 0, 0]], 1, Loc60543), 
exec_layers([LSub88336,LRes50132,LRes38005,LZer68061,LRes87265,LRes47278,LLoc60543],["Sub88336","Res50132","Res38005","Zer68061","Res87265","Res47278","Loc60543"],Loc60543,"Loc60543")

Actual (Unparsed): [[[0.6824174, 0.2692221, 0.6811864, 0.0947669], [-0.0163587, 0.3352204, -0.1846914, 0.1620627]]]

Expected (Unparsed): [[[0.6824173800000001,0.26922218000000003,0.6811865,0.09476695999999997],[-0.016358649999999947,0.33522048,-0.18469128,0.16206275000000003]]]

Actual:   [[[0.6825, 0.2693, 0.6812, 0.0948], [-0.0163, 0.3353, -0.1846, 0.1621]]]

Expected: [[[0.6825, 0.2693, 0.6812, 0.0948], [-0.0163, 0.3353, -0.1846, 0.1621]]]