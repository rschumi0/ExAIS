import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave2659 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave2659 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Ave2659 = keras.layers.Average(name = 'Ave2659', )([in0Ave2659,in1Ave2659])
Up_98551 = keras.layers.UpSampling3D(size=(1, 2, 2), name = 'Up_98551', )(Ave2659)
Res37954 = keras.layers.Reshape((1, 2, 8), name = 'Res37954', )(Up_98551)
Res22959 = keras.layers.Reshape((1, 16), name = 'Res22959', )(Res37954)
Con4254 = keras.layers.Conv1D(3, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con4254', )(Res22959)
model = tf.keras.models.Model(inputs=[in0Ave2659,in1Ave2659], outputs=Con4254)
w = model.get_layer('Con4254').get_weights() 
w[0] = np.array([[[0.771, 0.4645, 0.1209], [0.4107, 0.1729, 0.8531], [0.4091, 0.3453, 0.8141], [0.1626, 0.9642, 0.3447], [0.3848, 0.7031, 0.5636], [0.8049, 0.4373, 0.7912], [0.6484, 0.4086, 0.5534], [0.471, 0.5632, 0.9298], [0.3469, 0.9782, 0.2127], [0.9834, 0.3238, 0.2357], [0.5679, 0.376, 0.8881], [0.1637, 0.7369, 0.85], [0.3317, 0.6106, 0.3781], [0.1738, 0.4716, 0.2661], [0.0805, 0.7326, 0.7133], [0.0079, 0.9597, 0.9982]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con4254').set_weights(w) 
in0Ave2659 = tf.constant([[[[[0.8994, 0.9992], [0.1406, 0.3625]]]]])
in1Ave2659 = tf.constant([[[[[0.5934, 0.5019], [0.8363, 0.1766]]]]])
print (np.array2string(model.predict([in0Ave2659,in1Ave2659],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con4254.png')

LAve2659 = average_layer([[[[[[0.8994, 0.9992], [0.1406, 0.3625]]]]], [[[[[0.5934, 0.5019], [0.8363, 0.1766]]]]]], Ave2659), 
LUp_98551 = up_sampling3D_layer(Ave2659, 1, 2, 2, Up_98551), 
LRes37954 = reshape_layer(Up_98551, [1, 2, 8], Res37954), 
LRes22959 = reshape_layer(Res37954, [1, 16], Res22959), 
LCon4254 = conv1D_layer(Res22959, 1,[[[0.771, 0.4645, 0.1209], [0.4107, 0.1729, 0.8531], [0.4091, 0.3453, 0.8141], [0.1626, 0.9642, 0.3447], [0.3848, 0.7031, 0.5636], [0.8049, 0.4373, 0.7912], [0.6484, 0.4086, 0.5534], [0.471, 0.5632, 0.9298], [0.3469, 0.9782, 0.2127], [0.9834, 0.3238, 0.2357], [0.5679, 0.376, 0.8881], [0.1637, 0.7369, 0.85], [0.3317, 0.6106, 0.3781], [0.1738, 0.4716, 0.2661], [0.0805, 0.7326, 0.7133], [0.0079, 0.9597, 0.9982]]],[0, 0, 0], 1, true, 1, Con4254), 
exec_layers([LAve2659,LUp_98551,LRes37954,LRes22959,LCon4254],["Ave2659","Up_98551","Res37954","Res22959","Con4254"],Con4254,"Con4254")

Actual (Unparsed): [[[3.9537813, 5.1193560, 5.1167827]]]

Expected (Unparsed): [[[3.9537812900000002,5.119355984999999,5.11678264]]]

Actual:   [[[3.9538, 5.1194, 5.1168]]]

Expected: [[[3.9538, 5.1194, 5.1168]]]