import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave70796 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave70796 = tf.keras.layers.Input(shape=([1, 2]))
in0Con74659 = tf.keras.layers.Input(shape=([1, 1]))
in0Up_42496 = tf.keras.layers.Input(shape=([1, 4]))
in0Ave29980 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Ave29980 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Min99195 = tf.keras.layers.Input(shape=([1, 2]))
in1Min99195 = tf.keras.layers.Input(shape=([1, 2]))
in0Con26937 = tf.keras.layers.Input(shape=([1, 2]))

Ave70796 = keras.layers.Average(name = 'Ave70796', )([in0Ave70796,in1Ave70796])
Den89623 = keras.layers.Dense(3,name = 'Den89623', )(Ave70796)
Con74659 = keras.layers.Concatenate(axis=2, name = 'Con74659', )([Den89623,in0Con74659])
Up_42496 = keras.layers.UpSampling1D(size=(2), name = 'Up_42496', )(in0Up_42496)
Res39517 = keras.layers.Reshape((2, 4, 1), name = 'Res39517', )(Up_42496)
Max15869 = keras.layers.MaxPool2D(pool_size=(1, 4), strides=(3, 1), padding='same', name = 'Max15869', )(Res39517)
Res50227 = keras.layers.Reshape((1, 4), name = 'Res50227', )(Max15869)
Ave29980 = keras.layers.Average(name = 'Ave29980', )([in0Ave29980,in1Ave29980])
Res24885 = keras.layers.Reshape((1, 1, 2), name = 'Res24885', )(Ave29980)
Res2840 = keras.layers.Reshape((1, 2), name = 'Res2840', )(Res24885)
Min99195 = keras.layers.Minimum(name = 'Min99195', )([in0Min99195,in1Min99195])
Min76803 = keras.layers.Minimum(name = 'Min76803', )([Res2840,Min99195])
Con26937 = keras.layers.Concatenate(axis=2, name = 'Con26937', )([Min76803,in0Con26937])
Ave60013 = keras.layers.Average(name = 'Ave60013', )([Res50227,Con26937])
Add87928 = keras.layers.Add(name = 'Add87928', )([Con74659,Ave60013])
model = tf.keras.models.Model(inputs=[in0Ave70796,in1Ave70796,in0Con74659,in0Up_42496,in0Ave29980,in1Ave29980,in0Min99195,in1Min99195,in0Con26937], outputs=Add87928)
w = model.get_layer('Den89623').get_weights() 
w[0] = np.array([[0.9598, 0.5104, 0.1683], [0.7394, 0.2568, 0.8765]])
w[1] = np.array([0.7442, 0.7336, 0.387])
model.get_layer('Den89623').set_weights(w) 
in0Ave70796 = tf.constant([[[0.2115, 0.5971]]])
in1Ave70796 = tf.constant([[[0.0906, 0.7044]]])
in0Con74659 = tf.constant([[[0.0303]]])
in0Up_42496 = tf.constant([[[1.4359, 1.4461, 1.9675, 1.7473]]])
in0Ave29980 = tf.constant([[[[[0.6847, 0.4779]]]]])
in1Ave29980 = tf.constant([[[[[0.2338, 0.1896]]]]])
in0Min99195 = tf.constant([[[0.7249, 0.7975]]])
in1Min99195 = tf.constant([[[0.9683, 0.732]]])
in0Con26937 = tf.constant([[[0.7491, 0.5408]]])
print (np.array2string(model.predict([in0Ave70796,in1Ave70796,in0Con74659,in0Up_42496,in0Ave29980,in1Ave29980,in0Min99195,in1Min99195,in0Con26937],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add87928.png')

LAve70796 = average_layer([[[[0.2115, 0.5971]]], [[[0.0906, 0.7044]]]], Ave70796), 
LDen89623 = dense_layer(Ave70796, [[0.9598, 0.5104, 0.1683], [0.7394, 0.2568, 0.8765]],[0.7442, 0.7336, 0.387], Den89623), 
LCon74659 = concatenate_layer([Den89623,[[[0.0303]]]], 2, Con74659), 
LUp_42496 = up_sampling1D_layer([[[1.4359, 1.4461, 1.9675, 1.7473]]], 2, Up_42496), 
LRes39517 = reshape_layer(Up_42496, [2, 4, 1], Res39517), 
LMax15869 = max_pool2D_layer(Res39517, 1, 4, 3, 1, true, Max15869), 
LRes50227 = reshape_layer(Max15869, [1, 4], Res50227), 
LAve29980 = average_layer([[[[[[0.6847, 0.4779]]]]], [[[[[0.2338, 0.1896]]]]]], Ave29980), 
LRes24885 = reshape_layer(Ave29980, [1, 1, 2], Res24885), 
LRes2840 = reshape_layer(Res24885, [1, 2], Res2840), 
LMin99195 = minimum_layer([[[[0.7249, 0.7975]]], [[[0.9683, 0.732]]]], Min99195), 
LMin76803 = minimum_layer([Res2840,Min99195], Min76803), 
LCon26937 = concatenate_layer([Min76803,[[[0.7491, 0.5408]]]], 2, Con26937), 
LAve60013 = average_layer([Res50227,Con26937], Ave60013), 
LAdd87928 = add_layer([Con74659,Ave60013], Add87928), 
exec_layers([LAve70796,LDen89623,LCon74659,LUp_42496,LRes39517,LMax15869,LRes50227,LAve29980,LRes24885,LRes2840,LMin99195,LMin76803,LCon26937,LAve60013,LAdd87928],["Ave70796","Den89623","Con74659","Up_42496","Res39517","Max15869","Res50227","Ave29980","Res24885","Res2840","Min99195","Min76803","Con26937","Ave60013","Add87928"],Add87928,"Add87928")

Actual (Unparsed): [[[2.5837173, 2.1284335, 2.3411041, 1.2844500]]]

Expected (Unparsed): [[[2.5837173399999998,2.1284335199999997,2.34110409,1.28445]]]

Actual:   [[[2.5838, 2.1285, 2.3412, 1.2845]]]

Expected: [[[2.5838, 2.1285, 2.3412, 1.2845]]]