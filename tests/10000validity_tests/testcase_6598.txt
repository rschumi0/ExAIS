import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub70282 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub70282 = tf.keras.layers.Input(shape=([3, 3]))
in0Max30185 = tf.keras.layers.Input(shape=([2, 1]))

Sub70282 = keras.layers.Subtract(name = 'Sub70282', )([in0Sub70282,in1Sub70282])
Res36000 = keras.layers.Reshape((3, 3, 1), name = 'Res36000', )(Sub70282)
Max30185 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='valid', name = 'Max30185', )(in0Max30185)
Res99249 = keras.layers.Reshape((1, 1, 1), name = 'Res99249', )(Max30185)
Ave61077 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave61077', )(Res99249)
Zer60509 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer60509', )(Ave61077)
Sub80564 = keras.layers.Subtract(name = 'Sub80564', )([Res36000,Zer60509])
Glo86052 = keras.layers.GlobalMaxPool2D(name = 'Glo86052', )(Sub80564)
model = tf.keras.models.Model(inputs=[in0Sub70282,in1Sub70282,in0Max30185], outputs=Glo86052)
in0Sub70282 = tf.constant([[[0.1475, 0.7723, 0.3815], [0.6626, 0.9103, 0.338], [0.9533, 0.292, 0.3685]]])
in1Sub70282 = tf.constant([[[0.1921, 0.7055, 0.0922], [0.1961, 0.9366, 0.5449], [0.053, 0.7707, 0.6026]]])
in0Max30185 = tf.constant([[[1.3143], [1.5705]]])
print (np.array2string(model.predict([in0Sub70282,in1Sub70282,in0Max30185],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo86052.png')

LSub70282 = subtract_layer([[[0.1475, 0.7723, 0.3815], [0.6626, 0.9103, 0.338], [0.9533, 0.292, 0.3685]]], [[[0.1921, 0.7055, 0.0922], [0.1961, 0.9366, 0.5449], [0.053, 0.7707, 0.6026]]], Sub70282), 
LRes36000 = reshape_layer(Sub70282, [3, 3, 1], Res36000), 
LMax30185 = max_pool1D_layer([[[1.3143], [1.5705]]], 2, 1, false, Max30185), 
LRes99249 = reshape_layer(Max30185, [1, 1, 1], Res99249), 
LAve61077 = average_pooling2D_layer(Res99249, 1, 1, Ave61077), 
LZer60509 = zero_padding2D_layer(Ave61077, 2, 0, 2, 0, Zer60509), 
LSub80564 = subtract_layer(Res36000,Zer60509, Sub80564), 
LGlo86052 = global_max_pool2D_layer(Sub80564, Glo86052), 
exec_layers([LSub70282,LRes36000,LMax30185,LRes99249,LAve61077,LZer60509,LSub80564,LGlo86052],["Sub70282","Res36000","Max30185","Res99249","Ave61077","Zer60509","Sub80564","Glo86052"],Glo86052,"Glo86052")

Actual (Unparsed): [[0.9003000]]

Expected (Unparsed): [[0.9003]]

Actual:   [[0.9003]]

Expected: [[0.9003]]