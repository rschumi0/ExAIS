import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub86357 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub86357 = tf.keras.layers.Input(shape=([2, 3]))

Sub86357 = keras.layers.Subtract(name = 'Sub86357', )([in0Sub86357,in1Sub86357])
Loc36479 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc36479', )(Sub86357)
model = tf.keras.models.Model(inputs=[in0Sub86357,in1Sub86357], outputs=Loc36479)
w = model.get_layer('Loc36479').get_weights() 
w[0] = np.array([[[0.7752, 0.5464, 0.298, 0.7434], [0.6163, 0.6643, 0.8925, 0.487], [0.5282, 0.3775, 0.9841, 0.4639]], [[0.0234, 0.1037, 0.059, 0.4372], [0.3834, 0.9754, 0.9486, 0.2795], [0.9031, 0.7215, 0.8739, 0.7706]]])
w[1] = np.array([[0, 0, 0, 0], [0, 0, 0, 0]])
model.get_layer('Loc36479').set_weights(w) 
in0Sub86357 = tf.constant([[[0.1301, 0.8431, 0.1752], [0.2112, 0.1356, 0.92]]])
in1Sub86357 = tf.constant([[[0.8876, 0.5746, 0.4826], [0.8212, 0.2603, 0.7093]]])
print (np.array2string(model.predict([in0Sub86357,in1Sub86357],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc36479.png')

LSub86357 = subtract_layer([[[0.1301, 0.8431, 0.1752], [0.2112, 0.1356, 0.92]]], [[[0.8876, 0.5746, 0.4826], [0.8212, 0.2603, 0.7093]]], Sub86357), 
LLoc36479 = locally_connected1D_layer(Sub86357, 1,[[[0.7752, 0.5464, 0.298, 0.7434], [0.6163, 0.6643, 0.8925, 0.487], [0.5282, 0.3775, 0.9841, 0.4639]], [[0.0234, 0.1037, 0.059, 0.4372], [0.3834, 0.9754, 0.9486, 0.2795], [0.9031, 0.7215, 0.8739, 0.7706]]],[[0, 0, 0, 0], [0, 0, 0, 0]], 1, Loc36479), 
exec_layers([LSub86357,LLoc36479],["Sub86357","Loc36479"],Loc36479,"Loc36479")

Actual (Unparsed): [[[-0.5841061, -0.3515769, -0.2886111, -0.5749689], [0.1281992, -0.0328693, 0.0298503, -0.1391802]]]

Expected (Unparsed): [[[-0.5841061300000001,-0.35157695,-0.28861108999999996,-0.57496886],[0.12819919000000002,-0.032869329999999974,0.02985031000000002,-0.13918023000000007]]]

Actual:   [[[-0.5841, -0.3515, -0.2886, -0.5749], [0.1282, -0.0328, 0.0299, -0.1391]]]

Expected: [[[-0.5841, -0.3515, -0.2886, -0.5749], [0.1282, -0.0328, 0.0299, -0.1391]]]