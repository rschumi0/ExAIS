import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro36882 = tf.keras.layers.Input(shape=([3, 4, 1]))
in0Con520 = tf.keras.layers.Input(shape=([3, 3]))
in0Con14282 = tf.keras.layers.Input(shape=([1, 1]))

Cro36882 = keras.layers.Cropping2D(cropping=((0, 0), (3, 0)), name = 'Cro36882', )(in0Cro36882)
Mas9349 = keras.layers.Masking(mask_value=1, name = 'Mas9349', )(Cro36882)
Res81856 = keras.layers.Reshape((3, 1), name = 'Res81856', )(Mas9349)
Con520 = keras.layers.Concatenate(axis=2, name = 'Con520', )([Res81856,in0Con520])
Con14282 = keras.layers.Conv1D(4, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con14282', )(in0Con14282)
Zer70884 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer70884', )(Con14282)
Add18055 = keras.layers.Add(name = 'Add18055', )([Con520,Zer70884])
Cro22346 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro22346', )(Add18055)
model = tf.keras.models.Model(inputs=[in0Cro36882,in0Con520,in0Con14282], outputs=Cro22346)
w = model.get_layer('Con14282').get_weights() 
w[0] = np.array([[[0.4813, 0.4171, 0.132, 0.0815]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con14282').set_weights(w) 
in0Cro36882 = tf.constant([[[[1.3605], [1.955], [1.4005], [1.1903]], [[1.6972], [1.5278], [1.1933], [1.3463]], [[1.8673], [1.4902], [1.7135], [1.1302]]]])
in0Con520 = tf.constant([[[0.7976, 0.7881, 0.8724], [0.8194, 0.9161, 0.6348], [0.2012, 0.7308, 0.729]]])
in0Con14282 = tf.constant([[[0.5775]]])
print (np.array2string(model.predict([in0Cro36882,in0Con520,in0Con14282],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro22346.png')

LCro36882 = cropping2D_layer([[[[1.3605], [1.955], [1.4005], [1.1903]], [[1.6972], [1.5278], [1.1933], [1.3463]], [[1.8673], [1.4902], [1.7135], [1.1302]]]], 0, 0, 3, 0, Cro36882), 
LMas9349 = masking_layer(Cro36882, 1, Mas9349), 
LRes81856 = reshape_layer(Mas9349, [3, 1], Res81856), 
LCon520 = concatenate_layer([Res81856,[[[0.7976, 0.7881, 0.8724], [0.8194, 0.9161, 0.6348], [0.2012, 0.7308, 0.729]]]], 2, Con520), 
LCon14282 = conv1D_layer([[[0.5775]]], 1,[[[0.4813, 0.4171, 0.132, 0.0815]]],[0, 0, 0, 0], 1, true, 1, Con14282), 
LZer70884 = zero_padding1D_layer(Con14282, 2, 0, Zer70884), 
LAdd18055 = add_layer([Con520,Zer70884], Add18055), 
LCro22346 = cropping1D_layer(Add18055, 0, 0, Cro22346), 
exec_layers([LCro36882,LMas9349,LRes81856,LCon520,LCon14282,LZer70884,LAdd18055,LCro22346],["Cro36882","Mas9349","Res81856","Con520","Con14282","Zer70884","Add18055","Cro22346"],Cro22346,"Cro22346")

Actual (Unparsed): [[[1.1903000, 0.7976000, 0.7881000, 0.8724000], [1.3463000, 0.8194000, 0.9161000, 0.6348000], [1.4081508, 0.4420752, 0.8070300, 0.7760662]]]

Expected (Unparsed): [[[1.1903,0.7976,0.7881,0.8724],[1.3463,0.8194,0.9161,0.6348],[1.4081507500000001,0.44207525000000003,0.80703,0.77606625]]]

Actual:   [[[1.1903, 0.7976, 0.7881, 0.8724], [1.3463, 0.8194, 0.9161, 0.6348], [1.4082, 0.4421, 0.8071, 0.7761]]]

Expected: [[[1.1903, 0.7976, 0.7881, 0.8724], [1.3463, 0.8194, 0.9161, 0.6348], [1.4082, 0.4421, 0.8071, 0.7761]]]