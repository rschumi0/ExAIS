import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul47066 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul47066 = tf.keras.layers.Input(shape=([1, 1]))

Mul47066 = keras.layers.Multiply(name = 'Mul47066', )([in0Mul47066,in1Mul47066])
GRU35965 = keras.layers.GRU(2,reset_after=True, recurrent_activation='sigmoid', name = 'GRU35965', )(Mul47066)
model = tf.keras.models.Model(inputs=[in0Mul47066,in1Mul47066], outputs=GRU35965)
w = model.get_layer('GRU35965').get_weights() 
w[0] = np.array([[1, 4, 10, 7, 3, 1]])
w[1] = np.array([[1, 10, 9, 9, 6, 4], [8, 1, 9, 9, 1, 9]])
w[2] = np.array([[8, 3, 1, 10, 9, 2], [6, 9, 8, 10, 8, 9]])
model.get_layer('GRU35965').set_weights(w) 
in0Mul47066 = tf.constant([[[0.9878]]])
in1Mul47066 = tf.constant([[[0.1474]]])
print (np.array2string(model.predict([in0Mul47066,in1Mul47066],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='GRU35965.png')

LMul47066 = multiply_layer([[[[0.9878]]], [[[0.1474]]]], Mul47066), 
LGRU35965 = gru_layer(Mul47066,[[1, 4, 10, 7, 3, 1]],[[1, 10, 9, 9, 6, 4], [8, 1, 9, 9, 1, 9]],[[8, 3, 1, 10, 9, 2], [6, 9, 8, 10, 8, 9]], true, GRU35965), 
exec_layers([LMul47066,LGRU35965],["Mul47066","GRU35965"],GRU35965,"GRU35965")

Actual (Unparsed): [[0.0000007, 0.0000034]]

Expected (Unparsed): [[7.188576810479564e-7,3.431852647074631e-6]]

Actual:   [[0, 0]]

Expected: [[0, 0]]