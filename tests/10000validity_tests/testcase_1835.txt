import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub98562 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in1Sub98562 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in0Add41907 = tf.keras.layers.Input(shape=([1, 2]))
in1Add41907 = tf.keras.layers.Input(shape=([1, 2]))

Sub98562 = keras.layers.Subtract(name = 'Sub98562', )([in0Sub98562,in1Sub98562])
Res68941 = keras.layers.Reshape((2, 3, 4), name = 'Res68941', )(Sub98562)
Add41907 = keras.layers.Add(name = 'Add41907', )([in0Add41907,in1Add41907])
Res16270 = keras.layers.Reshape((1, 2, 1), name = 'Res16270', )(Add41907)
Con41668 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 1), padding='same', name = 'Con41668', )(Res16270)
Zer69988 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer69988', )(Con41668)
Min1658 = keras.layers.Minimum(name = 'Min1658', )([Res68941,Zer69988])
model = tf.keras.models.Model(inputs=[in0Sub98562,in1Sub98562,in0Add41907,in1Add41907], outputs=Min1658)
w = model.get_layer('Con41668').get_weights() 
w[0] = np.array([[[[0.6453], [0.9598], [0.9316], [0.4651]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con41668').set_weights(w) 
in0Sub98562 = tf.constant([[[[[0.4548, 0.5194], [0.7344, 0.7768]], [[0.7086, 0.6258], [0.5184, 0.8842]], [[0.7337, 0.4041], [0.3573, 0.9424]]], [[[0.8533, 0.8969], [0.7477, 0.2942]], [[0.4808, 0.2667], [0.0694, 0.5885]], [[0.51, 0.6392], [0.5162, 0.0721]]]]])
in1Sub98562 = tf.constant([[[[[0.1791, 0.9938], [0.0295, 0.2925]], [[0.0978, 0.9253], [0.2551, 0.1996]], [[0.9866, 0.9354], [0.9217, 0.6108]]], [[[0.8212, 0.2842], [0.1961, 0.0158]], [[0.4939, 0.328], [0.5079, 0.7322]], [[0.8119, 0.7024], [0.0578, 0.5001]]]]])
in0Add41907 = tf.constant([[[0.6342, 0.6716]]])
in1Add41907 = tf.constant([[[0.7226, 0.7026]]])
print (np.array2string(model.predict([in0Sub98562,in1Sub98562,in0Add41907,in1Add41907],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min1658.png')

LSub98562 = subtract_layer([[[[[0.4548, 0.5194], [0.7344, 0.7768]], [[0.7086, 0.6258], [0.5184, 0.8842]], [[0.7337, 0.4041], [0.3573, 0.9424]]], [[[0.8533, 0.8969], [0.7477, 0.2942]], [[0.4808, 0.2667], [0.0694, 0.5885]], [[0.51, 0.6392], [0.5162, 0.0721]]]]], [[[[[0.1791, 0.9938], [0.0295, 0.2925]], [[0.0978, 0.9253], [0.2551, 0.1996]], [[0.9866, 0.9354], [0.9217, 0.6108]]], [[[0.8212, 0.2842], [0.1961, 0.0158]], [[0.4939, 0.328], [0.5079, 0.7322]], [[0.8119, 0.7024], [0.0578, 0.5001]]]]], Sub98562), 
LRes68941 = reshape_layer(Sub98562, [2, 3, 4], Res68941), 
LAdd41907 = add_layer([[[[0.6342, 0.6716]]], [[[0.7226, 0.7026]]]], Add41907), 
LRes16270 = reshape_layer(Add41907, [1, 2, 1], Res16270), 
LCon41668 = conv2D_transpose_layer(Res16270, 1, 1,[[[[0.6453], [0.9598], [0.9316], [0.4651]]]],[0, 0, 0, 0], 1, 1, true, Con41668), 
LZer69988 = zero_padding2D_layer(Con41668, 1, 0, 1, 0, Zer69988), 
LMin1658 = minimum_layer([Res68941,Zer69988], Min1658), 
exec_layers([LSub98562,LRes68941,LAdd41907,LRes16270,LCon41668,LZer69988,LMin1658],["Sub98562","Res68941","Add41907","Res16270","Con41668","Zer69988","Min1658"],Min1658,"Min1658")

Actual (Unparsed): [[[[0.0000000, -0.4744000, 0.0000000, 0.0000000], [0.0000000, -0.2995000, 0.0000000, 0.0000000], [-0.2529000, -0.5313000, -0.5644000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [-0.0131000, -0.0613000, -0.4385000, -0.1437000], [-0.3019000, -0.0632001, 0.4584000, -0.4280000]]]]

Expected (Unparsed): [[[[0,-0.47440000000000004,0,0],[0,-0.2995,0,0],[-0.2529,-0.5313,-0.5644,0]],[[0,0,0,0],[-0.0131,-0.06130000000000002,-0.4385,-0.14369999999999994],[-0.30189999999999995,-0.06320000000000003,0.4584,-0.428]]]]

Actual:   [[[[0, -0.4744, 0, 0], [0, -0.2995, 0, 0], [-0.2529, -0.5313, -0.5644, 0]], [[0, 0, 0, 0], [-0.0131, -0.0613, -0.4385, -0.1437], [-0.3019, -0.0632, 0.4584, -0.428]]]]

Expected: [[[[0, -0.4744, 0, 0], [0, -0.2995, 0, 0], [-0.2529, -0.5313, -0.5644, 0]], [[0, 0, 0, 0], [-0.0131, -0.0613, -0.4385, -0.1436], [-0.3018, -0.0632, 0.4584, -0.428]]]]