import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min47584 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min47584 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Glo25646 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con59838 = tf.keras.layers.Input(shape=([3]))
in0Lay43419 = tf.keras.layers.Input(shape=([4]))
in0Con46550 = tf.keras.layers.Input(shape=([4, 1]))
in0Per72867 = tf.keras.layers.Input(shape=([2, 1]))
in0Con43161 = tf.keras.layers.Input(shape=([4, 1]))
in0Zer66930 = tf.keras.layers.Input(shape=([2, 2]))

Min47584 = keras.layers.Minimum(name = 'Min47584', )([in0Min47584,in1Min47584])
Res63187 = keras.layers.Reshape((1, 1, 1), name = 'Res63187', )(Min47584)
Res60685 = keras.layers.Reshape((1, 1), name = 'Res60685', )(Res63187)
Zer1379 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer1379', )(Res60685)
Glo25646 = keras.layers.GlobalMaxPool2D(name = 'Glo25646', )(in0Glo25646)
Con59838 = keras.layers.Concatenate(axis=1, name = 'Con59838', )([Glo25646,in0Con59838])
Lay43419 = keras.layers.LayerNormalization(axis=1, epsilon=2.3040840193268193, name = 'Lay43419', )(in0Lay43419)
Ave72963 = keras.layers.Average(name = 'Ave72963', )([Con59838,Lay43419])
Res19882 = keras.layers.Reshape((4, 1), name = 'Res19882', )(Ave72963)
Con46550 = keras.layers.Concatenate(axis=2, name = 'Con46550', )([Res19882,in0Con46550])
Per72867 = keras.layers.Permute((2,1), name = 'Per72867',)(in0Per72867)
Dot33060 = keras.layers.Dot(axes=(2, 2), name = 'Dot33060', )([Con46550,Per72867])
Min80119 = keras.layers.Minimum(name = 'Min80119', )([Zer1379,Dot33060])
Con43161 = keras.layers.Concatenate(axis=2, name = 'Con43161', )([Min80119,in0Con43161])
Zer66930 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer66930', )(in0Zer66930)
Min40803 = keras.layers.Minimum(name = 'Min40803', )([Con43161,Zer66930])
model = tf.keras.models.Model(inputs=[in0Min47584,in1Min47584,in0Glo25646,in0Con59838,in0Lay43419,in0Con46550,in0Per72867,in0Con43161,in0Zer66930], outputs=Min40803)
in0Min47584 = tf.constant([[[[[0.0639]]]]])
in1Min47584 = tf.constant([[[[[0.8189]]]]])
in0Glo25646 = tf.constant([[[[1.4698]]]])
in0Con59838 = tf.constant([[0.6055, 0.0438, 0.4403]])
in0Lay43419 = tf.constant([[1.0522, 1.4315, 1.3004, 1.0851]])
in0Con46550 = tf.constant([[[0.4895], [0.1792], [0.3304], [0.1786]]])
in0Per72867 = tf.constant([[[1.3159], [1.0804]]])
in0Con43161 = tf.constant([[[0.2671], [0.8668], [0.4388], [0.276]]])
in0Zer66930 = tf.constant([[[1.0473, 1.8799], [1.9998, 1.7293]]])
print (np.array2string(model.predict([in0Min47584,in1Min47584,in0Glo25646,in0Con59838,in0Lay43419,in0Con46550,in0Per72867,in0Con43161,in0Zer66930],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min40803.png')

LMin47584 = minimum_layer([[[[[[0.0639]]]]], [[[[[0.8189]]]]]], Min47584), 
LRes63187 = reshape_layer(Min47584, [1, 1, 1], Res63187), 
LRes60685 = reshape_layer(Res63187, [1, 1], Res60685), 
LZer1379 = zero_padding1D_layer(Res60685, 3, 0, Zer1379), 
LGlo25646 = global_max_pool2D_layer([[[[1.4698]]]], Glo25646), 
LCon59838 = concatenate_layer([Glo25646,[[0.6055, 0.0438, 0.4403]]], 1, Con59838), 
LLay43419 = layer_normalization_layer([[1.0522, 1.4315, 1.3004, 1.0851]], 1, 2.3040840193268193, Lay43419), 
LAve72963 = average_layer([Con59838,Lay43419], Ave72963), 
LRes19882 = reshape_layer(Ave72963, [4, 1], Res19882), 
LCon46550 = concatenate_layer([Res19882,[[[0.4895], [0.1792], [0.3304], [0.1786]]]], 2, Con46550), 
LPer72867 = permute_layer([[[1.3159], [1.0804]]], 2,1, Per72867), 
LDot33060 = dot_layer(Con46550,Per72867, 2, 2, Dot33060), 
LMin80119 = minimum_layer([Zer1379,Dot33060], Min80119), 
LCon43161 = concatenate_layer([Min80119,[[[0.2671], [0.8668], [0.4388], [0.276]]]], 2, Con43161), 
LZer66930 = zero_padding1D_layer([[[1.0473, 1.8799], [1.9998, 1.7293]]], 1, 1, Zer66930), 
LMin40803 = minimum_layer([Con43161,Zer66930], Min40803), 
exec_layers([LMin47584,LRes63187,LRes60685,LZer1379,LGlo25646,LCon59838,LLay43419,LAve72963,LRes19882,LCon46550,LPer72867,LDot33060,LMin80119,LCon43161,LZer66930,LMin40803],["Min47584","Res63187","Res60685","Zer1379","Glo25646","Con59838","Lay43419","Ave72963","Res19882","Con46550","Per72867","Dot33060","Min80119","Con43161","Zer66930","Min40803"],Min40803,"Min40803")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.8668000], [0.0000000, 0.4388000], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0],[0,0.8668],[0,0.4388],[0,0]]]

Actual:   [[[0, 0], [0, 0.8668], [0, 0.4388], [0, 0]]]

Expected: [[[0, 0], [0, 0.8668], [0, 0.4388], [0, 0]]]