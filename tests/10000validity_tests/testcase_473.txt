import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min76866 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Min76866 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Con36301 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con23145 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Cro2103 = tf.keras.layers.Input(shape=([4, 2, 1, 2]))
in0Dot11456 = tf.keras.layers.Input(shape=([2]))
in1Dot11456 = tf.keras.layers.Input(shape=([2]))
in0Con43386 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Min4705 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Min4705 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Min76866 = keras.layers.Minimum(name = 'Min76866', )([in0Min76866,in1Min76866])
Res23248 = keras.layers.Reshape((1, 2, 4), name = 'Res23248', )(Min76866)
Res19045 = keras.layers.Reshape((1, 8), name = 'Res19045', )(Res23248)
Con36301 = keras.layers.Conv2D(2, (2, 2),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con36301', )(in0Con36301)
Res12 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res12', )(Con36301)
Con23145 = keras.layers.Concatenate(axis=4, name = 'Con23145', )([Res12,in0Con23145])
Cro2103 = keras.layers.Cropping3D(cropping=((3, 0), (0, 1), (0, 0)), name = 'Cro2103', )(in0Cro2103)
Zer5662 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer5662', )(Cro2103)
Mul54692 = keras.layers.Multiply(name = 'Mul54692', )([Con23145,Zer5662])
Dot11456 = keras.layers.Dot(axes=(1, 1), name = 'Dot11456', )([in0Dot11456,in1Dot11456])
Res60953 = keras.layers.Reshape((1, 1), name = 'Res60953', )(Dot11456)
Res64252 = keras.layers.Reshape((1, 1, 1), name = 'Res64252', )(Res60953)
Res30326 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res30326', )(Res64252)
Zer44354 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer44354', )(Res30326)
Con43386 = keras.layers.Concatenate(axis=4, name = 'Con43386', )([Zer44354,in0Con43386])
Min4705 = keras.layers.Minimum(name = 'Min4705', )([in0Min4705,in1Min4705])
Sub73704 = keras.layers.Subtract(name = 'Sub73704', )([Con43386,Min4705])
Sub22124 = keras.layers.Subtract(name = 'Sub22124', )([Mul54692,Sub73704])
Res15998 = keras.layers.Reshape((2, 2, 4), name = 'Res15998', )(Sub22124)
Res24829 = keras.layers.Reshape((2, 8), name = 'Res24829', )(Res15998)
Dot26686 = keras.layers.Dot(axes=(2, 2), name = 'Dot26686', )([Res19045,Res24829])
model = tf.keras.models.Model(inputs=[in0Min76866,in1Min76866,in0Con36301,in0Con23145,in0Cro2103,in0Dot11456,in1Dot11456,in0Con43386,in0Min4705,in1Min4705], outputs=Dot26686)
w = model.get_layer('Con36301').get_weights() 
w[0] = np.array([[[[0.9702, 0.5608], [0.2888, 0.9307]], [[0.3333, 0.3776], [0.4649, 0.6436]]], [[[0.1716, 0.2727], [0.3272, 0.1314]], [[0.5133, 0.5095], [0.7514, 0.9585]]]])
w[1] = np.array([0, 0])
model.get_layer('Con36301').set_weights(w) 
in0Min76866 = tf.constant([[[[[0.2736, 0.1333], [0.2866, 0.6875]], [[0.2133, 0.7395], [0.0942, 0.9115]]]]])
in1Min76866 = tf.constant([[[[[0.024, 0.5425], [0.1276, 0.7766]], [[0.2293, 0.2939], [0.043, 0.7736]]]]])
in0Con36301 = tf.constant([[[[0.5393, 0.9294], [0.4588, 0.3039]], [[0.5698, 0.0578], [0.9783, 0.001]]]])
in0Con23145 = tf.constant([[[[[0.4487], [0.634]], [[0.9555], [0.2331]]], [[[0.2629], [0.6401]], [[0.6252], [0.2607]]]]])
in0Cro2103 = tf.constant([[[[[1.5905, 1.6095]], [[1.1147, 1.9029]]], [[[1.9286, 1.7712]], [[1.8058, 1.6729]]], [[[1.1931, 1.9505]], [[1.2038, 1.2568]]], [[[1.1894, 1.5313]], [[1.0802, 1.4657]]]]])
in0Dot11456 = tf.constant([[0.2474, 0.6103]])
in1Dot11456 = tf.constant([[0.4939, 0.9753]])
in0Con43386 = tf.constant([[[[[0.7584], [0.5816]], [[0.7336], [0.0491]]], [[[0.5566], [0.3931]], [[0.4726], [0.1691]]]]])
in0Min4705 = tf.constant([[[[[0.7007, 0.7376], [0.3364, 0.1469]], [[0.4228, 0.921], [0.9916, 0.8898]]], [[[0.65, 0.8035], [0.6247, 0.5112]], [[0.8064, 0.9711], [0.5482, 0.1274]]]]])
in1Min4705 = tf.constant([[[[[0.6783, 0.809], [0.7078, 0.747]], [[0.084, 0.1861], [0.5731, 0.5799]]], [[[0.1325, 0.5212], [0.6247, 0.4732]], [[0.2732, 0.4576], [0.1883, 0.6303]]]]])
print (np.array2string(model.predict([in0Min76866,in1Min76866,in0Con36301,in0Con23145,in0Cro2103,in0Dot11456,in1Dot11456,in0Con43386,in0Min4705,in1Min4705],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot26686.png')

LMin76866 = minimum_layer([[[[[[0.2736, 0.1333], [0.2866, 0.6875]], [[0.2133, 0.7395], [0.0942, 0.9115]]]]], [[[[[0.024, 0.5425], [0.1276, 0.7766]], [[0.2293, 0.2939], [0.043, 0.7736]]]]]], Min76866), 
LRes23248 = reshape_layer(Min76866, [1, 2, 4], Res23248), 
LRes19045 = reshape_layer(Res23248, [1, 8], Res19045), 
LCon36301 = conv2D_layer([[[[0.5393, 0.9294], [0.4588, 0.3039]], [[0.5698, 0.0578], [0.9783, 0.001]]]], 2, 2,[[[[0.9702, 0.5608], [0.2888, 0.9307]], [[0.3333, 0.3776], [0.4649, 0.6436]]], [[[0.1716, 0.2727], [0.3272, 0.1314]], [[0.5133, 0.5095], [0.7514, 0.9585]]]],[0, 0], 1, 1, true, 1, 1, Con36301), 
LRes12 = reshape_layer(Con36301, [2, 2, 2, 1], Res12), 
LCon23145 = concatenate_layer([Res12,[[[[[0.4487], [0.634]], [[0.9555], [0.2331]]], [[[0.2629], [0.6401]], [[0.6252], [0.2607]]]]]], 4, Con23145), 
LCro2103 = cropping3D_layer([[[[[1.5905, 1.6095]], [[1.1147, 1.9029]]], [[[1.9286, 1.7712]], [[1.8058, 1.6729]]], [[[1.1931, 1.9505]], [[1.2038, 1.2568]]], [[[1.1894, 1.5313]], [[1.0802, 1.4657]]]]], 3, 0, 0, 1, 0, 0, Cro2103), 
LZer5662 = zero_padding3D_layer(Cro2103, 1, 0, 1, 0, 1, 0, Zer5662), 
LMul54692 = multiply_layer([Con23145,Zer5662], Mul54692), 
LDot11456 = dot_layer([[0.2474, 0.6103]], [[0.4939, 0.9753]], 1, 1, Dot11456), 
LRes60953 = reshape_layer(Dot11456, [1, 1], Res60953), 
LRes64252 = reshape_layer(Res60953, [1, 1, 1], Res64252), 
LRes30326 = reshape_layer(Res64252, [1, 1, 1, 1], Res30326), 
LZer44354 = zero_padding3D_layer(Res30326, 1, 0, 1, 0, 1, 0, Zer44354), 
LCon43386 = concatenate_layer([Zer44354,[[[[[0.7584], [0.5816]], [[0.7336], [0.0491]]], [[[0.5566], [0.3931]], [[0.4726], [0.1691]]]]]], 4, Con43386), 
LMin4705 = minimum_layer([[[[[[0.7007, 0.7376], [0.3364, 0.1469]], [[0.4228, 0.921], [0.9916, 0.8898]]], [[[0.65, 0.8035], [0.6247, 0.5112]], [[0.8064, 0.9711], [0.5482, 0.1274]]]]], [[[[[0.6783, 0.809], [0.7078, 0.747]], [[0.084, 0.1861], [0.5731, 0.5799]]], [[[0.1325, 0.5212], [0.6247, 0.4732]], [[0.2732, 0.4576], [0.1883, 0.6303]]]]]], Min4705), 
LSub73704 = subtract_layer(Con43386,Min4705, Sub73704), 
LSub22124 = subtract_layer(Mul54692,Sub73704, Sub22124), 
LRes15998 = reshape_layer(Sub22124, [2, 2, 4], Res15998), 
LRes24829 = reshape_layer(Res15998, [2, 8], Res24829), 
LDot26686 = dot_layer(Res19045,Res24829, 2, 2, Dot26686), 
exec_layers([LMin76866,LRes23248,LRes19045,LCon36301,LRes12,LCon23145,LCro2103,LZer5662,LMul54692,LDot11456,LRes60953,LRes64252,LRes30326,LZer44354,LCon43386,LMin4705,LSub73704,LSub22124,LRes15998,LRes24829,LDot26686],["Min76866","Res23248","Res19045","Con36301","Res12","Con23145","Cro2103","Zer5662","Mul54692","Dot11456","Res60953","Res64252","Res30326","Zer44354","Con43386","Min4705","Sub73704","Sub22124","Res15998","Res24829","Dot26686"],Dot26686,"Dot26686")

Actual (Unparsed): [[[0.0498521, 0.4690312]]]

Expected (Unparsed): [[[0.04985207999999991,0.469031244111228]]]

Actual:   [[[0.0499, 0.4691]]]

Expected: [[[0.0499, 0.4691]]]