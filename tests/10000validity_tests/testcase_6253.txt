import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot92046 = tf.keras.layers.Input(shape=([2]))
in1Dot92046 = tf.keras.layers.Input(shape=([2]))
in0Min10215 = tf.keras.layers.Input(shape=([1, 1]))
in1Min10215 = tf.keras.layers.Input(shape=([1, 1]))
in0Con42817 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Mul99054 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Mul99054 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Ave86476 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave86476 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Dot92046 = keras.layers.Dot(axes=(1, 1), name = 'Dot92046', )([in0Dot92046,in1Dot92046])
Res61145 = keras.layers.Reshape((1, 1), name = 'Res61145', )(Dot92046)
Min10215 = keras.layers.Minimum(name = 'Min10215', )([in0Min10215,in1Min10215])
Max49579 = keras.layers.Maximum(name = 'Max49579', )([Res61145,Min10215])
Res2249 = keras.layers.Reshape((1, 1, 1), name = 'Res2249', )(Max49579)
Res40498 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res40498', )(Res2249)
Zer46810 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer46810', )(Res40498)
Con42817 = keras.layers.Concatenate(axis=4, name = 'Con42817', )([Zer46810,in0Con42817])
Mul99054 = keras.layers.Multiply(name = 'Mul99054', )([in0Mul99054,in1Mul99054])
Min49397 = keras.layers.Minimum(name = 'Min49397', )([Con42817,Mul99054])
Ave86476 = keras.layers.Average(name = 'Ave86476', )([in0Ave86476,in1Ave86476])
Max95239 = keras.layers.Maximum(name = 'Max95239', )([Min49397,Ave86476])
Res55031 = keras.layers.Reshape((1, 1, 4), name = 'Res55031', )(Max95239)
Glo60074 = keras.layers.GlobalAveragePooling2D(name = 'Glo60074', )(Res55031)
model = tf.keras.models.Model(inputs=[in0Dot92046,in1Dot92046,in0Min10215,in1Min10215,in0Con42817,in0Mul99054,in1Mul99054,in0Ave86476,in1Ave86476], outputs=Glo60074)
in0Dot92046 = tf.constant([[0.6794, 0.8126]])
in1Dot92046 = tf.constant([[0.8045, 0.2347]])
in0Min10215 = tf.constant([[[0.4471]]])
in1Min10215 = tf.constant([[[0.2621]]])
in0Con42817 = tf.constant([[[[[0.93], [0.6306]]]]])
in0Mul99054 = tf.constant([[[[[0.3817, 0.6087], [0.5602, 0.8362]]]]])
in1Mul99054 = tf.constant([[[[[0.3654, 0.3566], [0.7656, 0.6305]]]]])
in0Ave86476 = tf.constant([[[[[0.0445, 0.9965], [0.4922, 0.8643]]]]])
in1Ave86476 = tf.constant([[[[[0.7266, 0.976], [0.2159, 0.9635]]]]])
print (np.array2string(model.predict([in0Dot92046,in1Dot92046,in0Min10215,in1Min10215,in0Con42817,in0Mul99054,in1Mul99054,in0Ave86476,in1Ave86476],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo60074.png')

LDot92046 = dot_layer([[0.6794, 0.8126]], [[0.8045, 0.2347]], 1, 1, Dot92046), 
LRes61145 = reshape_layer(Dot92046, [1, 1], Res61145), 
LMin10215 = minimum_layer([[[[0.4471]]], [[[0.2621]]]], Min10215), 
LMax49579 = maximum_layer([Res61145,Min10215], Max49579), 
LRes2249 = reshape_layer(Max49579, [1, 1, 1], Res2249), 
LRes40498 = reshape_layer(Res2249, [1, 1, 1, 1], Res40498), 
LZer46810 = zero_padding3D_layer(Res40498, 0, 0, 0, 0, 1, 0, Zer46810), 
LCon42817 = concatenate_layer([Zer46810,[[[[[0.93], [0.6306]]]]]], 4, Con42817), 
LMul99054 = multiply_layer([[[[[[0.3817, 0.6087], [0.5602, 0.8362]]]]], [[[[[0.3654, 0.3566], [0.7656, 0.6305]]]]]], Mul99054), 
LMin49397 = minimum_layer([Con42817,Mul99054], Min49397), 
LAve86476 = average_layer([[[[[[0.0445, 0.9965], [0.4922, 0.8643]]]]], [[[[[0.7266, 0.976], [0.2159, 0.9635]]]]]], Ave86476), 
LMax95239 = maximum_layer([Min49397,Ave86476], Max95239), 
LRes55031 = reshape_layer(Max95239, [1, 1, 4], Res55031), 
LGlo60074 = global_average_pooling2D_layer(Res55031, Glo60074), 
exec_layers([LDot92046,LRes61145,LMin10215,LMax49579,LRes2249,LRes40498,LZer46810,LCon42817,LMul99054,LMin49397,LAve86476,LMax95239,LRes55031,LGlo60074],["Dot92046","Res61145","Min10215","Max49579","Res2249","Res40498","Zer46810","Con42817","Mul99054","Min49397","Ave86476","Max95239","Res55031","Glo60074"],Glo60074,"Glo60074")

Actual (Unparsed): [[0.3855500, 0.9862500, 0.4288891, 0.9139000]]

Expected (Unparsed): [[0.38555,0.9862500000000001,0.42888912,0.9138999999999999]]

Actual:   [[0.3856, 0.9863, 0.4289, 0.9139]]

Expected: [[0.3856, 0.9863, 0.4289, 0.9139]]