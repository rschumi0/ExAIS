import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot68369 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot68369 = tf.keras.layers.Input(shape=([2, 2]))

Dot68369 = keras.layers.Dot(axes=(1, 2), name = 'Dot68369', )([in0Dot68369,in1Dot68369])
Res7723 = keras.layers.Reshape((2, 2, 1), name = 'Res7723', )(Dot68369)
Res5927 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res5927', )(Res7723)
Glo14651 = keras.layers.GlobalAveragePooling3D(name = 'Glo14651', )(Res5927)
model = tf.keras.models.Model(inputs=[in0Dot68369,in1Dot68369], outputs=Glo14651)
in0Dot68369 = tf.constant([[[0.2163, 0.8486], [0.4605, 0.3493]]])
in1Dot68369 = tf.constant([[[0.0311, 0.7968], [0.726, 0.2623]]])
print (np.array2string(model.predict([in0Dot68369,in1Dot68369],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo14651.png')

LDot68369 = dot_layer([[[0.2163, 0.8486], [0.4605, 0.3493]]], [[[0.0311, 0.7968], [0.726, 0.2623]]], 1, 2, Dot68369), 
LRes7723 = reshape_layer(Dot68369, [2, 2, 1], Res7723), 
LRes5927 = reshape_layer(Res7723, [2, 2, 1, 1], Res5927), 
LGlo14651 = global_average_pooling3D_layer(Res5927, Glo14651), 
exec_layers([LDot68369,LRes7723,LRes5927,LGlo14651],["Dot68369","Res7723","Res5927","Glo14651"],Glo14651,"Glo14651")

Actual (Unparsed): [[0.4159737]]

Expected (Unparsed): [[0.41597374249999997]]

Actual:   [[0.416]]

Expected: [[0.416]]