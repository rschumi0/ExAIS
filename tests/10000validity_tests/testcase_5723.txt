import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0GRU86564 = tf.keras.layers.Input(shape=([3, 1]))

GRU86564 = keras.layers.GRU(3,reset_after=True, recurrent_activation='sigmoid', name = 'GRU86564', )(in0GRU86564)
Fla41246 = keras.layers.Flatten(name = 'Fla41246', )(GRU86564)
Res3372 = keras.layers.Reshape((3, 1), name = 'Res3372', )(Fla41246)
Up_29182 = keras.layers.UpSampling1D(size=(2), name = 'Up_29182', )(Res3372)
model = tf.keras.models.Model(inputs=[in0GRU86564], outputs=Up_29182)
w = model.get_layer('GRU86564').get_weights() 
w[0] = np.array([[4, 2, 3, 1, 4, 5, 1, 8, 9]])
w[1] = np.array([[8, 8, 8, 1, 5, 5, 1, 7, 5], [8, 5, 6, 3, 5, 8, 10, 4, 9], [5, 5, 7, 8, 9, 4, 1, 4, 2]])
w[2] = np.array([[9, 9, 10, 2, 7, 8, 10, 2, 4], [8, 1, 8, 7, 8, 9, 4, 2, 6]])
model.get_layer('GRU86564').set_weights(w) 
in0GRU86564 = tf.constant([[[6], [9], [7]]])
print (np.array2string(model.predict([in0GRU86564],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_29182.png')

LGRU86564 = gru_layer([[[6], [9], [7]]],[[4, 2, 3, 1, 4, 5, 1, 8, 9]],[[8, 8, 8, 1, 5, 5, 1, 7, 5], [8, 5, 6, 3, 5, 8, 10, 4, 9], [5, 5, 7, 8, 9, 4, 1, 4, 2]],[[9, 9, 10, 2, 7, 8, 10, 2, 4], [8, 1, 8, 7, 8, 9, 4, 2, 6]], true, GRU86564), 
LFla41246 = flatten_layer(GRU86564, Fla41246), 
LRes3372 = reshape_layer(Fla41246, [3, 1], Res3372), 
LUp_29182 = up_sampling1D_layer(Res3372, 2, Up_29182), 
exec_layers([LGRU86564,LFla41246,LRes3372,LUp_29182],["GRU86564","Fla41246","Res3372","Up_29182"],Up_29182,"Up_29182")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]

Expected (Unparsed): [[[0.0],[0.0],[3.1738967009067043e-10],[3.1738967009067043e-10],[2.220446049250313e-16],[2.220446049250313e-16]]]

Actual:   [[[0], [0], [0], [0], [0], [0]]]

Expected: [[[0], [0], [0], [0], [0], [0]]]