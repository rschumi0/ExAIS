import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul34263 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul34263 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Zer21688 = tf.keras.layers.Input(shape=([1, 1]))
in0Con44583 = tf.keras.layers.Input(shape=([3, 1]))
in0Min70876 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Min70876 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Thr9793 = tf.keras.layers.Input(shape=([1, 1]))
in0Con3133 = tf.keras.layers.Input(shape=([1]))
in0Con76154 = tf.keras.layers.Input(shape=([4]))

Mul34263 = keras.layers.Multiply(name = 'Mul34263', )([in0Mul34263,in1Mul34263])
Res5695 = keras.layers.Reshape((1, 2), name = 'Res5695', )(Mul34263)
Zer9800 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer9800', )(Res5695)
Zer21688 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer21688', )(in0Zer21688)
Con44583 = keras.layers.Concatenate(axis=2, name = 'Con44583', )([Zer21688,in0Con44583])
Mul68317 = keras.layers.Multiply(name = 'Mul68317', )([Zer9800,Con44583])
Fla60296 = keras.layers.Flatten(name = 'Fla60296', )(Mul68317)
Min70876 = keras.layers.Minimum(name = 'Min70876', )([in0Min70876,in1Min70876])
Glo41362 = keras.layers.GlobalMaxPool2D(name = 'Glo41362', )(Min70876)
Thr9793 = keras.layers.ThresholdedReLU(theta=3.118108941658509, name = 'Thr9793', input_shape=(1, 1))(in0Thr9793)
Res31637 = keras.layers.Reshape((1, 1, 1), name = 'Res31637', )(Thr9793)
Res94153 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res94153', )(Res31637)
Glo19882 = keras.layers.GlobalMaxPool3D(name = 'Glo19882', )(Res94153)
Con3133 = keras.layers.Concatenate(axis=1, name = 'Con3133', )([Glo19882,in0Con3133])
Min60653 = keras.layers.Minimum(name = 'Min60653', )([Glo41362,Con3133])
Con76154 = keras.layers.Concatenate(axis=1, name = 'Con76154', )([Min60653,in0Con76154])
Sub65158 = keras.layers.Subtract(name = 'Sub65158', )([Fla60296,Con76154])
model = tf.keras.models.Model(inputs=[in0Mul34263,in1Mul34263,in0Zer21688,in0Con44583,in0Min70876,in1Min70876,in0Thr9793,in0Con3133,in0Con76154], outputs=Sub65158)
in0Mul34263 = tf.constant([[[[0.3586, 0.3975]]]])
in1Mul34263 = tf.constant([[[[0.0492, 0.2818]]]])
in0Zer21688 = tf.constant([[[1.8405]]])
in0Con44583 = tf.constant([[[0.5354], [0.7735], [0.4056]]])
in0Min70876 = tf.constant([[[[0.5808, 0.7322], [0.2398, 0.0634]], [[0.693, 0.2207], [0.9089, 0.5051]]]])
in1Min70876 = tf.constant([[[[0.2697, 0.0281], [0.6413, 0.8593]], [[0.4121, 0.297], [0.2455, 0.6892]]]])
in0Thr9793 = tf.constant([[[0.7622]]])
in0Con3133 = tf.constant([[0.1403]])
in0Con76154 = tf.constant([[0.1868, 0.7958, 0.8927, 0.4688]])
print (np.array2string(model.predict([in0Mul34263,in1Mul34263,in0Zer21688,in0Con44583,in0Min70876,in1Min70876,in0Thr9793,in0Con3133,in0Con76154],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub65158.png')

LMul34263 = multiply_layer([[[[[0.3586, 0.3975]]]], [[[[0.0492, 0.2818]]]]], Mul34263), 
LRes5695 = reshape_layer(Mul34263, [1, 2], Res5695), 
LZer9800 = zero_padding1D_layer(Res5695, 2, 0, Zer9800), 
LZer21688 = zero_padding1D_layer([[[1.8405]]], 1, 1, Zer21688), 
LCon44583 = concatenate_layer([Zer21688,[[[0.5354], [0.7735], [0.4056]]]], 2, Con44583), 
LMul68317 = multiply_layer([Zer9800,Con44583], Mul68317), 
LFla60296 = flatten_layer(Mul68317, Fla60296), 
LMin70876 = minimum_layer([[[[[0.5808, 0.7322], [0.2398, 0.0634]], [[0.693, 0.2207], [0.9089, 0.5051]]]], [[[[0.2697, 0.0281], [0.6413, 0.8593]], [[0.4121, 0.297], [0.2455, 0.6892]]]]], Min70876), 
LGlo41362 = global_max_pool2D_layer(Min70876, Glo41362), 
LThr9793 = thresholded_relu_layer([[[0.7622]]], 3.118108941658509, Thr9793), 
LRes31637 = reshape_layer(Thr9793, [1, 1, 1], Res31637), 
LRes94153 = reshape_layer(Res31637, [1, 1, 1, 1], Res94153), 
LGlo19882 = global_max_pool3D_layer(Res94153, Glo19882), 
LCon3133 = concatenate_layer([Glo19882,[[0.1403]]], 1, Con3133), 
LMin60653 = minimum_layer([Glo41362,Con3133], Min60653), 
LCon76154 = concatenate_layer([Min60653,[[0.1868, 0.7958, 0.8927, 0.4688]]], 1, Con76154), 
LSub65158 = subtract_layer(Fla60296,Con76154, Sub65158), 
exec_layers([LMul34263,LRes5695,LZer9800,LZer21688,LCon44583,LMul68317,LFla60296,LMin70876,LGlo41362,LThr9793,LRes31637,LRes94153,LGlo19882,LCon3133,LMin60653,LCon76154,LSub65158],["Mul34263","Res5695","Zer9800","Zer21688","Con44583","Mul68317","Fla60296","Min70876","Glo41362","Thr9793","Res31637","Res94153","Glo19882","Con3133","Min60653","Con76154","Sub65158"],Sub65158,"Sub65158")

Actual (Unparsed): [[0.0000000, -0.1403000, -0.1868000, -0.7958000, -0.8927000, -0.4233665]]

Expected (Unparsed): [[0,-0.1403,-0.1868,-0.7958,-0.8927,-0.42336651319999996]]

Actual:   [[0, -0.1403, -0.1868, -0.7958, -0.8927, -0.4233]]

Expected: [[0, -0.1403, -0.1868, -0.7958, -0.8927, -0.4233]]