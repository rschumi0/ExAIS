import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul39424 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Mul39424 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Min15900 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min15900 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con8468 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul42621 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul42621 = tf.keras.layers.Input(shape=([1, 2]))

Mul39424 = keras.layers.Multiply(name = 'Mul39424', )([in0Mul39424,in1Mul39424])
Res99644 = keras.layers.Reshape((2, 1, 2), name = 'Res99644', )(Mul39424)
Res83754 = keras.layers.Reshape((2, 2), name = 'Res83754', )(Res99644)
Min15900 = keras.layers.Minimum(name = 'Min15900', )([in0Min15900,in1Min15900])
Res85335 = keras.layers.Reshape((2, 1), name = 'Res85335', )(Min15900)
Con8468 = keras.layers.Concatenate(axis=2, name = 'Con8468', )([Res85335,in0Con8468])
Mul42621 = keras.layers.Multiply(name = 'Mul42621', )([in0Mul42621,in1Mul42621])
Zer83952 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer83952', )(Mul42621)
Max10800 = keras.layers.Maximum(name = 'Max10800', )([Con8468,Zer83952])
Min14776 = keras.layers.Minimum(name = 'Min14776', )([Res83754,Max10800])
model = tf.keras.models.Model(inputs=[in0Mul39424,in1Mul39424,in0Min15900,in1Min15900,in0Con8468,in0Mul42621,in1Mul42621], outputs=Min14776)
in0Mul39424 = tf.constant([[[[[0.0044, 0.0078]]], [[[0.1122, 0.9001]]]]])
in1Mul39424 = tf.constant([[[[[0.3604, 0.7498]]], [[[0.8418, 0.2667]]]]])
in0Min15900 = tf.constant([[[[0.59]], [[0.0518]]]])
in1Min15900 = tf.constant([[[[0.2502]], [[0.633]]]])
in0Con8468 = tf.constant([[[0.6269], [0.3702]]])
in0Mul42621 = tf.constant([[[0.1766, 0.0231]]])
in1Mul42621 = tf.constant([[[0.3902, 0.5653]]])
print (np.array2string(model.predict([in0Mul39424,in1Mul39424,in0Min15900,in1Min15900,in0Con8468,in0Mul42621,in1Mul42621],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min14776.png')

LMul39424 = multiply_layer([[[[[[0.0044, 0.0078]]], [[[0.1122, 0.9001]]]]], [[[[[0.3604, 0.7498]]], [[[0.8418, 0.2667]]]]]], Mul39424), 
LRes99644 = reshape_layer(Mul39424, [2, 1, 2], Res99644), 
LRes83754 = reshape_layer(Res99644, [2, 2], Res83754), 
LMin15900 = minimum_layer([[[[[0.59]], [[0.0518]]]], [[[[0.2502]], [[0.633]]]]], Min15900), 
LRes85335 = reshape_layer(Min15900, [2, 1], Res85335), 
LCon8468 = concatenate_layer([Res85335,[[[0.6269], [0.3702]]]], 2, Con8468), 
LMul42621 = multiply_layer([[[[0.1766, 0.0231]]], [[[0.3902, 0.5653]]]], Mul42621), 
LZer83952 = zero_padding1D_layer(Mul42621, 1, 0, Zer83952), 
LMax10800 = maximum_layer([Con8468,Zer83952], Max10800), 
LMin14776 = minimum_layer([Res83754,Max10800], Min14776), 
exec_layers([LMul39424,LRes99644,LRes83754,LMin15900,LRes85335,LCon8468,LMul42621,LZer83952,LMax10800,LMin14776],["Mul39424","Res99644","Res83754","Min15900","Res85335","Con8468","Mul42621","Zer83952","Max10800","Min14776"],Min14776,"Min14776")

Actual (Unparsed): [[[0.0015858, 0.0058484], [0.0689093, 0.2400567]]]

Expected (Unparsed): [[[0.00158576,0.00584844],[0.06890932,0.24005667]]]

Actual:   [[[0.0016, 0.0059], [0.069, 0.2401]]]

Expected: [[[0.0016, 0.0059], [0.069, 0.2401]]]