import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave37455 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con61677 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0ELU15858 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Ave37455 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave37455', )(in0Ave37455)
Res1439 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res1439', )(Ave37455)
Zer18564 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer18564', )(Res1439)
Con61677 = keras.layers.Concatenate(axis=4, name = 'Con61677', )([Zer18564,in0Con61677])
ELU15858 = keras.layers.ELU(alpha=-3.2885259381491805, name = 'ELU15858', input_shape=(2, 2, 2, 2))(in0ELU15858)
Mul53595 = keras.layers.Multiply(name = 'Mul53595', )([Con61677,ELU15858])
Res14848 = keras.layers.Reshape((2, 2, 4), name = 'Res14848', )(Mul53595)
Ave57493 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave57493', )(Res14848)
model = tf.keras.models.Model(inputs=[in0Ave37455,in0Con61677,in0ELU15858], outputs=Ave57493)
in0Ave37455 = tf.constant([[[[1.3491, 1.7423], [1.081, 1.1273]]]])
in0Con61677 = tf.constant([[[[[0.9565], [0.2117]], [[0.622], [0.7588]]], [[[0.7394], [0.5546]], [[0.0484], [0.306]]]]])
in0ELU15858 = tf.constant([[[[[0.7721, 0.3631], [0.5129, 0.941]], [[0.4689, 0.4671], [0.9364, 0.2707]]], [[[0.043, 0.9249], [0.0391, 0.8188]], [[0.2473, 0.1345], [0.6989, 0.4357]]]]])
print (np.array2string(model.predict([in0Ave37455,in0Con61677,in0ELU15858],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave57493.png')

LAve37455 = average_pooling2D_layer([[[[1.3491, 1.7423], [1.081, 1.1273]]]], 1, 2, Ave37455), 
LRes1439 = reshape_layer(Ave37455, [1, 1, 2, 1], Res1439), 
LZer18564 = zero_padding3D_layer(Res1439, 1, 0, 1, 0, 0, 0, Zer18564), 
LCon61677 = concatenate_layer([Zer18564,[[[[[0.9565], [0.2117]], [[0.622], [0.7588]]], [[[0.7394], [0.5546]], [[0.0484], [0.306]]]]]], 4, Con61677), 
LELU15858 = elu_layer([[[[[0.7721, 0.3631], [0.5129, 0.941]], [[0.4689, 0.4671], [0.9364, 0.2707]]], [[[0.043, 0.9249], [0.0391, 0.8188]], [[0.2473, 0.1345], [0.6989, 0.4357]]]]], -3.2885259381491805, ELU15858), 
LMul53595 = multiply_layer([Con61677,ELU15858], Mul53595), 
LRes14848 = reshape_layer(Mul53595, [2, 2, 4], Res14848), 
LAve57493 = average_pooling2D_layer(Res14848, 1, 1, Ave57493), 
exec_layers([LAve37455,LRes1439,LZer18564,LCon61677,LELU15858,LMul53595,LRes14848,LAve57493],["Ave37455","Res1439","Zer18564","Con61677","ELU15858","Mul53595","Res14848","Ave57493"],Ave57493,"Ave57493")

Actual (Unparsed): [[[[0.0000000, 0.3473051, 0.0000000, 0.1992097], [0.0000000, 0.2905362, 0.0000000, 0.2054072]], [[0.0000000, 0.6838711, 0.0000000, 0.4541065], [0.3004819, 0.0065098, 1.0027817, 0.1333242]]]]

Expected (Unparsed): [[[[0.0,0.34730515,0.0,0.1992097],[0.0,0.2905362,0.0,0.20540716]],[[0.0,0.68387106,0.0,0.45410648],[0.30048186499999996,0.0065098000000000005,1.00278172,0.1333242]]]]

Actual:   [[[[0, 0.3474, 0, 0.1993], [0, 0.2906, 0, 0.2055]], [[0, 0.6839, 0, 0.4542], [0.3005, 0.0066, 1.0028, 0.1334]]]]

Expected: [[[[0, 0.3474, 0, 0.1993], [0, 0.2906, 0, 0.2055]], [[0, 0.6839, 0, 0.4542], [0.3005, 0.0066, 1.0028, 0.1334]]]]