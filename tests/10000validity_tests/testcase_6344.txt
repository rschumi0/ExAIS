import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo85971 = tf.keras.layers.Input(shape=([1, 2]))
in0Con62845 = tf.keras.layers.Input(shape=([3, 2]))
in0Zer46552 = tf.keras.layers.Input(shape=([1, 3]))
in0Min76060 = tf.keras.layers.Input(shape=([2, 2]))
in1Min76060 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul38902 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Mul38902 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Glo85971 = keras.layers.GlobalMaxPool1D(name = 'Glo85971', )(in0Glo85971)
Res27369 = keras.layers.Reshape((2, 1), name = 'Res27369', )(Glo85971)
Zer56347 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer56347', )(Res27369)
Con62845 = keras.layers.Concatenate(axis=2, name = 'Con62845', )([Zer56347,in0Con62845])
Zer46552 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer46552', )(in0Zer46552)
Add13220 = keras.layers.Add(name = 'Add13220', )([Con62845,Zer46552])
Glo66802 = keras.layers.GlobalMaxPool1D(name = 'Glo66802', )(Add13220)
Res21463 = keras.layers.Reshape((3, 1), name = 'Res21463', )(Glo66802)
Res28092 = keras.layers.Reshape((3, 1, 1), name = 'Res28092', )(Res21463)
Res71777 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res71777', )(Res28092)
Zer26011 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer26011', )(Res71777)
Min76060 = keras.layers.Minimum(name = 'Min76060', )([in0Min76060,in1Min76060])
Res26297 = keras.layers.Reshape((2, 2, 1), name = 'Res26297', )(Min76060)
Res27751 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res27751', )(Res26297)
Mul38902 = keras.layers.Multiply(name = 'Mul38902', )([in0Mul38902,in1Mul38902])
Zer8344 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer8344', )(Mul38902)
Ave83745 = keras.layers.Average(name = 'Ave83745', )([Res27751,Zer8344])
Zer53773 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer53773', )(Ave83745)
Sub97732 = keras.layers.Subtract(name = 'Sub97732', )([Zer26011,Zer53773])
model = tf.keras.models.Model(inputs=[in0Glo85971,in0Con62845,in0Zer46552,in0Min76060,in1Min76060,in0Mul38902,in1Mul38902], outputs=Sub97732)
in0Glo85971 = tf.constant([[[1.8357, 1.792]]])
in0Con62845 = tf.constant([[[0.3668, 0.004], [0.4674, 0.7866], [0.4984, 0.2315]]])
in0Zer46552 = tf.constant([[[1.3167, 1.6965, 1.9599]]])
in0Min76060 = tf.constant([[[0.2432, 0.6207], [0.5463, 0.136]]])
in1Min76060 = tf.constant([[[0.541, 0.0469], [0.5223, 0.4292]]])
in0Mul38902 = tf.constant([[[[[0.831]]], [[[0.9261]]]]])
in1Mul38902 = tf.constant([[[[[0.6099]]], [[[0.4345]]]]])
print (np.array2string(model.predict([in0Glo85971,in0Con62845,in0Zer46552,in0Min76060,in1Min76060,in0Mul38902,in1Mul38902],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub97732.png')

LGlo85971 = global_max_pool1D_layer([[[1.8357, 1.792]]], Glo85971), 
LRes27369 = reshape_layer(Glo85971, [2, 1], Res27369), 
LZer56347 = zero_padding1D_layer(Res27369, 1, 0, Zer56347), 
LCon62845 = concatenate_layer([Zer56347,[[[0.3668, 0.004], [0.4674, 0.7866], [0.4984, 0.2315]]]], 2, Con62845), 
LZer46552 = zero_padding1D_layer([[[1.3167, 1.6965, 1.9599]]], 1, 1, Zer46552), 
LAdd13220 = add_layer([Con62845,Zer46552], Add13220), 
LGlo66802 = global_max_pool1D_layer(Add13220, Glo66802), 
LRes21463 = reshape_layer(Glo66802, [3, 1], Res21463), 
LRes28092 = reshape_layer(Res21463, [3, 1, 1], Res28092), 
LRes71777 = reshape_layer(Res28092, [3, 1, 1, 1], Res71777), 
LZer26011 = zero_padding3D_layer(Res71777, 0, 0, 2, 0, 0, 0, Zer26011), 
LMin76060 = minimum_layer([[[[0.2432, 0.6207], [0.5463, 0.136]]], [[[0.541, 0.0469], [0.5223, 0.4292]]]], Min76060), 
LRes26297 = reshape_layer(Min76060, [2, 2, 1], Res26297), 
LRes27751 = reshape_layer(Res26297, [2, 2, 1, 1], Res27751), 
LMul38902 = multiply_layer([[[[[[0.831]]], [[[0.9261]]]]], [[[[[0.6099]]], [[[0.4345]]]]]], Mul38902), 
LZer8344 = zero_padding3D_layer(Mul38902, 0, 0, 1, 0, 0, 0, Zer8344), 
LAve83745 = average_layer([Res27751,Zer8344], Ave83745), 
LZer53773 = zero_padding3D_layer(Ave83745, 1, 0, 1, 0, 0, 0, Zer53773), 
LSub97732 = subtract_layer(Zer26011,Zer53773, Sub97732), 
exec_layers([LGlo85971,LRes27369,LZer56347,LCon62845,LZer46552,LAdd13220,LGlo66802,LRes21463,LRes28092,LRes71777,LZer26011,LMin76060,LRes26297,LRes27751,LMul38902,LZer8344,LAve83745,LZer53773,LSub97732],["Glo85971","Res27369","Zer56347","Con62845","Zer46552","Add13220","Glo66802","Res21463","Res28092","Res71777","Zer26011","Min76060","Res26297","Res27751","Mul38902","Zer8344","Ave83745","Zer53773","Sub97732"],Sub97732,"Sub97732")

Actual (Unparsed): [[[[[0.0000000]], [[0.0000000]], [[3.1524000]]], [[[0.0000000]], [[-0.1216000]], [[1.8870365]]], [[[0.0000000]], [[-0.2611500]], [[2.4773048]]]]]

Expected (Unparsed): [[[[[0]],[[0]],[[3.1524]]],[[[0]],[[-0.1216]],[[1.88703655]]],[[[0]],[[-0.26115]],[[2.4773047750000003]]]]]

Actual:   [[[[[0]], [[0]], [[3.1524]]], [[[0]], [[-0.1216]], [[1.8871]]], [[[0]], [[-0.2611]], [[2.4774]]]]]

Expected: [[[[[0]], [[0]], [[3.1524]]], [[[0]], [[-0.1216]], [[1.8871]]], [[[0]], [[-0.2611]], [[2.4774]]]]]