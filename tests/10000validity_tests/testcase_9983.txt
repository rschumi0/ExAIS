import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub34578 = tf.keras.layers.Input(shape=([3]))
in1Sub34578 = tf.keras.layers.Input(shape=([3]))

Sub34578 = keras.layers.Subtract(name = 'Sub34578', )([in0Sub34578,in1Sub34578])
Res54609 = keras.layers.Reshape((3, 1), name = 'Res54609', )(Sub34578)
Res97282 = keras.layers.Reshape((3, 1, 1), name = 'Res97282', )(Res54609)
Glo11900 = keras.layers.GlobalAveragePooling2D(name = 'Glo11900', )(Res97282)
Res22097 = keras.layers.Reshape((1, 1), name = 'Res22097', )(Glo11900)
Res46690 = keras.layers.Reshape((1, 1, 1), name = 'Res46690', )(Res22097)
Up_81913 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_81913', )(Res46690)
model = tf.keras.models.Model(inputs=[in0Sub34578,in1Sub34578], outputs=Up_81913)
in0Sub34578 = tf.constant([[0.8179, 0.1815, 0.5509]])
in1Sub34578 = tf.constant([[0.005, 0.7351, 0.7371]])
print (np.array2string(model.predict([in0Sub34578,in1Sub34578],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_81913.png')

LSub34578 = subtract_layer([[0.8179, 0.1815, 0.5509]], [[0.005, 0.7351, 0.7371]], Sub34578), 
LRes54609 = reshape_layer(Sub34578, [3, 1], Res54609), 
LRes97282 = reshape_layer(Res54609, [3, 1, 1], Res97282), 
LGlo11900 = global_average_pooling2D_layer(Res97282, Glo11900), 
LRes22097 = reshape_layer(Glo11900, [1, 1], Res22097), 
LRes46690 = reshape_layer(Res22097, [1, 1, 1], Res46690), 
LUp_81913 = up_sampling2D_layer(Res46690, 2, 2, Up_81913), 
exec_layers([LSub34578,LRes54609,LRes97282,LGlo11900,LRes22097,LRes46690,LUp_81913],["Sub34578","Res54609","Res97282","Glo11900","Res22097","Res46690","Up_81913"],Up_81913,"Up_81913")

Actual (Unparsed): [[[[0.0243667], [0.0243667]], [[0.0243667], [0.0243667]]]]

Expected (Unparsed): [[[[0.024366666666666648],[0.024366666666666648]],[[0.024366666666666648],[0.024366666666666648]]]]

Actual:   [[[[0.0244], [0.0244]], [[0.0244], [0.0244]]]]

Expected: [[[[0.0244], [0.0244]], [[0.0244], [0.0244]]]]