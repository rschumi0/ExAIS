import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con1673 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Con1673 = keras.layers.Conv3D(3, (2, 2, 2),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con1673', )(in0Con1673)
Cro38931 = keras.layers.Cropping3D(cropping=((0, 1), (1, 0), (0, 0)), name = 'Cro38931', )(Con1673)
Res84019 = keras.layers.Reshape((1, 1, 6), name = 'Res84019', )(Cro38931)
Up_91075 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_91075', )(Res84019)
Res63261 = keras.layers.Reshape((1, 12), name = 'Res63261', )(Up_91075)
Con83534 = keras.layers.Conv1D(2, (1),strides=(2), padding='same', dilation_rate=(1), name = 'Con83534', )(Res63261)
model = tf.keras.models.Model(inputs=[in0Con1673], outputs=Con83534)
w = model.get_layer('Con1673').get_weights() 
w[0] = np.array([[[[[0.6533, 0.1804, 0.9778]], [[0.1951, 0.9611, 0.578]]], [[[0.6277, 0.8071, 0.3626]], [[0.652, 0.287, 0.5095]]]], [[[[0.1761, 0.254, 0.7289]], [[0.2435, 0.3461, 0.2997]]], [[[0.5721, 0.0997, 0.8956]], [[0.5273, 0.2433, 0.0389]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con1673').set_weights(w) 
w = model.get_layer('Con83534').get_weights() 
w[0] = np.array([[[0.8584, 0.5139], [0.2714, 0.1089], [0.1574, 0.0396], [0.4505, 0.0633], [0.6779, 0.9917], [0.5217, 0.3927], [0.4744, 0.4887], [0.8614, 0.5571], [0.6982, 0.3615], [0.5044, 0.3359], [0.2438, 0.8065], [0.4303, 0.0137]]])
w[1] = np.array([0, 0])
model.get_layer('Con83534').set_weights(w) 
in0Con1673 = tf.constant([[[[[0.9734], [0.3368]], [[0.2792], [0.7599]]], [[[0.2235], [0.5837]], [[0.999], [0.7648]]]]])
print (np.array2string(model.predict([in0Con1673],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con83534.png')

LCon1673 = conv3D_layer([[[[[0.9734], [0.3368]], [[0.2792], [0.7599]]], [[[0.2235], [0.5837]], [[0.999], [0.7648]]]]], 2, 2, 2,[[[[[0.6533, 0.1804, 0.9778]], [[0.1951, 0.9611, 0.578]]], [[[0.6277, 0.8071, 0.3626]], [[0.652, 0.287, 0.5095]]]], [[[[0.1761, 0.254, 0.7289]], [[0.2435, 0.3461, 0.2997]]], [[[0.5721, 0.0997, 0.8956]], [[0.5273, 0.2433, 0.0389]]]]],[0, 0, 0], 1, 1, 1, true, 1, 1, 1, Con1673), 
LCro38931 = cropping3D_layer(Con1673, 0, 1, 1, 0, 0, 0, Cro38931), 
LRes84019 = reshape_layer(Cro38931, [1, 1, 6], Res84019), 
LUp_91075 = up_sampling2D_layer(Res84019, 1, 2, Up_91075), 
LRes63261 = reshape_layer(Up_91075, [1, 12], Res63261), 
LCon83534 = conv1D_layer(Res63261, 1,[[[0.8584, 0.5139], [0.2714, 0.1089], [0.1574, 0.0396], [0.4505, 0.0633], [0.6779, 0.9917], [0.5217, 0.3927], [0.4744, 0.4887], [0.8614, 0.5571], [0.6982, 0.3615], [0.5044, 0.3359], [0.2438, 0.8065], [0.4303, 0.0137]]],[0, 0], 2, true, 1, Con83534), 
exec_layers([LCon1673,LCro38931,LRes84019,LUp_91075,LRes63261,LCon83534],["Con1673","Cro38931","Res84019","Up_91075","Res63261","Con83534"],Con83534,"Con83534")

Actual (Unparsed): [[[5.9697008, 3.6058150]]]

Expected (Unparsed): [[[5.969700925099,3.6058150160800007]]]

Actual:   [[[5.9698, 3.6059]]]

Expected: [[[5.9698, 3.6059]]]