import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub36463 = tf.keras.layers.Input(shape=([2]))
in1Sub36463 = tf.keras.layers.Input(shape=([2]))
in0Up_50438 = tf.keras.layers.Input(shape=([1, 3, 2, 1]))

Sub36463 = keras.layers.Subtract(name = 'Sub36463', )([in0Sub36463,in1Sub36463])
Res17278 = keras.layers.Reshape((2, 1), name = 'Res17278', )(Sub36463)
Res89924 = keras.layers.Reshape((2, 1, 1), name = 'Res89924', )(Res17278)
Res79227 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res79227', )(Res89924)
Zer14085 = keras.layers.ZeroPadding3D(padding=((0, 0), (5, 0), (1, 0)), name = 'Zer14085', )(Res79227)
Up_50438 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_50438', )(in0Up_50438)
Add84739 = keras.layers.Add(name = 'Add84739', )([Zer14085,Up_50438])
Lea59160 = keras.layers.LeakyReLU(alpha=0.6092138633298738, name = 'Lea59160', )(Add84739)
Res51350 = keras.layers.Reshape((2, 6, 2), name = 'Res51350', )(Lea59160)
Con27430 = keras.layers.Conv2DTranspose(3, (1, 2),strides=(1, 1), padding='valid', name = 'Con27430', )(Res51350)
model = tf.keras.models.Model(inputs=[in0Sub36463,in1Sub36463,in0Up_50438], outputs=Con27430)
w = model.get_layer('Con27430').get_weights() 
w[0] = np.array([[[[0.2417, 0.359], [0.9048, 0.2121], [0.6276, 0.6429]], [[0.5945, 0.2343], [0.0722, 0.9477], [0.9838, 0.3703]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con27430').set_weights(w) 
in0Sub36463 = tf.constant([[0.6896, 0.818]])
in1Sub36463 = tf.constant([[0.6751, 0.1983]])
in0Up_50438 = tf.constant([[[[[1.4091], [1.5895]], [[1.9068], [1.2095]], [[1.3784], [1.0226]]]]])
print (np.array2string(model.predict([in0Sub36463,in1Sub36463,in0Up_50438],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con27430.png')

LSub36463 = subtract_layer([[0.6896, 0.818]], [[0.6751, 0.1983]], Sub36463), 
LRes17278 = reshape_layer(Sub36463, [2, 1], Res17278), 
LRes89924 = reshape_layer(Res17278, [2, 1, 1], Res89924), 
LRes79227 = reshape_layer(Res89924, [2, 1, 1, 1], Res79227), 
LZer14085 = zero_padding3D_layer(Res79227, 0, 0, 5, 0, 1, 0, Zer14085), 
LUp_50438 = up_sampling3D_layer([[[[[1.4091], [1.5895]], [[1.9068], [1.2095]], [[1.3784], [1.0226]]]]], 2, 2, 1, Up_50438), 
LAdd84739 = add_layer([Zer14085,Up_50438], Add84739), 
LLea59160 = leaky_relu_layer(Add84739, 0.6092138633298738, Lea59160), 
LRes51350 = reshape_layer(Lea59160, [2, 6, 2], Res51350), 
LCon27430 = conv2D_transpose_layer(Res51350, 1, 2,[[[[0.2417, 0.359], [0.9048, 0.2121], [0.6276, 0.6429]], [[0.5945, 0.2343], [0.0722, 0.9477], [0.9838, 0.3703]]]],[0, 0, 0], 1, 1, false, Con27430), 
exec_layers([LSub36463,LRes17278,LRes89924,LRes79227,LZer14085,LUp_50438,LAdd84739,LLea59160,LRes51350,LCon27430],["Sub36463","Res17278","Res89924","Res79227","Zer14085","Up_50438","Add84739","Lea59160","Res51350","Con27430"],Con27430,"Con27430")

Actual (Unparsed): [[[[0.9112100, 1.6120867, 1.9062407], [2.1213398, 3.2201928, 3.8811052], [2.1052139, 3.5899137, 3.9491597], [2.3120625, 3.2657217, 4.2980829], [2.1172512, 2.7479838, 3.8463011], [1.7645322, 2.5357838, 3.2665741], [1.0624513, 1.0823802, 1.7401080]], [[0.9112100, 1.6120867, 1.9062407], [2.1213398, 3.2201928, 3.8811052], [2.1052139, 3.5899137, 3.9491597], [2.3120625, 3.2657217, 4.2980829], [2.1172512, 2.7479838, 3.8463011], [1.9817990, 2.6641467, 3.6556572], [1.2042497, 1.6559283, 1.9642136]]]]

Expected (Unparsed): [[[[0.9112099699999999,1.61208663,1.90624071],[2.12133977,3.2201928,3.88110514],[2.10521386,3.58991376,3.9491596600000003],[2.31206251,3.2657217000000003,4.29808292],[2.11725113,2.74798389,3.84630107],[1.7645321600000001,2.53578373,3.2665741300000004],[1.06245133,1.0823801499999999,1.7401080500000001]],[[0.9112099699999999,1.61208663,1.90624071],[2.12133977,3.2201928,3.88110514],[2.10521386,3.58991376,3.9491596600000003],[2.31206251,3.2657217000000003,4.29808292],[2.11725113,2.74798389,3.84630107],[1.9817989599999999,2.66414665,3.65565721],[1.2042496900000002,1.6559281899999998,1.9642136100000003]]]]

Actual:   [[[[0.9113, 1.6121, 1.9063], [2.1214, 3.2202, 3.8812], [2.1053, 3.59, 3.9492], [2.3121, 3.2658, 4.2981], [2.1173, 2.748, 3.8464], [1.7646, 2.5358, 3.2666], [1.0625, 1.0824, 1.7402]], [[0.9113, 1.6121, 1.9063], [2.1214, 3.2202, 3.8812], [2.1053, 3.59, 3.9492], [2.3121, 3.2658, 4.2981], [2.1173, 2.748, 3.8464], [1.9818, 2.6642, 3.6557], [1.2043, 1.656, 1.9643]]]]

Expected: [[[[0.9113, 1.6121, 1.9063], [2.1214, 3.2202, 3.8812], [2.1053, 3.59, 3.9492], [2.3121, 3.2658, 4.2981], [2.1173, 2.748, 3.8464], [1.7646, 2.5358, 3.2666], [1.0625, 1.0824, 1.7402]], [[0.9113, 1.6121, 1.9063], [2.1214, 3.2202, 3.8812], [2.1053, 3.59, 3.9492], [2.3121, 3.2658, 4.2981], [2.1173, 2.748, 3.8464], [1.9818, 2.6642, 3.6557], [1.2043, 1.656, 1.9643]]]]