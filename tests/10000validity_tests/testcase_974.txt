import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot63538 = tf.keras.layers.Input(shape=([3]))
in1Dot63538 = tf.keras.layers.Input(shape=([3]))
in0Con8312 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot99795 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot99795 = tf.keras.layers.Input(shape=([2, 2]))
in0Add87808 = tf.keras.layers.Input(shape=([2, 2]))
in1Add87808 = tf.keras.layers.Input(shape=([2, 2]))

Dot63538 = keras.layers.Dot(axes=(1, 1), name = 'Dot63538', )([in0Dot63538,in1Dot63538])
Res50003 = keras.layers.Reshape((1, 1), name = 'Res50003', )(Dot63538)
Zer64876 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer64876', )(Res50003)
Con8312 = keras.layers.Concatenate(axis=2, name = 'Con8312', )([Zer64876,in0Con8312])
Dot99795 = keras.layers.Dot(axes=(1, 2), name = 'Dot99795', )([in0Dot99795,in1Dot99795])
Ave74674 = keras.layers.Average(name = 'Ave74674', )([Con8312,Dot99795])
Add87808 = keras.layers.Add(name = 'Add87808', )([in0Add87808,in1Add87808])
Sub98760 = keras.layers.Subtract(name = 'Sub98760', )([Ave74674,Add87808])
model = tf.keras.models.Model(inputs=[in0Dot63538,in1Dot63538,in0Con8312,in0Dot99795,in1Dot99795,in0Add87808,in1Add87808], outputs=Sub98760)
in0Dot63538 = tf.constant([[0.7445, 0.9526, 0.0674]])
in1Dot63538 = tf.constant([[0.0751, 0.5341, 0.5733]])
in0Con8312 = tf.constant([[[0.567], [0.5728]]])
in0Dot99795 = tf.constant([[[0.0702, 0.0571], [0.5268, 0.2537]]])
in1Dot99795 = tf.constant([[[0.0508, 0.2996], [0.6674, 0.6437]]])
in0Add87808 = tf.constant([[[0.7517, 0.0474], [0.9798, 0.8417]]])
in1Add87808 = tf.constant([[[0.6181, 0.0676], [0.6896, 0.722]]])
print (np.array2string(model.predict([in0Dot63538,in1Dot63538,in0Con8312,in0Dot99795,in1Dot99795,in0Add87808,in1Add87808],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub98760.png')

LDot63538 = dot_layer([[0.7445, 0.9526, 0.0674]], [[0.0751, 0.5341, 0.5733]], 1, 1, Dot63538), 
LRes50003 = reshape_layer(Dot63538, [1, 1], Res50003), 
LZer64876 = zero_padding1D_layer(Res50003, 1, 0, Zer64876), 
LCon8312 = concatenate_layer([Zer64876,[[[0.567], [0.5728]]]], 2, Con8312), 
LDot99795 = dot_layer([[[0.0702, 0.0571], [0.5268, 0.2537]]], [[[0.0508, 0.2996], [0.6674, 0.6437]]], 1, 2, Dot99795), 
LAve74674 = average_layer([Con8312,Dot99795], Ave74674), 
LAdd87808 = add_layer([[[[0.7517, 0.0474], [0.9798, 0.8417]]], [[[0.6181, 0.0676], [0.6896, 0.722]]]], Add87808), 
LSub98760 = subtract_layer(Ave74674,Add87808, Sub98760), 
exec_layers([LDot63538,LRes50003,LZer64876,LCon8312,LDot99795,LAve74674,LAdd87808,LSub98760],["Dot63538","Res50003","Zer64876","Con8312","Dot99795","Ave74674","Add87808","Sub98760"],Sub98760,"Sub98760")

Actual (Unparsed): [[[-1.2891023, 0.3614763], [-1.3282774, -1.1765924]]]

Expected (Unparsed): [[[-1.28910228,0.36147632],[-1.328277385,-1.1765923849999997]]]

Actual:   [[[-1.2891, 0.3615], [-1.3282, -1.1765]]]

Expected: [[[-1.2891, 0.3615], [-1.3282, -1.1765]]]