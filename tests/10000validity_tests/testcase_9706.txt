import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave75344 = tf.keras.layers.Input(shape=([1, 1]))

Ave75344 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave75344', )(in0Ave75344)
GRU9186 = keras.layers.GRU(3,reset_after=True, recurrent_activation='sigmoid', name = 'GRU9186', )(Ave75344)
model = tf.keras.models.Model(inputs=[in0Ave75344], outputs=GRU9186)
w = model.get_layer('GRU9186').get_weights() 
w[0] = np.array([[8, 3, 2, 9, 8, 7, 7, 4, 10]])
w[1] = np.array([[7, 4, 3, 7, 3, 6, 8, 3, 10], [6, 5, 6, 7, 2, 3, 3, 7, 10], [2, 10, 5, 10, 6, 4, 8, 2, 1]])
w[2] = np.array([[7, 7, 5, 5, 9, 3, 6, 5, 2], [2, 8, 5, 9, 4, 10, 3, 3, 9]])
model.get_layer('GRU9186').set_weights(w) 
in0Ave75344 = tf.constant([[[1.8262]]])
print (np.array2string(model.predict([in0Ave75344],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='GRU9186.png')

LAve75344 = average_pooling1D_layer([[[1.8262]]], 1, Ave75344), 
LGRU9186 = gru_layer(Ave75344,[[8, 3, 2, 9, 8, 7, 7, 4, 10]],[[7, 4, 3, 7, 3, 6, 8, 3, 10], [6, 5, 6, 7, 2, 3, 3, 7, 10], [2, 10, 5, 10, 6, 4, 8, 2, 1]],[[7, 7, 5, 5, 9, 3, 6, 5, 2], [2, 8, 5, 9, 4, 10, 3, 3, 9]], true, GRU9186), 
exec_layers([LAve75344,LGRU9186],["Ave75344","GRU9186"],GRU9186,"GRU9186")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000012]]

Expected (Unparsed): [[5.5780269292426965e-11,1.2771943502797123e-9,1.1771654419012734e-6]]

Actual:   [[0, 0, 0]]

Expected: [[0, 0, 0]]