import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep24215 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con51654 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Max30983 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Max30983 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0ELU74956 = tf.keras.layers.Input(shape=([1, 2]))

Dep24215 = keras.layers.DepthwiseConv2D((1, 1),strides=(2, 2), padding='same', name = 'Dep24215', )(in0Dep24215)
Res47869 = keras.layers.Reshape((1, 1), name = 'Res47869', )(Dep24215)
LST23542 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST23542', )(Res47869)
Res94868 = keras.layers.Reshape((1, 1), name = 'Res94868', )(LST23542)
Res65046 = keras.layers.Reshape((1, 1, 1), name = 'Res65046', )(Res94868)
Res34329 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res34329', )(Res65046)
Zer99269 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer99269', )(Res34329)
Con51654 = keras.layers.Concatenate(axis=4, name = 'Con51654', )([Zer99269,in0Con51654])
Max30983 = keras.layers.Maximum(name = 'Max30983', )([in0Max30983,in1Max30983])
Mul36459 = keras.layers.Multiply(name = 'Mul36459', )([Con51654,Max30983])
Res15239 = keras.layers.Reshape((2, 1, 2), name = 'Res15239', )(Mul36459)
Res18468 = keras.layers.Reshape((2, 2), name = 'Res18468', )(Res15239)
ELU74956 = keras.layers.ELU(alpha=0.2694495822353833, name = 'ELU74956', input_shape=(1, 2))(in0ELU74956)
Zer68442 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer68442', )(ELU74956)
Dot37285 = keras.layers.Dot(axes=(1, 1), name = 'Dot37285', )([Res18468,Zer68442])
Den6284 = keras.layers.Dense(2,name = 'Den6284', )(Dot37285)
model = tf.keras.models.Model(inputs=[in0Dep24215,in0Con51654,in0Max30983,in1Max30983,in0ELU74956], outputs=Den6284)
w = model.get_layer('Dep24215').get_weights() 
w[0] = np.array([[[[0.8603]]]])
w[1] = np.array([0])
model.get_layer('Dep24215').set_weights(w) 
w = model.get_layer('LST23542').get_weights() 
w[0] = np.array([[9, 6, 1, 2]])
w[1] = np.array([[3, 1, 8, 5]])
w[2] = np.array([1, 4, 4, 7])
model.get_layer('LST23542').set_weights(w) 
w = model.get_layer('Den6284').get_weights() 
w[0] = np.array([[0.0194, 0.5933], [0.5573, 0.1166]])
w[1] = np.array([0.1618, 0.1018])
model.get_layer('Den6284').set_weights(w) 
in0Dep24215 = tf.constant([[[[0.3325]], [[0.7462]]]])
in0Con51654 = tf.constant([[[[[0.0097]]], [[[0.2019]]]]])
in0Max30983 = tf.constant([[[[[0.3494, 0.1686]]], [[[0.9131, 0.6221]]]]])
in1Max30983 = tf.constant([[[[[0.202, 0.8193]]], [[[0.1101, 0.7958]]]]])
in0ELU74956 = tf.constant([[[0.8212, 0.6754]]])
print (np.array2string(model.predict([in0Dep24215,in0Con51654,in0Max30983,in1Max30983,in0ELU74956],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den6284.png')

LDep24215 = depthwise_conv2D_layer([[[[0.3325]], [[0.7462]]]], 1, 1,[[[[0.8603]]]],[0], 2, 2, true, Dep24215), 
LRes47869 = reshape_layer(Dep24215, [1, 1], Res47869), 
LLST23542 = lstm_layer(Res47869,[[9, 6, 1, 2]],[[3, 1, 8, 5]],[1, 4, 4, 7], LST23542), 
LRes94868 = reshape_layer(LST23542, [1, 1], Res94868), 
LRes65046 = reshape_layer(Res94868, [1, 1, 1], Res65046), 
LRes34329 = reshape_layer(Res65046, [1, 1, 1, 1], Res34329), 
LZer99269 = zero_padding3D_layer(Res34329, 1, 0, 0, 0, 0, 0, Zer99269), 
LCon51654 = concatenate_layer([Zer99269,[[[[[0.0097]]], [[[0.2019]]]]]], 4, Con51654), 
LMax30983 = maximum_layer([[[[[[0.3494, 0.1686]]], [[[0.9131, 0.6221]]]]], [[[[[0.202, 0.8193]]], [[[0.1101, 0.7958]]]]]], Max30983), 
LMul36459 = multiply_layer([Con51654,Max30983], Mul36459), 
LRes15239 = reshape_layer(Mul36459, [2, 1, 2], Res15239), 
LRes18468 = reshape_layer(Res15239, [2, 2], Res18468), 
LELU74956 = elu_layer([[[0.8212, 0.6754]]], 0.2694495822353833, ELU74956), 
LZer68442 = zero_padding1D_layer(ELU74956, 1, 0, Zer68442), 
LDot37285 = dot_layer(Res18468,Zer68442, 1, 1, Dot37285), 
LDen6284 = dense_layer(Dot37285, [[0.0194, 0.5933], [0.5573, 0.1166]],[0.1618, 0.1018], Den6284), 
exec_layers([LDep24215,LRes47869,LLST23542,LRes94868,LRes65046,LRes34329,LZer99269,LCon51654,LMax30983,LMul36459,LRes15239,LRes18468,LELU74956,LZer68442,LDot37285,LDen6284],["Dep24215","Res47869","LST23542","Res94868","Res65046","Res34329","Zer99269","Con51654","Max30983","Mul36459","Res15239","Res18468","ELU74956","Zer68442","Dot37285","Den6284"],Den6284,"Den6284")

Actual (Unparsed): [[[0.4302479, 0.4890574], [0.2248367, 0.1927355]]]

Expected (Unparsed): [[[0.43024791404561896,0.48905741135175507],[0.224836726749034,0.192735478890592]]]

Actual:   [[[0.4303, 0.4891], [0.2249, 0.1928]]]

Expected: [[[0.4303, 0.4891], [0.2249, 0.1928]]]