import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sof98380 = tf.keras.layers.Input(shape=([2, 2]))
in0Con30407 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot49849 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot49849 = tf.keras.layers.Input(shape=([2, 3]))
in0Up_21204 = tf.keras.layers.Input(shape=([4, 4, 4, 1]))

Sof98380 = keras.layers.Softmax(axis=1, name = 'Sof98380', input_shape=(2, 2))(in0Sof98380)
Zer61302 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer61302', )(Sof98380)
Con30407 = keras.layers.Concatenate(axis=2, name = 'Con30407', )([Zer61302,in0Con30407])
Dot49849 = keras.layers.Dot(axes=(1, 1), name = 'Dot49849', )([in0Dot49849,in1Dot49849])
Min74058 = keras.layers.Minimum(name = 'Min74058', )([Con30407,Dot49849])
Res6997 = keras.layers.Reshape((3, 3, 1), name = 'Res6997', )(Min74058)
Res84423 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res84423', )(Res6997)
Zer57232 = keras.layers.ZeroPadding3D(padding=((5, 0), (1, 0), (7, 0)), name = 'Zer57232', )(Res84423)
Up_21204 = keras.layers.UpSampling3D(size=(2, 1, 2), name = 'Up_21204', )(in0Up_21204)
Mul66518 = keras.layers.Multiply(name = 'Mul66518', )([Zer57232,Up_21204])
model = tf.keras.models.Model(inputs=[in0Sof98380,in0Con30407,in0Dot49849,in1Dot49849,in0Up_21204], outputs=Mul66518)
in0Sof98380 = tf.constant([[[0.2589, 0.2867], [0.1949, 0.8461]]])
in0Con30407 = tf.constant([[[0.4553], [0.3927], [0.1917]]])
in0Dot49849 = tf.constant([[[0.482, 0.0518, 0.781], [0.4644, 0.1179, 0.4059]]])
in1Dot49849 = tf.constant([[[0.7743, 0.1158, 0.9967], [0.9074, 0.9622, 0.6397]]])
in0Up_21204 = tf.constant([[[[[1.6652], [1.0826], [1.1518], [1.6446]], [[1.4146], [1.151], [1.9397], [1.8416]], [[1.3401], [1.8579], [1.3051], [1.2993]], [[1.6203], [1.4603], [1.7538], [1.364]]], [[[1.2565], [1.8463], [1.3684], [1.6275]], [[1.9708], [1.3606], [1.6564], [1.1161]], [[1.8238], [1.1532], [1.5313], [1.8292]], [[1.3872], [1.7743], [1.1091], [1.8566]]], [[[1.9786], [1.296], [1.2582], [1.5717]], [[1.5525], [1.4584], [1.0019], [1.8129]], [[1.3295], [1.2094], [1.9401], [1.5428]], [[1.1402], [1.5359], [1.8294], [1.2048]]], [[[1.7644], [1.6678], [1.3428], [1.8867]], [[1.2512], [1.5793], [1.814], [1.4411]], [[1.3227], [1.2062], [1.4649], [1.917]], [[1.483], [1.9528], [1.2141], [1.0097]]]]])
print (np.array2string(model.predict([in0Sof98380,in0Con30407,in0Dot49849,in1Dot49849,in0Up_21204],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul66518.png')

LSof98380 = softmax_layer([[[0.2589, 0.2867], [0.1949, 0.8461]]], 1, Sof98380), 
LZer61302 = zero_padding1D_layer(Sof98380, 1, 0, Zer61302), 
LCon30407 = concatenate_layer([Zer61302,[[[0.4553], [0.3927], [0.1917]]]], 2, Con30407), 
LDot49849 = dot_layer([[[0.482, 0.0518, 0.781], [0.4644, 0.1179, 0.4059]]], [[[0.7743, 0.1158, 0.9967], [0.9074, 0.9622, 0.6397]]], 1, 1, Dot49849), 
LMin74058 = minimum_layer([Con30407,Dot49849], Min74058), 
LRes6997 = reshape_layer(Min74058, [3, 3, 1], Res6997), 
LRes84423 = reshape_layer(Res6997, [3, 3, 1, 1], Res84423), 
LZer57232 = zero_padding3D_layer(Res84423, 5, 0, 1, 0, 7, 0, Zer57232), 
LUp_21204 = up_sampling3D_layer([[[[[1.6652], [1.0826], [1.1518], [1.6446]], [[1.4146], [1.151], [1.9397], [1.8416]], [[1.3401], [1.8579], [1.3051], [1.2993]], [[1.6203], [1.4603], [1.7538], [1.364]]], [[[1.2565], [1.8463], [1.3684], [1.6275]], [[1.9708], [1.3606], [1.6564], [1.1161]], [[1.8238], [1.1532], [1.5313], [1.8292]], [[1.3872], [1.7743], [1.1091], [1.8566]]], [[[1.9786], [1.296], [1.2582], [1.5717]], [[1.5525], [1.4584], [1.0019], [1.8129]], [[1.3295], [1.2094], [1.9401], [1.5428]], [[1.1402], [1.5359], [1.8294], [1.2048]]], [[[1.7644], [1.6678], [1.3428], [1.8867]], [[1.2512], [1.5793], [1.814], [1.4411]], [[1.3227], [1.2062], [1.4649], [1.917]], [[1.483], [1.9528], [1.2141], [1.0097]]]]], 2, 1, 2, Up_21204), 
LMul66518 = multiply_layer([Zer57232,Up_21204], Mul66518), 
exec_layers([LSof98380,LZer61302,LCon30407,LDot49849,LMin74058,LRes6997,LRes84423,LZer57232,LUp_21204,LMul66518],["Sof98380","Zer61302","Con30407","Dot49849","Min74058","Res6997","Res84423","Zer57232","Up_21204","Mul66518"],Mul66518,"Mul66518")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.5485454]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.2119731]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.2289700]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.1282821]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.6975003]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.9220709]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.1935595]]]]]

Expected (Unparsed): [[[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]]],[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]]],[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]]],[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]]],[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]]],[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.54854544]]],[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.21197312832]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.22896996894000002]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.12828207199299999]]],[[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.697500267105116]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.92207082726]],[[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.0],[0.19355949000000003]]]]]

Actual:   [[[[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0.5486]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0.212]], [[0], [0], [0], [0], [0], [0], [0], [0.229]], [[0], [0], [0], [0], [0], [0], [0], [0.1283]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0.6976]], [[0], [0], [0], [0], [0], [0], [0], [0.9221]], [[0], [0], [0], [0], [0], [0], [0], [0.1936]]]]]

Expected: [[[[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0.5486]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0.212]], [[0], [0], [0], [0], [0], [0], [0], [0.229]], [[0], [0], [0], [0], [0], [0], [0], [0.1283]]], [[[0], [0], [0], [0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0], [0], [0], [0.6976]], [[0], [0], [0], [0], [0], [0], [0], [0.9221]], [[0], [0], [0], [0], [0], [0], [0], [0.1936]]]]]