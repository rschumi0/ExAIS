import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min91490 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Min91490 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con28856 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Mul25126 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Mul25126 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Min91490 = keras.layers.Minimum(name = 'Min91490', )([in0Min91490,in1Min91490])
Zer98081 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer98081', )(Min91490)
Con28856 = keras.layers.Concatenate(axis=4, name = 'Con28856', )([Zer98081,in0Con28856])
Mul25126 = keras.layers.Multiply(name = 'Mul25126', )([in0Mul25126,in1Mul25126])
Ave60154 = keras.layers.Average(name = 'Ave60154', )([Con28856,Mul25126])
model = tf.keras.models.Model(inputs=[in0Min91490,in1Min91490,in0Con28856,in0Mul25126,in1Mul25126], outputs=Ave60154)
in0Min91490 = tf.constant([[[[[0.8194], [0.1326]]]]])
in1Min91490 = tf.constant([[[[[0.8415], [0.1502]]]]])
in0Con28856 = tf.constant([[[[[0.503], [0.3649]], [[0.4836], [0.2458]]]]])
in0Mul25126 = tf.constant([[[[[0.6898, 0.253], [0.1263, 0.981]], [[0.8084, 0.7244], [0.8456, 0.303]]]]])
in1Mul25126 = tf.constant([[[[[0.159, 0.1484], [0.4235, 0.0044]], [[0.3242, 0.9583], [0.5478, 0.3625]]]]])
print (np.array2string(model.predict([in0Min91490,in1Min91490,in0Con28856,in0Mul25126,in1Mul25126],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave60154.png')

LMin91490 = minimum_layer([[[[[[0.8194], [0.1326]]]]], [[[[[0.8415], [0.1502]]]]]], Min91490), 
LZer98081 = zero_padding3D_layer(Min91490, 0, 0, 1, 0, 0, 0, Zer98081), 
LCon28856 = concatenate_layer([Zer98081,[[[[[0.503], [0.3649]], [[0.4836], [0.2458]]]]]], 4, Con28856), 
LMul25126 = multiply_layer([[[[[[0.6898, 0.253], [0.1263, 0.981]], [[0.8084, 0.7244], [0.8456, 0.303]]]]], [[[[[0.159, 0.1484], [0.4235, 0.0044]], [[0.3242, 0.9583], [0.5478, 0.3625]]]]]], Mul25126), 
LAve60154 = average_layer([Con28856,Mul25126], Ave60154), 
exec_layers([LMin91490,LZer98081,LCon28856,LMul25126,LAve60154],["Min91490","Zer98081","Con28856","Mul25126","Ave60154"],Ave60154,"Ave60154")

Actual (Unparsed): [[[[[0.0548391, 0.2702726], [0.0267440, 0.1846082]], [[0.5407416, 0.5888962], [0.2979098, 0.1778188]]]]]

Expected (Unparsed): [[[[[0.0548391,0.2702726],[0.026744024999999998,0.1846082]],[[0.54074164,0.5888962600000001],[0.29790984,0.17781875]]]]]

Actual:   [[[[[0.0549, 0.2703], [0.0268, 0.1847]], [[0.5408, 0.5889], [0.298, 0.1779]]]]]

Expected: [[[[[0.0549, 0.2703], [0.0268, 0.1847]], [[0.5408, 0.5889], [0.298, 0.1779]]]]]