import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add22445 = tf.keras.layers.Input(shape=([2, 2]))
in1Add22445 = tf.keras.layers.Input(shape=([2, 2]))

Add22445 = keras.layers.Add(name = 'Add22445', )([in0Add22445,in1Add22445])
Res22081 = keras.layers.Reshape((2, 2, 1), name = 'Res22081', )(Add22445)
Res55890 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res55890', )(Res22081)
Con38083 = keras.layers.Conv3DTranspose(3, (2, 1, 1),strides=(1, 2, 1), padding='same', name = 'Con38083', )(Res55890)
model = tf.keras.models.Model(inputs=[in0Add22445,in1Add22445], outputs=Con38083)
w = model.get_layer('Con38083').get_weights() 
w[0] = np.array([[[[[0.0409], [0.259], [0.39]]]], [[[[0.0634], [0.637], [0.6781]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con38083').set_weights(w) 
in0Add22445 = tf.constant([[[0.8478, 0.9872], [0.8853, 0.7031]]])
in1Add22445 = tf.constant([[[0.7927, 0.5376], [0.4188, 0.1446]]])
print (np.array2string(model.predict([in0Add22445,in1Add22445],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con38083.png')

LAdd22445 = add_layer([[[[0.8478, 0.9872], [0.8853, 0.7031]]], [[[0.7927, 0.5376], [0.4188, 0.1446]]]], Add22445), 
LRes22081 = reshape_layer(Add22445, [2, 2, 1], Res22081), 
LRes55890 = reshape_layer(Res22081, [2, 2, 1, 1], Res55890), 
LCon38083 = conv3D_transpose_layer(Res55890, 2, 1, 1,[[[[[0.0409], [0.259], [0.39]]]], [[[[0.0634], [0.637], [0.6781]]]]],[0, 0, 0], 1, 2, 1, true, Con38083), 
exec_layers([LAdd22445,LRes22081,LRes55890,LCon38083],["Add22445","Res22081","Res55890","Con38083"],Con38083,"Con38083")

Actual (Unparsed): [[[[[0.0670965, 0.4248895, 0.6397950]], [[0.0000000, 0.0000000, 0.0000000]], [[0.0623643, 0.3949232, 0.5946720]], [[0.0000000, 0.0000000, 0.0000000]]], [[[0.1573454, 1.3827604, 1.6210220]], [[0.0000000, 0.0000000, 0.0000000]], [[0.1313433, 1.1908519, 1.3645699]], [[0.0000000, 0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.06709644999999999,0.4248895,0.639795]],[[0,0,0]],[[0.062364319999999994,0.3949232,0.594672]],[[0,0,0]]],[[[0.15734538999999997,1.3827604,1.6210220499999999]],[[0,0,0]],[[0.13134325,1.1908519,1.36456988]],[[0,0,0]]]]]

Actual:   [[[[[0.0671, 0.4249, 0.6398]], [[0, 0, 0]], [[0.0624, 0.395, 0.5947]], [[0, 0, 0]]], [[[0.1574, 1.3828, 1.6211]], [[0, 0, 0]], [[0.1314, 1.1909, 1.3646]], [[0, 0, 0]]]]]

Expected: [[[[[0.0671, 0.4249, 0.6398]], [[0, 0, 0]], [[0.0624, 0.395, 0.5947]], [[0, 0, 0]]], [[[0.1574, 1.3828, 1.6211]], [[0, 0, 0]], [[0.1314, 1.1909, 1.3646]], [[0, 0, 0]]]]]