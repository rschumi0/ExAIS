import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max70330 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Max70330 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con45826 = tf.keras.layers.Input(shape=([1, 22]))
in0Zer27770 = tf.keras.layers.Input(shape=([2, 4, 4]))

Max70330 = keras.layers.Maximum(name = 'Max70330', )([in0Max70330,in1Max70330])
Res91282 = keras.layers.Reshape((1, 1, 2), name = 'Res91282', )(Max70330)
Res92071 = keras.layers.Reshape((1, 2), name = 'Res92071', )(Res91282)
Con45826 = keras.layers.Concatenate(axis=2, name = 'Con45826', )([Res92071,in0Con45826])
Zer27770 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer27770', )(in0Zer27770)
Res20617 = keras.layers.Reshape((4, 24), name = 'Res20617', )(Zer27770)
Dot88921 = keras.layers.Dot(axes=(2, 2), name = 'Dot88921', )([Con45826,Res20617])
Res15329 = keras.layers.Reshape((1, 4, 1), name = 'Res15329', )(Dot88921)
Con17711 = keras.layers.Conv2DTranspose(2, (1, 2),strides=(1, 12), padding='valid', name = 'Con17711', )(Res15329)
model = tf.keras.models.Model(inputs=[in0Max70330,in1Max70330,in0Con45826,in0Zer27770], outputs=Con17711)
w = model.get_layer('Con17711').get_weights() 
w[0] = np.array([[[[0.914], [0.9743]], [[0.5468], [0.7278]]]])
w[1] = np.array([0, 0])
model.get_layer('Con17711').set_weights(w) 
in0Max70330 = tf.constant([[[[[0.4104, 0.0832]]]]])
in1Max70330 = tf.constant([[[[[0.8881, 0.2301]]]]])
in0Con45826 = tf.constant([[[0.8778, 0.8694, 0.1667, 0.7336, 0.3426, 0.8485, 0.5395, 0.3622, 0.1512, 0.5956, 0.4058, 0.2516, 0.1119, 0.5539, 0.6769, 0.4918, 0.5555, 0.8084, 0.9046, 0.9569, 0.539, 0.5176]]])
in0Zer27770 = tf.constant([[[[1.2128, 1.5065, 1.0377, 1.7489], [1.6507, 1.0816, 1.0251, 1.3695], [1.6265, 1.6415, 1.307, 1.8035], [1.7692, 1.5776, 1.6922, 1.2093]], [[1.28, 1.0591, 1.9172, 1.4562], [1.8234, 1.7804, 1.17, 1.5162], [1.5072, 1.299, 1.5341, 1.7605], [1.0725, 1.2422, 1.4798, 1.3545]]]])
print (np.array2string(model.predict([in0Max70330,in1Max70330,in0Con45826,in0Zer27770],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con17711.png')

LMax70330 = maximum_layer([[[[[[0.4104, 0.0832]]]]], [[[[[0.8881, 0.2301]]]]]], Max70330), 
LRes91282 = reshape_layer(Max70330, [1, 1, 2], Res91282), 
LRes92071 = reshape_layer(Res91282, [1, 2], Res92071), 
LCon45826 = concatenate_layer([Res92071,[[[0.8778, 0.8694, 0.1667, 0.7336, 0.3426, 0.8485, 0.5395, 0.3622, 0.1512, 0.5956, 0.4058, 0.2516, 0.1119, 0.5539, 0.6769, 0.4918, 0.5555, 0.8084, 0.9046, 0.9569, 0.539, 0.5176]]]], 2, Con45826), 
LZer27770 = zero_padding2D_layer([[[[1.2128, 1.5065, 1.0377, 1.7489], [1.6507, 1.0816, 1.0251, 1.3695], [1.6265, 1.6415, 1.307, 1.8035], [1.7692, 1.5776, 1.6922, 1.2093]], [[1.28, 1.0591, 1.9172, 1.4562], [1.8234, 1.7804, 1.17, 1.5162], [1.5072, 1.299, 1.5341, 1.7605], [1.0725, 1.2422, 1.4798, 1.3545]]]], 1, 1, 1, 1, Zer27770), 
LRes20617 = reshape_layer(Zer27770, [4, 24], Res20617), 
LDot88921 = dot_layer(Con45826,Res20617, 2, 2, Dot88921), 
LRes15329 = reshape_layer(Dot88921, [1, 4, 1], Res15329), 
LCon17711 = conv2D_transpose_layer(Res15329, 1, 2,[[[[0.914], [0.9743]], [[0.5468], [0.7278]]]],[0, 0], 1, 12, false, Con17711), 
exec_layers([LMax70330,LRes91282,LRes92071,LCon45826,LZer27770,LRes20617,LDot88921,LRes15329,LCon17711],["Max70330","Res91282","Res92071","Con45826","Zer27770","Res20617","Dot88921","Res15329","Con17711"],Con17711,"Con17711")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [10.5192945, 11.2132917], [6.2931622, 8.3763047], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [9.9904230, 10.6495286], [5.9767651, 7.9551749], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0],[0.0,0.0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[10.5192943215,11.213291528925],[6.2931620732999995,8.37630460305],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[9.99042297346,10.649528559127],[5.976765078651999,7.955174879742],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0.0,0.0],[0.0,0.0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [10.5193, 11.2133], [6.2932, 8.3764], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [9.9905, 10.6496], [5.9768, 7.9552], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]]

Expected: [[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [10.5193, 11.2133], [6.2932, 8.3764], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [9.9905, 10.6496], [5.9768, 7.9552], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]]