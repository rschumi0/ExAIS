import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub84956 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub84956 = tf.keras.layers.Input(shape=([2, 3]))
in0Max10838 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Max10838 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Glo44020 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Con32301 = tf.keras.layers.Input(shape=([2]))
in0Max85225 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Max85225 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Sub84956 = keras.layers.Subtract(name = 'Sub84956', )([in0Sub84956,in1Sub84956])
Res44381 = keras.layers.Reshape((2, 3, 1), name = 'Res44381', )(Sub84956)
Res22931 = keras.layers.Reshape((2, 3, 1, 1), name = 'Res22931', )(Res44381)
Glo21281 = keras.layers.GlobalMaxPool3D(name = 'Glo21281', )(Res22931)
Res98394 = keras.layers.Reshape((1, 1), name = 'Res98394', )(Glo21281)
Zer93366 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer93366', )(Res98394)
Max10838 = keras.layers.Maximum(name = 'Max10838', )([in0Max10838,in1Max10838])
Res52850 = keras.layers.Reshape((2, 2, 1), name = 'Res52850', )(Max10838)
Res60662 = keras.layers.Reshape((2, 2), name = 'Res60662', )(Res52850)
Fla12908 = keras.layers.Flatten(name = 'Fla12908', )(Res60662)
Glo44020 = keras.layers.GlobalMaxPool3D(name = 'Glo44020', )(in0Glo44020)
Con32301 = keras.layers.Concatenate(axis=1, name = 'Con32301', )([Glo44020,in0Con32301])
Ave18683 = keras.layers.Average(name = 'Ave18683', )([Fla12908,Con32301])
Res99237 = keras.layers.Reshape((4, 1), name = 'Res99237', )(Ave18683)
Max85225 = keras.layers.Maximum(name = 'Max85225', )([in0Max85225,in1Max85225])
Res72626 = keras.layers.Reshape((4, 1), name = 'Res72626', )(Max85225)
Min96694 = keras.layers.Minimum(name = 'Min96694', )([Res99237,Res72626])
Sub64293 = keras.layers.Subtract(name = 'Sub64293', )([Zer93366,Min96694])
model = tf.keras.models.Model(inputs=[in0Sub84956,in1Sub84956,in0Max10838,in1Max10838,in0Glo44020,in0Con32301,in0Max85225,in1Max85225], outputs=Sub64293)
in0Sub84956 = tf.constant([[[0.5914, 0.6007, 0.2114], [0.4986, 0.3889, 0.9604]]])
in1Sub84956 = tf.constant([[[0.9736, 0.7361, 0.9246], [0.8354, 0.1743, 0.1573]]])
in0Max10838 = tf.constant([[[[[0.0762]], [[0.6466]]], [[[0.509]], [[0.5731]]]]])
in1Max10838 = tf.constant([[[[[0.1857]], [[0.3209]]], [[[0.3956]], [[0.8087]]]]])
in0Glo44020 = tf.constant([[[[[1.2754, 1.0833], [1.0421, 1.9105]]], [[[1.3343, 1.2227], [1.5778, 1.9138]]]]])
in0Con32301 = tf.constant([[0.7257, 0.6576]])
in0Max85225 = tf.constant([[[[[0.9251], [0.7386]], [[0.9209], [0.4727]]]]])
in1Max85225 = tf.constant([[[[[0.3063], [0.231]], [[0.8237], [0.0603]]]]])
print (np.array2string(model.predict([in0Sub84956,in1Sub84956,in0Max10838,in1Max10838,in0Glo44020,in0Con32301,in0Max85225,in1Max85225],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub64293.png')

LSub84956 = subtract_layer([[[0.5914, 0.6007, 0.2114], [0.4986, 0.3889, 0.9604]]], [[[0.9736, 0.7361, 0.9246], [0.8354, 0.1743, 0.1573]]], Sub84956), 
LRes44381 = reshape_layer(Sub84956, [2, 3, 1], Res44381), 
LRes22931 = reshape_layer(Res44381, [2, 3, 1, 1], Res22931), 
LGlo21281 = global_max_pool3D_layer(Res22931, Glo21281), 
LRes98394 = reshape_layer(Glo21281, [1, 1], Res98394), 
LZer93366 = zero_padding1D_layer(Res98394, 3, 0, Zer93366), 
LMax10838 = maximum_layer([[[[[[0.0762]], [[0.6466]]], [[[0.509]], [[0.5731]]]]], [[[[[0.1857]], [[0.3209]]], [[[0.3956]], [[0.8087]]]]]], Max10838), 
LRes52850 = reshape_layer(Max10838, [2, 2, 1], Res52850), 
LRes60662 = reshape_layer(Res52850, [2, 2], Res60662), 
LFla12908 = flatten_layer(Res60662, Fla12908), 
LGlo44020 = global_max_pool3D_layer([[[[[1.2754, 1.0833], [1.0421, 1.9105]]], [[[1.3343, 1.2227], [1.5778, 1.9138]]]]], Glo44020), 
LCon32301 = concatenate_layer([Glo44020,[[0.7257, 0.6576]]], 1, Con32301), 
LAve18683 = average_layer([Fla12908,Con32301], Ave18683), 
LRes99237 = reshape_layer(Ave18683, [4, 1], Res99237), 
LMax85225 = maximum_layer([[[[[[0.9251], [0.7386]], [[0.9209], [0.4727]]]]], [[[[[0.3063], [0.231]], [[0.8237], [0.0603]]]]]], Max85225), 
LRes72626 = reshape_layer(Max85225, [4, 1], Res72626), 
LMin96694 = minimum_layer([Res99237,Res72626], Min96694), 
LSub64293 = subtract_layer(Zer93366,Min96694, Sub64293), 
exec_layers([LSub84956,LRes44381,LRes22931,LGlo21281,LRes98394,LZer93366,LMax10838,LRes52850,LRes60662,LFla12908,LGlo44020,LCon32301,LAve18683,LRes99237,LMax85225,LRes72626,LMin96694,LSub64293],["Sub84956","Res44381","Res22931","Glo21281","Res98394","Zer93366","Max10838","Res52850","Res60662","Fla12908","Glo44020","Con32301","Ave18683","Res99237","Max85225","Res72626","Min96694","Sub64293"],Sub64293,"Sub64293")

Actual (Unparsed): [[[-0.8817500], [-0.7386000], [-0.6173500], [0.3304000]]]

Expected (Unparsed): [[[-0.88175],[-0.7386],[-0.6173500000000001],[0.3304]]]

Actual:   [[[-0.8817], [-0.7386], [-0.6173], [0.3304]]]

Expected: [[[-0.8817], [-0.7386], [-0.6173], [0.3304]]]