import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot48669 = tf.keras.layers.Input(shape=([3]))
in1Dot48669 = tf.keras.layers.Input(shape=([3]))
in0Con10226 = tf.keras.layers.Input(shape=([1, 1]))
in0Mul38357 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul38357 = tf.keras.layers.Input(shape=([1, 2]))

Dot48669 = keras.layers.Dot(axes=(1, 1), name = 'Dot48669', )([in0Dot48669,in1Dot48669])
Res69112 = keras.layers.Reshape((1, 1), name = 'Res69112', )(Dot48669)
Con10226 = keras.layers.Concatenate(axis=2, name = 'Con10226', )([Res69112,in0Con10226])
Mul38357 = keras.layers.Multiply(name = 'Mul38357', )([in0Mul38357,in1Mul38357])
Ave19846 = keras.layers.Average(name = 'Ave19846', )([Con10226,Mul38357])
Res62212 = keras.layers.Reshape((1, 2, 1), name = 'Res62212', )(Ave19846)
Res80834 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res80834', )(Res62212)
Glo10665 = keras.layers.GlobalMaxPool3D(name = 'Glo10665', )(Res80834)
model = tf.keras.models.Model(inputs=[in0Dot48669,in1Dot48669,in0Con10226,in0Mul38357,in1Mul38357], outputs=Glo10665)
in0Dot48669 = tf.constant([[0.2491, 0.1905, 0.5709]])
in1Dot48669 = tf.constant([[0.5965, 0.3008, 0.2709]])
in0Con10226 = tf.constant([[[0.5629]]])
in0Mul38357 = tf.constant([[[0.5177, 0.7469]]])
in1Mul38357 = tf.constant([[[0.6409, 0.1424]]])
print (np.array2string(model.predict([in0Dot48669,in1Dot48669,in0Con10226,in0Mul38357,in1Mul38357],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo10665.png')

LDot48669 = dot_layer([[0.2491, 0.1905, 0.5709]], [[0.5965, 0.3008, 0.2709]], 1, 1, Dot48669), 
LRes69112 = reshape_layer(Dot48669, [1, 1], Res69112), 
LCon10226 = concatenate_layer([Res69112,[[[0.5629]]]], 2, Con10226), 
LMul38357 = multiply_layer([[[[0.5177, 0.7469]]], [[[0.6409, 0.1424]]]], Mul38357), 
LAve19846 = average_layer([Con10226,Mul38357], Ave19846), 
LRes62212 = reshape_layer(Ave19846, [1, 2, 1], Res62212), 
LRes80834 = reshape_layer(Res62212, [1, 2, 1, 1], Res80834), 
LGlo10665 = global_max_pool3D_layer(Res80834, Glo10665), 
exec_layers([LDot48669,LRes69112,LCon10226,LMul38357,LAve19846,LRes62212,LRes80834,LGlo10665],["Dot48669","Res69112","Con10226","Mul38357","Ave19846","Res62212","Res80834","Glo10665"],Glo10665,"Glo10665")

Actual (Unparsed): [[0.3461707]]

Expected (Unparsed): [[0.34617064500000005]]

Actual:   [[0.3462]]

Expected: [[0.3462]]