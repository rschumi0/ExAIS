import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub10769 = tf.keras.layers.Input(shape=([2]))
in1Sub10769 = tf.keras.layers.Input(shape=([2]))
in0Con89684 = tf.keras.layers.Input(shape=([2]))
in0Min73094 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min73094 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave49815 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave49815 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con79050 = tf.keras.layers.Input(shape=([3]))
in0Con65382 = tf.keras.layers.Input(shape=([4, 1, 1]))
in0Con99343 = tf.keras.layers.Input(shape=([2, 1]))
in0Con90109 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0ELU39134 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Cro23484 = tf.keras.layers.Input(shape=([2, 2]))
in0Glo95387 = tf.keras.layers.Input(shape=([2, 2]))

Sub10769 = keras.layers.Subtract(name = 'Sub10769', )([in0Sub10769,in1Sub10769])
Con89684 = keras.layers.Concatenate(axis=1, name = 'Con89684', )([Sub10769,in0Con89684])
Min73094 = keras.layers.Minimum(name = 'Min73094', )([in0Min73094,in1Min73094])
Res41488 = keras.layers.Reshape((2, 2), name = 'Res41488', )(Min73094)
Fla37932 = keras.layers.Flatten(name = 'Fla37932', )(Res41488)
Ave49815 = keras.layers.Average(name = 'Ave49815', )([in0Ave49815,in1Ave49815])
Res52646 = keras.layers.Reshape((1, 1), name = 'Res52646', )(Ave49815)
Glo86027 = keras.layers.GlobalMaxPool1D(name = 'Glo86027', )(Res52646)
Con79050 = keras.layers.Concatenate(axis=1, name = 'Con79050', )([Glo86027,in0Con79050])
Mul47610 = keras.layers.Multiply(name = 'Mul47610', )([Fla37932,Con79050])
Mul36891 = keras.layers.Multiply(name = 'Mul36891', )([Con89684,Mul47610])
Res94908 = keras.layers.Reshape((4, 1), name = 'Res94908', )(Mul36891)
Res40543 = keras.layers.Reshape((4, 1, 1), name = 'Res40543', )(Res94908)
Con65382 = keras.layers.Concatenate(axis=3, name = 'Con65382', )([Res40543,in0Con65382])
Con99343 = keras.layers.Conv1D(4, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con99343', )(in0Con99343)
Res74322 = keras.layers.Reshape((1, 4, 1), name = 'Res74322', )(Con99343)
Glo12106 = keras.layers.GlobalMaxPool2D(name = 'Glo12106', )(Res74322)
Res20547 = keras.layers.Reshape((1, 1), name = 'Res20547', )(Glo12106)
Res87529 = keras.layers.Reshape((1, 1, 1), name = 'Res87529', )(Res20547)
Con90109 = keras.layers.Concatenate(axis=3, name = 'Con90109', )([Res87529,in0Con90109])
ELU39134 = keras.layers.ELU(alpha=8.733744082116267, name = 'ELU39134', input_shape=(1, 1, 2, 1))(in0ELU39134)
Res29939 = keras.layers.Reshape((1, 1, 2), name = 'Res29939', )(ELU39134)
Cro23484 = keras.layers.Cropping1D(cropping=((0, 1)), name = 'Cro23484', )(in0Cro23484)
Fla79427 = keras.layers.Flatten(name = 'Fla79427', )(Cro23484)
Glo95387 = keras.layers.GlobalMaxPool1D(name = 'Glo95387', )(in0Glo95387)
Sub11425 = keras.layers.Subtract(name = 'Sub11425', )([Fla79427,Glo95387])
Res11917 = keras.layers.Reshape((1, 1, 2), name = 'Res11917', )(Sub11425)
Sub10315 = keras.layers.Subtract(name = 'Sub10315', )([Res29939,Res11917])
Max10141 = keras.layers.Maximum(name = 'Max10141', )([Con90109,Sub10315])
Zer2868 = keras.layers.ZeroPadding2D(padding=((3, 0), (0, 0)), name = 'Zer2868', )(Max10141)
Sub36913 = keras.layers.Subtract(name = 'Sub36913', )([Con65382,Zer2868])
model = tf.keras.models.Model(inputs=[in0Sub10769,in1Sub10769,in0Con89684,in0Min73094,in1Min73094,in0Ave49815,in1Ave49815,in0Con79050,in0Con65382,in0Con99343,in0Con90109,in0ELU39134,in0Cro23484,in0Glo95387], outputs=Sub36913)
w = model.get_layer('Con99343').get_weights() 
w[0] = np.array([[[0.1184, 0.406, 0.1098, 0.3275]], [[0.6599, 0.39, 0.1057, 0.225]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con99343').set_weights(w) 
in0Sub10769 = tf.constant([[0.2633, 0.7404]])
in1Sub10769 = tf.constant([[0.481, 0.3419]])
in0Con89684 = tf.constant([[0.8599, 0.1715]])
in0Min73094 = tf.constant([[[[0.5643], [0.0426]], [[0.8307], [0.6586]]]])
in1Min73094 = tf.constant([[[[0.52], [0.2593]], [[0.0032], [0.9534]]]])
in0Ave49815 = tf.constant([[[[0.5794]]]])
in1Ave49815 = tf.constant([[[[0.9581]]]])
in0Con79050 = tf.constant([[0.2676, 0.8545, 0.7937]])
in0Con65382 = tf.constant([[[[0.5251]], [[0.6668]], [[0.1203]], [[0.4574]]]])
in0Con99343 = tf.constant([[[0.7889], [0.6852]]])
in0Con90109 = tf.constant([[[[0.1752]]]])
in0ELU39134 = tf.constant([[[[[0.6638], [0.8674]]]]])
in0Cro23484 = tf.constant([[[1.2419, 1.4171], [1.5568, 1.6487]]])
in0Glo95387 = tf.constant([[[1.711, 1.6694], [1.2851, 1.4722]]])
print (np.array2string(model.predict([in0Sub10769,in1Sub10769,in0Con89684,in0Min73094,in1Min73094,in0Ave49815,in1Ave49815,in0Con79050,in0Con65382,in0Con99343,in0Con90109,in0ELU39134,in0Cro23484,in0Glo95387],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub36913.png')

LSub10769 = subtract_layer([[0.2633, 0.7404]], [[0.481, 0.3419]], Sub10769), 
LCon89684 = concatenate_layer([Sub10769,[[0.8599, 0.1715]]], 1, Con89684), 
LMin73094 = minimum_layer([[[[[0.5643], [0.0426]], [[0.8307], [0.6586]]]], [[[[0.52], [0.2593]], [[0.0032], [0.9534]]]]], Min73094), 
LRes41488 = reshape_layer(Min73094, [2, 2], Res41488), 
LFla37932 = flatten_layer(Res41488, Fla37932), 
LAve49815 = average_layer([[[[[0.5794]]]], [[[[0.9581]]]]], Ave49815), 
LRes52646 = reshape_layer(Ave49815, [1, 1], Res52646), 
LGlo86027 = global_max_pool1D_layer(Res52646, Glo86027), 
LCon79050 = concatenate_layer([Glo86027,[[0.2676, 0.8545, 0.7937]]], 1, Con79050), 
LMul47610 = multiply_layer([Fla37932,Con79050], Mul47610), 
LMul36891 = multiply_layer([Con89684,Mul47610], Mul36891), 
LRes94908 = reshape_layer(Mul36891, [4, 1], Res94908), 
LRes40543 = reshape_layer(Res94908, [4, 1, 1], Res40543), 
LCon65382 = concatenate_layer([Res40543,[[[[0.5251]], [[0.6668]], [[0.1203]], [[0.4574]]]]], 3, Con65382), 
LCon99343 = conv1D_layer([[[0.7889], [0.6852]]], 2,[[[0.1184, 0.406, 0.1098, 0.3275]], [[0.6599, 0.39, 0.1057, 0.225]]],[0, 0, 0, 0], 1, false, 1, Con99343), 
LRes74322 = reshape_layer(Con99343, [1, 4, 1], Res74322), 
LGlo12106 = global_max_pool2D_layer(Res74322, Glo12106), 
LRes20547 = reshape_layer(Glo12106, [1, 1], Res20547), 
LRes87529 = reshape_layer(Res20547, [1, 1, 1], Res87529), 
LCon90109 = concatenate_layer([Res87529,[[[[0.1752]]]]], 3, Con90109), 
LELU39134 = elu_layer([[[[[0.6638], [0.8674]]]]], 8.733744082116267, ELU39134), 
LRes29939 = reshape_layer(ELU39134, [1, 1, 2], Res29939), 
LCro23484 = cropping1D_layer([[[1.2419, 1.4171], [1.5568, 1.6487]]], 0, 1, Cro23484), 
LFla79427 = flatten_layer(Cro23484, Fla79427), 
LGlo95387 = global_max_pool1D_layer([[[1.711, 1.6694], [1.2851, 1.4722]]], Glo95387), 
LSub11425 = subtract_layer(Fla79427,Glo95387, Sub11425), 
LRes11917 = reshape_layer(Sub11425, [1, 1, 2], Res11917), 
LSub10315 = subtract_layer(Res29939,Res11917, Sub10315), 
LMax10141 = maximum_layer([Con90109,Sub10315], Max10141), 
LZer2868 = zero_padding2D_layer(Max10141, 3, 0, 0, 0, Zer2868), 
LSub36913 = subtract_layer(Con65382,Zer2868, Sub36913), 
exec_layers([LSub10769,LCon89684,LMin73094,LRes41488,LFla37932,LAve49815,LRes52646,LGlo86027,LCon79050,LMul47610,LMul36891,LRes94908,LRes40543,LCon65382,LCon99343,LRes74322,LGlo12106,LRes20547,LRes87529,LCon90109,LELU39134,LRes29939,LCro23484,LFla79427,LGlo95387,LSub11425,LRes11917,LSub10315,LMax10141,LZer2868,LSub36913],["Sub10769","Con89684","Min73094","Res41488","Fla37932","Ave49815","Res52646","Glo86027","Con79050","Mul47610","Mul36891","Res94908","Res40543","Con65382","Con99343","Res74322","Glo12106","Res20547","Res87529","Con90109","ELU39134","Res29939","Cro23484","Fla79427","Glo95387","Sub11425","Res11917","Sub10315","Max10141","Zer2868","Sub36913"],Sub36913,"Sub36913")

Actual (Unparsed): [[[[-0.0870256, 0.5251000]], [[0.0045428, 0.6668000]], [[0.0023513, 0.1203000]], [[-1.0432517, -0.6623000]]]]

Expected (Unparsed): [[[[-0.08702557500000001,0.5251]],[[0.0045428043599999995,0.6668]],[[0.00235131056,0.1203]],[[-1.04325166437,-0.6622999999999999]]]]

Actual:   [[[[-0.087, 0.5251]], [[0.0046, 0.6668]], [[0.0024, 0.1203]], [[-1.0432, -0.6623]]]]

Expected: [[[[-0.087, 0.5251]], [[0.0046, 0.6668]], [[0.0024, 0.1203]], [[-1.0432, -0.6622]]]]