import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave75695 = tf.keras.layers.Input(shape=([2, 2]))
in0Min96800 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Min96800 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con2144 = tf.keras.layers.Input(shape=([8]))
in0Mul20388 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Mul20388 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con21307 = tf.keras.layers.Input(shape=([7]))
in0Fla31611 = tf.keras.layers.Input(shape=([3, 3]))

Ave75695 = keras.layers.AveragePooling1D(pool_size=(1), strides=(12), padding='same', name = 'Ave75695', )(in0Ave75695)
Res23237 = keras.layers.Reshape((1, 2, 1), name = 'Res23237', )(Ave75695)
Min96800 = keras.layers.Minimum(name = 'Min96800', )([in0Min96800,in1Min96800])
Res43637 = keras.layers.Reshape((1, 2, 1), name = 'Res43637', )(Min96800)
Mul97261 = keras.layers.Multiply(name = 'Mul97261', )([Res23237,Res43637])
Ave82418 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave82418', )(Mul97261)
Res37022 = keras.layers.Reshape((1, 1), name = 'Res37022', )(Ave82418)
Fla62198 = keras.layers.Flatten(name = 'Fla62198', )(Res37022)
Con2144 = keras.layers.Concatenate(axis=1, name = 'Con2144', )([Fla62198,in0Con2144])
Mul20388 = keras.layers.Multiply(name = 'Mul20388', )([in0Mul20388,in1Mul20388])
Sof12280 = keras.layers.Softmax(axis=1, name = 'Sof12280', )(Mul20388)
Res99757 = keras.layers.Reshape((1, 1, 2), name = 'Res99757', )(Sof12280)
Res87128 = keras.layers.Reshape((1, 2), name = 'Res87128', )(Res99757)
Fla49829 = keras.layers.Flatten(name = 'Fla49829', )(Res87128)
Con21307 = keras.layers.Concatenate(axis=1, name = 'Con21307', )([Fla49829,in0Con21307])
Fla31611 = keras.layers.Flatten(name = 'Fla31611', )(in0Fla31611)
Mul67086 = keras.layers.Multiply(name = 'Mul67086', )([Con21307,Fla31611])
Mul59353 = keras.layers.Multiply(name = 'Mul59353', )([Con2144,Mul67086])
model = tf.keras.models.Model(inputs=[in0Ave75695,in0Min96800,in1Min96800,in0Con2144,in0Mul20388,in1Mul20388,in0Con21307,in0Fla31611], outputs=Mul59353)
in0Ave75695 = tf.constant([[[1.1827, 1.674], [1.9205, 1.2023]]])
in0Min96800 = tf.constant([[[[[0.4428, 0.9749]]]]])
in1Min96800 = tf.constant([[[[[0.7005, 0.4239]]]]])
in0Con2144 = tf.constant([[0.7102, 0.2516, 0.9263, 0.8113, 0.3078, 0.0521, 0.3475, 0.2143]])
in0Mul20388 = tf.constant([[[[[0.4242, 0.548]]]]])
in1Mul20388 = tf.constant([[[[[0.4316, 0.0651]]]]])
in0Con21307 = tf.constant([[0.9012, 0.8452, 0.1395, 0.9064, 0.1681, 0.2088, 0.4072]])
in0Fla31611 = tf.constant([[[1.0354, 1.0327, 1.4517], [1.9686, 1.3235, 1.6639], [1.0576, 1.7897, 1.3231]]])
print (np.array2string(model.predict([in0Ave75695,in0Min96800,in1Min96800,in0Con2144,in0Mul20388,in1Mul20388,in0Con21307,in0Fla31611],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul59353.png')

LAve75695 = average_pooling1D_layer([[[1.1827, 1.674], [1.9205, 1.2023]]], 1, 12, true, Ave75695), 
LRes23237 = reshape_layer(Ave75695, [1, 2, 1], Res23237), 
LMin96800 = minimum_layer([[[[[[0.4428, 0.9749]]]]], [[[[[0.7005, 0.4239]]]]]], Min96800), 
LRes43637 = reshape_layer(Min96800, [1, 2, 1], Res43637), 
LMul97261 = multiply_layer([Res23237,Res43637], Mul97261), 
LAve82418 = average_pooling2D_layer(Mul97261, 1, 2, Ave82418), 
LRes37022 = reshape_layer(Ave82418, [1, 1], Res37022), 
LFla62198 = flatten_layer(Res37022, Fla62198), 
LCon2144 = concatenate_layer([Fla62198,[[0.7102, 0.2516, 0.9263, 0.8113, 0.3078, 0.0521, 0.3475, 0.2143]]], 1, Con2144), 
LMul20388 = multiply_layer([[[[[[0.4242, 0.548]]]]], [[[[[0.4316, 0.0651]]]]]], Mul20388), 
LSof12280 = softmax_layer(Mul20388, 1, Sof12280), 
LRes99757 = reshape_layer(Sof12280, [1, 1, 2], Res99757), 
LRes87128 = reshape_layer(Res99757, [1, 2], Res87128), 
LFla49829 = flatten_layer(Res87128, Fla49829), 
LCon21307 = concatenate_layer([Fla49829,[[0.9012, 0.8452, 0.1395, 0.9064, 0.1681, 0.2088, 0.4072]]], 1, Con21307), 
LFla31611 = flatten_layer([[[1.0354, 1.0327, 1.4517], [1.9686, 1.3235, 1.6639], [1.0576, 1.7897, 1.3231]]], Fla31611), 
LMul67086 = multiply_layer([Con21307,Fla31611], Mul67086), 
LMul59353 = multiply_layer([Con2144,Mul67086], Mul59353), 
exec_layers([LAve75695,LRes23237,LMin96800,LRes43637,LMul97261,LAve82418,LRes37022,LFla62198,LCon2144,LMul20388,LSof12280,LRes99757,LRes87128,LFla49829,LCon21307,LFla31611,LMul67086,LMul59353],["Ave75695","Res23237","Min96800","Res43637","Mul97261","Ave82418","Res37022","Fla62198","Con2144","Mul20388","Sof12280","Res99757","Res87128","Fla49829","Con21307","Fla31611","Mul67086","Mul59353"],Mul59353,"Mul59353")

Actual (Unparsed): [[0.6384837, 0.7334235, 0.3291612, 1.5412342, 0.1497889, 0.4642113, 0.0092625, 0.1298571, 0.1154576]]

Expected (Unparsed): [[0.6384836344320001,0.73342354,0.32916124526400004,1.5412341849359998,0.149788899225,0.46421132788799996,0.009262471376,0.1298570526,0.115457622376]]

Actual:   [[0.6385, 0.7335, 0.3292, 1.5413, 0.1498, 0.4643, 0.0093, 0.1299, 0.1155]]

Expected: [[0.6385, 0.7335, 0.3292, 1.5413, 0.1498, 0.4643, 0.0093, 0.1299, 0.1155]]