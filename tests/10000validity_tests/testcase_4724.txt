import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot18414 = tf.keras.layers.Input(shape=([2]))
in1Dot18414 = tf.keras.layers.Input(shape=([2]))
in0Con24678 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Mul71040 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Mul71040 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))

Dot18414 = keras.layers.Dot(axes=(1, 1), name = 'Dot18414', )([in0Dot18414,in1Dot18414])
Res8876 = keras.layers.Reshape((1, 1), name = 'Res8876', )(Dot18414)
Res98701 = keras.layers.Reshape((1, 1, 1), name = 'Res98701', )(Res8876)
Res82828 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res82828', )(Res98701)
Zer81105 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer81105', )(Res82828)
Con24678 = keras.layers.Concatenate(axis=4, name = 'Con24678', )([Zer81105,in0Con24678])
Mul71040 = keras.layers.Multiply(name = 'Mul71040', )([in0Mul71040,in1Mul71040])
Sub55121 = keras.layers.Subtract(name = 'Sub55121', )([Con24678,Mul71040])
Res29127 = keras.layers.Reshape((2, 2, 2), name = 'Res29127', )(Sub55121)
Glo34475 = keras.layers.GlobalMaxPool2D(name = 'Glo34475', )(Res29127)
model = tf.keras.models.Model(inputs=[in0Dot18414,in1Dot18414,in0Con24678,in0Mul71040,in1Mul71040], outputs=Glo34475)
in0Dot18414 = tf.constant([[0.4739, 0.6814]])
in1Dot18414 = tf.constant([[0.4359, 0.8668]])
in0Con24678 = tf.constant([[[[[0.1922]], [[0.4183]]], [[[0.6742]], [[0.9656]]]]])
in0Mul71040 = tf.constant([[[[[0.3311, 0.9254]], [[0.5369, 0.4455]]], [[[0.7776, 0.4822]], [[0.0106, 0.5744]]]]])
in1Mul71040 = tf.constant([[[[[0.6404, 0.2625]], [[0.5408, 0.4845]]], [[[0.9371, 0.5945]], [[0.4794, 0.9307]]]]])
print (np.array2string(model.predict([in0Dot18414,in1Dot18414,in0Con24678,in0Mul71040,in1Mul71040],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo34475.png')

LDot18414 = dot_layer([[0.4739, 0.6814]], [[0.4359, 0.8668]], 1, 1, Dot18414), 
LRes8876 = reshape_layer(Dot18414, [1, 1], Res8876), 
LRes98701 = reshape_layer(Res8876, [1, 1, 1], Res98701), 
LRes82828 = reshape_layer(Res98701, [1, 1, 1, 1], Res82828), 
LZer81105 = zero_padding3D_layer(Res82828, 1, 0, 1, 0, 0, 0, Zer81105), 
LCon24678 = concatenate_layer([Zer81105,[[[[[0.1922]], [[0.4183]]], [[[0.6742]], [[0.9656]]]]]], 4, Con24678), 
LMul71040 = multiply_layer([[[[[[0.3311, 0.9254]], [[0.5369, 0.4455]]], [[[0.7776, 0.4822]], [[0.0106, 0.5744]]]]], [[[[[0.6404, 0.2625]], [[0.5408, 0.4845]]], [[[0.9371, 0.5945]], [[0.4794, 0.9307]]]]]], Mul71040), 
LSub55121 = subtract_layer(Con24678,Mul71040, Sub55121), 
LRes29127 = reshape_layer(Sub55121, [2, 2, 2], Res29127), 
LGlo34475 = global_max_pool2D_layer(Res29127, Glo34475), 
exec_layers([LDot18414,LRes8876,LRes98701,LRes82828,LZer81105,LCon24678,LMul71040,LSub55121,LRes29127,LGlo34475],["Dot18414","Res8876","Res98701","Res82828","Zer81105","Con24678","Mul71040","Sub55121","Res29127","Glo34475"],Glo34475,"Glo34475")

Actual (Unparsed): [[0.7921289, 0.4310059]]

Expected (Unparsed): [[0.7921288900000001,0.43100592000000004]]

Actual:   [[0.7922, 0.4311]]

Expected: [[0.7922, 0.4311]]