import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min26592 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min26592 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Ave96217 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave96217 = tf.keras.layers.Input(shape=([1, 1]))
in0Con4238 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot37829 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot37829 = tf.keras.layers.Input(shape=([3, 3]))

Min26592 = keras.layers.Minimum(name = 'Min26592', )([in0Min26592,in1Min26592])
Res29025 = keras.layers.Reshape((2, 1), name = 'Res29025', )(Min26592)
Ave96217 = keras.layers.Average(name = 'Ave96217', )([in0Ave96217,in1Ave96217])
Zer75632 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer75632', )(Ave96217)
Ave14588 = keras.layers.Average(name = 'Ave14588', )([Res29025,Zer75632])
Zer48827 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer48827', )(Ave14588)
Con4238 = keras.layers.Concatenate(axis=2, name = 'Con4238', )([Zer48827,in0Con4238])
Dot37829 = keras.layers.Dot(axes=(2, 2), name = 'Dot37829', )([in0Dot37829,in1Dot37829])
Ave2574 = keras.layers.Average(name = 'Ave2574', )([Con4238,Dot37829])
model = tf.keras.models.Model(inputs=[in0Min26592,in1Min26592,in0Ave96217,in1Ave96217,in0Con4238,in0Dot37829,in1Dot37829], outputs=Ave2574)
in0Min26592 = tf.constant([[[[0.4404]], [[0.8972]]]])
in1Min26592 = tf.constant([[[[0.1203]], [[0.9255]]]])
in0Ave96217 = tf.constant([[[0.1688]]])
in1Ave96217 = tf.constant([[[0.712]]])
in0Con4238 = tf.constant([[[0.5212, 0.3565], [0.6638, 0.6023], [0.4174, 0.3126]]])
in0Dot37829 = tf.constant([[[0.116, 0.0086, 0.8585], [0.7588, 0.4988, 0.9022], [0.3456, 0.7883, 0.8252]]])
in1Dot37829 = tf.constant([[[0.2066, 0.6466, 0.8191], [0.7496, 0.0018, 0.3179], [0.3243, 0.9, 0.2421]]])
print (np.array2string(model.predict([in0Min26592,in1Min26592,in0Ave96217,in1Ave96217,in0Con4238,in0Dot37829,in1Dot37829],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave2574.png')

LMin26592 = minimum_layer([[[[[0.4404]], [[0.8972]]]], [[[[0.1203]], [[0.9255]]]]], Min26592), 
LRes29025 = reshape_layer(Min26592, [2, 1], Res29025), 
LAve96217 = average_layer([[[[0.1688]]], [[[0.712]]]], Ave96217), 
LZer75632 = zero_padding1D_layer(Ave96217, 1, 0, Zer75632), 
LAve14588 = average_layer([Res29025,Zer75632], Ave14588), 
LZer48827 = zero_padding1D_layer(Ave14588, 1, 0, Zer48827), 
LCon4238 = concatenate_layer([Zer48827,[[[0.5212, 0.3565], [0.6638, 0.6023], [0.4174, 0.3126]]]], 2, Con4238), 
LDot37829 = dot_layer([[[0.116, 0.0086, 0.8585], [0.7588, 0.4988, 0.9022], [0.3456, 0.7883, 0.8252]]], [[[0.2066, 0.6466, 0.8191], [0.7496, 0.0018, 0.3179], [0.3243, 0.9, 0.2421]]], 2, 2, Dot37829), 
LAve2574 = average_layer([Con4238,Dot37829], Ave2574), 
exec_layers([LMin26592,LRes29025,LAve96217,LZer75632,LAve14588,LZer48827,LCon4238,LDot37829,LAve2574],["Min26592","Res29025","Ave96217","Zer75632","Ave14588","Zer48827","Con4238","Dot37829","Ave2574"],Ave2574,"Ave2574")

Actual (Unparsed): [[[0.3663619, 0.4405431, 0.3048508], [0.6392171, 0.7601519, 0.7578607], [0.9629185, 0.4701059, 0.6669645]]]

Expected (Unparsed): [[[0.366361855,0.44054311500000004,0.30485082500000005],[0.6392170899999999,0.76015185,0.75786073],[0.96291853,0.47010589,0.6669645000000001]]]

Actual:   [[[0.3664, 0.4406, 0.3049], [0.6393, 0.7602, 0.7579], [0.963, 0.4702, 0.667]]]

Expected: [[[0.3664, 0.4406, 0.3049], [0.6393, 0.7602, 0.7579], [0.963, 0.4702, 0.667]]]