import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min74755 = tf.keras.layers.Input(shape=([1, 1]))
in1Min74755 = tf.keras.layers.Input(shape=([1, 1]))
in0Con69915 = tf.keras.layers.Input(shape=([1, 1, 3]))
in0Dot41033 = tf.keras.layers.Input(shape=([3]))
in1Dot41033 = tf.keras.layers.Input(shape=([3]))

Min74755 = keras.layers.Minimum(name = 'Min74755', )([in0Min74755,in1Min74755])
Res24649 = keras.layers.Reshape((1, 1, 1), name = 'Res24649', )(Min74755)
Con69915 = keras.layers.Concatenate(axis=3, name = 'Con69915', )([Res24649,in0Con69915])
Dot41033 = keras.layers.Dot(axes=(1, 1), name = 'Dot41033', )([in0Dot41033,in1Dot41033])
Res69391 = keras.layers.Reshape((1, 1), name = 'Res69391', )(Dot41033)
Res8269 = keras.layers.Reshape((1, 1, 1), name = 'Res8269', )(Res69391)
Sep53489 = keras.layers.SeparableConv2D(4, (1, 1),strides=(1, 1), padding='same', name = 'Sep53489', )(Res8269)
Min29792 = keras.layers.Minimum(name = 'Min29792', )([Con69915,Sep53489])
Max91841 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(1, 1), padding='same', name = 'Max91841', )(Min29792)
model = tf.keras.models.Model(inputs=[in0Min74755,in1Min74755,in0Con69915,in0Dot41033,in1Dot41033], outputs=Max91841)
w = model.get_layer('Sep53489').get_weights() 
w[0] = np.array([[[[0.5263]]]])
w[1] = np.array([[[[0.2268, 0.8436, 0.5287, 0.8699]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep53489').set_weights(w) 
in0Min74755 = tf.constant([[[0.3975]]])
in1Min74755 = tf.constant([[[0.2337]]])
in0Con69915 = tf.constant([[[[0.6069, 0.7726, 0.5417]]]])
in0Dot41033 = tf.constant([[0.941, 0.4307, 0.9511]])
in1Dot41033 = tf.constant([[0.9888, 0.737, 0.9041]])
print (np.array2string(model.predict([in0Min74755,in1Min74755,in0Con69915,in0Dot41033,in1Dot41033],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max91841.png')

LMin74755 = minimum_layer([[[[0.3975]]], [[[0.2337]]]], Min74755), 
LRes24649 = reshape_layer(Min74755, [1, 1, 1], Res24649), 
LCon69915 = concatenate_layer([Res24649,[[[[0.6069, 0.7726, 0.5417]]]]], 3, Con69915), 
LDot41033 = dot_layer([[0.941, 0.4307, 0.9511]], [[0.9888, 0.737, 0.9041]], 1, 1, Dot41033), 
LRes69391 = reshape_layer(Dot41033, [1, 1], Res69391), 
LRes8269 = reshape_layer(Res69391, [1, 1, 1], Res8269), 
LSep53489 = separable_conv2D_layer(Res8269, 1, 1,[[[[[0.5263]]]],[[[[0.2268, 0.8436, 0.5287, 0.8699]]]]],[0, 0, 0, 0], 1, 1, true, Sep53489), 
LMin29792 = minimum_layer([Con69915,Sep53489], Min29792), 
LMax91841 = max_pool2D_layer(Min29792, 2, 1, 1, 1, true, Max91841), 
exec_layers([LMin74755,LRes24649,LCon69915,LDot41033,LRes69391,LRes8269,LSep53489,LMin29792,LMax91841],["Min74755","Res24649","Con69915","Dot41033","Res69391","Res8269","Sep53489","Min29792","Max91841"],Max91841,"Max91841")

Actual (Unparsed): [[[[0.2337000, 0.6069000, 0.5864989, 0.5417000]]]]

Expected (Unparsed): [[[[0.2337,0.6069,0.5864988688360699,0.5417]]]]

Actual:   [[[[0.2337, 0.6069, 0.5865, 0.5417]]]]

Expected: [[[[0.2337, 0.6069, 0.5865, 0.5417]]]]