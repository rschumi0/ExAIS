import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot6007 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot6007 = tf.keras.layers.Input(shape=([3, 3]))
in0ELU13141 = tf.keras.layers.Input(shape=([2, 2]))
in0Glo34352 = tf.keras.layers.Input(shape=([2, 2]))
in0Con89889 = tf.keras.layers.Input(shape=([2]))
in0Con4998 = tf.keras.layers.Input(shape=([5]))

Dot6007 = keras.layers.Dot(axes=(2, 1), name = 'Dot6007', )([in0Dot6007,in1Dot6007])
Fla81999 = keras.layers.Flatten(name = 'Fla81999', )(Dot6007)
ELU13141 = keras.layers.ELU(alpha=3.861685973045594, name = 'ELU13141', input_shape=(2, 2))(in0ELU13141)
Fla69807 = keras.layers.Flatten(name = 'Fla69807', )(ELU13141)
Glo34352 = keras.layers.GlobalAveragePooling1D(name = 'Glo34352', )(in0Glo34352)
Con89889 = keras.layers.Concatenate(axis=1, name = 'Con89889', )([Glo34352,in0Con89889])
Mul66413 = keras.layers.Multiply(name = 'Mul66413', )([Fla69807,Con89889])
Con4998 = keras.layers.Concatenate(axis=1, name = 'Con4998', )([Mul66413,in0Con4998])
Max23814 = keras.layers.Maximum(name = 'Max23814', )([Fla81999,Con4998])
model = tf.keras.models.Model(inputs=[in0Dot6007,in1Dot6007,in0ELU13141,in0Glo34352,in0Con89889,in0Con4998], outputs=Max23814)
in0Dot6007 = tf.constant([[[0.9139, 0.3542, 0.8554], [0.6494, 0.8977, 0.2467], [0.9396, 0.1672, 0.7734]]])
in1Dot6007 = tf.constant([[[0.6345, 0.6694, 0.1594], [0.6075, 0.0843, 0.8826], [0.4288, 0.4312, 0.4263]]])
in0ELU13141 = tf.constant([[[0.5273, 0.1646], [0.8255, 0.1582]]])
in0Glo34352 = tf.constant([[[1.9006, 1.0012], [1.9629, 1.7966]]])
in0Con89889 = tf.constant([[0.0616, 0.2957]])
in0Con4998 = tf.constant([[0.1732, 0.4701, 0.6842, 0.002, 0.276]])
print (np.array2string(model.predict([in0Dot6007,in1Dot6007,in0ELU13141,in0Glo34352,in0Con89889,in0Con4998],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max23814.png')

LDot6007 = dot_layer([[[0.9139, 0.3542, 0.8554], [0.6494, 0.8977, 0.2467], [0.9396, 0.1672, 0.7734]]], [[[0.6345, 0.6694, 0.1594], [0.6075, 0.0843, 0.8826], [0.4288, 0.4312, 0.4263]]], 2, 1, Dot6007), 
LFla81999 = flatten_layer(Dot6007, Fla81999), 
LELU13141 = elu_layer([[[0.5273, 0.1646], [0.8255, 0.1582]]], 3.861685973045594, ELU13141), 
LFla69807 = flatten_layer(ELU13141, Fla69807), 
LGlo34352 = global_average_pooling1D_layer([[[1.9006, 1.0012], [1.9629, 1.7966]]], Glo34352), 
LCon89889 = concatenate_layer([Glo34352,[[0.0616, 0.2957]]], 1, Con89889), 
LMul66413 = multiply_layer([Fla69807,Con89889], Mul66413), 
LCon4998 = concatenate_layer([Mul66413,[[0.1732, 0.4701, 0.6842, 0.002, 0.276]]], 1, Con4998), 
LMax23814 = maximum_layer([Fla81999,Con4998], Max23814), 
exec_layers([LDot6007,LFla81999,LELU13141,LFla69807,LGlo34352,LCon89889,LMul66413,LCon4998,LMax23814],["Dot6007","Fla81999","ELU13141","Fla69807","Glo34352","Con89889","Mul66413","Con4998","Max23814"],Max23814,"Max23814")

Actual (Unparsed): [[1.1618416, 1.0104722, 0.8229496, 1.0631820, 0.6167615, 1.0009926, 1.0293841, 0.9765533, 0.6270434]]

Expected (Unparsed): [[1.16184157,1.0104722000000002,0.8229496000000001,1.06318201,0.61676151,1.00099259,1.02938412,0.97655328,0.6270433799999999]]

Actual:   [[1.1619, 1.0105, 0.823, 1.0632, 0.6168, 1.001, 1.0294, 0.9766, 0.6271]]

Expected: [[1.1619, 1.0105, 0.823, 1.0632, 0.6168, 1.001, 1.0294, 0.9766, 0.6271]]