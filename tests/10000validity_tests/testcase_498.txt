import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add74796 = tf.keras.layers.Input(shape=([2, 1]))
in1Add74796 = tf.keras.layers.Input(shape=([2, 1]))
in0Add79644 = tf.keras.layers.Input(shape=([1, 2]))
in1Add79644 = tf.keras.layers.Input(shape=([1, 2]))
in0Glo14754 = tf.keras.layers.Input(shape=([2, 2]))
in0Max1534 = tf.keras.layers.Input(shape=([1, 1]))

Add74796 = keras.layers.Add(name = 'Add74796', )([in0Add74796,in1Add74796])
Fla79743 = keras.layers.Flatten(name = 'Fla79743', )(Add74796)
Add79644 = keras.layers.Add(name = 'Add79644', )([in0Add79644,in1Add79644])
Fla88315 = keras.layers.Flatten(name = 'Fla88315', )(Add79644)
Glo14754 = keras.layers.GlobalMaxPool1D(name = 'Glo14754', )(in0Glo14754)
Add19089 = keras.layers.Add(name = 'Add19089', )([Fla88315,Glo14754])
Sub83807 = keras.layers.Subtract(name = 'Sub83807', )([Fla79743,Add19089])
Res81556 = keras.layers.Reshape((2, 1), name = 'Res81556', )(Sub83807)
Res82967 = keras.layers.Reshape((2, 1, 1), name = 'Res82967', )(Res81556)
Dep82264 = keras.layers.DepthwiseConv2D((1, 1),strides=(2, 2), padding='valid', name = 'Dep82264', )(Res82967)
Res26444 = keras.layers.Reshape((1, 1), name = 'Res26444', )(Dep82264)
Max1534 = keras.layers.MaxPool1D(pool_size=(1), strides=(3), padding='same', name = 'Max1534', )(in0Max1534)
Glo35619 = keras.layers.GlobalAveragePooling1D(name = 'Glo35619', )(Max1534)
Res48074 = keras.layers.Reshape((1, 1), name = 'Res48074', )(Glo35619)
Ave19695 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave19695', )(Res48074)
Min97680 = keras.layers.Minimum(name = 'Min97680', )([Res26444,Ave19695])
model = tf.keras.models.Model(inputs=[in0Add74796,in1Add74796,in0Add79644,in1Add79644,in0Glo14754,in0Max1534], outputs=Min97680)
w = model.get_layer('Dep82264').get_weights() 
w[0] = np.array([[[[0.7021]]]])
w[1] = np.array([0])
model.get_layer('Dep82264').set_weights(w) 
in0Add74796 = tf.constant([[[0.233], [0.4483]]])
in1Add74796 = tf.constant([[[0.9128], [0.5077]]])
in0Add79644 = tf.constant([[[0.2376, 0.8146]]])
in1Add79644 = tf.constant([[[0.2718, 0.4286]]])
in0Glo14754 = tf.constant([[[1.5772, 1.3459], [1.748, 1.6017]]])
in0Max1534 = tf.constant([[[1.2644]]])
print (np.array2string(model.predict([in0Add74796,in1Add74796,in0Add79644,in1Add79644,in0Glo14754,in0Max1534],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min97680.png')

LAdd74796 = add_layer([[[[0.233], [0.4483]]], [[[0.9128], [0.5077]]]], Add74796), 
LFla79743 = flatten_layer(Add74796, Fla79743), 
LAdd79644 = add_layer([[[[0.2376, 0.8146]]], [[[0.2718, 0.4286]]]], Add79644), 
LFla88315 = flatten_layer(Add79644, Fla88315), 
LGlo14754 = global_max_pool1D_layer([[[1.5772, 1.3459], [1.748, 1.6017]]], Glo14754), 
LAdd19089 = add_layer([Fla88315,Glo14754], Add19089), 
LSub83807 = subtract_layer(Fla79743,Add19089, Sub83807), 
LRes81556 = reshape_layer(Sub83807, [2, 1], Res81556), 
LRes82967 = reshape_layer(Res81556, [2, 1, 1], Res82967), 
LDep82264 = depthwise_conv2D_layer(Res82967, 1, 1,[[[[0.7021]]]],[0], 2, 2, false, Dep82264), 
LRes26444 = reshape_layer(Dep82264, [1, 1], Res26444), 
LMax1534 = max_pool1D_layer([[[1.2644]]], 1, 3, true, Max1534), 
LGlo35619 = global_average_pooling1D_layer(Max1534, Glo35619), 
LRes48074 = reshape_layer(Glo35619, [1, 1], Res48074), 
LAve19695 = average_pooling1D_layer(Res48074, 1, 1, false, Ave19695), 
LMin97680 = minimum_layer([Res26444,Ave19695], Min97680), 
exec_layers([LAdd74796,LFla79743,LAdd79644,LFla88315,LGlo14754,LAdd19089,LSub83807,LRes81556,LRes82967,LDep82264,LRes26444,LMax1534,LGlo35619,LRes48074,LAve19695,LMin97680],["Add74796","Fla79743","Add79644","Fla88315","Glo14754","Add19089","Sub83807","Res81556","Res82967","Dep82264","Res26444","Max1534","Glo35619","Res48074","Ave19695","Min97680"],Min97680,"Min97680")

Actual (Unparsed): [[[-0.7804544]]]

Expected (Unparsed): [[[-0.78045436]]]

Actual:   [[[-0.7804]]]

Expected: [[[-0.7804]]]