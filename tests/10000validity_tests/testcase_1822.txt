import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo26899 = tf.keras.layers.Input(shape=([2, 2]))
in0Con69888 = tf.keras.layers.Input(shape=([4, 1]))
in0Min99919 = tf.keras.layers.Input(shape=([2, 1]))
in1Min99919 = tf.keras.layers.Input(shape=([2, 1]))

Glo26899 = keras.layers.GlobalAveragePooling1D(name = 'Glo26899', )(in0Glo26899)
Res32176 = keras.layers.Reshape((2, 1), name = 'Res32176', )(Glo26899)
Res25965 = keras.layers.Reshape((2, 1, 1), name = 'Res25965', )(Res32176)
Cro20083 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro20083', )(Res25965)
Res13717 = keras.layers.Reshape((1, 1), name = 'Res13717', )(Cro20083)
Zer81195 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer81195', )(Res13717)
Con69888 = keras.layers.Concatenate(axis=2, name = 'Con69888', )([Zer81195,in0Con69888])
Min99919 = keras.layers.Minimum(name = 'Min99919', )([in0Min99919,in1Min99919])
Res90308 = keras.layers.Reshape((2, 1, 1), name = 'Res90308', )(Min99919)
Res73490 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res73490', )(Res90308)
Con40026 = keras.layers.Conv3D(2, (1, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con40026', )(Res73490)
Res72286 = keras.layers.Reshape((2, 1, 2), name = 'Res72286', )(Con40026)
Res84627 = keras.layers.Reshape((2, 2), name = 'Res84627', )(Res72286)
Zer44749 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer44749', )(Res84627)
Min10730 = keras.layers.Minimum(name = 'Min10730', )([Con69888,Zer44749])
model = tf.keras.models.Model(inputs=[in0Glo26899,in0Con69888,in0Min99919,in1Min99919], outputs=Min10730)
w = model.get_layer('Con40026').get_weights() 
w[0] = np.array([[[[[0.6517, 0.9313]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con40026').set_weights(w) 
in0Glo26899 = tf.constant([[[1.038, 1.2322], [1.6775, 1.0905]]])
in0Con69888 = tf.constant([[[0.031], [0.3684], [0.2106], [0.5055]]])
in0Min99919 = tf.constant([[[0.7778], [0.4602]]])
in1Min99919 = tf.constant([[[0.8803], [0.1292]]])
print (np.array2string(model.predict([in0Glo26899,in0Con69888,in0Min99919,in1Min99919],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min10730.png')

LGlo26899 = global_average_pooling1D_layer([[[1.038, 1.2322], [1.6775, 1.0905]]], Glo26899), 
LRes32176 = reshape_layer(Glo26899, [2, 1], Res32176), 
LRes25965 = reshape_layer(Res32176, [2, 1, 1], Res25965), 
LCro20083 = cropping2D_layer(Res25965, 1, 0, 0, 0, Cro20083), 
LRes13717 = reshape_layer(Cro20083, [1, 1], Res13717), 
LZer81195 = zero_padding1D_layer(Res13717, 3, 0, Zer81195), 
LCon69888 = concatenate_layer([Zer81195,[[[0.031], [0.3684], [0.2106], [0.5055]]]], 2, Con69888), 
LMin99919 = minimum_layer([[[[0.7778], [0.4602]]], [[[0.8803], [0.1292]]]], Min99919), 
LRes90308 = reshape_layer(Min99919, [2, 1, 1], Res90308), 
LRes73490 = reshape_layer(Res90308, [2, 1, 1, 1], Res73490), 
LCon40026 = conv3D_layer(Res73490, 1, 1, 1,[[[[[0.6517, 0.9313]]]]],[0, 0], 1, 1, 1, false, 1, 1, 1, Con40026), 
LRes72286 = reshape_layer(Con40026, [2, 1, 2], Res72286), 
LRes84627 = reshape_layer(Res72286, [2, 2], Res84627), 
LZer44749 = zero_padding1D_layer(Res84627, 1, 1, Zer44749), 
LMin10730 = minimum_layer([Con69888,Zer44749], Min10730), 
exec_layers([LGlo26899,LRes32176,LRes25965,LCro20083,LRes13717,LZer81195,LCon69888,LMin99919,LRes90308,LRes73490,LCon40026,LRes72286,LRes84627,LZer44749,LMin10730],["Glo26899","Res32176","Res25965","Cro20083","Res13717","Zer81195","Con69888","Min99919","Res90308","Res73490","Con40026","Res72286","Res84627","Zer44749","Min10730"],Min10730,"Min10730")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.3684000], [0.0000000, 0.1203240], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0],[0,0.3684],[0,0.12032396000000001],[0,0]]]

Actual:   [[[0, 0], [0, 0.3684], [0, 0.1204], [0, 0]]]

Expected: [[[0, 0], [0, 0.3684], [0, 0.1204], [0, 0]]]