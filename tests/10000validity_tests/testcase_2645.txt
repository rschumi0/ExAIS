import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min39532 = tf.keras.layers.Input(shape=([1, 2]))
in1Min39532 = tf.keras.layers.Input(shape=([1, 2]))
in0Con65865 = tf.keras.layers.Input(shape=([20, 14, 1, 2]))
in0Con63823 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))

Min39532 = keras.layers.Minimum(name = 'Min39532', )([in0Min39532,in1Min39532])
Res23286 = keras.layers.Reshape((1, 2, 1), name = 'Res23286', )(Min39532)
Res6203 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res6203', )(Res23286)
Zer19946 = keras.layers.ZeroPadding3D(padding=((19, 0), (12, 0), (0, 0)), name = 'Zer19946', )(Res6203)
Con65865 = keras.layers.Concatenate(axis=4, name = 'Con65865', )([Zer19946,in0Con65865])
Con63823 = keras.layers.Conv3DTranspose(3, (2, 1, 1),strides=(10, 7, 1), padding='same', name = 'Con63823', )(in0Con63823)
Max28715 = keras.layers.Maximum(name = 'Max28715', )([Con65865,Con63823])
Glo54149 = keras.layers.GlobalMaxPool3D(name = 'Glo54149', )(Max28715)
model = tf.keras.models.Model(inputs=[in0Min39532,in1Min39532,in0Con65865,in0Con63823], outputs=Glo54149)
w = model.get_layer('Con63823').get_weights() 
w[0] = np.array([[[[[0.5881, 0.3223], [0.5185, 0.8672], [0.5305, 0.9019]]]], [[[[0.7809, 0.187], [0.1673, 0.0915], [0.9193, 0.3469]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con63823').set_weights(w) 
in0Min39532 = tf.constant([[[0.8876, 0.6189]]])
in1Min39532 = tf.constant([[[0.3166, 0.7534]]])
in0Con65865 = tf.constant([[[[[0.7223, 0.6227]], [[0.649, 0.9713]], [[0.2123, 0.2281]], [[0.0983, 0.2382]], [[0.1208, 0.5335]], [[0.8909, 0.7081]], [[0.0478, 0.6759]], [[0.4316, 0.9794]], [[0.9584, 0.5568]], [[0.0942, 0.7938]], [[0.5779, 0.9131]], [[0.5718, 0.8311]], [[0.5018, 0.3139]], [[0.0439, 0.2959]]], [[[0.705, 0.5196]], [[0.2028, 0.5654]], [[0.9549, 0.9661]], [[0.8288, 0.4431]], [[0.352, 0.617]], [[0.6531, 0.4995]], [[0.855, 0.0661]], [[0.707, 0.5723]], [[0.1824, 0.5659]], [[0.22, 0.7418]], [[0.9248, 0.6068]], [[0.4, 0.0069]], [[0.0508, 0.7793]], [[0.1042, 0.4405]]], [[[0.2449, 0.9152]], [[0.4942, 0.822]], [[0.6753, 0.9194]], [[0.2575, 0.6176]], [[0.8593, 0.2834]], [[0.8722, 0.7041]], [[0.2661, 0.9992]], [[0.6939, 0.4193]], [[0.176, 0.4825]], [[0.3532, 0.3627]], [[0.1028, 0.1574]], [[0.064, 0.8649]], [[0.7783, 0.5537]], [[0.9652, 0.2006]]], [[[0.2947, 0.127]], [[0.5446, 0.4273]], [[0.5082, 0.5214]], [[0.5265, 0.1992]], [[0.2157, 0.6662]], [[0.3439, 0.026]], [[0.9361, 0.9217]], [[0.4623, 0.2272]], [[0.3497, 0.4711]], [[0.3728, 0.2648]], [[0.5797, 0.2926]], [[0.0313, 0.2287]], [[0.5363, 0.3413]], [[0.8835, 0.9972]]], [[[0.4855, 0.0187]], [[0.3883, 0.9976]], [[0.854, 0.6158]], [[0.1255, 0.55]], [[0.0362, 0.1765]], [[0.1598, 0.4967]], [[0.6301, 0.1502]], [[0.3212, 0.1883]], [[0.0975, 0.2733]], [[0.4563, 0.9269]], [[0.3153, 0.3544]], [[0.5098, 0.6537]], [[0.8673, 0.0251]], [[0.4988, 0.0042]]], [[[0.2102, 0.0594]], [[0.0625, 0.8573]], [[0.0399, 0.5688]], [[0.2846, 0.152]], [[0.2841, 0.2345]], [[0.9179, 0.06]], [[0.1505, 0.7508]], [[0.9682, 0.5648]], [[0.5725, 0.8231]], [[0.8396, 0.1217]], [[0.2108, 0.3897]], [[0.8829, 0.3513]], [[0.8926, 0.2167]], [[0.2462, 0.6523]]], [[[0.0013, 0.6547]], [[0.3797, 0.2131]], [[0.8645, 0.1373]], [[0.4151, 0.1451]], [[0.6311, 0.9561]], [[0.908, 0.3666]], [[0.4767, 0.9471]], [[0.1094, 0.4258]], [[0.2312, 0.9923]], [[0.015, 0.6644]], [[0.6845, 0.6554]], [[0.9309, 0.9992]], [[0.8924, 0.8463]], [[0.1892, 0.1246]]], [[[0.779, 0.1421]], [[0.9483, 0.1246]], [[0.2122, 0.2783]], [[0.7232, 0.3237]], [[0.5145, 0.3677]], [[0.4012, 0.7028]], [[0.0634, 0.6076]], [[0.0229, 0.3602]], [[0.2348, 0.5878]], [[0.5329, 0.3063]], [[0.4484, 0.8287]], [[0.0377, 0.3473]], [[0.4835, 0.8446]], [[0.8497, 0.9353]]], [[[0.5519, 0.856]], [[0.7376, 0.6397]], [[0.8395, 0.2515]], [[0.36, 0.3306]], [[0.355, 0.0422]], [[0.8135, 0.2537]], [[0.9639, 0.8427]], [[0.5923, 0.9265]], [[0.4251, 0.3636]], [[0.0268, 0.1853]], [[0.0981, 0.0069]], [[0.4446, 0.7748]], [[0.7436, 0.919]], [[0.8825, 0.586]]], [[[0.4998, 0.7737]], [[0.1635, 0.0224]], [[0.6859, 0.6342]], [[0.5533, 0.0003]], [[0.5571, 0.4732]], [[0.0068, 0.7749]], [[0.5155, 0.3187]], [[0.2297, 0.1251]], [[0.5669, 0.5377]], [[0.3876, 0.4267]], [[0.0071, 0.4677]], [[0.3217, 0.7951]], [[0.418, 0.466]], [[0.5525, 0.7921]]], [[[0.061, 0.4555]], [[0.1884, 0.1534]], [[0.6649, 0.2185]], [[0.0942, 0.6173]], [[0.422, 0.0125]], [[0.321, 0.2136]], [[0.733, 0.5634]], [[0.8488, 0.3057]], [[0.8667, 0.1328]], [[0.1548, 0.2694]], [[0.2414, 0.1436]], [[0.9791, 0.9399]], [[0.4723, 0.8057]], [[0.9366, 0.861]]], [[[0.6829, 0.2837]], [[0.2946, 0.9308]], [[0.8292, 0.2152]], [[0.3225, 0.253]], [[0.9486, 0.8061]], [[0.1085, 0.8765]], [[0.3128, 0.3029]], [[0.6321, 0.6322]], [[0.4366, 0.377]], [[0.1842, 0.4631]], [[0.7756, 0.8391]], [[0.9359, 0.4819]], [[0.7313, 0.1505]], [[0.5685, 0.4896]]], [[[0.2739, 0.3948]], [[0.3998, 0.8403]], [[0.0933, 0.7308]], [[0.3673, 0.3482]], [[0.6923, 0.8618]], [[0.564, 0.3984]], [[0.2473, 0.7225]], [[0.759, 0.543]], [[0.3798, 0.4128]], [[0.4818, 0.6469]], [[0.206, 0.3876]], [[0.8021, 0.0778]], [[0.1592, 0.0484]], [[0.8932, 0.527]]], [[[0.1196, 0.1802]], [[0.8321, 0.7973]], [[0.325, 0.1231]], [[0.8601, 0.2929]], [[0.3873, 0.1765]], [[0.5037, 0.0106]], [[0.4919, 0.4974]], [[0.5392, 0.5434]], [[0.521, 0.671]], [[0.7749, 0.9822]], [[0.4072, 0.2084]], [[0.0162, 0.6292]], [[0.4978, 0.4583]], [[0.3866, 0.1199]]], [[[0.0911, 0.8045]], [[0.3798, 0.8931]], [[0.5906, 0.5695]], [[0.637, 0.9438]], [[0.9172, 0.7387]], [[0.46, 0.4495]], [[0.9154, 0.4831]], [[0.502, 0.1665]], [[0.498, 0.4644]], [[0.9057, 0.4619]], [[0.1818, 0.0801]], [[0.4025, 0.4681]], [[0.4862, 0.1295]], [[0.5291, 0.1231]]], [[[0.3877, 0.8622]], [[0.1695, 0.7973]], [[0.658, 0.0112]], [[0.0916, 0.797]], [[0.4433, 0.2029]], [[0.0068, 0.2803]], [[0.8896, 0.0889]], [[0.9567, 0.0285]], [[0.9658, 0.652]], [[0.5036, 0.0703]], [[0.8906, 0.3969]], [[0.287, 0.3779]], [[0.731, 0.5615]], [[0.9969, 0.7195]]], [[[0.8084, 0.0533]], [[0.7095, 0.288]], [[0.5204, 0.5528]], [[0.8341, 0.9045]], [[0.0663, 0.1086]], [[0.6261, 0.4394]], [[0.3532, 0.596]], [[0.3377, 0.5895]], [[0.0476, 0.6098]], [[0.595, 0.3031]], [[0.3398, 0.7191]], [[0.5217, 0.9562]], [[0.4913, 0.5229]], [[0.4575, 0.8449]]], [[[0.6467, 0.6177]], [[0.8617, 0.6856]], [[0.7105, 0.4092]], [[0.1383, 0.5907]], [[0.31, 0.6846]], [[0.668, 0.4211]], [[0.9982, 0.0001]], [[0.2929, 0.5096]], [[0.8858, 0.2282]], [[0.8639, 0.4966]], [[0.8321, 0.065]], [[0.2288, 0.4196]], [[0.1768, 0.9001]], [[0.2194, 0.2615]]], [[[0.7446, 0.2156]], [[0.7765, 0.8762]], [[0.5222, 0.6008]], [[0.3407, 0.583]], [[0.9675, 0.5427]], [[0.0356, 0.7484]], [[0.39, 0.3838]], [[0.9668, 0.3604]], [[0.2183, 0.2295]], [[0.1724, 0.94]], [[0.2588, 0.126]], [[0.3738, 0.1308]], [[0.2386, 0.5354]], [[0.6936, 0.9639]]], [[[0.0295, 0.9864]], [[0.9382, 0.1003]], [[0.9495, 0.7955]], [[0.8731, 0.325]], [[0.4531, 0.9199]], [[0.1584, 0.1813]], [[0.3371, 0.3297]], [[0.2577, 0.9202]], [[0.3136, 0.7682]], [[0.6873, 0.8685]], [[0.4302, 0.407]], [[0.4261, 0.9115]], [[0.355, 0.6957]], [[0.1756, 0.0361]]]]])
in0Con63823 = tf.constant([[[[[0.3694, 0.0201]], [[0.6762, 0.748]]], [[[0.7583, 0.3573]], [[0.9378, 0.8801]]]]])
print (np.array2string(model.predict([in0Min39532,in1Min39532,in0Con65865,in0Con63823],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo54149.png')

LMin39532 = minimum_layer([[[[0.8876, 0.6189]]], [[[0.3166, 0.7534]]]], Min39532), 
LRes23286 = reshape_layer(Min39532, [1, 2, 1], Res23286), 
LRes6203 = reshape_layer(Res23286, [1, 2, 1, 1], Res6203), 
LZer19946 = zero_padding3D_layer(Res6203, 19, 0, 12, 0, 0, 0, Zer19946), 
LCon65865 = concatenate_layer([Zer19946,[[[[[0.7223, 0.6227]], [[0.649, 0.9713]], [[0.2123, 0.2281]], [[0.0983, 0.2382]], [[0.1208, 0.5335]], [[0.8909, 0.7081]], [[0.0478, 0.6759]], [[0.4316, 0.9794]], [[0.9584, 0.5568]], [[0.0942, 0.7938]], [[0.5779, 0.9131]], [[0.5718, 0.8311]], [[0.5018, 0.3139]], [[0.0439, 0.2959]]], [[[0.705, 0.5196]], [[0.2028, 0.5654]], [[0.9549, 0.9661]], [[0.8288, 0.4431]], [[0.352, 0.617]], [[0.6531, 0.4995]], [[0.855, 0.0661]], [[0.707, 0.5723]], [[0.1824, 0.5659]], [[0.22, 0.7418]], [[0.9248, 0.6068]], [[0.4, 0.0069]], [[0.0508, 0.7793]], [[0.1042, 0.4405]]], [[[0.2449, 0.9152]], [[0.4942, 0.822]], [[0.6753, 0.9194]], [[0.2575, 0.6176]], [[0.8593, 0.2834]], [[0.8722, 0.7041]], [[0.2661, 0.9992]], [[0.6939, 0.4193]], [[0.176, 0.4825]], [[0.3532, 0.3627]], [[0.1028, 0.1574]], [[0.064, 0.8649]], [[0.7783, 0.5537]], [[0.9652, 0.2006]]], [[[0.2947, 0.127]], [[0.5446, 0.4273]], [[0.5082, 0.5214]], [[0.5265, 0.1992]], [[0.2157, 0.6662]], [[0.3439, 0.026]], [[0.9361, 0.9217]], [[0.4623, 0.2272]], [[0.3497, 0.4711]], [[0.3728, 0.2648]], [[0.5797, 0.2926]], [[0.0313, 0.2287]], [[0.5363, 0.3413]], [[0.8835, 0.9972]]], [[[0.4855, 0.0187]], [[0.3883, 0.9976]], [[0.854, 0.6158]], [[0.1255, 0.55]], [[0.0362, 0.1765]], [[0.1598, 0.4967]], [[0.6301, 0.1502]], [[0.3212, 0.1883]], [[0.0975, 0.2733]], [[0.4563, 0.9269]], [[0.3153, 0.3544]], [[0.5098, 0.6537]], [[0.8673, 0.0251]], [[0.4988, 0.0042]]], [[[0.2102, 0.0594]], [[0.0625, 0.8573]], [[0.0399, 0.5688]], [[0.2846, 0.152]], [[0.2841, 0.2345]], [[0.9179, 0.06]], [[0.1505, 0.7508]], [[0.9682, 0.5648]], [[0.5725, 0.8231]], [[0.8396, 0.1217]], [[0.2108, 0.3897]], [[0.8829, 0.3513]], [[0.8926, 0.2167]], [[0.2462, 0.6523]]], [[[0.0013, 0.6547]], [[0.3797, 0.2131]], [[0.8645, 0.1373]], [[0.4151, 0.1451]], [[0.6311, 0.9561]], [[0.908, 0.3666]], [[0.4767, 0.9471]], [[0.1094, 0.4258]], [[0.2312, 0.9923]], [[0.015, 0.6644]], [[0.6845, 0.6554]], [[0.9309, 0.9992]], [[0.8924, 0.8463]], [[0.1892, 0.1246]]], [[[0.779, 0.1421]], [[0.9483, 0.1246]], [[0.2122, 0.2783]], [[0.7232, 0.3237]], [[0.5145, 0.3677]], [[0.4012, 0.7028]], [[0.0634, 0.6076]], [[0.0229, 0.3602]], [[0.2348, 0.5878]], [[0.5329, 0.3063]], [[0.4484, 0.8287]], [[0.0377, 0.3473]], [[0.4835, 0.8446]], [[0.8497, 0.9353]]], [[[0.5519, 0.856]], [[0.7376, 0.6397]], [[0.8395, 0.2515]], [[0.36, 0.3306]], [[0.355, 0.0422]], [[0.8135, 0.2537]], [[0.9639, 0.8427]], [[0.5923, 0.9265]], [[0.4251, 0.3636]], [[0.0268, 0.1853]], [[0.0981, 0.0069]], [[0.4446, 0.7748]], [[0.7436, 0.919]], [[0.8825, 0.586]]], [[[0.4998, 0.7737]], [[0.1635, 0.0224]], [[0.6859, 0.6342]], [[0.5533, 0.0003]], [[0.5571, 0.4732]], [[0.0068, 0.7749]], [[0.5155, 0.3187]], [[0.2297, 0.1251]], [[0.5669, 0.5377]], [[0.3876, 0.4267]], [[0.0071, 0.4677]], [[0.3217, 0.7951]], [[0.418, 0.466]], [[0.5525, 0.7921]]], [[[0.061, 0.4555]], [[0.1884, 0.1534]], [[0.6649, 0.2185]], [[0.0942, 0.6173]], [[0.422, 0.0125]], [[0.321, 0.2136]], [[0.733, 0.5634]], [[0.8488, 0.3057]], [[0.8667, 0.1328]], [[0.1548, 0.2694]], [[0.2414, 0.1436]], [[0.9791, 0.9399]], [[0.4723, 0.8057]], [[0.9366, 0.861]]], [[[0.6829, 0.2837]], [[0.2946, 0.9308]], [[0.8292, 0.2152]], [[0.3225, 0.253]], [[0.9486, 0.8061]], [[0.1085, 0.8765]], [[0.3128, 0.3029]], [[0.6321, 0.6322]], [[0.4366, 0.377]], [[0.1842, 0.4631]], [[0.7756, 0.8391]], [[0.9359, 0.4819]], [[0.7313, 0.1505]], [[0.5685, 0.4896]]], [[[0.2739, 0.3948]], [[0.3998, 0.8403]], [[0.0933, 0.7308]], [[0.3673, 0.3482]], [[0.6923, 0.8618]], [[0.564, 0.3984]], [[0.2473, 0.7225]], [[0.759, 0.543]], [[0.3798, 0.4128]], [[0.4818, 0.6469]], [[0.206, 0.3876]], [[0.8021, 0.0778]], [[0.1592, 0.0484]], [[0.8932, 0.527]]], [[[0.1196, 0.1802]], [[0.8321, 0.7973]], [[0.325, 0.1231]], [[0.8601, 0.2929]], [[0.3873, 0.1765]], [[0.5037, 0.0106]], [[0.4919, 0.4974]], [[0.5392, 0.5434]], [[0.521, 0.671]], [[0.7749, 0.9822]], [[0.4072, 0.2084]], [[0.0162, 0.6292]], [[0.4978, 0.4583]], [[0.3866, 0.1199]]], [[[0.0911, 0.8045]], [[0.3798, 0.8931]], [[0.5906, 0.5695]], [[0.637, 0.9438]], [[0.9172, 0.7387]], [[0.46, 0.4495]], [[0.9154, 0.4831]], [[0.502, 0.1665]], [[0.498, 0.4644]], [[0.9057, 0.4619]], [[0.1818, 0.0801]], [[0.4025, 0.4681]], [[0.4862, 0.1295]], [[0.5291, 0.1231]]], [[[0.3877, 0.8622]], [[0.1695, 0.7973]], [[0.658, 0.0112]], [[0.0916, 0.797]], [[0.4433, 0.2029]], [[0.0068, 0.2803]], [[0.8896, 0.0889]], [[0.9567, 0.0285]], [[0.9658, 0.652]], [[0.5036, 0.0703]], [[0.8906, 0.3969]], [[0.287, 0.3779]], [[0.731, 0.5615]], [[0.9969, 0.7195]]], [[[0.8084, 0.0533]], [[0.7095, 0.288]], [[0.5204, 0.5528]], [[0.8341, 0.9045]], [[0.0663, 0.1086]], [[0.6261, 0.4394]], [[0.3532, 0.596]], [[0.3377, 0.5895]], [[0.0476, 0.6098]], [[0.595, 0.3031]], [[0.3398, 0.7191]], [[0.5217, 0.9562]], [[0.4913, 0.5229]], [[0.4575, 0.8449]]], [[[0.6467, 0.6177]], [[0.8617, 0.6856]], [[0.7105, 0.4092]], [[0.1383, 0.5907]], [[0.31, 0.6846]], [[0.668, 0.4211]], [[0.9982, 0.0001]], [[0.2929, 0.5096]], [[0.8858, 0.2282]], [[0.8639, 0.4966]], [[0.8321, 0.065]], [[0.2288, 0.4196]], [[0.1768, 0.9001]], [[0.2194, 0.2615]]], [[[0.7446, 0.2156]], [[0.7765, 0.8762]], [[0.5222, 0.6008]], [[0.3407, 0.583]], [[0.9675, 0.5427]], [[0.0356, 0.7484]], [[0.39, 0.3838]], [[0.9668, 0.3604]], [[0.2183, 0.2295]], [[0.1724, 0.94]], [[0.2588, 0.126]], [[0.3738, 0.1308]], [[0.2386, 0.5354]], [[0.6936, 0.9639]]], [[[0.0295, 0.9864]], [[0.9382, 0.1003]], [[0.9495, 0.7955]], [[0.8731, 0.325]], [[0.4531, 0.9199]], [[0.1584, 0.1813]], [[0.3371, 0.3297]], [[0.2577, 0.9202]], [[0.3136, 0.7682]], [[0.6873, 0.8685]], [[0.4302, 0.407]], [[0.4261, 0.9115]], [[0.355, 0.6957]], [[0.1756, 0.0361]]]]]], 4, Con65865), 
LCon63823 = conv3D_transpose_layer([[[[[0.3694, 0.0201]], [[0.6762, 0.748]]], [[[0.7583, 0.3573]], [[0.9378, 0.8801]]]]], 2, 1, 1,[[[[[0.5881, 0.3223], [0.5185, 0.8672], [0.5305, 0.9019]]]], [[[[0.7809, 0.187], [0.1673, 0.0915], [0.9193, 0.3469]]]]],[0, 0, 0], 10, 7, 1, true, Con63823), 
LMax28715 = maximum_layer([Con65865,Con63823], Max28715), 
LGlo54149 = global_max_pool3D_layer(Max28715, Glo54149), 
exec_layers([LMin39532,LRes23286,LRes6203,LZer19946,LCon65865,LCon63823,LMax28715,LGlo54149],["Min39532","Res23286","Res6203","Zer19946","Con65865","Con63823","Max28715","Glo54149"],Glo54149,"Glo54149")

Actual (Unparsed): [[0.8969067, 1.2494720, 1.2912651]]

Expected (Unparsed): [[0.8969067199999999,1.24947202,1.29126509]]

Actual:   [[0.897, 1.2495, 1.2913]]

Expected: [[0.897, 1.2495, 1.2913]]