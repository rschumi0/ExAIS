import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max58881 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Max58881 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Max78989 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Max78989 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Con70623 = tf.keras.layers.Input(shape=([4, 1]))
in0Up_67579 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con82324 = tf.keras.layers.Input(shape=([4, 1]))
in0Dot44073 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot44073 = tf.keras.layers.Input(shape=([3, 3]))
in0Con24884 = tf.keras.layers.Input(shape=([4, 1]))

Max58881 = keras.layers.Maximum(name = 'Max58881', )([in0Max58881,in1Max58881])
Res66240 = keras.layers.Reshape((1, 2, 2), name = 'Res66240', )(Max58881)
Res85737 = keras.layers.Reshape((1, 4), name = 'Res85737', )(Res66240)
Zer79061 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer79061', )(Res85737)
Max78989 = keras.layers.Maximum(name = 'Max78989', )([in0Max78989,in1Max78989])
Res87052 = keras.layers.Reshape((2, 2, 1), name = 'Res87052', )(Max78989)
Res32252 = keras.layers.Reshape((2, 2), name = 'Res32252', )(Res87052)
Zer57571 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer57571', )(Res32252)
Con70623 = keras.layers.Concatenate(axis=2, name = 'Con70623', )([Zer57571,in0Con70623])
Up_67579 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_67579', )(in0Up_67579)
Res43767 = keras.layers.Reshape((4, 2), name = 'Res43767', )(Up_67579)
Con82324 = keras.layers.Concatenate(axis=2, name = 'Con82324', )([Res43767,in0Con82324])
Dot44073 = keras.layers.Dot(axes=(1, 1), name = 'Dot44073', )([in0Dot44073,in1Dot44073])
Zer10649 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer10649', )(Dot44073)
Max85232 = keras.layers.Maximum(name = 'Max85232', )([Con82324,Zer10649])
Ave85163 = keras.layers.Average(name = 'Ave85163', )([Con70623,Max85232])
Con24884 = keras.layers.Concatenate(axis=2, name = 'Con24884', )([Ave85163,in0Con24884])
Mul42626 = keras.layers.Multiply(name = 'Mul42626', )([Zer79061,Con24884])
model = tf.keras.models.Model(inputs=[in0Max58881,in1Max58881,in0Max78989,in1Max78989,in0Con70623,in0Up_67579,in0Con82324,in0Dot44073,in1Dot44073,in0Con24884], outputs=Mul42626)
in0Max58881 = tf.constant([[[[[0.1538, 0.0853]], [[0.0257, 0.1496]]]]])
in1Max58881 = tf.constant([[[[[0.8913, 0.1696]], [[0.7229, 0.417]]]]])
in0Max78989 = tf.constant([[[[[0.9257]], [[0.1148]]], [[[0.012]], [[0.0332]]]]])
in1Max78989 = tf.constant([[[[[0.6939]], [[0.0499]]], [[[0.8575]], [[0.6232]]]]])
in0Con70623 = tf.constant([[[0.8062], [0.7844], [0.6471], [0.3231]]])
in0Up_67579 = tf.constant([[[[1.443], [1.0978]], [[1.0816], [1.67]]]])
in0Con82324 = tf.constant([[[0.8124], [0.5858], [0.2203], [0.4136]]])
in0Dot44073 = tf.constant([[[0.9831, 0.5441, 0.2238], [0.4106, 0.3447, 0.5001], [0.2564, 0.5146, 0.4792]]])
in1Dot44073 = tf.constant([[[0.1006, 0.99, 0.8933], [0.5394, 0.7148, 0.5415], [0.1922, 0.2086, 0.8667]]])
in0Con24884 = tf.constant([[[0.9395], [0.4227], [0.4353], [0.905]]])
print (np.array2string(model.predict([in0Max58881,in1Max58881,in0Max78989,in1Max78989,in0Con70623,in0Up_67579,in0Con82324,in0Dot44073,in1Dot44073,in0Con24884],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul42626.png')

LMax58881 = maximum_layer([[[[[[0.1538, 0.0853]], [[0.0257, 0.1496]]]]], [[[[[0.8913, 0.1696]], [[0.7229, 0.417]]]]]], Max58881), 
LRes66240 = reshape_layer(Max58881, [1, 2, 2], Res66240), 
LRes85737 = reshape_layer(Res66240, [1, 4], Res85737), 
LZer79061 = zero_padding1D_layer(Res85737, 3, 0, Zer79061), 
LMax78989 = maximum_layer([[[[[[0.9257]], [[0.1148]]], [[[0.012]], [[0.0332]]]]], [[[[[0.6939]], [[0.0499]]], [[[0.8575]], [[0.6232]]]]]], Max78989), 
LRes87052 = reshape_layer(Max78989, [2, 2, 1], Res87052), 
LRes32252 = reshape_layer(Res87052, [2, 2], Res32252), 
LZer57571 = zero_padding1D_layer(Res32252, 2, 0, Zer57571), 
LCon70623 = concatenate_layer([Zer57571,[[[0.8062], [0.7844], [0.6471], [0.3231]]]], 2, Con70623), 
LUp_67579 = up_sampling2D_layer([[[[1.443], [1.0978]], [[1.0816], [1.67]]]], 2, 1, Up_67579), 
LRes43767 = reshape_layer(Up_67579, [4, 2], Res43767), 
LCon82324 = concatenate_layer([Res43767,[[[0.8124], [0.5858], [0.2203], [0.4136]]]], 2, Con82324), 
LDot44073 = dot_layer([[[0.9831, 0.5441, 0.2238], [0.4106, 0.3447, 0.5001], [0.2564, 0.5146, 0.4792]]], [[[0.1006, 0.99, 0.8933], [0.5394, 0.7148, 0.5415], [0.1922, 0.2086, 0.8667]]], 1, 1, Dot44073), 
LZer10649 = zero_padding1D_layer(Dot44073, 1, 0, Zer10649), 
LMax85232 = maximum_layer([Con82324,Zer10649], Max85232), 
LAve85163 = average_layer([Con70623,Max85232], Ave85163), 
LCon24884 = concatenate_layer([Ave85163,[[[0.9395], [0.4227], [0.4353], [0.905]]]], 2, Con24884), 
LMul42626 = multiply_layer([Zer79061,Con24884], Mul42626), 
exec_layers([LMax58881,LRes66240,LRes85737,LZer79061,LMax78989,LRes87052,LRes32252,LZer57571,LCon70623,LUp_67579,LRes43767,LCon82324,LDot44073,LZer10649,LMax85232,LAve85163,LCon24884,LMul42626],["Max58881","Res66240","Res85737","Zer79061","Max78989","Res87052","Res32252","Zer57571","Con70623","Up_67579","Res43767","Con82324","Dot44073","Zer10649","Max85232","Ave85163","Con24884","Mul42626"],Mul42626,"Mul42626")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.8641599, 0.1944634, 0.4370463, 0.3773850]]]

Expected (Unparsed): [[[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.8641599149999999,0.19446335999999997,0.43704630242849996,0.37738499999999997]]]

Actual:   [[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.8642, 0.1945, 0.4371, 0.3774]]]

Expected: [[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.8642, 0.1945, 0.4371, 0.3774]]]