import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add12071 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Add12071 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Add12071 = keras.layers.Add(name = 'Add12071', )([in0Add12071,in1Add12071])
Res29664 = keras.layers.Reshape((1, 2, 2), name = 'Res29664', )(Add12071)
Loc17766 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(1, 1), name = 'Loc17766', )(Res29664)
model = tf.keras.models.Model(inputs=[in0Add12071,in1Add12071], outputs=Loc17766)
w = model.get_layer('Loc17766').get_weights() 
w[0] = np.array([[[0.9537, 0.1521], [0.039, 0.2841], [0.7226, 0.7197], [0.3762, 0.247]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc17766').set_weights(w) 
in0Add12071 = tf.constant([[[[[0.2801, 0.3927]], [[0.5458, 0.3798]]]]])
in1Add12071 = tf.constant([[[[[0.9571, 0.7558]], [[0.8785, 0.0454]]]]])
print (np.array2string(model.predict([in0Add12071,in1Add12071],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc17766.png')

LAdd12071 = add_layer([[[[[[0.2801, 0.3927]], [[0.5458, 0.3798]]]]], [[[[[0.9571, 0.7558]], [[0.8785, 0.0454]]]]]], Add12071), 
LRes29664 = reshape_layer(Add12071, [1, 2, 2], Res29664), 
LLoc17766 = locally_connected2D_layer(Res29664, 1, 2,[[[0.9537, 0.1521], [0.039, 0.2841], [0.7226, 0.7197], [0.3762, 0.247]]],[[[0, 0]]], 1, 1, Loc17766), 
exec_layers([LAdd12071,LRes29664,LLoc17766],["Add12071","Res29664","Loc17766"],Loc17766,"Loc17766")

Actual (Unparsed): [[[[2.4138685, 1.6445600]]]]

Expected (Unparsed): [[[[2.4138685600000005,1.6445600800000002]]]]

Actual:   [[[[2.4139, 1.6446]]]]

Expected: [[[[2.4139, 1.6446]]]]