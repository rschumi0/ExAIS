import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla98069 = tf.keras.layers.Input(shape=([2, 4, 1]))

Fla98069 = keras.layers.Flatten(name = 'Fla98069', )(in0Fla98069)
Res83024 = keras.layers.Reshape((8, 1), name = 'Res83024', )(Fla98069)
Res24491 = keras.layers.Reshape((8, 1, 1), name = 'Res24491', )(Res83024)
Res45035 = keras.layers.Reshape((8, 1, 1, 1), name = 'Res45035', )(Res24491)
Up_80969 = keras.layers.UpSampling3D(size=(1, 1, 2), name = 'Up_80969', )(Res45035)
Res71170 = keras.layers.Reshape((8, 1, 2), name = 'Res71170', )(Up_80969)
Res51932 = keras.layers.Reshape((8, 2), name = 'Res51932', )(Res71170)
Glo75941 = keras.layers.GlobalAveragePooling1D(name = 'Glo75941', )(Res51932)
Res47475 = keras.layers.Reshape((2, 1), name = 'Res47475', )(Glo75941)
Sim65368 = keras.layers.SimpleRNN(1,name = 'Sim65368', )(Res47475)
model = tf.keras.models.Model(inputs=[in0Fla98069], outputs=Sim65368)
w = model.get_layer('Sim65368').get_weights() 
w[0] = np.array([[4]])
w[1] = np.array([[9]])
w[2] = np.array([10])
model.get_layer('Sim65368').set_weights(w) 
in0Fla98069 = tf.constant([[[[1.4114], [1.8579], [1.0714], [1.1716]], [[1.5563], [1.1919], [1.7388], [1.2889]]]])
print (np.array2string(model.predict([in0Fla98069],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sim65368.png')

LFla98069 = flatten_layer([[[[1.4114], [1.8579], [1.0714], [1.1716]], [[1.5563], [1.1919], [1.7388], [1.2889]]]], Fla98069), 
LRes83024 = reshape_layer(Fla98069, [8, 1], Res83024), 
LRes24491 = reshape_layer(Res83024, [8, 1, 1], Res24491), 
LRes45035 = reshape_layer(Res24491, [8, 1, 1, 1], Res45035), 
LUp_80969 = up_sampling3D_layer(Res45035, 1, 1, 2, Up_80969), 
LRes71170 = reshape_layer(Up_80969, [8, 1, 2], Res71170), 
LRes51932 = reshape_layer(Res71170, [8, 2], Res51932), 
LGlo75941 = global_average_pooling1D_layer(Res51932, Glo75941), 
LRes47475 = reshape_layer(Glo75941, [2, 1], Res47475), 
LSim65368 = simple_rnn_layer(Res47475,[[4]],[[9]],[10], Sim65368), 
exec_layers([LFla98069,LRes83024,LRes24491,LRes45035,LUp_80969,LRes71170,LRes51932,LGlo75941,LRes47475,LSim65368],["Fla98069","Res83024","Res24491","Res45035","Up_80969","Res71170","Res51932","Glo75941","Res47475","Sim65368"],Sim65368,"Sim65368")

Actual (Unparsed): [[1.0000000]]

Expected (Unparsed): [[1.0]]

Actual:   [[1]]

Expected: [[1]]