import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min23066 = tf.keras.layers.Input(shape=([2, 2]))
in1Min23066 = tf.keras.layers.Input(shape=([2, 2]))

Min23066 = keras.layers.Minimum(name = 'Min23066', )([in0Min23066,in1Min23066])
Res20762 = keras.layers.Reshape((2, 2, 1), name = 'Res20762', )(Min23066)
Glo2999 = keras.layers.GlobalAveragePooling2D(name = 'Glo2999', )(Res20762)
Res19408 = keras.layers.Reshape((1, 1), name = 'Res19408', )(Glo2999)
Res46968 = keras.layers.Reshape((1, 1, 1), name = 'Res46968', )(Res19408)
Glo88345 = keras.layers.GlobalMaxPool2D(name = 'Glo88345', )(Res46968)
model = tf.keras.models.Model(inputs=[in0Min23066,in1Min23066], outputs=Glo88345)
in0Min23066 = tf.constant([[[0.3914, 0.8044], [0.4024, 0.8348]]])
in1Min23066 = tf.constant([[[0.9978, 0.9778], [0.1107, 0.1603]]])
print (np.array2string(model.predict([in0Min23066,in1Min23066],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo88345.png')

LMin23066 = minimum_layer([[[[0.3914, 0.8044], [0.4024, 0.8348]]], [[[0.9978, 0.9778], [0.1107, 0.1603]]]], Min23066), 
LRes20762 = reshape_layer(Min23066, [2, 2, 1], Res20762), 
LGlo2999 = global_average_pooling2D_layer(Res20762, Glo2999), 
LRes19408 = reshape_layer(Glo2999, [1, 1], Res19408), 
LRes46968 = reshape_layer(Res19408, [1, 1, 1], Res46968), 
LGlo88345 = global_max_pool2D_layer(Res46968, Glo88345), 
exec_layers([LMin23066,LRes20762,LGlo2999,LRes19408,LRes46968,LGlo88345],["Min23066","Res20762","Glo2999","Res19408","Res46968","Glo88345"],Glo88345,"Glo88345")

Actual (Unparsed): [[0.3667000]]

Expected (Unparsed): [[0.3667]]

Actual:   [[0.3667]]

Expected: [[0.3667]]