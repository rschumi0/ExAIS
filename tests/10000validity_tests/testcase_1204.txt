import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lea63374 = tf.keras.layers.Input(shape=([2, 2, 2]))

Lea63374 = keras.layers.LeakyReLU(alpha=2.0182807748412643, name = 'Lea63374', input_shape=(2, 2, 2))(in0Lea63374)
Loc2427 = keras.layers.LocallyConnected2D(3, (2, 1),strides=(1, 1), name = 'Loc2427', )(Lea63374)
Cro77084 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro77084', )(Loc2427)
Res98300 = keras.layers.Reshape((1, 3), name = 'Res98300', )(Cro77084)
Zer15853 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer15853', )(Res98300)
Res63799 = keras.layers.Reshape((3, 3, 1), name = 'Res63799', )(Zer15853)
Ave56028 = keras.layers.AveragePooling2D(pool_size=(1, 3), strides=(2, 1), padding='valid', name = 'Ave56028', )(Res63799)
model = tf.keras.models.Model(inputs=[in0Lea63374], outputs=Ave56028)
w = model.get_layer('Loc2427').get_weights() 
w[0] = np.array([[[0.7243, 0.0086, 0.4264], [0.5139, 0.2097, 0.0857], [0.3898, 0.7138, 0.857], [0.0667, 0.8245, 0.2956]], [[0.0656, 0.6958, 0.4054], [0.0452, 0.6209, 0.4126], [0.6622, 0.5517, 0.694], [0.9095, 0.6898, 0.4622]]])
w[1] = np.array([[[0, 0, 0], [0, 0, 0]]])
model.get_layer('Loc2427').set_weights(w) 
in0Lea63374 = tf.constant([[[[0.9904, 0.9418], [0.5534, 0.2079]], [[0.3783, 0.8964], [0.2082, 0.4325]]]])
print (np.array2string(model.predict([in0Lea63374],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave56028.png')

LLea63374 = leaky_relu_layer([[[[0.9904, 0.9418], [0.5534, 0.2079]], [[0.3783, 0.8964], [0.2082, 0.4325]]]], 2.0182807748412643, Lea63374), 
LLoc2427 = locally_connected2D_layer(Lea63374, 2, 1,[[[0.7243, 0.0086, 0.4264], [0.5139, 0.2097, 0.0857], [0.3898, 0.7138, 0.857], [0.0667, 0.8245, 0.2956]], [[0.0656, 0.6958, 0.4054], [0.0452, 0.6209, 0.4126], [0.6622, 0.5517, 0.694], [0.9095, 0.6898, 0.4622]]],[[[0, 0, 0], [0, 0, 0]]], 1, 1, Loc2427), 
LCro77084 = cropping2D_layer(Loc2427, 0, 0, 1, 0, Cro77084), 
LRes98300 = reshape_layer(Cro77084, [1, 3], Res98300), 
LZer15853 = zero_padding1D_layer(Res98300, 1, 1, Zer15853), 
LRes63799 = reshape_layer(Zer15853, [3, 3, 1], Res63799), 
LAve56028 = average_pooling2D_layer(Res63799, 1, 3, 2, 1, false, Ave56028), 
exec_layers([LLea63374,LLoc2427,LCro77084,LRes98300,LZer15853,LRes63799,LAve56028],["Lea63374","Loc2427","Cro77084","Res98300","Zer15853","Res63799","Ave56028"],Ave56028,"Ave56028")

Actual (Unparsed): [[[[0.0000000]], [[0.0000000]]]]

Expected (Unparsed): [[[[0]],[[0]]]]

Actual:   [[[[0]], [[0]]]]

Expected: [[[[0]], [[0]]]]