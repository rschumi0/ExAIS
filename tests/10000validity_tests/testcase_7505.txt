import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub49299 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in1Sub49299 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))

Sub49299 = keras.layers.Subtract(name = 'Sub49299', )([in0Sub49299,in1Sub49299])
Res16 = keras.layers.Reshape((2, 3, 6), name = 'Res16', )(Sub49299)
Con4727 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(1, 3), padding='valid', name = 'Con4727', )(Res16)
model = tf.keras.models.Model(inputs=[in0Sub49299,in1Sub49299], outputs=Con4727)
w = model.get_layer('Con4727').get_weights() 
w[0] = np.array([[[[0.4867, 0.3897, 0.308, 0.7871, 0.6421, 0.6589], [0.2735, 0.1326, 0.4434, 0.8837, 0.9426, 0.0129]]]])
w[1] = np.array([0, 0])
model.get_layer('Con4727').set_weights(w) 
in0Sub49299 = tf.constant([[[[[0.1277, 0.9613, 0.2036], [0.6131, 0.2558, 0.0274]], [[0.1104, 0.2463, 0.3502], [0.2724, 0.0009, 0.4364]], [[0.2483, 0.0655, 0.9237], [0.0436, 0.6847, 0.469]]], [[[0.0333, 0.1126, 0.1177], [0.8257, 0.0589, 0.4736]], [[0.7991, 0.6091, 0.9855], [0.6378, 0.5647, 0.0427]], [[0.7739, 0.6828, 0.366], [0.7904, 0.8034, 0.0729]]]]])
in1Sub49299 = tf.constant([[[[[0.9999, 0.9669, 0.999], [0.2593, 0.846, 0.8261]], [[0.2738, 0.4684, 0.6733], [0.7467, 0.0075, 0.2991]], [[0.7413, 0.5551, 0.7664], [0.6238, 0.4862, 0.7973]]], [[[0.3671, 0.8166, 0.0573], [0.3073, 0.6895, 0.5137]], [[0.8493, 0.3035, 0.3493], [0.9569, 0.9606, 0.2916]], [[0.4589, 0.4627, 0.2012], [0.2491, 0.2212, 0.7168]]]]])
print (np.array2string(model.predict([in0Sub49299,in1Sub49299],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con4727.png')

LSub49299 = subtract_layer([[[[[0.1277, 0.9613, 0.2036], [0.6131, 0.2558, 0.0274]], [[0.1104, 0.2463, 0.3502], [0.2724, 0.0009, 0.4364]], [[0.2483, 0.0655, 0.9237], [0.0436, 0.6847, 0.469]]], [[[0.0333, 0.1126, 0.1177], [0.8257, 0.0589, 0.4736]], [[0.7991, 0.6091, 0.9855], [0.6378, 0.5647, 0.0427]], [[0.7739, 0.6828, 0.366], [0.7904, 0.8034, 0.0729]]]]], [[[[[0.9999, 0.9669, 0.999], [0.2593, 0.846, 0.8261]], [[0.2738, 0.4684, 0.6733], [0.7467, 0.0075, 0.2991]], [[0.7413, 0.5551, 0.7664], [0.6238, 0.4862, 0.7973]]], [[[0.3671, 0.8166, 0.0573], [0.3073, 0.6895, 0.5137]], [[0.8493, 0.3035, 0.3493], [0.9569, 0.9606, 0.2916]], [[0.4589, 0.4627, 0.2012], [0.2491, 0.2212, 0.7168]]]]], Sub49299), 
LRes16 = reshape_layer(Sub49299, [2, 3, 6], Res16), 
LCon4727 = conv2D_transpose_layer(Res16, 1, 1,[[[[0.4867, 0.3897, 0.308, 0.7871, 0.6421, 0.6589], [0.2735, 0.1326, 0.4434, 0.8837, 0.9426, 0.0129]]]],[0, 0], 1, 3, false, Con4727), 
exec_layers([LSub49299,LRes16,LCon4727],["Sub49299","Res16","Con4727"],Con4727,"Con4727")

Actual (Unparsed): [[[[-1.2984201, -0.8459423], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.5526864, -0.6409918], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.9278272, -0.4598613], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[-0.4415036, -0.2946741], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.3787617, -0.3494909], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.6654640, 1.2072323], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[-1.2984201299999998,-0.8459423099999999],[0,0],[0,0],[-0.5526863700000001,-0.6409918],[0,0],[0,0],[-0.9278272600000002,-0.45986135000000006],[0,0],[0,0]],[[-0.44150357,-0.2946741100000001],[0,0],[0,0],[-0.37876162999999996,-0.34949087999999995],[0,0],[0,0],[0.66546401,1.2072323],[0,0],[0,0]]]]

Actual:   [[[[-1.2984, -0.8459], [0, 0], [0, 0], [-0.5526, -0.6409], [0, 0], [0, 0], [-0.9278, -0.4598], [0, 0], [0, 0]], [[-0.4415, -0.2946], [0, 0], [0, 0], [-0.3787, -0.3494], [0, 0], [0, 0], [0.6655, 1.2073], [0, 0], [0, 0]]]]

Expected: [[[[-1.2984, -0.8459], [0, 0], [0, 0], [-0.5526, -0.6409], [0, 0], [0, 0], [-0.9278, -0.4598], [0, 0], [0, 0]], [[-0.4415, -0.2946], [0, 0], [0, 0], [-0.3787, -0.3494], [0, 0], [0, 0], [0.6655, 1.2073], [0, 0], [0, 0]]]]