import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub54621 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub54621 = tf.keras.layers.Input(shape=([3, 3]))
in0Con69836 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0Min15845 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Min15845 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Sub54621 = keras.layers.Subtract(name = 'Sub54621', )([in0Sub54621,in1Sub54621])
Res53287 = keras.layers.Reshape((3, 3, 1), name = 'Res53287', )(Sub54621)
Zer23933 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer23933', )(Res53287)
Con69836 = keras.layers.Concatenate(axis=3, name = 'Con69836', )([Zer23933,in0Con69836])
Min15845 = keras.layers.Minimum(name = 'Min15845', )([in0Min15845,in1Min15845])
ELU95989 = keras.layers.ELU(alpha=-5.215500484860436, name = 'ELU95989', )(Min15845)
Res60356 = keras.layers.Reshape((2, 1, 2), name = 'Res60356', )(ELU95989)
Zer12608 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer12608', )(Res60356)
Mul77042 = keras.layers.Multiply(name = 'Mul77042', )([Con69836,Zer12608])
model = tf.keras.models.Model(inputs=[in0Sub54621,in1Sub54621,in0Con69836,in0Min15845,in1Min15845], outputs=Mul77042)
in0Sub54621 = tf.constant([[[0.9219, 0.4012, 0.8742], [0.5424, 0.0444, 0.7925], [0.6482, 0.2984, 0.527]]])
in1Sub54621 = tf.constant([[[0.2116, 0.9652, 0.9609], [0.7387, 0.7858, 0.0129], [0.7491, 0.4373, 0.6557]]])
in0Con69836 = tf.constant([[[[0.3162], [0.1723], [0.4734]], [[0.7109], [0.1098], [0.8122]], [[0.9763], [0.7826], [0.3084]], [[0.7794], [0.4208], [0.802]]]])
in0Min15845 = tf.constant([[[[[0.9084, 0.7386]]], [[[0.8993, 0.8039]]]]])
in1Min15845 = tf.constant([[[[[0.2169, 0.372]]], [[[0.3707, 0.5464]]]]])
print (np.array2string(model.predict([in0Sub54621,in1Sub54621,in0Con69836,in0Min15845,in1Min15845],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul77042.png')

LSub54621 = subtract_layer([[[0.9219, 0.4012, 0.8742], [0.5424, 0.0444, 0.7925], [0.6482, 0.2984, 0.527]]], [[[0.2116, 0.9652, 0.9609], [0.7387, 0.7858, 0.0129], [0.7491, 0.4373, 0.6557]]], Sub54621), 
LRes53287 = reshape_layer(Sub54621, [3, 3, 1], Res53287), 
LZer23933 = zero_padding2D_layer(Res53287, 1, 0, 0, 0, Zer23933), 
LCon69836 = concatenate_layer([Zer23933,[[[[0.3162], [0.1723], [0.4734]], [[0.7109], [0.1098], [0.8122]], [[0.9763], [0.7826], [0.3084]], [[0.7794], [0.4208], [0.802]]]]], 3, Con69836), 
LMin15845 = minimum_layer([[[[[[0.9084, 0.7386]]], [[[0.8993, 0.8039]]]]], [[[[[0.2169, 0.372]]], [[[0.3707, 0.5464]]]]]], Min15845), 
LELU95989 = elu_layer(Min15845, -5.215500484860436, ELU95989), 
LRes60356 = reshape_layer(ELU95989, [2, 1, 2], Res60356), 
LZer12608 = zero_padding2D_layer(Res60356, 1, 1, 1, 1, Zer12608), 
LMul77042 = multiply_layer([Con69836,Zer12608], Mul77042), 
exec_layers([LSub54621,LRes53287,LZer23933,LCon69836,LMin15845,LELU95989,LRes60356,LZer12608,LMul77042],["Sub54621","Res53287","Zer23933","Con69836","Min15845","ELU95989","Res60356","Zer12608","Mul77042"],Mul77042,"Mul77042")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [-0.1223316, 0.0408456], [-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000], [-0.2748370, 0.4276126], [0.0000000, 0.0000000]], [[-0.0000000, 0.0000000], [-0.0000000, 0.0000000], [-0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0.0],[0,0.0],[0,0.0]],[[0.0,0.0],[-0.1223316,0.040845599999999996],[-0.0,0.0]],[[-0.0,0.0],[-0.27483698,0.42761264],[0.0,0.0]],[[-0.0,0.0],[-0.0,0.0],[-0.0,0.0]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0]], [[0, 0], [-0.1223, 0.0409], [-0, 0]], [[-0, 0], [-0.2748, 0.4277], [0, 0]], [[-0, 0], [-0, 0], [-0, 0]]]]

Expected: [[[[0, 0], [0, 0], [0, 0]], [[0, 0], [-0.1223, 0.0409], [-0, 0]], [[-0, 0], [-0.2748, 0.4277], [0, 0]], [[-0, 0], [-0, 0], [-0, 0]]]]