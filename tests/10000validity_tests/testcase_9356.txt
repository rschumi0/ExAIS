import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot7721 = tf.keras.layers.Input(shape=([2]))
in1Dot7721 = tf.keras.layers.Input(shape=([2]))
in0Con44967 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Ave92920 = tf.keras.layers.Input(shape=([2, 1, 2]))

Dot7721 = keras.layers.Dot(axes=(1, 1), name = 'Dot7721', )([in0Dot7721,in1Dot7721])
Res17012 = keras.layers.Reshape((1, 1), name = 'Res17012', )(Dot7721)
Res67769 = keras.layers.Reshape((1, 1, 1), name = 'Res67769', )(Res17012)
Zer15404 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer15404', )(Res67769)
Con44967 = keras.layers.Concatenate(axis=3, name = 'Con44967', )([Zer15404,in0Con44967])
Ave92920 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 1), padding='same', name = 'Ave92920', )(in0Ave92920)
Mul85750 = keras.layers.Multiply(name = 'Mul85750', )([Con44967,Ave92920])
model = tf.keras.models.Model(inputs=[in0Dot7721,in1Dot7721,in0Con44967,in0Ave92920], outputs=Mul85750)
in0Dot7721 = tf.constant([[0.8118, 0.2954]])
in1Dot7721 = tf.constant([[0.5992, 0.1219]])
in0Con44967 = tf.constant([[[[0.128]], [[0.256]]]])
in0Ave92920 = tf.constant([[[[1.9125, 1.751]], [[1.24, 1.2065]]]])
print (np.array2string(model.predict([in0Dot7721,in1Dot7721,in0Con44967,in0Ave92920],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul85750.png')

LDot7721 = dot_layer([[0.8118, 0.2954]], [[0.5992, 0.1219]], 1, 1, Dot7721), 
LRes17012 = reshape_layer(Dot7721, [1, 1], Res17012), 
LRes67769 = reshape_layer(Res17012, [1, 1, 1], Res67769), 
LZer15404 = zero_padding2D_layer(Res67769, 1, 0, 0, 0, Zer15404), 
LCon44967 = concatenate_layer([Zer15404,[[[[0.128]], [[0.256]]]]], 3, Con44967), 
LAve92920 = average_pooling2D_layer([[[[1.9125, 1.751]], [[1.24, 1.2065]]]], 2, 1, 1, 1, true, Ave92920), 
LMul85750 = multiply_layer([Con44967,Ave92920], Mul85750), 
exec_layers([LDot7721,LRes17012,LRes67769,LZer15404,LCon44967,LAve92920,LMul85750],["Dot7721","Res17012","Res67769","Zer15404","Con44967","Ave92920","Mul85750"],Mul85750,"Mul85750")

Actual (Unparsed): [[[[0.0000000, 0.1892800]], [[0.6478254, 0.3088640]]]]

Expected (Unparsed): [[[[0.0,0.18927999999999998]],[[0.6478253768,0.30886399999999997]]]]

Actual:   [[[[0, 0.1893]], [[0.6479, 0.3089]]]]

Expected: [[[[0, 0.1893]], [[0.6479, 0.3089]]]]