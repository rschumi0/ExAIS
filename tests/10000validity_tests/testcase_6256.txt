import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sof65487 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Ave26855 = tf.keras.layers.Input(shape=([2, 1, 2]))

Sof65487 = keras.layers.Softmax(axis=1, name = 'Sof65487', input_shape=(1, 1, 2, 1))(in0Sof65487)
Res86367 = keras.layers.Reshape((1, 1, 2), name = 'Res86367', )(Sof65487)
Ave26855 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 8), padding='valid', name = 'Ave26855', )(in0Ave26855)
Ave84540 = keras.layers.Average(name = 'Ave84540', )([Res86367,Ave26855])
model = tf.keras.models.Model(inputs=[in0Sof65487,in0Ave26855], outputs=Ave84540)
in0Sof65487 = tf.constant([[[[[0.3904], [0.4091]]]]])
in0Ave26855 = tf.constant([[[[1.1509, 1.3186]], [[1.6922, 1.6761]]]])
print (np.array2string(model.predict([in0Sof65487,in0Ave26855],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave84540.png')

LSof65487 = softmax_layer([[[[[0.3904], [0.4091]]]]], 1, Sof65487), 
LRes86367 = reshape_layer(Sof65487, [1, 1, 2], Res86367), 
LAve26855 = average_pooling2D_layer([[[[1.1509, 1.3186]], [[1.6922, 1.6761]]]], 2, 1, 1, 8, false, Ave26855), 
LAve84540 = average_layer([Res86367,Ave26855], Ave84540), 
exec_layers([LSof65487,LRes86367,LAve26855,LAve84540],["Sof65487","Res86367","Ave26855","Ave84540"],Ave84540,"Ave84540")

Actual (Unparsed): [[[[1.2107750, 1.2486750]]]]

Expected (Unparsed): [[[[1.210775,1.248675]]]]

Actual:   [[[[1.2108, 1.2487]]]]

Expected: [[[[1.2108, 1.2487]]]]