import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min27790 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Min27790 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Sub8750 = tf.keras.layers.Input(shape=([2, 3, 3, 2]))
in1Sub8750 = tf.keras.layers.Input(shape=([2, 3, 3, 2]))

Min27790 = keras.layers.Minimum(name = 'Min27790', )([in0Min27790,in1Min27790])
Zer16384 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (2, 0)), name = 'Zer16384', )(Min27790)
Sub8750 = keras.layers.Subtract(name = 'Sub8750', )([in0Sub8750,in1Sub8750])
Min91474 = keras.layers.Minimum(name = 'Min91474', )([Zer16384,Sub8750])
Res83810 = keras.layers.Reshape((2, 3, 6), name = 'Res83810', )(Min91474)
Res43630 = keras.layers.Reshape((2, 18), name = 'Res43630', )(Res83810)
Zer37186 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer37186', )(Res43630)
model = tf.keras.models.Model(inputs=[in0Min27790,in1Min27790,in0Sub8750,in1Sub8750], outputs=Zer37186)
in0Min27790 = tf.constant([[[[[0.045, 0.1634]], [[0.8542, 0.2235]]]]])
in1Min27790 = tf.constant([[[[[0.4782, 0.979]], [[0.985, 0.2776]]]]])
in0Sub8750 = tf.constant([[[[[0.3943, 0.2282], [0.9054, 0.4528], [0.4875, 0.7589]], [[0.7269, 0.793], [0.1686, 0.7668], [0.4471, 0.4662]], [[0.0955, 0.9549], [0.5513, 0.0122], [0.0189, 0.8014]]], [[[0.1647, 0.2947], [0.2336, 0.8991], [0.9193, 0.6817]], [[0.9557, 0.802], [0.9264, 0.7808], [0.6293, 0.1975]], [[0.6334, 0.2623], [0.5077, 0.5063], [0.8921, 0.9204]]]]])
in1Sub8750 = tf.constant([[[[[0.8505, 0.2056], [0.2587, 0.1398], [0.7335, 0.2687]], [[0.4089, 0.3633], [0.7735, 0.1217], [0.56, 0.9903]], [[0.0422, 0.4251], [0.9626, 0.3727], [0.0581, 0.8095]]], [[[0.8487, 0.2222], [0.0308, 0.4144], [0.706, 0.7947]], [[0.4611, 0.7136], [0.3839, 0.6734], [0.7945, 0.6416]], [[0.3324, 0.8396], [0.071, 0.4818], [0.2234, 0.9883]]]]])
print (np.array2string(model.predict([in0Min27790,in1Min27790,in0Sub8750,in1Sub8750],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer37186.png')

LMin27790 = minimum_layer([[[[[[0.045, 0.1634]], [[0.8542, 0.2235]]]]], [[[[[0.4782, 0.979]], [[0.985, 0.2776]]]]]], Min27790), 
LZer16384 = zero_padding3D_layer(Min27790, 1, 0, 1, 0, 2, 0, Zer16384), 
LSub8750 = subtract_layer([[[[[0.3943, 0.2282], [0.9054, 0.4528], [0.4875, 0.7589]], [[0.7269, 0.793], [0.1686, 0.7668], [0.4471, 0.4662]], [[0.0955, 0.9549], [0.5513, 0.0122], [0.0189, 0.8014]]], [[[0.1647, 0.2947], [0.2336, 0.8991], [0.9193, 0.6817]], [[0.9557, 0.802], [0.9264, 0.7808], [0.6293, 0.1975]], [[0.6334, 0.2623], [0.5077, 0.5063], [0.8921, 0.9204]]]]], [[[[[0.8505, 0.2056], [0.2587, 0.1398], [0.7335, 0.2687]], [[0.4089, 0.3633], [0.7735, 0.1217], [0.56, 0.9903]], [[0.0422, 0.4251], [0.9626, 0.3727], [0.0581, 0.8095]]], [[[0.8487, 0.2222], [0.0308, 0.4144], [0.706, 0.7947]], [[0.4611, 0.7136], [0.3839, 0.6734], [0.7945, 0.6416]], [[0.3324, 0.8396], [0.071, 0.4818], [0.2234, 0.9883]]]]], Sub8750), 
LMin91474 = minimum_layer([Zer16384,Sub8750], Min91474), 
LRes83810 = reshape_layer(Min91474, [2, 3, 6], Res83810), 
LRes43630 = reshape_layer(Res83810, [2, 18], Res43630), 
LZer37186 = zero_padding1D_layer(Res43630, 1, 1, Zer37186), 
exec_layers([LMin27790,LZer16384,LSub8750,LMin91474,LRes83810,LRes43630,LZer37186],["Min27790","Zer16384","Sub8750","Min91474","Res83810","Res43630","Zer37186"],Zer37186,"Zer37186")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [-0.4562000, 0.0000000, 0.0000000, 0.0000000, -0.2460000, 0.0000000, 0.0000000, 0.0000000, -0.6049000, 0.0000000, -0.1129000, -0.5241000, 0.0000000, 0.0000000, -0.4113000, -0.3605000, -0.0392000, -0.0081000], [-0.6840000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, -0.1130000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, -0.1652000, -0.4441000, 0.0000000, -0.5773000, 0.0000000, 0.0000000, 0.6687000, -0.0679000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-0.45620000000000005,0,0,0,-0.24600000000000005,0,0,0,-0.6049,0,-0.11290000000000006,-0.5241,0,0,-0.4113,-0.3605,-0.0392,-0.008099999999999996],[-0.6839999999999999,0,0,0,0,-0.11299999999999999,0,0,0,0,-0.1652,-0.44409999999999994,0,-0.5773,0,0,0.6687000000000001,-0.06789999999999996],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [-0.4562, 0, 0, 0, -0.246, 0, 0, 0, -0.6049, 0, -0.1129, -0.5241, 0, 0, -0.4113, -0.3605, -0.0392, -0.0081], [-0.684, 0, 0, 0, 0, -0.113, 0, 0, 0, 0, -0.1652, -0.4441, 0, -0.5773, 0, 0, 0.6687, -0.0679], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [-0.4562, 0, 0, 0, -0.246, 0, 0, 0, -0.6049, 0, -0.1129, -0.5241, 0, 0, -0.4113, -0.3605, -0.0392, -0.008], [-0.6839, 0, 0, 0, 0, -0.1129, 0, 0, 0, 0, -0.1652, -0.444, 0, -0.5773, 0, 0, 0.6688, -0.0678], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]