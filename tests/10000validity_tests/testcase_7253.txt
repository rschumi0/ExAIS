import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub22205 = tf.keras.layers.Input(shape=([3, 3, 2]))
in1Sub22205 = tf.keras.layers.Input(shape=([3, 3, 2]))

Sub22205 = keras.layers.Subtract(name = 'Sub22205', )([in0Sub22205,in1Sub22205])
Res14911 = keras.layers.Reshape((3, 6), name = 'Res14911', )(Sub22205)
Ave3972 = keras.layers.AveragePooling1D(pool_size=(3), strides=(1), padding='valid', name = 'Ave3972', )(Res14911)
model = tf.keras.models.Model(inputs=[in0Sub22205,in1Sub22205], outputs=Ave3972)
in0Sub22205 = tf.constant([[[[0.6225, 0.4872], [0.9427, 0.2701], [0.2672, 0.844]], [[0.3755, 0.5622], [0.8602, 0.2144], [0.2266, 0.5317]], [[0.9847, 0.6914], [0.6487, 0.5295], [0.2711, 0.0566]]]])
in1Sub22205 = tf.constant([[[[0.2601, 0.8423], [0.285, 0.0429], [0.6646, 0.6492]], [[0.6752, 0.7419], [0.227, 0.6615], [0.6622, 0.5117]], [[0.4396, 0.9698], [0.9314, 0.1128], [0.7797, 0.6958]]]])
print (np.array2string(model.predict([in0Sub22205,in1Sub22205],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave3972.png')

LSub22205 = subtract_layer([[[[0.6225, 0.4872], [0.9427, 0.2701], [0.2672, 0.844]], [[0.3755, 0.5622], [0.8602, 0.2144], [0.2266, 0.5317]], [[0.9847, 0.6914], [0.6487, 0.5295], [0.2711, 0.0566]]]], [[[[0.2601, 0.8423], [0.285, 0.0429], [0.6646, 0.6492]], [[0.6752, 0.7419], [0.227, 0.6615], [0.6622, 0.5117]], [[0.4396, 0.9698], [0.9314, 0.1128], [0.7797, 0.6958]]]], Sub22205), 
LRes14911 = reshape_layer(Sub22205, [3, 6], Res14911), 
LAve3972 = average_pooling1D_layer(Res14911, 3, 1, false, Ave3972), 
exec_layers([LSub22205,LRes14911,LAve3972],["Sub22205","Res14911","Ave3972"],Ave3972,"Ave3972")

Actual (Unparsed): [[[0.2026000, -0.2710667, 0.3360667, 0.0656000, -0.4472000, -0.1414667]]]

Expected (Unparsed): [[[0.20260000000000003,-0.2710666666666666,0.3360666666666667,0.0656,-0.4472,-0.1414666666666667]]]

Actual:   [[[0.2026, -0.271, 0.3361, 0.0656, -0.4472, -0.1414]]]

Expected: [[[0.2027, -0.271, 0.3361, 0.0656, -0.4472, -0.1414]]]