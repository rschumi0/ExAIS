import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub93597 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in1Sub93597 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))

Sub93597 = keras.layers.Subtract(name = 'Sub93597', )([in0Sub93597,in1Sub93597])
Res9562 = keras.layers.Reshape((2, 3, 6), name = 'Res9562', )(Sub93597)
Res29259 = keras.layers.Reshape((2, 18), name = 'Res29259', )(Res9562)
Loc71975 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc71975', )(Res29259)
Res5006 = keras.layers.Reshape((2, 2, 1), name = 'Res5006', )(Loc71975)
Res21859 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res21859', )(Res5006)
Up_50277 = keras.layers.UpSampling3D(size=(1, 2, 2), name = 'Up_50277', )(Res21859)
model = tf.keras.models.Model(inputs=[in0Sub93597,in1Sub93597], outputs=Up_50277)
w = model.get_layer('Loc71975').get_weights() 
w[0] = np.array([[[0.2398, 0.607], [0.9949, 0.2164], [0.829, 0.9054], [0.2109, 0.598], [0.8697, 0.3484], [0.9261, 0.9153], [0.8891, 0.8814], [0.2886, 0.3219], [0.9964, 0.5312], [0.2716, 0.6655], [0.627, 0.7208], [0.9702, 0.3934], [0.3923, 0.6076], [0.0978, 0.8274], [0.4633, 0.4123], [0.1087, 0.8761], [0.2657, 0.8151], [0.052, 0.8079]], [[0.5162, 0.7589], [0.3416, 0.9258], [0.7949, 0.4148], [0.1186, 0.8585], [0.9128, 0.6446], [0.7771, 0.7076], [0.3076, 0.023], [0.5268, 0.477], [0.5839, 0.3719], [0.5731, 0.0528], [0.0942, 0.803], [0.6095, 0.4953], [0.1561, 0.4633], [0.8387, 0.5617], [0.094, 0.5379], [0.6646, 0.1862], [0.8034, 0.5726], [0.5305, 0.1091]]])
w[1] = np.array([[0, 0], [0, 0]])
model.get_layer('Loc71975').set_weights(w) 
in0Sub93597 = tf.constant([[[[[0.071, 0.1426, 0.1707], [0.804, 0.2291, 0.7773]], [[0.4937, 0.2477, 0.3652], [0.2168, 0.4485, 0.4727]], [[0.5582, 0.4168, 0.8619], [0.6366, 0.5137, 0.608]]], [[[0.3963, 0.3696, 0.5926], [0.9059, 0.5409, 0.8317]], [[0.2809, 0.6581, 0.0199], [0.8749, 0.3897, 0.5892]], [[0.1306, 0.8473, 0.6306], [0.7281, 0.3288, 0.0771]]]]])
in1Sub93597 = tf.constant([[[[[0.7273, 0.4378, 0.8513], [0.4885, 0.8894, 0.6072]], [[0.2806, 0.1155, 0.3023], [0.2066, 0.7408, 0.5077]], [[0.2676, 0.9643, 0.845], [0.1472, 0.7656, 0.8784]]], [[[0.6058, 0.0357, 0.5065], [0.6399, 0.2697, 0.5516]], [[0.9867, 0.8183, 0.4356], [0.5253, 0.6719, 0.8322]], [[0.8811, 0.2362, 0.1938], [0.3158, 0.2343, 0.6971]]]]])
print (np.array2string(model.predict([in0Sub93597,in1Sub93597],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_50277.png')

LSub93597 = subtract_layer([[[[[0.071, 0.1426, 0.1707], [0.804, 0.2291, 0.7773]], [[0.4937, 0.2477, 0.3652], [0.2168, 0.4485, 0.4727]], [[0.5582, 0.4168, 0.8619], [0.6366, 0.5137, 0.608]]], [[[0.3963, 0.3696, 0.5926], [0.9059, 0.5409, 0.8317]], [[0.2809, 0.6581, 0.0199], [0.8749, 0.3897, 0.5892]], [[0.1306, 0.8473, 0.6306], [0.7281, 0.3288, 0.0771]]]]], [[[[[0.7273, 0.4378, 0.8513], [0.4885, 0.8894, 0.6072]], [[0.2806, 0.1155, 0.3023], [0.2066, 0.7408, 0.5077]], [[0.2676, 0.9643, 0.845], [0.1472, 0.7656, 0.8784]]], [[[0.6058, 0.0357, 0.5065], [0.6399, 0.2697, 0.5516]], [[0.9867, 0.8183, 0.4356], [0.5253, 0.6719, 0.8322]], [[0.8811, 0.2362, 0.1938], [0.3158, 0.2343, 0.6971]]]]], Sub93597), 
LRes9562 = reshape_layer(Sub93597, [2, 3, 6], Res9562), 
LRes29259 = reshape_layer(Res9562, [2, 18], Res29259), 
LLoc71975 = locally_connected1D_layer(Res29259, 1,[[[0.2398, 0.607], [0.9949, 0.2164], [0.829, 0.9054], [0.2109, 0.598], [0.8697, 0.3484], [0.9261, 0.9153], [0.8891, 0.8814], [0.2886, 0.3219], [0.9964, 0.5312], [0.2716, 0.6655], [0.627, 0.7208], [0.9702, 0.3934], [0.3923, 0.6076], [0.0978, 0.8274], [0.4633, 0.4123], [0.1087, 0.8761], [0.2657, 0.8151], [0.052, 0.8079]], [[0.5162, 0.7589], [0.3416, 0.9258], [0.7949, 0.4148], [0.1186, 0.8585], [0.9128, 0.6446], [0.7771, 0.7076], [0.3076, 0.023], [0.5268, 0.477], [0.5839, 0.3719], [0.5731, 0.0528], [0.0942, 0.803], [0.6095, 0.4953], [0.1561, 0.4633], [0.8387, 0.5617], [0.094, 0.5379], [0.6646, 0.1862], [0.8034, 0.5726], [0.5305, 0.1091]]],[[0, 0], [0, 0]], 1, Loc71975), 
LRes5006 = reshape_layer(Loc71975, [2, 2, 1], Res5006), 
LRes21859 = reshape_layer(Res5006, [2, 2, 1, 1], Res21859), 
LUp_50277 = up_sampling3D_layer(Res21859, 1, 2, 2, Up_50277), 
exec_layers([LSub93597,LRes9562,LRes29259,LLoc71975,LRes5006,LRes21859,LUp_50277],["Sub93597","Res9562","Res29259","Loc71975","Res5006","Res21859","Up_50277"],Up_50277,"Up_50277")

Actual (Unparsed): [[[[[-1.2491583], [-1.2491583]], [[-1.2491583], [-1.2491583]], [[-1.1825160], [-1.1825160]], [[-1.1825160], [-1.1825160]]], [[[0.5100229], [0.5100229]], [[0.5100229], [0.5100229]], [[0.5052133], [0.5052133]], [[0.5052133], [0.5052133]]]]]

Expected (Unparsed): [[[[[-1.24915826],[-1.24915826]],[[-1.24915826],[-1.24915826]],[[-1.18251593],[-1.18251593]],[[-1.18251593],[-1.18251593]]],[[[0.51002285],[0.51002285]],[[0.51002285],[0.51002285]],[[0.5052132800000001],[0.5052132800000001]],[[0.5052132800000001],[0.5052132800000001]]]]]

Actual:   [[[[[-1.2491], [-1.2491]], [[-1.2491], [-1.2491]], [[-1.1825], [-1.1825]], [[-1.1825], [-1.1825]]], [[[0.5101], [0.5101]], [[0.5101], [0.5101]], [[0.5053], [0.5053]], [[0.5053], [0.5053]]]]]

Expected: [[[[[-1.2491], [-1.2491]], [[-1.2491], [-1.2491]], [[-1.1825], [-1.1825]], [[-1.1825], [-1.1825]]], [[[0.5101], [0.5101]], [[0.5101], [0.5101]], [[0.5053], [0.5053]], [[0.5053], [0.5053]]]]]