import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min38684 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Min38684 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Min38684 = keras.layers.Minimum(name = 'Min38684', )([in0Min38684,in1Min38684])
Res76060 = keras.layers.Reshape((1, 2, 2), name = 'Res76060', )(Min38684)
Up_17022 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_17022', )(Res76060)
Lea15770 = keras.layers.LeakyReLU(alpha=7.899598435420805, name = 'Lea15770', )(Up_17022)
Res50088 = keras.layers.Reshape((1, 8), name = 'Res50088', )(Lea15770)
Con27153 = keras.layers.Conv1D(4, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con27153', )(Res50088)
model = tf.keras.models.Model(inputs=[in0Min38684,in1Min38684], outputs=Con27153)
w = model.get_layer('Con27153').get_weights() 
w[0] = np.array([[[0.6699, 0.4642, 0.2232, 0.3058], [0.0655, 0.2489, 0.1125, 0.8341], [0.3718, 0.3396, 0.6224, 0.5059], [0.1847, 0.3425, 0.957, 0.9945], [0.9735, 0.5581, 0.277, 0.6045], [0.9885, 0.447, 0.4683, 0.2041], [0.2581, 0.9466, 0.7266, 0.5421], [0.6606, 0.7289, 0.3805, 0.8696]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con27153').set_weights(w) 
in0Min38684 = tf.constant([[[[[0.1221, 0.3848]], [[0.2092, 0.8631]]]]])
in1Min38684 = tf.constant([[[[[0.4238, 0.8836]], [[0.0458, 0.3734]]]]])
print (np.array2string(model.predict([in0Min38684,in1Min38684],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con27153.png')

LMin38684 = minimum_layer([[[[[[0.1221, 0.3848]], [[0.2092, 0.8631]]]]], [[[[[0.4238, 0.8836]], [[0.0458, 0.3734]]]]]], Min38684), 
LRes76060 = reshape_layer(Min38684, [1, 2, 2], Res76060), 
LUp_17022 = up_sampling2D_layer(Res76060, 1, 2, Up_17022), 
LLea15770 = leaky_relu_layer(Up_17022, 7.899598435420805, Lea15770), 
LRes50088 = reshape_layer(Lea15770, [1, 8], Res50088), 
LCon27153 = conv1D_layer(Res50088, 1,[[[0.6699, 0.4642, 0.2232, 0.3058], [0.0655, 0.2489, 0.1125, 0.8341], [0.3718, 0.3396, 0.6224, 0.5059], [0.1847, 0.3425, 0.957, 0.9945], [0.9735, 0.5581, 0.277, 0.6045], [0.9885, 0.447, 0.4683, 0.2041], [0.2581, 0.9466, 0.7266, 0.5421], [0.6606, 0.7289, 0.3805, 0.8696]]],[0, 0, 0, 0], 1, true, 1, Con27153), 
exec_layers([LMin38684,LRes76060,LUp_17022,LLea15770,LRes50088,LCon27153],["Min38684","Res76060","Up_17022","Lea15770","Res50088","Con27153"],Con27153,"Con27153")

Actual (Unparsed): [[[0.8956498, 0.8337110, 0.8776982, 1.2561877]]]

Expected (Unparsed): [[[0.89564975,0.8337110200000001,0.87769816,1.25618771]]]

Actual:   [[[0.8957, 0.8338, 0.8777, 1.2562]]]

Expected: [[[0.8957, 0.8338, 0.8777, 1.2562]]]