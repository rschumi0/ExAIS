import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot44484 = tf.keras.layers.Input(shape=([2]))
in1Dot44484 = tf.keras.layers.Input(shape=([2]))
in0Con57836 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot22943 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot22943 = tf.keras.layers.Input(shape=([3, 2]))
in0Mul80387 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Mul80387 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Max22238 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max22238 = tf.keras.layers.Input(shape=([2, 1, 1]))

Dot44484 = keras.layers.Dot(axes=(1, 1), name = 'Dot44484', )([in0Dot44484,in1Dot44484])
Res57934 = keras.layers.Reshape((1, 1), name = 'Res57934', )(Dot44484)
Zer49342 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer49342', )(Res57934)
Con57836 = keras.layers.Concatenate(axis=2, name = 'Con57836', )([Zer49342,in0Con57836])
Dot22943 = keras.layers.Dot(axes=(1, 1), name = 'Dot22943', )([in0Dot22943,in1Dot22943])
Res42388 = keras.layers.Reshape((2, 2, 1), name = 'Res42388', )(Dot22943)
Max94736 = keras.layers.MaxPool2D(pool_size=(2, 2), strides=(1, 1), padding='same', name = 'Max94736', )(Res42388)
Res40994 = keras.layers.Reshape((2, 2), name = 'Res40994', )(Max94736)
Mul80387 = keras.layers.Multiply(name = 'Mul80387', )([in0Mul80387,in1Mul80387])
Zer17248 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer17248', )(Mul80387)
Max22238 = keras.layers.Maximum(name = 'Max22238', )([in0Max22238,in1Max22238])
Zer64470 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer64470', )(Max22238)
Min47755 = keras.layers.Minimum(name = 'Min47755', )([Zer17248,Zer64470])
Thr63479 = keras.layers.ThresholdedReLU(theta=7.292207086438843, name = 'Thr63479', )(Min47755)
Res61655 = keras.layers.Reshape((2, 3), name = 'Res61655', )(Thr63479)
Dot99255 = keras.layers.Dot(axes=(1, 1), name = 'Dot99255', )([Res40994,Res61655])
Add16441 = keras.layers.Add(name = 'Add16441', )([Con57836,Dot99255])
model = tf.keras.models.Model(inputs=[in0Dot44484,in1Dot44484,in0Con57836,in0Dot22943,in1Dot22943,in0Mul80387,in1Mul80387,in0Max22238,in1Max22238], outputs=Add16441)
in0Dot44484 = tf.constant([[0.9503, 0.3452]])
in1Dot44484 = tf.constant([[0.2484, 0.1635]])
in0Con57836 = tf.constant([[[0.0411, 0.8409], [0.0369, 0.2277]]])
in0Dot22943 = tf.constant([[[0.7092, 0.6981], [0.8275, 0.1001], [0.6973, 0.2443]]])
in1Dot22943 = tf.constant([[[0.9657, 0.46], [0.9844, 0.9534], [0.3092, 0.0445]]])
in0Mul80387 = tf.constant([[[[0.8798], [0.019]]]])
in1Mul80387 = tf.constant([[[[0.984], [0.8318]]]])
in0Max22238 = tf.constant([[[[0.3327]], [[0.3173]]]])
in1Max22238 = tf.constant([[[[0.6986]], [[0.9343]]]])
print (np.array2string(model.predict([in0Dot44484,in1Dot44484,in0Con57836,in0Dot22943,in1Dot22943,in0Mul80387,in1Mul80387,in0Max22238,in1Max22238],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add16441.png')

LDot44484 = dot_layer([[0.9503, 0.3452]], [[0.2484, 0.1635]], 1, 1, Dot44484), 
LRes57934 = reshape_layer(Dot44484, [1, 1], Res57934), 
LZer49342 = zero_padding1D_layer(Res57934, 1, 0, Zer49342), 
LCon57836 = concatenate_layer([Zer49342,[[[0.0411, 0.8409], [0.0369, 0.2277]]]], 2, Con57836), 
LDot22943 = dot_layer([[[0.7092, 0.6981], [0.8275, 0.1001], [0.6973, 0.2443]]], [[[0.9657, 0.46], [0.9844, 0.9534], [0.3092, 0.0445]]], 1, 1, Dot22943), 
LRes42388 = reshape_layer(Dot22943, [2, 2, 1], Res42388), 
LMax94736 = max_pool2D_layer(Res42388, 2, 2, 1, 1, true, Max94736), 
LRes40994 = reshape_layer(Max94736, [2, 2], Res40994), 
LMul80387 = multiply_layer([[[[[0.8798], [0.019]]]], [[[[0.984], [0.8318]]]]], Mul80387), 
LZer17248 = zero_padding2D_layer(Mul80387, 1, 0, 1, 0, Zer17248), 
LMax22238 = maximum_layer([[[[[0.3327]], [[0.3173]]]], [[[[0.6986]], [[0.9343]]]]], Max22238), 
LZer64470 = zero_padding2D_layer(Max22238, 0, 0, 2, 0, Zer64470), 
LMin47755 = minimum_layer([Zer17248,Zer64470], Min47755), 
LThr63479 = thresholded_relu_layer(Min47755, 7.292207086438843, Thr63479), 
LRes61655 = reshape_layer(Thr63479, [2, 3], Res61655), 
LDot99255 = dot_layer(Res40994,Res61655, 1, 1, Dot99255), 
LAdd16441 = add_layer([Con57836,Dot99255], Add16441), 
exec_layers([LDot44484,LRes57934,LZer49342,LCon57836,LDot22943,LRes42388,LMax94736,LRes40994,LMul80387,LZer17248,LMax22238,LZer64470,LMin47755,LThr63479,LRes61655,LDot99255,LAdd16441],["Dot44484","Res57934","Zer49342","Con57836","Dot22943","Res42388","Max94736","Res40994","Mul80387","Zer17248","Max22238","Zer64470","Min47755","Thr63479","Res61655","Dot99255","Add16441"],Add16441,"Add16441")

Actual (Unparsed): [[[0.0000000, 0.0411000, 0.8409000], [0.2924947, 0.0369000, 0.2277000]]]

Expected (Unparsed): [[[0.0,0.0411,0.8409],[0.29249472000000004,0.0369,0.2277]]]

Actual:   [[[0, 0.0411, 0.8409], [0.2925, 0.0369, 0.2277]]]

Expected: [[[0, 0.0411, 0.8409], [0.2925, 0.0369, 0.2277]]]