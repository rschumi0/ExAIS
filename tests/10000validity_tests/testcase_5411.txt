import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub20453 = tf.keras.layers.Input(shape=([3]))
in1Sub20453 = tf.keras.layers.Input(shape=([3]))
in0Sub74032 = tf.keras.layers.Input(shape=([2, 2, 2, 3]))
in1Sub74032 = tf.keras.layers.Input(shape=([2, 2, 2, 3]))
in0Glo46535 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con80849 = tf.keras.layers.Input(shape=([11]))

Sub20453 = keras.layers.Subtract(name = 'Sub20453', )([in0Sub20453,in1Sub20453])
Res64411 = keras.layers.Reshape((3, 1), name = 'Res64411', )(Sub20453)
Res57892 = keras.layers.Reshape((3, 1, 1), name = 'Res57892', )(Res64411)
Sub74032 = keras.layers.Subtract(name = 'Sub74032', )([in0Sub74032,in1Sub74032])
Res33915 = keras.layers.Reshape((2, 2, 6), name = 'Res33915', )(Sub74032)
Ave22723 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 1), padding='valid', name = 'Ave22723', )(Res33915)
Res21767 = keras.layers.Reshape((1, 12), name = 'Res21767', )(Ave22723)
Fla30912 = keras.layers.Flatten(name = 'Fla30912', )(Res21767)
Glo46535 = keras.layers.GlobalAveragePooling3D(name = 'Glo46535', )(in0Glo46535)
Con80849 = keras.layers.Concatenate(axis=1, name = 'Con80849', )([Glo46535,in0Con80849])
Mul11473 = keras.layers.Multiply(name = 'Mul11473', )([Fla30912,Con80849])
Res90634 = keras.layers.Reshape((12, 1), name = 'Res90634', )(Mul11473)
Res70176 = keras.layers.Reshape((12, 1, 1), name = 'Res70176', )(Res90634)
Max23599 = keras.layers.MaxPool2D(pool_size=(5, 1), name = 'Max23599', )(Res70176)
Zer30812 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer30812', )(Max23599)
Mul17791 = keras.layers.Multiply(name = 'Mul17791', )([Res57892,Zer30812])
model = tf.keras.models.Model(inputs=[in0Sub20453,in1Sub20453,in0Sub74032,in1Sub74032,in0Glo46535,in0Con80849], outputs=Mul17791)
in0Sub20453 = tf.constant([[0.5797, 0.8407, 0.5873]])
in1Sub20453 = tf.constant([[0.4477, 0.5635, 0.7959]])
in0Sub74032 = tf.constant([[[[[0.8989, 0.7148, 0.7047], [0.9618, 0.1796, 0.8921]], [[0.0204, 0.0117, 0.2747], [0.5148, 0.9318, 0.7211]]], [[[0.6435, 0.4874, 0.3034], [0.152, 0.7797, 0.8894]], [[0.9811, 0.7642, 0.1277], [0.5678, 0.7511, 0.2368]]]]])
in1Sub74032 = tf.constant([[[[[0.5593, 0.367, 0.0597], [0.8602, 0.282, 0.9377]], [[0.2771, 0.7207, 0.3836], [0.9455, 0.7688, 0.5408]]], [[[0.0905, 0.1564, 0.5446], [0.96, 0.2133, 0.3136]], [[0.7972, 0.2478, 0.1856], [0.9409, 0.2115, 0.9234]]]]])
in0Glo46535 = tf.constant([[[[[1.5621]]]]])
in0Con80849 = tf.constant([[0.4032, 0.5907, 0.1879, 0.4621, 0.7676, 0.7866, 0.7252, 0.6185, 0.0155, 0.1272, 0.1643]])
print (np.array2string(model.predict([in0Sub20453,in1Sub20453,in0Sub74032,in1Sub74032,in0Glo46535,in0Con80849],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul17791.png')

LSub20453 = subtract_layer([[0.5797, 0.8407, 0.5873]], [[0.4477, 0.5635, 0.7959]], Sub20453), 
LRes64411 = reshape_layer(Sub20453, [3, 1], Res64411), 
LRes57892 = reshape_layer(Res64411, [3, 1, 1], Res57892), 
LSub74032 = subtract_layer([[[[[0.8989, 0.7148, 0.7047], [0.9618, 0.1796, 0.8921]], [[0.0204, 0.0117, 0.2747], [0.5148, 0.9318, 0.7211]]], [[[0.6435, 0.4874, 0.3034], [0.152, 0.7797, 0.8894]], [[0.9811, 0.7642, 0.1277], [0.5678, 0.7511, 0.2368]]]]], [[[[[0.5593, 0.367, 0.0597], [0.8602, 0.282, 0.9377]], [[0.2771, 0.7207, 0.3836], [0.9455, 0.7688, 0.5408]]], [[[0.0905, 0.1564, 0.5446], [0.96, 0.2133, 0.3136]], [[0.7972, 0.2478, 0.1856], [0.9409, 0.2115, 0.9234]]]]], Sub74032), 
LRes33915 = reshape_layer(Sub74032, [2, 2, 6], Res33915), 
LAve22723 = average_pooling2D_layer(Res33915, 2, 1, 1, 1, false, Ave22723), 
LRes21767 = reshape_layer(Ave22723, [1, 12], Res21767), 
LFla30912 = flatten_layer(Res21767, Fla30912), 
LGlo46535 = global_average_pooling3D_layer([[[[[1.5621]]]]], Glo46535), 
LCon80849 = concatenate_layer([Glo46535,[[0.4032, 0.5907, 0.1879, 0.4621, 0.7676, 0.7866, 0.7252, 0.6185, 0.0155, 0.1272, 0.1643]]], 1, Con80849), 
LMul11473 = multiply_layer([Fla30912,Con80849], Mul11473), 
LRes90634 = reshape_layer(Mul11473, [12, 1], Res90634), 
LRes70176 = reshape_layer(Res90634, [12, 1, 1], Res70176), 
LMax23599 = max_pool2D_layer(Res70176, 5, 1, Max23599), 
LZer30812 = zero_padding2D_layer(Max23599, 1, 0, 0, 0, Zer30812), 
LMul17791 = multiply_layer([Res57892,Zer30812], Mul17791), 
exec_layers([LSub20453,LRes64411,LRes57892,LSub74032,LRes33915,LAve22723,LRes21767,LFla30912,LGlo46535,LCon80849,LMul11473,LRes90634,LRes70176,LMax23599,LZer30812,LMul17791],["Sub20453","Res64411","Res57892","Sub74032","Res33915","Ave22723","Res21767","Fla30912","Glo46535","Con80849","Mul11473","Res90634","Res70176","Max23599","Zer30812","Mul17791"],Mul17791,"Mul17791")

Actual (Unparsed): [[[[0.0000000]], [[0.1932542]], [[-0.0424482]]]]

Expected (Unparsed): [[[[0.0]],[[0.193254201756]],[[-0.042448172536]]]]

Actual:   [[[[0]], [[0.1933]], [[-0.0424]]]]

Expected: [[[[0]], [[0.1933]], [[-0.0424]]]]