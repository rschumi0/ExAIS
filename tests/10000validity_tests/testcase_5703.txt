import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max99301 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Max99301 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))

Max99301 = keras.layers.Maximum(name = 'Max99301', )([in0Max99301,in1Max99301])
Res3250 = keras.layers.Reshape((2, 1, 4), name = 'Res3250', )(Max99301)
Res76177 = keras.layers.Reshape((2, 4), name = 'Res76177', )(Res3250)
Max59848 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max59848', )(Res76177)
model = tf.keras.models.Model(inputs=[in0Max99301,in1Max99301], outputs=Max59848)
in0Max99301 = tf.constant([[[[[0.3719, 0.7923], [0.8065, 0.2309]]], [[[0.485, 0.6104], [0.1533, 0.2063]]]]])
in1Max99301 = tf.constant([[[[[0.9824, 0.2422], [0.6835, 0.6535]]], [[[0.7935, 0.4277], [0.7501, 0.0603]]]]])
print (np.array2string(model.predict([in0Max99301,in1Max99301],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max59848.png')

LMax99301 = maximum_layer([[[[[[0.3719, 0.7923], [0.8065, 0.2309]]], [[[0.485, 0.6104], [0.1533, 0.2063]]]]], [[[[[0.9824, 0.2422], [0.6835, 0.6535]]], [[[0.7935, 0.4277], [0.7501, 0.0603]]]]]], Max99301), 
LRes3250 = reshape_layer(Max99301, [2, 1, 4], Res3250), 
LRes76177 = reshape_layer(Res3250, [2, 4], Res76177), 
LMax59848 = max_pool1D_layer(Res76177, 1, Max59848), 
exec_layers([LMax99301,LRes3250,LRes76177,LMax59848],["Max99301","Res3250","Res76177","Max59848"],Max59848,"Max59848")

Actual (Unparsed): [[[0.9824000, 0.7923000, 0.8065000, 0.6535000], [0.7935000, 0.6104000, 0.7501000, 0.2063000]]]

Expected (Unparsed): [[[0.9824,0.7923,0.8065,0.6535],[0.7935,0.6104,0.7501,0.2063]]]

Actual:   [[[0.9824, 0.7923, 0.8065, 0.6535], [0.7935, 0.6104, 0.7501, 0.2063]]]

Expected: [[[0.9824, 0.7923, 0.8065, 0.6535], [0.7935, 0.6104, 0.7501, 0.2063]]]