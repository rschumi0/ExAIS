import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con34311 = tf.keras.layers.Input(shape=([1, 2]))
in0Con82972 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot68230 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot68230 = tf.keras.layers.Input(shape=([3, 2]))
in0Con36481 = tf.keras.layers.Input(shape=([1, 3, 1]))
in0Min85799 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min85799 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Zer76022 = tf.keras.layers.Input(shape=([2, 1]))
in0Con55791 = tf.keras.layers.Input(shape=([4, 5]))

Con34311 = keras.layers.Conv1D(2, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con34311', )(in0Con34311)
Con82972 = keras.layers.Concatenate(axis=2, name = 'Con82972', )([Con34311,in0Con82972])
Dot68230 = keras.layers.Dot(axes=(2, 2), name = 'Dot68230', )([in0Dot68230,in1Dot68230])
Dot7570 = keras.layers.Dot(axes=(2, 2), name = 'Dot7570', )([Con82972,Dot68230])
Res69792 = keras.layers.Reshape((1, 3, 1), name = 'Res69792', )(Dot7570)
Con36481 = keras.layers.Concatenate(axis=3, name = 'Con36481', )([Res69792,in0Con36481])
Min85799 = keras.layers.Minimum(name = 'Min85799', )([in0Min85799,in1Min85799])
Zer52958 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer52958', )(Min85799)
Add21323 = keras.layers.Add(name = 'Add21323', )([Con36481,Zer52958])
Res21820 = keras.layers.Reshape((1, 6), name = 'Res21820', )(Add21323)
Zer88783 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer88783', )(Res21820)
Zer76022 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer76022', )(in0Zer76022)
Con55791 = keras.layers.Concatenate(axis=2, name = 'Con55791', )([Zer76022,in0Con55791])
Add79270 = keras.layers.Add(name = 'Add79270', )([Zer88783,Con55791])
model = tf.keras.models.Model(inputs=[in0Con34311,in0Con82972,in0Dot68230,in1Dot68230,in0Con36481,in0Min85799,in1Min85799,in0Zer76022,in0Con55791], outputs=Add79270)
w = model.get_layer('Con34311').get_weights() 
w[0] = np.array([[[0.1645, 0.8615], [0.5893, 0.4893]]])
w[1] = np.array([0, 0])
model.get_layer('Con34311').set_weights(w) 
in0Con34311 = tf.constant([[[0.1115, 0.014]]])
in0Con82972 = tf.constant([[[0.91]]])
in0Dot68230 = tf.constant([[[0.907, 0.2692], [0.3937, 0.3699], [0.2352, 0.3751]]])
in1Dot68230 = tf.constant([[[0.4828, 0.4683], [0.1453, 0.4219], [0.8897, 0.6248]]])
in0Con36481 = tf.constant([[[[0.4076], [0.8094], [0.5264]]]])
in0Min85799 = tf.constant([[[[0.5257, 0.4387]]]])
in1Min85799 = tf.constant([[[[0.5016, 0.0782]]]])
in0Zer76022 = tf.constant([[[1.9289], [1.8616]]])
in0Con55791 = tf.constant([[[0.9636, 0.3932, 0.6197, 0.9758, 0.2372], [0.1604, 0.7063, 0.3142, 0.3897, 0.1905], [0.8314, 0.7764, 0.2457, 0.5518, 0.6853], [0.2446, 0.7241, 0.9873, 0.22, 0.9449]]])
print (np.array2string(model.predict([in0Con34311,in0Con82972,in0Dot68230,in1Dot68230,in0Con36481,in0Min85799,in1Min85799,in0Zer76022,in0Con55791],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add79270.png')

LCon34311 = conv1D_layer([[[0.1115, 0.014]]], 1,[[[0.1645, 0.8615], [0.5893, 0.4893]]],[0, 0], 1, true, 1, Con34311), 
LCon82972 = concatenate_layer([Con34311,[[[0.91]]]], 2, Con82972), 
LDot68230 = dot_layer([[[0.907, 0.2692], [0.3937, 0.3699], [0.2352, 0.3751]]], [[[0.4828, 0.4683], [0.1453, 0.4219], [0.8897, 0.6248]]], 2, 2, Dot68230), 
LDot7570 = dot_layer(Con82972,Dot68230, 2, 2, Dot7570), 
LRes69792 = reshape_layer(Dot7570, [1, 3, 1], Res69792), 
LCon36481 = concatenate_layer([Res69792,[[[[0.4076], [0.8094], [0.5264]]]]], 3, Con36481), 
LMin85799 = minimum_layer([[[[[0.5257, 0.4387]]]], [[[[0.5016, 0.0782]]]]], Min85799), 
LZer52958 = zero_padding2D_layer(Min85799, 0, 0, 2, 0, Zer52958), 
LAdd21323 = add_layer([Con36481,Zer52958], Add21323), 
LRes21820 = reshape_layer(Add21323, [1, 6], Res21820), 
LZer88783 = zero_padding1D_layer(Res21820, 3, 0, Zer88783), 
LZer76022 = zero_padding1D_layer([[[1.9289], [1.8616]]], 1, 1, Zer76022), 
LCon55791 = concatenate_layer([Zer76022,[[[0.9636, 0.3932, 0.6197, 0.9758, 0.2372], [0.1604, 0.7063, 0.3142, 0.3897, 0.1905], [0.8314, 0.7764, 0.2457, 0.5518, 0.6853], [0.2446, 0.7241, 0.9873, 0.22, 0.9449]]]], 2, Con55791), 
LAdd79270 = add_layer([Zer88783,Con55791], Add79270), 
exec_layers([LCon34311,LCon82972,LDot68230,LDot7570,LRes69792,LCon36481,LMin85799,LZer52958,LAdd21323,LRes21820,LZer88783,LZer76022,LCon55791,LAdd79270],["Con34311","Con82972","Dot68230","Dot7570","Res69792","Con36481","Min85799","Zer52958","Add21323","Res21820","Zer88783","Zer76022","Con55791","Add79270"],Add79270,"Add79270")

Actual (Unparsed): [[[0.0000000, 0.9636000, 0.3932000, 0.6197000, 0.9758000, 0.2372000], [1.9289000, 0.1604000, 0.7063000, 0.3142000, 0.3897000, 0.1905000], [1.8616000, 0.8314000, 0.7764000, 0.2457000, 0.5518000, 0.6853000], [0.9276368, 0.6522000, 1.2847710, 1.7967000, 1.1527873, 1.5495000]]]

Expected (Unparsed): [[[0,0.9636,0.3932,0.6197,0.9758,0.2372],[1.9289,0.1604,0.7063,0.3142,0.3897,0.1905],[1.8616,0.8314,0.7764,0.2457,0.5518,0.6853],[0.9276367866432431,0.6522,1.2847709763580126,1.7967,1.152787291925098,1.5495]]]

Actual:   [[[0, 0.9636, 0.3932, 0.6197, 0.9758, 0.2372], [1.9289, 0.1604, 0.7063, 0.3142, 0.3897, 0.1905], [1.8616, 0.8314, 0.7764, 0.2457, 0.5518, 0.6853], [0.9277, 0.6522, 1.2848, 1.7967, 1.1528, 1.5495]]]

Expected: [[[0, 0.9636, 0.3932, 0.6197, 0.9758, 0.2372], [1.9289, 0.1604, 0.7063, 0.3142, 0.3897, 0.1905], [1.8616, 0.8314, 0.7764, 0.2457, 0.5518, 0.6853], [0.9277, 0.6522, 1.2848, 1.7967, 1.1528, 1.5495]]]