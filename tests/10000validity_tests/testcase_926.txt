import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max93956 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Max93956 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Mul13353 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul13353 = tf.keras.layers.Input(shape=([1, 2]))
in0Con4744 = tf.keras.layers.Input(shape=([1, 2]))

Max93956 = keras.layers.Maximum(name = 'Max93956', )([in0Max93956,in1Max93956])
Res77186 = keras.layers.Reshape((2, 1, 4), name = 'Res77186', )(Max93956)
Cro20262 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro20262', )(Res77186)
Res54670 = keras.layers.Reshape((1, 4), name = 'Res54670', )(Cro20262)
Mul13353 = keras.layers.Multiply(name = 'Mul13353', )([in0Mul13353,in1Mul13353])
Con4744 = keras.layers.Concatenate(axis=2, name = 'Con4744', )([Mul13353,in0Con4744])
Max27715 = keras.layers.Maximum(name = 'Max27715', )([Res54670,Con4744])
model = tf.keras.models.Model(inputs=[in0Max93956,in1Max93956,in0Mul13353,in1Mul13353,in0Con4744], outputs=Max27715)
in0Max93956 = tf.constant([[[[[0.2457, 0.7897], [0.6296, 0.2357]]], [[[0.7626, 0.1394], [0.2025, 0.503]]]]])
in1Max93956 = tf.constant([[[[[0.7161, 0.0467], [0.6976, 0.1885]]], [[[0.4223, 0.3125], [0.1494, 0.1692]]]]])
in0Mul13353 = tf.constant([[[0.0204, 0.9535]]])
in1Mul13353 = tf.constant([[[0.2105, 0.6826]]])
in0Con4744 = tf.constant([[[0.7377, 0.8433]]])
print (np.array2string(model.predict([in0Max93956,in1Max93956,in0Mul13353,in1Mul13353,in0Con4744],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max27715.png')

LMax93956 = maximum_layer([[[[[[0.2457, 0.7897], [0.6296, 0.2357]]], [[[0.7626, 0.1394], [0.2025, 0.503]]]]], [[[[[0.7161, 0.0467], [0.6976, 0.1885]]], [[[0.4223, 0.3125], [0.1494, 0.1692]]]]]], Max93956), 
LRes77186 = reshape_layer(Max93956, [2, 1, 4], Res77186), 
LCro20262 = cropping2D_layer(Res77186, 1, 0, 0, 0, Cro20262), 
LRes54670 = reshape_layer(Cro20262, [1, 4], Res54670), 
LMul13353 = multiply_layer([[[[0.0204, 0.9535]]], [[[0.2105, 0.6826]]]], Mul13353), 
LCon4744 = concatenate_layer([Mul13353,[[[0.7377, 0.8433]]]], 2, Con4744), 
LMax27715 = maximum_layer([Res54670,Con4744], Max27715), 
exec_layers([LMax93956,LRes77186,LCro20262,LRes54670,LMul13353,LCon4744,LMax27715],["Max93956","Res77186","Cro20262","Res54670","Mul13353","Con4744","Max27715"],Max27715,"Max27715")

Actual (Unparsed): [[[0.7626000, 0.6508591, 0.7377000, 0.8433000]]]

Expected (Unparsed): [[[0.7626,0.6508591,0.7377,0.8433]]]

Actual:   [[[0.7626, 0.6509, 0.7377, 0.8433]]]

Expected: [[[0.7626, 0.6509, 0.7377, 0.8433]]]