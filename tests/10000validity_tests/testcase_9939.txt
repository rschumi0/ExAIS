import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con19622 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Sub86268 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub86268 = tf.keras.layers.Input(shape=([2, 2]))
in0Con31154 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con30198 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con49816 = tf.keras.layers.Input(shape=([2, 2, 2]))

Con19622 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con19622', )(in0Con19622)
Res28451 = keras.layers.Reshape((1, 1, 4), name = 'Res28451', )(Con19622)
Zer70453 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer70453', )(Res28451)
Sub86268 = keras.layers.Subtract(name = 'Sub86268', )([in0Sub86268,in1Sub86268])
Res60823 = keras.layers.Reshape((2, 2, 1), name = 'Res60823', )(Sub86268)
Con31154 = keras.layers.Concatenate(axis=3, name = 'Con31154', )([Res60823,in0Con31154])
Con30198 = keras.layers.Conv2D(2, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con30198', )(in0Con30198)
Zer31140 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer31140', )(Con30198)
Max29608 = keras.layers.Maximum(name = 'Max29608', )([Con31154,Zer31140])
Con49816 = keras.layers.Concatenate(axis=3, name = 'Con49816', )([Max29608,in0Con49816])
Sub75961 = keras.layers.Subtract(name = 'Sub75961', )([Zer70453,Con49816])
Con80548 = keras.layers.Conv2D(2, (1, 2),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con80548', )(Sub75961)
model = tf.keras.models.Model(inputs=[in0Con19622,in0Sub86268,in1Sub86268,in0Con31154,in0Con30198,in0Con49816], outputs=Con80548)
w = model.get_layer('Con19622').get_weights() 
w[0] = np.array([[[[[0.3754, 0.4663], [0.9078, 0.2979]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con19622').set_weights(w) 
w = model.get_layer('Con30198').get_weights() 
w[0] = np.array([[[[0.8622, 0.4096]]]])
w[1] = np.array([0, 0])
model.get_layer('Con30198').set_weights(w) 
w = model.get_layer('Con80548').get_weights() 
w[0] = np.array([[[[0.8116, 0.8038], [0.2664, 0.6481], [0.9927, 0.1826], [0.7286, 0.5347]], [[0.7285, 0.4622], [0.417, 0.1705], [0.842, 0.0615], [0.9162, 0.0703]]]])
w[1] = np.array([0, 0])
model.get_layer('Con80548').set_weights(w) 
in0Con19622 = tf.constant([[[[[0.5143, 0.5529], [0.7936, 0.3985]]]]])
in0Sub86268 = tf.constant([[[0.8896, 0.0343], [0.9791, 0.6521]]])
in1Sub86268 = tf.constant([[[0.5432, 0.0171], [0.0458, 0.9419]]])
in0Con31154 = tf.constant([[[[0.2516], [0.815]], [[0.8301], [0.3245]]]])
in0Con30198 = tf.constant([[[[0.387]]]])
in0Con49816 = tf.constant([[[[0.278, 0.2395], [0.068, 0.8937]], [[0.2058, 0.1042], [0.1128, 0.4094]]]])
print (np.array2string(model.predict([in0Con19622,in0Sub86268,in1Sub86268,in0Con31154,in0Con30198,in0Con49816],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con80548.png')

LCon19622 = conv3D_transpose_layer([[[[[0.5143, 0.5529], [0.7936, 0.3985]]]]], 1, 1, 1,[[[[[0.3754, 0.4663], [0.9078, 0.2979]]]]],[0, 0], 1, 1, 1, true, Con19622), 
LRes28451 = reshape_layer(Con19622, [1, 1, 4], Res28451), 
LZer70453 = zero_padding2D_layer(Res28451, 1, 0, 1, 0, Zer70453), 
LSub86268 = subtract_layer([[[0.8896, 0.0343], [0.9791, 0.6521]]], [[[0.5432, 0.0171], [0.0458, 0.9419]]], Sub86268), 
LRes60823 = reshape_layer(Sub86268, [2, 2, 1], Res60823), 
LCon31154 = concatenate_layer([Res60823,[[[[0.2516], [0.815]], [[0.8301], [0.3245]]]]], 3, Con31154), 
LCon30198 = conv2D_layer([[[[0.387]]]], 1, 1,[[[[0.8622, 0.4096]]]],[0, 0], 1, 1, true, 1, 1, Con30198), 
LZer31140 = zero_padding2D_layer(Con30198, 1, 0, 1, 0, Zer31140), 
LMax29608 = maximum_layer([Con31154,Zer31140], Max29608), 
LCon49816 = concatenate_layer([Max29608,[[[[0.278, 0.2395], [0.068, 0.8937]], [[0.2058, 0.1042], [0.1128, 0.4094]]]]], 3, Con49816), 
LSub75961 = subtract_layer(Zer70453,Con49816, Sub75961), 
LCon80548 = conv2D_layer(Sub75961, 1, 2,[[[[0.8116, 0.8038], [0.2664, 0.6481], [0.9927, 0.1826], [0.7286, 0.5347]], [[0.7285, 0.4622], [0.417, 0.1705], [0.842, 0.0615], [0.9162, 0.0703]]]],[0, 0], 1, 1, true, 1, 1, Con80548), 
exec_layers([LCon19622,LRes28451,LZer70453,LSub86268,LRes60823,LCon31154,LCon30198,LZer31140,LMax29608,LCon49816,LSub75961,LCon80548],["Con19622","Res28451","Zer70453","Sub86268","Res60823","Con31154","Con30198","Zer31140","Max29608","Con49816","Sub75961","Con80548"],Con80548,"Con80548")

Actual (Unparsed): [[[[-2.0270839, -0.8342381], [-0.9497289, -1.0323051]], [[-0.3393149, -1.2219102], [0.8582809, 0.5907590]]]]

Expected (Unparsed): [[[[-2.02708392,-0.8342381799999998],[-0.9497289400000002,-1.03230505]],[[-0.33931498287900014,-1.2219102604229999],[0.858280911375,0.590758988242]]]]

Actual:   [[[[-2.027, -0.8342], [-0.9497, -1.0323]], [[-0.3393, -1.2219], [0.8583, 0.5908]]]]

Expected: [[[[-2.027, -0.8342], [-0.9497, -1.0323]], [[-0.3393, -1.2219], [0.8583, 0.5908]]]]