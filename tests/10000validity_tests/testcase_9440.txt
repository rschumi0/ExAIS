import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub99763 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub99763 = tf.keras.layers.Input(shape=([3, 3]))

Sub99763 = keras.layers.Subtract(name = 'Sub99763', )([in0Sub99763,in1Sub99763])
Res57970 = keras.layers.Reshape((3, 3, 1), name = 'Res57970', )(Sub99763)
Up_66783 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_66783', )(Res57970)
Bat77786 = keras.layers.BatchNormalization(axis=1, epsilon=0.6339190344992373,  name = 'Bat77786', )(Up_66783)
Res70895 = keras.layers.Reshape((6, 3), name = 'Res70895', )(Bat77786)
Glo19695 = keras.layers.GlobalMaxPool1D(name = 'Glo19695', )(Res70895)
model = tf.keras.models.Model(inputs=[in0Sub99763,in1Sub99763], outputs=Glo19695)
w = model.get_layer('Bat77786').get_weights() 
w[0] = np.array([0.0502, 0.8417, 0.9136, 0.1054, 0.5285, 0.5601])
w[1] = np.array([0.1298, 0.2114, 0.4556, 0.3461, 0.2425, 0.086])
w[2] = np.array([0.0454, 0.7739, 0.9713, 0.7333, 0.5246, 0.7713])
w[3] = np.array([0.3704, 0.9057, 0.9429, 0.4787, 0.5736, 0.6105])
model.get_layer('Bat77786').set_weights(w) 
in0Sub99763 = tf.constant([[[0.5114, 0.3777, 0.6137], [0.4346, 0.0906, 0.1745], [0.3389, 0.9146, 0.1766]]])
in1Sub99763 = tf.constant([[[0.6868, 0.2018, 0.917], [0.9175, 0.9277, 0.7426], [0.7697, 0.8413, 0.4092]]])
print (np.array2string(model.predict([in0Sub99763,in1Sub99763],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo19695.png')

LSub99763 = subtract_layer([[[0.5114, 0.3777, 0.6137], [0.4346, 0.0906, 0.1745], [0.3389, 0.9146, 0.1766]]], [[[0.6868, 0.2018, 0.917], [0.9175, 0.9277, 0.7426], [0.7697, 0.8413, 0.4092]]], Sub99763), 
LRes57970 = reshape_layer(Sub99763, [3, 3, 1], Res57970), 
LUp_66783 = up_sampling2D_layer(Res57970, 2, 1, Up_66783), 
LBat77786 = batch_normalization_layer(Up_66783, 1, 0.6339190344992373, [0.0502, 0.8417, 0.9136, 0.1054, 0.5285, 0.5601], [0.1298, 0.2114, 0.4556, 0.3461, 0.2425, 0.086], [0.0454, 0.7739, 0.9713, 0.7333, 0.5246, 0.7713], [0.3704, 0.9057, 0.9429, 0.4787, 0.5736, 0.6105], Bat77786), 
LRes70895 = reshape_layer(Bat77786, [6, 3], Res70895), 
LGlo19695 = global_max_pool1D_layer(Res70895, Glo19695), 
exec_layers([LSub99763,LRes57970,LUp_66783,LBat77786,LRes70895,LGlo19695],["Sub99763","Res57970","Up_66783","Bat77786","Res70895","Glo19695"],Glo19695,"Glo19695")

Actual (Unparsed): [[0.2245731, 0.1891802, 0.2160596]]

Expected (Unparsed): [[0.22457311469987024,0.189180232958951,0.21605963778195286]]

Actual:   [[0.2246, 0.1892, 0.2161]]

Expected: [[0.2246, 0.1892, 0.2161]]