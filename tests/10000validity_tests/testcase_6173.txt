import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot4474 = tf.keras.layers.Input(shape=([2]))
in1Dot4474 = tf.keras.layers.Input(shape=([2]))
in0Con62898 = tf.keras.layers.Input(shape=([2, 1]))
in0Add4868 = tf.keras.layers.Input(shape=([2, 2]))
in1Add4868 = tf.keras.layers.Input(shape=([2, 2]))

Dot4474 = keras.layers.Dot(axes=(1, 1), name = 'Dot4474', )([in0Dot4474,in1Dot4474])
Res67177 = keras.layers.Reshape((1, 1), name = 'Res67177', )(Dot4474)
Zer12507 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer12507', )(Res67177)
Con62898 = keras.layers.Concatenate(axis=2, name = 'Con62898', )([Zer12507,in0Con62898])
Add4868 = keras.layers.Add(name = 'Add4868', )([in0Add4868,in1Add4868])
Sof28629 = keras.layers.Softmax(axis=1, name = 'Sof28629', )(Add4868)
Sub15535 = keras.layers.Subtract(name = 'Sub15535', )([Con62898,Sof28629])
Glo98192 = keras.layers.GlobalAveragePooling1D(name = 'Glo98192', )(Sub15535)
model = tf.keras.models.Model(inputs=[in0Dot4474,in1Dot4474,in0Con62898,in0Add4868,in1Add4868], outputs=Glo98192)
in0Dot4474 = tf.constant([[0.444, 0.2963]])
in1Dot4474 = tf.constant([[0.2764, 0.1182]])
in0Con62898 = tf.constant([[[0.7513], [0.8257]]])
in0Add4868 = tf.constant([[[0.4319, 0.5478], [0.8537, 0.0332]]])
in1Add4868 = tf.constant([[[0.9942, 0.2105], [0.7045, 0.9864]]])
print (np.array2string(model.predict([in0Dot4474,in1Dot4474,in0Con62898,in0Add4868,in1Add4868],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo98192.png')

LDot4474 = dot_layer([[0.444, 0.2963]], [[0.2764, 0.1182]], 1, 1, Dot4474), 
LRes67177 = reshape_layer(Dot4474, [1, 1], Res67177), 
LZer12507 = zero_padding1D_layer(Res67177, 1, 0, Zer12507), 
LCon62898 = concatenate_layer([Zer12507,[[[0.7513], [0.8257]]]], 2, Con62898), 
LAdd4868 = add_layer([[[[0.4319, 0.5478], [0.8537, 0.0332]]], [[[0.9942, 0.2105], [0.7045, 0.9864]]]], Add4868), 
LSof28629 = softmax_layer(Add4868, 1, Sof28629), 
LSub15535 = subtract_layer(Con62898,Sof28629, Sub15535), 
LGlo98192 = global_average_pooling1D_layer(Sub15535, Glo98192), 
exec_layers([LDot4474,LRes67177,LZer12507,LCon62898,LAdd4868,LSof28629,LSub15535,LGlo98192],["Dot4474","Res67177","Zer12507","Con62898","Add4868","Sof28629","Sub15535","Glo98192"],Glo98192,"Glo98192")

Actual (Unparsed): [[-0.4211279, 0.2885000]]

Expected (Unparsed): [[-0.42112787000000007,0.2885]]

Actual:   [[-0.4211, 0.2885]]

Expected: [[-0.4211, 0.2885]]