import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max7508 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Max10187 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max10187 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con72259 = tf.keras.layers.Input(shape=([1]))

Max7508 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max7508', )(in0Max7508)
Res39599 = keras.layers.Reshape((2, 1), name = 'Res39599', )(Max7508)
Fla95954 = keras.layers.Flatten(name = 'Fla95954', )(Res39599)
Max10187 = keras.layers.Maximum(name = 'Max10187', )([in0Max10187,in1Max10187])
Glo576 = keras.layers.GlobalAveragePooling3D(name = 'Glo576', )(Max10187)
Con72259 = keras.layers.Concatenate(axis=1, name = 'Con72259', )([Glo576,in0Con72259])
Max48170 = keras.layers.Maximum(name = 'Max48170', )([Fla95954,Con72259])
Res8692 = keras.layers.Reshape((2, 1), name = 'Res8692', )(Max48170)
Res22655 = keras.layers.Reshape((2, 1, 1), name = 'Res22655', )(Res8692)
Res4528 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res4528', )(Res22655)
Up_94987 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_94987', )(Res4528)
model = tf.keras.models.Model(inputs=[in0Max7508,in0Max10187,in1Max10187,in0Con72259], outputs=Up_94987)
in0Max7508 = tf.constant([[[[1.3158]], [[1.2238]]]])
in0Max10187 = tf.constant([[[[[0.4914]]]]])
in1Max10187 = tf.constant([[[[[0.703]]]]])
in0Con72259 = tf.constant([[0.6241]])
print (np.array2string(model.predict([in0Max7508,in0Max10187,in1Max10187,in0Con72259],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_94987.png')

LMax7508 = max_pool2D_layer([[[[1.3158]], [[1.2238]]]], 1, 1, Max7508), 
LRes39599 = reshape_layer(Max7508, [2, 1], Res39599), 
LFla95954 = flatten_layer(Res39599, Fla95954), 
LMax10187 = maximum_layer([[[[[[0.4914]]]]], [[[[[0.703]]]]]], Max10187), 
LGlo576 = global_average_pooling3D_layer(Max10187, Glo576), 
LCon72259 = concatenate_layer([Glo576,[[0.6241]]], 1, Con72259), 
LMax48170 = maximum_layer([Fla95954,Con72259], Max48170), 
LRes8692 = reshape_layer(Max48170, [2, 1], Res8692), 
LRes22655 = reshape_layer(Res8692, [2, 1, 1], Res22655), 
LRes4528 = reshape_layer(Res22655, [2, 1, 1, 1], Res4528), 
LUp_94987 = up_sampling3D_layer(Res4528, 2, 2, 1, Up_94987), 
exec_layers([LMax7508,LRes39599,LFla95954,LMax10187,LGlo576,LCon72259,LMax48170,LRes8692,LRes22655,LRes4528,LUp_94987],["Max7508","Res39599","Fla95954","Max10187","Glo576","Con72259","Max48170","Res8692","Res22655","Res4528","Up_94987"],Up_94987,"Up_94987")

Actual (Unparsed): [[[[[1.3158000]], [[1.3158000]]], [[[1.3158000]], [[1.3158000]]], [[[1.2237999]], [[1.2237999]]], [[[1.2237999]], [[1.2237999]]]]]

Expected (Unparsed): [[[[[1.3158]],[[1.3158]]],[[[1.3158]],[[1.3158]]],[[[1.2238]],[[1.2238]]],[[[1.2238]],[[1.2238]]]]]

Actual:   [[[[[1.3158]], [[1.3158]]], [[[1.3158]], [[1.3158]]], [[[1.2238]], [[1.2238]]], [[[1.2238]], [[1.2238]]]]]

Expected: [[[[[1.3158]], [[1.3158]]], [[[1.3158]], [[1.3158]]], [[[1.2238]], [[1.2238]]], [[[1.2238]], [[1.2238]]]]]