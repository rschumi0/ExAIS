import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max14542 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Max14542 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Ave13371 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave13371 = tf.keras.layers.Input(shape=([2, 2, 2]))

Max14542 = keras.layers.Maximum(name = 'Max14542', )([in0Max14542,in1Max14542])
Mas35673 = keras.layers.Masking(mask_value=2, name = 'Mas35673', )(Max14542)
Res9348 = keras.layers.Reshape((2, 1, 2), name = 'Res9348', )(Mas35673)
Zer16617 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer16617', )(Res9348)
Ave13371 = keras.layers.Average(name = 'Ave13371', )([in0Ave13371,in1Ave13371])
Min38003 = keras.layers.Minimum(name = 'Min38003', )([Zer16617,Ave13371])
Fla92558 = keras.layers.Flatten(name = 'Fla92558', )(Min38003)
model = tf.keras.models.Model(inputs=[in0Max14542,in1Max14542,in0Ave13371,in1Ave13371], outputs=Fla92558)
in0Max14542 = tf.constant([[[[[0.4778, 0.9584]]], [[[0.4281, 0.5732]]]]])
in1Max14542 = tf.constant([[[[[0.5795, 0.4801]]], [[[0.6191, 0.6735]]]]])
in0Ave13371 = tf.constant([[[[0.934, 0.7828], [0.176, 0.5011]], [[0.9719, 0.9554], [0.5426, 0.2178]]]])
in1Ave13371 = tf.constant([[[[0.9519, 0.8881], [0.8123, 0.7762]], [[0.9996, 0.3557], [0.7194, 0.665]]]])
print (np.array2string(model.predict([in0Max14542,in1Max14542,in0Ave13371,in1Ave13371],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla92558.png')

LMax14542 = maximum_layer([[[[[[0.4778, 0.9584]]], [[[0.4281, 0.5732]]]]], [[[[[0.5795, 0.4801]]], [[[0.6191, 0.6735]]]]]], Max14542), 
LMas35673 = masking_layer(Max14542, 2, Mas35673), 
LRes9348 = reshape_layer(Mas35673, [2, 1, 2], Res9348), 
LZer16617 = zero_padding2D_layer(Res9348, 0, 0, 1, 0, Zer16617), 
LAve13371 = average_layer([[[[[0.934, 0.7828], [0.176, 0.5011]], [[0.9719, 0.9554], [0.5426, 0.2178]]]], [[[[0.9519, 0.8881], [0.8123, 0.7762]], [[0.9996, 0.3557], [0.7194, 0.665]]]]], Ave13371), 
LMin38003 = minimum_layer([Zer16617,Ave13371], Min38003), 
LFla92558 = flatten_layer(Min38003, Fla92558), 
exec_layers([LMax14542,LMas35673,LRes9348,LZer16617,LAve13371,LMin38003,LFla92558],["Max14542","Mas35673","Res9348","Zer16617","Ave13371","Min38003","Fla92558"],Fla92558,"Fla92558")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.4941500, 0.6386500, 0.0000000, 0.0000000, 0.6191000, 0.4414000]]

Expected (Unparsed): [[0,0,0.49415,0.6386499999999999,0,0,0.6191,0.4414]]

Actual:   [[0, 0, 0.4942, 0.6387, 0, 0, 0.6191, 0.4414]]

Expected: [[0, 0, 0.4942, 0.6387, 0, 0, 0.6191, 0.4414]]