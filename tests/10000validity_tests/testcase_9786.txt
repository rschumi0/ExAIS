import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max39693 = tf.keras.layers.Input(shape=([1, 2]))
in0Add26972 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add26972 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Max39693 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max39693', )(in0Max39693)
Res70511 = keras.layers.Reshape((1, 2, 1), name = 'Res70511', )(Max39693)
Add26972 = keras.layers.Add(name = 'Add26972', )([in0Add26972,in1Add26972])
Res37266 = keras.layers.Reshape((1, 2, 1), name = 'Res37266', )(Add26972)
Mul96074 = keras.layers.Multiply(name = 'Mul96074', )([Res70511,Res37266])
Res55474 = keras.layers.Reshape((1, 2), name = 'Res55474', )(Mul96074)
Per16621 = keras.layers.Permute((2,1), name = 'Per16621',)(Res55474)
model = tf.keras.models.Model(inputs=[in0Max39693,in0Add26972,in1Add26972], outputs=Per16621)
in0Max39693 = tf.constant([[[1.1715, 1.9296]]])
in0Add26972 = tf.constant([[[[[0.0287], [0.8069]]]]])
in1Add26972 = tf.constant([[[[[0.2717], [0.7599]]]]])
print (np.array2string(model.predict([in0Max39693,in0Add26972,in1Add26972],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per16621.png')

LMax39693 = max_pool1D_layer([[[1.1715, 1.9296]]], 1, Max39693), 
LRes70511 = reshape_layer(Max39693, [1, 2, 1], Res70511), 
LAdd26972 = add_layer([[[[[[0.0287], [0.8069]]]]], [[[[[0.2717], [0.7599]]]]]], Add26972), 
LRes37266 = reshape_layer(Add26972, [1, 2, 1], Res37266), 
LMul96074 = multiply_layer([Res70511,Res37266], Mul96074), 
LRes55474 = reshape_layer(Mul96074, [1, 2], Res55474), 
LPer16621 = permute_layer(Res55474, 2,1, Per16621), 
exec_layers([LMax39693,LRes70511,LAdd26972,LRes37266,LMul96074,LRes55474,LPer16621],["Max39693","Res70511","Add26972","Res37266","Mul96074","Res55474","Per16621"],Per16621,"Per16621")

Actual (Unparsed): [[[0.3519186], [3.0232973]]]

Expected (Unparsed): [[[0.35191859999999997],[3.02329728]]]

Actual:   [[[0.352], [3.0233]]]

Expected: [[[0.352], [3.0233]]]