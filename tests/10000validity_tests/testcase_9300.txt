import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add22151 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add22151 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Add11373 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add11373 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con40705 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul48010 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul48010 = tf.keras.layers.Input(shape=([2, 2]))
in0Con5032 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub51823 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub51823 = tf.keras.layers.Input(shape=([2, 3]))
in0Con88728 = tf.keras.layers.Input(shape=([2, 1]))

Add22151 = keras.layers.Add(name = 'Add22151', )([in0Add22151,in1Add22151])
Res31880 = keras.layers.Reshape((2, 2, 2), name = 'Res31880', )(Add22151)
Res37999 = keras.layers.Reshape((2, 4), name = 'Res37999', )(Res31880)
Add11373 = keras.layers.Add(name = 'Add11373', )([in0Add11373,in1Add11373])
Glo98583 = keras.layers.GlobalAveragePooling2D(name = 'Glo98583', )(Add11373)
Res77002 = keras.layers.Reshape((1, 1), name = 'Res77002', )(Glo98583)
Zer97853 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer97853', )(Res77002)
Con40705 = keras.layers.Concatenate(axis=2, name = 'Con40705', )([Zer97853,in0Con40705])
Mul48010 = keras.layers.Multiply(name = 'Mul48010', )([in0Mul48010,in1Mul48010])
Ave70787 = keras.layers.Average(name = 'Ave70787', )([Con40705,Mul48010])
Con5032 = keras.layers.Concatenate(axis=2, name = 'Con5032', )([Ave70787,in0Con5032])
Mul71892 = keras.layers.Multiply(name = 'Mul71892', )([Res37999,Con5032])
Sub51823 = keras.layers.Subtract(name = 'Sub51823', )([in0Sub51823,in1Sub51823])
Con88728 = keras.layers.Concatenate(axis=2, name = 'Con88728', )([Sub51823,in0Con88728])
Add92259 = keras.layers.Add(name = 'Add92259', )([Mul71892,Con88728])
model = tf.keras.models.Model(inputs=[in0Add22151,in1Add22151,in0Add11373,in1Add11373,in0Con40705,in0Mul48010,in1Mul48010,in0Con5032,in0Sub51823,in1Sub51823,in0Con88728], outputs=Add92259)
in0Add22151 = tf.constant([[[[[0.205], [0.3675]], [[0.27], [0.3107]]], [[[0.3299], [0.2815]], [[0.5029], [0.8651]]]]])
in1Add22151 = tf.constant([[[[[0.4049], [0.9817]], [[0.8607], [0.0818]]], [[[0.8977], [0.6098]], [[0.9773], [0.8712]]]]])
in0Add11373 = tf.constant([[[[0.8199]]]])
in1Add11373 = tf.constant([[[[0.7732]]]])
in0Con40705 = tf.constant([[[0.4196], [0.7542]]])
in0Mul48010 = tf.constant([[[0.731, 0.6733], [0.1752, 0.9605]]])
in1Mul48010 = tf.constant([[[0.7667, 0.9603], [0.5343, 0.2693]]])
in0Con5032 = tf.constant([[[0.4622, 0.3534], [0.603, 0.9754]]])
in0Sub51823 = tf.constant([[[0.5878, 0.9205, 0.3812], [0.6104, 0.9833, 0.0968]]])
in1Sub51823 = tf.constant([[[0.8769, 0.3402, 0.1905], [0.8, 0.2025, 0.8329]]])
in0Con88728 = tf.constant([[[0.2621], [0.9751]]])
print (np.array2string(model.predict([in0Add22151,in1Add22151,in0Add11373,in1Add11373,in0Con40705,in0Mul48010,in1Mul48010,in0Con5032,in0Sub51823,in1Sub51823,in0Con88728],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add92259.png')

LAdd22151 = add_layer([[[[[[0.205], [0.3675]], [[0.27], [0.3107]]], [[[0.3299], [0.2815]], [[0.5029], [0.8651]]]]], [[[[[0.4049], [0.9817]], [[0.8607], [0.0818]]], [[[0.8977], [0.6098]], [[0.9773], [0.8712]]]]]], Add22151), 
LRes31880 = reshape_layer(Add22151, [2, 2, 2], Res31880), 
LRes37999 = reshape_layer(Res31880, [2, 4], Res37999), 
LAdd11373 = add_layer([[[[[0.8199]]]], [[[[0.7732]]]]], Add11373), 
LGlo98583 = global_average_pooling2D_layer(Add11373, Glo98583), 
LRes77002 = reshape_layer(Glo98583, [1, 1], Res77002), 
LZer97853 = zero_padding1D_layer(Res77002, 1, 0, Zer97853), 
LCon40705 = concatenate_layer([Zer97853,[[[0.4196], [0.7542]]]], 2, Con40705), 
LMul48010 = multiply_layer([[[[0.731, 0.6733], [0.1752, 0.9605]]], [[[0.7667, 0.9603], [0.5343, 0.2693]]]], Mul48010), 
LAve70787 = average_layer([Con40705,Mul48010], Ave70787), 
LCon5032 = concatenate_layer([Ave70787,[[[0.4622, 0.3534], [0.603, 0.9754]]]], 2, Con5032), 
LMul71892 = multiply_layer([Res37999,Con5032], Mul71892), 
LSub51823 = subtract_layer([[[0.5878, 0.9205, 0.3812], [0.6104, 0.9833, 0.0968]]], [[[0.8769, 0.3402, 0.1905], [0.8, 0.2025, 0.8329]]], Sub51823), 
LCon88728 = concatenate_layer([Sub51823,[[[0.2621], [0.9751]]]], 2, Con88728), 
LAdd92259 = add_layer([Mul71892,Con88728], Add92259), 
exec_layers([LAdd22151,LRes31880,LRes37999,LAdd11373,LGlo98583,LRes77002,LZer97853,LCon40705,LMul48010,LAve70787,LCon5032,LMul71892,LSub51823,LCon88728,LAdd92259],["Add22151","Res31880","Res37999","Add11373","Glo98583","Res77002","Zer97853","Con40705","Mul48010","Ave70787","Con5032","Mul71892","Sub51823","Con88728","Add92259"],Add92259,"Add92259")

Actual (Unparsed): [[[-0.1181884, 1.2995383, 0.7133095, 0.4008095], [0.8457022, 1.2321822, 0.1564606, 2.6686870]]]

Expected (Unparsed): [[[-0.11818842438500002,1.2995382752540001,0.71330954,0.4008095],[0.8457022051680001,1.2321822399725,0.15646059999999995,2.66868702]]]

Actual:   [[[-0.1181, 1.2996, 0.7134, 0.4009], [0.8458, 1.2322, 0.1565, 2.6687]]]

Expected: [[[-0.1181, 1.2996, 0.7134, 0.4009], [0.8458, 1.2322, 0.1565, 2.6687]]]