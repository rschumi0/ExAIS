import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep20265 = tf.keras.layers.Input(shape=([2, 1]))
in0Con21932 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con3500 = tf.keras.layers.Input(shape=([1, 1, 2]))

Sep20265 = keras.layers.SeparableConv1D(3, (2),strides=(1), padding='valid', name = 'Sep20265', )(in0Sep20265)
Res97885 = keras.layers.Reshape((1, 3, 1), name = 'Res97885', )(Sep20265)
Ave5762 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave5762', )(Res97885)
Lay2733 = keras.layers.LayerNormalization(axis=3, epsilon=2.99620283943441, name = 'Lay2733', )(Ave5762)
Con21932 = keras.layers.Concatenate(axis=3, name = 'Con21932', )([Lay2733,in0Con21932])
Con3500 = keras.layers.Conv2D(3, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con3500', )(in0Con3500)
Bat4085 = keras.layers.BatchNormalization(axis=3, epsilon=0.4368818208618265,  name = 'Bat4085', )(Con3500)
Sub35534 = keras.layers.Subtract(name = 'Sub35534', )([Con21932,Bat4085])
model = tf.keras.models.Model(inputs=[in0Sep20265,in0Con21932,in0Con3500], outputs=Sub35534)
w = model.get_layer('Sep20265').get_weights() 
w[0] = np.array([[[0.2262]], [[0.913]]])
w[1] = np.array([[[0.6794, 0.8187, 0.7152]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep20265').set_weights(w) 
w = model.get_layer('Con3500').get_weights() 
w[0] = np.array([[[[0.3763, 0.6516, 0.3307], [0.6427, 0.7963, 0.0047]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con3500').set_weights(w) 
w = model.get_layer('Bat4085').get_weights() 
w[0] = np.array([0.8864, 0.507, 0.3602])
w[1] = np.array([0.0092, 0.8625, 0.8546])
w[2] = np.array([0.1577, 0.5539, 0.487])
w[3] = np.array([0.7383, 0.7085, 0.3562])
model.get_layer('Bat4085').set_weights(w) 
in0Sep20265 = tf.constant([[[0.0859], [0.385]]])
in0Con21932 = tf.constant([[[[0.913, 0.0145]]]])
in0Con3500 = tf.constant([[[[0.2153, 0.6434]]]])
print (np.array2string(model.predict([in0Sep20265,in0Con21932,in0Con3500],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub35534.png')

LSep20265 = separable_conv1D_layer([[[0.0859], [0.385]]], 2,[[[[0.2262]], [[0.913]]],[[[0.6794, 0.8187, 0.7152]]]],[0, 0, 0], 1, false, Sep20265), 
LRes97885 = reshape_layer(Sep20265, [1, 3, 1], Res97885), 
LAve5762 = average_pooling2D_layer(Res97885, 1, 2, Ave5762), 
LLay2733 = layer_normalization_layer(Ave5762, 3, 2.99620283943441, Lay2733), 
LCon21932 = concatenate_layer([Lay2733,[[[[0.913, 0.0145]]]]], 3, Con21932), 
LCon3500 = conv2D_layer([[[[0.2153, 0.6434]]]], 1, 1,[[[[0.3763, 0.6516, 0.3307], [0.6427, 0.7963, 0.0047]]]],[0, 0, 0], 1, 1, true, 1, 1, Con3500), 
LBat4085 = batch_normalization_layer(Con3500, 3, 0.4368818208618265, [0.8864, 0.507, 0.3602], [0.0092, 0.8625, 0.8546], [0.1577, 0.5539, 0.487], [0.7383, 0.7085, 0.3562], Bat4085), 
LSub35534 = subtract_layer(Con21932,Bat4085, Sub35534), 
exec_layers([LSep20265,LRes97885,LAve5762,LLay2733,LCon21932,LCon3500,LBat4085,LSub35534],["Sep20265","Res97885","Ave5762","Lay2733","Con21932","Con3500","Bat4085","Sub35534"],Sub35534,"Sub35534")

Actual (Unparsed): [[[[-0.2846157, 0.0037289, -0.6731450]]]]

Expected (Unparsed): [[[[-0.28461571383779594,0.00372895055241107,-0.6731449825406337]]]]

Actual:   [[[[-0.2846, 0.0038, -0.6731]]]]

Expected: [[[[-0.2846, 0.0038, -0.6731]]]]