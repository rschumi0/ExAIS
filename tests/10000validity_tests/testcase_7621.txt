import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_96470 = tf.keras.layers.Input(shape=([1, 3, 3, 1]))
in0Min61510 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Min61510 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Up_96470 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_96470', )(in0Up_96470)
Min61510 = keras.layers.Minimum(name = 'Min61510', )([in0Min61510,in1Min61510])
Zer18479 = keras.layers.ZeroPadding3D(padding=((1, 0), (4, 0), (4, 0)), name = 'Zer18479', )(Min61510)
Ave68986 = keras.layers.Average(name = 'Ave68986', )([Up_96470,Zer18479])
Bat76482 = keras.layers.BatchNormalization(axis=2, epsilon=0.9120782816264816,  name = 'Bat76482', )(Ave68986)
Res74008 = keras.layers.Reshape((2, 6, 6), name = 'Res74008', )(Bat76482)
Res53795 = keras.layers.Reshape((2, 36), name = 'Res53795', )(Res74008)
Zer27150 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer27150', )(Res53795)
model = tf.keras.models.Model(inputs=[in0Up_96470,in0Min61510,in1Min61510], outputs=Zer27150)
w = model.get_layer('Bat76482').get_weights() 
w[0] = np.array([0.8105, 0.8419, 0.3231, 0.4573, 0.4784, 0.1955])
w[1] = np.array([0.1761, 0.0989, 0.0299, 0.5669, 0.9093, 0.275])
w[2] = np.array([0.5495, 0.3669, 0.2653, 0.3238, 0.236, 0.5063])
w[3] = np.array([0.272, 0.0987, 0.3902, 0.9671, 0.0947, 0.0211])
model.get_layer('Bat76482').set_weights(w) 
in0Up_96470 = tf.constant([[[[[1.8396], [1.0861], [1.2648]], [[1.3688], [1.0897], [1.6451]], [[1.1266], [1.3804], [1.4621]]]]])
in0Min61510 = tf.constant([[[[[0.8713], [0.2107]], [[0.1212], [0.6831]]]]])
in1Min61510 = tf.constant([[[[[0.2768], [0.3274]], [[0.497], [0.7386]]]]])
print (np.array2string(model.predict([in0Up_96470,in0Min61510,in1Min61510],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer27150.png')

LUp_96470 = up_sampling3D_layer([[[[[1.8396], [1.0861], [1.2648]], [[1.3688], [1.0897], [1.6451]], [[1.1266], [1.3804], [1.4621]]]]], 2, 2, 2, Up_96470), 
LMin61510 = minimum_layer([[[[[[0.8713], [0.2107]], [[0.1212], [0.6831]]]]], [[[[[0.2768], [0.3274]], [[0.497], [0.7386]]]]]], Min61510), 
LZer18479 = zero_padding3D_layer(Min61510, 1, 0, 4, 0, 4, 0, Zer18479), 
LAve68986 = average_layer([Up_96470,Zer18479], Ave68986), 
LBat76482 = batch_normalization_layer(Ave68986, 2, 0.9120782816264816, [0.8105, 0.8419, 0.3231, 0.4573, 0.4784, 0.1955], [0.1761, 0.0989, 0.0299, 0.5669, 0.9093, 0.275], [0.5495, 0.3669, 0.2653, 0.3238, 0.236, 0.5063], [0.272, 0.0987, 0.3902, 0.9671, 0.0947, 0.0211], Bat76482), 
LRes74008 = reshape_layer(Bat76482, [2, 6, 6], Res74008), 
LRes53795 = reshape_layer(Res74008, [2, 36], Res53795), 
LZer27150 = zero_padding1D_layer(Res53795, 1, 1, Zer27150), 
exec_layers([LUp_96470,LMin61510,LZer18479,LAve68986,LBat76482,LRes74008,LRes53795,LZer27150],["Up_96470","Min61510","Zer18479","Ave68986","Bat76482","Res74008","Res53795","Zer27150"],Zer27150,"Zer27150")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.4519141, 0.4519141, 0.1712958, 0.1712958, 0.2378472, 0.2378472, 0.5618980, 0.5618980, 0.2464079, 0.2464079, 0.3212295, 0.3212295, 0.1485596, 0.1485596, 0.1090488, 0.1090488, 0.1876739, 0.1876739, 0.6871937, 0.6871937, 0.6406408, 0.6406408, 0.7332796, 0.7332796, 1.0653523, 1.0653523, 1.1258566, 1.1258566, 1.1453333, 1.1453333, 0.2865356, 0.2865356, 0.3122174, 0.3122174, 0.3204846, 0.3204846], [0.4519141, 0.4519141, 0.1712958, 0.1712958, 0.2378472, 0.2378472, 0.5618980, 0.5618980, 0.2464079, 0.2464079, 0.3212295, 0.3212295, 0.1485596, 0.1485596, 0.1090488, 0.1090488, 0.1876739, 0.1876739, 0.6871937, 0.6871937, 0.6406408, 0.6406408, 0.7332796, 0.7332796, 1.0653523, 1.0653523, 1.1258566, 1.1258566, 1.2113206, 1.1955628, 0.2865356, 0.2865356, 0.3122174, 0.3122174, 0.3327487, 0.3896070], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0.45191413773149247,0.45191413773149247,0.17129578399036427,0.17129578399036427,0.23784721041841947,0.23784721041841947,0.5618980357864976,0.5618980357864976,0.24640787484860116,0.24640787484860116,0.32122949629465564,0.32122949629465564,0.14855955627063533,0.14855955627063533,0.10904884026594154,0.10904884026594154,0.18767389103271664,0.18767389103271664,0.6871937133999175,0.6871937133999175,0.6406407802192229,0.6406407802192229,0.7332796160793369,0.7332796160793369,1.0653523298851653,1.0653523298851653,1.125856578777397,1.125856578777397,1.1453333208360863,1.1453333208360863,0.286535576564972,0.286535576564972,0.31221741281225185,0.31221741281225185,0.3204845760171484,0.3204845760171484],[0.45191413773149247,0.45191413773149247,0.17129578399036427,0.17129578399036427,0.23784721041841947,0.23784721041841947,0.5618980357864976,0.5618980357864976,0.24640787484860116,0.24640787484860116,0.32122949629465564,0.32122949629465564,0.14855955627063533,0.14855955627063533,0.10904884026594154,0.10904884026594154,0.18767389103271664,0.18767389103271664,0.6871937133999175,0.6871937133999175,0.6406407802192229,0.6406407802192229,0.7332796160793369,0.7332796160793369,1.0653523298851653,1.0653523298851653,1.125856578777397,1.125856578777397,1.2113206182882919,1.1955628135137588,0.286535576564972,0.286535576564972,0.31221741281225185,0.31221741281225185,0.33274871531253974,0.38960696506567805],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.452, 0.452, 0.1713, 0.1713, 0.2379, 0.2379, 0.5619, 0.5619, 0.2465, 0.2465, 0.3213, 0.3213, 0.1486, 0.1486, 0.1091, 0.1091, 0.1877, 0.1877, 0.6872, 0.6872, 0.6407, 0.6407, 0.7333, 0.7333, 1.0654, 1.0654, 1.1259, 1.1259, 1.1454, 1.1454, 0.2866, 0.2866, 0.3123, 0.3123, 0.3205, 0.3205], [0.452, 0.452, 0.1713, 0.1713, 0.2379, 0.2379, 0.5619, 0.5619, 0.2465, 0.2465, 0.3213, 0.3213, 0.1486, 0.1486, 0.1091, 0.1091, 0.1877, 0.1877, 0.6872, 0.6872, 0.6407, 0.6407, 0.7333, 0.7333, 1.0654, 1.0654, 1.1259, 1.1259, 1.2114, 1.1956, 0.2866, 0.2866, 0.3123, 0.3123, 0.3328, 0.3897], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.452, 0.452, 0.1713, 0.1713, 0.2379, 0.2379, 0.5619, 0.5619, 0.2465, 0.2465, 0.3213, 0.3213, 0.1486, 0.1486, 0.1091, 0.1091, 0.1877, 0.1877, 0.6872, 0.6872, 0.6407, 0.6407, 0.7333, 0.7333, 1.0654, 1.0654, 1.1259, 1.1259, 1.1454, 1.1454, 0.2866, 0.2866, 0.3123, 0.3123, 0.3205, 0.3205], [0.452, 0.452, 0.1713, 0.1713, 0.2379, 0.2379, 0.5619, 0.5619, 0.2465, 0.2465, 0.3213, 0.3213, 0.1486, 0.1486, 0.1091, 0.1091, 0.1877, 0.1877, 0.6872, 0.6872, 0.6407, 0.6407, 0.7333, 0.7333, 1.0654, 1.0654, 1.1259, 1.1259, 1.2114, 1.1956, 0.2866, 0.2866, 0.3123, 0.3123, 0.3328, 0.3897], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]