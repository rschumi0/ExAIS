import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro30926 = tf.keras.layers.Input(shape=([4, 1, 4]))
in0Ave77660 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave77660 = tf.keras.layers.Input(shape=([1, 1]))
in0Con21828 = tf.keras.layers.Input(shape=([3, 3]))

Cro30926 = keras.layers.Cropping2D(cropping=((0, 1), (0, 0)), name = 'Cro30926', )(in0Cro30926)
Res8624 = keras.layers.Reshape((3, 4), name = 'Res8624', )(Cro30926)
Ave77660 = keras.layers.Average(name = 'Ave77660', )([in0Ave77660,in1Ave77660])
Up_42422 = keras.layers.UpSampling1D(size=(2), name = 'Up_42422', )(Ave77660)
Zer9360 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer9360', )(Up_42422)
Con21828 = keras.layers.Concatenate(axis=2, name = 'Con21828', )([Zer9360,in0Con21828])
Add54717 = keras.layers.Add(name = 'Add54717', )([Res8624,Con21828])
model = tf.keras.models.Model(inputs=[in0Cro30926,in0Ave77660,in1Ave77660,in0Con21828], outputs=Add54717)
in0Cro30926 = tf.constant([[[[1.8524, 1.8233, 1.6197, 1.7095]], [[1.3035, 1.8962, 1.1169, 1.535]], [[1.083, 1.7119, 1.9596, 1.9082]], [[1.0076, 1.6227, 1.3518, 1.8412]]]])
in0Ave77660 = tf.constant([[[0.5607]]])
in1Ave77660 = tf.constant([[[0.857]]])
in0Con21828 = tf.constant([[[0.5282, 0.278, 0.9208], [0.9971, 0.6428, 0.9263], [0.6676, 0.1768, 0.5801]]])
print (np.array2string(model.predict([in0Cro30926,in0Ave77660,in1Ave77660,in0Con21828],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add54717.png')

LCro30926 = cropping2D_layer([[[[1.8524, 1.8233, 1.6197, 1.7095]], [[1.3035, 1.8962, 1.1169, 1.535]], [[1.083, 1.7119, 1.9596, 1.9082]], [[1.0076, 1.6227, 1.3518, 1.8412]]]], 0, 1, 0, 0, Cro30926), 
LRes8624 = reshape_layer(Cro30926, [3, 4], Res8624), 
LAve77660 = average_layer([[[[0.5607]]], [[[0.857]]]], Ave77660), 
LUp_42422 = up_sampling1D_layer(Ave77660, 2, Up_42422), 
LZer9360 = zero_padding1D_layer(Up_42422, 1, 0, Zer9360), 
LCon21828 = concatenate_layer([Zer9360,[[[0.5282, 0.278, 0.9208], [0.9971, 0.6428, 0.9263], [0.6676, 0.1768, 0.5801]]]], 2, Con21828), 
LAdd54717 = add_layer([Res8624,Con21828], Add54717), 
exec_layers([LCro30926,LRes8624,LAve77660,LUp_42422,LZer9360,LCon21828,LAdd54717],["Cro30926","Res8624","Ave77660","Up_42422","Zer9360","Con21828","Add54717"],Add54717,"Add54717")

Actual (Unparsed): [[[1.8523999, 2.3515000, 1.8977000, 2.6302999], [2.0123501, 2.8932999, 1.7596999, 2.4613000], [1.7918499, 2.3795000, 2.1364000, 2.4883000]]]

Expected (Unparsed): [[[1.8524,2.3514999999999997,1.8977,2.6303],[2.01235,2.8933,1.7597,2.4613],[1.79185,2.3795,2.1364,2.4882999999999997]]]

Actual:   [[[1.8524, 2.3515, 1.8977, 2.6303], [2.0124, 2.8933, 1.7597, 2.4613], [1.7919, 2.3795, 2.1364, 2.4883]]]

Expected: [[[1.8524, 2.3515, 1.8977, 2.6303], [2.0124, 2.8933, 1.7597, 2.4613], [1.7919, 2.3795, 2.1364, 2.4883]]]