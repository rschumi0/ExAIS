import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lay69652 = tf.keras.layers.Input(shape=([1, 3]))
in0Dot44 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot44 = tf.keras.layers.Input(shape=([2, 3]))

Lay69652 = keras.layers.LayerNormalization(axis=2, epsilon=1.5745459481894233, name = 'Lay69652', )(in0Lay69652)
Ave98524 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave98524', )(Lay69652)
Res11238 = keras.layers.Reshape((1, 3, 1), name = 'Res11238', )(Ave98524)
Zer66771 = keras.layers.ZeroPadding2D(padding=((4, 0), (0, 0)), name = 'Zer66771', )(Res11238)
Dot44 = keras.layers.Dot(axes=(1, 1), name = 'Dot44', )([in0Dot44,in1Dot44])
Glo65923 = keras.layers.GlobalAveragePooling1D(name = 'Glo65923', )(Dot44)
Res63283 = keras.layers.Reshape((3, 1), name = 'Res63283', )(Glo65923)
Res14627 = keras.layers.Reshape((3, 1, 1), name = 'Res14627', )(Res63283)
Zer9572 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer9572', )(Res14627)
Sub77814 = keras.layers.Subtract(name = 'Sub77814', )([Zer66771,Zer9572])
model = tf.keras.models.Model(inputs=[in0Lay69652,in0Dot44,in1Dot44], outputs=Sub77814)
in0Lay69652 = tf.constant([[[1.056, 1.3577, 1.2894]]])
in0Dot44 = tf.constant([[[0.5771, 0.7858, 0.9112], [0.031, 0.0497, 0.1007]]])
in1Dot44 = tf.constant([[[0.0464, 0.3618, 0.2189], [0.7308, 0.703, 0.9866]]])
print (np.array2string(model.predict([in0Lay69652,in0Dot44,in1Dot44],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub77814.png')

LLay69652 = layer_normalization_layer([[[1.056, 1.3577, 1.2894]]], 2, 1.5745459481894233, Lay69652), 
LAve98524 = average_pooling1D_layer(Lay69652, 1, 1, true, Ave98524), 
LRes11238 = reshape_layer(Ave98524, [1, 3, 1], Res11238), 
LZer66771 = zero_padding2D_layer(Res11238, 4, 0, 0, 0, Zer66771), 
LDot44 = dot_layer([[[0.5771, 0.7858, 0.9112], [0.031, 0.0497, 0.1007]]], [[[0.0464, 0.3618, 0.2189], [0.7308, 0.703, 0.9866]]], 1, 1, Dot44), 
LGlo65923 = global_average_pooling1D_layer(Dot44, Glo65923), 
LRes63283 = reshape_layer(Glo65923, [3, 1], Res63283), 
LRes14627 = reshape_layer(Res63283, [3, 1, 1], Res14627), 
LZer9572 = zero_padding2D_layer(Res14627, 1, 1, 1, 1, Zer9572), 
LSub77814 = subtract_layer(Zer66771,Zer9572, Sub77814), 
exec_layers([LLay69652,LAve98524,LRes11238,LZer66771,LDot44,LGlo65923,LRes63283,LRes14627,LZer9572,LSub77814],["Lay69652","Ave98524","Res11238","Zer66771","Dot44","Glo65923","Res63283","Res14627","Zer9572","Sub77814"],Sub77814,"Sub77814")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [-0.0793618], [0.0000000]], [[0.0000000], [-0.3167645], [0.0000000]], [[0.0000000], [-0.2255899], [0.0000000]], [[-0.1413992], [0.0977719], [0.0436274]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[-0.07936178666666666],[0]],[[0],[-0.3167645266666667],[0]],[[0],[-0.22558991000000003],[0]],[[-0.14139925230188102],[0.09777186199158286],[0.043627390310298324]]]]

Actual:   [[[[0], [0], [0]], [[0], [-0.0793], [0]], [[0], [-0.3167], [0]], [[0], [-0.2255], [0]], [[-0.1413], [0.0978], [0.0437]]]]

Expected: [[[[0], [0], [0]], [[0], [-0.0793], [0]], [[0], [-0.3167], [0]], [[0], [-0.2255], [0]], [[-0.1413], [0.0978], [0.0437]]]]