import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave14493 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Ave14493 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con7256 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con68461 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Add61954 = tf.keras.layers.Input(shape=([2, 1]))
in1Add61954 = tf.keras.layers.Input(shape=([2, 1]))
in0Con89146 = tf.keras.layers.Input(shape=([2, 5]))

Ave14493 = keras.layers.Average(name = 'Ave14493', )([in0Ave14493,in1Ave14493])
Res29992 = keras.layers.Reshape((1, 2, 2), name = 'Res29992', )(Ave14493)
Con7256 = keras.layers.Concatenate(axis=3, name = 'Con7256', )([Res29992,in0Con7256])
Con68461 = keras.layers.Conv3D(3, (1, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con68461', )(in0Con68461)
Res29898 = keras.layers.Reshape((1, 1, 3), name = 'Res29898', )(Con68461)
Con41138 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='same', name = 'Con41138', )(Res29898)
Zer85825 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer85825', )(Con41138)
Max90876 = keras.layers.Maximum(name = 'Max90876', )([Con7256,Zer85825])
Res85614 = keras.layers.Reshape((1, 6), name = 'Res85614', )(Max90876)
Zer84309 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer84309', )(Res85614)
Add61954 = keras.layers.Add(name = 'Add61954', )([in0Add61954,in1Add61954])
Con89146 = keras.layers.Concatenate(axis=2, name = 'Con89146', )([Add61954,in0Con89146])
Add9355 = keras.layers.Add(name = 'Add9355', )([Zer84309,Con89146])
model = tf.keras.models.Model(inputs=[in0Ave14493,in1Ave14493,in0Con7256,in0Con68461,in0Add61954,in1Add61954,in0Con89146], outputs=Add9355)
w = model.get_layer('Con68461').get_weights() 
w[0] = np.array([[[[[0.5664, 0.636, 0.8489], [0.6902, 0.8182, 0.0736]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con68461').set_weights(w) 
w = model.get_layer('Con41138').get_weights() 
w[0] = np.array([[[[0.0869, 0.3003, 0.3059], [0.6962, 0.3295, 0.6749], [0.6094, 0.7238, 0.0634]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con41138').set_weights(w) 
in0Ave14493 = tf.constant([[[[[0.9825], [0.888]], [[0.1429], [0.921]]]]])
in1Ave14493 = tf.constant([[[[[0.5205], [0.9962]], [[0.8318], [0.9703]]]]])
in0Con7256 = tf.constant([[[[0.4801], [0.8191]]]])
in0Con68461 = tf.constant([[[[[0.8578, 0.8623]]]]])
in0Add61954 = tf.constant([[[0.1934], [0.033]]])
in1Add61954 = tf.constant([[[0.8318], [0.8675]]])
in0Con89146 = tf.constant([[[0.2515, 0.4541, 0.9342, 0.0622, 0.2854], [0.0098, 0.1177, 0.4782, 0.9746, 0.704]]])
print (np.array2string(model.predict([in0Ave14493,in1Ave14493,in0Con7256,in0Con68461,in0Add61954,in1Add61954,in0Con89146],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add9355.png')

LAve14493 = average_layer([[[[[[0.9825], [0.888]], [[0.1429], [0.921]]]]], [[[[[0.5205], [0.9962]], [[0.8318], [0.9703]]]]]], Ave14493), 
LRes29992 = reshape_layer(Ave14493, [1, 2, 2], Res29992), 
LCon7256 = concatenate_layer([Res29992,[[[[0.4801], [0.8191]]]]], 3, Con7256), 
LCon68461 = conv3D_layer([[[[[0.8578, 0.8623]]]]], 1, 1, 1,[[[[[0.5664, 0.636, 0.8489], [0.6902, 0.8182, 0.0736]]]]],[0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con68461), 
LRes29898 = reshape_layer(Con68461, [1, 1, 3], Res29898), 
LCon41138 = conv2D_transpose_layer(Res29898, 1, 1,[[[[0.0869, 0.3003, 0.3059], [0.6962, 0.3295, 0.6749], [0.6094, 0.7238, 0.0634]]]],[0, 0, 0], 1, 1, true, Con41138), 
LZer85825 = zero_padding2D_layer(Con41138, 0, 0, 1, 0, Zer85825), 
LMax90876 = maximum_layer([Con7256,Zer85825], Max90876), 
LRes85614 = reshape_layer(Max90876, [1, 6], Res85614), 
LZer84309 = zero_padding1D_layer(Res85614, 1, 0, Zer84309), 
LAdd61954 = add_layer([[[[0.1934], [0.033]]], [[[0.8318], [0.8675]]]], Add61954), 
LCon89146 = concatenate_layer([Add61954,[[[0.2515, 0.4541, 0.9342, 0.0622, 0.2854], [0.0098, 0.1177, 0.4782, 0.9746, 0.704]]]], 2, Con89146), 
LAdd9355 = add_layer([Zer84309,Con89146], Add9355), 
exec_layers([LAve14493,LRes29992,LCon7256,LCon68461,LRes29898,LCon41138,LZer85825,LMax90876,LRes85614,LZer84309,LAdd61954,LCon89146,LAdd9355],["Ave14493","Res29992","Con7256","Con68461","Res29898","Con41138","Zer85825","Max90876","Res85614","Zer84309","Add61954","Con89146","Add9355"],Add9355,"Add9355")

Actual (Unparsed): [[[1.0252000, 0.2515000, 0.4541000, 0.9342000, 0.0622000, 0.2854000], [1.6520000, 0.9519000, 0.5978000, 1.1900104, 2.6737257, 2.3185050]]]

Expected (Unparsed): [[[1.0252,0.2515,0.4541,0.9342,0.0622,0.2854],[1.6520000000000001,0.9519,0.5978,1.19001039175,2.673725722756,2.3185050240600003]]]

Actual:   [[[1.0252, 0.2515, 0.4541, 0.9342, 0.0622, 0.2854], [1.652, 0.9519, 0.5978, 1.1901, 2.6738, 2.3186]]]

Expected: [[[1.0252, 0.2515, 0.4541, 0.9342, 0.0622, 0.2854], [1.6521, 0.9519, 0.5978, 1.1901, 2.6738, 2.3186]]]