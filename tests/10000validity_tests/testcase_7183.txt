import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot88937 = tf.keras.layers.Input(shape=([2]))
in1Dot88937 = tf.keras.layers.Input(shape=([2]))
in0Per75031 = tf.keras.layers.Input(shape=([4, 3]))
in0Con12146 = tf.keras.layers.Input(shape=([2]))

Dot88937 = keras.layers.Dot(axes=(1, 1), name = 'Dot88937', )([in0Dot88937,in1Dot88937])
Res73246 = keras.layers.Reshape((1, 1), name = 'Res73246', )(Dot88937)
Zer82426 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer82426', )(Res73246)
Fla23192 = keras.layers.Flatten(name = 'Fla23192', )(Zer82426)
Per75031 = keras.layers.Permute((1,2), name = 'Per75031',)(in0Per75031)
Res54884 = keras.layers.Reshape((4, 3, 1), name = 'Res54884', )(Per75031)
Glo2431 = keras.layers.GlobalAveragePooling2D(name = 'Glo2431', )(Res54884)
Lea69862 = keras.layers.LeakyReLU(alpha=0.19700088795237664, name = 'Lea69862', )(Glo2431)
Con12146 = keras.layers.Concatenate(axis=1, name = 'Con12146', )([Lea69862,in0Con12146])
Mul37211 = keras.layers.Multiply(name = 'Mul37211', )([Fla23192,Con12146])
model = tf.keras.models.Model(inputs=[in0Dot88937,in1Dot88937,in0Per75031,in0Con12146], outputs=Mul37211)
in0Dot88937 = tf.constant([[0.5381, 0.5007]])
in1Dot88937 = tf.constant([[0.7415, 0.8579]])
in0Per75031 = tf.constant([[[1.3103, 1.0077, 1.6711], [1.0391, 1.7564, 1.5782], [1.9475, 1.4968, 1.6387], [1.3804, 1.361, 1.1185]]])
in0Con12146 = tf.constant([[0.3056, 0.6296]])
print (np.array2string(model.predict([in0Dot88937,in1Dot88937,in0Per75031,in0Con12146],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul37211.png')

LDot88937 = dot_layer([[0.5381, 0.5007]], [[0.7415, 0.8579]], 1, 1, Dot88937), 
LRes73246 = reshape_layer(Dot88937, [1, 1], Res73246), 
LZer82426 = zero_padding1D_layer(Res73246, 1, 1, Zer82426), 
LFla23192 = flatten_layer(Zer82426, Fla23192), 
LPer75031 = permute_layer([[[1.3103, 1.0077, 1.6711], [1.0391, 1.7564, 1.5782], [1.9475, 1.4968, 1.6387], [1.3804, 1.361, 1.1185]]], 1,2, Per75031), 
LRes54884 = reshape_layer(Per75031, [4, 3, 1], Res54884), 
LGlo2431 = global_average_pooling2D_layer(Res54884, Glo2431), 
LLea69862 = leaky_relu_layer(Glo2431, 0.19700088795237664, Lea69862), 
LCon12146 = concatenate_layer([Lea69862,[[0.3056, 0.6296]]], 1, Con12146), 
LMul37211 = multiply_layer([Fla23192,Con12146], Mul37211), 
exec_layers([LDot88937,LRes73246,LZer82426,LFla23192,LPer75031,LRes54884,LGlo2431,LLea69862,LCon12146,LMul37211],["Dot88937","Res73246","Zer82426","Fla23192","Per75031","Res54884","Glo2431","Lea69862","Con12146","Mul37211"],Mul37211,"Mul37211")

Actual (Unparsed): [[0.0000000, 0.2532054, 0.0000000]]

Expected (Unparsed): [[0.0,0.253205393408,0.0]]

Actual:   [[0, 0.2533, 0]]

Expected: [[0, 0.2533, 0]]