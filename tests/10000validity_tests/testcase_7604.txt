import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo11547 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con18437 = tf.keras.layers.Input(shape=([3, 1, 3, 1]))
in0Sub82076 = tf.keras.layers.Input(shape=([3]))
in1Sub82076 = tf.keras.layers.Input(shape=([3]))
in0Con79047 = tf.keras.layers.Input(shape=([3, 1, 3, 1]))
in0Mul21807 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Mul21807 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Glo11547 = keras.layers.GlobalMaxPool3D(name = 'Glo11547', )(in0Glo11547)
Res24829 = keras.layers.Reshape((1, 1), name = 'Res24829', )(Glo11547)
Res7339 = keras.layers.Reshape((1, 1, 1), name = 'Res7339', )(Res24829)
Res21073 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res21073', )(Res7339)
Zer47578 = keras.layers.ZeroPadding3D(padding=((2, 0), (0, 0), (2, 0)), name = 'Zer47578', )(Res21073)
Con18437 = keras.layers.Concatenate(axis=4, name = 'Con18437', )([Zer47578,in0Con18437])
Sub82076 = keras.layers.Subtract(name = 'Sub82076', )([in0Sub82076,in1Sub82076])
Res82574 = keras.layers.Reshape((3, 1), name = 'Res82574', )(Sub82076)
Res18461 = keras.layers.Reshape((3, 1, 1), name = 'Res18461', )(Res82574)
Res44386 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res44386', )(Res18461)
Zer87268 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer87268', )(Res44386)
Con79047 = keras.layers.Concatenate(axis=4, name = 'Con79047', )([Zer87268,in0Con79047])
Mul21807 = keras.layers.Multiply(name = 'Mul21807', )([in0Mul21807,in1Mul21807])
Zer9848 = keras.layers.ZeroPadding3D(padding=((2, 0), (0, 0), (1, 0)), name = 'Zer9848', )(Mul21807)
Add4057 = keras.layers.Add(name = 'Add4057', )([Con79047,Zer9848])
Sub91383 = keras.layers.Subtract(name = 'Sub91383', )([Con18437,Add4057])
model = tf.keras.models.Model(inputs=[in0Glo11547,in0Con18437,in0Sub82076,in1Sub82076,in0Con79047,in0Mul21807,in1Mul21807], outputs=Sub91383)
in0Glo11547 = tf.constant([[[[[1.7484]]]]])
in0Con18437 = tf.constant([[[[[0.0855], [0.7862], [0.512]]], [[[0.7548], [0.3676], [0.0086]]], [[[0.6419], [0.0441], [0.1092]]]]])
in0Sub82076 = tf.constant([[0.9747, 0.7501, 0.6407]])
in1Sub82076 = tf.constant([[0.535, 0.0826, 0.959]])
in0Con79047 = tf.constant([[[[[0.9204], [0.4114], [0.5123]]], [[[0.3989], [0.6177], [0.3932]]], [[[0.2381], [0.6869], [0.2266]]]]])
in0Mul21807 = tf.constant([[[[[0.2659, 0.0277], [0.1522, 0.54]]]]])
in1Mul21807 = tf.constant([[[[[0.6691, 0.5029], [0.6268, 0.6996]]]]])
print (np.array2string(model.predict([in0Glo11547,in0Con18437,in0Sub82076,in1Sub82076,in0Con79047,in0Mul21807,in1Mul21807],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub91383.png')

LGlo11547 = global_max_pool3D_layer([[[[[1.7484]]]]], Glo11547), 
LRes24829 = reshape_layer(Glo11547, [1, 1], Res24829), 
LRes7339 = reshape_layer(Res24829, [1, 1, 1], Res7339), 
LRes21073 = reshape_layer(Res7339, [1, 1, 1, 1], Res21073), 
LZer47578 = zero_padding3D_layer(Res21073, 2, 0, 0, 0, 2, 0, Zer47578), 
LCon18437 = concatenate_layer([Zer47578,[[[[[0.0855], [0.7862], [0.512]]], [[[0.7548], [0.3676], [0.0086]]], [[[0.6419], [0.0441], [0.1092]]]]]], 4, Con18437), 
LSub82076 = subtract_layer([[0.9747, 0.7501, 0.6407]], [[0.535, 0.0826, 0.959]], Sub82076), 
LRes82574 = reshape_layer(Sub82076, [3, 1], Res82574), 
LRes18461 = reshape_layer(Res82574, [3, 1, 1], Res18461), 
LRes44386 = reshape_layer(Res18461, [3, 1, 1, 1], Res44386), 
LZer87268 = zero_padding3D_layer(Res44386, 0, 0, 0, 0, 2, 0, Zer87268), 
LCon79047 = concatenate_layer([Zer87268,[[[[[0.9204], [0.4114], [0.5123]]], [[[0.3989], [0.6177], [0.3932]]], [[[0.2381], [0.6869], [0.2266]]]]]], 4, Con79047), 
LMul21807 = multiply_layer([[[[[[0.2659, 0.0277], [0.1522, 0.54]]]]], [[[[[0.6691, 0.5029], [0.6268, 0.6996]]]]]], Mul21807), 
LZer9848 = zero_padding3D_layer(Mul21807, 2, 0, 0, 0, 1, 0, Zer9848), 
LAdd4057 = add_layer([Con79047,Zer9848], Add4057), 
LSub91383 = subtract_layer(Con18437,Add4057, Sub91383), 
exec_layers([LGlo11547,LRes24829,LRes7339,LRes21073,LZer47578,LCon18437,LSub82076,LRes82574,LRes18461,LRes44386,LZer87268,LCon79047,LMul21807,LZer9848,LAdd4057,LSub91383],["Glo11547","Res24829","Res7339","Res21073","Zer47578","Con18437","Sub82076","Res82574","Res18461","Res44386","Zer87268","Con79047","Mul21807","Zer9848","Add4057","Sub91383"],Sub91383,"Sub91383")

Actual (Unparsed): [[[[[0.0000000, -0.8349000], [0.0000000, 0.3748000], [-0.4396999, -0.0003000]]], [[[0.0000000, 0.3559000], [0.0000000, -0.2501000], [-0.6675000, -0.3846000]]], [[[0.0000000, 0.4038000], [-0.1779137, -0.6567303], [1.9713010, -0.4951840]]]]]

Expected (Unparsed): [[[[[0,-0.8349],[0,0.3748],[-0.4397,-0.00029999999999996696]]],[[[0,0.35590000000000005],[0,-0.25010000000000004],[-0.6675,-0.3846]]],[[[0,0.40380000000000005],[-0.17791369,-0.6567303299999999],[1.97130104,-0.495184]]]]]

Actual:   [[[[[0, -0.8349], [0, 0.3748], [-0.4396, -0.0003]]], [[[0, 0.3559], [0, -0.2501], [-0.6675, -0.3846]]], [[[0, 0.4038], [-0.1779, -0.6567], [1.9714, -0.4951]]]]]

Expected: [[[[[0, -0.8349], [0, 0.3748], [-0.4397, -0.0002]]], [[[0, 0.356], [0, -0.2501], [-0.6675, -0.3846]]], [[[0, 0.4039], [-0.1779, -0.6567], [1.9714, -0.4951]]]]]