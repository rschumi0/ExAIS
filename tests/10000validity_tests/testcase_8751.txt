import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lea74412 = tf.keras.layers.Input(shape=([2, 1]))
in0Add26026 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add26026 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave65064 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Ave65064 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Den1719 = tf.keras.layers.Input(shape=([4, 3, 4]))

Lea74412 = keras.layers.LeakyReLU(alpha=5.095591793047851, name = 'Lea74412', input_shape=(2, 1))(in0Lea74412)
Res65848 = keras.layers.Reshape((2, 1, 1), name = 'Res65848', )(Lea74412)
Zer3413 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer3413', )(Res65848)
Add26026 = keras.layers.Add(name = 'Add26026', )([in0Add26026,in1Add26026])
Res10773 = keras.layers.Reshape((2, 2, 2), name = 'Res10773', )(Add26026)
Res50911 = keras.layers.Reshape((2, 4), name = 'Res50911', )(Res10773)
Ave65064 = keras.layers.Average(name = 'Ave65064', )([in0Ave65064,in1Ave65064])
Res90306 = keras.layers.Reshape((2, 2, 2), name = 'Res90306', )(Ave65064)
Res25046 = keras.layers.Reshape((2, 4), name = 'Res25046', )(Res90306)
Dot70904 = keras.layers.Dot(axes=(2, 2), name = 'Dot70904', )([Res50911,Res25046])
Res29519 = keras.layers.Reshape((2, 2, 1), name = 'Res29519', )(Dot70904)
Zer77679 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer77679', )(Res29519)
Den1719 = keras.layers.Dense(1,name = 'Den1719', )(in0Den1719)
Max24706 = keras.layers.Maximum(name = 'Max24706', )([Zer77679,Den1719])
Add50233 = keras.layers.Add(name = 'Add50233', )([Zer3413,Max24706])
model = tf.keras.models.Model(inputs=[in0Lea74412,in0Add26026,in1Add26026,in0Ave65064,in1Ave65064,in0Den1719], outputs=Add50233)
w = model.get_layer('Den1719').get_weights() 
w[0] = np.array([[0.2825], [0.5794], [0.8341], [0.333]])
w[1] = np.array([0.4592])
model.get_layer('Den1719').set_weights(w) 
in0Lea74412 = tf.constant([[[0.1916], [0.5317]]])
in0Add26026 = tf.constant([[[[[0.1079], [0.4725]], [[0.9777], [0.0789]]], [[[0.2878], [0.9951]], [[0.1212], [0.9076]]]]])
in1Add26026 = tf.constant([[[[[0.8994], [0.1367]], [[0.1551], [0.8868]]], [[[0.1048], [0.4235]], [[0.0673], [0.389]]]]])
in0Ave65064 = tf.constant([[[[[0.6868, 0.771], [0.3657, 0.043]]], [[[0.3979, 0.3789], [0.5848, 0.867]]]]])
in1Ave65064 = tf.constant([[[[[0.8655, 0.3812], [0.9265, 0.3901]]], [[[0.2862, 0.967], [0.8488, 0.6844]]]]])
in0Den1719 = tf.constant([[[[0.97, 0.8328, 0.1971, 0.4576], [0.7725, 0.376, 0.9033, 0.4826], [0.5969, 0.0031, 0.3727, 0.6783]], [[0.4346, 0.2836, 0.4242, 0.0983], [0.8698, 0.4563, 0.0505, 0.9313], [0.5752, 0.9694, 0.3293, 0.3743]], [[0.0916, 0.3181, 0.5277, 0.8985], [0.1008, 0.4339, 0.8164, 0.9963], [0.4791, 0.2759, 0.0385, 0.9727]], [[0.6476, 0.0733, 0.662, 0.7199], [0.1239, 0.88, 0.3851, 0.7069], [0.7256, 0.7134, 0.8626, 0.6009]]]])
print (np.array2string(model.predict([in0Lea74412,in0Add26026,in1Add26026,in0Ave65064,in1Ave65064,in0Den1719],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add50233.png')

LLea74412 = leaky_relu_layer([[[0.1916], [0.5317]]], 5.095591793047851, Lea74412), 
LRes65848 = reshape_layer(Lea74412, [2, 1, 1], Res65848), 
LZer3413 = zero_padding2D_layer(Res65848, 2, 0, 2, 0, Zer3413), 
LAdd26026 = add_layer([[[[[[0.1079], [0.4725]], [[0.9777], [0.0789]]], [[[0.2878], [0.9951]], [[0.1212], [0.9076]]]]], [[[[[0.8994], [0.1367]], [[0.1551], [0.8868]]], [[[0.1048], [0.4235]], [[0.0673], [0.389]]]]]], Add26026), 
LRes10773 = reshape_layer(Add26026, [2, 2, 2], Res10773), 
LRes50911 = reshape_layer(Res10773, [2, 4], Res50911), 
LAve65064 = average_layer([[[[[[0.6868, 0.771], [0.3657, 0.043]]], [[[0.3979, 0.3789], [0.5848, 0.867]]]]], [[[[[0.8655, 0.3812], [0.9265, 0.3901]]], [[[0.2862, 0.967], [0.8488, 0.6844]]]]]], Ave65064), 
LRes90306 = reshape_layer(Ave65064, [2, 2, 2], Res90306), 
LRes25046 = reshape_layer(Res90306, [2, 4], Res25046), 
LDot70904 = dot_layer(Res50911,Res25046, 2, 2, Dot70904), 
LRes29519 = reshape_layer(Dot70904, [2, 2, 1], Res29519), 
LZer77679 = zero_padding2D_layer(Res29519, 2, 0, 1, 0, Zer77679), 
LDen1719 = dense_layer([[[[0.97, 0.8328, 0.1971, 0.4576], [0.7725, 0.376, 0.9033, 0.4826], [0.5969, 0.0031, 0.3727, 0.6783]], [[0.4346, 0.2836, 0.4242, 0.0983], [0.8698, 0.4563, 0.0505, 0.9313], [0.5752, 0.9694, 0.3293, 0.3743]], [[0.0916, 0.3181, 0.5277, 0.8985], [0.1008, 0.4339, 0.8164, 0.9963], [0.4791, 0.2759, 0.0385, 0.9727]], [[0.6476, 0.0733, 0.662, 0.7199], [0.1239, 0.88, 0.3851, 0.7069], [0.7256, 0.7134, 0.8626, 0.6009]]]], [[0.2825], [0.5794], [0.8341], [0.333]],[0.4592], Den1719), 
LMax24706 = maximum_layer([Zer77679,Den1719], Max24706), 
LAdd50233 = add_layer([Zer3413,Max24706], Add50233), 
exec_layers([LLea74412,LRes65848,LZer3413,LAdd26026,LRes10773,LRes50911,LAve65064,LRes90306,LRes25046,LDot70904,LRes29519,LZer77679,LDen1719,LMax24706,LAdd50233],["Lea74412","Res65848","Zer3413","Add26026","Res10773","Res50911","Ave65064","Res90306","Res25046","Dot70904","Res29519","Zer77679","Den1719","Max24706","Add50233"],Add50233,"Add50233")

Actual (Unparsed): [[[[1.5325312], [1.8094340], [1.1663634]], [[1.1328515], [1.3215437], [1.5826754]], [[1.4087392], [2.0738004], [2.5071926]], [[1.4765179], [1.5606834], [2.7615251]]]]

Expected (Unparsed): [[[[1.53253123],[1.80943398],[1.1663633599999998]],[[1.13285146],[1.32154367],[1.5826753900000001]],[[1.4087392099999998],[2.07380043],[2.507192635]],[[1.47651792],[1.5606833599999999],[2.76152512]]]]

Actual:   [[[[1.5326], [1.8095], [1.1664]], [[1.1329], [1.3216], [1.5827]], [[1.4088], [2.0739], [2.5072]], [[1.4766], [1.5607], [2.7616]]]]

Expected: [[[[1.5326], [1.8095], [1.1664]], [[1.1329], [1.3216], [1.5827]], [[1.4088], [2.0739], [2.5072]], [[1.4766], [1.5607], [2.7616]]]]