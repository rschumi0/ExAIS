import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul37928 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Mul37928 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Dot78806 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot78806 = tf.keras.layers.Input(shape=([2, 2]))

Mul37928 = keras.layers.Multiply(name = 'Mul37928', )([in0Mul37928,in1Mul37928])
Res46864 = keras.layers.Reshape((1, 2, 2), name = 'Res46864', )(Mul37928)
Ave75032 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 2), padding='valid', name = 'Ave75032', )(Res46864)
Res47 = keras.layers.Reshape((1, 2), name = 'Res47', )(Ave75032)
Zer60015 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer60015', )(Res47)
Dot78806 = keras.layers.Dot(axes=(1, 2), name = 'Dot78806', )([in0Dot78806,in1Dot78806])
Add95243 = keras.layers.Add(name = 'Add95243', )([Zer60015,Dot78806])
model = tf.keras.models.Model(inputs=[in0Mul37928,in1Mul37928,in0Dot78806,in1Dot78806], outputs=Add95243)
in0Mul37928 = tf.constant([[[[[0.9395, 0.5281]], [[0.4119, 0.3099]]]]])
in1Mul37928 = tf.constant([[[[[0.2159, 0.0846]], [[0.7081, 0.7034]]]]])
in0Dot78806 = tf.constant([[[0.1151, 0.4498], [0.2039, 0.2202]]])
in1Dot78806 = tf.constant([[[0.2142, 0.9745], [0.1669, 0.0627]]])
print (np.array2string(model.predict([in0Mul37928,in1Mul37928,in0Dot78806,in1Dot78806],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add95243.png')

LMul37928 = multiply_layer([[[[[[0.9395, 0.5281]], [[0.4119, 0.3099]]]]], [[[[[0.2159, 0.0846]], [[0.7081, 0.7034]]]]]], Mul37928), 
LRes46864 = reshape_layer(Mul37928, [1, 2, 2], Res46864), 
LAve75032 = average_pooling2D_layer(Res46864, 1, 2, 1, 2, false, Ave75032), 
LRes47 = reshape_layer(Ave75032, [1, 2], Res47), 
LZer60015 = zero_padding1D_layer(Res47, 1, 0, Zer60015), 
LDot78806 = dot_layer([[[0.1151, 0.4498], [0.2039, 0.2202]]], [[[0.2142, 0.9745], [0.1669, 0.0627]]], 1, 2, Dot78806), 
LAdd95243 = add_layer([Zer60015,Dot78806], Add95243), 
exec_layers([LMul37928,LRes46864,LAve75032,LRes47,LZer60015,LDot78806,LAdd95243],["Mul37928","Res46864","Ave75032","Res47","Zer60015","Dot78806","Add95243"],Add95243,"Add95243")

Actual (Unparsed): [[[0.2233550, 0.0319947], [0.5581843, 0.2202086]]]

Expected (Unparsed): [[[0.22335497,0.03199472],[0.5581842800000001,0.22020862000000002]]]

Actual:   [[[0.2234, 0.032], [0.5582, 0.2203]]]

Expected: [[[0.2234, 0.032], [0.5582, 0.2203]]]