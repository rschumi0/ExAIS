import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo32579 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Glo32579 = keras.layers.GlobalMaxPool3D(name = 'Glo32579', )(in0Glo32579)
Res90675 = keras.layers.Reshape((1, 1), name = 'Res90675', )(Glo32579)
Res14306 = keras.layers.Reshape((1, 1, 1), name = 'Res14306', )(Res90675)
Res39463 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res39463', )(Res14306)
Con85545 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 4), padding='valid', name = 'Con85545', )(Res39463)
Res89288 = keras.layers.Reshape((1, 1, 12), name = 'Res89288', )(Con85545)
Res95804 = keras.layers.Reshape((1, 12), name = 'Res95804', )(Res89288)
Up_33682 = keras.layers.UpSampling1D(size=(2), name = 'Up_33682', )(Res95804)
model = tf.keras.models.Model(inputs=[in0Glo32579], outputs=Up_33682)
w = model.get_layer('Con85545').get_weights() 
w[0] = np.array([[[[[0.5035], [0.7052], [0.3051]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con85545').set_weights(w) 
in0Glo32579 = tf.constant([[[[[1.9939]], [[1.0028]]], [[[1.3944]], [[1.4234]]]]])
print (np.array2string(model.predict([in0Glo32579],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_33682.png')

LGlo32579 = global_max_pool3D_layer([[[[[1.9939]], [[1.0028]]], [[[1.3944]], [[1.4234]]]]], Glo32579), 
LRes90675 = reshape_layer(Glo32579, [1, 1], Res90675), 
LRes14306 = reshape_layer(Res90675, [1, 1, 1], Res14306), 
LRes39463 = reshape_layer(Res14306, [1, 1, 1, 1], Res39463), 
LCon85545 = conv3D_transpose_layer(Res39463, 1, 1, 1,[[[[[0.5035], [0.7052], [0.3051]]]]],[0, 0, 0], 1, 1, 4, false, Con85545), 
LRes89288 = reshape_layer(Con85545, [1, 1, 12], Res89288), 
LRes95804 = reshape_layer(Res89288, [1, 12], Res95804), 
LUp_33682 = up_sampling1D_layer(Res95804, 2, Up_33682), 
exec_layers([LGlo32579,LRes90675,LRes14306,LRes39463,LCon85545,LRes89288,LRes95804,LUp_33682],["Glo32579","Res90675","Res14306","Res39463","Con85545","Res89288","Res95804","Up_33682"],Up_33682,"Up_33682")

Actual (Unparsed): [[[1.0039286, 1.4060982, 0.6083389, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.0039286, 1.4060982, 0.6083389, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[1.00392865,1.4060982800000001,0.60833889,0,0,0,0,0,0,0,0,0],[1.00392865,1.4060982800000001,0.60833889,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[1.004, 1.4061, 0.6084, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1.004, 1.4061, 0.6084, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[1.004, 1.4061, 0.6084, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1.004, 1.4061, 0.6084, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]