import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot18346 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot18346 = tf.keras.layers.Input(shape=([3, 2]))

Dot18346 = keras.layers.Dot(axes=(2, 2), name = 'Dot18346', )([in0Dot18346,in1Dot18346])
Res48744 = keras.layers.Reshape((3, 3, 1), name = 'Res48744', )(Dot18346)
Glo89380 = keras.layers.GlobalAveragePooling2D(name = 'Glo89380', )(Res48744)
model = tf.keras.models.Model(inputs=[in0Dot18346,in1Dot18346], outputs=Glo89380)
in0Dot18346 = tf.constant([[[0.5307, 0.1108], [0.2849, 0.9474], [0.1512, 0.7731]]])
in1Dot18346 = tf.constant([[[0.37, 0.6348], [0.2398, 0.6892], [0.8442, 0.7301]]])
print (np.array2string(model.predict([in0Dot18346,in1Dot18346],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo89380.png')

LDot18346 = dot_layer([[[0.5307, 0.1108], [0.2849, 0.9474], [0.1512, 0.7731]]], [[[0.37, 0.6348], [0.2398, 0.6892], [0.8442, 0.7301]]], 2, 2, Dot18346), 
LRes48744 = reshape_layer(Dot18346, [3, 3, 1], Res48744), 
LGlo89380 = global_average_pooling2D_layer(Res48744, Glo89380), 
exec_layers([LDot18346,LRes48744,LGlo89380],["Dot18346","Res48744","Glo89380"],Glo89380,"Glo89380")

Actual (Unparsed): [[0.5741556]]

Expected (Unparsed): [[0.5741556144444444]]

Actual:   [[0.5742]]

Expected: [[0.5742]]