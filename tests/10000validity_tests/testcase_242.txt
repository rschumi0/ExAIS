import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub72347 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub72347 = tf.keras.layers.Input(shape=([2, 3]))
in0Con3762 = tf.keras.layers.Input(shape=([8, 1]))
in0Up_39747 = tf.keras.layers.Input(shape=([4, 4]))

Sub72347 = keras.layers.Subtract(name = 'Sub72347', )([in0Sub72347,in1Sub72347])
Zer98745 = keras.layers.ZeroPadding1D(padding=((6, 0)), name = 'Zer98745', )(Sub72347)
Con3762 = keras.layers.Concatenate(axis=2, name = 'Con3762', )([Zer98745,in0Con3762])
Up_39747 = keras.layers.UpSampling1D(size=(2), name = 'Up_39747', )(in0Up_39747)
Ave74588 = keras.layers.Average(name = 'Ave74588', )([Con3762,Up_39747])
Fla10929 = keras.layers.Flatten(name = 'Fla10929', )(Ave74588)
Res77464 = keras.layers.Reshape((32, 1), name = 'Res77464', )(Fla10929)
Max90172 = keras.layers.MaxPool1D(pool_size=(9), strides=(12), padding='same', name = 'Max90172', )(Res77464)
model = tf.keras.models.Model(inputs=[in0Sub72347,in1Sub72347,in0Con3762,in0Up_39747], outputs=Max90172)
in0Sub72347 = tf.constant([[[0.1359, 0.2878, 0.7021], [0.4176, 0.7534, 0.2013]]])
in1Sub72347 = tf.constant([[[0.4479, 0.6916, 0.0891], [0.5818, 0.4366, 0.1803]]])
in0Con3762 = tf.constant([[[0.3237], [0.9781], [0.0056], [0.5243], [0.764], [0.1649], [0.4781], [0.8959]]])
in0Up_39747 = tf.constant([[[1.764, 1.5235, 1.0961, 1.3237], [1.8829, 1.846, 1.4691, 1.3833], [1.8316, 1.2793, 1.5759, 1.2383], [1.3767, 1.2624, 1.3282, 1.0617]]])
print (np.array2string(model.predict([in0Sub72347,in1Sub72347,in0Con3762,in0Up_39747],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max90172.png')

LSub72347 = subtract_layer([[[0.1359, 0.2878, 0.7021], [0.4176, 0.7534, 0.2013]]], [[[0.4479, 0.6916, 0.0891], [0.5818, 0.4366, 0.1803]]], Sub72347), 
LZer98745 = zero_padding1D_layer(Sub72347, 6, 0, Zer98745), 
LCon3762 = concatenate_layer([Zer98745,[[[0.3237], [0.9781], [0.0056], [0.5243], [0.764], [0.1649], [0.4781], [0.8959]]]], 2, Con3762), 
LUp_39747 = up_sampling1D_layer([[[1.764, 1.5235, 1.0961, 1.3237], [1.8829, 1.846, 1.4691, 1.3833], [1.8316, 1.2793, 1.5759, 1.2383], [1.3767, 1.2624, 1.3282, 1.0617]]], 2, Up_39747), 
LAve74588 = average_layer([Con3762,Up_39747], Ave74588), 
LFla10929 = flatten_layer(Ave74588, Fla10929), 
LRes77464 = reshape_layer(Fla10929, [32, 1], Res77464), 
LMax90172 = max_pool1D_layer(Res77464, 9, 12, true, Max90172), 
exec_layers([LSub72347,LZer98745,LCon3762,LUp_39747,LAve74588,LFla10929,LRes77464,LMax90172],["Sub72347","Zer98745","Con3762","Up_39747","Ave74588","Fla10929","Res77464","Max90172"],Max90172,"Max90172")

Actual (Unparsed): [[[1.1509000], [1.0011500], [0.9788000]]]

Expected (Unparsed): [[[1.1509],[1.00115],[0.9788000000000001]]]

Actual:   [[[1.1509], [1.0012], [0.9788]]]

Expected: [[[1.1509], [1.0012], [0.9789]]]