import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max11294 = tf.keras.layers.Input(shape=([2, 1]))
in0Lea54419 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Max11294 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max11294', )(in0Max11294)
Zer45016 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer45016', )(Max11294)
Res33695 = keras.layers.Reshape((4, 1, 1), name = 'Res33695', )(Zer45016)
Res23569 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res23569', )(Res33695)
Con96732 = keras.layers.Conv3D(4, (1, 1, 1),strides=(4, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con96732', )(Res23569)
Res74858 = keras.layers.Reshape((1, 1, 4), name = 'Res74858', )(Con96732)
Zer54939 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer54939', )(Res74858)
Lea54419 = keras.layers.LeakyReLU(alpha=5.272853260358198, name = 'Lea54419', input_shape=(2, 2, 2, 2))(in0Lea54419)
Res93087 = keras.layers.Reshape((2, 2, 4), name = 'Res93087', )(Lea54419)
Max2655 = keras.layers.MaxPool2D(pool_size=(1, 2), strides=(1, 4), padding='same', name = 'Max2655', )(Res93087)
Mul37975 = keras.layers.Multiply(name = 'Mul37975', )([Zer54939,Max2655])
model = tf.keras.models.Model(inputs=[in0Max11294,in0Lea54419], outputs=Mul37975)
w = model.get_layer('Con96732').get_weights() 
w[0] = np.array([[[[[0.7916, 0.4907, 0.9788, 0.743]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con96732').set_weights(w) 
in0Max11294 = tf.constant([[[1.7728], [1.5475]]])
in0Lea54419 = tf.constant([[[[[0.1221, 0.5429], [0.3922, 0.9451]], [[0.9326, 0.0344], [0.4586, 0.6713]]], [[[0.0168, 0.0209], [0.3677, 0.5466]], [[0.7319, 0.4418], [0.118, 0.4723]]]]])
print (np.array2string(model.predict([in0Max11294,in0Lea54419],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul37975.png')

LMax11294 = max_pool1D_layer([[[1.7728], [1.5475]]], 1, Max11294), 
LZer45016 = zero_padding1D_layer(Max11294, 1, 1, Zer45016), 
LRes33695 = reshape_layer(Zer45016, [4, 1, 1], Res33695), 
LRes23569 = reshape_layer(Res33695, [4, 1, 1, 1], Res23569), 
LCon96732 = conv3D_layer(Res23569, 1, 1, 1,[[[[[0.7916, 0.4907, 0.9788, 0.743]]]]],[0, 0, 0, 0], 4, 1, 1, true, 1, 1, 1, Con96732), 
LRes74858 = reshape_layer(Con96732, [1, 1, 4], Res74858), 
LZer54939 = zero_padding2D_layer(Res74858, 1, 0, 0, 0, Zer54939), 
LLea54419 = leaky_relu_layer([[[[[0.1221, 0.5429], [0.3922, 0.9451]], [[0.9326, 0.0344], [0.4586, 0.6713]]], [[[0.0168, 0.0209], [0.3677, 0.5466]], [[0.7319, 0.4418], [0.118, 0.4723]]]]], 5.272853260358198, Lea54419), 
LRes93087 = reshape_layer(Lea54419, [2, 2, 4], Res93087), 
LMax2655 = max_pool2D_layer(Res93087, 1, 2, 1, 4, true, Max2655), 
LMul37975 = multiply_layer([Zer54939,Max2655], Mul37975), 
exec_layers([LMax11294,LZer45016,LRes33695,LRes23569,LCon96732,LRes74858,LZer54939,LLea54419,LRes93087,LMax2655,LMul37975],["Max11294","Zer45016","Res33695","Res23569","Con96732","Res74858","Zer54939","Lea54419","Res93087","Max2655","Mul37975"],Mul37975,"Mul37975")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0,0.0,0.0]],[[0.0,0.0,0.0,0.0]]]]

Actual:   [[[[0, 0, 0, 0]], [[0, 0, 0, 0]]]]

Expected: [[[[0, 0, 0, 0]], [[0, 0, 0, 0]]]]