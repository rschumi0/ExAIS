import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add72436 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Add72436 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Max74299 = tf.keras.layers.Input(shape=([1, 1]))
in0Con86372 = tf.keras.layers.Input(shape=([2, 3]))

Add72436 = keras.layers.Add(name = 'Add72436', )([in0Add72436,in1Add72436])
Res12999 = keras.layers.Reshape((2, 1, 4), name = 'Res12999', )(Add72436)
Res96939 = keras.layers.Reshape((2, 4), name = 'Res96939', )(Res12999)
Max74299 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max74299', )(in0Max74299)
Zer51743 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer51743', )(Max74299)
Con86372 = keras.layers.Concatenate(axis=2, name = 'Con86372', )([Zer51743,in0Con86372])
Ave20046 = keras.layers.Average(name = 'Ave20046', )([Res96939,Con86372])
Per44440 = keras.layers.Permute((1,2), name = 'Per44440',)(Ave20046)
Res61142 = keras.layers.Reshape((2, 4, 1), name = 'Res61142', )(Per44440)
Zer80922 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer80922', )(Res61142)
model = tf.keras.models.Model(inputs=[in0Add72436,in1Add72436,in0Max74299,in0Con86372], outputs=Zer80922)
in0Add72436 = tf.constant([[[[[0.47, 0.1827], [0.2814, 0.342]]], [[[0.153, 0.2541], [0.538, 0.3614]]]]])
in1Add72436 = tf.constant([[[[[0.7148, 0.9224], [0.6271, 0.7871]]], [[[0.2708, 0.7833], [0.6379, 0.2745]]]]])
in0Max74299 = tf.constant([[[1.9512]]])
in0Con86372 = tf.constant([[[0.7151, 0.7758, 0.3389], [0.5181, 0.3021, 0.6249]]])
print (np.array2string(model.predict([in0Add72436,in1Add72436,in0Max74299,in0Con86372],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer80922.png')

LAdd72436 = add_layer([[[[[[0.47, 0.1827], [0.2814, 0.342]]], [[[0.153, 0.2541], [0.538, 0.3614]]]]], [[[[[0.7148, 0.9224], [0.6271, 0.7871]]], [[[0.2708, 0.7833], [0.6379, 0.2745]]]]]], Add72436), 
LRes12999 = reshape_layer(Add72436, [2, 1, 4], Res12999), 
LRes96939 = reshape_layer(Res12999, [2, 4], Res96939), 
LMax74299 = max_pool1D_layer([[[1.9512]]], 1, Max74299), 
LZer51743 = zero_padding1D_layer(Max74299, 1, 0, Zer51743), 
LCon86372 = concatenate_layer([Zer51743,[[[0.7151, 0.7758, 0.3389], [0.5181, 0.3021, 0.6249]]]], 2, Con86372), 
LAve20046 = average_layer([Res96939,Con86372], Ave20046), 
LPer44440 = permute_layer(Ave20046, 1,2, Per44440), 
LRes61142 = reshape_layer(Per44440, [2, 4, 1], Res61142), 
LZer80922 = zero_padding2D_layer(Res61142, 1, 1, 1, 1, Zer80922), 
exec_layers([LAdd72436,LRes12999,LRes96939,LMax74299,LZer51743,LCon86372,LAve20046,LPer44440,LRes61142,LZer80922],["Add72436","Res12999","Res96939","Max74299","Zer51743","Con86372","Ave20046","Per44440","Res61142","Zer80922"],Zer80922,"Zer80922")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.5924000], [0.9101000], [0.8421500], [0.7340000], [0.0000000]], [[0.0000000], [1.1875000], [0.7777500], [0.7390000], [0.6304000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0],[0],[0],[0]],[[0],[0.5924],[0.9100999999999999],[0.84215],[0.734],[0]],[[0],[1.1875],[0.7777499999999999],[0.739],[0.6304000000000001],[0]],[[0],[0],[0],[0],[0],[0]]]]

Actual:   [[[[0], [0], [0], [0], [0], [0]], [[0], [0.5924], [0.9101], [0.8422], [0.734], [0]], [[0], [1.1875], [0.7778], [0.739], [0.6304], [0]], [[0], [0], [0], [0], [0], [0]]]]

Expected: [[[[0], [0], [0], [0], [0], [0]], [[0], [0.5924], [0.9101], [0.8422], [0.734], [0]], [[0], [1.1875], [0.7778], [0.739], [0.6305], [0]], [[0], [0], [0], [0], [0], [0]]]]