import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub41087 = tf.keras.layers.Input(shape=([3, 2, 3, 2]))
in1Sub41087 = tf.keras.layers.Input(shape=([3, 2, 3, 2]))
in0Min83716 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Min83716 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con79863 = tf.keras.layers.Input(shape=([3, 2, 4]))

Sub41087 = keras.layers.Subtract(name = 'Sub41087', )([in0Sub41087,in1Sub41087])
Res65992 = keras.layers.Reshape((3, 2, 6), name = 'Res65992', )(Sub41087)
Min83716 = keras.layers.Minimum(name = 'Min83716', )([in0Min83716,in1Min83716])
Zer71826 = keras.layers.ZeroPadding2D(padding=((2, 0), (0, 0)), name = 'Zer71826', )(Min83716)
Con79863 = keras.layers.Concatenate(axis=3, name = 'Con79863', )([Zer71826,in0Con79863])
Mul82711 = keras.layers.Multiply(name = 'Mul82711', )([Res65992,Con79863])
Res92153 = keras.layers.Reshape((3, 12), name = 'Res92153', )(Mul82711)
Cro33636 = keras.layers.Cropping1D(cropping=((2, 0)), name = 'Cro33636', )(Res92153)
model = tf.keras.models.Model(inputs=[in0Sub41087,in1Sub41087,in0Min83716,in1Min83716,in0Con79863], outputs=Cro33636)
in0Sub41087 = tf.constant([[[[[0.8828, 0.6655], [0.3443, 0.0652], [0.8841, 0.6671]], [[0.4376, 0.7076], [0.6531, 0.2327], [0.4316, 0.2549]]], [[[0.8946, 0.1911], [0.3071, 0.9765], [0.6358, 0.3187]], [[0.437, 0.6676], [0.8217, 0.6962], [0.0834, 0.1793]]], [[[0.7941, 0.8313], [0.4247, 0.8461], [0.8212, 0.9389]], [[0.7387, 0.6986], [0.4915, 0.0507], [0.0924, 0.8297]]]]])
in1Sub41087 = tf.constant([[[[[0.8384, 0.5594], [0.5213, 0.921], [0.5162, 0.3937]], [[0.2128, 0.7303], [0.217, 0.2688], [0.655, 0.2901]]], [[[0.786, 0.3574], [0.0579, 0.6745], [0.1688, 0.2895]], [[0.6095, 0.4544], [0.4097, 0.6015], [0.293, 0.3796]]], [[[0.4072, 0.6303], [0.0528, 0.4018], [0.0291, 0.3742]], [[0.079, 0.8839], [0.4925, 0.028], [0.8504, 0.728]]]]])
in0Min83716 = tf.constant([[[[0.6187, 0.7403], [0.3715, 0.2007]]]])
in1Min83716 = tf.constant([[[[0.6923, 0.6382], [0.7236, 0.431]]]])
in0Con79863 = tf.constant([[[[0.6615, 0.7638, 0.6484, 0.5879], [0.2735, 0.2738, 0.9299, 0.467]], [[0.4002, 0.812, 0.2875, 0.2199], [0.5322, 0.6858, 0.4726, 0.4437]], [[0.0914, 0.3241, 0.539, 0.06], [0.0986, 0.8237, 0.9257, 0.128]]]])
print (np.array2string(model.predict([in0Sub41087,in1Sub41087,in0Min83716,in1Min83716,in0Con79863],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro33636.png')

LSub41087 = subtract_layer([[[[[0.8828, 0.6655], [0.3443, 0.0652], [0.8841, 0.6671]], [[0.4376, 0.7076], [0.6531, 0.2327], [0.4316, 0.2549]]], [[[0.8946, 0.1911], [0.3071, 0.9765], [0.6358, 0.3187]], [[0.437, 0.6676], [0.8217, 0.6962], [0.0834, 0.1793]]], [[[0.7941, 0.8313], [0.4247, 0.8461], [0.8212, 0.9389]], [[0.7387, 0.6986], [0.4915, 0.0507], [0.0924, 0.8297]]]]], [[[[[0.8384, 0.5594], [0.5213, 0.921], [0.5162, 0.3937]], [[0.2128, 0.7303], [0.217, 0.2688], [0.655, 0.2901]]], [[[0.786, 0.3574], [0.0579, 0.6745], [0.1688, 0.2895]], [[0.6095, 0.4544], [0.4097, 0.6015], [0.293, 0.3796]]], [[[0.4072, 0.6303], [0.0528, 0.4018], [0.0291, 0.3742]], [[0.079, 0.8839], [0.4925, 0.028], [0.8504, 0.728]]]]], Sub41087), 
LRes65992 = reshape_layer(Sub41087, [3, 2, 6], Res65992), 
LMin83716 = minimum_layer([[[[[0.6187, 0.7403], [0.3715, 0.2007]]]], [[[[0.6923, 0.6382], [0.7236, 0.431]]]]], Min83716), 
LZer71826 = zero_padding2D_layer(Min83716, 2, 0, 0, 0, Zer71826), 
LCon79863 = concatenate_layer([Zer71826,[[[[0.6615, 0.7638, 0.6484, 0.5879], [0.2735, 0.2738, 0.9299, 0.467]], [[0.4002, 0.812, 0.2875, 0.2199], [0.5322, 0.6858, 0.4726, 0.4437]], [[0.0914, 0.3241, 0.539, 0.06], [0.0986, 0.8237, 0.9257, 0.128]]]]], 3, Con79863), 
LMul82711 = multiply_layer([Res65992,Con79863], Mul82711), 
LRes92153 = reshape_layer(Mul82711, [3, 12], Res92153), 
LCro33636 = cropping1D_layer(Res92153, 2, 0, Cro33636), 
exec_layers([LSub41087,LRes65992,LMin83716,LZer71826,LCon79863,LMul82711,LRes92153,LCro33636],["Sub41087","Res65992","Min83716","Zer71826","Con79863","Mul82711","Res92153","Cro33636"],Cro33636,"Cro33636")

Actual (Unparsed): [[[0.2393750, 0.1282782, 0.0339917, 0.1439976, 0.4269419, 0.0338820, 0.2450785, -0.0371897, -0.0000986, 0.0186980, -0.7016806, 0.0130176]]]

Expected (Unparsed): [[[0.23937503000000002,0.12827820000000004,0.03399166,0.14399763,0.42694190000000004,0.033881999999999995,0.24507855000000003,-0.03718971,-9.860000000000008e-5,0.01869799,-0.7016806,0.013017600000000002]]]

Actual:   [[[0.2394, 0.1283, 0.034, 0.144, 0.427, 0.0339, 0.2451, -0.0371, -0, 0.0187, -0.7016, 0.0131]]]

Expected: [[[0.2394, 0.1283, 0.034, 0.144, 0.427, 0.0339, 0.2451, -0.0371, -0, 0.0187, -0.7016, 0.0131]]]