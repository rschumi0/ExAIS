import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con43364 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave19112 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave19112 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Con43364 = keras.layers.Conv1D(4, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con43364', )(in0Con43364)
Res38542 = keras.layers.Reshape((1, 4, 1), name = 'Res38542', )(Con43364)
Res79382 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res79382', )(Res38542)
Ave19112 = keras.layers.Average(name = 'Ave19112', )([in0Ave19112,in1Ave19112])
Zer77525 = keras.layers.ZeroPadding3D(padding=((0, 0), (3, 0), (0, 0)), name = 'Zer77525', )(Ave19112)
Max23864 = keras.layers.Maximum(name = 'Max23864', )([Res79382,Zer77525])
model = tf.keras.models.Model(inputs=[in0Con43364,in0Ave19112,in1Ave19112], outputs=Max23864)
w = model.get_layer('Con43364').get_weights() 
w[0] = np.array([[[0.1767, 0.4939, 0.2329, 0.4102], [0.7631, 0.2859, 0.0761, 0.2379]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con43364').set_weights(w) 
in0Con43364 = tf.constant([[[0.127, 0.7606]]])
in0Ave19112 = tf.constant([[[[[0.5299]]]]])
in1Ave19112 = tf.constant([[[[[0.0303]]]]])
print (np.array2string(model.predict([in0Con43364,in0Ave19112,in1Ave19112],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max23864.png')

LCon43364 = conv1D_layer([[[0.127, 0.7606]]], 1,[[[0.1767, 0.4939, 0.2329, 0.4102], [0.7631, 0.2859, 0.0761, 0.2379]]],[0, 0, 0, 0], 1, true, 1, Con43364), 
LRes38542 = reshape_layer(Con43364, [1, 4, 1], Res38542), 
LRes79382 = reshape_layer(Res38542, [1, 4, 1, 1], Res79382), 
LAve19112 = average_layer([[[[[[0.5299]]]]], [[[[[0.0303]]]]]], Ave19112), 
LZer77525 = zero_padding3D_layer(Ave19112, 0, 0, 3, 0, 0, 0, Zer77525), 
LMax23864 = maximum_layer([Res79382,Zer77525], Max23864), 
exec_layers([LCon43364,LRes38542,LRes79382,LAve19112,LZer77525,LMax23864],["Con43364","Res38542","Res79382","Ave19112","Zer77525","Max23864"],Max23864,"Max23864")

Actual (Unparsed): [[[[[0.6028547]], [[0.2801808]], [[0.0874600]], [[0.2801000]]]]]

Expected (Unparsed): [[[[[0.60285476]],[[0.28018084]],[[0.08745996]],[[0.2801]]]]]

Actual:   [[[[[0.6029]], [[0.2802]], [[0.0875]], [[0.2801]]]]]

Expected: [[[[[0.6029]], [[0.2802]], [[0.0875]], [[0.2801]]]]]