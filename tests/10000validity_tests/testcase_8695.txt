import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min49977 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min49977 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Sub87387 = tf.keras.layers.Input(shape=([2]))
in1Sub87387 = tf.keras.layers.Input(shape=([2]))

Min49977 = keras.layers.Minimum(name = 'Min49977', )([in0Min49977,in1Min49977])
Res82837 = keras.layers.Reshape((2, 2), name = 'Res82837', )(Min49977)
Up_41616 = keras.layers.UpSampling1D(size=(1), name = 'Up_41616', )(Res82837)
Sim46710 = keras.layers.SimpleRNN(2,name = 'Sim46710', )(Up_41616)
Sub87387 = keras.layers.Subtract(name = 'Sub87387', )([in0Sub87387,in1Sub87387])
Ave65351 = keras.layers.Average(name = 'Ave65351', )([Sim46710,Sub87387])
model = tf.keras.models.Model(inputs=[in0Min49977,in1Min49977,in0Sub87387,in1Sub87387], outputs=Ave65351)
w = model.get_layer('Sim46710').get_weights() 
w[0] = np.array([[9, 6], [7, 7]])
w[1] = np.array([[8, 9], [2, 7]])
w[2] = np.array([6, 1])
model.get_layer('Sim46710').set_weights(w) 
in0Min49977 = tf.constant([[[[0.2363, 0.8536]], [[0.4798, 0.8403]]]])
in1Min49977 = tf.constant([[[[0.0375, 0.2105]], [[0.9673, 0.5889]]]])
in0Sub87387 = tf.constant([[0.2998, 0.1613]])
in1Sub87387 = tf.constant([[0.302, 0.1334]])
print (np.array2string(model.predict([in0Min49977,in1Min49977,in0Sub87387,in1Sub87387],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave65351.png')

LMin49977 = minimum_layer([[[[[0.2363, 0.8536]], [[0.4798, 0.8403]]]], [[[[0.0375, 0.2105]], [[0.9673, 0.5889]]]]], Min49977), 
LRes82837 = reshape_layer(Min49977, [2, 2], Res82837), 
LUp_41616 = up_sampling1D_layer(Res82837, 1, Up_41616), 
LSim46710 = simple_rnn_layer(Up_41616,[[9, 6], [7, 7]],[[8, 9], [2, 7]],[6, 1], Sim46710), 
LSub87387 = subtract_layer([[0.2998, 0.1613]], [[0.302, 0.1334]], Sub87387), 
LAve65351 = average_layer([Sim46710,Sub87387], Ave65351), 
exec_layers([LMin49977,LRes82837,LUp_41616,LSim46710,LSub87387,LAve65351],["Min49977","Res82837","Up_41616","Sim46710","Sub87387","Ave65351"],Ave65351,"Ave65351")

Actual (Unparsed): [[0.4989000, 0.5139500]]

Expected (Unparsed): [[0.4989,0.51395]]

Actual:   [[0.4989, 0.514]]

Expected: [[0.4989, 0.514]]