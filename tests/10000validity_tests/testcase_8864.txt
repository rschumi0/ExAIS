import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Thr89805 = tf.keras.layers.Input(shape=([2, 1]))
in0Sim47108 = tf.keras.layers.Input(shape=([1, 2]))

Thr89805 = keras.layers.ThresholdedReLU(theta=1.2483178711459237, name = 'Thr89805', input_shape=(2, 1))(in0Thr89805)
Res81785 = keras.layers.Reshape((2, 1, 1), name = 'Res81785', )(Thr89805)
Zer89807 = keras.layers.ZeroPadding2D(padding=((4, 0), (0, 0)), name = 'Zer89807', )(Res81785)
Sim47108 = keras.layers.SimpleRNN(3,name = 'Sim47108', )(in0Sim47108)
Res17110 = keras.layers.Reshape((3, 1), name = 'Res17110', )(Sim47108)
Up_71425 = keras.layers.UpSampling1D(size=(2), name = 'Up_71425', )(Res17110)
Res17170 = keras.layers.Reshape((6, 1, 1), name = 'Res17170', )(Up_71425)
Up_30507 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_30507', )(Res17170)
Add24466 = keras.layers.Add(name = 'Add24466', )([Zer89807,Up_30507])
model = tf.keras.models.Model(inputs=[in0Thr89805,in0Sim47108], outputs=Add24466)
w = model.get_layer('Sim47108').get_weights() 
w[0] = np.array([[10, 4, 7], [4, 1, 3]])
w[1] = np.array([[2, 5, 2], [10, 7, 3], [4, 3, 9]])
w[2] = np.array([3, 2, 3])
model.get_layer('Sim47108').set_weights(w) 
in0Thr89805 = tf.constant([[[0.1019], [0.7165]]])
in0Sim47108 = tf.constant([[[9, 1]]])
print (np.array2string(model.predict([in0Thr89805,in0Sim47108],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add24466.png')

LThr89805 = thresholded_relu_layer([[[0.1019], [0.7165]]], 1.2483178711459237, Thr89805), 
LRes81785 = reshape_layer(Thr89805, [2, 1, 1], Res81785), 
LZer89807 = zero_padding2D_layer(Res81785, 4, 0, 0, 0, Zer89807), 
LSim47108 = simple_rnn_layer([[[9, 1]]],[[10, 4, 7], [4, 1, 3]],[[2, 5, 2], [10, 7, 3], [4, 3, 9]],[3, 2, 3], Sim47108), 
LRes17110 = reshape_layer(Sim47108, [3, 1], Res17110), 
LUp_71425 = up_sampling1D_layer(Res17110, 2, Up_71425), 
LRes17170 = reshape_layer(Up_71425, [6, 1, 1], Res17170), 
LUp_30507 = up_sampling2D_layer(Res17170, 1, 1, Up_30507), 
LAdd24466 = add_layer([Zer89807,Up_30507], Add24466), 
exec_layers([LThr89805,LRes81785,LZer89807,LSim47108,LRes17110,LUp_71425,LRes17170,LUp_30507,LAdd24466],["Thr89805","Res81785","Zer89807","Sim47108","Res17110","Up_71425","Res17170","Up_30507","Add24466"],Add24466,"Add24466")

Actual (Unparsed): [[[[1.0000000]], [[1.0000000]], [[1.0000000]], [[1.0000000]], [[1.0000000]], [[1.0000000]]]]

Expected (Unparsed): [[[[1.0]],[[1.0]],[[1.0]],[[1.0]],[[1.0]],[[1.0]]]]

Actual:   [[[[1]], [[1]], [[1]], [[1]], [[1]], [[1]]]]

Expected: [[[[1]], [[1]], [[1]], [[1]], [[1]], [[1]]]]