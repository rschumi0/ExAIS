import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub47251 = tf.keras.layers.Input(shape=([2]))
in1Sub47251 = tf.keras.layers.Input(shape=([2]))
in0Ave38548 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave38548 = tf.keras.layers.Input(shape=([2, 1]))

Sub47251 = keras.layers.Subtract(name = 'Sub47251', )([in0Sub47251,in1Sub47251])
Den38794 = keras.layers.Dense(4,name = 'Den38794', )(Sub47251)
Res99073 = keras.layers.Reshape((4, 1), name = 'Res99073', )(Den38794)
Ave38548 = keras.layers.Average(name = 'Ave38548', )([in0Ave38548,in1Ave38548])
Zer92254 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer92254', )(Ave38548)
Ave12731 = keras.layers.Average(name = 'Ave12731', )([Res99073,Zer92254])
model = tf.keras.models.Model(inputs=[in0Sub47251,in1Sub47251,in0Ave38548,in1Ave38548], outputs=Ave12731)
w = model.get_layer('Den38794').get_weights() 
w[0] = np.array([[0.2811, 0.5008, 0.7192, 0.1434], [0.4122, 0.9277, 0.4761, 0.7105]])
w[1] = np.array([0.7307, 0.0923, 0.9153, 0.7367])
model.get_layer('Den38794').set_weights(w) 
in0Sub47251 = tf.constant([[0.4671, 0.4452]])
in1Sub47251 = tf.constant([[0.9035, 0.4762]])
in0Ave38548 = tf.constant([[[0.3155], [0.1223]]])
in1Ave38548 = tf.constant([[[0.9819], [0.4095]]])
print (np.array2string(model.predict([in0Sub47251,in1Sub47251,in0Ave38548,in1Ave38548],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave12731.png')

LSub47251 = subtract_layer([[0.4671, 0.4452]], [[0.9035, 0.4762]], Sub47251), 
LDen38794 = dense_layer(Sub47251, [[0.2811, 0.5008, 0.7192, 0.1434], [0.4122, 0.9277, 0.4761, 0.7105]],[0.7307, 0.0923, 0.9153, 0.7367], Den38794), 
LRes99073 = reshape_layer(Den38794, [4, 1], Res99073), 
LAve38548 = average_layer([[[[0.3155], [0.1223]]], [[[0.9819], [0.4095]]]], Ave38548), 
LZer92254 = zero_padding1D_layer(Ave38548, 2, 0, Zer92254), 
LAve12731 = average_layer([Res99073,Zer92254], Ave12731), 
exec_layers([LSub47251,LDen38794,LRes99073,LAve38548,LZer92254,LAve12731],["Sub47251","Den38794","Res99073","Ave38548","Zer92254","Ave12731"],Ave12731,"Ave12731")

Actual (Unparsed): [[[0.2976249], [-0.0775039], [0.6176910], [0.4589974]]]

Expected (Unparsed): [[[0.29762488000000004],[-0.07750391000000001],[0.61769101],[0.45899736999999996]]]

Actual:   [[[0.2977], [-0.0775], [0.6177], [0.459]]]

Expected: [[[0.2977], [-0.0775], [0.6177], [0.459]]]