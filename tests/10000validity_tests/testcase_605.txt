import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave98021 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave98021 = tf.keras.layers.Input(shape=([2, 2]))
in0Con19684 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Max11069 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max11069 = tf.keras.layers.Input(shape=([1, 2, 2]))

Ave98021 = keras.layers.Average(name = 'Ave98021', )([in0Ave98021,in1Ave98021])
ReL58718 = keras.layers.ReLU(max_value=9.881469029512216, negative_slope=8.350026701401166, threshold=8.753108172227083, name = 'ReL58718', )(Ave98021)
Res5656 = keras.layers.Reshape((2, 2, 1), name = 'Res5656', )(ReL58718)
Con19684 = keras.layers.Concatenate(axis=3, name = 'Con19684', )([Res5656,in0Con19684])
Max11069 = keras.layers.Maximum(name = 'Max11069', )([in0Max11069,in1Max11069])
Zer66808 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer66808', )(Max11069)
Mul19644 = keras.layers.Multiply(name = 'Mul19644', )([Con19684,Zer66808])
model = tf.keras.models.Model(inputs=[in0Ave98021,in1Ave98021,in0Con19684,in0Max11069,in1Max11069], outputs=Mul19644)
in0Ave98021 = tf.constant([[[0.612, 0.0943], [0.6607, 0.7195]]])
in1Ave98021 = tf.constant([[[0.4102, 0.6511], [0.1832, 0.8805]]])
in0Con19684 = tf.constant([[[[0.216], [0.092]], [[0.7187], [0.1231]]]])
in0Max11069 = tf.constant([[[[0.0255, 0.9036], [0.6947, 0.5309]]]])
in1Max11069 = tf.constant([[[[0.0727, 0.9432], [0.0094, 0.1606]]]])
print (np.array2string(model.predict([in0Ave98021,in1Ave98021,in0Con19684,in0Max11069,in1Max11069],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul19644.png')

LAve98021 = average_layer([[[[0.612, 0.0943], [0.6607, 0.7195]]], [[[0.4102, 0.6511], [0.1832, 0.8805]]]], Ave98021), 
LReL58718 = relu_layer(Ave98021, 9.881469029512216, 8.350026701401166, 8.753108172227083, ReL58718), 
LRes5656 = reshape_layer(ReL58718, [2, 2, 1], Res5656), 
LCon19684 = concatenate_layer([Res5656,[[[[0.216], [0.092]], [[0.7187], [0.1231]]]]], 3, Con19684), 
LMax11069 = maximum_layer([[[[[0.0255, 0.9036], [0.6947, 0.5309]]]], [[[[0.0727, 0.9432], [0.0094, 0.1606]]]]], Max11069), 
LZer66808 = zero_padding2D_layer(Max11069, 1, 0, 0, 0, Zer66808), 
LMul19644 = multiply_layer([Con19684,Zer66808], Mul19644), 
exec_layers([LAve98021,LReL58718,LRes5656,LCon19684,LMax11069,LZer66808,LMul19644],["Ave98021","ReL58718","Res5656","Con19684","Max11069","Zer66808","Mul19644"],Mul19644,"Mul19644")

Actual (Unparsed): [[[[-0.0000000, 0.0000000], [-0.0000000, 0.0000000]], [[-5.0574042, 0.6778778], [-46.1341001, 0.0653538]]]]

Expected (Unparsed): [[[[-0.0,0.0],[-0.0,0.0]],[[-5.057404085036057,0.6778778400000001],[-46.13409999039427,0.06535379000000001]]]]

Actual:   [[[[-0, 0], [-0, 0]], [[-5.0574, 0.6779], [-46.1341, 0.0654]]]]

Expected: [[[[-0, 0], [-0, 0]], [[-5.0574, 0.6779], [-46.134, 0.0654]]]]