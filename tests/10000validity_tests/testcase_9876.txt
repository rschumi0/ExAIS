import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave96448 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave96448 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Max58296 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con23994 = tf.keras.layers.Input(shape=([1, 1, 1]))

Ave96448 = keras.layers.Average(name = 'Ave96448', )([in0Ave96448,in1Ave96448])
Cro43483 = keras.layers.Cropping2D(cropping=((0, 1), (0, 0)), name = 'Cro43483', )(Ave96448)
Max58296 = keras.layers.MaxPool2D(pool_size=(2, 2), name = 'Max58296', )(in0Max58296)
Con23994 = keras.layers.Concatenate(axis=3, name = 'Con23994', )([Max58296,in0Con23994])
Ave58566 = keras.layers.Average(name = 'Ave58566', )([Cro43483,Con23994])
model = tf.keras.models.Model(inputs=[in0Ave96448,in1Ave96448,in0Max58296,in0Con23994], outputs=Ave58566)
in0Ave96448 = tf.constant([[[[0.0887, 0.6641]], [[0.8609, 0.2841]]]])
in1Ave96448 = tf.constant([[[[0.5447, 0.2333]], [[0.6856, 0.8014]]]])
in0Max58296 = tf.constant([[[[1.0625], [1.577]], [[1.7763], [1.3925]]]])
in0Con23994 = tf.constant([[[[0.9851]]]])
print (np.array2string(model.predict([in0Ave96448,in1Ave96448,in0Max58296,in0Con23994],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave58566.png')

LAve96448 = average_layer([[[[[0.0887, 0.6641]], [[0.8609, 0.2841]]]], [[[[0.5447, 0.2333]], [[0.6856, 0.8014]]]]], Ave96448), 
LCro43483 = cropping2D_layer(Ave96448, 0, 1, 0, 0, Cro43483), 
LMax58296 = max_pool2D_layer([[[[1.0625], [1.577]], [[1.7763], [1.3925]]]], 2, 2, Max58296), 
LCon23994 = concatenate_layer([Max58296,[[[[0.9851]]]]], 3, Con23994), 
LAve58566 = average_layer([Cro43483,Con23994], Ave58566), 
exec_layers([LAve96448,LCro43483,LMax58296,LCon23994,LAve58566],["Ave96448","Cro43483","Max58296","Con23994","Ave58566"],Ave58566,"Ave58566")

Actual (Unparsed): [[[[1.0465000, 0.7169000]]]]

Expected (Unparsed): [[[[1.0465,0.7169]]]]

Actual:   [[[[1.0465, 0.7169]]]]

Expected: [[[[1.0465, 0.7169]]]]