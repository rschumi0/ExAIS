import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot89464 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot89464 = tf.keras.layers.Input(shape=([2, 3]))

Dot89464 = keras.layers.Dot(axes=(2, 2), name = 'Dot89464', )([in0Dot89464,in1Dot89464])
Res72158 = keras.layers.Reshape((2, 2, 1), name = 'Res72158', )(Dot89464)
Glo87166 = keras.layers.GlobalAveragePooling2D(name = 'Glo87166', )(Res72158)
model = tf.keras.models.Model(inputs=[in0Dot89464,in1Dot89464], outputs=Glo87166)
in0Dot89464 = tf.constant([[[0.3181, 0.0863, 0.6383], [0.0027, 0.1472, 0.4802]]])
in1Dot89464 = tf.constant([[[0.3478, 0.8179, 0.3173], [0.3798, 0.5227, 0.1226]]])
print (np.array2string(model.predict([in0Dot89464,in1Dot89464],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo87166.png')

LDot89464 = dot_layer([[[0.3181, 0.0863, 0.6383], [0.0027, 0.1472, 0.4802]]], [[[0.3478, 0.8179, 0.3173], [0.3798, 0.5227, 0.1226]]], 2, 2, Dot89464), 
LRes72158 = reshape_layer(Dot89464, [2, 2, 1], Res72158), 
LGlo87166 = global_average_pooling2D_layer(Res72158, Glo87166), 
exec_layers([LDot89464,LRes72158,LGlo87166],["Dot89464","Res72158","Glo87166"],Glo87166,"Glo87166")

Actual (Unparsed): [[0.2596181]]

Expected (Unparsed): [[0.2596180825]]

Actual:   [[0.2597]]

Expected: [[0.2597]]