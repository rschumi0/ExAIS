import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max70269 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max70269 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Glo77008 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con51462 = tf.keras.layers.Input(shape=([6]))

Max70269 = keras.layers.Maximum(name = 'Max70269', )([in0Max70269,in1Max70269])
Res880 = keras.layers.Reshape((2, 2, 4), name = 'Res880', )(Max70269)
Res39161 = keras.layers.Reshape((2, 8), name = 'Res39161', )(Res880)
Cro67227 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro67227', )(Res39161)
Mas46581 = keras.layers.Masking(mask_value=1, name = 'Mas46581', )(Cro67227)
Fla27779 = keras.layers.Flatten(name = 'Fla27779', )(Mas46581)
Glo77008 = keras.layers.GlobalMaxPool2D(name = 'Glo77008', )(in0Glo77008)
Con51462 = keras.layers.Concatenate(axis=1, name = 'Con51462', )([Glo77008,in0Con51462])
Max62917 = keras.layers.Maximum(name = 'Max62917', )([Fla27779,Con51462])
model = tf.keras.models.Model(inputs=[in0Max70269,in1Max70269,in0Glo77008,in0Con51462], outputs=Max62917)
in0Max70269 = tf.constant([[[[[0.8334, 0.3129], [0.2749, 0.8325]], [[0.0064, 0.3853], [0.6959, 0.5519]]], [[[0.2866, 0.9339], [0.1947, 0.0917]], [[0.5724, 0.9134], [0.3007, 0.6904]]]]])
in1Max70269 = tf.constant([[[[[0.6416, 0.513], [0.5667, 0.6698]], [[0.7045, 0.2052], [0.7091, 0.5089]]], [[[0.0854, 0.0896], [0.0967, 0.5402]], [[0.1861, 0.0905], [0.2505, 0.2466]]]]])
in0Glo77008 = tf.constant([[[[1.3771, 1.4415]], [[1.0831, 1.7099]]]])
in0Con51462 = tf.constant([[0.129, 0.3168, 0.9802, 0.6581, 0.6374, 0.6436]])
print (np.array2string(model.predict([in0Max70269,in1Max70269,in0Glo77008,in0Con51462],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max62917.png')

LMax70269 = maximum_layer([[[[[[0.8334, 0.3129], [0.2749, 0.8325]], [[0.0064, 0.3853], [0.6959, 0.5519]]], [[[0.2866, 0.9339], [0.1947, 0.0917]], [[0.5724, 0.9134], [0.3007, 0.6904]]]]], [[[[[0.6416, 0.513], [0.5667, 0.6698]], [[0.7045, 0.2052], [0.7091, 0.5089]]], [[[0.0854, 0.0896], [0.0967, 0.5402]], [[0.1861, 0.0905], [0.2505, 0.2466]]]]]], Max70269), 
LRes880 = reshape_layer(Max70269, [2, 2, 4], Res880), 
LRes39161 = reshape_layer(Res880, [2, 8], Res39161), 
LCro67227 = cropping1D_layer(Res39161, 1, 0, Cro67227), 
LMas46581 = masking_layer(Cro67227, 1, Mas46581), 
LFla27779 = flatten_layer(Mas46581, Fla27779), 
LGlo77008 = global_max_pool2D_layer([[[[1.3771, 1.4415]], [[1.0831, 1.7099]]]], Glo77008), 
LCon51462 = concatenate_layer([Glo77008,[[0.129, 0.3168, 0.9802, 0.6581, 0.6374, 0.6436]]], 1, Con51462), 
LMax62917 = maximum_layer([Fla27779,Con51462], Max62917), 
exec_layers([LMax70269,LRes880,LRes39161,LCro67227,LMas46581,LFla27779,LGlo77008,LCon51462,LMax62917],["Max70269","Res880","Res39161","Cro67227","Mas46581","Fla27779","Glo77008","Con51462","Max62917"],Max62917,"Max62917")

Actual (Unparsed): [[1.3771000, 1.7099000, 0.1947000, 0.5402000, 0.9802000, 0.9134000, 0.6374000, 0.6904000]]

Expected (Unparsed): [[1.3771,1.7099,0.1947,0.5402,0.9802,0.9134,0.6374,0.6904]]

Actual:   [[1.3771, 1.7099, 0.1947, 0.5402, 0.9802, 0.9134, 0.6374, 0.6904]]

Expected: [[1.3771, 1.7099, 0.1947, 0.5402, 0.9802, 0.9134, 0.6374, 0.6904]]