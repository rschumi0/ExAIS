import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave65451 = tf.keras.layers.Input(shape=([2, 2, 1]))

Ave65451 = keras.layers.AveragePooling2D(pool_size=(2, 2), name = 'Ave65451', )(in0Ave65451)
Res8810 = keras.layers.Reshape((1, 1), name = 'Res8810', )(Ave65451)
Ave361 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave361', )(Res8810)
Glo41553 = keras.layers.GlobalAveragePooling1D(name = 'Glo41553', )(Ave361)
model = tf.keras.models.Model(inputs=[in0Ave65451], outputs=Glo41553)
in0Ave65451 = tf.constant([[[[1.6406], [1.218]], [[1.477], [1.5524]]]])
print (np.array2string(model.predict([in0Ave65451],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo41553.png')

LAve65451 = average_pooling2D_layer([[[[1.6406], [1.218]], [[1.477], [1.5524]]]], 2, 2, Ave65451), 
LRes8810 = reshape_layer(Ave65451, [1, 1], Res8810), 
LAve361 = average_pooling1D_layer(Res8810, 1, Ave361), 
LGlo41553 = global_average_pooling1D_layer(Ave361, Glo41553), 
exec_layers([LAve65451,LRes8810,LAve361,LGlo41553],["Ave65451","Res8810","Ave361","Glo41553"],Glo41553,"Glo41553")

Actual (Unparsed): [[1.4720000]]

Expected (Unparsed): [[1.472]]

Actual:   [[1.472]]

Expected: [[1.472]]