import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add28797 = tf.keras.layers.Input(shape=([1, 1]))
in1Add28797 = tf.keras.layers.Input(shape=([1, 1]))
in0Con96091 = tf.keras.layers.Input(shape=([2]))
in0Sub54883 = tf.keras.layers.Input(shape=([3]))
in1Sub54883 = tf.keras.layers.Input(shape=([3]))
in0GRU25185 = tf.keras.layers.Input(shape=([2, 1]))
in0Con64808 = tf.keras.layers.Input(shape=([1]))
in0Fla8706 = tf.keras.layers.Input(shape=([1]))
in0Con21793 = tf.keras.layers.Input(shape=([2]))

Add28797 = keras.layers.Add(name = 'Add28797', )([in0Add28797,in1Add28797])
Res53402 = keras.layers.Reshape((1, 1, 1), name = 'Res53402', )(Add28797)
Up_38925 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_38925', )(Res53402)
Res8376 = keras.layers.Reshape((1, 1), name = 'Res8376', )(Up_38925)
Fla93715 = keras.layers.Flatten(name = 'Fla93715', )(Res8376)
Con96091 = keras.layers.Concatenate(axis=1, name = 'Con96091', )([Fla93715,in0Con96091])
Sub54883 = keras.layers.Subtract(name = 'Sub54883', )([in0Sub54883,in1Sub54883])
GRU25185 = keras.layers.GRU(2,reset_after=True, recurrent_activation='sigmoid', name = 'GRU25185', )(in0GRU25185)
Con64808 = keras.layers.Concatenate(axis=1, name = 'Con64808', )([GRU25185,in0Con64808])
Max33712 = keras.layers.Maximum(name = 'Max33712', )([Sub54883,Con64808])
Fla8706 = keras.layers.Flatten(name = 'Fla8706', )(in0Fla8706)
Con21793 = keras.layers.Concatenate(axis=1, name = 'Con21793', )([Fla8706,in0Con21793])
Max2446 = keras.layers.Maximum(name = 'Max2446', )([Max33712,Con21793])
Den19430 = keras.layers.Dense(3,name = 'Den19430', )(Max2446)
Mul50637 = keras.layers.Multiply(name = 'Mul50637', )([Con96091,Den19430])
model = tf.keras.models.Model(inputs=[in0Add28797,in1Add28797,in0Con96091,in0Sub54883,in1Sub54883,in0GRU25185,in0Con64808,in0Fla8706,in0Con21793], outputs=Mul50637)
w = model.get_layer('GRU25185').get_weights() 
w[0] = np.array([[6, 10, 9, 6, 4, 6]])
w[1] = np.array([[3, 4, 5, 7, 6, 10], [1, 4, 9, 8, 6, 8]])
w[2] = np.array([[10, 8, 1, 2, 4, 1], [8, 2, 8, 7, 8, 7]])
model.get_layer('GRU25185').set_weights(w) 
w = model.get_layer('Den19430').get_weights() 
w[0] = np.array([[0.1412, 0.8751, 0.542], [0.4895, 0.0646, 0.928], [0.3136, 0.68, 0.9769]])
w[1] = np.array([0.1195, 0.366, 0.1347])
model.get_layer('Den19430').set_weights(w) 
in0Add28797 = tf.constant([[[0.3043]]])
in1Add28797 = tf.constant([[[0.9506]]])
in0Con96091 = tf.constant([[0.8137, 0.0235]])
in0Sub54883 = tf.constant([[0.7627, 0.7498, 0.7238]])
in1Sub54883 = tf.constant([[0.4767, 0.9139, 0.4039]])
in0GRU25185 = tf.constant([[[4], [1]]])
in0Con64808 = tf.constant([[0.7511]])
in0Fla8706 = tf.constant([[1.3492]])
in0Con21793 = tf.constant([[0.1615, 0.9769]])
print (np.array2string(model.predict([in0Add28797,in1Add28797,in0Con96091,in0Sub54883,in1Sub54883,in0GRU25185,in0Con64808,in0Fla8706,in0Con21793],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul50637.png')

LAdd28797 = add_layer([[[[0.3043]]], [[[0.9506]]]], Add28797), 
LRes53402 = reshape_layer(Add28797, [1, 1, 1], Res53402), 
LUp_38925 = up_sampling2D_layer(Res53402, 1, 1, Up_38925), 
LRes8376 = reshape_layer(Up_38925, [1, 1], Res8376), 
LFla93715 = flatten_layer(Res8376, Fla93715), 
LCon96091 = concatenate_layer([Fla93715,[[0.8137, 0.0235]]], 1, Con96091), 
LSub54883 = subtract_layer([[0.7627, 0.7498, 0.7238]], [[0.4767, 0.9139, 0.4039]], Sub54883), 
LGRU25185 = gru_layer([[[4], [1]]],[[6, 10, 9, 6, 4, 6]],[[3, 4, 5, 7, 6, 10], [1, 4, 9, 8, 6, 8]],[[10, 8, 1, 2, 4, 1], [8, 2, 8, 7, 8, 7]], true, GRU25185), 
LCon64808 = concatenate_layer([GRU25185,[[0.7511]]], 1, Con64808), 
LMax33712 = maximum_layer([Sub54883,Con64808], Max33712), 
LFla8706 = flatten_layer([[1.3492]], Fla8706), 
LCon21793 = concatenate_layer([Fla8706,[[0.1615, 0.9769]]], 1, Con21793), 
LMax2446 = maximum_layer([Max33712,Con21793], Max2446), 
LDen19430 = dense_layer(Max2446, [[0.1412, 0.8751, 0.542], [0.4895, 0.0646, 0.928], [0.3136, 0.68, 0.9769]],[0.1195, 0.366, 0.1347], Den19430), 
LMul50637 = multiply_layer([Con96091,Den19430], Mul50637), 
exec_layers([LAdd28797,LRes53402,LUp_38925,LRes8376,LFla93715,LCon96091,LSub54883,LGRU25185,LCon64808,LMax33712,LFla8706,LCon21793,LMax2446,LDen19430,LMul50637],["Add28797","Res53402","Up_38925","Res8376","Fla93715","Con96091","Sub54883","GRU25185","Con64808","Max33712","Fla8706","Con21793","Max2446","Den19430","Mul50637"],Mul50637,"Mul50637")

Actual (Unparsed): [[0.8726790, 1.8075612, 0.0462990]]

Expected (Unparsed): [[0.8726789564370001,1.8075611705340002,0.046299042235]]

Actual:   [[0.8727, 1.8076, 0.0463]]

Expected: [[0.8727, 1.8076, 0.0463]]