import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot97270 = tf.keras.layers.Input(shape=([3]))
in1Dot97270 = tf.keras.layers.Input(shape=([3]))

Dot97270 = keras.layers.Dot(axes=(1, 1), name = 'Dot97270', )([in0Dot97270,in1Dot97270])
Res23862 = keras.layers.Reshape((1, 1), name = 'Res23862', )(Dot97270)
Res73620 = keras.layers.Reshape((1, 1, 1), name = 'Res73620', )(Res23862)
Res91151 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res91151', )(Res73620)
Glo74070 = keras.layers.GlobalMaxPool3D(name = 'Glo74070', )(Res91151)
model = tf.keras.models.Model(inputs=[in0Dot97270,in1Dot97270], outputs=Glo74070)
in0Dot97270 = tf.constant([[0.5088, 0.228, 0.5908]])
in1Dot97270 = tf.constant([[0.8056, 0.2752, 0.0385]])
print (np.array2string(model.predict([in0Dot97270,in1Dot97270],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo74070.png')

LDot97270 = dot_layer([[0.5088, 0.228, 0.5908]], [[0.8056, 0.2752, 0.0385]], 1, 1, Dot97270), 
LRes23862 = reshape_layer(Dot97270, [1, 1], Res23862), 
LRes73620 = reshape_layer(Res23862, [1, 1, 1], Res73620), 
LRes91151 = reshape_layer(Res73620, [1, 1, 1, 1], Res91151), 
LGlo74070 = global_max_pool3D_layer(Res91151, Glo74070), 
exec_layers([LDot97270,LRes23862,LRes73620,LRes91151,LGlo74070],["Dot97270","Res23862","Res73620","Res91151","Glo74070"],Glo74070,"Glo74070")

Actual (Unparsed): [[0.4953807]]

Expected (Unparsed): [[0.49538068]]

Actual:   [[0.4954]]

Expected: [[0.4954]]