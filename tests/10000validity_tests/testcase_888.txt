import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub54617 = tf.keras.layers.Input(shape=([2]))
in1Sub54617 = tf.keras.layers.Input(shape=([2]))
in0Con78095 = tf.keras.layers.Input(shape=([2, 2]))
in0Max19867 = tf.keras.layers.Input(shape=([2, 1]))
in1Max19867 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul41868 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul41868 = tf.keras.layers.Input(shape=([2, 1]))
in0Con68052 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul24298 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul24298 = tf.keras.layers.Input(shape=([2, 2, 2]))

Sub54617 = keras.layers.Subtract(name = 'Sub54617', )([in0Sub54617,in1Sub54617])
Res60396 = keras.layers.Reshape((2, 1), name = 'Res60396', )(Sub54617)
Res75097 = keras.layers.Reshape((2, 1, 1), name = 'Res75097', )(Res60396)
Cro83958 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro83958', )(Res75097)
Res61743 = keras.layers.Reshape((1, 1), name = 'Res61743', )(Cro83958)
Zer94325 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer94325', )(Res61743)
Con78095 = keras.layers.Concatenate(axis=2, name = 'Con78095', )([Zer94325,in0Con78095])
Max19867 = keras.layers.Maximum(name = 'Max19867', )([in0Max19867,in1Max19867])
Mul41868 = keras.layers.Multiply(name = 'Mul41868', )([in0Mul41868,in1Mul41868])
Max12822 = keras.layers.Maximum(name = 'Max12822', )([Max19867,Mul41868])
Con68052 = keras.layers.Concatenate(axis=2, name = 'Con68052', )([Max12822,in0Con68052])
Mul24298 = keras.layers.Multiply(name = 'Mul24298', )([in0Mul24298,in1Mul24298])
Res386 = keras.layers.Reshape((2, 4), name = 'Res386', )(Mul24298)
Con50335 = keras.layers.Conv1D(3, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con50335', )(Res386)
Zer90786 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer90786', )(Con50335)
Min47638 = keras.layers.Minimum(name = 'Min47638', )([Con68052,Zer90786])
Min66326 = keras.layers.Minimum(name = 'Min66326', )([Con78095,Min47638])
model = tf.keras.models.Model(inputs=[in0Sub54617,in1Sub54617,in0Con78095,in0Max19867,in1Max19867,in0Mul41868,in1Mul41868,in0Con68052,in0Mul24298,in1Mul24298], outputs=Min66326)
w = model.get_layer('Con50335').get_weights() 
w[0] = np.array([[[0.465, 0.332, 0.9188], [0.1772, 0.6972, 0.6924], [0.3435, 0.7712, 0.5081], [0.27, 0.9504, 0.8764]], [[0.9292, 0.7724, 0.4794], [0.9454, 0.5367, 0.6556], [0.0244, 0.6885, 0.3678], [0.9042, 0.5655, 0.7721]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con50335').set_weights(w) 
in0Sub54617 = tf.constant([[0.327, 0.3004]])
in1Sub54617 = tf.constant([[0.0289, 0.8293]])
in0Con78095 = tf.constant([[[0.6911, 0.5399], [0.4562, 0.1347]]])
in0Max19867 = tf.constant([[[0.801], [0.8655]]])
in1Max19867 = tf.constant([[[0.1547], [0.7733]]])
in0Mul41868 = tf.constant([[[0.1824], [0.4056]]])
in1Mul41868 = tf.constant([[[0.2423], [0.8127]]])
in0Con68052 = tf.constant([[[0.3631, 0.8284], [0.2176, 0.4751]]])
in0Mul24298 = tf.constant([[[[0.1764, 0.7555], [0.1685, 0.9015]], [[0.9299, 0.7302], [0.8839, 0.7384]]]])
in1Mul24298 = tf.constant([[[[0.9949, 0.5202], [0.0619, 0.3927]], [[0.6802, 0.1046], [0.7755, 0.6599]]]])
print (np.array2string(model.predict([in0Sub54617,in1Sub54617,in0Con78095,in0Max19867,in1Max19867,in0Mul41868,in1Mul41868,in0Con68052,in0Mul24298,in1Mul24298],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min66326.png')

LSub54617 = subtract_layer([[0.327, 0.3004]], [[0.0289, 0.8293]], Sub54617), 
LRes60396 = reshape_layer(Sub54617, [2, 1], Res60396), 
LRes75097 = reshape_layer(Res60396, [2, 1, 1], Res75097), 
LCro83958 = cropping2D_layer(Res75097, 1, 0, 0, 0, Cro83958), 
LRes61743 = reshape_layer(Cro83958, [1, 1], Res61743), 
LZer94325 = zero_padding1D_layer(Res61743, 1, 0, Zer94325), 
LCon78095 = concatenate_layer([Zer94325,[[[0.6911, 0.5399], [0.4562, 0.1347]]]], 2, Con78095), 
LMax19867 = maximum_layer([[[[0.801], [0.8655]]], [[[0.1547], [0.7733]]]], Max19867), 
LMul41868 = multiply_layer([[[[0.1824], [0.4056]]], [[[0.2423], [0.8127]]]], Mul41868), 
LMax12822 = maximum_layer([Max19867,Mul41868], Max12822), 
LCon68052 = concatenate_layer([Max12822,[[[0.3631, 0.8284], [0.2176, 0.4751]]]], 2, Con68052), 
LMul24298 = multiply_layer([[[[[0.1764, 0.7555], [0.1685, 0.9015]], [[0.9299, 0.7302], [0.8839, 0.7384]]]], [[[[0.9949, 0.5202], [0.0619, 0.3927]], [[0.6802, 0.1046], [0.7755, 0.6599]]]]], Mul24298), 
LRes386 = reshape_layer(Mul24298, [2, 4], Res386), 
LCon50335 = conv1D_layer(Res386, 2,[[[0.465, 0.332, 0.9188], [0.1772, 0.6972, 0.6924], [0.3435, 0.7712, 0.5081], [0.27, 0.9504, 0.8764]], [[0.9292, 0.7724, 0.4794], [0.9454, 0.5367, 0.6556], [0.0244, 0.6885, 0.3678], [0.9042, 0.5655, 0.7721]]],[0, 0, 0], 1, false, 1, Con50335), 
LZer90786 = zero_padding1D_layer(Con50335, 1, 0, Zer90786), 
LMin47638 = minimum_layer([Con68052,Zer90786], Min47638), 
LMin66326 = minimum_layer([Con78095,Min47638], Min66326), 
exec_layers([LSub54617,LRes60396,LRes75097,LCro83958,LRes61743,LZer94325,LCon78095,LMax19867,LMul41868,LMax12822,LCon68052,LMul24298,LRes386,LCon50335,LZer90786,LMin47638,LMin66326],["Sub54617","Res60396","Res75097","Cro83958","Res61743","Zer94325","Con78095","Max19867","Mul41868","Max12822","Con68052","Mul24298","Res386","Con50335","Zer90786","Min47638","Min66326"],Min66326,"Min66326")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000], [-0.5289000, 0.2176000, 0.1347000]]]

Expected (Unparsed): [[[0,0,0],[-0.5289,0.2176,0.1347]]]

Actual:   [[[0, 0, 0], [-0.5289, 0.2176, 0.1347]]]

Expected: [[[0, 0, 0], [-0.5289, 0.2176, 0.1347]]]