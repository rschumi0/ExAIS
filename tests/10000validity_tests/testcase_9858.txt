import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot42270 = tf.keras.layers.Input(shape=([3]))
in1Dot42270 = tf.keras.layers.Input(shape=([3]))
in0ReL38512 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Dot42270 = keras.layers.Dot(axes=(1, 1), name = 'Dot42270', )([in0Dot42270,in1Dot42270])
Res85761 = keras.layers.Reshape((1, 1), name = 'Res85761', )(Dot42270)
ReL38512 = keras.layers.ReLU(max_value=1.1058296112275174, negative_slope=5.195864546378551, threshold=6.3250946758646815, name = 'ReL38512', input_shape=(1, 2, 1, 1))(in0ReL38512)
Res50312 = keras.layers.Reshape((1, 2, 1), name = 'Res50312', )(ReL38512)
Res74411 = keras.layers.Reshape((1, 2), name = 'Res74411', )(Res50312)
Ave61197 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave61197', )(Res74411)
Dot76394 = keras.layers.Dot(axes=(1, 1), name = 'Dot76394', )([Res85761,Ave61197])
Res41318 = keras.layers.Reshape((1, 2, 1), name = 'Res41318', )(Dot76394)
Dep14691 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='valid', name = 'Dep14691', )(Res41318)
model = tf.keras.models.Model(inputs=[in0Dot42270,in1Dot42270,in0ReL38512], outputs=Dep14691)
w = model.get_layer('Dep14691').get_weights() 
w[0] = np.array([[[[0.8204]], [[0.7723]]]])
w[1] = np.array([0])
model.get_layer('Dep14691').set_weights(w) 
in0Dot42270 = tf.constant([[0.5579, 0.5271, 0.9395]])
in1Dot42270 = tf.constant([[0.5194, 0.9069, 0.5918]])
in0ReL38512 = tf.constant([[[[[0.5901]], [[0.8444]]]]])
print (np.array2string(model.predict([in0Dot42270,in1Dot42270,in0ReL38512],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep14691.png')

LDot42270 = dot_layer([[0.5579, 0.5271, 0.9395]], [[0.5194, 0.9069, 0.5918]], 1, 1, Dot42270), 
LRes85761 = reshape_layer(Dot42270, [1, 1], Res85761), 
LReL38512 = relu_layer([[[[[0.5901]], [[0.8444]]]]], 1.1058296112275174, 5.195864546378551, 6.3250946758646815, ReL38512), 
LRes50312 = reshape_layer(ReL38512, [1, 2, 1], Res50312), 
LRes74411 = reshape_layer(Res50312, [1, 2], Res74411), 
LAve61197 = average_pooling1D_layer(Res74411, 1, 1, true, Ave61197), 
LDot76394 = dot_layer(Res85761,Ave61197, 1, 1, Dot76394), 
LRes41318 = reshape_layer(Dot76394, [1, 2, 1], Res41318), 
LDep14691 = depthwise_conv2D_layer(Res41318, 1, 2,[[[[0.8204]], [[0.7723]]]],[0], 1, 1, false, Dep14691), 
exec_layers([LDot42270,LRes85761,LReL38512,LRes50312,LRes74411,LAve61197,LDot76394,LRes41318,LDep14691],["Dot42270","Res85761","ReL38512","Res50312","Res74411","Ave61197","Dot76394","Res41318","Dep14691"],Dep14691,"Dep14691")

Actual (Unparsed): [[[[-61.4760894]]]]

Expected (Unparsed): [[[[-61.47608993390555]]]]

Actual:   [[[[-61.476]]]]

Expected: [[[[-61.476]]]]