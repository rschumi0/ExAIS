import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave32163 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave76552 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave76552 = tf.keras.layers.Input(shape=([1, 1]))
in0Mul74051 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Mul74051 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Add30602 = tf.keras.layers.Input(shape=([1, 1]))
in1Add30602 = tf.keras.layers.Input(shape=([1, 1]))
in0Min51678 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Min51678 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Ave32163 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave32163', )(in0Ave32163)
Res30967 = keras.layers.Reshape((1, 1, 1), name = 'Res30967', )(Ave32163)
Res94149 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res94149', )(Res30967)
Con47856 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con47856', )(Res94149)
Res23144 = keras.layers.Reshape((1, 1, 2), name = 'Res23144', )(Con47856)
Ave76552 = keras.layers.Average(name = 'Ave76552', )([in0Ave76552,in1Ave76552])
Glo30490 = keras.layers.GlobalAveragePooling1D(name = 'Glo30490', )(Ave76552)
Res38680 = keras.layers.Reshape((1, 1), name = 'Res38680', )(Glo30490)
Mul74051 = keras.layers.Multiply(name = 'Mul74051', )([in0Mul74051,in1Mul74051])
Res29433 = keras.layers.Reshape((1, 2, 1), name = 'Res29433', )(Mul74051)
Res27491 = keras.layers.Reshape((1, 2), name = 'Res27491', )(Res29433)
Add30602 = keras.layers.Add(name = 'Add30602', )([in0Add30602,in1Add30602])
Dot41368 = keras.layers.Dot(axes=(1, 1), name = 'Dot41368', )([Res27491,Add30602])
Dot14151 = keras.layers.Dot(axes=(2, 2), name = 'Dot14151', )([Res38680,Dot41368])
Res6751 = keras.layers.Reshape((1, 1, 2), name = 'Res6751', )(Dot14151)
Mul66066 = keras.layers.Multiply(name = 'Mul66066', )([Res23144,Res6751])
Res88067 = keras.layers.Reshape((1, 2), name = 'Res88067', )(Mul66066)
Min51678 = keras.layers.Minimum(name = 'Min51678', )([in0Min51678,in1Min51678])
Res46029 = keras.layers.Reshape((2, 1, 2), name = 'Res46029', )(Min51678)
Glo71507 = keras.layers.GlobalAveragePooling2D(name = 'Glo71507', )(Res46029)
Res11283 = keras.layers.Reshape((1, 2), name = 'Res11283', )(Glo71507)
Mul79963 = keras.layers.Multiply(name = 'Mul79963', )([Res88067,Res11283])
model = tf.keras.models.Model(inputs=[in0Ave32163,in0Ave76552,in1Ave76552,in0Mul74051,in1Mul74051,in0Add30602,in1Add30602,in0Min51678,in1Min51678], outputs=Mul79963)
w = model.get_layer('Con47856').get_weights() 
w[0] = np.array([[[[[0.9538], [0.7923]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con47856').set_weights(w) 
in0Ave32163 = tf.constant([[[1.3289]]])
in0Ave76552 = tf.constant([[[0.2642]]])
in1Ave76552 = tf.constant([[[0.6206]]])
in0Mul74051 = tf.constant([[[[[0.9]], [[0.6832]]]]])
in1Mul74051 = tf.constant([[[[[0.5704]], [[0.6562]]]]])
in0Add30602 = tf.constant([[[0.2651]]])
in1Add30602 = tf.constant([[[0.2859]]])
in0Min51678 = tf.constant([[[[[0.9299], [0.1887]]], [[[0.7424], [0.3395]]]]])
in1Min51678 = tf.constant([[[[[0.8145], [0.515]]], [[[0.0878], [0.8421]]]]])
print (np.array2string(model.predict([in0Ave32163,in0Ave76552,in1Ave76552,in0Mul74051,in1Mul74051,in0Add30602,in1Add30602,in0Min51678,in1Min51678],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul79963.png')

LAve32163 = average_pooling1D_layer([[[1.3289]]], 1, 1, true, Ave32163), 
LRes30967 = reshape_layer(Ave32163, [1, 1, 1], Res30967), 
LRes94149 = reshape_layer(Res30967, [1, 1, 1, 1], Res94149), 
LCon47856 = conv3D_transpose_layer(Res94149, 1, 1, 1,[[[[[0.9538], [0.7923]]]]],[0, 0], 1, 1, 1, false, Con47856), 
LRes23144 = reshape_layer(Con47856, [1, 1, 2], Res23144), 
LAve76552 = average_layer([[[[0.2642]]], [[[0.6206]]]], Ave76552), 
LGlo30490 = global_average_pooling1D_layer(Ave76552, Glo30490), 
LRes38680 = reshape_layer(Glo30490, [1, 1], Res38680), 
LMul74051 = multiply_layer([[[[[[0.9]], [[0.6832]]]]], [[[[[0.5704]], [[0.6562]]]]]], Mul74051), 
LRes29433 = reshape_layer(Mul74051, [1, 2, 1], Res29433), 
LRes27491 = reshape_layer(Res29433, [1, 2], Res27491), 
LAdd30602 = add_layer([[[[0.2651]]], [[[0.2859]]]], Add30602), 
LDot41368 = dot_layer(Res27491,Add30602, 1, 1, Dot41368), 
LDot14151 = dot_layer(Res38680,Dot41368, 2, 2, Dot14151), 
LRes6751 = reshape_layer(Dot14151, [1, 1, 2], Res6751), 
LMul66066 = multiply_layer([Res23144,Res6751], Mul66066), 
LRes88067 = reshape_layer(Mul66066, [1, 2], Res88067), 
LMin51678 = minimum_layer([[[[[[0.9299], [0.1887]]], [[[0.7424], [0.3395]]]]], [[[[[0.8145], [0.515]]], [[[0.0878], [0.8421]]]]]], Min51678), 
LRes46029 = reshape_layer(Min51678, [2, 1, 2], Res46029), 
LGlo71507 = global_average_pooling2D_layer(Res46029, Glo71507), 
LRes11283 = reshape_layer(Glo71507, [1, 2], Res11283), 
LMul79963 = multiply_layer([Res88067,Res11283], Mul79963), 
exec_layers([LAve32163,LRes30967,LRes94149,LCon47856,LRes23144,LAve76552,LGlo30490,LRes38680,LMul74051,LRes29433,LRes27491,LAdd30602,LDot41368,LDot14151,LRes6751,LMul66066,LRes88067,LMin51678,LRes46029,LGlo71507,LRes11283,LMul79963],["Ave32163","Res30967","Res94149","Con47856","Res23144","Ave76552","Glo30490","Res38680","Mul74051","Res29433","Res27491","Add30602","Dot41368","Dot14151","Res6751","Mul66066","Res88067","Min51678","Res46029","Glo71507","Res11283","Mul79963"],Mul79963,"Mul79963")

Actual (Unparsed): [[[0.0715582, 0.0303879]]]

Expected (Unparsed): [[[0.07155818632721231,0.03038793294713928]]]

Actual:   [[[0.0716, 0.0304]]]

Expected: [[[0.0716, 0.0304]]]