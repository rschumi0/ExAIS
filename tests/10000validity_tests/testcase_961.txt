import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add93443 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add93443 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Ave95541 = tf.keras.layers.Input(shape=([2, 1, 1]))

Add93443 = keras.layers.Add(name = 'Add93443', )([in0Add93443,in1Add93443])
Res68958 = keras.layers.Reshape((1, 2, 2, 1), name = 'Res68958', )(Add93443)
Ave95541 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(11, 1), padding='valid', name = 'Ave95541', )(in0Ave95541)
Res11387 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res11387', )(Ave95541)
PRe89272 = keras.layers.PReLU(name = 'PRe89272', )(Res11387)
Zer78747 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer78747', )(PRe89272)
Mul2228 = keras.layers.Multiply(name = 'Mul2228', )([Res68958,Zer78747])
model = tf.keras.models.Model(inputs=[in0Add93443,in1Add93443,in0Ave95541], outputs=Mul2228)
w = model.get_layer('PRe89272').get_weights() 
w[0] = np.array([[[[0.2896]]]])
model.get_layer('PRe89272').set_weights(w) 
in0Add93443 = tf.constant([[[[0.3224, 0.3278], [0.7845, 0.1671]]]])
in1Add93443 = tf.constant([[[[0.5985, 0.3473], [0.4307, 0.3426]]]])
in0Ave95541 = tf.constant([[[[1.2437]], [[1.5985]]]])
print (np.array2string(model.predict([in0Add93443,in1Add93443,in0Ave95541],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul2228.png')

LAdd93443 = add_layer([[[[[0.3224, 0.3278], [0.7845, 0.1671]]]], [[[[0.5985, 0.3473], [0.4307, 0.3426]]]]], Add93443), 
LRes68958 = reshape_layer(Add93443, [1, 2, 2, 1], Res68958), 
LAve95541 = average_pooling2D_layer([[[[1.2437]], [[1.5985]]]], 2, 1, 11, 1, false, Ave95541), 
LRes11387 = reshape_layer(Ave95541, [1, 1, 1, 1], Res11387), 
LPRe89272 = prelu_layer(Res11387, [[[[0.2896]]]], PRe89272), 
LZer78747 = zero_padding3D_layer(PRe89272, 0, 0, 1, 0, 1, 0, Zer78747), 
LMul2228 = multiply_layer([Res68958,Zer78747], Mul2228), 
exec_layers([LAdd93443,LRes68958,LAve95541,LRes11387,LPRe89272,LZer78747,LMul2228],["Add93443","Res68958","Ave95541","Res11387","PRe89272","Zer78747","Mul2228"],Mul2228,"Mul2228")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]], [[0.0000000], [0.7243347]]]]]

Expected (Unparsed): [[[[[0.0],[0.0]],[[0.0],[0.7243346700000001]]]]]

Actual:   [[[[[0], [0]], [[0], [0.7244]]]]]

Expected: [[[[[0], [0]], [[0], [0.7244]]]]]