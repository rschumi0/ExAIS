import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add43461 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add43461 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con5371 = tf.keras.layers.Input(shape=([1]))
in0Sim14393 = tf.keras.layers.Input(shape=([2, 2]))

Add43461 = keras.layers.Add(name = 'Add43461', )([in0Add43461,in1Add43461])
Res6867 = keras.layers.Reshape((1, 2), name = 'Res6867', )(Add43461)
Fla70114 = keras.layers.Flatten(name = 'Fla70114', )(Res6867)
Con5371 = keras.layers.Concatenate(axis=1, name = 'Con5371', )([Fla70114,in0Con5371])
Sim14393 = keras.layers.SimpleRNN(3,name = 'Sim14393', )(in0Sim14393)
Add79368 = keras.layers.Add(name = 'Add79368', )([Con5371,Sim14393])
model = tf.keras.models.Model(inputs=[in0Add43461,in1Add43461,in0Con5371,in0Sim14393], outputs=Add79368)
w = model.get_layer('Sim14393').get_weights() 
w[0] = np.array([[2, 6, 9], [3, 6, 8]])
w[1] = np.array([[5, 2, 8], [7, 8, 9], [5, 2, 5]])
w[2] = np.array([6, 9, 7])
model.get_layer('Sim14393').set_weights(w) 
in0Add43461 = tf.constant([[[[0.8846, 0.4141]]]])
in1Add43461 = tf.constant([[[[0.5921, 0.9397]]]])
in0Con5371 = tf.constant([[0.0865]])
in0Sim14393 = tf.constant([[[2, 3], [10, 10]]])
print (np.array2string(model.predict([in0Add43461,in1Add43461,in0Con5371,in0Sim14393],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add79368.png')

LAdd43461 = add_layer([[[[[0.8846, 0.4141]]]], [[[[0.5921, 0.9397]]]]], Add43461), 
LRes6867 = reshape_layer(Add43461, [1, 2], Res6867), 
LFla70114 = flatten_layer(Res6867, Fla70114), 
LCon5371 = concatenate_layer([Fla70114,[[0.0865]]], 1, Con5371), 
LSim14393 = simple_rnn_layer([[[2, 3], [10, 10]]],[[2, 6, 9], [3, 6, 8]],[[5, 2, 8], [7, 8, 9], [5, 2, 5]],[6, 9, 7], Sim14393), 
LAdd79368 = add_layer([Con5371,Sim14393], Add79368), 
exec_layers([LAdd43461,LRes6867,LFla70114,LCon5371,LSim14393,LAdd79368],["Add43461","Res6867","Fla70114","Con5371","Sim14393","Add79368"],Add79368,"Add79368")

Actual (Unparsed): [[2.4767000, 2.3538000, 1.0865000]]

Expected (Unparsed): [[2.4767,2.3538,1.0865]]

Actual:   [[2.4767, 2.3538, 1.0865]]

Expected: [[2.4767, 2.3538, 1.0865]]