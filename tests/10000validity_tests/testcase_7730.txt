import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add72511 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add72511 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Glo66506 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con41691 = tf.keras.layers.Input(shape=([7]))

Add72511 = keras.layers.Add(name = 'Add72511', )([in0Add72511,in1Add72511])
Res13954 = keras.layers.Reshape((2, 2, 2), name = 'Res13954', )(Add72511)
Res8229 = keras.layers.Reshape((2, 4), name = 'Res8229', )(Res13954)
Fla49930 = keras.layers.Flatten(name = 'Fla49930', )(Res8229)
Glo66506 = keras.layers.GlobalAveragePooling2D(name = 'Glo66506', )(in0Glo66506)
Res89874 = keras.layers.Reshape((2, 1), name = 'Res89874', )(Glo66506)
Glo79178 = keras.layers.GlobalMaxPool1D(name = 'Glo79178', )(Res89874)
Con41691 = keras.layers.Concatenate(axis=1, name = 'Con41691', )([Glo79178,in0Con41691])
Ave77630 = keras.layers.Average(name = 'Ave77630', )([Fla49930,Con41691])
Res14292 = keras.layers.Reshape((8, 1), name = 'Res14292', )(Ave77630)
Glo44468 = keras.layers.GlobalAveragePooling1D(name = 'Glo44468', )(Res14292)
model = tf.keras.models.Model(inputs=[in0Add72511,in1Add72511,in0Glo66506,in0Con41691], outputs=Glo44468)
in0Add72511 = tf.constant([[[[[0.064], [0.374]], [[0.725], [0.0563]]], [[[0.5729], [0.6205]], [[0.1743], [0.9724]]]]])
in1Add72511 = tf.constant([[[[[0.9717], [0.7854]], [[0.4482], [0.686]]], [[[0.8126], [0.1834]], [[0.1264], [0.9847]]]]])
in0Glo66506 = tf.constant([[[[1.7171, 1.7644], [1.2154, 1.5219]]]])
in0Con41691 = tf.constant([[0.7044, 0.4016, 0.6323, 0.4999, 0.74, 0.0547, 0.2798]])
print (np.array2string(model.predict([in0Add72511,in1Add72511,in0Glo66506,in0Con41691],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo44468.png')

LAdd72511 = add_layer([[[[[[0.064], [0.374]], [[0.725], [0.0563]]], [[[0.5729], [0.6205]], [[0.1743], [0.9724]]]]], [[[[[0.9717], [0.7854]], [[0.4482], [0.686]]], [[[0.8126], [0.1834]], [[0.1264], [0.9847]]]]]], Add72511), 
LRes13954 = reshape_layer(Add72511, [2, 2, 2], Res13954), 
LRes8229 = reshape_layer(Res13954, [2, 4], Res8229), 
LFla49930 = flatten_layer(Res8229, Fla49930), 
LGlo66506 = global_average_pooling2D_layer([[[[1.7171, 1.7644], [1.2154, 1.5219]]]], Glo66506), 
LRes89874 = reshape_layer(Glo66506, [2, 1], Res89874), 
LGlo79178 = global_max_pool1D_layer(Res89874, Glo79178), 
LCon41691 = concatenate_layer([Glo79178,[[0.7044, 0.4016, 0.6323, 0.4999, 0.74, 0.0547, 0.2798]]], 1, Con41691), 
LAve77630 = average_layer([Fla49930,Con41691], Ave77630), 
LRes14292 = reshape_layer(Ave77630, [8, 1], Res14292), 
LGlo44468 = global_average_pooling1D_layer(Res14292, Glo44468), 
exec_layers([LAdd72511,LRes13954,LRes8229,LFla49930,LGlo66506,LRes89874,LGlo79178,LCon41691,LAve77630,LRes14292,LGlo44468],["Add72511","Res13954","Res8229","Fla49930","Glo66506","Res89874","Glo79178","Con41691","Ave77630","Res14292","Glo44468"],Glo44468,"Glo44468")

Actual (Unparsed): [[0.8446031]]

Expected (Unparsed): [[0.844603125]]

Actual:   [[0.8447]]

Expected: [[0.8447]]