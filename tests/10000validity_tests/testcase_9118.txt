import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo6435 = tf.keras.layers.Input(shape=([1, 2]))
in0Con7625 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Cro15706 = tf.keras.layers.Input(shape=([4, 3, 3, 2]))
in0Add99799 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Add99799 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con69497 = tf.keras.layers.Input(shape=([2]))

Glo6435 = keras.layers.GlobalAveragePooling1D(name = 'Glo6435', )(in0Glo6435)
ELU91319 = keras.layers.ELU(alpha=6.381929906409923, name = 'ELU91319', )(Glo6435)
Res28617 = keras.layers.Reshape((2, 1), name = 'Res28617', )(ELU91319)
Res10480 = keras.layers.Reshape((2, 1, 1), name = 'Res10480', )(Res28617)
Res89777 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res89777', )(Res10480)
Con7625 = keras.layers.Concatenate(axis=4, name = 'Con7625', )([Res89777,in0Con7625])
Cro15706 = keras.layers.Cropping3D(cropping=((3, 0), (2, 0), (2, 0)), name = 'Cro15706', )(in0Cro15706)
Zer65587 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer65587', )(Cro15706)
Add85155 = keras.layers.Add(name = 'Add85155', )([Con7625,Zer65587])
Res62898 = keras.layers.Reshape((2, 1, 2), name = 'Res62898', )(Add85155)
Res926 = keras.layers.Reshape((2, 2), name = 'Res926', )(Res62898)
Fla65000 = keras.layers.Flatten(name = 'Fla65000', )(Res926)
Add99799 = keras.layers.Add(name = 'Add99799', )([in0Add99799,in1Add99799])
Res31405 = keras.layers.Reshape((2, 1, 1), name = 'Res31405', )(Add99799)
Res13153 = keras.layers.Reshape((2, 1), name = 'Res13153', )(Res31405)
Sim31142 = keras.layers.SimpleRNN(2,name = 'Sim31142', )(Res13153)
Sof99090 = keras.layers.Softmax(axis=1, name = 'Sof99090', )(Sim31142)
Con69497 = keras.layers.Concatenate(axis=1, name = 'Con69497', )([Sof99090,in0Con69497])
Max51308 = keras.layers.Maximum(name = 'Max51308', )([Fla65000,Con69497])
model = tf.keras.models.Model(inputs=[in0Glo6435,in0Con7625,in0Cro15706,in0Add99799,in1Add99799,in0Con69497], outputs=Max51308)
w = model.get_layer('Sim31142').get_weights() 
w[0] = np.array([[10, 10]])
w[1] = np.array([[5, 8], [5, 5]])
w[2] = np.array([9, 3])
model.get_layer('Sim31142').set_weights(w) 
in0Glo6435 = tf.constant([[[1.6014, 1.9241]]])
in0Con7625 = tf.constant([[[[[0.621]]], [[[0.1817]]]]])
in0Cro15706 = tf.constant([[[[[1.1089, 1.0577], [1.3074, 1.5937], [1.7813, 1.6545]], [[1.2499, 1.7253], [1.2099, 1.9058], [1.194, 1.0176]], [[1.6554, 1.9915], [1.5201, 1.3369], [1.1717, 1.4138]]], [[[1.2237, 1.979], [1.8568, 1.7425], [1.7126, 1.7707]], [[1.5868, 1.7161], [1.1966, 1.4009], [1.6289, 1.9651]], [[1.2414, 1.0065], [1.5813, 1.1482], [1.6271, 1.7032]]], [[[1.4147, 1.349], [1.9925, 1.4479], [1.9997, 1.1657]], [[1.8743, 1.3454], [1.3998, 1.0469], [1.657, 1.2729]], [[1.3769, 1.0731], [1.6384, 1.4848], [1.0161, 1.5672]]], [[[1.8843, 1.6813], [1.1077, 1.6275], [1.7969, 1.8778]], [[1.9423, 1.9188], [1.3558, 1.2951], [1.4742, 1.8351]], [[1.801, 1.405], [1.3847, 1.4496], [1.1238, 1.2145]]]]])
in0Add99799 = tf.constant([[[[[0.4396]]], [[[0.5054]]]]])
in1Add99799 = tf.constant([[[[[0.1077]]], [[[0.8461]]]]])
in0Con69497 = tf.constant([[0.7265, 0.0416]])
print (np.array2string(model.predict([in0Glo6435,in0Con7625,in0Cro15706,in0Add99799,in1Add99799,in0Con69497],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max51308.png')

LGlo6435 = global_average_pooling1D_layer([[[1.6014, 1.9241]]], Glo6435), 
LELU91319 = elu_layer(Glo6435, 6.381929906409923, ELU91319), 
LRes28617 = reshape_layer(ELU91319, [2, 1], Res28617), 
LRes10480 = reshape_layer(Res28617, [2, 1, 1], Res10480), 
LRes89777 = reshape_layer(Res10480, [2, 1, 1, 1], Res89777), 
LCon7625 = concatenate_layer([Res89777,[[[[[0.621]]], [[[0.1817]]]]]], 4, Con7625), 
LCro15706 = cropping3D_layer([[[[[1.1089, 1.0577], [1.3074, 1.5937], [1.7813, 1.6545]], [[1.2499, 1.7253], [1.2099, 1.9058], [1.194, 1.0176]], [[1.6554, 1.9915], [1.5201, 1.3369], [1.1717, 1.4138]]], [[[1.2237, 1.979], [1.8568, 1.7425], [1.7126, 1.7707]], [[1.5868, 1.7161], [1.1966, 1.4009], [1.6289, 1.9651]], [[1.2414, 1.0065], [1.5813, 1.1482], [1.6271, 1.7032]]], [[[1.4147, 1.349], [1.9925, 1.4479], [1.9997, 1.1657]], [[1.8743, 1.3454], [1.3998, 1.0469], [1.657, 1.2729]], [[1.3769, 1.0731], [1.6384, 1.4848], [1.0161, 1.5672]]], [[[1.8843, 1.6813], [1.1077, 1.6275], [1.7969, 1.8778]], [[1.9423, 1.9188], [1.3558, 1.2951], [1.4742, 1.8351]], [[1.801, 1.405], [1.3847, 1.4496], [1.1238, 1.2145]]]]], 3, 0, 2, 0, 2, 0, Cro15706), 
LZer65587 = zero_padding3D_layer(Cro15706, 1, 0, 0, 0, 0, 0, Zer65587), 
LAdd85155 = add_layer([Con7625,Zer65587], Add85155), 
LRes62898 = reshape_layer(Add85155, [2, 1, 2], Res62898), 
LRes926 = reshape_layer(Res62898, [2, 2], Res926), 
LFla65000 = flatten_layer(Res926, Fla65000), 
LAdd99799 = add_layer([[[[[[0.4396]]], [[[0.5054]]]]], [[[[[0.1077]]], [[[0.8461]]]]]], Add99799), 
LRes31405 = reshape_layer(Add99799, [2, 1, 1], Res31405), 
LRes13153 = reshape_layer(Res31405, [2, 1], Res13153), 
LSim31142 = simple_rnn_layer(Res13153,[[10, 10]],[[5, 8], [5, 5]],[9, 3], Sim31142), 
LSof99090 = softmax_layer(Sim31142, 1, Sof99090), 
LCon69497 = concatenate_layer([Sof99090,[[0.7265, 0.0416]]], 1, Con69497), 
LMax51308 = maximum_layer([Fla65000,Con69497], Max51308), 
exec_layers([LGlo6435,LELU91319,LRes28617,LRes10480,LRes89777,LCon7625,LCro15706,LZer65587,LAdd85155,LRes62898,LRes926,LFla65000,LAdd99799,LRes31405,LRes13153,LSim31142,LSof99090,LCon69497,LMax51308],["Glo6435","ELU91319","Res28617","Res10480","Res89777","Con7625","Cro15706","Zer65587","Add85155","Res62898","Res926","Fla65000","Add99799","Res31405","Res13153","Sim31142","Sof99090","Con69497","Max51308"],Max51308,"Max51308")

Actual (Unparsed): [[1.6014000, 0.6210000, 3.0479001, 1.3962000]]

Expected (Unparsed): [[1.6014,0.621,3.0479,1.3961999999999999]]

Actual:   [[1.6014, 0.621, 3.048, 1.3962]]

Expected: [[1.6014, 0.621, 3.0479, 1.3962]]