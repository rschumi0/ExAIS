import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_36749 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul6379 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul6379 = tf.keras.layers.Input(shape=([1, 2]))
in0Sub77001 = tf.keras.layers.Input(shape=([3]))
in1Sub77001 = tf.keras.layers.Input(shape=([3]))

Up_36749 = keras.layers.UpSampling1D(size=(1), name = 'Up_36749', )(in0Up_36749)
Mul6379 = keras.layers.Multiply(name = 'Mul6379', )([in0Mul6379,in1Mul6379])
Zer20048 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer20048', )(Mul6379)
Min72978 = keras.layers.Minimum(name = 'Min72978', )([Up_36749,Zer20048])
Sub77001 = keras.layers.Subtract(name = 'Sub77001', )([in0Sub77001,in1Sub77001])
Res42383 = keras.layers.Reshape((3, 1), name = 'Res42383', )(Sub77001)
Res2934 = keras.layers.Reshape((3, 1, 1), name = 'Res2934', )(Res42383)
Glo20372 = keras.layers.GlobalMaxPool2D(name = 'Glo20372', )(Res2934)
Res67365 = keras.layers.Reshape((1, 1), name = 'Res67365', )(Glo20372)
Loc72825 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc72825', )(Res67365)
Zer89022 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer89022', )(Loc72825)
Max75238 = keras.layers.Maximum(name = 'Max75238', )([Min72978,Zer89022])
model = tf.keras.models.Model(inputs=[in0Up_36749,in0Mul6379,in1Mul6379,in0Sub77001,in1Sub77001], outputs=Max75238)
w = model.get_layer('Loc72825').get_weights() 
w[0] = np.array([[[0.2909, 0.4921]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc72825').set_weights(w) 
in0Up_36749 = tf.constant([[[1.8337, 1.3272], [1.7547, 1.9563]]])
in0Mul6379 = tf.constant([[[0.9962, 0.2281]]])
in1Mul6379 = tf.constant([[[0.6104, 0.1553]]])
in0Sub77001 = tf.constant([[0.3786, 0.7048, 0.7463]])
in1Sub77001 = tf.constant([[0.4661, 0.1199, 0.8143]])
print (np.array2string(model.predict([in0Up_36749,in0Mul6379,in1Mul6379,in0Sub77001,in1Sub77001],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max75238.png')

LUp_36749 = up_sampling1D_layer([[[1.8337, 1.3272], [1.7547, 1.9563]]], 1, Up_36749), 
LMul6379 = multiply_layer([[[[0.9962, 0.2281]]], [[[0.6104, 0.1553]]]], Mul6379), 
LZer20048 = zero_padding1D_layer(Mul6379, 1, 0, Zer20048), 
LMin72978 = minimum_layer([Up_36749,Zer20048], Min72978), 
LSub77001 = subtract_layer([[0.3786, 0.7048, 0.7463]], [[0.4661, 0.1199, 0.8143]], Sub77001), 
LRes42383 = reshape_layer(Sub77001, [3, 1], Res42383), 
LRes2934 = reshape_layer(Res42383, [3, 1, 1], Res2934), 
LGlo20372 = global_max_pool2D_layer(Res2934, Glo20372), 
LRes67365 = reshape_layer(Glo20372, [1, 1], Res67365), 
LLoc72825 = locally_connected1D_layer(Res67365, 1,[[[0.2909, 0.4921]]],[[0, 0]], 1, Loc72825), 
LZer89022 = zero_padding1D_layer(Loc72825, 1, 0, Zer89022), 
LMax75238 = maximum_layer([Min72978,Zer89022], Max75238), 
exec_layers([LUp_36749,LMul6379,LZer20048,LMin72978,LSub77001,LRes42383,LRes2934,LGlo20372,LRes67365,LLoc72825,LZer89022,LMax75238],["Up_36749","Mul6379","Zer20048","Min72978","Sub77001","Res42383","Res2934","Glo20372","Res67365","Loc72825","Zer89022","Max75238"],Max75238,"Max75238")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.6080805, 0.2878293]]]

Expected (Unparsed): [[[0,0],[0.60808048,0.28782928999999996]]]

Actual:   [[[0, 0], [0.6081, 0.2879]]]

Expected: [[[0, 0], [0.6081, 0.2879]]]