import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo90345 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con49414 = tf.keras.layers.Input(shape=([1, 1]))
in0Max58870 = tf.keras.layers.Input(shape=([2, 2]))
in1Max58870 = tf.keras.layers.Input(shape=([2, 2]))

Glo90345 = keras.layers.GlobalMaxPool3D(name = 'Glo90345', )(in0Glo90345)
Sof71964 = keras.layers.Softmax(axis=1, name = 'Sof71964', )(Glo90345)
Res47645 = keras.layers.Reshape((1, 1), name = 'Res47645', )(Sof71964)
Con49414 = keras.layers.Concatenate(axis=2, name = 'Con49414', )([Res47645,in0Con49414])
Max58870 = keras.layers.Maximum(name = 'Max58870', )([in0Max58870,in1Max58870])
Per39642 = keras.layers.Permute((2,1), name = 'Per39642',)(Max58870)
Dot24504 = keras.layers.Dot(axes=(2, 2), name = 'Dot24504', )([Con49414,Per39642])
model = tf.keras.models.Model(inputs=[in0Glo90345,in0Con49414,in0Max58870,in1Max58870], outputs=Dot24504)
in0Glo90345 = tf.constant([[[[[1.168], [1.7231]], [[1.3329], [1.3837]]]]])
in0Con49414 = tf.constant([[[0.8131]]])
in0Max58870 = tf.constant([[[0.2596, 0.6367], [0.8176, 0.9107]]])
in1Max58870 = tf.constant([[[0.2035, 0.4864], [0.0153, 0.7991]]])
print (np.array2string(model.predict([in0Glo90345,in0Con49414,in0Max58870,in1Max58870],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot24504.png')

LGlo90345 = global_max_pool3D_layer([[[[[1.168], [1.7231]], [[1.3329], [1.3837]]]]], Glo90345), 
LSof71964 = softmax_layer(Glo90345, 1, Sof71964), 
LRes47645 = reshape_layer(Sof71964, [1, 1], Res47645), 
LCon49414 = concatenate_layer([Res47645,[[[0.8131]]]], 2, Con49414), 
LMax58870 = maximum_layer([[[[0.2596, 0.6367], [0.8176, 0.9107]]], [[[0.2035, 0.4864], [0.0153, 0.7991]]]], Max58870), 
LPer39642 = permute_layer(Max58870, 2,1, Per39642), 
LDot24504 = dot_layer(Con49414,Per39642, 2, 2, Dot24504), 
exec_layers([LGlo90345,LSof71964,LRes47645,LCon49414,LMax58870,LPer39642,LDot24504],["Glo90345","Sof71964","Res47645","Con49414","Max58870","Per39642","Dot24504"],Dot24504,"Dot24504")

Actual (Unparsed): [[[0.9243906, 1.3771901]]]

Expected (Unparsed): [[[0.92439056,1.37719017]]]

Actual:   [[[0.9244, 1.3772]]]

Expected: [[[0.9244, 1.3772]]]