import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con34865 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con50378 = tf.keras.layers.Input(shape=([1, 70]))
in0Up_79748 = tf.keras.layers.Input(shape=([2, 3, 3, 4]))

Con34865 = keras.layers.Conv2D(3, (1, 2),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con34865', )(in0Con34865)
Con18549 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(1, 1), padding='same', name = 'Con18549', )(Con34865)
Res83697 = keras.layers.Reshape((1, 2), name = 'Res83697', )(Con18549)
Con50378 = keras.layers.Concatenate(axis=2, name = 'Con50378', )([Res83697,in0Con50378])
Up_79748 = keras.layers.UpSampling3D(size=(1, 1, 2), name = 'Up_79748', )(in0Up_79748)
Res11365 = keras.layers.Reshape((2, 3, 24), name = 'Res11365', )(Up_79748)
Res56809 = keras.layers.Reshape((2, 72), name = 'Res56809', )(Res11365)
Dot12377 = keras.layers.Dot(axes=(2, 2), name = 'Dot12377', )([Con50378,Res56809])
model = tf.keras.models.Model(inputs=[in0Con34865,in0Con50378,in0Up_79748], outputs=Dot12377)
w = model.get_layer('Con34865').get_weights() 
w[0] = np.array([[[[0.7505, 0.6752, 0.2875], [0.0812, 0.6974, 0.7132]], [[0.7431, 0.9687, 0.989], [0.297, 0.9376, 0.395]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con34865').set_weights(w) 
w = model.get_layer('Con18549').get_weights() 
w[0] = np.array([[[[0.8957, 0.1543, 0.4901], [0.8121, 0.8352, 0.6177]]]])
w[1] = np.array([0, 0])
model.get_layer('Con18549').set_weights(w) 
in0Con34865 = tf.constant([[[[0.882, 0.2359], [0.8381, 0.3001]]]])
in0Con50378 = tf.constant([[[0.0322, 0.0667, 0.0794, 0.0996, 0.4949, 0.5558, 0.6119, 0.3365, 0.4178, 0.976, 0.7646, 0.9141, 0.5578, 0.0071, 0.4204, 0.5663, 0.4297, 0.8217, 0.5636, 0.2113, 0.0027, 0.4871, 0.3481, 0.5354, 0.7037, 0.5127, 0.8999, 0.3988, 0.4994, 0.1385, 0.6252, 0.958, 0.7167, 0.2528, 0.5754, 0.2132, 0.1733, 0.4138, 0.7228, 0.2831, 0.1373, 0.3019, 0.838, 0.0873, 0.6137, 0.0777, 0.0287, 0.2712, 0.4615, 0.5403, 0.8998, 0.149, 0.8879, 0.6852, 0.7236, 0.1588, 0.9367, 0.246, 0.9712, 0.8249, 0.6885, 0.0728, 0.0519, 0.5064, 0.0283, 0.7446, 0.127, 0.2706, 0.9953, 0.6457]]])
in0Up_79748 = tf.constant([[[[[1.9705, 1.4873, 1.0692, 1.1818], [1.3309, 1.1451, 1.7622, 1.8968], [1.766, 1.0387, 1.6187, 1.4572]], [[1.4431, 1.2908, 1.2181, 1.5217], [1.7473, 1.8723, 1.929, 1.5556], [1.2075, 1.0783, 1.4853, 1.3279]], [[1.7655, 1.2375, 1.2868, 1.4119], [1.2818, 1.7798, 1.814, 1.0041], [1.448, 1.5158, 1.0235, 1.4254]]], [[[1.2124, 1.6064, 1.233, 1.1282], [1.415, 1.2417, 1.7944, 1.8968], [1.5748, 1.4867, 1.8063, 1.1997]], [[1.6772, 1.1041, 1.2237, 1.3266], [1.3672, 1.4144, 1.9832, 1.0298], [1.1707, 1.4193, 1.1839, 1.8759]], [[1.2387, 1.4793, 1.9368, 1.4106], [1.6363, 1.8104, 1.229, 1.5405], [1.3841, 1.9446, 1.0348, 1.2442]]]]])
print (np.array2string(model.predict([in0Con34865,in0Con50378,in0Up_79748],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot12377.png')

LCon34865 = conv2D_layer([[[[0.882, 0.2359], [0.8381, 0.3001]]]], 1, 2,[[[[0.7505, 0.6752, 0.2875], [0.0812, 0.6974, 0.7132]], [[0.7431, 0.9687, 0.989], [0.297, 0.9376, 0.395]]]],[0, 0, 0], 1, 1, false, 1, 1, Con34865), 
LCon18549 = conv2D_transpose_layer(Con34865, 1, 1,[[[[0.8957, 0.1543, 0.4901], [0.8121, 0.8352, 0.6177]]]],[0, 0], 1, 1, true, Con18549), 
LRes83697 = reshape_layer(Con18549, [1, 2], Res83697), 
LCon50378 = concatenate_layer([Res83697,[[[0.0322, 0.0667, 0.0794, 0.0996, 0.4949, 0.5558, 0.6119, 0.3365, 0.4178, 0.976, 0.7646, 0.9141, 0.5578, 0.0071, 0.4204, 0.5663, 0.4297, 0.8217, 0.5636, 0.2113, 0.0027, 0.4871, 0.3481, 0.5354, 0.7037, 0.5127, 0.8999, 0.3988, 0.4994, 0.1385, 0.6252, 0.958, 0.7167, 0.2528, 0.5754, 0.2132, 0.1733, 0.4138, 0.7228, 0.2831, 0.1373, 0.3019, 0.838, 0.0873, 0.6137, 0.0777, 0.0287, 0.2712, 0.4615, 0.5403, 0.8998, 0.149, 0.8879, 0.6852, 0.7236, 0.1588, 0.9367, 0.246, 0.9712, 0.8249, 0.6885, 0.0728, 0.0519, 0.5064, 0.0283, 0.7446, 0.127, 0.2706, 0.9953, 0.6457]]]], 2, Con50378), 
LUp_79748 = up_sampling3D_layer([[[[[1.9705, 1.4873, 1.0692, 1.1818], [1.3309, 1.1451, 1.7622, 1.8968], [1.766, 1.0387, 1.6187, 1.4572]], [[1.4431, 1.2908, 1.2181, 1.5217], [1.7473, 1.8723, 1.929, 1.5556], [1.2075, 1.0783, 1.4853, 1.3279]], [[1.7655, 1.2375, 1.2868, 1.4119], [1.2818, 1.7798, 1.814, 1.0041], [1.448, 1.5158, 1.0235, 1.4254]]], [[[1.2124, 1.6064, 1.233, 1.1282], [1.415, 1.2417, 1.7944, 1.8968], [1.5748, 1.4867, 1.8063, 1.1997]], [[1.6772, 1.1041, 1.2237, 1.3266], [1.3672, 1.4144, 1.9832, 1.0298], [1.1707, 1.4193, 1.1839, 1.8759]], [[1.2387, 1.4793, 1.9368, 1.4106], [1.6363, 1.8104, 1.229, 1.5405], [1.3841, 1.9446, 1.0348, 1.2442]]]]], 1, 1, 2, Up_79748), 
LRes11365 = reshape_layer(Up_79748, [2, 3, 24], Res11365), 
LRes56809 = reshape_layer(Res11365, [2, 72], Res56809), 
LDot12377 = dot_layer(Con50378,Res56809, 2, 2, Dot12377), 
exec_layers([LCon34865,LCon18549,LRes83697,LCon50378,LUp_79748,LRes11365,LRes56809,LDot12377],["Con34865","Con18549","Res83697","Con50378","Up_79748","Res11365","Res56809","Dot12377"],Dot12377,"Dot12377")

Actual (Unparsed): [[[56.8863142, 54.9852779]]]

Expected (Unparsed): [[[56.88631407056331,54.98527811872133]]]

Actual:   [[[56.8864, 54.9853]]]

Expected: [[[56.8864, 54.9853]]]