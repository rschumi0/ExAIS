import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave20691 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave20691 = tf.keras.layers.Input(shape=([1, 2]))
in0Dot53250 = tf.keras.layers.Input(shape=([3]))
in1Dot53250 = tf.keras.layers.Input(shape=([3]))

Ave20691 = keras.layers.Average(name = 'Ave20691', )([in0Ave20691,in1Ave20691])
Dot53250 = keras.layers.Dot(axes=(1, 1), name = 'Dot53250', )([in0Dot53250,in1Dot53250])
Res13356 = keras.layers.Reshape((1, 1), name = 'Res13356', )(Dot53250)
PRe39715 = keras.layers.PReLU(name = 'PRe39715', )(Res13356)
Dot89055 = keras.layers.Dot(axes=(1, 1), name = 'Dot89055', )([Ave20691,PRe39715])
Sep76343 = keras.layers.SeparableConv1D(2, (2),strides=(2), padding='valid', name = 'Sep76343', )(Dot89055)
Res6626 = keras.layers.Reshape((1, 2, 1), name = 'Res6626', )(Sep76343)
Con75601 = keras.layers.Conv2DTranspose(4, (1, 2),strides=(1, 1), padding='same', name = 'Con75601', )(Res6626)
model = tf.keras.models.Model(inputs=[in0Ave20691,in1Ave20691,in0Dot53250,in1Dot53250], outputs=Con75601)
w = model.get_layer('PRe39715').get_weights() 
w[0] = np.array([[0.2082]])
model.get_layer('PRe39715').set_weights(w) 
w = model.get_layer('Sep76343').get_weights() 
w[0] = np.array([[[0.4525]], [[0.2648]]])
w[1] = np.array([[[0.1861, 0.2539]]])
w[2] = np.array([0, 0])
model.get_layer('Sep76343').set_weights(w) 
w = model.get_layer('Con75601').get_weights() 
w[0] = np.array([[[[0.8028], [0.0631], [0.6002], [0.1583]], [[0.7867], [0.7263], [0.4831], [0.2232]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con75601').set_weights(w) 
in0Ave20691 = tf.constant([[[0.4111, 0.3774]]])
in1Ave20691 = tf.constant([[[0.3319, 0.7623]]])
in0Dot53250 = tf.constant([[0.4134, 0.4721, 0.7035]])
in1Dot53250 = tf.constant([[0.9175, 0.2901, 0.3216]])
print (np.array2string(model.predict([in0Ave20691,in1Ave20691,in0Dot53250,in1Dot53250],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con75601.png')

LAve20691 = average_layer([[[[0.4111, 0.3774]]], [[[0.3319, 0.7623]]]], Ave20691), 
LDot53250 = dot_layer([[0.4134, 0.4721, 0.7035]], [[0.9175, 0.2901, 0.3216]], 1, 1, Dot53250), 
LRes13356 = reshape_layer(Dot53250, [1, 1], Res13356), 
LPRe39715 = prelu_layer(Res13356, [[0.2082]], PRe39715), 
LDot89055 = dot_layer(Ave20691,PRe39715, 1, 1, Dot89055), 
LSep76343 = separable_conv1D_layer(Dot89055, 2,[[[[0.4525]], [[0.2648]]],[[[0.1861, 0.2539]]]],[0, 0], 2, false, Sep76343), 
LRes6626 = reshape_layer(Sep76343, [1, 2, 1], Res6626), 
LCon75601 = conv2D_transpose_layer(Res6626, 1, 2,[[[[0.8028], [0.0631], [0.6002], [0.1583]], [[0.7867], [0.7263], [0.4831], [0.2232]]]],[0, 0, 0, 0], 1, 1, true, Con75601), 
exec_layers([LAve20691,LDot53250,LRes13356,LPRe39715,LDot89055,LSep76343,LRes6626,LCon75601],["Ave20691","Dot53250","Res13356","PRe39715","Dot89055","Sep76343","Res6626","Con75601"],Con75601,"Con75601")

Actual (Unparsed): [[[[0.0353866, 0.0027814, 0.0264562, 0.0069777], [0.0829556, 0.0358092, 0.0573893, 0.0193582]]]]

Expected (Unparsed): [[[[0.03538659377248723,0.00278138274420023,0.02645619529427857,0.006977700291709926],[0.08295556916533767,0.03580924970905327,0.057389271582605005,0.01935824303612843]]]]

Actual:   [[[[0.0354, 0.0028, 0.0265, 0.007], [0.083, 0.0359, 0.0574, 0.0194]]]]

Expected: [[[[0.0354, 0.0028, 0.0265, 0.007], [0.083, 0.0359, 0.0574, 0.0194]]]]