import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add15478 = tf.keras.layers.Input(shape=([1, 2]))
in1Add15478 = tf.keras.layers.Input(shape=([1, 2]))
in0Con43076 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Add15478 = keras.layers.Add(name = 'Add15478', )([in0Add15478,in1Add15478])
Fla65342 = keras.layers.Flatten(name = 'Fla65342', )(Add15478)
Con43076 = keras.layers.Conv3D(2, (1, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con43076', )(in0Con43076)
Res19191 = keras.layers.Reshape((1, 1, 2), name = 'Res19191', )(Con43076)
Glo40570 = keras.layers.GlobalAveragePooling2D(name = 'Glo40570', )(Res19191)
Max35106 = keras.layers.Maximum(name = 'Max35106', )([Fla65342,Glo40570])
model = tf.keras.models.Model(inputs=[in0Add15478,in1Add15478,in0Con43076], outputs=Max35106)
w = model.get_layer('Con43076').get_weights() 
w[0] = np.array([[[[[0.9759, 0.1782], [0.2838, 0.9853]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con43076').set_weights(w) 
in0Add15478 = tf.constant([[[0.9679, 0.5231]]])
in1Add15478 = tf.constant([[[0.2729, 0.3314]]])
in0Con43076 = tf.constant([[[[[0.1316, 0.7916]]]]])
print (np.array2string(model.predict([in0Add15478,in1Add15478,in0Con43076],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max35106.png')

LAdd15478 = add_layer([[[[0.9679, 0.5231]]], [[[0.2729, 0.3314]]]], Add15478), 
LFla65342 = flatten_layer(Add15478, Fla65342), 
LCon43076 = conv3D_layer([[[[[0.1316, 0.7916]]]]], 1, 1, 1,[[[[[0.9759, 0.1782], [0.2838, 0.9853]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con43076), 
LRes19191 = reshape_layer(Con43076, [1, 1, 2], Res19191), 
LGlo40570 = global_average_pooling2D_layer(Res19191, Glo40570), 
LMax35106 = maximum_layer([Fla65342,Glo40570], Max35106), 
exec_layers([LAdd15478,LFla65342,LCon43076,LRes19191,LGlo40570,LMax35106],["Add15478","Fla65342","Con43076","Res19191","Glo40570","Max35106"],Max35106,"Max35106")

Actual (Unparsed): [[1.2408000, 0.8545000]]

Expected (Unparsed): [[1.2408,0.8545]]

Actual:   [[1.2408, 0.8545]]

Expected: [[1.2408, 0.8545]]