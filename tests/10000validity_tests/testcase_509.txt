import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul76308 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Mul76308 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Mul76308 = keras.layers.Multiply(name = 'Mul76308', )([in0Mul76308,in1Mul76308])
Res21290 = keras.layers.Reshape((1, 2, 1), name = 'Res21290', )(Mul76308)
Loc46873 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 1), name = 'Loc46873', )(Res21290)
Res19689 = keras.layers.Reshape((1, 4), name = 'Res19689', )(Loc46873)
Glo39755 = keras.layers.GlobalAveragePooling1D(name = 'Glo39755', )(Res19689)
Sof86120 = keras.layers.Softmax(axis=1, name = 'Sof86120', )(Glo39755)
model = tf.keras.models.Model(inputs=[in0Mul76308,in1Mul76308], outputs=Sof86120)
w = model.get_layer('Loc46873').get_weights() 
w[0] = np.array([[[0.9732, 0.5903]], [[0.2684, 0.1408]]])
w[1] = np.array([[[0, 0], [0, 0]]])
model.get_layer('Loc46873').set_weights(w) 
in0Mul76308 = tf.constant([[[[[0.1913]], [[0.2119]]]]])
in1Mul76308 = tf.constant([[[[[0.8355]], [[0.9583]]]]])
print (np.array2string(model.predict([in0Mul76308,in1Mul76308],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sof86120.png')

LMul76308 = multiply_layer([[[[[[0.1913]], [[0.2119]]]]], [[[[[0.8355]], [[0.9583]]]]]], Mul76308), 
LRes21290 = reshape_layer(Mul76308, [1, 2, 1], Res21290), 
LLoc46873 = locally_connected2D_layer(Res21290, 1, 1,[[[0.9732, 0.5903]], [[0.2684, 0.1408]]],[[[0, 0], [0, 0]]], 1, 1, Loc46873), 
LRes19689 = reshape_layer(Loc46873, [1, 4], Res19689), 
LGlo39755 = global_average_pooling1D_layer(Res19689, Glo39755), 
LSof86120 = softmax_layer(Glo39755, 1, Sof86120), 
exec_layers([LMul76308,LRes21290,LLoc46873,LRes19689,LGlo39755,LSof86120],["Mul76308","Res21290","Loc46873","Res19689","Glo39755","Sof86120"],Sof86120,"Sof86120")

Actual (Unparsed): [[0.2684348, 0.2524993, 0.2426360, 0.2364299]]

Expected (Unparsed): [[0.26843476380655235,0.25249932406823206,0.24263604412601789,0.23642986799919766]]

Actual:   [[0.2685, 0.2525, 0.2427, 0.2365]]

Expected: [[0.2685, 0.2525, 0.2427, 0.2365]]