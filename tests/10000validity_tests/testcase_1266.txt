import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot38905 = tf.keras.layers.Input(shape=([3]))
in1Dot38905 = tf.keras.layers.Input(shape=([3]))
in0Con22628 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Mul6280 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul6280 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max4611 = tf.keras.layers.Input(shape=([2, 1]))

Dot38905 = keras.layers.Dot(axes=(1, 1), name = 'Dot38905', )([in0Dot38905,in1Dot38905])
ELU77815 = keras.layers.ELU(alpha=7.659470805625876, name = 'ELU77815', )(Dot38905)
Res94826 = keras.layers.Reshape((1, 1), name = 'Res94826', )(ELU77815)
Res50756 = keras.layers.Reshape((1, 1, 1), name = 'Res50756', )(Res94826)
Con22628 = keras.layers.Concatenate(axis=3, name = 'Con22628', )([Res50756,in0Con22628])
Mul6280 = keras.layers.Multiply(name = 'Mul6280', )([in0Mul6280,in1Mul6280])
Max3896 = keras.layers.Maximum(name = 'Max3896', )([Con22628,Mul6280])
ELU92616 = keras.layers.ELU(alpha=-7.52530222828846, name = 'ELU92616', )(Max3896)
Res13774 = keras.layers.Reshape((1, 2), name = 'Res13774', )(ELU92616)
Max4611 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='valid', name = 'Max4611', )(in0Max4611)
Dot76005 = keras.layers.Dot(axes=(1, 1), name = 'Dot76005', )([Res13774,Max4611])
model = tf.keras.models.Model(inputs=[in0Dot38905,in1Dot38905,in0Con22628,in0Mul6280,in1Mul6280,in0Max4611], outputs=Dot76005)
in0Dot38905 = tf.constant([[0.1821, 0.2411, 0.0162]])
in1Dot38905 = tf.constant([[0.3411, 0.4199, 0.2201]])
in0Con22628 = tf.constant([[[[0.4076]]]])
in0Mul6280 = tf.constant([[[[0.5025, 0.2374]]]])
in1Mul6280 = tf.constant([[[[0.7634, 0.8131]]]])
in0Max4611 = tf.constant([[[1.9711], [1.698]]])
print (np.array2string(model.predict([in0Dot38905,in1Dot38905,in0Con22628,in0Mul6280,in1Mul6280,in0Max4611],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot76005.png')

LDot38905 = dot_layer([[0.1821, 0.2411, 0.0162]], [[0.3411, 0.4199, 0.2201]], 1, 1, Dot38905), 
LELU77815 = elu_layer(Dot38905, 7.659470805625876, ELU77815), 
LRes94826 = reshape_layer(ELU77815, [1, 1], Res94826), 
LRes50756 = reshape_layer(Res94826, [1, 1, 1], Res50756), 
LCon22628 = concatenate_layer([Res50756,[[[[0.4076]]]]], 3, Con22628), 
LMul6280 = multiply_layer([[[[[0.5025, 0.2374]]]], [[[[0.7634, 0.8131]]]]], Mul6280), 
LMax3896 = maximum_layer([Con22628,Mul6280], Max3896), 
LELU92616 = elu_layer(Max3896, -7.52530222828846, ELU92616), 
LRes13774 = reshape_layer(ELU92616, [1, 2], Res13774), 
LMax4611 = max_pool1D_layer([[[1.9711], [1.698]]], 2, 1, false, Max4611), 
LDot76005 = dot_layer(Res13774,Max4611, 1, 1, Dot76005), 
exec_layers([LDot38905,LELU77815,LRes94826,LRes50756,LCon22628,LMul6280,LMax3896,LELU92616,LRes13774,LMax4611,LDot76005],["Dot38905","ELU77815","Res94826","Res50756","Con22628","Mul6280","Max3896","ELU92616","Res13774","Max4611","Dot76005"],Dot76005,"Dot76005")

Actual (Unparsed): [[[0.7561307], [0.8034203]]]

Expected (Unparsed): [[[0.75613071435],[0.8034203600000001]]]

Actual:   [[[0.7562], [0.8035]]]

Expected: [[[0.7562], [0.8035]]]