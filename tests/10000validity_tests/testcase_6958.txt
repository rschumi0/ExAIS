import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot84438 = tf.keras.layers.Input(shape=([3]))
in1Dot84438 = tf.keras.layers.Input(shape=([3]))
in0Con38546 = tf.keras.layers.Input(shape=([3, 4, 1]))
in0Max68098 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max68098 = tf.keras.layers.Input(shape=([1, 2, 2]))

Dot84438 = keras.layers.Dot(axes=(1, 1), name = 'Dot84438', )([in0Dot84438,in1Dot84438])
Res74722 = keras.layers.Reshape((1, 1), name = 'Res74722', )(Dot84438)
Res29225 = keras.layers.Reshape((1, 1, 1), name = 'Res29225', )(Res74722)
Zer54702 = keras.layers.ZeroPadding2D(padding=((2, 0), (3, 0)), name = 'Zer54702', )(Res29225)
Con38546 = keras.layers.Concatenate(axis=3, name = 'Con38546', )([Zer54702,in0Con38546])
Max68098 = keras.layers.Maximum(name = 'Max68098', )([in0Max68098,in1Max68098])
Zer44247 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer44247', )(Max68098)
Add41599 = keras.layers.Add(name = 'Add41599', )([Con38546,Zer44247])
model = tf.keras.models.Model(inputs=[in0Dot84438,in1Dot84438,in0Con38546,in0Max68098,in1Max68098], outputs=Add41599)
in0Dot84438 = tf.constant([[0.2719, 0.3163, 0.1806]])
in1Dot84438 = tf.constant([[0.9439, 0.1379, 0.4317]])
in0Con38546 = tf.constant([[[[0.0995], [0.9009], [0.9291], [0.1894]], [[0.963], [0.9151], [0.9701], [0.4635]], [[0.931], [0.2015], [0.8647], [0.9864]]]])
in0Max68098 = tf.constant([[[[0.7609, 0.0615], [0.7645, 0.4645]]]])
in1Max68098 = tf.constant([[[[0.3989, 0.3091], [0.0987, 0.8226]]]])
print (np.array2string(model.predict([in0Dot84438,in1Dot84438,in0Con38546,in0Max68098,in1Max68098],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add41599.png')

LDot84438 = dot_layer([[0.2719, 0.3163, 0.1806]], [[0.9439, 0.1379, 0.4317]], 1, 1, Dot84438), 
LRes74722 = reshape_layer(Dot84438, [1, 1], Res74722), 
LRes29225 = reshape_layer(Res74722, [1, 1, 1], Res29225), 
LZer54702 = zero_padding2D_layer(Res29225, 2, 0, 3, 0, Zer54702), 
LCon38546 = concatenate_layer([Zer54702,[[[[0.0995], [0.9009], [0.9291], [0.1894]], [[0.963], [0.9151], [0.9701], [0.4635]], [[0.931], [0.2015], [0.8647], [0.9864]]]]], 3, Con38546), 
LMax68098 = maximum_layer([[[[[0.7609, 0.0615], [0.7645, 0.4645]]]], [[[[0.3989, 0.3091], [0.0987, 0.8226]]]]], Max68098), 
LZer44247 = zero_padding2D_layer(Max68098, 1, 1, 1, 1, Zer44247), 
LAdd41599 = add_layer([Con38546,Zer44247], Add41599), 
exec_layers([LDot84438,LRes74722,LRes29225,LZer54702,LCon38546,LMax68098,LZer44247,LAdd41599],["Dot84438","Res74722","Res29225","Zer54702","Con38546","Max68098","Zer44247","Add41599"],Add41599,"Add41599")

Actual (Unparsed): [[[[0.0000000, 0.0995000], [0.0000000, 0.9009000], [0.0000000, 0.9291000], [0.0000000, 0.1894000]], [[0.0000000, 0.9630000], [0.7609000, 1.2242000], [0.7645000, 1.7927000], [0.0000000, 0.4635000]], [[0.0000000, 0.9310000], [0.0000000, 0.2015000], [0.0000000, 0.8647000], [0.3782292, 0.9864000]]]]

Expected (Unparsed): [[[[0,0.0995],[0,0.9009],[0,0.9291],[0,0.1894]],[[0,0.963],[0.7609,1.2242],[0.7645,1.7927],[0,0.4635]],[[0,0.931],[0,0.2015],[0,0.8647],[0.3782292,0.9864]]]]

Actual:   [[[[0, 0.0995], [0, 0.9009], [0, 0.9291], [0, 0.1894]], [[0, 0.963], [0.7609, 1.2242], [0.7645, 1.7927], [0, 0.4635]], [[0, 0.931], [0, 0.2015], [0, 0.8647], [0.3783, 0.9864]]]]

Expected: [[[[0, 0.0995], [0, 0.9009], [0, 0.9291], [0, 0.1894]], [[0, 0.963], [0.7609, 1.2242], [0.7645, 1.7927], [0, 0.4635]], [[0, 0.931], [0, 0.2015], [0, 0.8647], [0.3783, 0.9864]]]]