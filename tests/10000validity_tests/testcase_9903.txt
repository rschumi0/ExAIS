import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc82988 = tf.keras.layers.Input(shape=([2, 2]))

Loc82988 = keras.layers.LocallyConnected1D(3, (2),strides=(1), name = 'Loc82988', )(in0Loc82988)
Mas89186 = keras.layers.Masking(mask_value=2, name = 'Mas89186', )(Loc82988)
model = tf.keras.models.Model(inputs=[in0Loc82988], outputs=Mas89186)
w = model.get_layer('Loc82988').get_weights() 
w[0] = np.array([[[0.0282, 0.4553, 0.676], [0.8947, 0.9828, 0.0438], [0.849, 0.1022, 0.0605], [0.2994, 0.7038, 0.0831]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc82988').set_weights(w) 
in0Loc82988 = tf.constant([[[0.3642, 0.1188], [0.8858, 0.4394]]])
print (np.array2string(model.predict([in0Loc82988],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas89186.png')

LLoc82988 = locally_connected1D_layer([[[0.3642, 0.1188], [0.8858, 0.4394]]], 2,[[[0.0282, 0.4553, 0.676], [0.8947, 0.9828, 0.0438], [0.849, 0.1022, 0.0605], [0.2994, 0.7038, 0.0831]]],[[0, 0, 0]], 1, Loc82988), 
LMas89186 = masking_layer(Loc82988, 2, Mas89186), 
exec_layers([LLoc82988,LMas89186],["Loc82988","Mas89186"],Mas89186,"Mas89186")

Actual (Unparsed): [[[1.0001614, 0.6823554, 0.3415077]]]

Expected (Unparsed): [[[1.00016136,0.68235538,0.3415076800000001]]]

Actual:   [[[1.0002, 0.6824, 0.3416]]]

Expected: [[[1.0002, 0.6824, 0.3416]]]