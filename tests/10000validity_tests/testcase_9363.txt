import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot57507 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot57507 = tf.keras.layers.Input(shape=([2, 3]))
in0Bat19716 = tf.keras.layers.Input(shape=([2, 1]))

Dot57507 = keras.layers.Dot(axes=(2, 2), name = 'Dot57507', )([in0Dot57507,in1Dot57507])
Fla49109 = keras.layers.Flatten(name = 'Fla49109', )(Dot57507)
Res10130 = keras.layers.Reshape((4, 1), name = 'Res10130', )(Fla49109)
Bat19716 = keras.layers.BatchNormalization(axis=1, epsilon=0.8335298225326746,  name = 'Bat19716', )(in0Bat19716)
Zer75215 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer75215', )(Bat19716)
Max3836 = keras.layers.Maximum(name = 'Max3836', )([Res10130,Zer75215])
model = tf.keras.models.Model(inputs=[in0Dot57507,in1Dot57507,in0Bat19716], outputs=Max3836)
w = model.get_layer('Bat19716').get_weights() 
w[0] = np.array([0.8638, 0.1146])
w[1] = np.array([0.3458, 0.5226])
w[2] = np.array([0.9777, 0.998])
w[3] = np.array([0.0489, 0.5981])
model.get_layer('Bat19716').set_weights(w) 
in0Dot57507 = tf.constant([[[0.1799, 0.2738, 0.7734], [0.0243, 0.0029, 0.9742]]])
in1Dot57507 = tf.constant([[[0.7467, 0.3427, 0.3481], [0.7935, 0.6627, 0.0901]]])
in0Bat19716 = tf.constant([[[1.9748], [1.0403]]])
print (np.array2string(model.predict([in0Dot57507,in1Dot57507,in0Bat19716],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max3836.png')

LDot57507 = dot_layer([[[0.1799, 0.2738, 0.7734], [0.0243, 0.0029, 0.9742]]], [[[0.7467, 0.3427, 0.3481], [0.7935, 0.6627, 0.0901]]], 2, 2, Dot57507), 
LFla49109 = flatten_layer(Dot57507, Fla49109), 
LRes10130 = reshape_layer(Fla49109, [4, 1], Res10130), 
LBat19716 = batch_normalization_layer([[[1.9748], [1.0403]]], 1, 0.8335298225326746, [0.8638, 0.1146], [0.3458, 0.5226], [0.9777, 0.998], [0.0489, 0.5981], Bat19716), 
LZer75215 = zero_padding1D_layer(Bat19716, 2, 0, Zer75215), 
LMax3836 = maximum_layer([Res10130,Zer75215], Max3836), 
exec_layers([LDot57507,LFla49109,LRes10130,LBat19716,LZer75215,LMax3836],["Dot57507","Fla49109","Res10130","Bat19716","Zer75215","Max3836"],Max3836,"Max3836")

Actual (Unparsed): [[[0.4973831], [0.3938812], [1.2626786], [0.5266514]]]

Expected (Unparsed): [[[0.49738313],[0.39388124999999996],[1.2626785810961219],[0.5266514419131727]]]

Actual:   [[[0.4974], [0.3939], [1.2627], [0.5267]]]

Expected: [[[0.4974], [0.3939], [1.2627], [0.5267]]]