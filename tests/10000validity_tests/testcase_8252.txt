import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add33467 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add33467 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con20931 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0Up_49483 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con30914 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0ReL35556 = tf.keras.layers.Input(shape=([2, 1]))

Add33467 = keras.layers.Add(name = 'Add33467', )([in0Add33467,in1Add33467])
Zer68164 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer68164', )(Add33467)
Con20931 = keras.layers.Concatenate(axis=3, name = 'Con20931', )([Zer68164,in0Con20931])
Up_49483 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_49483', )(in0Up_49483)
Zer55913 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer55913', )(Up_49483)
Add84373 = keras.layers.Add(name = 'Add84373', )([Con20931,Zer55913])
ELU6769 = keras.layers.ELU(alpha=-1.2031630529015107, name = 'ELU6769', )(Add84373)
Con30914 = keras.layers.Concatenate(axis=3, name = 'Con30914', )([ELU6769,in0Con30914])
ReL35556 = keras.layers.ReLU(max_value=7.367651775676554, negative_slope=0.3236584810272535, threshold=6.083723715723527, name = 'ReL35556', input_shape=(2, 1))(in0ReL35556)
Res46606 = keras.layers.Reshape((2, 1, 1), name = 'Res46606', )(ReL35556)
Con50798 = keras.layers.Conv2DTranspose(3, (2, 1),strides=(1, 1), padding='same', name = 'Con50798', )(Res46606)
Zer74558 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer74558', )(Con50798)
Mul38208 = keras.layers.Multiply(name = 'Mul38208', )([Con30914,Zer74558])
model = tf.keras.models.Model(inputs=[in0Add33467,in1Add33467,in0Con20931,in0Up_49483,in0Con30914,in0ReL35556], outputs=Mul38208)
w = model.get_layer('Con50798').get_weights() 
w[0] = np.array([[[[0.342], [0.0304], [0.3689]]], [[[0.2392], [0.9744], [0.5255]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con50798').set_weights(w) 
in0Add33467 = tf.constant([[[[0.5868]], [[0.1064]]]])
in1Add33467 = tf.constant([[[[0.5877]], [[0.5132]]]])
in0Con20931 = tf.constant([[[[0.7279], [0.7554], [0.4915]], [[0.541], [0.9752], [0.515]], [[0.4915], [0.9607], [0.6204]], [[0.7325], [0.7282], [0.6649]]]])
in0Up_49483 = tf.constant([[[[1.9742, 1.6308]], [[1.4126, 1.0954]]]])
in0Con30914 = tf.constant([[[[0.2777], [0.4549], [0.3373]], [[0.9653], [0.8506], [0.3038]], [[0.6101], [0.3089], [0.1226]], [[0.3848], [0.1714], [0.0765]]]])
in0ReL35556 = tf.constant([[[0.5214], [0.8624]]])
print (np.array2string(model.predict([in0Add33467,in1Add33467,in0Con20931,in0Up_49483,in0Con30914,in0ReL35556],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul38208.png')

LAdd33467 = add_layer([[[[[0.5868]], [[0.1064]]]], [[[[0.5877]], [[0.5132]]]]], Add33467), 
LZer68164 = zero_padding2D_layer(Add33467, 1, 1, 1, 1, Zer68164), 
LCon20931 = concatenate_layer([Zer68164,[[[[0.7279], [0.7554], [0.4915]], [[0.541], [0.9752], [0.515]], [[0.4915], [0.9607], [0.6204]], [[0.7325], [0.7282], [0.6649]]]]], 3, Con20931), 
LUp_49483 = up_sampling2D_layer([[[[1.9742, 1.6308]], [[1.4126, 1.0954]]]], 1, 2, Up_49483), 
LZer55913 = zero_padding2D_layer(Up_49483, 2, 0, 1, 0, Zer55913), 
LAdd84373 = add_layer([Con20931,Zer55913], Add84373), 
LELU6769 = elu_layer(Add84373, -1.2031630529015107, ELU6769), 
LCon30914 = concatenate_layer([ELU6769,[[[[0.2777], [0.4549], [0.3373]], [[0.9653], [0.8506], [0.3038]], [[0.6101], [0.3089], [0.1226]], [[0.3848], [0.1714], [0.0765]]]]], 3, Con30914), 
LReL35556 = relu_layer([[[0.5214], [0.8624]]], 7.367651775676554, 0.3236584810272535, 6.083723715723527, ReL35556), 
LRes46606 = reshape_layer(ReL35556, [2, 1, 1], Res46606), 
LCon50798 = conv2D_transpose_layer(Res46606, 2, 1,[[[[0.342], [0.0304], [0.3689]]], [[[0.2392], [0.9744], [0.5255]]]],[0, 0, 0], 1, 1, true, Con50798), 
LZer74558 = zero_padding2D_layer(Con50798, 2, 0, 2, 0, Zer74558), 
LMul38208 = multiply_layer([Con30914,Zer74558], Mul38208), 
exec_layers([LAdd33467,LZer68164,LCon20931,LUp_49483,LZer55913,LAdd84373,LELU6769,LCon30914,LReL35556,LRes46606,LCon50798,LZer74558,LMul38208],["Add33467","Zer68164","Con20931","Up_49483","Zer55913","Add84373","ELU6769","Con30914","ReL35556","Res46606","Con50798","Zer74558","Mul38208"],Mul38208,"Mul38208")

Actual (Unparsed): [[[[-0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000]], [[-0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-0.0000000, 0.0000000, 0.0000000]], [[-0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-1.2155155, -0.1232057, -0.0814221]], [[-0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-1.4247268, -3.1783615, -0.1200643]]]]

Expected (Unparsed): [[[[0,0.0,0.0],[0,0.0,0.0],[0,0.0,0.0]],[[0,0.0,0.0],[0.0,0.0,0.0],[0,0.0,0.0]],[[0,0.0,0.0],[0.0,0.0,0.0],[-1.215515511977123,-0.12320573264277622,-0.08142211462420934]],[[0,0.0,0.0],[0.0,0.0,0.0],[-1.4247267959701306,-3.178361557077908,-0.1200642784307878]]]]

Actual:   [[[[-0, 0, 0], [-0, 0, 0], [-0, 0, 0]], [[-0, 0, 0], [0, 0, 0], [-0, 0, 0]], [[-0, 0, 0], [0, 0, 0], [-1.2155, -0.1232, -0.0814]], [[-0, 0, 0], [0, 0, 0], [-1.4247, -3.1783, -0.12]]]]

Expected: [[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [-1.2155, -0.1232, -0.0814]], [[0, 0, 0], [0, 0, 0], [-1.4247, -3.1783, -0.12]]]]