import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub8885 = tf.keras.layers.Input(shape=([2]))
in1Sub8885 = tf.keras.layers.Input(shape=([2]))
in0Glo2552 = tf.keras.layers.Input(shape=([1, 2]))

Sub8885 = keras.layers.Subtract(name = 'Sub8885', )([in0Sub8885,in1Sub8885])
Glo2552 = keras.layers.GlobalMaxPool1D(name = 'Glo2552', )(in0Glo2552)
Sub31440 = keras.layers.Subtract(name = 'Sub31440', )([Sub8885,Glo2552])
Res94017 = keras.layers.Reshape((2, 1), name = 'Res94017', )(Sub31440)
Glo30959 = keras.layers.GlobalAveragePooling1D(name = 'Glo30959', )(Res94017)
model = tf.keras.models.Model(inputs=[in0Sub8885,in1Sub8885,in0Glo2552], outputs=Glo30959)
in0Sub8885 = tf.constant([[0.8875, 0.4606]])
in1Sub8885 = tf.constant([[0.8766, 0.5972]])
in0Glo2552 = tf.constant([[[1.693, 1.1079]]])
print (np.array2string(model.predict([in0Sub8885,in1Sub8885,in0Glo2552],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo30959.png')

LSub8885 = subtract_layer([[0.8875, 0.4606]], [[0.8766, 0.5972]], Sub8885), 
LGlo2552 = global_max_pool1D_layer([[[1.693, 1.1079]]], Glo2552), 
LSub31440 = subtract_layer(Sub8885,Glo2552, Sub31440), 
LRes94017 = reshape_layer(Sub31440, [2, 1], Res94017), 
LGlo30959 = global_average_pooling1D_layer(Res94017, Glo30959), 
exec_layers([LSub8885,LGlo2552,LSub31440,LRes94017,LGlo30959],["Sub8885","Glo2552","Sub31440","Res94017","Glo30959"],Glo30959,"Glo30959")

Actual (Unparsed): [[-1.4633000]]

Expected (Unparsed): [[-1.4633]]

Actual:   [[-1.4633]]

Expected: [[-1.4633]]