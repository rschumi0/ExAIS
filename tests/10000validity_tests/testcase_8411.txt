import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add21389 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Add21389 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Zer33984 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con64392 = tf.keras.layers.Input(shape=([2, 2]))
in0Ave80875 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave80875 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con95930 = tf.keras.layers.Input(shape=([2, 4]))

Add21389 = keras.layers.Add(name = 'Add21389', )([in0Add21389,in1Add21389])
Res46080 = keras.layers.Reshape((2, 2, 4), name = 'Res46080', )(Add21389)
Res1735 = keras.layers.Reshape((2, 8), name = 'Res1735', )(Res46080)
Zer33984 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer33984', )(in0Zer33984)
ELU97137 = keras.layers.ELU(alpha=-0.2065462506679534, name = 'ELU97137', )(Zer33984)
Res24121 = keras.layers.Reshape((3, 6), name = 'Res24121', )(ELU97137)
Cro68739 = keras.layers.Cropping1D(cropping=((2, 0)), name = 'Cro68739', )(Res24121)
Zer90540 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer90540', )(Cro68739)
Con64392 = keras.layers.Concatenate(axis=2, name = 'Con64392', )([Zer90540,in0Con64392])
Sub10892 = keras.layers.Subtract(name = 'Sub10892', )([Res1735,Con64392])
Ave80875 = keras.layers.Average(name = 'Ave80875', )([in0Ave80875,in1Ave80875])
Res50716 = keras.layers.Reshape((1, 4), name = 'Res50716', )(Ave80875)
Up_75504 = keras.layers.UpSampling1D(size=(1), name = 'Up_75504', )(Res50716)
Zer31051 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer31051', )(Up_75504)
Con95930 = keras.layers.Concatenate(axis=2, name = 'Con95930', )([Zer31051,in0Con95930])
Min67965 = keras.layers.Minimum(name = 'Min67965', )([Sub10892,Con95930])
model = tf.keras.models.Model(inputs=[in0Add21389,in1Add21389,in0Zer33984,in0Con64392,in0Ave80875,in1Ave80875,in0Con95930], outputs=Min67965)
in0Add21389 = tf.constant([[[[[0.5878, 0.1952], [0.4464, 0.7943]], [[0.7376, 0.2267], [0.5932, 0.8773]]], [[[0.027, 0.908], [0.2209, 0.9398]], [[0.8821, 0.5784], [0.9545, 0.1571]]]]])
in1Add21389 = tf.constant([[[[[0.4467, 0.4552], [0.7808, 0.0323]], [[0.1735, 0.1513], [0.7991, 0.0203]]], [[[0.1851, 0.4972], [0.6654, 0.2205]], [[0.1091, 0.8781], [0.309, 0.528]]]]])
in0Zer33984 = tf.constant([[[[1.7255, 1.3445]]]])
in0Con64392 = tf.constant([[[0.1551, 0.631], [0.7909, 0.0855]]])
in0Ave80875 = tf.constant([[[[0.0252, 0.1896], [0.4272, 0.0834]]]])
in1Ave80875 = tf.constant([[[[0.1038, 0.0642], [0.1937, 0.4496]]]])
in0Con95930 = tf.constant([[[0.9394, 0.7816, 0.3764, 0.3421], [0.2114, 0.3346, 0.3504, 0.5485]]])
print (np.array2string(model.predict([in0Add21389,in1Add21389,in0Zer33984,in0Con64392,in0Ave80875,in1Ave80875,in0Con95930],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min67965.png')

LAdd21389 = add_layer([[[[[[0.5878, 0.1952], [0.4464, 0.7943]], [[0.7376, 0.2267], [0.5932, 0.8773]]], [[[0.027, 0.908], [0.2209, 0.9398]], [[0.8821, 0.5784], [0.9545, 0.1571]]]]], [[[[[0.4467, 0.4552], [0.7808, 0.0323]], [[0.1735, 0.1513], [0.7991, 0.0203]]], [[[0.1851, 0.4972], [0.6654, 0.2205]], [[0.1091, 0.8781], [0.309, 0.528]]]]]], Add21389), 
LRes46080 = reshape_layer(Add21389, [2, 2, 4], Res46080), 
LRes1735 = reshape_layer(Res46080, [2, 8], Res1735), 
LZer33984 = zero_padding2D_layer([[[[1.7255, 1.3445]]]], 1, 1, 1, 1, Zer33984), 
LELU97137 = elu_layer(Zer33984, -0.2065462506679534, ELU97137), 
LRes24121 = reshape_layer(ELU97137, [3, 6], Res24121), 
LCro68739 = cropping1D_layer(Res24121, 2, 0, Cro68739), 
LZer90540 = zero_padding1D_layer(Cro68739, 1, 0, Zer90540), 
LCon64392 = concatenate_layer([Zer90540,[[[0.1551, 0.631], [0.7909, 0.0855]]]], 2, Con64392), 
LSub10892 = subtract_layer(Res1735,Con64392, Sub10892), 
LAve80875 = average_layer([[[[[0.0252, 0.1896], [0.4272, 0.0834]]]], [[[[0.1038, 0.0642], [0.1937, 0.4496]]]]], Ave80875), 
LRes50716 = reshape_layer(Ave80875, [1, 4], Res50716), 
LUp_75504 = up_sampling1D_layer(Res50716, 1, Up_75504), 
LZer31051 = zero_padding1D_layer(Up_75504, 1, 0, Zer31051), 
LCon95930 = concatenate_layer([Zer31051,[[[0.9394, 0.7816, 0.3764, 0.3421], [0.2114, 0.3346, 0.3504, 0.5485]]]], 2, Con95930), 
LMin67965 = minimum_layer([Sub10892,Con95930], Min67965), 
exec_layers([LAdd21389,LRes46080,LRes1735,LZer33984,LELU97137,LRes24121,LCro68739,LZer90540,LCon64392,LSub10892,LAve80875,LRes50716,LUp_75504,LZer31051,LCon95930,LMin67965],["Add21389","Res46080","Res1735","Zer33984","ELU97137","Res24121","Cro68739","Zer90540","Con64392","Sub10892","Ave80875","Res50716","Up_75504","Zer31051","Con95930","Min67965"],Min67965,"Min67965")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.9111000, 0.3780000, 0.3764000, 0.2666000], [0.0645000, 0.1269000, 0.3104500, 0.2665000, 0.2114000, 0.3346000, 0.3504000, 0.5485000]]]

Expected (Unparsed): [[[0,0,0,0,0.9111,0.378,0.3764,0.26659999999999995],[0.0645,0.12689999999999999,0.31045,0.2665,0.2114,0.3346,0.3504,0.5485]]]

Actual:   [[[0, 0, 0, 0, 0.9111, 0.378, 0.3764, 0.2666], [0.0645, 0.1269, 0.3105, 0.2665, 0.2114, 0.3346, 0.3504, 0.5485]]]

Expected: [[[0, 0, 0, 0, 0.9111, 0.378, 0.3764, 0.2666], [0.0645, 0.1269, 0.3105, 0.2665, 0.2114, 0.3346, 0.3504, 0.5485]]]