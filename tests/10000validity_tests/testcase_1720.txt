import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add60236 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add60236 = tf.keras.layers.Input(shape=([1, 2, 2]))

Add60236 = keras.layers.Add(name = 'Add60236', )([in0Add60236,in1Add60236])
Con99184 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(12, 1), padding='valid', name = 'Con99184', )(Add60236)
Res5985 = keras.layers.Reshape((12, 8), name = 'Res5985', )(Con99184)
PRe85862 = keras.layers.PReLU(name = 'PRe85862', )(Res5985)
Sim17476 = keras.layers.SimpleRNN(2,name = 'Sim17476', )(PRe85862)
model = tf.keras.models.Model(inputs=[in0Add60236,in1Add60236], outputs=Sim17476)
w = model.get_layer('Con99184').get_weights() 
w[0] = np.array([[[[0.922, 0.1303], [0.4096, 0.8054], [0.5297, 0.3239], [0.4171, 0.7952]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con99184').set_weights(w) 
w = model.get_layer('PRe85862').get_weights() 
w[0] = np.array([[0.3407, 0.9697, 0.743, 0.794, 0.393, 0.5394, 0.5727, 0.2898], [0.7816, 0.4974, 0.7238, 0.0237, 0.4063, 0.1858, 0.833, 0.6641], [0.3535, 0.9307, 0.3198, 0.5347, 0.0589, 0.2351, 0.5979, 0.4422], [0.2327, 0.4873, 0.1258, 0.8718, 0.2178, 0.2802, 0.9569, 0.9221], [0.6581, 0.7824, 0.7365, 0.8976, 0.9688, 0.5956, 0.2839, 0.177], [0.1227, 0.1869, 0.9973, 0.8315, 0.6899, 0.2963, 0.3255, 0.4791], [0.9047, 0.682, 0.4579, 0.0328, 0.7715, 0.1907, 0.2059, 0.3213], [0.8648, 0.4184, 0.7695, 0.0472, 0.535, 0.1594, 0.7131, 0.181], [0.6848, 0.4358, 0.0131, 0.6863, 0.1484, 0.1427, 0.4783, 0.4202], [0.9746, 0.2512, 0.1965, 0.1596, 0.5925, 0.0684, 0.9128, 0.9671], [0.9214, 0.2712, 0.4087, 0.529, 0.9754, 0.3012, 0.0154, 0.6727], [0.4086, 0.2372, 0.3714, 0.0038, 0.7494, 0.447, 0.4132, 0.4878]])
model.get_layer('PRe85862').set_weights(w) 
w = model.get_layer('Sim17476').get_weights() 
w[0] = np.array([[5, 10], [7, 7], [6, 6], [3, 1], [8, 8], [4, 9], [2, 6], [5, 7]])
w[1] = np.array([[1, 7], [10, 10]])
w[2] = np.array([3, 10])
model.get_layer('Sim17476').set_weights(w) 
in0Add60236 = tf.constant([[[[0.0977, 0.5394], [0.6711, 0.5254]]]])
in1Add60236 = tf.constant([[[[0.6562, 0.8391], [0.9918, 0.8675]]]])
print (np.array2string(model.predict([in0Add60236,in1Add60236],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sim17476.png')

LAdd60236 = add_layer([[[[[0.0977, 0.5394], [0.6711, 0.5254]]]], [[[[0.6562, 0.8391], [0.9918, 0.8675]]]]], Add60236), 
LCon99184 = conv2D_transpose_layer(Add60236, 1, 1,[[[[0.922, 0.1303], [0.4096, 0.8054], [0.5297, 0.3239], [0.4171, 0.7952]]]],[0, 0, 0, 0], 12, 1, false, Con99184), 
LRes5985 = reshape_layer(Con99184, [12, 8], Res5985), 
LPRe85862 = prelu_layer(Res5985, [[0.3407, 0.9697, 0.743, 0.794, 0.393, 0.5394, 0.5727, 0.2898], [0.7816, 0.4974, 0.7238, 0.0237, 0.4063, 0.1858, 0.833, 0.6641], [0.3535, 0.9307, 0.3198, 0.5347, 0.0589, 0.2351, 0.5979, 0.4422], [0.2327, 0.4873, 0.1258, 0.8718, 0.2178, 0.2802, 0.9569, 0.9221], [0.6581, 0.7824, 0.7365, 0.8976, 0.9688, 0.5956, 0.2839, 0.177], [0.1227, 0.1869, 0.9973, 0.8315, 0.6899, 0.2963, 0.3255, 0.4791], [0.9047, 0.682, 0.4579, 0.0328, 0.7715, 0.1907, 0.2059, 0.3213], [0.8648, 0.4184, 0.7695, 0.0472, 0.535, 0.1594, 0.7131, 0.181], [0.6848, 0.4358, 0.0131, 0.6863, 0.1484, 0.1427, 0.4783, 0.4202], [0.9746, 0.2512, 0.1965, 0.1596, 0.5925, 0.0684, 0.9128, 0.9671], [0.9214, 0.2712, 0.4087, 0.529, 0.9754, 0.3012, 0.0154, 0.6727], [0.4086, 0.2372, 0.3714, 0.0038, 0.7494, 0.447, 0.4132, 0.4878]], PRe85862), 
LSim17476 = simple_rnn_layer(PRe85862,[[5, 10], [7, 7], [6, 6], [3, 1], [8, 8], [4, 9], [2, 6], [5, 7]],[[1, 7], [10, 10]],[3, 10], Sim17476), 
exec_layers([LAdd60236,LCon99184,LRes5985,LPRe85862,LSim17476],["Add60236","Con99184","Res5985","PRe85862","Sim17476"],Sim17476,"Sim17476")

Actual (Unparsed): [[1.0000000, 1.0000000]]

Expected (Unparsed): [[0.9999999999986171,1.0]]

Actual:   [[1, 1]]

Expected: [[1, 1]]