import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min12877 = tf.keras.layers.Input(shape=([1, 1]))
in1Min12877 = tf.keras.layers.Input(shape=([1, 1]))
in0Con77485 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave67871 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave67871 = tf.keras.layers.Input(shape=([1, 2, 2]))

Min12877 = keras.layers.Minimum(name = 'Min12877', )([in0Min12877,in1Min12877])
Res53741 = keras.layers.Reshape((1, 1, 1), name = 'Res53741', )(Min12877)
Zer58202 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer58202', )(Res53741)
Con77485 = keras.layers.Concatenate(axis=3, name = 'Con77485', )([Zer58202,in0Con77485])
Ave67871 = keras.layers.Average(name = 'Ave67871', )([in0Ave67871,in1Ave67871])
Mul1275 = keras.layers.Multiply(name = 'Mul1275', )([Con77485,Ave67871])
Res71816 = keras.layers.Reshape((1, 4), name = 'Res71816', )(Mul1275)
Per27369 = keras.layers.Permute((1,2), name = 'Per27369',)(Res71816)
model = tf.keras.models.Model(inputs=[in0Min12877,in1Min12877,in0Con77485,in0Ave67871,in1Ave67871], outputs=Per27369)
in0Min12877 = tf.constant([[[0.5722]]])
in1Min12877 = tf.constant([[[0.4961]]])
in0Con77485 = tf.constant([[[[0.9908], [0.2412]]]])
in0Ave67871 = tf.constant([[[[0.1642, 0.0742], [0.9262, 0.912]]]])
in1Ave67871 = tf.constant([[[[0.6235, 0.22], [0.0462, 0.0828]]]])
print (np.array2string(model.predict([in0Min12877,in1Min12877,in0Con77485,in0Ave67871,in1Ave67871],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per27369.png')

LMin12877 = minimum_layer([[[[0.5722]]], [[[0.4961]]]], Min12877), 
LRes53741 = reshape_layer(Min12877, [1, 1, 1], Res53741), 
LZer58202 = zero_padding2D_layer(Res53741, 0, 0, 1, 0, Zer58202), 
LCon77485 = concatenate_layer([Zer58202,[[[[0.9908], [0.2412]]]]], 3, Con77485), 
LAve67871 = average_layer([[[[[0.1642, 0.0742], [0.9262, 0.912]]]], [[[[0.6235, 0.22], [0.0462, 0.0828]]]]], Ave67871), 
LMul1275 = multiply_layer([Con77485,Ave67871], Mul1275), 
LRes71816 = reshape_layer(Mul1275, [1, 4], Res71816), 
LPer27369 = permute_layer(Res71816, 1,2, Per27369), 
exec_layers([LMin12877,LRes53741,LZer58202,LCon77485,LAve67871,LMul1275,LRes71816,LPer27369],["Min12877","Res53741","Zer58202","Con77485","Ave67871","Mul1275","Res71816","Per27369"],Per27369,"Per27369")

Actual (Unparsed): [[[0.0000000, 0.1457467, 0.2412038, 0.1199729]]]

Expected (Unparsed): [[[0.0,0.14574668000000002,0.24120382,0.11997288]]]

Actual:   [[[0, 0.1458, 0.2413, 0.12]]]

Expected: [[[0, 0.1458, 0.2413, 0.12]]]