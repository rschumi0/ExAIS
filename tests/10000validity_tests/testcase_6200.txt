import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub47867 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub47867 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Sub86074 = tf.keras.layers.Input(shape=([3]))
in1Sub86074 = tf.keras.layers.Input(shape=([3]))
in0Con43957 = tf.keras.layers.Input(shape=([6, 3, 1]))

Sub47867 = keras.layers.Subtract(name = 'Sub47867', )([in0Sub47867,in1Sub47867])
Zer8277 = keras.layers.ZeroPadding2D(padding=((4, 0), (1, 0)), name = 'Zer8277', )(Sub47867)
Sub86074 = keras.layers.Subtract(name = 'Sub86074', )([in0Sub86074,in1Sub86074])
Res94052 = keras.layers.Reshape((3, 1), name = 'Res94052', )(Sub86074)
Res82344 = keras.layers.Reshape((3, 1, 1), name = 'Res82344', )(Res94052)
Up_37286 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_37286', )(Res82344)
Zer66713 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer66713', )(Up_37286)
Con43957 = keras.layers.Concatenate(axis=3, name = 'Con43957', )([Zer66713,in0Con43957])
Sub43014 = keras.layers.Subtract(name = 'Sub43014', )([Zer8277,Con43957])
model = tf.keras.models.Model(inputs=[in0Sub47867,in1Sub47867,in0Sub86074,in1Sub86074,in0Con43957], outputs=Sub43014)
in0Sub47867 = tf.constant([[[[0.3221, 0.6442], [0.3741, 0.4485]], [[0.4749, 0.1013], [0.1763, 0.0091]]]])
in1Sub47867 = tf.constant([[[[0.3622, 0.7749], [0.9092, 0.9935]], [[0.3907, 0.1907], [0.3336, 0.4546]]]])
in0Sub86074 = tf.constant([[0.6856, 0.6274, 0.2929]])
in1Sub86074 = tf.constant([[0.8497, 0.227, 0.3104]])
in0Con43957 = tf.constant([[[[0.0024], [0.9873], [0.0524]], [[0.5262], [0.4829], [0.4151]], [[0.2591], [0.3745], [0.3153]], [[0.9159], [0.9601], [0.0176]], [[0.6622], [0.8174], [0.1382]], [[0.4512], [0.3988], [0.1976]]]])
print (np.array2string(model.predict([in0Sub47867,in1Sub47867,in0Sub86074,in1Sub86074,in0Con43957],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub43014.png')

LSub47867 = subtract_layer([[[[0.3221, 0.6442], [0.3741, 0.4485]], [[0.4749, 0.1013], [0.1763, 0.0091]]]], [[[[0.3622, 0.7749], [0.9092, 0.9935]], [[0.3907, 0.1907], [0.3336, 0.4546]]]], Sub47867), 
LZer8277 = zero_padding2D_layer(Sub47867, 4, 0, 1, 0, Zer8277), 
LSub86074 = subtract_layer([[0.6856, 0.6274, 0.2929]], [[0.8497, 0.227, 0.3104]], Sub86074), 
LRes94052 = reshape_layer(Sub86074, [3, 1], Res94052), 
LRes82344 = reshape_layer(Res94052, [3, 1, 1], Res82344), 
LUp_37286 = up_sampling2D_layer(Res82344, 2, 1, Up_37286), 
LZer66713 = zero_padding2D_layer(Up_37286, 0, 0, 2, 0, Zer66713), 
LCon43957 = concatenate_layer([Zer66713,[[[[0.0024], [0.9873], [0.0524]], [[0.5262], [0.4829], [0.4151]], [[0.2591], [0.3745], [0.3153]], [[0.9159], [0.9601], [0.0176]], [[0.6622], [0.8174], [0.1382]], [[0.4512], [0.3988], [0.1976]]]]], 3, Con43957), 
LSub43014 = subtract_layer(Zer8277,Con43957, Sub43014), 
exec_layers([LSub47867,LZer8277,LSub86074,LRes94052,LRes82344,LUp_37286,LZer66713,LCon43957,LSub43014],["Sub47867","Zer8277","Sub86074","Res94052","Res82344","Up_37286","Zer66713","Con43957","Sub43014"],Sub43014,"Sub43014")

Actual (Unparsed): [[[[0.0000000, -0.0024000], [0.0000000, -0.9873000], [0.1641000, -0.0524000]], [[0.0000000, -0.5262000], [0.0000000, -0.4829000], [0.1641000, -0.4151000]], [[0.0000000, -0.2591000], [0.0000000, -0.3745000], [-0.4004000, -0.3153000]], [[0.0000000, -0.9159000], [0.0000000, -0.9601000], [-0.4004000, -0.0176000]], [[0.0000000, -0.6622000], [-0.0401000, -0.9481000], [-0.5176000, -0.6832000]], [[0.0000000, -0.4512000], [0.0842000, -0.4882000], [-0.1398000, -0.6431000]]]]

Expected (Unparsed): [[[[0,-0.0024],[0,-0.9873],[0.16410000000000002,-0.0524]],[[0,-0.5262],[0,-0.4829],[0.16410000000000002,-0.4151]],[[0,-0.2591],[0,-0.3745],[-0.4004,-0.3153]],[[0,-0.9159],[0,-0.9601],[-0.4004,-0.0176]],[[0,-0.6622],[-0.040100000000000025,-0.9481],[-0.5176000000000001,-0.6832]],[[0,-0.4512],[0.0842,-0.48819999999999997],[-0.13979999999999998,-0.6431]]]]

Actual:   [[[[0, -0.0024], [0, -0.9873], [0.1641, -0.0524]], [[0, -0.5262], [0, -0.4829], [0.1641, -0.4151]], [[0, -0.2591], [0, -0.3745], [-0.4004, -0.3153]], [[0, -0.9159], [0, -0.9601], [-0.4004, -0.0176]], [[0, -0.6622], [-0.0401, -0.9481], [-0.5176, -0.6832]], [[0, -0.4512], [0.0842, -0.4882], [-0.1398, -0.6431]]]]

Expected: [[[[0, -0.0024], [0, -0.9873], [0.1642, -0.0524]], [[0, -0.5262], [0, -0.4829], [0.1642, -0.4151]], [[0, -0.2591], [0, -0.3745], [-0.4004, -0.3153]], [[0, -0.9159], [0, -0.9601], [-0.4004, -0.0176]], [[0, -0.6622], [-0.0401, -0.9481], [-0.5176, -0.6832]], [[0, -0.4512], [0.0842, -0.4881], [-0.1397, -0.6431]]]]