import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con26911 = tf.keras.layers.Input(shape=([2, 1]))
in0Con7391 = tf.keras.layers.Input(shape=([3, 3, 3, 1]))
in0Sub22273 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))
in1Sub22273 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))
in0PRe35776 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con65915 = tf.keras.layers.Input(shape=([3, 3, 5]))
in0Min38389 = tf.keras.layers.Input(shape=([2, 2]))
in1Min38389 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot54940 = tf.keras.layers.Input(shape=([2]))
in1Dot54940 = tf.keras.layers.Input(shape=([2]))
in0Con84468 = tf.keras.layers.Input(shape=([3]))
in0Con96830 = tf.keras.layers.Input(shape=([50]))

Con26911 = keras.layers.Conv1D(2, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con26911', )(in0Con26911)
Res6497 = keras.layers.Reshape((1, 2, 1), name = 'Res6497', )(Con26911)
Res75554 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res75554', )(Res6497)
Zer70108 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (2, 0)), name = 'Zer70108', )(Res75554)
Con7391 = keras.layers.Concatenate(axis=4, name = 'Con7391', )([Zer70108,in0Con7391])
Sub22273 = keras.layers.Subtract(name = 'Sub22273', )([in0Sub22273,in1Sub22273])
Mul14353 = keras.layers.Multiply(name = 'Mul14353', )([Con7391,Sub22273])
Res14052 = keras.layers.Reshape((3, 3, 6), name = 'Res14052', )(Mul14353)
PRe35776 = keras.layers.PReLU(name = 'PRe35776', input_shape=(1, 1, 1))(in0PRe35776)
Zer29042 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer29042', )(PRe35776)
Con65915 = keras.layers.Concatenate(axis=3, name = 'Con65915', )([Zer29042,in0Con65915])
Sub35965 = keras.layers.Subtract(name = 'Sub35965', )([Res14052,Con65915])
Res45949 = keras.layers.Reshape((3, 18), name = 'Res45949', )(Sub35965)
Fla2825 = keras.layers.Flatten(name = 'Fla2825', )(Res45949)
Min38389 = keras.layers.Minimum(name = 'Min38389', )([in0Min38389,in1Min38389])
Fla34451 = keras.layers.Flatten(name = 'Fla34451', )(Min38389)
Dot54940 = keras.layers.Dot(axes=(1, 1), name = 'Dot54940', )([in0Dot54940,in1Dot54940])
Res90382 = keras.layers.Reshape((1, 1), name = 'Res90382', )(Dot54940)
Glo89490 = keras.layers.GlobalAveragePooling1D(name = 'Glo89490', )(Res90382)
Con84468 = keras.layers.Concatenate(axis=1, name = 'Con84468', )([Glo89490,in0Con84468])
Sub4824 = keras.layers.Subtract(name = 'Sub4824', )([Fla34451,Con84468])
Con96830 = keras.layers.Concatenate(axis=1, name = 'Con96830', )([Sub4824,in0Con96830])
Sub71815 = keras.layers.Subtract(name = 'Sub71815', )([Fla2825,Con96830])
model = tf.keras.models.Model(inputs=[in0Con26911,in0Con7391,in0Sub22273,in1Sub22273,in0PRe35776,in0Con65915,in0Min38389,in1Min38389,in0Dot54940,in1Dot54940,in0Con84468,in0Con96830], outputs=Sub71815)
w = model.get_layer('Con26911').get_weights() 
w[0] = np.array([[[0.209, 0.5145]], [[0.4807, 0.2767]]])
w[1] = np.array([0, 0])
model.get_layer('Con26911').set_weights(w) 
w = model.get_layer('PRe35776').get_weights() 
w[0] = np.array([[[0.3853]]])
model.get_layer('PRe35776').set_weights(w) 
in0Con26911 = tf.constant([[[0.5218], [0.5824]]])
in0Con7391 = tf.constant([[[[[0.0121], [0.596], [0.9868]], [[0.3299], [0.8693], [0.6997]], [[0.958], [0.7329], [0.7522]]], [[[0.5324], [0.0498], [0.4133]], [[0.9731], [0.2889], [0.3266]], [[0.7496], [0.1332], [0.5159]]], [[[0.1239], [0.7446], [0.6947]], [[0.6026], [0.3283], [0.4808]], [[0.5472], [0.5506], [0.0987]]]]])
in0Sub22273 = tf.constant([[[[[0.9259, 0.1443], [0.7715, 0.7476], [0.1607, 0.9035]], [[0.4553, 0.7391], [0.9645, 0.6624], [0.0452, 0.5101]], [[0.8054, 0.5243], [0.5867, 0.5021], [0.532, 0.6691]]], [[[0.9254, 0.1003], [0.0546, 0.1518], [0.0845, 0.3973]], [[0.6877, 0.9433], [0.8616, 0.8966], [0.7071, 0.8003]], [[0.7782, 0.3656], [0.5657, 0.0827], [0.4936, 0.776]]], [[[0.518, 0.8183], [0.6683, 0.1581], [0.107, 0.1561]], [[0.0551, 0.2406], [0.0855, 0.8483], [0.2827, 0.9466]], [[0.8623, 0.5524], [0.399, 0.1731], [0.4892, 0.5543]]]]])
in1Sub22273 = tf.constant([[[[[0.744, 0.7935], [0.5418, 0.9824], [0.1344, 0.4938]], [[0.9816, 0.6992], [0.6597, 0.8747], [0.2362, 0.8411]], [[0.6114, 0.2368], [0.2838, 0.4062], [0.1997, 0.6017]]], [[[0.4868, 0.3866], [0.7445, 0.8158], [0.2852, 0.6827]], [[0.974, 0.0356], [0.628, 0.4443], [0.9098, 0.4977]], [[0.1993, 0.5425], [0.5729, 0.2391], [0.0805, 0.5908]]], [[[0.4076, 0.3561], [0.4747, 0.3055], [0.8852, 0.4597]], [[0.5196, 0.0277], [0.2261, 0.2216], [0.0141, 0.9079]], [[0.5552, 0.29], [0.0935, 0.5999], [0.0956, 0.3995]]]]])
in0PRe35776 = tf.constant([[[[0.5002]]]])
in0Con65915 = tf.constant([[[[0.6308, 0.6804, 0.4074, 0.9993, 0.9606], [0.8904, 0.3751, 0.2133, 0.6965, 0.6168], [0.6671, 0.5373, 0.5455, 0.2684, 0.4889]], [[0.9462, 0.4658, 0.825, 0.7674, 0.7095], [0.4335, 0.2321, 0.0986, 0.1046, 0.2054], [0.9403, 0.3172, 0.5421, 0.4667, 0.1319]], [[0.4795, 0.1957, 0.8784, 0.906, 0.9435], [0.3422, 0.4469, 0.4488, 0.4024, 0.2708], [0.3257, 0.0107, 0.1819, 0.7987, 0.6306]]]])
in0Min38389 = tf.constant([[[0.3056, 0.1937], [0.1983, 0.1203]]])
in1Min38389 = tf.constant([[[0.6658, 0.0717], [0.1749, 0.8806]]])
in0Dot54940 = tf.constant([[0.3018, 0.205]])
in1Dot54940 = tf.constant([[0.075, 0.9359]])
in0Con84468 = tf.constant([[0.1847, 0.4352, 0.2598]])
in0Con96830 = tf.constant([[0.1456, 0.0591, 0.1309, 0.4908, 0.436, 0.8977, 0.4039, 0.0528, 0.291, 0.1034, 0.0055, 0.4077, 0.3653, 0.2916, 0.2503, 0.1197, 0.1929, 0.0039, 0.3724, 0.1595, 0.1912, 0.9824, 0.6186, 0.5554, 0.981, 0.5114, 0.5217, 0.0933, 0.6898, 0.2735, 0.0749, 0.9398, 0.1732, 0.2509, 0.7404, 0.2255, 0.5026, 0.6896, 0.1003, 0.6918, 0.6487, 0.0434, 0.4833, 0.4793, 0.0168, 0.1136, 0.0891, 0.0154, 0.379, 0.3085]])
print (np.array2string(model.predict([in0Con26911,in0Con7391,in0Sub22273,in1Sub22273,in0PRe35776,in0Con65915,in0Min38389,in1Min38389,in0Dot54940,in1Dot54940,in0Con84468,in0Con96830],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub71815.png')

LCon26911 = conv1D_layer([[[0.5218], [0.5824]]], 2,[[[0.209, 0.5145]], [[0.4807, 0.2767]]],[0, 0], 1, false, 1, Con26911), 
LRes6497 = reshape_layer(Con26911, [1, 2, 1], Res6497), 
LRes75554 = reshape_layer(Res6497, [1, 2, 1, 1], Res75554), 
LZer70108 = zero_padding3D_layer(Res75554, 2, 0, 1, 0, 2, 0, Zer70108), 
LCon7391 = concatenate_layer([Zer70108,[[[[[0.0121], [0.596], [0.9868]], [[0.3299], [0.8693], [0.6997]], [[0.958], [0.7329], [0.7522]]], [[[0.5324], [0.0498], [0.4133]], [[0.9731], [0.2889], [0.3266]], [[0.7496], [0.1332], [0.5159]]], [[[0.1239], [0.7446], [0.6947]], [[0.6026], [0.3283], [0.4808]], [[0.5472], [0.5506], [0.0987]]]]]], 4, Con7391), 
LSub22273 = subtract_layer([[[[[0.9259, 0.1443], [0.7715, 0.7476], [0.1607, 0.9035]], [[0.4553, 0.7391], [0.9645, 0.6624], [0.0452, 0.5101]], [[0.8054, 0.5243], [0.5867, 0.5021], [0.532, 0.6691]]], [[[0.9254, 0.1003], [0.0546, 0.1518], [0.0845, 0.3973]], [[0.6877, 0.9433], [0.8616, 0.8966], [0.7071, 0.8003]], [[0.7782, 0.3656], [0.5657, 0.0827], [0.4936, 0.776]]], [[[0.518, 0.8183], [0.6683, 0.1581], [0.107, 0.1561]], [[0.0551, 0.2406], [0.0855, 0.8483], [0.2827, 0.9466]], [[0.8623, 0.5524], [0.399, 0.1731], [0.4892, 0.5543]]]]], [[[[[0.744, 0.7935], [0.5418, 0.9824], [0.1344, 0.4938]], [[0.9816, 0.6992], [0.6597, 0.8747], [0.2362, 0.8411]], [[0.6114, 0.2368], [0.2838, 0.4062], [0.1997, 0.6017]]], [[[0.4868, 0.3866], [0.7445, 0.8158], [0.2852, 0.6827]], [[0.974, 0.0356], [0.628, 0.4443], [0.9098, 0.4977]], [[0.1993, 0.5425], [0.5729, 0.2391], [0.0805, 0.5908]]], [[[0.4076, 0.3561], [0.4747, 0.3055], [0.8852, 0.4597]], [[0.5196, 0.0277], [0.2261, 0.2216], [0.0141, 0.9079]], [[0.5552, 0.29], [0.0935, 0.5999], [0.0956, 0.3995]]]]], Sub22273), 
LMul14353 = multiply_layer([Con7391,Sub22273], Mul14353), 
LRes14052 = reshape_layer(Mul14353, [3, 3, 6], Res14052), 
LPRe35776 = prelu_layer([[[[0.5002]]]], [[[0.3853]]], PRe35776), 
LZer29042 = zero_padding2D_layer(PRe35776, 2, 0, 2, 0, Zer29042), 
LCon65915 = concatenate_layer([Zer29042,[[[[0.6308, 0.6804, 0.4074, 0.9993, 0.9606], [0.8904, 0.3751, 0.2133, 0.6965, 0.6168], [0.6671, 0.5373, 0.5455, 0.2684, 0.4889]], [[0.9462, 0.4658, 0.825, 0.7674, 0.7095], [0.4335, 0.2321, 0.0986, 0.1046, 0.2054], [0.9403, 0.3172, 0.5421, 0.4667, 0.1319]], [[0.4795, 0.1957, 0.8784, 0.906, 0.9435], [0.3422, 0.4469, 0.4488, 0.4024, 0.2708], [0.3257, 0.0107, 0.1819, 0.7987, 0.6306]]]]], 3, Con65915), 
LSub35965 = subtract_layer(Res14052,Con65915, Sub35965), 
LRes45949 = reshape_layer(Sub35965, [3, 18], Res45949), 
LFla2825 = flatten_layer(Res45949, Fla2825), 
LMin38389 = minimum_layer([[[[0.3056, 0.1937], [0.1983, 0.1203]]], [[[0.6658, 0.0717], [0.1749, 0.8806]]]], Min38389), 
LFla34451 = flatten_layer(Min38389, Fla34451), 
LDot54940 = dot_layer([[0.3018, 0.205]], [[0.075, 0.9359]], 1, 1, Dot54940), 
LRes90382 = reshape_layer(Dot54940, [1, 1], Res90382), 
LGlo89490 = global_average_pooling1D_layer(Res90382, Glo89490), 
LCon84468 = concatenate_layer([Glo89490,[[0.1847, 0.4352, 0.2598]]], 1, Con84468), 
LSub4824 = subtract_layer(Fla34451,Con84468, Sub4824), 
LCon96830 = concatenate_layer([Sub4824,[[0.1456, 0.0591, 0.1309, 0.4908, 0.436, 0.8977, 0.4039, 0.0528, 0.291, 0.1034, 0.0055, 0.4077, 0.3653, 0.2916, 0.2503, 0.1197, 0.1929, 0.0039, 0.3724, 0.1595, 0.1912, 0.9824, 0.6186, 0.5554, 0.981, 0.5114, 0.5217, 0.0933, 0.6898, 0.2735, 0.0749, 0.9398, 0.1732, 0.2509, 0.7404, 0.2255, 0.5026, 0.6896, 0.1003, 0.6918, 0.6487, 0.0434, 0.4833, 0.4793, 0.0168, 0.1136, 0.0891, 0.0154, 0.379, 0.3085]]], 1, Con96830), 
LSub71815 = subtract_layer(Fla2825,Con96830, Sub71815), 
exec_layers([LCon26911,LRes6497,LRes75554,LZer70108,LCon7391,LSub22273,LMul14353,LRes14052,LPRe35776,LZer29042,LCon65915,LSub35965,LRes45949,LFla2825,LMin38389,LFla34451,LDot54940,LRes90382,LGlo89490,LCon84468,LSub4824,LCon96830,LSub71815],["Con26911","Res6497","Res75554","Zer70108","Con7391","Sub22273","Mul14353","Res14052","PRe35776","Zer29042","Con65915","Sub35965","Res45949","Fla2825","Min38389","Fla34451","Dot54940","Res90382","Glo89490","Con84468","Sub4824","Con96830","Sub71815"],Sub71815,"Sub71815")

Actual (Unparsed): [[-0.0911055, -0.5256553, -0.4201000, -0.4078408, -1.1449000, -0.6154080, -0.1309000, -1.3680370, -0.8111000, -1.2955524, -1.1004000, -0.9012007, -0.2910000, -0.4950750, -0.5428000, -0.8829149, -0.6337000, -0.7298017, -0.2503000, -1.2183261, -0.6587000, -0.8619672, -1.1398000, -0.9869558, -0.1912000, -0.5326171, -0.8507000, -0.5233305, -1.0856000, -0.6179708, -0.5217000, -1.1662042, -1.0070000, -0.8364325, -0.5416000, -0.9761553, -0.1732000, -0.6731334, -0.9361000, -1.2136541, -1.4086000, -1.8440109, -0.1003000, -0.9057065, -1.0956000, -0.2864544, -0.7812103, -0.7314930, -0.5170000, -0.2957147, -0.0998000, -0.4322961, -1.0086031, -0.9238212]]

Expected (Unparsed): [[-0.0911055,-0.52565532,-0.42010000000000003,-0.4078408,-1.1449,-0.61540804,-0.1309,-1.36803699,-0.8110999999999999,-1.29555239,-1.1004,-0.9012007,-0.291,-0.49507500000000004,-0.5428,-0.88291489,-0.6337,-0.72980172,-0.2503,-1.21832612,-0.6587,-0.8619671999999999,-1.1398,-0.9869558199999999,-0.1912,-0.53261713,-0.8507,-0.52333053,-1.0856,-0.6179708399999999,-0.5217,-1.16620424,-1.007,-0.83643248,-0.5416,-0.9761553199999999,-0.1732,-0.67313342,-0.9360999999999999,-1.21365404,-1.4086,-1.8440109199999999,-0.1003,-0.90570646,-1.0956000000000001,-0.28645439,-0.781210334632,-0.7314930399999999,-0.517,-0.29571472,-0.0998,-0.43229608,-1.008603071552,-0.9238212400000001]]

Actual:   [[-0.0911, -0.5256, -0.4201, -0.4078, -1.1449, -0.6154, -0.1309, -1.368, -0.8111, -1.2955, -1.1004, -0.9012, -0.291, -0.495, -0.5428, -0.8829, -0.6337, -0.7298, -0.2503, -1.2183, -0.6587, -0.8619, -1.1398, -0.9869, -0.1912, -0.5326, -0.8507, -0.5233, -1.0856, -0.6179, -0.5217, -1.1662, -1.007, -0.8364, -0.5416, -0.9761, -0.1732, -0.6731, -0.9361, -1.2136, -1.4086, -1.844, -0.1003, -0.9057, -1.0956, -0.2864, -0.7812, -0.7314, -0.517, -0.2957, -0.0998, -0.4322, -1.0086, -0.9238]]

Expected: [[-0.0911, -0.5256, -0.4201, -0.4078, -1.1449, -0.6154, -0.1309, -1.368, -0.811, -1.2955, -1.1004, -0.9012, -0.291, -0.495, -0.5428, -0.8829, -0.6337, -0.7298, -0.2503, -1.2183, -0.6587, -0.8619, -1.1398, -0.9869, -0.1912, -0.5326, -0.8507, -0.5233, -1.0856, -0.6179, -0.5217, -1.1662, -1.007, -0.8364, -0.5416, -0.9761, -0.1732, -0.6731, -0.936, -1.2136, -1.4086, -1.844, -0.1003, -0.9057, -1.0956, -0.2864, -0.7812, -0.7314, -0.517, -0.2957, -0.0998, -0.4322, -1.0086, -0.9238]]