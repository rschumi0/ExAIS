import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla50123 = tf.keras.layers.Input(shape=([1, 3, 4]))

Fla50123 = keras.layers.Flatten(name = 'Fla50123', )(in0Fla50123)
Res63422 = keras.layers.Reshape((12, 1), name = 'Res63422', )(Fla50123)
Res46295 = keras.layers.Reshape((12, 1, 1), name = 'Res46295', )(Res63422)
Max78111 = keras.layers.MaxPool2D(pool_size=(5, 1), name = 'Max78111', )(Res46295)
Res27915 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res27915', )(Max78111)
Zer87726 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer87726', )(Res27915)
Res94485 = keras.layers.Reshape((4, 3, 3), name = 'Res94485', )(Zer87726)
Con88255 = keras.layers.Conv2DTranspose(3, (1, 3),strides=(1, 1), padding='same', name = 'Con88255', )(Res94485)
model = tf.keras.models.Model(inputs=[in0Fla50123], outputs=Con88255)
w = model.get_layer('Con88255').get_weights() 
w[0] = np.array([[[[0.9238, 0.7888, 0.677], [0.6758, 0.339, 0.027], [0.5884, 0.3617, 0.8942]], [[0.6418, 0.7685, 0.2876], [0.0694, 0.3993, 0.9203], [0.0479, 0.3532, 0.7938]], [[0.8706, 0.8329, 0.8857], [0.6712, 0.263, 0.1469], [0.7194, 0.1631, 0.6445]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con88255').set_weights(w) 
in0Fla50123 = tf.constant([[[[1.4657, 1.3528, 1.7953, 1.9306], [1.8206, 1.711, 1.9233, 1.667], [1.7372, 1.068, 1.8591, 1.1341]]]])
print (np.array2string(model.predict([in0Fla50123],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con88255.png')

LFla50123 = flatten_layer([[[[1.4657, 1.3528, 1.7953, 1.9306], [1.8206, 1.711, 1.9233, 1.667], [1.7372, 1.068, 1.8591, 1.1341]]]], Fla50123), 
LRes63422 = reshape_layer(Fla50123, [12, 1], Res63422), 
LRes46295 = reshape_layer(Res63422, [12, 1, 1], Res46295), 
LMax78111 = max_pool2D_layer(Res46295, 5, 1, Max78111), 
LRes27915 = reshape_layer(Max78111, [2, 1, 1, 1], Res27915), 
LZer87726 = zero_padding3D_layer(Res27915, 1, 1, 1, 1, 1, 1, Zer87726), 
LRes94485 = reshape_layer(Zer87726, [4, 3, 3], Res94485), 
LCon88255 = conv2D_transpose_layer(Res94485, 1, 3,[[[[0.9238, 0.7888, 0.677], [0.6758, 0.339, 0.027], [0.5884, 0.3617, 0.8942]], [[0.6418, 0.7685, 0.2876], [0.0694, 0.3993, 0.9203], [0.0479, 0.3532, 0.7938]], [[0.8706, 0.8329, 0.8857], [0.6712, 0.263, 0.1469], [0.7194, 0.1631, 0.6445]]]],[0, 0, 0], 1, 1, true, Con88255), 
exec_layers([LFla50123,LRes63422,LRes46295,LMax78111,LRes27915,LZer87726,LRes94485,LCon88255],["Fla50123","Res63422","Res46295","Max78111","Res27915","Zer87726","Res94485","Con88255"],Con88255,"Con88255")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[1.5228573, 0.6544734, 0.6982980], [1.4836661, 0.7708886, 0.6818879], [1.6079968, 0.5077478, 0.3148809]], [[1.5170991, 0.6519987, 0.6956576], [1.4780561, 0.7679737, 0.6793096], [1.6019166, 0.5058279, 0.3136902]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0]],[[1.52285728,0.6544734000000001,0.6982980200000001],[1.4836661,0.77088858,0.6818879200000001],[1.60799674,0.5077478000000001,0.31488086]],[[1.51709904,0.6519987,0.69565761],[1.47805605,0.7679736899999999,0.67930956],[1.60191657,0.5058279,0.31369023]],[[0.0,0.0,0.0],[0.0,0.0,0.0],[0.0,0.0,0.0]]]]

Actual:   [[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[1.5229, 0.6545, 0.6983], [1.4837, 0.7709, 0.6819], [1.608, 0.5078, 0.3149]], [[1.5171, 0.652, 0.6957], [1.4781, 0.768, 0.6794], [1.602, 0.5059, 0.3137]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]]

Expected: [[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[1.5229, 0.6545, 0.6983], [1.4837, 0.7709, 0.6819], [1.608, 0.5078, 0.3149]], [[1.5171, 0.652, 0.6957], [1.4781, 0.768, 0.6794], [1.602, 0.5059, 0.3137]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]]