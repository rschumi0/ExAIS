import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max4803 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max4803 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con52556 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave65197 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave65197 = tf.keras.layers.Input(shape=([1, 1, 2]))

Max4803 = keras.layers.Maximum(name = 'Max4803', )([in0Max4803,in1Max4803])
Res52539 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res52539', )(Max4803)
Cro5605 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 0)), name = 'Cro5605', )(Res52539)
Res64882 = keras.layers.Reshape((1, 1, 1), name = 'Res64882', )(Cro5605)
Res72741 = keras.layers.Reshape((1, 1), name = 'Res72741', )(Res64882)
Con52556 = keras.layers.Concatenate(axis=2, name = 'Con52556', )([Res72741,in0Con52556])
Ave65197 = keras.layers.Average(name = 'Ave65197', )([in0Ave65197,in1Ave65197])
Res11657 = keras.layers.Reshape((1, 2), name = 'Res11657', )(Ave65197)
Dot62235 = keras.layers.Dot(axes=(2, 2), name = 'Dot62235', )([Con52556,Res11657])
model = tf.keras.models.Model(inputs=[in0Max4803,in1Max4803,in0Con52556,in0Ave65197,in1Ave65197], outputs=Dot62235)
in0Max4803 = tf.constant([[[[0.596]]]])
in1Max4803 = tf.constant([[[[0.0633]]]])
in0Con52556 = tf.constant([[[0.6262]]])
in0Ave65197 = tf.constant([[[[0.4958, 0.0077]]]])
in1Ave65197 = tf.constant([[[[0.8228, 0.0499]]]])
print (np.array2string(model.predict([in0Max4803,in1Max4803,in0Con52556,in0Ave65197,in1Ave65197],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot62235.png')

LMax4803 = maximum_layer([[[[[0.596]]]], [[[[0.0633]]]]], Max4803), 
LRes52539 = reshape_layer(Max4803, [1, 1, 1, 1], Res52539), 
LCro5605 = cropping3D_layer(Res52539, 0, 0, 0, 0, 0, 0, Cro5605), 
LRes64882 = reshape_layer(Cro5605, [1, 1, 1], Res64882), 
LRes72741 = reshape_layer(Res64882, [1, 1], Res72741), 
LCon52556 = concatenate_layer([Res72741,[[[0.6262]]]], 2, Con52556), 
LAve65197 = average_layer([[[[[0.4958, 0.0077]]]], [[[[0.8228, 0.0499]]]]], Ave65197), 
LRes11657 = reshape_layer(Ave65197, [1, 2], Res11657), 
LDot62235 = dot_layer(Con52556,Res11657, 2, 2, Dot62235), 
exec_layers([LMax4803,LRes52539,LCro5605,LRes64882,LRes72741,LCon52556,LAve65197,LRes11657,LDot62235],["Max4803","Res52539","Cro5605","Res64882","Res72741","Con52556","Ave65197","Res11657","Dot62235"],Dot62235,"Dot62235")

Actual (Unparsed): [[[0.4109774]]]

Expected (Unparsed): [[[0.41097735999999996]]]

Actual:   [[[0.411]]]

Expected: [[[0.411]]]