import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max20468 = tf.keras.layers.Input(shape=([1, 2]))
in0Con27972 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Mul47239 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul47239 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0LST22209 = tf.keras.layers.Input(shape=([2, 2]))
in0Con79349 = tf.keras.layers.Input(shape=([1]))

Max20468 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max20468', )(in0Max20468)
Res37049 = keras.layers.Reshape((1, 2, 1), name = 'Res37049', )(Max20468)
Res82485 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res82485', )(Res37049)
Cro19428 = keras.layers.Cropping3D(cropping=((0, 0), (1, 0), (0, 0)), name = 'Cro19428', )(Res82485)
Res62862 = keras.layers.Reshape((1, 1, 1), name = 'Res62862', )(Cro19428)
Zer35299 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer35299', )(Res62862)
Con27972 = keras.layers.Concatenate(axis=3, name = 'Con27972', )([Zer35299,in0Con27972])
Mul47239 = keras.layers.Multiply(name = 'Mul47239', )([in0Mul47239,in1Mul47239])
Add22316 = keras.layers.Add(name = 'Add22316', )([Con27972,Mul47239])
Res82549 = keras.layers.Reshape((1, 4), name = 'Res82549', )(Add22316)
Fla33346 = keras.layers.Flatten(name = 'Fla33346', )(Res82549)
LST22209 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST22209', )(in0LST22209)
Con79349 = keras.layers.Concatenate(axis=1, name = 'Con79349', )([LST22209,in0Con79349])
Sub21875 = keras.layers.Subtract(name = 'Sub21875', )([Fla33346,Con79349])
Res24374 = keras.layers.Reshape((4, 1), name = 'Res24374', )(Sub21875)
Up_82086 = keras.layers.UpSampling1D(size=(2), name = 'Up_82086', )(Res24374)
model = tf.keras.models.Model(inputs=[in0Max20468,in0Con27972,in0Mul47239,in1Mul47239,in0LST22209,in0Con79349], outputs=Up_82086)
w = model.get_layer('LST22209').get_weights() 
w[0] = np.array([[1, 2, 1, 8, 9, 10, 5, 8, 3, 8, 7, 5], [7, 6, 10, 2, 2, 10, 1, 5, 2, 7, 1, 5]])
w[1] = np.array([[10, 10, 6, 1, 3, 7, 1, 3, 7, 5, 3, 9], [7, 5, 8, 3, 10, 6, 2, 6, 9, 2, 8, 10], [8, 3, 10, 8, 4, 4, 6, 6, 6, 9, 6, 9]])
w[2] = np.array([8, 5, 2, 3, 1, 6, 3, 5, 8, 3, 8, 1])
model.get_layer('LST22209').set_weights(w) 
in0Max20468 = tf.constant([[[1.4019, 1.2588]]])
in0Con27972 = tf.constant([[[[0.3237], [0.7684]]]])
in0Mul47239 = tf.constant([[[[0.938, 0.9234], [0.2521, 0.9045]]]])
in1Mul47239 = tf.constant([[[[0.9442, 0.4171], [0.6347, 0.7483]]]])
in0LST22209 = tf.constant([[[3, 5], [5, 1]]])
in0Con79349 = tf.constant([[0.0637]])
print (np.array2string(model.predict([in0Max20468,in0Con27972,in0Mul47239,in1Mul47239,in0LST22209,in0Con79349],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_82086.png')

LMax20468 = max_pool1D_layer([[[1.4019, 1.2588]]], 1, Max20468), 
LRes37049 = reshape_layer(Max20468, [1, 2, 1], Res37049), 
LRes82485 = reshape_layer(Res37049, [1, 2, 1, 1], Res82485), 
LCro19428 = cropping3D_layer(Res82485, 0, 0, 1, 0, 0, 0, Cro19428), 
LRes62862 = reshape_layer(Cro19428, [1, 1, 1], Res62862), 
LZer35299 = zero_padding2D_layer(Res62862, 0, 0, 1, 0, Zer35299), 
LCon27972 = concatenate_layer([Zer35299,[[[[0.3237], [0.7684]]]]], 3, Con27972), 
LMul47239 = multiply_layer([[[[[0.938, 0.9234], [0.2521, 0.9045]]]], [[[[0.9442, 0.4171], [0.6347, 0.7483]]]]], Mul47239), 
LAdd22316 = add_layer([Con27972,Mul47239], Add22316), 
LRes82549 = reshape_layer(Add22316, [1, 4], Res82549), 
LFla33346 = flatten_layer(Res82549, Fla33346), 
LLST22209 = lstm_layer([[[3, 5], [5, 1]]],[[1, 2, 1, 8, 9, 10, 5, 8, 3, 8, 7, 5], [7, 6, 10, 2, 2, 10, 1, 5, 2, 7, 1, 5]],[[10, 10, 6, 1, 3, 7, 1, 3, 7, 5, 3, 9], [7, 5, 8, 3, 10, 6, 2, 6, 9, 2, 8, 10], [8, 3, 10, 8, 4, 4, 6, 6, 6, 9, 6, 9]],[8, 5, 2, 3, 1, 6, 3, 5, 8, 3, 8, 1], LST22209), 
LCon79349 = concatenate_layer([LST22209,[[0.0637]]], 1, Con79349), 
LSub21875 = subtract_layer(Fla33346,Con79349, Sub21875), 
LRes24374 = reshape_layer(Sub21875, [4, 1], Res24374), 
LUp_82086 = up_sampling1D_layer(Res24374, 2, Up_82086), 
exec_layers([LMax20468,LRes37049,LRes82485,LCro19428,LRes62862,LZer35299,LCon27972,LMul47239,LAdd22316,LRes82549,LFla33346,LLST22209,LCon79349,LSub21875,LRes24374,LUp_82086],["Max20468","Res37049","Res82485","Cro19428","Res62862","Zer35299","Con27972","Mul47239","Add22316","Res82549","Fla33346","LST22209","Con79349","Sub21875","Res24374","Up_82086"],Up_82086,"Up_82086")

Actual (Unparsed): [[[-0.0783680], [-0.0783680], [-0.2551774], [-0.2551774], [0.4547803], [0.4547803], [1.3815374], [1.3815374]]]

Expected (Unparsed): [[[-0.07836798007581691],[-0.07836798007581691],[-0.2551774400758168],[-0.2551774400758168],[0.45478028992418307],[0.45478028992418307],[1.3815373499999997],[1.3815373499999997]]]

Actual:   [[[-0.0783], [-0.0783], [-0.2551], [-0.2551], [0.4548], [0.4548], [1.3816], [1.3816]]]

Expected: [[[-0.0783], [-0.0783], [-0.2551], [-0.2551], [0.4548], [0.4548], [1.3816], [1.3816]]]