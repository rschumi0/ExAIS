import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot4788 = tf.keras.layers.Input(shape=([3]))
in1Dot4788 = tf.keras.layers.Input(shape=([3]))
in0Con23876 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Dot25879 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot25879 = tf.keras.layers.Input(shape=([3, 2]))
in0Con94025 = tf.keras.layers.Input(shape=([3, 2]))
in0Mul70122 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Mul70122 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Sub66507 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub66507 = tf.keras.layers.Input(shape=([3, 2]))
in0Con57191 = tf.keras.layers.Input(shape=([3, 2]))

Dot4788 = keras.layers.Dot(axes=(1, 1), name = 'Dot4788', )([in0Dot4788,in1Dot4788])
Res10901 = keras.layers.Reshape((1, 1), name = 'Res10901', )(Dot4788)
Res97468 = keras.layers.Reshape((1, 1, 1), name = 'Res97468', )(Res10901)
Res28660 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res28660', )(Res97468)
Con23876 = keras.layers.Concatenate(axis=4, name = 'Con23876', )([Res28660,in0Con23876])
Dot25879 = keras.layers.Dot(axes=(1, 1), name = 'Dot25879', )([in0Dot25879,in1Dot25879])
Zer57344 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer57344', )(Dot25879)
Con94025 = keras.layers.Concatenate(axis=2, name = 'Con94025', )([Zer57344,in0Con94025])
Mul70122 = keras.layers.Multiply(name = 'Mul70122', )([in0Mul70122,in1Mul70122])
Res78858 = keras.layers.Reshape((1, 2, 2), name = 'Res78858', )(Mul70122)
Res51861 = keras.layers.Reshape((1, 4), name = 'Res51861', )(Res78858)
Zer46492 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer46492', )(Res51861)
Sub66507 = keras.layers.Subtract(name = 'Sub66507', )([in0Sub66507,in1Sub66507])
Con57191 = keras.layers.Concatenate(axis=2, name = 'Con57191', )([Sub66507,in0Con57191])
Sub15009 = keras.layers.Subtract(name = 'Sub15009', )([Zer46492,Con57191])
Mul81815 = keras.layers.Multiply(name = 'Mul81815', )([Con94025,Sub15009])
Res15359 = keras.layers.Reshape((3, 4, 1), name = 'Res15359', )(Mul81815)
Res48403 = keras.layers.Reshape((3, 4, 1, 1), name = 'Res48403', )(Res15359)
Con65293 = keras.layers.Conv3D(2, (3, 2, 1),strides=(3, 10, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con65293', )(Res48403)
Add6737 = keras.layers.Add(name = 'Add6737', )([Con23876,Con65293])
model = tf.keras.models.Model(inputs=[in0Dot4788,in1Dot4788,in0Con23876,in0Dot25879,in1Dot25879,in0Con94025,in0Mul70122,in1Mul70122,in0Sub66507,in1Sub66507,in0Con57191], outputs=Add6737)
w = model.get_layer('Con65293').get_weights() 
w[0] = np.array([[[[[0.6825, 0.0407]]], [[[0.797, 0.1263]]]], [[[[0.9927, 0.7411]]], [[[0.5275, 0.682]]]], [[[[0.8197, 0.0188]]], [[[0.1431, 0.9082]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con65293').set_weights(w) 
in0Dot4788 = tf.constant([[0.4469, 0.3761, 0.9386]])
in1Dot4788 = tf.constant([[0.7303, 0.2018, 0.3716]])
in0Con23876 = tf.constant([[[[[0.6653]]]]])
in0Dot25879 = tf.constant([[[0.82, 0.3492], [0.0302, 0.6038], [0.1322, 0.0835]]])
in1Dot25879 = tf.constant([[[0.3815, 0.6029], [0.9838, 0.5823], [0.3437, 0.666]]])
in0Con94025 = tf.constant([[[0.2476, 0.4232], [0.7566, 0.4657], [0.8262, 0.528]]])
in0Mul70122 = tf.constant([[[[[0.3347, 0.9398]], [[0.3648, 0.2835]]]]])
in1Mul70122 = tf.constant([[[[[0.6317, 0.0546]], [[0.5409, 0.323]]]]])
in0Sub66507 = tf.constant([[[0.5439, 0.7981], [0.0275, 0.195], [0.6202, 0.4083]]])
in1Sub66507 = tf.constant([[[0.7951, 0.5603], [0.7469, 0.8742], [0.6463, 0.7424]]])
in0Con57191 = tf.constant([[[0.0434, 0.8434], [0.4442, 0.6877], [0.3421, 0.8341]]])
print (np.array2string(model.predict([in0Dot4788,in1Dot4788,in0Con23876,in0Dot25879,in1Dot25879,in0Con94025,in0Mul70122,in1Mul70122,in0Sub66507,in1Sub66507,in0Con57191],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add6737.png')

LDot4788 = dot_layer([[0.4469, 0.3761, 0.9386]], [[0.7303, 0.2018, 0.3716]], 1, 1, Dot4788), 
LRes10901 = reshape_layer(Dot4788, [1, 1], Res10901), 
LRes97468 = reshape_layer(Res10901, [1, 1, 1], Res97468), 
LRes28660 = reshape_layer(Res97468, [1, 1, 1, 1], Res28660), 
LCon23876 = concatenate_layer([Res28660,[[[[[0.6653]]]]]], 4, Con23876), 
LDot25879 = dot_layer([[[0.82, 0.3492], [0.0302, 0.6038], [0.1322, 0.0835]]], [[[0.3815, 0.6029], [0.9838, 0.5823], [0.3437, 0.666]]], 1, 1, Dot25879), 
LZer57344 = zero_padding1D_layer(Dot25879, 1, 0, Zer57344), 
LCon94025 = concatenate_layer([Zer57344,[[[0.2476, 0.4232], [0.7566, 0.4657], [0.8262, 0.528]]]], 2, Con94025), 
LMul70122 = multiply_layer([[[[[[0.3347, 0.9398]], [[0.3648, 0.2835]]]]], [[[[[0.6317, 0.0546]], [[0.5409, 0.323]]]]]], Mul70122), 
LRes78858 = reshape_layer(Mul70122, [1, 2, 2], Res78858), 
LRes51861 = reshape_layer(Res78858, [1, 4], Res51861), 
LZer46492 = zero_padding1D_layer(Res51861, 2, 0, Zer46492), 
LSub66507 = subtract_layer([[[0.5439, 0.7981], [0.0275, 0.195], [0.6202, 0.4083]]], [[[0.7951, 0.5603], [0.7469, 0.8742], [0.6463, 0.7424]]], Sub66507), 
LCon57191 = concatenate_layer([Sub66507,[[[0.0434, 0.8434], [0.4442, 0.6877], [0.3421, 0.8341]]]], 2, Con57191), 
LSub15009 = subtract_layer(Zer46492,Con57191, Sub15009), 
LMul81815 = multiply_layer([Con94025,Sub15009], Mul81815), 
LRes15359 = reshape_layer(Mul81815, [3, 4, 1], Res15359), 
LRes48403 = reshape_layer(Res15359, [3, 4, 1, 1], Res48403), 
LCon65293 = conv3D_layer(Res48403, 3, 2, 1,[[[[[0.6825, 0.0407]]], [[[0.797, 0.1263]]]], [[[[0.9927, 0.7411]]], [[[0.5275, 0.682]]]], [[[[0.8197, 0.0188]]], [[[0.1431, 0.9082]]]]],[0, 0], 3, 10, 1, true, 1, 1, 1, Con65293), 
LAdd6737 = add_layer([Con23876,Con65293], Add6737), 
exec_layers([LDot4788,LRes10901,LRes97468,LRes28660,LCon23876,LDot25879,LZer57344,LCon94025,LMul70122,LRes78858,LRes51861,LZer46492,LSub66507,LCon57191,LSub15009,LMul81815,LRes15359,LRes48403,LCon65293,LAdd6737],["Dot4788","Res10901","Res97468","Res28660","Con23876","Dot25879","Zer57344","Con94025","Mul70122","Res78858","Res51861","Zer46492","Sub66507","Con57191","Sub15009","Mul81815","Res15359","Res48403","Con65293","Add6737"],Add6737,"Add6737")

Actual (Unparsed): [[[[[1.4243488, 1.3696854]]]]]

Expected (Unparsed): [[[[[1.424348768665876,1.3696853355039702]]]]]

Actual:   [[[[[1.4244, 1.3697]]]]]

Expected: [[[[[1.4244, 1.3697]]]]]