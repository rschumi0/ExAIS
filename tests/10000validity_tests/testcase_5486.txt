import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ReL40998 = tf.keras.layers.Input(shape=([1, 2]))
in0Glo60678 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con57355 = tf.keras.layers.Input(shape=([1]))
in0Con99422 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Glo24146 = tf.keras.layers.Input(shape=([1, 1]))
in0Con34263 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Add79775 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Add79775 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

ReL40998 = keras.layers.ReLU(max_value=2.816879091987847, negative_slope=7.932138574095122, threshold=4.594177691042159, name = 'ReL40998', input_shape=(1, 2))(in0ReL40998)
Fla19385 = keras.layers.Flatten(name = 'Fla19385', )(ReL40998)
Glo60678 = keras.layers.GlobalMaxPool3D(name = 'Glo60678', )(in0Glo60678)
Con57355 = keras.layers.Concatenate(axis=1, name = 'Con57355', )([Glo60678,in0Con57355])
Min78990 = keras.layers.Minimum(name = 'Min78990', )([Fla19385,Con57355])
Res83068 = keras.layers.Reshape((2, 1), name = 'Res83068', )(Min78990)
Res73940 = keras.layers.Reshape((2, 1, 1), name = 'Res73940', )(Res83068)
Res83146 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res83146', )(Res73940)
Zer93278 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer93278', )(Res83146)
Con99422 = keras.layers.Concatenate(axis=4, name = 'Con99422', )([Zer93278,in0Con99422])
Glo24146 = keras.layers.GlobalAveragePooling1D(name = 'Glo24146', )(in0Glo24146)
Res36384 = keras.layers.Reshape((1, 1), name = 'Res36384', )(Glo24146)
Res1259 = keras.layers.Reshape((1, 1, 1), name = 'Res1259', )(Res36384)
Res18419 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res18419', )(Res1259)
Zer87145 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer87145', )(Res18419)
Con34263 = keras.layers.Concatenate(axis=4, name = 'Con34263', )([Zer87145,in0Con34263])
Add79775 = keras.layers.Add(name = 'Add79775', )([in0Add79775,in1Add79775])
Ave36843 = keras.layers.Average(name = 'Ave36843', )([Con34263,Add79775])
PRe43967 = keras.layers.PReLU(name = 'PRe43967', )(Ave36843)
Ave56380 = keras.layers.Average(name = 'Ave56380', )([Con99422,PRe43967])
Res56985 = keras.layers.Reshape((2, 2, 4), name = 'Res56985', )(Ave56380)
Zer96598 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer96598', )(Res56985)
model = tf.keras.models.Model(inputs=[in0ReL40998,in0Glo60678,in0Con57355,in0Con99422,in0Glo24146,in0Con34263,in0Add79775,in1Add79775], outputs=Zer96598)
w = model.get_layer('PRe43967').get_weights() 
w[0] = np.array([[[[0.6749, 0.7684], [0.8588, 0.1401]], [[0.855, 0.5364], [0.4608, 0.6858]]], [[[0.6782, 0.0863], [0.7987, 0.0413]], [[0.4978, 0.7728], [0.7678, 0.0916]]]])
model.get_layer('PRe43967').set_weights(w) 
in0ReL40998 = tf.constant([[[0.9775, 0.0249]]])
in0Glo60678 = tf.constant([[[[[1.6186]]]]])
in0Con57355 = tf.constant([[0.4504]])
in0Con99422 = tf.constant([[[[[0.6527], [0.901]], [[0.9635], [0.3679]]], [[[0.99], [0.745]], [[0.6323], [0.2332]]]]])
in0Glo24146 = tf.constant([[[1.1028]]])
in0Con34263 = tf.constant([[[[[0.5131], [0.9973]], [[0.58], [0.0708]]], [[[0.5568], [0.7076]], [[0.8442], [0.246]]]]])
in0Add79775 = tf.constant([[[[[0.4691, 0.6671], [0.0206, 0.6851]], [[0.2231, 0.0147], [0.6614, 0.3272]]], [[[0.5399, 0.8948], [0.9787, 0.7256]], [[0.6935, 0.3115], [0.0559, 0.9958]]]]])
in1Add79775 = tf.constant([[[[[0.0657, 0.2869], [0.7162, 0.6671]], [[0.252, 0.8598], [0.6254, 0.5848]]], [[[0.1049, 0.5102], [0.1099, 0.0152]], [[0.3902, 0.1196], [0.1859, 0.2914]]]]])
print (np.array2string(model.predict([in0ReL40998,in0Glo60678,in0Con57355,in0Con99422,in0Glo24146,in0Con34263,in0Add79775,in1Add79775],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer96598.png')

LReL40998 = relu_layer([[[0.9775, 0.0249]]], 2.816879091987847, 7.932138574095122, 4.594177691042159, ReL40998), 
LFla19385 = flatten_layer(ReL40998, Fla19385), 
LGlo60678 = global_max_pool3D_layer([[[[[1.6186]]]]], Glo60678), 
LCon57355 = concatenate_layer([Glo60678,[[0.4504]]], 1, Con57355), 
LMin78990 = minimum_layer([Fla19385,Con57355], Min78990), 
LRes83068 = reshape_layer(Min78990, [2, 1], Res83068), 
LRes73940 = reshape_layer(Res83068, [2, 1, 1], Res73940), 
LRes83146 = reshape_layer(Res73940, [2, 1, 1, 1], Res83146), 
LZer93278 = zero_padding3D_layer(Res83146, 0, 0, 1, 0, 1, 0, Zer93278), 
LCon99422 = concatenate_layer([Zer93278,[[[[[0.6527], [0.901]], [[0.9635], [0.3679]]], [[[0.99], [0.745]], [[0.6323], [0.2332]]]]]], 4, Con99422), 
LGlo24146 = global_average_pooling1D_layer([[[1.1028]]], Glo24146), 
LRes36384 = reshape_layer(Glo24146, [1, 1], Res36384), 
LRes1259 = reshape_layer(Res36384, [1, 1, 1], Res1259), 
LRes18419 = reshape_layer(Res1259, [1, 1, 1, 1], Res18419), 
LZer87145 = zero_padding3D_layer(Res18419, 1, 0, 1, 0, 1, 0, Zer87145), 
LCon34263 = concatenate_layer([Zer87145,[[[[[0.5131], [0.9973]], [[0.58], [0.0708]]], [[[0.5568], [0.7076]], [[0.8442], [0.246]]]]]], 4, Con34263), 
LAdd79775 = add_layer([[[[[[0.4691, 0.6671], [0.0206, 0.6851]], [[0.2231, 0.0147], [0.6614, 0.3272]]], [[[0.5399, 0.8948], [0.9787, 0.7256]], [[0.6935, 0.3115], [0.0559, 0.9958]]]]], [[[[[0.0657, 0.2869], [0.7162, 0.6671]], [[0.252, 0.8598], [0.6254, 0.5848]]], [[[0.1049, 0.5102], [0.1099, 0.0152]], [[0.3902, 0.1196], [0.1859, 0.2914]]]]]], Add79775), 
LAve36843 = average_layer([Con34263,Add79775], Ave36843), 
LPRe43967 = prelu_layer(Ave36843, [[[[0.6749, 0.7684], [0.8588, 0.1401]], [[0.855, 0.5364], [0.4608, 0.6858]]], [[[0.6782, 0.0863], [0.7987, 0.0413]], [[0.4978, 0.7728], [0.7678, 0.0916]]]], PRe43967), 
LAve56380 = average_layer([Con99422,PRe43967], Ave56380), 
LRes56985 = reshape_layer(Ave56380, [2, 2, 4], Res56985), 
LZer96598 = zero_padding2D_layer(Res56985, 1, 1, 1, 1, Zer96598), 
exec_layers([LReL40998,LFla19385,LGlo60678,LCon57355,LMin78990,LRes83068,LRes73940,LRes83146,LZer93278,LCon99422,LGlo24146,LRes36384,LRes1259,LRes18419,LZer87145,LCon34263,LAdd79775,LAve36843,LPRe43967,LAve56380,LRes56985,LZer96598],["ReL40998","Fla19385","Glo60678","Con57355","Min78990","Res83068","Res73940","Res83146","Zer93278","Con99422","Glo24146","Res36384","Res1259","Res18419","Zer87145","Con34263","Add79775","Ave36843","PRe43967","Ave56380","Res56985","Zer96598"],Zer96598,"Zer96598")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.1337000, 0.6931250, 0.1842000, 1.0378750], [0.1187750, 0.8453750, -14.0222942, 0.4296500], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.1612000, 0.9854500, 0.2721500, 0.7346000], [0.2709250, 0.6349750, -17.7859219, 0.4999000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0.1337,0.693125,0.18419999999999997,1.037875],[0.11877499999999999,0.845375,-14.022294311592395,0.42965],[0,0,0,0]],[[0,0,0,0],[0.1612,0.9854499999999999,0.27215,0.7345999999999999],[0.27092499999999997,0.634975,-17.7859219144339,0.49989999999999996],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]]

Actual:   [[[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.1337, 0.6932, 0.1842, 1.0379], [0.1188, 0.8454, -14.0222, 0.4297], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.1612, 0.9855, 0.2722, 0.7346], [0.271, 0.635, -17.7859, 0.4999], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]

Expected: [[[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.1337, 0.6932, 0.1842, 1.0379], [0.1188, 0.8454, -14.0222, 0.4297], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.1612, 0.9855, 0.2722, 0.7346], [0.271, 0.635, -17.7859, 0.4999], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]