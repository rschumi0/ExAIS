import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add41679 = tf.keras.layers.Input(shape=([2, 2]))
in1Add41679 = tf.keras.layers.Input(shape=([2, 2]))
in0Con81627 = tf.keras.layers.Input(shape=([4, 4, 5, 2]))
in0Sub82147 = tf.keras.layers.Input(shape=([2, 2, 3, 3]))
in1Sub82147 = tf.keras.layers.Input(shape=([2, 2, 3, 3]))

Add41679 = keras.layers.Add(name = 'Add41679', )([in0Add41679,in1Add41679])
Res7381 = keras.layers.Reshape((2, 2, 1), name = 'Res7381', )(Add41679)
Up_15250 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_15250', )(Res7381)
Res131 = keras.layers.Reshape((4, 4, 1, 1), name = 'Res131', )(Up_15250)
Zer59417 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (4, 0)), name = 'Zer59417', )(Res131)
Con81627 = keras.layers.Concatenate(axis=4, name = 'Con81627', )([Zer59417,in0Con81627])
Sub82147 = keras.layers.Subtract(name = 'Sub82147', )([in0Sub82147,in1Sub82147])
Zer14232 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (2, 0)), name = 'Zer14232', )(Sub82147)
Min45001 = keras.layers.Minimum(name = 'Min45001', )([Con81627,Zer14232])
model = tf.keras.models.Model(inputs=[in0Add41679,in1Add41679,in0Con81627,in0Sub82147,in1Sub82147], outputs=Min45001)
in0Add41679 = tf.constant([[[0.8059, 0.8735], [0.5042, 0.4384]]])
in1Add41679 = tf.constant([[[0.1034, 0.3957], [0.374, 0.7495]]])
in0Con81627 = tf.constant([[[[[0.6349, 0.0243], [0.4348, 0.5759], [0.4117, 0.2408], [0.4805, 0.5623], [0.1079, 0.9738]], [[0.5588, 0.0617], [0.6289, 0.1632], [0.0393, 0.6451], [0.3461, 0.2988], [0.5925, 0.6475]], [[0.9548, 0.0817], [0.422, 0.9049], [0.5852, 0.8415], [0.0349, 0.9029], [0.699, 0.7757]], [[0.8573, 0.917], [0.1114, 0.1751], [0.4478, 0.0852], [0.8135, 0.6721], [0.5411, 0.9943]]], [[[0.1394, 0.2083], [0.6606, 0.2846], [0.2221, 0.8556], [0.5796, 0.9821], [0.6104, 0.8443]], [[0.4834, 0.7519], [0.3853, 0.1522], [0.285, 0.0336], [0.1026, 0.7939], [0.1811, 0.0679]], [[0.4167, 0.5081], [0.2037, 0.1507], [0.2946, 0.8897], [0.2121, 0.0645], [0.3162, 0.1381]], [[0.5052, 0.5253], [0.674, 0.4985], [0.9869, 0.6582], [0.1385, 0.1648], [0.6107, 0.9677]]], [[[0.431, 0.8802], [0.6496, 0.0057], [0.1615, 0.7219], [0.1904, 0.9548], [0.7309, 0.5914]], [[0.1355, 0.6427], [0.3715, 0.7434], [0.9087, 0.0858], [0.8046, 0.2795], [0.0109, 0.5142]], [[0.8325, 0.9134], [0.5456, 0.9788], [0.5495, 0.4668], [0.8461, 0.0586], [0.7545, 0.4964]], [[0.3736, 0.8938], [0.5823, 0.1717], [0.1285, 0.754], [0.3281, 0.0232], [0.9193, 0.6179]]], [[[0.9353, 0.4644], [0.9669, 0.7885], [0.6424, 0.0532], [0.4876, 0.3975], [0.8362, 0.3042]], [[0.0935, 0.7626], [0.2508, 0.4873], [0.0786, 0.9522], [0.2648, 0.2582], [0.9151, 0.5863]], [[0.2031, 0.1525], [0.5756, 0.8561], [0.2268, 0.9458], [0.6195, 0.9785], [0.609, 0.6327]], [[0.3321, 0.8216], [0.9362, 0.3104], [0.5895, 0.2312], [0.0496, 0.5664], [0.5392, 0.6708]]]]])
in0Sub82147 = tf.constant([[[[[0.8751, 0.2502, 0.5174], [0.0545, 0.5819, 0.5023], [0.9571, 0.2815, 0.6097]], [[0.5911, 0.3881, 0.8934], [0.1558, 0.5953, 0.3338], [0.6861, 0.1993, 0.4041]]], [[[0.6469, 0.3385, 0.6088], [0.7137, 0.3782, 0.6559], [0.7602, 0.0049, 0.2485]], [[0.1953, 0.395, 0.1727], [0.6997, 0.4966, 0.8259], [0.2782, 0.7783, 0.4566]]]]])
in1Sub82147 = tf.constant([[[[[0.0192, 0.9706, 0.9084], [0.4751, 0.5243, 0.4889], [0.9488, 0.8827, 0.6999]], [[0.7934, 0.7968, 0.8127], [0.1965, 0.3012, 0.2016], [0.1202, 0.1936, 0.9021]]], [[[0.3789, 0.1723, 0.4598], [0.4183, 0.4824, 0.331], [0.9109, 0.4383, 0.9797]], [[0.7358, 0.9697, 0.5001], [0.5046, 0.5551, 0.7006], [0.9328, 0.8146, 0.2199]]]]])
print (np.array2string(model.predict([in0Add41679,in1Add41679,in0Con81627,in0Sub82147,in1Sub82147],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min45001.png')

LAdd41679 = add_layer([[[[0.8059, 0.8735], [0.5042, 0.4384]]], [[[0.1034, 0.3957], [0.374, 0.7495]]]], Add41679), 
LRes7381 = reshape_layer(Add41679, [2, 2, 1], Res7381), 
LUp_15250 = up_sampling2D_layer(Res7381, 2, 2, Up_15250), 
LRes131 = reshape_layer(Up_15250, [4, 4, 1, 1], Res131), 
LZer59417 = zero_padding3D_layer(Res131, 0, 0, 0, 0, 4, 0, Zer59417), 
LCon81627 = concatenate_layer([Zer59417,[[[[[0.6349, 0.0243], [0.4348, 0.5759], [0.4117, 0.2408], [0.4805, 0.5623], [0.1079, 0.9738]], [[0.5588, 0.0617], [0.6289, 0.1632], [0.0393, 0.6451], [0.3461, 0.2988], [0.5925, 0.6475]], [[0.9548, 0.0817], [0.422, 0.9049], [0.5852, 0.8415], [0.0349, 0.9029], [0.699, 0.7757]], [[0.8573, 0.917], [0.1114, 0.1751], [0.4478, 0.0852], [0.8135, 0.6721], [0.5411, 0.9943]]], [[[0.1394, 0.2083], [0.6606, 0.2846], [0.2221, 0.8556], [0.5796, 0.9821], [0.6104, 0.8443]], [[0.4834, 0.7519], [0.3853, 0.1522], [0.285, 0.0336], [0.1026, 0.7939], [0.1811, 0.0679]], [[0.4167, 0.5081], [0.2037, 0.1507], [0.2946, 0.8897], [0.2121, 0.0645], [0.3162, 0.1381]], [[0.5052, 0.5253], [0.674, 0.4985], [0.9869, 0.6582], [0.1385, 0.1648], [0.6107, 0.9677]]], [[[0.431, 0.8802], [0.6496, 0.0057], [0.1615, 0.7219], [0.1904, 0.9548], [0.7309, 0.5914]], [[0.1355, 0.6427], [0.3715, 0.7434], [0.9087, 0.0858], [0.8046, 0.2795], [0.0109, 0.5142]], [[0.8325, 0.9134], [0.5456, 0.9788], [0.5495, 0.4668], [0.8461, 0.0586], [0.7545, 0.4964]], [[0.3736, 0.8938], [0.5823, 0.1717], [0.1285, 0.754], [0.3281, 0.0232], [0.9193, 0.6179]]], [[[0.9353, 0.4644], [0.9669, 0.7885], [0.6424, 0.0532], [0.4876, 0.3975], [0.8362, 0.3042]], [[0.0935, 0.7626], [0.2508, 0.4873], [0.0786, 0.9522], [0.2648, 0.2582], [0.9151, 0.5863]], [[0.2031, 0.1525], [0.5756, 0.8561], [0.2268, 0.9458], [0.6195, 0.9785], [0.609, 0.6327]], [[0.3321, 0.8216], [0.9362, 0.3104], [0.5895, 0.2312], [0.0496, 0.5664], [0.5392, 0.6708]]]]]], 4, Con81627), 
LSub82147 = subtract_layer([[[[[0.8751, 0.2502, 0.5174], [0.0545, 0.5819, 0.5023], [0.9571, 0.2815, 0.6097]], [[0.5911, 0.3881, 0.8934], [0.1558, 0.5953, 0.3338], [0.6861, 0.1993, 0.4041]]], [[[0.6469, 0.3385, 0.6088], [0.7137, 0.3782, 0.6559], [0.7602, 0.0049, 0.2485]], [[0.1953, 0.395, 0.1727], [0.6997, 0.4966, 0.8259], [0.2782, 0.7783, 0.4566]]]]], [[[[[0.0192, 0.9706, 0.9084], [0.4751, 0.5243, 0.4889], [0.9488, 0.8827, 0.6999]], [[0.7934, 0.7968, 0.8127], [0.1965, 0.3012, 0.2016], [0.1202, 0.1936, 0.9021]]], [[[0.3789, 0.1723, 0.4598], [0.4183, 0.4824, 0.331], [0.9109, 0.4383, 0.9797]], [[0.7358, 0.9697, 0.5001], [0.5046, 0.5551, 0.7006], [0.9328, 0.8146, 0.2199]]]]], Sub82147), 
LZer14232 = zero_padding3D_layer(Sub82147, 2, 0, 2, 0, 2, 0, Zer14232), 
LMin45001 = minimum_layer([Con81627,Zer14232], Min45001), 
exec_layers([LAdd41679,LRes7381,LUp_15250,LRes131,LZer59417,LCon81627,LSub82147,LZer14232,LMin45001],["Add41679","Res7381","Up_15250","Res131","Zer59417","Con81627","Sub82147","Zer14232","Min45001"],Min45001,"Min45001")

Actual (Unparsed): [[[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, -0.7204000, -0.3910000], [-0.4206000, 0.0576000, 0.0134000], [0.0082999, -0.6012000, -0.0901999]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-0.2023000, -0.4087000, 0.0807000], [-0.0407000, 0.2941000, 0.0232000], [0.5659000, 0.0057000, -0.4980000]]], [[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.1662000, 0.1490000], [0.0000000, -0.1042000, 0.3249000], [-0.1507000, -0.4334000, -0.7312000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [-0.5405000, -0.5747000, -0.3274000], [0.0000000, -0.0585000, 0.1253000], [-0.6546000, -0.0363000, 0.2367000]]]]]

Expected (Unparsed): [[[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,-0.7204,-0.391],[-0.42060000000000003,0.057599999999999985,0.013399999999999967],[0.008299999999999974,-0.6012000000000001,-0.09019999999999995]],[[0,0,0],[0,0,0],[-0.20230000000000004,-0.40869999999999995,0.0807],[-0.040700000000000014,0.29410000000000003,0.0232],[0.5659000000000001,0.005700000000000011,-0.498]]],[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0.16620000000000001,0.14900000000000002],[0,-0.10420000000000001,0.3249],[-0.15070000000000006,-0.4334,-0.7312000000000001]],[[0,0,0],[0,0,0],[-0.5405,-0.5747,-0.3274],[0,-0.05850000000000005,0.12529999999999997],[-0.6546,-0.0363,0.2367]]]]]

Actual:   [[[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]], [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]], [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, -0.7204, -0.391], [-0.4206, 0.0576, 0.0134], [0.0083, -0.6012, -0.0901]], [[0, 0, 0], [0, 0, 0], [-0.2023, -0.4087, 0.0807], [-0.0407, 0.2941, 0.0232], [0.5659, 0.0057, -0.498]]], [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0.1662, 0.149], [0, -0.1042, 0.3249], [-0.1507, -0.4334, -0.7312]], [[0, 0, 0], [0, 0, 0], [-0.5405, -0.5747, -0.3274], [0, -0.0585, 0.1253], [-0.6546, -0.0363, 0.2367]]]]]

Expected: [[[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]], [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]], [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, -0.7204, -0.391], [-0.4206, 0.0576, 0.0134], [0.0083, -0.6012, -0.0901]], [[0, 0, 0], [0, 0, 0], [-0.2023, -0.4086, 0.0807], [-0.0407, 0.2942, 0.0232], [0.566, 0.0058, -0.498]]], [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0.1663, 0.1491], [0, -0.1042, 0.3249], [-0.1507, -0.4334, -0.7312]], [[0, 0, 0], [0, 0, 0], [-0.5405, -0.5747, -0.3274], [0, -0.0585, 0.1253], [-0.6546, -0.0363, 0.2367]]]]]