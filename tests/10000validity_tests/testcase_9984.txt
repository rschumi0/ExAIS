import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot32826 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot32826 = tf.keras.layers.Input(shape=([3, 3]))
in0Dep30023 = tf.keras.layers.Input(shape=([1, 2, 1]))

Dot32826 = keras.layers.Dot(axes=(1, 1), name = 'Dot32826', )([in0Dot32826,in1Dot32826])
Res86661 = keras.layers.Reshape((3, 3, 1), name = 'Res86661', )(Dot32826)
Dep30023 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep30023', )(in0Dep30023)
Zer87524 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer87524', )(Dep30023)
Max50252 = keras.layers.Maximum(name = 'Max50252', )([Res86661,Zer87524])
model = tf.keras.models.Model(inputs=[in0Dot32826,in1Dot32826,in0Dep30023], outputs=Max50252)
w = model.get_layer('Dep30023').get_weights() 
w[0] = np.array([[[[0.2057]]]])
w[1] = np.array([0])
model.get_layer('Dep30023').set_weights(w) 
in0Dot32826 = tf.constant([[[0.9378, 0.0197, 0.6264], [0.7119, 0.2722, 0.8686], [0.1437, 0.7819, 0.7445]]])
in1Dot32826 = tf.constant([[[0.147, 0.8754, 0.0159], [0.304, 0.4997, 0.4335], [0.8898, 0.9536, 0.4677]]])
in0Dep30023 = tf.constant([[[[0.8708], [0.4668]]]])
print (np.array2string(model.predict([in0Dot32826,in1Dot32826,in0Dep30023],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max50252.png')

LDot32826 = dot_layer([[[0.9378, 0.0197, 0.6264], [0.7119, 0.2722, 0.8686], [0.1437, 0.7819, 0.7445]]], [[[0.147, 0.8754, 0.0159], [0.304, 0.4997, 0.4335], [0.8898, 0.9536, 0.4677]]], 1, 1, Dot32826), 
LRes86661 = reshape_layer(Dot32826, [3, 3, 1], Res86661), 
LDep30023 = depthwise_conv2D_layer([[[[0.8708], [0.4668]]]], 1, 1,[[[[0.2057]]]],[0], 1, 1, true, Dep30023), 
LZer87524 = zero_padding2D_layer(Dep30023, 2, 0, 1, 0, Zer87524), 
LMax50252 = maximum_layer([Res86661,Zer87524], Max50252), 
exec_layers([LDot32826,LRes86661,LDep30023,LZer87524,LMax50252],["Dot32826","Res86661","Dep30023","Zer87524","Max50252"],Max50252,"Max50252")

Actual (Unparsed): [[[[0.4821385], [1.3137189], [0.3907282]], [[0.7813793], [0.8988835], [0.4840066]], [[1.0185913], [1.6923452], [0.7347005]]]]

Expected (Unparsed): [[[[0.48213846],[1.3137188699999998],[0.39072816]],[[0.7813793200000001],[0.89888356],[0.48400656000000003]],[[1.0185913000000002],[1.69234518],[0.7347005099999999]]]]

Actual:   [[[[0.4822], [1.3138], [0.3908]], [[0.7814], [0.8989], [0.4841]], [[1.0186], [1.6924], [0.7348]]]]

Expected: [[[[0.4822], [1.3138], [0.3908]], [[0.7814], [0.8989], [0.4841]], [[1.0186], [1.6924], [0.7348]]]]