import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub16671 = tf.keras.layers.Input(shape=([2]))
in1Sub16671 = tf.keras.layers.Input(shape=([2]))
in0Con3312 = tf.keras.layers.Input(shape=([2, 1]))
in0Max77127 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Max77127 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Sub16671 = keras.layers.Subtract(name = 'Sub16671', )([in0Sub16671,in1Sub16671])
Fla35943 = keras.layers.Flatten(name = 'Fla35943', )(Sub16671)
Res66749 = keras.layers.Reshape((2, 1), name = 'Res66749', )(Fla35943)
Con3312 = keras.layers.Concatenate(axis=2, name = 'Con3312', )([Res66749,in0Con3312])
Max77127 = keras.layers.Maximum(name = 'Max77127', )([in0Max77127,in1Max77127])
Res6234 = keras.layers.Reshape((1, 2, 1), name = 'Res6234', )(Max77127)
Res72651 = keras.layers.Reshape((1, 2), name = 'Res72651', )(Res6234)
Dot70967 = keras.layers.Dot(axes=(2, 2), name = 'Dot70967', )([Con3312,Res72651])
model = tf.keras.models.Model(inputs=[in0Sub16671,in1Sub16671,in0Con3312,in0Max77127,in1Max77127], outputs=Dot70967)
in0Sub16671 = tf.constant([[0.2617, 0.8014]])
in1Sub16671 = tf.constant([[0.4756, 0.2433]])
in0Con3312 = tf.constant([[[0.839], [0.4854]]])
in0Max77127 = tf.constant([[[[[0.0698]], [[0.6223]]]]])
in1Max77127 = tf.constant([[[[[0.6095]], [[0.0284]]]]])
print (np.array2string(model.predict([in0Sub16671,in1Sub16671,in0Con3312,in0Max77127,in1Max77127],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot70967.png')

LSub16671 = subtract_layer([[0.2617, 0.8014]], [[0.4756, 0.2433]], Sub16671), 
LFla35943 = flatten_layer(Sub16671, Fla35943), 
LRes66749 = reshape_layer(Fla35943, [2, 1], Res66749), 
LCon3312 = concatenate_layer([Res66749,[[[0.839], [0.4854]]]], 2, Con3312), 
LMax77127 = maximum_layer([[[[[[0.0698]], [[0.6223]]]]], [[[[[0.6095]], [[0.0284]]]]]], Max77127), 
LRes6234 = reshape_layer(Max77127, [1, 2, 1], Res6234), 
LRes72651 = reshape_layer(Res6234, [1, 2], Res72651), 
LDot70967 = dot_layer(Con3312,Res72651, 2, 2, Dot70967), 
exec_layers([LSub16671,LFla35943,LRes66749,LCon3312,LMax77127,LRes6234,LRes72651,LDot70967],["Sub16671","Fla35943","Res66749","Con3312","Max77127","Res6234","Res72651","Dot70967"],Dot70967,"Dot70967")

Actual (Unparsed): [[[0.3917377], [0.6422264]]]

Expected (Unparsed): [[[0.3917376499999999],[0.64222637]]]

Actual:   [[[0.3918], [0.6423]]]

Expected: [[[0.3918], [0.6423]]]