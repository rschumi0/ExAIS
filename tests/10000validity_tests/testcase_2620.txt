import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo17524 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Glo17524 = keras.layers.GlobalMaxPool3D(name = 'Glo17524', )(in0Glo17524)
Res62195 = keras.layers.Reshape((1, 1), name = 'Res62195', )(Glo17524)
Res55442 = keras.layers.Reshape((1, 1, 1), name = 'Res55442', )(Res62195)
Glo3668 = keras.layers.GlobalAveragePooling2D(name = 'Glo3668', )(Res55442)
Res76409 = keras.layers.Reshape((1, 1), name = 'Res76409', )(Glo3668)
LST27029 = keras.layers.LSTM(2,recurrent_activation='sigmoid', name = 'LST27029', )(Res76409)
Mas9019 = keras.layers.Masking(mask_value=1, name = 'Mas9019', )(LST27029)
model = tf.keras.models.Model(inputs=[in0Glo17524], outputs=Mas9019)
w = model.get_layer('LST27029').get_weights() 
w[0] = np.array([[10, 10, 4, 6, 4, 10, 6, 1]])
w[1] = np.array([[10, 5, 8, 5, 7, 1, 9, 10], [8, 4, 9, 1, 2, 6, 8, 10]])
w[2] = np.array([1, 3, 6, 1, 5, 6, 1, 8])
model.get_layer('LST27029').set_weights(w) 
in0Glo17524 = tf.constant([[[[[1.3396]], [[1.9931]]]]])
print (np.array2string(model.predict([in0Glo17524],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas9019.png')

LGlo17524 = global_max_pool3D_layer([[[[[1.3396]], [[1.9931]]]]], Glo17524), 
LRes62195 = reshape_layer(Glo17524, [1, 1], Res62195), 
LRes55442 = reshape_layer(Res62195, [1, 1, 1], Res55442), 
LGlo3668 = global_average_pooling2D_layer(Res55442, Glo3668), 
LRes76409 = reshape_layer(Glo3668, [1, 1], Res76409), 
LLST27029 = lstm_layer(Res76409,[[10, 10, 4, 6, 4, 10, 6, 1]],[[10, 5, 8, 5, 7, 1, 9, 10], [8, 4, 9, 1, 2, 6, 8, 10]],[1, 3, 6, 1, 5, 6, 1, 8], LST27029), 
LMas9019 = masking_layer(LST27029, 1, Mas9019), 
exec_layers([LGlo17524,LRes62195,LRes55442,LGlo3668,LRes76409,LLST27029,LMas9019],["Glo17524","Res62195","Res55442","Glo3668","Res76409","LST27029","Mas9019"],Mas9019,"Mas9019")

Actual (Unparsed): [[0.7615924, 0.7615593]]

Expected (Unparsed): [[0.76159236139659,0.7615593417783039]]

Actual:   [[0.7616, 0.7616]]

Expected: [[0.7616, 0.7616]]