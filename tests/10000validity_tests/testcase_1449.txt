import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add38636 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add38636 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con88364 = tf.keras.layers.Input(shape=([3, 2]))
in0Sub4380 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub4380 = tf.keras.layers.Input(shape=([3, 3]))

Add38636 = keras.layers.Add(name = 'Add38636', )([in0Add38636,in1Add38636])
Res10897 = keras.layers.Reshape((2, 1), name = 'Res10897', )(Add38636)
Zer11791 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer11791', )(Res10897)
Con88364 = keras.layers.Concatenate(axis=2, name = 'Con88364', )([Zer11791,in0Con88364])
Sub4380 = keras.layers.Subtract(name = 'Sub4380', )([in0Sub4380,in1Sub4380])
Mul55675 = keras.layers.Multiply(name = 'Mul55675', )([Con88364,Sub4380])
Den38915 = keras.layers.Dense(4,name = 'Den38915', )(Mul55675)
model = tf.keras.models.Model(inputs=[in0Add38636,in1Add38636,in0Con88364,in0Sub4380,in1Sub4380], outputs=Den38915)
w = model.get_layer('Den38915').get_weights() 
w[0] = np.array([[0.4471, 0.9795, 0.3205, 0.9216], [0.2443, 0.3389, 0.4428, 0.532], [0.2999, 0.3119, 0.6454, 0.4942]])
w[1] = np.array([0.4092, 0.4506, 0.0469, 0.6173])
model.get_layer('Den38915').set_weights(w) 
in0Add38636 = tf.constant([[[[0.5773]], [[0.3215]]]])
in1Add38636 = tf.constant([[[[0.8087]], [[0.0333]]]])
in0Con88364 = tf.constant([[[0.1205, 0.8718], [0.6511, 0.7429], [0.4776, 0.7664]]])
in0Sub4380 = tf.constant([[[0.1607, 0.0116, 0.1809], [0.6157, 0.3437, 0.0772], [0.0243, 0.4625, 0.7071]]])
in1Sub4380 = tf.constant([[[0.8076, 0.4962, 0.5709], [0.037, 0.1605, 0.3302], [0.5674, 0.525, 0.2419]]])
print (np.array2string(model.predict([in0Add38636,in1Add38636,in0Con88364,in0Sub4380,in1Sub4380],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den38915.png')

LAdd38636 = add_layer([[[[[0.5773]], [[0.3215]]]], [[[[0.8087]], [[0.0333]]]]], Add38636), 
LRes10897 = reshape_layer(Add38636, [2, 1], Res10897), 
LZer11791 = zero_padding1D_layer(Res10897, 1, 0, Zer11791), 
LCon88364 = concatenate_layer([Zer11791,[[[0.1205, 0.8718], [0.6511, 0.7429], [0.4776, 0.7664]]]], 2, Con88364), 
LSub4380 = subtract_layer([[[0.1607, 0.0116, 0.1809], [0.6157, 0.3437, 0.0772], [0.0243, 0.4625, 0.7071]]], [[[0.8076, 0.4962, 0.5709], [0.037, 0.1605, 0.3302], [0.5674, 0.525, 0.2419]]], Sub4380), 
LMul55675 = multiply_layer([Con88364,Sub4380], Mul55675), 
LDen38915 = dense_layer(Mul55675, [[0.4471, 0.9795, 0.3205, 0.9216], [0.2443, 0.3389, 0.4428, 0.532], [0.2999, 0.3119, 0.6454, 0.4942]],[0.4092, 0.4506, 0.0469, 0.6173], Den38915), 
exec_layers([LAdd38636,LRes10897,LZer11791,LCon88364,LSub4380,LMul55675,LDen38915],["Add38636","Res10897","Zer11791","Con88364","Sub4380","Mul55675","Den38915"],Den38915,"Den38915")

Actual (Unparsed): [[[0.2929677, 0.3247635, -0.1983943, 0.4182052], [0.7405823, 1.2180374, 0.2354786, 1.3270663], [0.4226782, 0.3629436, 0.2020287, 0.6000317]]]

Expected (Unparsed): [[[0.29296767271,0.32476354793000006,-0.19839428683999996,0.418205244],[0.740582323926,1.2180373449980002,0.23547860217600003,1.3270663192199998],[0.422678236524,0.36294362097199995,0.20202866977199996,0.6000317335679999]]]

Actual:   [[[0.293, 0.3248, -0.1983, 0.4183], [0.7406, 1.2181, 0.2355, 1.3271], [0.4227, 0.363, 0.2021, 0.6001]]]

Expected: [[[0.293, 0.3248, -0.1983, 0.4183], [0.7406, 1.2181, 0.2355, 1.3271], [0.4227, 0.363, 0.2021, 0.6001]]]