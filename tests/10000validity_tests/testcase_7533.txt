import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul37730 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Mul37730 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Max46987 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max46987 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con60262 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Mul37730 = keras.layers.Multiply(name = 'Mul37730', )([in0Mul37730,in1Mul37730])
Max46987 = keras.layers.Maximum(name = 'Max46987', )([in0Max46987,in1Max46987])
Zer3552 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer3552', )(Max46987)
Con60262 = keras.layers.Concatenate(axis=4, name = 'Con60262', )([Zer3552,in0Con60262])
Min71701 = keras.layers.Minimum(name = 'Min71701', )([Mul37730,Con60262])
Res24270 = keras.layers.Reshape((2, 1, 4), name = 'Res24270', )(Min71701)
Res34484 = keras.layers.Reshape((2, 4), name = 'Res34484', )(Res24270)
Zer8304 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer8304', )(Res34484)
model = tf.keras.models.Model(inputs=[in0Mul37730,in1Mul37730,in0Max46987,in1Max46987,in0Con60262], outputs=Zer8304)
in0Mul37730 = tf.constant([[[[[0.0997, 0.5908], [0.4989, 0.2409]]], [[[0.5424, 0.825], [0.2167, 0.838]]]]])
in1Mul37730 = tf.constant([[[[[0.5542, 0.983], [0.0722, 0.6435]]], [[[0.8452, 0.0847], [0.4861, 0.0185]]]]])
in0Max46987 = tf.constant([[[[[0.9235]]]]])
in1Max46987 = tf.constant([[[[[0.6195]]]]])
in0Con60262 = tf.constant([[[[[0.827], [0.9089]]], [[[0.8949], [0.5526]]]]])
print (np.array2string(model.predict([in0Mul37730,in1Mul37730,in0Max46987,in1Max46987,in0Con60262],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer8304.png')

LMul37730 = multiply_layer([[[[[[0.0997, 0.5908], [0.4989, 0.2409]]], [[[0.5424, 0.825], [0.2167, 0.838]]]]], [[[[[0.5542, 0.983], [0.0722, 0.6435]]], [[[0.8452, 0.0847], [0.4861, 0.0185]]]]]], Mul37730), 
LMax46987 = maximum_layer([[[[[[0.9235]]]]], [[[[[0.6195]]]]]], Max46987), 
LZer3552 = zero_padding3D_layer(Max46987, 1, 0, 0, 0, 1, 0, Zer3552), 
LCon60262 = concatenate_layer([Zer3552,[[[[[0.827], [0.9089]]], [[[0.8949], [0.5526]]]]]], 4, Con60262), 
LMin71701 = minimum_layer([Mul37730,Con60262], Min71701), 
LRes24270 = reshape_layer(Min71701, [2, 1, 4], Res24270), 
LRes34484 = reshape_layer(Res24270, [2, 4], Res34484), 
LZer8304 = zero_padding1D_layer(Res34484, 1, 1, Zer8304), 
exec_layers([LMul37730,LMax46987,LZer3552,LCon60262,LMin71701,LRes24270,LRes34484,LZer8304],["Mul37730","Max46987","Zer3552","Con60262","Min71701","Res24270","Res34484","Zer8304"],Zer8304,"Zer8304")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.5807564, 0.0000000, 0.1550191], [0.0000000, 0.0698775, 0.1053379, 0.0155030], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0],[0,0.5807564,0,0.15501915],[0,0.0698775,0.10533787,0.015503],[0,0,0,0]]]

Actual:   [[[0, 0, 0, 0], [0, 0.5808, 0, 0.1551], [0, 0.0699, 0.1054, 0.0156], [0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0], [0, 0.5808, 0, 0.1551], [0, 0.0699, 0.1054, 0.0156], [0, 0, 0, 0]]]