import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul16048 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Mul16048 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Max45178 = tf.keras.layers.Input(shape=([1, 2]))
in1Max45178 = tf.keras.layers.Input(shape=([1, 2]))
in0Con50604 = tf.keras.layers.Input(shape=([2, 3, 3]))

Mul16048 = keras.layers.Multiply(name = 'Mul16048', )([in0Mul16048,in1Mul16048])
Res81395 = keras.layers.Reshape((2, 1, 4), name = 'Res81395', )(Mul16048)
Zer3838 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer3838', )(Res81395)
Max45178 = keras.layers.Maximum(name = 'Max45178', )([in0Max45178,in1Max45178])
Res92911 = keras.layers.Reshape((1, 2, 1), name = 'Res92911', )(Max45178)
Up_36580 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_36580', )(Res92911)
Zer95122 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer95122', )(Up_36580)
Con50604 = keras.layers.Concatenate(axis=3, name = 'Con50604', )([Zer95122,in0Con50604])
Sub39892 = keras.layers.Subtract(name = 'Sub39892', )([Zer3838,Con50604])
Res86647 = keras.layers.Reshape((2, 12), name = 'Res86647', )(Sub39892)
Zer28497 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer28497', )(Res86647)
model = tf.keras.models.Model(inputs=[in0Mul16048,in1Mul16048,in0Max45178,in1Max45178,in0Con50604], outputs=Zer28497)
in0Mul16048 = tf.constant([[[[[0.1893, 0.6895], [0.3129, 0.6498]]], [[[0.3637, 0.089], [0.7892, 0.4703]]]]])
in1Mul16048 = tf.constant([[[[[0.1099, 0.3848], [0.9982, 0.4945]]], [[[0.5335, 0.3395], [0.1974, 0.2657]]]]])
in0Max45178 = tf.constant([[[0.5333, 0.2525]]])
in1Max45178 = tf.constant([[[0.0989, 0.2236]]])
in0Con50604 = tf.constant([[[[0.7113, 0.0799, 0.7737], [0.1323, 0.5134, 0.0408], [0.7725, 0.8211, 0.608]], [[0.2242, 0.0047, 0.1744], [0.8634, 0.5095, 0.5371], [0.7425, 0.1882, 0.1532]]]])
print (np.array2string(model.predict([in0Mul16048,in1Mul16048,in0Max45178,in1Max45178,in0Con50604],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer28497.png')

LMul16048 = multiply_layer([[[[[[0.1893, 0.6895], [0.3129, 0.6498]]], [[[0.3637, 0.089], [0.7892, 0.4703]]]]], [[[[[0.1099, 0.3848], [0.9982, 0.4945]]], [[[0.5335, 0.3395], [0.1974, 0.2657]]]]]], Mul16048), 
LRes81395 = reshape_layer(Mul16048, [2, 1, 4], Res81395), 
LZer3838 = zero_padding2D_layer(Res81395, 0, 0, 2, 0, Zer3838), 
LMax45178 = maximum_layer([[[[0.5333, 0.2525]]], [[[0.0989, 0.2236]]]], Max45178), 
LRes92911 = reshape_layer(Max45178, [1, 2, 1], Res92911), 
LUp_36580 = up_sampling2D_layer(Res92911, 1, 1, Up_36580), 
LZer95122 = zero_padding2D_layer(Up_36580, 1, 0, 1, 0, Zer95122), 
LCon50604 = concatenate_layer([Zer95122,[[[[0.7113, 0.0799, 0.7737], [0.1323, 0.5134, 0.0408], [0.7725, 0.8211, 0.608]], [[0.2242, 0.0047, 0.1744], [0.8634, 0.5095, 0.5371], [0.7425, 0.1882, 0.1532]]]]], 3, Con50604), 
LSub39892 = subtract_layer(Zer3838,Con50604, Sub39892), 
LRes86647 = reshape_layer(Sub39892, [2, 12], Res86647), 
LZer28497 = zero_padding1D_layer(Res86647, 1, 1, Zer28497), 
exec_layers([LMul16048,LRes81395,LZer3838,LMax45178,LRes92911,LUp_36580,LZer95122,LCon50604,LSub39892,LRes86647,LZer28497],["Mul16048","Res81395","Zer3838","Max45178","Res92911","Up_36580","Zer95122","Con50604","Sub39892","Res86647","Zer28497"],Zer28497,"Zer28497")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, -0.7113000, -0.0799000, -0.7737000, 0.0000000, -0.1323000, -0.5134000, -0.0408000, 0.0208041, -0.5071804, -0.5087632, -0.2866739], [0.0000000, -0.2242000, -0.0047000, -0.1744000, -0.5333000, -0.8634000, -0.5095000, -0.5371000, -0.0584660, -0.7122845, -0.0324119, -0.0282413], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0],[0,-0.7113,-0.0799,-0.7737,0,-0.1323,-0.5134,-0.0408,0.020804069999999997,-0.5071804,-0.5087632200000001,-0.2866739],[0,-0.2242,-0.0047,-0.1744,-0.5333,-0.8634,-0.5095,-0.5371,-0.05846604999999999,-0.7122845000000001,-0.03241192000000001,-0.028241290000000002],[0,0,0,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, -0.7113, -0.0799, -0.7737, 0, -0.1323, -0.5134, -0.0408, 0.0209, -0.5071, -0.5087, -0.2866], [0, -0.2242, -0.0047, -0.1744, -0.5333, -0.8634, -0.5095, -0.5371, -0.0584, -0.7122, -0.0324, -0.0282], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, -0.7113, -0.0799, -0.7737, 0, -0.1323, -0.5134, -0.0408, 0.0209, -0.5071, -0.5087, -0.2866], [0, -0.2242, -0.0047, -0.1744, -0.5333, -0.8634, -0.5095, -0.5371, -0.0584, -0.7122, -0.0324, -0.0282], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]