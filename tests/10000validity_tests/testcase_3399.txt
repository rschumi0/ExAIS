import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min60408 = tf.keras.layers.Input(shape=([2, 2]))
in1Min60408 = tf.keras.layers.Input(shape=([2, 2]))

Min60408 = keras.layers.Minimum(name = 'Min60408', )([in0Min60408,in1Min60408])
Res50617 = keras.layers.Reshape((2, 2, 1), name = 'Res50617', )(Min60408)
Con9460 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(1, 1), padding='valid', name = 'Con9460', )(Res50617)
Bat89623 = keras.layers.BatchNormalization(axis=2, epsilon=0.4834359934921999,  name = 'Bat89623', )(Con9460)
model = tf.keras.models.Model(inputs=[in0Min60408,in1Min60408], outputs=Bat89623)
w = model.get_layer('Con9460').get_weights() 
w[0] = np.array([[[[0.3181], [0.0768]]]])
w[1] = np.array([0, 0])
model.get_layer('Con9460').set_weights(w) 
w = model.get_layer('Bat89623').get_weights() 
w[0] = np.array([0.5997, 0.6036])
w[1] = np.array([0.4372, 0.7361])
w[2] = np.array([0.3628, 0.5939])
w[3] = np.array([0.2143, 0.4676])
model.get_layer('Bat89623').set_weights(w) 
in0Min60408 = tf.constant([[[0.5964, 0.5327], [0.062, 0.8691]]])
in1Min60408 = tf.constant([[[0.859, 0.5783], [0.6435, 0.7897]]])
print (np.array2string(model.predict([in0Min60408,in1Min60408],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Bat89623.png')

LMin60408 = minimum_layer([[[[0.5964, 0.5327], [0.062, 0.8691]]], [[[0.859, 0.5783], [0.6435, 0.7897]]]], Min60408), 
LRes50617 = reshape_layer(Min60408, [2, 2, 1], Res50617), 
LCon9460 = conv2D_transpose_layer(Res50617, 1, 1,[[[[0.3181], [0.0768]]]],[0, 0], 1, 1, false, Con9460), 
LBat89623 = batch_normalization_layer(Con9460, 2, 0.4834359934921999, [0.5997, 0.6036], [0.4372, 0.7361], [0.3628, 0.5939], [0.2143, 0.4676], Bat89623), 
exec_layers([LMin60408,LRes50617,LCon9460,LBat89623],["Min60408","Res50617","Con9460","Bat89623"],Bat89623,"Bat89623")

Actual (Unparsed): [[[[0.3129351, 0.2096154], [0.4733907, 0.3938315]], [[0.1908905, 0.1801497], [0.5239904, 0.4060479]]]]

Expected (Unparsed): [[[[0.31293514449957643,0.2096153718242344],[0.4733907414361041,0.3938314744945227]],[[0.1908905345183654,0.18014971307994954],[0.5239903953757694,0.4060479266245645]]]]

Actual:   [[[[0.313, 0.2097], [0.4734, 0.3939]], [[0.1909, 0.1802], [0.524, 0.4061]]]]

Expected: [[[[0.313, 0.2097], [0.4734, 0.3939]], [[0.1909, 0.1802], [0.524, 0.4061]]]]