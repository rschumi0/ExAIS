import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave99301 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave99301 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Max87550 = tf.keras.layers.Input(shape=([1, 1]))
in0Con54452 = tf.keras.layers.Input(shape=([2, 3]))

Ave99301 = keras.layers.Average(name = 'Ave99301', )([in0Ave99301,in1Ave99301])
Res85262 = keras.layers.Reshape((2, 4), name = 'Res85262', )(Ave99301)
Max87550 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max87550', )(in0Max87550)
Zer11947 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer11947', )(Max87550)
Con54452 = keras.layers.Concatenate(axis=2, name = 'Con54452', )([Zer11947,in0Con54452])
Ave76348 = keras.layers.Average(name = 'Ave76348', )([Res85262,Con54452])
model = tf.keras.models.Model(inputs=[in0Ave99301,in1Ave99301,in0Max87550,in0Con54452], outputs=Ave76348)
in0Ave99301 = tf.constant([[[[0.6618, 0.5672], [0.6805, 0.3726]], [[0.4542, 0.119], [0.6047, 0.939]]]])
in1Ave99301 = tf.constant([[[[0.537, 0.3158], [0.2597, 0.892]], [[0.5896, 0.3567], [0.7837, 0.2801]]]])
in0Max87550 = tf.constant([[[1.916]]])
in0Con54452 = tf.constant([[[0.6355, 0.1486, 0.4809], [0.8438, 0.1087, 0.1906]]])
print (np.array2string(model.predict([in0Ave99301,in1Ave99301,in0Max87550,in0Con54452],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave76348.png')

LAve99301 = average_layer([[[[[0.6618, 0.5672], [0.6805, 0.3726]], [[0.4542, 0.119], [0.6047, 0.939]]]], [[[[0.537, 0.3158], [0.2597, 0.892]], [[0.5896, 0.3567], [0.7837, 0.2801]]]]], Ave99301), 
LRes85262 = reshape_layer(Ave99301, [2, 4], Res85262), 
LMax87550 = max_pool1D_layer([[[1.916]]], 1, Max87550), 
LZer11947 = zero_padding1D_layer(Max87550, 1, 0, Zer11947), 
LCon54452 = concatenate_layer([Zer11947,[[[0.6355, 0.1486, 0.4809], [0.8438, 0.1087, 0.1906]]]], 2, Con54452), 
LAve76348 = average_layer([Res85262,Con54452], Ave76348), 
exec_layers([LAve99301,LRes85262,LMax87550,LZer11947,LCon54452,LAve76348],["Ave99301","Res85262","Max87550","Zer11947","Con54452","Ave76348"],Ave76348,"Ave76348")

Actual (Unparsed): [[[0.2997000, 0.5385000, 0.3093500, 0.5566000], [1.2189500, 0.5408250, 0.4014500, 0.4000750]]]

Expected (Unparsed): [[[0.2997,0.5385,0.30935,0.5566],[1.21895,0.540825,0.40145,0.400075]]]

Actual:   [[[0.2997, 0.5385, 0.3094, 0.5566], [1.219, 0.5409, 0.4015, 0.4001]]]

Expected: [[[0.2997, 0.5385, 0.3094, 0.5566], [1.219, 0.5409, 0.4015, 0.4001]]]