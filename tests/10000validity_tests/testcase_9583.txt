import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul83826 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul83826 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Loc22465 = tf.keras.layers.Input(shape=([2, 2]))

Mul83826 = keras.layers.Multiply(name = 'Mul83826', )([in0Mul83826,in1Mul83826])
Glo39819 = keras.layers.GlobalAveragePooling3D(name = 'Glo39819', )(Mul83826)
Loc22465 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc22465', )(in0Loc22465)
Res19915 = keras.layers.Reshape((2, 2, 1), name = 'Res19915', )(Loc22465)
Glo16423 = keras.layers.GlobalAveragePooling2D(name = 'Glo16423', )(Res19915)
Sub92121 = keras.layers.Subtract(name = 'Sub92121', )([Glo39819,Glo16423])
model = tf.keras.models.Model(inputs=[in0Mul83826,in1Mul83826,in0Loc22465], outputs=Sub92121)
w = model.get_layer('Loc22465').get_weights() 
w[0] = np.array([[[0.2478, 0.9897], [0.1231, 0.1404]], [[0.1323, 0.4747], [0.3105, 0.7779]]])
w[1] = np.array([[0, 0], [0, 0]])
model.get_layer('Loc22465').set_weights(w) 
in0Mul83826 = tf.constant([[[[[0.1103], [0.5437]], [[0.1896], [0.6109]]]]])
in1Mul83826 = tf.constant([[[[[0.3461], [0.3149]], [[0.7776], [0.422]]]]])
in0Loc22465 = tf.constant([[[0.7355, 0.0821], [0.5835, 0.4233]]])
print (np.array2string(model.predict([in0Mul83826,in1Mul83826,in0Loc22465],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub92121.png')

LMul83826 = multiply_layer([[[[[[0.1103], [0.5437]], [[0.1896], [0.6109]]]]], [[[[[0.3461], [0.3149]], [[0.7776], [0.422]]]]]], Mul83826), 
LGlo39819 = global_average_pooling3D_layer(Mul83826, Glo39819), 
LLoc22465 = locally_connected1D_layer([[[0.7355, 0.0821], [0.5835, 0.4233]]], 1,[[[0.2478, 0.9897], [0.1231, 0.1404]], [[0.1323, 0.4747], [0.3105, 0.7779]]],[[0, 0], [0, 0]], 1, Loc22465), 
LRes19915 = reshape_layer(Loc22465, [2, 2, 1], Res19915), 
LGlo16423 = global_average_pooling2D_layer(Res19915, Glo16423), 
LSub92121 = subtract_layer(Glo39819,Glo16423, Sub92121), 
exec_layers([LMul83826,LGlo39819,LLoc22465,LRes19915,LGlo16423,LSub92121],["Mul83826","Glo39819","Loc22465","Res19915","Glo16423","Sub92121"],Sub92121,"Sub92121")

Actual (Unparsed): [[-0.2830250]]

Expected (Unparsed): [[-0.2830250250000001]]

Actual:   [[-0.283]]

Expected: [[-0.283]]