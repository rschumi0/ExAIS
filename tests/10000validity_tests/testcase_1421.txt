import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub36718 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub36718 = tf.keras.layers.Input(shape=([3, 3]))
in0Con58732 = tf.keras.layers.Input(shape=([3, 3, 3, 1]))
in0Ave98240 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave98240 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Sub36718 = keras.layers.Subtract(name = 'Sub36718', )([in0Sub36718,in1Sub36718])
Res34004 = keras.layers.Reshape((3, 3, 1), name = 'Res34004', )(Sub36718)
Res44881 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res44881', )(Res34004)
Zer49317 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer49317', )(Res44881)
Con58732 = keras.layers.Concatenate(axis=4, name = 'Con58732', )([Zer49317,in0Con58732])
Ave98240 = keras.layers.Average(name = 'Ave98240', )([in0Ave98240,in1Ave98240])
Zer18182 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (1, 0)), name = 'Zer18182', )(Ave98240)
Min45447 = keras.layers.Minimum(name = 'Min45447', )([Con58732,Zer18182])
Res57991 = keras.layers.Reshape((3, 3, 6), name = 'Res57991', )(Min45447)
Glo59669 = keras.layers.GlobalMaxPool2D(name = 'Glo59669', )(Res57991)
Res62782 = keras.layers.Reshape((6, 1), name = 'Res62782', )(Glo59669)
Res30192 = keras.layers.Reshape((6, 1, 1), name = 'Res30192', )(Res62782)
Res33927 = keras.layers.Reshape((6, 1, 1, 1), name = 'Res33927', )(Res30192)
Glo2543 = keras.layers.GlobalMaxPool3D(name = 'Glo2543', )(Res33927)
model = tf.keras.models.Model(inputs=[in0Sub36718,in1Sub36718,in0Con58732,in0Ave98240,in1Ave98240], outputs=Glo2543)
in0Sub36718 = tf.constant([[[0.164, 0.4394, 0.3614], [0.0127, 0.9512, 0.0555], [0.4634, 0.0705, 0.8984]]])
in1Sub36718 = tf.constant([[[0.7512, 0.656, 0.2359], [0.9478, 0.0048, 0.3649], [0.6359, 0.4264, 0.4044]]])
in0Con58732 = tf.constant([[[[[0.8894], [0.4257], [0.7851]], [[0.7932], [0.8904], [0.7301]], [[0.0745], [0.9025], [0.7336]]], [[[0.7148], [0.169], [0.6833]], [[0.0349], [0.1332], [0.5078]], [[0.2858], [0.8038], [0.6909]]], [[[0.6231], [0.1914], [0.2412]], [[0.1594], [0.8613], [0.0504]], [[0.6118], [0.5221], [0.175]]]]])
in0Ave98240 = tf.constant([[[[[0.5125, 0.266], [0.3769, 0.9156]]]]])
in1Ave98240 = tf.constant([[[[[0.3419, 0.9478], [0.6165, 0.2507]]]]])
print (np.array2string(model.predict([in0Sub36718,in1Sub36718,in0Con58732,in0Ave98240,in1Ave98240],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo2543.png')

LSub36718 = subtract_layer([[[0.164, 0.4394, 0.3614], [0.0127, 0.9512, 0.0555], [0.4634, 0.0705, 0.8984]]], [[[0.7512, 0.656, 0.2359], [0.9478, 0.0048, 0.3649], [0.6359, 0.4264, 0.4044]]], Sub36718), 
LRes34004 = reshape_layer(Sub36718, [3, 3, 1], Res34004), 
LRes44881 = reshape_layer(Res34004, [3, 3, 1, 1], Res44881), 
LZer49317 = zero_padding3D_layer(Res44881, 0, 0, 0, 0, 2, 0, Zer49317), 
LCon58732 = concatenate_layer([Zer49317,[[[[[0.8894], [0.4257], [0.7851]], [[0.7932], [0.8904], [0.7301]], [[0.0745], [0.9025], [0.7336]]], [[[0.7148], [0.169], [0.6833]], [[0.0349], [0.1332], [0.5078]], [[0.2858], [0.8038], [0.6909]]], [[[0.6231], [0.1914], [0.2412]], [[0.1594], [0.8613], [0.0504]], [[0.6118], [0.5221], [0.175]]]]]], 4, Con58732), 
LAve98240 = average_layer([[[[[[0.5125, 0.266], [0.3769, 0.9156]]]]], [[[[[0.3419, 0.9478], [0.6165, 0.2507]]]]]], Ave98240), 
LZer18182 = zero_padding3D_layer(Ave98240, 2, 0, 2, 0, 1, 0, Zer18182), 
LMin45447 = minimum_layer([Con58732,Zer18182], Min45447), 
LRes57991 = reshape_layer(Min45447, [3, 3, 6], Res57991), 
LGlo59669 = global_max_pool2D_layer(Res57991, Glo59669), 
LRes62782 = reshape_layer(Glo59669, [6, 1], Res62782), 
LRes30192 = reshape_layer(Res62782, [6, 1, 1], Res30192), 
LRes33927 = reshape_layer(Res30192, [6, 1, 1, 1], Res33927), 
LGlo2543 = global_max_pool3D_layer(Res33927, Glo2543), 
exec_layers([LSub36718,LRes34004,LRes44881,LZer49317,LCon58732,LAve98240,LZer18182,LMin45447,LRes57991,LGlo59669,LRes62782,LRes30192,LRes33927,LGlo2543],["Sub36718","Res34004","Res44881","Zer49317","Con58732","Ave98240","Zer18182","Min45447","Res57991","Glo59669","Res62782","Res30192","Res33927","Glo2543"],Glo2543,"Glo2543")

Actual (Unparsed): [[0.5221000]]

Expected (Unparsed): [[0.5221]]

Actual:   [[0.5221]]

Expected: [[0.5221]]