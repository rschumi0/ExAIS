import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul52967 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Mul52967 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Mul52967 = keras.layers.Multiply(name = 'Mul52967', )([in0Mul52967,in1Mul52967])
Res2118 = keras.layers.Reshape((1, 2, 4), name = 'Res2118', )(Mul52967)
Con14487 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 5), padding='valid', name = 'Con14487', )(Res2118)
model = tf.keras.models.Model(inputs=[in0Mul52967,in1Mul52967], outputs=Con14487)
w = model.get_layer('Con14487').get_weights() 
w[0] = np.array([[[[0.2768, 0.5329, 0.1417, 0.1066], [0.9504, 0.3372, 0.091, 0.5933], [0.5645, 0.0539, 0.0166, 0.2466]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con14487').set_weights(w) 
in0Mul52967 = tf.constant([[[[[0.1637, 0.9618], [0.9431, 0.127]], [[0.2083, 0.9222], [0.7384, 0.3061]]]]])
in1Mul52967 = tf.constant([[[[[0.4319, 0.2182], [0.1968, 0.5943]], [[0.4538, 0.466], [0.81, 0.4049]]]]])
print (np.array2string(model.predict([in0Mul52967,in1Mul52967],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con14487.png')

LMul52967 = multiply_layer([[[[[[0.1637, 0.9618], [0.9431, 0.127]], [[0.2083, 0.9222], [0.7384, 0.3061]]]]], [[[[[0.4319, 0.2182], [0.1968, 0.5943]], [[0.4538, 0.466], [0.81, 0.4049]]]]]], Mul52967), 
LRes2118 = reshape_layer(Mul52967, [1, 2, 4], Res2118), 
LCon14487 = conv2D_transpose_layer(Res2118, 1, 1,[[[[0.2768, 0.5329, 0.1417, 0.1066], [0.9504, 0.3372, 0.091, 0.5933], [0.5645, 0.0539, 0.0166, 0.2466]]]],[0, 0, 0], 1, 5, false, Con14487), 
exec_layers([LMul52967,LRes2118,LCon14487],["Mul52967","Res2118","Con14487"],Con14487,"Con14487")

Actual (Unparsed): [[[[0.1657528, 0.1996314, 0.0729164], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.3531395, 0.3627091, 0.1170156], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.165752819504,0.19963136579400004,0.07291640728700001],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0.353139492426,0.362709105793,0.117015601384],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]]]

Actual:   [[[[0.1658, 0.1997, 0.073], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0.3532, 0.3628, 0.1171], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]]]

Expected: [[[[0.1658, 0.1997, 0.073], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0.3532, 0.3628, 0.1171], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]]]