import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min95503 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Min95503 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Dot63040 = tf.keras.layers.Input(shape=([3]))
in1Dot63040 = tf.keras.layers.Input(shape=([3]))
in0Con11180 = tf.keras.layers.Input(shape=([1]))
in0Con91400 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Add38359 = tf.keras.layers.Input(shape=([1, 2]))
in1Add38359 = tf.keras.layers.Input(shape=([1, 2]))
in0Con43394 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Min74791 = tf.keras.layers.Input(shape=([2, 2]))
in1Min74791 = tf.keras.layers.Input(shape=([2, 2]))
in0Con20392 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Min84437 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Min84437 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Min95503 = keras.layers.Minimum(name = 'Min95503', )([in0Min95503,in1Min95503])
Res33143 = keras.layers.Reshape((1, 2, 1), name = 'Res33143', )(Min95503)
Res24909 = keras.layers.Reshape((1, 2), name = 'Res24909', )(Res33143)
Fla28341 = keras.layers.Flatten(name = 'Fla28341', )(Res24909)
Dot63040 = keras.layers.Dot(axes=(1, 1), name = 'Dot63040', )([in0Dot63040,in1Dot63040])
Res78250 = keras.layers.Reshape((1, 1), name = 'Res78250', )(Dot63040)
Glo69485 = keras.layers.GlobalMaxPool1D(name = 'Glo69485', )(Res78250)
Con11180 = keras.layers.Concatenate(axis=1, name = 'Con11180', )([Glo69485,in0Con11180])
Max35427 = keras.layers.Maximum(name = 'Max35427', )([Fla28341,Con11180])
Res88621 = keras.layers.Reshape((2, 1), name = 'Res88621', )(Max35427)
Res35542 = keras.layers.Reshape((2, 1, 1), name = 'Res35542', )(Res88621)
Res92659 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res92659', )(Res35542)
Zer51415 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer51415', )(Res92659)
Con91400 = keras.layers.Concatenate(axis=4, name = 'Con91400', )([Zer51415,in0Con91400])
Add38359 = keras.layers.Add(name = 'Add38359', )([in0Add38359,in1Add38359])
Res23787 = keras.layers.Reshape((1, 2, 1), name = 'Res23787', )(Add38359)
Res80480 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res80480', )(Res23787)
Zer26788 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer26788', )(Res80480)
Con43394 = keras.layers.Concatenate(axis=4, name = 'Con43394', )([Zer26788,in0Con43394])
Min74791 = keras.layers.Minimum(name = 'Min74791', )([in0Min74791,in1Min74791])
Res85297 = keras.layers.Reshape((2, 2, 1), name = 'Res85297', )(Min74791)
Res36452 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res36452', )(Res85297)
Con20392 = keras.layers.Concatenate(axis=4, name = 'Con20392', )([Res36452,in0Con20392])
Min84437 = keras.layers.Minimum(name = 'Min84437', )([in0Min84437,in1Min84437])
Zer13637 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer13637', )(Min84437)
Mul76292 = keras.layers.Multiply(name = 'Mul76292', )([Con20392,Zer13637])
Sub14368 = keras.layers.Subtract(name = 'Sub14368', )([Con43394,Mul76292])
Mul35214 = keras.layers.Multiply(name = 'Mul35214', )([Con91400,Sub14368])
model = tf.keras.models.Model(inputs=[in0Min95503,in1Min95503,in0Dot63040,in1Dot63040,in0Con11180,in0Con91400,in0Add38359,in1Add38359,in0Con43394,in0Min74791,in1Min74791,in0Con20392,in0Min84437,in1Min84437], outputs=Mul35214)
in0Min95503 = tf.constant([[[[[0.8618]], [[0.048]]]]])
in1Min95503 = tf.constant([[[[[0.1334]], [[0.5021]]]]])
in0Dot63040 = tf.constant([[0.2961, 0.9679, 0.3074]])
in1Dot63040 = tf.constant([[0.0671, 0.0292, 0.5374]])
in0Con11180 = tf.constant([[0.5012]])
in0Con91400 = tf.constant([[[[[0.8569]], [[0.4244]]], [[[0.2926]], [[0.2504]]]]])
in0Add38359 = tf.constant([[[0.4608, 0.8614]]])
in1Add38359 = tf.constant([[[0.1581, 0.9141]]])
in0Con43394 = tf.constant([[[[[0.025]], [[0.6947]]], [[[0.054]], [[0.715]]]]])
in0Min74791 = tf.constant([[[0.8086, 0.8292], [0.905, 0.7017]]])
in1Min74791 = tf.constant([[[0.2396, 0.5067], [0.1654, 0.4025]]])
in0Con20392 = tf.constant([[[[[0.5975]], [[0.3848]]], [[[0.5221]], [[0.0105]]]]])
in0Min84437 = tf.constant([[[[[0.0351, 0.8625]]]]])
in1Min84437 = tf.constant([[[[[0.113, 0.3032]]]]])
print (np.array2string(model.predict([in0Min95503,in1Min95503,in0Dot63040,in1Dot63040,in0Con11180,in0Con91400,in0Add38359,in1Add38359,in0Con43394,in0Min74791,in1Min74791,in0Con20392,in0Min84437,in1Min84437],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul35214.png')

LMin95503 = minimum_layer([[[[[[0.8618]], [[0.048]]]]], [[[[[0.1334]], [[0.5021]]]]]], Min95503), 
LRes33143 = reshape_layer(Min95503, [1, 2, 1], Res33143), 
LRes24909 = reshape_layer(Res33143, [1, 2], Res24909), 
LFla28341 = flatten_layer(Res24909, Fla28341), 
LDot63040 = dot_layer([[0.2961, 0.9679, 0.3074]], [[0.0671, 0.0292, 0.5374]], 1, 1, Dot63040), 
LRes78250 = reshape_layer(Dot63040, [1, 1], Res78250), 
LGlo69485 = global_max_pool1D_layer(Res78250, Glo69485), 
LCon11180 = concatenate_layer([Glo69485,[[0.5012]]], 1, Con11180), 
LMax35427 = maximum_layer([Fla28341,Con11180], Max35427), 
LRes88621 = reshape_layer(Max35427, [2, 1], Res88621), 
LRes35542 = reshape_layer(Res88621, [2, 1, 1], Res35542), 
LRes92659 = reshape_layer(Res35542, [2, 1, 1, 1], Res92659), 
LZer51415 = zero_padding3D_layer(Res92659, 0, 0, 1, 0, 0, 0, Zer51415), 
LCon91400 = concatenate_layer([Zer51415,[[[[[0.8569]], [[0.4244]]], [[[0.2926]], [[0.2504]]]]]], 4, Con91400), 
LAdd38359 = add_layer([[[[0.4608, 0.8614]]], [[[0.1581, 0.9141]]]], Add38359), 
LRes23787 = reshape_layer(Add38359, [1, 2, 1], Res23787), 
LRes80480 = reshape_layer(Res23787, [1, 2, 1, 1], Res80480), 
LZer26788 = zero_padding3D_layer(Res80480, 1, 0, 0, 0, 0, 0, Zer26788), 
LCon43394 = concatenate_layer([Zer26788,[[[[[0.025]], [[0.6947]]], [[[0.054]], [[0.715]]]]]], 4, Con43394), 
LMin74791 = minimum_layer([[[[0.8086, 0.8292], [0.905, 0.7017]]], [[[0.2396, 0.5067], [0.1654, 0.4025]]]], Min74791), 
LRes85297 = reshape_layer(Min74791, [2, 2, 1], Res85297), 
LRes36452 = reshape_layer(Res85297, [2, 2, 1, 1], Res36452), 
LCon20392 = concatenate_layer([Res36452,[[[[[0.5975]], [[0.3848]]], [[[0.5221]], [[0.0105]]]]]], 4, Con20392), 
LMin84437 = minimum_layer([[[[[[0.0351, 0.8625]]]]], [[[[[0.113, 0.3032]]]]]], Min84437), 
LZer13637 = zero_padding3D_layer(Min84437, 1, 0, 1, 0, 0, 0, Zer13637), 
LMul76292 = multiply_layer([Con20392,Zer13637], Mul76292), 
LSub14368 = subtract_layer(Con43394,Mul76292, Sub14368), 
LMul35214 = multiply_layer([Con91400,Sub14368], Mul35214), 
exec_layers([LMin95503,LRes33143,LRes24909,LFla28341,LDot63040,LRes78250,LGlo69485,LCon11180,LMax35427,LRes88621,LRes35542,LRes92659,LZer51415,LCon91400,LAdd38359,LRes23787,LRes80480,LZer26788,LCon43394,LMin74791,LRes85297,LRes36452,LCon20392,LMin84437,LZer13637,LMul76292,LSub14368,LMul35214],["Min95503","Res33143","Res24909","Fla28341","Dot63040","Res78250","Glo69485","Con11180","Max35427","Res88621","Res35542","Res92659","Zer51415","Con91400","Add38359","Res23787","Res80480","Zer26788","Con43394","Min74791","Res85297","Res36452","Con20392","Min84437","Zer13637","Mul76292","Sub14368","Mul35214"],Mul35214,"Mul35214")

Actual (Unparsed): [[[[[0.0000000, 0.0214225]], [[0.0000000, 0.2948307]]], [[[0.0000000, 0.0158004]], [[0.8827998, 0.1782388]]]]]

Expected (Unparsed): [[[[[0.0,0.0214225]],[[0.0,0.29483068]]],[[[0.0,0.015800400000000003]],[[0.8827997716999999,0.17823882656]]]]]

Actual:   [[[[[0, 0.0215]], [[0, 0.2949]]], [[[0, 0.0159]], [[0.8828, 0.1783]]]]]

Expected: [[[[[0, 0.0215]], [[0, 0.2949]]], [[[0, 0.0159]], [[0.8828, 0.1783]]]]]