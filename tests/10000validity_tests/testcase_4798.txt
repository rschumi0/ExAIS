import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul75160 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul75160 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Dot91117 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot91117 = tf.keras.layers.Input(shape=([3, 2]))
in0Con60507 = tf.keras.layers.Input(shape=([3]))

Mul75160 = keras.layers.Multiply(name = 'Mul75160', )([in0Mul75160,in1Mul75160])
Res47099 = keras.layers.Reshape((2, 2), name = 'Res47099', )(Mul75160)
Fla62374 = keras.layers.Flatten(name = 'Fla62374', )(Res47099)
Dot91117 = keras.layers.Dot(axes=(1, 1), name = 'Dot91117', )([in0Dot91117,in1Dot91117])
Res35306 = keras.layers.Reshape((2, 2, 1), name = 'Res35306', )(Dot91117)
Glo78722 = keras.layers.GlobalMaxPool2D(name = 'Glo78722', )(Res35306)
Con60507 = keras.layers.Concatenate(axis=1, name = 'Con60507', )([Glo78722,in0Con60507])
Sub58692 = keras.layers.Subtract(name = 'Sub58692', )([Fla62374,Con60507])
model = tf.keras.models.Model(inputs=[in0Mul75160,in1Mul75160,in0Dot91117,in1Dot91117,in0Con60507], outputs=Sub58692)
in0Mul75160 = tf.constant([[[[0.939], [0.9708]], [[0.0933], [0.2087]]]])
in1Mul75160 = tf.constant([[[[0.2685], [0.2651]], [[0.0787], [0.1045]]]])
in0Dot91117 = tf.constant([[[0.8738, 0.9566], [0.7319, 0.7145], [0.2001, 0.9708]]])
in1Dot91117 = tf.constant([[[0.3915, 0.9159], [0.0128, 0.5666], [0.7746, 0.2853]]])
in0Con60507 = tf.constant([[0.6333, 0.0855, 0.374]])
print (np.array2string(model.predict([in0Mul75160,in1Mul75160,in0Dot91117,in1Dot91117,in0Con60507],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub58692.png')

LMul75160 = multiply_layer([[[[[0.939], [0.9708]], [[0.0933], [0.2087]]]], [[[[0.2685], [0.2651]], [[0.0787], [0.1045]]]]], Mul75160), 
LRes47099 = reshape_layer(Mul75160, [2, 2], Res47099), 
LFla62374 = flatten_layer(Res47099, Fla62374), 
LDot91117 = dot_layer([[[0.8738, 0.9566], [0.7319, 0.7145], [0.2001, 0.9708]]], [[[0.3915, 0.9159], [0.0128, 0.5666], [0.7746, 0.2853]]], 1, 1, Dot91117), 
LRes35306 = reshape_layer(Dot91117, [2, 2, 1], Res35306), 
LGlo78722 = global_max_pool2D_layer(Res35306, Glo78722), 
LCon60507 = concatenate_layer([Glo78722,[[0.6333, 0.0855, 0.374]]], 1, Con60507), 
LSub58692 = subtract_layer(Fla62374,Con60507, Sub58692), 
exec_layers([LMul75160,LRes47099,LFla62374,LDot91117,LRes35306,LGlo78722,LCon60507,LSub58692],["Mul75160","Res47099","Fla62374","Dot91117","Res35306","Glo78722","Con60507","Sub58692"],Sub58692,"Sub58692")

Actual (Unparsed): [[-1.3058334, -0.3759409, -0.0781573, -0.3521909]]

Expected (Unparsed): [[-1.3058333800000002,-0.37594091999999996,-0.07815729,-0.35219085]]

Actual:   [[-1.3058, -0.3759, -0.0781, -0.3521]]

Expected: [[-1.3058, -0.3759, -0.0781, -0.3521]]