import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul81568 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul81568 = tf.keras.layers.Input(shape=([2, 2]))

Mul81568 = keras.layers.Multiply(name = 'Mul81568', )([in0Mul81568,in1Mul81568])
Den93689 = keras.layers.Dense(3,name = 'Den93689', )(Mul81568)
Mas10968 = keras.layers.Masking(mask_value=2, name = 'Mas10968', )(Den93689)
model = tf.keras.models.Model(inputs=[in0Mul81568,in1Mul81568], outputs=Mas10968)
w = model.get_layer('Den93689').get_weights() 
w[0] = np.array([[0.9818, 0.1773, 0.2185], [0.2121, 0.3574, 0.3347]])
w[1] = np.array([0.8509, 0.0045, 0.7572])
model.get_layer('Den93689').set_weights(w) 
in0Mul81568 = tf.constant([[[0.2514, 0.9646], [0.663, 0.423]]])
in1Mul81568 = tf.constant([[[0.0334, 0.9283], [0.601, 0.9758]]])
print (np.array2string(model.predict([in0Mul81568,in1Mul81568],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas10968.png')

LMul81568 = multiply_layer([[[[0.2514, 0.9646], [0.663, 0.423]]], [[[0.0334, 0.9283], [0.601, 0.9758]]]], Mul81568), 
LDen93689 = dense_layer(Mul81568, [[0.9818, 0.1773, 0.2185], [0.2121, 0.3574, 0.3347]],[0.8509, 0.0045, 0.7572], Den93689), 
LMas10968 = masking_layer(Den93689, 2, Mas10968), 
exec_layers([LMul81568,LDen93689,LMas10968],["Mul81568","Den93689","Mas10968"],Mas10968,"Mas10968")

Actual (Unparsed): [[[1.0490664, 0.3260184, 1.0587379], [1.3296581, 0.2226691, 0.9824161]]]

Expected (Unparsed): [[[1.049066376946,0.32601835108,1.058737850906],[1.32965809054,0.22266912906000003,0.98241607548]]]

Actual:   [[[1.0491, 0.3261, 1.0588], [1.3297, 0.2227, 0.9825]]]

Expected: [[[1.0491, 0.3261, 1.0588], [1.3297, 0.2227, 0.9825]]]