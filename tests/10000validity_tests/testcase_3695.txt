import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_73962 = tf.keras.layers.Input(shape=([4, 1]))
in0Max82522 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max82522 = tf.keras.layers.Input(shape=([1, 2, 1]))

Up_73962 = keras.layers.UpSampling1D(size=(2), name = 'Up_73962', )(in0Up_73962)
Res82011 = keras.layers.Reshape((8, 1, 1), name = 'Res82011', )(Up_73962)
Zer62303 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer62303', )(Res82011)
Max82522 = keras.layers.Maximum(name = 'Max82522', )([in0Max82522,in1Max82522])
Zer47085 = keras.layers.ZeroPadding2D(padding=((7, 0), (1, 0)), name = 'Zer47085', )(Max82522)
Mul60304 = keras.layers.Multiply(name = 'Mul60304', )([Zer62303,Zer47085])
Res86550 = keras.layers.Reshape((8, 3), name = 'Res86550', )(Mul60304)
Max69359 = keras.layers.MaxPool1D(pool_size=(5), strides=(1), padding='valid', name = 'Max69359', )(Res86550)
model = tf.keras.models.Model(inputs=[in0Up_73962,in0Max82522,in1Max82522], outputs=Max69359)
in0Up_73962 = tf.constant([[[1.1777], [1.2388], [1.2067], [1.1504]]])
in0Max82522 = tf.constant([[[[0.9805], [0.8406]]]])
in1Max82522 = tf.constant([[[[0.9908], [0.167]]]])
print (np.array2string(model.predict([in0Up_73962,in0Max82522,in1Max82522],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max69359.png')

LUp_73962 = up_sampling1D_layer([[[1.1777], [1.2388], [1.2067], [1.1504]]], 2, Up_73962), 
LRes82011 = reshape_layer(Up_73962, [8, 1, 1], Res82011), 
LZer62303 = zero_padding2D_layer(Res82011, 0, 0, 2, 0, Zer62303), 
LMax82522 = maximum_layer([[[[[0.9805], [0.8406]]]], [[[[0.9908], [0.167]]]]], Max82522), 
LZer47085 = zero_padding2D_layer(Max82522, 7, 0, 1, 0, Zer47085), 
LMul60304 = multiply_layer([Zer62303,Zer47085], Mul60304), 
LRes86550 = reshape_layer(Mul60304, [8, 3], Res86550), 
LMax69359 = max_pool1D_layer(Res86550, 5, 1, false, Max69359), 
exec_layers([LUp_73962,LRes82011,LZer62303,LMax82522,LZer47085,LMul60304,LRes86550,LMax69359],["Up_73962","Res82011","Zer62303","Max82522","Zer47085","Mul60304","Res86550","Max69359"],Max69359,"Max69359")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.9670263]]]

Expected (Unparsed): [[[0,0,0.0],[0,0,0.0],[0,0,0.0],[0,0.0,0.96702624]]]

Actual:   [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0.9671]]]

Expected: [[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0.9671]]]