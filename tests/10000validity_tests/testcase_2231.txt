import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max725 = tf.keras.layers.Input(shape=([1, 1]))
in1Max725 = tf.keras.layers.Input(shape=([1, 1]))
in0Con99866 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave6913 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave6913 = tf.keras.layers.Input(shape=([2, 2, 2]))

Max725 = keras.layers.Maximum(name = 'Max725', )([in0Max725,in1Max725])
Res96684 = keras.layers.Reshape((1, 1, 1), name = 'Res96684', )(Max725)
Zer39117 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer39117', )(Res96684)
Con99866 = keras.layers.Concatenate(axis=3, name = 'Con99866', )([Zer39117,in0Con99866])
Ave6913 = keras.layers.Average(name = 'Ave6913', )([in0Ave6913,in1Ave6913])
Max73297 = keras.layers.Maximum(name = 'Max73297', )([Con99866,Ave6913])
model = tf.keras.models.Model(inputs=[in0Max725,in1Max725,in0Con99866,in0Ave6913,in1Ave6913], outputs=Max73297)
in0Max725 = tf.constant([[[0.9634]]])
in1Max725 = tf.constant([[[0.3752]]])
in0Con99866 = tf.constant([[[[0.4577], [0.5332]], [[0.1449], [0.939]]]])
in0Ave6913 = tf.constant([[[[0.0502, 0.3729], [0.1285, 0.8164]], [[0.8724, 0.7016], [0.9451, 0.852]]]])
in1Ave6913 = tf.constant([[[[0.8542, 0.151], [0.945, 0.7396]], [[0.4846, 0.0827], [0.5753, 0.8112]]]])
print (np.array2string(model.predict([in0Max725,in1Max725,in0Con99866,in0Ave6913,in1Ave6913],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max73297.png')

LMax725 = maximum_layer([[[[0.9634]]], [[[0.3752]]]], Max725), 
LRes96684 = reshape_layer(Max725, [1, 1, 1], Res96684), 
LZer39117 = zero_padding2D_layer(Res96684, 1, 0, 1, 0, Zer39117), 
LCon99866 = concatenate_layer([Zer39117,[[[[0.4577], [0.5332]], [[0.1449], [0.939]]]]], 3, Con99866), 
LAve6913 = average_layer([[[[[0.0502, 0.3729], [0.1285, 0.8164]], [[0.8724, 0.7016], [0.9451, 0.852]]]], [[[[0.8542, 0.151], [0.945, 0.7396]], [[0.4846, 0.0827], [0.5753, 0.8112]]]]], Ave6913), 
LMax73297 = maximum_layer([Con99866,Ave6913], Max73297), 
exec_layers([LMax725,LRes96684,LZer39117,LCon99866,LAve6913,LMax73297],["Max725","Res96684","Zer39117","Con99866","Ave6913","Max73297"],Max73297,"Max73297")

Actual (Unparsed): [[[[0.4522000, 0.4577000], [0.5367500, 0.7780000]], [[0.6785000, 0.3921500], [0.9634000, 0.9390000]]]]

Expected (Unparsed): [[[[0.4522,0.4577],[0.53675,0.778]],[[0.6785,0.39215],[0.9634,0.939]]]]

Actual:   [[[[0.4522, 0.4577], [0.5368, 0.778]], [[0.6785, 0.3922], [0.9634, 0.939]]]]

Expected: [[[[0.4522, 0.4577], [0.5368, 0.778]], [[0.6785, 0.3922], [0.9634, 0.939]]]]