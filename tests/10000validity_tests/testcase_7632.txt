import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave93243 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave93243 = tf.keras.layers.Input(shape=([1, 2]))
in0Den49564 = tf.keras.layers.Input(shape=([5, 2]))

Ave93243 = keras.layers.Average(name = 'Ave93243', )([in0Ave93243,in1Ave93243])
Zer95791 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer95791', )(Ave93243)
Den49564 = keras.layers.Dense(2,name = 'Den49564', )(in0Den49564)
ELU28500 = keras.layers.ELU(alpha=7.499512301754351, name = 'ELU28500', )(Den49564)
Max43456 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max43456', )(ELU28500)
Dot6360 = keras.layers.Dot(axes=(2, 2), name = 'Dot6360', )([Zer95791,Max43456])
Res41198 = keras.layers.Reshape((5, 5, 1), name = 'Res41198', )(Dot6360)
Res34097 = keras.layers.Reshape((5, 5, 1, 1), name = 'Res34097', )(Res41198)
Glo41889 = keras.layers.GlobalAveragePooling3D(name = 'Glo41889', )(Res34097)
model = tf.keras.models.Model(inputs=[in0Ave93243,in1Ave93243,in0Den49564], outputs=Glo41889)
w = model.get_layer('Den49564').get_weights() 
w[0] = np.array([[0.0101, 0.6061], [0.0744, 0.3735]])
w[1] = np.array([0.7564, 0.727])
model.get_layer('Den49564').set_weights(w) 
in0Ave93243 = tf.constant([[[0.0989, 0.4203]]])
in1Ave93243 = tf.constant([[[0.6443, 0.9943]]])
in0Den49564 = tf.constant([[[0.2345, 0.5246], [0.9086, 0.6961], [0.1622, 0.7321], [0.6893, 0.5595], [0.4044, 0.9231]]])
print (np.array2string(model.predict([in0Ave93243,in1Ave93243,in0Den49564],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo41889.png')

LAve93243 = average_layer([[[[0.0989, 0.4203]]], [[[0.6443, 0.9943]]]], Ave93243), 
LZer95791 = zero_padding1D_layer(Ave93243, 4, 0, Zer95791), 
LDen49564 = dense_layer([[[0.2345, 0.5246], [0.9086, 0.6961], [0.1622, 0.7321], [0.6893, 0.5595], [0.4044, 0.9231]]], [[0.0101, 0.6061], [0.0744, 0.3735]],[0.7564, 0.727], Den49564), 
LELU28500 = elu_layer(Den49564, 7.499512301754351, ELU28500), 
LMax43456 = max_pool1D_layer(ELU28500, 1, 1, false, Max43456), 
LDot6360 = dot_layer(Zer95791,Max43456, 2, 2, Dot6360), 
LRes41198 = reshape_layer(Dot6360, [5, 5, 1], Res41198), 
LRes34097 = reshape_layer(Res41198, [5, 5, 1, 1], Res34097), 
LGlo41889 = global_average_pooling3D_layer(Res34097, Glo41889), 
exec_layers([LAve93243,LZer95791,LDen49564,LELU28500,LMax43456,LDot6360,LRes41198,LRes34097,LGlo41889],["Ave93243","Zer95791","Den49564","ELU28500","Max43456","Dot6360","Res41198","Res34097","Glo41889"],Glo41889,"Glo41889")

Actual (Unparsed): [[0.2406560]]

Expected (Unparsed): [[0.24065597877584]]

Actual:   [[0.2407]]

Expected: [[0.2407]]