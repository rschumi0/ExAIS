import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave70193 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave70193 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave79707 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave79707 = tf.keras.layers.Input(shape=([1, 1]))

Ave70193 = keras.layers.Average(name = 'Ave70193', )([in0Ave70193,in1Ave70193])
Ave79707 = keras.layers.Average(name = 'Ave79707', )([in0Ave79707,in1Ave79707])
Res43071 = keras.layers.Reshape((1, 1, 1), name = 'Res43071', )(Ave79707)
Dep71581 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep71581', )(Res43071)
Zer61944 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer61944', )(Dep71581)
Add36855 = keras.layers.Add(name = 'Add36855', )([Ave70193,Zer61944])
Up_6026 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_6026', )(Add36855)
model = tf.keras.models.Model(inputs=[in0Ave70193,in1Ave70193,in0Ave79707,in1Ave79707], outputs=Up_6026)
w = model.get_layer('Dep71581').get_weights() 
w[0] = np.array([[[[0.6909]]]])
w[1] = np.array([0])
model.get_layer('Dep71581').set_weights(w) 
in0Ave70193 = tf.constant([[[[0.5965], [0.7569]]]])
in1Ave70193 = tf.constant([[[[0.0796], [0.5677]]]])
in0Ave79707 = tf.constant([[[0.7917]]])
in1Ave79707 = tf.constant([[[0.4217]]])
print (np.array2string(model.predict([in0Ave70193,in1Ave70193,in0Ave79707,in1Ave79707],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_6026.png')

LAve70193 = average_layer([[[[[0.5965], [0.7569]]]], [[[[0.0796], [0.5677]]]]], Ave70193), 
LAve79707 = average_layer([[[[0.7917]]], [[[0.4217]]]], Ave79707), 
LRes43071 = reshape_layer(Ave79707, [1, 1, 1], Res43071), 
LDep71581 = depthwise_conv2D_layer(Res43071, 1, 1,[[[[0.6909]]]],[0], 1, 1, true, Dep71581), 
LZer61944 = zero_padding2D_layer(Dep71581, 0, 0, 1, 0, Zer61944), 
LAdd36855 = add_layer([Ave70193,Zer61944], Add36855), 
LUp_6026 = up_sampling2D_layer(Add36855, 2, 1, Up_6026), 
exec_layers([LAve70193,LAve79707,LRes43071,LDep71581,LZer61944,LAdd36855,LUp_6026],["Ave70193","Ave79707","Res43071","Dep71581","Zer61944","Add36855","Up_6026"],Up_6026,"Up_6026")

Actual (Unparsed): [[[[0.3380500], [1.0814691]], [[0.3380500], [1.0814691]]]]

Expected (Unparsed): [[[[0.33805],[1.08146903]],[[0.33805],[1.08146903]]]]

Actual:   [[[[0.3381], [1.0815]], [[0.3381], [1.0815]]]]

Expected: [[[[0.3381], [1.0815]], [[0.3381], [1.0815]]]]