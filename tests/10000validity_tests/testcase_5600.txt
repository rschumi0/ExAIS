import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo22114 = tf.keras.layers.Input(shape=([2, 2, 1]))

Glo22114 = keras.layers.GlobalAveragePooling2D(name = 'Glo22114', )(in0Glo22114)
Sof31229 = keras.layers.Softmax(axis=1, name = 'Sof31229', )(Glo22114)
Thr91637 = keras.layers.ThresholdedReLU(theta=4.968120161625954, name = 'Thr91637', )(Sof31229)
Res57814 = keras.layers.Reshape((1, 1), name = 'Res57814', )(Thr91637)
Res95844 = keras.layers.Reshape((1, 1, 1), name = 'Res95844', )(Res57814)
Res49171 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res49171', )(Res95844)
Con94477 = keras.layers.Conv3D(4, (1, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con94477', )(Res49171)
model = tf.keras.models.Model(inputs=[in0Glo22114], outputs=Con94477)
w = model.get_layer('Con94477').get_weights() 
w[0] = np.array([[[[[0.3517, 0.0844, 0.1877, 0.7459]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con94477').set_weights(w) 
in0Glo22114 = tf.constant([[[[1.7047], [1.444]], [[1.6374], [1.4272]]]])
print (np.array2string(model.predict([in0Glo22114],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con94477.png')

LGlo22114 = global_average_pooling2D_layer([[[[1.7047], [1.444]], [[1.6374], [1.4272]]]], Glo22114), 
LSof31229 = softmax_layer(Glo22114, 1, Sof31229), 
LThr91637 = thresholded_relu_layer(Sof31229, 4.968120161625954, Thr91637), 
LRes57814 = reshape_layer(Thr91637, [1, 1], Res57814), 
LRes95844 = reshape_layer(Res57814, [1, 1, 1], Res95844), 
LRes49171 = reshape_layer(Res95844, [1, 1, 1, 1], Res49171), 
LCon94477 = conv3D_layer(Res49171, 1, 1, 1,[[[[[0.3517, 0.0844, 0.1877, 0.7459]]]]],[0, 0, 0, 0], 1, 1, 1, true, 1, 1, 1, Con94477), 
exec_layers([LGlo22114,LSof31229,LThr91637,LRes57814,LRes95844,LRes49171,LCon94477],["Glo22114","Sof31229","Thr91637","Res57814","Res95844","Res49171","Con94477"],Con94477,"Con94477")

Actual (Unparsed): [[[[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.0,0.0,0.0,0.0]]]]]

Actual:   [[[[[0, 0, 0, 0]]]]]

Expected: [[[[[0, 0, 0, 0]]]]]