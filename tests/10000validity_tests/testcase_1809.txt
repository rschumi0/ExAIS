import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul29700 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul29700 = tf.keras.layers.Input(shape=([2, 1]))
in0Con31827 = tf.keras.layers.Input(shape=([4, 4, 2]))
in0Dot5289 = tf.keras.layers.Input(shape=([2]))
in1Dot5289 = tf.keras.layers.Input(shape=([2]))
in0Con93861 = tf.keras.layers.Input(shape=([4, 4, 2]))
in0Up_67543 = tf.keras.layers.Input(shape=([4, 4, 3]))

Mul29700 = keras.layers.Multiply(name = 'Mul29700', )([in0Mul29700,in1Mul29700])
Zer84806 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer84806', )(Mul29700)
Res94799 = keras.layers.Reshape((4, 1, 1), name = 'Res94799', )(Zer84806)
Zer56648 = keras.layers.ZeroPadding2D(padding=((0, 0), (3, 0)), name = 'Zer56648', )(Res94799)
Con31827 = keras.layers.Concatenate(axis=3, name = 'Con31827', )([Zer56648,in0Con31827])
Dot5289 = keras.layers.Dot(axes=(1, 1), name = 'Dot5289', )([in0Dot5289,in1Dot5289])
Res42052 = keras.layers.Reshape((1, 1), name = 'Res42052', )(Dot5289)
Res11879 = keras.layers.Reshape((1, 1, 1), name = 'Res11879', )(Res42052)
Zer83416 = keras.layers.ZeroPadding2D(padding=((3, 0), (3, 0)), name = 'Zer83416', )(Res11879)
Con93861 = keras.layers.Concatenate(axis=3, name = 'Con93861', )([Zer83416,in0Con93861])
Up_67543 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_67543', )(in0Up_67543)
Min56931 = keras.layers.Minimum(name = 'Min56931', )([Con93861,Up_67543])
Add63253 = keras.layers.Add(name = 'Add63253', )([Con31827,Min56931])
model = tf.keras.models.Model(inputs=[in0Mul29700,in1Mul29700,in0Con31827,in0Dot5289,in1Dot5289,in0Con93861,in0Up_67543], outputs=Add63253)
in0Mul29700 = tf.constant([[[0.6033], [0.251]]])
in1Mul29700 = tf.constant([[[0.117], [0.6896]]])
in0Con31827 = tf.constant([[[[0.8232, 0.2519], [0.0061, 0.3111], [0.1122, 0.7195], [0.5286, 0.8203]], [[0.0157, 0.2625], [0.84, 0.1192], [0.9877, 0.7358], [0.6262, 0.5445]], [[0.1304, 0.2177], [0.914, 0.9898], [0.6895, 0.1438], [0.01, 0.7365]], [[0.3611, 0.9141], [0.2218, 0.26], [0.3858, 0.7173], [0.1434, 0.7503]]]])
in0Dot5289 = tf.constant([[0.8597, 0.1714]])
in1Dot5289 = tf.constant([[0.2587, 0.3071]])
in0Con93861 = tf.constant([[[[0.8494, 0.9392], [0.8052, 0.622], [0.8777, 0.5898], [0.1509, 0.1001]], [[0.1942, 0.4902], [0.282, 0.7404], [0.3396, 0.9298], [0.1887, 0.7018]], [[0.3232, 0.4527], [0.7589, 0.6445], [0.9549, 0.9357], [0.7486, 0.1863]], [[0.0824, 0.4935], [0.7705, 0.3801], [0.9787, 0.9026], [0.6056, 0.5634]]]])
in0Up_67543 = tf.constant([[[[1.4805, 1.111, 1.3717], [1.1827, 1.0018, 1.5965], [1.5583, 1.3206, 1.9473], [1.8823, 1.6198, 1.0425]], [[1.679, 1.8984, 1.4052], [1.5696, 1.7759, 1.17], [1.0859, 1.3788, 1.2203], [1.6213, 1.7638, 1.6736]], [[1.809, 1.725, 1.8454], [1.3753, 1.3687, 1.2898], [1.1675, 1.8803, 1.5533], [1.2853, 1.951, 1.4593]], [[1.2271, 1.4987, 1.273], [1.5794, 1.6976, 1.4868], [1.9004, 1.6192, 1.3504], [1.2458, 1.0072, 1.4171]]]])
print (np.array2string(model.predict([in0Mul29700,in1Mul29700,in0Con31827,in0Dot5289,in1Dot5289,in0Con93861,in0Up_67543],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add63253.png')

LMul29700 = multiply_layer([[[[0.6033], [0.251]]], [[[0.117], [0.6896]]]], Mul29700), 
LZer84806 = zero_padding1D_layer(Mul29700, 1, 1, Zer84806), 
LRes94799 = reshape_layer(Zer84806, [4, 1, 1], Res94799), 
LZer56648 = zero_padding2D_layer(Res94799, 0, 0, 3, 0, Zer56648), 
LCon31827 = concatenate_layer([Zer56648,[[[[0.8232, 0.2519], [0.0061, 0.3111], [0.1122, 0.7195], [0.5286, 0.8203]], [[0.0157, 0.2625], [0.84, 0.1192], [0.9877, 0.7358], [0.6262, 0.5445]], [[0.1304, 0.2177], [0.914, 0.9898], [0.6895, 0.1438], [0.01, 0.7365]], [[0.3611, 0.9141], [0.2218, 0.26], [0.3858, 0.7173], [0.1434, 0.7503]]]]], 3, Con31827), 
LDot5289 = dot_layer([[0.8597, 0.1714]], [[0.2587, 0.3071]], 1, 1, Dot5289), 
LRes42052 = reshape_layer(Dot5289, [1, 1], Res42052), 
LRes11879 = reshape_layer(Res42052, [1, 1, 1], Res11879), 
LZer83416 = zero_padding2D_layer(Res11879, 3, 0, 3, 0, Zer83416), 
LCon93861 = concatenate_layer([Zer83416,[[[[0.8494, 0.9392], [0.8052, 0.622], [0.8777, 0.5898], [0.1509, 0.1001]], [[0.1942, 0.4902], [0.282, 0.7404], [0.3396, 0.9298], [0.1887, 0.7018]], [[0.3232, 0.4527], [0.7589, 0.6445], [0.9549, 0.9357], [0.7486, 0.1863]], [[0.0824, 0.4935], [0.7705, 0.3801], [0.9787, 0.9026], [0.6056, 0.5634]]]]], 3, Con93861), 
LUp_67543 = up_sampling2D_layer([[[[1.4805, 1.111, 1.3717], [1.1827, 1.0018, 1.5965], [1.5583, 1.3206, 1.9473], [1.8823, 1.6198, 1.0425]], [[1.679, 1.8984, 1.4052], [1.5696, 1.7759, 1.17], [1.0859, 1.3788, 1.2203], [1.6213, 1.7638, 1.6736]], [[1.809, 1.725, 1.8454], [1.3753, 1.3687, 1.2898], [1.1675, 1.8803, 1.5533], [1.2853, 1.951, 1.4593]], [[1.2271, 1.4987, 1.273], [1.5794, 1.6976, 1.4868], [1.9004, 1.6192, 1.3504], [1.2458, 1.0072, 1.4171]]]], 1, 1, Up_67543), 
LMin56931 = minimum_layer([Con93861,Up_67543], Min56931), 
LAdd63253 = add_layer([Con31827,Min56931], Add63253), 
exec_layers([LMul29700,LZer84806,LRes94799,LZer56648,LCon31827,LDot5289,LRes42052,LRes11879,LZer83416,LCon93861,LUp_67543,LMin56931,LAdd63253],["Mul29700","Zer84806","Res94799","Zer56648","Con31827","Dot5289","Res42052","Res11879","Zer83416","Con93861","Up_67543","Min56931","Add63253"],Add63253,"Add63253")

Actual (Unparsed): [[[[0.0000000, 1.6726000, 1.1911000], [0.0000000, 0.8113000, 0.9331000], [0.0000000, 0.9899000, 1.3093000], [0.0000000, 0.6795000, 0.9204000]], [[0.0000000, 0.2099000, 0.7527000], [0.0000000, 1.1220000, 0.8596000], [0.0000000, 1.3273000, 1.6656000], [0.0705861, 0.8149000, 1.2463000]], [[0.0000000, 0.4536000, 0.6704000], [0.0000000, 1.6729000, 1.6343000], [0.0000000, 1.6444000, 1.0795000], [0.1730896, 0.7586000, 0.9228000]], [[0.0000000, 0.4435000, 1.4076000], [0.0000000, 0.9923000, 0.6401000], [0.0000000, 1.3645000, 1.6199000], [0.2750413, 0.7490000, 1.3137000]]]]

Expected (Unparsed): [[[[0,1.6726,1.1911],[0,0.8113,0.9331],[0,0.9899,1.3093],[0,0.6795,0.9204]],[[0,0.2099,0.7527],[0,1.1219999999999999,0.8595999999999999],[0,1.3273000000000001,1.6656],[0.0705861,0.8149,1.2463]],[[0,0.4536,0.6704],[0,1.6729,1.6343],[0,1.6444,1.0795],[0.1730896,0.7586,0.9228000000000001]],[[0,0.4435,1.4076],[0,0.9923,0.6401],[0,1.3645,1.6199],[0.27504133,0.749,1.3136999999999999]]]]

Actual:   [[[[0, 1.6726, 1.1911], [0, 0.8113, 0.9331], [0, 0.9899, 1.3093], [0, 0.6795, 0.9204]], [[0, 0.2099, 0.7527], [0, 1.122, 0.8596], [0, 1.3273, 1.6656], [0.0706, 0.8149, 1.2463]], [[0, 0.4536, 0.6704], [0, 1.6729, 1.6343], [0, 1.6444, 1.0795], [0.1731, 0.7586, 0.9228]], [[0, 0.4435, 1.4076], [0, 0.9923, 0.6401], [0, 1.3645, 1.6199], [0.2751, 0.749, 1.3137]]]]

Expected: [[[[0, 1.6726, 1.1911], [0, 0.8113, 0.9331], [0, 0.9899, 1.3093], [0, 0.6795, 0.9204]], [[0, 0.2099, 0.7527], [0, 1.122, 0.8596], [0, 1.3274, 1.6656], [0.0706, 0.8149, 1.2463]], [[0, 0.4536, 0.6704], [0, 1.6729, 1.6343], [0, 1.6444, 1.0795], [0.1731, 0.7586, 0.9229]], [[0, 0.4435, 1.4076], [0, 0.9923, 0.6401], [0, 1.3645, 1.6199], [0.2751, 0.749, 1.3137]]]]