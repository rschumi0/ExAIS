import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub7253 = tf.keras.layers.Input(shape=([3, 3, 3]))
in1Sub7253 = tf.keras.layers.Input(shape=([3, 3, 3]))
in0PRe83431 = tf.keras.layers.Input(shape=([1, 2]))
in0Con38108 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Min74538 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min74538 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con435 = tf.keras.layers.Input(shape=([3, 9, 2]))

Sub7253 = keras.layers.Subtract(name = 'Sub7253', )([in0Sub7253,in1Sub7253])
Res84790 = keras.layers.Reshape((3, 3, 3, 1), name = 'Res84790', )(Sub7253)
Con11774 = keras.layers.Conv3DTranspose(2, (3, 2, 1),strides=(1, 3, 1), padding='same', name = 'Con11774', )(Res84790)
Res38 = keras.layers.Reshape((3, 9, 6), name = 'Res38', )(Con11774)
Dep54096 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='same', name = 'Dep54096', )(Res38)
PRe83431 = keras.layers.PReLU(name = 'PRe83431', input_shape=(1, 2))(in0PRe83431)
Res58390 = keras.layers.Reshape((1, 2, 1), name = 'Res58390', )(PRe83431)
Con38108 = keras.layers.Concatenate(axis=3, name = 'Con38108', )([Res58390,in0Con38108])
Min74538 = keras.layers.Minimum(name = 'Min74538', )([in0Min74538,in1Min74538])
Zer45646 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer45646', )(Min74538)
Add30274 = keras.layers.Add(name = 'Add30274', )([Con38108,Zer45646])
Sep85190 = keras.layers.SeparableConv2D(4, (1, 2),strides=(1, 1), padding='same', name = 'Sep85190', )(Add30274)
Zer93894 = keras.layers.ZeroPadding2D(padding=((2, 0), (7, 0)), name = 'Zer93894', )(Sep85190)
Con435 = keras.layers.Concatenate(axis=3, name = 'Con435', )([Zer93894,in0Con435])
Sub9408 = keras.layers.Subtract(name = 'Sub9408', )([Dep54096,Con435])
ELU2394 = keras.layers.ELU(alpha=3.4580688460796587, name = 'ELU2394', )(Sub9408)
model = tf.keras.models.Model(inputs=[in0Sub7253,in1Sub7253,in0PRe83431,in0Con38108,in0Min74538,in1Min74538,in0Con435], outputs=ELU2394)
w = model.get_layer('Con11774').get_weights() 
w[0] = np.array([[[[[0.3619], [0.4753]]], [[[0.1599], [0.7532]]]], [[[[0.5602], [0.5365]]], [[[0.0643], [0.1111]]]], [[[[0.2131], [0.002]]], [[[0.3175], [0.6122]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con11774').set_weights(w) 
w = model.get_layer('Dep54096').get_weights() 
w[0] = np.array([[[[0.5123], [0.5595], [0.4912], [0.5983], [0.5012], [0.5443]], [[0.6118], [0.9713], [0.6348], [0.3088], [0.8068], [0.5281]]]])
w[1] = np.array([0, 0, 0, 0, 0, 0])
model.get_layer('Dep54096').set_weights(w) 
w = model.get_layer('PRe83431').get_weights() 
w[0] = np.array([[0.098, 0.9909]])
model.get_layer('PRe83431').set_weights(w) 
w = model.get_layer('Sep85190').get_weights() 
w[0] = np.array([[[[0.772], [0.2787]], [[0.997], [0.812]]]])
w[1] = np.array([[[[0.0332, 0.4713, 0.8974, 0.0482], [0.6191, 0.0858, 0.5268, 0.0825]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep85190').set_weights(w) 
in0Sub7253 = tf.constant([[[[0.9374, 0.9022, 0.5672], [0.5306, 0.3675, 0.3401], [0.0686, 0.3247, 0.5011]], [[0.3829, 0.3026, 0.7573], [0.5745, 0.3932, 0.2863], [0.1735, 0.848, 0.4051]], [[0.9768, 0.4334, 0.4494], [0.8021, 0.8865, 0.208], [0.562, 0.3563, 0.7294]]]])
in1Sub7253 = tf.constant([[[[0.2366, 0.8469, 0.8279], [0.7475, 0.6181, 0.5184], [0.8865, 0.0341, 0.5351]], [[0.5413, 0.465, 0.8625], [0.4221, 0.0107, 0.7765], [0.7618, 0.4806, 0.8902]], [[0.137, 0.8347, 0.614], [0.9355, 0.4233, 0.6076], [0.3136, 0.8088, 0.4637]]]])
in0PRe83431 = tf.constant([[[0.5194, 0.7591]]])
in0Con38108 = tf.constant([[[[0.3463], [0.3481]]]])
in0Min74538 = tf.constant([[[[0.1044, 0.9138]]]])
in1Min74538 = tf.constant([[[[0.0124, 0.414]]]])
in0Con435 = tf.constant([[[[0.4822, 0.1707], [0.9678, 0.298], [0.1117, 0.5947], [0.2359, 0.5632], [0.0482, 0.3904], [0.4325, 0.1076], [0.6991, 0.8189], [0.2141, 0.4685], [0.0275, 0.7179]], [[0.6801, 0.3357], [0.2458, 0.4818], [0.5328, 0.127], [0.3473, 0.914], [0.6355, 0.1739], [0.9506, 0.7958], [0.0169, 0.7462], [0.6174, 0.394], [0.7584, 0.3591]], [[0.1455, 0.4174], [0.7442, 0.4152], [0.3342, 0.1228], [0.9541, 0.2571], [0.3743, 0.3713], [0.8369, 0.1335], [0.3233, 0.4394], [0.3122, 0.4116], [0.0934, 0.3028]]]])
print (np.array2string(model.predict([in0Sub7253,in1Sub7253,in0PRe83431,in0Con38108,in0Min74538,in1Min74538,in0Con435],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ELU2394.png')

LSub7253 = subtract_layer([[[[0.9374, 0.9022, 0.5672], [0.5306, 0.3675, 0.3401], [0.0686, 0.3247, 0.5011]], [[0.3829, 0.3026, 0.7573], [0.5745, 0.3932, 0.2863], [0.1735, 0.848, 0.4051]], [[0.9768, 0.4334, 0.4494], [0.8021, 0.8865, 0.208], [0.562, 0.3563, 0.7294]]]], [[[[0.2366, 0.8469, 0.8279], [0.7475, 0.6181, 0.5184], [0.8865, 0.0341, 0.5351]], [[0.5413, 0.465, 0.8625], [0.4221, 0.0107, 0.7765], [0.7618, 0.4806, 0.8902]], [[0.137, 0.8347, 0.614], [0.9355, 0.4233, 0.6076], [0.3136, 0.8088, 0.4637]]]], Sub7253), 
LRes84790 = reshape_layer(Sub7253, [3, 3, 3, 1], Res84790), 
LCon11774 = conv3D_transpose_layer(Res84790, 3, 2, 1,[[[[[0.3619], [0.4753]]], [[[0.1599], [0.7532]]]], [[[[0.5602], [0.5365]]], [[[0.0643], [0.1111]]]], [[[[0.2131], [0.002]]], [[[0.3175], [0.6122]]]]],[0, 0], 1, 3, 1, true, Con11774), 
LRes38 = reshape_layer(Con11774, [3, 9, 6], Res38), 
LDep54096 = depthwise_conv2D_layer(Res38, 1, 2,[[[[0.5123], [0.5595], [0.4912], [0.5983], [0.5012], [0.5443]], [[0.6118], [0.9713], [0.6348], [0.3088], [0.8068], [0.5281]]]],[0, 0, 0, 0, 0, 0], 1, 1, true, Dep54096), 
LPRe83431 = prelu_layer([[[0.5194, 0.7591]]], [[0.098, 0.9909]], PRe83431), 
LRes58390 = reshape_layer(PRe83431, [1, 2, 1], Res58390), 
LCon38108 = concatenate_layer([Res58390,[[[[0.3463], [0.3481]]]]], 3, Con38108), 
LMin74538 = minimum_layer([[[[[0.1044, 0.9138]]]], [[[[0.0124, 0.414]]]]], Min74538), 
LZer45646 = zero_padding2D_layer(Min74538, 0, 0, 1, 0, Zer45646), 
LAdd30274 = add_layer([Con38108,Zer45646], Add30274), 
LSep85190 = separable_conv2D_layer(Add30274, 1, 2,[[[[[0.772], [0.2787]], [[0.997], [0.812]]]],[[[[0.0332, 0.4713, 0.8974, 0.0482], [0.6191, 0.0858, 0.5268, 0.0825]]]]],[0, 0, 0, 0], 1, 1, true, Sep85190), 
LZer93894 = zero_padding2D_layer(Sep85190, 2, 0, 7, 0, Zer93894), 
LCon435 = concatenate_layer([Zer93894,[[[[0.4822, 0.1707], [0.9678, 0.298], [0.1117, 0.5947], [0.2359, 0.5632], [0.0482, 0.3904], [0.4325, 0.1076], [0.6991, 0.8189], [0.2141, 0.4685], [0.0275, 0.7179]], [[0.6801, 0.3357], [0.2458, 0.4818], [0.5328, 0.127], [0.3473, 0.914], [0.6355, 0.1739], [0.9506, 0.7958], [0.0169, 0.7462], [0.6174, 0.394], [0.7584, 0.3591]], [[0.1455, 0.4174], [0.7442, 0.4152], [0.3342, 0.1228], [0.9541, 0.2571], [0.3743, 0.3713], [0.8369, 0.1335], [0.3233, 0.4394], [0.3122, 0.4116], [0.0934, 0.3028]]]]], 3, Con435), 
LSub9408 = subtract_layer(Dep54096,Con435, Sub9408), 
LELU2394 = elu_layer(Sub9408, 3.4580688460796587, ELU2394), 
exec_layers([LSub7253,LRes84790,LCon11774,LRes38,LDep54096,LPRe83431,LRes58390,LCon38108,LMin74538,LZer45646,LAdd30274,LSep85190,LZer93894,LCon435,LSub9408,LELU2394],["Sub7253","Res84790","Con11774","Res38","Dep54096","PRe83431","Res58390","Con38108","Min74538","Zer45646","Add30274","Sep85190","Zer93894","Con435","Sub9408","ELU2394"],ELU2394,"ELU2394")

Actual (Unparsed): [[[[0.1838282, 0.1279785, -0.0950770, -0.2153770, -1.5632270, -0.9749261], [0.0101094, -0.0792705, -0.0378603, -0.2322001, -2.1662157, -1.0379496], [-0.1375700, -0.1444530, -0.0042985, 0.0146233, -0.9854073, -1.8541495], [-0.0941942, 0.0635078, 0.0276341, 0.1087002, -1.2472899, -2.1173840], [0.0053392, 0.0507411, 0.0221277, 0.1557120, -0.3078288, -1.5643122], [-1.1644396, -1.7370668, 0.1877460, 0.1020683, -1.5402215, -0.7351232], [-1.2164854, -2.0808008, 0.1944298, 0.2931801, -1.9961801, -2.3623256], [-0.2502978, -0.8930891, 0.0380350, 0.1848815, -0.7758678, -1.6875381], [0.0000000, 0.0000000, 0.0000000, 0.0000000, -0.0938012, -1.7713075]], [[0.3987996, 1.1905723, -0.4711061, -0.7773776, -1.9959302, -1.4930656], [0.1775647, 0.5841006, -0.0955642, -0.5446450, -0.9061561, -1.6392313], [-0.0192502, 0.0174094, 0.2085354, 0.1311996, -2.0544913, -1.0607912], [-0.1813291, -0.6271087, 0.1734835, 0.3276814, -1.7393203, -2.6104820], [-0.1395357, -0.3942171, 0.0093794, 0.1423719, -1.7608095, -1.2013066], [-0.7736963, -0.6083141, 0.0660094, -0.0185116, -2.3048078, -2.0043494], [-1.0689624, -1.3173230, 0.0787130, -0.1624092, -0.3544392, -1.8293625], [-0.4278236, -0.6607289, 0.0213842, -0.2436128, -1.5925109, -0.9613582], [0.0000000, 0.0000000, 0.0000000, 0.0000000, -1.8382566, -1.0432838]], [[0.2259899, 0.2483416, -0.5596260, -0.5507406, -0.7336033, -1.3799545], [0.0018992, -0.0070947, -0.1289478, -0.2854681, -1.8509145, -1.2755015], [-0.0882495, -0.2312678, 0.2164639, 0.0769751, -1.5585061, -0.7284128], [0.0027085, 0.0363538, 0.2634962, 0.2373413, -2.4820191, -1.4753712], [0.0203943, 0.0439087, 0.0742830, 0.1708912, -1.2863340, -1.4804350], [0.0084348, 0.1282990, -0.3639756, -0.2490315, -1.9045917, -0.1972526], [-0.3210596, -0.7625274, -0.1038048, -0.3003981, -1.1653897, -1.3681483], [-1.5009235, -1.9026119, -2.5915120, -0.0375720, -1.0951950, -1.4772063], [-0.4854561, -0.8935234, -1.6462527, -0.1562295, -0.3083591, -0.9034314]]]]

Expected (Unparsed): [[[[0.18382815806400002,0.12797855256,-0.09507699203640099,-0.21537695232376272,-1.563226992406146,-0.974926106071462],[0.010109359343999999,-0.07927045637882521,-0.03786026916085745,-0.23220012378808122,-2.166215680597809,-1.037949602601925],[-0.13756999096334047,-0.14445301348265202,-0.004298500149348462,0.014623332080000006,-0.9854073175824635,-1.85414949869496],[-0.09419423062853981,0.06350781718199999,0.027634135772000006,0.10870017249700001,-1.2472898691378302,-2.117384042993421],[0.005339236706999999,0.050741105355,0.022127661104,0.155711966522,-0.30782883452889187,-1.5643122353741918],[-1.1644396044084275,-1.7370668493560342,0.18774602306399998,0.102068318656,-1.5402214796462212,-0.7351232133704517],[-1.216485427527132,-2.0808007928907615,0.194429802448,0.293180069188,-1.9961801183573824,-2.3623255593859787],[-0.25029783599567745,-0.8930890946630488,0.038035011008,0.184881484722,-0.7758677904746609,-1.6875380574964858],[0.0,0.0,0.0,0.0,-0.09380121520192178,-1.7713075519743713]],[[0.398799563786,1.190572271074,-0.47110610475320824,-0.7773776539993006,-1.995930169103566,-1.4930655825483732],[0.17756466566999998,0.58410058836,-0.09556416269877507,-0.5446449899344105,-0.9061560504632004,-1.6392313334897346],[-0.019250161660323898,0.017409367514000042,0.208535431056,0.131199550288,-2.0544912744640595,-1.0607912163859246],[-0.18132912079977823,-0.6271086586728987,0.173483471228,0.327681383579,-1.7393203142055957,-2.6104820822708112],[-0.13953568257986063,-0.3942170943976375,0.009379429615999992,0.14237186886099998,-1.7608095184731352,-1.2013066511883101],[-0.7736963193286798,-0.6083140882805184,0.06600941773199999,-0.018511618727641073,-2.3048077079209697,-2.004349427690122],[-1.0689623841403229,-1.31732293522112,0.07871297564400001,-0.1624092209330331,-0.3544391968240338,-1.8293624305108183],[-0.4278235641160498,-0.6607288750269429,0.021384180784000006,-0.24361283010236595,-1.5925109572186087,-0.9613581785459036],[0.0,0.0,0.0,0.0,-1.8382565170072203,-1.043283749353693]],[[0.225989909568,0.24834163514000002,-0.559626044188595,-0.5507405711921456,-0.7336032337142622,-1.3799544700926387],[0.0018991678219999987,-0.007094743956250824,-0.12894780183481944,-0.285468087838326,-1.8509145059389749,-1.2755015184073248],[-0.08824944666526884,-0.23126772440721174,0.216463873572,0.07697513183999999,-1.5585061399578408,-0.7284127822855635],[0.002708531532000031,0.036353830052000026,0.26349615891600003,0.23734125051599997,-2.4820191167353087,-1.47537122218629],[0.02039434537400001,0.043908743130000004,0.074282952912,0.170891244366,-1.2863340205040386,-1.480434959216265],[0.00843485601000003,0.12829901700000004,-0.3639756130394879,-0.24903154959962528,-1.9045916688853175,-0.19725255892748977],[-0.32105959623104363,-0.7625273675509235,-0.10380483594664192,-0.3003980858563373,-1.1653896749363366,-1.3681483010078435],[-1.5009234905381317,-1.9026118571000987,-2.591511976147346,-0.037571994042688274,-1.0951950118136198,-1.4772062789705265],[-0.4854560576524051,-0.8935233379339681,-1.6462526430925521,-0.15622947651770372,-0.3083591258537669,-0.903431444787389]]]]

Actual:   [[[[0.1839, 0.128, -0.095, -0.2153, -1.5632, -0.9749], [0.0102, -0.0792, -0.0378, -0.2322, -2.1662, -1.0379], [-0.1375, -0.1444, -0.0042, 0.0147, -0.9854, -1.8541], [-0.0941, 0.0636, 0.0277, 0.1088, -1.2472, -2.1173], [0.0054, 0.0508, 0.0222, 0.1558, -0.3078, -1.5643], [-1.1644, -1.737, 0.1878, 0.1021, -1.5402, -0.7351], [-1.2164, -2.0808, 0.1945, 0.2932, -1.9961, -2.3623], [-0.2502, -0.893, 0.0381, 0.1849, -0.7758, -1.6875], [0, 0, 0, 0, -0.0938, -1.7713]], [[0.3988, 1.1906, -0.4711, -0.7773, -1.9959, -1.493], [0.1776, 0.5842, -0.0955, -0.5446, -0.9061, -1.6392], [-0.0192, 0.0175, 0.2086, 0.1312, -2.0544, -1.0607], [-0.1813, -0.6271, 0.1735, 0.3277, -1.7393, -2.6104], [-0.1395, -0.3942, 0.0094, 0.1424, -1.7608, -1.2013], [-0.7736, -0.6083, 0.0661, -0.0185, -2.3048, -2.0043], [-1.0689, -1.3173, 0.0788, -0.1624, -0.3544, -1.8293], [-0.4278, -0.6607, 0.0214, -0.2436, -1.5925, -0.9613], [0, 0, 0, 0, -1.8382, -1.0432]], [[0.226, 0.2484, -0.5596, -0.5507, -0.7336, -1.3799], [0.0019, -0.007, -0.1289, -0.2854, -1.8509, -1.2755], [-0.0882, -0.2312, 0.2165, 0.077, -1.5585, -0.7284], [0.0028, 0.0364, 0.2635, 0.2374, -2.482, -1.4753], [0.0204, 0.044, 0.0743, 0.1709, -1.2863, -1.4804], [0.0085, 0.1283, -0.3639, -0.249, -1.9045, -0.1972], [-0.321, -0.7625, -0.1038, -0.3003, -1.1653, -1.3681], [-1.5009, -1.9026, -2.5915, -0.0375, -1.0951, -1.4772], [-0.4854, -0.8935, -1.6462, -0.1562, -0.3083, -0.9034]]]]

Expected: [[[[0.1839, 0.128, -0.095, -0.2153, -1.5632, -0.9749], [0.0102, -0.0792, -0.0378, -0.2322, -2.1662, -1.0379], [-0.1375, -0.1444, -0.0042, 0.0147, -0.9854, -1.8541], [-0.0941, 0.0636, 0.0277, 0.1088, -1.2472, -2.1173], [0.0054, 0.0508, 0.0222, 0.1558, -0.3078, -1.5643], [-1.1644, -1.737, 0.1878, 0.1021, -1.5402, -0.7351], [-1.2164, -2.0808, 0.1945, 0.2932, -1.9961, -2.3623], [-0.2502, -0.893, 0.0381, 0.1849, -0.7758, -1.6875], [0, 0, 0, 0, -0.0938, -1.7713]], [[0.3988, 1.1906, -0.4711, -0.7773, -1.9959, -1.493], [0.1776, 0.5842, -0.0955, -0.5446, -0.9061, -1.6392], [-0.0192, 0.0175, 0.2086, 0.1312, -2.0544, -1.0607], [-0.1813, -0.6271, 0.1735, 0.3277, -1.7393, -2.6104], [-0.1395, -0.3942, 0.0094, 0.1424, -1.7608, -1.2013], [-0.7736, -0.6083, 0.0661, -0.0185, -2.3048, -2.0043], [-1.0689, -1.3173, 0.0788, -0.1624, -0.3544, -1.8293], [-0.4278, -0.6607, 0.0214, -0.2436, -1.5925, -0.9613], [0, 0, 0, 0, -1.8382, -1.0432]], [[0.226, 0.2484, -0.5596, -0.5507, -0.7336, -1.3799], [0.0019, -0.007, -0.1289, -0.2854, -1.8509, -1.2755], [-0.0882, -0.2312, 0.2165, 0.077, -1.5585, -0.7284], [0.0028, 0.0364, 0.2635, 0.2374, -2.482, -1.4753], [0.0204, 0.044, 0.0743, 0.1709, -1.2863, -1.4804], [0.0085, 0.1283, -0.3639, -0.249, -1.9045, -0.1972], [-0.321, -0.7625, -0.1038, -0.3003, -1.1653, -1.3681], [-1.5009, -1.9026, -2.5915, -0.0375, -1.0951, -1.4772], [-0.4854, -0.8935, -1.6462, -0.1562, -0.3083, -0.9034]]]]