import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave6277 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave6277 = tf.keras.layers.Input(shape=([1, 2, 1]))

Ave6277 = keras.layers.Average(name = 'Ave6277', )([in0Ave6277,in1Ave6277])
Res83709 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res83709', )(Ave6277)
Con88016 = keras.layers.Conv3DTranspose(2, (1, 2, 1),strides=(7, 1, 1), padding='same', name = 'Con88016', )(Res83709)
Res91382 = keras.layers.Reshape((7, 2, 2), name = 'Res91382', )(Con88016)
Res4066 = keras.layers.Reshape((7, 4), name = 'Res4066', )(Res91382)
Fla13087 = keras.layers.Flatten(name = 'Fla13087', )(Res4066)
ReL59521 = keras.layers.ReLU(max_value=8.494838377035064, negative_slope=3.9781563085468576, threshold=2.1618465778224136, name = 'ReL59521', )(Fla13087)
Res11421 = keras.layers.Reshape((28, 1), name = 'Res11421', )(ReL59521)
Res85950 = keras.layers.Reshape((28, 1, 1), name = 'Res85950', )(Res11421)
Res40977 = keras.layers.Reshape((28, 1, 1, 1), name = 'Res40977', )(Res85950)
Cro25879 = keras.layers.Cropping3D(cropping=((25, 2), (0, 0), (0, 0)), name = 'Cro25879', )(Res40977)
model = tf.keras.models.Model(inputs=[in0Ave6277,in1Ave6277], outputs=Cro25879)
w = model.get_layer('Con88016').get_weights() 
w[0] = np.array([[[[[0.9353], [0.2164]]], [[[0.0318], [0.6619]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con88016').set_weights(w) 
in0Ave6277 = tf.constant([[[[0.0091], [0.0375]]]])
in1Ave6277 = tf.constant([[[[0.4337], [0.8222]]]])
print (np.array2string(model.predict([in0Ave6277,in1Ave6277],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro25879.png')

LAve6277 = average_layer([[[[[0.0091], [0.0375]]]], [[[[0.4337], [0.8222]]]]], Ave6277), 
LRes83709 = reshape_layer(Ave6277, [1, 2, 1, 1], Res83709), 
LCon88016 = conv3D_transpose_layer(Res83709, 1, 2, 1,[[[[[0.9353], [0.2164]]], [[[0.0318], [0.6619]]]]],[0, 0], 7, 1, 1, true, Con88016), 
LRes91382 = reshape_layer(Con88016, [7, 2, 2], Res91382), 
LRes4066 = reshape_layer(Res91382, [7, 4], Res4066), 
LFla13087 = flatten_layer(Res4066, Fla13087), 
LReL59521 = relu_layer(Fla13087, 8.494838377035064, 3.9781563085468576, 2.1618465778224136, ReL59521), 
LRes11421 = reshape_layer(ReL59521, [28, 1], Res11421), 
LRes85950 = reshape_layer(Res11421, [28, 1, 1], Res85950), 
LRes40977 = reshape_layer(Res85950, [28, 1, 1, 1], Res40977), 
LCro25879 = cropping3D_layer(Res40977, 25, 2, 0, 0, 0, 0, Cro25879), 
exec_layers([LAve6277,LRes83709,LCon88016,LRes91382,LRes4066,LFla13087,LReL59521,LRes11421,LRes85950,LRes40977,LCro25879],["Ave6277","Res83709","Con88016","Res91382","Res4066","Fla13087","ReL59521","Res11421","Res85950","Res40977","Cro25879"],Cro25879,"Cro25879")

Actual (Unparsed): [[[[[-8.6001636]]]]]

Expected (Unparsed): [[[[[-8.60016360167467]]]]]

Actual:   [[[[[-8.6001]]]]]

Expected: [[[[[-8.6001]]]]]