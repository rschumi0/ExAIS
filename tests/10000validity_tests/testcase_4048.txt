import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add48792 = tf.keras.layers.Input(shape=([2, 2]))
in1Add48792 = tf.keras.layers.Input(shape=([2, 2]))
in0Min91368 = tf.keras.layers.Input(shape=([2, 1]))
in1Min91368 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul90019 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul90019 = tf.keras.layers.Input(shape=([1, 1, 1]))

Add48792 = keras.layers.Add(name = 'Add48792', )([in0Add48792,in1Add48792])
Glo55678 = keras.layers.GlobalAveragePooling1D(name = 'Glo55678', )(Add48792)
Res82768 = keras.layers.Reshape((2, 1), name = 'Res82768', )(Glo55678)
Res73949 = keras.layers.Reshape((2, 1, 1), name = 'Res73949', )(Res82768)
Res14509 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res14509', )(Res73949)
Glo51687 = keras.layers.GlobalAveragePooling3D(name = 'Glo51687', )(Res14509)
Res32907 = keras.layers.Reshape((1, 1), name = 'Res32907', )(Glo51687)
Zer33650 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer33650', )(Res32907)
Min91368 = keras.layers.Minimum(name = 'Min91368', )([in0Min91368,in1Min91368])
Zer68086 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer68086', )(Min91368)
Min35439 = keras.layers.Minimum(name = 'Min35439', )([Zer33650,Zer68086])
Mul90019 = keras.layers.Multiply(name = 'Mul90019', )([in0Mul90019,in1Mul90019])
Res51150 = keras.layers.Reshape((1, 1), name = 'Res51150', )(Mul90019)
Dot98196 = keras.layers.Dot(axes=(2, 2), name = 'Dot98196', )([Min35439,Res51150])
model = tf.keras.models.Model(inputs=[in0Add48792,in1Add48792,in0Min91368,in1Min91368,in0Mul90019,in1Mul90019], outputs=Dot98196)
in0Add48792 = tf.constant([[[0.9835, 0.5482], [0.521, 0.9546]]])
in1Add48792 = tf.constant([[[0.7184, 0.1827], [0.7393, 0.9415]]])
in0Min91368 = tf.constant([[[0.9238], [0.9187]]])
in1Min91368 = tf.constant([[[0.3714], [0.7733]]])
in0Mul90019 = tf.constant([[[[0.5979]]]])
in1Mul90019 = tf.constant([[[[0.2524]]]])
print (np.array2string(model.predict([in0Add48792,in1Add48792,in0Min91368,in1Min91368,in0Mul90019,in1Mul90019],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot98196.png')

LAdd48792 = add_layer([[[[0.9835, 0.5482], [0.521, 0.9546]]], [[[0.7184, 0.1827], [0.7393, 0.9415]]]], Add48792), 
LGlo55678 = global_average_pooling1D_layer(Add48792, Glo55678), 
LRes82768 = reshape_layer(Glo55678, [2, 1], Res82768), 
LRes73949 = reshape_layer(Res82768, [2, 1, 1], Res73949), 
LRes14509 = reshape_layer(Res73949, [2, 1, 1, 1], Res14509), 
LGlo51687 = global_average_pooling3D_layer(Res14509, Glo51687), 
LRes32907 = reshape_layer(Glo51687, [1, 1], Res32907), 
LZer33650 = zero_padding1D_layer(Res32907, 3, 0, Zer33650), 
LMin91368 = minimum_layer([[[[0.9238], [0.9187]]], [[[0.3714], [0.7733]]]], Min91368), 
LZer68086 = zero_padding1D_layer(Min91368, 1, 1, Zer68086), 
LMin35439 = minimum_layer([Zer33650,Zer68086], Min35439), 
LMul90019 = multiply_layer([[[[[0.5979]]]], [[[[0.2524]]]]], Mul90019), 
LRes51150 = reshape_layer(Mul90019, [1, 1], Res51150), 
LDot98196 = dot_layer(Min35439,Res51150, 2, 2, Dot98196), 
exec_layers([LAdd48792,LGlo55678,LRes82768,LRes73949,LRes14509,LGlo51687,LRes32907,LZer33650,LMin91368,LZer68086,LMin35439,LMul90019,LRes51150,LDot98196],["Add48792","Glo55678","Res82768","Res73949","Res14509","Glo51687","Res32907","Zer33650","Min91368","Zer68086","Min35439","Mul90019","Res51150","Dot98196"],Dot98196,"Dot98196")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]]]

Expected (Unparsed): [[[0.0],[0.0],[0.0],[0.0]]]

Actual:   [[[0], [0], [0], [0]]]

Expected: [[[0], [0], [0], [0]]]