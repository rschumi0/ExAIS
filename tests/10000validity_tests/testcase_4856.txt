import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU87868 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con61984 = tf.keras.layers.Input(shape=([1, 35]))
in0Zer28924 = tf.keras.layers.Input(shape=([2, 2, 1, 3]))
in0Add63037 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add63037 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con83945 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot89431 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot89431 = tf.keras.layers.Input(shape=([3, 3]))
in0Con50083 = tf.keras.layers.Input(shape=([3, 4]))

ELU87868 = keras.layers.ELU(alpha=-3.142802739652664, name = 'ELU87868', input_shape=(1, 1, 1, 1))(in0ELU87868)
Res48454 = keras.layers.Reshape((1, 1, 1), name = 'Res48454', )(ELU87868)
Res2895 = keras.layers.Reshape((1, 1), name = 'Res2895', )(Res48454)
Con61984 = keras.layers.Concatenate(axis=2, name = 'Con61984', )([Res2895,in0Con61984])
Zer28924 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer28924', )(in0Zer28924)
Res5092 = keras.layers.Reshape((4, 4, 9), name = 'Res5092', )(Zer28924)
Res78882 = keras.layers.Reshape((4, 36), name = 'Res78882', )(Res5092)
Zer3268 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer3268', )(Res78882)
Dot44900 = keras.layers.Dot(axes=(2, 2), name = 'Dot44900', )([Con61984,Zer3268])
Zer48112 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer48112', )(Dot44900)
Add63037 = keras.layers.Add(name = 'Add63037', )([in0Add63037,in1Add63037])
Res60692 = keras.layers.Reshape((2, 2), name = 'Res60692', )(Add63037)
Zer80878 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer80878', )(Res60692)
Con83945 = keras.layers.Concatenate(axis=2, name = 'Con83945', )([Zer80878,in0Con83945])
Dot89431 = keras.layers.Dot(axes=(2, 2), name = 'Dot89431', )([in0Dot89431,in1Dot89431])
Ave40137 = keras.layers.Average(name = 'Ave40137', )([Con83945,Dot89431])
Con50083 = keras.layers.Concatenate(axis=2, name = 'Con50083', )([Ave40137,in0Con50083])
Max40061 = keras.layers.Maximum(name = 'Max40061', )([Zer48112,Con50083])
model = tf.keras.models.Model(inputs=[in0ELU87868,in0Con61984,in0Zer28924,in0Add63037,in1Add63037,in0Con83945,in0Dot89431,in1Dot89431,in0Con50083], outputs=Max40061)
in0ELU87868 = tf.constant([[[[[0.5422]]]]])
in0Con61984 = tf.constant([[[0.1798, 0.4175, 0.8297, 0.0892, 0.4469, 0.5642, 0.7184, 0.5135, 0.2504, 0.692, 0.2819, 0.1996, 0.5074, 0.688, 0.9068, 0.0201, 0.7733, 0.4678, 0.8253, 0.1729, 0.2558, 0.536, 0.241, 0.4025, 0.086, 0.2708, 0.1651, 0.3787, 0.8007, 0.9726, 0.4708, 0.6091, 0.3256, 0.181, 0.0858]]])
in0Zer28924 = tf.constant([[[[[1.4423, 1.3991, 1.8688]], [[1.0529, 1.877, 1.9299]]], [[[1.7569, 1.4348, 1.4283]], [[1.6336, 1.7452, 1.5577]]]]])
in0Add63037 = tf.constant([[[[0.0737], [0.838]], [[0.8722], [0.4805]]]])
in1Add63037 = tf.constant([[[[0.5323], [0.9255]], [[0.0484], [0.1617]]]])
in0Con83945 = tf.constant([[[0.8033], [0.5433], [0.425]]])
in0Dot89431 = tf.constant([[[0.0098, 0.0491, 0.2781], [0.1194, 0.526, 0.8245], [0.538, 0.3882, 0.9897]]])
in1Dot89431 = tf.constant([[[0.3302, 0.9325, 0.1918], [0.7581, 0.6436, 0.2731], [0.7179, 0.1522, 0.4415]]])
in0Con50083 = tf.constant([[[0.2319, 0.7735, 0.4891, 0.4014], [0.652, 0.6591, 0.8285, 0.5343], [0.0864, 0.457, 0.2227, 0.3013]]])
print (np.array2string(model.predict([in0ELU87868,in0Con61984,in0Zer28924,in0Add63037,in1Add63037,in0Con83945,in0Dot89431,in1Dot89431,in0Con50083],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max40061.png')

LELU87868 = elu_layer([[[[[0.5422]]]]], -3.142802739652664, ELU87868), 
LRes48454 = reshape_layer(ELU87868, [1, 1, 1], Res48454), 
LRes2895 = reshape_layer(Res48454, [1, 1], Res2895), 
LCon61984 = concatenate_layer([Res2895,[[[0.1798, 0.4175, 0.8297, 0.0892, 0.4469, 0.5642, 0.7184, 0.5135, 0.2504, 0.692, 0.2819, 0.1996, 0.5074, 0.688, 0.9068, 0.0201, 0.7733, 0.4678, 0.8253, 0.1729, 0.2558, 0.536, 0.241, 0.4025, 0.086, 0.2708, 0.1651, 0.3787, 0.8007, 0.9726, 0.4708, 0.6091, 0.3256, 0.181, 0.0858]]]], 2, Con61984), 
LZer28924 = zero_padding3D_layer([[[[[1.4423, 1.3991, 1.8688]], [[1.0529, 1.877, 1.9299]]], [[[1.7569, 1.4348, 1.4283]], [[1.6336, 1.7452, 1.5577]]]]], 1, 1, 1, 1, 1, 1, Zer28924), 
LRes5092 = reshape_layer(Zer28924, [4, 4, 9], Res5092), 
LRes78882 = reshape_layer(Res5092, [4, 36], Res78882), 
LZer3268 = zero_padding1D_layer(Res78882, 3, 0, Zer3268), 
LDot44900 = dot_layer(Con61984,Zer3268, 2, 2, Dot44900), 
LZer48112 = zero_padding1D_layer(Dot44900, 2, 0, Zer48112), 
LAdd63037 = add_layer([[[[[0.0737], [0.838]], [[0.8722], [0.4805]]]], [[[[0.5323], [0.9255]], [[0.0484], [0.1617]]]]], Add63037), 
LRes60692 = reshape_layer(Add63037, [2, 2], Res60692), 
LZer80878 = zero_padding1D_layer(Res60692, 1, 0, Zer80878), 
LCon83945 = concatenate_layer([Zer80878,[[[0.8033], [0.5433], [0.425]]]], 2, Con83945), 
LDot89431 = dot_layer([[[0.0098, 0.0491, 0.2781], [0.1194, 0.526, 0.8245], [0.538, 0.3882, 0.9897]]], [[[0.3302, 0.9325, 0.1918], [0.7581, 0.6436, 0.2731], [0.7179, 0.1522, 0.4415]]], 2, 2, Dot89431), 
LAve40137 = average_layer([Con83945,Dot89431], Ave40137), 
LCon50083 = concatenate_layer([Ave40137,[[[0.2319, 0.7735, 0.4891, 0.4014], [0.652, 0.6591, 0.8285, 0.5343], [0.0864, 0.457, 0.2227, 0.3013]]]], 2, Con50083), 
LMax40061 = maximum_layer([Zer48112,Con50083], Max40061), 
exec_layers([LELU87868,LRes48454,LRes2895,LCon61984,LZer28924,LRes5092,LRes78882,LZer3268,LDot44900,LZer48112,LAdd63037,LRes60692,LZer80878,LCon83945,LDot89431,LAve40137,LCon50083,LMax40061],["ELU87868","Res48454","Res2895","Con61984","Zer28924","Res5092","Res78882","Zer3268","Dot44900","Zer48112","Add63037","Res60692","Zer80878","Con83945","Dot89431","Ave40137","Con50083","Max40061"],Max40061,"Max40061")

Actual (Unparsed): [[[0.0511806, 0.0574896, 0.4702948, 0.2319000, 0.7735000, 0.4891000, 0.4014000], [0.6470300, 1.2088608, 0.5365456, 0.6520000, 0.6591000, 0.8285000, 0.5343000], [0.8250343, 0.7850952, 0.6536334, 0.0864000, 4.0240306, 3.7900730, 0.3013000]]]

Expected (Unparsed): [[[0.051180645000000004,0.057489625,0.47029479500000004,0.2319,0.7735,0.4891,0.4014],[0.64702999,1.208860845,0.5365456049999999,0.652,0.6591,0.8285,0.5343],[0.82503428,0.785095195,0.6536333950000001,0.0864,4.02403054,3.79007294,0.3013]]]

Actual:   [[[0.0512, 0.0575, 0.4703, 0.2319, 0.7735, 0.4891, 0.4014], [0.6471, 1.2089, 0.5366, 0.652, 0.6591, 0.8285, 0.5343], [0.8251, 0.7851, 0.6537, 0.0864, 4.0241, 3.7901, 0.3013]]]

Expected: [[[0.0512, 0.0575, 0.4703, 0.2319, 0.7735, 0.4891, 0.4014], [0.6471, 1.2089, 0.5366, 0.652, 0.6591, 0.8285, 0.5343], [0.8251, 0.7851, 0.6537, 0.0864, 4.0241, 3.7901, 0.3013]]]