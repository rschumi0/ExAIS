import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo37732 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Dot93191 = tf.keras.layers.Input(shape=([2]))
in1Dot93191 = tf.keras.layers.Input(shape=([2]))

Glo37732 = keras.layers.GlobalMaxPool3D(name = 'Glo37732', )(in0Glo37732)
Dot93191 = keras.layers.Dot(axes=(1, 1), name = 'Dot93191', )([in0Dot93191,in1Dot93191])
Dot7602 = keras.layers.Dot(axes=(1, 1), name = 'Dot7602', )([Glo37732,Dot93191])
Res69182 = keras.layers.Reshape((1, 1), name = 'Res69182', )(Dot7602)
Res62481 = keras.layers.Reshape((1, 1, 1), name = 'Res62481', )(Res69182)
Dep14293 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep14293', )(Res62481)
model = tf.keras.models.Model(inputs=[in0Glo37732,in0Dot93191,in1Dot93191], outputs=Dep14293)
w = model.get_layer('Dep14293').get_weights() 
w[0] = np.array([[[[0.7326]]]])
w[1] = np.array([0])
model.get_layer('Dep14293').set_weights(w) 
in0Glo37732 = tf.constant([[[[[1.2627]]]]])
in0Dot93191 = tf.constant([[0.3246, 0.7323]])
in1Dot93191 = tf.constant([[0.8093, 0.5872]])
print (np.array2string(model.predict([in0Glo37732,in0Dot93191,in1Dot93191],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep14293.png')

LGlo37732 = global_max_pool3D_layer([[[[[1.2627]]]]], Glo37732), 
LDot93191 = dot_layer([[0.3246, 0.7323]], [[0.8093, 0.5872]], 1, 1, Dot93191), 
LDot7602 = dot_layer(Glo37732,Dot93191, 1, 1, Dot7602), 
LRes69182 = reshape_layer(Dot7602, [1, 1], Res69182), 
LRes62481 = reshape_layer(Res69182, [1, 1, 1], Res62481), 
LDep14293 = depthwise_conv2D_layer(Res62481, 1, 1,[[[[0.7326]]]],[0], 1, 1, true, Dep14293), 
exec_layers([LGlo37732,LDot93191,LDot7602,LRes69182,LRes62481,LDep14293],["Glo37732","Dot93191","Dot7602","Res69182","Res62481","Dep14293"],Dep14293,"Dep14293")

Actual (Unparsed): [[[[0.6407898]]]]

Expected (Unparsed): [[[[0.6407898594424669]]]]

Actual:   [[[[0.6408]]]]

Expected: [[[[0.6408]]]]