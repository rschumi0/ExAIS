import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub58577 = tf.keras.layers.Input(shape=([2, 2, 3]))
in1Sub58577 = tf.keras.layers.Input(shape=([2, 2, 3]))
in0Con75673 = tf.keras.layers.Input(shape=([2, 2, 3, 1]))
in0Mul99790 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Mul99790 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))

Sub58577 = keras.layers.Subtract(name = 'Sub58577', )([in0Sub58577,in1Sub58577])
Res3467 = keras.layers.Reshape((2, 2, 3, 1), name = 'Res3467', )(Sub58577)
Con75673 = keras.layers.Concatenate(axis=4, name = 'Con75673', )([Res3467,in0Con75673])
Mul99790 = keras.layers.Multiply(name = 'Mul99790', )([in0Mul99790,in1Mul99790])
Zer42917 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer42917', )(Mul99790)
Mul41485 = keras.layers.Multiply(name = 'Mul41485', )([Con75673,Zer42917])
model = tf.keras.models.Model(inputs=[in0Sub58577,in1Sub58577,in0Con75673,in0Mul99790,in1Mul99790], outputs=Mul41485)
in0Sub58577 = tf.constant([[[[0.6399, 0.3423, 0.4035], [0.6783, 0.0609, 0.1097]], [[0.4552, 0.762, 0.9446], [0.1168, 0.814, 0.2878]]]])
in1Sub58577 = tf.constant([[[[0.1814, 0.0184, 0.2815], [0.0817, 0.2216, 0.7579]], [[0.1746, 0.0856, 0.3095], [0.124, 0.0784, 0.8695]]]])
in0Con75673 = tf.constant([[[[[0.2837], [0.6993], [0.3208]], [[0.9288], [0.9901], [0.4437]]], [[[0.6841], [0.1572], [0.9743]], [[0.3017], [0.1409], [0.0214]]]]])
in0Mul99790 = tf.constant([[[[[0.2345, 0.1416], [0.8379, 0.4324]]], [[[0.6089, 0.7284], [0.1683, 0.7856]]]]])
in1Mul99790 = tf.constant([[[[[0.711, 0.5224], [0.495, 0.6129]]], [[[0.6163, 0.1659], [0.0219, 0.511]]]]])
print (np.array2string(model.predict([in0Sub58577,in1Sub58577,in0Con75673,in0Mul99790,in1Mul99790],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul41485.png')

LSub58577 = subtract_layer([[[[0.6399, 0.3423, 0.4035], [0.6783, 0.0609, 0.1097]], [[0.4552, 0.762, 0.9446], [0.1168, 0.814, 0.2878]]]], [[[[0.1814, 0.0184, 0.2815], [0.0817, 0.2216, 0.7579]], [[0.1746, 0.0856, 0.3095], [0.124, 0.0784, 0.8695]]]], Sub58577), 
LRes3467 = reshape_layer(Sub58577, [2, 2, 3, 1], Res3467), 
LCon75673 = concatenate_layer([Res3467,[[[[[0.2837], [0.6993], [0.3208]], [[0.9288], [0.9901], [0.4437]]], [[[0.6841], [0.1572], [0.9743]], [[0.3017], [0.1409], [0.0214]]]]]], 4, Con75673), 
LMul99790 = multiply_layer([[[[[[0.2345, 0.1416], [0.8379, 0.4324]]], [[[0.6089, 0.7284], [0.1683, 0.7856]]]]], [[[[[0.711, 0.5224], [0.495, 0.6129]]], [[[0.6163, 0.1659], [0.0219, 0.511]]]]]], Mul99790), 
LZer42917 = zero_padding3D_layer(Mul99790, 0, 0, 1, 0, 1, 0, Zer42917), 
LMul41485 = multiply_layer([Con75673,Zer42917], Mul41485), 
exec_layers([LSub58577,LRes3467,LCon75673,LMul99790,LZer42917,LMul41485],["Sub58577","Res3467","Con75673","Mul99790","Zer42917","Mul41485"],Mul41485,"Mul41485")

Actual (Unparsed): [[[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [-0.0267934, 0.0732395], [-0.2688478, 0.1175885]]], [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[-0.0000000, 0.0000000], [0.2760450, 0.0170266], [-0.0021440, 0.0085909]]]]]

Expected (Unparsed): [[[[[0.0,0.0],[0.0,0.0],[0.0,0.0]],[[0.0,0.0],[-0.02679343064999999,0.073239518784],[-0.2688477561,0.117588468852]]],[[[0.0,0.0],[0.0,0.0],[0.0,0.0]],[[-0.0,0.0],[0.27604498549199996,0.017026575804],[-0.0021440124090000004,0.00859085024]]]]]

Actual:   [[[[[0, 0], [0, 0], [0, 0]], [[0, 0], [-0.0267, 0.0733], [-0.2688, 0.1176]]], [[[0, 0], [0, 0], [0, 0]], [[-0, 0], [0.2761, 0.0171], [-0.0021, 0.0086]]]]]

Expected: [[[[[0, 0], [0, 0], [0, 0]], [[0, 0], [-0.0267, 0.0733], [-0.2688, 0.1176]]], [[[0, 0], [0, 0], [0, 0]], [[-0, 0], [0.2761, 0.0171], [-0.0021, 0.0086]]]]]