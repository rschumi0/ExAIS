import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max60649 = tf.keras.layers.Input(shape=([1, 2]))
in1Max60649 = tf.keras.layers.Input(shape=([1, 2]))
in0Con22235 = tf.keras.layers.Input(shape=([2, 1]))
in0Min84089 = tf.keras.layers.Input(shape=([1, 2]))
in1Min84089 = tf.keras.layers.Input(shape=([1, 2]))

Max60649 = keras.layers.Maximum(name = 'Max60649', )([in0Max60649,in1Max60649])
Fla47186 = keras.layers.Flatten(name = 'Fla47186', )(Max60649)
Fla84631 = keras.layers.Flatten(name = 'Fla84631', )(Fla47186)
Res17130 = keras.layers.Reshape((2, 1), name = 'Res17130', )(Fla84631)
Con22235 = keras.layers.Concatenate(axis=2, name = 'Con22235', )([Res17130,in0Con22235])
Min84089 = keras.layers.Minimum(name = 'Min84089', )([in0Min84089,in1Min84089])
Zer71773 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer71773', )(Min84089)
Ave83003 = keras.layers.Average(name = 'Ave83003', )([Con22235,Zer71773])
model = tf.keras.models.Model(inputs=[in0Max60649,in1Max60649,in0Con22235,in0Min84089,in1Min84089], outputs=Ave83003)
in0Max60649 = tf.constant([[[0.2449, 0.0358]]])
in1Max60649 = tf.constant([[[0.7471, 0.6204]]])
in0Con22235 = tf.constant([[[0.7395], [0.0525]]])
in0Min84089 = tf.constant([[[0.7833, 0.2394]]])
in1Min84089 = tf.constant([[[0.2389, 0.7546]]])
print (np.array2string(model.predict([in0Max60649,in1Max60649,in0Con22235,in0Min84089,in1Min84089],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave83003.png')

LMax60649 = maximum_layer([[[[0.2449, 0.0358]]], [[[0.7471, 0.6204]]]], Max60649), 
LFla47186 = flatten_layer(Max60649, Fla47186), 
LFla84631 = flatten_layer(Fla47186, Fla84631), 
LRes17130 = reshape_layer(Fla84631, [2, 1], Res17130), 
LCon22235 = concatenate_layer([Res17130,[[[0.7395], [0.0525]]]], 2, Con22235), 
LMin84089 = minimum_layer([[[[0.7833, 0.2394]]], [[[0.2389, 0.7546]]]], Min84089), 
LZer71773 = zero_padding1D_layer(Min84089, 1, 0, Zer71773), 
LAve83003 = average_layer([Con22235,Zer71773], Ave83003), 
exec_layers([LMax60649,LFla47186,LFla84631,LRes17130,LCon22235,LMin84089,LZer71773,LAve83003],["Max60649","Fla47186","Fla84631","Res17130","Con22235","Min84089","Zer71773","Ave83003"],Ave83003,"Ave83003")

Actual (Unparsed): [[[0.3735500, 0.3697500], [0.4296500, 0.1459500]]]

Expected (Unparsed): [[[0.37355,0.36975],[0.42965,0.14595]]]

Actual:   [[[0.3736, 0.3698], [0.4297, 0.146]]]

Expected: [[[0.3736, 0.3698], [0.4297, 0.146]]]