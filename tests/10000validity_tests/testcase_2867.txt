import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave21003 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Ave21003 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Max20124 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max20124 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con1867 = tf.keras.layers.Input(shape=([2, 1, 6, 1]))

Ave21003 = keras.layers.Average(name = 'Ave21003', )([in0Ave21003,in1Ave21003])
Zer59431 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (4, 0)), name = 'Zer59431', )(Ave21003)
Max20124 = keras.layers.Maximum(name = 'Max20124', )([in0Max20124,in1Max20124])
Up_93302 = keras.layers.UpSampling3D(size=(1, 1, 2), name = 'Up_93302', )(Max20124)
Zer90634 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (2, 0)), name = 'Zer90634', )(Up_93302)
Con1867 = keras.layers.Concatenate(axis=4, name = 'Con1867', )([Zer90634,in0Con1867])
Add86849 = keras.layers.Add(name = 'Add86849', )([Zer59431,Con1867])
Up_42981 = keras.layers.UpSampling3D(size=(2, 1, 2), name = 'Up_42981', )(Add86849)
model = tf.keras.models.Model(inputs=[in0Ave21003,in1Ave21003,in0Max20124,in1Max20124,in0Con1867], outputs=Up_42981)
in0Ave21003 = tf.constant([[[[[0.0638, 0.6957], [0.3732, 0.6562]]], [[[0.2713, 0.4963], [0.1145, 0.6025]]]]])
in1Ave21003 = tf.constant([[[[[0.743, 0.1254], [0.0352, 0.8223]]], [[[0.8183, 0.1901], [0.3572, 0.9405]]]]])
in0Max20124 = tf.constant([[[[[0.1911], [0.8808]]]]])
in1Max20124 = tf.constant([[[[[0.2779], [0.7375]]]]])
in0Con1867 = tf.constant([[[[[0.1116], [0.3035], [0.4751], [0.4208], [0.7053], [0.3186]]], [[[0.7888], [0.5029], [0.659], [0.7731], [0.0185], [0.6547]]]]])
print (np.array2string(model.predict([in0Ave21003,in1Ave21003,in0Max20124,in1Max20124,in0Con1867],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_42981.png')

LAve21003 = average_layer([[[[[[0.0638, 0.6957], [0.3732, 0.6562]]], [[[0.2713, 0.4963], [0.1145, 0.6025]]]]], [[[[[0.743, 0.1254], [0.0352, 0.8223]]], [[[0.8183, 0.1901], [0.3572, 0.9405]]]]]], Ave21003), 
LZer59431 = zero_padding3D_layer(Ave21003, 0, 0, 0, 0, 4, 0, Zer59431), 
LMax20124 = maximum_layer([[[[[[0.1911], [0.8808]]]]], [[[[[0.2779], [0.7375]]]]]], Max20124), 
LUp_93302 = up_sampling3D_layer(Max20124, 1, 1, 2, Up_93302), 
LZer90634 = zero_padding3D_layer(Up_93302, 1, 0, 0, 0, 2, 0, Zer90634), 
LCon1867 = concatenate_layer([Zer90634,[[[[[0.1116], [0.3035], [0.4751], [0.4208], [0.7053], [0.3186]]], [[[0.7888], [0.5029], [0.659], [0.7731], [0.0185], [0.6547]]]]]], 4, Con1867), 
LAdd86849 = add_layer([Zer59431,Con1867], Add86849), 
LUp_42981 = up_sampling3D_layer(Add86849, 2, 1, 2, Up_42981), 
exec_layers([LAve21003,LZer59431,LMax20124,LUp_93302,LZer90634,LCon1867,LAdd86849,LUp_42981],["Ave21003","Zer59431","Max20124","Up_93302","Zer90634","Con1867","Add86849","Up_42981"],Up_42981,"Up_42981")

Actual (Unparsed): [[[[[0.0000000, 0.1116000], [0.0000000, 0.1116000], [0.0000000, 0.3035000], [0.0000000, 0.3035000], [0.0000000, 0.4751000], [0.0000000, 0.4751000], [0.0000000, 0.4208000], [0.0000000, 0.4208000], [0.4034000, 1.1158500], [0.4034000, 1.1158500], [0.2042000, 1.0578500], [0.2042000, 1.0578500]]], [[[0.0000000, 0.1116000], [0.0000000, 0.1116000], [0.0000000, 0.3035000], [0.0000000, 0.3035000], [0.0000000, 0.4751000], [0.0000000, 0.4751000], [0.0000000, 0.4208000], [0.0000000, 0.4208000], [0.4034000, 1.1158500], [0.4034000, 1.1158500], [0.2042000, 1.0578500], [0.2042000, 1.0578500]]], [[[0.0000000, 0.7888000], [0.0000000, 0.7888000], [0.0000000, 0.5029000], [0.0000000, 0.5029000], [0.2779000, 0.6590000], [0.2779000, 0.6590000], [0.2779000, 0.7731000], [0.2779000, 0.7731000], [1.4256000, 0.3617000], [1.4256000, 0.3617000], [1.1166500, 1.4262000], [1.1166500, 1.4262000]]], [[[0.0000000, 0.7888000], [0.0000000, 0.7888000], [0.0000000, 0.5029000], [0.0000000, 0.5029000], [0.2779000, 0.6590000], [0.2779000, 0.6590000], [0.2779000, 0.7731000], [0.2779000, 0.7731000], [1.4256000, 0.3617000], [1.4256000, 0.3617000], [1.1166500, 1.4262000], [1.1166500, 1.4262000]]]]]

Expected (Unparsed): [[[[[0,0.1116],[0,0.1116],[0,0.3035],[0,0.3035],[0,0.4751],[0,0.4751],[0,0.4208],[0,0.4208],[0.4034,1.11585],[0.4034,1.11585],[0.2042,1.05785],[0.2042,1.05785]]],[[[0,0.1116],[0,0.1116],[0,0.3035],[0,0.3035],[0,0.4751],[0,0.4751],[0,0.4208],[0,0.4208],[0.4034,1.11585],[0.4034,1.11585],[0.2042,1.05785],[0.2042,1.05785]]],[[[0,0.7888],[0,0.7888],[0,0.5029],[0,0.5029],[0.2779,0.659],[0.2779,0.659],[0.2779,0.7731],[0.2779,0.7731],[1.4256,0.3617],[1.4256,0.3617],[1.11665,1.4262000000000001],[1.11665,1.4262000000000001]]],[[[0,0.7888],[0,0.7888],[0,0.5029],[0,0.5029],[0.2779,0.659],[0.2779,0.659],[0.2779,0.7731],[0.2779,0.7731],[1.4256,0.3617],[1.4256,0.3617],[1.11665,1.4262000000000001],[1.11665,1.4262000000000001]]]]]

Actual:   [[[[[0, 0.1116], [0, 0.1116], [0, 0.3035], [0, 0.3035], [0, 0.4751], [0, 0.4751], [0, 0.4208], [0, 0.4208], [0.4034, 1.1159], [0.4034, 1.1159], [0.2042, 1.0579], [0.2042, 1.0579]]], [[[0, 0.1116], [0, 0.1116], [0, 0.3035], [0, 0.3035], [0, 0.4751], [0, 0.4751], [0, 0.4208], [0, 0.4208], [0.4034, 1.1159], [0.4034, 1.1159], [0.2042, 1.0579], [0.2042, 1.0579]]], [[[0, 0.7888], [0, 0.7888], [0, 0.5029], [0, 0.5029], [0.2779, 0.659], [0.2779, 0.659], [0.2779, 0.7731], [0.2779, 0.7731], [1.4256, 0.3617], [1.4256, 0.3617], [1.1167, 1.4262], [1.1167, 1.4262]]], [[[0, 0.7888], [0, 0.7888], [0, 0.5029], [0, 0.5029], [0.2779, 0.659], [0.2779, 0.659], [0.2779, 0.7731], [0.2779, 0.7731], [1.4256, 0.3617], [1.4256, 0.3617], [1.1167, 1.4262], [1.1167, 1.4262]]]]]

Expected: [[[[[0, 0.1116], [0, 0.1116], [0, 0.3035], [0, 0.3035], [0, 0.4751], [0, 0.4751], [0, 0.4208], [0, 0.4208], [0.4034, 1.1159], [0.4034, 1.1159], [0.2042, 1.0579], [0.2042, 1.0579]]], [[[0, 0.1116], [0, 0.1116], [0, 0.3035], [0, 0.3035], [0, 0.4751], [0, 0.4751], [0, 0.4208], [0, 0.4208], [0.4034, 1.1159], [0.4034, 1.1159], [0.2042, 1.0579], [0.2042, 1.0579]]], [[[0, 0.7888], [0, 0.7888], [0, 0.5029], [0, 0.5029], [0.2779, 0.659], [0.2779, 0.659], [0.2779, 0.7731], [0.2779, 0.7731], [1.4256, 0.3617], [1.4256, 0.3617], [1.1167, 1.4263], [1.1167, 1.4263]]], [[[0, 0.7888], [0, 0.7888], [0, 0.5029], [0, 0.5029], [0.2779, 0.659], [0.2779, 0.659], [0.2779, 0.7731], [0.2779, 0.7731], [1.4256, 0.3617], [1.4256, 0.3617], [1.1167, 1.4263], [1.1167, 1.4263]]]]]