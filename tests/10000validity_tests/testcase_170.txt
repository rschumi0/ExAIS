import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add17249 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Add17249 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Mul83211 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul83211 = tf.keras.layers.Input(shape=([2, 2]))

Add17249 = keras.layers.Add(name = 'Add17249', )([in0Add17249,in1Add17249])
Res31834 = keras.layers.Reshape((2, 1, 2), name = 'Res31834', )(Add17249)
Res95709 = keras.layers.Reshape((2, 2), name = 'Res95709', )(Res31834)
Mul83211 = keras.layers.Multiply(name = 'Mul83211', )([in0Mul83211,in1Mul83211])
Dot85069 = keras.layers.Dot(axes=(1, 2), name = 'Dot85069', )([Res95709,Mul83211])
model = tf.keras.models.Model(inputs=[in0Add17249,in1Add17249,in0Mul83211,in1Mul83211], outputs=Dot85069)
in0Add17249 = tf.constant([[[[[0.8112], [0.3613]]], [[[0.7697], [0.8778]]]]])
in1Add17249 = tf.constant([[[[[0.1282], [0.6433]]], [[[0.2596], [0.4037]]]]])
in0Mul83211 = tf.constant([[[0.4826, 0.2695], [0.6966, 0.2726]]])
in1Mul83211 = tf.constant([[[0.0739, 0.9642], [0.871, 0.6756]]])
print (np.array2string(model.predict([in0Add17249,in1Add17249,in0Mul83211,in1Mul83211],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot85069.png')

LAdd17249 = add_layer([[[[[[0.8112], [0.3613]]], [[[0.7697], [0.8778]]]]], [[[[[0.1282], [0.6433]]], [[[0.2596], [0.4037]]]]]], Add17249), 
LRes31834 = reshape_layer(Add17249, [2, 1, 2], Res31834), 
LRes95709 = reshape_layer(Res31834, [2, 2], Res95709), 
LMul83211 = multiply_layer([[[[0.4826, 0.2695], [0.6966, 0.2726]]], [[[0.0739, 0.9642], [0.871, 0.6756]]]], Mul83211), 
LDot85069 = dot_layer(Res95709,Mul83211, 1, 2, Dot85069), 
exec_layers([LAdd17249,LRes31834,LRes95709,LMul83211,LDot85069],["Add17249","Res31834","Res95709","Mul83211","Dot85069"],Dot85069,"Dot85069")

Actual (Unparsed): [[[0.3009684, 0.7595350], [0.3688284, 0.8455416]]]

Expected (Unparsed): [[[0.30096845378600007,0.759534939648],[0.36882840489400004,0.8455416072]]]

Actual:   [[[0.301, 0.7596], [0.3689, 0.8456]]]

Expected: [[[0.301, 0.7596], [0.3689, 0.8456]]]