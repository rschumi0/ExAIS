import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul17393 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul17393 = tf.keras.layers.Input(shape=([2, 2, 2]))

Mul17393 = keras.layers.Multiply(name = 'Mul17393', )([in0Mul17393,in1Mul17393])
Res85180 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res85180', )(Mul17393)
Con1320 = keras.layers.Conv3D(2, (1, 2, 2),strides=(1, 1, 3), padding='same', dilation_rate=(1, 1, 1), name = 'Con1320', )(Res85180)
model = tf.keras.models.Model(inputs=[in0Mul17393,in1Mul17393], outputs=Con1320)
w = model.get_layer('Con1320').get_weights() 
w[0] = np.array([[[[[0.3288, 0.0104]], [[0.1114, 0.5885]]], [[[0.8884, 0.7476]], [[0.8232, 0.1591]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con1320').set_weights(w) 
in0Mul17393 = tf.constant([[[[0.275, 0.8688], [0.0345, 0.5293]], [[0.0048, 0.2985], [0.6468, 0.6572]]]])
in1Mul17393 = tf.constant([[[[0.4399, 0.0968], [0.2764, 0.2097]], [[0.016, 0.5059], [0.0945, 0.993]]]])
print (np.array2string(model.predict([in0Mul17393,in1Mul17393],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con1320.png')

LMul17393 = multiply_layer([[[[[0.275, 0.8688], [0.0345, 0.5293]], [[0.0048, 0.2985], [0.6468, 0.6572]]]], [[[[0.4399, 0.0968], [0.2764, 0.2097]], [[0.016, 0.5059], [0.0945, 0.993]]]]], Mul17393), 
LRes85180 = reshape_layer(Mul17393, [2, 2, 2, 1], Res85180), 
LCon1320 = conv3D_layer(Res85180, 1, 2, 2,[[[[[0.3288, 0.0104]], [[0.1114, 0.5885]]], [[[0.8884, 0.7476]], [[0.8232, 0.1591]]]]],[0, 0], 1, 1, 3, true, 1, 1, 1, Con1320), 
exec_layers([LMul17393,LRes85180,LCon1320],["Mul17393","Res85180","Con1320"],Con1320,"Con1320")

Actual (Unparsed): [[[[[0.1489865, 0.0755390]], [[0.0155001, 0.0654193]]], [[[0.6083692, 0.2383947]], [[0.0927967, 0.3846905]]]]]

Expected (Unparsed): [[[[[0.148986518568,0.075539012731]],[[0.015500126033999998,0.065419264905]]],[[[0.60836920251,0.238394712615]],[[0.09279670632,0.38469053964000005]]]]]

Actual:   [[[[[0.149, 0.0756]], [[0.0156, 0.0655]]], [[[0.6084, 0.2384]], [[0.0928, 0.3847]]]]]

Expected: [[[[[0.149, 0.0756]], [[0.0156, 0.0655]]], [[[0.6084, 0.2384]], [[0.0928, 0.3847]]]]]