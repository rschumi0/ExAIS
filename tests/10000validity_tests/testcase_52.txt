import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot78932 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot78932 = tf.keras.layers.Input(shape=([3, 3]))

Dot78932 = keras.layers.Dot(axes=(2, 2), name = 'Dot78932', )([in0Dot78932,in1Dot78932])
Loc44271 = keras.layers.LocallyConnected1D(3, (3),strides=(1), name = 'Loc44271', )(Dot78932)
Con46801 = keras.layers.Conv1D(3, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con46801', )(Loc44271)
model = tf.keras.models.Model(inputs=[in0Dot78932,in1Dot78932], outputs=Con46801)
w = model.get_layer('Loc44271').get_weights() 
w[0] = np.array([[[0.9972, 0.562, 0.0609], [0.8647, 0.0013, 0.641], [0.2973, 0.0877, 0.022], [0.8186, 0.7961, 0.46], [0.221, 0.002, 0.3234], [0.591, 0.0647, 0.2939], [0.4914, 0.7341, 0.0031], [0.9641, 0.5701, 0.8867], [0.5645, 0.4506, 0.4125]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc44271').set_weights(w) 
w = model.get_layer('Con46801').get_weights() 
w[0] = np.array([[[0.123, 0.2517, 0.9994], [0.9708, 0.075, 0.9189], [0.6706, 0.8307, 0.6538]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con46801').set_weights(w) 
in0Dot78932 = tf.constant([[[0.0621, 0.0461, 0.9647], [0.0898, 0.0528, 0.7743], [0.8447, 0.7617, 0.7016]]])
in1Dot78932 = tf.constant([[[0.6031, 0.5869, 0.4308], [0.4994, 0.0412, 0.2353], [0.0118, 0.977, 0.2173]]])
print (np.array2string(model.predict([in0Dot78932,in1Dot78932],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con46801.png')

LDot78932 = dot_layer([[[0.0621, 0.0461, 0.9647], [0.0898, 0.0528, 0.7743], [0.8447, 0.7617, 0.7016]]], [[[0.6031, 0.5869, 0.4308], [0.4994, 0.0412, 0.2353], [0.0118, 0.977, 0.2173]]], 2, 2, Dot78932), 
LLoc44271 = locally_connected1D_layer(Dot78932, 3,[[[0.9972, 0.562, 0.0609], [0.8647, 0.0013, 0.641], [0.2973, 0.0877, 0.022], [0.8186, 0.7961, 0.46], [0.221, 0.002, 0.3234], [0.591, 0.0647, 0.2939], [0.4914, 0.7341, 0.0031], [0.9641, 0.5701, 0.8867], [0.5645, 0.4506, 0.4125]]],[[0, 0, 0]], 1, Loc44271), 
LCon46801 = conv1D_layer(Loc44271, 1,[[[0.123, 0.2517, 0.9994], [0.9708, 0.075, 0.9189], [0.6706, 0.8307, 0.6538]]],[0, 0, 0], 1, true, 1, Con46801), 
exec_layers([LDot78932,LLoc44271,LCon46801],["Dot78932","Loc44271","Con46801"],Con46801,"Con46801")

Actual (Unparsed): [[[3.6090251, 2.1492346, 6.1191498]]]

Expected (Unparsed): [[[3.6090251806571474,2.149234608604914,6.119149931501911]]]

Actual:   [[[3.6091, 2.1493, 6.1192]]]

Expected: [[[3.6091, 2.1493, 6.1192]]]