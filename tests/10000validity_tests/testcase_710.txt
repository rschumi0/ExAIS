import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add92090 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Add92090 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Sep39209 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con7558 = tf.keras.layers.Input(shape=([2, 1]))

Add92090 = keras.layers.Add(name = 'Add92090', )([in0Add92090,in1Add92090])
Res8978 = keras.layers.Reshape((1, 2, 2), name = 'Res8978', )(Add92090)
Res19131 = keras.layers.Reshape((1, 4), name = 'Res19131', )(Res8978)
Cro56775 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro56775', )(Res19131)
Zer65577 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer65577', )(Cro56775)
Sep39209 = keras.layers.SeparableConv2D(3, (1, 2),strides=(1, 1), padding='valid', name = 'Sep39209', )(in0Sep39209)
Res38088 = keras.layers.Reshape((1, 3), name = 'Res38088', )(Sep39209)
Up_70603 = keras.layers.UpSampling1D(size=(2), name = 'Up_70603', )(Res38088)
Con7558 = keras.layers.Concatenate(axis=2, name = 'Con7558', )([Up_70603,in0Con7558])
Add48590 = keras.layers.Add(name = 'Add48590', )([Zer65577,Con7558])
model = tf.keras.models.Model(inputs=[in0Add92090,in1Add92090,in0Sep39209,in0Con7558], outputs=Add48590)
w = model.get_layer('Sep39209').get_weights() 
w[0] = np.array([[[[0.2635]], [[0.4559]]]])
w[1] = np.array([[[[0.8841, 0.2091, 0.3674]]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep39209').set_weights(w) 
in0Add92090 = tf.constant([[[[[0.8517, 0.8447]], [[0.1311, 0.8156]]]]])
in1Add92090 = tf.constant([[[[[0.5133, 0.816]], [[0.4777, 0.4369]]]]])
in0Sep39209 = tf.constant([[[[0.2297], [0.5061]]]])
in0Con7558 = tf.constant([[[0.9807], [0.2959]]])
print (np.array2string(model.predict([in0Add92090,in1Add92090,in0Sep39209,in0Con7558],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add48590.png')

LAdd92090 = add_layer([[[[[[0.8517, 0.8447]], [[0.1311, 0.8156]]]]], [[[[[0.5133, 0.816]], [[0.4777, 0.4369]]]]]], Add92090), 
LRes8978 = reshape_layer(Add92090, [1, 2, 2], Res8978), 
LRes19131 = reshape_layer(Res8978, [1, 4], Res19131), 
LCro56775 = cropping1D_layer(Res19131, 0, 0, Cro56775), 
LZer65577 = zero_padding1D_layer(Cro56775, 1, 0, Zer65577), 
LSep39209 = separable_conv2D_layer([[[[0.2297], [0.5061]]]], 1, 2,[[[[[0.2635]], [[0.4559]]]],[[[[0.8841, 0.2091, 0.3674]]]]],[0, 0, 0], 1, 1, false, Sep39209), 
LRes38088 = reshape_layer(Sep39209, [1, 3], Res38088), 
LUp_70603 = up_sampling1D_layer(Res38088, 2, Up_70603), 
LCon7558 = concatenate_layer([Up_70603,[[[0.9807], [0.2959]]]], 2, Con7558), 
LAdd48590 = add_layer([Zer65577,Con7558], Add48590), 
exec_layers([LAdd92090,LRes8978,LRes19131,LCro56775,LZer65577,LSep39209,LRes38088,LUp_70603,LCon7558,LAdd48590],["Add92090","Res8978","Res19131","Cro56775","Zer65577","Sep39209","Res38088","Up_70603","Con7558","Add48590"],Add48590,"Add48590")

Actual (Unparsed): [[[0.2575003, 0.0609018, 0.1070078, 0.9807000], [1.6225003, 1.7216018, 0.7158078, 1.5484000]]]

Expected (Unparsed): [[[0.257500260654,0.06090182615400001,0.10700779975600001,0.9807],[1.622500260654,1.7216018261539998,0.7158077997560001,1.5484]]]

Actual:   [[[0.2576, 0.061, 0.1071, 0.9807], [1.6226, 1.7217, 0.7159, 1.5484]]]

Expected: [[[0.2576, 0.061, 0.1071, 0.9807], [1.6226, 1.7217, 0.7159, 1.5484]]]