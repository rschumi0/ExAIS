import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave25551 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave25551 = tf.keras.layers.Input(shape=([1, 1]))

Ave25551 = keras.layers.Average(name = 'Ave25551', )([in0Ave25551,in1Ave25551])
Res98371 = keras.layers.Reshape((1, 1, 1), name = 'Res98371', )(Ave25551)
Glo93467 = keras.layers.GlobalMaxPool2D(name = 'Glo93467', )(Res98371)
Res13086 = keras.layers.Reshape((1, 1), name = 'Res13086', )(Glo93467)
Res9805 = keras.layers.Reshape((1, 1, 1), name = 'Res9805', )(Res13086)
Con86858 = keras.layers.Conv2D(4, (1, 1),strides=(1, 7), padding='valid', dilation_rate=(1, 1), name = 'Con86858', )(Res9805)
Up_65766 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_65766', )(Con86858)
model = tf.keras.models.Model(inputs=[in0Ave25551,in1Ave25551], outputs=Up_65766)
w = model.get_layer('Con86858').get_weights() 
w[0] = np.array([[[[0.9596, 0.7198, 0.4268, 0.5526]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con86858').set_weights(w) 
in0Ave25551 = tf.constant([[[0.6697]]])
in1Ave25551 = tf.constant([[[0.9761]]])
print (np.array2string(model.predict([in0Ave25551,in1Ave25551],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_65766.png')

LAve25551 = average_layer([[[[0.6697]]], [[[0.9761]]]], Ave25551), 
LRes98371 = reshape_layer(Ave25551, [1, 1, 1], Res98371), 
LGlo93467 = global_max_pool2D_layer(Res98371, Glo93467), 
LRes13086 = reshape_layer(Glo93467, [1, 1], Res13086), 
LRes9805 = reshape_layer(Res13086, [1, 1, 1], Res9805), 
LCon86858 = conv2D_layer(Res9805, 1, 1,[[[[0.9596, 0.7198, 0.4268, 0.5526]]]],[0, 0, 0, 0], 1, 7, false, 1, 1, Con86858), 
LUp_65766 = up_sampling2D_layer(Con86858, 2, 2, Up_65766), 
exec_layers([LAve25551,LRes98371,LGlo93467,LRes13086,LRes9805,LCon86858,LUp_65766],["Ave25551","Res98371","Glo93467","Res13086","Res9805","Con86858","Up_65766"],Up_65766,"Up_65766")

Actual (Unparsed): [[[[0.7896549, 0.5923234, 0.3512137, 0.4547346], [0.7896549, 0.5923234, 0.3512137, 0.4547346]], [[0.7896549, 0.5923234, 0.3512137, 0.4547346], [0.7896549, 0.5923234, 0.3512137, 0.4547346]]]]

Expected (Unparsed): [[[[0.78965484,0.5923234199999999,0.35121372,0.45473453999999996],[0.78965484,0.5923234199999999,0.35121372,0.45473453999999996]],[[0.78965484,0.5923234199999999,0.35121372,0.45473453999999996],[0.78965484,0.5923234199999999,0.35121372,0.45473453999999996]]]]

Actual:   [[[[0.7897, 0.5924, 0.3513, 0.4548], [0.7897, 0.5924, 0.3513, 0.4548]], [[0.7897, 0.5924, 0.3513, 0.4548], [0.7897, 0.5924, 0.3513, 0.4548]]]]

Expected: [[[[0.7897, 0.5924, 0.3513, 0.4548], [0.7897, 0.5924, 0.3513, 0.4548]], [[0.7897, 0.5924, 0.3513, 0.4548], [0.7897, 0.5924, 0.3513, 0.4548]]]]