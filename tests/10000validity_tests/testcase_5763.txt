import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_93486 = tf.keras.layers.Input(shape=([1, 3, 4, 1]))
in0Con67069 = tf.keras.layers.Input(shape=([1]))
in0Dot79970 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot79970 = tf.keras.layers.Input(shape=([3, 2]))

Up_93486 = keras.layers.UpSampling3D(size=(1, 1, 1), name = 'Up_93486', )(in0Up_93486)
ReL47686 = keras.layers.ReLU(max_value=1.5719093015980286, negative_slope=8.704445774375541, threshold=2.361455243512487, name = 'ReL47686', )(Up_93486)
Glo13791 = keras.layers.GlobalMaxPool3D(name = 'Glo13791', )(ReL47686)
Con67069 = keras.layers.Concatenate(axis=1, name = 'Con67069', )([Glo13791,in0Con67069])
Dot79970 = keras.layers.Dot(axes=(1, 1), name = 'Dot79970', )([in0Dot79970,in1Dot79970])
Glo74399 = keras.layers.GlobalAveragePooling1D(name = 'Glo74399', )(Dot79970)
Mas30838 = keras.layers.Masking(mask_value=2, name = 'Mas30838', )(Glo74399)
Sub29278 = keras.layers.Subtract(name = 'Sub29278', )([Con67069,Mas30838])
model = tf.keras.models.Model(inputs=[in0Up_93486,in0Con67069,in0Dot79970,in1Dot79970], outputs=Sub29278)
in0Up_93486 = tf.constant([[[[[1.4236], [1.082], [1.4645], [1.9053]], [[1.8049], [1.3965], [1.9173], [1.1793]], [[1.0973], [1.8049], [1.2813], [1.4357]]]]])
in0Con67069 = tf.constant([[0.1324]])
in0Dot79970 = tf.constant([[[0.8426, 0.4166], [0.3961, 0.1388], [0.6297, 0.2041]]])
in1Dot79970 = tf.constant([[[0.4285, 0.5103], [0.6394, 0.7505], [0.9855, 0.0323]]])
print (np.array2string(model.predict([in0Up_93486,in0Con67069,in0Dot79970,in1Dot79970],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub29278.png')

LUp_93486 = up_sampling3D_layer([[[[[1.4236], [1.082], [1.4645], [1.9053]], [[1.8049], [1.3965], [1.9173], [1.1793]], [[1.0973], [1.8049], [1.2813], [1.4357]]]]], 1, 1, 1, Up_93486), 
LReL47686 = relu_layer(Up_93486, 1.5719093015980286, 8.704445774375541, 2.361455243512487, ReL47686), 
LGlo13791 = global_max_pool3D_layer(ReL47686, Glo13791), 
LCon67069 = concatenate_layer([Glo13791,[[0.1324]]], 1, Con67069), 
LDot79970 = dot_layer([[[0.8426, 0.4166], [0.3961, 0.1388], [0.6297, 0.2041]]], [[[0.4285, 0.5103], [0.6394, 0.7505], [0.9855, 0.0323]]], 1, 1, Dot79970), 
LGlo74399 = global_average_pooling1D_layer(Dot79970, Glo74399), 
LMas30838 = masking_layer(Glo74399, 2, Mas30838), 
LSub29278 = subtract_layer(Con67069,Mas30838, Sub29278), 
exec_layers([LUp_93486,LReL47686,LGlo13791,LCon67069,LDot79970,LGlo74399,LMas30838,LSub29278],["Up_93486","ReL47686","Glo13791","Con67069","Dot79970","Glo74399","Mas30838","Sub29278"],Sub29278,"Sub29278")

Actual (Unparsed): [[-4.7177714, -0.4030720]]

Expected (Unparsed): [[-4.717771312559007,-0.403071975]]

Actual:   [[-4.7177, -0.403]]

Expected: [[-4.7177, -0.403]]