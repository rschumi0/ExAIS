import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min91460 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min91460 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Glo31371 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Min91460 = keras.layers.Minimum(name = 'Min91460', )([in0Min91460,in1Min91460])
Res24045 = keras.layers.Reshape((1, 1, 1), name = 'Res24045', )(Min91460)
Res70180 = keras.layers.Reshape((1, 1), name = 'Res70180', )(Res24045)
Fla88355 = keras.layers.Flatten(name = 'Fla88355', )(Res70180)
Glo31371 = keras.layers.GlobalAveragePooling3D(name = 'Glo31371', )(in0Glo31371)
Dot12375 = keras.layers.Dot(axes=(1, 1), name = 'Dot12375', )([Fla88355,Glo31371])
model = tf.keras.models.Model(inputs=[in0Min91460,in1Min91460,in0Glo31371], outputs=Dot12375)
in0Min91460 = tf.constant([[[[[0.7196]]]]])
in1Min91460 = tf.constant([[[[[0.1797]]]]])
in0Glo31371 = tf.constant([[[[[1.0603], [1.9415]], [[1.0167], [1.4779]]], [[[1.8781], [1.2701]], [[1.5475], [1.8852]]]]])
print (np.array2string(model.predict([in0Min91460,in1Min91460,in0Glo31371],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot12375.png')

LMin91460 = minimum_layer([[[[[[0.7196]]]]], [[[[[0.1797]]]]]], Min91460), 
LRes24045 = reshape_layer(Min91460, [1, 1, 1], Res24045), 
LRes70180 = reshape_layer(Res24045, [1, 1], Res70180), 
LFla88355 = flatten_layer(Res70180, Fla88355), 
LGlo31371 = global_average_pooling3D_layer([[[[[1.0603], [1.9415]], [[1.0167], [1.4779]]], [[[1.8781], [1.2701]], [[1.5475], [1.8852]]]]], Glo31371), 
LDot12375 = dot_layer(Fla88355,Glo31371, 1, 1, Dot12375), 
exec_layers([LMin91460,LRes24045,LRes70180,LFla88355,LGlo31371,LDot12375],["Min91460","Res24045","Res70180","Fla88355","Glo31371","Dot12375"],Dot12375,"Dot12375")

Actual (Unparsed): [[0.2712864]]

Expected (Unparsed): [[0.27128635125]]

Actual:   [[0.2713]]

Expected: [[0.2713]]