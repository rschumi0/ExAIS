import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul44079 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul44079 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave41372 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Min712 = tf.keras.layers.Input(shape=([2, 1]))
in1Min712 = tf.keras.layers.Input(shape=([2, 1]))
in0Con77305 = tf.keras.layers.Input(shape=([4, 1]))

Mul44079 = keras.layers.Multiply(name = 'Mul44079', )([in0Mul44079,in1Mul44079])
Con17274 = keras.layers.Conv2D(2, (2, 1),strides=(1, 4), padding='same', dilation_rate=(1, 1), name = 'Con17274', )(Mul44079)
Res85009 = keras.layers.Reshape((1, 2), name = 'Res85009', )(Con17274)
Zer24359 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer24359', )(Res85009)
Ave41372 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave41372', )(in0Ave41372)
Res70477 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res70477', )(Ave41372)
Con40490 = keras.layers.Conv3D(4, (1, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con40490', )(Res70477)
Res14679 = keras.layers.Reshape((1, 1, 4), name = 'Res14679', )(Con40490)
Res68163 = keras.layers.Reshape((1, 4), name = 'Res68163', )(Res14679)
Glo62827 = keras.layers.GlobalAveragePooling1D(name = 'Glo62827', )(Res68163)
Res83255 = keras.layers.Reshape((4, 1), name = 'Res83255', )(Glo62827)
Min712 = keras.layers.Minimum(name = 'Min712', )([in0Min712,in1Min712])
Zer73968 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer73968', )(Min712)
Mul30207 = keras.layers.Multiply(name = 'Mul30207', )([Res83255,Zer73968])
Con77305 = keras.layers.Concatenate(axis=2, name = 'Con77305', )([Mul30207,in0Con77305])
Add91833 = keras.layers.Add(name = 'Add91833', )([Zer24359,Con77305])
model = tf.keras.models.Model(inputs=[in0Mul44079,in1Mul44079,in0Ave41372,in0Min712,in1Min712,in0Con77305], outputs=Add91833)
w = model.get_layer('Con17274').get_weights() 
w[0] = np.array([[[[0.3596, 0.9071]]], [[[0.4687, 0.7433]]]])
w[1] = np.array([0, 0])
model.get_layer('Con17274').set_weights(w) 
w = model.get_layer('Con40490').get_weights() 
w[0] = np.array([[[[[0.5195, 0.0598, 0.7789, 0.0988]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con40490').set_weights(w) 
in0Mul44079 = tf.constant([[[[0.0734]]]])
in1Mul44079 = tf.constant([[[[0.6806]]]])
in0Ave41372 = tf.constant([[[[1.9679]]]])
in0Min712 = tf.constant([[[0.6033], [0.5025]]])
in1Min712 = tf.constant([[[0.5931], [0.8296]]])
in0Con77305 = tf.constant([[[0.1167], [0.93], [0.0269], [0.3841]]])
print (np.array2string(model.predict([in0Mul44079,in1Mul44079,in0Ave41372,in0Min712,in1Min712,in0Con77305],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add91833.png')

LMul44079 = multiply_layer([[[[[0.0734]]]], [[[[0.6806]]]]], Mul44079), 
LCon17274 = conv2D_layer(Mul44079, 2, 1,[[[[0.3596, 0.9071]]], [[[0.4687, 0.7433]]]],[0, 0], 1, 4, true, 1, 1, Con17274), 
LRes85009 = reshape_layer(Con17274, [1, 2], Res85009), 
LZer24359 = zero_padding1D_layer(Res85009, 3, 0, Zer24359), 
LAve41372 = average_pooling2D_layer([[[[1.9679]]]], 1, 1, Ave41372), 
LRes70477 = reshape_layer(Ave41372, [1, 1, 1, 1], Res70477), 
LCon40490 = conv3D_layer(Res70477, 1, 1, 1,[[[[[0.5195, 0.0598, 0.7789, 0.0988]]]]],[0, 0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con40490), 
LRes14679 = reshape_layer(Con40490, [1, 1, 4], Res14679), 
LRes68163 = reshape_layer(Res14679, [1, 4], Res68163), 
LGlo62827 = global_average_pooling1D_layer(Res68163, Glo62827), 
LRes83255 = reshape_layer(Glo62827, [4, 1], Res83255), 
LMin712 = minimum_layer([[[[0.6033], [0.5025]]], [[[0.5931], [0.8296]]]], Min712), 
LZer73968 = zero_padding1D_layer(Min712, 2, 0, Zer73968), 
LMul30207 = multiply_layer([Res83255,Zer73968], Mul30207), 
LCon77305 = concatenate_layer([Mul30207,[[[0.1167], [0.93], [0.0269], [0.3841]]]], 2, Con77305), 
LAdd91833 = add_layer([Zer24359,Con77305], Add91833), 
exec_layers([LMul44079,LCon17274,LRes85009,LZer24359,LAve41372,LRes70477,LCon40490,LRes14679,LRes68163,LGlo62827,LRes83255,LMin712,LZer73968,LMul30207,LCon77305,LAdd91833],["Mul44079","Con17274","Res85009","Zer24359","Ave41372","Res70477","Con40490","Res14679","Res68163","Glo62827","Res83255","Min712","Zer73968","Mul30207","Con77305","Add91833"],Add91833,"Add91833")

Actual (Unparsed): [[[0.0000000, 0.1167000], [0.0000000, 0.9300000], [0.9091021, 0.0269000], [0.1156645, 0.4294151]]]

Expected (Unparsed): [[[0.0,0.1167],[0.0,0.93],[0.909102084561,0.0269],[0.11566452328399998,0.429415123884]]]

Actual:   [[[0, 0.1167], [0, 0.93], [0.9092, 0.0269], [0.1157, 0.4295]]]

Expected: [[[0, 0.1167], [0, 0.93], [0.9092, 0.0269], [0.1157, 0.4295]]]