import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave4390 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Ave4390 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave54049 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave54049 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Ave4390 = keras.layers.Average(name = 'Ave4390', )([in0Ave4390,in1Ave4390])
Res76454 = keras.layers.Reshape((2, 2, 2), name = 'Res76454', )(Ave4390)
Glo88778 = keras.layers.GlobalAveragePooling2D(name = 'Glo88778', )(Res76454)
Res57498 = keras.layers.Reshape((2, 1), name = 'Res57498', )(Glo88778)
Res29670 = keras.layers.Reshape((2, 1, 1), name = 'Res29670', )(Res57498)
Res22440 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res22440', )(Res29670)
Ave54049 = keras.layers.Average(name = 'Ave54049', )([in0Ave54049,in1Ave54049])
Zer81181 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer81181', )(Ave54049)
Add3975 = keras.layers.Add(name = 'Add3975', )([Res22440,Zer81181])
model = tf.keras.models.Model(inputs=[in0Ave4390,in1Ave4390,in0Ave54049,in1Ave54049], outputs=Add3975)
in0Ave4390 = tf.constant([[[[[0.4916], [0.6028]], [[0.1854], [0.6585]]], [[[0.2533], [0.1628]], [[0.0486], [0.3299]]]]])
in1Ave4390 = tf.constant([[[[[0.1128], [0.8191]], [[0.3045], [0.7683]]], [[[0.0149], [0.7726]], [[0.0711], [0.5355]]]]])
in0Ave54049 = tf.constant([[[[[0.5767]]]]])
in1Ave54049 = tf.constant([[[[[0.2216]]]]])
print (np.array2string(model.predict([in0Ave4390,in1Ave4390,in0Ave54049,in1Ave54049],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add3975.png')

LAve4390 = average_layer([[[[[[0.4916], [0.6028]], [[0.1854], [0.6585]]], [[[0.2533], [0.1628]], [[0.0486], [0.3299]]]]], [[[[[0.1128], [0.8191]], [[0.3045], [0.7683]]], [[[0.0149], [0.7726]], [[0.0711], [0.5355]]]]]], Ave4390), 
LRes76454 = reshape_layer(Ave4390, [2, 2, 2], Res76454), 
LGlo88778 = global_average_pooling2D_layer(Res76454, Glo88778), 
LRes57498 = reshape_layer(Glo88778, [2, 1], Res57498), 
LRes29670 = reshape_layer(Res57498, [2, 1, 1], Res29670), 
LRes22440 = reshape_layer(Res29670, [2, 1, 1, 1], Res22440), 
LAve54049 = average_layer([[[[[[0.5767]]]]], [[[[[0.2216]]]]]], Ave54049), 
LZer81181 = zero_padding3D_layer(Ave54049, 1, 0, 0, 0, 0, 0, Zer81181), 
LAdd3975 = add_layer([Res22440,Zer81181], Add3975), 
exec_layers([LAve4390,LRes76454,LGlo88778,LRes57498,LRes29670,LRes22440,LAve54049,LZer81181,LAdd3975],["Ave4390","Res76454","Glo88778","Res57498","Res29670","Res22440","Ave54049","Zer81181","Add3975"],Add3975,"Add3975")

Actual (Unparsed): [[[[[0.1852750]]], [[[0.9803375]]]]]

Expected (Unparsed): [[[[[0.185275]]],[[[0.9803375]]]]]

Actual:   [[[[[0.1853]]], [[[0.9804]]]]]

Expected: [[[[[0.1853]]], [[[0.9804]]]]]