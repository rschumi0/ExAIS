import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul12305 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul12305 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con70302 = tf.keras.layers.Input(shape=([1, 3]))
in0Cro40623 = tf.keras.layers.Input(shape=([1, 4]))

Mul12305 = keras.layers.Multiply(name = 'Mul12305', )([in0Mul12305,in1Mul12305])
Glo22554 = keras.layers.GlobalAveragePooling2D(name = 'Glo22554', )(Mul12305)
Res34265 = keras.layers.Reshape((1, 1), name = 'Res34265', )(Glo22554)
Con70302 = keras.layers.Concatenate(axis=2, name = 'Con70302', )([Res34265,in0Con70302])
Cro40623 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro40623', )(in0Cro40623)
Bat15894 = keras.layers.BatchNormalization(axis=2, epsilon=0.853093367562345,  name = 'Bat15894', )(Cro40623)
Add12482 = keras.layers.Add(name = 'Add12482', )([Con70302,Bat15894])
Fla85190 = keras.layers.Flatten(name = 'Fla85190', )(Add12482)
model = tf.keras.models.Model(inputs=[in0Mul12305,in1Mul12305,in0Con70302,in0Cro40623], outputs=Fla85190)
w = model.get_layer('Bat15894').get_weights() 
w[0] = np.array([0.8679, 0.412, 0.1579, 0.4786])
w[1] = np.array([0.1252, 0.2804, 0.4146, 0.2871])
w[2] = np.array([0.5647, 0.9157, 0.5785, 0.5304])
w[3] = np.array([0.2832, 0.2211, 0.866, 0.0478])
model.get_layer('Bat15894').set_weights(w) 
in0Mul12305 = tf.constant([[[[0.703]]]])
in1Mul12305 = tf.constant([[[[0.7152]]]])
in0Con70302 = tf.constant([[[0.3377, 0.6929, 0.8238]]])
in0Cro40623 = tf.constant([[[1.1975, 1.7611, 1.7328, 1.9376]]])
print (np.array2string(model.predict([in0Mul12305,in1Mul12305,in0Con70302,in0Cro40623],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla85190.png')

LMul12305 = multiply_layer([[[[[0.703]]]], [[[[0.7152]]]]], Mul12305), 
LGlo22554 = global_average_pooling2D_layer(Mul12305, Glo22554), 
LRes34265 = reshape_layer(Glo22554, [1, 1], Res34265), 
LCon70302 = concatenate_layer([Res34265,[[[0.3377, 0.6929, 0.8238]]]], 2, Con70302), 
LCro40623 = cropping1D_layer([[[1.1975, 1.7611, 1.7328, 1.9376]]], 0, 0, Cro40623), 
LBat15894 = batch_normalization_layer(Cro40623, 2, 0.853093367562345, [0.8679, 0.412, 0.1579, 0.4786], [0.1252, 0.2804, 0.4146, 0.2871], [0.5647, 0.9157, 0.5785, 0.5304], [0.2832, 0.2211, 0.866, 0.0478], Bat15894), 
LAdd12482 = add_layer([Con70302,Bat15894], Add12482), 
LFla85190 = flatten_layer(Add12482, Fla85190), 
exec_layers([LMul12305,LGlo22554,LRes34265,LCon70302,LCro40623,LBat15894,LAdd12482,LFla85190],["Mul12305","Glo22554","Res34265","Con70302","Cro40623","Bat15894","Add12482","Fla85190"],Fla85190,"Fla85190")

Actual (Unparsed): [[1.1432035, 0.9541611, 1.2465116, 1.8204644]]

Expected (Unparsed): [[1.143203476104039,0.9541610858006389,1.2465116164073877,1.8204644127512164]]

Actual:   [[1.1433, 0.9542, 1.2466, 1.8205]]

Expected: [[1.1433, 0.9542, 1.2466, 1.8205]]