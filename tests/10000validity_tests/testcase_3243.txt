import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla43851 = tf.keras.layers.Input(shape=([4, 1]))
in0Max35297 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max35297 = tf.keras.layers.Input(shape=([1, 1, 1]))

Fla43851 = keras.layers.Flatten(name = 'Fla43851', )(in0Fla43851)
Res74932 = keras.layers.Reshape((4, 1), name = 'Res74932', )(Fla43851)
Con44646 = keras.layers.Conv1D(4, (3),strides=(3), padding='valid', dilation_rate=(1), name = 'Con44646', )(Res74932)
Res9926 = keras.layers.Reshape((1, 4, 1), name = 'Res9926', )(Con44646)
Res59488 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res59488', )(Res9926)
Zer24686 = keras.layers.ZeroPadding3D(padding=((4, 0), (1, 0), (2, 0)), name = 'Zer24686', )(Res59488)
Max35297 = keras.layers.Maximum(name = 'Max35297', )([in0Max35297,in1Max35297])
Zer35351 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer35351', )(Max35297)
Max35222 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max35222', )(Zer35351)
Res99705 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res99705', )(Max35222)
Zer92474 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer92474', )(Res99705)
Zer19340 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer19340', )(Zer92474)
Add37595 = keras.layers.Add(name = 'Add37595', )([Zer24686,Zer19340])
model = tf.keras.models.Model(inputs=[in0Fla43851,in0Max35297,in1Max35297], outputs=Add37595)
w = model.get_layer('Con44646').get_weights() 
w[0] = np.array([[[0.0109, 0.368, 0.5888, 0.003]], [[0.4308, 0.9908, 0.6943, 0.4144]], [[0.3235, 0.2217, 0.2541, 0.7342]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con44646').set_weights(w) 
in0Fla43851 = tf.constant([[[1.7649], [1.4516], [1.3318], [1.6734]]])
in0Max35297 = tf.constant([[[[0.7504]]]])
in1Max35297 = tf.constant([[[[0.2534]]]])
print (np.array2string(model.predict([in0Fla43851,in0Max35297,in1Max35297],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add37595.png')

LFla43851 = flatten_layer([[[1.7649], [1.4516], [1.3318], [1.6734]]], Fla43851), 
LRes74932 = reshape_layer(Fla43851, [4, 1], Res74932), 
LCon44646 = conv1D_layer(Res74932, 3,[[[0.0109, 0.368, 0.5888, 0.003]], [[0.4308, 0.9908, 0.6943, 0.4144]], [[0.3235, 0.2217, 0.2541, 0.7342]]],[0, 0, 0, 0], 3, false, 1, Con44646), 
LRes9926 = reshape_layer(Con44646, [1, 4, 1], Res9926), 
LRes59488 = reshape_layer(Res9926, [1, 4, 1, 1], Res59488), 
LZer24686 = zero_padding3D_layer(Res59488, 4, 0, 1, 0, 2, 0, Zer24686), 
LMax35297 = maximum_layer([[[[[0.7504]]]], [[[[0.2534]]]]], Max35297), 
LZer35351 = zero_padding2D_layer(Max35297, 1, 1, 1, 1, Zer35351), 
LMax35222 = max_pool2D_layer(Zer35351, 1, 2, Max35222), 
LRes99705 = reshape_layer(Max35222, [3, 1, 1, 1], Res99705), 
LZer92474 = zero_padding3D_layer(Res99705, 1, 1, 1, 1, 1, 1, Zer92474), 
LZer19340 = zero_padding3D_layer(Zer92474, 0, 0, 2, 0, 0, 0, Zer19340), 
LAdd37595 = add_layer([Zer24686,Zer19340], Add37595), 
exec_layers([LFla43851,LRes74932,LCon44646,LRes9926,LRes59488,LZer24686,LMax35297,LZer35351,LMax35222,LRes99705,LZer92474,LZer19340,LAdd37595],["Fla43851","Res74932","Con44646","Res9926","Res59488","Zer24686","Max35297","Zer35351","Max35222","Res99705","Zer92474","Zer19340","Add37595"],Add37595,"Add37595")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.7504000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [1.0754240]], [[0.0000000], [0.0000000], [2.3829885]], [[0.0000000], [0.0000000], [2.3854293]], [[0.0000000], [0.0000000], [1.5846453]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0.7504],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[1.07542399]],[[0],[0],[2.38298854]],[[0],[0],[2.3854293799999997]],[[0],[0],[1.5846453]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.7504], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [1.0755]], [[0], [0], [2.383]], [[0], [0], [2.3855]], [[0], [0], [1.5847]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.7504], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [1.0755]], [[0], [0], [2.383]], [[0], [0], [2.3855]], [[0], [0], [1.5847]]]]]