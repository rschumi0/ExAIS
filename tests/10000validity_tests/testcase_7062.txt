import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min75382 = tf.keras.layers.Input(shape=([1, 2]))
in1Min75382 = tf.keras.layers.Input(shape=([1, 2]))
in0Con83846 = tf.keras.layers.Input(shape=([4, 4, 3]))
in0Max65336 = tf.keras.layers.Input(shape=([2, 1]))
in0Con26047 = tf.keras.layers.Input(shape=([4, 4, 3]))
in0Max1206 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max1206 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Min75382 = keras.layers.Minimum(name = 'Min75382', )([in0Min75382,in1Min75382])
Res96922 = keras.layers.Reshape((1, 2, 1), name = 'Res96922', )(Min75382)
Zer769 = keras.layers.ZeroPadding2D(padding=((3, 0), (2, 0)), name = 'Zer769', )(Res96922)
Con83846 = keras.layers.Concatenate(axis=3, name = 'Con83846', )([Zer769,in0Con83846])
Max65336 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max65336', )(in0Max65336)
Res51408 = keras.layers.Reshape((2, 1, 1), name = 'Res51408', )(Max65336)
Zer93202 = keras.layers.ZeroPadding2D(padding=((2, 0), (3, 0)), name = 'Zer93202', )(Res51408)
Con26047 = keras.layers.Concatenate(axis=3, name = 'Con26047', )([Zer93202,in0Con26047])
Max1206 = keras.layers.Maximum(name = 'Max1206', )([in0Max1206,in1Max1206])
Res92679 = keras.layers.Reshape((2, 2, 4), name = 'Res92679', )(Max1206)
Zer93578 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer93578', )(Res92679)
Add58183 = keras.layers.Add(name = 'Add58183', )([Con26047,Zer93578])
Mul93773 = keras.layers.Multiply(name = 'Mul93773', )([Con83846,Add58183])
model = tf.keras.models.Model(inputs=[in0Min75382,in1Min75382,in0Con83846,in0Max65336,in0Con26047,in0Max1206,in1Max1206], outputs=Mul93773)
in0Min75382 = tf.constant([[[0.2486, 0.8211]]])
in1Min75382 = tf.constant([[[0.9756, 0.7774]]])
in0Con83846 = tf.constant([[[[0.277, 0.812, 0.0826], [0.6722, 0.3237, 0.7074], [0.4186, 0.4158, 0.5341], [0.8248, 0.5863, 0.7558]], [[0.1482, 0.3381, 0.7933], [0.0507, 0.572, 0.4773], [0.5478, 0.2732, 0.7127], [0.7685, 0.308, 0.5972]], [[0.0884, 0.613, 0.4556], [0.7077, 0.5406, 0.5153], [0.2122, 0.0928, 0.932], [0.7081, 0.2417, 0.7156]], [[0.165, 0.0101, 0.7253], [0.7565, 0.2281, 0.5008], [0.6305, 0.5669, 0.7403], [0.001, 0.7502, 0.5832]]]])
in0Max65336 = tf.constant([[[1.4762], [1.497]]])
in0Con26047 = tf.constant([[[[0.7374, 0.0819, 0.7928], [0.8773, 0.3192, 0.71], [0.5452, 0.7806, 0.1179], [0.9138, 0.9143, 0.5616]], [[0.1804, 0.9571, 0.2999], [0.9264, 0.6413, 0.152], [0.1839, 0.5045, 0.0396], [0.7653, 0.2583, 0.2642]], [[0.0225, 0.7743, 0.2272], [0.3362, 0.6208, 0.4317], [0.9124, 0.2667, 0.1805], [0.5395, 0.3339, 0.4241]], [[0.4644, 0.0517, 0.5064], [0.2682, 0.4011, 0.1261], [0.7966, 0.4607, 0.4509], [0.0272, 0.8192, 0.3373]]]])
in0Max1206 = tf.constant([[[[[0.977, 0.4929], [0.9943, 0.1883]], [[0.7462, 0.9065], [0.3978, 0.7794]]], [[[0.7314, 0.2806], [0.9847, 0.5485]], [[0.3676, 0.2247], [0.0392, 0.9219]]]]])
in1Max1206 = tf.constant([[[[[0.9388, 0.4235], [0.8688, 0.429]], [[0.1111, 0.7822], [0.8292, 0.175]]], [[[0.7201, 0.9067], [0.1788, 0.3261]], [[0.4509, 0.5906], [0.3673, 0.6835]]]]])
print (np.array2string(model.predict([in0Min75382,in1Min75382,in0Con83846,in0Max65336,in0Con26047,in0Max1206,in1Max1206],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul93773.png')

LMin75382 = minimum_layer([[[[0.2486, 0.8211]]], [[[0.9756, 0.7774]]]], Min75382), 
LRes96922 = reshape_layer(Min75382, [1, 2, 1], Res96922), 
LZer769 = zero_padding2D_layer(Res96922, 3, 0, 2, 0, Zer769), 
LCon83846 = concatenate_layer([Zer769,[[[[0.277, 0.812, 0.0826], [0.6722, 0.3237, 0.7074], [0.4186, 0.4158, 0.5341], [0.8248, 0.5863, 0.7558]], [[0.1482, 0.3381, 0.7933], [0.0507, 0.572, 0.4773], [0.5478, 0.2732, 0.7127], [0.7685, 0.308, 0.5972]], [[0.0884, 0.613, 0.4556], [0.7077, 0.5406, 0.5153], [0.2122, 0.0928, 0.932], [0.7081, 0.2417, 0.7156]], [[0.165, 0.0101, 0.7253], [0.7565, 0.2281, 0.5008], [0.6305, 0.5669, 0.7403], [0.001, 0.7502, 0.5832]]]]], 3, Con83846), 
LMax65336 = max_pool1D_layer([[[1.4762], [1.497]]], 1, Max65336), 
LRes51408 = reshape_layer(Max65336, [2, 1, 1], Res51408), 
LZer93202 = zero_padding2D_layer(Res51408, 2, 0, 3, 0, Zer93202), 
LCon26047 = concatenate_layer([Zer93202,[[[[0.7374, 0.0819, 0.7928], [0.8773, 0.3192, 0.71], [0.5452, 0.7806, 0.1179], [0.9138, 0.9143, 0.5616]], [[0.1804, 0.9571, 0.2999], [0.9264, 0.6413, 0.152], [0.1839, 0.5045, 0.0396], [0.7653, 0.2583, 0.2642]], [[0.0225, 0.7743, 0.2272], [0.3362, 0.6208, 0.4317], [0.9124, 0.2667, 0.1805], [0.5395, 0.3339, 0.4241]], [[0.4644, 0.0517, 0.5064], [0.2682, 0.4011, 0.1261], [0.7966, 0.4607, 0.4509], [0.0272, 0.8192, 0.3373]]]]], 3, Con26047), 
LMax1206 = maximum_layer([[[[[[0.977, 0.4929], [0.9943, 0.1883]], [[0.7462, 0.9065], [0.3978, 0.7794]]], [[[0.7314, 0.2806], [0.9847, 0.5485]], [[0.3676, 0.2247], [0.0392, 0.9219]]]]], [[[[[0.9388, 0.4235], [0.8688, 0.429]], [[0.1111, 0.7822], [0.8292, 0.175]]], [[[0.7201, 0.9067], [0.1788, 0.3261]], [[0.4509, 0.5906], [0.3673, 0.6835]]]]]], Max1206), 
LRes92679 = reshape_layer(Max1206, [2, 2, 4], Res92679), 
LZer93578 = zero_padding2D_layer(Res92679, 1, 1, 1, 1, Zer93578), 
LAdd58183 = add_layer([Con26047,Zer93578], Add58183), 
LMul93773 = multiply_layer([Con83846,Add58183], Mul93773), 
exec_layers([LMin75382,LRes96922,LZer769,LCon83846,LMax65336,LRes51408,LZer93202,LCon26047,LMax1206,LRes92679,LZer93578,LAdd58183,LMul93773],["Min75382","Res96922","Zer769","Con83846","Max65336","Res51408","Zer93202","Con26047","Max1206","Res92679","Zer93578","Add58183","Mul93773"],Mul93773,"Mul93773")

Actual (Unparsed): [[[[0.0000000, 0.2042598, 0.0665028, 0.0654853], [0.0000000, 0.5897211, 0.1033250, 0.5022540], [0.0000000, 0.2282207, 0.3245735, 0.0629704], [0.0000000, 0.7537023, 0.5360541, 0.4244573]], [[0.0000000, 0.0267353, 0.3235955, 0.2379107], [0.0000000, 0.0719585, 0.9355633, 0.2773113], [0.0000000, 0.5973211, 0.3643668, 0.5837013], [0.0000000, 0.5881330, 0.0795564, 0.1577802]], [[0.0000000, 0.0019890, 0.4746459, 0.1035123], [0.0000000, 0.8796004, 0.8679333, 0.5050970], [0.0000000, 0.3189366, 0.0588352, 1.0274368], [0.0000000, 0.3820200, 0.0807036, 0.3034860]], [[0.0000000, 0.0766260, 0.0005222, 0.3672919], [0.0000000, 0.2028933, 0.0914909, 0.0631509], [0.0000000, 0.5022563, 0.2611708, 0.3338013], [1.1637678, 0.0000272, 0.6145638, 0.1967134]]]]

Expected (Unparsed): [[[[0,0.20425980000000005,0.0665028,0.06548528],[0,0.58972106,0.10332503999999999,0.502254],[0,0.22822072000000002,0.32457347999999997,0.06297039],[0,0.75370224,0.53605409,0.42445728]],[[0,0.02673528,0.32359551,0.23791067],[0.0,0.07195851,0.9355631999999999,0.2773113],[0.0,0.5973211199999999,0.36436683999999997,0.5837013],[0,0.5881330499999999,0.07955639999999999,0.15778024]],[[0,0.001989,0.4746459,0.10351232],[0.0,0.8796003299999999,0.8679333,0.50509706],[0.0,0.3189366,0.0588352,1.0274368],[0.0,0.38201994999999994,0.08070363,0.30348596]],[[0,0.076626,0.00052217,0.36729191999999994],[0,0.20289329999999997,0.09149091,0.06315087999999999],[0.0,0.5022563,0.26117082999999996,0.33380127],[1.1637678,2.72e-5,0.61456384,0.19671336]]]]

Actual:   [[[[0, 0.2043, 0.0666, 0.0655], [0, 0.5898, 0.1034, 0.5023], [0, 0.2283, 0.3246, 0.063], [0, 0.7538, 0.5361, 0.4245]], [[0, 0.0268, 0.3236, 0.238], [0, 0.072, 0.9356, 0.2774], [0, 0.5974, 0.3644, 0.5838], [0, 0.5882, 0.0796, 0.1578]], [[0, 0.002, 0.4747, 0.1036], [0, 0.8797, 0.868, 0.5051], [0, 0.319, 0.0589, 1.0275], [0, 0.3821, 0.0808, 0.3035]], [[0, 0.0767, 0.0006, 0.3673], [0, 0.2029, 0.0915, 0.0632], [0, 0.5023, 0.2612, 0.3339], [1.1638, 0.0001, 0.6146, 0.1968]]]]

Expected: [[[[0, 0.2043, 0.0666, 0.0655], [0, 0.5898, 0.1034, 0.5023], [0, 0.2283, 0.3246, 0.063], [0, 0.7538, 0.5361, 0.4245]], [[0, 0.0268, 0.3236, 0.238], [0, 0.072, 0.9356, 0.2774], [0, 0.5974, 0.3644, 0.5838], [0, 0.5882, 0.0796, 0.1578]], [[0, 0.002, 0.4747, 0.1036], [0, 0.8797, 0.868, 0.5051], [0, 0.319, 0.0589, 1.0275], [0, 0.3821, 0.0808, 0.3035]], [[0, 0.0767, 0.0006, 0.3673], [0, 0.2029, 0.0915, 0.0632], [0, 0.5023, 0.2612, 0.3339], [1.1638, 0.0001, 0.6146, 0.1968]]]]