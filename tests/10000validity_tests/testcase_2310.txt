import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min61206 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Min61206 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con12763 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Con68123 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Lea85923 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con43064 = tf.keras.layers.Input(shape=([2, 2, 2]))

Min61206 = keras.layers.Minimum(name = 'Min61206', )([in0Min61206,in1Min61206])
Zer6265 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer6265', )(Min61206)
Con12763 = keras.layers.Concatenate(axis=3, name = 'Con12763', )([Zer6265,in0Con12763])
Con68123 = keras.layers.Conv2D(4, (2, 1),strides=(2, 1), padding='same', dilation_rate=(1, 1), name = 'Con68123', )(in0Con68123)
Ave29619 = keras.layers.Average(name = 'Ave29619', )([Con12763,Con68123])
Zer88210 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer88210', )(Ave29619)
Lea85923 = keras.layers.LeakyReLU(alpha=7.608954014542214, name = 'Lea85923', input_shape=(2, 2, 2))(in0Lea85923)
ReL6849 = keras.layers.ReLU(max_value=5.835759294006217, negative_slope=2.049842065678877, threshold=3.308231248488378, name = 'ReL6849', )(Lea85923)
ELU88585 = keras.layers.ELU(alpha=1.7068172594784272, name = 'ELU88585', )(ReL6849)
Con43064 = keras.layers.Concatenate(axis=3, name = 'Con43064', )([ELU88585,in0Con43064])
Min6977 = keras.layers.Minimum(name = 'Min6977', )([Zer88210,Con43064])
Con30286 = keras.layers.Conv2DTranspose(2, (2, 1),strides=(1, 2), padding='valid', name = 'Con30286', )(Min6977)
model = tf.keras.models.Model(inputs=[in0Min61206,in1Min61206,in0Con12763,in0Con68123,in0Lea85923,in0Con43064], outputs=Con30286)
w = model.get_layer('Con68123').get_weights() 
w[0] = np.array([[[[0.3295, 0.4872, 0.4873, 0.5337]]], [[[0.0286, 0.4322, 0.8159, 0.582]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con68123').set_weights(w) 
w = model.get_layer('Con30286').get_weights() 
w[0] = np.array([[[[0.4555, 0.1325, 0.9887, 0.519], [0.8685, 0.6458, 0.2146, 0.8094]]], [[[0.2479, 0.9955, 0.3459, 0.7375], [0.697, 0.7262, 0.2835, 0.524]]]])
w[1] = np.array([0, 0])
model.get_layer('Con30286').set_weights(w) 
in0Min61206 = tf.constant([[[[0.0354]]]])
in1Min61206 = tf.constant([[[[0.0409]]]])
in0Con12763 = tf.constant([[[[0.0823, 0.1059, 0.6001], [0.5036, 0.9167, 0.5019]]]])
in0Con68123 = tf.constant([[[[0.6839], [0.2626]], [[0.6107], [0.0566]]]])
in0Lea85923 = tf.constant([[[[0.1789, 0.1033], [0.4329, 0.0935]], [[0.526, 0.1292], [0.2298, 0.7641]]]])
in0Con43064 = tf.constant([[[[0.3262, 0.7467], [0.4394, 0.9512]], [[0.7297, 0.6832], [0.3796, 0.2077]]]])
print (np.array2string(model.predict([in0Min61206,in1Min61206,in0Con12763,in0Con68123,in0Lea85923,in0Con43064],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con30286.png')

LMin61206 = minimum_layer([[[[[0.0354]]]], [[[[0.0409]]]]], Min61206), 
LZer6265 = zero_padding2D_layer(Min61206, 0, 0, 1, 0, Zer6265), 
LCon12763 = concatenate_layer([Zer6265,[[[[0.0823, 0.1059, 0.6001], [0.5036, 0.9167, 0.5019]]]]], 3, Con12763), 
LCon68123 = conv2D_layer([[[[0.6839], [0.2626]], [[0.6107], [0.0566]]]], 2, 1,[[[[0.3295, 0.4872, 0.4873, 0.5337]]], [[[0.0286, 0.4322, 0.8159, 0.582]]]],[0, 0, 0, 0], 2, 1, true, 1, 1, Con68123), 
LAve29619 = average_layer([Con12763,Con68123], Ave29619), 
LZer88210 = zero_padding2D_layer(Ave29619, 1, 0, 0, 0, Zer88210), 
LLea85923 = leaky_relu_layer([[[[0.1789, 0.1033], [0.4329, 0.0935]], [[0.526, 0.1292], [0.2298, 0.7641]]]], 7.608954014542214, Lea85923), 
LReL6849 = relu_layer(Lea85923, 5.835759294006217, 2.049842065678877, 3.308231248488378, ReL6849), 
LELU88585 = elu_layer(ReL6849, 1.7068172594784272, ELU88585), 
LCon43064 = concatenate_layer([ELU88585,[[[[0.3262, 0.7467], [0.4394, 0.9512]], [[0.7297, 0.6832], [0.3796, 0.2077]]]]], 3, Con43064), 
LMin6977 = minimum_layer([Zer88210,Con43064], Min6977), 
LCon30286 = conv2D_transpose_layer(Min6977, 2, 1,[[[[0.4555, 0.1325, 0.9887, 0.519], [0.8685, 0.6458, 0.2146, 0.8094]]], [[[0.2479, 0.9955, 0.3459, 0.7375], [0.697, 0.7262, 0.2835, 0.524]]]],[0, 0], 1, 2, false, Con30286), 
exec_layers([LMin61206,LZer6265,LCon12763,LCon68123,LAve29619,LZer88210,LLea85923,LReL6849,LELU88585,LCon43064,LMin6977,LCon30286],["Min61206","Zer6265","Con12763","Con68123","Ave29619","Zer88210","Lea85923","ReL6849","ELU88585","Con43064","Min6977","Con30286"],Con30286,"Con30286")

Actual (Unparsed): [[[[-1.0020184, -2.5806604], [0.0000000, 0.0000000], [-1.0011550, -2.5790329], [0.0000000, 0.0000000]], [[-2.3137649, -4.3685119], [0.0000000, 0.0000000], [-2.6366148, -4.7505349], [0.0000000, 0.0000000]], [[-1.4692597, -1.9444824], [0.0000000, 0.0000000], [-1.8277720, -2.2037933], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[-1.0020183825312543,-2.5806603532532293],[0,0],[-1.0011550423330342,-2.579032941820091],[0,0]],[[-2.3137648890769458,-4.368511922691317],[0,0],[-2.6366148371319738,-4.750534877805669],[0,0]],[[-1.4692597071109679,-1.9444824069861908],[0,0],[-1.827771949583215,-2.203793264908465],[0,0]]]]

Actual:   [[[[-1.002, -2.5806], [0, 0], [-1.0011, -2.579], [0, 0]], [[-2.3137, -4.3685], [0, 0], [-2.6366, -4.7505], [0, 0]], [[-1.4692, -1.9444], [0, 0], [-1.8277, -2.2037], [0, 0]]]]

Expected: [[[[-1.002, -2.5806], [0, 0], [-1.0011, -2.579], [0, 0]], [[-2.3137, -4.3685], [0, 0], [-2.6366, -4.7505], [0, 0]], [[-1.4692, -1.9444], [0, 0], [-1.8277, -2.2037], [0, 0]]]]