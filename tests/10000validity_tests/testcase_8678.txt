import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro64510 = tf.keras.layers.Input(shape=([1, 1]))
in0Dep18330 = tf.keras.layers.Input(shape=([1, 2, 2]))

Cro64510 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro64510', )(in0Cro64510)
Ave94410 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave94410', )(Cro64510)
Res4258 = keras.layers.Reshape((1, 1, 1), name = 'Res4258', )(Ave94410)
Sep50553 = keras.layers.SeparableConv2D(2, (1, 1),strides=(1, 1), padding='valid', name = 'Sep50553', )(Res4258)
Dep18330 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='valid', name = 'Dep18330', )(in0Dep18330)
Dep42255 = keras.layers.DepthwiseConv2D((2, 1),strides=(1, 1), padding='same', name = 'Dep42255', )(Dep18330)
Mul55011 = keras.layers.Multiply(name = 'Mul55011', )([Sep50553,Dep42255])
model = tf.keras.models.Model(inputs=[in0Cro64510,in0Dep18330], outputs=Mul55011)
w = model.get_layer('Sep50553').get_weights() 
w[0] = np.array([[[[0.5793]]]])
w[1] = np.array([[[[0.4211, 0.6148]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep50553').set_weights(w) 
w = model.get_layer('Dep18330').get_weights() 
w[0] = np.array([[[[0.1542], [0.9996]], [[0.8543], [0.0422]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep18330').set_weights(w) 
w = model.get_layer('Dep42255').get_weights() 
w[0] = np.array([[[[0.0071], [0.4739]]], [[[0.7174], [0.0392]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep42255').set_weights(w) 
in0Cro64510 = tf.constant([[[1.7074]]])
in0Dep18330 = tf.constant([[[[0.1584, 0.8183], [0.4932, 0.9139]]]])
print (np.array2string(model.predict([in0Cro64510,in0Dep18330],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul55011.png')

LCro64510 = cropping1D_layer([[[1.7074]]], 0, 0, Cro64510), 
LAve94410 = average_pooling1D_layer(Cro64510, 1, 1, false, Ave94410), 
LRes4258 = reshape_layer(Ave94410, [1, 1, 1], Res4258), 
LSep50553 = separable_conv2D_layer(Res4258, 1, 1,[[[[[0.5793]]]],[[[[0.4211, 0.6148]]]]],[0, 0], 1, 1, false, Sep50553), 
LDep18330 = depthwise_conv2D_layer([[[[0.1584, 0.8183], [0.4932, 0.9139]]]], 1, 2,[[[[0.1542], [0.9996]], [[0.8543], [0.0422]]]],[0, 0], 1, 1, false, Dep18330), 
LDep42255 = depthwise_conv2D_layer(Dep18330, 2, 1,[[[[0.0071], [0.4739]]], [[[0.7174], [0.0392]]]],[0, 0], 1, 1, true, Dep42255), 
LMul55011 = multiply_layer([Sep50553,Dep42255], Mul55011), 
exec_layers([LCro64510,LAve94410,LRes4258,LSep50553,LDep18330,LDep42255,LMul55011],["Cro64510","Ave94410","Res4258","Sep50553","Dep18330","Dep42255","Mul55011"],Mul55011,"Mul55011")

Actual (Unparsed): [[[[0.0013182, 0.2468349]]]]

Expected (Unparsed): [[[[0.0013182244880608992,0.24683494683226131]]]]

Actual:   [[[[0.0014, 0.2469]]]]

Expected: [[[[0.0014, 0.2469]]]]