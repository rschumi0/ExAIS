import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add10380 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add10380 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con2262 = tf.keras.layers.Input(shape=([2, 10]))
in0Cro27771 = tf.keras.layers.Input(shape=([1, 4, 3, 3]))
in0Thr48393 = tf.keras.layers.Input(shape=([2, 1]))
in0Con83704 = tf.keras.layers.Input(shape=([2, 11]))
in0Mul8313 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul8313 = tf.keras.layers.Input(shape=([2, 2]))
in0Con65770 = tf.keras.layers.Input(shape=([2, 10]))
in0Con57537 = tf.keras.layers.Input(shape=([2, 12, 1, 1]))
in0Mul65248 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul65248 = tf.keras.layers.Input(shape=([2, 1, 1]))

Add10380 = keras.layers.Add(name = 'Add10380', )([in0Add10380,in1Add10380])
Res69356 = keras.layers.Reshape((1, 1, 2), name = 'Res69356', )(Add10380)
Res41003 = keras.layers.Reshape((1, 2), name = 'Res41003', )(Res69356)
Zer83215 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer83215', )(Res41003)
Con2262 = keras.layers.Concatenate(axis=2, name = 'Con2262', )([Zer83215,in0Con2262])
Cro27771 = keras.layers.Cropping3D(cropping=((0, 0), (2, 0), (1, 0)), name = 'Cro27771', )(in0Cro27771)
Res28336 = keras.layers.Reshape((1, 2, 6), name = 'Res28336', )(Cro27771)
Res68293 = keras.layers.Reshape((1, 12), name = 'Res68293', )(Res28336)
Zer15788 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer15788', )(Res68293)
Thr48393 = keras.layers.ThresholdedReLU(theta=4.386944172820412, name = 'Thr48393', input_shape=(2, 1))(in0Thr48393)
Con83704 = keras.layers.Concatenate(axis=2, name = 'Con83704', )([Thr48393,in0Con83704])
Sub46918 = keras.layers.Subtract(name = 'Sub46918', )([Zer15788,Con83704])
Sub88739 = keras.layers.Subtract(name = 'Sub88739', )([Con2262,Sub46918])
Mul8313 = keras.layers.Multiply(name = 'Mul8313', )([in0Mul8313,in1Mul8313])
Cro3144 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro3144', )(Mul8313)
Zer9565 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer9565', )(Cro3144)
Con65770 = keras.layers.Concatenate(axis=2, name = 'Con65770', )([Zer9565,in0Con65770])
Sub4559 = keras.layers.Subtract(name = 'Sub4559', )([Sub88739,Con65770])
Res46897 = keras.layers.Reshape((2, 12, 1), name = 'Res46897', )(Sub4559)
Res36288 = keras.layers.Reshape((2, 12, 1, 1), name = 'Res36288', )(Res46897)
Con57537 = keras.layers.Concatenate(axis=4, name = 'Con57537', )([Res36288,in0Con57537])
Mul65248 = keras.layers.Multiply(name = 'Mul65248', )([in0Mul65248,in1Mul65248])
Res10527 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res10527', )(Mul65248)
Con73082 = keras.layers.Conv3D(2, (2, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con73082', )(Res10527)
Zer31412 = keras.layers.ZeroPadding3D(padding=((0, 0), (11, 0), (0, 0)), name = 'Zer31412', )(Con73082)
Mul92252 = keras.layers.Multiply(name = 'Mul92252', )([Con57537,Zer31412])
model = tf.keras.models.Model(inputs=[in0Add10380,in1Add10380,in0Con2262,in0Cro27771,in0Thr48393,in0Con83704,in0Mul8313,in1Mul8313,in0Con65770,in0Con57537,in0Mul65248,in1Mul65248], outputs=Mul92252)
w = model.get_layer('Con73082').get_weights() 
w[0] = np.array([[[[[0.8793, 0.9268]]]], [[[[0.3505, 0.2203]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con73082').set_weights(w) 
in0Add10380 = tf.constant([[[[[0.0661], [0.1789]]]]])
in1Add10380 = tf.constant([[[[[0.0123], [0.6014]]]]])
in0Con2262 = tf.constant([[[0.1909, 0.6863, 0.1944, 0.7916, 0.8516, 0.5828, 0.6009, 0.098, 0.2949, 0.3398], [0.9445, 0.2816, 0.7758, 0.104, 0.7064, 0.0408, 0.2557, 0.6236, 0.9509, 0.4146]]])
in0Cro27771 = tf.constant([[[[[1.3641, 1.2502, 1.1747], [1.1335, 1.85, 1.7551], [1.6226, 1.8469, 1.3097]], [[1.8887, 1.5537, 1.7212], [1.8309, 1.849, 1.5811], [1.1852, 1.3177, 1.4136]], [[1.2078, 1.5713, 1.4695], [1.219, 1.8565, 1.7913], [1.2634, 1.6488, 1.0675]], [[1.5257, 1.661, 1.616], [1.8617, 1.4306, 1.6046], [1.8108, 1.8126, 1.4793]]]]])
in0Thr48393 = tf.constant([[[0.3639], [0.1798]]])
in0Con83704 = tf.constant([[[0.8395, 0.5949, 0.507, 0.2597, 0.2407, 0.9306, 0.2047, 0.2304, 0.8067, 0.447, 0.2016], [0.6912, 0.569, 0.7782, 0.7827, 0.2744, 0.4448, 0.0537, 0.2344, 0.4058, 0.4513, 0.6577]]])
in0Mul8313 = tf.constant([[[0.0693, 0.5758], [0.9456, 0.4961]]])
in1Mul8313 = tf.constant([[[0.4306, 0.0045], [0.5909, 0.8912]]])
in0Con65770 = tf.constant([[[0.1838, 0.8726, 0.6767, 0.0219, 0.3116, 0.2204, 0.4882, 0.2858, 0.607, 0.7499], [0.1328, 0.5403, 0.6432, 0.3437, 0.2565, 0.087, 0.2224, 0.3061, 0.8787, 0.7015]]])
in0Con57537 = tf.constant([[[[[0.1336]], [[0.0166]], [[0.0269]], [[0.3232]], [[0.994]], [[0.4645]], [[0.2771]], [[0.1443]], [[0.9533]], [[0.8504]], [[0.5644]], [[0.4523]]], [[[0.0633]], [[0.7555]], [[0.8903]], [[0.9751]], [[0.3374]], [[0.1215]], [[0.3544]], [[0.8379]], [[0.9994]], [[0.3135]], [[0.3067]], [[0.7588]]]]])
in0Mul65248 = tf.constant([[[[0.5808]], [[0.1143]]]])
in1Mul65248 = tf.constant([[[[0.3498]], [[0.1246]]]])
print (np.array2string(model.predict([in0Add10380,in1Add10380,in0Con2262,in0Cro27771,in0Thr48393,in0Con83704,in0Mul8313,in1Mul8313,in0Con65770,in0Con57537,in0Mul65248,in1Mul65248],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul92252.png')

LAdd10380 = add_layer([[[[[[0.0661], [0.1789]]]]], [[[[[0.0123], [0.6014]]]]]], Add10380), 
LRes69356 = reshape_layer(Add10380, [1, 1, 2], Res69356), 
LRes41003 = reshape_layer(Res69356, [1, 2], Res41003), 
LZer83215 = zero_padding1D_layer(Res41003, 1, 0, Zer83215), 
LCon2262 = concatenate_layer([Zer83215,[[[0.1909, 0.6863, 0.1944, 0.7916, 0.8516, 0.5828, 0.6009, 0.098, 0.2949, 0.3398], [0.9445, 0.2816, 0.7758, 0.104, 0.7064, 0.0408, 0.2557, 0.6236, 0.9509, 0.4146]]]], 2, Con2262), 
LCro27771 = cropping3D_layer([[[[[1.3641, 1.2502, 1.1747], [1.1335, 1.85, 1.7551], [1.6226, 1.8469, 1.3097]], [[1.8887, 1.5537, 1.7212], [1.8309, 1.849, 1.5811], [1.1852, 1.3177, 1.4136]], [[1.2078, 1.5713, 1.4695], [1.219, 1.8565, 1.7913], [1.2634, 1.6488, 1.0675]], [[1.5257, 1.661, 1.616], [1.8617, 1.4306, 1.6046], [1.8108, 1.8126, 1.4793]]]]], 0, 0, 2, 0, 1, 0, Cro27771), 
LRes28336 = reshape_layer(Cro27771, [1, 2, 6], Res28336), 
LRes68293 = reshape_layer(Res28336, [1, 12], Res68293), 
LZer15788 = zero_padding1D_layer(Res68293, 1, 0, Zer15788), 
LThr48393 = thresholded_relu_layer([[[0.3639], [0.1798]]], 4.386944172820412, Thr48393), 
LCon83704 = concatenate_layer([Thr48393,[[[0.8395, 0.5949, 0.507, 0.2597, 0.2407, 0.9306, 0.2047, 0.2304, 0.8067, 0.447, 0.2016], [0.6912, 0.569, 0.7782, 0.7827, 0.2744, 0.4448, 0.0537, 0.2344, 0.4058, 0.4513, 0.6577]]]], 2, Con83704), 
LSub46918 = subtract_layer(Zer15788,Con83704, Sub46918), 
LSub88739 = subtract_layer(Con2262,Sub46918, Sub88739), 
LMul8313 = multiply_layer([[[[0.0693, 0.5758], [0.9456, 0.4961]]], [[[0.4306, 0.0045], [0.5909, 0.8912]]]], Mul8313), 
LCro3144 = cropping1D_layer(Mul8313, 1, 0, Cro3144), 
LZer9565 = zero_padding1D_layer(Cro3144, 1, 0, Zer9565), 
LCon65770 = concatenate_layer([Zer9565,[[[0.1838, 0.8726, 0.6767, 0.0219, 0.3116, 0.2204, 0.4882, 0.2858, 0.607, 0.7499], [0.1328, 0.5403, 0.6432, 0.3437, 0.2565, 0.087, 0.2224, 0.3061, 0.8787, 0.7015]]]], 2, Con65770), 
LSub4559 = subtract_layer(Sub88739,Con65770, Sub4559), 
LRes46897 = reshape_layer(Sub4559, [2, 12, 1], Res46897), 
LRes36288 = reshape_layer(Res46897, [2, 12, 1, 1], Res36288), 
LCon57537 = concatenate_layer([Res36288,[[[[[0.1336]], [[0.0166]], [[0.0269]], [[0.3232]], [[0.994]], [[0.4645]], [[0.2771]], [[0.1443]], [[0.9533]], [[0.8504]], [[0.5644]], [[0.4523]]], [[[0.0633]], [[0.7555]], [[0.8903]], [[0.9751]], [[0.3374]], [[0.1215]], [[0.3544]], [[0.8379]], [[0.9994]], [[0.3135]], [[0.3067]], [[0.7588]]]]]], 4, Con57537), 
LMul65248 = multiply_layer([[[[[0.5808]], [[0.1143]]]], [[[[0.3498]], [[0.1246]]]]], Mul65248), 
LRes10527 = reshape_layer(Mul65248, [2, 1, 1, 1], Res10527), 
LCon73082 = conv3D_layer(Res10527, 2, 1, 1,[[[[[0.8793, 0.9268]]]], [[[[0.3505, 0.2203]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con73082), 
LZer31412 = zero_padding3D_layer(Con73082, 0, 0, 11, 0, 0, 0, Zer31412), 
LMul92252 = multiply_layer([Con57537,Zer31412], Mul92252), 
exec_layers([LAdd10380,LRes69356,LRes41003,LZer83215,LCon2262,LCro27771,LRes28336,LRes68293,LZer15788,LThr48393,LCon83704,LSub46918,LSub88739,LMul8313,LCro3144,LZer9565,LCon65770,LSub4559,LRes46897,LRes36288,LCon57537,LMul65248,LRes10527,LCon73082,LZer31412,LMul92252],["Add10380","Res69356","Res41003","Zer83215","Con2262","Cro27771","Res28336","Res68293","Zer15788","Thr48393","Con83704","Sub46918","Sub88739","Mul8313","Cro3144","Zer9565","Con65770","Sub4559","Res46897","Res36288","Con57537","Mul65248","Res10527","Con73082","Zer31412","Mul92252"],Mul92252,"Mul92252")

Actual (Unparsed): [[[[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[-0.0382876, 0.0865837]]], [[[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[-0.0138815, 0.0100156]]]]]

Expected (Unparsed): [[[[[0,0.0]],[[0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]],[[-0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]],[[-0.038287628201817005,0.08658365830610579]]],[[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.0,0.0]],[[-0.013881520645209,0.010015614956995201]]]]]

Actual:   [[[[[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[-0.0382, 0.0866]]], [[[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0.0138, 0.0101]]]]]

Expected: [[[[[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[-0.0382, 0.0866]]], [[[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0, 0]], [[-0.0138, 0.0101]]]]]