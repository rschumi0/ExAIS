import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave45446 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave45446 = tf.keras.layers.Input(shape=([2, 2]))

Ave45446 = keras.layers.Average(name = 'Ave45446', )([in0Ave45446,in1Ave45446])
Res46205 = keras.layers.Reshape((2, 2, 1), name = 'Res46205', )(Ave45446)
Ave82159 = keras.layers.AveragePooling2D(pool_size=(2, 2), name = 'Ave82159', )(Res46205)
model = tf.keras.models.Model(inputs=[in0Ave45446,in1Ave45446], outputs=Ave82159)
in0Ave45446 = tf.constant([[[0.2562, 0.901], [0.7869, 0.332]]])
in1Ave45446 = tf.constant([[[0.4691, 0.2292], [0.3846, 0.1465]]])
print (np.array2string(model.predict([in0Ave45446,in1Ave45446],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave82159.png')

LAve45446 = average_layer([[[[0.2562, 0.901], [0.7869, 0.332]]], [[[0.4691, 0.2292], [0.3846, 0.1465]]]], Ave45446), 
LRes46205 = reshape_layer(Ave45446, [2, 2, 1], Res46205), 
LAve82159 = average_pooling2D_layer(Res46205, 2, 2, Ave82159), 
exec_layers([LAve45446,LRes46205,LAve82159],["Ave45446","Res46205","Ave82159"],Ave82159,"Ave82159")

Actual (Unparsed): [[[[0.4381875]]]]

Expected (Unparsed): [[[[0.4381875]]]]

Actual:   [[[[0.4382]]]]

Expected: [[[[0.4382]]]]