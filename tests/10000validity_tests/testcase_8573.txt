import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add56955 = tf.keras.layers.Input(shape=([2, 1]))
in1Add56955 = tf.keras.layers.Input(shape=([2, 1]))

Add56955 = keras.layers.Add(name = 'Add56955', )([in0Add56955,in1Add56955])
Res22814 = keras.layers.Reshape((2, 1, 1), name = 'Res22814', )(Add56955)
Res3425 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res3425', )(Res22814)
Zer8113 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer8113', )(Res3425)
Res86854 = keras.layers.Reshape((4, 3, 3), name = 'Res86854', )(Zer8113)
Loc37140 = keras.layers.LocallyConnected2D(2, (2, 3),strides=(2, 1), name = 'Loc37140', )(Res86854)
Res80154 = keras.layers.Reshape((2, 1, 2, 1), name = 'Res80154', )(Loc37140)
Zer43085 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer43085', )(Res80154)
model = tf.keras.models.Model(inputs=[in0Add56955,in1Add56955], outputs=Zer43085)
w = model.get_layer('Loc37140').get_weights() 
w[0] = np.array([[[0.5308, 0.5263], [0.7783, 0.8399], [0.715, 0.0618], [0.793, 0.5536], [0.466, 0.0767], [0.5382, 0.7731], [0.8384, 0.1366], [0.0142, 0.1951], [0.0866, 0.7039], [0.6269, 0.2548], [0.5021, 0.3243], [0.0748, 0.9925], [0.3201, 0.3757], [0.2984, 0.3535], [0.8679, 0.4606], [0.9793, 0.5264], [0.706, 0.8271], [0.6756, 0.8696]], [[0.3749, 0.0414], [0.0517, 0.953], [0.5007, 0.5026], [0.8212, 0.2538], [0.4367, 0.2896], [0.9589, 0.0806], [0.3208, 0.2623], [0.4567, 0.3755], [0.4154, 0.2985], [0.4009, 0.1439], [0.8618, 0.0435], [0.4294, 0.3967], [0.5304, 0.5719], [0.6909, 0.6538], [0.4753, 0.9194], [0.274, 0.255], [0.6134, 0.5247], [0.6978, 0.9516]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc37140').set_weights(w) 
in0Add56955 = tf.constant([[[0.5356], [0.7381]]])
in1Add56955 = tf.constant([[[0.1629], [0.5236]]])
print (np.array2string(model.predict([in0Add56955,in1Add56955],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer43085.png')

LAdd56955 = add_layer([[[[0.5356], [0.7381]]], [[[0.1629], [0.5236]]]], Add56955), 
LRes22814 = reshape_layer(Add56955, [2, 1, 1], Res22814), 
LRes3425 = reshape_layer(Res22814, [2, 1, 1, 1], Res3425), 
LZer8113 = zero_padding3D_layer(Res3425, 1, 1, 1, 1, 1, 1, Zer8113), 
LRes86854 = reshape_layer(Zer8113, [4, 3, 3], Res86854), 
LLoc37140 = locally_connected2D_layer(Res86854, 2, 3,[[[0.5308, 0.5263], [0.7783, 0.8399], [0.715, 0.0618], [0.793, 0.5536], [0.466, 0.0767], [0.5382, 0.7731], [0.8384, 0.1366], [0.0142, 0.1951], [0.0866, 0.7039], [0.6269, 0.2548], [0.5021, 0.3243], [0.0748, 0.9925], [0.3201, 0.3757], [0.2984, 0.3535], [0.8679, 0.4606], [0.9793, 0.5264], [0.706, 0.8271], [0.6756, 0.8696]], [[0.3749, 0.0414], [0.0517, 0.953], [0.5007, 0.5026], [0.8212, 0.2538], [0.4367, 0.2896], [0.9589, 0.0806], [0.3208, 0.2623], [0.4567, 0.3755], [0.4154, 0.2985], [0.4009, 0.1439], [0.8618, 0.0435], [0.4294, 0.3967], [0.5304, 0.5719], [0.6909, 0.6538], [0.4753, 0.9194], [0.274, 0.255], [0.6134, 0.5247], [0.6978, 0.9516]]],[[[0, 0]], [[0, 0]]], 2, 1, Loc37140), 
LRes80154 = reshape_layer(Loc37140, [2, 1, 2, 1], Res80154), 
LZer43085 = zero_padding3D_layer(Res80154, 1, 1, 1, 1, 1, 1, Zer43085), 
exec_layers([LAdd56955,LRes22814,LRes3425,LZer8113,LRes86854,LLoc37140,LRes80154,LZer43085],["Add56955","Res22814","Res3425","Zer8113","Res86854","Loc37140","Res80154","Zer43085"],Zer43085,"Zer43085")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.2084324], [0.2469198], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.5509844], [0.3653883], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0],[0]],[[0],[0],[0],[0]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[0],[0.20843239999999996],[0.24691974999999994],[0]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[0],[0.5509843899999999],[0.36538832],[0]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[0],[0],[0],[0]],[[0],[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0.2085], [0.247], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0.551], [0.3654], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]]]]

Expected: [[[[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0.2085], [0.247], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0.551], [0.3654], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]]]]