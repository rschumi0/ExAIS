import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den38424 = tf.keras.layers.Input(shape=([3, 4, 4]))

Den38424 = keras.layers.Dense(1,name = 'Den38424', )(in0Den38424)
Res89328 = keras.layers.Reshape((3, 4, 1, 1), name = 'Res89328', )(Den38424)
Glo54317 = keras.layers.GlobalAveragePooling3D(name = 'Glo54317', )(Res89328)
model = tf.keras.models.Model(inputs=[in0Den38424], outputs=Glo54317)
w = model.get_layer('Den38424').get_weights() 
w[0] = np.array([[0.6582], [0.9001], [0.5304], [0.8683]])
w[1] = np.array([0.7031])
model.get_layer('Den38424').set_weights(w) 
in0Den38424 = tf.constant([[[[0.6256, 0.9172, 0.0499, 0.4746], [0.1595, 0.4893, 0.1649, 0.3364], [0.499, 0.2091, 0.8045, 0.7669], [0.1401, 0.4593, 0.5556, 0.9954]], [[0.2625, 0.8448, 0.7814, 0.6574], [0.449, 0.1315, 0.6488, 0.6388], [0.7639, 0.0218, 0.6757, 0.5838], [0.2318, 0.7315, 0.4209, 0.8307]], [[0.5156, 0.099, 0.5156, 0.2594], [0.2507, 0.8738, 0.2302, 0.9028], [0.0615, 0.9072, 0.161, 0.2041], [0.7603, 0.2021, 0.428, 0.4869]]]])
print (np.array2string(model.predict([in0Den38424],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo54317.png')

LDen38424 = dense_layer([[[[0.6256, 0.9172, 0.0499, 0.4746], [0.1595, 0.4893, 0.1649, 0.3364], [0.499, 0.2091, 0.8045, 0.7669], [0.1401, 0.4593, 0.5556, 0.9954]], [[0.2625, 0.8448, 0.7814, 0.6574], [0.449, 0.1315, 0.6488, 0.6388], [0.7639, 0.0218, 0.6757, 0.5838], [0.2318, 0.7315, 0.4209, 0.8307]], [[0.5156, 0.099, 0.5156, 0.2594], [0.2507, 0.8738, 0.2302, 0.9028], [0.0615, 0.9072, 0.161, 0.2041], [0.7603, 0.2021, 0.428, 0.4869]]]], [[0.6582], [0.9001], [0.5304], [0.8683]],[0.7031], Den38424), 
LRes89328 = reshape_layer(Den38424, [3, 4, 1, 1], Res89328), 
LGlo54317 = global_average_pooling3D_layer(Res89328, Glo54317), 
exec_layers([LDen38424,LRes89328,LGlo54317],["Den38424","Res89328","Glo54317"],Glo54317,"Glo54317")

Actual (Unparsed): [[2.1602378]]

Expected (Unparsed): [[2.1602378266666666]]

Actual:   [[2.1603]]

Expected: [[2.1603]]