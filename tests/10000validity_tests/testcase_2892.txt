import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave66409 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave66409 = tf.keras.layers.Input(shape=([2, 1]))

Ave66409 = keras.layers.Average(name = 'Ave66409', )([in0Ave66409,in1Ave66409])
Res71085 = keras.layers.Reshape((2, 1, 1), name = 'Res71085', )(Ave66409)
Con41528 = keras.layers.Conv2DTranspose(4, (2, 1),strides=(1, 1), padding='same', name = 'Con41528', )(Res71085)
Den17757 = keras.layers.Dense(4,name = 'Den17757', )(Con41528)
model = tf.keras.models.Model(inputs=[in0Ave66409,in1Ave66409], outputs=Den17757)
w = model.get_layer('Con41528').get_weights() 
w[0] = np.array([[[[0.3937], [0.3694], [0.4788], [0.0616]]], [[[0.827], [0.6745], [0.9602], [0.165]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con41528').set_weights(w) 
w = model.get_layer('Den17757').get_weights() 
w[0] = np.array([[0.035, 0.7534, 0.9312, 0.4354], [0.4904, 0.9411, 0.443, 0.7016], [0.038, 0.9185, 0.6939, 0.0355], [0.2111, 0.2501, 0.6491, 0.8766]])
w[1] = np.array([0.0666, 0.7573, 0.0675, 0.4701])
model.get_layer('Den17757').set_weights(w) 
in0Ave66409 = tf.constant([[[0.9372], [0.5312]]])
in1Ave66409 = tf.constant([[[0.6235], [0.641]]])
print (np.array2string(model.predict([in0Ave66409,in1Ave66409],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den17757.png')

LAve66409 = average_layer([[[[0.9372], [0.5312]]], [[[0.6235], [0.641]]]], Ave66409), 
LRes71085 = reshape_layer(Ave66409, [2, 1, 1], Res71085), 
LCon41528 = conv2D_transpose_layer(Res71085, 2, 1,[[[[0.3937], [0.3694], [0.4788], [0.0616]]], [[[0.827], [0.6745], [0.9602], [0.165]]]],[0, 0, 0, 0], 1, 1, true, Con41528), 
LDen17757 = dense_layer(Con41528, [[0.035, 0.7534, 0.9312, 0.4354], [0.4904, 0.9411, 0.443, 0.7016], [0.038, 0.9185, 0.6939, 0.0355], [0.2111, 0.2501, 0.6491, 0.8766]],[0.0666, 0.7573, 0.0675, 0.4701], Den17757), 
exec_layers([LAve66409,LRes71085,LCon41528,LDen17757],["Ave66409","Res71085","Con41528","Den17757"],Den17757,"Den17757")

Actual (Unparsed): [[[[0.2430617, 1.6152479, 0.7717515, 0.8615111]], [[0.5354968, 3.1036593, 2.0340755, 1.5538168]]]]

Expected (Unparsed): [[[[0.24306165359700002,1.615247910358,0.7717514541320001,0.861511058793]],[[0.5354968308770001,3.1036593600505,2.0340755608350003,1.5538168395629999]]]]

Actual:   [[[[0.2431, 1.6153, 0.7718, 0.8616]], [[0.5355, 3.1037, 2.0341, 1.5539]]]]

Expected: [[[[0.2431, 1.6153, 0.7718, 0.8616]], [[0.5355, 3.1037, 2.0341, 1.5539]]]]