import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add31552 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Add31552 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))

Add31552 = keras.layers.Add(name = 'Add31552', )([in0Add31552,in1Add31552])
Res98759 = keras.layers.Reshape((2, 1, 4), name = 'Res98759', )(Add31552)
Up_19776 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_19776', )(Res98759)
Ave66802 = keras.layers.AveragePooling2D(pool_size=(2, 2), name = 'Ave66802', )(Up_19776)
Res61549 = keras.layers.Reshape((2, 4), name = 'Res61549', )(Ave66802)
Ave61895 = keras.layers.AveragePooling1D(pool_size=(2), strides=(4), padding='valid', name = 'Ave61895', )(Res61549)
model = tf.keras.models.Model(inputs=[in0Add31552,in1Add31552], outputs=Ave61895)
in0Add31552 = tf.constant([[[[[0.4646, 0.381], [0.7239, 0.6405]]], [[[0.2898, 0.1146], [0.9108, 0.2248]]]]])
in1Add31552 = tf.constant([[[[[0.682, 0.5592], [0.4888, 0.8601]]], [[[0.9753, 0.1024], [0.9312, 0.4432]]]]])
print (np.array2string(model.predict([in0Add31552,in1Add31552],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave61895.png')

LAdd31552 = add_layer([[[[[[0.4646, 0.381], [0.7239, 0.6405]]], [[[0.2898, 0.1146], [0.9108, 0.2248]]]]], [[[[[0.682, 0.5592], [0.4888, 0.8601]]], [[[0.9753, 0.1024], [0.9312, 0.4432]]]]]], Add31552), 
LRes98759 = reshape_layer(Add31552, [2, 1, 4], Res98759), 
LUp_19776 = up_sampling2D_layer(Res98759, 2, 2, Up_19776), 
LAve66802 = average_pooling2D_layer(Up_19776, 2, 2, Ave66802), 
LRes61549 = reshape_layer(Ave66802, [2, 4], Res61549), 
LAve61895 = average_pooling1D_layer(Res61549, 2, 4, false, Ave61895), 
exec_layers([LAdd31552,LRes98759,LUp_19776,LAve66802,LRes61549,LAve61895],["Add31552","Res98759","Up_19776","Ave66802","Res61549","Ave61895"],Ave61895,"Ave61895")

Actual (Unparsed): [[[1.2058500, 0.5786000, 1.5273500, 1.0843000]]]

Expected (Unparsed): [[[1.2058499999999999,0.5786,1.52735,1.0842999999999998]]]

Actual:   [[[1.2059, 0.5786, 1.5274, 1.0843]]]

Expected: [[[1.2059, 0.5786, 1.5274, 1.0843]]]