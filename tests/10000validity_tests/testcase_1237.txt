import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max73252 = tf.keras.layers.Input(shape=([1, 1]))
in0Sof39142 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul9299 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul9299 = tf.keras.layers.Input(shape=([2, 1]))

Max73252 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max73252', )(in0Max73252)
Zer2653 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer2653', )(Max73252)
Sof39142 = keras.layers.Softmax(axis=1, name = 'Sof39142', input_shape=(2, 1))(in0Sof39142)
Mul44029 = keras.layers.Multiply(name = 'Mul44029', )([Zer2653,Sof39142])
Mas36830 = keras.layers.Masking(mask_value=2, name = 'Mas36830', )(Mul44029)
Zer76653 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer76653', )(Mas36830)
Mul9299 = keras.layers.Multiply(name = 'Mul9299', )([in0Mul9299,in1Mul9299])
Zer45793 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer45793', )(Mul9299)
Min15003 = keras.layers.Minimum(name = 'Min15003', )([Zer76653,Zer45793])
model = tf.keras.models.Model(inputs=[in0Max73252,in0Sof39142,in0Mul9299,in1Mul9299], outputs=Min15003)
in0Max73252 = tf.constant([[[1.8096]]])
in0Sof39142 = tf.constant([[[0.9443], [0.881]]])
in0Mul9299 = tf.constant([[[0.9511], [0.8439]]])
in1Mul9299 = tf.constant([[[0.7549], [0.4652]]])
print (np.array2string(model.predict([in0Max73252,in0Sof39142,in0Mul9299,in1Mul9299],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min15003.png')

LMax73252 = max_pool1D_layer([[[1.8096]]], 1, Max73252), 
LZer2653 = zero_padding1D_layer(Max73252, 1, 0, Zer2653), 
LSof39142 = softmax_layer([[[0.9443], [0.881]]], 1, Sof39142), 
LMul44029 = multiply_layer([Zer2653,Sof39142], Mul44029), 
LMas36830 = masking_layer(Mul44029, 2, Mas36830), 
LZer76653 = zero_padding1D_layer(Mas36830, 1, 1, Zer76653), 
LMul9299 = multiply_layer([[[[0.9511], [0.8439]]], [[[0.7549], [0.4652]]]], Mul9299), 
LZer45793 = zero_padding1D_layer(Mul9299, 2, 0, Zer45793), 
LMin15003 = minimum_layer([Zer76653,Zer45793], Min15003), 
exec_layers([LMax73252,LZer2653,LSof39142,LMul44029,LMas36830,LZer76653,LMul9299,LZer45793,LMin15003],["Max73252","Zer2653","Sof39142","Mul44029","Mas36830","Zer76653","Mul9299","Zer45793","Min15003"],Min15003,"Min15003")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.7179854], [0.0000000]]]

Expected (Unparsed): [[[0],[0.0],[0.71798539],[0]]]

Actual:   [[[0], [0], [0.718], [0]]]

Expected: [[[0], [0], [0.718], [0]]]