import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot9990 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot9990 = tf.keras.layers.Input(shape=([2, 2]))
in0Con29728 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Mul99817 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul99817 = tf.keras.layers.Input(shape=([2, 1, 2]))

Dot9990 = keras.layers.Dot(axes=(2, 1), name = 'Dot9990', )([in0Dot9990,in1Dot9990])
Res18826 = keras.layers.Reshape((2, 2, 1), name = 'Res18826', )(Dot9990)
Con29728 = keras.layers.Concatenate(axis=3, name = 'Con29728', )([Res18826,in0Con29728])
Mul99817 = keras.layers.Multiply(name = 'Mul99817', )([in0Mul99817,in1Mul99817])
Zer22645 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer22645', )(Mul99817)
Min54301 = keras.layers.Minimum(name = 'Min54301', )([Con29728,Zer22645])
Glo81389 = keras.layers.GlobalAveragePooling2D(name = 'Glo81389', )(Min54301)
model = tf.keras.models.Model(inputs=[in0Dot9990,in1Dot9990,in0Con29728,in0Mul99817,in1Mul99817], outputs=Glo81389)
in0Dot9990 = tf.constant([[[0.1275, 0.6124], [0.999, 0.7253]]])
in1Dot9990 = tf.constant([[[0.8422, 0.6141], [0.5663, 0.9996]]])
in0Con29728 = tf.constant([[[[0.882], [0.9358]], [[0.3164], [0.5521]]]])
in0Mul99817 = tf.constant([[[[0.458, 0.0644]], [[0.5308, 0.4563]]]])
in1Mul99817 = tf.constant([[[[0.5065, 0.7015]], [[0.7657, 0.977]]]])
print (np.array2string(model.predict([in0Dot9990,in1Dot9990,in0Con29728,in0Mul99817,in1Mul99817],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo81389.png')

LDot9990 = dot_layer([[[0.1275, 0.6124], [0.999, 0.7253]]], [[[0.8422, 0.6141], [0.5663, 0.9996]]], 2, 1, Dot9990), 
LRes18826 = reshape_layer(Dot9990, [2, 2, 1], Res18826), 
LCon29728 = concatenate_layer([Res18826,[[[[0.882], [0.9358]], [[0.3164], [0.5521]]]]], 3, Con29728), 
LMul99817 = multiply_layer([[[[[0.458, 0.0644]], [[0.5308, 0.4563]]]], [[[[0.5065, 0.7015]], [[0.7657, 0.977]]]]], Mul99817), 
LZer22645 = zero_padding2D_layer(Mul99817, 0, 0, 1, 0, Zer22645), 
LMin54301 = minimum_layer([Con29728,Zer22645], Min54301), 
LGlo81389 = global_average_pooling2D_layer(Min54301, Glo81389), 
exec_layers([LDot9990,LRes18826,LCon29728,LMul99817,LZer22645,LMin54301,LGlo81389],["Dot9990","Res18826","Con29728","Mul99817","Zer22645","Min54301","Glo81389"],Glo81389,"Glo81389")

Actual (Unparsed): [[0.1596026, 0.1227454]]

Expected (Unparsed): [[0.15960264000000002,0.12274542499999999]]

Actual:   [[0.1597, 0.1228]]

Expected: [[0.1597, 0.1228]]