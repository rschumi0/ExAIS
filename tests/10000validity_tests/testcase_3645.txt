import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add37153 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add37153 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Min23304 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min23304 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con42863 = tf.keras.layers.Input(shape=([2, 1, 1, 3]))
in0Dot31005 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot31005 = tf.keras.layers.Input(shape=([2, 2]))

Add37153 = keras.layers.Add(name = 'Add37153', )([in0Add37153,in1Add37153])
Res62370 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res62370', )(Add37153)
Min23304 = keras.layers.Minimum(name = 'Min23304', )([in0Min23304,in1Min23304])
ELU63682 = keras.layers.ELU(alpha=-0.9528388279464401, name = 'ELU63682', )(Min23304)
Zer54863 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer54863', )(ELU63682)
Max55877 = keras.layers.Maximum(name = 'Max55877', )([Res62370,Zer54863])
Con42863 = keras.layers.Concatenate(axis=4, name = 'Con42863', )([Max55877,in0Con42863])
Dot31005 = keras.layers.Dot(axes=(2, 1), name = 'Dot31005', )([in0Dot31005,in1Dot31005])
Res42690 = keras.layers.Reshape((2, 2, 1), name = 'Res42690', )(Dot31005)
Res15565 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res15565', )(Res42690)
Cro31830 = keras.layers.Cropping3D(cropping=((0, 1), (1, 0), (0, 0)), name = 'Cro31830', )(Res15565)
Res54717 = keras.layers.Reshape((1, 1, 1), name = 'Res54717', )(Cro31830)
Cro89660 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro89660', )(Res54717)
Res65622 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res65622', )(Cro89660)
Con85127 = keras.layers.Conv3DTranspose(4, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con85127', )(Res65622)
Zer15342 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer15342', )(Con85127)
Add80179 = keras.layers.Add(name = 'Add80179', )([Con42863,Zer15342])
Glo27104 = keras.layers.GlobalMaxPool3D(name = 'Glo27104', )(Add80179)
model = tf.keras.models.Model(inputs=[in0Add37153,in1Add37153,in0Min23304,in1Min23304,in0Con42863,in0Dot31005,in1Dot31005], outputs=Glo27104)
w = model.get_layer('Con85127').get_weights() 
w[0] = np.array([[[[[0.4539], [0.8943], [0.0614], [0.5002]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con85127').set_weights(w) 
in0Add37153 = tf.constant([[[[0.6787]], [[0.6631]]]])
in1Add37153 = tf.constant([[[[0.8486]], [[0.1126]]]])
in0Min23304 = tf.constant([[[[[0.209]]]]])
in1Min23304 = tf.constant([[[[[0.1068]]]]])
in0Con42863 = tf.constant([[[[[0.7075, 0.0331, 0.914]]], [[[0.9085, 0.9927, 0.3159]]]]])
in0Dot31005 = tf.constant([[[0.7587, 0.4434], [0.137, 0.6851]]])
in1Dot31005 = tf.constant([[[0.3723, 0.7129], [0.9496, 0.6815]]])
print (np.array2string(model.predict([in0Add37153,in1Add37153,in0Min23304,in1Min23304,in0Con42863,in0Dot31005,in1Dot31005],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo27104.png')

LAdd37153 = add_layer([[[[[0.6787]], [[0.6631]]]], [[[[0.8486]], [[0.1126]]]]], Add37153), 
LRes62370 = reshape_layer(Add37153, [2, 1, 1, 1], Res62370), 
LMin23304 = minimum_layer([[[[[[0.209]]]]], [[[[[0.1068]]]]]], Min23304), 
LELU63682 = elu_layer(Min23304, -0.9528388279464401, ELU63682), 
LZer54863 = zero_padding3D_layer(ELU63682, 1, 0, 0, 0, 0, 0, Zer54863), 
LMax55877 = maximum_layer([Res62370,Zer54863], Max55877), 
LCon42863 = concatenate_layer([Max55877,[[[[[0.7075, 0.0331, 0.914]]], [[[0.9085, 0.9927, 0.3159]]]]]], 4, Con42863), 
LDot31005 = dot_layer([[[0.7587, 0.4434], [0.137, 0.6851]]], [[[0.3723, 0.7129], [0.9496, 0.6815]]], 2, 1, Dot31005), 
LRes42690 = reshape_layer(Dot31005, [2, 2, 1], Res42690), 
LRes15565 = reshape_layer(Res42690, [2, 2, 1, 1], Res15565), 
LCro31830 = cropping3D_layer(Res15565, 0, 1, 1, 0, 0, 0, Cro31830), 
LRes54717 = reshape_layer(Cro31830, [1, 1, 1], Res54717), 
LCro89660 = cropping2D_layer(Res54717, 0, 0, 0, 0, Cro89660), 
LRes65622 = reshape_layer(Cro89660, [1, 1, 1, 1], Res65622), 
LCon85127 = conv3D_transpose_layer(Res65622, 1, 1, 1,[[[[[0.4539], [0.8943], [0.0614], [0.5002]]]]],[0, 0, 0, 0], 1, 1, 1, true, Con85127), 
LZer15342 = zero_padding3D_layer(Con85127, 1, 0, 0, 0, 0, 0, Zer15342), 
LAdd80179 = add_layer([Con42863,Zer15342], Add80179), 
LGlo27104 = global_max_pool3D_layer(Add80179, Glo27104), 
exec_layers([LAdd37153,LRes62370,LMin23304,LELU63682,LZer54863,LMax55877,LCon42863,LDot31005,LRes42690,LRes15565,LCro31830,LRes54717,LCro89660,LRes65622,LCon85127,LZer15342,LAdd80179,LGlo27104],["Add37153","Res62370","Min23304","ELU63682","Zer54863","Max55877","Con42863","Dot31005","Res42690","Res15565","Cro31830","Res54717","Cro89660","Res65622","Con85127","Zer15342","Add80179","Glo27104"],Glo27104,"Glo27104")

Actual (Unparsed): [[1.5272999, 1.6624435, 1.0444635, 0.9140000]]

Expected (Unparsed): [[1.5272999999999999,1.662443487319,1.044463535862,0.914]]

Actual:   [[1.5273, 1.6625, 1.0445, 0.914]]

Expected: [[1.5273, 1.6625, 1.0445, 0.914]]