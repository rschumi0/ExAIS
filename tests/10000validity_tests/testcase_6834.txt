import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro47370 = tf.keras.layers.Input(shape=([3, 3]))
in0Con9809 = tf.keras.layers.Input(shape=([1, 3, 3]))
in0Dot70477 = tf.keras.layers.Input(shape=([2]))
in1Dot70477 = tf.keras.layers.Input(shape=([2]))

Cro47370 = keras.layers.Cropping1D(cropping=((0, 2)), name = 'Cro47370', )(in0Cro47370)
Res34530 = keras.layers.Reshape((1, 3, 1), name = 'Res34530', )(Cro47370)
Con9809 = keras.layers.Concatenate(axis=3, name = 'Con9809', )([Res34530,in0Con9809])
Dot70477 = keras.layers.Dot(axes=(1, 1), name = 'Dot70477', )([in0Dot70477,in1Dot70477])
Res15470 = keras.layers.Reshape((1, 1), name = 'Res15470', )(Dot70477)
Res76850 = keras.layers.Reshape((1, 1, 1), name = 'Res76850', )(Res15470)
Sep35704 = keras.layers.SeparableConv2D(4, (1, 1),strides=(1, 1), padding='valid', name = 'Sep35704', )(Res76850)
Zer40598 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer40598', )(Sep35704)
Sub74146 = keras.layers.Subtract(name = 'Sub74146', )([Con9809,Zer40598])
model = tf.keras.models.Model(inputs=[in0Cro47370,in0Con9809,in0Dot70477,in1Dot70477], outputs=Sub74146)
w = model.get_layer('Sep35704').get_weights() 
w[0] = np.array([[[[0.882]]]])
w[1] = np.array([[[[0.5133, 0.2013, 0.7281, 0.5609]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep35704').set_weights(w) 
in0Cro47370 = tf.constant([[[1.5429, 1.9868, 1.8171], [1.2193, 1.2495, 1.3731], [1.5158, 1.3775, 1.5864]]])
in0Con9809 = tf.constant([[[[0.8581, 0.6727, 0.9244], [0.4164, 0.0621, 0.2039], [0.954, 0.8008, 0.8211]]]])
in0Dot70477 = tf.constant([[0.3415, 0.6611]])
in1Dot70477 = tf.constant([[0.8847, 0.6017]])
print (np.array2string(model.predict([in0Cro47370,in0Con9809,in0Dot70477,in1Dot70477],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub74146.png')

LCro47370 = cropping1D_layer([[[1.5429, 1.9868, 1.8171], [1.2193, 1.2495, 1.3731], [1.5158, 1.3775, 1.5864]]], 0, 2, Cro47370), 
LRes34530 = reshape_layer(Cro47370, [1, 3, 1], Res34530), 
LCon9809 = concatenate_layer([Res34530,[[[[0.8581, 0.6727, 0.9244], [0.4164, 0.0621, 0.2039], [0.954, 0.8008, 0.8211]]]]], 3, Con9809), 
LDot70477 = dot_layer([[0.3415, 0.6611]], [[0.8847, 0.6017]], 1, 1, Dot70477), 
LRes15470 = reshape_layer(Dot70477, [1, 1], Res15470), 
LRes76850 = reshape_layer(Res15470, [1, 1, 1], Res76850), 
LSep35704 = separable_conv2D_layer(Res76850, 1, 1,[[[[[0.882]]]],[[[[0.5133, 0.2013, 0.7281, 0.5609]]]]],[0, 0, 0, 0], 1, 1, false, Sep35704), 
LZer40598 = zero_padding2D_layer(Sep35704, 0, 0, 2, 0, Zer40598), 
LSub74146 = subtract_layer(Con9809,Zer40598, Sub74146), 
exec_layers([LCro47370,LRes34530,LCon9809,LDot70477,LRes15470,LRes76850,LSep35704,LZer40598,LSub74146],["Cro47370","Res34530","Con9809","Dot70477","Res15470","Res76850","Sep35704","Zer40598","Sub74146"],Sub74146,"Sub74146")

Actual (Unparsed): [[[[1.5429000, 0.8581000, 0.6727000, 0.9244000], [1.9868000, 0.4164000, 0.0621000, 0.2039000], [1.5002299, 0.8297335, 0.3513296, 0.4748454]]]]

Expected (Unparsed): [[[[1.5429,0.8581,0.6727,0.9244],[1.9868,0.4164,0.0621,0.2039],[1.500229814703048,0.829733550944328,0.3513295501369359,0.47484539853290403]]]]

Actual:   [[[[1.5429, 0.8581, 0.6727, 0.9244], [1.9868, 0.4164, 0.0621, 0.2039], [1.5003, 0.8298, 0.3514, 0.4749]]]]

Expected: [[[[1.5429, 0.8581, 0.6727, 0.9244], [1.9868, 0.4164, 0.0621, 0.2039], [1.5003, 0.8298, 0.3514, 0.4749]]]]