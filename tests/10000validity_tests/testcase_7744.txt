import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub2862 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in1Sub2862 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))

Sub2862 = keras.layers.Subtract(name = 'Sub2862', )([in0Sub2862,in1Sub2862])
Res29891 = keras.layers.Reshape((3, 3, 4), name = 'Res29891', )(Sub2862)
Up_46669 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_46669', )(Res29891)
Con90339 = keras.layers.Conv2D(3, (1, 6),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con90339', )(Up_46669)
model = tf.keras.models.Model(inputs=[in0Sub2862,in1Sub2862], outputs=Con90339)
w = model.get_layer('Con90339').get_weights() 
w[0] = np.array([[[[0.7941, 0.0335, 0.2298], [0.9001, 0.2698, 0.821], [0.729, 0.3671, 0.1289], [0.2438, 0.2795, 0.4211]], [[0.3826, 0.3533, 0.466], [0.2409, 0.0216, 0.2456], [0.6275, 0.0003, 0.0224], [0.8721, 0.1368, 0.7231]], [[0.4375, 0.3813, 0.2038], [0.432, 0.0283, 0.0732], [0.5465, 0.6676, 0.6802], [0.8627, 0.1916, 0.0377]], [[0.139, 0.7427, 0.6095], [0.3138, 0.45, 0.1123], [0.3695, 0.736, 0.8453], [0.9957, 0.5066, 0.607]], [[0.7266, 0.1116, 0.8341], [0.9652, 0.8202, 0.4776], [0.5055, 0.106, 0.5438], [0.7296, 0.2323, 0.9922]], [[0.1166, 0.6246, 0.6992], [0.1395, 0.9708, 0.2524], [0.8812, 0.3929, 0.5746], [0.3318, 0.1652, 0.1202]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con90339').set_weights(w) 
in0Sub2862 = tf.constant([[[[[0.8441, 0.7003], [0.4768, 0.6189]], [[0.4732, 0.2704], [0.5967, 0.8335]], [[0.6172, 0.6267], [0.9811, 0.7661]]], [[[0.1416, 0.8172], [0.5059, 0.4065]], [[0.3257, 0.1056], [0.0829, 0.18]], [[0.1654, 0.2339], [0.5155, 0.2085]]], [[[0.7852, 0.2426], [0.6367, 0.3088]], [[0.6483, 0.3479], [0.7807, 0.4645]], [[0.1428, 0.0796], [0.4794, 0.2984]]]]])
in1Sub2862 = tf.constant([[[[[0.1634, 0.0021], [0.7732, 0.7613]], [[0.5106, 0.8584], [0.6776, 0.8537]], [[0.2836, 0.9038], [0.1575, 0.7006]]], [[[0.9588, 0.5313], [0.4276, 0.7116]], [[0.5109, 0.0274], [0.5169, 0.8755]], [[0.7626, 0.4435], [0.8165, 0.4619]]], [[[0.1269, 0.1209], [0.7627, 0.5333]], [[0.0473, 0.3633], [0.8993, 0.7058]], [[0.7312, 0.1167], [0.3077, 0.5397]]]]])
print (np.array2string(model.predict([in0Sub2862,in1Sub2862],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con90339.png')

LSub2862 = subtract_layer([[[[[0.8441, 0.7003], [0.4768, 0.6189]], [[0.4732, 0.2704], [0.5967, 0.8335]], [[0.6172, 0.6267], [0.9811, 0.7661]]], [[[0.1416, 0.8172], [0.5059, 0.4065]], [[0.3257, 0.1056], [0.0829, 0.18]], [[0.1654, 0.2339], [0.5155, 0.2085]]], [[[0.7852, 0.2426], [0.6367, 0.3088]], [[0.6483, 0.3479], [0.7807, 0.4645]], [[0.1428, 0.0796], [0.4794, 0.2984]]]]], [[[[[0.1634, 0.0021], [0.7732, 0.7613]], [[0.5106, 0.8584], [0.6776, 0.8537]], [[0.2836, 0.9038], [0.1575, 0.7006]]], [[[0.9588, 0.5313], [0.4276, 0.7116]], [[0.5109, 0.0274], [0.5169, 0.8755]], [[0.7626, 0.4435], [0.8165, 0.4619]]], [[[0.1269, 0.1209], [0.7627, 0.5333]], [[0.0473, 0.3633], [0.8993, 0.7058]], [[0.7312, 0.1167], [0.3077, 0.5397]]]]], Sub2862), 
LRes29891 = reshape_layer(Sub2862, [3, 3, 4], Res29891), 
LUp_46669 = up_sampling2D_layer(Res29891, 1, 2, Up_46669), 
LCon90339 = conv2D_layer(Up_46669, 1, 6,[[[[0.7941, 0.0335, 0.2298], [0.9001, 0.2698, 0.821], [0.729, 0.3671, 0.1289], [0.2438, 0.2795, 0.4211]], [[0.3826, 0.3533, 0.466], [0.2409, 0.0216, 0.2456], [0.6275, 0.0003, 0.0224], [0.8721, 0.1368, 0.7231]], [[0.4375, 0.3813, 0.2038], [0.432, 0.0283, 0.0732], [0.5465, 0.6676, 0.6802], [0.8627, 0.1916, 0.0377]], [[0.139, 0.7427, 0.6095], [0.3138, 0.45, 0.1123], [0.3695, 0.736, 0.8453], [0.9957, 0.5066, 0.607]], [[0.7266, 0.1116, 0.8341], [0.9652, 0.8202, 0.4776], [0.5055, 0.106, 0.5438], [0.7296, 0.2323, 0.9922]], [[0.1166, 0.6246, 0.6992], [0.1395, 0.9708, 0.2524], [0.8812, 0.3929, 0.5746], [0.3318, 0.1652, 0.1202]]]],[0, 0, 0], 1, 1, true, 1, 1, Con90339), 
exec_layers([LSub2862,LRes29891,LUp_46669,LCon90339],["Sub2862","Res29891","Up_46669","Con90339"],Con90339,"Con90339")

Actual (Unparsed): [[[[-0.4377210, -0.5454272, -0.4603684], [0.2907193, -0.2979484, 0.4608234], [1.6517066, 0.0338794, 2.0378268], [1.1298549, 0.6199777, 1.9136971], [0.0146034, 1.2202251, 0.8300078], [0.5448015, 0.6075883, 0.2533228]], [[-2.1629712, -1.3741777, -2.1747866], [-3.0033464, -2.3087821, -3.2435383], [-4.0296016, -2.6624973, -3.5347037], [-3.7098145, -1.8742896, -2.8137524], [-2.7407682, -1.8687481, -2.0540354], [-1.9864043, -1.0722361, -1.1982688]], [[0.0068195, 0.7243273, 0.7302295], [0.0622722, 0.1715612, 0.1771664], [-0.2851782, -0.0263241, -0.5443095], [-0.4124623, -0.3553640, -0.7475323], [-0.3985586, -0.5226316, -0.2713549], [-0.4064385, -0.4936572, -0.4603149]]]]

Expected (Unparsed): [[[[-0.43772103999999995,-0.5454272500000003,-0.4603685300000001],[0.2907192599999999,-0.29794840000000017,0.46082333000000014],[1.6517065199999992,0.03387938999999981,2.037826789999999],[1.1298548800000001,0.6199777499999999,1.91369707],[0.014603409999999907,1.2202250899999998,0.8300077499999999],[0.5448015699999998,0.6075883200000001,0.25332280999999995]],[[-2.16297122,-1.37417766,-2.1747865899999996],[-3.0033464,-2.3087820299999993,-3.2435382400000003],[-4.029601539999999,-2.6624972899999997,-3.5347036800000002],[-3.7098144899999994,-1.8742895799999997,-2.81375234],[-2.74076813,-1.8687480899999995,-2.0540353799999997],[-1.9864042800000001,-1.07223611,-1.1982687699999999]],[[0.0068193900000000085,0.72432732,0.7302295300000001],[0.06227208000000031,0.1715611099999999,0.1771662600000001],[-0.28517825999999946,-0.02632416999999975,-0.5443097099999998],[-0.41246242999999977,-0.3553640699999999,-0.7475324499999999],[-0.39855876999999995,-0.5226316599999998,-0.2713550099999999],[-0.4064386499999999,-0.4936572499999999,-0.46031499]]]]

Actual:   [[[[-0.4377, -0.5454, -0.4603], [0.2908, -0.2979, 0.4609], [1.6518, 0.0339, 2.0379], [1.1299, 0.62, 1.9137], [0.0147, 1.2203, 0.8301], [0.5449, 0.6076, 0.2534]], [[-2.1629, -1.3741, -2.1747], [-3.0033, -2.3087, -3.2435], [-4.0296, -2.6624, -3.5347], [-3.7098, -1.8742, -2.8137], [-2.7407, -1.8687, -2.054], [-1.9864, -1.0722, -1.1982]], [[0.0069, 0.7244, 0.7303], [0.0623, 0.1716, 0.1772], [-0.2851, -0.0263, -0.5443], [-0.4124, -0.3553, -0.7475], [-0.3985, -0.5226, -0.2713], [-0.4064, -0.4936, -0.4603]]]]

Expected: [[[[-0.4377, -0.5454, -0.4603], [0.2908, -0.2979, 0.4609], [1.6518, 0.0339, 2.0379], [1.1299, 0.62, 1.9137], [0.0147, 1.2203, 0.8301], [0.5449, 0.6076, 0.2534]], [[-2.1629, -1.3741, -2.1747], [-3.0033, -2.3087, -3.2435], [-4.0296, -2.6624, -3.5347], [-3.7098, -1.8742, -2.8137], [-2.7407, -1.8687, -2.054], [-1.9864, -1.0722, -1.1982]], [[0.0069, 0.7244, 0.7303], [0.0623, 0.1716, 0.1772], [-0.2851, -0.0263, -0.5443], [-0.4124, -0.3553, -0.7475], [-0.3985, -0.5226, -0.2713], [-0.4064, -0.4936, -0.4603]]]]