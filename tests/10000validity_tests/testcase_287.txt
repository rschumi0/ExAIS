import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_9171 = tf.keras.layers.Input(shape=([4, 4, 4]))

Up_9171 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_9171', )(in0Up_9171)
Cro79497 = keras.layers.Cropping2D(cropping=((1, 2), (2, 0)), name = 'Cro79497', )(Up_9171)
Res82480 = keras.layers.Reshape((1, 8), name = 'Res82480', )(Cro79497)
Fla61195 = keras.layers.Flatten(name = 'Fla61195', )(Res82480)
Res98681 = keras.layers.Reshape((8, 1), name = 'Res98681', )(Fla61195)
Sim21469 = keras.layers.SimpleRNN(2,name = 'Sim21469', )(Res98681)
model = tf.keras.models.Model(inputs=[in0Up_9171], outputs=Sim21469)
w = model.get_layer('Sim21469').get_weights() 
w[0] = np.array([[8, 9]])
w[1] = np.array([[3, 4], [6, 7]])
w[2] = np.array([7, 10])
model.get_layer('Sim21469').set_weights(w) 
in0Up_9171 = tf.constant([[[[1.1112, 1.0424, 1.7699, 1.8099], [1.6906, 1.0028, 1.2215, 1.0741], [1.7085, 1.2048, 1.0802, 1.472], [1.026, 1.909, 1.3178, 1.0059]], [[1.6661, 1.1045, 1.1467, 1.9393], [1.9183, 1.8921, 1.4895, 1.6879], [1.8436, 1.5378, 1.996, 1.617], [1.1139, 1.1868, 1.7825, 1.2592]], [[1.831, 1.0661, 1.8566, 1.5102], [1.0816, 1.5014, 1.8816, 1.5623], [1.5072, 1.2303, 1.5343, 1.689], [1.0941, 1.2979, 1.2142, 1.5095]], [[1.7202, 1.2927, 1.2733, 1.0291], [1.738, 1.7978, 1.2533, 1.5775], [1.0144, 1.7144, 1.8412, 1.7474], [1.403, 1.5457, 1.3819, 1.5757]]]])
print (np.array2string(model.predict([in0Up_9171],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sim21469.png')

LUp_9171 = up_sampling2D_layer([[[[1.1112, 1.0424, 1.7699, 1.8099], [1.6906, 1.0028, 1.2215, 1.0741], [1.7085, 1.2048, 1.0802, 1.472], [1.026, 1.909, 1.3178, 1.0059]], [[1.6661, 1.1045, 1.1467, 1.9393], [1.9183, 1.8921, 1.4895, 1.6879], [1.8436, 1.5378, 1.996, 1.617], [1.1139, 1.1868, 1.7825, 1.2592]], [[1.831, 1.0661, 1.8566, 1.5102], [1.0816, 1.5014, 1.8816, 1.5623], [1.5072, 1.2303, 1.5343, 1.689], [1.0941, 1.2979, 1.2142, 1.5095]], [[1.7202, 1.2927, 1.2733, 1.0291], [1.738, 1.7978, 1.2533, 1.5775], [1.0144, 1.7144, 1.8412, 1.7474], [1.403, 1.5457, 1.3819, 1.5757]]]], 1, 1, Up_9171), 
LCro79497 = cropping2D_layer(Up_9171, 1, 2, 2, 0, Cro79497), 
LRes82480 = reshape_layer(Cro79497, [1, 8], Res82480), 
LFla61195 = flatten_layer(Res82480, Fla61195), 
LRes98681 = reshape_layer(Fla61195, [8, 1], Res98681), 
LSim21469 = simple_rnn_layer(Res98681,[[8, 9]],[[3, 4], [6, 7]],[7, 10], Sim21469), 
exec_layers([LUp_9171,LCro79497,LRes82480,LFla61195,LRes98681,LSim21469],["Up_9171","Cro79497","Res82480","Fla61195","Res98681","Sim21469"],Sim21469,"Sim21469")

Actual (Unparsed): [[1.0000000, 1.0000000]]

Expected (Unparsed): [[1.0,1.0]]

Actual:   [[1, 1]]

Expected: [[1, 1]]