import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add66351 = tf.keras.layers.Input(shape=([1, 2]))
in1Add66351 = tf.keras.layers.Input(shape=([1, 2]))
in0Loc18484 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot4699 = tf.keras.layers.Input(shape=([2]))
in1Dot4699 = tf.keras.layers.Input(shape=([2]))
in0Con32217 = tf.keras.layers.Input(shape=([1]))

Add66351 = keras.layers.Add(name = 'Add66351', )([in0Add66351,in1Add66351])
Fla49213 = keras.layers.Flatten(name = 'Fla49213', )(Add66351)
Loc18484 = keras.layers.LocallyConnected1D(3, (2),strides=(1), name = 'Loc18484', )(in0Loc18484)
Res38954 = keras.layers.Reshape((1, 3, 1), name = 'Res38954', )(Loc18484)
Res77348 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res77348', )(Res38954)
Glo63012 = keras.layers.GlobalAveragePooling3D(name = 'Glo63012', )(Res77348)
Dot4699 = keras.layers.Dot(axes=(1, 1), name = 'Dot4699', )([in0Dot4699,in1Dot4699])
Max26932 = keras.layers.Maximum(name = 'Max26932', )([Glo63012,Dot4699])
Con32217 = keras.layers.Concatenate(axis=1, name = 'Con32217', )([Max26932,in0Con32217])
Add63305 = keras.layers.Add(name = 'Add63305', )([Fla49213,Con32217])
model = tf.keras.models.Model(inputs=[in0Add66351,in1Add66351,in0Loc18484,in0Dot4699,in1Dot4699,in0Con32217], outputs=Add63305)
w = model.get_layer('Loc18484').get_weights() 
w[0] = np.array([[[0.6861, 0.3871, 0.958], [0.0262, 0.3775, 0.3895], [0.6395, 0.8207, 0.0778], [0.6283, 0.7832, 0.96]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc18484').set_weights(w) 
in0Add66351 = tf.constant([[[0.3871, 0.6539]]])
in1Add66351 = tf.constant([[[0.3473, 0.6633]]])
in0Loc18484 = tf.constant([[[0.6203, 0.9648], [0.3848, 0.9543]]])
in0Dot4699 = tf.constant([[0.1286, 0.7115]])
in1Dot4699 = tf.constant([[0.9258, 0.6851]])
in0Con32217 = tf.constant([[0.9579]])
print (np.array2string(model.predict([in0Add66351,in1Add66351,in0Loc18484,in0Dot4699,in1Dot4699,in0Con32217],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add63305.png')

LAdd66351 = add_layer([[[[0.3871, 0.6539]]], [[[0.3473, 0.6633]]]], Add66351), 
LFla49213 = flatten_layer(Add66351, Fla49213), 
LLoc18484 = locally_connected1D_layer([[[0.6203, 0.9648], [0.3848, 0.9543]]], 2,[[[0.6861, 0.3871, 0.958], [0.0262, 0.3775, 0.3895], [0.6395, 0.8207, 0.0778], [0.6283, 0.7832, 0.96]]],[[0, 0, 0]], 1, Loc18484), 
LRes38954 = reshape_layer(Loc18484, [1, 3, 1], Res38954), 
LRes77348 = reshape_layer(Res38954, [1, 3, 1, 1], Res77348), 
LGlo63012 = global_average_pooling3D_layer(Res77348, Glo63012), 
LDot4699 = dot_layer([[0.1286, 0.7115]], [[0.9258, 0.6851]], 1, 1, Dot4699), 
LMax26932 = maximum_layer([Glo63012,Dot4699], Max26932), 
LCon32217 = concatenate_layer([Max26932,[[0.9579]]], 1, Con32217), 
LAdd63305 = add_layer([Fla49213,Con32217], Add63305), 
exec_layers([LAdd66351,LFla49213,LLoc18484,LRes38954,LRes77348,LGlo63012,LDot4699,LMax26932,LCon32217,LAdd63305],["Add66351","Fla49213","Loc18484","Res38954","Res77348","Glo63012","Dot4699","Max26932","Con32217","Add63305"],Add63305,"Add63305")

Actual (Unparsed): [[2.3611258, 2.2751000]]

Expected (Unparsed): [[2.361125856666667,2.2751]]

Actual:   [[2.3612, 2.2751]]

Expected: [[2.3612, 2.2751]]