import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot15345 = tf.keras.layers.Input(shape=([3]))
in1Dot15345 = tf.keras.layers.Input(shape=([3]))
in0Con28698 = tf.keras.layers.Input(shape=([17]))
in0Thr26567 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con55984 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Add20629 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Add20629 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Con27224 = tf.keras.layers.Input(shape=([10]))
in0Zer28487 = tf.keras.layers.Input(shape=([1, 1]))
in0Con95653 = tf.keras.layers.Input(shape=([15]))
in0Up_97446 = tf.keras.layers.Input(shape=([2, 3, 3]))
in0Glo99741 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con20118 = tf.keras.layers.Input(shape=([17]))

Dot15345 = keras.layers.Dot(axes=(1, 1), name = 'Dot15345', )([in0Dot15345,in1Dot15345])
Con28698 = keras.layers.Concatenate(axis=1, name = 'Con28698', )([Dot15345,in0Con28698])
Thr26567 = keras.layers.ThresholdedReLU(theta=2.7958735415565843, name = 'Thr26567', input_shape=(1, 1, 2, 1))(in0Thr26567)
Zer30677 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer30677', )(Thr26567)
Con55984 = keras.layers.Concatenate(axis=4, name = 'Con55984', )([Zer30677,in0Con55984])
Add20629 = keras.layers.Add(name = 'Add20629', )([in0Add20629,in1Add20629])
Min66776 = keras.layers.Minimum(name = 'Min66776', )([Con55984,Add20629])
Res16166 = keras.layers.Reshape((2, 1, 4), name = 'Res16166', )(Min66776)
Res95040 = keras.layers.Reshape((2, 4), name = 'Res95040', )(Res16166)
Fla87634 = keras.layers.Flatten(name = 'Fla87634', )(Res95040)
Con27224 = keras.layers.Concatenate(axis=1, name = 'Con27224', )([Fla87634,in0Con27224])
Zer28487 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer28487', )(in0Zer28487)
Fla72332 = keras.layers.Flatten(name = 'Fla72332', )(Zer28487)
Con95653 = keras.layers.Concatenate(axis=1, name = 'Con95653', )([Fla72332,in0Con95653])
Up_97446 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_97446', )(in0Up_97446)
Res89647 = keras.layers.Reshape((2, 9), name = 'Res89647', )(Up_97446)
Fla71810 = keras.layers.Flatten(name = 'Fla71810', )(Res89647)
Glo99741 = keras.layers.GlobalAveragePooling2D(name = 'Glo99741', )(in0Glo99741)
Con20118 = keras.layers.Concatenate(axis=1, name = 'Con20118', )([Glo99741,in0Con20118])
Sub56659 = keras.layers.Subtract(name = 'Sub56659', )([Fla71810,Con20118])
Min57094 = keras.layers.Minimum(name = 'Min57094', )([Con95653,Sub56659])
Max69343 = keras.layers.Maximum(name = 'Max69343', )([Con27224,Min57094])
Dot46098 = keras.layers.Dot(axes=(1, 1), name = 'Dot46098', )([Con28698,Max69343])
model = tf.keras.models.Model(inputs=[in0Dot15345,in1Dot15345,in0Con28698,in0Thr26567,in0Con55984,in0Add20629,in1Add20629,in0Con27224,in0Zer28487,in0Con95653,in0Up_97446,in0Glo99741,in0Con20118], outputs=Dot46098)
in0Dot15345 = tf.constant([[0.2822, 0.9199, 0.1639]])
in1Dot15345 = tf.constant([[0.1303, 0.8178, 0.7882]])
in0Con28698 = tf.constant([[0.7109, 0.3728, 0.3749, 0.7726, 0.2034, 0.0435, 0.0519, 0.5289, 0.8531, 0.2739, 0.6128, 0.267, 0.0076, 0.4831, 0.8821, 0.812, 0.5793]])
in0Thr26567 = tf.constant([[[[[0.2576], [0.5147]]]]])
in0Con55984 = tf.constant([[[[[0.8497], [0.4144]]], [[[0.9394], [0.7902]]]]])
in0Add20629 = tf.constant([[[[[0.1034, 0.0397], [0.3153, 0.939]]], [[[0.2382, 0.7166], [0.1118, 0.1949]]]]])
in1Add20629 = tf.constant([[[[[0.4692, 0.5211], [0.7701, 0.1413]]], [[[0.4467, 0.7267], [0.6471, 0.3814]]]]])
in0Con27224 = tf.constant([[0.6367, 0.1343, 0.8132, 0.0707, 0.8043, 0.6891, 0.0095, 0.1738, 0.6186, 0.9015]])
in0Zer28487 = tf.constant([[[1.002]]])
in0Con95653 = tf.constant([[0.1175, 0.9097, 0.7353, 0.8824, 0.1971, 0.4451, 0.6945, 0.0515, 0.5463, 0.0955, 0.7439, 0.0078, 0.1191, 0.8641, 0.227]])
in0Up_97446 = tf.constant([[[[1.065, 1.9844, 1.2935], [1.9567, 1.058, 1.961], [1.9302, 1.207, 1.3955]], [[1.1046, 1.1274, 1.4764], [1.7285, 1.2403, 1.1444], [1.679, 1.6895, 1.2842]]]])
in0Glo99741 = tf.constant([[[[1.2941]], [[1.7954]]]])
in0Con20118 = tf.constant([[0.5866, 0.5969, 0.6779, 0.0578, 0.2082, 0.8395, 0.3262, 0.597, 0.2597, 0.7309, 0.9954, 0.5703, 0.9926, 0.9732, 0.6687, 0.5229, 0.5804]])
print (np.array2string(model.predict([in0Dot15345,in1Dot15345,in0Con28698,in0Thr26567,in0Con55984,in0Add20629,in1Add20629,in0Con27224,in0Zer28487,in0Con95653,in0Up_97446,in0Glo99741,in0Con20118],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot46098.png')

LDot15345 = dot_layer([[0.2822, 0.9199, 0.1639]], [[0.1303, 0.8178, 0.7882]], 1, 1, Dot15345), 
LCon28698 = concatenate_layer([Dot15345,[[0.7109, 0.3728, 0.3749, 0.7726, 0.2034, 0.0435, 0.0519, 0.5289, 0.8531, 0.2739, 0.6128, 0.267, 0.0076, 0.4831, 0.8821, 0.812, 0.5793]]], 1, Con28698), 
LThr26567 = thresholded_relu_layer([[[[[0.2576], [0.5147]]]]], 2.7958735415565843, Thr26567), 
LZer30677 = zero_padding3D_layer(Thr26567, 1, 0, 0, 0, 0, 0, Zer30677), 
LCon55984 = concatenate_layer([Zer30677,[[[[[0.8497], [0.4144]]], [[[0.9394], [0.7902]]]]]], 4, Con55984), 
LAdd20629 = add_layer([[[[[[0.1034, 0.0397], [0.3153, 0.939]]], [[[0.2382, 0.7166], [0.1118, 0.1949]]]]], [[[[[0.4692, 0.5211], [0.7701, 0.1413]]], [[[0.4467, 0.7267], [0.6471, 0.3814]]]]]], Add20629), 
LMin66776 = minimum_layer([Con55984,Add20629], Min66776), 
LRes16166 = reshape_layer(Min66776, [2, 1, 4], Res16166), 
LRes95040 = reshape_layer(Res16166, [2, 4], Res95040), 
LFla87634 = flatten_layer(Res95040, Fla87634), 
LCon27224 = concatenate_layer([Fla87634,[[0.6367, 0.1343, 0.8132, 0.0707, 0.8043, 0.6891, 0.0095, 0.1738, 0.6186, 0.9015]]], 1, Con27224), 
LZer28487 = zero_padding1D_layer([[[1.002]]], 1, 1, Zer28487), 
LFla72332 = flatten_layer(Zer28487, Fla72332), 
LCon95653 = concatenate_layer([Fla72332,[[0.1175, 0.9097, 0.7353, 0.8824, 0.1971, 0.4451, 0.6945, 0.0515, 0.5463, 0.0955, 0.7439, 0.0078, 0.1191, 0.8641, 0.227]]], 1, Con95653), 
LUp_97446 = up_sampling2D_layer([[[[1.065, 1.9844, 1.2935], [1.9567, 1.058, 1.961], [1.9302, 1.207, 1.3955]], [[1.1046, 1.1274, 1.4764], [1.7285, 1.2403, 1.1444], [1.679, 1.6895, 1.2842]]]], 1, 1, Up_97446), 
LRes89647 = reshape_layer(Up_97446, [2, 9], Res89647), 
LFla71810 = flatten_layer(Res89647, Fla71810), 
LGlo99741 = global_average_pooling2D_layer([[[[1.2941]], [[1.7954]]]], Glo99741), 
LCon20118 = concatenate_layer([Glo99741,[[0.5866, 0.5969, 0.6779, 0.0578, 0.2082, 0.8395, 0.3262, 0.597, 0.2597, 0.7309, 0.9954, 0.5703, 0.9926, 0.9732, 0.6687, 0.5229, 0.5804]]], 1, Con20118), 
LSub56659 = subtract_layer(Fla71810,Con20118, Sub56659), 
LMin57094 = minimum_layer([Con95653,Sub56659], Min57094), 
LMax69343 = maximum_layer([Con27224,Min57094], Max69343), 
LDot46098 = dot_layer(Con28698,Max69343, 1, 1, Dot46098), 
exec_layers([LDot15345,LCon28698,LThr26567,LZer30677,LCon55984,LAdd20629,LMin66776,LRes16166,LRes95040,LFla87634,LCon27224,LZer28487,LFla72332,LCon95653,LUp_97446,LRes89647,LFla71810,LGlo99741,LCon20118,LSub56659,LMin57094,LMax69343,LDot46098],["Dot15345","Con28698","Thr26567","Zer30677","Con55984","Add20629","Min66776","Res16166","Res95040","Fla87634","Con27224","Zer28487","Fla72332","Con95653","Up_97446","Res89647","Fla71810","Glo99741","Con20118","Sub56659","Min57094","Max69343","Dot46098"],Dot46098,"Dot46098")

Actual (Unparsed): [[4.8783756]]

Expected (Unparsed): [[4.878375610000001]]

Actual:   [[4.8784]]

Expected: [[4.8784]]