import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro77284 = tf.keras.layers.Input(shape=([3, 1]))
in0Con77999 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot45259 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot45259 = tf.keras.layers.Input(shape=([2, 3]))
in0Con76272 = tf.keras.layers.Input(shape=([1, 2]))
in0Add83327 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add83327 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con71953 = tf.keras.layers.Input(shape=([2]))

Cro77284 = keras.layers.Cropping1D(cropping=((1, 1)), name = 'Cro77284', )(in0Cro77284)
Res25116 = keras.layers.Reshape((1, 1, 1), name = 'Res25116', )(Cro77284)
Dep5899 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep5899', )(Res25116)
Res68518 = keras.layers.Reshape((1, 1), name = 'Res68518', )(Dep5899)
Zer24710 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer24710', )(Res68518)
Con77999 = keras.layers.Concatenate(axis=2, name = 'Con77999', )([Zer24710,in0Con77999])
Dot45259 = keras.layers.Dot(axes=(2, 2), name = 'Dot45259', )([in0Dot45259,in1Dot45259])
Sub24273 = keras.layers.Subtract(name = 'Sub24273', )([Con77999,Dot45259])
Con76272 = keras.layers.Conv1D(2, (1),strides=(8), padding='valid', dilation_rate=(1), name = 'Con76272', )(in0Con76272)
Max65955 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max65955', )(Con76272)
Zer78157 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer78157', )(Max65955)
Mul29060 = keras.layers.Multiply(name = 'Mul29060', )([Sub24273,Zer78157])
Fla44122 = keras.layers.Flatten(name = 'Fla44122', )(Mul29060)
Add83327 = keras.layers.Add(name = 'Add83327', )([in0Add83327,in1Add83327])
Res63692 = keras.layers.Reshape((2, 2), name = 'Res63692', )(Add83327)
Glo85974 = keras.layers.GlobalMaxPool1D(name = 'Glo85974', )(Res63692)
Con71953 = keras.layers.Concatenate(axis=1, name = 'Con71953', )([Glo85974,in0Con71953])
Min17671 = keras.layers.Minimum(name = 'Min17671', )([Fla44122,Con71953])
model = tf.keras.models.Model(inputs=[in0Cro77284,in0Con77999,in0Dot45259,in1Dot45259,in0Con76272,in0Add83327,in1Add83327,in0Con71953], outputs=Min17671)
w = model.get_layer('Dep5899').get_weights() 
w[0] = np.array([[[[0.2883]]]])
w[1] = np.array([0])
model.get_layer('Dep5899').set_weights(w) 
w = model.get_layer('Con76272').get_weights() 
w[0] = np.array([[[0.5917, 0.5139], [0.2202, 0.448]]])
w[1] = np.array([0, 0])
model.get_layer('Con76272').set_weights(w) 
in0Cro77284 = tf.constant([[[1.9457], [1.0053], [1.3682]]])
in0Con77999 = tf.constant([[[0.8715], [0.8128]]])
in0Dot45259 = tf.constant([[[0.9033, 0.9766, 0.5342], [0.3409, 0.3278, 0.9156]]])
in1Dot45259 = tf.constant([[[0.6745, 0.4472, 0.0094], [0.452, 0.55, 0.1785]]])
in0Con76272 = tf.constant([[[0.8691, 0.6435]]])
in0Add83327 = tf.constant([[[[0.8359], [0.1006]], [[0.5225], [0.186]]]])
in1Add83327 = tf.constant([[[[0.1918], [0.5111]], [[0.8405], [0.4428]]]])
in0Con71953 = tf.constant([[0.7304, 0.412]])
print (np.array2string(model.predict([in0Cro77284,in0Con77999,in0Dot45259,in1Dot45259,in0Con76272,in0Add83327,in1Add83327,in0Con71953],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min17671.png')

LCro77284 = cropping1D_layer([[[1.9457], [1.0053], [1.3682]]], 1, 1, Cro77284), 
LRes25116 = reshape_layer(Cro77284, [1, 1, 1], Res25116), 
LDep5899 = depthwise_conv2D_layer(Res25116, 1, 1,[[[[0.2883]]]],[0], 1, 1, false, Dep5899), 
LRes68518 = reshape_layer(Dep5899, [1, 1], Res68518), 
LZer24710 = zero_padding1D_layer(Res68518, 1, 0, Zer24710), 
LCon77999 = concatenate_layer([Zer24710,[[[0.8715], [0.8128]]]], 2, Con77999), 
LDot45259 = dot_layer([[[0.9033, 0.9766, 0.5342], [0.3409, 0.3278, 0.9156]]], [[[0.6745, 0.4472, 0.0094], [0.452, 0.55, 0.1785]]], 2, 2, Dot45259), 
LSub24273 = subtract_layer(Con77999,Dot45259, Sub24273), 
LCon76272 = conv1D_layer([[[0.8691, 0.6435]]], 1,[[[0.5917, 0.5139], [0.2202, 0.448]]],[0, 0], 8, false, 1, Con76272), 
LMax65955 = max_pool1D_layer(Con76272, 1, 1, false, Max65955), 
LZer78157 = zero_padding1D_layer(Max65955, 1, 0, Zer78157), 
LMul29060 = multiply_layer([Sub24273,Zer78157], Mul29060), 
LFla44122 = flatten_layer(Mul29060, Fla44122), 
LAdd83327 = add_layer([[[[[0.8359], [0.1006]], [[0.5225], [0.186]]]], [[[[0.1918], [0.5111]], [[0.8405], [0.4428]]]]], Add83327), 
LRes63692 = reshape_layer(Add83327, [2, 2], Res63692), 
LGlo85974 = global_max_pool1D_layer(Res63692, Glo85974), 
LCon71953 = concatenate_layer([Glo85974,[[0.7304, 0.412]]], 1, Con71953), 
LMin17671 = minimum_layer([Fla44122,Con71953], Min17671), 
exec_layers([LCro77284,LRes25116,LDep5899,LRes68518,LZer24710,LCon77999,LDot45259,LSub24273,LCon76272,LMax65955,LZer78157,LMul29060,LFla44122,LAdd83327,LRes63692,LGlo85974,LCon71953,LMin17671],["Cro77284","Res25116","Dep5899","Res68518","Zer24710","Con77999","Dot45259","Sub24273","Con76272","Max65955","Zer78157","Mul29060","Fla44122","Add83327","Res63692","Glo85974","Con71953","Min17671"],Min17671,"Min17671")

Actual (Unparsed): [[-0.0000000, -0.0000000, -0.0625167, 0.2314909]]

Expected (Unparsed): [[-0.0,-0.0,-0.06251673043003614,0.23149094627921396]]

Actual:   [[-0, -0, -0.0625, 0.2315]]

Expected: [[-0, -0, -0.0625, 0.2315]]