import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo92000 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave66246 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave66246 = tf.keras.layers.Input(shape=([2, 2, 1]))

Glo92000 = keras.layers.GlobalAveragePooling2D(name = 'Glo92000', )(in0Glo92000)
Res2021 = keras.layers.Reshape((1, 1), name = 'Res2021', )(Glo92000)
Zer20451 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer20451', )(Res2021)
Res65309 = keras.layers.Reshape((3, 1, 1), name = 'Res65309', )(Zer20451)
Zer35323 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer35323', )(Res65309)
Ave66246 = keras.layers.Average(name = 'Ave66246', )([in0Ave66246,in1Ave66246])
Zer45541 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer45541', )(Ave66246)
Ave19156 = keras.layers.Average(name = 'Ave19156', )([Zer35323,Zer45541])
Zer63923 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer63923', )(Ave19156)
model = tf.keras.models.Model(inputs=[in0Glo92000,in0Ave66246,in1Ave66246], outputs=Zer63923)
in0Glo92000 = tf.constant([[[[1.9138], [1.4518]]]])
in0Ave66246 = tf.constant([[[[0.8385], [0.9667]], [[0.7059], [0.5319]]]])
in1Ave66246 = tf.constant([[[[0.6878], [0.3583]], [[0.4554], [0.4801]]]])
print (np.array2string(model.predict([in0Glo92000,in0Ave66246,in1Ave66246],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer63923.png')

LGlo92000 = global_average_pooling2D_layer([[[[1.9138], [1.4518]]]], Glo92000), 
LRes2021 = reshape_layer(Glo92000, [1, 1], Res2021), 
LZer20451 = zero_padding1D_layer(Res2021, 1, 1, Zer20451), 
LRes65309 = reshape_layer(Zer20451, [3, 1, 1], Res65309), 
LZer35323 = zero_padding2D_layer(Res65309, 0, 0, 2, 0, Zer35323), 
LAve66246 = average_layer([[[[[0.8385], [0.9667]], [[0.7059], [0.5319]]]], [[[[0.6878], [0.3583]], [[0.4554], [0.4801]]]]], Ave66246), 
LZer45541 = zero_padding2D_layer(Ave66246, 1, 0, 1, 0, Zer45541), 
LAve19156 = average_layer([Zer35323,Zer45541], Ave19156), 
LZer63923 = zero_padding2D_layer(Ave19156, 1, 1, 1, 1, Zer63923), 
exec_layers([LGlo92000,LRes2021,LZer20451,LRes65309,LZer35323,LAve66246,LZer45541,LAve19156,LZer63923],["Glo92000","Res2021","Zer20451","Res65309","Zer35323","Ave66246","Zer45541","Ave19156","Zer63923"],Zer63923,"Zer63923")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.3815750], [1.1726500], [0.0000000]], [[0.0000000], [0.0000000], [0.2903250], [0.2530000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0.381575],[1.17265],[0]],[[0],[0],[0.290325],[0.253],[0]],[[0],[0],[0],[0],[0]]]]

Actual:   [[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0.3816], [1.1727], [0]], [[0], [0], [0.2904], [0.253], [0]], [[0], [0], [0], [0], [0]]]]

Expected: [[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0.3816], [1.1727], [0]], [[0], [0], [0.2904], [0.253], [0]], [[0], [0], [0], [0], [0]]]]