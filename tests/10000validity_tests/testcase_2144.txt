import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave92567 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave92567 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Ave92567 = keras.layers.Average(name = 'Ave92567', )([in0Ave92567,in1Ave92567])
Res40749 = keras.layers.Reshape((2, 2, 4), name = 'Res40749', )(Ave92567)
Res51664 = keras.layers.Reshape((2, 8), name = 'Res51664', )(Res40749)
Zer10165 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer10165', )(Res51664)
model = tf.keras.models.Model(inputs=[in0Ave92567,in1Ave92567], outputs=Zer10165)
in0Ave92567 = tf.constant([[[[[0.0205, 0.8534], [0.3091, 0.8407]], [[0.2498, 0.43], [0.4432, 0.2911]]], [[[0.6579, 0.4451], [0.6692, 0.265]], [[0.9939, 0.0033], [0.8968, 0.1596]]]]])
in1Ave92567 = tf.constant([[[[[0.0187, 0.5842], [0.8849, 0.1865]], [[0.3508, 0.1646], [0.7014, 0.1237]]], [[[0.8734, 0.5021], [0.8678, 0.7438]], [[0.3819, 0.3781], [0.5462, 0.975]]]]])
print (np.array2string(model.predict([in0Ave92567,in1Ave92567],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer10165.png')

LAve92567 = average_layer([[[[[[0.0205, 0.8534], [0.3091, 0.8407]], [[0.2498, 0.43], [0.4432, 0.2911]]], [[[0.6579, 0.4451], [0.6692, 0.265]], [[0.9939, 0.0033], [0.8968, 0.1596]]]]], [[[[[0.0187, 0.5842], [0.8849, 0.1865]], [[0.3508, 0.1646], [0.7014, 0.1237]]], [[[0.8734, 0.5021], [0.8678, 0.7438]], [[0.3819, 0.3781], [0.5462, 0.975]]]]]], Ave92567), 
LRes40749 = reshape_layer(Ave92567, [2, 2, 4], Res40749), 
LRes51664 = reshape_layer(Res40749, [2, 8], Res51664), 
LZer10165 = zero_padding1D_layer(Res51664, 1, 1, Zer10165), 
exec_layers([LAve92567,LRes40749,LRes51664,LZer10165],["Ave92567","Res40749","Res51664","Zer10165"],Zer10165,"Zer10165")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0196000, 0.7188000, 0.5970000, 0.5136000, 0.3003000, 0.2973000, 0.5723000, 0.2074000], [0.7656500, 0.4736000, 0.7685000, 0.5044000, 0.6879000, 0.1907000, 0.7215000, 0.5673000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0],[0.0196,0.7188000000000001,0.597,0.5136000000000001,0.3003,0.2973,0.5723,0.20740000000000003],[0.7656499999999999,0.4736,0.7685,0.5044,0.6879,0.1907,0.7215,0.5673],[0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0], [0.0196, 0.7188, 0.597, 0.5136, 0.3003, 0.2973, 0.5723, 0.2074], [0.7657, 0.4736, 0.7685, 0.5044, 0.6879, 0.1907, 0.7215, 0.5673], [0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0], [0.0196, 0.7189, 0.597, 0.5137, 0.3003, 0.2973, 0.5723, 0.2075], [0.7657, 0.4736, 0.7685, 0.5044, 0.6879, 0.1907, 0.7215, 0.5673], [0, 0, 0, 0, 0, 0, 0, 0]]]