import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot424 = tf.keras.layers.Input(shape=([2]))
in1Dot424 = tf.keras.layers.Input(shape=([2]))
in0Ave2269 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave2269 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Add89683 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add89683 = tf.keras.layers.Input(shape=([2, 2, 1]))

Dot424 = keras.layers.Dot(axes=(1, 1), name = 'Dot424', )([in0Dot424,in1Dot424])
Res61316 = keras.layers.Reshape((1, 1), name = 'Res61316', )(Dot424)
Res57888 = keras.layers.Reshape((1, 1, 1), name = 'Res57888', )(Res61316)
Zer63665 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer63665', )(Res57888)
Ave2269 = keras.layers.Average(name = 'Ave2269', )([in0Ave2269,in1Ave2269])
Min38379 = keras.layers.Minimum(name = 'Min38379', )([Zer63665,Ave2269])
Add89683 = keras.layers.Add(name = 'Add89683', )([in0Add89683,in1Add89683])
Ave54547 = keras.layers.Average(name = 'Ave54547', )([Min38379,Add89683])
model = tf.keras.models.Model(inputs=[in0Dot424,in1Dot424,in0Ave2269,in1Ave2269,in0Add89683,in1Add89683], outputs=Ave54547)
in0Dot424 = tf.constant([[0.659, 0.8548]])
in1Dot424 = tf.constant([[0.0828, 0.5253]])
in0Ave2269 = tf.constant([[[[0.9043], [0.9453]], [[0.2392], [0.8992]]]])
in1Ave2269 = tf.constant([[[[0.7997], [0.1458]], [[0.6077], [0.8925]]]])
in0Add89683 = tf.constant([[[[0.4301], [0.4001]], [[0.0019], [0.8222]]]])
in1Add89683 = tf.constant([[[[0.4215], [0.9665]], [[0.6645], [0.4864]]]])
print (np.array2string(model.predict([in0Dot424,in1Dot424,in0Ave2269,in1Ave2269,in0Add89683,in1Add89683],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave54547.png')

LDot424 = dot_layer([[0.659, 0.8548]], [[0.0828, 0.5253]], 1, 1, Dot424), 
LRes61316 = reshape_layer(Dot424, [1, 1], Res61316), 
LRes57888 = reshape_layer(Res61316, [1, 1, 1], Res57888), 
LZer63665 = zero_padding2D_layer(Res57888, 1, 0, 1, 0, Zer63665), 
LAve2269 = average_layer([[[[[0.9043], [0.9453]], [[0.2392], [0.8992]]]], [[[[0.7997], [0.1458]], [[0.6077], [0.8925]]]]], Ave2269), 
LMin38379 = minimum_layer([Zer63665,Ave2269], Min38379), 
LAdd89683 = add_layer([[[[[0.4301], [0.4001]], [[0.0019], [0.8222]]]], [[[[0.4215], [0.9665]], [[0.6645], [0.4864]]]]], Add89683), 
LAve54547 = average_layer([Min38379,Add89683], Ave54547), 
exec_layers([LDot424,LRes61316,LRes57888,LZer63665,LAve2269,LMin38379,LAdd89683,LAve54547],["Dot424","Res61316","Res57888","Zer63665","Ave2269","Min38379","Add89683","Ave54547"],Ave54547,"Ave54547")

Actual (Unparsed): [[[[0.4258000], [0.6833000]], [[0.3332000], [0.9060958]]]]

Expected (Unparsed): [[[[0.42579999999999996],[0.6833]],[[0.3332],[0.90609582]]]]

Actual:   [[[[0.4258], [0.6833]], [[0.3332], [0.9061]]]]

Expected: [[[[0.4258], [0.6833]], [[0.3332], [0.9061]]]]