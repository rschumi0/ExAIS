import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave25679 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con23324 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0Cro80950 = tf.keras.layers.Input(shape=([3, 2, 3]))
in0Ave9432 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con56355 = tf.keras.layers.Input(shape=([3, 2, 1]))

Ave25679 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave25679', )(in0Ave25679)
Zer67127 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer67127', )(Ave25679)
Con23324 = keras.layers.Concatenate(axis=3, name = 'Con23324', )([Zer67127,in0Con23324])
Cro80950 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro80950', )(in0Cro80950)
Ave9432 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave9432', )(in0Ave9432)
Zer551 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer551', )(Ave9432)
Con56355 = keras.layers.Concatenate(axis=3, name = 'Con56355', )([Zer551,in0Con56355])
Ave24411 = keras.layers.Average(name = 'Ave24411', )([Cro80950,Con56355])
Ave88835 = keras.layers.Average(name = 'Ave88835', )([Con23324,Ave24411])
model = tf.keras.models.Model(inputs=[in0Ave25679,in0Con23324,in0Cro80950,in0Ave9432,in0Con56355], outputs=Ave88835)
in0Ave25679 = tf.constant([[[[1.8514, 1.2424]], [[1.9131, 1.892]]]])
in0Con23324 = tf.constant([[[[0.9143], [0.8102]], [[0.0285], [0.3687]], [[0.7815], [0.4609]]]])
in0Cro80950 = tf.constant([[[[1.8644, 1.6576, 1.5637], [1.431, 1.3145, 1.5255]], [[1.7033, 1.7357, 1.1102], [1.8047, 1.1862, 1.7086]], [[1.8487, 1.784, 1.4551], [1.7154, 1.3482, 1.0605]]]])
in0Ave9432 = tf.constant([[[[1.526, 1.2853], [1.6356, 1.0262]], [[1.1867, 1.4865], [1.9929, 1.8686]]]])
in0Con56355 = tf.constant([[[[0.418], [0.1874]], [[0.7453], [0.6563]], [[0.047], [0.1669]]]])
print (np.array2string(model.predict([in0Ave25679,in0Con23324,in0Cro80950,in0Ave9432,in0Con56355],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave88835.png')

LAve25679 = average_pooling2D_layer([[[[1.8514, 1.2424]], [[1.9131, 1.892]]]], 1, 1, Ave25679), 
LZer67127 = zero_padding2D_layer(Ave25679, 1, 0, 1, 0, Zer67127), 
LCon23324 = concatenate_layer([Zer67127,[[[[0.9143], [0.8102]], [[0.0285], [0.3687]], [[0.7815], [0.4609]]]]], 3, Con23324), 
LCro80950 = cropping2D_layer([[[[1.8644, 1.6576, 1.5637], [1.431, 1.3145, 1.5255]], [[1.7033, 1.7357, 1.1102], [1.8047, 1.1862, 1.7086]], [[1.8487, 1.784, 1.4551], [1.7154, 1.3482, 1.0605]]]], 0, 0, 0, 0, Cro80950), 
LAve9432 = average_pooling2D_layer([[[[1.526, 1.2853], [1.6356, 1.0262]], [[1.1867, 1.4865], [1.9929, 1.8686]]]], 1, 1, Ave9432), 
LZer551 = zero_padding2D_layer(Ave9432, 1, 0, 0, 0, Zer551), 
LCon56355 = concatenate_layer([Zer551,[[[[0.418], [0.1874]], [[0.7453], [0.6563]], [[0.047], [0.1669]]]]], 3, Con56355), 
LAve24411 = average_layer([Cro80950,Con56355], Ave24411), 
LAve88835 = average_layer([Con23324,Ave24411], Ave88835), 
exec_layers([LAve25679,LZer67127,LCon23324,LCro80950,LAve9432,LZer551,LCon56355,LAve24411,LAve88835],["Ave25679","Zer67127","Con23324","Cro80950","Ave9432","Zer551","Con56355","Ave24411","Ave88835"],Ave88835,"Ave88835")

Actual (Unparsed): [[[[0.4661000, 0.4144000, 0.9525750], [0.3577500, 0.3286250, 0.8333250]], [[0.8073250, 0.7552500, 0.4781250], [1.7857750, 1.1743000, 0.7755750]], [[0.7588500, 0.8176250, 0.7662750], [1.8836250, 1.7502000, 0.5373000]]]]

Expected (Unparsed): [[[[0.4661,0.4144,0.952575],[0.35775,0.328625,0.8333250000000001]],[[0.8073250000000001,0.75525,0.478125],[1.785775,1.1743,0.775575]],[[0.75885,0.817625,0.766275],[1.8836249999999999,1.7502,0.5373]]]]

Actual:   [[[[0.4661, 0.4144, 0.9526], [0.3578, 0.3287, 0.8334]], [[0.8074, 0.7553, 0.4782], [1.7858, 1.1743, 0.7756]], [[0.7589, 0.8177, 0.7663], [1.8837, 1.7502, 0.5373]]]]

Expected: [[[[0.4661, 0.4144, 0.9526], [0.3578, 0.3287, 0.8334]], [[0.8074, 0.7553, 0.4782], [1.7858, 1.1743, 0.7756]], [[0.7589, 0.8177, 0.7663], [1.8837, 1.7502, 0.5373]]]]