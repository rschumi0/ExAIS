import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add69634 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add69634 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Min66527 = tf.keras.layers.Input(shape=([2, 2]))
in1Min66527 = tf.keras.layers.Input(shape=([2, 2]))
in0Con80734 = tf.keras.layers.Input(shape=([2]))

Add69634 = keras.layers.Add(name = 'Add69634', )([in0Add69634,in1Add69634])
Res45829 = keras.layers.Reshape((1, 2), name = 'Res45829', )(Add69634)
Loc20489 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc20489', )(Res45829)
Fla7084 = keras.layers.Flatten(name = 'Fla7084', )(Loc20489)
Min66527 = keras.layers.Minimum(name = 'Min66527', )([in0Min66527,in1Min66527])
Res57233 = keras.layers.Reshape((2, 2, 1), name = 'Res57233', )(Min66527)
Res7653 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res7653', )(Res57233)
Glo80802 = keras.layers.GlobalMaxPool3D(name = 'Glo80802', )(Res7653)
Con80734 = keras.layers.Concatenate(axis=1, name = 'Con80734', )([Glo80802,in0Con80734])
Ave47694 = keras.layers.Average(name = 'Ave47694', )([Fla7084,Con80734])
model = tf.keras.models.Model(inputs=[in0Add69634,in1Add69634,in0Min66527,in1Min66527,in0Con80734], outputs=Ave47694)
w = model.get_layer('Loc20489').get_weights() 
w[0] = np.array([[[0.6007, 0.7482, 0.1618], [0.1857, 0.5202, 0.0282]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc20489').set_weights(w) 
in0Add69634 = tf.constant([[[[0.9459], [0.8037]]]])
in1Add69634 = tf.constant([[[[0.2615], [0.7657]]]])
in0Min66527 = tf.constant([[[0.1207, 0.6276], [0.3284, 0.4869]]])
in1Min66527 = tf.constant([[[0.862, 0.5475], [0.8523, 0.9856]]])
in0Con80734 = tf.constant([[0.3239, 0.6164]])
print (np.array2string(model.predict([in0Add69634,in1Add69634,in0Min66527,in1Min66527,in0Con80734],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave47694.png')

LAdd69634 = add_layer([[[[[0.9459], [0.8037]]]], [[[[0.2615], [0.7657]]]]], Add69634), 
LRes45829 = reshape_layer(Add69634, [1, 2], Res45829), 
LLoc20489 = locally_connected1D_layer(Res45829, 1,[[[0.6007, 0.7482, 0.1618], [0.1857, 0.5202, 0.0282]]],[[0, 0, 0]], 1, Loc20489), 
LFla7084 = flatten_layer(Loc20489, Fla7084), 
LMin66527 = minimum_layer([[[[0.1207, 0.6276], [0.3284, 0.4869]]], [[[0.862, 0.5475], [0.8523, 0.9856]]]], Min66527), 
LRes57233 = reshape_layer(Min66527, [2, 2, 1], Res57233), 
LRes7653 = reshape_layer(Res57233, [2, 2, 1, 1], Res7653), 
LGlo80802 = global_max_pool3D_layer(Res7653, Glo80802), 
LCon80734 = concatenate_layer([Glo80802,[[0.3239, 0.6164]]], 1, Con80734), 
LAve47694 = average_layer([Fla7084,Con80734], Ave47694), 
exec_layers([LAdd69634,LRes45829,LLoc20489,LFla7084,LMin66527,LRes57233,LRes7653,LGlo80802,LCon80734,LAve47694],["Add69634","Res45829","Loc20489","Fla7084","Min66527","Res57233","Res7653","Glo80802","Con80734","Ave47694"],Ave47694,"Ave47694")

Actual (Unparsed): [[0.7821114, 1.0218393, 0.4280072]]

Expected (Unparsed): [[0.7821113799999999,1.02183928,0.4280072]]

Actual:   [[0.7822, 1.0219, 0.4281]]

Expected: [[0.7822, 1.0219, 0.4281]]