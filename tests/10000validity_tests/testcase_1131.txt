import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave73621 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave73621 = tf.keras.layers.Input(shape=([2, 1]))

Ave73621 = keras.layers.Average(name = 'Ave73621', )([in0Ave73621,in1Ave73621])
Fla90095 = keras.layers.Flatten(name = 'Fla90095', )(Ave73621)
Res89598 = keras.layers.Reshape((2, 1), name = 'Res89598', )(Fla90095)
Res13922 = keras.layers.Reshape((2, 1, 1), name = 'Res13922', )(Res89598)
Con80410 = keras.layers.Conv2D(4, (2, 1),strides=(11, 1), padding='same', dilation_rate=(1, 1), name = 'Con80410', )(Res13922)
Glo35486 = keras.layers.GlobalMaxPool2D(name = 'Glo35486', )(Con80410)
model = tf.keras.models.Model(inputs=[in0Ave73621,in1Ave73621], outputs=Glo35486)
w = model.get_layer('Con80410').get_weights() 
w[0] = np.array([[[[0.4423, 0.1128, 0.6367, 0.5845]]], [[[0.8284, 0.1662, 0.1853, 0.0053]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con80410').set_weights(w) 
in0Ave73621 = tf.constant([[[0.126], [0.1098]]])
in1Ave73621 = tf.constant([[[0.9667], [0.7822]]])
print (np.array2string(model.predict([in0Ave73621,in1Ave73621],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo35486.png')

LAve73621 = average_layer([[[[0.126], [0.1098]]], [[[0.9667], [0.7822]]]], Ave73621), 
LFla90095 = flatten_layer(Ave73621, Fla90095), 
LRes89598 = reshape_layer(Fla90095, [2, 1], Res89598), 
LRes13922 = reshape_layer(Res89598, [2, 1, 1], Res13922), 
LCon80410 = conv2D_layer(Res13922, 2, 1,[[[[0.4423, 0.1128, 0.6367, 0.5845]]], [[[0.8284, 0.1662, 0.1853, 0.0053]]]],[0, 0, 0, 0], 11, 1, true, 1, 1, Con80410), 
LGlo35486 = global_max_pool2D_layer(Con80410, Glo35486), 
exec_layers([LAve73621,LFla90095,LRes89598,LRes13922,LCon80410,LGlo35486],["Ave73621","Fla90095","Res89598","Res13922","Con80410","Glo35486"],Glo35486,"Glo35486")

Actual (Unparsed): [[0.6111170, 0.1357535, 0.4305048, 0.3217054]]

Expected (Unparsed): [[0.6111170050000001,0.13575348,0.430504845,0.321705375]]

Actual:   [[0.6112, 0.1358, 0.4306, 0.3218]]

Expected: [[0.6112, 0.1358, 0.4306, 0.3218]]