import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add22739 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add22739 = tf.keras.layers.Input(shape=([1, 2, 1]))

Add22739 = keras.layers.Add(name = 'Add22739', )([in0Add22739,in1Add22739])
Loc11818 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(1, 1), name = 'Loc11818', )(Add22739)
model = tf.keras.models.Model(inputs=[in0Add22739,in1Add22739], outputs=Loc11818)
w = model.get_layer('Loc11818').get_weights() 
w[0] = np.array([[[0.0384, 0.4583, 0.3719, 0.3971]], [[0.1741, 0.9051, 0.776, 0.7042]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc11818').set_weights(w) 
in0Add22739 = tf.constant([[[[0.9305], [0.7087]]]])
in1Add22739 = tf.constant([[[[0.1609], [0.8677]]]])
print (np.array2string(model.predict([in0Add22739,in1Add22739],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc11818.png')

LAdd22739 = add_layer([[[[[0.9305], [0.7087]]]], [[[[0.1609], [0.8677]]]]], Add22739), 
LLoc11818 = locally_connected2D_layer(Add22739, 1, 1,[[[0.0384, 0.4583, 0.3719, 0.3971]], [[0.1741, 0.9051, 0.776, 0.7042]]],[[[0, 0, 0, 0], [0, 0, 0, 0]]], 1, 1, Loc11818), 
exec_layers([LAdd22739,LLoc11818],["Add22739","Loc11818"],Loc11818,"Loc11818")

Actual (Unparsed): [[[[0.0419098, 0.5001886, 0.4058916, 0.4333949], [0.2744512, 1.4267996, 1.2232864, 1.1101009]]]]

Expected (Unparsed): [[[[0.04190975999999999,0.50018862,0.40589166,0.43339494],[0.27445124,1.42679964,1.2232864,1.11010088]]]]

Actual:   [[[[0.042, 0.5002, 0.4059, 0.4334], [0.2745, 1.4268, 1.2233, 1.1102]]]]

Expected: [[[[0.042, 0.5002, 0.4059, 0.4334], [0.2745, 1.4268, 1.2233, 1.1102]]]]