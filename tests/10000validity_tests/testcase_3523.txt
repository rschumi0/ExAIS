import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub21122 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub21122 = tf.keras.layers.Input(shape=([2, 2]))

Sub21122 = keras.layers.Subtract(name = 'Sub21122', )([in0Sub21122,in1Sub21122])
Fla20767 = keras.layers.Flatten(name = 'Fla20767', )(Sub21122)
Res43854 = keras.layers.Reshape((4, 1), name = 'Res43854', )(Fla20767)
Res38440 = keras.layers.Reshape((4, 1, 1), name = 'Res38440', )(Res43854)
Res81498 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res81498', )(Res38440)
Glo59365 = keras.layers.GlobalAveragePooling3D(name = 'Glo59365', )(Res81498)
Den40703 = keras.layers.Dense(3,name = 'Den40703', )(Glo59365)
model = tf.keras.models.Model(inputs=[in0Sub21122,in1Sub21122], outputs=Den40703)
w = model.get_layer('Den40703').get_weights() 
w[0] = np.array([[0.5771, 0.4317, 0.7409]])
w[1] = np.array([0.5619, 0.651, 0.1409])
model.get_layer('Den40703').set_weights(w) 
in0Sub21122 = tf.constant([[[0.3005, 0.8077], [0.1091, 0.5816]]])
in1Sub21122 = tf.constant([[[0.5436, 0.5118], [0.7537, 0.525]]])
print (np.array2string(model.predict([in0Sub21122,in1Sub21122],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den40703.png')

LSub21122 = subtract_layer([[[0.3005, 0.8077], [0.1091, 0.5816]]], [[[0.5436, 0.5118], [0.7537, 0.525]]], Sub21122), 
LFla20767 = flatten_layer(Sub21122, Fla20767), 
LRes43854 = reshape_layer(Fla20767, [4, 1], Res43854), 
LRes38440 = reshape_layer(Res43854, [4, 1, 1], Res38440), 
LRes81498 = reshape_layer(Res38440, [4, 1, 1, 1], Res81498), 
LGlo59365 = global_average_pooling3D_layer(Res81498, Glo59365), 
LDen40703 = dense_layer(Glo59365, [[0.5771, 0.4317, 0.7409]],[0.5619, 0.651, 0.1409], Den40703), 
exec_layers([LSub21122,LFla20767,LRes43854,LRes38440,LRes81498,LGlo59365,LDen40703],["Sub21122","Fla20767","Res43854","Res38440","Res81498","Glo59365","Den40703"],Den40703,"Den40703")

Actual (Unparsed): [[0.4846840, 0.5932385, 0.0417676]]

Expected (Unparsed): [[0.48468401999999994,0.59323854,0.04176757999999997]]

Actual:   [[0.4847, 0.5933, 0.0418]]

Expected: [[0.4847, 0.5933, 0.0418]]