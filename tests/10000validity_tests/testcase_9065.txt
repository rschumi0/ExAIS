import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot7362 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot7362 = tf.keras.layers.Input(shape=([2, 3]))

Dot7362 = keras.layers.Dot(axes=(1, 1), name = 'Dot7362', )([in0Dot7362,in1Dot7362])
Glo20112 = keras.layers.GlobalMaxPool1D(name = 'Glo20112', )(Dot7362)
Res2349 = keras.layers.Reshape((3, 1), name = 'Res2349', )(Glo20112)
Res40203 = keras.layers.Reshape((3, 1, 1), name = 'Res40203', )(Res2349)
Max36502 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(5, 2), padding='valid', name = 'Max36502', )(Res40203)
model = tf.keras.models.Model(inputs=[in0Dot7362,in1Dot7362], outputs=Max36502)
in0Dot7362 = tf.constant([[[0.2846, 0.9984, 0.5837], [0.4949, 0.0561, 0.7772]]])
in1Dot7362 = tf.constant([[[0.8253, 0.8851, 0.0715], [0.8922, 0.2459, 0.0588]]])
print (np.array2string(model.predict([in0Dot7362,in1Dot7362],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max36502.png')

LDot7362 = dot_layer([[[0.2846, 0.9984, 0.5837], [0.4949, 0.0561, 0.7772]]], [[[0.8253, 0.8851, 0.0715], [0.8922, 0.2459, 0.0588]]], 1, 1, Dot7362), 
LGlo20112 = global_max_pool1D_layer(Dot7362, Glo20112), 
LRes2349 = reshape_layer(Glo20112, [3, 1], Res2349), 
LRes40203 = reshape_layer(Res2349, [3, 1, 1], Res40203), 
LMax36502 = max_pool2D_layer(Res40203, 1, 1, 5, 2, false, Max36502), 
exec_layers([LDot7362,LGlo20112,LRes2349,LRes40203,LMax36502],["Dot7362","Glo20112","Res2349","Res40203","Max36502"],Max36502,"Max36502")

Actual (Unparsed): [[[[1.1751454]]]]

Expected (Unparsed): [[[[1.17514545]]]]

Actual:   [[[[1.1752]]]]

Expected: [[[[1.1752]]]]