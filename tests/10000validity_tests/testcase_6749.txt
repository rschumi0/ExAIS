import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max60914 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Max60914 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Max60914 = keras.layers.Maximum(name = 'Max60914', )([in0Max60914,in1Max60914])
Res81786 = keras.layers.Reshape((2, 2, 2), name = 'Res81786', )(Max60914)
Res17001 = keras.layers.Reshape((2, 4), name = 'Res17001', )(Res81786)
Glo92219 = keras.layers.GlobalAveragePooling1D(name = 'Glo92219', )(Res17001)
model = tf.keras.models.Model(inputs=[in0Max60914,in1Max60914], outputs=Glo92219)
in0Max60914 = tf.constant([[[[[0.8077], [0.5674]], [[0.8487], [0.8328]]], [[[0.4608], [0.9106]], [[0.5832], [0.8162]]]]])
in1Max60914 = tf.constant([[[[[0.9519], [0.8024]], [[0.2989], [0.5246]]], [[[0.8461], [0.7957]], [[0.1717], [0.6769]]]]])
print (np.array2string(model.predict([in0Max60914,in1Max60914],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo92219.png')

LMax60914 = maximum_layer([[[[[[0.8077], [0.5674]], [[0.8487], [0.8328]]], [[[0.4608], [0.9106]], [[0.5832], [0.8162]]]]], [[[[[0.9519], [0.8024]], [[0.2989], [0.5246]]], [[[0.8461], [0.7957]], [[0.1717], [0.6769]]]]]], Max60914), 
LRes81786 = reshape_layer(Max60914, [2, 2, 2], Res81786), 
LRes17001 = reshape_layer(Res81786, [2, 4], Res17001), 
LGlo92219 = global_average_pooling1D_layer(Res17001, Glo92219), 
exec_layers([LMax60914,LRes81786,LRes17001,LGlo92219],["Max60914","Res81786","Res17001","Glo92219"],Glo92219,"Glo92219")

Actual (Unparsed): [[0.8990000, 0.8565000, 0.7159500, 0.8245000]]

Expected (Unparsed): [[0.899,0.8565,0.7159500000000001,0.8245]]

Actual:   [[0.899, 0.8565, 0.716, 0.8245]]

Expected: [[0.899, 0.8565, 0.716, 0.8245]]