import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add71928 = tf.keras.layers.Input(shape=([2, 2]))
in1Add71928 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub69500 = tf.keras.layers.Input(shape=([2]))
in1Sub69500 = tf.keras.layers.Input(shape=([2]))
in0Min3389 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min3389 = tf.keras.layers.Input(shape=([2, 1, 1]))

Add71928 = keras.layers.Add(name = 'Add71928', )([in0Add71928,in1Add71928])
Sub69500 = keras.layers.Subtract(name = 'Sub69500', )([in0Sub69500,in1Sub69500])
Res52592 = keras.layers.Reshape((2, 1), name = 'Res52592', )(Sub69500)
Min3389 = keras.layers.Minimum(name = 'Min3389', )([in0Min3389,in1Min3389])
Res82027 = keras.layers.Reshape((2, 1), name = 'Res82027', )(Min3389)
Mul61507 = keras.layers.Multiply(name = 'Mul61507', )([Res52592,Res82027])
Dot84088 = keras.layers.Dot(axes=(1, 1), name = 'Dot84088', )([Add71928,Mul61507])
Fla96577 = keras.layers.Flatten(name = 'Fla96577', )(Dot84088)
Den72294 = keras.layers.Dense(3,name = 'Den72294', )(Fla96577)
model = tf.keras.models.Model(inputs=[in0Add71928,in1Add71928,in0Sub69500,in1Sub69500,in0Min3389,in1Min3389], outputs=Den72294)
w = model.get_layer('Den72294').get_weights() 
w[0] = np.array([[0.5907, 0.5206, 0.5793], [0.7046, 0.2584, 0.5072]])
w[1] = np.array([0.8501, 0.6213, 0.9968])
model.get_layer('Den72294').set_weights(w) 
in0Add71928 = tf.constant([[[0.5601, 0.4463], [0.5924, 0.9812]]])
in1Add71928 = tf.constant([[[0.9024, 0.7524], [0.4191, 0.2606]]])
in0Sub69500 = tf.constant([[0.9114, 0.5221]])
in1Sub69500 = tf.constant([[0.6409, 0.1312]])
in0Min3389 = tf.constant([[[[0.539]], [[0.977]]]])
in1Min3389 = tf.constant([[[[0.4066]], [[0.8449]]]])
print (np.array2string(model.predict([in0Add71928,in1Add71928,in0Sub69500,in1Sub69500,in0Min3389,in1Min3389],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den72294.png')

LAdd71928 = add_layer([[[[0.5601, 0.4463], [0.5924, 0.9812]]], [[[0.9024, 0.7524], [0.4191, 0.2606]]]], Add71928), 
LSub69500 = subtract_layer([[0.9114, 0.5221]], [[0.6409, 0.1312]], Sub69500), 
LRes52592 = reshape_layer(Sub69500, [2, 1], Res52592), 
LMin3389 = minimum_layer([[[[[0.539]], [[0.977]]]], [[[[0.4066]], [[0.8449]]]]], Min3389), 
LRes82027 = reshape_layer(Min3389, [2, 1], Res82027), 
LMul61507 = multiply_layer([Res52592,Res82027], Mul61507), 
LDot84088 = dot_layer(Add71928,Mul61507, 1, 1, Dot84088), 
LFla96577 = flatten_layer(Dot84088, Fla96577), 
LDen72294 = dense_layer(Fla96577, [[0.5907, 0.5206, 0.5793], [0.7046, 0.2584, 0.5072]],[0.8501, 0.6213, 0.9968], Den72294), 
exec_layers([LAdd71928,LSub69500,LRes52592,LMin3389,LRes82027,LMul61507,LDot84088,LFla96577,LDen72294],["Add71928","Sub69500","Res52592","Min3389","Res82027","Mul61507","Dot84088","Fla96577","Den72294"],Den72294,"Den72294")

Actual (Unparsed): [[1.5243234, 1.0190021, 1.5583963]]

Expected (Unparsed): [[1.5243233904244962,1.0190020862080822,1.5583963077265202]]

Actual:   [[1.5244, 1.0191, 1.5584]]

Expected: [[1.5244, 1.0191, 1.5584]]