import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas43690 = tf.keras.layers.Input(shape=([4]))
in0Glo83078 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con42420 = tf.keras.layers.Input(shape=([3]))
in0Glo55978 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con95891 = tf.keras.layers.Input(shape=([3]))

Mas43690 = keras.layers.Masking(mask_value=1, name = 'Mas43690', )(in0Mas43690)
Glo83078 = keras.layers.GlobalAveragePooling2D(name = 'Glo83078', )(in0Glo83078)
Con42420 = keras.layers.Concatenate(axis=1, name = 'Con42420', )([Glo83078,in0Con42420])
Add68484 = keras.layers.Add(name = 'Add68484', )([Mas43690,Con42420])
Glo55978 = keras.layers.GlobalMaxPool2D(name = 'Glo55978', )(in0Glo55978)
Con95891 = keras.layers.Concatenate(axis=1, name = 'Con95891', )([Glo55978,in0Con95891])
Add58659 = keras.layers.Add(name = 'Add58659', )([Add68484,Con95891])
Res24541 = keras.layers.Reshape((4, 1), name = 'Res24541', )(Add58659)
Up_55219 = keras.layers.UpSampling1D(size=(2), name = 'Up_55219', )(Res24541)
model = tf.keras.models.Model(inputs=[in0Mas43690,in0Glo83078,in0Con42420,in0Glo55978,in0Con95891], outputs=Up_55219)
in0Mas43690 = tf.constant([[1.639, 1.4218, 1.7715, 1.8388]])
in0Glo83078 = tf.constant([[[[1.5815]], [[1.7051]]]])
in0Con42420 = tf.constant([[0.8178, 0.7155, 0.4303]])
in0Glo55978 = tf.constant([[[[1.0534]]]])
in0Con95891 = tf.constant([[0.9191, 0.7336, 0.1822]])
print (np.array2string(model.predict([in0Mas43690,in0Glo83078,in0Con42420,in0Glo55978,in0Con95891],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_55219.png')

LMas43690 = masking_layer([[1.639, 1.4218, 1.7715, 1.8388]], 1, Mas43690), 
LGlo83078 = global_average_pooling2D_layer([[[[1.5815]], [[1.7051]]]], Glo83078), 
LCon42420 = concatenate_layer([Glo83078,[[0.8178, 0.7155, 0.4303]]], 1, Con42420), 
LAdd68484 = add_layer([Mas43690,Con42420], Add68484), 
LGlo55978 = global_max_pool2D_layer([[[[1.0534]]]], Glo55978), 
LCon95891 = concatenate_layer([Glo55978,[[0.9191, 0.7336, 0.1822]]], 1, Con95891), 
LAdd58659 = add_layer([Add68484,Con95891], Add58659), 
LRes24541 = reshape_layer(Add58659, [4, 1], Res24541), 
LUp_55219 = up_sampling1D_layer(Res24541, 2, Up_55219), 
exec_layers([LMas43690,LGlo83078,LCon42420,LAdd68484,LGlo55978,LCon95891,LAdd58659,LRes24541,LUp_55219],["Mas43690","Glo83078","Con42420","Add68484","Glo55978","Con95891","Add58659","Res24541","Up_55219"],Up_55219,"Up_55219")

Actual (Unparsed): [[[4.3357002], [4.3357002], [3.1587000], [3.1587000], [3.2206000], [3.2206000], [2.4513000], [2.4513000]]]

Expected (Unparsed): [[[4.3357],[4.3357],[3.1586999999999996],[3.1586999999999996],[3.2206],[3.2206],[2.4513],[2.4513]]]

Actual:   [[[4.3358], [4.3358], [3.1587], [3.1587], [3.2206], [3.2206], [2.4513], [2.4513]]]

Expected: [[[4.3357], [4.3357], [3.1587], [3.1587], [3.2206], [3.2206], [2.4513], [2.4513]]]