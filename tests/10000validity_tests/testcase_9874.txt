import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max28272 = tf.keras.layers.Input(shape=([1, 2]))
in1Max28272 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave62616 = tf.keras.layers.Input(shape=([1, 2]))
in0Con5764 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave34752 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave34752 = tf.keras.layers.Input(shape=([1, 1]))
in0Con74329 = tf.keras.layers.Input(shape=([3]))

Max28272 = keras.layers.Maximum(name = 'Max28272', )([in0Max28272,in1Max28272])
Res62723 = keras.layers.Reshape((1, 2, 1), name = 'Res62723', )(Max28272)
Res5989 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res5989', )(Res62723)
Con95237 = keras.layers.Conv3D(4, (1, 1, 1),strides=(6, 2, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con95237', )(Res5989)
Res37844 = keras.layers.Reshape((1, 1, 4), name = 'Res37844', )(Con95237)
Res2607 = keras.layers.Reshape((1, 4), name = 'Res2607', )(Res37844)
Ave62616 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave62616', )(in0Ave62616)
Con5764 = keras.layers.Concatenate(axis=2, name = 'Con5764', )([Ave62616,in0Con5764])
Add46688 = keras.layers.Add(name = 'Add46688', )([Res2607,Con5764])
Fla74147 = keras.layers.Flatten(name = 'Fla74147', )(Add46688)
Ave34752 = keras.layers.Average(name = 'Ave34752', )([in0Ave34752,in1Ave34752])
Res25449 = keras.layers.Reshape((1, 1, 1), name = 'Res25449', )(Ave34752)
Ave97287 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave97287', )(Res25449)
Glo60902 = keras.layers.GlobalAveragePooling2D(name = 'Glo60902', )(Ave97287)
Con74329 = keras.layers.Concatenate(axis=1, name = 'Con74329', )([Glo60902,in0Con74329])
Min59412 = keras.layers.Minimum(name = 'Min59412', )([Fla74147,Con74329])
model = tf.keras.models.Model(inputs=[in0Max28272,in1Max28272,in0Ave62616,in0Con5764,in0Ave34752,in1Ave34752,in0Con74329], outputs=Min59412)
w = model.get_layer('Con95237').get_weights() 
w[0] = np.array([[[[[0.9454, 0.4908, 0.227, 0.1337]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con95237').set_weights(w) 
in0Max28272 = tf.constant([[[0.3425, 0.506]]])
in1Max28272 = tf.constant([[[0.8493, 0.4741]]])
in0Ave62616 = tf.constant([[[1.7134, 1.7081]]])
in0Con5764 = tf.constant([[[0.407, 0.645]]])
in0Ave34752 = tf.constant([[[0.5092]]])
in1Ave34752 = tf.constant([[[0.3484]]])
in0Con74329 = tf.constant([[0.3243, 0.9187, 0.854]])
print (np.array2string(model.predict([in0Max28272,in1Max28272,in0Ave62616,in0Con5764,in0Ave34752,in1Ave34752,in0Con74329],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min59412.png')

LMax28272 = maximum_layer([[[[0.3425, 0.506]]], [[[0.8493, 0.4741]]]], Max28272), 
LRes62723 = reshape_layer(Max28272, [1, 2, 1], Res62723), 
LRes5989 = reshape_layer(Res62723, [1, 2, 1, 1], Res5989), 
LCon95237 = conv3D_layer(Res5989, 1, 1, 1,[[[[[0.9454, 0.4908, 0.227, 0.1337]]]]],[0, 0, 0, 0], 6, 2, 1, false, 1, 1, 1, Con95237), 
LRes37844 = reshape_layer(Con95237, [1, 1, 4], Res37844), 
LRes2607 = reshape_layer(Res37844, [1, 4], Res2607), 
LAve62616 = average_pooling1D_layer([[[1.7134, 1.7081]]], 1, Ave62616), 
LCon5764 = concatenate_layer([Ave62616,[[[0.407, 0.645]]]], 2, Con5764), 
LAdd46688 = add_layer([Res2607,Con5764], Add46688), 
LFla74147 = flatten_layer(Add46688, Fla74147), 
LAve34752 = average_layer([[[[0.5092]]], [[[0.3484]]]], Ave34752), 
LRes25449 = reshape_layer(Ave34752, [1, 1, 1], Res25449), 
LAve97287 = average_pooling2D_layer(Res25449, 1, 1, Ave97287), 
LGlo60902 = global_average_pooling2D_layer(Ave97287, Glo60902), 
LCon74329 = concatenate_layer([Glo60902,[[0.3243, 0.9187, 0.854]]], 1, Con74329), 
LMin59412 = minimum_layer([Fla74147,Con74329], Min59412), 
exec_layers([LMax28272,LRes62723,LRes5989,LCon95237,LRes37844,LRes2607,LAve62616,LCon5764,LAdd46688,LFla74147,LAve34752,LRes25449,LAve97287,LGlo60902,LCon74329,LMin59412],["Max28272","Res62723","Res5989","Con95237","Res37844","Res2607","Ave62616","Con5764","Add46688","Fla74147","Ave34752","Res25449","Ave97287","Glo60902","Con74329","Min59412"],Min59412,"Min59412")

Actual (Unparsed): [[0.4288000, 0.3243000, 0.5997911, 0.7585514]]

Expected (Unparsed): [[0.42879999999999996,0.3243,0.5997911,0.75855141]]

Actual:   [[0.4288, 0.3243, 0.5998, 0.7586]]

Expected: [[0.4288, 0.3243, 0.5998, 0.7586]]