import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave81833 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave81833 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con45853 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Add27029 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Add27029 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Ave81833 = keras.layers.Average(name = 'Ave81833', )([in0Ave81833,in1Ave81833])
Res69329 = keras.layers.Reshape((2, 1, 2, 1), name = 'Res69329', )(Ave81833)
Zer27732 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer27732', )(Res69329)
Con45853 = keras.layers.Concatenate(axis=4, name = 'Con45853', )([Zer27732,in0Con45853])
Add27029 = keras.layers.Add(name = 'Add27029', )([in0Add27029,in1Add27029])
Add6334 = keras.layers.Add(name = 'Add6334', )([Con45853,Add27029])
model = tf.keras.models.Model(inputs=[in0Ave81833,in1Ave81833,in0Con45853,in0Add27029,in1Add27029], outputs=Add6334)
in0Ave81833 = tf.constant([[[[0.3074, 0.2071]], [[0.0873, 0.16]]]])
in1Ave81833 = tf.constant([[[[0.9174, 0.4038]], [[0.6742, 0.1111]]]])
in0Con45853 = tf.constant([[[[[0.0672], [0.9859]], [[0.1191], [0.1144]]], [[[0.3206], [0.0263]], [[0.525], [0.863]]]]])
in0Add27029 = tf.constant([[[[[0.7788, 0.8498], [0.1142, 0.0294]], [[0.49, 0.3166], [0.0011, 0.7054]]], [[[0.9118, 0.0314], [0.3185, 0.914]], [[0.6048, 0.0765], [0.9798, 0.1156]]]]])
in1Add27029 = tf.constant([[[[[0.3973, 0.4177], [0.1662, 0.5847]], [[0.2061, 0.4427], [0.3638, 0.1534]]], [[[0.5064, 0.7941], [0.3416, 0.8655]], [[0.5243, 0.8408], [0.5735, 0.0985]]]]])
print (np.array2string(model.predict([in0Ave81833,in1Ave81833,in0Con45853,in0Add27029,in1Add27029],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add6334.png')

LAve81833 = average_layer([[[[[0.3074, 0.2071]], [[0.0873, 0.16]]]], [[[[0.9174, 0.4038]], [[0.6742, 0.1111]]]]], Ave81833), 
LRes69329 = reshape_layer(Ave81833, [2, 1, 2, 1], Res69329), 
LZer27732 = zero_padding3D_layer(Res69329, 0, 0, 1, 0, 0, 0, Zer27732), 
LCon45853 = concatenate_layer([Zer27732,[[[[[0.0672], [0.9859]], [[0.1191], [0.1144]]], [[[0.3206], [0.0263]], [[0.525], [0.863]]]]]], 4, Con45853), 
LAdd27029 = add_layer([[[[[[0.7788, 0.8498], [0.1142, 0.0294]], [[0.49, 0.3166], [0.0011, 0.7054]]], [[[0.9118, 0.0314], [0.3185, 0.914]], [[0.6048, 0.0765], [0.9798, 0.1156]]]]], [[[[[0.3973, 0.4177], [0.1662, 0.5847]], [[0.2061, 0.4427], [0.3638, 0.1534]]], [[[0.5064, 0.7941], [0.3416, 0.8655]], [[0.5243, 0.8408], [0.5735, 0.0985]]]]]], Add27029), 
LAdd6334 = add_layer([Con45853,Add27029], Add6334), 
exec_layers([LAve81833,LRes69329,LZer27732,LCon45853,LAdd27029,LAdd6334],["Ave81833","Res69329","Zer27732","Con45853","Add27029","Add6334"],Add6334,"Add6334")

Actual (Unparsed): [[[[[1.1761000, 1.3347000], [0.2804000, 1.6000000]], [[1.3085000, 0.8784000], [0.6703500, 0.9732000]]], [[[1.4182000, 1.1461000], [0.6601000, 1.8057999]], [[1.5098500, 1.4423000], [1.6888500, 1.0771000]]]]]

Expected (Unparsed): [[[[[1.1761,1.3347],[0.2804,1.6]],[[1.3085,0.8784],[0.67035,0.9732000000000001]]],[[[1.4182000000000001,1.1461000000000001],[0.6601,1.8058]],[[1.5098500000000001,1.4423],[1.6888500000000002,1.0771]]]]]

Actual:   [[[[[1.1761, 1.3347], [0.2804, 1.6]], [[1.3085, 0.8784], [0.6704, 0.9732]]], [[[1.4182, 1.1461], [0.6601, 1.8058]], [[1.5099, 1.4423], [1.6889, 1.0771]]]]]

Expected: [[[[[1.1761, 1.3347], [0.2804, 1.6]], [[1.3085, 0.8784], [0.6704, 0.9733]]], [[[1.4183, 1.1462], [0.6601, 1.8058]], [[1.5099, 1.4423], [1.6889, 1.0771]]]]]