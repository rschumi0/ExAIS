import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc91085 = tf.keras.layers.Input(shape=([2, 2]))

Loc91085 = keras.layers.LocallyConnected1D(3, (2),strides=(1), name = 'Loc91085', )(in0Loc91085)
Res26339 = keras.layers.Reshape((1, 3, 1), name = 'Res26339', )(Loc91085)
PRe47555 = keras.layers.PReLU(name = 'PRe47555', )(Res26339)
Up_8548 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_8548', )(PRe47555)
Res70055 = keras.layers.Reshape((2, 6), name = 'Res70055', )(Up_8548)
Glo74990 = keras.layers.GlobalAveragePooling1D(name = 'Glo74990', )(Res70055)
Res76861 = keras.layers.Reshape((6, 1), name = 'Res76861', )(Glo74990)
Res93830 = keras.layers.Reshape((6, 1, 1), name = 'Res93830', )(Res76861)
Glo18157 = keras.layers.GlobalMaxPool2D(name = 'Glo18157', )(Res93830)
model = tf.keras.models.Model(inputs=[in0Loc91085], outputs=Glo18157)
w = model.get_layer('Loc91085').get_weights() 
w[0] = np.array([[[0.4666, 0.0132, 0.0115], [0.9601, 0.2946, 0.7179], [0.4478, 0.3024, 0.2308], [0.3857, 0.9294, 0.1705]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc91085').set_weights(w) 
w = model.get_layer('PRe47555').get_weights() 
w[0] = np.array([[[0.8206], [0.41], [0.0953]]])
model.get_layer('PRe47555').set_weights(w) 
in0Loc91085 = tf.constant([[[0.7137, 0.4011], [0.7066, 0.4376]]])
print (np.array2string(model.predict([in0Loc91085],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo18157.png')

LLoc91085 = locally_connected1D_layer([[[0.7137, 0.4011], [0.7066, 0.4376]]], 2,[[[0.4666, 0.0132, 0.0115], [0.9601, 0.2946, 0.7179], [0.4478, 0.3024, 0.2308], [0.3857, 0.9294, 0.1705]]],[[0, 0, 0]], 1, Loc91085), 
LRes26339 = reshape_layer(Loc91085, [1, 3, 1], Res26339), 
LPRe47555 = prelu_layer(Res26339, [[[0.8206], [0.41], [0.0953]]], PRe47555), 
LUp_8548 = up_sampling2D_layer(PRe47555, 2, 2, Up_8548), 
LRes70055 = reshape_layer(Up_8548, [2, 6], Res70055), 
LGlo74990 = global_average_pooling1D_layer(Res70055, Glo74990), 
LRes76861 = reshape_layer(Glo74990, [6, 1], Res76861), 
LRes93830 = reshape_layer(Res76861, [6, 1, 1], Res93830), 
LGlo18157 = global_max_pool2D_layer(Res93830, Glo18157), 
exec_layers([LLoc91085,LRes26339,LPRe47555,LUp_8548,LRes70055,LGlo74990,LRes76861,LRes93830,LGlo18157],["Loc91085","Res26339","PRe47555","Up_8548","Res70055","Glo74990","Res76861","Res93830","Glo18157"],Glo18157,"Glo18157")

Actual (Unparsed): [[1.2033063]]

Expected (Unparsed): [[1.2033063300000002]]

Actual:   [[1.2034]]

Expected: [[1.2034]]