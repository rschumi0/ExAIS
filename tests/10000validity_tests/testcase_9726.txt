import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max52520 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max52520 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con52383 = tf.keras.layers.Input(shape=([4, 3, 1, 1]))
in0Mul37727 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Mul37727 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Max52520 = keras.layers.Maximum(name = 'Max52520', )([in0Max52520,in1Max52520])
Zer8788 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer8788', )(Max52520)
Res11189 = keras.layers.Reshape((4, 3, 1, 1), name = 'Res11189', )(Zer8788)
Con52383 = keras.layers.Concatenate(axis=4, name = 'Con52383', )([Res11189,in0Con52383])
Mul37727 = keras.layers.Multiply(name = 'Mul37727', )([in0Mul37727,in1Mul37727])
Zer63270 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (0, 0)), name = 'Zer63270', )(Mul37727)
Add82955 = keras.layers.Add(name = 'Add82955', )([Con52383,Zer63270])
model = tf.keras.models.Model(inputs=[in0Max52520,in1Max52520,in0Con52383,in0Mul37727,in1Mul37727], outputs=Add82955)
in0Max52520 = tf.constant([[[[0.548]], [[0.7889]]]])
in1Max52520 = tf.constant([[[[0.7984]], [[0.403]]]])
in0Con52383 = tf.constant([[[[[0.9039]], [[0.1887]], [[0.3162]]], [[[0.183]], [[0.6889]], [[0.5814]]], [[[0.3435]], [[0.6567]], [[0.921]]], [[[0.4615]], [[0.9386]], [[0.7863]]]]])
in0Mul37727 = tf.constant([[[[[0.5001, 0.6009]]], [[[0.0121, 0.8131]]]]])
in1Mul37727 = tf.constant([[[[[0.57, 0.6399]]], [[[0.5827, 0.5684]]]]])
print (np.array2string(model.predict([in0Max52520,in1Max52520,in0Con52383,in0Mul37727,in1Mul37727],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add82955.png')

LMax52520 = maximum_layer([[[[[0.548]], [[0.7889]]]], [[[[0.7984]], [[0.403]]]]], Max52520), 
LZer8788 = zero_padding2D_layer(Max52520, 1, 1, 1, 1, Zer8788), 
LRes11189 = reshape_layer(Zer8788, [4, 3, 1, 1], Res11189), 
LCon52383 = concatenate_layer([Res11189,[[[[[0.9039]], [[0.1887]], [[0.3162]]], [[[0.183]], [[0.6889]], [[0.5814]]], [[[0.3435]], [[0.6567]], [[0.921]]], [[[0.4615]], [[0.9386]], [[0.7863]]]]]], 4, Con52383), 
LMul37727 = multiply_layer([[[[[[0.5001, 0.6009]]], [[[0.0121, 0.8131]]]]], [[[[[0.57, 0.6399]]], [[[0.5827, 0.5684]]]]]], Mul37727), 
LZer63270 = zero_padding3D_layer(Mul37727, 2, 0, 2, 0, 0, 0, Zer63270), 
LAdd82955 = add_layer([Con52383,Zer63270], Add82955), 
exec_layers([LMax52520,LZer8788,LRes11189,LCon52383,LMul37727,LZer63270,LAdd82955],["Max52520","Zer8788","Res11189","Con52383","Mul37727","Zer63270","Add82955"],Add82955,"Add82955")

Actual (Unparsed): [[[[[0.0000000, 0.9039000]], [[0.0000000, 0.1887000]], [[0.0000000, 0.3162000]]], [[[0.0000000, 0.1830000]], [[0.7984000, 0.6889000]], [[0.0000000, 0.5814000]]], [[[0.0000000, 0.3435000]], [[0.7889000, 0.6567000]], [[0.2850570, 1.3055159]]], [[[0.0000000, 0.4615000]], [[0.0000000, 0.9386000]], [[0.0070507, 1.2484661]]]]]

Expected (Unparsed): [[[[[0,0.9039]],[[0,0.1887]],[[0,0.3162]]],[[[0,0.183]],[[0.7984,0.6889]],[[0,0.5814]]],[[[0,0.3435]],[[0.7889,0.6567]],[[0.28505699999999995,1.30551591]]],[[[0,0.4615]],[[0,0.9386]],[[0.007050669999999999,1.24846604]]]]]

Actual:   [[[[[0, 0.9039]], [[0, 0.1887]], [[0, 0.3162]]], [[[0, 0.183]], [[0.7984, 0.6889]], [[0, 0.5814]]], [[[0, 0.3435]], [[0.7889, 0.6567]], [[0.2851, 1.3056]]], [[[0, 0.4615]], [[0, 0.9386]], [[0.0071, 1.2485]]]]]

Expected: [[[[[0, 0.9039]], [[0, 0.1887]], [[0, 0.3162]]], [[[0, 0.183]], [[0.7984, 0.6889]], [[0, 0.5814]]], [[[0, 0.3435]], [[0.7889, 0.6567]], [[0.2851, 1.3056]]], [[[0, 0.4615]], [[0, 0.9386]], [[0.0071, 1.2485]]]]]