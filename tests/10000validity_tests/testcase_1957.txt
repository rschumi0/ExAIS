import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max3855 = tf.keras.layers.Input(shape=([1, 2]))
in0Min17643 = tf.keras.layers.Input(shape=([1, 1]))
in1Min17643 = tf.keras.layers.Input(shape=([1, 1]))
in0Con363 = tf.keras.layers.Input(shape=([1, 1]))

Max3855 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max3855', )(in0Max3855)
Min17643 = keras.layers.Minimum(name = 'Min17643', )([in0Min17643,in1Min17643])
Con363 = keras.layers.Concatenate(axis=2, name = 'Con363', )([Min17643,in0Con363])
Mul82959 = keras.layers.Multiply(name = 'Mul82959', )([Max3855,Con363])
Res28367 = keras.layers.Reshape((1, 2, 1), name = 'Res28367', )(Mul82959)
Glo67514 = keras.layers.GlobalAveragePooling2D(name = 'Glo67514', )(Res28367)
model = tf.keras.models.Model(inputs=[in0Max3855,in0Min17643,in1Min17643,in0Con363], outputs=Glo67514)
in0Max3855 = tf.constant([[[1.6987, 1.3185]]])
in0Min17643 = tf.constant([[[0.7304]]])
in1Min17643 = tf.constant([[[0.3929]]])
in0Con363 = tf.constant([[[0.1085]]])
print (np.array2string(model.predict([in0Max3855,in0Min17643,in1Min17643,in0Con363],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo67514.png')

LMax3855 = max_pool1D_layer([[[1.6987, 1.3185]]], 1, Max3855), 
LMin17643 = minimum_layer([[[[0.7304]]], [[[0.3929]]]], Min17643), 
LCon363 = concatenate_layer([Min17643,[[[0.1085]]]], 2, Con363), 
LMul82959 = multiply_layer([Max3855,Con363], Mul82959), 
LRes28367 = reshape_layer(Mul82959, [1, 2, 1], Res28367), 
LGlo67514 = global_average_pooling2D_layer(Res28367, Glo67514), 
exec_layers([LMax3855,LMin17643,LCon363,LMul82959,LRes28367,LGlo67514],["Max3855","Min17643","Con363","Mul82959","Res28367","Glo67514"],Glo67514,"Glo67514")

Actual (Unparsed): [[0.4052382]]

Expected (Unparsed): [[0.40523824]]

Actual:   [[0.4053]]

Expected: [[0.4053]]