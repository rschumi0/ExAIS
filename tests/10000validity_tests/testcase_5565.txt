import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min64190 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min64190 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con15466 = tf.keras.layers.Input(shape=([1, 2, 2]))

Min64190 = keras.layers.Minimum(name = 'Min64190', )([in0Min64190,in1Min64190])
Res83699 = keras.layers.Reshape((1, 2), name = 'Res83699', )(Min64190)
Loc35422 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc35422', )(Res83699)
Con15466 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(1, 1), padding='same', name = 'Con15466', )(in0Con15466)
Res67793 = keras.layers.Reshape((1, 4), name = 'Res67793', )(Con15466)
Dot52250 = keras.layers.Dot(axes=(2, 2), name = 'Dot52250', )([Loc35422,Res67793])
model = tf.keras.models.Model(inputs=[in0Min64190,in1Min64190,in0Con15466], outputs=Dot52250)
w = model.get_layer('Loc35422').get_weights() 
w[0] = np.array([[[0.4037, 0.918, 0.5516, 0.6038], [0.5963, 0.1897, 0.674, 0.7736]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc35422').set_weights(w) 
w = model.get_layer('Con15466').get_weights() 
w[0] = np.array([[[[0.6968, 0.4578], [0.711, 0.4017]]]])
w[1] = np.array([0, 0])
model.get_layer('Con15466').set_weights(w) 
in0Min64190 = tf.constant([[[[0.5004, 0.5431]]]])
in1Min64190 = tf.constant([[[[0.4782, 0.0353]]]])
in0Con15466 = tf.constant([[[[0.7081, 0.498], [0.8849, 0.035]]]])
print (np.array2string(model.predict([in0Min64190,in1Min64190,in0Con15466],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot52250.png')

LMin64190 = minimum_layer([[[[[0.5004, 0.5431]]]], [[[[0.4782, 0.0353]]]]], Min64190), 
LRes83699 = reshape_layer(Min64190, [1, 2], Res83699), 
LLoc35422 = locally_connected1D_layer(Res83699, 1,[[[0.4037, 0.918, 0.5516, 0.6038], [0.5963, 0.1897, 0.674, 0.7736]]],[[0, 0, 0, 0]], 1, Loc35422), 
LCon15466 = conv2D_transpose_layer([[[[0.7081, 0.498], [0.8849, 0.035]]]], 1, 1,[[[[0.6968, 0.4578], [0.711, 0.4017]]]],[0, 0], 1, 1, true, Con15466), 
LRes67793 = reshape_layer(Con15466, [1, 4], Res67793), 
LDot52250 = dot_layer(Loc35422,Res67793, 2, 2, Dot52250), 
exec_layers([LMin64190,LRes83699,LLoc35422,LCon15466,LRes67793,LDot52250],["Min64190","Res83699","Loc35422","Con15466","Res67793","Dot52250"],Dot52250,"Dot52250")

Actual (Unparsed): [[[0.8531985]]]

Expected (Unparsed): [[[0.8531985102323658]]]

Actual:   [[[0.8532]]]

Expected: [[[0.8532]]]