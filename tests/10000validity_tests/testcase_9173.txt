import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul50024 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul50024 = tf.keras.layers.Input(shape=([1, 2]))
in0Min87024 = tf.keras.layers.Input(shape=([2, 2]))
in1Min87024 = tf.keras.layers.Input(shape=([2, 2]))
in0Cro30025 = tf.keras.layers.Input(shape=([1, 3, 3, 1]))
in0Con97974 = tf.keras.layers.Input(shape=([2]))

Mul50024 = keras.layers.Multiply(name = 'Mul50024', )([in0Mul50024,in1Mul50024])
Min87024 = keras.layers.Minimum(name = 'Min87024', )([in0Min87024,in1Min87024])
Fla90391 = keras.layers.Flatten(name = 'Fla90391', )(Min87024)
Cro30025 = keras.layers.Cropping3D(cropping=((0, 0), (0, 1), (0, 2)), name = 'Cro30025', )(in0Cro30025)
Res96635 = keras.layers.Reshape((1, 2, 1), name = 'Res96635', )(Cro30025)
Res25757 = keras.layers.Reshape((1, 2), name = 'Res25757', )(Res96635)
Glo8696 = keras.layers.GlobalAveragePooling1D(name = 'Glo8696', )(Res25757)
Con97974 = keras.layers.Concatenate(axis=1, name = 'Con97974', )([Glo8696,in0Con97974])
Min69230 = keras.layers.Minimum(name = 'Min69230', )([Fla90391,Con97974])
Res59539 = keras.layers.Reshape((4, 1), name = 'Res59539', )(Min69230)
Sep2683 = keras.layers.SeparableConv1D(2, (2),strides=(3), padding='valid', name = 'Sep2683', )(Res59539)
Add30134 = keras.layers.Add(name = 'Add30134', )([Mul50024,Sep2683])
model = tf.keras.models.Model(inputs=[in0Mul50024,in1Mul50024,in0Min87024,in1Min87024,in0Cro30025,in0Con97974], outputs=Add30134)
w = model.get_layer('Sep2683').get_weights() 
w[0] = np.array([[[0.3752]], [[0.2242]]])
w[1] = np.array([[[0.9502, 0.8614]]])
w[2] = np.array([0, 0])
model.get_layer('Sep2683').set_weights(w) 
in0Mul50024 = tf.constant([[[0.2771, 0.994]]])
in1Mul50024 = tf.constant([[[0.0454, 0.7644]]])
in0Min87024 = tf.constant([[[0.4533, 0.1038], [0.4817, 0.8267]]])
in1Min87024 = tf.constant([[[0.9197, 0.3804], [0.2082, 0.7366]]])
in0Cro30025 = tf.constant([[[[[1.8577], [1.5594], [1.1653]], [[1.1222], [1.3674], [1.2821]], [[1.1984], [1.4235], [1.0401]]]]])
in0Con97974 = tf.constant([[0.5031, 0.0635]])
print (np.array2string(model.predict([in0Mul50024,in1Mul50024,in0Min87024,in1Min87024,in0Cro30025,in0Con97974],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add30134.png')

LMul50024 = multiply_layer([[[[0.2771, 0.994]]], [[[0.0454, 0.7644]]]], Mul50024), 
LMin87024 = minimum_layer([[[[0.4533, 0.1038], [0.4817, 0.8267]]], [[[0.9197, 0.3804], [0.2082, 0.7366]]]], Min87024), 
LFla90391 = flatten_layer(Min87024, Fla90391), 
LCro30025 = cropping3D_layer([[[[[1.8577], [1.5594], [1.1653]], [[1.1222], [1.3674], [1.2821]], [[1.1984], [1.4235], [1.0401]]]]], 0, 0, 0, 1, 0, 2, Cro30025), 
LRes96635 = reshape_layer(Cro30025, [1, 2, 1], Res96635), 
LRes25757 = reshape_layer(Res96635, [1, 2], Res25757), 
LGlo8696 = global_average_pooling1D_layer(Res25757, Glo8696), 
LCon97974 = concatenate_layer([Glo8696,[[0.5031, 0.0635]]], 1, Con97974), 
LMin69230 = minimum_layer([Fla90391,Con97974], Min69230), 
LRes59539 = reshape_layer(Min69230, [4, 1], Res59539), 
LSep2683 = separable_conv1D_layer(Res59539, 2,[[[[0.3752]], [[0.2242]]],[[[0.9502, 0.8614]]]],[0, 0], 3, false, Sep2683), 
LAdd30134 = add_layer([Mul50024,Sep2683], Add30134), 
exec_layers([LMul50024,LMin87024,LFla90391,LCro30025,LRes96635,LRes25757,LGlo8696,LCon97974,LMin69230,LRes59539,LSep2683,LAdd30134],["Mul50024","Min87024","Fla90391","Cro30025","Res96635","Res25757","Glo8696","Con97974","Min69230","Res59539","Sep2683","Add30134"],Add30134,"Add30134")

Actual (Unparsed): [[[0.1963016, 0.9263654]]]

Expected (Unparsed): [[[0.19630162402399998,0.926365393368]]]

Actual:   [[[0.1964, 0.9264]]]

Expected: [[[0.1964, 0.9264]]]