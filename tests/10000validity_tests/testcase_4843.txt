import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep38391 = tf.keras.layers.Input(shape=([1, 2, 1]))

Sep38391 = keras.layers.SeparableConv2D(2, (1, 2),strides=(1, 1), padding='valid', name = 'Sep38391', )(in0Sep38391)
Res58442 = keras.layers.Reshape((1, 2), name = 'Res58442', )(Sep38391)
Ave25107 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave25107', )(Res58442)
Per95948 = keras.layers.Permute((1,2), name = 'Per95948',)(Ave25107)
model = tf.keras.models.Model(inputs=[in0Sep38391], outputs=Per95948)
w = model.get_layer('Sep38391').get_weights() 
w[0] = np.array([[[[0.4439]], [[0.7724]]]])
w[1] = np.array([[[[0.5507, 0.644]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep38391').set_weights(w) 
in0Sep38391 = tf.constant([[[[0.7524], [0.2969]]]])
print (np.array2string(model.predict([in0Sep38391],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per95948.png')

LSep38391 = separable_conv2D_layer([[[[0.7524], [0.2969]]]], 1, 2,[[[[[0.4439]], [[0.7724]]]],[[[[0.5507, 0.644]]]]],[0, 0], 1, 1, false, Sep38391), 
LRes58442 = reshape_layer(Sep38391, [1, 2], Res58442), 
LAve25107 = average_pooling1D_layer(Res58442, 1, 1, true, Ave25107), 
LPer95948 = permute_layer(Ave25107, 1,2, Per95948), 
exec_layers([LSep38391,LRes58442,LAve25107,LPer95948],["Sep38391","Res58442","Ave25107","Per95948"],Per95948,"Per95948")

Actual (Unparsed): [[[0.3102181, 0.3627754]]]

Expected (Unparsed): [[[0.31021807714399996,0.36277545248]]]

Actual:   [[[0.3103, 0.3628]]]

Expected: [[[0.3103, 0.3628]]]