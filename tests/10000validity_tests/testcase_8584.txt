import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot80942 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot80942 = tf.keras.layers.Input(shape=([3, 2]))
in0Max25305 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max25305 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Con63654 = tf.keras.layers.Input(shape=([3, 8, 2]))
in0Mul76096 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul76096 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con2689 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Sep33431 = tf.keras.layers.Input(shape=([2, 1, 1]))

Dot80942 = keras.layers.Dot(axes=(2, 2), name = 'Dot80942', )([in0Dot80942,in1Dot80942])
Res10607 = keras.layers.Reshape((3, 3, 1), name = 'Res10607', )(Dot80942)
Up_2965 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_2965', )(Res10607)
Res46423 = keras.layers.Reshape((3, 3), name = 'Res46423', )(Up_2965)
Max25305 = keras.layers.Maximum(name = 'Max25305', )([in0Max25305,in1Max25305])
Res37773 = keras.layers.Reshape((2, 2, 4), name = 'Res37773', )(Max25305)
Res86906 = keras.layers.Reshape((2, 8), name = 'Res86906', )(Res37773)
Zer43098 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer43098', )(Res86906)
Dot94695 = keras.layers.Dot(axes=(1, 1), name = 'Dot94695', )([Res46423,Zer43098])
Res80246 = keras.layers.Reshape((3, 8, 1), name = 'Res80246', )(Dot94695)
Con63654 = keras.layers.Concatenate(axis=3, name = 'Con63654', )([Res80246,in0Con63654])
Mul76096 = keras.layers.Multiply(name = 'Mul76096', )([in0Mul76096,in1Mul76096])
Mas28317 = keras.layers.Masking(mask_value=1, name = 'Mas28317', )(Mul76096)
Con2689 = keras.layers.Concatenate(axis=3, name = 'Con2689', )([Mas28317,in0Con2689])
Sep33431 = keras.layers.SeparableConv2D(3, (1, 1),strides=(1, 1), padding='valid', name = 'Sep33431', )(in0Sep33431)
Add60818 = keras.layers.Add(name = 'Add60818', )([Con2689,Sep33431])
Zer55232 = keras.layers.ZeroPadding2D(padding=((1, 0), (7, 0)), name = 'Zer55232', )(Add60818)
Min53714 = keras.layers.Minimum(name = 'Min53714', )([Con63654,Zer55232])
model = tf.keras.models.Model(inputs=[in0Dot80942,in1Dot80942,in0Max25305,in1Max25305,in0Con63654,in0Mul76096,in1Mul76096,in0Con2689,in0Sep33431], outputs=Min53714)
w = model.get_layer('Sep33431').get_weights() 
w[0] = np.array([[[[0.8129]]]])
w[1] = np.array([[[[0.6621, 0.0886, 0.3824]]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep33431').set_weights(w) 
in0Dot80942 = tf.constant([[[0.2774, 0.3473], [0.1543, 0.9583], [0.1686, 0.2145]]])
in1Dot80942 = tf.constant([[[0.9597, 0.5133], [0.0585, 0.08], [0.905, 0.601]]])
in0Max25305 = tf.constant([[[[[0.0717, 0.3718], [0.754, 0.1361]], [[0.1749, 0.3856], [0.2593, 0.2632]]], [[[0.8366, 0.3482], [0.6907, 0.0109]], [[0.0894, 0.964], [0.4989, 0.3961]]]]])
in1Max25305 = tf.constant([[[[[0.1387, 0.1921], [0.8981, 0.2973]], [[0.074, 0.0865], [0.9564, 0.5075]]], [[[0.6865, 0.8884], [0.1194, 0.2566]], [[0.874, 0.2026], [0.9626, 0.1484]]]]])
in0Con63654 = tf.constant([[[[0.9394, 0.1005], [0.9712, 0.0193], [0.0072, 0.3448], [0.5361, 0.3123], [0.9761, 0.7254], [0.7174, 0.117], [0.441, 0.4228], [0.5619, 0.3998]], [[0.455, 0.8006], [0.9502, 0.2286], [0.5487, 0.591], [0.0115, 0.1851], [0.7027, 0.0548], [0.0722, 0.2845], [0.3932, 0.1275], [0.7273, 0.1397]], [[0.6845, 0.9924], [0.9322, 0.1139], [0.3544, 0.3522], [0.9798, 0.114], [0.2097, 0.9104], [0.8506, 0.4966], [0.0727, 0.221], [0.6977, 0.2815]]]])
in0Mul76096 = tf.constant([[[[0.6227]], [[0.0124]]]])
in1Mul76096 = tf.constant([[[[0.3629]], [[0.895]]]])
in0Con2689 = tf.constant([[[[0.6091, 0.5934]], [[0.9922, 0.8486]]]])
in0Sep33431 = tf.constant([[[[0.0961]], [[0.4927]]]])
print (np.array2string(model.predict([in0Dot80942,in1Dot80942,in0Max25305,in1Max25305,in0Con63654,in0Mul76096,in1Mul76096,in0Con2689,in0Sep33431],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min53714.png')

LDot80942 = dot_layer([[[0.2774, 0.3473], [0.1543, 0.9583], [0.1686, 0.2145]]], [[[0.9597, 0.5133], [0.0585, 0.08], [0.905, 0.601]]], 2, 2, Dot80942), 
LRes10607 = reshape_layer(Dot80942, [3, 3, 1], Res10607), 
LUp_2965 = up_sampling2D_layer(Res10607, 1, 1, Up_2965), 
LRes46423 = reshape_layer(Up_2965, [3, 3], Res46423), 
LMax25305 = maximum_layer([[[[[[0.0717, 0.3718], [0.754, 0.1361]], [[0.1749, 0.3856], [0.2593, 0.2632]]], [[[0.8366, 0.3482], [0.6907, 0.0109]], [[0.0894, 0.964], [0.4989, 0.3961]]]]], [[[[[0.1387, 0.1921], [0.8981, 0.2973]], [[0.074, 0.0865], [0.9564, 0.5075]]], [[[0.6865, 0.8884], [0.1194, 0.2566]], [[0.874, 0.2026], [0.9626, 0.1484]]]]]], Max25305), 
LRes37773 = reshape_layer(Max25305, [2, 2, 4], Res37773), 
LRes86906 = reshape_layer(Res37773, [2, 8], Res86906), 
LZer43098 = zero_padding1D_layer(Res86906, 1, 0, Zer43098), 
LDot94695 = dot_layer(Res46423,Zer43098, 1, 1, Dot94695), 
LRes80246 = reshape_layer(Dot94695, [3, 8, 1], Res80246), 
LCon63654 = concatenate_layer([Res80246,[[[[0.9394, 0.1005], [0.9712, 0.0193], [0.0072, 0.3448], [0.5361, 0.3123], [0.9761, 0.7254], [0.7174, 0.117], [0.441, 0.4228], [0.5619, 0.3998]], [[0.455, 0.8006], [0.9502, 0.2286], [0.5487, 0.591], [0.0115, 0.1851], [0.7027, 0.0548], [0.0722, 0.2845], [0.3932, 0.1275], [0.7273, 0.1397]], [[0.6845, 0.9924], [0.9322, 0.1139], [0.3544, 0.3522], [0.9798, 0.114], [0.2097, 0.9104], [0.8506, 0.4966], [0.0727, 0.221], [0.6977, 0.2815]]]]], 3, Con63654), 
LMul76096 = multiply_layer([[[[[0.6227]], [[0.0124]]]], [[[[0.3629]], [[0.895]]]]], Mul76096), 
LMas28317 = masking_layer(Mul76096, 1, Mas28317), 
LCon2689 = concatenate_layer([Mas28317,[[[[0.6091, 0.5934]], [[0.9922, 0.8486]]]]], 3, Con2689), 
LSep33431 = separable_conv2D_layer([[[[0.0961]], [[0.4927]]]], 1, 1,[[[[[0.8129]]]],[[[[0.6621, 0.0886, 0.3824]]]]],[0, 0, 0], 1, 1, false, Sep33431), 
LAdd60818 = add_layer([Con2689,Sep33431], Add60818), 
LZer55232 = zero_padding2D_layer(Add60818, 1, 0, 7, 0, Zer55232), 
LMin53714 = minimum_layer([Con63654,Zer55232], Min53714), 
exec_layers([LDot80942,LRes10607,LUp_2965,LRes46423,LMax25305,LRes37773,LRes86906,LZer43098,LDot94695,LRes80246,LCon63654,LMul76096,LMas28317,LCon2689,LSep33431,LAdd60818,LZer55232,LMin53714],["Dot80942","Res10607","Up_2965","Res46423","Max25305","Res37773","Res86906","Zer43098","Dot94695","Res80246","Con63654","Mul76096","Mas28317","Con2689","Sep33431","Add60818","Zer55232","Min53714"],Min53714,"Min53714")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0541918, 0.6160214, 0.1397000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000], [0.2762795, 0.6977000, 0.2815000]]]]

Expected (Unparsed): [[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0.054191804035,0.616021404534,0.1397]],[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0.276279531043,0.6977,0.2815]]]]

Actual:   [[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0.0542, 0.6161, 0.1397]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0.2763, 0.6977, 0.2815]]]]

Expected: [[[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0.0542, 0.6161, 0.1397]], [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0.2763, 0.6977, 0.2815]]]]