import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot68947 = tf.keras.layers.Input(shape=([2]))
in1Dot68947 = tf.keras.layers.Input(shape=([2]))
in0Dot82308 = tf.keras.layers.Input(shape=([3]))
in1Dot82308 = tf.keras.layers.Input(shape=([3]))
in0Min92304 = tf.keras.layers.Input(shape=([1, 1]))
in1Min92304 = tf.keras.layers.Input(shape=([1, 1]))

Dot68947 = keras.layers.Dot(axes=(1, 1), name = 'Dot68947', )([in0Dot68947,in1Dot68947])
Dot82308 = keras.layers.Dot(axes=(1, 1), name = 'Dot82308', )([in0Dot82308,in1Dot82308])
Ave45666 = keras.layers.Average(name = 'Ave45666', )([Dot68947,Dot82308])
Res12953 = keras.layers.Reshape((1, 1), name = 'Res12953', )(Ave45666)
Min92304 = keras.layers.Minimum(name = 'Min92304', )([in0Min92304,in1Min92304])
Sub42135 = keras.layers.Subtract(name = 'Sub42135', )([Res12953,Min92304])
Res8749 = keras.layers.Reshape((1, 1, 1), name = 'Res8749', )(Sub42135)
Res60302 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res60302', )(Res8749)
Con40263 = keras.layers.Conv3D(2, (1, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con40263', )(Res60302)
model = tf.keras.models.Model(inputs=[in0Dot68947,in1Dot68947,in0Dot82308,in1Dot82308,in0Min92304,in1Min92304], outputs=Con40263)
w = model.get_layer('Con40263').get_weights() 
w[0] = np.array([[[[[0.6646, 0.3414]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con40263').set_weights(w) 
in0Dot68947 = tf.constant([[0.7012, 0.4481]])
in1Dot68947 = tf.constant([[0.8505, 0.1294]])
in0Dot82308 = tf.constant([[0.0188, 0.8435, 0.5346]])
in1Dot82308 = tf.constant([[0.5689, 0.2609, 0.3242]])
in0Min92304 = tf.constant([[[0.7877]]])
in1Min92304 = tf.constant([[[0.2443]]])
print (np.array2string(model.predict([in0Dot68947,in1Dot68947,in0Dot82308,in1Dot82308,in0Min92304,in1Min92304],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con40263.png')

LDot68947 = dot_layer([[0.7012, 0.4481]], [[0.8505, 0.1294]], 1, 1, Dot68947), 
LDot82308 = dot_layer([[0.0188, 0.8435, 0.5346]], [[0.5689, 0.2609, 0.3242]], 1, 1, Dot82308), 
LAve45666 = average_layer([Dot68947,Dot82308], Ave45666), 
LRes12953 = reshape_layer(Ave45666, [1, 1], Res12953), 
LMin92304 = minimum_layer([[[[0.7877]]], [[[0.2443]]]], Min92304), 
LSub42135 = subtract_layer(Res12953,Min92304, Sub42135), 
LRes8749 = reshape_layer(Sub42135, [1, 1, 1], Res8749), 
LRes60302 = reshape_layer(Res8749, [1, 1, 1, 1], Res60302), 
LCon40263 = conv3D_layer(Res60302, 1, 1, 1,[[[[[0.6646, 0.3414]]]]],[0, 0], 1, 1, 1, false, 1, 1, 1, Con40263), 
exec_layers([LDot68947,LDot82308,LAve45666,LRes12953,LMin92304,LSub42135,LRes8749,LRes60302,LCon40263],["Dot68947","Dot82308","Ave45666","Res12953","Min92304","Sub42135","Res8749","Res60302","Con40263"],Con40263,"Con40263")

Actual (Unparsed): [[[[[0.1893567, 0.0972711]]]]]

Expected (Unparsed): [[[[[0.18935667891900004,0.09727109567100002]]]]]

Actual:   [[[[[0.1894, 0.0973]]]]]

Expected: [[[[[0.1894, 0.0973]]]]]