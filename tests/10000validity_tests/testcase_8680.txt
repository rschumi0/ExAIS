import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub7763 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub7763 = tf.keras.layers.Input(shape=([2, 3]))
in0Ave44300 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave44300 = tf.keras.layers.Input(shape=([2, 1]))
in0Con81339 = tf.keras.layers.Input(shape=([2, 2]))

Sub7763 = keras.layers.Subtract(name = 'Sub7763', )([in0Sub7763,in1Sub7763])
Ave44300 = keras.layers.Average(name = 'Ave44300', )([in0Ave44300,in1Ave44300])
Con81339 = keras.layers.Concatenate(axis=2, name = 'Con81339', )([Ave44300,in0Con81339])
Ave58715 = keras.layers.Average(name = 'Ave58715', )([Sub7763,Con81339])
model = tf.keras.models.Model(inputs=[in0Sub7763,in1Sub7763,in0Ave44300,in1Ave44300,in0Con81339], outputs=Ave58715)
in0Sub7763 = tf.constant([[[0.0413, 0.22, 0.0772], [0.3833, 0.4374, 0.9071]]])
in1Sub7763 = tf.constant([[[0.2879, 0.0171, 0.6378], [0.4563, 0.1091, 0.9951]]])
in0Ave44300 = tf.constant([[[0.1984], [0.9243]]])
in1Ave44300 = tf.constant([[[0.6175], [0.5369]]])
in0Con81339 = tf.constant([[[0.6688, 0.7944], [0.9182, 0.6611]]])
print (np.array2string(model.predict([in0Sub7763,in1Sub7763,in0Ave44300,in1Ave44300,in0Con81339],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave58715.png')

LSub7763 = subtract_layer([[[0.0413, 0.22, 0.0772], [0.3833, 0.4374, 0.9071]]], [[[0.2879, 0.0171, 0.6378], [0.4563, 0.1091, 0.9951]]], Sub7763), 
LAve44300 = average_layer([[[[0.1984], [0.9243]]], [[[0.6175], [0.5369]]]], Ave44300), 
LCon81339 = concatenate_layer([Ave44300,[[[0.6688, 0.7944], [0.9182, 0.6611]]]], 2, Con81339), 
LAve58715 = average_layer([Sub7763,Con81339], Ave58715), 
exec_layers([LSub7763,LAve44300,LCon81339,LAve58715],["Sub7763","Ave44300","Con81339","Ave58715"],Ave58715,"Ave58715")

Actual (Unparsed): [[[0.0806750, 0.4358500, 0.1169000], [0.3288000, 0.6232500, 0.2865500]]]

Expected (Unparsed): [[[0.08067500000000002,0.43584999999999996,0.1169],[0.3288,0.6232500000000001,0.28655]]]

Actual:   [[[0.0807, 0.4359, 0.1169], [0.3288, 0.6233, 0.2866]]]

Expected: [[[0.0807, 0.4359, 0.1169], [0.3288, 0.6233, 0.2866]]]