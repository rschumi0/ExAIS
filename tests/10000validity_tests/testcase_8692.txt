import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub7314 = tf.keras.layers.Input(shape=([2]))
in1Sub7314 = tf.keras.layers.Input(shape=([2]))
in0Glo25749 = tf.keras.layers.Input(shape=([1, 2]))

Sub7314 = keras.layers.Subtract(name = 'Sub7314', )([in0Sub7314,in1Sub7314])
Glo25749 = keras.layers.GlobalMaxPool1D(name = 'Glo25749', )(in0Glo25749)
Max80223 = keras.layers.Maximum(name = 'Max80223', )([Sub7314,Glo25749])
Mas23234 = keras.layers.Masking(mask_value=1, name = 'Mas23234', )(Max80223)
Res16173 = keras.layers.Reshape((2, 1), name = 'Res16173', )(Mas23234)
Glo33683 = keras.layers.GlobalAveragePooling1D(name = 'Glo33683', )(Res16173)
model = tf.keras.models.Model(inputs=[in0Sub7314,in1Sub7314,in0Glo25749], outputs=Glo33683)
in0Sub7314 = tf.constant([[0.238, 0.7487]])
in1Sub7314 = tf.constant([[0.5878, 0.3834]])
in0Glo25749 = tf.constant([[[1.7382, 1.3743]]])
print (np.array2string(model.predict([in0Sub7314,in1Sub7314,in0Glo25749],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo33683.png')

LSub7314 = subtract_layer([[0.238, 0.7487]], [[0.5878, 0.3834]], Sub7314), 
LGlo25749 = global_max_pool1D_layer([[[1.7382, 1.3743]]], Glo25749), 
LMax80223 = maximum_layer([Sub7314,Glo25749], Max80223), 
LMas23234 = masking_layer(Max80223, 1, Mas23234), 
LRes16173 = reshape_layer(Mas23234, [2, 1], Res16173), 
LGlo33683 = global_average_pooling1D_layer(Res16173, Glo33683), 
exec_layers([LSub7314,LGlo25749,LMax80223,LMas23234,LRes16173,LGlo33683],["Sub7314","Glo25749","Max80223","Mas23234","Res16173","Glo33683"],Glo33683,"Glo33683")

Actual (Unparsed): [[1.5562500]]

Expected (Unparsed): [[1.55625]]

Actual:   [[1.5563]]

Expected: [[1.5563]]