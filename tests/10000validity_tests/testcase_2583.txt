import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave76447 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave76447 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Ave76447 = keras.layers.Average(name = 'Ave76447', )([in0Ave76447,in1Ave76447])
Res15805 = keras.layers.Reshape((1, 1, 4), name = 'Res15805', )(Ave76447)
Res24304 = keras.layers.Reshape((1, 4), name = 'Res24304', )(Res15805)
Glo53311 = keras.layers.GlobalAveragePooling1D(name = 'Glo53311', )(Res24304)
Res21995 = keras.layers.Reshape((4, 1), name = 'Res21995', )(Glo53311)
Res26073 = keras.layers.Reshape((4, 1, 1), name = 'Res26073', )(Res21995)
Glo52653 = keras.layers.GlobalAveragePooling2D(name = 'Glo52653', )(Res26073)
model = tf.keras.models.Model(inputs=[in0Ave76447,in1Ave76447], outputs=Glo52653)
in0Ave76447 = tf.constant([[[[[0.7001, 0.0846], [0.4331, 0.4087]]]]])
in1Ave76447 = tf.constant([[[[[0.8216, 0.6954], [0.6623, 0.1303]]]]])
print (np.array2string(model.predict([in0Ave76447,in1Ave76447],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo52653.png')

LAve76447 = average_layer([[[[[[0.7001, 0.0846], [0.4331, 0.4087]]]]], [[[[[0.8216, 0.6954], [0.6623, 0.1303]]]]]], Ave76447), 
LRes15805 = reshape_layer(Ave76447, [1, 1, 4], Res15805), 
LRes24304 = reshape_layer(Res15805, [1, 4], Res24304), 
LGlo53311 = global_average_pooling1D_layer(Res24304, Glo53311), 
LRes21995 = reshape_layer(Glo53311, [4, 1], Res21995), 
LRes26073 = reshape_layer(Res21995, [4, 1, 1], Res26073), 
LGlo52653 = global_average_pooling2D_layer(Res26073, Glo52653), 
exec_layers([LAve76447,LRes15805,LRes24304,LGlo53311,LRes21995,LRes26073,LGlo52653],["Ave76447","Res15805","Res24304","Glo53311","Res21995","Res26073","Glo52653"],Glo52653,"Glo52653")

Actual (Unparsed): [[0.4920125]]

Expected (Unparsed): [[0.4920125]]

Actual:   [[0.4921]]

Expected: [[0.4921]]