import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot93274 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot93274 = tf.keras.layers.Input(shape=([3, 3]))

Dot93274 = keras.layers.Dot(axes=(1, 2), name = 'Dot93274', )([in0Dot93274,in1Dot93274])
GRU35296 = keras.layers.GRU(1,reset_after=True, recurrent_activation='sigmoid', name = 'GRU35296', )(Dot93274)
model = tf.keras.models.Model(inputs=[in0Dot93274,in1Dot93274], outputs=GRU35296)
w = model.get_layer('GRU35296').get_weights() 
w[0] = np.array([[1, 4, 8], [5, 6, 10], [4, 1, 2]])
w[1] = np.array([[7, 1, 4]])
w[2] = np.array([[8, 1, 6], [1, 4, 4]])
model.get_layer('GRU35296').set_weights(w) 
in0Dot93274 = tf.constant([[[0.4931, 0.4807, 0.5469], [0.0646, 0.0649, 0.472], [0.4133, 0.3004, 0.9921]]])
in1Dot93274 = tf.constant([[[0.1458, 0.5381, 0.0103], [0.3097, 0.3244, 0.9384], [0.5851, 0.5786, 0.6747]]])
print (np.array2string(model.predict([in0Dot93274,in1Dot93274],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='GRU35296.png')

LDot93274 = dot_layer([[[0.4931, 0.4807, 0.5469], [0.0646, 0.0649, 0.472], [0.4133, 0.3004, 0.9921]]], [[[0.1458, 0.5381, 0.0103], [0.3097, 0.3244, 0.9384], [0.5851, 0.5786, 0.6747]]], 1, 2, Dot93274), 
LGRU35296 = gru_layer(Dot93274,[[1, 4, 8], [5, 6, 10], [4, 1, 2]],[[7, 1, 4]],[[8, 1, 6], [1, 4, 4]], true, GRU35296), 
exec_layers([LDot93274,LGRU35296],["Dot93274","GRU35296"],GRU35296,"GRU35296")

Actual (Unparsed): [[0.0000020]]

Expected (Unparsed): [[2.031124811891773e-6]]

Actual:   [[0]]

Expected: [[0]]