import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo99824 = tf.keras.layers.Input(shape=([2, 1]))
in0Con1066 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot55308 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot55308 = tf.keras.layers.Input(shape=([2, 2]))
in0Min11913 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Min11913 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Ave3114 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave3114 = tf.keras.layers.Input(shape=([1, 1, 2]))

Glo99824 = keras.layers.GlobalAveragePooling1D(name = 'Glo99824', )(in0Glo99824)
Res63949 = keras.layers.Reshape((1, 1), name = 'Res63949', )(Glo99824)
Glo85854 = keras.layers.GlobalMaxPool1D(name = 'Glo85854', )(Res63949)
Res48435 = keras.layers.Reshape((1, 1), name = 'Res48435', )(Glo85854)
Zer57571 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer57571', )(Res48435)
Con1066 = keras.layers.Concatenate(axis=2, name = 'Con1066', )([Zer57571,in0Con1066])
Dot55308 = keras.layers.Dot(axes=(2, 1), name = 'Dot55308', )([in0Dot55308,in1Dot55308])
Ave33622 = keras.layers.Average(name = 'Ave33622', )([Con1066,Dot55308])
Min11913 = keras.layers.Minimum(name = 'Min11913', )([in0Min11913,in1Min11913])
Ave3114 = keras.layers.Average(name = 'Ave3114', )([in0Ave3114,in1Ave3114])
Zer66071 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer66071', )(Ave3114)
Ave42069 = keras.layers.Average(name = 'Ave42069', )([Min11913,Zer66071])
Res31623 = keras.layers.Reshape((2, 4), name = 'Res31623', )(Ave42069)
Dot26117 = keras.layers.Dot(axes=(1, 1), name = 'Dot26117', )([Ave33622,Res31623])
model = tf.keras.models.Model(inputs=[in0Glo99824,in0Con1066,in0Dot55308,in1Dot55308,in0Min11913,in1Min11913,in0Ave3114,in1Ave3114], outputs=Dot26117)
in0Glo99824 = tf.constant([[[1.9473], [1.7199]]])
in0Con1066 = tf.constant([[[0.5975], [0.153]]])
in0Dot55308 = tf.constant([[[0.8101, 0.0535], [0.7798, 0.8484]]])
in1Dot55308 = tf.constant([[[0.122, 0.3264], [0.9299, 0.8233]]])
in0Min11913 = tf.constant([[[[0.2448, 0.4505], [0.8313, 0.1563]], [[0.0057, 0.3616], [0.789, 0.474]]]])
in1Min11913 = tf.constant([[[[0.4975, 0.3953], [0.9813, 0.7787]], [[0.6211, 0.2744], [0.9558, 0.4983]]]])
in0Ave3114 = tf.constant([[[[0.2743, 0.5268]]]])
in1Ave3114 = tf.constant([[[[0.5001, 0.5474]]]])
print (np.array2string(model.predict([in0Glo99824,in0Con1066,in0Dot55308,in1Dot55308,in0Min11913,in1Min11913,in0Ave3114,in1Ave3114],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot26117.png')

LGlo99824 = global_average_pooling1D_layer([[[1.9473], [1.7199]]], Glo99824), 
LRes63949 = reshape_layer(Glo99824, [1, 1], Res63949), 
LGlo85854 = global_max_pool1D_layer(Res63949, Glo85854), 
LRes48435 = reshape_layer(Glo85854, [1, 1], Res48435), 
LZer57571 = zero_padding1D_layer(Res48435, 1, 0, Zer57571), 
LCon1066 = concatenate_layer([Zer57571,[[[0.5975], [0.153]]]], 2, Con1066), 
LDot55308 = dot_layer([[[0.8101, 0.0535], [0.7798, 0.8484]]], [[[0.122, 0.3264], [0.9299, 0.8233]]], 2, 1, Dot55308), 
LAve33622 = average_layer([Con1066,Dot55308], Ave33622), 
LMin11913 = minimum_layer([[[[[0.2448, 0.4505], [0.8313, 0.1563]], [[0.0057, 0.3616], [0.789, 0.474]]]], [[[[0.4975, 0.3953], [0.9813, 0.7787]], [[0.6211, 0.2744], [0.9558, 0.4983]]]]], Min11913), 
LAve3114 = average_layer([[[[[0.2743, 0.5268]]]], [[[[0.5001, 0.5474]]]]], Ave3114), 
LZer66071 = zero_padding2D_layer(Ave3114, 1, 0, 1, 0, Zer66071), 
LAve42069 = average_layer([Min11913,Zer66071], Ave42069), 
LRes31623 = reshape_layer(Ave42069, [2, 4], Res31623), 
LDot26117 = dot_layer(Ave33622,Res31623, 1, 1, Dot26117), 
exec_layers([LGlo99824,LRes63949,LGlo85854,LRes48435,LZer57571,LCon1066,LDot55308,LAve33622,LMin11913,LAve3114,LZer66071,LAve42069,LRes31623,LDot26117],["Glo99824","Res63949","Glo85854","Res48435","Zer57571","Con1066","Dot55308","Ave33622","Min11913","Ave3114","Zer66071","Ave42069","Res31623","Dot26117"],Dot26117,"Dot26117")

Actual (Unparsed): [[[0.0129659, 0.2011153, 0.8300077, 0.6927630], [0.0570210, 0.1654044, 0.5135054, 0.3149733]]]

Expected (Unparsed): [[[0.012965878653000001,0.20111526666225,0.8300077575542502,0.69276303994775],[0.057021017805000004,0.16540440283574998,0.5135053460437501,0.31497331172025]]]

Actual:   [[[0.013, 0.2012, 0.8301, 0.6928], [0.0571, 0.1655, 0.5136, 0.315]]]

Expected: [[[0.013, 0.2012, 0.8301, 0.6928], [0.0571, 0.1655, 0.5136, 0.315]]]