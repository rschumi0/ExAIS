import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con5963 = tf.keras.layers.Input(shape=([2, 2, 2]))

Con5963 = keras.layers.Conv2DTranspose(2, (2, 1),strides=(1, 1), padding='same', name = 'Con5963', )(in0Con5963)
Up_12362 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_12362', )(Con5963)
Res39668 = keras.layers.Reshape((2, 8), name = 'Res39668', )(Up_12362)
LST62264 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST62264', )(Res39668)
model = tf.keras.models.Model(inputs=[in0Con5963], outputs=LST62264)
w = model.get_layer('Con5963').get_weights() 
w[0] = np.array([[[[0.0136, 0.1235], [0.4264, 0.8929]]], [[[0.1093, 0.4372], [0.5959, 0.4866]]]])
w[1] = np.array([0, 0])
model.get_layer('Con5963').set_weights(w) 
w = model.get_layer('LST62264').get_weights() 
w[0] = np.array([[4, 7, 5, 4], [6, 3, 3, 1], [8, 3, 4, 4], [7, 2, 7, 2], [6, 7, 9, 1], [6, 5, 10, 10], [2, 4, 8, 3], [5, 5, 4, 5]])
w[1] = np.array([[4, 4, 10, 7]])
w[2] = np.array([5, 3, 6, 7])
model.get_layer('LST62264').set_weights(w) 
in0Con5963 = tf.constant([[[[0.7244, 0.4663], [0.9219, 0.9482]], [[0.4186, 0.2824], [0.4716, 0.5962]]]])
print (np.array2string(model.predict([in0Con5963],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST62264.png')

LCon5963 = conv2D_transpose_layer([[[[0.7244, 0.4663], [0.9219, 0.9482]], [[0.4186, 0.2824], [0.4716, 0.5962]]]], 2, 1,[[[[0.0136, 0.1235], [0.4264, 0.8929]]], [[[0.1093, 0.4372], [0.5959, 0.4866]]]],[0, 0], 1, 1, true, Con5963), 
LUp_12362 = up_sampling2D_layer(Con5963, 1, 2, Up_12362), 
LRes39668 = reshape_layer(Up_12362, [2, 8], Res39668), 
LLST62264 = lstm_layer(Res39668,[[4, 7, 5, 4], [6, 3, 3, 1], [8, 3, 4, 4], [7, 2, 7, 2], [6, 7, 9, 1], [6, 5, 10, 10], [2, 4, 8, 3], [5, 5, 4, 5]],[[4, 4, 10, 7]],[5, 3, 6, 7], LST62264), 
exec_layers([LCon5963,LUp_12362,LRes39668,LLST62264],["Con5963","Up_12362","Res39668","LST62264"],LST62264,"LST62264")

Actual (Unparsed): [[0.9640276]]

Expected (Unparsed): [[0.9640275800758097]]

Actual:   [[0.9641]]

Expected: [[0.9641]]