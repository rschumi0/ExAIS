import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep9671 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Sep91302 = tf.keras.layers.Input(shape=([2, 2]))
in0Con43176 = tf.keras.layers.Input(shape=([1, 9]))
in0Max10572 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Max10572 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Dot67135 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot67135 = tf.keras.layers.Input(shape=([2, 3]))
in0Lay51460 = tf.keras.layers.Input(shape=([3, 4]))
in0Glo91725 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con45942 = tf.keras.layers.Input(shape=([10]))

Sep9671 = keras.layers.SeparableConv2D(3, (1, 1),strides=(2, 2), padding='valid', name = 'Sep9671', )(in0Sep9671)
Res9751 = keras.layers.Reshape((1, 3), name = 'Res9751', )(Sep9671)
Sep91302 = keras.layers.SeparableConv1D(3, (1),strides=(2), padding='same', name = 'Sep91302', )(in0Sep91302)
ELU66220 = keras.layers.ELU(alpha=-4.865213842042997, name = 'ELU66220', )(Sep91302)
Mul64323 = keras.layers.Multiply(name = 'Mul64323', )([Res9751,ELU66220])
Con43176 = keras.layers.Concatenate(axis=2, name = 'Con43176', )([Mul64323,in0Con43176])
Max10572 = keras.layers.Maximum(name = 'Max10572', )([in0Max10572,in1Max10572])
Res88057 = keras.layers.Reshape((2, 2, 1), name = 'Res88057', )(Max10572)
Dot67135 = keras.layers.Dot(axes=(2, 2), name = 'Dot67135', )([in0Dot67135,in1Dot67135])
Res65487 = keras.layers.Reshape((2, 2, 1), name = 'Res65487', )(Dot67135)
Ave8160 = keras.layers.Average(name = 'Ave8160', )([Res88057,Res65487])
Res58722 = keras.layers.Reshape((2, 2), name = 'Res58722', )(Ave8160)
Lay51460 = keras.layers.LayerNormalization(axis=2, epsilon=1.6559835015653375, name = 'Lay51460', )(in0Lay51460)
Fla12576 = keras.layers.Flatten(name = 'Fla12576', )(Lay51460)
Glo91725 = keras.layers.GlobalMaxPool3D(name = 'Glo91725', )(in0Glo91725)
Con45942 = keras.layers.Concatenate(axis=1, name = 'Con45942', )([Glo91725,in0Con45942])
Mul67986 = keras.layers.Multiply(name = 'Mul67986', )([Fla12576,Con45942])
Res88412 = keras.layers.Reshape((12, 1), name = 'Res88412', )(Mul67986)
Res2334 = keras.layers.Reshape((12, 1, 1), name = 'Res2334', )(Res88412)
Res48339 = keras.layers.Reshape((12, 1, 1, 1), name = 'Res48339', )(Res2334)
Con37255 = keras.layers.Conv3D(2, (8, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con37255', )(Res48339)
Res7877 = keras.layers.Reshape((12, 1, 2), name = 'Res7877', )(Con37255)
Res14451 = keras.layers.Reshape((12, 2), name = 'Res14451', )(Res7877)
Dot4050 = keras.layers.Dot(axes=(2, 2), name = 'Dot4050', )([Res58722,Res14451])
Dot30141 = keras.layers.Dot(axes=(2, 2), name = 'Dot30141', )([Con43176,Dot4050])
model = tf.keras.models.Model(inputs=[in0Sep9671,in0Sep91302,in0Con43176,in0Max10572,in1Max10572,in0Dot67135,in1Dot67135,in0Lay51460,in0Glo91725,in0Con45942], outputs=Dot30141)
w = model.get_layer('Sep9671').get_weights() 
w[0] = np.array([[[[0.4237], [0.7396]]]])
w[1] = np.array([[[[0.9924, 0.034, 0.1368], [0.0695, 0.0726, 0.1812]]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep9671').set_weights(w) 
w = model.get_layer('Sep91302').get_weights() 
w[0] = np.array([[[0.3003], [0.6666]]])
w[1] = np.array([[[0.7824, 0.4111, 0.8116], [0.0426, 0.9483, 0.3842]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep91302').set_weights(w) 
w = model.get_layer('Con37255').get_weights() 
w[0] = np.array([[[[[0.0854, 0.428]]]], [[[[0.1628, 0.623]]]], [[[[0.8722, 0.6419]]]], [[[[0.6571, 0.5969]]]], [[[[0.9224, 0.1918]]]], [[[[0.3434, 0.4575]]]], [[[[0.4787, 0.5685]]]], [[[[0.6685, 0.9908]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con37255').set_weights(w) 
in0Sep9671 = tf.constant([[[[0.0175, 0.2102]], [[0.5675, 0.422]]]])
in0Sep91302 = tf.constant([[[0.6541, 0.0453], [0.5975, 0.8182]]])
in0Con43176 = tf.constant([[[0.0789, 0.1882, 0.9953, 0.0953, 0.0958, 0.3732, 0.435, 0.8917, 0.1597]]])
in0Max10572 = tf.constant([[[[[0.4877]], [[0.2441]]], [[[0.662]], [[0.2516]]]]])
in1Max10572 = tf.constant([[[[[0.7335]], [[0.0748]]], [[[0.1192]], [[0.2797]]]]])
in0Dot67135 = tf.constant([[[0.7308, 0.4799, 0.8847], [0.7477, 0.4668, 0.6553]]])
in1Dot67135 = tf.constant([[[0.6128, 0.7439, 0.2165], [0.5417, 0.2476, 0.9094]]])
in0Lay51460 = tf.constant([[[1.404, 1.9149, 1.9844, 1.9128], [1.9472, 1.3594, 1.0369, 1.8249], [1.1567, 1.9143, 1.119, 1.4624]]])
in0Glo91725 = tf.constant([[[[[1.724, 1.5932]]]]])
in0Con45942 = tf.constant([[0.1867, 0.3027, 0.0677, 0.7806, 0.445, 0.18, 0.5121, 0.1325, 0.9136, 0.1789]])
print (np.array2string(model.predict([in0Sep9671,in0Sep91302,in0Con43176,in0Max10572,in1Max10572,in0Dot67135,in1Dot67135,in0Lay51460,in0Glo91725,in0Con45942],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot30141.png')

LSep9671 = separable_conv2D_layer([[[[0.0175, 0.2102]], [[0.5675, 0.422]]]], 1, 1,[[[[[0.4237], [0.7396]]]],[[[[0.9924, 0.034, 0.1368], [0.0695, 0.0726, 0.1812]]]]],[0, 0, 0], 2, 2, false, Sep9671), 
LRes9751 = reshape_layer(Sep9671, [1, 3], Res9751), 
LSep91302 = separable_conv1D_layer([[[0.6541, 0.0453], [0.5975, 0.8182]]], 1,[[[[0.3003], [0.6666]]],[[[0.7824, 0.4111, 0.8116], [0.0426, 0.9483, 0.3842]]]],[0, 0, 0], 2, true, Sep91302), 
LELU66220 = elu_layer(Sep91302, -4.865213842042997, ELU66220), 
LMul64323 = multiply_layer([Res9751,ELU66220], Mul64323), 
LCon43176 = concatenate_layer([Mul64323,[[[0.0789, 0.1882, 0.9953, 0.0953, 0.0958, 0.3732, 0.435, 0.8917, 0.1597]]]], 2, Con43176), 
LMax10572 = maximum_layer([[[[[[0.4877]], [[0.2441]]], [[[0.662]], [[0.2516]]]]], [[[[[0.7335]], [[0.0748]]], [[[0.1192]], [[0.2797]]]]]], Max10572), 
LRes88057 = reshape_layer(Max10572, [2, 2, 1], Res88057), 
LDot67135 = dot_layer([[[0.7308, 0.4799, 0.8847], [0.7477, 0.4668, 0.6553]]], [[[0.6128, 0.7439, 0.2165], [0.5417, 0.2476, 0.9094]]], 2, 2, Dot67135), 
LRes65487 = reshape_layer(Dot67135, [2, 2, 1], Res65487), 
LAve8160 = average_layer([Res88057,Res65487], Ave8160), 
LRes58722 = reshape_layer(Ave8160, [2, 2], Res58722), 
LLay51460 = layer_normalization_layer([[[1.404, 1.9149, 1.9844, 1.9128], [1.9472, 1.3594, 1.0369, 1.8249], [1.1567, 1.9143, 1.119, 1.4624]]], 2, 1.6559835015653375, Lay51460), 
LFla12576 = flatten_layer(Lay51460, Fla12576), 
LGlo91725 = global_max_pool3D_layer([[[[[1.724, 1.5932]]]]], Glo91725), 
LCon45942 = concatenate_layer([Glo91725,[[0.1867, 0.3027, 0.0677, 0.7806, 0.445, 0.18, 0.5121, 0.1325, 0.9136, 0.1789]]], 1, Con45942), 
LMul67986 = multiply_layer([Fla12576,Con45942], Mul67986), 
LRes88412 = reshape_layer(Mul67986, [12, 1], Res88412), 
LRes2334 = reshape_layer(Res88412, [12, 1, 1], Res2334), 
LRes48339 = reshape_layer(Res2334, [12, 1, 1, 1], Res48339), 
LCon37255 = conv3D_layer(Res48339, 8, 1, 1,[[[[[0.0854, 0.428]]]], [[[[0.1628, 0.623]]]], [[[[0.8722, 0.6419]]]], [[[[0.6571, 0.5969]]]], [[[[0.9224, 0.1918]]]], [[[[0.3434, 0.4575]]]], [[[[0.4787, 0.5685]]]], [[[[0.6685, 0.9908]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con37255), 
LRes7877 = reshape_layer(Con37255, [12, 1, 2], Res7877), 
LRes14451 = reshape_layer(Res7877, [12, 2], Res14451), 
LDot4050 = dot_layer(Res58722,Res14451, 2, 2, Dot4050), 
LDot30141 = dot_layer(Con43176,Dot4050, 2, 2, Dot30141), 
exec_layers([LSep9671,LRes9751,LSep91302,LELU66220,LMul64323,LCon43176,LMax10572,LRes88057,LDot67135,LRes65487,LAve8160,LRes58722,LLay51460,LFla12576,LGlo91725,LCon45942,LMul67986,LRes88412,LRes2334,LRes48339,LCon37255,LRes7877,LRes14451,LDot4050,LDot30141],["Sep9671","Res9751","Sep91302","ELU66220","Mul64323","Con43176","Max10572","Res88057","Dot67135","Res65487","Ave8160","Res58722","Lay51460","Fla12576","Glo91725","Con45942","Mul67986","Res88412","Res2334","Res48339","Con37255","Res7877","Res14451","Dot4050","Dot30141"],Dot30141,"Dot30141")

Actual (Unparsed): [[[-0.8070894, -0.7384395]]]

Expected (Unparsed): [[[-0.8070894341720924,-0.7384395096847821]]]

Actual:   [[[-0.807, -0.7384]]]

Expected: [[[-0.807, -0.7384]]]