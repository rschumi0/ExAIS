import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo25667 = tf.keras.layers.Input(shape=([2, 2]))
in0Con64064 = tf.keras.layers.Input(shape=([2, 1]))
in0Max18834 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max18834 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con78879 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Min95459 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min95459 = tf.keras.layers.Input(shape=([2, 1, 2]))

Glo25667 = keras.layers.GlobalAveragePooling1D(name = 'Glo25667', )(in0Glo25667)
Res17691 = keras.layers.Reshape((2, 1), name = 'Res17691', )(Glo25667)
Con64064 = keras.layers.Concatenate(axis=2, name = 'Con64064', )([Res17691,in0Con64064])
Max18834 = keras.layers.Maximum(name = 'Max18834', )([in0Max18834,in1Max18834])
Con78879 = keras.layers.Concatenate(axis=3, name = 'Con78879', )([Max18834,in0Con78879])
Min95459 = keras.layers.Minimum(name = 'Min95459', )([in0Min95459,in1Min95459])
Min933 = keras.layers.Minimum(name = 'Min933', )([Con78879,Min95459])
Res87374 = keras.layers.Reshape((2, 2), name = 'Res87374', )(Min933)
Cro71921 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro71921', )(Res87374)
Zer86634 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer86634', )(Cro71921)
Ave65504 = keras.layers.Average(name = 'Ave65504', )([Con64064,Zer86634])
model = tf.keras.models.Model(inputs=[in0Glo25667,in0Con64064,in0Max18834,in1Max18834,in0Con78879,in0Min95459,in1Min95459], outputs=Ave65504)
in0Glo25667 = tf.constant([[[1.1614, 1.16], [1.9757, 1.7972]]])
in0Con64064 = tf.constant([[[0.4499], [0.6039]]])
in0Max18834 = tf.constant([[[[0.9858]], [[0.3257]]]])
in1Max18834 = tf.constant([[[[0.7332]], [[0.3114]]]])
in0Con78879 = tf.constant([[[[0.2719]], [[0.4488]]]])
in0Min95459 = tf.constant([[[[0.6609, 0.6305]], [[0.2407, 0.3528]]]])
in1Min95459 = tf.constant([[[[0.9834, 0.5955]], [[0.9416, 0.9056]]]])
print (np.array2string(model.predict([in0Glo25667,in0Con64064,in0Max18834,in1Max18834,in0Con78879,in0Min95459,in1Min95459],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave65504.png')

LGlo25667 = global_average_pooling1D_layer([[[1.1614, 1.16], [1.9757, 1.7972]]], Glo25667), 
LRes17691 = reshape_layer(Glo25667, [2, 1], Res17691), 
LCon64064 = concatenate_layer([Res17691,[[[0.4499], [0.6039]]]], 2, Con64064), 
LMax18834 = maximum_layer([[[[[0.9858]], [[0.3257]]]], [[[[0.7332]], [[0.3114]]]]], Max18834), 
LCon78879 = concatenate_layer([Max18834,[[[[0.2719]], [[0.4488]]]]], 3, Con78879), 
LMin95459 = minimum_layer([[[[[0.6609, 0.6305]], [[0.2407, 0.3528]]]], [[[[0.9834, 0.5955]], [[0.9416, 0.9056]]]]], Min95459), 
LMin933 = minimum_layer([Con78879,Min95459], Min933), 
LRes87374 = reshape_layer(Min933, [2, 2], Res87374), 
LCro71921 = cropping1D_layer(Res87374, 1, 0, Cro71921), 
LZer86634 = zero_padding1D_layer(Cro71921, 1, 0, Zer86634), 
LAve65504 = average_layer([Con64064,Zer86634], Ave65504), 
exec_layers([LGlo25667,LRes17691,LCon64064,LMax18834,LCon78879,LMin95459,LMin933,LRes87374,LCro71921,LZer86634,LAve65504],["Glo25667","Res17691","Con64064","Max18834","Con78879","Min95459","Min933","Res87374","Cro71921","Zer86634","Ave65504"],Ave65504,"Ave65504")

Actual (Unparsed): [[[0.7842750, 0.2249500], [0.8596500, 0.4783500]]]

Expected (Unparsed): [[[0.784275,0.22495],[0.8596499999999999,0.47835]]]

Actual:   [[[0.7843, 0.225], [0.8597, 0.4784]]]

Expected: [[[0.7843, 0.225], [0.8597, 0.4784]]]