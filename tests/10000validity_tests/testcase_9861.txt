import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con2822 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Max36974 = tf.keras.layers.Input(shape=([2, 1]))
in1Max36974 = tf.keras.layers.Input(shape=([2, 1]))

Con2822 = keras.layers.Conv2DTranspose(2, (2, 1),strides=(1, 1), padding='same', name = 'Con2822', )(in0Con2822)
Res58450 = keras.layers.Reshape((2, 2), name = 'Res58450', )(Con2822)
Max36974 = keras.layers.Maximum(name = 'Max36974', )([in0Max36974,in1Max36974])
Res80813 = keras.layers.Reshape((2, 1, 1), name = 'Res80813', )(Max36974)
Con9908 = keras.layers.Conv2D(2, (2, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con9908', )(Res80813)
Res47885 = keras.layers.Reshape((1, 2), name = 'Res47885', )(Con9908)
Zer55956 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer55956', )(Res47885)
Dot37042 = keras.layers.Dot(axes=(1, 1), name = 'Dot37042', )([Res58450,Zer55956])
model = tf.keras.models.Model(inputs=[in0Con2822,in0Max36974,in1Max36974], outputs=Dot37042)
w = model.get_layer('Con2822').get_weights() 
w[0] = np.array([[[[0.678], [0.811]]], [[[0.6671], [0.5832]]]])
w[1] = np.array([0, 0])
model.get_layer('Con2822').set_weights(w) 
w = model.get_layer('Con9908').get_weights() 
w[0] = np.array([[[[0.8385, 0.7767]]], [[[0.0031, 0.8172]]]])
w[1] = np.array([0, 0])
model.get_layer('Con9908').set_weights(w) 
in0Con2822 = tf.constant([[[[0.0829]], [[0.6491]]]])
in0Max36974 = tf.constant([[[0.9584], [0.3524]]])
in1Max36974 = tf.constant([[[0.3487], [0.7073]]])
print (np.array2string(model.predict([in0Con2822,in0Max36974,in1Max36974],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot37042.png')

LCon2822 = conv2D_transpose_layer([[[[0.0829]], [[0.6491]]]], 2, 1,[[[[0.678], [0.811]]], [[[0.6671], [0.5832]]]],[0, 0], 1, 1, true, Con2822), 
LRes58450 = reshape_layer(Con2822, [2, 2], Res58450), 
LMax36974 = maximum_layer([[[[0.9584], [0.3524]]], [[[0.3487], [0.7073]]]], Max36974), 
LRes80813 = reshape_layer(Max36974, [2, 1, 1], Res80813), 
LCon9908 = conv2D_layer(Res80813, 2, 1,[[[[0.8385, 0.7767]]], [[[0.0031, 0.8172]]]],[0, 0], 1, 1, false, 1, 1, Con9908), 
LRes47885 = reshape_layer(Con9908, [1, 2], Res47885), 
LZer55956 = zero_padding1D_layer(Res47885, 1, 0, Zer55956), 
LDot37042 = dot_layer(Res58450,Zer55956, 1, 1, Dot37042), 
exec_layers([LCon2822,LRes58450,LMax36974,LRes80813,LCon9908,LRes47885,LZer55956,LDot37042],["Con2822","Res58450","Max36974","Res80813","Con9908","Res47885","Zer55956","Dot37042"],Dot37042,"Dot37042")

Actual (Unparsed): [[[0.3991927, 0.6551044], [0.4631539, 0.7600694]]]

Expected (Unparsed): [[[0.39919265204006177,0.6551043403112675],[0.4631538944882015,0.7600694175123192]]]

Actual:   [[[0.3992, 0.6552], [0.4632, 0.7601]]]

Expected: [[[0.3992, 0.6552], [0.4632, 0.7601]]]