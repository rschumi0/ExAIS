import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave26710 = tf.keras.layers.Input(shape=([2, 2]))
in0Con76797 = tf.keras.layers.Input(shape=([1, 5]))
in0Sub23250 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub23250 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Min88852 = tf.keras.layers.Input(shape=([1, 2]))
in1Min88852 = tf.keras.layers.Input(shape=([1, 2]))
in0Con97136 = tf.keras.layers.Input(shape=([2, 4]))

Ave26710 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave26710', )(in0Ave26710)
Res40141 = keras.layers.Reshape((2, 2, 1), name = 'Res40141', )(Ave26710)
Res39846 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res39846', )(Res40141)
Glo84641 = keras.layers.GlobalMaxPool3D(name = 'Glo84641', )(Res39846)
Res66777 = keras.layers.Reshape((1, 1), name = 'Res66777', )(Glo84641)
Per2305 = keras.layers.Permute((1,2), name = 'Per2305',)(Res66777)
Con76797 = keras.layers.Concatenate(axis=2, name = 'Con76797', )([Per2305,in0Con76797])
Sub23250 = keras.layers.Subtract(name = 'Sub23250', )([in0Sub23250,in1Sub23250])
Res66605 = keras.layers.Reshape((2, 6), name = 'Res66605', )(Sub23250)
Min88852 = keras.layers.Minimum(name = 'Min88852', )([in0Min88852,in1Min88852])
Zer7301 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer7301', )(Min88852)
Con97136 = keras.layers.Concatenate(axis=2, name = 'Con97136', )([Zer7301,in0Con97136])
Sub14739 = keras.layers.Subtract(name = 'Sub14739', )([Res66605,Con97136])
Dot23519 = keras.layers.Dot(axes=(2, 2), name = 'Dot23519', )([Con76797,Sub14739])
model = tf.keras.models.Model(inputs=[in0Ave26710,in0Con76797,in0Sub23250,in1Sub23250,in0Min88852,in1Min88852,in0Con97136], outputs=Dot23519)
in0Ave26710 = tf.constant([[[1.7025, 1.266], [1.6185, 1.085]]])
in0Con76797 = tf.constant([[[0.5179, 0.2029, 0.2405, 0.6657, 0.0488]]])
in0Sub23250 = tf.constant([[[[0.1813, 0.0297], [0.9661, 0.2039], [0.9914, 0.0163]], [[0.273, 0.0359], [0.0987, 0.2328], [0.9231, 0.1373]]]])
in1Sub23250 = tf.constant([[[[0.9778, 0.8349], [0.4493, 0.8639], [0.1749, 0.5564]], [[0.2198, 0.2234], [0.9755, 0.8559], [0.6271, 0.8572]]]])
in0Min88852 = tf.constant([[[0.7983, 0.297]]])
in1Min88852 = tf.constant([[[0.746, 0.4804]]])
in0Con97136 = tf.constant([[[0.4284, 0.696, 0.2563, 0.8066], [0.8685, 0.5555, 0.1383, 0.5408]]])
print (np.array2string(model.predict([in0Ave26710,in0Con76797,in0Sub23250,in1Sub23250,in0Min88852,in1Min88852,in0Con97136],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot23519.png')

LAve26710 = average_pooling1D_layer([[[1.7025, 1.266], [1.6185, 1.085]]], 1, Ave26710), 
LRes40141 = reshape_layer(Ave26710, [2, 2, 1], Res40141), 
LRes39846 = reshape_layer(Res40141, [2, 2, 1, 1], Res39846), 
LGlo84641 = global_max_pool3D_layer(Res39846, Glo84641), 
LRes66777 = reshape_layer(Glo84641, [1, 1], Res66777), 
LPer2305 = permute_layer(Res66777, 1,2, Per2305), 
LCon76797 = concatenate_layer([Per2305,[[[0.5179, 0.2029, 0.2405, 0.6657, 0.0488]]]], 2, Con76797), 
LSub23250 = subtract_layer([[[[0.1813, 0.0297], [0.9661, 0.2039], [0.9914, 0.0163]], [[0.273, 0.0359], [0.0987, 0.2328], [0.9231, 0.1373]]]], [[[[0.9778, 0.8349], [0.4493, 0.8639], [0.1749, 0.5564]], [[0.2198, 0.2234], [0.9755, 0.8559], [0.6271, 0.8572]]]], Sub23250), 
LRes66605 = reshape_layer(Sub23250, [2, 6], Res66605), 
LMin88852 = minimum_layer([[[[0.7983, 0.297]]], [[[0.746, 0.4804]]]], Min88852), 
LZer7301 = zero_padding1D_layer(Min88852, 1, 0, Zer7301), 
LCon97136 = concatenate_layer([Zer7301,[[[0.4284, 0.696, 0.2563, 0.8066], [0.8685, 0.5555, 0.1383, 0.5408]]]], 2, Con97136), 
LSub14739 = subtract_layer(Res66605,Con97136, Sub14739), 
LDot23519 = dot_layer(Con76797,Sub14739, 2, 2, Dot23519), 
exec_layers([LAve26710,LRes40141,LRes39846,LGlo84641,LRes66777,LPer2305,LCon76797,LSub23250,LRes66605,LMin88852,LZer7301,LCon97136,LSub14739,LDot23519],["Ave26710","Res40141","Res39846","Glo84641","Res66777","Per2305","Con76797","Sub23250","Res66605","Min88852","Zer7301","Con97136","Sub14739","Dot23519"],Dot23519,"Dot23519")

Actual (Unparsed): [[[-1.7740298, -2.0245304]]]

Expected (Unparsed): [[[-1.77402979,-2.0245304900000005]]]

Actual:   [[[-1.774, -2.0245]]]

Expected: [[[-1.774, -2.0245]]]