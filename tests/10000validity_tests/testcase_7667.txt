import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer64885 = tf.keras.layers.Input(shape=([3, 2, 3, 2]))
in0LST53599 = tf.keras.layers.Input(shape=([2, 3]))
in0Con1906 = tf.keras.layers.Input(shape=([5, 38]))

Zer64885 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer64885', )(in0Zer64885)
Res73154 = keras.layers.Reshape((5, 4, 10), name = 'Res73154', )(Zer64885)
Res90562 = keras.layers.Reshape((5, 40), name = 'Res90562', )(Res73154)
LST53599 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST53599', )(in0LST53599)
Res52049 = keras.layers.Reshape((3, 1), name = 'Res52049', )(LST53599)
Sep10411 = keras.layers.SeparableConv1D(2, (3),strides=(3), padding='valid', name = 'Sep10411', )(Res52049)
Zer5949 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer5949', )(Sep10411)
Con1906 = keras.layers.Concatenate(axis=2, name = 'Con1906', )([Zer5949,in0Con1906])
Min75082 = keras.layers.Minimum(name = 'Min75082', )([Res90562,Con1906])
ELU72133 = keras.layers.ELU(alpha=3.226364942909912, name = 'ELU72133', )(Min75082)
model = tf.keras.models.Model(inputs=[in0Zer64885,in0LST53599,in0Con1906], outputs=ELU72133)
w = model.get_layer('LST53599').get_weights() 
w[0] = np.array([[1, 4, 4, 6, 8, 2, 5, 7, 7, 10, 9, 5], [10, 2, 10, 5, 4, 10, 9, 10, 9, 4, 10, 4], [1, 2, 1, 6, 9, 6, 10, 2, 10, 10, 6, 7]])
w[1] = np.array([[10, 10, 10, 8, 9, 10, 3, 5, 8, 4, 5, 3], [2, 8, 9, 8, 8, 3, 1, 7, 1, 9, 5, 3], [6, 7, 3, 9, 7, 3, 10, 8, 9, 7, 7, 3]])
w[2] = np.array([2, 1, 8, 7, 9, 6, 2, 2, 6, 6, 6, 1])
model.get_layer('LST53599').set_weights(w) 
w = model.get_layer('Sep10411').get_weights() 
w[0] = np.array([[[0.7416]], [[0.7241]], [[0.1252]]])
w[1] = np.array([[[0.4538, 0.6631]]])
w[2] = np.array([0, 0])
model.get_layer('Sep10411').set_weights(w) 
in0Zer64885 = tf.constant([[[[[1.7911, 1.9497], [1.3387, 1.142], [1.9954, 1.3063]], [[1.5908, 1.6378], [1.4453, 1.2112], [1.9335, 1.0077]]], [[[1.6056, 1.0506], [1.116, 1.237], [1.1899, 1.2473]], [[1.3313, 1.9896], [1.7078, 1.8028], [1.489, 1.7119]]], [[[1.0481, 1.4487], [1.6003, 1.4972], [1.6524, 1.8003]], [[1.7133, 1.8986], [1.0722, 1.5326], [1.648, 1.2028]]]]])
in0LST53599 = tf.constant([[[5, 6, 1], [2, 3, 5]]])
in0Con1906 = tf.constant([[[0.2852, 0.4505, 0.7457, 0.0774, 0.5602, 0.2057, 0.2008, 0.5738, 0.7055, 0.5513, 0.3059, 0.7987, 0.7283, 0.3179, 0.9446, 0.2551, 0.4766, 0.1821, 0.2003, 0.1305, 0.5019, 0.2461, 0.8138, 0.6703, 0.0812, 0.7746, 0.8115, 0.5547, 0.6611, 0.2494, 0.2658, 0.7554, 0.3854, 0.3479, 0.6836, 0.5479, 0.2999, 0.6666], [0.0949, 0.8422, 0.2888, 0.0126, 0.5124, 0.7626, 0.79, 0.8697, 0.0691, 0.4521, 0.8628, 0.2086, 0.8051, 0.4102, 0.235, 0.1539, 0.7702, 0.2784, 0.5444, 0.1491, 0.8388, 0.8834, 0.108, 0.1657, 0.3899, 0.519, 0.2016, 0.1931, 0.7959, 0.9014, 0.0119, 0.7137, 0.4867, 0.969, 0.1372, 0.1198, 0.2054, 0.7144], [0.7547, 0.0614, 0.9576, 0.5326, 0.3463, 0.5263, 0.0707, 0.1512, 0.1818, 0.0491, 0.727, 0.0656, 0.5952, 0.823, 0.3093, 0.5464, 0.4555, 0.6424, 0.9093, 0.7082, 0.1377, 0.5474, 0.3877, 0.8314, 0.7241, 0.7553, 0.4464, 0.1182, 0.1346, 0.971, 0.2762, 0.3247, 0.3715, 0.4457, 0.4759, 0.2648, 0.0938, 0.22], [0.1058, 0.0065, 0.2888, 0.8302, 0.9329, 0.6931, 0.8962, 0.3838, 0.1539, 0.3136, 0.8592, 0.3167, 0.1402, 0.4194, 0.2251, 0.3335, 0.0394, 0.7377, 0.5985, 0.002, 0.3896, 0.8681, 0.4649, 0.2233, 0.2541, 0.7654, 0.6406, 0.3323, 0.7692, 0.5093, 0.385, 0.8963, 0.4116, 0.9413, 0.5117, 0.3735, 0.7401, 0.1079], [0.1762, 0.6698, 0.8408, 0.0931, 0.883, 0.2905, 0.2172, 0.7444, 0.6557, 0.2196, 0.404, 0.0007, 0.2445, 0.8815, 0.1563, 0.0172, 0.7067, 0.5391, 0.6675, 0.0467, 0.6896, 0.266, 0.9034, 0.0872, 0.2693, 0.1932, 0.8049, 0.6323, 0.2542, 0.074, 0.8087, 0.4737, 0.45, 0.3415, 0.861, 0.3939, 0.4997, 0.7332]]])
print (np.array2string(model.predict([in0Zer64885,in0LST53599,in0Con1906],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ELU72133.png')

LZer64885 = zero_padding3D_layer([[[[[1.7911, 1.9497], [1.3387, 1.142], [1.9954, 1.3063]], [[1.5908, 1.6378], [1.4453, 1.2112], [1.9335, 1.0077]]], [[[1.6056, 1.0506], [1.116, 1.237], [1.1899, 1.2473]], [[1.3313, 1.9896], [1.7078, 1.8028], [1.489, 1.7119]]], [[[1.0481, 1.4487], [1.6003, 1.4972], [1.6524, 1.8003]], [[1.7133, 1.8986], [1.0722, 1.5326], [1.648, 1.2028]]]]], 1, 1, 1, 1, 1, 1, Zer64885), 
LRes73154 = reshape_layer(Zer64885, [5, 4, 10], Res73154), 
LRes90562 = reshape_layer(Res73154, [5, 40], Res90562), 
LLST53599 = lstm_layer([[[5, 6, 1], [2, 3, 5]]],[[1, 4, 4, 6, 8, 2, 5, 7, 7, 10, 9, 5], [10, 2, 10, 5, 4, 10, 9, 10, 9, 4, 10, 4], [1, 2, 1, 6, 9, 6, 10, 2, 10, 10, 6, 7]],[[10, 10, 10, 8, 9, 10, 3, 5, 8, 4, 5, 3], [2, 8, 9, 8, 8, 3, 1, 7, 1, 9, 5, 3], [6, 7, 3, 9, 7, 3, 10, 8, 9, 7, 7, 3]],[2, 1, 8, 7, 9, 6, 2, 2, 6, 6, 6, 1], LST53599), 
LRes52049 = reshape_layer(LST53599, [3, 1], Res52049), 
LSep10411 = separable_conv1D_layer(Res52049, 3,[[[[0.7416]], [[0.7241]], [[0.1252]]],[[[0.4538, 0.6631]]]],[0, 0], 3, false, Sep10411), 
LZer5949 = zero_padding1D_layer(Sep10411, 4, 0, Zer5949), 
LCon1906 = concatenate_layer([Zer5949,[[[0.2852, 0.4505, 0.7457, 0.0774, 0.5602, 0.2057, 0.2008, 0.5738, 0.7055, 0.5513, 0.3059, 0.7987, 0.7283, 0.3179, 0.9446, 0.2551, 0.4766, 0.1821, 0.2003, 0.1305, 0.5019, 0.2461, 0.8138, 0.6703, 0.0812, 0.7746, 0.8115, 0.5547, 0.6611, 0.2494, 0.2658, 0.7554, 0.3854, 0.3479, 0.6836, 0.5479, 0.2999, 0.6666], [0.0949, 0.8422, 0.2888, 0.0126, 0.5124, 0.7626, 0.79, 0.8697, 0.0691, 0.4521, 0.8628, 0.2086, 0.8051, 0.4102, 0.235, 0.1539, 0.7702, 0.2784, 0.5444, 0.1491, 0.8388, 0.8834, 0.108, 0.1657, 0.3899, 0.519, 0.2016, 0.1931, 0.7959, 0.9014, 0.0119, 0.7137, 0.4867, 0.969, 0.1372, 0.1198, 0.2054, 0.7144], [0.7547, 0.0614, 0.9576, 0.5326, 0.3463, 0.5263, 0.0707, 0.1512, 0.1818, 0.0491, 0.727, 0.0656, 0.5952, 0.823, 0.3093, 0.5464, 0.4555, 0.6424, 0.9093, 0.7082, 0.1377, 0.5474, 0.3877, 0.8314, 0.7241, 0.7553, 0.4464, 0.1182, 0.1346, 0.971, 0.2762, 0.3247, 0.3715, 0.4457, 0.4759, 0.2648, 0.0938, 0.22], [0.1058, 0.0065, 0.2888, 0.8302, 0.9329, 0.6931, 0.8962, 0.3838, 0.1539, 0.3136, 0.8592, 0.3167, 0.1402, 0.4194, 0.2251, 0.3335, 0.0394, 0.7377, 0.5985, 0.002, 0.3896, 0.8681, 0.4649, 0.2233, 0.2541, 0.7654, 0.6406, 0.3323, 0.7692, 0.5093, 0.385, 0.8963, 0.4116, 0.9413, 0.5117, 0.3735, 0.7401, 0.1079], [0.1762, 0.6698, 0.8408, 0.0931, 0.883, 0.2905, 0.2172, 0.7444, 0.6557, 0.2196, 0.404, 0.0007, 0.2445, 0.8815, 0.1563, 0.0172, 0.7067, 0.5391, 0.6675, 0.0467, 0.6896, 0.266, 0.9034, 0.0872, 0.2693, 0.1932, 0.8049, 0.6323, 0.2542, 0.074, 0.8087, 0.4737, 0.45, 0.3415, 0.861, 0.3939, 0.4997, 0.7332]]]], 2, Con1906), 
LMin75082 = minimum_layer([Res90562,Con1906], Min75082), 
LELU72133 = elu_layer(Min75082, 3.226364942909912, ELU72133), 
exec_layers([LZer64885,LRes73154,LRes90562,LLST53599,LRes52049,LSep10411,LZer5949,LCon1906,LMin75082,LELU72133],["Zer64885","Res73154","Res90562","LST53599","Res52049","Sep10411","Zer5949","Con1906","Min75082","ELU72133"],ELU72133,"ELU72133")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.8628000, 0.2086000, 0.8051000, 0.4102000, 0.2350000, 0.1539000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.8388000, 0.8834000, 0.1080000, 0.1657000, 0.3899000, 0.5190000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.7270000, 0.0656000, 0.5952000, 0.8230000, 0.3093000, 0.5464000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.1377000, 0.5474000, 0.3877000, 0.8314000, 0.7241000, 0.7553000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.8592000, 0.3167000, 0.1402000, 0.4194000, 0.2251000, 0.3335000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.3896000, 0.8681000, 0.4649000, 0.2233000, 0.2541000, 0.7654000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.8628,0.2086,0.8051,0.4102,0.235,0.1539,0,0,0,0,0.8388,0.8834,0.108,0.1657,0.3899,0.519,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.727,0.0656,0.5952,0.823,0.3093,0.5464,0,0,0,0,0.1377,0.5474,0.3877,0.8314,0.7241,0.7553,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0.8592,0.3167,0.1402,0.4194,0.2251,0.3335,0,0,0,0,0.3896,0.8681,0.4649,0.2233,0.2541,0.7654,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.8628, 0.2086, 0.8051, 0.4102, 0.235, 0.1539, 0, 0, 0, 0, 0.8388, 0.8834, 0.108, 0.1657, 0.3899, 0.519, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.727, 0.0656, 0.5952, 0.823, 0.3093, 0.5464, 0, 0, 0, 0, 0.1377, 0.5474, 0.3877, 0.8314, 0.7241, 0.7553, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.8592, 0.3167, 0.1402, 0.4194, 0.2251, 0.3335, 0, 0, 0, 0, 0.3896, 0.8681, 0.4649, 0.2233, 0.2541, 0.7654, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.8628, 0.2086, 0.8051, 0.4102, 0.235, 0.1539, 0, 0, 0, 0, 0.8388, 0.8834, 0.108, 0.1657, 0.3899, 0.519, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.727, 0.0656, 0.5952, 0.823, 0.3093, 0.5464, 0, 0, 0, 0, 0.1377, 0.5474, 0.3877, 0.8314, 0.7241, 0.7553, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.8592, 0.3167, 0.1402, 0.4194, 0.2251, 0.3335, 0, 0, 0, 0, 0.3896, 0.8681, 0.4649, 0.2233, 0.2541, 0.7654, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]