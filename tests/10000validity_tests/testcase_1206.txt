import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave26694 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave26694 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Ave26694 = keras.layers.Average(name = 'Ave26694', )([in0Ave26694,in1Ave26694])
Res46230 = keras.layers.Reshape((1, 1, 1), name = 'Res46230', )(Ave26694)
Res40714 = keras.layers.Reshape((1, 1), name = 'Res40714', )(Res46230)
GRU3966 = keras.layers.GRU(2,reset_after=True, recurrent_activation='sigmoid', name = 'GRU3966', )(Res40714)
Fla67876 = keras.layers.Flatten(name = 'Fla67876', )(GRU3966)
Thr60542 = keras.layers.ThresholdedReLU(theta=0.7478580452087069, name = 'Thr60542', )(Fla67876)
model = tf.keras.models.Model(inputs=[in0Ave26694,in1Ave26694], outputs=Thr60542)
w = model.get_layer('GRU3966').get_weights() 
w[0] = np.array([[10, 1, 10, 2, 9, 10]])
w[1] = np.array([[9, 5, 8, 5, 2, 7], [5, 3, 5, 2, 2, 4]])
w[2] = np.array([[9, 8, 5, 3, 6, 3], [9, 5, 5, 1, 3, 8]])
model.get_layer('GRU3966').set_weights(w) 
in0Ave26694 = tf.constant([[[[[0.4849]]]]])
in1Ave26694 = tf.constant([[[[[0.9918]]]]])
print (np.array2string(model.predict([in0Ave26694,in1Ave26694],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr60542.png')

LAve26694 = average_layer([[[[[[0.4849]]]]], [[[[[0.9918]]]]]], Ave26694), 
LRes46230 = reshape_layer(Ave26694, [1, 1, 1], Res46230), 
LRes40714 = reshape_layer(Res46230, [1, 1], Res40714), 
LGRU3966 = gru_layer(Res40714,[[10, 1, 10, 2, 9, 10]],[[9, 5, 8, 5, 2, 7], [5, 3, 5, 2, 2, 4]],[[9, 8, 5, 3, 6, 3], [9, 5, 5, 1, 3, 8]], true, GRU3966), 
LFla67876 = flatten_layer(GRU3966, Fla67876), 
LThr60542 = thresholded_relu_layer(Fla67876, 0.7478580452087069, Thr60542), 
exec_layers([LAve26694,LRes46230,LRes40714,LGRU3966,LFla67876,LThr60542],["Ave26694","Res46230","Res40714","GRU3966","Fla67876","Thr60542"],Thr60542,"Thr60542")

Actual (Unparsed): [[0.0000000, 0.0000000]]

Expected (Unparsed): [[0,0]]

Actual:   [[0, 0]]

Expected: [[0, 0]]