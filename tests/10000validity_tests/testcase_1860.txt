import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min55726 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Min55726 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Ave78593 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave78593 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Min55726 = keras.layers.Minimum(name = 'Min55726', )([in0Min55726,in1Min55726])
Ave78593 = keras.layers.Average(name = 'Ave78593', )([in0Ave78593,in1Ave78593])
Zer91129 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer91129', )(Ave78593)
Ave66370 = keras.layers.Average(name = 'Ave66370', )([Min55726,Zer91129])
Res12189 = keras.layers.Reshape((2, 1, 4), name = 'Res12189', )(Ave66370)
Con10027 = keras.layers.Conv2D(2, (2, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con10027', )(Res12189)
model = tf.keras.models.Model(inputs=[in0Min55726,in1Min55726,in0Ave78593,in1Ave78593], outputs=Con10027)
w = model.get_layer('Con10027').get_weights() 
w[0] = np.array([[[[0.4778, 0.042], [0.7194, 0.4266], [0.0448, 0.7082], [0.2192, 0.8989]]], [[[0.0351, 0.1913], [0.7394, 0.6857], [0.3149, 0.9221], [0.6572, 0.4664]]]])
w[1] = np.array([0, 0])
model.get_layer('Con10027').set_weights(w) 
in0Min55726 = tf.constant([[[[[0.0273, 0.8875], [0.4303, 0.0991]]], [[[0.7084, 0.6677], [0.4977, 0.014]]]]])
in1Min55726 = tf.constant([[[[[0.295, 0.4277], [0.5877, 0.4015]]], [[[0.0105, 0.5531], [0.8049, 0.3449]]]]])
in0Ave78593 = tf.constant([[[[[0.8598, 0.8655], [0.0733, 0.0042]]]]])
in1Ave78593 = tf.constant([[[[[0.8031, 0.2958], [0.1924, 0.8471]]]]])
print (np.array2string(model.predict([in0Min55726,in1Min55726,in0Ave78593,in1Ave78593],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con10027.png')

LMin55726 = minimum_layer([[[[[[0.0273, 0.8875], [0.4303, 0.0991]]], [[[0.7084, 0.6677], [0.4977, 0.014]]]]], [[[[[0.295, 0.4277], [0.5877, 0.4015]]], [[[0.0105, 0.5531], [0.8049, 0.3449]]]]]], Min55726), 
LAve78593 = average_layer([[[[[[0.8598, 0.8655], [0.0733, 0.0042]]]]], [[[[[0.8031, 0.2958], [0.1924, 0.8471]]]]]], Ave78593), 
LZer91129 = zero_padding3D_layer(Ave78593, 1, 0, 0, 0, 0, 0, Zer91129), 
LAve66370 = average_layer([Min55726,Zer91129], Ave66370), 
LRes12189 = reshape_layer(Ave66370, [2, 1, 4], Res12189), 
LCon10027 = conv2D_layer(Res12189, 2, 1,[[[[0.4778, 0.042], [0.7194, 0.4266], [0.0448, 0.7082], [0.2192, 0.8989]]], [[[0.0351, 0.1913], [0.7394, 0.6857], [0.3149, 0.9221], [0.6572, 0.4664]]]],[0, 0], 1, 1, false, 1, 1, Con10027), 
exec_layers([LMin55726,LAve78593,LZer91129,LAve66370,LRes12189,LCon10027],["Min55726","Ave78593","Zer91129","Ave66370","Res12189","Con10027"],Con10027,"Con10027")

Actual (Unparsed): [[[[0.8585384, 1.1511916]]]]

Expected (Unparsed): [[[[0.8585384250000001,1.1511915975]]]]

Actual:   [[[[0.8586, 1.1512]]]]

Expected: [[[[0.8586, 1.1512]]]]