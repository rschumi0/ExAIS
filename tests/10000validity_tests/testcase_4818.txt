import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max17125 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Max17125 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Max17125 = keras.layers.Maximum(name = 'Max17125', )([in0Max17125,in1Max17125])
Res83770 = keras.layers.Reshape((2, 1, 1), name = 'Res83770', )(Max17125)
Res65760 = keras.layers.Reshape((2, 1), name = 'Res65760', )(Res83770)
Sep40026 = keras.layers.SeparableConv1D(4, (2),strides=(1), padding='same', name = 'Sep40026', )(Res65760)
Res92794 = keras.layers.Reshape((2, 4, 1), name = 'Res92794', )(Sep40026)
Res82455 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res82455', )(Res92794)
Up_96208 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_96208', )(Res82455)
model = tf.keras.models.Model(inputs=[in0Max17125,in1Max17125], outputs=Up_96208)
w = model.get_layer('Sep40026').get_weights() 
w[0] = np.array([[[0.4078]], [[0.4663]]])
w[1] = np.array([[[0.177, 0.2403, 0.818, 0.703]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep40026').set_weights(w) 
in0Max17125 = tf.constant([[[[[0.4324]]], [[[0.1025]]]]])
in1Max17125 = tf.constant([[[[[0.5493]]], [[[0.8645]]]]])
print (np.array2string(model.predict([in0Max17125,in1Max17125],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_96208.png')

LMax17125 = maximum_layer([[[[[[0.4324]]], [[[0.1025]]]]], [[[[[0.5493]]], [[[0.8645]]]]]], Max17125), 
LRes83770 = reshape_layer(Max17125, [2, 1, 1], Res83770), 
LRes65760 = reshape_layer(Res83770, [2, 1], Res65760), 
LSep40026 = separable_conv1D_layer(Res65760, 2,[[[[0.4078]], [[0.4663]]],[[[0.177, 0.2403, 0.818, 0.703]]]],[0, 0, 0, 0], 1, true, Sep40026), 
LRes92794 = reshape_layer(Sep40026, [2, 4, 1], Res92794), 
LRes82455 = reshape_layer(Res92794, [2, 4, 1, 1], Res82455), 
LUp_96208 = up_sampling3D_layer(Res82455, 2, 1, 1, Up_96208), 
exec_layers([LMax17125,LRes83770,LRes65760,LSep40026,LRes92794,LRes82455,LUp_96208],["Max17125","Res83770","Res65760","Sep40026","Res92794","Res82455","Up_96208"],Up_96208,"Up_96208")

Actual (Unparsed): [[[[[0.1110004]], [[0.1506971]], [[0.5129849]], [[0.4408660]]], [[[0.1110004]], [[0.1506971]], [[0.5129849]], [[0.4408660]]], [[[0.0624001]], [[0.0847161]], [[0.2883803]], [[0.2478378]]], [[[0.0624001]], [[0.0847161]], [[0.2883803]], [[0.2478378]]]]]

Expected (Unparsed): [[[[[0.11100039752999999]],[[0.150697149867]],[[0.51298488802]],[[0.44086598567]]],[[[0.11100039752999999]],[[0.150697149867]],[[0.51298488802]],[[0.44086598567]]],[[[0.062400128699999995]],[[0.08471610693]],[[0.2883802558]],[[0.2478377993]]],[[[0.062400128699999995]],[[0.08471610693]],[[0.2883802558]],[[0.2478377993]]]]]

Actual:   [[[[[0.1111]], [[0.1507]], [[0.513]], [[0.4409]]], [[[0.1111]], [[0.1507]], [[0.513]], [[0.4409]]], [[[0.0625]], [[0.0848]], [[0.2884]], [[0.2479]]], [[[0.0625]], [[0.0848]], [[0.2884]], [[0.2479]]]]]

Expected: [[[[[0.1111]], [[0.1507]], [[0.513]], [[0.4409]]], [[[0.1111]], [[0.1507]], [[0.513]], [[0.4409]]], [[[0.0625]], [[0.0848]], [[0.2884]], [[0.2479]]], [[[0.0625]], [[0.0848]], [[0.2884]], [[0.2479]]]]]