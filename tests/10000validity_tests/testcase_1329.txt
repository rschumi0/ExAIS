import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add18579 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Add18579 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Min81157 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Min81157 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))

Add18579 = keras.layers.Add(name = 'Add18579', )([in0Add18579,in1Add18579])
Res76710 = keras.layers.Reshape((1, 1, 1), name = 'Res76710', )(Add18579)
Zer82480 = keras.layers.ZeroPadding2D(padding=((3, 0), (0, 0)), name = 'Zer82480', )(Res76710)
Min81157 = keras.layers.Minimum(name = 'Min81157', )([in0Min81157,in1Min81157])
Res9682 = keras.layers.Reshape((2, 1, 4), name = 'Res9682', )(Min81157)
Glo13666 = keras.layers.GlobalMaxPool2D(name = 'Glo13666', )(Res9682)
Res88272 = keras.layers.Reshape((4, 1), name = 'Res88272', )(Glo13666)
Res78444 = keras.layers.Reshape((4, 1, 1), name = 'Res78444', )(Res88272)
Up_28388 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_28388', )(Res78444)
Max81547 = keras.layers.Maximum(name = 'Max81547', )([Zer82480,Up_28388])
model = tf.keras.models.Model(inputs=[in0Add18579,in1Add18579,in0Min81157,in1Min81157], outputs=Max81547)
in0Add18579 = tf.constant([[[[[0.1829]]]]])
in1Add18579 = tf.constant([[[[[0.8434]]]]])
in0Min81157 = tf.constant([[[[[0.6724, 0.6923], [0.7696, 0.1736]]], [[[0.8221, 0.7374], [0.4582, 0.9744]]]]])
in1Min81157 = tf.constant([[[[[0.3092, 0.8529], [0.496, 0.2352]]], [[[0.4126, 0.3022], [0.8135, 0.2159]]]]])
print (np.array2string(model.predict([in0Add18579,in1Add18579,in0Min81157,in1Min81157],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max81547.png')

LAdd18579 = add_layer([[[[[[0.1829]]]]], [[[[[0.8434]]]]]], Add18579), 
LRes76710 = reshape_layer(Add18579, [1, 1, 1], Res76710), 
LZer82480 = zero_padding2D_layer(Res76710, 3, 0, 0, 0, Zer82480), 
LMin81157 = minimum_layer([[[[[[0.6724, 0.6923], [0.7696, 0.1736]]], [[[0.8221, 0.7374], [0.4582, 0.9744]]]]], [[[[[0.3092, 0.8529], [0.496, 0.2352]]], [[[0.4126, 0.3022], [0.8135, 0.2159]]]]]], Min81157), 
LRes9682 = reshape_layer(Min81157, [2, 1, 4], Res9682), 
LGlo13666 = global_max_pool2D_layer(Res9682, Glo13666), 
LRes88272 = reshape_layer(Glo13666, [4, 1], Res88272), 
LRes78444 = reshape_layer(Res88272, [4, 1, 1], Res78444), 
LUp_28388 = up_sampling2D_layer(Res78444, 1, 1, Up_28388), 
LMax81547 = maximum_layer([Zer82480,Up_28388], Max81547), 
exec_layers([LAdd18579,LRes76710,LZer82480,LMin81157,LRes9682,LGlo13666,LRes88272,LRes78444,LUp_28388,LMax81547],["Add18579","Res76710","Zer82480","Min81157","Res9682","Glo13666","Res88272","Res78444","Up_28388","Max81547"],Max81547,"Max81547")

Actual (Unparsed): [[[[0.4126000]], [[0.6923000]], [[0.4960000]], [[1.0263000]]]]

Expected (Unparsed): [[[[0.4126]],[[0.6923]],[[0.496]],[[1.0263]]]]

Actual:   [[[[0.4126]], [[0.6923]], [[0.496]], [[1.0263]]]]

Expected: [[[[0.4126]], [[0.6923]], [[0.496]], [[1.0263]]]]