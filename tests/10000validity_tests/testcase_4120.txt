import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave67546 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave67546 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave67546 = keras.layers.Average(name = 'Ave67546', )([in0Ave67546,in1Ave67546])
Res72036 = keras.layers.Reshape((2, 4), name = 'Res72036', )(Ave67546)
Con24937 = keras.layers.Conv1D(3, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con24937', )(Res72036)
model = tf.keras.models.Model(inputs=[in0Ave67546,in1Ave67546], outputs=Con24937)
w = model.get_layer('Con24937').get_weights() 
w[0] = np.array([[[0.6208, 0.1501, 0.5987], [0.847, 0.8514, 0.3605], [0.5705, 0.3974, 0.4841], [0.7301, 0.736, 0.9042]], [[0.8173, 0.7639, 0.1358], [0.0375, 0.8574, 0.9715], [0.6478, 0.9182, 0.7815], [0.2115, 0.882, 0.2861]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con24937').set_weights(w) 
in0Ave67546 = tf.constant([[[[0.4594, 0.6099], [0.6545, 0.9373]], [[0.7418, 0.1887], [0.8817, 0.7474]]]])
in1Ave67546 = tf.constant([[[[0.1874, 0.0103], [0.321, 0.7735]], [[0.1677, 0.9772], [0.9579, 0.2631]]]])
print (np.array2string(model.predict([in0Ave67546,in1Ave67546],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con24937.png')

LAve67546 = average_layer([[[[[0.4594, 0.6099], [0.6545, 0.9373]], [[0.7418, 0.1887], [0.8817, 0.7474]]]], [[[[0.1874, 0.0103], [0.321, 0.7735]], [[0.1677, 0.9772], [0.9579, 0.2631]]]]], Ave67546), 
LRes72036 = reshape_layer(Ave67546, [2, 4], Res72036), 
LCon24937 = conv1D_layer(Res72036, 2,[[[0.6208, 0.1501, 0.5987], [0.847, 0.8514, 0.3605], [0.5705, 0.3974, 0.4841], [0.7301, 0.736, 0.9042]], [[0.8173, 0.7639, 0.1358], [0.0375, 0.8574, 0.9715], [0.6478, 0.9182, 0.7815], [0.2115, 0.882, 0.2861]]],[0, 0, 0], 1, false, 1, Con24937), 
exec_layers([LAve67546,LRes72036,LCon24937],["Ave67546","Res72036","Con24937"],Con24937,"Con24937")

Actual (Unparsed): [[[2.4624450, 3.2733634, 2.8064498]]]

Expected (Unparsed): [[[2.46244495,3.273363445,2.8064497849999994]]]

Actual:   [[[2.4625, 3.2734, 2.8065]]]

Expected: [[[2.4625, 3.2734, 2.8065]]]