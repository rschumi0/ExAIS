import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add74522 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add74522 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con89731 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Cro41389 = tf.keras.layers.Input(shape=([1, 3, 3]))

Add74522 = keras.layers.Add(name = 'Add74522', )([in0Add74522,in1Add74522])
Con89731 = keras.layers.Concatenate(axis=3, name = 'Con89731', )([Add74522,in0Con89731])
Cro41389 = keras.layers.Cropping2D(cropping=((0, 0), (2, 0)), name = 'Cro41389', )(in0Cro41389)
Sof4214 = keras.layers.Softmax(axis=1, name = 'Sof4214', )(Cro41389)
Zer91766 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer91766', )(Sof4214)
Mul17777 = keras.layers.Multiply(name = 'Mul17777', )([Con89731,Zer91766])
model = tf.keras.models.Model(inputs=[in0Add74522,in1Add74522,in0Con89731,in0Cro41389], outputs=Mul17777)
in0Add74522 = tf.constant([[[[0.021, 0.4376], [0.355, 0.7691]], [[0.9339, 0.7884], [0.1092, 0.5505]]]])
in1Add74522 = tf.constant([[[[0.2658, 0.2917], [0.4286, 0.1157]], [[0.2288, 0.41], [0.0078, 0.885]]]])
in0Con89731 = tf.constant([[[[0.6301], [0.1514]], [[0.1927], [0.2219]]]])
in0Cro41389 = tf.constant([[[[1.6367, 1.9483, 1.344], [1.041, 1.4059, 1.1968], [1.6067, 1.9007, 1.5023]]]])
print (np.array2string(model.predict([in0Add74522,in1Add74522,in0Con89731,in0Cro41389],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul17777.png')

LAdd74522 = add_layer([[[[[0.021, 0.4376], [0.355, 0.7691]], [[0.9339, 0.7884], [0.1092, 0.5505]]]], [[[[0.2658, 0.2917], [0.4286, 0.1157]], [[0.2288, 0.41], [0.0078, 0.885]]]]], Add74522), 
LCon89731 = concatenate_layer([Add74522,[[[[0.6301], [0.1514]], [[0.1927], [0.2219]]]]], 3, Con89731), 
LCro41389 = cropping2D_layer([[[[1.6367, 1.9483, 1.344], [1.041, 1.4059, 1.1968], [1.6067, 1.9007, 1.5023]]]], 0, 0, 2, 0, Cro41389), 
LSof4214 = softmax_layer(Cro41389, 1, Sof4214), 
LZer91766 = zero_padding2D_layer(Sof4214, 1, 0, 1, 0, Zer91766), 
LMul17777 = multiply_layer([Con89731,Zer91766], Mul17777), 
exec_layers([LAdd74522,LCon89731,LCro41389,LSof4214,LZer91766,LMul17777],["Add74522","Con89731","Cro41389","Sof4214","Zer91766","Mul17777"],Mul17777,"Mul17777")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.1170000, 1.4355000, 0.2219000]]]]

Expected (Unparsed): [[[[0.0,0.0,0.0],[0.0,0.0,0.0]],[[0.0,0.0,0.0],[0.117,1.4355,0.2219]]]]

Actual:   [[[[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0.117, 1.4355, 0.2219]]]]

Expected: [[[[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0.117, 1.4355, 0.2219]]]]