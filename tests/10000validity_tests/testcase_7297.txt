import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep50316 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Den75776 = tf.keras.layers.Input(shape=([4, 3]))

Dep50316 = keras.layers.DepthwiseConv2D((2, 1),strides=(1, 1), padding='valid', name = 'Dep50316', )(in0Dep50316)
Res92328 = keras.layers.Reshape((1, 2), name = 'Res92328', )(Dep50316)
Den75776 = keras.layers.Dense(2,name = 'Den75776', )(in0Den75776)
Dot42404 = keras.layers.Dot(axes=(2, 2), name = 'Dot42404', )([Res92328,Den75776])
model = tf.keras.models.Model(inputs=[in0Dep50316,in0Den75776], outputs=Dot42404)
w = model.get_layer('Dep50316').get_weights() 
w[0] = np.array([[[[0.2838]]], [[[0.6235]]]])
w[1] = np.array([0])
model.get_layer('Dep50316').set_weights(w) 
w = model.get_layer('Den75776').get_weights() 
w[0] = np.array([[0.6469, 0.2045], [0.0743, 0.2641], [0.7069, 0.9999]])
w[1] = np.array([0.099, 0.4137])
model.get_layer('Den75776').set_weights(w) 
in0Dep50316 = tf.constant([[[[0.8712], [0.2409]], [[0.3721], [0.6277]]]])
in0Den75776 = tf.constant([[[0.6591, 0.2214, 0.5393], [0.0027, 0.5398, 0.8328], [0.9199, 0.064, 0.0247], [0.6374, 0.3747, 0.6605]]])
print (np.array2string(model.predict([in0Dep50316,in0Den75776],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot42404.png')

LDep50316 = depthwise_conv2D_layer([[[[0.8712], [0.2409]], [[0.3721], [0.6277]]]], 2, 1,[[[[0.2838]]], [[[0.6235]]]],[0], 1, 1, false, Dep50316), 
LRes92328 = reshape_layer(Dep50316, [1, 2], Res92328), 
LDen75776 = dense_layer([[[0.6591, 0.2214, 0.5393], [0.0027, 0.5398, 0.8328], [0.9199, 0.064, 0.0247], [0.6374, 0.3747, 0.6605]]], [[0.6469, 0.2045], [0.0743, 0.2641], [0.7069, 0.9999]],[0.099, 0.4137], Den75776), 
LDot42404 = dot_layer(Res92328,Den75776, 2, 2, Dot42404), 
exec_layers([LDep50316,LRes92328,LDen75776,LDot42404],["Dep50316","Res92328","Den75776","Dot42404"],Dot42404,"Dot42404")

Actual (Unparsed): [[[0.9693278, 0.9884626, 0.6390915, 1.0814072]]]

Expected (Unparsed): [[[0.9693278289534831,0.9884626172852005,0.6390915417884829,1.0814071999011177]]]

Actual:   [[[0.9694, 0.9885, 0.6391, 1.0815]]]

Expected: [[[0.9694, 0.9885, 0.6391, 1.0815]]]