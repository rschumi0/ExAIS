import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo53899 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))

Glo53899 = keras.layers.GlobalMaxPool3D(name = 'Glo53899', )(in0Glo53899)
Res91388 = keras.layers.Reshape((2, 1), name = 'Res91388', )(Glo53899)
Res90558 = keras.layers.Reshape((2, 1, 1), name = 'Res90558', )(Res91388)
Res7418 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res7418', )(Res90558)
Glo81107 = keras.layers.GlobalAveragePooling3D(name = 'Glo81107', )(Res7418)
Mas58755 = keras.layers.Masking(mask_value=2, name = 'Mas58755', )(Glo81107)
Res55288 = keras.layers.Reshape((1, 1), name = 'Res55288', )(Mas58755)
Ave79736 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave79736', )(Res55288)
model = tf.keras.models.Model(inputs=[in0Glo53899], outputs=Ave79736)
in0Glo53899 = tf.constant([[[[[1.1706, 1.6662]], [[1.6678, 1.6021]]], [[[1.3788, 1.7088]], [[1.9739, 1.1431]]]]])
print (np.array2string(model.predict([in0Glo53899],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave79736.png')

LGlo53899 = global_max_pool3D_layer([[[[[1.1706, 1.6662]], [[1.6678, 1.6021]]], [[[1.3788, 1.7088]], [[1.9739, 1.1431]]]]], Glo53899), 
LRes91388 = reshape_layer(Glo53899, [2, 1], Res91388), 
LRes90558 = reshape_layer(Res91388, [2, 1, 1], Res90558), 
LRes7418 = reshape_layer(Res90558, [2, 1, 1, 1], Res7418), 
LGlo81107 = global_average_pooling3D_layer(Res7418, Glo81107), 
LMas58755 = masking_layer(Glo81107, 2, Mas58755), 
LRes55288 = reshape_layer(Mas58755, [1, 1], Res55288), 
LAve79736 = average_pooling1D_layer(Res55288, 1, Ave79736), 
exec_layers([LGlo53899,LRes91388,LRes90558,LRes7418,LGlo81107,LMas58755,LRes55288,LAve79736],["Glo53899","Res91388","Res90558","Res7418","Glo81107","Mas58755","Res55288","Ave79736"],Ave79736,"Ave79736")

Actual (Unparsed): [[[1.8413500]]]

Expected (Unparsed): [[[1.84135]]]

Actual:   [[[1.8414]]]

Expected: [[[1.8414]]]