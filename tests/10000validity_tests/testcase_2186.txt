import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla86909 = tf.keras.layers.Input(shape=([1, 4]))
in0Con42525 = tf.keras.layers.Input(shape=([5, 3]))
in0Con74457 = tf.keras.layers.Input(shape=([1, 2]))
in0Con32714 = tf.keras.layers.Input(shape=([1, 2]))
in0Max82577 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con85162 = tf.keras.layers.Input(shape=([5, 3]))
in0Up_71894 = tf.keras.layers.Input(shape=([4, 4]))

Fla86909 = keras.layers.Flatten(name = 'Fla86909', )(in0Fla86909)
Res16396 = keras.layers.Reshape((4, 1), name = 'Res16396', )(Fla86909)
Zer74263 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer74263', )(Res16396)
Con42525 = keras.layers.Concatenate(axis=2, name = 'Con42525', )([Zer74263,in0Con42525])
Con74457 = keras.layers.Conv1D(3, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con74457', )(in0Con74457)
Con32714 = keras.layers.Concatenate(axis=2, name = 'Con32714', )([Con74457,in0Con32714])
Max82577 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max82577', )(in0Max82577)
Res20678 = keras.layers.Reshape((1, 1), name = 'Res20678', )(Max82577)
Dot31134 = keras.layers.Dot(axes=(1, 1), name = 'Dot31134', )([Con32714,Res20678])
Con85162 = keras.layers.Concatenate(axis=2, name = 'Con85162', )([Dot31134,in0Con85162])
Up_71894 = keras.layers.UpSampling1D(size=(1), name = 'Up_71894', )(in0Up_71894)
Zer94596 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer94596', )(Up_71894)
Ave28666 = keras.layers.Average(name = 'Ave28666', )([Con85162,Zer94596])
Add39404 = keras.layers.Add(name = 'Add39404', )([Con42525,Ave28666])
model = tf.keras.models.Model(inputs=[in0Fla86909,in0Con42525,in0Con74457,in0Con32714,in0Max82577,in0Con85162,in0Up_71894], outputs=Add39404)
w = model.get_layer('Con74457').get_weights() 
w[0] = np.array([[[0.4045, 0.2967, 0.8241], [0.5763, 0.852, 0.5166]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con74457').set_weights(w) 
in0Fla86909 = tf.constant([[[1.679, 1.1759, 1.508, 1.6219]]])
in0Con42525 = tf.constant([[[0.5485, 0.7559, 0.9711], [0.6159, 0.4052, 0.2057], [0.1618, 0.9237, 0.6379], [0.5258, 0.2848, 0.8001], [0.9236, 0.9633, 0.7522]]])
in0Con74457 = tf.constant([[[0.6619, 0.1167]]])
in0Con32714 = tf.constant([[[0.6135, 0.953]]])
in0Max82577 = tf.constant([[[[1.5335]]]])
in0Con85162 = tf.constant([[[0.1194, 0.6684, 0.2234], [0.5319, 0.6679, 0.6831], [0.0113, 0.6549, 0.1105], [0.1774, 0.7449, 0.0064], [0.707, 0.2933, 0.3012]]])
in0Up_71894 = tf.constant([[[1.6616, 1.8743, 1.4258, 1.9975], [1.4677, 1.5017, 1.0507, 1.0792], [1.7701, 1.7335, 1.022, 1.422], [1.3843, 1.1109, 1.163, 1.292]]])
print (np.array2string(model.predict([in0Fla86909,in0Con42525,in0Con74457,in0Con32714,in0Max82577,in0Con85162,in0Up_71894],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add39404.png')

LFla86909 = flatten_layer([[[1.679, 1.1759, 1.508, 1.6219]]], Fla86909), 
LRes16396 = reshape_layer(Fla86909, [4, 1], Res16396), 
LZer74263 = zero_padding1D_layer(Res16396, 1, 0, Zer74263), 
LCon42525 = concatenate_layer([Zer74263,[[[0.5485, 0.7559, 0.9711], [0.6159, 0.4052, 0.2057], [0.1618, 0.9237, 0.6379], [0.5258, 0.2848, 0.8001], [0.9236, 0.9633, 0.7522]]]], 2, Con42525), 
LCon74457 = conv1D_layer([[[0.6619, 0.1167]]], 1,[[[0.4045, 0.2967, 0.8241], [0.5763, 0.852, 0.5166]]],[0, 0, 0], 1, true, 1, Con74457), 
LCon32714 = concatenate_layer([Con74457,[[[0.6135, 0.953]]]], 2, Con32714), 
LMax82577 = max_pool2D_layer([[[[1.5335]]]], 1, 1, Max82577), 
LRes20678 = reshape_layer(Max82577, [1, 1], Res20678), 
LDot31134 = dot_layer(Con32714,Res20678, 1, 1, Dot31134), 
LCon85162 = concatenate_layer([Dot31134,[[[0.1194, 0.6684, 0.2234], [0.5319, 0.6679, 0.6831], [0.0113, 0.6549, 0.1105], [0.1774, 0.7449, 0.0064], [0.707, 0.2933, 0.3012]]]], 2, Con85162), 
LUp_71894 = up_sampling1D_layer([[[1.6616, 1.8743, 1.4258, 1.9975], [1.4677, 1.5017, 1.0507, 1.0792], [1.7701, 1.7335, 1.022, 1.422], [1.3843, 1.1109, 1.163, 1.292]]], 1, Up_71894), 
LZer94596 = zero_padding1D_layer(Up_71894, 1, 0, Zer94596), 
LAve28666 = average_layer([Con85162,Zer94596], Ave28666), 
LAdd39404 = add_layer([Con42525,Ave28666], Add39404), 
exec_layers([LFla86909,LRes16396,LZer74263,LCon42525,LCon74457,LCon32714,LMax82577,LRes20678,LDot31134,LCon85162,LUp_71894,LZer94596,LAve28666,LAdd39404],["Fla86909","Res16396","Zer74263","Con42525","Con74457","Con32714","Max82577","Res20678","Dot31134","Con85162","Up_71894","Zer94596","Ave28666","Add39404"],Add39404,"Add39404")

Actual (Unparsed): [[[0.2568557, 0.6082000, 1.0901000, 1.0828000], [2.7366155, 1.8190000, 1.4520500, 1.5460000], [2.3742157, 0.9183000, 1.7765000, 1.2327500], [2.8634511, 1.4812500, 1.1682500, 1.5143001], [3.0447627, 1.8325500, 1.6914500, 1.5488000]]]

Expected (Unparsed): [[[0.25685569873,0.6082,1.0901,1.0828],[2.7366154841775003,1.819,1.45205,1.546],[2.3742157209175003,0.9183000000000001,1.7765,1.23275],[2.863451125,1.4812500000000002,1.16825,1.5143],[3.0447627500000003,1.83255,1.6914500000000001,1.5488]]]

Actual:   [[[0.2569, 0.6082, 1.0901, 1.0828], [2.7367, 1.819, 1.4521, 1.546], [2.3743, 0.9183, 1.7765, 1.2328], [2.8635, 1.4813, 1.1683, 1.5144], [3.0448, 1.8326, 1.6915, 1.5488]]]

Expected: [[[0.2569, 0.6082, 1.0901, 1.0828], [2.7367, 1.819, 1.4521, 1.546], [2.3743, 0.9184, 1.7765, 1.2328], [2.8635, 1.4813, 1.1683, 1.5143], [3.0448, 1.8326, 1.6915, 1.5488]]]