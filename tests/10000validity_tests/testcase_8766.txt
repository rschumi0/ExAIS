import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo70399 = tf.keras.layers.Input(shape=([1, 2]))
in0Sub58585 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub58585 = tf.keras.layers.Input(shape=([2, 2, 2]))

Glo70399 = keras.layers.GlobalAveragePooling1D(name = 'Glo70399', )(in0Glo70399)
Res13565 = keras.layers.Reshape((2, 1), name = 'Res13565', )(Glo70399)
Zer9600 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer9600', )(Res13565)
Sub58585 = keras.layers.Subtract(name = 'Sub58585', )([in0Sub58585,in1Sub58585])
Res53741 = keras.layers.Reshape((2, 4), name = 'Res53741', )(Sub58585)
Max50068 = keras.layers.MaxPool1D(pool_size=(2), name = 'Max50068', )(Res53741)
Per27541 = keras.layers.Permute((2,1), name = 'Per27541',)(Max50068)
Ave86349 = keras.layers.Average(name = 'Ave86349', )([Zer9600,Per27541])
Res62850 = keras.layers.Reshape((4, 1, 1), name = 'Res62850', )(Ave86349)
Res18693 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res18693', )(Res62850)
Glo6705 = keras.layers.GlobalMaxPool3D(name = 'Glo6705', )(Res18693)
model = tf.keras.models.Model(inputs=[in0Glo70399,in0Sub58585,in1Sub58585], outputs=Glo6705)
in0Glo70399 = tf.constant([[[1.9962, 1.3829]]])
in0Sub58585 = tf.constant([[[[0.7267, 0.4263], [0.8191, 0.6117]], [[0.3008, 0.156], [0.7182, 0.1276]]]])
in1Sub58585 = tf.constant([[[[0.8062, 0.4653], [0.083, 0.4421]], [[0.6587, 0.1793], [0.2179, 0.0155]]]])
print (np.array2string(model.predict([in0Glo70399,in0Sub58585,in1Sub58585],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo6705.png')

LGlo70399 = global_average_pooling1D_layer([[[1.9962, 1.3829]]], Glo70399), 
LRes13565 = reshape_layer(Glo70399, [2, 1], Res13565), 
LZer9600 = zero_padding1D_layer(Res13565, 2, 0, Zer9600), 
LSub58585 = subtract_layer([[[[0.7267, 0.4263], [0.8191, 0.6117]], [[0.3008, 0.156], [0.7182, 0.1276]]]], [[[[0.8062, 0.4653], [0.083, 0.4421]], [[0.6587, 0.1793], [0.2179, 0.0155]]]], Sub58585), 
LRes53741 = reshape_layer(Sub58585, [2, 4], Res53741), 
LMax50068 = max_pool1D_layer(Res53741, 2, Max50068), 
LPer27541 = permute_layer(Max50068, 2,1, Per27541), 
LAve86349 = average_layer([Zer9600,Per27541], Ave86349), 
LRes62850 = reshape_layer(Ave86349, [4, 1, 1], Res62850), 
LRes18693 = reshape_layer(Res62850, [4, 1, 1, 1], Res18693), 
LGlo6705 = global_max_pool3D_layer(Res18693, Glo6705), 
exec_layers([LGlo70399,LRes13565,LZer9600,LSub58585,LRes53741,LMax50068,LPer27541,LAve86349,LRes62850,LRes18693,LGlo6705],["Glo70399","Res13565","Zer9600","Sub58585","Res53741","Max50068","Per27541","Ave86349","Res62850","Res18693","Glo6705"],Glo6705,"Glo6705")

Actual (Unparsed): [[1.3661500]]

Expected (Unparsed): [[1.36615]]

Actual:   [[1.3662]]

Expected: [[1.3662]]