import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add50991 = tf.keras.layers.Input(shape=([1, 1]))
in1Add50991 = tf.keras.layers.Input(shape=([1, 1]))
in0Con95338 = tf.keras.layers.Input(shape=([1, 1]))
in0Min61006 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Min61006 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Ave92665 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave92665 = tf.keras.layers.Input(shape=([2, 2]))
in0Con71754 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Cro15379 = tf.keras.layers.Input(shape=([2, 4, 4]))

Add50991 = keras.layers.Add(name = 'Add50991', )([in0Add50991,in1Add50991])
Res29151 = keras.layers.Reshape((1, 1, 1), name = 'Res29151', )(Add50991)
Cro28208 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro28208', )(Res29151)
Res40498 = keras.layers.Reshape((1, 1), name = 'Res40498', )(Cro28208)
Con95338 = keras.layers.Concatenate(axis=2, name = 'Con95338', )([Res40498,in0Con95338])
Min61006 = keras.layers.Minimum(name = 'Min61006', )([in0Min61006,in1Min61006])
Res69763 = keras.layers.Reshape((2, 1, 2), name = 'Res69763', )(Min61006)
Ave92665 = keras.layers.Average(name = 'Ave92665', )([in0Ave92665,in1Ave92665])
Res49030 = keras.layers.Reshape((2, 1, 2), name = 'Res49030', )(Ave92665)
Add83311 = keras.layers.Add(name = 'Add83311', )([Res69763,Res49030])
Res16904 = keras.layers.Reshape((2, 2), name = 'Res16904', )(Add83311)
Dot97111 = keras.layers.Dot(axes=(2, 2), name = 'Dot97111', )([Con95338,Res16904])
Res93884 = keras.layers.Reshape((1, 2, 1), name = 'Res93884', )(Dot97111)
Con71754 = keras.layers.Concatenate(axis=3, name = 'Con71754', )([Res93884,in0Con71754])
Cro15379 = keras.layers.Cropping2D(cropping=((1, 0), (0, 3)), name = 'Cro15379', )(in0Cro15379)
Zer60514 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer60514', )(Cro15379)
Ave55550 = keras.layers.Average(name = 'Ave55550', )([Con71754,Zer60514])
model = tf.keras.models.Model(inputs=[in0Add50991,in1Add50991,in0Con95338,in0Min61006,in1Min61006,in0Ave92665,in1Ave92665,in0Con71754,in0Cro15379], outputs=Ave55550)
in0Add50991 = tf.constant([[[0.0527]]])
in1Add50991 = tf.constant([[[0.1135]]])
in0Con95338 = tf.constant([[[0.7536]]])
in0Min61006 = tf.constant([[[[[0.3178, 0.8308]]], [[[0.0026, 0.1265]]]]])
in1Min61006 = tf.constant([[[[[0.1766, 0.1644]]], [[[0.8186, 0.2926]]]]])
in0Ave92665 = tf.constant([[[0.7001, 0.988], [0.3929, 0.9913]]])
in1Ave92665 = tf.constant([[[0.259, 0.0328], [0.08, 0.0095]]])
in0Con71754 = tf.constant([[[[0.5503, 0.1478, 0.6356], [0.5632, 0.3377, 0.7103]]]])
in0Cro15379 = tf.constant([[[[1.6781, 1.7727, 1.3938, 1.827], [1.9869, 1.7868, 1.4937, 1.7785], [1.8328, 1.5963, 1.7357, 1.1153], [1.5683, 1.6101, 1.2019, 1.444]], [[1.6145, 1.3549, 1.9131, 1.8869], [1.9514, 1.6046, 1.3834, 1.5787], [1.4873, 1.3727, 1.2794, 1.7896], [1.6209, 1.9874, 1.2096, 1.0489]]]])
print (np.array2string(model.predict([in0Add50991,in1Add50991,in0Con95338,in0Min61006,in1Min61006,in0Ave92665,in1Ave92665,in0Con71754,in0Cro15379],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave55550.png')

LAdd50991 = add_layer([[[[0.0527]]], [[[0.1135]]]], Add50991), 
LRes29151 = reshape_layer(Add50991, [1, 1, 1], Res29151), 
LCro28208 = cropping2D_layer(Res29151, 0, 0, 0, 0, Cro28208), 
LRes40498 = reshape_layer(Cro28208, [1, 1], Res40498), 
LCon95338 = concatenate_layer([Res40498,[[[0.7536]]]], 2, Con95338), 
LMin61006 = minimum_layer([[[[[[0.3178, 0.8308]]], [[[0.0026, 0.1265]]]]], [[[[[0.1766, 0.1644]]], [[[0.8186, 0.2926]]]]]], Min61006), 
LRes69763 = reshape_layer(Min61006, [2, 1, 2], Res69763), 
LAve92665 = average_layer([[[[0.7001, 0.988], [0.3929, 0.9913]]], [[[0.259, 0.0328], [0.08, 0.0095]]]], Ave92665), 
LRes49030 = reshape_layer(Ave92665, [2, 1, 2], Res49030), 
LAdd83311 = add_layer([Res69763,Res49030], Add83311), 
LRes16904 = reshape_layer(Add83311, [2, 2], Res16904), 
LDot97111 = dot_layer(Con95338,Res16904, 2, 2, Dot97111), 
LRes93884 = reshape_layer(Dot97111, [1, 2, 1], Res93884), 
LCon71754 = concatenate_layer([Res93884,[[[[0.5503, 0.1478, 0.6356], [0.5632, 0.3377, 0.7103]]]]], 3, Con71754), 
LCro15379 = cropping2D_layer([[[[1.6781, 1.7727, 1.3938, 1.827], [1.9869, 1.7868, 1.4937, 1.7785], [1.8328, 1.5963, 1.7357, 1.1153], [1.5683, 1.6101, 1.2019, 1.444]], [[1.6145, 1.3549, 1.9131, 1.8869], [1.9514, 1.6046, 1.3834, 1.5787], [1.4873, 1.3727, 1.2794, 1.7896], [1.6209, 1.9874, 1.2096, 1.0489]]]], 1, 0, 0, 3, Cro15379), 
LZer60514 = zero_padding2D_layer(Cro15379, 0, 0, 1, 0, Zer60514), 
LAve55550 = average_layer([Con71754,Zer60514], Ave55550), 
exec_layers([LAdd50991,LRes29151,LCro28208,LRes40498,LCon95338,LMin61006,LRes69763,LAve92665,LRes49030,LAdd83311,LRes16904,LDot97111,LRes93884,LCon71754,LCro15379,LZer60514,LAve55550],["Add50991","Res29151","Cro28208","Res40498","Con95338","Min61006","Res69763","Ave92665","Res49030","Add83311","Res16904","Dot97111","Res93884","Con71754","Cro15379","Zer60514","Ave55550"],Ave55550,"Ave55550")

Actual (Unparsed): [[[[0.3087907, 0.2751500, 0.0739000, 0.3178000], [1.0633310, 0.9590500, 1.1254000, 1.2986000]]]]

Expected (Unparsed): [[[[0.308790705,0.27515,0.0739,0.3178],[1.063330975,0.95905,1.1254,1.2986]]]]

Actual:   [[[[0.3088, 0.2752, 0.0739, 0.3178], [1.0634, 0.9591, 1.1254, 1.2986]]]]

Expected: [[[[0.3088, 0.2752, 0.0739, 0.3178], [1.0634, 0.9591, 1.1254, 1.2986]]]]