import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max10592 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Max10592 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Glo22400 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con26041 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave37675 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave37675 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Max10592 = keras.layers.Maximum(name = 'Max10592', )([in0Max10592,in1Max10592])
Zer1290 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer1290', )(Max10592)
Glo22400 = keras.layers.GlobalMaxPool2D(name = 'Glo22400', )(in0Glo22400)
Res15822 = keras.layers.Reshape((2, 1), name = 'Res15822', )(Glo22400)
Res73945 = keras.layers.Reshape((2, 1, 1), name = 'Res73945', )(Res15822)
Res24870 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res24870', )(Res73945)
Zer97887 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer97887', )(Res24870)
Con26041 = keras.layers.Concatenate(axis=4, name = 'Con26041', )([Zer97887,in0Con26041])
Ave37675 = keras.layers.Average(name = 'Ave37675', )([in0Ave37675,in1Ave37675])
Sub42388 = keras.layers.Subtract(name = 'Sub42388', )([Con26041,Ave37675])
Min72437 = keras.layers.Minimum(name = 'Min72437', )([Zer1290,Sub42388])
model = tf.keras.models.Model(inputs=[in0Max10592,in1Max10592,in0Glo22400,in0Con26041,in0Ave37675,in1Ave37675], outputs=Min72437)
in0Max10592 = tf.constant([[[[[0.0118, 0.0325], [0.9532, 0.0859]]], [[[0.5063, 0.4641], [0.6714, 0.5185]]]]])
in1Max10592 = tf.constant([[[[[0.7509, 0.4565], [0.1114, 0.8089]]], [[[0.98, 0.7003], [0.899, 0.2186]]]]])
in0Glo22400 = tf.constant([[[[1.447, 1.1312], [1.4658, 1.6072]]]])
in0Con26041 = tf.constant([[[[[0.5364], [0.4379]], [[0.1509], [0.8531]]], [[[0.4885], [0.1065]], [[0.16], [0.7946]]]]])
in0Ave37675 = tf.constant([[[[[0.7126, 0.0795], [0.9749, 0.1934]], [[0.941, 0.0787], [0.6679, 0.239]]], [[[0.3186, 0.8657], [0.8919, 0.6663]], [[0.1965, 0.5623], [0.0693, 0.2156]]]]])
in1Ave37675 = tf.constant([[[[[0.3217, 0.0263], [0.6507, 0.3886]], [[0.5753, 0.8791], [0.6613, 0.085]]], [[[0.9577, 0.778], [0.7892, 0.5393]], [[0.178, 0.0831], [0.0945, 0.8875]]]]])
print (np.array2string(model.predict([in0Max10592,in1Max10592,in0Glo22400,in0Con26041,in0Ave37675,in1Ave37675],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min72437.png')

LMax10592 = maximum_layer([[[[[[0.0118, 0.0325], [0.9532, 0.0859]]], [[[0.5063, 0.4641], [0.6714, 0.5185]]]]], [[[[[0.7509, 0.4565], [0.1114, 0.8089]]], [[[0.98, 0.7003], [0.899, 0.2186]]]]]], Max10592), 
LZer1290 = zero_padding3D_layer(Max10592, 0, 0, 1, 0, 0, 0, Zer1290), 
LGlo22400 = global_max_pool2D_layer([[[[1.447, 1.1312], [1.4658, 1.6072]]]], Glo22400), 
LRes15822 = reshape_layer(Glo22400, [2, 1], Res15822), 
LRes73945 = reshape_layer(Res15822, [2, 1, 1], Res73945), 
LRes24870 = reshape_layer(Res73945, [2, 1, 1, 1], Res24870), 
LZer97887 = zero_padding3D_layer(Res24870, 0, 0, 1, 0, 1, 0, Zer97887), 
LCon26041 = concatenate_layer([Zer97887,[[[[[0.5364], [0.4379]], [[0.1509], [0.8531]]], [[[0.4885], [0.1065]], [[0.16], [0.7946]]]]]], 4, Con26041), 
LAve37675 = average_layer([[[[[[0.7126, 0.0795], [0.9749, 0.1934]], [[0.941, 0.0787], [0.6679, 0.239]]], [[[0.3186, 0.8657], [0.8919, 0.6663]], [[0.1965, 0.5623], [0.0693, 0.2156]]]]], [[[[[0.3217, 0.0263], [0.6507, 0.3886]], [[0.5753, 0.8791], [0.6613, 0.085]]], [[[0.9577, 0.778], [0.7892, 0.5393]], [[0.178, 0.0831], [0.0945, 0.8875]]]]]], Ave37675), 
LSub42388 = subtract_layer(Con26041,Ave37675, Sub42388), 
LMin72437 = minimum_layer([Zer1290,Sub42388], Min72437), 
exec_layers([LMax10592,LZer1290,LGlo22400,LRes15822,LRes73945,LRes24870,LZer97887,LCon26041,LAve37675,LSub42388,LMin72437],["Max10592","Zer1290","Glo22400","Res15822","Res73945","Res24870","Zer97887","Con26041","Ave37675","Sub42388","Min72437"],Min72437,"Min72437")

Actual (Unparsed): [[[[[-0.5171500, 0.0000000], [-0.8128000, 0.0000000]], [[-0.7581500, -0.3280000], [0.8012000, 0.6911000]]], [[[-0.6381500, -0.3333500], [-0.8405500, -0.4963000]], [[-0.1872500, -0.1627000], [0.8990000, 0.2430500]]]]]

Expected (Unparsed): [[[[[-0.51715,0],[-0.8128,0]],[[-0.75815,-0.32799999999999996],[0.8011999999999999,0.6910999999999999]]],[[[-0.63815,-0.33335],[-0.84055,-0.4963]],[[-0.18725,-0.16269999999999998],[0.899,0.24305]]]]]

Actual:   [[[[[-0.5171, 0], [-0.8128, 0]], [[-0.7581, -0.328], [0.8012, 0.6911]]], [[[-0.6381, -0.3333], [-0.8405, -0.4963]], [[-0.1872, -0.1627], [0.899, 0.2431]]]]]

Expected: [[[[[-0.5171, 0], [-0.8128, 0]], [[-0.7581, -0.3279], [0.8012, 0.6911]]], [[[-0.6381, -0.3333], [-0.8405, -0.4963]], [[-0.1872, -0.1626], [0.899, 0.2431]]]]]