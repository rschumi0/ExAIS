import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min27688 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Min27688 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Ave21835 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave21835 = tf.keras.layers.Input(shape=([2, 2]))
in0Con12586 = tf.keras.layers.Input(shape=([2, 2]))

Min27688 = keras.layers.Minimum(name = 'Min27688', )([in0Min27688,in1Min27688])
Res415 = keras.layers.Reshape((1, 4), name = 'Res415', )(Min27688)
Zer97371 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer97371', )(Res415)
Ave21835 = keras.layers.Average(name = 'Ave21835', )([in0Ave21835,in1Ave21835])
Con12586 = keras.layers.Concatenate(axis=2, name = 'Con12586', )([Ave21835,in0Con12586])
Sub78373 = keras.layers.Subtract(name = 'Sub78373', )([Zer97371,Con12586])
model = tf.keras.models.Model(inputs=[in0Min27688,in1Min27688,in0Ave21835,in1Ave21835,in0Con12586], outputs=Sub78373)
in0Min27688 = tf.constant([[[[0.2965, 0.8467], [0.8628, 0.0334]]]])
in1Min27688 = tf.constant([[[[0.3174, 0.674], [0.3101, 0.6547]]]])
in0Ave21835 = tf.constant([[[0.2081, 0.8249], [0.8884, 0.7504]]])
in1Ave21835 = tf.constant([[[0.9209, 0.617], [0.5817, 0.8604]]])
in0Con12586 = tf.constant([[[0.5912, 0.2279], [0.9055, 0.5736]]])
print (np.array2string(model.predict([in0Min27688,in1Min27688,in0Ave21835,in1Ave21835,in0Con12586],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub78373.png')

LMin27688 = minimum_layer([[[[[0.2965, 0.8467], [0.8628, 0.0334]]]], [[[[0.3174, 0.674], [0.3101, 0.6547]]]]], Min27688), 
LRes415 = reshape_layer(Min27688, [1, 4], Res415), 
LZer97371 = zero_padding1D_layer(Res415, 1, 0, Zer97371), 
LAve21835 = average_layer([[[[0.2081, 0.8249], [0.8884, 0.7504]]], [[[0.9209, 0.617], [0.5817, 0.8604]]]], Ave21835), 
LCon12586 = concatenate_layer([Ave21835,[[[0.5912, 0.2279], [0.9055, 0.5736]]]], 2, Con12586), 
LSub78373 = subtract_layer(Zer97371,Con12586, Sub78373), 
exec_layers([LMin27688,LRes415,LZer97371,LAve21835,LCon12586,LSub78373],["Min27688","Res415","Zer97371","Ave21835","Con12586","Sub78373"],Sub78373,"Sub78373")

Actual (Unparsed): [[[-0.5645000, -0.7209500, -0.5912000, -0.2279000], [-0.4385500, -0.1314000, -0.5954000, -0.5402000]]]

Expected (Unparsed): [[[-0.5645,-0.72095,-0.5912,-0.2279],[-0.43855,-0.13139999999999996,-0.5953999999999999,-0.5402]]]

Actual:   [[[-0.5645, -0.7209, -0.5912, -0.2279], [-0.4385, -0.1314, -0.5954, -0.5402]]]

Expected: [[[-0.5645, -0.7209, -0.5912, -0.2279], [-0.4385, -0.1313, -0.5953, -0.5402]]]