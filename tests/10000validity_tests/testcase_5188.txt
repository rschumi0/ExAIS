import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot18804 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot18804 = tf.keras.layers.Input(shape=([3, 2]))
in0Max53544 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max53544 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con43177 = tf.keras.layers.Input(shape=([3]))

Dot18804 = keras.layers.Dot(axes=(1, 1), name = 'Dot18804', )([in0Dot18804,in1Dot18804])
Fla90968 = keras.layers.Flatten(name = 'Fla90968', )(Dot18804)
Max53544 = keras.layers.Maximum(name = 'Max53544', )([in0Max53544,in1Max53544])
Res30484 = keras.layers.Reshape((1, 1, 1), name = 'Res30484', )(Max53544)
Cro28210 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro28210', )(Res30484)
Res40427 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res40427', )(Cro28210)
Glo33590 = keras.layers.GlobalMaxPool3D(name = 'Glo33590', )(Res40427)
Con43177 = keras.layers.Concatenate(axis=1, name = 'Con43177', )([Glo33590,in0Con43177])
Ave45306 = keras.layers.Average(name = 'Ave45306', )([Fla90968,Con43177])
model = tf.keras.models.Model(inputs=[in0Dot18804,in1Dot18804,in0Max53544,in1Max53544,in0Con43177], outputs=Ave45306)
in0Dot18804 = tf.constant([[[0.17, 0.8729], [0.5435, 0.2365], [0.8635, 0.421]]])
in1Dot18804 = tf.constant([[[0.3074, 0.0496], [0.945, 0.5989], [0.117, 0.5718]]])
in0Max53544 = tf.constant([[[[[0.9789]]]]])
in1Max53544 = tf.constant([[[[[0.9602]]]]])
in0Con43177 = tf.constant([[0.9991, 0.9773, 0.6293]])
print (np.array2string(model.predict([in0Dot18804,in1Dot18804,in0Max53544,in1Max53544,in0Con43177],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave45306.png')

LDot18804 = dot_layer([[[0.17, 0.8729], [0.5435, 0.2365], [0.8635, 0.421]]], [[[0.3074, 0.0496], [0.945, 0.5989], [0.117, 0.5718]]], 1, 1, Dot18804), 
LFla90968 = flatten_layer(Dot18804, Fla90968), 
LMax53544 = maximum_layer([[[[[[0.9789]]]]], [[[[[0.9602]]]]]], Max53544), 
LRes30484 = reshape_layer(Max53544, [1, 1, 1], Res30484), 
LCro28210 = cropping2D_layer(Res30484, 0, 0, 0, 0, Cro28210), 
LRes40427 = reshape_layer(Cro28210, [1, 1, 1, 1], Res40427), 
LGlo33590 = global_max_pool3D_layer(Res40427, Glo33590), 
LCon43177 = concatenate_layer([Glo33590,[[0.9991, 0.9773, 0.6293]]], 1, Con43177), 
LAve45306 = average_layer([Fla90968,Con43177], Ave45306), 
exec_layers([LDot18804,LFla90968,LMax53544,LRes30484,LCro28210,LRes40427,LGlo33590,LCon43177,LAve45306],["Dot18804","Fla90968","Max53544","Res30484","Cro28210","Res40427","Glo33590","Con43177","Ave45306"],Ave45306,"Ave45306")

Actual (Unparsed): [[0.8228975, 0.9133917, 0.7591895, 0.5274817]]

Expected (Unparsed): [[0.8228975000000001,0.913391725,0.75918948,0.527481745]]

Actual:   [[0.8229, 0.9134, 0.7592, 0.5275]]

Expected: [[0.8229, 0.9134, 0.7592, 0.5275]]