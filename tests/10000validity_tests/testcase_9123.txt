import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave4196 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Ave4196 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con55671 = tf.keras.layers.Input(shape=([6]))
in0Fla94025 = tf.keras.layers.Input(shape=([2, 4]))

Ave4196 = keras.layers.Average(name = 'Ave4196', )([in0Ave4196,in1Ave4196])
Lay55649 = keras.layers.LayerNormalization(axis=1, epsilon=2.376773988613558, name = 'Lay55649', )(Ave4196)
Res81392 = keras.layers.Reshape((2, 1, 1), name = 'Res81392', )(Lay55649)
Res8611 = keras.layers.Reshape((2, 1), name = 'Res8611', )(Res81392)
Fla13727 = keras.layers.Flatten(name = 'Fla13727', )(Res8611)
Con55671 = keras.layers.Concatenate(axis=1, name = 'Con55671', )([Fla13727,in0Con55671])
Fla94025 = keras.layers.Flatten(name = 'Fla94025', )(in0Fla94025)
Max82554 = keras.layers.Maximum(name = 'Max82554', )([Con55671,Fla94025])
model = tf.keras.models.Model(inputs=[in0Ave4196,in1Ave4196,in0Con55671,in0Fla94025], outputs=Max82554)
in0Ave4196 = tf.constant([[[[[0.5884]]], [[[0.3682]]]]])
in1Ave4196 = tf.constant([[[[[0.491]]], [[[0.6817]]]]])
in0Con55671 = tf.constant([[0.6251, 0.5608, 0.8606, 0.4087, 0.5145, 0.1023]])
in0Fla94025 = tf.constant([[[1.2728, 1.2903, 1.6059, 1.6459], [1.1373, 1.9732, 1.8941, 1.0869]]])
print (np.array2string(model.predict([in0Ave4196,in1Ave4196,in0Con55671,in0Fla94025],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max82554.png')

LAve4196 = average_layer([[[[[[0.5884]]], [[[0.3682]]]]], [[[[[0.491]]], [[[0.6817]]]]]], Ave4196), 
LLay55649 = layer_normalization_layer(Ave4196, 1, 2.376773988613558, Lay55649), 
LRes81392 = reshape_layer(Lay55649, [2, 1, 1], Res81392), 
LRes8611 = reshape_layer(Res81392, [2, 1], Res8611), 
LFla13727 = flatten_layer(Res8611, Fla13727), 
LCon55671 = concatenate_layer([Fla13727,[[0.6251, 0.5608, 0.8606, 0.4087, 0.5145, 0.1023]]], 1, Con55671), 
LFla94025 = flatten_layer([[[1.2728, 1.2903, 1.6059, 1.6459], [1.1373, 1.9732, 1.8941, 1.0869]]], Fla94025), 
LMax82554 = maximum_layer([Con55671,Fla94025], Max82554), 
exec_layers([LAve4196,LLay55649,LRes81392,LRes8611,LFla13727,LCon55671,LFla94025,LMax82554],["Ave4196","Lay55649","Res81392","Res8611","Fla13727","Con55671","Fla94025","Max82554"],Max82554,"Max82554")

Actual (Unparsed): [[1.2728000, 1.2903000, 1.6059000, 1.6459000, 1.1373000, 1.9732000, 1.8941000, 1.0869000]]

Expected (Unparsed): [[1.2728,1.2903,1.6059,1.6459,1.1373,1.9732,1.8941,1.0869]]

Actual:   [[1.2728, 1.2903, 1.6059, 1.6459, 1.1373, 1.9732, 1.8941, 1.0869]]

Expected: [[1.2728, 1.2903, 1.6059, 1.6459, 1.1373, 1.9732, 1.8941, 1.0869]]