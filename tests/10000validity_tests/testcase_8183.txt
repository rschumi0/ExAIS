import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add59467 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add59467 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Sub91555 = tf.keras.layers.Input(shape=([2]))
in1Sub91555 = tf.keras.layers.Input(shape=([2]))
in0Con90134 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot71877 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot71877 = tf.keras.layers.Input(shape=([3, 2]))
in0Ave73144 = tf.keras.layers.Input(shape=([2, 1]))
in0Con90460 = tf.keras.layers.Input(shape=([2, 1]))
in0Ave19615 = tf.keras.layers.Input(shape=([2, 1]))
in0Con45946 = tf.keras.layers.Input(shape=([2, 1]))

Add59467 = keras.layers.Add(name = 'Add59467', )([in0Add59467,in1Add59467])
Res65713 = keras.layers.Reshape((2, 1), name = 'Res65713', )(Add59467)
Fla14086 = keras.layers.Flatten(name = 'Fla14086', )(Res65713)
Sub91555 = keras.layers.Subtract(name = 'Sub91555', )([in0Sub91555,in1Sub91555])
Max70793 = keras.layers.Maximum(name = 'Max70793', )([Fla14086,Sub91555])
Res37022 = keras.layers.Reshape((2, 1), name = 'Res37022', )(Max70793)
Con90134 = keras.layers.Concatenate(axis=2, name = 'Con90134', )([Res37022,in0Con90134])
Dot71877 = keras.layers.Dot(axes=(1, 1), name = 'Dot71877', )([in0Dot71877,in1Dot71877])
Ave73144 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave73144', )(in0Ave73144)
Con90460 = keras.layers.Concatenate(axis=2, name = 'Con90460', )([Ave73144,in0Con90460])
Max16040 = keras.layers.Maximum(name = 'Max16040', )([Dot71877,Con90460])
Ave19615 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave19615', )(in0Ave19615)
Con45946 = keras.layers.Concatenate(axis=2, name = 'Con45946', )([Ave19615,in0Con45946])
Mul55654 = keras.layers.Multiply(name = 'Mul55654', )([Max16040,Con45946])
Max98200 = keras.layers.Maximum(name = 'Max98200', )([Con90134,Mul55654])
model = tf.keras.models.Model(inputs=[in0Add59467,in1Add59467,in0Sub91555,in1Sub91555,in0Con90134,in0Dot71877,in1Dot71877,in0Ave73144,in0Con90460,in0Ave19615,in0Con45946], outputs=Max98200)
in0Add59467 = tf.constant([[[[0.5959]], [[0.9144]]]])
in1Add59467 = tf.constant([[[[0.9068]], [[0.0399]]]])
in0Sub91555 = tf.constant([[0.896, 0.0768]])
in1Sub91555 = tf.constant([[0.328, 0.6814]])
in0Con90134 = tf.constant([[[0.7819], [0.8467]]])
in0Dot71877 = tf.constant([[[0.4044, 0.5065], [0.7433, 0.2257], [0.7098, 0.6505]]])
in1Dot71877 = tf.constant([[[0.153, 0.0058], [0.4348, 0.0248], [0.1411, 0.9449]]])
in0Ave73144 = tf.constant([[[1.4627], [1.8002]]])
in0Con90460 = tf.constant([[[0.0864], [0.1478]]])
in0Ave19615 = tf.constant([[[1.723], [1.7122]]])
in0Con45946 = tf.constant([[[0.9471], [0.6871]]])
print (np.array2string(model.predict([in0Add59467,in1Add59467,in0Sub91555,in1Sub91555,in0Con90134,in0Dot71877,in1Dot71877,in0Ave73144,in0Con90460,in0Ave19615,in0Con45946],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max98200.png')

LAdd59467 = add_layer([[[[[0.5959]], [[0.9144]]]], [[[[0.9068]], [[0.0399]]]]], Add59467), 
LRes65713 = reshape_layer(Add59467, [2, 1], Res65713), 
LFla14086 = flatten_layer(Res65713, Fla14086), 
LSub91555 = subtract_layer([[0.896, 0.0768]], [[0.328, 0.6814]], Sub91555), 
LMax70793 = maximum_layer([Fla14086,Sub91555], Max70793), 
LRes37022 = reshape_layer(Max70793, [2, 1], Res37022), 
LCon90134 = concatenate_layer([Res37022,[[[0.7819], [0.8467]]]], 2, Con90134), 
LDot71877 = dot_layer([[[0.4044, 0.5065], [0.7433, 0.2257], [0.7098, 0.6505]]], [[[0.153, 0.0058], [0.4348, 0.0248], [0.1411, 0.9449]]], 1, 1, Dot71877), 
LAve73144 = average_pooling1D_layer([[[1.4627], [1.8002]]], 1, 1, true, Ave73144), 
LCon90460 = concatenate_layer([Ave73144,[[[0.0864], [0.1478]]]], 2, Con90460), 
LMax16040 = maximum_layer([Dot71877,Con90460], Max16040), 
LAve19615 = average_pooling1D_layer([[[1.723], [1.7122]]], 1, Ave19615), 
LCon45946 = concatenate_layer([Ave19615,[[[0.9471], [0.6871]]]], 2, Con45946), 
LMul55654 = multiply_layer([Max16040,Con45946], Mul55654), 
LMax98200 = maximum_layer([Con90134,Mul55654], Max98200), 
exec_layers([LAdd59467,LRes65713,LFla14086,LSub91555,LMax70793,LRes37022,LCon90134,LDot71877,LAve73144,LCon90460,LMax16040,LAve19615,LCon45946,LMul55654,LMax98200],["Add59467","Res65713","Fla14086","Sub91555","Max70793","Res37022","Con90134","Dot71877","Ave73144","Con90460","Max16040","Ave19615","Con45946","Mul55654","Max98200"],Max98200,"Max98200")

Actual (Unparsed): [[[2.5202322, 0.7819000], [3.0823025, 0.8467000]]]

Expected (Unparsed): [[[2.5202321,0.7819],[3.08230244,0.8467]]]

Actual:   [[[2.5203, 0.7819], [3.0824, 0.8467]]]

Expected: [[[2.5203, 0.7819], [3.0824, 0.8467]]]