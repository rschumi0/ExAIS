import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro84586 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con93931 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Mul63307 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul63307 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Min3380 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min3380 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con16872 = tf.keras.layers.Input(shape=([2, 2, 1]))

Cro84586 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro84586', )(in0Cro84586)
Zer9886 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer9886', )(Cro84586)
Con93931 = keras.layers.Concatenate(axis=3, name = 'Con93931', )([Zer9886,in0Con93931])
Mul63307 = keras.layers.Multiply(name = 'Mul63307', )([in0Mul63307,in1Mul63307])
Min23584 = keras.layers.Minimum(name = 'Min23584', )([Con93931,Mul63307])
Min3380 = keras.layers.Minimum(name = 'Min3380', )([in0Min3380,in1Min3380])
Max96339 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max96339', )(Min3380)
Zer76032 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer76032', )(Max96339)
Con16872 = keras.layers.Concatenate(axis=3, name = 'Con16872', )([Zer76032,in0Con16872])
Add27337 = keras.layers.Add(name = 'Add27337', )([Min23584,Con16872])
model = tf.keras.models.Model(inputs=[in0Cro84586,in0Con93931,in0Mul63307,in1Mul63307,in0Min3380,in1Min3380,in0Con16872], outputs=Add27337)
in0Cro84586 = tf.constant([[[[1.2413], [1.6748]]]])
in0Con93931 = tf.constant([[[[0.4262], [0.8566]], [[0.5259], [0.8104]]]])
in0Mul63307 = tf.constant([[[[0.4609, 0.4967], [0.6185, 0.9916]], [[0.155, 0.5605], [0.2741, 0.3113]]]])
in1Mul63307 = tf.constant([[[[0.4398, 0.2295], [0.0102, 0.751]], [[0.2716, 0.9116], [0.2659, 0.1686]]]])
in0Min3380 = tf.constant([[[[0.0018], [0.9882]], [[0.6137], [0.3368]]]])
in1Min3380 = tf.constant([[[[0.0816], [0.5426]], [[0.4738], [0.3532]]]])
in0Con16872 = tf.constant([[[[0.6823], [0.9374]], [[0.7532], [0.5511]]]])
print (np.array2string(model.predict([in0Cro84586,in0Con93931,in0Mul63307,in1Mul63307,in0Min3380,in1Min3380,in0Con16872],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add27337.png')

LCro84586 = cropping2D_layer([[[[1.2413], [1.6748]]]], 0, 0, 1, 0, Cro84586), 
LZer9886 = zero_padding2D_layer(Cro84586, 1, 0, 1, 0, Zer9886), 
LCon93931 = concatenate_layer([Zer9886,[[[[0.4262], [0.8566]], [[0.5259], [0.8104]]]]], 3, Con93931), 
LMul63307 = multiply_layer([[[[[0.4609, 0.4967], [0.6185, 0.9916]], [[0.155, 0.5605], [0.2741, 0.3113]]]], [[[[0.4398, 0.2295], [0.0102, 0.751]], [[0.2716, 0.9116], [0.2659, 0.1686]]]]], Mul63307), 
LMin23584 = minimum_layer([Con93931,Mul63307], Min23584), 
LMin3380 = minimum_layer([[[[[0.0018], [0.9882]], [[0.6137], [0.3368]]]], [[[[0.0816], [0.5426]], [[0.4738], [0.3532]]]]], Min3380), 
LMax96339 = max_pool2D_layer(Min3380, 1, 2, Max96339), 
LZer76032 = zero_padding2D_layer(Max96339, 0, 0, 1, 0, Zer76032), 
LCon16872 = concatenate_layer([Zer76032,[[[[0.6823], [0.9374]], [[0.7532], [0.5511]]]]], 3, Con16872), 
LAdd27337 = add_layer([Min23584,Con16872], Add27337), 
exec_layers([LCro84586,LZer9886,LCon93931,LMul63307,LMin23584,LMin3380,LMax96339,LZer76032,LCon16872,LAdd27337],["Cro84586","Zer9886","Con93931","Mul63307","Min23584","Min3380","Max96339","Zer76032","Con16872","Add27337"],Add27337,"Add27337")

Actual (Unparsed): [[[[0.0000000, 0.7962926], [0.5426000, 1.6820916]], [[0.0000000, 1.2641518], [0.5466832, 0.6035852]]]]

Expected (Unparsed): [[[[0,0.79629265],[0.5426,1.6820916000000001]],[[0,1.2641518],[0.54668319,0.60358518]]]]

Actual:   [[[[0, 0.7963], [0.5426, 1.6821]], [[0, 1.2642], [0.5467, 0.6036]]]]

Expected: [[[[0, 0.7963], [0.5426, 1.6821]], [[0, 1.2642], [0.5467, 0.6036]]]]