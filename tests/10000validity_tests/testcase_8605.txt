import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Per35209 = tf.keras.layers.Input(shape=([1, 3]))

Per35209 = keras.layers.Permute((2,1), name = 'Per35209',)(in0Per35209)
Up_58360 = keras.layers.UpSampling1D(size=(2), name = 'Up_58360', )(Per35209)
Res61568 = keras.layers.Reshape((6, 1, 1), name = 'Res61568', )(Up_58360)
Ave23996 = keras.layers.AveragePooling2D(pool_size=(5, 1), name = 'Ave23996', )(Res61568)
model = tf.keras.models.Model(inputs=[in0Per35209], outputs=Ave23996)
in0Per35209 = tf.constant([[[1.5632, 1.1294, 1.3601]]])
print (np.array2string(model.predict([in0Per35209],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave23996.png')

LPer35209 = permute_layer([[[1.5632, 1.1294, 1.3601]]], 2,1, Per35209), 
LUp_58360 = up_sampling1D_layer(Per35209, 2, Up_58360), 
LRes61568 = reshape_layer(Up_58360, [6, 1, 1], Res61568), 
LAve23996 = average_pooling2D_layer(Res61568, 5, 1, Ave23996), 
exec_layers([LPer35209,LUp_58360,LRes61568,LAve23996],["Per35209","Up_58360","Res61568","Ave23996"],Ave23996,"Ave23996")

Actual (Unparsed): [[[[1.3490600]]]]

Expected (Unparsed): [[[[1.34906]]]]

Actual:   [[[[1.3491]]]]

Expected: [[[[1.3491]]]]