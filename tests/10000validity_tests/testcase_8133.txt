import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub76650 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in1Sub76650 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))

Sub76650 = keras.layers.Subtract(name = 'Sub76650', )([in0Sub76650,in1Sub76650])
Res5942 = keras.layers.Reshape((2, 3, 4), name = 'Res5942', )(Sub76650)
Res71368 = keras.layers.Reshape((2, 12), name = 'Res71368', )(Res5942)
Con50585 = keras.layers.Conv1D(2, (1),strides=(3), padding='valid', dilation_rate=(1), name = 'Con50585', )(Res71368)
model = tf.keras.models.Model(inputs=[in0Sub76650,in1Sub76650], outputs=Con50585)
w = model.get_layer('Con50585').get_weights() 
w[0] = np.array([[[0.3545, 0.9752], [0.94, 0.3092], [0.0957, 0.3689], [0.2192, 0.5802], [0.5493, 0.39], [0.2764, 0.6986], [0.3706, 0.7739], [0.1703, 0.7852], [0.915, 0.5553], [0.5229, 0.0126], [0.0737, 0.4585], [0.345, 0.7688]]])
w[1] = np.array([0, 0])
model.get_layer('Con50585').set_weights(w) 
in0Sub76650 = tf.constant([[[[[0.3204, 0.5308], [0.3714, 0.4891]], [[0.4994, 0.5599], [0.9125, 0.2017]], [[0.3624, 0.3725], [0.9195, 0.5884]]], [[[0.0285, 0.9561], [0.3096, 0.339]], [[0.5986, 0.909], [0.9345, 0.687]], [[0.1646, 0.313], [0.5934, 0.3747]]]]])
in1Sub76650 = tf.constant([[[[[0.4962, 0.7126], [0.1868, 0.4176]], [[0.783, 0.8157], [0.4847, 0.8371]], [[0.4502, 0.3963], [0.6433, 0.039]]], [[[0.9919, 0.2796], [0.0427, 0.0534]], [[0.9664, 0.2229], [0.2343, 0.428]], [[0.7863, 0.9633], [0.7935, 0.1619]]]]])
print (np.array2string(model.predict([in0Sub76650,in1Sub76650],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con50585.png')

LSub76650 = subtract_layer([[[[[0.3204, 0.5308], [0.3714, 0.4891]], [[0.4994, 0.5599], [0.9125, 0.2017]], [[0.3624, 0.3725], [0.9195, 0.5884]]], [[[0.0285, 0.9561], [0.3096, 0.339]], [[0.5986, 0.909], [0.9345, 0.687]], [[0.1646, 0.313], [0.5934, 0.3747]]]]], [[[[[0.4962, 0.7126], [0.1868, 0.4176]], [[0.783, 0.8157], [0.4847, 0.8371]], [[0.4502, 0.3963], [0.6433, 0.039]]], [[[0.9919, 0.2796], [0.0427, 0.0534]], [[0.9664, 0.2229], [0.2343, 0.428]], [[0.7863, 0.9633], [0.7935, 0.1619]]]]], Sub76650), 
LRes5942 = reshape_layer(Sub76650, [2, 3, 4], Res5942), 
LRes71368 = reshape_layer(Res5942, [2, 12], Res71368), 
LCon50585 = conv1D_layer(Res71368, 1,[[[0.3545, 0.9752], [0.94, 0.3092], [0.0957, 0.3689], [0.2192, 0.5802], [0.5493, 0.39], [0.2764, 0.6986], [0.3706, 0.7739], [0.1703, 0.7852], [0.915, 0.5553], [0.5229, 0.0126], [0.0737, 0.4585], [0.345, 0.7688]]],[0, 0], 3, false, 1, Con50585), 
exec_layers([LSub76650,LRes5942,LRes71368,LCon50585],["Sub76650","Res5942","Res71368","Con50585"],Con50585,"Con50585")

Actual (Unparsed): [[[-0.2589077, -0.0752558]]]

Expected (Unparsed): [[[-0.25890769999999996,-0.07525582000000003]]]

Actual:   [[[-0.2589, -0.0752]]]

Expected: [[[-0.2589, -0.0752]]]