import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add36897 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Add36897 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con92148 = tf.keras.layers.Input(shape=([6, 1]))
in0ELU75287 = tf.keras.layers.Input(shape=([1, 2]))
in0Sof50202 = tf.keras.layers.Input(shape=([2, 1]))
in0Con847 = tf.keras.layers.Input(shape=([2, 1]))
in0Add75846 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add75846 = tf.keras.layers.Input(shape=([1, 1, 1]))

Add36897 = keras.layers.Add(name = 'Add36897', )([in0Add36897,in1Add36897])
Glo8088 = keras.layers.GlobalMaxPool3D(name = 'Glo8088', )(Add36897)
Res87329 = keras.layers.Reshape((1, 1), name = 'Res87329', )(Glo8088)
Zer34830 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer34830', )(Res87329)
Con92148 = keras.layers.Concatenate(axis=2, name = 'Con92148', )([Zer34830,in0Con92148])
ELU75287 = keras.layers.ELU(alpha=8.181027646447028, name = 'ELU75287', input_shape=(1, 2))(in0ELU75287)
Zer69426 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer69426', )(ELU75287)
Sof50202 = keras.layers.Softmax(axis=1, name = 'Sof50202', input_shape=(2, 1))(in0Sof50202)
Con847 = keras.layers.Concatenate(axis=2, name = 'Con847', )([Sof50202,in0Con847])
Mul3314 = keras.layers.Multiply(name = 'Mul3314', )([Zer69426,Con847])
Zer79860 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer79860', )(Mul3314)
Zer59110 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer59110', )(Zer79860)
Max2591 = keras.layers.Maximum(name = 'Max2591', )([Con92148,Zer59110])
Res3889 = keras.layers.Reshape((6, 2, 1), name = 'Res3889', )(Max2591)
Add75846 = keras.layers.Add(name = 'Add75846', )([in0Add75846,in1Add75846])
Zer65786 = keras.layers.ZeroPadding2D(padding=((5, 0), (1, 0)), name = 'Zer65786', )(Add75846)
Max57979 = keras.layers.Maximum(name = 'Max57979', )([Res3889,Zer65786])
model = tf.keras.models.Model(inputs=[in0Add36897,in1Add36897,in0Con92148,in0ELU75287,in0Sof50202,in0Con847,in0Add75846,in1Add75846], outputs=Max57979)
in0Add36897 = tf.constant([[[[[0.767]]], [[[0.4575]]]]])
in1Add36897 = tf.constant([[[[[0.7667]]], [[[0.4327]]]]])
in0Con92148 = tf.constant([[[0.0113], [0.383], [0.6686], [0.4794], [0.3943], [0.1589]]])
in0ELU75287 = tf.constant([[[0.3697, 0.4336]]])
in0Sof50202 = tf.constant([[[0.0007], [0.0879]]])
in0Con847 = tf.constant([[[0.8295], [0.4555]]])
in0Add75846 = tf.constant([[[[0.5412]]]])
in1Add75846 = tf.constant([[[[0.9104]]]])
print (np.array2string(model.predict([in0Add36897,in1Add36897,in0Con92148,in0ELU75287,in0Sof50202,in0Con847,in0Add75846,in1Add75846],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max57979.png')

LAdd36897 = add_layer([[[[[[0.767]]], [[[0.4575]]]]], [[[[[0.7667]]], [[[0.4327]]]]]], Add36897), 
LGlo8088 = global_max_pool3D_layer(Add36897, Glo8088), 
LRes87329 = reshape_layer(Glo8088, [1, 1], Res87329), 
LZer34830 = zero_padding1D_layer(Res87329, 5, 0, Zer34830), 
LCon92148 = concatenate_layer([Zer34830,[[[0.0113], [0.383], [0.6686], [0.4794], [0.3943], [0.1589]]]], 2, Con92148), 
LELU75287 = elu_layer([[[0.3697, 0.4336]]], 8.181027646447028, ELU75287), 
LZer69426 = zero_padding1D_layer(ELU75287, 1, 0, Zer69426), 
LSof50202 = softmax_layer([[[0.0007], [0.0879]]], 1, Sof50202), 
LCon847 = concatenate_layer([Sof50202,[[[0.8295], [0.4555]]]], 2, Con847), 
LMul3314 = multiply_layer([Zer69426,Con847], Mul3314), 
LZer79860 = zero_padding1D_layer(Mul3314, 1, 1, Zer79860), 
LZer59110 = zero_padding1D_layer(Zer79860, 1, 1, Zer59110), 
LMax2591 = maximum_layer([Con92148,Zer59110], Max2591), 
LRes3889 = reshape_layer(Max2591, [6, 2, 1], Res3889), 
LAdd75846 = add_layer([[[[[0.5412]]]], [[[[0.9104]]]]], Add75846), 
LZer65786 = zero_padding2D_layer(Add75846, 5, 0, 1, 0, Zer65786), 
LMax57979 = maximum_layer([Res3889,Zer65786], Max57979), 
exec_layers([LAdd36897,LGlo8088,LRes87329,LZer34830,LCon92148,LELU75287,LZer69426,LSof50202,LCon847,LMul3314,LZer79860,LZer59110,LMax2591,LRes3889,LAdd75846,LZer65786,LMax57979],["Add36897","Glo8088","Res87329","Zer34830","Con92148","ELU75287","Zer69426","Sof50202","Con847","Mul3314","Zer79860","Zer59110","Max2591","Res3889","Add75846","Zer65786","Max57979"],Max57979,"Max57979")

Actual (Unparsed): [[[[0.0000000], [0.0113000]], [[0.0000000], [0.3830000]], [[0.0000000], [0.6686000]], [[0.1929044], [0.4794000]], [[0.0000000], [0.3943000]], [[1.5337000], [1.4516000]]]]

Expected (Unparsed): [[[[0],[0.0113]],[[0],[0.383]],[[0],[0.6686]],[[0.19290435697652838],[0.4794]],[[0],[0.3943]],[[1.5337],[1.4516]]]]

Actual:   [[[[0], [0.0113]], [[0], [0.383]], [[0], [0.6686]], [[0.193], [0.4794]], [[0], [0.3943]], [[1.5337], [1.4516]]]]

Expected: [[[[0], [0.0113]], [[0], [0.383]], [[0], [0.6686]], [[0.193], [0.4794]], [[0], [0.3943]], [[1.5337], [1.4516]]]]