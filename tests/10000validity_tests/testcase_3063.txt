import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot49263 = tf.keras.layers.Input(shape=([3]))
in1Dot49263 = tf.keras.layers.Input(shape=([3]))
in0Con50279 = tf.keras.layers.Input(shape=([2, 3]))
in0Ave91029 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave91029 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Min42299 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Min42299 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con65490 = tf.keras.layers.Input(shape=([4, 1]))
in0Dot87968 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot87968 = tf.keras.layers.Input(shape=([2, 2]))

Dot49263 = keras.layers.Dot(axes=(1, 1), name = 'Dot49263', )([in0Dot49263,in1Dot49263])
Res44717 = keras.layers.Reshape((1, 1), name = 'Res44717', )(Dot49263)
Zer17408 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer17408', )(Res44717)
Con50279 = keras.layers.Concatenate(axis=2, name = 'Con50279', )([Zer17408,in0Con50279])
Ave91029 = keras.layers.Average(name = 'Ave91029', )([in0Ave91029,in1Ave91029])
Zer40099 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer40099', )(Ave91029)
Min42299 = keras.layers.Minimum(name = 'Min42299', )([in0Min42299,in1Min42299])
Ave39991 = keras.layers.Average(name = 'Ave39991', )([Zer40099,Min42299])
Res95192 = keras.layers.Reshape((2, 4), name = 'Res95192', )(Ave39991)
Dot88951 = keras.layers.Dot(axes=(1, 1), name = 'Dot88951', )([Con50279,Res95192])
Glo76692 = keras.layers.GlobalMaxPool1D(name = 'Glo76692', )(Dot88951)
Res79578 = keras.layers.Reshape((4, 1), name = 'Res79578', )(Glo76692)
Con65490 = keras.layers.Concatenate(axis=2, name = 'Con65490', )([Res79578,in0Con65490])
Dot87968 = keras.layers.Dot(axes=(1, 2), name = 'Dot87968', )([in0Dot87968,in1Dot87968])
PRe63695 = keras.layers.PReLU(name = 'PRe63695', )(Dot87968)
Ave62966 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave62966', )(PRe63695)
Zer56346 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer56346', )(Ave62966)
Add94846 = keras.layers.Add(name = 'Add94846', )([Con65490,Zer56346])
model = tf.keras.models.Model(inputs=[in0Dot49263,in1Dot49263,in0Con50279,in0Ave91029,in1Ave91029,in0Min42299,in1Min42299,in0Con65490,in0Dot87968,in1Dot87968], outputs=Add94846)
w = model.get_layer('PRe63695').get_weights() 
w[0] = np.array([[0.946, 0.6601], [0.2923, 0.9154]])
model.get_layer('PRe63695').set_weights(w) 
in0Dot49263 = tf.constant([[0.9756, 0.7788, 0.4544]])
in1Dot49263 = tf.constant([[0.3403, 0.1198, 0.0447]])
in0Con50279 = tf.constant([[[0.7414, 0.4461, 0.8716], [0.3043, 0.8542, 0.4264]]])
in0Ave91029 = tf.constant([[[[0.3904, 0.9157], [0.5449, 0.7634]]]])
in1Ave91029 = tf.constant([[[[0.0928, 0.31], [0.7864, 0.8281]]]])
in0Min42299 = tf.constant([[[[0.3471, 0.0068], [0.4382, 0.5801]], [[0.0597, 0.9985], [0.374, 0.5306]]]])
in1Min42299 = tf.constant([[[[0.8914, 0.583], [0.9954, 0.4243]], [[0.4015, 0.6191], [0.3824, 0.2996]]]])
in0Con65490 = tf.constant([[[0.0893], [0.5238], [0.7984], [0.2771]]])
in0Dot87968 = tf.constant([[[0.4327, 0.4298], [0.5729, 0.7166]]])
in1Dot87968 = tf.constant([[[0.2187, 0.0769], [0.5823, 0.122]]])
print (np.array2string(model.predict([in0Dot49263,in1Dot49263,in0Con50279,in0Ave91029,in1Ave91029,in0Min42299,in1Min42299,in0Con65490,in0Dot87968,in1Dot87968],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add94846.png')

LDot49263 = dot_layer([[0.9756, 0.7788, 0.4544]], [[0.3403, 0.1198, 0.0447]], 1, 1, Dot49263), 
LRes44717 = reshape_layer(Dot49263, [1, 1], Res44717), 
LZer17408 = zero_padding1D_layer(Res44717, 1, 0, Zer17408), 
LCon50279 = concatenate_layer([Zer17408,[[[0.7414, 0.4461, 0.8716], [0.3043, 0.8542, 0.4264]]]], 2, Con50279), 
LAve91029 = average_layer([[[[[0.3904, 0.9157], [0.5449, 0.7634]]]], [[[[0.0928, 0.31], [0.7864, 0.8281]]]]], Ave91029), 
LZer40099 = zero_padding2D_layer(Ave91029, 1, 0, 0, 0, Zer40099), 
LMin42299 = minimum_layer([[[[[0.3471, 0.0068], [0.4382, 0.5801]], [[0.0597, 0.9985], [0.374, 0.5306]]]], [[[[0.8914, 0.583], [0.9954, 0.4243]], [[0.4015, 0.6191], [0.3824, 0.2996]]]]], Min42299), 
LAve39991 = average_layer([Zer40099,Min42299], Ave39991), 
LRes95192 = reshape_layer(Ave39991, [2, 4], Res95192), 
LDot88951 = dot_layer(Con50279,Res95192, 1, 1, Dot88951), 
LGlo76692 = global_max_pool1D_layer(Dot88951, Glo76692), 
LRes79578 = reshape_layer(Glo76692, [4, 1], Res79578), 
LCon65490 = concatenate_layer([Res79578,[[[0.0893], [0.5238], [0.7984], [0.2771]]]], 2, Con65490), 
LDot87968 = dot_layer([[[0.4327, 0.4298], [0.5729, 0.7166]]], [[[0.2187, 0.0769], [0.5823, 0.122]]], 1, 2, Dot87968), 
LPRe63695 = prelu_layer(Dot87968, [[0.946, 0.6601], [0.2923, 0.9154]], PRe63695), 
LAve62966 = average_pooling1D_layer(PRe63695, 1, 1, true, Ave62966), 
LZer56346 = zero_padding1D_layer(Ave62966, 2, 0, Zer56346), 
LAdd94846 = add_layer([Con65490,Zer56346], Add94846), 
exec_layers([LDot49263,LRes44717,LZer17408,LCon50279,LAve91029,LZer40099,LMin42299,LAve39991,LRes95192,LDot88951,LGlo76692,LRes79578,LCon65490,LDot87968,LPRe63695,LAve62966,LZer56346,LAdd94846],["Dot49263","Res44717","Zer17408","Con50279","Ave91029","Zer40099","Min42299","Ave39991","Res95192","Dot88951","Glo76692","Res79578","Con65490","Dot87968","PRe63695","Ave62966","Zer56346","Add94846"],Add94846,"Add94846")

Actual (Unparsed): [[[0.2155033, 0.0893000], [0.5276826, 0.5238000], [0.6804625, 1.1202550], [0.7115679, 0.6147977]]]

Expected (Unparsed): [[[0.21550334000000004,0.0893],[0.527682585,0.5238],[0.6804625249999999,1.12025501],[0.7115678999999999,0.61479774]]]

Actual:   [[[0.2156, 0.0893], [0.5277, 0.5238], [0.6805, 1.1203], [0.7116, 0.6148]]]

Expected: [[[0.2156, 0.0893], [0.5277, 0.5238], [0.6805, 1.1203], [0.7116, 0.6148]]]