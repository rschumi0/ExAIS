import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul48309 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul48309 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub71853 = tf.keras.layers.Input(shape=([3]))
in1Sub71853 = tf.keras.layers.Input(shape=([3]))
in0Con96775 = tf.keras.layers.Input(shape=([3]))

Mul48309 = keras.layers.Multiply(name = 'Mul48309', )([in0Mul48309,in1Mul48309])
Fla66621 = keras.layers.Flatten(name = 'Fla66621', )(Mul48309)
Sub71853 = keras.layers.Subtract(name = 'Sub71853', )([in0Sub71853,in1Sub71853])
Res81010 = keras.layers.Reshape((3, 1), name = 'Res81010', )(Sub71853)
Res59563 = keras.layers.Reshape((3, 1, 1), name = 'Res59563', )(Res81010)
Res58717 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res58717', )(Res59563)
Glo64139 = keras.layers.GlobalAveragePooling3D(name = 'Glo64139', )(Res58717)
Con96775 = keras.layers.Concatenate(axis=1, name = 'Con96775', )([Glo64139,in0Con96775])
Add69073 = keras.layers.Add(name = 'Add69073', )([Fla66621,Con96775])
Res16596 = keras.layers.Reshape((4, 1), name = 'Res16596', )(Add69073)
Res89862 = keras.layers.Reshape((4, 1, 1), name = 'Res89862', )(Res16596)
Res55240 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res55240', )(Res89862)
Zer64119 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer64119', )(Res55240)
model = tf.keras.models.Model(inputs=[in0Mul48309,in1Mul48309,in0Sub71853,in1Sub71853,in0Con96775], outputs=Zer64119)
in0Mul48309 = tf.constant([[[0.4669, 0.1145], [0.4949, 0.5413]]])
in1Mul48309 = tf.constant([[[0.6402, 0.543], [0.9693, 0.5702]]])
in0Sub71853 = tf.constant([[0.3624, 0.7184, 0.8422]])
in1Sub71853 = tf.constant([[0.0438, 0.2437, 0.5299]])
in0Con96775 = tf.constant([[0.2519, 0.6357, 0.8106]])
print (np.array2string(model.predict([in0Mul48309,in1Mul48309,in0Sub71853,in1Sub71853,in0Con96775],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer64119.png')

LMul48309 = multiply_layer([[[[0.4669, 0.1145], [0.4949, 0.5413]]], [[[0.6402, 0.543], [0.9693, 0.5702]]]], Mul48309), 
LFla66621 = flatten_layer(Mul48309, Fla66621), 
LSub71853 = subtract_layer([[0.3624, 0.7184, 0.8422]], [[0.0438, 0.2437, 0.5299]], Sub71853), 
LRes81010 = reshape_layer(Sub71853, [3, 1], Res81010), 
LRes59563 = reshape_layer(Res81010, [3, 1, 1], Res59563), 
LRes58717 = reshape_layer(Res59563, [3, 1, 1, 1], Res58717), 
LGlo64139 = global_average_pooling3D_layer(Res58717, Glo64139), 
LCon96775 = concatenate_layer([Glo64139,[[0.2519, 0.6357, 0.8106]]], 1, Con96775), 
LAdd69073 = add_layer([Fla66621,Con96775], Add69073), 
LRes16596 = reshape_layer(Add69073, [4, 1], Res16596), 
LRes89862 = reshape_layer(Res16596, [4, 1, 1], Res89862), 
LRes55240 = reshape_layer(Res89862, [4, 1, 1, 1], Res55240), 
LZer64119 = zero_padding3D_layer(Res55240, 1, 1, 1, 1, 1, 1, Zer64119), 
exec_layers([LMul48309,LFla66621,LSub71853,LRes81010,LRes59563,LRes58717,LGlo64139,LCon96775,LAdd69073,LRes16596,LRes89862,LRes55240,LZer64119],["Mul48309","Fla66621","Sub71853","Res81010","Res59563","Res58717","Glo64139","Con96775","Add69073","Res16596","Res89862","Res55240","Zer64119"],Zer64119,"Zer64119")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.6674427], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.3140735], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.1154065], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.1192493], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.6674427133333334],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.3140735],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.1154065700000002],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.1192492600000001],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.6675], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.3141], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.1155], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.1193], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.6675], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.3141], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.1155], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.1193], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]