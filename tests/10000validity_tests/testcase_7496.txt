import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub1255 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub1255 = tf.keras.layers.Input(shape=([2, 2]))
in0Con79238 = tf.keras.layers.Input(shape=([6, 3, 2, 3]))
in0Up_59892 = tf.keras.layers.Input(shape=([3, 1, 2, 4]))

Sub1255 = keras.layers.Subtract(name = 'Sub1255', )([in0Sub1255,in1Sub1255])
Res24110 = keras.layers.Reshape((2, 2, 1), name = 'Res24110', )(Sub1255)
Res86860 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res86860', )(Res24110)
Zer85218 = keras.layers.ZeroPadding3D(padding=((4, 0), (1, 0), (1, 0)), name = 'Zer85218', )(Res86860)
Con79238 = keras.layers.Concatenate(axis=4, name = 'Con79238', )([Zer85218,in0Con79238])
Up_59892 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_59892', )(in0Up_59892)
Zer65825 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer65825', )(Up_59892)
Sub8707 = keras.layers.Subtract(name = 'Sub8707', )([Con79238,Zer65825])
model = tf.keras.models.Model(inputs=[in0Sub1255,in1Sub1255,in0Con79238,in0Up_59892], outputs=Sub8707)
in0Sub1255 = tf.constant([[[0.0312, 0.4031], [0.6884, 0.332]]])
in1Sub1255 = tf.constant([[[0.4011, 0.792], [0.9351, 0.1016]]])
in0Con79238 = tf.constant([[[[[0.7965, 0.9938, 0.7615], [0.5696, 0.5144, 0.1277]], [[0.773, 0.4001, 0.6137], [0.5938, 0.0506, 0.4582]], [[0.953, 0.7051, 0.8955], [0.676, 0.4193, 0.7162]]], [[[0.5599, 0.2857, 0.0909], [0.0659, 0.649, 0.1948]], [[0.1294, 0.8649, 0.5371], [0.2207, 0.8863, 0.2897]], [[0.9769, 0.3613, 0.6412], [0.1791, 0.7243, 0.7376]]], [[[0.9812, 0.6608, 0.7889], [0.7081, 0.0768, 0.0802]], [[0.8743, 0.9255, 0.0148], [0.8527, 0.6785, 0.7825]], [[0.9053, 0.1141, 0.9854], [0.7777, 0.6995, 0.2062]]], [[[0.8994, 0.8199, 0.524], [0.1012, 0.1497, 0.3871]], [[0.8663, 0.8421, 0.1213], [0.7556, 0.1326, 0.9577]], [[0.159, 0.2249, 0.9368], [0.5944, 0.734, 0.3763]]], [[[0.9799, 0.8013, 0.2621], [0.9266, 0.5289, 0.0041]], [[0.7203, 0.6602, 0.3173], [0.2048, 0.7201, 0.2624]], [[0.1528, 0.861, 0.3661], [0.6086, 0.6399, 0.7103]]], [[[0.0518, 0.2172, 0.2054], [0.0319, 0.328, 0.1184]], [[0.0473, 0.9684, 0.1154], [0.3558, 0.7186, 0.5631]], [[0.8274, 0.6965, 0.8068], [0.1146, 0.42, 0.8996]]]]])
in0Up_59892 = tf.constant([[[[[1.6688, 1.821, 1.0226, 1.1214], [1.111, 1.8047, 1.1187, 1.2639]]], [[[1.2222, 1.8734, 1.6884, 1.6652], [1.8282, 1.2579, 1.5001, 1.5376]]], [[[1.7447, 1.5063, 1.2803, 1.6131], [1.0543, 1.1339, 1.875, 1.2564]]]]])
print (np.array2string(model.predict([in0Sub1255,in1Sub1255,in0Con79238,in0Up_59892],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub8707.png')

LSub1255 = subtract_layer([[[0.0312, 0.4031], [0.6884, 0.332]]], [[[0.4011, 0.792], [0.9351, 0.1016]]], Sub1255), 
LRes24110 = reshape_layer(Sub1255, [2, 2, 1], Res24110), 
LRes86860 = reshape_layer(Res24110, [2, 2, 1, 1], Res86860), 
LZer85218 = zero_padding3D_layer(Res86860, 4, 0, 1, 0, 1, 0, Zer85218), 
LCon79238 = concatenate_layer([Zer85218,[[[[[0.7965, 0.9938, 0.7615], [0.5696, 0.5144, 0.1277]], [[0.773, 0.4001, 0.6137], [0.5938, 0.0506, 0.4582]], [[0.953, 0.7051, 0.8955], [0.676, 0.4193, 0.7162]]], [[[0.5599, 0.2857, 0.0909], [0.0659, 0.649, 0.1948]], [[0.1294, 0.8649, 0.5371], [0.2207, 0.8863, 0.2897]], [[0.9769, 0.3613, 0.6412], [0.1791, 0.7243, 0.7376]]], [[[0.9812, 0.6608, 0.7889], [0.7081, 0.0768, 0.0802]], [[0.8743, 0.9255, 0.0148], [0.8527, 0.6785, 0.7825]], [[0.9053, 0.1141, 0.9854], [0.7777, 0.6995, 0.2062]]], [[[0.8994, 0.8199, 0.524], [0.1012, 0.1497, 0.3871]], [[0.8663, 0.8421, 0.1213], [0.7556, 0.1326, 0.9577]], [[0.159, 0.2249, 0.9368], [0.5944, 0.734, 0.3763]]], [[[0.9799, 0.8013, 0.2621], [0.9266, 0.5289, 0.0041]], [[0.7203, 0.6602, 0.3173], [0.2048, 0.7201, 0.2624]], [[0.1528, 0.861, 0.3661], [0.6086, 0.6399, 0.7103]]], [[[0.0518, 0.2172, 0.2054], [0.0319, 0.328, 0.1184]], [[0.0473, 0.9684, 0.1154], [0.3558, 0.7186, 0.5631]], [[0.8274, 0.6965, 0.8068], [0.1146, 0.42, 0.8996]]]]]], 4, Con79238), 
LUp_59892 = up_sampling3D_layer([[[[[1.6688, 1.821, 1.0226, 1.1214], [1.111, 1.8047, 1.1187, 1.2639]]], [[[1.2222, 1.8734, 1.6884, 1.6652], [1.8282, 1.2579, 1.5001, 1.5376]]], [[[1.7447, 1.5063, 1.2803, 1.6131], [1.0543, 1.1339, 1.875, 1.2564]]]]], 2, 1, 1, Up_59892), 
LZer65825 = zero_padding3D_layer(Up_59892, 0, 0, 2, 0, 0, 0, Zer65825), 
LSub8707 = subtract_layer(Con79238,Zer65825, Sub8707), 
exec_layers([LSub1255,LRes24110,LRes86860,LZer85218,LCon79238,LUp_59892,LZer65825,LSub8707],["Sub1255","Res24110","Res86860","Zer85218","Con79238","Up_59892","Zer65825","Sub8707"],Sub8707,"Sub8707")

Actual (Unparsed): [[[[[0.0000000, 0.7965000, 0.9938000, 0.7615000], [0.0000000, 0.5696000, 0.5144000, 0.1277000]], [[0.0000000, 0.7730000, 0.4001000, 0.6137000], [0.0000000, 0.5938000, 0.0506000, 0.4582000]], [[-1.6688000, -0.8680000, -0.3175001, -0.2259000], [-1.1109999, -1.1287000, -0.6994000, -0.5477000]]], [[[0.0000000, 0.5599000, 0.2857000, 0.0909000], [0.0000000, 0.0659000, 0.6490000, 0.1948000]], [[0.0000000, 0.1294000, 0.8649000, 0.5371000], [0.0000000, 0.2207000, 0.8863000, 0.2897000]], [[-1.6688000, -0.8441000, -0.6613001, -0.4802000], [-1.1109999, -1.6256000, -0.3944000, -0.5263000]]], [[[0.0000000, 0.9812000, 0.6608000, 0.7889000], [0.0000000, 0.7081000, 0.0768000, 0.0802000]], [[0.0000000, 0.8743000, 0.9255000, 0.0148000], [0.0000000, 0.8527000, 0.6785000, 0.7825000]], [[-1.2222000, -0.9681000, -1.5743000, -0.6798000], [-1.8282000, -0.4802000, -0.8006000, -1.3314000]]], [[[0.0000000, 0.8994000, 0.8199000, 0.5240000], [0.0000000, 0.1012000, 0.1497000, 0.3871000]], [[0.0000000, 0.8663000, 0.8421000, 0.1213000], [0.0000000, 0.7556000, 0.1326000, 0.9577000]], [[-1.2222000, -1.7144000, -1.4635000, -0.7284000], [-1.8282000, -0.6635000, -0.7661000, -1.1613000]]], [[[0.0000000, 0.9799000, 0.8013000, 0.2621000], [0.0000000, 0.9266000, 0.5289000, 0.0041000]], [[0.0000000, 0.7203000, 0.6602000, 0.3173000], [-0.3699000, 0.2048000, 0.7201000, 0.2624000]], [[-1.7447000, -1.3535000, -0.4193000, -1.2470000], [-1.4431999, -0.5253000, -1.2351000, -0.5461000]]], [[[0.0000000, 0.0518000, 0.2172000, 0.2054000], [0.0000000, 0.0319000, 0.3280000, 0.1184000]], [[0.0000000, 0.0473000, 0.9684000, 0.1154000], [-0.2467000, 0.3558000, 0.7186000, 0.5631000]], [[-1.7447000, -0.6788999, -0.5838000, -0.8063000], [-0.8239000, -1.0193000, -1.4550000, -0.3568000]]]]]

Expected (Unparsed): [[[[[0,0.7965,0.9938,0.7615],[0,0.5696,0.5144,0.1277]],[[0,0.773,0.4001,0.6137],[0,0.5938,0.0506,0.4582]],[[-1.6688,-0.868,-0.3175,-0.2259],[-1.111,-1.1286999999999998,-0.6994,-0.5477000000000001]]],[[[0,0.5599,0.2857,0.0909],[0,0.0659,0.649,0.1948]],[[0,0.1294,0.8649,0.5371],[0,0.2207,0.8863,0.2897]],[[-1.6688,-0.8441,-0.6613,-0.48019999999999996],[-1.111,-1.6256,-0.3944,-0.5263]]],[[[0,0.9812,0.6608,0.7889],[0,0.7081,0.0768,0.0802]],[[0,0.8743,0.9255,0.0148],[0,0.8527,0.6785,0.7825]],[[-1.2222,-0.9681,-1.5742999999999998,-0.6798],[-1.8282,-0.48020000000000007,-0.8006,-1.3314000000000001]]],[[[0,0.8994,0.8199,0.524],[0,0.1012,0.1497,0.3871]],[[0,0.8663,0.8421,0.1213],[0,0.7556,0.1326,0.9577]],[[-1.2222,-1.7144,-1.4634999999999998,-0.7284],[-1.8282,-0.6635,-0.7661,-1.1613]]],[[[0,0.9799,0.8013,0.2621],[0,0.9266,0.5289,0.0041]],[[0,0.7203,0.6602,0.3173],[-0.3699,0.2048,0.7201,0.2624]],[[-1.7447,-1.3535,-0.4193,-1.2469999999999999],[-1.4432,-0.5252999999999999,-1.2351,-0.5460999999999999]]],[[[0,0.0518,0.2172,0.2054],[0,0.0319,0.328,0.1184]],[[0,0.0473,0.9684,0.1154],[-0.24670000000000003,0.3558,0.7186,0.5631]],[[-1.7447,-0.6789,-0.5838,-0.8063],[-0.8239,-1.0192999999999999,-1.455,-0.3568]]]]]

Actual:   [[[[[0, 0.7965, 0.9938, 0.7615], [0, 0.5696, 0.5144, 0.1277]], [[0, 0.773, 0.4001, 0.6137], [0, 0.5938, 0.0506, 0.4582]], [[-1.6688, -0.868, -0.3175, -0.2259], [-1.1109, -1.1287, -0.6994, -0.5477]]], [[[0, 0.5599, 0.2857, 0.0909], [0, 0.0659, 0.649, 0.1948]], [[0, 0.1294, 0.8649, 0.5371], [0, 0.2207, 0.8863, 0.2897]], [[-1.6688, -0.8441, -0.6613, -0.4802], [-1.1109, -1.6256, -0.3944, -0.5263]]], [[[0, 0.9812, 0.6608, 0.7889], [0, 0.7081, 0.0768, 0.0802]], [[0, 0.8743, 0.9255, 0.0148], [0, 0.8527, 0.6785, 0.7825]], [[-1.2222, -0.9681, -1.5743, -0.6798], [-1.8282, -0.4802, -0.8006, -1.3314]]], [[[0, 0.8994, 0.8199, 0.524], [0, 0.1012, 0.1497, 0.3871]], [[0, 0.8663, 0.8421, 0.1213], [0, 0.7556, 0.1326, 0.9577]], [[-1.2222, -1.7144, -1.4635, -0.7284], [-1.8282, -0.6635, -0.7661, -1.1613]]], [[[0, 0.9799, 0.8013, 0.2621], [0, 0.9266, 0.5289, 0.0041]], [[0, 0.7203, 0.6602, 0.3173], [-0.3699, 0.2048, 0.7201, 0.2624]], [[-1.7447, -1.3535, -0.4193, -1.247], [-1.4431, -0.5253, -1.2351, -0.5461]]], [[[0, 0.0518, 0.2172, 0.2054], [0, 0.0319, 0.328, 0.1184]], [[0, 0.0473, 0.9684, 0.1154], [-0.2467, 0.3558, 0.7186, 0.5631]], [[-1.7447, -0.6788, -0.5838, -0.8063], [-0.8239, -1.0193, -1.455, -0.3568]]]]]

Expected: [[[[[0, 0.7965, 0.9938, 0.7615], [0, 0.5696, 0.5144, 0.1277]], [[0, 0.773, 0.4001, 0.6137], [0, 0.5938, 0.0506, 0.4582]], [[-1.6688, -0.868, -0.3175, -0.2259], [-1.111, -1.1286, -0.6994, -0.5477]]], [[[0, 0.5599, 0.2857, 0.0909], [0, 0.0659, 0.649, 0.1948]], [[0, 0.1294, 0.8649, 0.5371], [0, 0.2207, 0.8863, 0.2897]], [[-1.6688, -0.8441, -0.6613, -0.4801], [-1.111, -1.6256, -0.3944, -0.5263]]], [[[0, 0.9812, 0.6608, 0.7889], [0, 0.7081, 0.0768, 0.0802]], [[0, 0.8743, 0.9255, 0.0148], [0, 0.8527, 0.6785, 0.7825]], [[-1.2222, -0.9681, -1.5742, -0.6798], [-1.8282, -0.4802, -0.8006, -1.3314]]], [[[0, 0.8994, 0.8199, 0.524], [0, 0.1012, 0.1497, 0.3871]], [[0, 0.8663, 0.8421, 0.1213], [0, 0.7556, 0.1326, 0.9577]], [[-1.2222, -1.7144, -1.4634, -0.7284], [-1.8282, -0.6635, -0.7661, -1.1613]]], [[[0, 0.9799, 0.8013, 0.2621], [0, 0.9266, 0.5289, 0.0041]], [[0, 0.7203, 0.6602, 0.3173], [-0.3699, 0.2048, 0.7201, 0.2624]], [[-1.7447, -1.3535, -0.4193, -1.2469], [-1.4432, -0.5252, -1.2351, -0.546]]], [[[0, 0.0518, 0.2172, 0.2054], [0, 0.0319, 0.328, 0.1184]], [[0, 0.0473, 0.9684, 0.1154], [-0.2467, 0.3558, 0.7186, 0.5631]], [[-1.7447, -0.6789, -0.5838, -0.8063], [-0.8239, -1.0192, -1.455, -0.3568]]]]]