import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo59045 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con55910 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Lea47847 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Ave70162 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave70162 = tf.keras.layers.Input(shape=([1, 1]))
in0Con28746 = tf.keras.layers.Input(shape=([2, 3]))
in0Cro74954 = tf.keras.layers.Input(shape=([2, 2]))
in0Con61541 = tf.keras.layers.Input(shape=([2, 2]))

Glo59045 = keras.layers.GlobalAveragePooling2D(name = 'Glo59045', )(in0Glo59045)
Res32690 = keras.layers.Reshape((2, 1), name = 'Res32690', )(Glo59045)
Res14099 = keras.layers.Reshape((2, 1, 1), name = 'Res14099', )(Res32690)
Zer59315 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer59315', )(Res14099)
Con55910 = keras.layers.Concatenate(axis=3, name = 'Con55910', )([Zer59315,in0Con55910])
Lea47847 = keras.layers.LeakyReLU(alpha=5.895704532661397, name = 'Lea47847', input_shape=(2, 2, 2))(in0Lea47847)
Sub43684 = keras.layers.Subtract(name = 'Sub43684', )([Con55910,Lea47847])
Res75525 = keras.layers.Reshape((2, 4), name = 'Res75525', )(Sub43684)
Ave70162 = keras.layers.Average(name = 'Ave70162', )([in0Ave70162,in1Ave70162])
Zer79510 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer79510', )(Ave70162)
Con28746 = keras.layers.Concatenate(axis=2, name = 'Con28746', )([Zer79510,in0Con28746])
Min3264 = keras.layers.Minimum(name = 'Min3264', )([Res75525,Con28746])
Cro74954 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro74954', )(in0Cro74954)
Up_27198 = keras.layers.UpSampling1D(size=(2), name = 'Up_27198', )(Cro74954)
Con61541 = keras.layers.Concatenate(axis=2, name = 'Con61541', )([Up_27198,in0Con61541])
Max51316 = keras.layers.Maximum(name = 'Max51316', )([Min3264,Con61541])
model = tf.keras.models.Model(inputs=[in0Glo59045,in0Con55910,in0Lea47847,in0Ave70162,in1Ave70162,in0Con28746,in0Cro74954,in0Con61541], outputs=Max51316)
in0Glo59045 = tf.constant([[[[1.4969, 1.8206]], [[1.2423, 1.8492]]]])
in0Con55910 = tf.constant([[[[0.5208], [0.9938]], [[0.8732], [0.4463]]]])
in0Lea47847 = tf.constant([[[[0.877, 0.189], [0.6468, 0.0448]], [[0.3866, 0.7144], [0.1803, 0.0813]]]])
in0Ave70162 = tf.constant([[[0.0051]]])
in1Ave70162 = tf.constant([[[0.8879]]])
in0Con28746 = tf.constant([[[0.7337, 0.0155, 0.7528], [0.2789, 0.335, 0.8294]]])
in0Cro74954 = tf.constant([[[1.6351, 1.3013], [1.9336, 1.1075]]])
in0Con61541 = tf.constant([[[0.9153, 0.8309], [0.4941, 0.8724]]])
print (np.array2string(model.predict([in0Glo59045,in0Con55910,in0Lea47847,in0Ave70162,in1Ave70162,in0Con28746,in0Cro74954,in0Con61541],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max51316.png')

LGlo59045 = global_average_pooling2D_layer([[[[1.4969, 1.8206]], [[1.2423, 1.8492]]]], Glo59045), 
LRes32690 = reshape_layer(Glo59045, [2, 1], Res32690), 
LRes14099 = reshape_layer(Res32690, [2, 1, 1], Res14099), 
LZer59315 = zero_padding2D_layer(Res14099, 0, 0, 1, 0, Zer59315), 
LCon55910 = concatenate_layer([Zer59315,[[[[0.5208], [0.9938]], [[0.8732], [0.4463]]]]], 3, Con55910), 
LLea47847 = leaky_relu_layer([[[[0.877, 0.189], [0.6468, 0.0448]], [[0.3866, 0.7144], [0.1803, 0.0813]]]], 5.895704532661397, Lea47847), 
LSub43684 = subtract_layer(Con55910,Lea47847, Sub43684), 
LRes75525 = reshape_layer(Sub43684, [2, 4], Res75525), 
LAve70162 = average_layer([[[[0.0051]]], [[[0.8879]]]], Ave70162), 
LZer79510 = zero_padding1D_layer(Ave70162, 1, 0, Zer79510), 
LCon28746 = concatenate_layer([Zer79510,[[[0.7337, 0.0155, 0.7528], [0.2789, 0.335, 0.8294]]]], 2, Con28746), 
LMin3264 = minimum_layer([Res75525,Con28746], Min3264), 
LCro74954 = cropping1D_layer([[[1.6351, 1.3013], [1.9336, 1.1075]]], 1, 0, Cro74954), 
LUp_27198 = up_sampling1D_layer(Cro74954, 2, Up_27198), 
LCon61541 = concatenate_layer([Up_27198,[[[0.9153, 0.8309], [0.4941, 0.8724]]]], 2, Con61541), 
LMax51316 = maximum_layer([Min3264,Con61541], Max51316), 
exec_layers([LGlo59045,LRes32690,LRes14099,LZer59315,LCon55910,LLea47847,LSub43684,LRes75525,LAve70162,LZer79510,LCon28746,LMin3264,LCro74954,LUp_27198,LCon61541,LMax51316],["Glo59045","Res32690","Res14099","Zer59315","Con55910","Lea47847","Sub43684","Res75525","Ave70162","Zer79510","Con28746","Min3264","Cro74954","Up_27198","Con61541","Max51316"],Max51316,"Max51316")

Actual (Unparsed): [[[1.9335999, 1.1075000, 0.9153000, 0.8309000], [1.9335999, 1.1075000, 0.4941000, 0.8724000]]]

Expected (Unparsed): [[[1.9336,1.1075,0.9153,0.8309],[1.9336,1.1075,0.4941,0.8724]]]

Actual:   [[[1.9336, 1.1075, 0.9153, 0.8309], [1.9336, 1.1075, 0.4941, 0.8724]]]

Expected: [[[1.9336, 1.1075, 0.9153, 0.8309], [1.9336, 1.1075, 0.4941, 0.8724]]]