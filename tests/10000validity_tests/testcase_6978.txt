import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con73867 = tf.keras.layers.Input(shape=([2, 2, 2]))

Con73867 = keras.layers.Conv2D(2, (2, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con73867', )(in0Con73867)
Up_90891 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_90891', )(Con73867)
Con4683 = keras.layers.Conv2D(3, (1, 1),strides=(1, 12), padding='valid', dilation_rate=(1, 1), name = 'Con4683', )(Up_90891)
model = tf.keras.models.Model(inputs=[in0Con73867], outputs=Con4683)
w = model.get_layer('Con73867').get_weights() 
w[0] = np.array([[[[0.295, 0.6464], [0.8289, 0.1388]]], [[[0.6243, 0.9719], [0.8295, 0.2429]]]])
w[1] = np.array([0, 0])
model.get_layer('Con73867').set_weights(w) 
w = model.get_layer('Con4683').get_weights() 
w[0] = np.array([[[[0.5006, 0.4693, 0.554], [0.0314, 0.3403, 0.1729]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con4683').set_weights(w) 
in0Con73867 = tf.constant([[[[0.1986, 0.8202], [0.1034, 0.3759]], [[0.2502, 0.4294], [0.1361, 0.7027]]]])
print (np.array2string(model.predict([in0Con73867],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con4683.png')

LCon73867 = conv2D_layer([[[[0.1986, 0.8202], [0.1034, 0.3759]], [[0.2502, 0.4294], [0.1361, 0.7027]]]], 2, 1,[[[[0.295, 0.6464], [0.8289, 0.1388]]], [[[0.6243, 0.9719], [0.8295, 0.2429]]]],[0, 0], 1, 1, false, 1, 1, Con73867), 
LUp_90891 = up_sampling2D_layer(Con73867, 1, 2, Up_90891), 
LCon4683 = conv2D_layer(Up_90891, 1, 1,[[[[0.5006, 0.4693, 0.554], [0.0314, 0.3403, 0.1729]]]],[0, 0, 0], 1, 12, false, 1, 1, Con4683), 
exec_layers([LCon73867,LUp_90891,LCon4683],["Con73867","Up_90891","Con4683"],Con4683,"Con4683")

Actual (Unparsed): [[[[0.6446857, 0.7876896, 0.7949215]]]]

Expected (Unparsed): [[[[0.64468572118,0.787689561674,0.794921522936]]]]

Actual:   [[[[0.6447, 0.7877, 0.795]]]]

Expected: [[[[0.6447, 0.7877, 0.795]]]]