import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min99278 = tf.keras.layers.Input(shape=([2, 2]))
in1Min99278 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul23168 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul23168 = tf.keras.layers.Input(shape=([2, 2]))
in0Con68849 = tf.keras.layers.Input(shape=([3]))

Min99278 = keras.layers.Minimum(name = 'Min99278', )([in0Min99278,in1Min99278])
Lea46156 = keras.layers.LeakyReLU(alpha=4.88940515766864, name = 'Lea46156', )(Min99278)
Fla79166 = keras.layers.Flatten(name = 'Fla79166', )(Lea46156)
Mul23168 = keras.layers.Multiply(name = 'Mul23168', )([in0Mul23168,in1Mul23168])
Res61430 = keras.layers.Reshape((2, 2, 1), name = 'Res61430', )(Mul23168)
Res2954 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res2954', )(Res61430)
Glo41721 = keras.layers.GlobalMaxPool3D(name = 'Glo41721', )(Res2954)
Con68849 = keras.layers.Concatenate(axis=1, name = 'Con68849', )([Glo41721,in0Con68849])
Ave84647 = keras.layers.Average(name = 'Ave84647', )([Fla79166,Con68849])
model = tf.keras.models.Model(inputs=[in0Min99278,in1Min99278,in0Mul23168,in1Mul23168,in0Con68849], outputs=Ave84647)
in0Min99278 = tf.constant([[[0.3892, 0.7049], [0.2485, 0.5418]]])
in1Min99278 = tf.constant([[[0.5858, 0.7746], [0.5898, 0.3589]]])
in0Mul23168 = tf.constant([[[0.3142, 0.4026], [0.0618, 0.8521]]])
in1Mul23168 = tf.constant([[[0.9191, 0.752], [0.052, 0.0851]]])
in0Con68849 = tf.constant([[0.9704, 0.2366, 0.7595]])
print (np.array2string(model.predict([in0Min99278,in1Min99278,in0Mul23168,in1Mul23168,in0Con68849],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave84647.png')

LMin99278 = minimum_layer([[[[0.3892, 0.7049], [0.2485, 0.5418]]], [[[0.5858, 0.7746], [0.5898, 0.3589]]]], Min99278), 
LLea46156 = leaky_relu_layer(Min99278, 4.88940515766864, Lea46156), 
LFla79166 = flatten_layer(Lea46156, Fla79166), 
LMul23168 = multiply_layer([[[[0.3142, 0.4026], [0.0618, 0.8521]]], [[[0.9191, 0.752], [0.052, 0.0851]]]], Mul23168), 
LRes61430 = reshape_layer(Mul23168, [2, 2, 1], Res61430), 
LRes2954 = reshape_layer(Res61430, [2, 2, 1, 1], Res2954), 
LGlo41721 = global_max_pool3D_layer(Res2954, Glo41721), 
LCon68849 = concatenate_layer([Glo41721,[[0.9704, 0.2366, 0.7595]]], 1, Con68849), 
LAve84647 = average_layer([Fla79166,Con68849], Ave84647), 
exec_layers([LMin99278,LLea46156,LFla79166,LMul23168,LRes61430,LRes2954,LGlo41721,LCon68849,LAve84647],["Min99278","Lea46156","Fla79166","Mul23168","Res61430","Res2954","Glo41721","Con68849","Ave84647"],Ave84647,"Ave84647")

Actual (Unparsed): [[0.3459776, 0.8376500, 0.2425500, 0.5592000]]

Expected (Unparsed): [[0.3459776,0.83765,0.24255,0.5591999999999999]]

Actual:   [[0.346, 0.8377, 0.2426, 0.5592]]

Expected: [[0.346, 0.8377, 0.2426, 0.5592]]