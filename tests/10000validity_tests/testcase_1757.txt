import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul9190 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul9190 = tf.keras.layers.Input(shape=([2, 2]))
in0Cro81045 = tf.keras.layers.Input(shape=([1, 1]))
in0Con10374 = tf.keras.layers.Input(shape=([2, 1]))
in0Ave82585 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave82585 = tf.keras.layers.Input(shape=([2, 1]))
in0Con37797 = tf.keras.layers.Input(shape=([2, 1]))

Mul9190 = keras.layers.Multiply(name = 'Mul9190', )([in0Mul9190,in1Mul9190])
Cro81045 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro81045', )(in0Cro81045)
Zer82859 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer82859', )(Cro81045)
Con10374 = keras.layers.Concatenate(axis=2, name = 'Con10374', )([Zer82859,in0Con10374])
Min51637 = keras.layers.Minimum(name = 'Min51637', )([Mul9190,Con10374])
Ave82585 = keras.layers.Average(name = 'Ave82585', )([in0Ave82585,in1Ave82585])
Con37797 = keras.layers.Concatenate(axis=2, name = 'Con37797', )([Ave82585,in0Con37797])
Ave22436 = keras.layers.Average(name = 'Ave22436', )([Min51637,Con37797])
Res53053 = keras.layers.Reshape((2, 2, 1), name = 'Res53053', )(Ave22436)
Res85998 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res85998', )(Res53053)
Glo75298 = keras.layers.GlobalAveragePooling3D(name = 'Glo75298', )(Res85998)
model = tf.keras.models.Model(inputs=[in0Mul9190,in1Mul9190,in0Cro81045,in0Con10374,in0Ave82585,in1Ave82585,in0Con37797], outputs=Glo75298)
in0Mul9190 = tf.constant([[[0.9636, 0.2254], [0.4667, 0.7041]]])
in1Mul9190 = tf.constant([[[0.6216, 0.6557], [0.1682, 0.155]]])
in0Cro81045 = tf.constant([[[1.2003]]])
in0Con10374 = tf.constant([[[0.9275], [0.3415]]])
in0Ave82585 = tf.constant([[[0.8835], [0.3557]]])
in1Ave82585 = tf.constant([[[0.0608], [0.7021]]])
in0Con37797 = tf.constant([[[0.2449], [0.8055]]])
print (np.array2string(model.predict([in0Mul9190,in1Mul9190,in0Cro81045,in0Con10374,in0Ave82585,in1Ave82585,in0Con37797],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo75298.png')

LMul9190 = multiply_layer([[[[0.9636, 0.2254], [0.4667, 0.7041]]], [[[0.6216, 0.6557], [0.1682, 0.155]]]], Mul9190), 
LCro81045 = cropping1D_layer([[[1.2003]]], 0, 0, Cro81045), 
LZer82859 = zero_padding1D_layer(Cro81045, 1, 0, Zer82859), 
LCon10374 = concatenate_layer([Zer82859,[[[0.9275], [0.3415]]]], 2, Con10374), 
LMin51637 = minimum_layer([Mul9190,Con10374], Min51637), 
LAve82585 = average_layer([[[[0.8835], [0.3557]]], [[[0.0608], [0.7021]]]], Ave82585), 
LCon37797 = concatenate_layer([Ave82585,[[[0.2449], [0.8055]]]], 2, Con37797), 
LAve22436 = average_layer([Min51637,Con37797], Ave22436), 
LRes53053 = reshape_layer(Ave22436, [2, 2, 1], Res53053), 
LRes85998 = reshape_layer(Res53053, [2, 2, 1, 1], Res85998), 
LGlo75298 = global_average_pooling3D_layer(Res85998, Glo75298), 
exec_layers([LMul9190,LCro81045,LZer82859,LCon10374,LMin51637,LAve82585,LCon37797,LAve22436,LRes53053,LRes85998,LGlo75298],["Mul9190","Cro81045","Zer82859","Con10374","Min51637","Ave82585","Con37797","Ave22436","Res53053","Res85998","Glo75298"],Glo75298,"Glo75298")

Actual (Unparsed): [[0.2983599]]

Expected (Unparsed): [[0.2983599025]]

Actual:   [[0.2984]]

Expected: [[0.2984]]