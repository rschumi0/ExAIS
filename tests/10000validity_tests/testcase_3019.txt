import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add47733 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Add47733 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Mul67069 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul67069 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Ave41094 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave41094 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con15405 = tf.keras.layers.Input(shape=([3]))

Add47733 = keras.layers.Add(name = 'Add47733', )([in0Add47733,in1Add47733])
Res83769 = keras.layers.Reshape((1, 1, 4), name = 'Res83769', )(Add47733)
Mul67069 = keras.layers.Multiply(name = 'Mul67069', )([in0Mul67069,in1Mul67069])
Res9868 = keras.layers.Reshape((1, 4), name = 'Res9868', )(Mul67069)
Per70329 = keras.layers.Permute((2,1), name = 'Per70329',)(Res9868)
Res65634 = keras.layers.Reshape((1, 1, 4), name = 'Res65634', )(Per70329)
Min62509 = keras.layers.Minimum(name = 'Min62509', )([Res83769,Res65634])
Res33013 = keras.layers.Reshape((1, 4), name = 'Res33013', )(Min62509)
Fla39754 = keras.layers.Flatten(name = 'Fla39754', )(Res33013)
Ave41094 = keras.layers.Average(name = 'Ave41094', )([in0Ave41094,in1Ave41094])
Glo8412 = keras.layers.GlobalAveragePooling2D(name = 'Glo8412', )(Ave41094)
Con15405 = keras.layers.Concatenate(axis=1, name = 'Con15405', )([Glo8412,in0Con15405])
Min14492 = keras.layers.Minimum(name = 'Min14492', )([Fla39754,Con15405])
model = tf.keras.models.Model(inputs=[in0Add47733,in1Add47733,in0Mul67069,in1Mul67069,in0Ave41094,in1Ave41094,in0Con15405], outputs=Min14492)
in0Add47733 = tf.constant([[[[[0.2628, 0.6335], [0.517, 0.4221]]]]])
in1Add47733 = tf.constant([[[[[0.4312, 0.6234], [0.816, 0.563]]]]])
in0Mul67069 = tf.constant([[[[0.4869, 0.9481], [0.3829, 0.0341]]]])
in1Mul67069 = tf.constant([[[[0.9936, 0.2511], [0.0094, 0.9841]]]])
in0Ave41094 = tf.constant([[[[0.6335], [0.5945]], [[0.6602], [0.1947]]]])
in1Ave41094 = tf.constant([[[[0.3147], [0.7547]], [[0.1952], [0.2357]]]])
in0Con15405 = tf.constant([[0.7306, 0.0355, 0.9658]])
print (np.array2string(model.predict([in0Add47733,in1Add47733,in0Mul67069,in1Mul67069,in0Ave41094,in1Ave41094,in0Con15405],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min14492.png')

LAdd47733 = add_layer([[[[[[0.2628, 0.6335], [0.517, 0.4221]]]]], [[[[[0.4312, 0.6234], [0.816, 0.563]]]]]], Add47733), 
LRes83769 = reshape_layer(Add47733, [1, 1, 4], Res83769), 
LMul67069 = multiply_layer([[[[[0.4869, 0.9481], [0.3829, 0.0341]]]], [[[[0.9936, 0.2511], [0.0094, 0.9841]]]]], Mul67069), 
LRes9868 = reshape_layer(Mul67069, [1, 4], Res9868), 
LPer70329 = permute_layer(Res9868, 2,1, Per70329), 
LRes65634 = reshape_layer(Per70329, [1, 1, 4], Res65634), 
LMin62509 = minimum_layer([Res83769,Res65634], Min62509), 
LRes33013 = reshape_layer(Min62509, [1, 4], Res33013), 
LFla39754 = flatten_layer(Res33013, Fla39754), 
LAve41094 = average_layer([[[[[0.6335], [0.5945]], [[0.6602], [0.1947]]]], [[[[0.3147], [0.7547]], [[0.1952], [0.2357]]]]], Ave41094), 
LGlo8412 = global_average_pooling2D_layer(Ave41094, Glo8412), 
LCon15405 = concatenate_layer([Glo8412,[[0.7306, 0.0355, 0.9658]]], 1, Con15405), 
LMin14492 = minimum_layer([Fla39754,Con15405], Min14492), 
exec_layers([LAdd47733,LRes83769,LMul67069,LRes9868,LPer70329,LRes65634,LMin62509,LRes33013,LFla39754,LAve41094,LGlo8412,LCon15405,LMin14492],["Add47733","Res83769","Mul67069","Res9868","Per70329","Res65634","Min62509","Res33013","Fla39754","Ave41094","Glo8412","Con15405","Min14492"],Min14492,"Min14492")

Actual (Unparsed): [[0.4479000, 0.2380679, 0.0035993, 0.0335578]]

Expected (Unparsed): [[0.4479,0.23806791,0.0035992600000000004,0.03355781]]

Actual:   [[0.4479, 0.2381, 0.0036, 0.0336]]

Expected: [[0.4479, 0.2381, 0.0036, 0.0336]]