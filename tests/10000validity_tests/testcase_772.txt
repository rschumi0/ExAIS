import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add43483 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add43483 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Fla79090 = tf.keras.layers.Input(shape=([4, 2, 2]))

Add43483 = keras.layers.Add(name = 'Add43483', )([in0Add43483,in1Add43483])
Res97688 = keras.layers.Reshape((2, 1), name = 'Res97688', )(Add43483)
Zer36794 = keras.layers.ZeroPadding1D(padding=((16, 0)), name = 'Zer36794', )(Res97688)
Fla79090 = keras.layers.Flatten(name = 'Fla79090', )(in0Fla79090)
Res27682 = keras.layers.Reshape((16, 1), name = 'Res27682', )(Fla79090)
Zer13038 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer13038', )(Res27682)
Ave38473 = keras.layers.Average(name = 'Ave38473', )([Zer36794,Zer13038])
Res79693 = keras.layers.Reshape((18, 1, 1), name = 'Res79693', )(Ave38473)
Res34902 = keras.layers.Reshape((18, 1, 1, 1), name = 'Res34902', )(Res79693)
Glo6906 = keras.layers.GlobalAveragePooling3D(name = 'Glo6906', )(Res34902)
model = tf.keras.models.Model(inputs=[in0Add43483,in1Add43483,in0Fla79090], outputs=Glo6906)
in0Add43483 = tf.constant([[[[0.0985]], [[0.0276]]]])
in1Add43483 = tf.constant([[[[0.4159]], [[0.4881]]]])
in0Fla79090 = tf.constant([[[[1.268, 1.4963], [1.8535, 1.0044]], [[1.2975, 1.6088], [1.5097, 1.0708]], [[1.6191, 1.2661], [1.9189, 1.9507]], [[1.3281, 1.8448], [1.4146, 1.2722]]]])
print (np.array2string(model.predict([in0Add43483,in1Add43483,in0Fla79090],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo6906.png')

LAdd43483 = add_layer([[[[[0.0985]], [[0.0276]]]], [[[[0.4159]], [[0.4881]]]]], Add43483), 
LRes97688 = reshape_layer(Add43483, [2, 1], Res97688), 
LZer36794 = zero_padding1D_layer(Res97688, 16, 0, Zer36794), 
LFla79090 = flatten_layer([[[[1.268, 1.4963], [1.8535, 1.0044]], [[1.2975, 1.6088], [1.5097, 1.0708]], [[1.6191, 1.2661], [1.9189, 1.9507]], [[1.3281, 1.8448], [1.4146, 1.2722]]]], Fla79090), 
LRes27682 = reshape_layer(Fla79090, [16, 1], Res27682), 
LZer13038 = zero_padding1D_layer(Res27682, 1, 1, Zer13038), 
LAve38473 = average_layer([Zer36794,Zer13038], Ave38473), 
LRes79693 = reshape_layer(Ave38473, [18, 1, 1], Res79693), 
LRes34902 = reshape_layer(Res79693, [18, 1, 1, 1], Res34902), 
LGlo6906 = global_average_pooling3D_layer(Res34902, Glo6906), 
exec_layers([LAdd43483,LRes97688,LZer36794,LFla79090,LRes27682,LZer13038,LAve38473,LRes79693,LRes34902,LGlo6906],["Add43483","Res97688","Zer36794","Fla79090","Res27682","Zer13038","Ave38473","Res79693","Res34902","Glo6906"],Glo6906,"Glo6906")

Actual (Unparsed): [[0.6876000]]

Expected (Unparsed): [[0.6876]]

Actual:   [[0.6876]]

Expected: [[0.6876]]