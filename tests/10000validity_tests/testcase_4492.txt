import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo77116 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con16331 = tf.keras.layers.Input(shape=([1]))
in0Sim64795 = tf.keras.layers.Input(shape=([2, 2]))

Glo77116 = keras.layers.GlobalMaxPool3D(name = 'Glo77116', )(in0Glo77116)
Res91764 = keras.layers.Reshape((1, 1), name = 'Res91764', )(Glo77116)
Res63921 = keras.layers.Reshape((1, 1, 1), name = 'Res63921', )(Res91764)
Res77928 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res77928', )(Res63921)
Cro34975 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 0)), name = 'Cro34975', )(Res77928)
Res72571 = keras.layers.Reshape((1, 1, 1), name = 'Res72571', )(Cro34975)
Res68545 = keras.layers.Reshape((1, 1), name = 'Res68545', )(Res72571)
Fla43329 = keras.layers.Flatten(name = 'Fla43329', )(Res68545)
Con16331 = keras.layers.Concatenate(axis=1, name = 'Con16331', )([Fla43329,in0Con16331])
Sim64795 = keras.layers.SimpleRNN(2,name = 'Sim64795', )(in0Sim64795)
Add6779 = keras.layers.Add(name = 'Add6779', )([Con16331,Sim64795])
model = tf.keras.models.Model(inputs=[in0Glo77116,in0Con16331,in0Sim64795], outputs=Add6779)
w = model.get_layer('Sim64795').get_weights() 
w[0] = np.array([[8, 7], [6, 10]])
w[1] = np.array([[3, 1], [3, 6]])
w[2] = np.array([9, 4])
model.get_layer('Sim64795').set_weights(w) 
in0Glo77116 = tf.constant([[[[[1.4356]]]]])
in0Con16331 = tf.constant([[0.0946]])
in0Sim64795 = tf.constant([[[10, 9], [6, 10]]])
print (np.array2string(model.predict([in0Glo77116,in0Con16331,in0Sim64795],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add6779.png')

LGlo77116 = global_max_pool3D_layer([[[[[1.4356]]]]], Glo77116), 
LRes91764 = reshape_layer(Glo77116, [1, 1], Res91764), 
LRes63921 = reshape_layer(Res91764, [1, 1, 1], Res63921), 
LRes77928 = reshape_layer(Res63921, [1, 1, 1, 1], Res77928), 
LCro34975 = cropping3D_layer(Res77928, 0, 0, 0, 0, 0, 0, Cro34975), 
LRes72571 = reshape_layer(Cro34975, [1, 1, 1], Res72571), 
LRes68545 = reshape_layer(Res72571, [1, 1], Res68545), 
LFla43329 = flatten_layer(Res68545, Fla43329), 
LCon16331 = concatenate_layer([Fla43329,[[0.0946]]], 1, Con16331), 
LSim64795 = simple_rnn_layer([[[10, 9], [6, 10]]],[[8, 7], [6, 10]],[[3, 1], [3, 6]],[9, 4], Sim64795), 
LAdd6779 = add_layer([Con16331,Sim64795], Add6779), 
exec_layers([LGlo77116,LRes91764,LRes63921,LRes77928,LCro34975,LRes72571,LRes68545,LFla43329,LCon16331,LSim64795,LAdd6779],["Glo77116","Res91764","Res63921","Res77928","Cro34975","Res72571","Res68545","Fla43329","Con16331","Sim64795","Add6779"],Add6779,"Add6779")

Actual (Unparsed): [[2.4356000, 1.0946000]]

Expected (Unparsed): [[2.4356,1.0946]]

Actual:   [[2.4356, 1.0946]]

Expected: [[2.4356, 1.0946]]