import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0LST7155 = tf.keras.layers.Input(shape=([3, 2]))

LST7155 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST7155', )(in0LST7155)
Res27241 = keras.layers.Reshape((3, 1), name = 'Res27241', )(LST7155)
Up_45310 = keras.layers.UpSampling1D(size=(2), name = 'Up_45310', )(Res27241)
model = tf.keras.models.Model(inputs=[in0LST7155], outputs=Up_45310)
w = model.get_layer('LST7155').get_weights() 
w[0] = np.array([[6, 5, 6, 9, 6, 2, 8, 2, 5, 8, 6, 9], [3, 9, 2, 3, 4, 9, 3, 1, 4, 2, 6, 2]])
w[1] = np.array([[6, 7, 10, 4, 7, 5, 2, 8, 2, 5, 5, 7], [6, 2, 4, 10, 9, 3, 6, 3, 5, 5, 3, 6], [7, 1, 6, 3, 10, 2, 6, 4, 10, 5, 2, 1]])
w[2] = np.array([5, 3, 5, 5, 1, 5, 9, 10, 10, 3, 3, 1])
model.get_layer('LST7155').set_weights(w) 
in0LST7155 = tf.constant([[[2, 9], [2, 6], [3, 8]]])
print (np.array2string(model.predict([in0LST7155],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_45310.png')

LLST7155 = lstm_layer([[[2, 9], [2, 6], [3, 8]]],[[6, 5, 6, 9, 6, 2, 8, 2, 5, 8, 6, 9], [3, 9, 2, 3, 4, 9, 3, 1, 4, 2, 6, 2]],[[6, 7, 10, 4, 7, 5, 2, 8, 2, 5, 5, 7], [6, 2, 4, 10, 9, 3, 6, 3, 5, 5, 3, 6], [7, 1, 6, 3, 10, 2, 6, 4, 10, 5, 2, 1]],[5, 3, 5, 5, 1, 5, 9, 10, 10, 3, 3, 1], LST7155), 
LRes27241 = reshape_layer(LST7155, [3, 1], Res27241), 
LUp_45310 = up_sampling1D_layer(Res27241, 2, Up_45310), 
exec_layers([LLST7155,LRes27241,LUp_45310],["LST7155","Res27241","Up_45310"],Up_45310,"Up_45310")

Actual (Unparsed): [[[0.9950548], [0.9950548], [0.9950548], [0.9950548], [0.9950548], [0.9950548]]]

Expected (Unparsed): [[[0.9950547536867305],[0.9950547536867305],[0.9950547536867305],[0.9950547536867305],[0.9950547536867305],[0.9950547536867305]]]

Actual:   [[[0.9951], [0.9951], [0.9951], [0.9951], [0.9951], [0.9951]]]

Expected: [[[0.9951], [0.9951], [0.9951], [0.9951], [0.9951], [0.9951]]]