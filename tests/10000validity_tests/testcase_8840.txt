import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add65358 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add65358 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Add66530 = tf.keras.layers.Input(shape=([1, 2]))
in1Add66530 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave18834 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Ave18834 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Glo66565 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con11724 = tf.keras.layers.Input(shape=([1]))
in0Glo82401 = tf.keras.layers.Input(shape=([2, 2]))

Add65358 = keras.layers.Add(name = 'Add65358', )([in0Add65358,in1Add65358])
Res56317 = keras.layers.Reshape((1, 2), name = 'Res56317', )(Add65358)
Add66530 = keras.layers.Add(name = 'Add66530', )([in0Add66530,in1Add66530])
Mul44339 = keras.layers.Multiply(name = 'Mul44339', )([Res56317,Add66530])
Fla89528 = keras.layers.Flatten(name = 'Fla89528', )(Mul44339)
Ave18834 = keras.layers.Average(name = 'Ave18834', )([in0Ave18834,in1Ave18834])
Res20412 = keras.layers.Reshape((1, 1, 2), name = 'Res20412', )(Ave18834)
Res13274 = keras.layers.Reshape((1, 2), name = 'Res13274', )(Res20412)
Fla36842 = keras.layers.Flatten(name = 'Fla36842', )(Res13274)
Glo66565 = keras.layers.GlobalMaxPool2D(name = 'Glo66565', )(in0Glo66565)
Con11724 = keras.layers.Concatenate(axis=1, name = 'Con11724', )([Glo66565,in0Con11724])
Sub43239 = keras.layers.Subtract(name = 'Sub43239', )([Fla36842,Con11724])
Dot57577 = keras.layers.Dot(axes=(1, 1), name = 'Dot57577', )([Fla89528,Sub43239])
Glo82401 = keras.layers.GlobalAveragePooling1D(name = 'Glo82401', )(in0Glo82401)
Res97245 = keras.layers.Reshape((2, 1), name = 'Res97245', )(Glo82401)
Res79149 = keras.layers.Reshape((2, 1, 1), name = 'Res79149', )(Res97245)
Glo67783 = keras.layers.GlobalAveragePooling2D(name = 'Glo67783', )(Res79149)
Min20802 = keras.layers.Minimum(name = 'Min20802', )([Dot57577,Glo67783])
model = tf.keras.models.Model(inputs=[in0Add65358,in1Add65358,in0Add66530,in1Add66530,in0Ave18834,in1Ave18834,in0Glo66565,in0Con11724,in0Glo82401], outputs=Min20802)
in0Add65358 = tf.constant([[[[0.3883, 0.1538]]]])
in1Add65358 = tf.constant([[[[0.996, 0.2253]]]])
in0Add66530 = tf.constant([[[0.7442, 0.4192]]])
in1Add66530 = tf.constant([[[0.9873, 0.7224]]])
in0Ave18834 = tf.constant([[[[[0.2499], [0.0426]]]]])
in1Ave18834 = tf.constant([[[[[0.4376], [0.5147]]]]])
in0Glo66565 = tf.constant([[[[1.2075], [1.2942]]]])
in0Con11724 = tf.constant([[0.246]])
in0Glo82401 = tf.constant([[[1.8698, 1.5783], [1.812, 1.6239]]])
print (np.array2string(model.predict([in0Add65358,in1Add65358,in0Add66530,in1Add66530,in0Ave18834,in1Ave18834,in0Glo66565,in0Con11724,in0Glo82401],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min20802.png')

LAdd65358 = add_layer([[[[[0.3883, 0.1538]]]], [[[[0.996, 0.2253]]]]], Add65358), 
LRes56317 = reshape_layer(Add65358, [1, 2], Res56317), 
LAdd66530 = add_layer([[[[0.7442, 0.4192]]], [[[0.9873, 0.7224]]]], Add66530), 
LMul44339 = multiply_layer([Res56317,Add66530], Mul44339), 
LFla89528 = flatten_layer(Mul44339, Fla89528), 
LAve18834 = average_layer([[[[[[0.2499], [0.0426]]]]], [[[[[0.4376], [0.5147]]]]]], Ave18834), 
LRes20412 = reshape_layer(Ave18834, [1, 1, 2], Res20412), 
LRes13274 = reshape_layer(Res20412, [1, 2], Res13274), 
LFla36842 = flatten_layer(Res13274, Fla36842), 
LGlo66565 = global_max_pool2D_layer([[[[1.2075], [1.2942]]]], Glo66565), 
LCon11724 = concatenate_layer([Glo66565,[[0.246]]], 1, Con11724), 
LSub43239 = subtract_layer(Fla36842,Con11724, Sub43239), 
LDot57577 = dot_layer(Fla89528,Sub43239, 1, 1, Dot57577), 
LGlo82401 = global_average_pooling1D_layer([[[1.8698, 1.5783], [1.812, 1.6239]]], Glo82401), 
LRes97245 = reshape_layer(Glo82401, [2, 1], Res97245), 
LRes79149 = reshape_layer(Res97245, [2, 1, 1], Res79149), 
LGlo67783 = global_average_pooling2D_layer(Res79149, Glo67783), 
LMin20802 = minimum_layer([Dot57577,Glo67783], Min20802), 
exec_layers([LAdd65358,LRes56317,LAdd66530,LMul44339,LFla89528,LAve18834,LRes20412,LRes13274,LFla36842,LGlo66565,LCon11724,LSub43239,LDot57577,LGlo82401,LRes97245,LRes79149,LGlo67783,LMin20802],["Add65358","Res56317","Add66530","Mul44339","Fla89528","Ave18834","Res20412","Res13274","Fla36842","Glo66565","Con11724","Sub43239","Dot57577","Glo82401","Res97245","Res79149","Glo67783","Min20802"],Min20802,"Min20802")

Actual (Unparsed): [[-2.2640178]]

Expected (Unparsed): [[-2.2640180041685003]]

Actual:   [[-2.264]]

Expected: [[-2.264]]