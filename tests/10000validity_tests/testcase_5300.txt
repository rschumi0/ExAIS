import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc99657 = tf.keras.layers.Input(shape=([1, 2, 2]))

Loc99657 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(7, 1), name = 'Loc99657', )(in0Loc99657)
Mas6101 = keras.layers.Masking(mask_value=1, name = 'Mas6101', )(Loc99657)
model = tf.keras.models.Model(inputs=[in0Loc99657], outputs=Mas6101)
w = model.get_layer('Loc99657').get_weights() 
w[0] = np.array([[[0.17, 0.524], [0.5576, 0.7491], [0.9487, 0.5051], [0.5768, 0.3009]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc99657').set_weights(w) 
in0Loc99657 = tf.constant([[[[0.1297, 0.2715], [0.9017, 0.9345]]]])
print (np.array2string(model.predict([in0Loc99657],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas6101.png')

LLoc99657 = locally_connected2D_layer([[[[0.1297, 0.2715], [0.9017, 0.9345]]]], 1, 2,[[[0.17, 0.524], [0.5576, 0.7491], [0.9487, 0.5051], [0.5768, 0.3009]]],[[[0, 0]]], 7, 1, Loc99657), 
LMas6101 = masking_layer(Loc99657, 1, Mas6101), 
exec_layers([LLoc99657,LMas6101],["Loc99657","Mas6101"],Mas6101,"Mas6101")

Actual (Unparsed): [[[[1.5678998, 1.0079832]]]]

Expected (Unparsed): [[[[1.5678997899999998,1.0079831700000002]]]]

Actual:   [[[[1.5679, 1.008]]]]

Expected: [[[[1.5679, 1.008]]]]