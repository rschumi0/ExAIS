import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave68577 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave68577 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Min60179 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min60179 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con3889 = tf.keras.layers.Input(shape=([4, 2, 1]))
in0Sub28784 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub28784 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave68577 = keras.layers.Average(name = 'Ave68577', )([in0Ave68577,in1Ave68577])
Zer7571 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer7571', )(Ave68577)
Min60179 = keras.layers.Minimum(name = 'Min60179', )([in0Min60179,in1Min60179])
Add34346 = keras.layers.Add(name = 'Add34346', )([Zer7571,Min60179])
Up_27291 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_27291', )(Add34346)
Con3889 = keras.layers.Concatenate(axis=3, name = 'Con3889', )([Up_27291,in0Con3889])
Sub28784 = keras.layers.Subtract(name = 'Sub28784', )([in0Sub28784,in1Sub28784])
Zer69258 = keras.layers.ZeroPadding2D(padding=((2, 0), (0, 0)), name = 'Zer69258', )(Sub28784)
Max27381 = keras.layers.Maximum(name = 'Max27381', )([Con3889,Zer69258])
model = tf.keras.models.Model(inputs=[in0Ave68577,in1Ave68577,in0Min60179,in1Min60179,in0Con3889,in0Sub28784,in1Sub28784], outputs=Max27381)
in0Ave68577 = tf.constant([[[[0.8593]]]])
in1Ave68577 = tf.constant([[[[0.195]]]])
in0Min60179 = tf.constant([[[[0.199]], [[0.3327]]]])
in1Min60179 = tf.constant([[[[0.2769]], [[0.3997]]]])
in0Con3889 = tf.constant([[[[0.9436], [0.3168]], [[0.6723], [0.9175]], [[0.9642], [0.4125]], [[0.7623], [0.2689]]]])
in0Sub28784 = tf.constant([[[[0.4019, 0.7895], [0.4139, 0.5452]], [[0.5385, 0.5273], [0.9048, 0.8224]]]])
in1Sub28784 = tf.constant([[[[0.7056, 0.4713], [0.2128, 0.3749]], [[0.6226, 0.7803], [0.7865, 0.7605]]]])
print (np.array2string(model.predict([in0Ave68577,in1Ave68577,in0Min60179,in1Min60179,in0Con3889,in0Sub28784,in1Sub28784],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max27381.png')

LAve68577 = average_layer([[[[[0.8593]]]], [[[[0.195]]]]], Ave68577), 
LZer7571 = zero_padding2D_layer(Ave68577, 1, 0, 0, 0, Zer7571), 
LMin60179 = minimum_layer([[[[[0.199]], [[0.3327]]]], [[[[0.2769]], [[0.3997]]]]], Min60179), 
LAdd34346 = add_layer([Zer7571,Min60179], Add34346), 
LUp_27291 = up_sampling2D_layer(Add34346, 2, 2, Up_27291), 
LCon3889 = concatenate_layer([Up_27291,[[[[0.9436], [0.3168]], [[0.6723], [0.9175]], [[0.9642], [0.4125]], [[0.7623], [0.2689]]]]], 3, Con3889), 
LSub28784 = subtract_layer([[[[0.4019, 0.7895], [0.4139, 0.5452]], [[0.5385, 0.5273], [0.9048, 0.8224]]]], [[[[0.7056, 0.4713], [0.2128, 0.3749]], [[0.6226, 0.7803], [0.7865, 0.7605]]]], Sub28784), 
LZer69258 = zero_padding2D_layer(Sub28784, 2, 0, 0, 0, Zer69258), 
LMax27381 = maximum_layer([Con3889,Zer69258], Max27381), 
exec_layers([LAve68577,LZer7571,LMin60179,LAdd34346,LUp_27291,LCon3889,LSub28784,LZer69258,LMax27381],["Ave68577","Zer7571","Min60179","Add34346","Up_27291","Con3889","Sub28784","Zer69258","Max27381"],Max27381,"Max27381")

Actual (Unparsed): [[[[0.1990000, 0.9436000], [0.1990000, 0.3168000]], [[0.1990000, 0.6723000], [0.1990000, 0.9175000]], [[0.8598500, 0.9642000], [0.8598500, 0.4125000]], [[0.8598500, 0.7623000], [0.8598500, 0.2689000]]]]

Expected (Unparsed): [[[[0.199,0.9436],[0.199,0.3168]],[[0.199,0.6723],[0.199,0.9175]],[[0.85985,0.9642],[0.85985,0.4125]],[[0.85985,0.7623],[0.85985,0.2689]]]]

Actual:   [[[[0.199, 0.9436], [0.199, 0.3168]], [[0.199, 0.6723], [0.199, 0.9175]], [[0.8599, 0.9642], [0.8599, 0.4125]], [[0.8599, 0.7623], [0.8599, 0.2689]]]]

Expected: [[[[0.199, 0.9436], [0.199, 0.3168]], [[0.199, 0.6723], [0.199, 0.9175]], [[0.8599, 0.9642], [0.8599, 0.4125]], [[0.8599, 0.7623], [0.8599, 0.2689]]]]