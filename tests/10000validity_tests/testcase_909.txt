import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub57842 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub57842 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Ave77932 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave77932 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con25851 = tf.keras.layers.Input(shape=([2, 2, 1]))

Sub57842 = keras.layers.Subtract(name = 'Sub57842', )([in0Sub57842,in1Sub57842])
Ave77932 = keras.layers.Average(name = 'Ave77932', )([in0Ave77932,in1Ave77932])
Zer51565 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer51565', )(Ave77932)
Con25851 = keras.layers.Concatenate(axis=3, name = 'Con25851', )([Zer51565,in0Con25851])
Sub74908 = keras.layers.Subtract(name = 'Sub74908', )([Sub57842,Con25851])
model = tf.keras.models.Model(inputs=[in0Sub57842,in1Sub57842,in0Ave77932,in1Ave77932,in0Con25851], outputs=Sub74908)
in0Sub57842 = tf.constant([[[[0.9414, 0.339], [0.874, 0.1596]], [[0.4738, 0.563], [0.0145, 0.4199]]]])
in1Sub57842 = tf.constant([[[[0.3438, 0.5867], [0.2021, 0.9749]], [[0.1148, 0.1558], [0.0761, 0.6249]]]])
in0Ave77932 = tf.constant([[[[0.1197]], [[0.5219]]]])
in1Ave77932 = tf.constant([[[[0.8546]], [[0.4722]]]])
in0Con25851 = tf.constant([[[[0.1854], [0.5119]], [[0.8311], [0.5656]]]])
print (np.array2string(model.predict([in0Sub57842,in1Sub57842,in0Ave77932,in1Ave77932,in0Con25851],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub74908.png')

LSub57842 = subtract_layer([[[[0.9414, 0.339], [0.874, 0.1596]], [[0.4738, 0.563], [0.0145, 0.4199]]]], [[[[0.3438, 0.5867], [0.2021, 0.9749]], [[0.1148, 0.1558], [0.0761, 0.6249]]]], Sub57842), 
LAve77932 = average_layer([[[[[0.1197]], [[0.5219]]]], [[[[0.8546]], [[0.4722]]]]], Ave77932), 
LZer51565 = zero_padding2D_layer(Ave77932, 0, 0, 1, 0, Zer51565), 
LCon25851 = concatenate_layer([Zer51565,[[[[0.1854], [0.5119]], [[0.8311], [0.5656]]]]], 3, Con25851), 
LSub74908 = subtract_layer(Sub57842,Con25851, Sub74908), 
exec_layers([LSub57842,LAve77932,LZer51565,LCon25851,LSub74908],["Sub57842","Ave77932","Zer51565","Con25851","Sub74908"],Sub74908,"Sub74908")

Actual (Unparsed): [[[[0.5976000, -0.4331000], [0.1847500, -1.3272000]], [[0.3590000, -0.4239000], [-0.5586500, -0.7706000]]]]

Expected (Unparsed): [[[[0.5976,-0.4331],[0.18474999999999991,-1.3272]],[[0.359,-0.4239],[-0.55865,-0.7706]]]]

Actual:   [[[[0.5976, -0.4331], [0.1848, -1.3272]], [[0.359, -0.4239], [-0.5586, -0.7706]]]]

Expected: [[[[0.5976, -0.4331], [0.1848, -1.3272]], [[0.359, -0.4239], [-0.5586, -0.7706]]]]