import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot24273 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot24273 = tf.keras.layers.Input(shape=([2, 3]))

Dot24273 = keras.layers.Dot(axes=(1, 1), name = 'Dot24273', )([in0Dot24273,in1Dot24273])
Res97549 = keras.layers.Reshape((3, 3, 1), name = 'Res97549', )(Dot24273)
Con31985 = keras.layers.Conv2D(2, (1, 3),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con31985', )(Res97549)
Res61537 = keras.layers.Reshape((3, 2), name = 'Res61537', )(Con31985)
Up_80199 = keras.layers.UpSampling1D(size=(1), name = 'Up_80199', )(Res61537)
Res2033 = keras.layers.Reshape((3, 2, 1), name = 'Res2033', )(Up_80199)
Zer24817 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer24817', )(Res2033)
Res64078 = keras.layers.Reshape((5, 4), name = 'Res64078', )(Zer24817)
Up_82973 = keras.layers.UpSampling1D(size=(1), name = 'Up_82973', )(Res64078)
model = tf.keras.models.Model(inputs=[in0Dot24273,in1Dot24273], outputs=Up_82973)
w = model.get_layer('Con31985').get_weights() 
w[0] = np.array([[[[0.8353, 0.9582]], [[0.7005, 0.7304]], [[0.9821, 0.9279]]]])
w[1] = np.array([0, 0])
model.get_layer('Con31985').set_weights(w) 
in0Dot24273 = tf.constant([[[0.7547, 0.9674, 0.8509], [0.418, 0.8272, 0.6252]]])
in1Dot24273 = tf.constant([[[0.3919, 0.5997, 0.0297], [0.45, 0.2766, 0.4931]]])
print (np.array2string(model.predict([in0Dot24273,in1Dot24273],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_82973.png')

LDot24273 = dot_layer([[[0.7547, 0.9674, 0.8509], [0.418, 0.8272, 0.6252]]], [[[0.3919, 0.5997, 0.0297], [0.45, 0.2766, 0.4931]]], 1, 1, Dot24273), 
LRes97549 = reshape_layer(Dot24273, [3, 3, 1], Res97549), 
LCon31985 = conv2D_layer(Res97549, 1, 3,[[[[0.8353, 0.9582]], [[0.7005, 0.7304]], [[0.9821, 0.9279]]]],[0, 0], 1, 1, false, 1, 1, Con31985), 
LRes61537 = reshape_layer(Con31985, [3, 2], Res61537), 
LUp_80199 = up_sampling1D_layer(Res61537, 1, Up_80199), 
LRes2033 = reshape_layer(Up_80199, [3, 2, 1], Res2033), 
LZer24817 = zero_padding2D_layer(Res2033, 1, 1, 1, 1, Zer24817), 
LRes64078 = reshape_layer(Zer24817, [5, 4], Res64078), 
LUp_82973 = up_sampling1D_layer(Res64078, 1, Up_82973), 
exec_layers([LDot24273,LRes97549,LCon31985,LRes61537,LUp_80199,LRes2033,LZer24817,LRes64078,LUp_82973],["Dot24273","Res97549","Con31985","Res61537","Up_80199","Res2033","Zer24817","Res64078","Up_82973"],Up_82973,"Up_82973")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 1.0266465, 1.0907170, 0.0000000], [0.0000000, 1.6230947, 1.7159600, 0.0000000], [0.0000000, 1.3197281, 1.3976373, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0],[0,1.026646521843,1.090716970863,0],[0,1.6230947145780001,1.7159600350020003,0],[0,1.319728187173,1.397637349257,0],[0,0,0,0]]]

Actual:   [[[0, 0, 0, 0], [0, 1.0267, 1.0908, 0], [0, 1.6231, 1.716, 0], [0, 1.3198, 1.3977, 0], [0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0], [0, 1.0267, 1.0908, 0], [0, 1.6231, 1.716, 0], [0, 1.3198, 1.3977, 0], [0, 0, 0, 0]]]