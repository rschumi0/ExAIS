import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave76494 = tf.keras.layers.Input(shape=([2, 1]))
in0Con41703 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot37225 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot37225 = tf.keras.layers.Input(shape=([2, 3]))

Ave76494 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='same', name = 'Ave76494', )(in0Ave76494)
Zer43766 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer43766', )(Ave76494)
Con41703 = keras.layers.Concatenate(axis=2, name = 'Con41703', )([Zer43766,in0Con41703])
Dot37225 = keras.layers.Dot(axes=(1, 1), name = 'Dot37225', )([in0Dot37225,in1Dot37225])
Sub64319 = keras.layers.Subtract(name = 'Sub64319', )([Con41703,Dot37225])
Res91143 = keras.layers.Reshape((3, 3, 1), name = 'Res91143', )(Sub64319)
Res82741 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res82741', )(Res91143)
Glo77879 = keras.layers.GlobalAveragePooling3D(name = 'Glo77879', )(Res82741)
model = tf.keras.models.Model(inputs=[in0Ave76494,in0Con41703,in0Dot37225,in1Dot37225], outputs=Glo77879)
in0Ave76494 = tf.constant([[[1.3184], [1.2498]]])
in0Con41703 = tf.constant([[[0.0467, 0.2264], [0.9492, 0.0672], [0.8523, 0.6234]]])
in0Dot37225 = tf.constant([[[0.7565, 0.4022, 0.5203], [0.4197, 0.4402, 0.1925]]])
in1Dot37225 = tf.constant([[[0.7058, 0.9962, 0.8857], [0.5203, 0.3501, 0.5789]]])
print (np.array2string(model.predict([in0Ave76494,in0Con41703,in0Dot37225,in1Dot37225],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo77879.png')

LAve76494 = average_pooling1D_layer([[[1.3184], [1.2498]]], 2, 1, true, Ave76494), 
LZer43766 = zero_padding1D_layer(Ave76494, 1, 0, Zer43766), 
LCon41703 = concatenate_layer([Zer43766,[[[0.0467, 0.2264], [0.9492, 0.0672], [0.8523, 0.6234]]]], 2, Con41703), 
LDot37225 = dot_layer([[[0.7565, 0.4022, 0.5203], [0.4197, 0.4402, 0.1925]]], [[[0.7058, 0.9962, 0.8857], [0.5203, 0.3501, 0.5789]]], 1, 1, Dot37225), 
LSub64319 = subtract_layer(Con41703,Dot37225, Sub64319), 
LRes91143 = reshape_layer(Sub64319, [3, 3, 1], Res91143), 
LRes82741 = reshape_layer(Res91143, [3, 3, 1, 1], Res82741), 
LGlo77879 = global_average_pooling3D_layer(Res82741, Glo77879), 
exec_layers([LAve76494,LZer43766,LCon41703,LDot37225,LSub64319,LRes91143,LRes82741,LGlo77879],["Ave76494","Zer43766","Con41703","Dot37225","Sub64319","Res91143","Res82741","Glo77879"],Glo77879,"Glo77879")

Actual (Unparsed): [[-0.0634324]]

Expected (Unparsed): [[-0.06343240222222221]]

Actual:   [[-0.0634]]

Expected: [[-0.0634]]