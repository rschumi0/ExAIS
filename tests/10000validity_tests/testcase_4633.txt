import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc22665 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con50887 = tf.keras.layers.Input(shape=([7]))
in0Dot97821 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot97821 = tf.keras.layers.Input(shape=([3, 2]))
in0Mul63748 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul63748 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave75143 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave75143 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Sep3188 = tf.keras.layers.Input(shape=([1, 1]))
in0Mas50065 = tf.keras.layers.Input(shape=([2]))
in0Dot63521 = tf.keras.layers.Input(shape=([3]))
in1Dot63521 = tf.keras.layers.Input(shape=([3]))
in0Con86722 = tf.keras.layers.Input(shape=([1]))
in0Con64464 = tf.keras.layers.Input(shape=([2]))
in0Con56109 = tf.keras.layers.Input(shape=([5]))

Loc22665 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(1, 1), name = 'Loc22665', )(in0Loc22665)
Res68222 = keras.layers.Reshape((1, 2), name = 'Res68222', )(Loc22665)
Fla15096 = keras.layers.Flatten(name = 'Fla15096', )(Res68222)
Con50887 = keras.layers.Concatenate(axis=1, name = 'Con50887', )([Fla15096,in0Con50887])
Dot97821 = keras.layers.Dot(axes=(2, 2), name = 'Dot97821', )([in0Dot97821,in1Dot97821])
Fla15444 = keras.layers.Flatten(name = 'Fla15444', )(Dot97821)
Max28348 = keras.layers.Maximum(name = 'Max28348', )([Con50887,Fla15444])
Mul63748 = keras.layers.Multiply(name = 'Mul63748', )([in0Mul63748,in1Mul63748])
Zer74540 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer74540', )(Mul63748)
Ave75143 = keras.layers.Average(name = 'Ave75143', )([in0Ave75143,in1Ave75143])
Res31223 = keras.layers.Reshape((2, 2), name = 'Res31223', )(Ave75143)
Sep3188 = keras.layers.SeparableConv1D(2, (1),strides=(1), padding='valid', name = 'Sep3188', )(in0Sep3188)
Zer30195 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer30195', )(Sep3188)
Ave8598 = keras.layers.Average(name = 'Ave8598', )([Res31223,Zer30195])
Max54773 = keras.layers.Maximum(name = 'Max54773', )([Zer74540,Ave8598])
Fla68924 = keras.layers.Flatten(name = 'Fla68924', )(Max54773)
Mas50065 = keras.layers.Masking(mask_value=1, name = 'Mas50065', )(in0Mas50065)
Dot63521 = keras.layers.Dot(axes=(1, 1), name = 'Dot63521', )([in0Dot63521,in1Dot63521])
ELU43485 = keras.layers.ELU(alpha=-9.791132839968537, name = 'ELU43485', )(Dot63521)
Con86722 = keras.layers.Concatenate(axis=1, name = 'Con86722', )([ELU43485,in0Con86722])
Mul83806 = keras.layers.Multiply(name = 'Mul83806', )([Mas50065,Con86722])
Con64464 = keras.layers.Concatenate(axis=1, name = 'Con64464', )([Mul83806,in0Con64464])
Max91405 = keras.layers.Maximum(name = 'Max91405', )([Fla68924,Con64464])
Con56109 = keras.layers.Concatenate(axis=1, name = 'Con56109', )([Max91405,in0Con56109])
Add39281 = keras.layers.Add(name = 'Add39281', )([Max28348,Con56109])
model = tf.keras.models.Model(inputs=[in0Loc22665,in0Con50887,in0Dot97821,in1Dot97821,in0Mul63748,in1Mul63748,in0Ave75143,in1Ave75143,in0Sep3188,in0Mas50065,in0Dot63521,in1Dot63521,in0Con86722,in0Con64464,in0Con56109], outputs=Add39281)
w = model.get_layer('Loc22665').get_weights() 
w[0] = np.array([[[0.9702, 0.4422], [0.3729, 0.6076], [0.7541, 0.5526], [0.5314, 0.3625]]])
w[1] = np.array([[[0, 0]]])
model.get_layer('Loc22665').set_weights(w) 
w = model.get_layer('Sep3188').get_weights() 
w[0] = np.array([[[0.7052]]])
w[1] = np.array([[[0.4793, 0.8002]]])
w[2] = np.array([0, 0])
model.get_layer('Sep3188').set_weights(w) 
in0Loc22665 = tf.constant([[[[0.7194, 0.8459], [0.7354, 0.7096]]]])
in0Con50887 = tf.constant([[0.116, 0.4688, 0.242, 0.4882, 0.1617, 0.4518, 0.4425]])
in0Dot97821 = tf.constant([[[0.6564, 0.1393], [0.7685, 0.6299], [0.6281, 0.924]]])
in1Dot97821 = tf.constant([[[0.3834, 0.7983], [0.439, 0.1862], [0.4826, 0.9999]]])
in0Mul63748 = tf.constant([[[0.2947, 0.8662]]])
in1Mul63748 = tf.constant([[[0.98, 0.0265]]])
in0Ave75143 = tf.constant([[[[0.7281], [0.5935]], [[0.9942], [0.1906]]]])
in1Ave75143 = tf.constant([[[[0.0605], [0.2297]], [[0.3842], [0.9639]]]])
in0Sep3188 = tf.constant([[[0.4695]]])
in0Mas50065 = tf.constant([[1.2859, 1.3333]])
in0Dot63521 = tf.constant([[0.553, 0.0086, 0.5943]])
in1Dot63521 = tf.constant([[0.0997, 0.3048, 0.7301]])
in0Con86722 = tf.constant([[0.9319]])
in0Con64464 = tf.constant([[0.9664, 0.1613]])
in0Con56109 = tf.constant([[0.086, 0.7345, 0.7248, 0.6828, 0.9767]])
print (np.array2string(model.predict([in0Loc22665,in0Con50887,in0Dot97821,in1Dot97821,in0Mul63748,in1Mul63748,in0Ave75143,in1Ave75143,in0Sep3188,in0Mas50065,in0Dot63521,in1Dot63521,in0Con86722,in0Con64464,in0Con56109],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add39281.png')

LLoc22665 = locally_connected2D_layer([[[[0.7194, 0.8459], [0.7354, 0.7096]]]], 1, 2,[[[0.9702, 0.4422], [0.3729, 0.6076], [0.7541, 0.5526], [0.5314, 0.3625]]],[[[0, 0]]], 1, 1, Loc22665), 
LRes68222 = reshape_layer(Loc22665, [1, 2], Res68222), 
LFla15096 = flatten_layer(Res68222, Fla15096), 
LCon50887 = concatenate_layer([Fla15096,[[0.116, 0.4688, 0.242, 0.4882, 0.1617, 0.4518, 0.4425]]], 1, Con50887), 
LDot97821 = dot_layer([[[0.6564, 0.1393], [0.7685, 0.6299], [0.6281, 0.924]]], [[[0.3834, 0.7983], [0.439, 0.1862], [0.4826, 0.9999]]], 2, 2, Dot97821), 
LFla15444 = flatten_layer(Dot97821, Fla15444), 
LMax28348 = maximum_layer([Con50887,Fla15444], Max28348), 
LMul63748 = multiply_layer([[[[0.2947, 0.8662]]], [[[0.98, 0.0265]]]], Mul63748), 
LZer74540 = zero_padding1D_layer(Mul63748, 1, 0, Zer74540), 
LAve75143 = average_layer([[[[[0.7281], [0.5935]], [[0.9942], [0.1906]]]], [[[[0.0605], [0.2297]], [[0.3842], [0.9639]]]]], Ave75143), 
LRes31223 = reshape_layer(Ave75143, [2, 2], Res31223), 
LSep3188 = separable_conv1D_layer([[[0.4695]]], 1,[[[[0.7052]]],[[[0.4793, 0.8002]]]],[0, 0], 1, false, Sep3188), 
LZer30195 = zero_padding1D_layer(Sep3188, 1, 0, Zer30195), 
LAve8598 = average_layer([Res31223,Zer30195], Ave8598), 
LMax54773 = maximum_layer([Zer74540,Ave8598], Max54773), 
LFla68924 = flatten_layer(Max54773, Fla68924), 
LMas50065 = masking_layer([[1.2859, 1.3333]], 1, Mas50065), 
LDot63521 = dot_layer([[0.553, 0.0086, 0.5943]], [[0.0997, 0.3048, 0.7301]], 1, 1, Dot63521), 
LELU43485 = elu_layer(Dot63521, -9.791132839968537, ELU43485), 
LCon86722 = concatenate_layer([ELU43485,[[0.9319]]], 1, Con86722), 
LMul83806 = multiply_layer([Mas50065,Con86722], Mul83806), 
LCon64464 = concatenate_layer([Mul83806,[[0.9664, 0.1613]]], 1, Con64464), 
LMax91405 = maximum_layer([Fla68924,Con64464], Max91405), 
LCon56109 = concatenate_layer([Max91405,[[0.086, 0.7345, 0.7248, 0.6828, 0.9767]]], 1, Con56109), 
LAdd39281 = add_layer([Max28348,Con56109], Add39281), 
exec_layers([LLoc22665,LRes68222,LFla15096,LCon50887,LDot97821,LFla15444,LMax28348,LMul63748,LZer74540,LAve75143,LRes31223,LSep3188,LZer30195,LAve8598,LMax54773,LFla68924,LMas50065,LDot63521,LELU43485,LCon86722,LMul83806,LCon64464,LMax91405,LCon56109,LAdd39281],["Loc22665","Res68222","Fla15096","Con50887","Dot97821","Fla15444","Max28348","Mul63748","Zer74540","Ave75143","Res31223","Sep3188","Zer30195","Ave8598","Max54773","Fla68924","Mas50065","Dot63521","ELU43485","Con86722","Mul83806","Con64464","Max91405","Con56109","Add39281"],Add39281,"Add39281")

Actual (Unparsed): [[2.5772621, 2.7382019, 1.4224648, 1.2185867, 0.5406589, 1.7352151, 1.7032428, 1.1346000, 2.2037287]]

Expected (Unparsed): [[2.577262204279,2.73820183,1.42246471,1.21858673914,0.54065888,1.73521511,1.70324274,1.1345999999999998,2.20372866]]

Actual:   [[2.5773, 2.7383, 1.4225, 1.2186, 0.5407, 1.7353, 1.7033, 1.1346, 2.2038]]

Expected: [[2.5773, 2.7383, 1.4225, 1.2186, 0.5407, 1.7353, 1.7033, 1.1346, 2.2038]]