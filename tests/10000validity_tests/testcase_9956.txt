import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave10286 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave10286 = tf.keras.layers.Input(shape=([2, 1, 2]))

Ave10286 = keras.layers.Average(name = 'Ave10286', )([in0Ave10286,in1Ave10286])
Up_55257 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_55257', )(Ave10286)
Res11391 = keras.layers.Reshape((2, 4), name = 'Res11391', )(Up_55257)
Cro42248 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro42248', )(Res11391)
Res89082 = keras.layers.Reshape((1, 4, 1), name = 'Res89082', )(Cro42248)
Ave29743 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave29743', )(Res89082)
model = tf.keras.models.Model(inputs=[in0Ave10286,in1Ave10286], outputs=Ave29743)
in0Ave10286 = tf.constant([[[[0.1942, 0.6638]], [[0.8425, 0.3383]]]])
in1Ave10286 = tf.constant([[[[0.0546, 0.1009]], [[0.6861, 0.9249]]]])
print (np.array2string(model.predict([in0Ave10286,in1Ave10286],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave29743.png')

LAve10286 = average_layer([[[[[0.1942, 0.6638]], [[0.8425, 0.3383]]]], [[[[0.0546, 0.1009]], [[0.6861, 0.9249]]]]], Ave10286), 
LUp_55257 = up_sampling2D_layer(Ave10286, 1, 2, Up_55257), 
LRes11391 = reshape_layer(Up_55257, [2, 4], Res11391), 
LCro42248 = cropping1D_layer(Res11391, 1, 0, Cro42248), 
LRes89082 = reshape_layer(Cro42248, [1, 4, 1], Res89082), 
LAve29743 = average_pooling2D_layer(Res89082, 1, 2, Ave29743), 
exec_layers([LAve10286,LUp_55257,LRes11391,LCro42248,LRes89082,LAve29743],["Ave10286","Up_55257","Res11391","Cro42248","Res89082","Ave29743"],Ave29743,"Ave29743")

Actual (Unparsed): [[[[0.6979500], [0.6979500]]]]

Expected (Unparsed): [[[[0.6979500000000001],[0.6979500000000001]]]]

Actual:   [[[[0.698], [0.698]]]]

Expected: [[[[0.698], [0.698]]]]