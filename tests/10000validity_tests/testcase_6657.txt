import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min50930 = tf.keras.layers.Input(shape=([2, 1]))
in1Min50930 = tf.keras.layers.Input(shape=([2, 1]))
in0Con41107 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot14582 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot14582 = tf.keras.layers.Input(shape=([3, 3]))

Min50930 = keras.layers.Minimum(name = 'Min50930', )([in0Min50930,in1Min50930])
Zer92112 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer92112', )(Min50930)
Con41107 = keras.layers.Concatenate(axis=2, name = 'Con41107', )([Zer92112,in0Con41107])
Dot14582 = keras.layers.Dot(axes=(2, 2), name = 'Dot14582', )([in0Dot14582,in1Dot14582])
Mul96496 = keras.layers.Multiply(name = 'Mul96496', )([Con41107,Dot14582])
Res53841 = keras.layers.Reshape((3, 3, 1), name = 'Res53841', )(Mul96496)
Res17009 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res17009', )(Res53841)
Up_47197 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_47197', )(Res17009)
model = tf.keras.models.Model(inputs=[in0Min50930,in1Min50930,in0Con41107,in0Dot14582,in1Dot14582], outputs=Up_47197)
in0Min50930 = tf.constant([[[0.0868], [0.809]]])
in1Min50930 = tf.constant([[[0.7782], [0.5272]]])
in0Con41107 = tf.constant([[[0.9478, 0.4781], [0.8496, 0.2508], [0.0508, 0.5335]]])
in0Dot14582 = tf.constant([[[0.0636, 0.2098, 0.5489], [0.5341, 0.4591, 0.914], [0.6207, 0.9574, 0.3963]]])
in1Dot14582 = tf.constant([[[0.9889, 0.2481, 0.7648], [0.8882, 0.5872, 0.924], [0.2849, 0.8493, 0.1588]]])
print (np.array2string(model.predict([in0Min50930,in1Min50930,in0Con41107,in0Dot14582,in1Dot14582],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_47197.png')

LMin50930 = minimum_layer([[[[0.0868], [0.809]]], [[[0.7782], [0.5272]]]], Min50930), 
LZer92112 = zero_padding1D_layer(Min50930, 1, 0, Zer92112), 
LCon41107 = concatenate_layer([Zer92112,[[[0.9478, 0.4781], [0.8496, 0.2508], [0.0508, 0.5335]]]], 2, Con41107), 
LDot14582 = dot_layer([[[0.0636, 0.2098, 0.5489], [0.5341, 0.4591, 0.914], [0.6207, 0.9574, 0.3963]]], [[[0.9889, 0.2481, 0.7648], [0.8882, 0.5872, 0.924], [0.2849, 0.8493, 0.1588]]], 2, 2, Dot14582), 
LMul96496 = multiply_layer([Con41107,Dot14582], Mul96496), 
LRes53841 = reshape_layer(Mul96496, [3, 3, 1], Res53841), 
LRes17009 = reshape_layer(Res53841, [3, 3, 1, 1], Res17009), 
LUp_47197 = up_sampling3D_layer(Res17009, 2, 2, 2, Up_47197), 
exec_layers([LMin50930,LZer92112,LCon41107,LDot14582,LMul96496,LRes53841,LRes17009,LUp_47197],["Min50930","Zer92112","Con41107","Dot14582","Mul96496","Res53841","Res17009","Up_47197"],Up_47197,"Up_47197")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.6510132], [0.6510132]], [[0.6510132], [0.6510132]], [[0.1355261], [0.1355261]], [[0.1355261], [0.1355261]]], [[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.6510132], [0.6510132]], [[0.6510132], [0.6510132]], [[0.1355261], [0.1355261]], [[0.1355261], [0.1355261]]], [[[0.1164076], [0.1164076]], [[0.1164076], [0.1164076]], [[1.3495957], [1.3495957]], [[1.3495957], [1.3495957]], [[0.1723553], [0.1723553]], [[0.1723553], [0.1723553]]], [[[0.1164076], [0.1164076]], [[0.1164076], [0.1164076]], [[1.3495957], [1.3495957]], [[1.3495957], [1.3495957]], [[0.1723553], [0.1723553]], [[0.1723553], [0.1723553]]], [[[0.6086162], [0.6086162]], [[0.6086162], [0.6086162]], [[0.0751673], [0.0751673]], [[0.0751673], [0.0751673]], [[0.5617167], [0.5617167]], [[0.5617167], [0.5617167]]], [[[0.6086162], [0.6086162]], [[0.6086162], [0.6086162]], [[0.0751673], [0.0751673]], [[0.0751673], [0.0751673]], [[0.5617167], [0.5617167]], [[0.5617167], [0.5617167]]]]]

Expected (Unparsed): [[[[[0.0],[0.0]],[[0.0],[0.0]],[[0.651013187104],[0.651013187104]],[[0.651013187104],[0.651013187104]],[[0.13552609861],[0.13552609861]],[[0.13552609861],[0.13552609861]]],[[[0.0],[0.0]],[[0.0],[0.0]],[[0.651013187104],[0.651013187104]],[[0.651013187104],[0.651013187104]],[[0.13552609861],[0.13552609861]],[[0.13552609861],[0.13552609861]]],[[[0.11640760151999999],[0.11640760151999999]],[[0.11640760151999999],[0.11640760151999999]],[[1.349595666144],[1.349595666144]],[[1.349595666144],[1.349595666144]],[[0.17235525753600003],[0.17235525753600003]],[[0.17235525753600003],[0.17235525753600003]]],[[[0.11640760151999999],[0.11640760151999999]],[[0.11640760151999999],[0.11640760151999999]],[[1.349595666144],[1.349595666144]],[[1.349595666144],[1.349595666144]],[[0.17235525753600003],[0.17235525753600003]],[[0.17235525753600003],[0.17235525753600003]]],[[[0.6086162393519999],[0.6086162393519999]],[[0.6086162393519999],[0.6086162393519999]],[[0.075167348776],[0.075167348776]],[[0.075167348776],[0.075167348776]],[[0.561716649615],[0.561716649615]],[[0.561716649615],[0.561716649615]]],[[[0.6086162393519999],[0.6086162393519999]],[[0.6086162393519999],[0.6086162393519999]],[[0.075167348776],[0.075167348776]],[[0.075167348776],[0.075167348776]],[[0.561716649615],[0.561716649615]],[[0.561716649615],[0.561716649615]]]]]

Actual:   [[[[[0], [0]], [[0], [0]], [[0.6511], [0.6511]], [[0.6511], [0.6511]], [[0.1356], [0.1356]], [[0.1356], [0.1356]]], [[[0], [0]], [[0], [0]], [[0.6511], [0.6511]], [[0.6511], [0.6511]], [[0.1356], [0.1356]], [[0.1356], [0.1356]]], [[[0.1165], [0.1165]], [[0.1165], [0.1165]], [[1.3496], [1.3496]], [[1.3496], [1.3496]], [[0.1724], [0.1724]], [[0.1724], [0.1724]]], [[[0.1165], [0.1165]], [[0.1165], [0.1165]], [[1.3496], [1.3496]], [[1.3496], [1.3496]], [[0.1724], [0.1724]], [[0.1724], [0.1724]]], [[[0.6087], [0.6087]], [[0.6087], [0.6087]], [[0.0752], [0.0752]], [[0.0752], [0.0752]], [[0.5618], [0.5618]], [[0.5618], [0.5618]]], [[[0.6087], [0.6087]], [[0.6087], [0.6087]], [[0.0752], [0.0752]], [[0.0752], [0.0752]], [[0.5618], [0.5618]], [[0.5618], [0.5618]]]]]

Expected: [[[[[0], [0]], [[0], [0]], [[0.6511], [0.6511]], [[0.6511], [0.6511]], [[0.1356], [0.1356]], [[0.1356], [0.1356]]], [[[0], [0]], [[0], [0]], [[0.6511], [0.6511]], [[0.6511], [0.6511]], [[0.1356], [0.1356]], [[0.1356], [0.1356]]], [[[0.1165], [0.1165]], [[0.1165], [0.1165]], [[1.3496], [1.3496]], [[1.3496], [1.3496]], [[0.1724], [0.1724]], [[0.1724], [0.1724]]], [[[0.1165], [0.1165]], [[0.1165], [0.1165]], [[1.3496], [1.3496]], [[1.3496], [1.3496]], [[0.1724], [0.1724]], [[0.1724], [0.1724]]], [[[0.6087], [0.6087]], [[0.6087], [0.6087]], [[0.0752], [0.0752]], [[0.0752], [0.0752]], [[0.5618], [0.5618]], [[0.5618], [0.5618]]], [[[0.6087], [0.6087]], [[0.6087], [0.6087]], [[0.0752], [0.0752]], [[0.0752], [0.0752]], [[0.5618], [0.5618]], [[0.5618], [0.5618]]]]]