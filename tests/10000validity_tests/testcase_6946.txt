import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min92413 = tf.keras.layers.Input(shape=([1, 1]))
in1Min92413 = tf.keras.layers.Input(shape=([1, 1]))
in0Max94820 = tf.keras.layers.Input(shape=([1, 1]))
in1Max94820 = tf.keras.layers.Input(shape=([1, 1]))
in0Con80808 = tf.keras.layers.Input(shape=([3, 3]))
in0Sub99341 = tf.keras.layers.Input(shape=([3, 2, 2]))
in1Sub99341 = tf.keras.layers.Input(shape=([3, 2, 2]))
in0Ave57259 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave57259 = tf.keras.layers.Input(shape=([2, 1]))
in0Con46435 = tf.keras.layers.Input(shape=([3, 3]))

Min92413 = keras.layers.Minimum(name = 'Min92413', )([in0Min92413,in1Min92413])
Max94820 = keras.layers.Maximum(name = 'Max94820', )([in0Max94820,in1Max94820])
Ave10802 = keras.layers.Average(name = 'Ave10802', )([Min92413,Max94820])
Zer10535 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer10535', )(Ave10802)
Con80808 = keras.layers.Concatenate(axis=2, name = 'Con80808', )([Zer10535,in0Con80808])
Sub99341 = keras.layers.Subtract(name = 'Sub99341', )([in0Sub99341,in1Sub99341])
Res89411 = keras.layers.Reshape((3, 4), name = 'Res89411', )(Sub99341)
Ave57259 = keras.layers.Average(name = 'Ave57259', )([in0Ave57259,in1Ave57259])
Zer42060 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer42060', )(Ave57259)
Con46435 = keras.layers.Concatenate(axis=2, name = 'Con46435', )([Zer42060,in0Con46435])
Sub57773 = keras.layers.Subtract(name = 'Sub57773', )([Res89411,Con46435])
Add66757 = keras.layers.Add(name = 'Add66757', )([Con80808,Sub57773])
model = tf.keras.models.Model(inputs=[in0Min92413,in1Min92413,in0Max94820,in1Max94820,in0Con80808,in0Sub99341,in1Sub99341,in0Ave57259,in1Ave57259,in0Con46435], outputs=Add66757)
in0Min92413 = tf.constant([[[0.3206]]])
in1Min92413 = tf.constant([[[0.9561]]])
in0Max94820 = tf.constant([[[0.3482]]])
in1Max94820 = tf.constant([[[0.3916]]])
in0Con80808 = tf.constant([[[0.2882, 0.3141, 0.3293], [0.06, 0.6921, 0.8054], [0.8525, 0.089, 0.847]]])
in0Sub99341 = tf.constant([[[[0.0924, 0.7889], [0.3084, 0.5644]], [[0.0314, 0.892], [0.8843, 0.7943]], [[0.8761, 0.0622], [0.6772, 0.2415]]]])
in1Sub99341 = tf.constant([[[[0.9769, 0.8184], [0.4996, 0.7293]], [[0.3605, 0.4122], [0.4549, 0.4343]], [[0.5447, 0.803], [0.2013, 0.0614]]]])
in0Ave57259 = tf.constant([[[0.1037], [0.2309]]])
in1Ave57259 = tf.constant([[[0.7331], [0.3012]]])
in0Con46435 = tf.constant([[[0.0891, 0.2056, 0.8808], [0.7328, 0.7151, 0.7213], [0.0606, 0.0872, 0.258]]])
print (np.array2string(model.predict([in0Min92413,in1Min92413,in0Max94820,in1Max94820,in0Con80808,in0Sub99341,in1Sub99341,in0Ave57259,in1Ave57259,in0Con46435],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add66757.png')

LMin92413 = minimum_layer([[[[0.3206]]], [[[0.9561]]]], Min92413), 
LMax94820 = maximum_layer([[[[0.3482]]], [[[0.3916]]]], Max94820), 
LAve10802 = average_layer([Min92413,Max94820], Ave10802), 
LZer10535 = zero_padding1D_layer(Ave10802, 2, 0, Zer10535), 
LCon80808 = concatenate_layer([Zer10535,[[[0.2882, 0.3141, 0.3293], [0.06, 0.6921, 0.8054], [0.8525, 0.089, 0.847]]]], 2, Con80808), 
LSub99341 = subtract_layer([[[[0.0924, 0.7889], [0.3084, 0.5644]], [[0.0314, 0.892], [0.8843, 0.7943]], [[0.8761, 0.0622], [0.6772, 0.2415]]]], [[[[0.9769, 0.8184], [0.4996, 0.7293]], [[0.3605, 0.4122], [0.4549, 0.4343]], [[0.5447, 0.803], [0.2013, 0.0614]]]], Sub99341), 
LRes89411 = reshape_layer(Sub99341, [3, 4], Res89411), 
LAve57259 = average_layer([[[[0.1037], [0.2309]]], [[[0.7331], [0.3012]]]], Ave57259), 
LZer42060 = zero_padding1D_layer(Ave57259, 1, 0, Zer42060), 
LCon46435 = concatenate_layer([Zer42060,[[[0.0891, 0.2056, 0.8808], [0.7328, 0.7151, 0.7213], [0.0606, 0.0872, 0.258]]]], 2, Con46435), 
LSub57773 = subtract_layer(Res89411,Con46435, Sub57773), 
LAdd66757 = add_layer([Con80808,Sub57773], Add66757), 
exec_layers([LMin92413,LMax94820,LAve10802,LZer10535,LCon80808,LSub99341,LRes89411,LAve57259,LZer42060,LCon46435,LSub57773,LAdd66757],["Min92413","Max94820","Ave10802","Zer10535","Con80808","Sub99341","Res89411","Ave57259","Zer42060","Con46435","Sub57773","Add66757"],Add66757,"Add66757")

Actual (Unparsed): [[[-0.8845000, 0.1696000, -0.0827000, -0.7164000], [-0.7475000, -0.1930000, 0.4064000, 0.4441000], [0.4214500, 0.0511000, 0.4777000, 0.7691000]]]

Expected (Unparsed): [[[-0.8845,0.16960000000000003,-0.0827,-0.7164000000000001],[-0.7475,-0.193,0.40640000000000004,0.44409999999999994],[0.42145,0.051100000000000034,0.4777,0.7690999999999999]]]

Actual:   [[[-0.8845, 0.1696, -0.0827, -0.7164], [-0.7475, -0.193, 0.4064, 0.4441], [0.4215, 0.0511, 0.4777, 0.7691]]]

Expected: [[[-0.8845, 0.1697, -0.0827, -0.7164], [-0.7475, -0.193, 0.4065, 0.4441], [0.4215, 0.0512, 0.4777, 0.7691]]]