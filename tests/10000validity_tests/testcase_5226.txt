import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot66174 = tf.keras.layers.Input(shape=([2]))
in1Dot66174 = tf.keras.layers.Input(shape=([2]))
in0Con48714 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Add29292 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add29292 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con59281 = tf.keras.layers.Input(shape=([2, 2]))
in0Con38503 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Sof91675 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Con99356 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Add97726 = tf.keras.layers.Input(shape=([2, 2]))
in1Add97726 = tf.keras.layers.Input(shape=([2, 2]))
in0Con99078 = tf.keras.layers.Input(shape=([2, 4]))

Dot66174 = keras.layers.Dot(axes=(1, 1), name = 'Dot66174', )([in0Dot66174,in1Dot66174])
Res10224 = keras.layers.Reshape((1, 1), name = 'Res10224', )(Dot66174)
Res48727 = keras.layers.Reshape((1, 1, 1), name = 'Res48727', )(Res10224)
Zer46411 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer46411', )(Res48727)
Con48714 = keras.layers.Concatenate(axis=3, name = 'Con48714', )([Zer46411,in0Con48714])
Add29292 = keras.layers.Add(name = 'Add29292', )([in0Add29292,in1Add29292])
Max63946 = keras.layers.Maximum(name = 'Max63946', )([Con48714,Add29292])
Res93532 = keras.layers.Reshape((1, 4), name = 'Res93532', )(Max63946)
Zer50993 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer50993', )(Res93532)
Con59281 = keras.layers.Concatenate(axis=2, name = 'Con59281', )([Zer50993,in0Con59281])
Con38503 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con38503', )(in0Con38503)
Sof91675 = keras.layers.Softmax(axis=1, name = 'Sof91675', input_shape=(1, 2, 1, 2))(in0Sof91675)
Zer82184 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer82184', )(Sof91675)
Con99356 = keras.layers.Concatenate(axis=4, name = 'Con99356', )([Zer82184,in0Con99356])
Add8240 = keras.layers.Add(name = 'Add8240', )([Con38503,Con99356])
Res5102 = keras.layers.Reshape((2, 2, 3), name = 'Res5102', )(Add8240)
Res30760 = keras.layers.Reshape((2, 6), name = 'Res30760', )(Res5102)
Add97726 = keras.layers.Add(name = 'Add97726', )([in0Add97726,in1Add97726])
Con99078 = keras.layers.Concatenate(axis=2, name = 'Con99078', )([Add97726,in0Con99078])
Min94203 = keras.layers.Minimum(name = 'Min94203', )([Res30760,Con99078])
Add40728 = keras.layers.Add(name = 'Add40728', )([Con59281,Min94203])
model = tf.keras.models.Model(inputs=[in0Dot66174,in1Dot66174,in0Con48714,in0Add29292,in1Add29292,in0Con59281,in0Con38503,in0Sof91675,in0Con99356,in0Add97726,in1Add97726,in0Con99078], outputs=Add40728)
w = model.get_layer('Con38503').get_weights() 
w[0] = np.array([[[[[0.4204, 0.4323], [0.5483, 0.0157], [0.8757, 0.3321]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con38503').set_weights(w) 
in0Dot66174 = tf.constant([[0.9689, 0.7835]])
in1Dot66174 = tf.constant([[0.4485, 0.5838]])
in0Con48714 = tf.constant([[[[0.8775], [0.9047]]]])
in0Add29292 = tf.constant([[[[0.3979, 0.6038], [0.743, 0.1202]]]])
in1Add29292 = tf.constant([[[[0.2243, 0.2353], [0.9119, 0.6417]]]])
in0Con59281 = tf.constant([[[0.8685, 0.43], [0.4997, 0.3079]]])
in0Con38503 = tf.constant([[[[[0.526, 0.6326]], [[0.999, 0.631]]], [[[0.2808, 0.9188]], [[0.494, 0.5286]]]]])
in0Sof91675 = tf.constant([[[[[0.4851, 0.3653]], [[0.2704, 0.5326]]]]])
in0Con99356 = tf.constant([[[[[0.8835]], [[0.7592]]], [[[0.8386]], [[0.8872]]]]])
in0Add97726 = tf.constant([[[0.1594, 0.7746], [0.6768, 0.6605]]])
in1Add97726 = tf.constant([[[0.1297, 0.166], [0.5466, 0.1492]]])
in0Con99078 = tf.constant([[[0.1543, 0.5064, 0.4071, 0.8215], [0.307, 0.0156, 0.1795, 0.3193]]])
print (np.array2string(model.predict([in0Dot66174,in1Dot66174,in0Con48714,in0Add29292,in1Add29292,in0Con59281,in0Con38503,in0Sof91675,in0Con99356,in0Add97726,in1Add97726,in0Con99078],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add40728.png')

LDot66174 = dot_layer([[0.9689, 0.7835]], [[0.4485, 0.5838]], 1, 1, Dot66174), 
LRes10224 = reshape_layer(Dot66174, [1, 1], Res10224), 
LRes48727 = reshape_layer(Res10224, [1, 1, 1], Res48727), 
LZer46411 = zero_padding2D_layer(Res48727, 0, 0, 1, 0, Zer46411), 
LCon48714 = concatenate_layer([Zer46411,[[[[0.8775], [0.9047]]]]], 3, Con48714), 
LAdd29292 = add_layer([[[[[0.3979, 0.6038], [0.743, 0.1202]]]], [[[[0.2243, 0.2353], [0.9119, 0.6417]]]]], Add29292), 
LMax63946 = maximum_layer([Con48714,Add29292], Max63946), 
LRes93532 = reshape_layer(Max63946, [1, 4], Res93532), 
LZer50993 = zero_padding1D_layer(Res93532, 1, 0, Zer50993), 
LCon59281 = concatenate_layer([Zer50993,[[[0.8685, 0.43], [0.4997, 0.3079]]]], 2, Con59281), 
LCon38503 = conv3D_transpose_layer([[[[[0.526, 0.6326]], [[0.999, 0.631]]], [[[0.2808, 0.9188]], [[0.494, 0.5286]]]]], 1, 1, 1,[[[[[0.4204, 0.4323], [0.5483, 0.0157], [0.8757, 0.3321]]]]],[0, 0, 0], 1, 1, 1, true, Con38503), 
LSof91675 = softmax_layer([[[[[0.4851, 0.3653]], [[0.2704, 0.5326]]]]], 1, Sof91675), 
LZer82184 = zero_padding3D_layer(Sof91675, 1, 0, 0, 0, 0, 0, Zer82184), 
LCon99356 = concatenate_layer([Zer82184,[[[[[0.8835]], [[0.7592]]], [[[0.8386]], [[0.8872]]]]]], 4, Con99356), 
LAdd8240 = add_layer([Con38503,Con99356], Add8240), 
LRes5102 = reshape_layer(Add8240, [2, 2, 3], Res5102), 
LRes30760 = reshape_layer(Res5102, [2, 6], Res30760), 
LAdd97726 = add_layer([[[[0.1594, 0.7746], [0.6768, 0.6605]]], [[[0.1297, 0.166], [0.5466, 0.1492]]]], Add97726), 
LCon99078 = concatenate_layer([Add97726,[[[0.1543, 0.5064, 0.4071, 0.8215], [0.307, 0.0156, 0.1795, 0.3193]]]], 2, Con99078), 
LMin94203 = minimum_layer([Res30760,Con99078], Min94203), 
LAdd40728 = add_layer([Con59281,Min94203], Add40728), 
exec_layers([LDot66174,LRes10224,LRes48727,LZer46411,LCon48714,LAdd29292,LMax63946,LRes93532,LZer50993,LCon59281,LCon38503,LSof91675,LZer82184,LCon99356,LAdd8240,LRes5102,LRes30760,LAdd97726,LCon99078,LMin94203,LAdd40728],["Dot66174","Res10224","Res48727","Zer46411","Con48714","Add29292","Max63946","Res93532","Zer50993","Con59281","Con38503","Sof91675","Zer82184","Con99356","Add8240","Res5102","Res30760","Add97726","Con99078","Min94203","Add40728"],Add40728,"Add40728")

Actual (Unparsed): [[[0.2891000, 0.2983376, 0.1543000, 0.5064000, 1.2756000, 1.2515000], [1.8456000, 1.6872000, 1.9619000, 0.9203000, 0.6792000, 0.6272000]]]

Expected (Unparsed): [[[0.2891,0.29833762,0.1543,0.5064,1.2756,1.2515],[1.8455999999999997,1.6871999999999998,1.9619,0.9202999999999999,0.6792,0.6272]]]

Actual:   [[[0.2891, 0.2984, 0.1543, 0.5064, 1.2756, 1.2515], [1.8456, 1.6872, 1.9619, 0.9203, 0.6792, 0.6272]]]

Expected: [[[0.2891, 0.2984, 0.1543, 0.5064, 1.2756, 1.2515], [1.8456, 1.6872, 1.9619, 0.9203, 0.6792, 0.6272]]]