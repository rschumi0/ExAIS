import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max37136 = tf.keras.layers.Input(shape=([1, 2]))
in1Max37136 = tf.keras.layers.Input(shape=([1, 2]))
in0Add55118 = tf.keras.layers.Input(shape=([2, 1]))
in1Add55118 = tf.keras.layers.Input(shape=([2, 1]))
in0Con65434 = tf.keras.layers.Input(shape=([2, 1]))
in0Ave19617 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave19617 = tf.keras.layers.Input(shape=([2, 2]))

Max37136 = keras.layers.Maximum(name = 'Max37136', )([in0Max37136,in1Max37136])
Zer54957 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer54957', )(Max37136)
Add55118 = keras.layers.Add(name = 'Add55118', )([in0Add55118,in1Add55118])
Con65434 = keras.layers.Concatenate(axis=2, name = 'Con65434', )([Add55118,in0Con65434])
Ave19617 = keras.layers.Average(name = 'Ave19617', )([in0Ave19617,in1Ave19617])
Dot12104 = keras.layers.Dot(axes=(1, 1), name = 'Dot12104', )([Con65434,Ave19617])
Dot97112 = keras.layers.Dot(axes=(2, 2), name = 'Dot97112', )([Zer54957,Dot12104])
model = tf.keras.models.Model(inputs=[in0Max37136,in1Max37136,in0Add55118,in1Add55118,in0Con65434,in0Ave19617,in1Ave19617], outputs=Dot97112)
in0Max37136 = tf.constant([[[0.8329, 0.2463]]])
in1Max37136 = tf.constant([[[0.0544, 0.9978]]])
in0Add55118 = tf.constant([[[0.4507], [0.1797]]])
in1Add55118 = tf.constant([[[0.9737], [0.5835]]])
in0Con65434 = tf.constant([[[0.2537], [0.633]]])
in0Ave19617 = tf.constant([[[0.1651, 0.7625], [0.5803, 0.4065]]])
in1Ave19617 = tf.constant([[[0.4353, 0.8365], [0.8971, 0.8194]]])
print (np.array2string(model.predict([in0Max37136,in1Max37136,in0Add55118,in1Add55118,in0Con65434,in0Ave19617,in1Ave19617],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot97112.png')

LMax37136 = maximum_layer([[[[0.8329, 0.2463]]], [[[0.0544, 0.9978]]]], Max37136), 
LZer54957 = zero_padding1D_layer(Max37136, 1, 0, Zer54957), 
LAdd55118 = add_layer([[[[0.4507], [0.1797]]], [[[0.9737], [0.5835]]]], Add55118), 
LCon65434 = concatenate_layer([Add55118,[[[0.2537], [0.633]]]], 2, Con65434), 
LAve19617 = average_layer([[[[0.1651, 0.7625], [0.5803, 0.4065]]], [[[0.4353, 0.8365], [0.8971, 0.8194]]]], Ave19617), 
LDot12104 = dot_layer(Con65434,Ave19617, 1, 1, Dot12104), 
LDot97112 = dot_layer(Zer54957,Dot12104, 2, 2, Dot97112), 
exec_layers([LMax37136,LZer54957,LAdd55118,LCon65434,LAve19617,LDot12104,LDot97112],["Max37136","Zer54957","Add55118","Con65434","Ave19617","Dot12104","Dot97112"],Dot97112,"Dot97112")

Actual (Unparsed): [[[0.0000000, 0.0000000], [2.4287977, 1.0424266]]]

Expected (Unparsed): [[[0.0,0.0],[2.42879769696,1.042426577836]]]

Actual:   [[[0, 0], [2.4288, 1.0425]]]

Expected: [[[0, 0], [2.4288, 1.0425]]]