import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub33786 = tf.keras.layers.Input(shape=([2]))
in1Sub33786 = tf.keras.layers.Input(shape=([2]))
in0Con83421 = tf.keras.layers.Input(shape=([2]))
in0Sub73321 = tf.keras.layers.Input(shape=([3]))
in1Sub73321 = tf.keras.layers.Input(shape=([3]))

Sub33786 = keras.layers.Subtract(name = 'Sub33786', )([in0Sub33786,in1Sub33786])
Res47158 = keras.layers.Reshape((2, 1), name = 'Res47158', )(Sub33786)
Res2348 = keras.layers.Reshape((2, 1, 1), name = 'Res2348', )(Res47158)
Cro19114 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro19114', )(Res2348)
Res55237 = keras.layers.Reshape((1, 1), name = 'Res55237', )(Cro19114)
Fla60435 = keras.layers.Flatten(name = 'Fla60435', )(Res55237)
Con83421 = keras.layers.Concatenate(axis=1, name = 'Con83421', )([Fla60435,in0Con83421])
Sub73321 = keras.layers.Subtract(name = 'Sub73321', )([in0Sub73321,in1Sub73321])
Mul43576 = keras.layers.Multiply(name = 'Mul43576', )([Con83421,Sub73321])
model = tf.keras.models.Model(inputs=[in0Sub33786,in1Sub33786,in0Con83421,in0Sub73321,in1Sub73321], outputs=Mul43576)
in0Sub33786 = tf.constant([[0.3515, 0.4923]])
in1Sub33786 = tf.constant([[0.3242, 0.1953]])
in0Con83421 = tf.constant([[0.5726, 0.7189]])
in0Sub73321 = tf.constant([[0.7638, 0.1623, 0.0625]])
in1Sub73321 = tf.constant([[0.1558, 0.8888, 0.3686]])
print (np.array2string(model.predict([in0Sub33786,in1Sub33786,in0Con83421,in0Sub73321,in1Sub73321],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul43576.png')

LSub33786 = subtract_layer([[0.3515, 0.4923]], [[0.3242, 0.1953]], Sub33786), 
LRes47158 = reshape_layer(Sub33786, [2, 1], Res47158), 
LRes2348 = reshape_layer(Res47158, [2, 1, 1], Res2348), 
LCro19114 = cropping2D_layer(Res2348, 1, 0, 0, 0, Cro19114), 
LRes55237 = reshape_layer(Cro19114, [1, 1], Res55237), 
LFla60435 = flatten_layer(Res55237, Fla60435), 
LCon83421 = concatenate_layer([Fla60435,[[0.5726, 0.7189]]], 1, Con83421), 
LSub73321 = subtract_layer([[0.7638, 0.1623, 0.0625]], [[0.1558, 0.8888, 0.3686]], Sub73321), 
LMul43576 = multiply_layer([Con83421,Sub73321], Mul43576), 
exec_layers([LSub33786,LRes47158,LRes2348,LCro19114,LRes55237,LFla60435,LCon83421,LSub73321,LMul43576],["Sub33786","Res47158","Res2348","Cro19114","Res55237","Fla60435","Con83421","Sub73321","Mul43576"],Mul43576,"Mul43576")

Actual (Unparsed): [[0.1805760, -0.4159939, -0.2200553]]

Expected (Unparsed): [[0.18057600000000004,-0.4159939,-0.22005529]]

Actual:   [[0.1806, -0.4159, -0.22]]

Expected: [[0.1806, -0.4159, -0.22]]