import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer12319 = tf.keras.layers.Input(shape=([4, 3]))
in0Max67870 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max67870 = tf.keras.layers.Input(shape=([2, 2, 2]))

Zer12319 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer12319', )(in0Zer12319)
Res41064 = keras.layers.Reshape((6, 3, 1), name = 'Res41064', )(Zer12319)
Res40932 = keras.layers.Reshape((6, 3, 1, 1), name = 'Res40932', )(Res41064)
Max67870 = keras.layers.Maximum(name = 'Max67870', )([in0Max67870,in1Max67870])
Res88837 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res88837', )(Max67870)
Cro96426 = keras.layers.Cropping3D(cropping=((0, 1), (1, 0), (1, 0)), name = 'Cro96426', )(Res88837)
Zer3443 = keras.layers.ZeroPadding3D(padding=((5, 0), (2, 0), (0, 0)), name = 'Zer3443', )(Cro96426)
Sub85937 = keras.layers.Subtract(name = 'Sub85937', )([Res40932,Zer3443])
model = tf.keras.models.Model(inputs=[in0Zer12319,in0Max67870,in1Max67870], outputs=Sub85937)
in0Zer12319 = tf.constant([[[1.8855, 1.1049, 1.9038], [1.268, 1.7253, 1.6514], [1.3224, 1.4689, 1.2603], [1.2415, 1.5406, 1.5352]]])
in0Max67870 = tf.constant([[[[0.2234, 0.4158], [0.5706, 0.4077]], [[0.7254, 0.3883], [0.8362, 0.9175]]]])
in1Max67870 = tf.constant([[[[0.9803, 0.7336], [0.4009, 0.214]], [[0.1336, 0.2696], [0.5227, 0.615]]]])
print (np.array2string(model.predict([in0Zer12319,in0Max67870,in1Max67870],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub85937.png')

LZer12319 = zero_padding1D_layer([[[1.8855, 1.1049, 1.9038], [1.268, 1.7253, 1.6514], [1.3224, 1.4689, 1.2603], [1.2415, 1.5406, 1.5352]]], 1, 1, Zer12319), 
LRes41064 = reshape_layer(Zer12319, [6, 3, 1], Res41064), 
LRes40932 = reshape_layer(Res41064, [6, 3, 1, 1], Res40932), 
LMax67870 = maximum_layer([[[[[0.2234, 0.4158], [0.5706, 0.4077]], [[0.7254, 0.3883], [0.8362, 0.9175]]]], [[[[0.9803, 0.7336], [0.4009, 0.214]], [[0.1336, 0.2696], [0.5227, 0.615]]]]], Max67870), 
LRes88837 = reshape_layer(Max67870, [2, 2, 2, 1], Res88837), 
LCro96426 = cropping3D_layer(Res88837, 0, 1, 1, 0, 1, 0, Cro96426), 
LZer3443 = zero_padding3D_layer(Cro96426, 5, 0, 2, 0, 0, 0, Zer3443), 
LSub85937 = subtract_layer(Res40932,Zer3443, Sub85937), 
exec_layers([LZer12319,LRes41064,LRes40932,LMax67870,LRes88837,LCro96426,LZer3443,LSub85937],["Zer12319","Res41064","Res40932","Max67870","Res88837","Cro96426","Zer3443","Sub85937"],Sub85937,"Sub85937")

Actual (Unparsed): [[[[[0.0000000]], [[0.0000000]], [[0.0000000]]], [[[1.8855000]], [[1.1049000]], [[1.9038000]]], [[[1.2680000]], [[1.7253000]], [[1.6514000]]], [[[1.3224000]], [[1.4689000]], [[1.2603000]]], [[[1.2415000]], [[1.5405999]], [[1.5352000]]], [[[0.0000000]], [[0.0000000]], [[-0.4077000]]]]]

Expected (Unparsed): [[[[[0]],[[0]],[[0]]],[[[1.8855]],[[1.1049]],[[1.9038]]],[[[1.268]],[[1.7253]],[[1.6514]]],[[[1.3224]],[[1.4689]],[[1.2603]]],[[[1.2415]],[[1.5406]],[[1.5352]]],[[[0]],[[0]],[[-0.4077]]]]]

Actual:   [[[[[0]], [[0]], [[0]]], [[[1.8855]], [[1.1049]], [[1.9038]]], [[[1.268]], [[1.7253]], [[1.6514]]], [[[1.3224]], [[1.4689]], [[1.2603]]], [[[1.2415]], [[1.5406]], [[1.5352]]], [[[0]], [[0]], [[-0.4077]]]]]

Expected: [[[[[0]], [[0]], [[0]]], [[[1.8855]], [[1.1049]], [[1.9038]]], [[[1.268]], [[1.7253]], [[1.6514]]], [[[1.3224]], [[1.4689]], [[1.2603]]], [[[1.2415]], [[1.5406]], [[1.5352]]], [[[0]], [[0]], [[-0.4077]]]]]