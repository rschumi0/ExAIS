import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave35552 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con85526 = tf.keras.layers.Input(shape=([2, 1]))

Ave35552 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(12, 1), padding='same', name = 'Ave35552', )(in0Ave35552)
Res94683 = keras.layers.Reshape((1, 4), name = 'Res94683', )(Ave35552)
Res27073 = keras.layers.Reshape((1, 4, 1), name = 'Res27073', )(Res94683)
Ave49687 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave49687', )(Res27073)
Res46811 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res46811', )(Ave49687)
Con85526 = keras.layers.Conv1D(4, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con85526', )(in0Con85526)
Res51797 = keras.layers.Reshape((2, 4, 1), name = 'Res51797', )(Con85526)
Dep71859 = keras.layers.DepthwiseConv2D((1, 2),strides=(2, 2), padding='valid', name = 'Dep71859', )(Res51797)
Res12474 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res12474', )(Dep71859)
Cro47312 = keras.layers.Cropping3D(cropping=((0, 0), (1, 0), (0, 0)), name = 'Cro47312', )(Res12474)
Zer18203 = keras.layers.ZeroPadding3D(padding=((0, 0), (3, 0), (0, 0)), name = 'Zer18203', )(Cro47312)
Add70004 = keras.layers.Add(name = 'Add70004', )([Res46811,Zer18203])
model = tf.keras.models.Model(inputs=[in0Ave35552,in0Con85526], outputs=Add70004)
w = model.get_layer('Con85526').get_weights() 
w[0] = np.array([[[0.8804, 0.8789, 0.3571, 0.6344]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con85526').set_weights(w) 
w = model.get_layer('Dep71859').get_weights() 
w[0] = np.array([[[[0.9495]], [[0.0565]]]])
w[1] = np.array([0])
model.get_layer('Dep71859').set_weights(w) 
in0Ave35552 = tf.constant([[[[1.7128, 1.1275], [1.6554, 1.3636]]]])
in0Con85526 = tf.constant([[[0.8491], [0.0753]]])
print (np.array2string(model.predict([in0Ave35552,in0Con85526],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add70004.png')

LAve35552 = average_pooling2D_layer([[[[1.7128, 1.1275], [1.6554, 1.3636]]]], 1, 2, 12, 1, true, Ave35552), 
LRes94683 = reshape_layer(Ave35552, [1, 4], Res94683), 
LRes27073 = reshape_layer(Res94683, [1, 4, 1], Res27073), 
LAve49687 = average_pooling2D_layer(Res27073, 1, 1, 1, 1, false, Ave49687), 
LRes46811 = reshape_layer(Ave49687, [1, 4, 1, 1], Res46811), 
LCon85526 = conv1D_layer([[[0.8491], [0.0753]]], 1,[[[0.8804, 0.8789, 0.3571, 0.6344]]],[0, 0, 0, 0], 1, true, 1, Con85526), 
LRes51797 = reshape_layer(Con85526, [2, 4, 1], Res51797), 
LDep71859 = depthwise_conv2D_layer(Res51797, 1, 2,[[[[0.9495]], [[0.0565]]]],[0], 2, 2, false, Dep71859), 
LRes12474 = reshape_layer(Dep71859, [1, 2, 1, 1], Res12474), 
LCro47312 = cropping3D_layer(Res12474, 0, 0, 1, 0, 0, 0, Cro47312), 
LZer18203 = zero_padding3D_layer(Cro47312, 0, 0, 3, 0, 0, 0, Zer18203), 
LAdd70004 = add_layer([Res46811,Zer18203], Add70004), 
exec_layers([LAve35552,LRes94683,LRes27073,LAve49687,LRes46811,LCon85526,LRes51797,LDep71859,LRes12474,LCro47312,LZer18203,LAdd70004],["Ave35552","Res94683","Res27073","Ave49687","Res46811","Con85526","Res51797","Dep71859","Res12474","Cro47312","Zer18203","Add70004"],Add70004,"Add70004")

Actual (Unparsed): [[[[[1.6841000]], [[1.2455500]], [[1.6554000]], [[1.6819361]]]]]

Expected (Unparsed): [[[[[1.6841]],[[1.24555]],[[1.6554]],[[1.6819361234549999]]]]]

Actual:   [[[[[1.6841]], [[1.2456]], [[1.6554]], [[1.682]]]]]

Expected: [[[[[1.6841]], [[1.2456]], [[1.6554]], [[1.682]]]]]