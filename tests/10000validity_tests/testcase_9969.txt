import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer97421 = tf.keras.layers.Input(shape=([3, 1, 4, 3]))
in0Max84656 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max84656 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con64640 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Add87456 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Add87456 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Con45318 = tf.keras.layers.Input(shape=([5, 3, 6, 1]))

Zer97421 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer97421', )(in0Zer97421)
Max84656 = keras.layers.Maximum(name = 'Max84656', )([in0Max84656,in1Max84656])
Res45627 = keras.layers.Reshape((1, 2, 2, 1), name = 'Res45627', )(Max84656)
Zer9345 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer9345', )(Res45627)
Con64640 = keras.layers.Concatenate(axis=4, name = 'Con64640', )([Zer9345,in0Con64640])
Add87456 = keras.layers.Add(name = 'Add87456', )([in0Add87456,in1Add87456])
Max68786 = keras.layers.Maximum(name = 'Max68786', )([Con64640,Add87456])
Zer11127 = keras.layers.ZeroPadding3D(padding=((3, 0), (1, 0), (4, 0)), name = 'Zer11127', )(Max68786)
Con45318 = keras.layers.Concatenate(axis=4, name = 'Con45318', )([Zer11127,in0Con45318])
Ave25469 = keras.layers.Average(name = 'Ave25469', )([Zer97421,Con45318])
model = tf.keras.models.Model(inputs=[in0Zer97421,in0Max84656,in1Max84656,in0Con64640,in0Add87456,in1Add87456,in0Con45318], outputs=Ave25469)
in0Zer97421 = tf.constant([[[[[1.2457, 1.5406, 1.6422], [1.8447, 1.0498, 1.8894], [1.2687, 1.0256, 1.8002], [1.1691, 1.0991, 1.1575]]], [[[1.6729, 1.2693, 1.7159], [1.7181, 1.285, 1.7144], [1.8381, 1.0851, 1.2464], [1.0697, 1.9434, 1.7603]]], [[[1.4548, 1.3538, 1.2207], [1.4647, 1.9354, 1.8734], [1.9157, 1.3033, 1.6225], [1.8441, 1.9948, 1.035]]]]])
in0Max84656 = tf.constant([[[[0.8557, 0.1361], [0.1937, 0.8511]]]])
in1Max84656 = tf.constant([[[[0.5204, 0.496], [0.9394, 0.9642]]]])
in0Con64640 = tf.constant([[[[[0.558], [0.1899]], [[0.3329], [0.7422]]], [[[0.3168], [0.0358]], [[0.1149], [0.7552]]]]])
in0Add87456 = tf.constant([[[[[0.7011, 0.6322], [0.3386, 0.7424]], [[0.4358, 0.6248], [0.4111, 0.0826]]], [[[0.6612, 0.2236], [0.0143, 0.2126]], [[0.7185, 0.7305], [0.4495, 0.1346]]]]])
in1Add87456 = tf.constant([[[[[0.8562, 0.328], [0.575, 0.4779]], [[0.0087, 0.9126], [0.355, 0.6179]]], [[[0.7568, 0.7178], [0.172, 0.533]], [[0.7818, 0.2723], [0.8962, 0.0249]]]]])
in0Con45318 = tf.constant([[[[[0.5974], [0.8016], [0.3005], [0.1533], [0.0027], [0.9317]], [[0.7221], [0.1886], [0.3041], [0.0815], [0.1331], [0.012]], [[0.8998], [0.3522], [0.994], [0.173], [0.5128], [0.6673]]], [[[0.0527], [0.1737], [0.6978], [0.2513], [0.0122], [0.954]], [[0.4785], [0.7376], [0.0604], [0.6505], [0.2893], [0.0828]], [[0.1045], [0.2435], [0.2978], [0.2229], [0.7214], [0.3557]]], [[[0.876], [0.1953], [0.2898], [0.6466], [0.4561], [0.2743]], [[0.5081], [0.9597], [0.2595], [0.5179], [0.5145], [0.621]], [[0.4175], [0.0095], [0.1265], [0.0634], [0.8184], [0.9922]]], [[[0.2958], [0.2558], [0.6073], [0.0389], [0.7337], [0.2544]], [[0.6449], [0.3814], [0.805], [0.5594], [0.3835], [0.5271]], [[0.2098], [0.8628], [0.5631], [0.3351], [0.6789], [0.2]]], [[[0.8449], [0.7929], [0.8917], [0.4839], [0.0024], [0.8377]], [[0.0924], [0.8891], [0.5749], [0.7014], [0.4306], [0.5828]], [[0.947], [0.4206], [0.8774], [0.8493], [0.6664], [0.3533]]]]])
print (np.array2string(model.predict([in0Zer97421,in0Max84656,in1Max84656,in0Con64640,in0Add87456,in1Add87456,in0Con45318],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave25469.png')

LZer97421 = zero_padding3D_layer([[[[[1.2457, 1.5406, 1.6422], [1.8447, 1.0498, 1.8894], [1.2687, 1.0256, 1.8002], [1.1691, 1.0991, 1.1575]]], [[[1.6729, 1.2693, 1.7159], [1.7181, 1.285, 1.7144], [1.8381, 1.0851, 1.2464], [1.0697, 1.9434, 1.7603]]], [[[1.4548, 1.3538, 1.2207], [1.4647, 1.9354, 1.8734], [1.9157, 1.3033, 1.6225], [1.8441, 1.9948, 1.035]]]]], 1, 1, 1, 1, 1, 1, Zer97421), 
LMax84656 = maximum_layer([[[[[0.8557, 0.1361], [0.1937, 0.8511]]]], [[[[0.5204, 0.496], [0.9394, 0.9642]]]]], Max84656), 
LRes45627 = reshape_layer(Max84656, [1, 2, 2, 1], Res45627), 
LZer9345 = zero_padding3D_layer(Res45627, 1, 0, 0, 0, 0, 0, Zer9345), 
LCon64640 = concatenate_layer([Zer9345,[[[[[0.558], [0.1899]], [[0.3329], [0.7422]]], [[[0.3168], [0.0358]], [[0.1149], [0.7552]]]]]], 4, Con64640), 
LAdd87456 = add_layer([[[[[[0.7011, 0.6322], [0.3386, 0.7424]], [[0.4358, 0.6248], [0.4111, 0.0826]]], [[[0.6612, 0.2236], [0.0143, 0.2126]], [[0.7185, 0.7305], [0.4495, 0.1346]]]]], [[[[[0.8562, 0.328], [0.575, 0.4779]], [[0.0087, 0.9126], [0.355, 0.6179]]], [[[0.7568, 0.7178], [0.172, 0.533]], [[0.7818, 0.2723], [0.8962, 0.0249]]]]]], Add87456), 
LMax68786 = maximum_layer([Con64640,Add87456], Max68786), 
LZer11127 = zero_padding3D_layer(Max68786, 3, 0, 1, 0, 4, 0, Zer11127), 
LCon45318 = concatenate_layer([Zer11127,[[[[[0.5974], [0.8016], [0.3005], [0.1533], [0.0027], [0.9317]], [[0.7221], [0.1886], [0.3041], [0.0815], [0.1331], [0.012]], [[0.8998], [0.3522], [0.994], [0.173], [0.5128], [0.6673]]], [[[0.0527], [0.1737], [0.6978], [0.2513], [0.0122], [0.954]], [[0.4785], [0.7376], [0.0604], [0.6505], [0.2893], [0.0828]], [[0.1045], [0.2435], [0.2978], [0.2229], [0.7214], [0.3557]]], [[[0.876], [0.1953], [0.2898], [0.6466], [0.4561], [0.2743]], [[0.5081], [0.9597], [0.2595], [0.5179], [0.5145], [0.621]], [[0.4175], [0.0095], [0.1265], [0.0634], [0.8184], [0.9922]]], [[[0.2958], [0.2558], [0.6073], [0.0389], [0.7337], [0.2544]], [[0.6449], [0.3814], [0.805], [0.5594], [0.3835], [0.5271]], [[0.2098], [0.8628], [0.5631], [0.3351], [0.6789], [0.2]]], [[[0.8449], [0.7929], [0.8917], [0.4839], [0.0024], [0.8377]], [[0.0924], [0.8891], [0.5749], [0.7014], [0.4306], [0.5828]], [[0.947], [0.4206], [0.8774], [0.8493], [0.6664], [0.3533]]]]]], 4, Con45318), 
LAve25469 = average_layer([Zer97421,Con45318], Ave25469), 
exec_layers([LZer97421,LMax84656,LRes45627,LZer9345,LCon64640,LAdd87456,LMax68786,LZer11127,LCon45318,LAve25469],["Zer97421","Max84656","Res45627","Zer9345","Con64640","Add87456","Max68786","Zer11127","Con45318","Ave25469"],Ave25469,"Ave25469")

Actual (Unparsed): [[[[[0.0000000, 0.0000000, 0.2987000], [0.0000000, 0.0000000, 0.4008000], [0.0000000, 0.0000000, 0.1502500], [0.0000000, 0.0000000, 0.0766500], [0.0000000, 0.0000000, 0.0013500], [0.0000000, 0.0000000, 0.4658500]], [[0.0000000, 0.0000000, 0.3610500], [0.0000000, 0.0000000, 0.0943000], [0.0000000, 0.0000000, 0.1520500], [0.0000000, 0.0000000, 0.0407500], [0.0000000, 0.0000000, 0.0665500], [0.0000000, 0.0000000, 0.0060000]], [[0.0000000, 0.0000000, 0.4499000], [0.0000000, 0.0000000, 0.1761000], [0.0000000, 0.0000000, 0.4970000], [0.0000000, 0.0000000, 0.0865000], [0.0000000, 0.0000000, 0.2564000], [0.0000000, 0.0000000, 0.3336500]]], [[[0.0000000, 0.0000000, 0.0263500], [0.0000000, 0.0000000, 0.0868500], [0.0000000, 0.0000000, 0.3489000], [0.0000000, 0.0000000, 0.1256500], [0.0000000, 0.0000000, 0.0061000], [0.0000000, 0.0000000, 0.4770000]], [[0.0000000, 0.0000000, 0.2392500], [0.6228500, 0.7703000, 1.1899000], [0.9223500, 0.5249000, 0.9749000], [0.6343500, 0.5128000, 1.2253500], [0.5845500, 0.5495500, 0.7234000], [0.0000000, 0.0000000, 0.0414000]], [[0.0000000, 0.0000000, 0.0522500], [0.0000000, 0.0000000, 0.1217500], [0.0000000, 0.0000000, 0.1489000], [0.0000000, 0.0000000, 0.1114500], [0.0000000, 0.0000000, 0.3607000], [0.0000000, 0.0000000, 0.1778500]]], [[[0.0000000, 0.0000000, 0.4380000], [0.0000000, 0.0000000, 0.0976500], [0.0000000, 0.0000000, 0.1449000], [0.0000000, 0.0000000, 0.3233000], [0.0000000, 0.0000000, 0.2280500], [0.0000000, 0.0000000, 0.1371500]], [[0.0000000, 0.0000000, 0.2540500], [0.8364500, 0.6346500, 1.3378000], [0.8590500, 0.6425000, 0.9869500], [0.9190500, 0.5425500, 0.8821500], [0.5348500, 0.9717000, 1.1374000], [0.0000000, 0.0000000, 0.3105000]], [[0.0000000, 0.0000000, 0.2087500], [0.0000000, 0.0000000, 0.0047500], [0.0000000, 0.0000000, 0.0632500], [0.0000000, 0.0000000, 0.0317000], [0.0000000, 0.0000000, 0.4092000], [0.0000000, 0.0000000, 0.4961000]]], [[[0.0000000, 0.0000000, 0.1479000], [0.0000000, 0.0000000, 0.1279000], [0.0000000, 0.0000000, 0.3036500], [0.0000000, 0.0000000, 0.0194500], [0.0000000, 0.0000000, 0.3668500], [0.0000000, 0.0000000, 0.1272000]], [[0.0000000, 0.0000000, 0.3224500], [0.7274000, 0.6769000, 0.8010500], [0.7323500, 0.9677000, 1.3392000], [0.9578500, 0.6516500, 1.0909500], [1.7007000, 1.4775000, 0.7092500], [0.4568000, 0.6101500, 0.2635500]], [[0.0000000, 0.0000000, 0.1049000], [0.0000000, 0.0000000, 0.4314000], [0.0000000, 0.0000000, 0.2815500], [0.0000000, 0.0000000, 0.1675500], [0.2222500, 0.7687000, 0.3394500], [0.3830500, 0.3711000, 0.1000000]]], [[[0.0000000, 0.0000000, 0.4224500], [0.0000000, 0.0000000, 0.3964500], [0.0000000, 0.0000000, 0.4458500], [0.0000000, 0.0000000, 0.2419500], [0.0000000, 0.0000000, 0.0012000], [0.0000000, 0.0000000, 0.4188500]], [[0.0000000, 0.0000000, 0.0462000], [0.0000000, 0.0000000, 0.4445500], [0.0000000, 0.0000000, 0.2874500], [0.0000000, 0.0000000, 0.3507000], [0.7090000, 0.4707000, 0.2153000], [0.2480000, 0.3728000, 0.2914000]], [[0.0000000, 0.0000000, 0.4735000], [0.0000000, 0.0000000, 0.2103000], [0.0000000, 0.0000000, 0.4387000], [0.0000000, 0.0000000, 0.4246500], [0.7501500, 0.5014000, 0.3332000], [0.6728500, 0.3776000, 0.1766500]]]]]

Expected (Unparsed): [[[[[0,0,0.2987],[0,0,0.4008],[0,0,0.15025],[0,0,0.07665],[0,0,0.00135],[0,0,0.46585]],[[0,0,0.36105],[0,0,0.0943],[0,0,0.15205],[0,0,0.04075],[0,0,0.06655],[0,0,0.006]],[[0,0,0.4499],[0,0,0.1761],[0,0,0.497],[0,0,0.0865],[0,0,0.2564],[0,0,0.33365]]],[[[0,0,0.02635],[0,0,0.08685],[0,0,0.3489],[0,0,0.12565],[0,0,0.0061],[0,0,0.477]],[[0,0,0.23925],[0.62285,0.7703,1.1899000000000002],[0.92235,0.5249,0.9749],[0.63435,0.5128,1.22535],[0.58455,0.54955,0.7234],[0,0,0.0414]],[[0,0,0.05225],[0,0,0.12175],[0,0,0.1489],[0,0,0.11145],[0,0,0.3607],[0,0,0.17785]]],[[[0,0,0.438],[0,0,0.09765],[0,0,0.1449],[0,0,0.3233],[0,0,0.22805],[0,0,0.13715]],[[0,0,0.25405],[0.83645,0.63465,1.3378],[0.85905,0.6425,0.98695],[0.91905,0.54255,0.88215],[0.53485,0.9717,1.1374],[0,0,0.3105]],[[0,0,0.20875],[0,0,0.00475],[0,0,0.06325],[0,0,0.0317],[0,0,0.4092],[0,0,0.4961]]],[[[0,0,0.1479],[0,0,0.1279],[0,0,0.30365],[0,0,0.01945],[0,0,0.36685],[0,0,0.1272]],[[0,0,0.32245],[0.7274,0.6769,0.8010499999999999],[0.73235,0.9677,1.3392],[0.95785,0.65165,1.09095],[1.7006999999999999,1.4775,0.7092499999999999],[0.4568,0.61015,0.26355]],[[0,0,0.1049],[0,0,0.4314],[0,0,0.28155],[0,0,0.16755],[0.22225,0.7686999999999999,0.33945],[0.38305,0.3711,0.1]]],[[[0,0,0.42245],[0,0,0.39645],[0,0,0.44585],[0,0,0.24195],[0,0,0.0012],[0,0,0.41885]],[[0,0,0.0462],[0,0,0.44455],[0,0,0.28745],[0,0,0.3507],[0.7090000000000001,0.4707,0.2153],[0.248,0.3728,0.2914]],[[0,0,0.4735],[0,0,0.2103],[0,0,0.4387],[0,0,0.42465],[0.7501500000000001,0.5014000000000001,0.3332],[0.67285,0.3776,0.17665]]]]]

Actual:   [[[[[0, 0, 0.2987], [0, 0, 0.4008], [0, 0, 0.1503], [0, 0, 0.0767], [0, 0, 0.0014], [0, 0, 0.4659]], [[0, 0, 0.3611], [0, 0, 0.0943], [0, 0, 0.1521], [0, 0, 0.0408], [0, 0, 0.0666], [0, 0, 0.006]], [[0, 0, 0.4499], [0, 0, 0.1761], [0, 0, 0.497], [0, 0, 0.0865], [0, 0, 0.2564], [0, 0, 0.3337]]], [[[0, 0, 0.0264], [0, 0, 0.0869], [0, 0, 0.3489], [0, 0, 0.1257], [0, 0, 0.0061], [0, 0, 0.477]], [[0, 0, 0.2393], [0.6229, 0.7703, 1.1899], [0.9224, 0.5249, 0.9749], [0.6344, 0.5128, 1.2254], [0.5846, 0.5496, 0.7234], [0, 0, 0.0414]], [[0, 0, 0.0523], [0, 0, 0.1218], [0, 0, 0.1489], [0, 0, 0.1115], [0, 0, 0.3607], [0, 0, 0.1779]]], [[[0, 0, 0.438], [0, 0, 0.0977], [0, 0, 0.1449], [0, 0, 0.3233], [0, 0, 0.2281], [0, 0, 0.1372]], [[0, 0, 0.2541], [0.8365, 0.6347, 1.3378], [0.8591, 0.6425, 0.987], [0.9191, 0.5426, 0.8822], [0.5349, 0.9717, 1.1374], [0, 0, 0.3105]], [[0, 0, 0.2088], [0, 0, 0.0048], [0, 0, 0.0633], [0, 0, 0.0317], [0, 0, 0.4092], [0, 0, 0.4961]]], [[[0, 0, 0.1479], [0, 0, 0.1279], [0, 0, 0.3037], [0, 0, 0.0195], [0, 0, 0.3669], [0, 0, 0.1272]], [[0, 0, 0.3225], [0.7274, 0.6769, 0.8011], [0.7324, 0.9677, 1.3392], [0.9579, 0.6517, 1.091], [1.7007, 1.4775, 0.7093], [0.4568, 0.6102, 0.2636]], [[0, 0, 0.1049], [0, 0, 0.4314], [0, 0, 0.2816], [0, 0, 0.1676], [0.2223, 0.7687, 0.3395], [0.3831, 0.3711, 0.1]]], [[[0, 0, 0.4225], [0, 0, 0.3965], [0, 0, 0.4459], [0, 0, 0.242], [0, 0, 0.0012], [0, 0, 0.4189]], [[0, 0, 0.0462], [0, 0, 0.4446], [0, 0, 0.2875], [0, 0, 0.3507], [0.709, 0.4707, 0.2153], [0.248, 0.3728, 0.2914]], [[0, 0, 0.4735], [0, 0, 0.2103], [0, 0, 0.4387], [0, 0, 0.4247], [0.7502, 0.5014, 0.3332], [0.6729, 0.3776, 0.1767]]]]]

Expected: [[[[[0, 0, 0.2987], [0, 0, 0.4008], [0, 0, 0.1503], [0, 0, 0.0767], [0, 0, 0.0014], [0, 0, 0.4659]], [[0, 0, 0.3611], [0, 0, 0.0943], [0, 0, 0.1521], [0, 0, 0.0408], [0, 0, 0.0666], [0, 0, 0.006]], [[0, 0, 0.4499], [0, 0, 0.1761], [0, 0, 0.497], [0, 0, 0.0865], [0, 0, 0.2564], [0, 0, 0.3337]]], [[[0, 0, 0.0264], [0, 0, 0.0869], [0, 0, 0.3489], [0, 0, 0.1257], [0, 0, 0.0061], [0, 0, 0.477]], [[0, 0, 0.2393], [0.6229, 0.7703, 1.19], [0.9224, 0.5249, 0.9749], [0.6344, 0.5128, 1.2254], [0.5846, 0.5496, 0.7234], [0, 0, 0.0414]], [[0, 0, 0.0523], [0, 0, 0.1218], [0, 0, 0.1489], [0, 0, 0.1115], [0, 0, 0.3607], [0, 0, 0.1779]]], [[[0, 0, 0.438], [0, 0, 0.0977], [0, 0, 0.1449], [0, 0, 0.3233], [0, 0, 0.2281], [0, 0, 0.1372]], [[0, 0, 0.2541], [0.8365, 0.6347, 1.3378], [0.8591, 0.6425, 0.987], [0.9191, 0.5426, 0.8822], [0.5349, 0.9717, 1.1374], [0, 0, 0.3105]], [[0, 0, 0.2088], [0, 0, 0.0048], [0, 0, 0.0633], [0, 0, 0.0317], [0, 0, 0.4092], [0, 0, 0.4961]]], [[[0, 0, 0.1479], [0, 0, 0.1279], [0, 0, 0.3037], [0, 0, 0.0195], [0, 0, 0.3669], [0, 0, 0.1272]], [[0, 0, 0.3225], [0.7274, 0.6769, 0.8011], [0.7324, 0.9677, 1.3392], [0.9579, 0.6517, 1.091], [1.7007, 1.4775, 0.7093], [0.4568, 0.6102, 0.2636]], [[0, 0, 0.1049], [0, 0, 0.4314], [0, 0, 0.2816], [0, 0, 0.1676], [0.2223, 0.7687, 0.3395], [0.3831, 0.3711, 0.1]]], [[[0, 0, 0.4225], [0, 0, 0.3965], [0, 0, 0.4459], [0, 0, 0.242], [0, 0, 0.0012], [0, 0, 0.4189]], [[0, 0, 0.0462], [0, 0, 0.4446], [0, 0, 0.2875], [0, 0, 0.3507], [0.7091, 0.4707, 0.2153], [0.248, 0.3728, 0.2914]], [[0, 0, 0.4735], [0, 0, 0.2103], [0, 0, 0.4387], [0, 0, 0.4247], [0.7502, 0.5015, 0.3332], [0.6729, 0.3776, 0.1767]]]]]