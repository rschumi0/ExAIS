import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave44653 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave44653 = tf.keras.layers.Input(shape=([1, 2]))
in0Con58271 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot46791 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot46791 = tf.keras.layers.Input(shape=([3, 2]))
in0ReL77648 = tf.keras.layers.Input(shape=([1, 1]))
in0Con50692 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave10217 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave10217 = tf.keras.layers.Input(shape=([1, 2]))
in0Con17615 = tf.keras.layers.Input(shape=([3, 1]))
in0Con18672 = tf.keras.layers.Input(shape=([4, 1]))
in0Max91352 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Max91352 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave97381 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Ave97381 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Glo88358 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con4975 = tf.keras.layers.Input(shape=([2]))
in0Con26556 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul74069 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul74069 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave44653 = keras.layers.Average(name = 'Ave44653', )([in0Ave44653,in1Ave44653])
Zer14121 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer14121', )(Ave44653)
Con58271 = keras.layers.Concatenate(axis=2, name = 'Con58271', )([Zer14121,in0Con58271])
Dot46791 = keras.layers.Dot(axes=(2, 2), name = 'Dot46791', )([in0Dot46791,in1Dot46791])
ReL77648 = keras.layers.ReLU(max_value=6.260629476662322, negative_slope=7.233808405088927, threshold=7.1394958855208355, name = 'ReL77648', input_shape=(1, 1))(in0ReL77648)
Con50692 = keras.layers.Concatenate(axis=2, name = 'Con50692', )([ReL77648,in0Con50692])
Ave10217 = keras.layers.Average(name = 'Ave10217', )([in0Ave10217,in1Ave10217])
Sub22816 = keras.layers.Subtract(name = 'Sub22816', )([Con50692,Ave10217])
Zer86219 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer86219', )(Sub22816)
Con17615 = keras.layers.Concatenate(axis=2, name = 'Con17615', )([Zer86219,in0Con17615])
Mul20020 = keras.layers.Multiply(name = 'Mul20020', )([Dot46791,Con17615])
Add61143 = keras.layers.Add(name = 'Add61143', )([Con58271,Mul20020])
Zer28254 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer28254', )(Add61143)
Con18672 = keras.layers.Concatenate(axis=2, name = 'Con18672', )([Zer28254,in0Con18672])
Max91352 = keras.layers.Maximum(name = 'Max91352', )([in0Max91352,in1Max91352])
Res86660 = keras.layers.Reshape((2, 2), name = 'Res86660', )(Max91352)
Ave97381 = keras.layers.Average(name = 'Ave97381', )([in0Ave97381,in1Ave97381])
Res89497 = keras.layers.Reshape((2, 1, 2), name = 'Res89497', )(Ave97381)
Res87378 = keras.layers.Reshape((2, 2), name = 'Res87378', )(Res89497)
Fla6875 = keras.layers.Flatten(name = 'Fla6875', )(Res87378)
Glo88358 = keras.layers.GlobalMaxPool2D(name = 'Glo88358', )(in0Glo88358)
Con4975 = keras.layers.Concatenate(axis=1, name = 'Con4975', )([Glo88358,in0Con4975])
Max81315 = keras.layers.Maximum(name = 'Max81315', )([Fla6875,Con4975])
Res51482 = keras.layers.Reshape((2, 2), name = 'Res51482', )(Max81315)
Max20415 = keras.layers.Maximum(name = 'Max20415', )([Res86660,Res51482])
Con26556 = keras.layers.Concatenate(axis=2, name = 'Con26556', )([Max20415,in0Con26556])
Mul74069 = keras.layers.Multiply(name = 'Mul74069', )([in0Mul74069,in1Mul74069])
Res9453 = keras.layers.Reshape((2, 4), name = 'Res9453', )(Mul74069)
Dot67432 = keras.layers.Dot(axes=(1, 1), name = 'Dot67432', )([Con26556,Res9453])
Min24951 = keras.layers.Minimum(name = 'Min24951', )([Con18672,Dot67432])
model = tf.keras.models.Model(inputs=[in0Ave44653,in1Ave44653,in0Con58271,in0Dot46791,in1Dot46791,in0ReL77648,in0Con50692,in0Ave10217,in1Ave10217,in0Con17615,in0Con18672,in0Max91352,in1Max91352,in0Ave97381,in1Ave97381,in0Glo88358,in0Con4975,in0Con26556,in0Mul74069,in1Mul74069], outputs=Min24951)
in0Ave44653 = tf.constant([[[0.9684, 0.7468]]])
in1Ave44653 = tf.constant([[[0.9039, 0.8326]]])
in0Con58271 = tf.constant([[[0.7805], [0.0055], [0.1026]]])
in0Dot46791 = tf.constant([[[0.1725, 0.3798], [0.913, 0.2623], [0.0162, 0.6399]]])
in1Dot46791 = tf.constant([[[0.4346, 0.4293], [0.6772, 0.4691], [0.5569, 0.018]]])
in0ReL77648 = tf.constant([[[0.9489]]])
in0Con50692 = tf.constant([[[0.3765]]])
in0Ave10217 = tf.constant([[[0.2057, 0.6334]]])
in1Ave10217 = tf.constant([[[0.6808, 0.1962]]])
in0Con17615 = tf.constant([[[0.7958], [0.747], [0.9447]]])
in0Con18672 = tf.constant([[[0.3846], [0.377], [0.5692], [0.4137]]])
in0Max91352 = tf.constant([[[[0.0529], [0.4863]], [[0.116], [0.6372]]]])
in1Max91352 = tf.constant([[[[0.9961], [0.0921]], [[0.7569], [0.2142]]]])
in0Ave97381 = tf.constant([[[[[0.0055], [0.7399]]], [[[0.297], [0.7419]]]]])
in1Ave97381 = tf.constant([[[[[0.6745], [0.6539]]], [[[0.2877], [0.8554]]]]])
in0Glo88358 = tf.constant([[[[1.407, 1.9831]]]])
in0Con4975 = tf.constant([[0.0841, 0.3626]])
in0Con26556 = tf.constant([[[0.1734, 0.136], [0.0535, 0.4002]]])
in0Mul74069 = tf.constant([[[[0.2147, 0.5212], [0.8916, 0.8805]], [[0.7838, 0.516], [0.8752, 0.1161]]]])
in1Mul74069 = tf.constant([[[[0.6299, 0.3341], [0.1884, 0.298]], [[0.2978, 0.4393], [0.5593, 0.3127]]]])
print (np.array2string(model.predict([in0Ave44653,in1Ave44653,in0Con58271,in0Dot46791,in1Dot46791,in0ReL77648,in0Con50692,in0Ave10217,in1Ave10217,in0Con17615,in0Con18672,in0Max91352,in1Max91352,in0Ave97381,in1Ave97381,in0Glo88358,in0Con4975,in0Con26556,in0Mul74069,in1Mul74069],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min24951.png')

LAve44653 = average_layer([[[[0.9684, 0.7468]]], [[[0.9039, 0.8326]]]], Ave44653), 
LZer14121 = zero_padding1D_layer(Ave44653, 2, 0, Zer14121), 
LCon58271 = concatenate_layer([Zer14121,[[[0.7805], [0.0055], [0.1026]]]], 2, Con58271), 
LDot46791 = dot_layer([[[0.1725, 0.3798], [0.913, 0.2623], [0.0162, 0.6399]]], [[[0.4346, 0.4293], [0.6772, 0.4691], [0.5569, 0.018]]], 2, 2, Dot46791), 
LReL77648 = relu_layer([[[0.9489]]], 6.260629476662322, 7.233808405088927, 7.1394958855208355, ReL77648), 
LCon50692 = concatenate_layer([ReL77648,[[[0.3765]]]], 2, Con50692), 
LAve10217 = average_layer([[[[0.2057, 0.6334]]], [[[0.6808, 0.1962]]]], Ave10217), 
LSub22816 = subtract_layer(Con50692,Ave10217, Sub22816), 
LZer86219 = zero_padding1D_layer(Sub22816, 2, 0, Zer86219), 
LCon17615 = concatenate_layer([Zer86219,[[[0.7958], [0.747], [0.9447]]]], 2, Con17615), 
LMul20020 = multiply_layer([Dot46791,Con17615], Mul20020), 
LAdd61143 = add_layer([Con58271,Mul20020], Add61143), 
LZer28254 = zero_padding1D_layer(Add61143, 1, 0, Zer28254), 
LCon18672 = concatenate_layer([Zer28254,[[[0.3846], [0.377], [0.5692], [0.4137]]]], 2, Con18672), 
LMax91352 = maximum_layer([[[[[0.0529], [0.4863]], [[0.116], [0.6372]]]], [[[[0.9961], [0.0921]], [[0.7569], [0.2142]]]]], Max91352), 
LRes86660 = reshape_layer(Max91352, [2, 2], Res86660), 
LAve97381 = average_layer([[[[[[0.0055], [0.7399]]], [[[0.297], [0.7419]]]]], [[[[[0.6745], [0.6539]]], [[[0.2877], [0.8554]]]]]], Ave97381), 
LRes89497 = reshape_layer(Ave97381, [2, 1, 2], Res89497), 
LRes87378 = reshape_layer(Res89497, [2, 2], Res87378), 
LFla6875 = flatten_layer(Res87378, Fla6875), 
LGlo88358 = global_max_pool2D_layer([[[[1.407, 1.9831]]]], Glo88358), 
LCon4975 = concatenate_layer([Glo88358,[[0.0841, 0.3626]]], 1, Con4975), 
LMax81315 = maximum_layer([Fla6875,Con4975], Max81315), 
LRes51482 = reshape_layer(Max81315, [2, 2], Res51482), 
LMax20415 = maximum_layer([Res86660,Res51482], Max20415), 
LCon26556 = concatenate_layer([Max20415,[[[0.1734, 0.136], [0.0535, 0.4002]]]], 2, Con26556), 
LMul74069 = multiply_layer([[[[[0.2147, 0.5212], [0.8916, 0.8805]], [[0.7838, 0.516], [0.8752, 0.1161]]]], [[[[0.6299, 0.3341], [0.1884, 0.298]], [[0.2978, 0.4393], [0.5593, 0.3127]]]]], Mul74069), 
LRes9453 = reshape_layer(Mul74069, [2, 4], Res9453), 
LDot67432 = dot_layer(Con26556,Res9453, 1, 1, Dot67432), 
LMin24951 = minimum_layer([Con18672,Dot67432], Min24951), 
exec_layers([LAve44653,LZer14121,LCon58271,LDot46791,LReL77648,LCon50692,LAve10217,LSub22816,LZer86219,LCon17615,LMul20020,LAdd61143,LZer28254,LCon18672,LMax91352,LRes86660,LAve97381,LRes89497,LRes87378,LFla6875,LGlo88358,LCon4975,LMax81315,LRes51482,LMax20415,LCon26556,LMul74069,LRes9453,LDot67432,LMin24951],["Ave44653","Zer14121","Con58271","Dot46791","ReL77648","Con50692","Ave10217","Sub22816","Zer86219","Con17615","Mul20020","Add61143","Zer28254","Con18672","Max91352","Res86660","Ave97381","Res89497","Res87378","Fla6875","Glo88358","Con4975","Max81315","Res51482","Max20415","Con26556","Mul74069","Res9453","Dot67432","Min24951"],Min24951,"Min24951")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.3846000], [0.0000000, 0.0000000, 0.7240547, 0.3770000], [0.0000000, 0.0000000, 0.0553155, 0.0474405], [-11.8059295, 0.1143989, 0.1220041, 0.0502140]]]

Expected (Unparsed): [[[0,0,0,0.3846],[0.0,0.0,0.7240547251280001,0.377],[0.0,0.0,0.055315503855999995,0.047440541744999995],[-11.80592859205199,0.11439893288000001,0.122004119106,0.050213952894000005]]]

Actual:   [[[0, 0, 0, 0.3846], [0, 0, 0.7241, 0.377], [0, 0, 0.0554, 0.0475], [-11.8059, 0.1144, 0.1221, 0.0503]]]

Expected: [[[0, 0, 0, 0.3846], [0, 0, 0.7241, 0.377], [0, 0, 0.0554, 0.0475], [-11.8059, 0.1144, 0.1221, 0.0503]]]