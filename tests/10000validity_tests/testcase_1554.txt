import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo84194 = tf.keras.layers.Input(shape=([1, 2]))

Glo84194 = keras.layers.GlobalMaxPool1D(name = 'Glo84194', )(in0Glo84194)
Res67713 = keras.layers.Reshape((2, 1), name = 'Res67713', )(Glo84194)
Ave46112 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave46112', )(Res67713)
Per3124 = keras.layers.Permute((1,2), name = 'Per3124',)(Ave46112)
Res23551 = keras.layers.Reshape((1, 1, 1), name = 'Res23551', )(Per3124)
Dep29061 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep29061', )(Res23551)
model = tf.keras.models.Model(inputs=[in0Glo84194], outputs=Dep29061)
w = model.get_layer('Dep29061').get_weights() 
w[0] = np.array([[[[0.5247]]]])
w[1] = np.array([0])
model.get_layer('Dep29061').set_weights(w) 
in0Glo84194 = tf.constant([[[1.3987, 1.625]]])
print (np.array2string(model.predict([in0Glo84194],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep29061.png')

LGlo84194 = global_max_pool1D_layer([[[1.3987, 1.625]]], Glo84194), 
LRes67713 = reshape_layer(Glo84194, [2, 1], Res67713), 
LAve46112 = average_pooling1D_layer(Res67713, 2, Ave46112), 
LPer3124 = permute_layer(Ave46112, 1,2, Per3124), 
LRes23551 = reshape_layer(Per3124, [1, 1, 1], Res23551), 
LDep29061 = depthwise_conv2D_layer(Res23551, 1, 1,[[[[0.5247]]]],[0], 1, 1, false, Dep29061), 
exec_layers([LGlo84194,LRes67713,LAve46112,LPer3124,LRes23551,LDep29061],["Glo84194","Res67713","Ave46112","Per3124","Res23551","Dep29061"],Dep29061,"Dep29061")

Actual (Unparsed): [[[[0.7932677]]]]

Expected (Unparsed): [[[[0.793267695]]]]

Actual:   [[[[0.7933]]]]

Expected: [[[[0.7933]]]]