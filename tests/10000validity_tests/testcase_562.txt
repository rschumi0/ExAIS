import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave23384 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Ave23384 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Sub81129 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub81129 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Lay54079 = tf.keras.layers.Input(shape=([3, 3]))
in0Con85918 = tf.keras.layers.Input(shape=([3, 3]))
in0Con58626 = tf.keras.layers.Input(shape=([4, 6, 2]))
in0Sub32022 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub32022 = tf.keras.layers.Input(shape=([2, 3, 3]))

Ave23384 = keras.layers.Average(name = 'Ave23384', )([in0Ave23384,in1Ave23384])
Res48509 = keras.layers.Reshape((2, 1, 4), name = 'Res48509', )(Ave23384)
Res13389 = keras.layers.Reshape((2, 4), name = 'Res13389', )(Res48509)
Zer90686 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer90686', )(Res13389)
Sub81129 = keras.layers.Subtract(name = 'Sub81129', )([in0Sub81129,in1Sub81129])
Res37433 = keras.layers.Reshape((2, 6), name = 'Res37433', )(Sub81129)
Zer11655 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer11655', )(Res37433)
Lay54079 = keras.layers.LayerNormalization(axis=2, epsilon=1.2882087505832145, name = 'Lay54079', )(in0Lay54079)
Con85918 = keras.layers.Concatenate(axis=2, name = 'Con85918', )([Lay54079,in0Con85918])
Ave50328 = keras.layers.Average(name = 'Ave50328', )([Zer11655,Con85918])
Dot11474 = keras.layers.Dot(axes=(1, 1), name = 'Dot11474', )([Zer90686,Ave50328])
Res31635 = keras.layers.Reshape((4, 6, 1), name = 'Res31635', )(Dot11474)
Con58626 = keras.layers.Concatenate(axis=3, name = 'Con58626', )([Res31635,in0Con58626])
Sub32022 = keras.layers.Subtract(name = 'Sub32022', )([in0Sub32022,in1Sub32022])
Zer49956 = keras.layers.ZeroPadding2D(padding=((2, 0), (3, 0)), name = 'Zer49956', )(Sub32022)
Add83083 = keras.layers.Add(name = 'Add83083', )([Con58626,Zer49956])
model = tf.keras.models.Model(inputs=[in0Ave23384,in1Ave23384,in0Sub81129,in1Sub81129,in0Lay54079,in0Con85918,in0Con58626,in0Sub32022,in1Sub32022], outputs=Add83083)
in0Ave23384 = tf.constant([[[[[0.8037, 0.4648], [0.0701, 0.7006]]], [[[0.9213, 0.9461], [0.6206, 0.7794]]]]])
in1Ave23384 = tf.constant([[[[[0.838, 0.1826], [0.9909, 0.8161]]], [[[0.3306, 0.6619], [0.6435, 0.174]]]]])
in0Sub81129 = tf.constant([[[[0.2606, 0.8892], [0.0073, 0.7263], [0.1456, 0.2904]], [[0.1295, 0.8596], [0.7609, 0.251], [0.7559, 0.9342]]]])
in1Sub81129 = tf.constant([[[[0.7198, 0.9926], [0.541, 0.3665], [0.4389, 0.1675]], [[0.5629, 0.3148], [0.6259, 0.7673], [0.5687, 0.8074]]]])
in0Lay54079 = tf.constant([[[1.4463, 1.1809, 1.4071], [1.0309, 1.8241, 1.013], [1.9188, 1.4167, 1.9078]]])
in0Con85918 = tf.constant([[[0.1287, 0.3093, 0.9898], [0.3796, 0.2629, 0.529], [0.8011, 0.3313, 0.4559]]])
in0Con58626 = tf.constant([[[[0.0938, 0.1675], [0.0966, 0.8035], [0.8781, 0.191], [0.4918, 0.5319], [0.2025, 0.5943], [0.1411, 0.0806]], [[0.4295, 0.2838], [0.7504, 0.9228], [0.263, 0.5843], [0.7632, 0.5321], [0.3749, 0.6006], [0.981, 0.2518]], [[0.2809, 0.6156], [0.3539, 0.8976], [0.0336, 0.0529], [0.2287, 0.1908], [0.5862, 0.0794], [0.9498, 0.1111]], [[0.8708, 0.6204], [0.7339, 0.9171], [0.7365, 0.4185], [0.1631, 0.8868], [0.8956, 0.7801], [0.4755, 0.8012]]]])
in0Sub32022 = tf.constant([[[[0.5816, 0.1508, 0.1041], [0.5967, 0.8475, 0.1355], [0.3424, 0.1603, 0.8972]], [[0.634, 0.3966, 0.4116], [0.0028, 0.1798, 0.5679], [0.5926, 0.7089, 0.4809]]]])
in1Sub32022 = tf.constant([[[[0.0054, 0.1229, 0.3615], [0.7377, 0.093, 0.6221], [0.9867, 0.7163, 0.3252]], [[0.1701, 0.4497, 0.4817], [0.7539, 0.5941, 0.3827], [0.5388, 0.2819, 0.6854]]]])
print (np.array2string(model.predict([in0Ave23384,in1Ave23384,in0Sub81129,in1Sub81129,in0Lay54079,in0Con85918,in0Con58626,in0Sub32022,in1Sub32022],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add83083.png')

LAve23384 = average_layer([[[[[[0.8037, 0.4648], [0.0701, 0.7006]]], [[[0.9213, 0.9461], [0.6206, 0.7794]]]]], [[[[[0.838, 0.1826], [0.9909, 0.8161]]], [[[0.3306, 0.6619], [0.6435, 0.174]]]]]], Ave23384), 
LRes48509 = reshape_layer(Ave23384, [2, 1, 4], Res48509), 
LRes13389 = reshape_layer(Res48509, [2, 4], Res13389), 
LZer90686 = zero_padding1D_layer(Res13389, 1, 0, Zer90686), 
LSub81129 = subtract_layer([[[[0.2606, 0.8892], [0.0073, 0.7263], [0.1456, 0.2904]], [[0.1295, 0.8596], [0.7609, 0.251], [0.7559, 0.9342]]]], [[[[0.7198, 0.9926], [0.541, 0.3665], [0.4389, 0.1675]], [[0.5629, 0.3148], [0.6259, 0.7673], [0.5687, 0.8074]]]], Sub81129), 
LRes37433 = reshape_layer(Sub81129, [2, 6], Res37433), 
LZer11655 = zero_padding1D_layer(Res37433, 1, 0, Zer11655), 
LLay54079 = layer_normalization_layer([[[1.4463, 1.1809, 1.4071], [1.0309, 1.8241, 1.013], [1.9188, 1.4167, 1.9078]]], 2, 1.2882087505832145, Lay54079), 
LCon85918 = concatenate_layer([Lay54079,[[[0.1287, 0.3093, 0.9898], [0.3796, 0.2629, 0.529], [0.8011, 0.3313, 0.4559]]]], 2, Con85918), 
LAve50328 = average_layer([Zer11655,Con85918], Ave50328), 
LDot11474 = dot_layer(Zer90686,Ave50328, 1, 1, Dot11474), 
LRes31635 = reshape_layer(Dot11474, [4, 6, 1], Res31635), 
LCon58626 = concatenate_layer([Res31635,[[[[0.0938, 0.1675], [0.0966, 0.8035], [0.8781, 0.191], [0.4918, 0.5319], [0.2025, 0.5943], [0.1411, 0.0806]], [[0.4295, 0.2838], [0.7504, 0.9228], [0.263, 0.5843], [0.7632, 0.5321], [0.3749, 0.6006], [0.981, 0.2518]], [[0.2809, 0.6156], [0.3539, 0.8976], [0.0336, 0.0529], [0.2287, 0.1908], [0.5862, 0.0794], [0.9498, 0.1111]], [[0.8708, 0.6204], [0.7339, 0.9171], [0.7365, 0.4185], [0.1631, 0.8868], [0.8956, 0.7801], [0.4755, 0.8012]]]]], 3, Con58626), 
LSub32022 = subtract_layer([[[[0.5816, 0.1508, 0.1041], [0.5967, 0.8475, 0.1355], [0.3424, 0.1603, 0.8972]], [[0.634, 0.3966, 0.4116], [0.0028, 0.1798, 0.5679], [0.5926, 0.7089, 0.4809]]]], [[[[0.0054, 0.1229, 0.3615], [0.7377, 0.093, 0.6221], [0.9867, 0.7163, 0.3252]], [[0.1701, 0.4497, 0.4817], [0.7539, 0.5941, 0.3827], [0.5388, 0.2819, 0.6854]]]], Sub32022), 
LZer49956 = zero_padding2D_layer(Sub32022, 2, 0, 3, 0, Zer49956), 
LAdd83083 = add_layer([Con58626,Zer49956], Add83083), 
exec_layers([LAve23384,LRes48509,LRes13389,LZer90686,LSub81129,LRes37433,LZer11655,LLay54079,LCon85918,LAve50328,LDot11474,LRes31635,LCon58626,LSub32022,LZer49956,LAdd83083],["Ave23384","Res48509","Res13389","Zer90686","Sub81129","Res37433","Zer11655","Lay54079","Con85918","Ave50328","Dot11474","Res31635","Con58626","Sub32022","Zer49956","Add83083"],Add83083,"Add83083")

Actual (Unparsed): [[[[-0.3665800, 0.0938000, 0.1675000], [0.2221212, 0.0966000, 0.8035000], [-0.2283732, 0.8781000, 0.1910000], [0.3926035, 0.4918000, 0.5319000], [0.1498006, 0.2025000, 0.5943000], [0.4499266, 0.1411000, 0.0806000]], [[-0.2241824, 0.4295000, 0.2838000], [0.1597797, 0.7504000, 0.9228000], [-0.0139807, 0.2630000, 0.5843000], [0.2341615, 0.7632000, 0.5321000], [0.2035168, 0.3749000, 0.6006000], [0.3397554, 0.9810000, 0.2518000]], [[-0.2694269, 0.2809000, 0.6156000], [0.1730296, 0.3539000, 0.8976000], [-0.1165277, 0.0336000, 0.0529000], [0.8623298, 0.2566000, -0.0666000], [0.0147954, 1.3407000, -0.4072000], [-0.2872358, 0.3938000, 0.6831000]], [[-0.3241503, 0.8708000, 0.6204000], [0.1920466, 0.7339000, 0.9171000], [-0.2248564, 0.7365000, 0.4185000], [0.8121441, 0.1100000, 0.8167000], [-0.6390424, 0.4813000, 0.9653000], [0.4398707, 0.9025000, 0.5967000]]]]

Expected (Unparsed): [[[[-0.3665799578858795,0.0938,0.1675],[0.22212126257752934,0.0966,0.8035],[-0.2283731921916496,0.8781,0.191],[0.39260352499999995,0.4918,0.5319],[0.14980061749999998,0.2025,0.5943],[0.44992659,0.1411,0.0806]],[[-0.22418235520394686,0.4295,0.2838],[0.1597797241020969,0.7504,0.9228],[-0.013980723898149763,0.263,0.5843],[0.23416149000000003,0.7632,0.5321],[0.20351676,0.3749,0.6006],[0.339755415,0.981,0.2518]],[[-0.26942686297096435,0.2809,0.6156],[0.1730296011761409,0.3539,0.8976],[-0.1165277532051763,0.0336,0.0529],[0.86232977,0.2566,-0.06659999999999996],[0.014795362499999964,1.3407,-0.4072],[-0.2872357575000001,0.39379999999999993,0.6831]],[[-0.32415032205312333,0.8708,0.6204],[0.19204659510372632,0.7339,0.9171],[-0.22485638555060278,0.7365,0.4185],[0.812144075,0.11000000000000001,0.8167],[-0.639042445,0.48129999999999995,0.9653],[0.4398707275000001,0.9025,0.5967]]]]

Actual:   [[[[-0.3665, 0.0938, 0.1675], [0.2222, 0.0966, 0.8035], [-0.2283, 0.8781, 0.191], [0.3927, 0.4918, 0.5319], [0.1499, 0.2025, 0.5943], [0.45, 0.1411, 0.0806]], [[-0.2241, 0.4295, 0.2838], [0.1598, 0.7504, 0.9228], [-0.0139, 0.263, 0.5843], [0.2342, 0.7632, 0.5321], [0.2036, 0.3749, 0.6006], [0.3398, 0.981, 0.2518]], [[-0.2694, 0.2809, 0.6156], [0.1731, 0.3539, 0.8976], [-0.1165, 0.0336, 0.0529], [0.8624, 0.2566, -0.0666], [0.0148, 1.3407, -0.4072], [-0.2872, 0.3938, 0.6831]], [[-0.3241, 0.8708, 0.6204], [0.1921, 0.7339, 0.9171], [-0.2248, 0.7365, 0.4185], [0.8122, 0.11, 0.8167], [-0.639, 0.4813, 0.9653], [0.4399, 0.9025, 0.5967]]]]

Expected: [[[[-0.3665, 0.0938, 0.1675], [0.2222, 0.0966, 0.8035], [-0.2283, 0.8781, 0.191], [0.3927, 0.4918, 0.5319], [0.1499, 0.2025, 0.5943], [0.45, 0.1411, 0.0806]], [[-0.2241, 0.4295, 0.2838], [0.1598, 0.7504, 0.9228], [-0.0139, 0.263, 0.5843], [0.2342, 0.7632, 0.5321], [0.2036, 0.3749, 0.6006], [0.3398, 0.981, 0.2518]], [[-0.2694, 0.2809, 0.6156], [0.1731, 0.3539, 0.8976], [-0.1165, 0.0336, 0.0529], [0.8624, 0.2566, -0.0665], [0.0148, 1.3407, -0.4072], [-0.2872, 0.3938, 0.6831]], [[-0.3241, 0.8708, 0.6204], [0.1921, 0.7339, 0.9171], [-0.2248, 0.7365, 0.4185], [0.8122, 0.1101, 0.8167], [-0.639, 0.4813, 0.9653], [0.4399, 0.9025, 0.5967]]]]