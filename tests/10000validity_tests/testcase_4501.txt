import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add7609 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add7609 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con51123 = tf.keras.layers.Input(shape=([2, 2]))
in0Add44753 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add44753 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Ave54979 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave54979 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con38572 = tf.keras.layers.Input(shape=([2, 2]))

Add7609 = keras.layers.Add(name = 'Add7609', )([in0Add7609,in1Add7609])
Res22920 = keras.layers.Reshape((1, 2), name = 'Res22920', )(Add7609)
Zer41786 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer41786', )(Res22920)
Con51123 = keras.layers.Concatenate(axis=2, name = 'Con51123', )([Zer41786,in0Con51123])
Add44753 = keras.layers.Add(name = 'Add44753', )([in0Add44753,in1Add44753])
Res76830 = keras.layers.Reshape((2, 2, 2), name = 'Res76830', )(Add44753)
Res44766 = keras.layers.Reshape((2, 4), name = 'Res44766', )(Res76830)
Ave54979 = keras.layers.Average(name = 'Ave54979', )([in0Ave54979,in1Ave54979])
Res2666 = keras.layers.Reshape((1, 1, 1), name = 'Res2666', )(Ave54979)
Res65993 = keras.layers.Reshape((1, 1), name = 'Res65993', )(Res2666)
Sep38359 = keras.layers.SeparableConv1D(2, (1),strides=(1), padding='same', name = 'Sep38359', )(Res65993)
Zer69227 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer69227', )(Sep38359)
Con38572 = keras.layers.Concatenate(axis=2, name = 'Con38572', )([Zer69227,in0Con38572])
Min94845 = keras.layers.Minimum(name = 'Min94845', )([Res44766,Con38572])
Min63451 = keras.layers.Minimum(name = 'Min63451', )([Con51123,Min94845])
model = tf.keras.models.Model(inputs=[in0Add7609,in1Add7609,in0Con51123,in0Add44753,in1Add44753,in0Ave54979,in1Ave54979,in0Con38572], outputs=Min63451)
w = model.get_layer('Sep38359').get_weights() 
w[0] = np.array([[[0.9373]]])
w[1] = np.array([[[0.0984, 0.508]]])
w[2] = np.array([0, 0])
model.get_layer('Sep38359').set_weights(w) 
in0Add7609 = tf.constant([[[[0.3025], [0.6688]]]])
in1Add7609 = tf.constant([[[[0.4477], [0.6869]]]])
in0Con51123 = tf.constant([[[0.525, 0.1307], [0.5572, 0.5128]]])
in0Add44753 = tf.constant([[[[[0.3252], [0.8432]], [[0.2884], [0.3492]]], [[[0.1028], [0.4225]], [[0.8593], [0.4777]]]]])
in1Add44753 = tf.constant([[[[[0.7774], [0.0487]], [[0.0572], [0.2669]]], [[[0.7724], [0.7805]], [[0.9004], [0.3079]]]]])
in0Ave54979 = tf.constant([[[[[0.3822]]]]])
in1Ave54979 = tf.constant([[[[[0.1075]]]]])
in0Con38572 = tf.constant([[[0.0199, 0.199], [0.6061, 0.8594]]])
print (np.array2string(model.predict([in0Add7609,in1Add7609,in0Con51123,in0Add44753,in1Add44753,in0Ave54979,in1Ave54979,in0Con38572],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min63451.png')

LAdd7609 = add_layer([[[[[0.3025], [0.6688]]]], [[[[0.4477], [0.6869]]]]], Add7609), 
LRes22920 = reshape_layer(Add7609, [1, 2], Res22920), 
LZer41786 = zero_padding1D_layer(Res22920, 1, 0, Zer41786), 
LCon51123 = concatenate_layer([Zer41786,[[[0.525, 0.1307], [0.5572, 0.5128]]]], 2, Con51123), 
LAdd44753 = add_layer([[[[[[0.3252], [0.8432]], [[0.2884], [0.3492]]], [[[0.1028], [0.4225]], [[0.8593], [0.4777]]]]], [[[[[0.7774], [0.0487]], [[0.0572], [0.2669]]], [[[0.7724], [0.7805]], [[0.9004], [0.3079]]]]]], Add44753), 
LRes76830 = reshape_layer(Add44753, [2, 2, 2], Res76830), 
LRes44766 = reshape_layer(Res76830, [2, 4], Res44766), 
LAve54979 = average_layer([[[[[[0.3822]]]]], [[[[[0.1075]]]]]], Ave54979), 
LRes2666 = reshape_layer(Ave54979, [1, 1, 1], Res2666), 
LRes65993 = reshape_layer(Res2666, [1, 1], Res65993), 
LSep38359 = separable_conv1D_layer(Res65993, 1,[[[[0.9373]]],[[[0.0984, 0.508]]]],[0, 0], 1, true, Sep38359), 
LZer69227 = zero_padding1D_layer(Sep38359, 1, 0, Zer69227), 
LCon38572 = concatenate_layer([Zer69227,[[[0.0199, 0.199], [0.6061, 0.8594]]]], 2, Con38572), 
LMin94845 = minimum_layer([Res44766,Con38572], Min94845), 
LMin63451 = minimum_layer([Con51123,Min94845], Min63451), 
exec_layers([LAdd7609,LRes22920,LZer41786,LCon51123,LAdd44753,LRes76830,LRes44766,LAve54979,LRes2666,LRes65993,LSep38359,LZer69227,LCon38572,LMin94845,LMin63451],["Add7609","Res22920","Zer41786","Con51123","Add44753","Res76830","Res44766","Ave54979","Res2666","Res65993","Sep38359","Zer69227","Con38572","Min94845","Min63451"],Min63451,"Min63451")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0199000, 0.1307000], [0.0225826, 0.1165849, 0.5572000, 0.5128000]]]

Expected (Unparsed): [[[0,0,0.0199,0.1307],[0.022582593852,0.11658493574,0.5572,0.5128]]]

Actual:   [[[0, 0, 0.0199, 0.1307], [0.0226, 0.1166, 0.5572, 0.5128]]]

Expected: [[[0, 0, 0.0199, 0.1307], [0.0226, 0.1166, 0.5572, 0.5128]]]