import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add93898 = tf.keras.layers.Input(shape=([2, 2]))
in1Add93898 = tf.keras.layers.Input(shape=([2, 2]))
in0Con24473 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Dot74139 = tf.keras.layers.Input(shape=([2]))
in1Dot74139 = tf.keras.layers.Input(shape=([2]))

Add93898 = keras.layers.Add(name = 'Add93898', )([in0Add93898,in1Add93898])
Up_65240 = keras.layers.UpSampling1D(size=(2), name = 'Up_65240', )(Add93898)
Res85100 = keras.layers.Reshape((4, 2, 1), name = 'Res85100', )(Up_65240)
Res35833 = keras.layers.Reshape((4, 2, 1, 1), name = 'Res35833', )(Res85100)
Zer34562 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (4, 0)), name = 'Zer34562', )(Res35833)
Con24473 = keras.layers.Conv2D(3, (1, 2),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con24473', )(in0Con24473)
Res27654 = keras.layers.Reshape((1, 1, 3, 1), name = 'Res27654', )(Con24473)
Zer97463 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (0, 0)), name = 'Zer97463', )(Res27654)
Dot74139 = keras.layers.Dot(axes=(1, 1), name = 'Dot74139', )([in0Dot74139,in1Dot74139])
Res18457 = keras.layers.Reshape((1, 1), name = 'Res18457', )(Dot74139)
Res88201 = keras.layers.Reshape((1, 1, 1), name = 'Res88201', )(Res18457)
Res96749 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res96749', )(Res88201)
Zer3682 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer3682', )(Res96749)
Min91197 = keras.layers.Minimum(name = 'Min91197', )([Zer97463,Zer3682])
Zer45348 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (2, 0)), name = 'Zer45348', )(Min91197)
Min12617 = keras.layers.Minimum(name = 'Min12617', )([Zer34562,Zer45348])
model = tf.keras.models.Model(inputs=[in0Add93898,in1Add93898,in0Con24473,in0Dot74139,in1Dot74139], outputs=Min12617)
w = model.get_layer('Con24473').get_weights() 
w[0] = np.array([[[[0.5589, 0.0374, 0.1357], [0.3486, 0.2154, 0.9249]], [[0.6627, 0.9825, 0.5904], [0.1787, 0.6531, 0.5331]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con24473').set_weights(w) 
in0Add93898 = tf.constant([[[0.5382, 0.4051], [0.7183, 0.4788]]])
in1Add93898 = tf.constant([[[0.2486, 0.819], [0.9914, 0.1166]]])
in0Con24473 = tf.constant([[[[0.33, 0.6462], [0.8826, 0.6461]]]])
in0Dot74139 = tf.constant([[0.3428, 0.7009]])
in1Dot74139 = tf.constant([[0.6597, 0.4748]])
print (np.array2string(model.predict([in0Add93898,in1Add93898,in0Con24473,in0Dot74139,in1Dot74139],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min12617.png')

LAdd93898 = add_layer([[[[0.5382, 0.4051], [0.7183, 0.4788]]], [[[0.2486, 0.819], [0.9914, 0.1166]]]], Add93898), 
LUp_65240 = up_sampling1D_layer(Add93898, 2, Up_65240), 
LRes85100 = reshape_layer(Up_65240, [4, 2, 1], Res85100), 
LRes35833 = reshape_layer(Res85100, [4, 2, 1, 1], Res35833), 
LZer34562 = zero_padding3D_layer(Res35833, 0, 0, 2, 0, 4, 0, Zer34562), 
LCon24473 = conv2D_layer([[[[0.33, 0.6462], [0.8826, 0.6461]]]], 1, 2,[[[[0.5589, 0.0374, 0.1357], [0.3486, 0.2154, 0.9249]], [[0.6627, 0.9825, 0.5904], [0.1787, 0.6531, 0.5331]]]],[0, 0, 0], 1, 1, false, 1, 1, Con24473), 
LRes27654 = reshape_layer(Con24473, [1, 1, 3, 1], Res27654), 
LZer97463 = zero_padding3D_layer(Res27654, 2, 0, 2, 0, 0, 0, Zer97463), 
LDot74139 = dot_layer([[0.3428, 0.7009]], [[0.6597, 0.4748]], 1, 1, Dot74139), 
LRes18457 = reshape_layer(Dot74139, [1, 1], Res18457), 
LRes88201 = reshape_layer(Res18457, [1, 1, 1], Res88201), 
LRes96749 = reshape_layer(Res88201, [1, 1, 1, 1], Res96749), 
LZer3682 = zero_padding3D_layer(Res96749, 1, 1, 1, 1, 1, 1, Zer3682), 
LMin91197 = minimum_layer([Zer97463,Zer3682], Min91197), 
LZer45348 = zero_padding3D_layer(Min91197, 1, 0, 1, 0, 2, 0, Zer45348), 
LMin12617 = minimum_layer([Zer34562,Zer45348], Min12617), 
exec_layers([LAdd93898,LUp_65240,LRes85100,LRes35833,LZer34562,LCon24473,LRes27654,LZer97463,LDot74139,LRes18457,LRes88201,LRes96749,LZer3682,LMin91197,LZer45348,LMin12617],["Add93898","Up_65240","Res85100","Res35833","Zer34562","Con24473","Res27654","Zer97463","Dot74139","Res18457","Res88201","Res96749","Zer3682","Min91197","Zer45348","Min12617"],Min12617,"Min12617")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]]],[[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]]],[[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]]],[[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]],[[0],[0],[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]]]]

Expected: [[[[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]], [[[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]], [[0], [0], [0], [0], [0]]]]]