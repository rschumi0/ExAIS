import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave68947 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave68947 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Per83158 = tf.keras.layers.Input(shape=([1, 3]))

Ave68947 = keras.layers.Average(name = 'Ave68947', )([in0Ave68947,in1Ave68947])
Res13788 = keras.layers.Reshape((2, 1), name = 'Res13788', )(Ave68947)
Zer88893 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer88893', )(Res13788)
Per83158 = keras.layers.Permute((2,1), name = 'Per83158',)(in0Per83158)
Sub5963 = keras.layers.Subtract(name = 'Sub5963', )([Zer88893,Per83158])
model = tf.keras.models.Model(inputs=[in0Ave68947,in1Ave68947,in0Per83158], outputs=Sub5963)
in0Ave68947 = tf.constant([[[[0.708]], [[0.7181]]]])
in1Ave68947 = tf.constant([[[[0.8154]], [[0.6498]]]])
in0Per83158 = tf.constant([[[1.1731, 1.0097, 1.5952]]])
print (np.array2string(model.predict([in0Ave68947,in1Ave68947,in0Per83158],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub5963.png')

LAve68947 = average_layer([[[[[0.708]], [[0.7181]]]], [[[[0.8154]], [[0.6498]]]]], Ave68947), 
LRes13788 = reshape_layer(Ave68947, [2, 1], Res13788), 
LZer88893 = zero_padding1D_layer(Res13788, 1, 0, Zer88893), 
LPer83158 = permute_layer([[[1.1731, 1.0097, 1.5952]]], 2,1, Per83158), 
LSub5963 = subtract_layer(Zer88893,Per83158, Sub5963), 
exec_layers([LAve68947,LRes13788,LZer88893,LPer83158,LSub5963],["Ave68947","Res13788","Zer88893","Per83158","Sub5963"],Sub5963,"Sub5963")

Actual (Unparsed): [[[-1.1731000], [-0.2479999], [-0.9112499]]]

Expected (Unparsed): [[[-1.1731],[-0.248],[-0.9112499999999999]]]

Actual:   [[[-1.1731], [-0.2479], [-0.9112]]]

Expected: [[[-1.1731], [-0.248], [-0.9112]]]