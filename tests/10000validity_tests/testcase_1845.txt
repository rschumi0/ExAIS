import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot39980 = tf.keras.layers.Input(shape=([3]))
in1Dot39980 = tf.keras.layers.Input(shape=([3]))
in0Max22440 = tf.keras.layers.Input(shape=([1, 2]))

Dot39980 = keras.layers.Dot(axes=(1, 1), name = 'Dot39980', )([in0Dot39980,in1Dot39980])
Res74451 = keras.layers.Reshape((1, 1), name = 'Res74451', )(Dot39980)
Max22440 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max22440', )(in0Max22440)
Res35557 = keras.layers.Reshape((1, 2, 1), name = 'Res35557', )(Max22440)
Max63629 = keras.layers.MaxPool2D(pool_size=(1, 2), name = 'Max63629', )(Res35557)
Lea4272 = keras.layers.LeakyReLU(alpha=8.148392599518894, name = 'Lea4272', )(Max63629)
Res54872 = keras.layers.Reshape((1, 1), name = 'Res54872', )(Lea4272)
Dot60837 = keras.layers.Dot(axes=(1, 2), name = 'Dot60837', )([Res74451,Res54872])
Res47467 = keras.layers.Reshape((1, 1, 1), name = 'Res47467', )(Dot60837)
Max322 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max322', )(Res47467)
model = tf.keras.models.Model(inputs=[in0Dot39980,in1Dot39980,in0Max22440], outputs=Max322)
in0Dot39980 = tf.constant([[0.3519, 0.3705, 0.2052]])
in1Dot39980 = tf.constant([[0.2356, 0.3481, 0.0826]])
in0Max22440 = tf.constant([[[1.6812, 1.9023]]])
print (np.array2string(model.predict([in0Dot39980,in1Dot39980,in0Max22440],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max322.png')

LDot39980 = dot_layer([[0.3519, 0.3705, 0.2052]], [[0.2356, 0.3481, 0.0826]], 1, 1, Dot39980), 
LRes74451 = reshape_layer(Dot39980, [1, 1], Res74451), 
LMax22440 = max_pool1D_layer([[[1.6812, 1.9023]]], 1, 1, true, Max22440), 
LRes35557 = reshape_layer(Max22440, [1, 2, 1], Res35557), 
LMax63629 = max_pool2D_layer(Res35557, 1, 2, Max63629), 
LLea4272 = leaky_relu_layer(Max63629, 8.148392599518894, Lea4272), 
LRes54872 = reshape_layer(Lea4272, [1, 1], Res54872), 
LDot60837 = dot_layer(Res74451,Res54872, 1, 2, Dot60837), 
LRes47467 = reshape_layer(Dot60837, [1, 1, 1], Res47467), 
LMax322 = max_pool2D_layer(Res47467, 1, 1, Max322), 
exec_layers([LDot39980,LRes74451,LMax22440,LRes35557,LMax63629,LLea4272,LRes54872,LDot60837,LRes47467,LMax322],["Dot39980","Res74451","Max22440","Res35557","Max63629","Lea4272","Res54872","Dot60837","Res47467","Max322"],Max322,"Max322")

Actual (Unparsed): [[[[0.4352999]]]]

Expected (Unparsed): [[[[0.43529990388300005]]]]

Actual:   [[[[0.4353]]]]

Expected: [[[[0.4353]]]]