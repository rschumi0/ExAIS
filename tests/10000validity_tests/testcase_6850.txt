import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul76776 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul76776 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Ave15912 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave15912 = tf.keras.layers.Input(shape=([1, 1]))
in0Con54923 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot36560 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot36560 = tf.keras.layers.Input(shape=([2, 2]))
in0Con75735 = tf.keras.layers.Input(shape=([2, 1, 1]))

Mul76776 = keras.layers.Multiply(name = 'Mul76776', )([in0Mul76776,in1Mul76776])
Ave15912 = keras.layers.Average(name = 'Ave15912', )([in0Ave15912,in1Ave15912])
Zer3858 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer3858', )(Ave15912)
Con54923 = keras.layers.Concatenate(axis=2, name = 'Con54923', )([Zer3858,in0Con54923])
Dot36560 = keras.layers.Dot(axes=(2, 1), name = 'Dot36560', )([in0Dot36560,in1Dot36560])
Sub6667 = keras.layers.Subtract(name = 'Sub6667', )([Con54923,Dot36560])
Lay49055 = keras.layers.LayerNormalization(axis=1, epsilon=2.5530717106974348, name = 'Lay49055', )(Sub6667)
Res89528 = keras.layers.Reshape((2, 2, 1), name = 'Res89528', )(Lay49055)
Cro73849 = keras.layers.Cropping2D(cropping=((0, 1), (1, 0)), name = 'Cro73849', )(Res89528)
Zer94028 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer94028', )(Cro73849)
Con75735 = keras.layers.Concatenate(axis=3, name = 'Con75735', )([Zer94028,in0Con75735])
Add99225 = keras.layers.Add(name = 'Add99225', )([Mul76776,Con75735])
model = tf.keras.models.Model(inputs=[in0Mul76776,in1Mul76776,in0Ave15912,in1Ave15912,in0Con54923,in0Dot36560,in1Dot36560,in0Con75735], outputs=Add99225)
in0Mul76776 = tf.constant([[[[0.1924, 0.7974]], [[0.741, 0.7007]]]])
in1Mul76776 = tf.constant([[[[0.1692, 0.9245]], [[0.3599, 0.568]]]])
in0Ave15912 = tf.constant([[[0.0409]]])
in1Ave15912 = tf.constant([[[0.5509]]])
in0Con54923 = tf.constant([[[0.3809], [0.3614]]])
in0Dot36560 = tf.constant([[[0.1771, 0.4421], [0.3326, 0.3386]]])
in1Dot36560 = tf.constant([[[0.0052, 0.8875], [0.1708, 0.3592]]])
in0Con75735 = tf.constant([[[[0.8717]], [[0.5858]]]])
print (np.array2string(model.predict([in0Mul76776,in1Mul76776,in0Ave15912,in1Ave15912,in0Con54923,in0Dot36560,in1Dot36560,in0Con75735],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add99225.png')

LMul76776 = multiply_layer([[[[[0.1924, 0.7974]], [[0.741, 0.7007]]]], [[[[0.1692, 0.9245]], [[0.3599, 0.568]]]]], Mul76776), 
LAve15912 = average_layer([[[[0.0409]]], [[[0.5509]]]], Ave15912), 
LZer3858 = zero_padding1D_layer(Ave15912, 1, 0, Zer3858), 
LCon54923 = concatenate_layer([Zer3858,[[[0.3809], [0.3614]]]], 2, Con54923), 
LDot36560 = dot_layer([[[0.1771, 0.4421], [0.3326, 0.3386]]], [[[0.0052, 0.8875], [0.1708, 0.3592]]], 2, 1, Dot36560), 
LSub6667 = subtract_layer(Con54923,Dot36560, Sub6667), 
LLay49055 = layer_normalization_layer(Sub6667, 1, 2.5530717106974348, Lay49055), 
LRes89528 = reshape_layer(Lay49055, [2, 2, 1], Res89528), 
LCro73849 = cropping2D_layer(Res89528, 0, 1, 1, 0, Cro73849), 
LZer94028 = zero_padding2D_layer(Cro73849, 1, 0, 0, 0, Zer94028), 
LCon75735 = concatenate_layer([Zer94028,[[[[0.8717]], [[0.5858]]]]], 3, Con75735), 
LAdd99225 = add_layer([Mul76776,Con75735], Add99225), 
exec_layers([LMul76776,LAve15912,LZer3858,LCon54923,LDot36560,LSub6667,LLay49055,LRes89528,LCro73849,LZer94028,LCon75735,LAdd99225],["Mul76776","Ave15912","Zer3858","Con54923","Dot36560","Sub6667","Lay49055","Res89528","Cro73849","Zer94028","Con75735","Add99225"],Add99225,"Add99225")

Actual (Unparsed): [[[[0.0325541, 1.6088963]], [[0.3043130, 0.9837976]]]]

Expected (Unparsed): [[[[0.03255408,1.6088963]],[[0.304313050468658,0.9837975999999999]]]]

Actual:   [[[[0.0326, 1.6089]], [[0.3044, 0.9838]]]]

Expected: [[[[0.0326, 1.6089]], [[0.3044, 0.9838]]]]