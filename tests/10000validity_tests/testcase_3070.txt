import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max48867 = tf.keras.layers.Input(shape=([2, 2]))
in1Max48867 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul87446 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Mul87446 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Max48867 = keras.layers.Maximum(name = 'Max48867', )([in0Max48867,in1Max48867])
Res526 = keras.layers.Reshape((2, 2, 1), name = 'Res526', )(Max48867)
Glo16313 = keras.layers.GlobalMaxPool2D(name = 'Glo16313', )(Res526)
Res21070 = keras.layers.Reshape((1, 1), name = 'Res21070', )(Glo16313)
Zer51140 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer51140', )(Res21070)
Mul87446 = keras.layers.Multiply(name = 'Mul87446', )([in0Mul87446,in1Mul87446])
Res20083 = keras.layers.Reshape((1, 1, 1), name = 'Res20083', )(Mul87446)
Res47175 = keras.layers.Reshape((1, 1), name = 'Res47175', )(Res20083)
Zer49944 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer49944', )(Res47175)
Mul12635 = keras.layers.Multiply(name = 'Mul12635', )([Zer51140,Zer49944])
Res67021 = keras.layers.Reshape((3, 1, 1), name = 'Res67021', )(Mul12635)
Res85743 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res85743', )(Res67021)
Zer61545 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer61545', )(Res85743)
model = tf.keras.models.Model(inputs=[in0Max48867,in1Max48867,in0Mul87446,in1Mul87446], outputs=Zer61545)
in0Max48867 = tf.constant([[[0.4196, 0.967], [0.2556, 0.4417]]])
in1Max48867 = tf.constant([[[0.5686, 0.8539], [0.9051, 0.0439]]])
in0Mul87446 = tf.constant([[[[[0.5915]]]]])
in1Mul87446 = tf.constant([[[[[0.6349]]]]])
print (np.array2string(model.predict([in0Max48867,in1Max48867,in0Mul87446,in1Mul87446],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer61545.png')

LMax48867 = maximum_layer([[[[0.4196, 0.967], [0.2556, 0.4417]]], [[[0.5686, 0.8539], [0.9051, 0.0439]]]], Max48867), 
LRes526 = reshape_layer(Max48867, [2, 2, 1], Res526), 
LGlo16313 = global_max_pool2D_layer(Res526, Glo16313), 
LRes21070 = reshape_layer(Glo16313, [1, 1], Res21070), 
LZer51140 = zero_padding1D_layer(Res21070, 2, 0, Zer51140), 
LMul87446 = multiply_layer([[[[[[0.5915]]]]], [[[[[0.6349]]]]]], Mul87446), 
LRes20083 = reshape_layer(Mul87446, [1, 1, 1], Res20083), 
LRes47175 = reshape_layer(Res20083, [1, 1], Res47175), 
LZer49944 = zero_padding1D_layer(Res47175, 1, 1, Zer49944), 
LMul12635 = multiply_layer([Zer51140,Zer49944], Mul12635), 
LRes67021 = reshape_layer(Mul12635, [3, 1, 1], Res67021), 
LRes85743 = reshape_layer(Res67021, [3, 1, 1, 1], Res85743), 
LZer61545 = zero_padding3D_layer(Res85743, 1, 1, 1, 1, 1, 1, Zer61545), 
exec_layers([LMax48867,LRes526,LGlo16313,LRes21070,LZer51140,LMul87446,LRes20083,LRes47175,LZer49944,LMul12635,LRes67021,LRes85743,LZer61545],["Max48867","Res526","Glo16313","Res21070","Zer51140","Mul87446","Res20083","Res47175","Zer49944","Mul12635","Res67021","Res85743","Zer61545"],Zer61545,"Zer61545")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]