import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min61475 = tf.keras.layers.Input(shape=([2, 2]))
in1Min61475 = tf.keras.layers.Input(shape=([2, 2]))
in0Con3356 = tf.keras.layers.Input(shape=([2, 6]))
in0Add80050 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Add80050 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Min61475 = keras.layers.Minimum(name = 'Min61475', )([in0Min61475,in1Min61475])
Con3356 = keras.layers.Concatenate(axis=2, name = 'Con3356', )([Min61475,in0Con3356])
Add80050 = keras.layers.Add(name = 'Add80050', )([in0Add80050,in1Add80050])
Lay23645 = keras.layers.LayerNormalization(axis=3, epsilon=2.374215163925906, name = 'Lay23645', )(Add80050)
Res30773 = keras.layers.Reshape((1, 2, 4), name = 'Res30773', )(Lay23645)
Res41249 = keras.layers.Reshape((1, 8), name = 'Res41249', )(Res30773)
Dot41521 = keras.layers.Dot(axes=(2, 2), name = 'Dot41521', )([Con3356,Res41249])
Glo94701 = keras.layers.GlobalAveragePooling1D(name = 'Glo94701', )(Dot41521)
model = tf.keras.models.Model(inputs=[in0Min61475,in1Min61475,in0Con3356,in0Add80050,in1Add80050], outputs=Glo94701)
in0Min61475 = tf.constant([[[0.8634, 0.5355], [0.8858, 0.1996]]])
in1Min61475 = tf.constant([[[0.3174, 0.5709], [0.2788, 0.8806]]])
in0Con3356 = tf.constant([[[0.0388, 0.9227, 0.9801, 0.1149, 0.2825, 0.4105], [0.1173, 0.0569, 0.8115, 0.2099, 0.7185, 0.3388]]])
in0Add80050 = tf.constant([[[[[0.2789, 0.5012], [0.2938, 0.1529]], [[0.908, 0.5199], [0.5967, 0.7268]]]]])
in1Add80050 = tf.constant([[[[[0.0424, 0.3984], [0.1425, 0.37]], [[0.7858, 0.9895], [0.6176, 0.3071]]]]])
print (np.array2string(model.predict([in0Min61475,in1Min61475,in0Con3356,in0Add80050,in1Add80050],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo94701.png')

LMin61475 = minimum_layer([[[[0.8634, 0.5355], [0.8858, 0.1996]]], [[[0.3174, 0.5709], [0.2788, 0.8806]]]], Min61475), 
LCon3356 = concatenate_layer([Min61475,[[[0.0388, 0.9227, 0.9801, 0.1149, 0.2825, 0.4105], [0.1173, 0.0569, 0.8115, 0.2099, 0.7185, 0.3388]]]], 2, Con3356), 
LAdd80050 = add_layer([[[[[[0.2789, 0.5012], [0.2938, 0.1529]], [[0.908, 0.5199], [0.5967, 0.7268]]]]], [[[[[0.0424, 0.3984], [0.1425, 0.37]], [[0.7858, 0.9895], [0.6176, 0.3071]]]]]], Add80050), 
LLay23645 = layer_normalization_layer(Add80050, 3, 2.374215163925906, Lay23645), 
LRes30773 = reshape_layer(Lay23645, [1, 2, 4], Res30773), 
LRes41249 = reshape_layer(Res30773, [1, 8], Res41249), 
LDot41521 = dot_layer(Con3356,Res41249, 2, 2, Dot41521), 
LGlo94701 = global_average_pooling1D_layer(Dot41521, Glo94701), 
exec_layers([LMin61475,LCon3356,LAdd80050,LLay23645,LRes30773,LRes41249,LDot41521,LGlo94701],["Min61475","Con3356","Add80050","Lay23645","Res30773","Res41249","Dot41521","Glo94701"],Glo94701,"Glo94701")

Actual (Unparsed): [[0.0053700]]

Expected (Unparsed): [[0.005370005505144736]]

Actual:   [[0.0054]]

Expected: [[0.0054]]