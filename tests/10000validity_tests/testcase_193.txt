import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave81115 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Ave81115 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Max85647 = tf.keras.layers.Input(shape=([1, 1]))
in1Max85647 = tf.keras.layers.Input(shape=([1, 1]))

Ave81115 = keras.layers.Average(name = 'Ave81115', )([in0Ave81115,in1Ave81115])
Res92615 = keras.layers.Reshape((2, 1, 1), name = 'Res92615', )(Ave81115)
Res67059 = keras.layers.Reshape((2, 1), name = 'Res67059', )(Res92615)
Max85647 = keras.layers.Maximum(name = 'Max85647', )([in0Max85647,in1Max85647])
Zer9641 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer9641', )(Max85647)
Sub877 = keras.layers.Subtract(name = 'Sub877', )([Res67059,Zer9641])
Lea29317 = keras.layers.LeakyReLU(alpha=0.4529205436368763, name = 'Lea29317', )(Sub877)
model = tf.keras.models.Model(inputs=[in0Ave81115,in1Ave81115,in0Max85647,in1Max85647], outputs=Lea29317)
in0Ave81115 = tf.constant([[[[[0.9454]]], [[[0.1536]]]]])
in1Ave81115 = tf.constant([[[[[0.8577]]], [[[0.4527]]]]])
in0Max85647 = tf.constant([[[0.2828]]])
in1Max85647 = tf.constant([[[0.7067]]])
print (np.array2string(model.predict([in0Ave81115,in1Ave81115,in0Max85647,in1Max85647],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Lea29317.png')

LAve81115 = average_layer([[[[[[0.9454]]], [[[0.1536]]]]], [[[[[0.8577]]], [[[0.4527]]]]]], Ave81115), 
LRes92615 = reshape_layer(Ave81115, [2, 1, 1], Res92615), 
LRes67059 = reshape_layer(Res92615, [2, 1], Res67059), 
LMax85647 = maximum_layer([[[[0.2828]]], [[[0.7067]]]], Max85647), 
LZer9641 = zero_padding1D_layer(Max85647, 1, 0, Zer9641), 
LSub877 = subtract_layer(Res67059,Zer9641, Sub877), 
LLea29317 = leaky_relu_layer(Sub877, 0.4529205436368763, Lea29317), 
exec_layers([LAve81115,LRes92615,LRes67059,LMax85647,LZer9641,LSub877,LLea29317],["Ave81115","Res92615","Res67059","Max85647","Zer9641","Sub877","Lea29317"],Lea29317,"Lea29317")

Actual (Unparsed): [[[0.9015500], [-0.1827761]]]

Expected (Unparsed): [[[0.9015500000000001],[-0.18277608538466145]]]

Actual:   [[[0.9016], [-0.1827]]]

Expected: [[[0.9016], [-0.1827]]]