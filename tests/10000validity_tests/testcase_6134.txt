import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot34444 = tf.keras.layers.Input(shape=([3]))
in1Dot34444 = tf.keras.layers.Input(shape=([3]))

Dot34444 = keras.layers.Dot(axes=(1, 1), name = 'Dot34444', )([in0Dot34444,in1Dot34444])
Res7733 = keras.layers.Reshape((1, 1), name = 'Res7733', )(Dot34444)
Res3588 = keras.layers.Reshape((1, 1, 1), name = 'Res3588', )(Res7733)
Glo45052 = keras.layers.GlobalAveragePooling2D(name = 'Glo45052', )(Res3588)
Res56196 = keras.layers.Reshape((1, 1), name = 'Res56196', )(Glo45052)
Res95519 = keras.layers.Reshape((1, 1, 1), name = 'Res95519', )(Res56196)
Con98990 = keras.layers.Conv2D(2, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con98990', )(Res95519)
Res88312 = keras.layers.Reshape((1, 2), name = 'Res88312', )(Con98990)
Glo45924 = keras.layers.GlobalMaxPool1D(name = 'Glo45924', )(Res88312)
model = tf.keras.models.Model(inputs=[in0Dot34444,in1Dot34444], outputs=Glo45924)
w = model.get_layer('Con98990').get_weights() 
w[0] = np.array([[[[0.8522, 0.7896]]]])
w[1] = np.array([0, 0])
model.get_layer('Con98990').set_weights(w) 
in0Dot34444 = tf.constant([[0.8002, 0.0189, 0.7484]])
in1Dot34444 = tf.constant([[0.0901, 0.0802, 0.864]])
print (np.array2string(model.predict([in0Dot34444,in1Dot34444],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo45924.png')

LDot34444 = dot_layer([[0.8002, 0.0189, 0.7484]], [[0.0901, 0.0802, 0.864]], 1, 1, Dot34444), 
LRes7733 = reshape_layer(Dot34444, [1, 1], Res7733), 
LRes3588 = reshape_layer(Res7733, [1, 1, 1], Res3588), 
LGlo45052 = global_average_pooling2D_layer(Res3588, Glo45052), 
LRes56196 = reshape_layer(Glo45052, [1, 1], Res56196), 
LRes95519 = reshape_layer(Res56196, [1, 1, 1], Res95519), 
LCon98990 = conv2D_layer(Res95519, 1, 1,[[[[0.8522, 0.7896]]]],[0, 0], 1, 1, true, 1, 1, Con98990), 
LRes88312 = reshape_layer(Con98990, [1, 2], Res88312), 
LGlo45924 = global_max_pool1D_layer(Res88312, Glo45924), 
exec_layers([LDot34444,LRes7733,LRes3588,LGlo45052,LRes56196,LRes95519,LCon98990,LRes88312,LGlo45924],["Dot34444","Res7733","Res3588","Glo45052","Res56196","Res95519","Con98990","Res88312","Glo45924"],Glo45924,"Glo45924")

Actual (Unparsed): [[0.6137812, 0.5686947]]

Expected (Unparsed): [[0.6137811990799998,0.5686947134399999]]

Actual:   [[0.6138, 0.5687]]

Expected: [[0.6138, 0.5687]]