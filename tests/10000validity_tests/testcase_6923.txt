import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot83793 = tf.keras.layers.Input(shape=([3]))
in1Dot83793 = tf.keras.layers.Input(shape=([3]))

Dot83793 = keras.layers.Dot(axes=(1, 1), name = 'Dot83793', )([in0Dot83793,in1Dot83793])
Res99142 = keras.layers.Reshape((1, 1), name = 'Res99142', )(Dot83793)
Per8902 = keras.layers.Permute((2,1), name = 'Per8902',)(Res99142)
Res84795 = keras.layers.Reshape((1, 1, 1), name = 'Res84795', )(Per8902)
Ave60964 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave60964', )(Res84795)
model = tf.keras.models.Model(inputs=[in0Dot83793,in1Dot83793], outputs=Ave60964)
in0Dot83793 = tf.constant([[0.4216, 0.9685, 0.7059]])
in1Dot83793 = tf.constant([[0.3692, 0.4817, 0.5344]])
print (np.array2string(model.predict([in0Dot83793,in1Dot83793],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave60964.png')

LDot83793 = dot_layer([[0.4216, 0.9685, 0.7059]], [[0.3692, 0.4817, 0.5344]], 1, 1, Dot83793), 
LRes99142 = reshape_layer(Dot83793, [1, 1], Res99142), 
LPer8902 = permute_layer(Res99142, 2,1, Per8902), 
LRes84795 = reshape_layer(Per8902, [1, 1, 1], Res84795), 
LAve60964 = average_pooling2D_layer(Res84795, 1, 1, 1, 1, false, Ave60964), 
exec_layers([LDot83793,LRes99142,LPer8902,LRes84795,LAve60964],["Dot83793","Res99142","Per8902","Res84795","Ave60964"],Ave60964,"Ave60964")

Actual (Unparsed): [[[[0.9994141]]]]

Expected (Unparsed): [[[[0.9994141299999999]]]]

Actual:   [[[[0.9995]]]]

Expected: [[[[0.9995]]]]