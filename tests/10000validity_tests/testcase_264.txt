import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas88570 = tf.keras.layers.Input(shape=([2]))

Mas88570 = keras.layers.Masking(mask_value=1, name = 'Mas88570', )(in0Mas88570)
Res55644 = keras.layers.Reshape((2, 1), name = 'Res55644', )(Mas88570)
Con50644 = keras.layers.Conv1D(2, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con50644', )(Res55644)
Res22830 = keras.layers.Reshape((2, 2, 1), name = 'Res22830', )(Con50644)
Con11755 = keras.layers.Conv2DTranspose(4, (2, 2),strides=(1, 1), padding='same', name = 'Con11755', )(Res22830)
model = tf.keras.models.Model(inputs=[in0Mas88570], outputs=Con11755)
w = model.get_layer('Con50644').get_weights() 
w[0] = np.array([[[0.8965, 0.6011]]])
w[1] = np.array([0, 0])
model.get_layer('Con50644').set_weights(w) 
w = model.get_layer('Con11755').get_weights() 
w[0] = np.array([[[[0.1386], [0.6097], [0.6012], [0.0795]], [[0.2996], [0.552], [0.6347], [0.7608]]], [[[0.7564], [0.5108], [0.8125], [0.5337]], [[0.4525], [0.6367], [0.4818], [0.5588]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con11755').set_weights(w) 
in0Mas88570 = tf.constant([[1.0906, 1.2614]])
print (np.array2string(model.predict([in0Mas88570],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con11755.png')

LMas88570 = masking_layer([[1.0906, 1.2614]], 1, Mas88570), 
LRes55644 = reshape_layer(Mas88570, [2, 1], Res55644), 
LCon50644 = conv1D_layer(Res55644, 1,[[[0.8965, 0.6011]]],[0, 0], 1, true, 1, Con50644), 
LRes22830 = reshape_layer(Con50644, [2, 2, 1], Res22830), 
LCon11755 = conv2D_transpose_layer(Res22830, 2, 2,[[[[0.1386], [0.6097], [0.6012], [0.0795]], [[0.2996], [0.552], [0.6347], [0.7608]]], [[[0.7564], [0.5108], [0.8125], [0.5337]], [[0.4525], [0.6367], [0.4818], [0.5588]]]],[0, 0, 0, 0], 1, 1, true, Con11755), 
exec_layers([LMas88570,LRes55644,LCon50644,LRes22830,LCon11755],["Mas88570","Res55644","Con50644","Res22830","Con11755"],Con11755,"Con11755")

Actual (Unparsed): [[[[0.1355124, 0.5961177, 0.5878070, 0.0777290], [0.3837864, 0.9393978, 1.0146832, 0.7959686]], [[0.8962847, 1.1888971, 1.4742639, 0.6117129], [1.3821765, 2.0438939, 2.1773029, 1.8168498]]]]

Expected (Unparsed): [[[[0.13551239394,0.59611765213,0.5878070074799999,0.07772897055],[0.383786349716,0.939397765502,1.0146831922219999,0.7959685752900001]],[[0.89628473242,1.18889711479,1.4742639303699998,0.6117128971799999],[1.3821764680779998,2.043893871096,2.177302898988,1.8168497885719999]]]]

Actual:   [[[[0.1356, 0.5962, 0.5879, 0.0778], [0.3838, 0.9394, 1.0147, 0.796]], [[0.8963, 1.1889, 1.4743, 0.6118], [1.3822, 2.0439, 2.1774, 1.8169]]]]

Expected: [[[[0.1356, 0.5962, 0.5879, 0.0778], [0.3838, 0.9394, 1.0147, 0.796]], [[0.8963, 1.1889, 1.4743, 0.6118], [1.3822, 2.0439, 2.1774, 1.8169]]]]