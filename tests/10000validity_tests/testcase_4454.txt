import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add35206 = tf.keras.layers.Input(shape=([2, 2]))
in1Add35206 = tf.keras.layers.Input(shape=([2, 2]))
in0Con22037 = tf.keras.layers.Input(shape=([1, 29]))
in0Up_41052 = tf.keras.layers.Input(shape=([3, 4, 4]))

Add35206 = keras.layers.Add(name = 'Add35206', )([in0Add35206,in1Add35206])
Con71054 = keras.layers.Conv1D(3, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con71054', )(Add35206)
Con22037 = keras.layers.Concatenate(axis=2, name = 'Con22037', )([Con71054,in0Con22037])
Up_41052 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_41052', )(in0Up_41052)
Res65459 = keras.layers.Reshape((3, 32), name = 'Res65459', )(Up_41052)
Dot92537 = keras.layers.Dot(axes=(2, 2), name = 'Dot92537', )([Con22037,Res65459])
model = tf.keras.models.Model(inputs=[in0Add35206,in1Add35206,in0Con22037,in0Up_41052], outputs=Dot92537)
w = model.get_layer('Con71054').get_weights() 
w[0] = np.array([[[0.8335, 0.6779, 0.8063], [0.483, 0.9912, 0.053]], [[0.1117, 0.4345, 0.5751], [0.7494, 0.7013, 0.8059]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con71054').set_weights(w) 
in0Add35206 = tf.constant([[[0.7489, 0.0268], [0.1101, 0.333]]])
in1Add35206 = tf.constant([[[0.6045, 0.7321], [0.191, 0.7412]]])
in0Con22037 = tf.constant([[[0.2626, 0.9614, 0.4645, 0.3158, 0.5299, 0.9623, 0.6551, 0.5385, 0.3688, 0.7803, 0.3932, 0.515, 0.57, 0.6346, 0.7672, 0.1824, 0.7752, 0.5786, 0.4573, 0.5704, 0.9966, 0.567, 0.542, 0.4435, 0.0912, 0.7798, 0.1497, 0.4791, 0.7945]]])
in0Up_41052 = tf.constant([[[[1.8273, 1.5814, 1.125, 1.4501], [1.4004, 1.8479, 1.49, 1.4746], [1.637, 1.5732, 1.3646, 1.4357], [1.8977, 1.0126, 1.1754, 1.6986]], [[1.3417, 1.7313, 1.254, 1.6476], [1.7044, 1.6361, 1.8023, 1.7169], [1.1679, 1.6235, 1.9913, 1.27], [1.624, 1.3257, 1.6031, 1.8007]], [[1.0146, 1.6463, 1.9692, 1.2165], [1.9801, 1.3889, 1.9502, 1.1534], [1.7469, 1.304, 1.3619, 1.3744], [1.0396, 1.3074, 1.5559, 1.3058]]]])
print (np.array2string(model.predict([in0Add35206,in1Add35206,in0Con22037,in0Up_41052],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot92537.png')

LAdd35206 = add_layer([[[[0.7489, 0.0268], [0.1101, 0.333]]], [[[0.6045, 0.7321], [0.191, 0.7412]]]], Add35206), 
LCon71054 = conv1D_layer(Add35206, 2,[[[0.8335, 0.6779, 0.8063], [0.483, 0.9912, 0.053]], [[0.1117, 0.4345, 0.5751], [0.7494, 0.7013, 0.8059]]],[0, 0, 0], 1, false, 1, Con71054), 
LCon22037 = concatenate_layer([Con71054,[[[0.2626, 0.9614, 0.4645, 0.3158, 0.5299, 0.9623, 0.6551, 0.5385, 0.3688, 0.7803, 0.3932, 0.515, 0.57, 0.6346, 0.7672, 0.1824, 0.7752, 0.5786, 0.4573, 0.5704, 0.9966, 0.567, 0.542, 0.4435, 0.0912, 0.7798, 0.1497, 0.4791, 0.7945]]]], 2, Con22037), 
LUp_41052 = up_sampling2D_layer([[[[1.8273, 1.5814, 1.125, 1.4501], [1.4004, 1.8479, 1.49, 1.4746], [1.637, 1.5732, 1.3646, 1.4357], [1.8977, 1.0126, 1.1754, 1.6986]], [[1.3417, 1.7313, 1.254, 1.6476], [1.7044, 1.6361, 1.8023, 1.7169], [1.1679, 1.6235, 1.9913, 1.27], [1.624, 1.3257, 1.6031, 1.8007]], [[1.0146, 1.6463, 1.9692, 1.2165], [1.9801, 1.3889, 1.9502, 1.1534], [1.7469, 1.304, 1.3619, 1.3744], [1.0396, 1.3074, 1.5559, 1.3058]]]], 1, 2, Up_41052), 
LRes65459 = reshape_layer(Up_41052, [3, 32], Res65459), 
LDot92537 = dot_layer(Con22037,Res65459, 2, 2, Dot92537), 
exec_layers([LAdd35206,LCon71054,LCon22037,LUp_41052,LRes65459,LDot92537],["Add35206","Con71054","Con22037","Up_41052","Res65459","Dot92537"],Dot92537,"Dot92537")

Actual (Unparsed): [[[35.3997411, 35.5973921, 34.2884509]]]

Expected (Unparsed): [[[35.399741337515,35.59739272888999,34.288451023247006]]]

Actual:   [[[35.3998, 35.5974, 34.2885]]]

Expected: [[[35.3998, 35.5974, 34.2885]]]