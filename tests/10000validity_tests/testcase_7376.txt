import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave76539 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add19655 = tf.keras.layers.Input(shape=([2, 2]))
in1Add19655 = tf.keras.layers.Input(shape=([2, 2]))

Ave76539 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave76539', )(in0Ave76539)
Zer34145 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer34145', )(Ave76539)
Add19655 = keras.layers.Add(name = 'Add19655', )([in0Add19655,in1Add19655])
Res27067 = keras.layers.Reshape((2, 2, 1), name = 'Res27067', )(Add19655)
Cro61542 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro61542', )(Res27067)
Add83726 = keras.layers.Add(name = 'Add83726', )([Zer34145,Cro61542])
Res88997 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res88997', )(Add83726)
Con34968 = keras.layers.Conv3DTranspose(3, (2, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con34968', )(Res88997)
model = tf.keras.models.Model(inputs=[in0Ave76539,in0Add19655,in1Add19655], outputs=Con34968)
w = model.get_layer('Con34968').get_weights() 
w[0] = np.array([[[[[0.8055], [0.7445], [0.0574]]]], [[[[0.578], [0.5681], [0.4764]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con34968').set_weights(w) 
in0Ave76539 = tf.constant([[[[1.3551]]]])
in0Add19655 = tf.constant([[[0.2558, 0.1596], [0.6306, 0.2437]]])
in1Add19655 = tf.constant([[[0.9342, 0.9109], [0.5025, 0.8048]]])
print (np.array2string(model.predict([in0Ave76539,in0Add19655,in1Add19655],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con34968.png')

LAve76539 = average_pooling2D_layer([[[[1.3551]]]], 1, 1, 1, 1, false, Ave76539), 
LZer34145 = zero_padding2D_layer(Ave76539, 1, 0, 1, 0, Zer34145), 
LAdd19655 = add_layer([[[[0.2558, 0.1596], [0.6306, 0.2437]]], [[[0.9342, 0.9109], [0.5025, 0.8048]]]], Add19655), 
LRes27067 = reshape_layer(Add19655, [2, 2, 1], Res27067), 
LCro61542 = cropping2D_layer(Res27067, 0, 0, 0, 0, Cro61542), 
LAdd83726 = add_layer([Zer34145,Cro61542], Add83726), 
LRes88997 = reshape_layer(Add83726, [2, 2, 1, 1], Res88997), 
LCon34968 = conv3D_transpose_layer(Res88997, 2, 1, 1,[[[[[0.8055], [0.7445], [0.0574]]]], [[[[0.578], [0.5681], [0.4764]]]]],[0, 0, 0], 1, 1, 1, false, Con34968), 
exec_layers([LAve76539,LZer34145,LAdd19655,LRes27067,LCro61542,LAdd83726,LRes88997,LCon34968],["Ave76539","Zer34145","Add19655","Res27067","Cro61542","Add83726","Res88997","Con34968"],Con34968,"Con34968")

Actual (Unparsed): [[[[[0.9585450, 0.8859550, 0.0683060]], [[0.8622878, 0.7969873, 0.0614467]]], [[[1.6005320, 1.5196319, 0.6319559]], [[2.5548488, 2.3976313, 0.6479528]]], [[[0.6549318, 0.6437141, 0.5398088]], [[1.3892808, 1.3654852, 1.1450750]]]]]

Expected (Unparsed): [[[[[0.958545,0.885955,0.06830599999999999]],[[0.86228775,0.79698725,0.0614467]]],[[[1.60053205,1.51963195,0.63195594]],[[2.5548488000000003,2.39763125,0.64795284]]],[[[0.6549318,0.64371411,0.53980884]],[[1.3892807999999999,1.3654851600000002,1.14507504]]]]]

Actual:   [[[[[0.9586, 0.886, 0.0684]], [[0.8623, 0.797, 0.0615]]], [[[1.6006, 1.5197, 0.632]], [[2.5549, 2.3977, 0.648]]], [[[0.655, 0.6438, 0.5399]], [[1.3893, 1.3655, 1.1451]]]]]

Expected: [[[[[0.9586, 0.886, 0.0684]], [[0.8623, 0.797, 0.0615]]], [[[1.6006, 1.5197, 0.632]], [[2.5549, 2.3977, 0.648]]], [[[0.655, 0.6438, 0.5399]], [[1.3893, 1.3655, 1.1451]]]]]