import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min2753 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min2753 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave41236 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave41236 = tf.keras.layers.Input(shape=([2, 1]))
in0Con52865 = tf.keras.layers.Input(shape=([2, 1]))

Min2753 = keras.layers.Minimum(name = 'Min2753', )([in0Min2753,in1Min2753])
Res83184 = keras.layers.Reshape((2, 2), name = 'Res83184', )(Min2753)
Ave41236 = keras.layers.Average(name = 'Ave41236', )([in0Ave41236,in1Ave41236])
Con52865 = keras.layers.Concatenate(axis=2, name = 'Con52865', )([Ave41236,in0Con52865])
Mul24622 = keras.layers.Multiply(name = 'Mul24622', )([Res83184,Con52865])
model = tf.keras.models.Model(inputs=[in0Min2753,in1Min2753,in0Ave41236,in1Ave41236,in0Con52865], outputs=Mul24622)
in0Min2753 = tf.constant([[[[0.9661], [0.234]], [[0.2627], [0.9314]]]])
in1Min2753 = tf.constant([[[[0.356], [0.5282]], [[0.6776], [0.1351]]]])
in0Ave41236 = tf.constant([[[0.2781], [0.1478]]])
in1Ave41236 = tf.constant([[[0.1799], [0.841]]])
in0Con52865 = tf.constant([[[0.5344], [0.4915]]])
print (np.array2string(model.predict([in0Min2753,in1Min2753,in0Ave41236,in1Ave41236,in0Con52865],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul24622.png')

LMin2753 = minimum_layer([[[[[0.9661], [0.234]], [[0.2627], [0.9314]]]], [[[[0.356], [0.5282]], [[0.6776], [0.1351]]]]], Min2753), 
LRes83184 = reshape_layer(Min2753, [2, 2], Res83184), 
LAve41236 = average_layer([[[[0.2781], [0.1478]]], [[[0.1799], [0.841]]]], Ave41236), 
LCon52865 = concatenate_layer([Ave41236,[[[0.5344], [0.4915]]]], 2, Con52865), 
LMul24622 = multiply_layer([Res83184,Con52865], Mul24622), 
exec_layers([LMin2753,LRes83184,LAve41236,LCon52865,LMul24622],["Min2753","Res83184","Ave41236","Con52865","Mul24622"],Mul24622,"Mul24622")

Actual (Unparsed): [[[0.0815240, 0.1250496], [0.1298789, 0.0664017]]]

Expected (Unparsed): [[[0.081524,0.1250496],[0.12987887999999997,0.06640164999999999]]]

Actual:   [[[0.0816, 0.1251], [0.1299, 0.0665]]]

Expected: [[[0.0816, 0.1251], [0.1299, 0.0665]]]