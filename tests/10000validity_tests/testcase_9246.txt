import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_49109 = tf.keras.layers.Input(shape=([4, 1]))
in0Con98574 = tf.keras.layers.Input(shape=([8, 1, 3]))
in0Ave61387 = tf.keras.layers.Input(shape=([1, 1, 2]))

Up_49109 = keras.layers.UpSampling1D(size=(2), name = 'Up_49109', )(in0Up_49109)
Thr55078 = keras.layers.ThresholdedReLU(theta=4.150276866464005, name = 'Thr55078', )(Up_49109)
Res26874 = keras.layers.Reshape((8, 1, 1), name = 'Res26874', )(Thr55078)
Con98574 = keras.layers.Concatenate(axis=3, name = 'Con98574', )([Res26874,in0Con98574])
Ave61387 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave61387', )(in0Ave61387)
ReL34114 = keras.layers.ReLU(max_value=9.408336132005156, negative_slope=4.859224478997569, threshold=6.489133307154431, name = 'ReL34114', )(Ave61387)
Den33041 = keras.layers.Dense(4,name = 'Den33041', )(ReL34114)
Zer30425 = keras.layers.ZeroPadding2D(padding=((7, 0), (0, 0)), name = 'Zer30425', )(Den33041)
Add99483 = keras.layers.Add(name = 'Add99483', )([Con98574,Zer30425])
model = tf.keras.models.Model(inputs=[in0Up_49109,in0Con98574,in0Ave61387], outputs=Add99483)
w = model.get_layer('Den33041').get_weights() 
w[0] = np.array([[0.4112, 0.3759, 0.6321, 0.8644], [0.8159, 0.9178, 0.3729, 0.0002]])
w[1] = np.array([0.0476, 0.8165, 0.1455, 0.2396])
model.get_layer('Den33041').set_weights(w) 
in0Up_49109 = tf.constant([[[1.5118], [1.854], [1.1827], [1.8902]]])
in0Con98574 = tf.constant([[[[0.3639, 0.9007, 0.329]], [[0.9628, 0.8842, 0.7039]], [[0.9745, 0.0134, 0.5663]], [[0.434, 0.3008, 0.5299]], [[0.5243, 0.9647, 0.0581]], [[0.2774, 0.6387, 0.1446]], [[0.4921, 0.354, 0.1217]], [[0.4703, 0.6441, 0.5037]]]])
in0Ave61387 = tf.constant([[[[1.0232, 1.0275]]]])
print (np.array2string(model.predict([in0Up_49109,in0Con98574,in0Ave61387],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add99483.png')

LUp_49109 = up_sampling1D_layer([[[1.5118], [1.854], [1.1827], [1.8902]]], 2, Up_49109), 
LThr55078 = thresholded_relu_layer(Up_49109, 4.150276866464005, Thr55078), 
LRes26874 = reshape_layer(Thr55078, [8, 1, 1], Res26874), 
LCon98574 = concatenate_layer([Res26874,[[[[0.3639, 0.9007, 0.329]], [[0.9628, 0.8842, 0.7039]], [[0.9745, 0.0134, 0.5663]], [[0.434, 0.3008, 0.5299]], [[0.5243, 0.9647, 0.0581]], [[0.2774, 0.6387, 0.1446]], [[0.4921, 0.354, 0.1217]], [[0.4703, 0.6441, 0.5037]]]]], 3, Con98574), 
LAve61387 = average_pooling2D_layer([[[[1.0232, 1.0275]]]], 1, 1, Ave61387), 
LReL34114 = relu_layer(Ave61387, 9.408336132005156, 4.859224478997569, 6.489133307154431, ReL34114), 
LDen33041 = dense_layer(ReL34114, [[0.4112, 0.3759, 0.6321, 0.8644], [0.8159, 0.9178, 0.3729, 0.0002]],[0.0476, 0.8165, 0.1455, 0.2396], Den33041), 
LZer30425 = zero_padding2D_layer(Den33041, 7, 0, 0, 0, Zer30425), 
LAdd99483 = add_layer([Con98574,Zer30425], Add99483), 
exec_layers([LUp_49109,LThr55078,LRes26874,LCon98574,LAve61387,LReL34114,LDen33041,LZer30425,LAdd99483],["Up_49109","Thr55078","Res26874","Con98574","Ave61387","ReL34114","Den33041","Zer30425","Add99483"],Add99483,"Add99483")

Actual (Unparsed): [[[[0.0000000, 0.3639000, 0.9007000, 0.3290000]], [[0.0000000, 0.9628000, 0.8842000, 0.7039000]], [[0.0000000, 0.9745000, 0.0134000, 0.5663000]], [[0.0000000, 0.4340000, 0.3008000, 0.5299000]], [[0.0000000, 0.5243000, 0.9647000, 0.0581000]], [[0.0000000, 0.2774000, 0.6387000, 0.1446000]], [[0.0000000, 0.4921000, 0.3540000, 0.1217000]], [[-32.5273695, -33.0549494, -25.8956061, -22.2206419]]]]

Expected (Unparsed): [[[[0,0.3639,0.9007,0.329]],[[0,0.9628,0.8842,0.7039]],[[0,0.9745,0.0134,0.5663]],[[0,0.434,0.3008,0.5299]],[[0,0.5243,0.9647,0.0581]],[[0,0.2774,0.6387,0.1446]],[[0,0.4921,0.354,0.1217]],[[-32.52736969135953,-33.05494964028732,-25.895606290651074,-22.22064208388567]]]]

Actual:   [[[[0, 0.3639, 0.9007, 0.329]], [[0, 0.9628, 0.8842, 0.7039]], [[0, 0.9745, 0.0134, 0.5663]], [[0, 0.434, 0.3008, 0.5299]], [[0, 0.5243, 0.9647, 0.0581]], [[0, 0.2774, 0.6387, 0.1446]], [[0, 0.4921, 0.354, 0.1217]], [[-32.5273, -33.0549, -25.8956, -22.2206]]]]

Expected: [[[[0, 0.3639, 0.9007, 0.329]], [[0, 0.9628, 0.8842, 0.7039]], [[0, 0.9745, 0.0134, 0.5663]], [[0, 0.434, 0.3008, 0.5299]], [[0, 0.5243, 0.9647, 0.0581]], [[0, 0.2774, 0.6387, 0.1446]], [[0, 0.4921, 0.354, 0.1217]], [[-32.5273, -33.0549, -25.8956, -22.2206]]]]