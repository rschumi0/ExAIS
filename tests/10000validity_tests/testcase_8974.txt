import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add45505 = tf.keras.layers.Input(shape=([1, 1]))
in1Add45505 = tf.keras.layers.Input(shape=([1, 1]))
in0Con59673 = tf.keras.layers.Input(shape=([6, 19]))
in0Zer20544 = tf.keras.layers.Input(shape=([4, 3, 4]))
in0Max45792 = tf.keras.layers.Input(shape=([2, 1]))
in1Max45792 = tf.keras.layers.Input(shape=([2, 1]))
in0Con85720 = tf.keras.layers.Input(shape=([6, 19]))

Add45505 = keras.layers.Add(name = 'Add45505', )([in0Add45505,in1Add45505])
Zer4015 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer4015', )(Add45505)
Con59673 = keras.layers.Concatenate(axis=2, name = 'Con59673', )([Zer4015,in0Con59673])
Zer20544 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer20544', )(in0Zer20544)
Res96254 = keras.layers.Reshape((6, 20), name = 'Res96254', )(Zer20544)
Max45792 = keras.layers.Maximum(name = 'Max45792', )([in0Max45792,in1Max45792])
Zer55058 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer55058', )(Max45792)
Con85720 = keras.layers.Concatenate(axis=2, name = 'Con85720', )([Zer55058,in0Con85720])
Max70055 = keras.layers.Maximum(name = 'Max70055', )([Res96254,Con85720])
Mul33724 = keras.layers.Multiply(name = 'Mul33724', )([Con59673,Max70055])
model = tf.keras.models.Model(inputs=[in0Add45505,in1Add45505,in0Con59673,in0Zer20544,in0Max45792,in1Max45792,in0Con85720], outputs=Mul33724)
in0Add45505 = tf.constant([[[0.2905]]])
in1Add45505 = tf.constant([[[0.0897]]])
in0Con59673 = tf.constant([[[0.0214, 0.9615, 0.885, 0.5165, 0.0501, 0.6543, 0.6254, 0.7331, 0.5027, 0.215, 0.7773, 0.8443, 0.1165, 0.0795, 0.2624, 0.3587, 0.6255, 0.9766, 0.8511], [0.832, 0.2626, 0.2837, 0.7646, 0.3167, 0.5998, 0.1754, 0.8828, 0.3196, 0.0929, 0.8044, 0.3105, 0.0034, 0.4752, 0.5663, 0.9671, 0.9459, 0.4469, 0.0953], [0.8139, 0.6314, 0.9463, 0.0137, 0.3089, 0.9902, 0.6557, 0.6142, 0.6876, 0.7266, 0.2952, 0.595, 0.7097, 0.8767, 0.6872, 0.6847, 0.5826, 0.0257, 0.5378], [0.496, 0.8736, 0.8795, 0.3725, 0.2309, 0.3581, 0.4335, 0.0904, 0.9208, 0.9162, 0.811, 0.1541, 0.7316, 0.7849, 0.9522, 0.5222, 0.4897, 0.7019, 0.7305], [0.0473, 0.9914, 0.7364, 0.7401, 0.2117, 0.8465, 0.8896, 0.9575, 0.757, 0.578, 0.8724, 0.7129, 0.9709, 0.4488, 0.8172, 0.9245, 0.1404, 0.0209, 0.0674], [0.3455, 0.9567, 0.7632, 0.6007, 0.6554, 0.4571, 0.1217, 0.0894, 0.5846, 0.4336, 0.3394, 0.0802, 0.9038, 0.0988, 0.972, 0.2814, 0.0343, 0.2051, 0.4838]]])
in0Zer20544 = tf.constant([[[[1.8115, 1.4785, 1.8136, 1.5556], [1.1974, 1.8384, 1.7768, 1.0027], [1.729, 1.6694, 1.7085, 1.4025]], [[1.2359, 1.9882, 1.0248, 1.2929], [1.1054, 1.4965, 1.7344, 1.1413], [1.389, 1.6647, 1.5879, 1.1663]], [[1.7566, 1.4453, 1.9767, 1.51], [1.7749, 1.0632, 1.3946, 1.9859], [1.4525, 1.7384, 1.9473, 1.3685]], [[1.1165, 1.5154, 1.2182, 1.3332], [1.4631, 1.5985, 1.7821, 1.7095], [1.0604, 1.7188, 1.7943, 1.6678]]]])
in0Max45792 = tf.constant([[[0.671], [0.0985]]])
in1Max45792 = tf.constant([[[0.3777], [0.8228]]])
in0Con85720 = tf.constant([[[0.66, 0.3683, 0.8667, 0.8023, 0.5622, 0.4852, 0.3723, 0.8307, 0.9596, 0.274, 0.6832, 0.2982, 0.4669, 0.6937, 0.2843, 0.144, 0.7238, 0.026, 0.8116], [0.2928, 0.6466, 0.2607, 0.0703, 0.1, 0.0731, 0.3849, 0.6069, 0.5329, 0.9699, 0.6918, 0.6676, 0.2324, 0.2029, 0.5984, 0.3517, 0.7383, 0.2461, 0.6239], [0.778, 0.588, 0.0987, 0.1133, 0.1228, 0.6992, 0.112, 0.0145, 0.4574, 0.4345, 0.3926, 0.517, 0.4182, 0.0111, 0.9364, 0.6407, 0.8739, 0.4681, 0.6771], [0.9308, 0.9216, 0.2316, 0.185, 0.2551, 0.7368, 0.4286, 0.8425, 0.3285, 0.0344, 0.4937, 0.9355, 0.9975, 0.1509, 0.2824, 0.2558, 0.5022, 0.0537, 0.8621], [0.4851, 0.9084, 0.9004, 0.3853, 0.8451, 0.6482, 0.1255, 0.9665, 0.2424, 0.6432, 0.4159, 0.2829, 0.4084, 0.7965, 0.3509, 0.6971, 0.3437, 0.7341, 0.9282], [0.0607, 0.7108, 0.5545, 0.6765, 0.9991, 0.6864, 0.9976, 0.5632, 0.4025, 0.1888, 0.8901, 0.4451, 0.0481, 0.3197, 0.9354, 0.3821, 0.7688, 0.3268, 0.9251]]])
print (np.array2string(model.predict([in0Add45505,in1Add45505,in0Con59673,in0Zer20544,in0Max45792,in1Max45792,in0Con85720],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul33724.png')

LAdd45505 = add_layer([[[[0.2905]]], [[[0.0897]]]], Add45505), 
LZer4015 = zero_padding1D_layer(Add45505, 5, 0, Zer4015), 
LCon59673 = concatenate_layer([Zer4015,[[[0.0214, 0.9615, 0.885, 0.5165, 0.0501, 0.6543, 0.6254, 0.7331, 0.5027, 0.215, 0.7773, 0.8443, 0.1165, 0.0795, 0.2624, 0.3587, 0.6255, 0.9766, 0.8511], [0.832, 0.2626, 0.2837, 0.7646, 0.3167, 0.5998, 0.1754, 0.8828, 0.3196, 0.0929, 0.8044, 0.3105, 0.0034, 0.4752, 0.5663, 0.9671, 0.9459, 0.4469, 0.0953], [0.8139, 0.6314, 0.9463, 0.0137, 0.3089, 0.9902, 0.6557, 0.6142, 0.6876, 0.7266, 0.2952, 0.595, 0.7097, 0.8767, 0.6872, 0.6847, 0.5826, 0.0257, 0.5378], [0.496, 0.8736, 0.8795, 0.3725, 0.2309, 0.3581, 0.4335, 0.0904, 0.9208, 0.9162, 0.811, 0.1541, 0.7316, 0.7849, 0.9522, 0.5222, 0.4897, 0.7019, 0.7305], [0.0473, 0.9914, 0.7364, 0.7401, 0.2117, 0.8465, 0.8896, 0.9575, 0.757, 0.578, 0.8724, 0.7129, 0.9709, 0.4488, 0.8172, 0.9245, 0.1404, 0.0209, 0.0674], [0.3455, 0.9567, 0.7632, 0.6007, 0.6554, 0.4571, 0.1217, 0.0894, 0.5846, 0.4336, 0.3394, 0.0802, 0.9038, 0.0988, 0.972, 0.2814, 0.0343, 0.2051, 0.4838]]]], 2, Con59673), 
LZer20544 = zero_padding2D_layer([[[[1.8115, 1.4785, 1.8136, 1.5556], [1.1974, 1.8384, 1.7768, 1.0027], [1.729, 1.6694, 1.7085, 1.4025]], [[1.2359, 1.9882, 1.0248, 1.2929], [1.1054, 1.4965, 1.7344, 1.1413], [1.389, 1.6647, 1.5879, 1.1663]], [[1.7566, 1.4453, 1.9767, 1.51], [1.7749, 1.0632, 1.3946, 1.9859], [1.4525, 1.7384, 1.9473, 1.3685]], [[1.1165, 1.5154, 1.2182, 1.3332], [1.4631, 1.5985, 1.7821, 1.7095], [1.0604, 1.7188, 1.7943, 1.6678]]]], 1, 1, 1, 1, Zer20544), 
LRes96254 = reshape_layer(Zer20544, [6, 20], Res96254), 
LMax45792 = maximum_layer([[[[0.671], [0.0985]]], [[[0.3777], [0.8228]]]], Max45792), 
LZer55058 = zero_padding1D_layer(Max45792, 4, 0, Zer55058), 
LCon85720 = concatenate_layer([Zer55058,[[[0.66, 0.3683, 0.8667, 0.8023, 0.5622, 0.4852, 0.3723, 0.8307, 0.9596, 0.274, 0.6832, 0.2982, 0.4669, 0.6937, 0.2843, 0.144, 0.7238, 0.026, 0.8116], [0.2928, 0.6466, 0.2607, 0.0703, 0.1, 0.0731, 0.3849, 0.6069, 0.5329, 0.9699, 0.6918, 0.6676, 0.2324, 0.2029, 0.5984, 0.3517, 0.7383, 0.2461, 0.6239], [0.778, 0.588, 0.0987, 0.1133, 0.1228, 0.6992, 0.112, 0.0145, 0.4574, 0.4345, 0.3926, 0.517, 0.4182, 0.0111, 0.9364, 0.6407, 0.8739, 0.4681, 0.6771], [0.9308, 0.9216, 0.2316, 0.185, 0.2551, 0.7368, 0.4286, 0.8425, 0.3285, 0.0344, 0.4937, 0.9355, 0.9975, 0.1509, 0.2824, 0.2558, 0.5022, 0.0537, 0.8621], [0.4851, 0.9084, 0.9004, 0.3853, 0.8451, 0.6482, 0.1255, 0.9665, 0.2424, 0.6432, 0.4159, 0.2829, 0.4084, 0.7965, 0.3509, 0.6971, 0.3437, 0.7341, 0.9282], [0.0607, 0.7108, 0.5545, 0.6765, 0.9991, 0.6864, 0.9976, 0.5632, 0.4025, 0.1888, 0.8901, 0.4451, 0.0481, 0.3197, 0.9354, 0.3821, 0.7688, 0.3268, 0.9251]]]], 2, Con85720), 
LMax70055 = maximum_layer([Res96254,Con85720], Max70055), 
LMul33724 = multiply_layer([Con59673,Max70055], Mul33724), 
exec_layers([LAdd45505,LZer4015,LCon59673,LZer20544,LRes96254,LMax45792,LZer55058,LCon85720,LMax70055,LMul33724],["Add45505","Zer4015","Con59673","Zer20544","Res96254","Max45792","Zer55058","Con85720","Max70055","Mul33724"],Mul33724,"Mul33724")

Actual (Unparsed): [[[0.0000000, 0.0141240, 0.3541204, 0.7670295, 0.4143879, 0.0281662, 0.3174663, 0.2328364, 0.6089862, 0.4823909, 0.0589100, 0.5310514, 0.2517703, 0.0543938, 0.0551491, 0.0746003, 0.0516528, 0.4527369, 0.0253916, 0.6907528], [0.0000000, 0.2436096, 0.1697972, 0.0739606, 1.3850728, 0.4682410, 1.0877972, 0.2728523, 1.0570647, 0.5875526, 0.1650647, 0.8065719, 0.5368545, 0.0056760, 0.8118792, 0.7942357, 0.3401291, 0.6983580, 0.1099821, 0.0594577], [0.0000000, 0.6332142, 0.3712632, 0.0933998, 0.0169318, 0.6141550, 1.0147569, 0.8477545, 0.6789367, 1.0289934, 1.2602150, 0.3369117, 0.8264551, 1.1814376, 1.3921119, 0.8014814, 0.4386873, 0.5091341, 0.0120302, 0.3641444], [0.0000000, 0.4616768, 0.8051098, 0.2036922, 0.6543335, 0.3337198, 0.7078562, 0.6545850, 0.1604510, 0.9789945, 1.2777325, 1.6105649, 0.2238302, 1.2718134, 1.5284358, 1.3030857, 0.1335788, 0.2459273, 0.0376920, 0.6297640], [0.0000000, 0.0229452, 0.9005878, 0.6630546, 0.8263217, 0.3208102, 1.0312062, 1.1860147, 1.4009182, 1.2100646, 1.0300538, 1.4913677, 0.7559591, 1.6687829, 0.8052818, 1.3629261, 0.6444689, 0.0482555, 0.0153427, 0.0625607], [0.3128285, 0.0209718, 0.6800224, 0.4231944, 0.4063736, 0.6548101, 0.3137534, 0.1214079, 0.0503501, 0.2353015, 0.0818637, 0.3020999, 0.0356970, 0.0434728, 0.0315864, 0.9092088, 0.1075229, 0.0263698, 0.0670267, 0.4475634]]]

Expected (Unparsed): [[[0,0.014124,0.35412045000000003,0.7670295,0.41438794999999995,0.028166220000000002,0.31746636,0.23283642,0.60898617,0.48239092000000006,0.058910000000000004,0.53105136,0.25177026,0.05439385,0.05514915,0.07460032000000001,0.0516528,0.45273689999999994,0.0253916,0.69075276],[0,0.24360959999999998,0.16979715999999997,0.07396058999999999,1.3850729,0.46824094999999993,1.08779728,0.27285224,1.05706472,0.58755264,0.16506472,0.8065718799999999,0.5368545,0.00567596,0.8118792,0.7942357500000001,0.34012907,0.6983579699999999,0.10998209,0.05945767],[0,0.6332142,0.37126319999999996,0.09339981,0.016931830000000002,0.61415498,1.01475696,0.8477545299999999,0.67893668,1.0289933999999998,1.26021504,0.33691176,0.8264549999999999,1.18143759,1.3921119300000002,0.8014813599999999,0.43868729,0.50913414,0.012030170000000001,0.36414438],[0,0.4616768,0.80510976,0.2036922,0.6543335,0.33371976999999997,0.70785627,0.654585,0.16045095999999998,0.9789945599999998,1.27773252,1.6105649000000002,0.22383024999999995,1.27181344,1.5284357700000002,1.3030857,0.13357876000000002,0.24592734,0.037692029999999994,0.62976405],[0.0,0.02294523,0.90058776,0.6630545600000001,0.82632165,0.32081018,1.0312063,1.18601472,1.4009182500000001,1.2100645,1.0300538,1.4913678,0.75595916,1.6687829200000002,0.8052818399999999,1.36292616,0.64446895,0.048255479999999996,0.015342689999999999,0.06256068000000001],[0.31282856,0.020971849999999997,0.6800223599999999,0.42319439999999997,0.40637355000000003,0.6548101399999999,0.31375344,0.12140792,0.05035008,0.23530150000000002,0.08186368,0.30209993999999996,0.035697019999999996,0.04347278,0.03158636,0.9092088,0.10752294,0.02636984,0.06702667999999999,0.44756338]]]

Actual:   [[[0, 0.0142, 0.3542, 0.7671, 0.4144, 0.0282, 0.3175, 0.2329, 0.609, 0.4824, 0.059, 0.5311, 0.2518, 0.0544, 0.0552, 0.0747, 0.0517, 0.4528, 0.0254, 0.6908], [0, 0.2437, 0.1698, 0.074, 1.3851, 0.4683, 1.0878, 0.2729, 1.0571, 0.5876, 0.1651, 0.8066, 0.5369, 0.0057, 0.8119, 0.7943, 0.3402, 0.6984, 0.11, 0.0595], [0, 0.6333, 0.3713, 0.0934, 0.017, 0.6142, 1.0148, 0.8478, 0.679, 1.029, 1.2603, 0.337, 0.8265, 1.1815, 1.3922, 0.8015, 0.4387, 0.5092, 0.0121, 0.3642], [0, 0.4617, 0.8052, 0.2037, 0.6544, 0.3338, 0.7079, 0.6546, 0.1605, 0.979, 1.2778, 1.6106, 0.2239, 1.2719, 1.5285, 1.3031, 0.1336, 0.246, 0.0377, 0.6298], [0, 0.023, 0.9006, 0.6631, 0.8264, 0.3209, 1.0313, 1.1861, 1.401, 1.2101, 1.0301, 1.4914, 0.756, 1.6688, 0.8053, 1.363, 0.6445, 0.0483, 0.0154, 0.0626], [0.3129, 0.021, 0.6801, 0.4232, 0.4064, 0.6549, 0.3138, 0.1215, 0.0504, 0.2354, 0.0819, 0.3021, 0.0357, 0.0435, 0.0316, 0.9093, 0.1076, 0.0264, 0.0671, 0.4476]]]

Expected: [[[0, 0.0142, 0.3542, 0.7671, 0.4144, 0.0282, 0.3175, 0.2329, 0.609, 0.4824, 0.059, 0.5311, 0.2518, 0.0544, 0.0552, 0.0747, 0.0517, 0.4528, 0.0254, 0.6908], [0, 0.2437, 0.1698, 0.074, 1.3851, 0.4683, 1.0878, 0.2729, 1.0571, 0.5876, 0.1651, 0.8066, 0.5369, 0.0057, 0.8119, 0.7943, 0.3402, 0.6984, 0.11, 0.0595], [0, 0.6333, 0.3713, 0.0934, 0.017, 0.6142, 1.0148, 0.8478, 0.679, 1.029, 1.2603, 0.337, 0.8265, 1.1815, 1.3922, 0.8015, 0.4387, 0.5092, 0.0121, 0.3642], [0, 0.4617, 0.8052, 0.2037, 0.6544, 0.3338, 0.7079, 0.6546, 0.1605, 0.979, 1.2778, 1.6106, 0.2239, 1.2719, 1.5285, 1.3031, 0.1336, 0.246, 0.0377, 0.6298], [0, 0.023, 0.9006, 0.6631, 0.8264, 0.3209, 1.0313, 1.1861, 1.401, 1.2101, 1.0301, 1.4914, 0.756, 1.6688, 0.8053, 1.363, 0.6445, 0.0483, 0.0154, 0.0626], [0.3129, 0.021, 0.6801, 0.4232, 0.4064, 0.6549, 0.3138, 0.1215, 0.0504, 0.2354, 0.0819, 0.3021, 0.0357, 0.0435, 0.0316, 0.9093, 0.1076, 0.0264, 0.0671, 0.4476]]]