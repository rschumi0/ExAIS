import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min67956 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Min67956 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Min67956 = keras.layers.Minimum(name = 'Min67956', )([in0Min67956,in1Min67956])
Res77177 = keras.layers.Reshape((1, 1, 2), name = 'Res77177', )(Min67956)
Cro64101 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro64101', )(Res77177)
Sof13274 = keras.layers.Softmax(axis=1, name = 'Sof13274', )(Cro64101)
Res58309 = keras.layers.Reshape((1, 2), name = 'Res58309', )(Sof13274)
LST91876 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST91876', )(Res58309)
model = tf.keras.models.Model(inputs=[in0Min67956,in1Min67956], outputs=LST91876)
w = model.get_layer('LST91876').get_weights() 
w[0] = np.array([[7, 8, 4, 9, 9, 1, 1, 1, 6, 9, 7, 9], [2, 3, 6, 9, 2, 3, 2, 9, 4, 9, 9, 4]])
w[1] = np.array([[2, 3, 5, 6, 7, 3, 6, 2, 4, 8, 5, 9], [1, 5, 4, 1, 7, 6, 1, 6, 6, 6, 4, 3], [7, 5, 3, 10, 7, 4, 2, 10, 5, 4, 10, 1]])
w[2] = np.array([6, 3, 6, 10, 8, 7, 4, 4, 2, 5, 5, 5])
model.get_layer('LST91876').set_weights(w) 
in0Min67956 = tf.constant([[[[[0.1715], [0.6799]]]]])
in1Min67956 = tf.constant([[[[[0.6061], [0.8889]]]]])
print (np.array2string(model.predict([in0Min67956,in1Min67956],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST91876.png')

LMin67956 = minimum_layer([[[[[[0.1715], [0.6799]]]]], [[[[[0.6061], [0.8889]]]]]], Min67956), 
LRes77177 = reshape_layer(Min67956, [1, 1, 2], Res77177), 
LCro64101 = cropping2D_layer(Res77177, 0, 0, 0, 0, Cro64101), 
LSof13274 = softmax_layer(Cro64101, 1, Sof13274), 
LRes58309 = reshape_layer(Sof13274, [1, 2], Res58309), 
LLST91876 = lstm_layer(Res58309,[[7, 8, 4, 9, 9, 1, 1, 1, 6, 9, 7, 9], [2, 3, 6, 9, 2, 3, 2, 9, 4, 9, 9, 4]],[[2, 3, 5, 6, 7, 3, 6, 2, 4, 8, 5, 9], [1, 5, 4, 1, 7, 6, 1, 6, 6, 6, 4, 3], [7, 5, 3, 10, 7, 4, 2, 10, 5, 4, 10, 1]],[6, 3, 6, 10, 8, 7, 4, 4, 2, 5, 5, 5], LST91876), 
exec_layers([LMin67956,LRes77177,LCro64101,LSof13274,LRes58309,LLST91876],["Min67956","Res77177","Cro64101","Sof13274","Res58309","LST91876"],LST91876,"LST91876")

Actual (Unparsed): [[0.7615933, 0.7615938, 0.7615941]]

Expected (Unparsed): [[0.7615933289646265,0.7615938061570439,0.7615940970631083]]

Actual:   [[0.7616, 0.7616, 0.7616]]

Expected: [[0.7616, 0.7616, 0.7616]]