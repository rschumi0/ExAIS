import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Bat53979 = tf.keras.layers.Input(shape=([1, 1]))
in0Con99591 = tf.keras.layers.Input(shape=([1, 3]))
in0Add57092 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add57092 = tf.keras.layers.Input(shape=([1, 2, 1]))

Bat53979 = keras.layers.BatchNormalization(axis=1, epsilon=0.8649539288334162,  name = 'Bat53979', )(in0Bat53979)
Con99591 = keras.layers.Concatenate(axis=2, name = 'Con99591', )([Bat53979,in0Con99591])
Add57092 = keras.layers.Add(name = 'Add57092', )([in0Add57092,in1Add57092])
Res12856 = keras.layers.Reshape((1, 2), name = 'Res12856', )(Add57092)
Loc19477 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc19477', )(Res12856)
Max74870 = keras.layers.Maximum(name = 'Max74870', )([Con99591,Loc19477])
Up_93489 = keras.layers.UpSampling1D(size=(2), name = 'Up_93489', )(Max74870)
model = tf.keras.models.Model(inputs=[in0Bat53979,in0Con99591,in0Add57092,in1Add57092], outputs=Up_93489)
w = model.get_layer('Bat53979').get_weights() 
w[0] = np.array([0.3217])
w[1] = np.array([0.6269])
w[2] = np.array([0.1636])
w[3] = np.array([0.3362])
model.get_layer('Bat53979').set_weights(w) 
w = model.get_layer('Loc19477').get_weights() 
w[0] = np.array([[[0.7957, 0.3405, 0.7855, 0.57], [0.5185, 0.1195, 0.2502, 0.0633]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc19477').set_weights(w) 
in0Bat53979 = tf.constant([[[1.3394]]])
in0Con99591 = tf.constant([[[0.1489, 0.8996, 0.1295]]])
in0Add57092 = tf.constant([[[[0.06], [0.3475]]]])
in1Add57092 = tf.constant([[[[0.9491], [0.0111]]]])
print (np.array2string(model.predict([in0Bat53979,in0Con99591,in0Add57092,in1Add57092],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_93489.png')

LBat53979 = batch_normalization_layer([[[1.3394]]], 1, 0.8649539288334162, [0.3217], [0.6269], [0.1636], [0.3362], Bat53979), 
LCon99591 = concatenate_layer([Bat53979,[[[0.1489, 0.8996, 0.1295]]]], 2, Con99591), 
LAdd57092 = add_layer([[[[[0.06], [0.3475]]]], [[[[0.9491], [0.0111]]]]], Add57092), 
LRes12856 = reshape_layer(Add57092, [1, 2], Res12856), 
LLoc19477 = locally_connected1D_layer(Res12856, 1,[[[0.7957, 0.3405, 0.7855, 0.57], [0.5185, 0.1195, 0.2502, 0.0633]]],[[0, 0, 0, 0]], 1, Loc19477), 
LMax74870 = maximum_layer([Con99591,Loc19477], Max74870), 
LUp_93489 = up_sampling1D_layer(Max74870, 2, Up_93489), 
exec_layers([LBat53979,LCon99591,LAdd57092,LRes12856,LLoc19477,LMax74870,LUp_93489],["Bat53979","Con99591","Add57092","Res12856","Loc19477","Max74870","Up_93489"],Up_93489,"Up_93489")

Actual (Unparsed): [[[0.9888750, 0.3864513, 0.8996000, 0.5978864], [0.9888750, 0.3864513, 0.8996000, 0.5978864]]]

Expected (Unparsed): [[[0.98887497,0.38645125,0.8996,0.59788638],[0.98887497,0.38645125,0.8996,0.59788638]]]

Actual:   [[[0.9889, 0.3865, 0.8996, 0.5979], [0.9889, 0.3865, 0.8996, 0.5979]]]

Expected: [[[0.9889, 0.3865, 0.8996, 0.5979], [0.9889, 0.3865, 0.8996, 0.5979]]]