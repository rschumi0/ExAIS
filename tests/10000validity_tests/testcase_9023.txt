import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add67618 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add67618 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Mul96065 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul96065 = tf.keras.layers.Input(shape=([2, 1]))

Add67618 = keras.layers.Add(name = 'Add67618', )([in0Add67618,in1Add67618])
Res78828 = keras.layers.Reshape((1, 2), name = 'Res78828', )(Add67618)
Glo39161 = keras.layers.GlobalMaxPool1D(name = 'Glo39161', )(Res78828)
Res39044 = keras.layers.Reshape((2, 1), name = 'Res39044', )(Glo39161)
Mul96065 = keras.layers.Multiply(name = 'Mul96065', )([in0Mul96065,in1Mul96065])
Ave98635 = keras.layers.Average(name = 'Ave98635', )([Res39044,Mul96065])
Fla38294 = keras.layers.Flatten(name = 'Fla38294', )(Ave98635)
model = tf.keras.models.Model(inputs=[in0Add67618,in1Add67618,in0Mul96065,in1Mul96065], outputs=Fla38294)
in0Add67618 = tf.constant([[[[0.2349, 0.8788]]]])
in1Add67618 = tf.constant([[[[0.4685, 0.8667]]]])
in0Mul96065 = tf.constant([[[0.2768], [0.7927]]])
in1Mul96065 = tf.constant([[[0.1998], [0.8384]]])
print (np.array2string(model.predict([in0Add67618,in1Add67618,in0Mul96065,in1Mul96065],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla38294.png')

LAdd67618 = add_layer([[[[[0.2349, 0.8788]]]], [[[[0.4685, 0.8667]]]]], Add67618), 
LRes78828 = reshape_layer(Add67618, [1, 2], Res78828), 
LGlo39161 = global_max_pool1D_layer(Res78828, Glo39161), 
LRes39044 = reshape_layer(Glo39161, [2, 1], Res39044), 
LMul96065 = multiply_layer([[[[0.2768], [0.7927]]], [[[0.1998], [0.8384]]]], Mul96065), 
LAve98635 = average_layer([Res39044,Mul96065], Ave98635), 
LFla38294 = flatten_layer(Ave98635, Fla38294), 
exec_layers([LAdd67618,LRes78828,LGlo39161,LRes39044,LMul96065,LAve98635,LFla38294],["Add67618","Res78828","Glo39161","Res39044","Mul96065","Ave98635","Fla38294"],Fla38294,"Fla38294")

Actual (Unparsed): [[0.3793523, 1.2050498]]

Expected (Unparsed): [[0.37935232,1.20504984]]

Actual:   [[0.3794, 1.2051]]

Expected: [[0.3794, 1.2051]]