import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max36733 = tf.keras.layers.Input(shape=([2, 1]))
in1Max36733 = tf.keras.layers.Input(shape=([2, 1]))
in0Min85270 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min85270 = tf.keras.layers.Input(shape=([2, 1, 1]))

Max36733 = keras.layers.Maximum(name = 'Max36733', )([in0Max36733,in1Max36733])
Res10217 = keras.layers.Reshape((2, 1, 1), name = 'Res10217', )(Max36733)
Min85270 = keras.layers.Minimum(name = 'Min85270', )([in0Min85270,in1Min85270])
Add40925 = keras.layers.Add(name = 'Add40925', )([Res10217,Min85270])
Glo46369 = keras.layers.GlobalAveragePooling2D(name = 'Glo46369', )(Add40925)
Res66582 = keras.layers.Reshape((1, 1), name = 'Res66582', )(Glo46369)
Res93684 = keras.layers.Reshape((1, 1, 1), name = 'Res93684', )(Res66582)
Cro89069 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro89069', )(Res93684)
model = tf.keras.models.Model(inputs=[in0Max36733,in1Max36733,in0Min85270,in1Min85270], outputs=Cro89069)
in0Max36733 = tf.constant([[[0.4524], [0.484]]])
in1Max36733 = tf.constant([[[0.1601], [0.5491]]])
in0Min85270 = tf.constant([[[[0.9699]], [[0.4061]]]])
in1Min85270 = tf.constant([[[[0.5132]], [[0.3065]]]])
print (np.array2string(model.predict([in0Max36733,in1Max36733,in0Min85270,in1Min85270],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro89069.png')

LMax36733 = maximum_layer([[[[0.4524], [0.484]]], [[[0.1601], [0.5491]]]], Max36733), 
LRes10217 = reshape_layer(Max36733, [2, 1, 1], Res10217), 
LMin85270 = minimum_layer([[[[[0.9699]], [[0.4061]]]], [[[[0.5132]], [[0.3065]]]]], Min85270), 
LAdd40925 = add_layer([Res10217,Min85270], Add40925), 
LGlo46369 = global_average_pooling2D_layer(Add40925, Glo46369), 
LRes66582 = reshape_layer(Glo46369, [1, 1], Res66582), 
LRes93684 = reshape_layer(Res66582, [1, 1, 1], Res93684), 
LCro89069 = cropping2D_layer(Res93684, 0, 0, 0, 0, Cro89069), 
exec_layers([LMax36733,LRes10217,LMin85270,LAdd40925,LGlo46369,LRes66582,LRes93684,LCro89069],["Max36733","Res10217","Min85270","Add40925","Glo46369","Res66582","Res93684","Cro89069"],Cro89069,"Cro89069")

Actual (Unparsed): [[[[0.9106000]]]]

Expected (Unparsed): [[[[0.9106000000000001]]]]

Actual:   [[[[0.9106]]]]

Expected: [[[[0.9107]]]]