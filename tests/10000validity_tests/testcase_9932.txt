import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave79075 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Glo9366 = tf.keras.layers.Input(shape=([1, 2]))
in0Con69967 = tf.keras.layers.Input(shape=([2]))

Ave79075 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Ave79075', )(in0Ave79075)
Res50966 = keras.layers.Reshape((2, 2), name = 'Res50966', )(Ave79075)
Fla12934 = keras.layers.Flatten(name = 'Fla12934', )(Res50966)
Glo9366 = keras.layers.GlobalAveragePooling1D(name = 'Glo9366', )(in0Glo9366)
Con69967 = keras.layers.Concatenate(axis=1, name = 'Con69967', )([Glo9366,in0Con69967])
Sub83563 = keras.layers.Subtract(name = 'Sub83563', )([Fla12934,Con69967])
model = tf.keras.models.Model(inputs=[in0Ave79075,in0Glo9366,in0Con69967], outputs=Sub83563)
in0Ave79075 = tf.constant([[[[1.1492, 1.3802]], [[1.0409, 1.5982]]]])
in0Glo9366 = tf.constant([[[1.1105, 1.0539]]])
in0Con69967 = tf.constant([[0.0537, 0.664]])
print (np.array2string(model.predict([in0Ave79075,in0Glo9366,in0Con69967],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub83563.png')

LAve79075 = average_pooling2D_layer([[[[1.1492, 1.3802]], [[1.0409, 1.5982]]]], 1, 1, 1, 1, true, Ave79075), 
LRes50966 = reshape_layer(Ave79075, [2, 2], Res50966), 
LFla12934 = flatten_layer(Res50966, Fla12934), 
LGlo9366 = global_average_pooling1D_layer([[[1.1105, 1.0539]]], Glo9366), 
LCon69967 = concatenate_layer([Glo9366,[[0.0537, 0.664]]], 1, Con69967), 
LSub83563 = subtract_layer(Fla12934,Con69967, Sub83563), 
exec_layers([LAve79075,LRes50966,LFla12934,LGlo9366,LCon69967,LSub83563],["Ave79075","Res50966","Fla12934","Glo9366","Con69967","Sub83563"],Sub83563,"Sub83563")

Actual (Unparsed): [[0.0387000, 0.3263000, 0.9872000, 0.9342000]]

Expected (Unparsed): [[0.03869999999999996,0.32630000000000003,0.9872,0.9342]]

Actual:   [[0.0387, 0.3263, 0.9872, 0.9342]]

Expected: [[0.0387, 0.3264, 0.9872, 0.9342]]