import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer21016 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Sub43879 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub43879 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con32636 = tf.keras.layers.Input(shape=([3, 3, 2]))
in0Ave53585 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave53585 = tf.keras.layers.Input(shape=([1, 1]))
in0Con50734 = tf.keras.layers.Input(shape=([3, 11]))
in0Min2256 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min2256 = tf.keras.layers.Input(shape=([2, 1, 1]))

Zer21016 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer21016', )(in0Zer21016)
Res65721 = keras.layers.Reshape((3, 3, 4), name = 'Res65721', )(Zer21016)
Sub43879 = keras.layers.Subtract(name = 'Sub43879', )([in0Sub43879,in1Sub43879])
Zer18660 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer18660', )(Sub43879)
Con32636 = keras.layers.Concatenate(axis=3, name = 'Con32636', )([Zer18660,in0Con32636])
Add28184 = keras.layers.Add(name = 'Add28184', )([Res65721,Con32636])
Res4127 = keras.layers.Reshape((3, 12), name = 'Res4127', )(Add28184)
Ave53585 = keras.layers.Average(name = 'Ave53585', )([in0Ave53585,in1Ave53585])
Zer76223 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer76223', )(Ave53585)
Con50734 = keras.layers.Concatenate(axis=2, name = 'Con50734', )([Zer76223,in0Con50734])
Sub9821 = keras.layers.Subtract(name = 'Sub9821', )([Res4127,Con50734])
Res73007 = keras.layers.Reshape((3, 12, 1), name = 'Res73007', )(Sub9821)
Min2256 = keras.layers.Minimum(name = 'Min2256', )([in0Min2256,in1Min2256])
Zer34560 = keras.layers.ZeroPadding2D(padding=((1, 0), (11, 0)), name = 'Zer34560', )(Min2256)
Add59471 = keras.layers.Add(name = 'Add59471', )([Res73007,Zer34560])
model = tf.keras.models.Model(inputs=[in0Zer21016,in0Sub43879,in1Sub43879,in0Con32636,in0Ave53585,in1Ave53585,in0Con50734,in0Min2256,in1Min2256], outputs=Add59471)
in0Zer21016 = tf.constant([[[[[1.8431], [1.2854]]]]])
in0Sub43879 = tf.constant([[[[0.2758, 0.4962], [0.8216, 0.2972]], [[0.3582, 0.614], [0.2724, 0.1038]]]])
in1Sub43879 = tf.constant([[[[0.7747, 0.9908], [0.5676, 0.8211]], [[0.2771, 0.3621], [0.4139, 0.4898]]]])
in0Con32636 = tf.constant([[[[0.7026, 0.6812], [0.2008, 0.8549], [0.122, 0.0778]], [[0.0512, 0.5205], [0.9038, 0.8185], [0.9112, 0.7734]], [[0.7202, 0.1127], [0.6149, 0.1888], [0.0525, 0.8026]]]])
in0Ave53585 = tf.constant([[[0.0432]]])
in1Ave53585 = tf.constant([[[0.1339]]])
in0Con50734 = tf.constant([[[0.4855, 0.5038, 0.4874, 0.0425, 0.8621, 0.4749, 0.6884, 0.6253, 0.8374, 0.6585, 0.84], [0.5569, 0.6103, 0.1282, 0.9703, 0.0105, 0.5934, 0.4116, 0.0954, 0.5808, 0.6875, 0.8414], [0.0861, 0.4387, 0.4183, 0.3465, 0.2244, 0.3406, 0.5342, 0.2166, 0.4704, 0.6264, 0.1403]]])
in0Min2256 = tf.constant([[[[0.2846]], [[0.8179]]]])
in1Min2256 = tf.constant([[[[0.1077]], [[0.7066]]]])
print (np.array2string(model.predict([in0Zer21016,in0Sub43879,in1Sub43879,in0Con32636,in0Ave53585,in1Ave53585,in0Con50734,in0Min2256,in1Min2256],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add59471.png')

LZer21016 = zero_padding3D_layer([[[[[1.8431], [1.2854]]]]], 1, 1, 1, 1, 1, 1, Zer21016), 
LRes65721 = reshape_layer(Zer21016, [3, 3, 4], Res65721), 
LSub43879 = subtract_layer([[[[0.2758, 0.4962], [0.8216, 0.2972]], [[0.3582, 0.614], [0.2724, 0.1038]]]], [[[[0.7747, 0.9908], [0.5676, 0.8211]], [[0.2771, 0.3621], [0.4139, 0.4898]]]], Sub43879), 
LZer18660 = zero_padding2D_layer(Sub43879, 1, 0, 1, 0, Zer18660), 
LCon32636 = concatenate_layer([Zer18660,[[[[0.7026, 0.6812], [0.2008, 0.8549], [0.122, 0.0778]], [[0.0512, 0.5205], [0.9038, 0.8185], [0.9112, 0.7734]], [[0.7202, 0.1127], [0.6149, 0.1888], [0.0525, 0.8026]]]]], 3, Con32636), 
LAdd28184 = add_layer([Res65721,Con32636], Add28184), 
LRes4127 = reshape_layer(Add28184, [3, 12], Res4127), 
LAve53585 = average_layer([[[[0.0432]]], [[[0.1339]]]], Ave53585), 
LZer76223 = zero_padding1D_layer(Ave53585, 2, 0, Zer76223), 
LCon50734 = concatenate_layer([Zer76223,[[[0.4855, 0.5038, 0.4874, 0.0425, 0.8621, 0.4749, 0.6884, 0.6253, 0.8374, 0.6585, 0.84], [0.5569, 0.6103, 0.1282, 0.9703, 0.0105, 0.5934, 0.4116, 0.0954, 0.5808, 0.6875, 0.8414], [0.0861, 0.4387, 0.4183, 0.3465, 0.2244, 0.3406, 0.5342, 0.2166, 0.4704, 0.6264, 0.1403]]]], 2, Con50734), 
LSub9821 = subtract_layer(Res4127,Con50734, Sub9821), 
LRes73007 = reshape_layer(Sub9821, [3, 12, 1], Res73007), 
LMin2256 = minimum_layer([[[[[0.2846]], [[0.8179]]]], [[[[0.1077]], [[0.7066]]]]], Min2256), 
LZer34560 = zero_padding2D_layer(Min2256, 1, 0, 11, 0, Zer34560), 
LAdd59471 = add_layer([Res73007,Zer34560], Add59471), 
exec_layers([LZer21016,LRes65721,LSub43879,LZer18660,LCon32636,LAdd28184,LRes4127,LAve53585,LZer76223,LCon50734,LSub9821,LRes73007,LMin2256,LZer34560,LAdd59471],["Zer21016","Res65721","Sub43879","Zer18660","Con32636","Add28184","Res4127","Ave53585","Zer76223","Con50734","Sub9821","Res73007","Min2256","Zer34560","Add59471"],Add59471,"Add59471")

Actual (Unparsed): [[[[0.0000000], [-0.4855000], [0.1988000], [0.1938000], [-0.0425000], [-0.8621000], [-0.2741000], [0.1665000], [-0.6253000], [-0.8374000], [-0.5365000], [-0.7622000]], [[0.0000000], [-0.5569000], [-0.5591000], [0.3923000], [-1.4692000], [1.3379999], [1.5958000], [0.4069000], [0.1586000], [-1.1047000], [0.2237000], [0.0397000]], [[-0.0885500], [-0.0861000], [0.2815000], [-0.3056000], [-0.2654000], [0.0275000], [0.2743000], [-0.3454000], [-0.3581000], [-0.8564000], [-0.5739000], [1.3689000]]]]

Expected (Unparsed): [[[[0],[-0.4855],[0.19879999999999998],[0.19380000000000003],[-0.0425],[-0.8621],[-0.2741],[0.16649999999999998],[-0.6253],[-0.8374],[-0.5365],[-0.7622]],[[0],[-0.5569],[-0.5590999999999999],[0.3923],[-1.4692],[1.338],[1.5958],[0.4069],[0.15860000000000002],[-1.1047],[0.2237],[0.039699999999999944]],[[-0.08854999999999999],[-0.0861],[0.2815],[-0.3056],[-0.26539999999999997],[0.027500000000000024],[0.2743],[-0.34540000000000004],[-0.3581],[-0.8564],[-0.5739],[1.3689]]]]

Actual:   [[[[0], [-0.4855], [0.1988], [0.1938], [-0.0425], [-0.8621], [-0.2741], [0.1665], [-0.6253], [-0.8374], [-0.5365], [-0.7622]], [[0], [-0.5569], [-0.5591], [0.3923], [-1.4692], [1.338], [1.5958], [0.4069], [0.1586], [-1.1047], [0.2237], [0.0397]], [[-0.0885], [-0.0861], [0.2815], [-0.3056], [-0.2654], [0.0275], [0.2743], [-0.3454], [-0.3581], [-0.8564], [-0.5739], [1.3689]]]]

Expected: [[[[0], [-0.4855], [0.1988], [0.1939], [-0.0425], [-0.8621], [-0.2741], [0.1665], [-0.6253], [-0.8374], [-0.5365], [-0.7622]], [[0], [-0.5569], [-0.559], [0.3923], [-1.4692], [1.338], [1.5958], [0.4069], [0.1587], [-1.1047], [0.2237], [0.0397]], [[-0.0885], [-0.0861], [0.2815], [-0.3056], [-0.2653], [0.0276], [0.2743], [-0.3454], [-0.3581], [-0.8564], [-0.5739], [1.3689]]]]