import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add25859 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add25859 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Add98024 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add98024 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Add25859 = keras.layers.Add(name = 'Add25859', )([in0Add25859,in1Add25859])
Res44749 = keras.layers.Reshape((2, 1, 2, 1), name = 'Res44749', )(Add25859)
Zer41055 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer41055', )(Res44749)
Add98024 = keras.layers.Add(name = 'Add98024', )([in0Add98024,in1Add98024])
Zer59016 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer59016', )(Add98024)
Max11253 = keras.layers.Maximum(name = 'Max11253', )([Zer41055,Zer59016])
Res29963 = keras.layers.Reshape((2, 3, 2), name = 'Res29963', )(Max11253)
Ave24099 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave24099', )(Res29963)
model = tf.keras.models.Model(inputs=[in0Add25859,in1Add25859,in0Add98024,in1Add98024], outputs=Ave24099)
in0Add25859 = tf.constant([[[[0.8942, 0.4717]], [[0.3307, 0.0727]]]])
in1Add25859 = tf.constant([[[[0.5545, 0.3383]], [[0.5317, 0.3209]]]])
in0Add98024 = tf.constant([[[[[0.0709]], [[0.6494]]]]])
in1Add98024 = tf.constant([[[[[0.6565]], [[0.6168]]]]])
print (np.array2string(model.predict([in0Add25859,in1Add25859,in0Add98024,in1Add98024],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave24099.png')

LAdd25859 = add_layer([[[[[0.8942, 0.4717]], [[0.3307, 0.0727]]]], [[[[0.5545, 0.3383]], [[0.5317, 0.3209]]]]], Add25859), 
LRes44749 = reshape_layer(Add25859, [2, 1, 2, 1], Res44749), 
LZer41055 = zero_padding3D_layer(Res44749, 0, 0, 2, 0, 0, 0, Zer41055), 
LAdd98024 = add_layer([[[[[[0.0709]], [[0.6494]]]]], [[[[[0.6565]], [[0.6168]]]]]], Add98024), 
LZer59016 = zero_padding3D_layer(Add98024, 1, 0, 1, 0, 1, 0, Zer59016), 
LMax11253 = maximum_layer([Zer41055,Zer59016], Max11253), 
LRes29963 = reshape_layer(Max11253, [2, 3, 2], Res29963), 
LAve24099 = average_pooling2D_layer(Res29963, 1, 2, Ave24099), 
exec_layers([LAdd25859,LRes44749,LZer41055,LAdd98024,LZer59016,LMax11253,LRes29963,LAve24099],["Add25859","Res44749","Zer41055","Add98024","Zer59016","Max11253","Res29963","Ave24099"],Ave24099,"Ave24099")

Actual (Unparsed): [[[[0.0000000, 0.0000000]], [[0.0000000, 0.3637000]]]]

Expected (Unparsed): [[[[0,0]],[[0,0.36369999999999997]]]]

Actual:   [[[[0, 0]], [[0, 0.3637]]]]

Expected: [[[[0, 0]], [[0, 0.3637]]]]