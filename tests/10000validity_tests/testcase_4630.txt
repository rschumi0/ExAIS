import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo20047 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con64692 = tf.keras.layers.Input(shape=([2, 1]))
in0Add4380 = tf.keras.layers.Input(shape=([2, 2]))
in1Add4380 = tf.keras.layers.Input(shape=([2, 2]))

Glo20047 = keras.layers.GlobalMaxPool2D(name = 'Glo20047', )(in0Glo20047)
Res5030 = keras.layers.Reshape((2, 1), name = 'Res5030', )(Glo20047)
Res81411 = keras.layers.Reshape((2, 1, 1), name = 'Res81411', )(Res5030)
Ave79540 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(12, 1), padding='same', name = 'Ave79540', )(Res81411)
Thr39189 = keras.layers.ThresholdedReLU(theta=9.407587245152376, name = 'Thr39189', )(Ave79540)
Res53393 = keras.layers.Reshape((1, 1), name = 'Res53393', )(Thr39189)
Zer79409 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer79409', )(Res53393)
Con64692 = keras.layers.Concatenate(axis=2, name = 'Con64692', )([Zer79409,in0Con64692])
Add4380 = keras.layers.Add(name = 'Add4380', )([in0Add4380,in1Add4380])
Ave31170 = keras.layers.Average(name = 'Ave31170', )([Con64692,Add4380])
model = tf.keras.models.Model(inputs=[in0Glo20047,in0Con64692,in0Add4380,in1Add4380], outputs=Ave31170)
in0Glo20047 = tf.constant([[[[1.415, 1.4661], [1.2209, 1.3547]], [[1.6739, 1.6374], [1.0345, 1.4164]]]])
in0Con64692 = tf.constant([[[0.4209], [0.169]]])
in0Add4380 = tf.constant([[[0.2361, 0.7877], [0.0593, 0.7722]]])
in1Add4380 = tf.constant([[[0.7664, 0.3099], [0.1894, 0.3853]]])
print (np.array2string(model.predict([in0Glo20047,in0Con64692,in0Add4380,in1Add4380],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave31170.png')

LGlo20047 = global_max_pool2D_layer([[[[1.415, 1.4661], [1.2209, 1.3547]], [[1.6739, 1.6374], [1.0345, 1.4164]]]], Glo20047), 
LRes5030 = reshape_layer(Glo20047, [2, 1], Res5030), 
LRes81411 = reshape_layer(Res5030, [2, 1, 1], Res81411), 
LAve79540 = average_pooling2D_layer(Res81411, 2, 1, 12, 1, true, Ave79540), 
LThr39189 = thresholded_relu_layer(Ave79540, 9.407587245152376, Thr39189), 
LRes53393 = reshape_layer(Thr39189, [1, 1], Res53393), 
LZer79409 = zero_padding1D_layer(Res53393, 1, 0, Zer79409), 
LCon64692 = concatenate_layer([Zer79409,[[[0.4209], [0.169]]]], 2, Con64692), 
LAdd4380 = add_layer([[[[0.2361, 0.7877], [0.0593, 0.7722]]], [[[0.7664, 0.3099], [0.1894, 0.3853]]]], Add4380), 
LAve31170 = average_layer([Con64692,Add4380], Ave31170), 
exec_layers([LGlo20047,LRes5030,LRes81411,LAve79540,LThr39189,LRes53393,LZer79409,LCon64692,LAdd4380,LAve31170],["Glo20047","Res5030","Res81411","Ave79540","Thr39189","Res53393","Zer79409","Con64692","Add4380","Ave31170"],Ave31170,"Ave31170")

Actual (Unparsed): [[[0.5012500, 0.7592500], [0.1243500, 0.6632500]]]

Expected (Unparsed): [[[0.50125,0.75925],[0.12435,0.66325]]]

Actual:   [[[0.5013, 0.7593], [0.1244, 0.6633]]]

Expected: [[[0.5013, 0.7593], [0.1244, 0.6633]]]