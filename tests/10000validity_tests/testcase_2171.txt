import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub38769 = tf.keras.layers.Input(shape=([2, 2, 3]))
in1Sub38769 = tf.keras.layers.Input(shape=([2, 2, 3]))
in0Max32417 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con76002 = tf.keras.layers.Input(shape=([2, 2, 2]))

Sub38769 = keras.layers.Subtract(name = 'Sub38769', )([in0Sub38769,in1Sub38769])
Max32417 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max32417', )(in0Max32417)
Zer41966 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer41966', )(Max32417)
Con76002 = keras.layers.Concatenate(axis=3, name = 'Con76002', )([Zer41966,in0Con76002])
Max727 = keras.layers.Maximum(name = 'Max727', )([Sub38769,Con76002])
model = tf.keras.models.Model(inputs=[in0Sub38769,in1Sub38769,in0Max32417,in0Con76002], outputs=Max727)
in0Sub38769 = tf.constant([[[[0.5127, 0.7253, 0.2439], [0.2685, 0.1555, 0.3135]], [[0.6399, 0.6559, 0.0847], [0.859, 0.4126, 0.1605]]]])
in1Sub38769 = tf.constant([[[[0.3081, 0.7299, 0.9603], [0.4231, 0.112, 0.3]], [[0.2041, 0.9625, 0.4472], [0.5236, 0.1316, 0.4915]]]])
in0Max32417 = tf.constant([[[[1.3221]]]])
in0Con76002 = tf.constant([[[[0.0711, 0.158], [0.5708, 0.2055]], [[0.9449, 0.2545], [0.2995, 0.6548]]]])
print (np.array2string(model.predict([in0Sub38769,in1Sub38769,in0Max32417,in0Con76002],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max727.png')

LSub38769 = subtract_layer([[[[0.5127, 0.7253, 0.2439], [0.2685, 0.1555, 0.3135]], [[0.6399, 0.6559, 0.0847], [0.859, 0.4126, 0.1605]]]], [[[[0.3081, 0.7299, 0.9603], [0.4231, 0.112, 0.3]], [[0.2041, 0.9625, 0.4472], [0.5236, 0.1316, 0.4915]]]], Sub38769), 
LMax32417 = max_pool2D_layer([[[[1.3221]]]], 1, 1, Max32417), 
LZer41966 = zero_padding2D_layer(Max32417, 1, 0, 1, 0, Zer41966), 
LCon76002 = concatenate_layer([Zer41966,[[[[0.0711, 0.158], [0.5708, 0.2055]], [[0.9449, 0.2545], [0.2995, 0.6548]]]]], 3, Con76002), 
LMax727 = maximum_layer([Sub38769,Con76002], Max727), 
exec_layers([LSub38769,LMax32417,LZer41966,LCon76002,LMax727],["Sub38769","Max32417","Zer41966","Con76002","Max727"],Max727,"Max727")

Actual (Unparsed): [[[[0.2046000, 0.0711000, 0.1580000], [0.0000000, 0.5708000, 0.2055000]], [[0.4358000, 0.9449000, 0.2545000], [1.3221000, 0.2995000, 0.6548000]]]]

Expected (Unparsed): [[[[0.20460000000000006,0.0711,0.158],[0,0.5708,0.2055]],[[0.4358,0.9449,0.2545],[1.3221,0.2995,0.6548]]]]

Actual:   [[[[0.2046, 0.0711, 0.158], [0, 0.5708, 0.2055]], [[0.4358, 0.9449, 0.2545], [1.3221, 0.2995, 0.6548]]]]

Expected: [[[[0.2047, 0.0711, 0.158], [0, 0.5708, 0.2055]], [[0.4358, 0.9449, 0.2545], [1.3221, 0.2995, 0.6548]]]]