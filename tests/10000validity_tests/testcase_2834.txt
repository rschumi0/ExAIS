import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla45537 = tf.keras.layers.Input(shape=([3, 4]))
in0Con57839 = tf.keras.layers.Input(shape=([12, 1, 1, 1]))
in0Min33774 = tf.keras.layers.Input(shape=([1, 1]))
in1Min33774 = tf.keras.layers.Input(shape=([1, 1]))
in0Con92211 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con73045 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Max60864 = tf.keras.layers.Input(shape=([1, 2]))
in1Max60864 = tf.keras.layers.Input(shape=([1, 2]))

Fla45537 = keras.layers.Flatten(name = 'Fla45537', )(in0Fla45537)
ReL64068 = keras.layers.ReLU(max_value=0.7120606570112906, negative_slope=1.257574716982978, threshold=7.081448211834175, name = 'ReL64068', )(Fla45537)
Res21362 = keras.layers.Reshape((12, 1), name = 'Res21362', )(ReL64068)
Res46169 = keras.layers.Reshape((12, 1, 1), name = 'Res46169', )(Res21362)
Res78604 = keras.layers.Reshape((12, 1, 1, 1), name = 'Res78604', )(Res46169)
Con57839 = keras.layers.Concatenate(axis=4, name = 'Con57839', )([Res78604,in0Con57839])
Min33774 = keras.layers.Minimum(name = 'Min33774', )([in0Min33774,in1Min33774])
Res66688 = keras.layers.Reshape((1, 1, 1), name = 'Res66688', )(Min33774)
Res17494 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res17494', )(Res66688)
Con92211 = keras.layers.Concatenate(axis=4, name = 'Con92211', )([Res17494,in0Con92211])
Con73045 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con73045', )(in0Con73045)
Add11521 = keras.layers.Add(name = 'Add11521', )([Con92211,Con73045])
Zer97095 = keras.layers.ZeroPadding3D(padding=((11, 0), (0, 0), (0, 0)), name = 'Zer97095', )(Add11521)
Ave13585 = keras.layers.Average(name = 'Ave13585', )([Con57839,Zer97095])
Res32829 = keras.layers.Reshape((12, 1, 2), name = 'Res32829', )(Ave13585)
Res11172 = keras.layers.Reshape((12, 2), name = 'Res11172', )(Res32829)
Max60864 = keras.layers.Maximum(name = 'Max60864', )([in0Max60864,in1Max60864])
Zer44580 = keras.layers.ZeroPadding1D(padding=((11, 0)), name = 'Zer44580', )(Max60864)
Min33389 = keras.layers.Minimum(name = 'Min33389', )([Res11172,Zer44580])
model = tf.keras.models.Model(inputs=[in0Fla45537,in0Con57839,in0Min33774,in1Min33774,in0Con92211,in0Con73045,in0Max60864,in1Max60864], outputs=Min33389)
w = model.get_layer('Con73045').get_weights() 
w[0] = np.array([[[[[0.2194, 0.9397], [0.5466, 0.0178]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con73045').set_weights(w) 
in0Fla45537 = tf.constant([[[1.7824, 1.1275, 1.8747, 1.6595], [1.7611, 1.1106, 1.0745, 1.8809], [1.4259, 1.5289, 1.7301, 1.6224]]])
in0Con57839 = tf.constant([[[[[0.5726]]], [[[0.1452]]], [[[0.6747]]], [[[0.8475]]], [[[0.3908]]], [[[0.2857]]], [[[0.9645]]], [[[0.8471]]], [[[0.8976]]], [[[0.7992]]], [[[0.636]]], [[[0.815]]]]])
in0Min33774 = tf.constant([[[0.8311]]])
in1Min33774 = tf.constant([[[0.3773]]])
in0Con92211 = tf.constant([[[[[0.3489]]]]])
in0Con73045 = tf.constant([[[[[0.6802, 0.9194]]]]])
in0Max60864 = tf.constant([[[0.2998, 0.7643]]])
in1Max60864 = tf.constant([[[0.1521, 0.9403]]])
print (np.array2string(model.predict([in0Fla45537,in0Con57839,in0Min33774,in1Min33774,in0Con92211,in0Con73045,in0Max60864,in1Max60864],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min33389.png')

LFla45537 = flatten_layer([[[1.7824, 1.1275, 1.8747, 1.6595], [1.7611, 1.1106, 1.0745, 1.8809], [1.4259, 1.5289, 1.7301, 1.6224]]], Fla45537), 
LReL64068 = relu_layer(Fla45537, 0.7120606570112906, 1.257574716982978, 7.081448211834175, ReL64068), 
LRes21362 = reshape_layer(ReL64068, [12, 1], Res21362), 
LRes46169 = reshape_layer(Res21362, [12, 1, 1], Res46169), 
LRes78604 = reshape_layer(Res46169, [12, 1, 1, 1], Res78604), 
LCon57839 = concatenate_layer([Res78604,[[[[[0.5726]]], [[[0.1452]]], [[[0.6747]]], [[[0.8475]]], [[[0.3908]]], [[[0.2857]]], [[[0.9645]]], [[[0.8471]]], [[[0.8976]]], [[[0.7992]]], [[[0.636]]], [[[0.815]]]]]], 4, Con57839), 
LMin33774 = minimum_layer([[[[0.8311]]], [[[0.3773]]]], Min33774), 
LRes66688 = reshape_layer(Min33774, [1, 1, 1], Res66688), 
LRes17494 = reshape_layer(Res66688, [1, 1, 1, 1], Res17494), 
LCon92211 = concatenate_layer([Res17494,[[[[[0.3489]]]]]], 4, Con92211), 
LCon73045 = conv3D_transpose_layer([[[[[0.6802, 0.9194]]]]], 1, 1, 1,[[[[[0.2194, 0.9397], [0.5466, 0.0178]]]]],[0, 0], 1, 1, 1, false, Con73045), 
LAdd11521 = add_layer([Con92211,Con73045], Add11521), 
LZer97095 = zero_padding3D_layer(Add11521, 11, 0, 0, 0, 0, 0, Zer97095), 
LAve13585 = average_layer([Con57839,Zer97095], Ave13585), 
LRes32829 = reshape_layer(Ave13585, [12, 1, 2], Res32829), 
LRes11172 = reshape_layer(Res32829, [12, 2], Res11172), 
LMax60864 = maximum_layer([[[[0.2998, 0.7643]]], [[[0.1521, 0.9403]]]], Max60864), 
LZer44580 = zero_padding1D_layer(Max60864, 11, 0, Zer44580), 
LMin33389 = minimum_layer([Res11172,Zer44580], Min33389), 
exec_layers([LFla45537,LReL64068,LRes21362,LRes46169,LRes78604,LCon57839,LMin33774,LRes66688,LRes17494,LCon92211,LCon73045,LAdd11521,LZer97095,LAve13585,LRes32829,LRes11172,LMax60864,LZer44580,LMin33389],["Fla45537","ReL64068","Res21362","Res46169","Res78604","Con57839","Min33774","Res66688","Res17494","Con92211","Con73045","Add11521","Zer97095","Ave13585","Res32829","Res11172","Max60864","Zer44580","Min33389"],Min33389,"Min33389")

Actual (Unparsed): [[[-3.3319745, 0.0000000], [-3.7437673, 0.0000000], [-3.2739375, 0.0000000], [-3.4092525, 0.0000000], [-3.3453677, 0.0000000], [-3.7543939, 0.0000000], [-3.7770931, 0.0000000], [-3.2700390, 0.0000000], [-3.5561372, 0.0000000], [-3.4913721, 0.0000000], [-3.3648601, 0.0000000], [-2.7373325, 0.7760313]]]

Expected (Unparsed): [[[-3.3319745276382595,0],[-3.7437673687143356,0],[-3.273937454449495,0],[-3.4092524939968634,0],[-3.345367698374128,0],[-3.7543938750728416,0],[-3.7770930987143845,0],[-3.270038972826848,0],[-3.5561372209404754,0],[-3.491372123015852,0],[-3.364860106487364,0],[-2.7373324749968972,0.77603132]]]

Actual:   [[[-3.3319, 0], [-3.7437, 0], [-3.2739, 0], [-3.4092, 0], [-3.3453, 0], [-3.7543, 0], [-3.777, 0], [-3.27, 0], [-3.5561, 0], [-3.4913, 0], [-3.3648, 0], [-2.7373, 0.7761]]]

Expected: [[[-3.3319, 0], [-3.7437, 0], [-3.2739, 0], [-3.4092, 0], [-3.3453, 0], [-3.7543, 0], [-3.777, 0], [-3.27, 0], [-3.5561, 0], [-3.4913, 0], [-3.3648, 0], [-2.7373, 0.7761]]]