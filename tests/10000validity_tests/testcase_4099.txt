import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con59899 = tf.keras.layers.Input(shape=([1, 1]))
in0Con10086 = tf.keras.layers.Input(shape=([1, 4]))
in0Con25898 = tf.keras.layers.Input(shape=([1, 2, 1]))

Con59899 = keras.layers.Conv1D(2, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con59899', )(in0Con59899)
ReL38281 = keras.layers.ReLU(max_value=6.816366401459436, negative_slope=1.8519635661158032, threshold=8.296105752262417, name = 'ReL38281', )(Con59899)
Con10086 = keras.layers.Concatenate(axis=2, name = 'Con10086', )([ReL38281,in0Con10086])
Con25898 = keras.layers.Conv2D(3, (1, 2),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con25898', )(in0Con25898)
Res98648 = keras.layers.Reshape((1, 6), name = 'Res98648', )(Con25898)
Ave85706 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave85706', )(Res98648)
Add32767 = keras.layers.Add(name = 'Add32767', )([Con10086,Ave85706])
Sof81161 = keras.layers.Softmax(axis=1, name = 'Sof81161', )(Add32767)
model = tf.keras.models.Model(inputs=[in0Con59899,in0Con10086,in0Con25898], outputs=Sof81161)
w = model.get_layer('Con59899').get_weights() 
w[0] = np.array([[[0.8654, 0.3601]]])
w[1] = np.array([0, 0])
model.get_layer('Con59899').set_weights(w) 
w = model.get_layer('Con25898').get_weights() 
w[0] = np.array([[[[0.6263, 0.9246, 0.9091]], [[0.3332, 0.7444, 0.7855]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con25898').set_weights(w) 
in0Con59899 = tf.constant([[[0.0054]]])
in0Con10086 = tf.constant([[[0.5759, 0.301, 0.3246, 0.1605]]])
in0Con25898 = tf.constant([[[[0.3972], [0.7604]]]])
print (np.array2string(model.predict([in0Con59899,in0Con10086,in0Con25898],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sof81161.png')

LCon59899 = conv1D_layer([[[0.0054]]], 1,[[[0.8654, 0.3601]]],[0, 0], 1, true, 1, Con59899), 
LReL38281 = relu_layer(Con59899, 6.816366401459436, 1.8519635661158032, 8.296105752262417, ReL38281), 
LCon10086 = concatenate_layer([ReL38281,[[[0.5759, 0.301, 0.3246, 0.1605]]]], 2, Con10086), 
LCon25898 = conv2D_layer([[[[0.3972], [0.7604]]]], 1, 2,[[[[0.6263, 0.9246, 0.9091]], [[0.3332, 0.7444, 0.7855]]]],[0, 0, 0], 1, 1, true, 1, 1, Con25898), 
LRes98648 = reshape_layer(Con25898, [1, 6], Res98648), 
LAve85706 = average_pooling1D_layer(Res98648, 1, 1, true, Ave85706), 
LAdd32767 = add_layer([Con10086,Ave85706], Add32767), 
LSof81161 = softmax_layer(Add32767, 1, Sof81161), 
exec_layers([LCon59899,LReL38281,LCon10086,LCon25898,LRes98648,LAve85706,LAdd32767,LSof81161],["Con59899","ReL38281","Con10086","Con25898","Res98648","Ave85706","Add32767","Sof81161"],Sof81161,"Sof81161")

Actual (Unparsed): [[[1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000]]]

Expected (Unparsed): [[[1.0,1.0,1.0,1.0,1.0,1.0]]]

Actual:   [[[1, 1, 1, 1, 1, 1]]]

Expected: [[[1, 1, 1, 1, 1, 1]]]