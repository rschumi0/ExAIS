import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave5257 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave5257 = tf.keras.layers.Input(shape=([2, 1, 2]))

Ave5257 = keras.layers.Average(name = 'Ave5257', )([in0Ave5257,in1Ave5257])
Glo76881 = keras.layers.GlobalMaxPool2D(name = 'Glo76881', )(Ave5257)
Res14647 = keras.layers.Reshape((2, 1), name = 'Res14647', )(Glo76881)
Res52410 = keras.layers.Reshape((2, 1, 1), name = 'Res52410', )(Res14647)
Max94953 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(1, 1), padding='same', name = 'Max94953', )(Res52410)
model = tf.keras.models.Model(inputs=[in0Ave5257,in1Ave5257], outputs=Max94953)
in0Ave5257 = tf.constant([[[[0.7531, 0.1158]], [[0.4353, 0.3871]]]])
in1Ave5257 = tf.constant([[[[0.7596, 0.1836]], [[0.46, 0.2238]]]])
print (np.array2string(model.predict([in0Ave5257,in1Ave5257],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max94953.png')

LAve5257 = average_layer([[[[[0.7531, 0.1158]], [[0.4353, 0.3871]]]], [[[[0.7596, 0.1836]], [[0.46, 0.2238]]]]], Ave5257), 
LGlo76881 = global_max_pool2D_layer(Ave5257, Glo76881), 
LRes14647 = reshape_layer(Glo76881, [2, 1], Res14647), 
LRes52410 = reshape_layer(Res14647, [2, 1, 1], Res52410), 
LMax94953 = max_pool2D_layer(Res52410, 2, 1, 1, 1, true, Max94953), 
exec_layers([LAve5257,LGlo76881,LRes14647,LRes52410,LMax94953],["Ave5257","Glo76881","Res14647","Res52410","Max94953"],Max94953,"Max94953")

Actual (Unparsed): [[[[0.7563500]], [[0.3054500]]]]

Expected (Unparsed): [[[[0.7563500000000001]],[[0.30545]]]]

Actual:   [[[[0.7564]], [[0.3055]]]]

Expected: [[[[0.7564]], [[0.3055]]]]