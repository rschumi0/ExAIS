import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave43635 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave43635 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave41415 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Ave41415 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Ave96867 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave96867 = tf.keras.layers.Input(shape=([1, 1]))
in0Con20759 = tf.keras.layers.Input(shape=([1, 3]))
in0Con14531 = tf.keras.layers.Input(shape=([1, 1]))
in0Max54607 = tf.keras.layers.Input(shape=([1, 2]))
in1Max54607 = tf.keras.layers.Input(shape=([1, 2]))

Ave43635 = keras.layers.Average(name = 'Ave43635', )([in0Ave43635,in1Ave43635])
Res92209 = keras.layers.Reshape((1, 1), name = 'Res92209', )(Ave43635)
Ave41415 = keras.layers.Average(name = 'Ave41415', )([in0Ave41415,in1Ave41415])
Res37747 = keras.layers.Reshape((1, 2, 2), name = 'Res37747', )(Ave41415)
Res22619 = keras.layers.Reshape((1, 4), name = 'Res22619', )(Res37747)
Ave96867 = keras.layers.Average(name = 'Ave96867', )([in0Ave96867,in1Ave96867])
Con20759 = keras.layers.Concatenate(axis=2, name = 'Con20759', )([Ave96867,in0Con20759])
Mul37434 = keras.layers.Multiply(name = 'Mul37434', )([Res22619,Con20759])
Res1730 = keras.layers.Reshape((1, 4, 1), name = 'Res1730', )(Mul37434)
Ave2973 = keras.layers.AveragePooling2D(pool_size=(1, 4), name = 'Ave2973', )(Res1730)
Res18853 = keras.layers.Reshape((1, 1), name = 'Res18853', )(Ave2973)
Dot14918 = keras.layers.Dot(axes=(2, 2), name = 'Dot14918', )([Res92209,Res18853])
Con14531 = keras.layers.Concatenate(axis=2, name = 'Con14531', )([Dot14918,in0Con14531])
Max54607 = keras.layers.Maximum(name = 'Max54607', )([in0Max54607,in1Max54607])
Min24830 = keras.layers.Minimum(name = 'Min24830', )([Con14531,Max54607])
Res60087 = keras.layers.Reshape((1, 2, 1), name = 'Res60087', )(Min24830)
Res99187 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res99187', )(Res60087)
Glo65969 = keras.layers.GlobalAveragePooling3D(name = 'Glo65969', )(Res99187)
model = tf.keras.models.Model(inputs=[in0Ave43635,in1Ave43635,in0Ave41415,in1Ave41415,in0Ave96867,in1Ave96867,in0Con20759,in0Con14531,in0Max54607,in1Max54607], outputs=Glo65969)
in0Ave43635 = tf.constant([[[[0.897]]]])
in1Ave43635 = tf.constant([[[[0.7544]]]])
in0Ave41415 = tf.constant([[[[[0.5011, 0.0381]], [[0.6561, 0.4922]]]]])
in1Ave41415 = tf.constant([[[[[0.8425, 0.4365]], [[0.6833, 0.9788]]]]])
in0Ave96867 = tf.constant([[[0.9054]]])
in1Ave96867 = tf.constant([[[0.4753]]])
in0Con20759 = tf.constant([[[0.3002, 0.1197, 0.3735]]])
in0Con14531 = tf.constant([[[0.1773]]])
in0Max54607 = tf.constant([[[0.6778, 0.3294]]])
in1Max54607 = tf.constant([[[0.4502, 0.5484]]])
print (np.array2string(model.predict([in0Ave43635,in1Ave43635,in0Ave41415,in1Ave41415,in0Ave96867,in1Ave96867,in0Con20759,in0Con14531,in0Max54607,in1Max54607],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo65969.png')

LAve43635 = average_layer([[[[[0.897]]]], [[[[0.7544]]]]], Ave43635), 
LRes92209 = reshape_layer(Ave43635, [1, 1], Res92209), 
LAve41415 = average_layer([[[[[[0.5011, 0.0381]], [[0.6561, 0.4922]]]]], [[[[[0.8425, 0.4365]], [[0.6833, 0.9788]]]]]], Ave41415), 
LRes37747 = reshape_layer(Ave41415, [1, 2, 2], Res37747), 
LRes22619 = reshape_layer(Res37747, [1, 4], Res22619), 
LAve96867 = average_layer([[[[0.9054]]], [[[0.4753]]]], Ave96867), 
LCon20759 = concatenate_layer([Ave96867,[[[0.3002, 0.1197, 0.3735]]]], 2, Con20759), 
LMul37434 = multiply_layer([Res22619,Con20759], Mul37434), 
LRes1730 = reshape_layer(Mul37434, [1, 4, 1], Res1730), 
LAve2973 = average_pooling2D_layer(Res1730, 1, 4, Ave2973), 
LRes18853 = reshape_layer(Ave2973, [1, 1], Res18853), 
LDot14918 = dot_layer(Res92209,Res18853, 2, 2, Dot14918), 
LCon14531 = concatenate_layer([Dot14918,[[[0.1773]]]], 2, Con14531), 
LMax54607 = maximum_layer([[[[0.6778, 0.3294]]], [[[0.4502, 0.5484]]]], Max54607), 
LMin24830 = minimum_layer([Con14531,Max54607], Min24830), 
LRes60087 = reshape_layer(Min24830, [1, 2, 1], Res60087), 
LRes99187 = reshape_layer(Res60087, [1, 2, 1, 1], Res99187), 
LGlo65969 = global_average_pooling3D_layer(Res99187, Glo65969), 
exec_layers([LAve43635,LRes92209,LAve41415,LRes37747,LRes22619,LAve96867,LCon20759,LMul37434,LRes1730,LAve2973,LRes18853,LDot14918,LCon14531,LMax54607,LMin24830,LRes60087,LRes99187,LGlo65969],["Ave43635","Res92209","Ave41415","Res37747","Res22619","Ave96867","Con20759","Mul37434","Res1730","Ave2973","Res18853","Dot14918","Con14531","Max54607","Min24830","Res60087","Res99187","Glo65969"],Glo65969,"Glo65969")

Actual (Unparsed): [[0.1804975]]

Expected (Unparsed): [[0.18049745476262502]]

Actual:   [[0.1805]]

Expected: [[0.1805]]