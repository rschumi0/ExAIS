import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul86776 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul86776 = tf.keras.layers.Input(shape=([2, 2, 2]))

Mul86776 = keras.layers.Multiply(name = 'Mul86776', )([in0Mul86776,in1Mul86776])
Thr6573 = keras.layers.ThresholdedReLU(theta=3.4222055303730414, name = 'Thr6573', )(Mul86776)
Fla2823 = keras.layers.Flatten(name = 'Fla2823', )(Thr6573)
Res35125 = keras.layers.Reshape((8, 1), name = 'Res35125', )(Fla2823)
Ave15092 = keras.layers.AveragePooling1D(pool_size=(1), strides=(3), padding='valid', name = 'Ave15092', )(Res35125)
model = tf.keras.models.Model(inputs=[in0Mul86776,in1Mul86776], outputs=Ave15092)
in0Mul86776 = tf.constant([[[[0.0602, 0.5913], [0.8447, 0.1008]], [[0.7573, 0.2756], [0.8459, 0.2717]]]])
in1Mul86776 = tf.constant([[[[0.6286, 0.8183], [0.4835, 0.0803]], [[0.7906, 0.2969], [0.1547, 0.3709]]]])
print (np.array2string(model.predict([in0Mul86776,in1Mul86776],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave15092.png')

LMul86776 = multiply_layer([[[[[0.0602, 0.5913], [0.8447, 0.1008]], [[0.7573, 0.2756], [0.8459, 0.2717]]]], [[[[0.6286, 0.8183], [0.4835, 0.0803]], [[0.7906, 0.2969], [0.1547, 0.3709]]]]], Mul86776), 
LThr6573 = thresholded_relu_layer(Mul86776, 3.4222055303730414, Thr6573), 
LFla2823 = flatten_layer(Thr6573, Fla2823), 
LRes35125 = reshape_layer(Fla2823, [8, 1], Res35125), 
LAve15092 = average_pooling1D_layer(Res35125, 1, 3, false, Ave15092), 
exec_layers([LMul86776,LThr6573,LFla2823,LRes35125,LAve15092],["Mul86776","Thr6573","Fla2823","Res35125","Ave15092"],Ave15092,"Ave15092")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000]]]

Expected (Unparsed): [[[0],[0],[0]]]

Actual:   [[[0], [0], [0]]]

Expected: [[[0], [0], [0]]]