import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo42870 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con24656 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Mas74413 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Mul63491 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul63491 = tf.keras.layers.Input(shape=([1, 2]))
in0Con36632 = tf.keras.layers.Input(shape=([1, 4]))
in0Max45331 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Max45331 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Glo61792 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con91026 = tf.keras.layers.Input(shape=([2, 10, 1]))

Glo42870 = keras.layers.GlobalAveragePooling3D(name = 'Glo42870', )(in0Glo42870)
Res10056 = keras.layers.Reshape((1, 1), name = 'Res10056', )(Glo42870)
Res36617 = keras.layers.Reshape((1, 1, 1), name = 'Res36617', )(Res10056)
Zer4300 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer4300', )(Res36617)
Con24656 = keras.layers.Concatenate(axis=3, name = 'Con24656', )([Zer4300,in0Con24656])
Mas74413 = keras.layers.Masking(mask_value=2, name = 'Mas74413', )(in0Mas74413)
Add81937 = keras.layers.Add(name = 'Add81937', )([Con24656,Mas74413])
Res22269 = keras.layers.Reshape((1, 6), name = 'Res22269', )(Add81937)
Mul63491 = keras.layers.Multiply(name = 'Mul63491', )([in0Mul63491,in1Mul63491])
Con36632 = keras.layers.Concatenate(axis=2, name = 'Con36632', )([Mul63491,in0Con36632])
Add27692 = keras.layers.Add(name = 'Add27692', )([Res22269,Con36632])
Res69261 = keras.layers.Reshape((1, 6, 1), name = 'Res69261', )(Add27692)
Res85111 = keras.layers.Reshape((1, 6, 1, 1), name = 'Res85111', )(Res69261)
Zer49372 = keras.layers.ZeroPadding3D(padding=((1, 0), (4, 0), (1, 0)), name = 'Zer49372', )(Res85111)
Max45331 = keras.layers.Maximum(name = 'Max45331', )([in0Max45331,in1Max45331])
Zer38809 = keras.layers.ZeroPadding3D(padding=((0, 0), (8, 0), (0, 0)), name = 'Zer38809', )(Max45331)
Max19316 = keras.layers.Maximum(name = 'Max19316', )([Zer49372,Zer38809])
Res8455 = keras.layers.Reshape((2, 10, 2), name = 'Res8455', )(Max19316)
Glo61792 = keras.layers.GlobalMaxPool2D(name = 'Glo61792', )(in0Glo61792)
Res11279 = keras.layers.Reshape((2, 1), name = 'Res11279', )(Glo61792)
Res82410 = keras.layers.Reshape((2, 1, 1), name = 'Res82410', )(Res11279)
Dep1892 = keras.layers.DepthwiseConv2D((2, 1),strides=(2, 2), padding='same', name = 'Dep1892', )(Res82410)
Zer77983 = keras.layers.ZeroPadding2D(padding=((1, 0), (9, 0)), name = 'Zer77983', )(Dep1892)
Con91026 = keras.layers.Concatenate(axis=3, name = 'Con91026', )([Zer77983,in0Con91026])
Sub48174 = keras.layers.Subtract(name = 'Sub48174', )([Res8455,Con91026])
model = tf.keras.models.Model(inputs=[in0Glo42870,in0Con24656,in0Mas74413,in0Mul63491,in1Mul63491,in0Con36632,in0Max45331,in1Max45331,in0Glo61792,in0Con91026], outputs=Sub48174)
w = model.get_layer('Dep1892').get_weights() 
w[0] = np.array([[[[0.9722]]], [[[0.9238]]]])
w[1] = np.array([0])
model.get_layer('Dep1892').set_weights(w) 
in0Glo42870 = tf.constant([[[[[1.8765]]], [[[1.9941]]]]])
in0Con24656 = tf.constant([[[[0.1117, 0.0331], [0.1697, 0.1204]]]])
in0Mas74413 = tf.constant([[[[1.6081, 1.5525, 1.4995], [1.4006, 1.3133, 1.1656]]]])
in0Mul63491 = tf.constant([[[0.0786, 0.3935]]])
in1Mul63491 = tf.constant([[[0.5811, 0.2283]]])
in0Con36632 = tf.constant([[[0.5077, 0.0826, 0.6459, 0.7155]]])
in0Max45331 = tf.constant([[[[[0.647], [0.7991]], [[0.1764], [0.7666]]], [[[0.969], [0.5364]], [[0.0264], [0.7113]]]]])
in1Max45331 = tf.constant([[[[[0.3362], [0.1563]], [[0.0427], [0.7009]]], [[[0.2831], [0.7712]], [[0.9986], [0.7668]]]]])
in0Glo61792 = tf.constant([[[[1.4044, 1.5785]]]])
in0Con91026 = tf.constant([[[[0.099], [0.4238], [0.1693], [0.3458], [0.5063], [0.2817], [0.1141], [0.5207], [0.3808], [0.68]], [[0.3312], [0.3261], [0.9471], [0.1666], [0.8957], [0.7846], [0.9936], [0.5204], [0.0707], [0.9675]]]])
print (np.array2string(model.predict([in0Glo42870,in0Con24656,in0Mas74413,in0Mul63491,in1Mul63491,in0Con36632,in0Max45331,in1Max45331,in0Glo61792,in0Con91026],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub48174.png')

LGlo42870 = global_average_pooling3D_layer([[[[[1.8765]]], [[[1.9941]]]]], Glo42870), 
LRes10056 = reshape_layer(Glo42870, [1, 1], Res10056), 
LRes36617 = reshape_layer(Res10056, [1, 1, 1], Res36617), 
LZer4300 = zero_padding2D_layer(Res36617, 0, 0, 1, 0, Zer4300), 
LCon24656 = concatenate_layer([Zer4300,[[[[0.1117, 0.0331], [0.1697, 0.1204]]]]], 3, Con24656), 
LMas74413 = masking_layer([[[[1.6081, 1.5525, 1.4995], [1.4006, 1.3133, 1.1656]]]], 2, Mas74413), 
LAdd81937 = add_layer([Con24656,Mas74413], Add81937), 
LRes22269 = reshape_layer(Add81937, [1, 6], Res22269), 
LMul63491 = multiply_layer([[[[0.0786, 0.3935]]], [[[0.5811, 0.2283]]]], Mul63491), 
LCon36632 = concatenate_layer([Mul63491,[[[0.5077, 0.0826, 0.6459, 0.7155]]]], 2, Con36632), 
LAdd27692 = add_layer([Res22269,Con36632], Add27692), 
LRes69261 = reshape_layer(Add27692, [1, 6, 1], Res69261), 
LRes85111 = reshape_layer(Res69261, [1, 6, 1, 1], Res85111), 
LZer49372 = zero_padding3D_layer(Res85111, 1, 0, 4, 0, 1, 0, Zer49372), 
LMax45331 = maximum_layer([[[[[[0.647], [0.7991]], [[0.1764], [0.7666]]], [[[0.969], [0.5364]], [[0.0264], [0.7113]]]]], [[[[[0.3362], [0.1563]], [[0.0427], [0.7009]]], [[[0.2831], [0.7712]], [[0.9986], [0.7668]]]]]], Max45331), 
LZer38809 = zero_padding3D_layer(Max45331, 0, 0, 8, 0, 0, 0, Zer38809), 
LMax19316 = maximum_layer([Zer49372,Zer38809], Max19316), 
LRes8455 = reshape_layer(Max19316, [2, 10, 2], Res8455), 
LGlo61792 = global_max_pool2D_layer([[[[1.4044, 1.5785]]]], Glo61792), 
LRes11279 = reshape_layer(Glo61792, [2, 1], Res11279), 
LRes82410 = reshape_layer(Res11279, [2, 1, 1], Res82410), 
LDep1892 = depthwise_conv2D_layer(Res82410, 2, 1,[[[[0.9722]]], [[[0.9238]]]],[0], 2, 2, true, Dep1892), 
LZer77983 = zero_padding2D_layer(Dep1892, 1, 0, 9, 0, Zer77983), 
LCon91026 = concatenate_layer([Zer77983,[[[[0.099], [0.4238], [0.1693], [0.3458], [0.5063], [0.2817], [0.1141], [0.5207], [0.3808], [0.68]], [[0.3312], [0.3261], [0.9471], [0.1666], [0.8957], [0.7846], [0.9936], [0.5204], [0.0707], [0.9675]]]]], 3, Con91026), 
LSub48174 = subtract_layer(Res8455,Con91026, Sub48174), 
exec_layers([LGlo42870,LRes10056,LRes36617,LZer4300,LCon24656,LMas74413,LAdd81937,LRes22269,LMul63491,LCon36632,LAdd27692,LRes69261,LRes85111,LZer49372,LMax45331,LZer38809,LMax19316,LRes8455,LGlo61792,LRes11279,LRes82410,LDep1892,LZer77983,LCon91026,LSub48174],["Glo42870","Res10056","Res36617","Zer4300","Con24656","Mas74413","Add81937","Res22269","Mul63491","Con36632","Add27692","Res69261","Res85111","Zer49372","Max45331","Zer38809","Max19316","Res8455","Glo61792","Res11279","Res82410","Dep1892","Zer77983","Con91026","Sub48174"],Sub48174,"Sub48174")

Actual (Unparsed): [[[[0.0000000, -0.0990000], [0.0000000, -0.4238000], [0.0000000, -0.1693000], [0.0000000, -0.3458000], [0.0000000, -0.5063000], [0.0000000, -0.2817000], [0.0000000, -0.1141000], [0.0000000, -0.5207000], [0.6470000, 0.4183000], [0.1764000, 0.0866000]], [[0.0000000, -0.3312000], [0.0000000, -0.3261000], [0.0000000, -0.9471000], [0.0000000, -0.1666000], [0.0000000, 0.7580745], [0.0000000, 0.9694360], [0.0000000, 1.0467001], [0.0000000, 2.8981000], [0.9690000, 2.0582000], [-1.8249760, 1.0340000]]]]

Expected (Unparsed): [[[[0,-0.099],[0,-0.4238],[0,-0.1693],[0,-0.3458],[0,-0.5063],[0,-0.2817],[0,-0.1141],[0,-0.5207],[0.647,0.4183],[0.1764,0.0865999999999999]],[[0,-0.3312],[0,-0.3261],[0,-0.9471],[0,-0.1666],[0,0.7580744600000001],[0,0.9694360499999999],[0,1.0467000000000002],[0,2.8981],[0.969,2.0582],[-1.82497598,1.034]]]]

Actual:   [[[[0, -0.099], [0, -0.4238], [0, -0.1693], [0, -0.3458], [0, -0.5063], [0, -0.2817], [0, -0.1141], [0, -0.5207], [0.647, 0.4183], [0.1764, 0.0866]], [[0, -0.3312], [0, -0.3261], [0, -0.9471], [0, -0.1666], [0, 0.7581], [0, 0.9695], [0, 1.0468], [0, 2.8981], [0.969, 2.0582], [-1.8249, 1.034]]]]

Expected: [[[[0, -0.099], [0, -0.4238], [0, -0.1693], [0, -0.3458], [0, -0.5063], [0, -0.2817], [0, -0.1141], [0, -0.5207], [0.647, 0.4183], [0.1764, 0.0866]], [[0, -0.3312], [0, -0.3261], [0, -0.9471], [0, -0.1666], [0, 0.7581], [0, 0.9695], [0, 1.0468], [0, 2.8981], [0.969, 2.0582], [-1.8249, 1.034]]]]