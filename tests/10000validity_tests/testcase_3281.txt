import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot4035 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot4035 = tf.keras.layers.Input(shape=([3, 3]))
in0Con97598 = tf.keras.layers.Input(shape=([3, 1]))
in0Add64703 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Add64703 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Dot4035 = keras.layers.Dot(axes=(1, 2), name = 'Dot4035', )([in0Dot4035,in1Dot4035])
Con97598 = keras.layers.Concatenate(axis=2, name = 'Con97598', )([Dot4035,in0Con97598])
Add64703 = keras.layers.Add(name = 'Add64703', )([in0Add64703,in1Add64703])
Res80019 = keras.layers.Reshape((1, 2, 2), name = 'Res80019', )(Add64703)
Res26564 = keras.layers.Reshape((1, 4), name = 'Res26564', )(Res80019)
Up_19762 = keras.layers.UpSampling1D(size=(1), name = 'Up_19762', )(Res26564)
Dot40260 = keras.layers.Dot(axes=(2, 2), name = 'Dot40260', )([Con97598,Up_19762])
model = tf.keras.models.Model(inputs=[in0Dot4035,in1Dot4035,in0Con97598,in0Add64703,in1Add64703], outputs=Dot40260)
in0Dot4035 = tf.constant([[[0.5198, 0.8456, 0.2781], [0.1689, 0.5402, 0.078], [0.9379, 0.7998, 0.451]]])
in1Dot4035 = tf.constant([[[0.1598, 0.1826, 0.4423], [0.8766, 0.1763, 0.3323], [0.2421, 0.2293, 0.9877]]])
in0Con97598 = tf.constant([[[0.5554], [0.8607], [0.3258]]])
in0Add64703 = tf.constant([[[[[0.8704, 0.5809]], [[0.6873, 0.0868]]]]])
in1Add64703 = tf.constant([[[[[0.1044, 0.6882]], [[0.1308, 0.6928]]]]])
print (np.array2string(model.predict([in0Dot4035,in1Dot4035,in0Con97598,in0Add64703,in1Add64703],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot40260.png')

LDot4035 = dot_layer([[[0.5198, 0.8456, 0.2781], [0.1689, 0.5402, 0.078], [0.9379, 0.7998, 0.451]]], [[[0.1598, 0.1826, 0.4423], [0.8766, 0.1763, 0.3323], [0.2421, 0.2293, 0.9877]]], 1, 2, Dot4035), 
LCon97598 = concatenate_layer([Dot4035,[[[0.5554], [0.8607], [0.3258]]]], 2, Con97598), 
LAdd64703 = add_layer([[[[[[0.8704, 0.5809]], [[0.6873, 0.0868]]]]], [[[[[0.1044, 0.6882]], [[0.1308, 0.6928]]]]]], Add64703), 
LRes80019 = reshape_layer(Add64703, [1, 2, 2], Res80019), 
LRes26564 = reshape_layer(Res80019, [1, 4], Res26564), 
LUp_19762 = up_sampling1D_layer(Res26564, 1, Up_19762), 
LDot40260 = dot_layer(Con97598,Up_19762, 2, 2, Dot40260), 
exec_layers([LDot4035,LCon97598,LAdd64703,LRes80019,LRes26564,LUp_19762,LDot40260],["Dot4035","Con97598","Add64703","Res80019","Res26564","Up_19762","Dot40260"],Dot40260,"Dot40260")

Actual (Unparsed): [[[2.8524959], [3.5576840], [1.4568193]]]

Expected (Unparsed): [[[2.8524958427100002],[3.557683940976],[1.456819272651]]]

Actual:   [[[2.8525], [3.5577], [1.4569]]]

Expected: [[[2.8525], [3.5577], [1.4569]]]