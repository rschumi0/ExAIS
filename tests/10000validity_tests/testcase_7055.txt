import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul78680 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul78680 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Glo41116 = tf.keras.layers.Input(shape=([2, 2]))

Mul78680 = keras.layers.Multiply(name = 'Mul78680', )([in0Mul78680,in1Mul78680])
Res10986 = keras.layers.Reshape((1, 2), name = 'Res10986', )(Mul78680)
Fla11857 = keras.layers.Flatten(name = 'Fla11857', )(Res10986)
Glo41116 = keras.layers.GlobalAveragePooling1D(name = 'Glo41116', )(in0Glo41116)
Max95098 = keras.layers.Maximum(name = 'Max95098', )([Fla11857,Glo41116])
model = tf.keras.models.Model(inputs=[in0Mul78680,in1Mul78680,in0Glo41116], outputs=Max95098)
in0Mul78680 = tf.constant([[[[0.8444, 0.3915]]]])
in1Mul78680 = tf.constant([[[[0.4352, 0.0863]]]])
in0Glo41116 = tf.constant([[[1.8512, 1.7189], [1.5386, 1.9134]]])
print (np.array2string(model.predict([in0Mul78680,in1Mul78680,in0Glo41116],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max95098.png')

LMul78680 = multiply_layer([[[[[0.8444, 0.3915]]]], [[[[0.4352, 0.0863]]]]], Mul78680), 
LRes10986 = reshape_layer(Mul78680, [1, 2], Res10986), 
LFla11857 = flatten_layer(Res10986, Fla11857), 
LGlo41116 = global_average_pooling1D_layer([[[1.8512, 1.7189], [1.5386, 1.9134]]], Glo41116), 
LMax95098 = maximum_layer([Fla11857,Glo41116], Max95098), 
exec_layers([LMul78680,LRes10986,LFla11857,LGlo41116,LMax95098],["Mul78680","Res10986","Fla11857","Glo41116","Max95098"],Max95098,"Max95098")

Actual (Unparsed): [[1.6949000, 1.8161500]]

Expected (Unparsed): [[1.6949,1.81615]]

Actual:   [[1.6949, 1.8162]]

Expected: [[1.6949, 1.8162]]