import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add30419 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Add30419 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Sub74398 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub74398 = tf.keras.layers.Input(shape=([3, 2]))
in0Con82868 = tf.keras.layers.Input(shape=([4, 2]))

Add30419 = keras.layers.Add(name = 'Add30419', )([in0Add30419,in1Add30419])
Res69172 = keras.layers.Reshape((2, 2, 2), name = 'Res69172', )(Add30419)
Res50838 = keras.layers.Reshape((2, 4), name = 'Res50838', )(Res69172)
Zer94936 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer94936', )(Res50838)
Sub74398 = keras.layers.Subtract(name = 'Sub74398', )([in0Sub74398,in1Sub74398])
Zer65189 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer65189', )(Sub74398)
Con82868 = keras.layers.Concatenate(axis=2, name = 'Con82868', )([Zer65189,in0Con82868])
Add29097 = keras.layers.Add(name = 'Add29097', )([Zer94936,Con82868])
model = tf.keras.models.Model(inputs=[in0Add30419,in1Add30419,in0Sub74398,in1Sub74398,in0Con82868], outputs=Add29097)
in0Add30419 = tf.constant([[[[[0.6905, 0.9356]], [[0.0621, 0.869]]], [[[0.9312, 0.1952]], [[0.0779, 0.5357]]]]])
in1Add30419 = tf.constant([[[[[0.4065, 0.3747]], [[0.0149, 0.086]]], [[[0.5489, 0.8787]], [[0.5091, 0.0878]]]]])
in0Sub74398 = tf.constant([[[0.8656, 0.2323], [0.9386, 0.2897], [0.9412, 0.9117]]])
in1Sub74398 = tf.constant([[[0.4375, 0.3182], [0.6956, 0.356], [0.1223, 0.4573]]])
in0Con82868 = tf.constant([[[0.7717, 0.5656], [0.6937, 0.0554], [0.6158, 0.2168], [0.6955, 0.6405]]])
print (np.array2string(model.predict([in0Add30419,in1Add30419,in0Sub74398,in1Sub74398,in0Con82868],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add29097.png')

LAdd30419 = add_layer([[[[[[0.6905, 0.9356]], [[0.0621, 0.869]]], [[[0.9312, 0.1952]], [[0.0779, 0.5357]]]]], [[[[[0.4065, 0.3747]], [[0.0149, 0.086]]], [[[0.5489, 0.8787]], [[0.5091, 0.0878]]]]]], Add30419), 
LRes69172 = reshape_layer(Add30419, [2, 2, 2], Res69172), 
LRes50838 = reshape_layer(Res69172, [2, 4], Res50838), 
LZer94936 = zero_padding1D_layer(Res50838, 1, 1, Zer94936), 
LSub74398 = subtract_layer([[[0.8656, 0.2323], [0.9386, 0.2897], [0.9412, 0.9117]]], [[[0.4375, 0.3182], [0.6956, 0.356], [0.1223, 0.4573]]], Sub74398), 
LZer65189 = zero_padding1D_layer(Sub74398, 1, 0, Zer65189), 
LCon82868 = concatenate_layer([Zer65189,[[[0.7717, 0.5656], [0.6937, 0.0554], [0.6158, 0.2168], [0.6955, 0.6405]]]], 2, Con82868), 
LAdd29097 = add_layer([Zer94936,Con82868], Add29097), 
exec_layers([LAdd30419,LRes69172,LRes50838,LZer94936,LSub74398,LZer65189,LCon82868,LAdd29097],["Add30419","Res69172","Res50838","Zer94936","Sub74398","Zer65189","Con82868","Add29097"],Add29097,"Add29097")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.7717000, 0.5656000], [1.5251000, 1.2244000, 0.7707000, 1.0104000], [1.7231001, 1.0076000, 1.2028000, 0.8403000], [0.8189000, 0.4544000, 0.6955000, 0.6405000]]]

Expected (Unparsed): [[[0,0,0.7717,0.5656],[1.5251000000000001,1.2244000000000002,0.7706999999999999,1.0104],[1.7231,1.0076,1.2027999999999999,0.8402999999999999],[0.8189000000000001,0.45439999999999997,0.6955,0.6405]]]

Actual:   [[[0, 0, 0.7717, 0.5656], [1.5251, 1.2244, 0.7707, 1.0104], [1.7232, 1.0076, 1.2028, 0.8403], [0.8189, 0.4544, 0.6955, 0.6405]]]

Expected: [[[0, 0, 0.7717, 0.5656], [1.5252, 1.2245, 0.7707, 1.0104], [1.7231, 1.0076, 1.2028, 0.8403], [0.819, 0.4544, 0.6955, 0.6405]]]