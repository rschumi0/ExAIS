import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub95953 = tf.keras.layers.Input(shape=([2]))
in1Sub95953 = tf.keras.layers.Input(shape=([2]))
in0Con95970 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Add14658 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Add14658 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Sub95953 = keras.layers.Subtract(name = 'Sub95953', )([in0Sub95953,in1Sub95953])
Res54965 = keras.layers.Reshape((2, 1), name = 'Res54965', )(Sub95953)
Up_81467 = keras.layers.UpSampling1D(size=(1), name = 'Up_81467', )(Res54965)
Res71156 = keras.layers.Reshape((2, 1, 1), name = 'Res71156', )(Up_81467)
Con95970 = keras.layers.Concatenate(axis=3, name = 'Con95970', )([Res71156,in0Con95970])
Add14658 = keras.layers.Add(name = 'Add14658', )([in0Add14658,in1Add14658])
Res29176 = keras.layers.Reshape((2, 1, 2), name = 'Res29176', )(Add14658)
Cro14324 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro14324', )(Res29176)
Thr94223 = keras.layers.ThresholdedReLU(theta=4.4880409943366395, name = 'Thr94223', )(Cro14324)
Zer6082 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer6082', )(Thr94223)
Min37649 = keras.layers.Minimum(name = 'Min37649', )([Con95970,Zer6082])
model = tf.keras.models.Model(inputs=[in0Sub95953,in1Sub95953,in0Con95970,in0Add14658,in1Add14658], outputs=Min37649)
in0Sub95953 = tf.constant([[0.9997, 0.0702]])
in1Sub95953 = tf.constant([[0.471, 0.4486]])
in0Con95970 = tf.constant([[[[0.5743]], [[0.9045]]]])
in0Add14658 = tf.constant([[[[[0.7658], [0.0652]]], [[[0.8639], [0.0764]]]]])
in1Add14658 = tf.constant([[[[[0.4225], [0.1271]]], [[[0.3621], [0.6601]]]]])
print (np.array2string(model.predict([in0Sub95953,in1Sub95953,in0Con95970,in0Add14658,in1Add14658],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min37649.png')

LSub95953 = subtract_layer([[0.9997, 0.0702]], [[0.471, 0.4486]], Sub95953), 
LRes54965 = reshape_layer(Sub95953, [2, 1], Res54965), 
LUp_81467 = up_sampling1D_layer(Res54965, 1, Up_81467), 
LRes71156 = reshape_layer(Up_81467, [2, 1, 1], Res71156), 
LCon95970 = concatenate_layer([Res71156,[[[[0.5743]], [[0.9045]]]]], 3, Con95970), 
LAdd14658 = add_layer([[[[[[0.7658], [0.0652]]], [[[0.8639], [0.0764]]]]], [[[[[0.4225], [0.1271]]], [[[0.3621], [0.6601]]]]]], Add14658), 
LRes29176 = reshape_layer(Add14658, [2, 1, 2], Res29176), 
LCro14324 = cropping2D_layer(Res29176, 1, 0, 0, 0, Cro14324), 
LThr94223 = thresholded_relu_layer(Cro14324, 4.4880409943366395, Thr94223), 
LZer6082 = zero_padding2D_layer(Thr94223, 1, 0, 0, 0, Zer6082), 
LMin37649 = minimum_layer([Con95970,Zer6082], Min37649), 
exec_layers([LSub95953,LRes54965,LUp_81467,LRes71156,LCon95970,LAdd14658,LRes29176,LCro14324,LThr94223,LZer6082,LMin37649],["Sub95953","Res54965","Up_81467","Res71156","Con95970","Add14658","Res29176","Cro14324","Thr94223","Zer6082","Min37649"],Min37649,"Min37649")

Actual (Unparsed): [[[[0.0000000, 0.0000000]], [[-0.3784000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0]],[[-0.3784,0]]]]

Actual:   [[[[0, 0]], [[-0.3784, 0]]]]

Expected: [[[[0, 0]], [[-0.3784, 0]]]]