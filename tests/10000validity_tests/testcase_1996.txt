import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc56092 = tf.keras.layers.Input(shape=([2, 2]))
in0Con48559 = tf.keras.layers.Input(shape=([2]))
in0Dot71856 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot71856 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub82010 = tf.keras.layers.Input(shape=([3]))
in1Sub82010 = tf.keras.layers.Input(shape=([3]))
in0Con87357 = tf.keras.layers.Input(shape=([1]))
in0Fla89805 = tf.keras.layers.Input(shape=([1]))
in0Con11192 = tf.keras.layers.Input(shape=([3]))

Loc56092 = keras.layers.LocallyConnected1D(2, (2),strides=(1), name = 'Loc56092', )(in0Loc56092)
Fla83015 = keras.layers.Flatten(name = 'Fla83015', )(Loc56092)
Con48559 = keras.layers.Concatenate(axis=1, name = 'Con48559', )([Fla83015,in0Con48559])
Dot71856 = keras.layers.Dot(axes=(2, 1), name = 'Dot71856', )([in0Dot71856,in1Dot71856])
Fla70512 = keras.layers.Flatten(name = 'Fla70512', )(Dot71856)
Sub82010 = keras.layers.Subtract(name = 'Sub82010', )([in0Sub82010,in1Sub82010])
Con87357 = keras.layers.Concatenate(axis=1, name = 'Con87357', )([Sub82010,in0Con87357])
Mul67263 = keras.layers.Multiply(name = 'Mul67263', )([Fla70512,Con87357])
Min97153 = keras.layers.Minimum(name = 'Min97153', )([Con48559,Mul67263])
Fla89805 = keras.layers.Flatten(name = 'Fla89805', )(in0Fla89805)
Fla62873 = keras.layers.Flatten(name = 'Fla62873', )(Fla89805)
Res22471 = keras.layers.Reshape((1, 1), name = 'Res22471', )(Fla62873)
Glo76788 = keras.layers.GlobalMaxPool1D(name = 'Glo76788', )(Res22471)
Con11192 = keras.layers.Concatenate(axis=1, name = 'Con11192', )([Glo76788,in0Con11192])
Add31634 = keras.layers.Add(name = 'Add31634', )([Min97153,Con11192])
model = tf.keras.models.Model(inputs=[in0Loc56092,in0Con48559,in0Dot71856,in1Dot71856,in0Sub82010,in1Sub82010,in0Con87357,in0Fla89805,in0Con11192], outputs=Add31634)
w = model.get_layer('Loc56092').get_weights() 
w[0] = np.array([[[0.9239, 0.1437], [0.1728, 0.4236], [0.168, 0.4446], [0.0525, 0.2497]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc56092').set_weights(w) 
in0Loc56092 = tf.constant([[[0.6185, 0.0314], [0.0922, 0.9982]]])
in0Con48559 = tf.constant([[0.5098, 0.389]])
in0Dot71856 = tf.constant([[[0.0476, 0.1049], [0.4574, 0.6514]]])
in1Dot71856 = tf.constant([[[0.7545, 0.044], [0.7503, 0.022]]])
in0Sub82010 = tf.constant([[0.0984, 0.3821, 0.0366]])
in1Sub82010 = tf.constant([[0.8405, 0.7035, 0.5413]])
in0Con87357 = tf.constant([[0.2365]])
in0Fla89805 = tf.constant([[1.1231]])
in0Con11192 = tf.constant([[0.7401, 0.0863, 0.8225]])
print (np.array2string(model.predict([in0Loc56092,in0Con48559,in0Dot71856,in1Dot71856,in0Sub82010,in1Sub82010,in0Con87357,in0Fla89805,in0Con11192],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add31634.png')

LLoc56092 = locally_connected1D_layer([[[0.6185, 0.0314], [0.0922, 0.9982]]], 2,[[[0.9239, 0.1437], [0.1728, 0.4236], [0.168, 0.4446], [0.0525, 0.2497]]],[[0, 0]], 1, Loc56092), 
LFla83015 = flatten_layer(Loc56092, Fla83015), 
LCon48559 = concatenate_layer([Fla83015,[[0.5098, 0.389]]], 1, Con48559), 
LDot71856 = dot_layer([[[0.0476, 0.1049], [0.4574, 0.6514]]], [[[0.7545, 0.044], [0.7503, 0.022]]], 2, 1, Dot71856), 
LFla70512 = flatten_layer(Dot71856, Fla70512), 
LSub82010 = subtract_layer([[0.0984, 0.3821, 0.0366]], [[0.8405, 0.7035, 0.5413]], Sub82010), 
LCon87357 = concatenate_layer([Sub82010,[[0.2365]]], 1, Con87357), 
LMul67263 = multiply_layer([Fla70512,Con87357], Mul67263), 
LMin97153 = minimum_layer([Con48559,Mul67263], Min97153), 
LFla89805 = flatten_layer([[1.1231]], Fla89805), 
LFla62873 = flatten_layer(Fla89805, Fla62873), 
LRes22471 = reshape_layer(Fla62873, [1, 1], Res22471), 
LGlo76788 = global_max_pool1D_layer(Res22471, Glo76788), 
LCon11192 = concatenate_layer([Glo76788,[[0.7401, 0.0863, 0.8225]]], 1, Con11192), 
LAdd31634 = add_layer([Min97153,Con11192], Add31634), 
exec_layers([LLoc56092,LFla83015,LCon48559,LDot71856,LFla70512,LSub82010,LCon87357,LMul67263,LMin97153,LFla89805,LFla62873,LRes22471,LGlo76788,LCon11192,LAdd31634],["Loc56092","Fla83015","Con48559","Dot71856","Fla70512","Sub82010","Con87357","Mul67263","Min97153","Fla89805","Fla62873","Res22471","Glo76788","Con11192","Add31634"],Add31634,"Add31634")

Actual (Unparsed): [[1.0380400, 0.7386852, -0.3345460, 0.8306489]]

Expected (Unparsed): [[1.038040000793,0.7386851329199999,-0.33454597248400003,0.8306489386]]

Actual:   [[1.0381, 0.7387, -0.3345, 0.8307]]

Expected: [[1.0381, 0.7387, -0.3345, 0.8307]]