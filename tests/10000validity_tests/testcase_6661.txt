import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con19620 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con60438 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Max3168 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max3168 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Ave18959 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Ave18959 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con35949 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Con19620 = keras.layers.Conv2DTranspose(2, (1, 2),strides=(1, 1), padding='same', name = 'Con19620', )(in0Con19620)
Res43397 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res43397', )(Con19620)
Con60438 = keras.layers.Concatenate(axis=4, name = 'Con60438', )([Res43397,in0Con60438])
Max3168 = keras.layers.Maximum(name = 'Max3168', )([in0Max3168,in1Max3168])
Ave18959 = keras.layers.Average(name = 'Ave18959', )([in0Ave18959,in1Ave18959])
Zer23614 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer23614', )(Ave18959)
Con35949 = keras.layers.Concatenate(axis=4, name = 'Con35949', )([Zer23614,in0Con35949])
Ave21104 = keras.layers.Average(name = 'Ave21104', )([Max3168,Con35949])
Add62666 = keras.layers.Add(name = 'Add62666', )([Con60438,Ave21104])
model = tf.keras.models.Model(inputs=[in0Con19620,in0Con60438,in0Max3168,in1Max3168,in0Ave18959,in1Ave18959,in0Con35949], outputs=Add62666)
w = model.get_layer('Con19620').get_weights() 
w[0] = np.array([[[[0.3637, 0.3541], [0.7185, 0.8582]], [[0.8301, 0.1094], [0.7418, 0.2303]]]])
w[1] = np.array([0, 0])
model.get_layer('Con19620').set_weights(w) 
in0Con19620 = tf.constant([[[[0.4348, 0.7986], [0.3729, 0.3733]], [[0.5293, 0.5807], [0.1243, 0.895]]]])
in0Con60438 = tf.constant([[[[[0.1257], [0.5276]], [[0.6347], [0.1704]]], [[[0.2131], [0.283]], [[0.1123], [0.5132]]]]])
in0Max3168 = tf.constant([[[[[0.5986, 0.7409], [0.0224, 0.1446]], [[0.6982, 0.3496], [0.2604, 0.6239]]], [[[0.4745, 0.8691], [0.9999, 0.7184]], [[0.5965, 0.3588], [0.2689, 0.3799]]]]])
in1Max3168 = tf.constant([[[[[0.1679, 0.1073], [0.3738, 0.4425]], [[0.0355, 0.5556], [0.4097, 0.4687]]], [[[0.7492, 0.7562], [0.4262, 0.1571]], [[0.294, 0.7627], [0.8174, 0.7716]]]]])
in0Ave18959 = tf.constant([[[[[0.6176]]], [[[0.2906]]]]])
in1Ave18959 = tf.constant([[[[[0.5437]]], [[[0.7538]]]]])
in0Con35949 = tf.constant([[[[[0.5137], [0.8423]], [[0.3556], [0.9236]]], [[[0.6195], [0.2345]], [[0.7768], [0.9636]]]]])
print (np.array2string(model.predict([in0Con19620,in0Con60438,in0Max3168,in1Max3168,in0Ave18959,in1Ave18959,in0Con35949],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add62666.png')

LCon19620 = conv2D_transpose_layer([[[[0.4348, 0.7986], [0.3729, 0.3733]], [[0.5293, 0.5807], [0.1243, 0.895]]]], 1, 2,[[[[0.3637, 0.3541], [0.7185, 0.8582]], [[0.8301, 0.1094], [0.7418, 0.2303]]]],[0, 0], 1, 1, true, Con19620), 
LRes43397 = reshape_layer(Con19620, [2, 2, 2, 1], Res43397), 
LCon60438 = concatenate_layer([Res43397,[[[[[0.1257], [0.5276]], [[0.6347], [0.1704]]], [[[0.2131], [0.283]], [[0.1123], [0.5132]]]]]], 4, Con60438), 
LMax3168 = maximum_layer([[[[[[0.5986, 0.7409], [0.0224, 0.1446]], [[0.6982, 0.3496], [0.2604, 0.6239]]], [[[0.4745, 0.8691], [0.9999, 0.7184]], [[0.5965, 0.3588], [0.2689, 0.3799]]]]], [[[[[0.1679, 0.1073], [0.3738, 0.4425]], [[0.0355, 0.5556], [0.4097, 0.4687]]], [[[0.7492, 0.7562], [0.4262, 0.1571]], [[0.294, 0.7627], [0.8174, 0.7716]]]]]], Max3168), 
LAve18959 = average_layer([[[[[[0.6176]]], [[[0.2906]]]]], [[[[[0.5437]]], [[[0.7538]]]]]], Ave18959), 
LZer23614 = zero_padding3D_layer(Ave18959, 0, 0, 1, 0, 1, 0, Zer23614), 
LCon35949 = concatenate_layer([Zer23614,[[[[[0.5137], [0.8423]], [[0.3556], [0.9236]]], [[[0.6195], [0.2345]], [[0.7768], [0.9636]]]]]], 4, Con35949), 
LAve21104 = average_layer([Max3168,Con35949], Ave21104), 
LAdd62666 = add_layer([Con60438,Ave21104], Add62666), 
exec_layers([LCon19620,LRes43397,LCon60438,LMax3168,LAve18959,LZer23614,LCon35949,LAve21104,LAdd62666],["Con19620","Res43397","Con60438","Max3168","Ave18959","Zer23614","Con35949","Ave21104","Add62666"],Add62666,"Add62666")

Actual (Unparsed): [[[[[0.7402210, 0.7530000], [1.1846623, 1.1700000]], [[1.0652036, 1.0903000], [1.5899219, 0.9441500]]], [[[0.7727323, 0.9574000], [1.3786087, 0.7594500]], [[1.1632779, 0.8820500], [2.0535684, 1.3808000]]]]]

Expected (Unparsed): [[[[[0.74022102,0.753],[1.18466232,1.17]],[[1.06520358,1.0903],[1.58992193,0.9441499999999999]]],[[[0.77273228,0.9574],[1.37860879,0.75945]],[[1.16327792,0.88205],[2.0535685,1.3807999999999998]]]]]

Actual:   [[[[[0.7403, 0.753], [1.1847, 1.17]], [[1.0653, 1.0903], [1.59, 0.9442]]], [[[0.7728, 0.9574], [1.3787, 0.7595]], [[1.1633, 0.8821], [2.0536, 1.3808]]]]]

Expected: [[[[[0.7403, 0.753], [1.1847, 1.17]], [[1.0653, 1.0903], [1.59, 0.9442]]], [[[0.7728, 0.9574], [1.3787, 0.7595]], [[1.1633, 0.8821], [2.0536, 1.3808]]]]]