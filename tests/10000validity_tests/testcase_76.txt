import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max60064 = tf.keras.layers.Input(shape=([1, 1]))
in1Max60064 = tf.keras.layers.Input(shape=([1, 1]))
in0Add50067 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add50067 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Ave68536 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave68536 = tf.keras.layers.Input(shape=([2, 1]))
in0Con79503 = tf.keras.layers.Input(shape=([2, 3]))
in0Ave20536 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave20536 = tf.keras.layers.Input(shape=([1, 2]))
in0Con48457 = tf.keras.layers.Input(shape=([2, 2]))

Max60064 = keras.layers.Maximum(name = 'Max60064', )([in0Max60064,in1Max60064])
Lay61257 = keras.layers.LayerNormalization(axis=1, epsilon=2.6725992654151423, name = 'Lay61257', )(Max60064)
Add50067 = keras.layers.Add(name = 'Add50067', )([in0Add50067,in1Add50067])
Res90943 = keras.layers.Reshape((1, 4), name = 'Res90943', )(Add50067)
Dot56672 = keras.layers.Dot(axes=(1, 1), name = 'Dot56672', )([Lay61257,Res90943])
Zer77748 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer77748', )(Dot56672)
Ave68536 = keras.layers.Average(name = 'Ave68536', )([in0Ave68536,in1Ave68536])
ELU14572 = keras.layers.ELU(alpha=1.5981302554256178, name = 'ELU14572', )(Ave68536)
Con79503 = keras.layers.Concatenate(axis=2, name = 'Con79503', )([ELU14572,in0Con79503])
Ave93981 = keras.layers.Average(name = 'Ave93981', )([Zer77748,Con79503])
Ave20536 = keras.layers.Average(name = 'Ave20536', )([in0Ave20536,in1Ave20536])
Zer36773 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer36773', )(Ave20536)
Con48457 = keras.layers.Concatenate(axis=2, name = 'Con48457', )([Zer36773,in0Con48457])
Mul6790 = keras.layers.Multiply(name = 'Mul6790', )([Ave93981,Con48457])
model = tf.keras.models.Model(inputs=[in0Max60064,in1Max60064,in0Add50067,in1Add50067,in0Ave68536,in1Ave68536,in0Con79503,in0Ave20536,in1Ave20536,in0Con48457], outputs=Mul6790)
in0Max60064 = tf.constant([[[0.7494]]])
in1Max60064 = tf.constant([[[0.0851]]])
in0Add50067 = tf.constant([[[[0.6534, 0.9705], [0.8739, 0.0051]]]])
in1Add50067 = tf.constant([[[[0.2153, 0.9333], [0.9526, 0.8849]]]])
in0Ave68536 = tf.constant([[[0.2285], [0.7999]]])
in1Ave68536 = tf.constant([[[0.492], [0.4212]]])
in0Con79503 = tf.constant([[[0.7819, 0.0912, 0.8839], [0.7064, 0.6115, 0.3126]]])
in0Ave20536 = tf.constant([[[0.4632, 0.1238]]])
in1Ave20536 = tf.constant([[[0.2332, 0.5768]]])
in0Con48457 = tf.constant([[[0.6988, 0.8197], [0.2895, 0.5283]]])
print (np.array2string(model.predict([in0Max60064,in1Max60064,in0Add50067,in1Add50067,in0Ave68536,in1Ave68536,in0Con79503,in0Ave20536,in1Ave20536,in0Con48457],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul6790.png')

LMax60064 = maximum_layer([[[[0.7494]]], [[[0.0851]]]], Max60064), 
LLay61257 = layer_normalization_layer(Max60064, 1, 2.6725992654151423, Lay61257), 
LAdd50067 = add_layer([[[[[0.6534, 0.9705], [0.8739, 0.0051]]]], [[[[0.2153, 0.9333], [0.9526, 0.8849]]]]], Add50067), 
LRes90943 = reshape_layer(Add50067, [1, 4], Res90943), 
LDot56672 = dot_layer(Lay61257,Res90943, 1, 1, Dot56672), 
LZer77748 = zero_padding1D_layer(Dot56672, 1, 0, Zer77748), 
LAve68536 = average_layer([[[[0.2285], [0.7999]]], [[[0.492], [0.4212]]]], Ave68536), 
LELU14572 = elu_layer(Ave68536, 1.5981302554256178, ELU14572), 
LCon79503 = concatenate_layer([ELU14572,[[[0.7819, 0.0912, 0.8839], [0.7064, 0.6115, 0.3126]]]], 2, Con79503), 
LAve93981 = average_layer([Zer77748,Con79503], Ave93981), 
LAve20536 = average_layer([[[[0.4632, 0.1238]]], [[[0.2332, 0.5768]]]], Ave20536), 
LZer36773 = zero_padding1D_layer(Ave20536, 1, 0, Zer36773), 
LCon48457 = concatenate_layer([Zer36773,[[[0.6988, 0.8197], [0.2895, 0.5283]]]], 2, Con48457), 
LMul6790 = multiply_layer([Ave93981,Con48457], Mul6790), 
exec_layers([LMax60064,LLay61257,LAdd50067,LRes90943,LDot56672,LZer77748,LAve68536,LELU14572,LCon79503,LAve93981,LAve20536,LZer36773,LCon48457,LMul6790],["Max60064","Lay61257","Add50067","Res90943","Dot56672","Zer77748","Ave68536","ELU14572","Con79503","Ave93981","Ave20536","Zer36773","Con48457","Mul6790"],Mul6790,"Mul6790")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0318653, 0.3622664], [0.1062968, 0.1237260, 0.0885146, 0.0825733]]]

Expected (Unparsed): [[[0.0,0.0,0.03186528,0.362266415],[0.106296755,0.12372596000000001,0.088514625,0.08257329]]]

Actual:   [[[0, 0, 0.0319, 0.3623], [0.1063, 0.1238, 0.0886, 0.0826]]]

Expected: [[[0, 0, 0.0319, 0.3623], [0.1063, 0.1238, 0.0886, 0.0826]]]