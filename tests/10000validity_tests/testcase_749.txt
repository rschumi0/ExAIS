import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep56736 = tf.keras.layers.Input(shape=([1, 2]))
in0Mul82739 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Mul82739 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con67737 = tf.keras.layers.Input(shape=([3]))

Sep56736 = keras.layers.SeparableConv1D(4, (1),strides=(1), padding='valid', name = 'Sep56736', )(in0Sep56736)
Mas2747 = keras.layers.Masking(mask_value=1, name = 'Mas2747', )(Sep56736)
Fla82224 = keras.layers.Flatten(name = 'Fla82224', )(Mas2747)
Mul82739 = keras.layers.Multiply(name = 'Mul82739', )([in0Mul82739,in1Mul82739])
Glo3304 = keras.layers.GlobalAveragePooling3D(name = 'Glo3304', )(Mul82739)
Con67737 = keras.layers.Concatenate(axis=1, name = 'Con67737', )([Glo3304,in0Con67737])
Max78253 = keras.layers.Maximum(name = 'Max78253', )([Fla82224,Con67737])
model = tf.keras.models.Model(inputs=[in0Sep56736,in0Mul82739,in1Mul82739,in0Con67737], outputs=Max78253)
w = model.get_layer('Sep56736').get_weights() 
w[0] = np.array([[[0.9259], [0.3894]]])
w[1] = np.array([[[0.4157, 0.8502, 0.2056, 0.4691], [0.0996, 0.5397, 0.9978, 0.9039]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep56736').set_weights(w) 
in0Sep56736 = tf.constant([[[0.7284, 0.7887]]])
in0Mul82739 = tf.constant([[[[[0.2443]]]]])
in1Mul82739 = tf.constant([[[[[0.1473]]]]])
in0Con67737 = tf.constant([[0.3397, 0.1443, 0.8641]])
print (np.array2string(model.predict([in0Sep56736,in0Mul82739,in1Mul82739,in0Con67737],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max78253.png')

LSep56736 = separable_conv1D_layer([[[0.7284, 0.7887]]], 1,[[[[0.9259], [0.3894]]],[[[0.4157, 0.8502, 0.2056, 0.4691], [0.0996, 0.5397, 0.9978, 0.9039]]]],[0, 0, 0, 0], 1, false, Sep56736), 
LMas2747 = masking_layer(Sep56736, 1, Mas2747), 
LFla82224 = flatten_layer(Mas2747, Fla82224), 
LMul82739 = multiply_layer([[[[[[0.2443]]]]], [[[[[0.1473]]]]]], Mul82739), 
LGlo3304 = global_average_pooling3D_layer(Mul82739, Glo3304), 
LCon67737 = concatenate_layer([Glo3304,[[0.3397, 0.1443, 0.8641]]], 1, Con67737), 
LMax78253 = maximum_layer([Fla82224,Con67737], Max78253), 
exec_layers([LSep56736,LMas2747,LFla82224,LMul82739,LGlo3304,LCon67737,LMax78253],["Sep56736","Mas2747","Fla82224","Mul82739","Glo3304","Con67737","Max78253"],Max78253,"Max78253")

Actual (Unparsed): [[0.3109478, 0.7391491, 0.4451060, 0.8641000]]

Expected (Unparsed): [[0.31094783538000004,0.7391491563779999,0.44510601161999996,0.8641]]

Actual:   [[0.311, 0.7392, 0.4452, 0.8641]]

Expected: [[0.311, 0.7392, 0.4452, 0.8641]]