import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max58800 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Max58800 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Mul56665 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul56665 = tf.keras.layers.Input(shape=([1, 2]))
in0Con99593 = tf.keras.layers.Input(shape=([6]))

Max58800 = keras.layers.Maximum(name = 'Max58800', )([in0Max58800,in1Max58800])
Res548 = keras.layers.Reshape((2, 2, 1), name = 'Res548', )(Max58800)
Res79051 = keras.layers.Reshape((2, 2), name = 'Res79051', )(Res548)
Up_84532 = keras.layers.UpSampling1D(size=(2), name = 'Up_84532', )(Res79051)
Fla168 = keras.layers.Flatten(name = 'Fla168', )(Up_84532)
Mul56665 = keras.layers.Multiply(name = 'Mul56665', )([in0Mul56665,in1Mul56665])
Glo98231 = keras.layers.GlobalAveragePooling1D(name = 'Glo98231', )(Mul56665)
Con99593 = keras.layers.Concatenate(axis=1, name = 'Con99593', )([Glo98231,in0Con99593])
Max5301 = keras.layers.Maximum(name = 'Max5301', )([Fla168,Con99593])
model = tf.keras.models.Model(inputs=[in0Max58800,in1Max58800,in0Mul56665,in1Mul56665,in0Con99593], outputs=Max5301)
in0Max58800 = tf.constant([[[[[0.5717]], [[0.3212]]], [[[0.46]], [[0.4512]]]]])
in1Max58800 = tf.constant([[[[[0.836]], [[0.8032]]], [[[0.5812]], [[0.1803]]]]])
in0Mul56665 = tf.constant([[[0.601, 0.1708]]])
in1Mul56665 = tf.constant([[[0.3156, 0.6754]]])
in0Con99593 = tf.constant([[0.6299, 0.3079, 0.8396, 0.705, 0.7315, 0.1227]])
print (np.array2string(model.predict([in0Max58800,in1Max58800,in0Mul56665,in1Mul56665,in0Con99593],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max5301.png')

LMax58800 = maximum_layer([[[[[[0.5717]], [[0.3212]]], [[[0.46]], [[0.4512]]]]], [[[[[0.836]], [[0.8032]]], [[[0.5812]], [[0.1803]]]]]], Max58800), 
LRes548 = reshape_layer(Max58800, [2, 2, 1], Res548), 
LRes79051 = reshape_layer(Res548, [2, 2], Res79051), 
LUp_84532 = up_sampling1D_layer(Res79051, 2, Up_84532), 
LFla168 = flatten_layer(Up_84532, Fla168), 
LMul56665 = multiply_layer([[[[0.601, 0.1708]]], [[[0.3156, 0.6754]]]], Mul56665), 
LGlo98231 = global_average_pooling1D_layer(Mul56665, Glo98231), 
LCon99593 = concatenate_layer([Glo98231,[[0.6299, 0.3079, 0.8396, 0.705, 0.7315, 0.1227]]], 1, Con99593), 
LMax5301 = maximum_layer([Fla168,Con99593], Max5301), 
exec_layers([LMax58800,LRes548,LRes79051,LUp_84532,LFla168,LMul56665,LGlo98231,LCon99593,LMax5301],["Max58800","Res548","Res79051","Up_84532","Fla168","Mul56665","Glo98231","Con99593","Max5301"],Max5301,"Max5301")

Actual (Unparsed): [[0.8360000, 0.8032000, 0.8360000, 0.8032000, 0.8396000, 0.7050000, 0.7315000, 0.4512000]]

Expected (Unparsed): [[0.836,0.8032,0.836,0.8032,0.8396,0.705,0.7315,0.4512]]

Actual:   [[0.836, 0.8032, 0.836, 0.8032, 0.8396, 0.705, 0.7315, 0.4512]]

Expected: [[0.836, 0.8032, 0.836, 0.8032, 0.8396, 0.705, 0.7315, 0.4512]]