import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot6883 = tf.keras.layers.Input(shape=([3]))
in1Dot6883 = tf.keras.layers.Input(shape=([3]))
in0Con6574 = tf.keras.layers.Input(shape=([3, 1]))
in0Mas78808 = tf.keras.layers.Input(shape=([3]))
in0Con83014 = tf.keras.layers.Input(shape=([3, 1]))
in0Ave84129 = tf.keras.layers.Input(shape=([1, 2]))

Dot6883 = keras.layers.Dot(axes=(1, 1), name = 'Dot6883', )([in0Dot6883,in1Dot6883])
Res42954 = keras.layers.Reshape((1, 1), name = 'Res42954', )(Dot6883)
Zer82399 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer82399', )(Res42954)
Con6574 = keras.layers.Concatenate(axis=2, name = 'Con6574', )([Zer82399,in0Con6574])
Mas78808 = keras.layers.Masking(mask_value=1, name = 'Mas78808', )(in0Mas78808)
Res26748 = keras.layers.Reshape((3, 1), name = 'Res26748', )(Mas78808)
Con83014 = keras.layers.Concatenate(axis=2, name = 'Con83014', )([Res26748,in0Con83014])
Ave84129 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave84129', )(in0Ave84129)
Zer75484 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer75484', )(Ave84129)
Max72188 = keras.layers.Maximum(name = 'Max72188', )([Con83014,Zer75484])
Ave21479 = keras.layers.Average(name = 'Ave21479', )([Con6574,Max72188])
model = tf.keras.models.Model(inputs=[in0Dot6883,in1Dot6883,in0Con6574,in0Mas78808,in0Con83014,in0Ave84129], outputs=Ave21479)
in0Dot6883 = tf.constant([[0.5143, 0.5044, 0.3704]])
in1Dot6883 = tf.constant([[0.0997, 0.7175, 0.5254]])
in0Con6574 = tf.constant([[[0.8169], [0.1892], [0.6543]]])
in0Mas78808 = tf.constant([[1.4653, 1.2237, 1.1469]])
in0Con83014 = tf.constant([[[0.4459], [0.255], [0.854]]])
in0Ave84129 = tf.constant([[[1.9904, 1.6728]]])
print (np.array2string(model.predict([in0Dot6883,in1Dot6883,in0Con6574,in0Mas78808,in0Con83014,in0Ave84129],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave21479.png')

LDot6883 = dot_layer([[0.5143, 0.5044, 0.3704]], [[0.0997, 0.7175, 0.5254]], 1, 1, Dot6883), 
LRes42954 = reshape_layer(Dot6883, [1, 1], Res42954), 
LZer82399 = zero_padding1D_layer(Res42954, 2, 0, Zer82399), 
LCon6574 = concatenate_layer([Zer82399,[[[0.8169], [0.1892], [0.6543]]]], 2, Con6574), 
LMas78808 = masking_layer([[1.4653, 1.2237, 1.1469]], 1, Mas78808), 
LRes26748 = reshape_layer(Mas78808, [3, 1], Res26748), 
LCon83014 = concatenate_layer([Res26748,[[[0.4459], [0.255], [0.854]]]], 2, Con83014), 
LAve84129 = average_pooling1D_layer([[[1.9904, 1.6728]]], 1, 1, true, Ave84129), 
LZer75484 = zero_padding1D_layer(Ave84129, 2, 0, Zer75484), 
LMax72188 = maximum_layer([Con83014,Zer75484], Max72188), 
LAve21479 = average_layer([Con6574,Max72188], Ave21479), 
exec_layers([LDot6883,LRes42954,LZer82399,LCon6574,LMas78808,LRes26748,LCon83014,LAve84129,LZer75484,LMax72188,LAve21479],["Dot6883","Res42954","Zer82399","Con6574","Mas78808","Res26748","Con83014","Ave84129","Zer75484","Max72188","Ave21479"],Ave21479,"Ave21479")

Actual (Unparsed): [[[0.7326500, 0.6314000], [0.6118500, 0.2221000], [1.2990954, 1.1635500]]]

Expected (Unparsed): [[[0.73265,0.6314],[0.61185,0.22210000000000002],[1.299095435,1.16355]]]

Actual:   [[[0.7327, 0.6314], [0.6119, 0.2221], [1.2991, 1.1636]]]

Expected: [[[0.7327, 0.6314], [0.6119, 0.2222], [1.2991, 1.1636]]]