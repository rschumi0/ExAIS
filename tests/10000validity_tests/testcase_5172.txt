import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave32398 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Ave32398 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Max97724 = tf.keras.layers.Input(shape=([1, 2]))
in1Max97724 = tf.keras.layers.Input(shape=([1, 2]))
in0Con62757 = tf.keras.layers.Input(shape=([1, 6]))

Ave32398 = keras.layers.Average(name = 'Ave32398', )([in0Ave32398,in1Ave32398])
Res59108 = keras.layers.Reshape((1, 2, 4), name = 'Res59108', )(Ave32398)
Res2773 = keras.layers.Reshape((1, 8), name = 'Res2773', )(Res59108)
Max97724 = keras.layers.Maximum(name = 'Max97724', )([in0Max97724,in1Max97724])
Con62757 = keras.layers.Concatenate(axis=2, name = 'Con62757', )([Max97724,in0Con62757])
Add86027 = keras.layers.Add(name = 'Add86027', )([Res2773,Con62757])
model = tf.keras.models.Model(inputs=[in0Ave32398,in1Ave32398,in0Max97724,in1Max97724,in0Con62757], outputs=Add86027)
in0Ave32398 = tf.constant([[[[[0.496, 0.391], [0.6255, 0.7387]], [[0.7618, 0.7111], [0.2256, 0.708]]]]])
in1Ave32398 = tf.constant([[[[[0.447, 0.0715], [0.9162, 0.0381]], [[0.8347, 0.318], [0.7724, 0.7628]]]]])
in0Max97724 = tf.constant([[[0.3123, 0.04]]])
in1Max97724 = tf.constant([[[0.7024, 0.7857]]])
in0Con62757 = tf.constant([[[0.4023, 0.6205, 0.0025, 0.7954, 0.5511, 0.2119]]])
print (np.array2string(model.predict([in0Ave32398,in1Ave32398,in0Max97724,in1Max97724,in0Con62757],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add86027.png')

LAve32398 = average_layer([[[[[[0.496, 0.391], [0.6255, 0.7387]], [[0.7618, 0.7111], [0.2256, 0.708]]]]], [[[[[0.447, 0.0715], [0.9162, 0.0381]], [[0.8347, 0.318], [0.7724, 0.7628]]]]]], Ave32398), 
LRes59108 = reshape_layer(Ave32398, [1, 2, 4], Res59108), 
LRes2773 = reshape_layer(Res59108, [1, 8], Res2773), 
LMax97724 = maximum_layer([[[[0.3123, 0.04]]], [[[0.7024, 0.7857]]]], Max97724), 
LCon62757 = concatenate_layer([Max97724,[[[0.4023, 0.6205, 0.0025, 0.7954, 0.5511, 0.2119]]]], 2, Con62757), 
LAdd86027 = add_layer([Res2773,Con62757], Add86027), 
exec_layers([LAve32398,LRes59108,LRes2773,LMax97724,LCon62757,LAdd86027],["Ave32398","Res59108","Res2773","Max97724","Con62757","Add86027"],Add86027,"Add86027")

Actual (Unparsed): [[[1.1739000, 1.0169500, 1.1731500, 1.0089000, 0.8007500, 1.3099500, 1.0501000, 0.9473000]]]

Expected (Unparsed): [[[1.1739000000000002,1.01695,1.1731500000000001,1.0089000000000001,0.80075,1.30995,1.0501,0.9473]]]

Actual:   [[[1.1739, 1.017, 1.1732, 1.0089, 0.8008, 1.31, 1.0501, 0.9473]]]

Expected: [[[1.174, 1.017, 1.1732, 1.009, 0.8008, 1.31, 1.0501, 0.9473]]]