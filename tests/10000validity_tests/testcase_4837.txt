import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add47996 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add47996 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con26048 = tf.keras.layers.Input(shape=([2, 2]))
in0Add16997 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Add16997 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Add47996 = keras.layers.Add(name = 'Add47996', )([in0Add47996,in1Add47996])
Res24545 = keras.layers.Reshape((2, 2), name = 'Res24545', )(Add47996)
Con26048 = keras.layers.Concatenate(axis=2, name = 'Con26048', )([Res24545,in0Con26048])
Add16997 = keras.layers.Add(name = 'Add16997', )([in0Add16997,in1Add16997])
Res81426 = keras.layers.Reshape((1, 1, 4), name = 'Res81426', )(Add16997)
Res81705 = keras.layers.Reshape((1, 4), name = 'Res81705', )(Res81426)
Dot4640 = keras.layers.Dot(axes=(2, 2), name = 'Dot4640', )([Con26048,Res81705])
model = tf.keras.models.Model(inputs=[in0Add47996,in1Add47996,in0Con26048,in0Add16997,in1Add16997], outputs=Dot4640)
in0Add47996 = tf.constant([[[[0.8817], [0.0996]], [[0.7995], [0.0433]]]])
in1Add47996 = tf.constant([[[[0.3385], [0.0055]], [[0.9327], [0.8454]]]])
in0Con26048 = tf.constant([[[0.3812, 0.7401], [0.2285, 0.0676]]])
in0Add16997 = tf.constant([[[[[0.96, 0.1267], [0.2071, 0.5018]]]]])
in1Add16997 = tf.constant([[[[[0.329, 0.6222], [0.2132, 0.8103]]]]])
print (np.array2string(model.predict([in0Add47996,in1Add47996,in0Con26048,in0Add16997,in1Add16997],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot4640.png')

LAdd47996 = add_layer([[[[[0.8817], [0.0996]], [[0.7995], [0.0433]]]], [[[[0.3385], [0.0055]], [[0.9327], [0.8454]]]]], Add47996), 
LRes24545 = reshape_layer(Add47996, [2, 2], Res24545), 
LCon26048 = concatenate_layer([Res24545,[[[0.3812, 0.7401], [0.2285, 0.0676]]]], 2, Con26048), 
LAdd16997 = add_layer([[[[[[0.96, 0.1267], [0.2071, 0.5018]]]]], [[[[[0.329, 0.6222], [0.2132, 0.8103]]]]]], Add16997), 
LRes81426 = reshape_layer(Add16997, [1, 1, 4], Res81426), 
LRes81705 = reshape_layer(Res81426, [1, 4], Res81705), 
LDot4640 = dot_layer(Con26048,Res81705, 2, 2, Dot4640), 
exec_layers([LAdd47996,LRes24545,LCon26048,LAdd16997,LRes81426,LRes81705,LDot4640],["Add47996","Res24545","Con26048","Add16997","Res81426","Res81705","Dot4640"],Dot4640,"Dot4640")

Actual (Unparsed): [[[2.7828507], [3.0830896]]]

Expected (Unparsed): [[[2.78285076],[3.08308974]]]

Actual:   [[[2.7829], [3.0831]]]

Expected: [[[2.7829], [3.0831]]]