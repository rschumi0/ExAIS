import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max50448 = tf.keras.layers.Input(shape=([1, 1]))
in1Max50448 = tf.keras.layers.Input(shape=([1, 1]))
in0Con90356 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Max90188 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max90188 = tf.keras.layers.Input(shape=([2, 2, 2]))

Max50448 = keras.layers.Maximum(name = 'Max50448', )([in0Max50448,in1Max50448])
Res85091 = keras.layers.Reshape((1, 1, 1), name = 'Res85091', )(Max50448)
Zer90416 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer90416', )(Res85091)
Con90356 = keras.layers.Concatenate(axis=3, name = 'Con90356', )([Zer90416,in0Con90356])
Max90188 = keras.layers.Maximum(name = 'Max90188', )([in0Max90188,in1Max90188])
Sub31990 = keras.layers.Subtract(name = 'Sub31990', )([Con90356,Max90188])
Res32277 = keras.layers.Reshape((2, 4), name = 'Res32277', )(Sub31990)
Max55406 = keras.layers.MaxPool1D(pool_size=(2), name = 'Max55406', )(Res32277)
model = tf.keras.models.Model(inputs=[in0Max50448,in1Max50448,in0Con90356,in0Max90188,in1Max90188], outputs=Max55406)
in0Max50448 = tf.constant([[[0.4006]]])
in1Max50448 = tf.constant([[[0.8413]]])
in0Con90356 = tf.constant([[[[0.1751], [0.789]], [[0.0832], [0.2275]]]])
in0Max90188 = tf.constant([[[[0.0997, 0.4541], [0.8828, 0.2543]], [[0.268, 0.7542], [0.1615, 0.1045]]]])
in1Max90188 = tf.constant([[[[0.9463, 0.6154], [0.9862, 0.8079]], [[0.8809, 0.1367], [0.8311, 0.9475]]]])
print (np.array2string(model.predict([in0Max50448,in1Max50448,in0Con90356,in0Max90188,in1Max90188],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max55406.png')

LMax50448 = maximum_layer([[[[0.4006]]], [[[0.8413]]]], Max50448), 
LRes85091 = reshape_layer(Max50448, [1, 1, 1], Res85091), 
LZer90416 = zero_padding2D_layer(Res85091, 1, 0, 1, 0, Zer90416), 
LCon90356 = concatenate_layer([Zer90416,[[[[0.1751], [0.789]], [[0.0832], [0.2275]]]]], 3, Con90356), 
LMax90188 = maximum_layer([[[[[0.0997, 0.4541], [0.8828, 0.2543]], [[0.268, 0.7542], [0.1615, 0.1045]]]], [[[[0.9463, 0.6154], [0.9862, 0.8079]], [[0.8809, 0.1367], [0.8311, 0.9475]]]]], Max90188), 
LSub31990 = subtract_layer(Con90356,Max90188, Sub31990), 
LRes32277 = reshape_layer(Sub31990, [2, 4], Res32277), 
LMax55406 = max_pool1D_layer(Res32277, 2, Max55406), 
exec_layers([LMax50448,LRes85091,LZer90416,LCon90356,LMax90188,LSub31990,LRes32277,LMax55406],["Max50448","Res85091","Zer90416","Con90356","Max90188","Sub31990","Res32277","Max55406"],Max55406,"Max55406")

Actual (Unparsed): [[[-0.8809000, -0.4403000, 0.0102000, -0.0189000]]]

Expected (Unparsed): [[[-0.8809,-0.4402999999999999,0.010200000000000098,-0.018899999999999917]]]

Actual:   [[[-0.8809, -0.4403, 0.0102, -0.0189]]]

Expected: [[[-0.8809, -0.4402, 0.0103, -0.0188]]]