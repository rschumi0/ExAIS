import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub46990 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub46990 = tf.keras.layers.Input(shape=([3, 3]))
in0Up_19548 = tf.keras.layers.Input(shape=([4, 2]))
in0Con56337 = tf.keras.layers.Input(shape=([4, 1]))
in0Con59672 = tf.keras.layers.Input(shape=([4, 1]))
in0ReL58397 = tf.keras.layers.Input(shape=([1, 2]))
in0Mul14776 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Mul14776 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Sub46990 = keras.layers.Subtract(name = 'Sub46990', )([in0Sub46990,in1Sub46990])
Zer28478 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer28478', )(Sub46990)
Up_19548 = keras.layers.UpSampling1D(size=(1), name = 'Up_19548', )(in0Up_19548)
Lay52140 = keras.layers.LayerNormalization(axis=2, epsilon=1.1170291658088443, name = 'Lay52140', )(Up_19548)
Con56337 = keras.layers.Concatenate(axis=2, name = 'Con56337', )([Lay52140,in0Con56337])
Add43063 = keras.layers.Add(name = 'Add43063', )([Zer28478,Con56337])
Con59672 = keras.layers.Concatenate(axis=2, name = 'Con59672', )([Add43063,in0Con59672])
ReL58397 = keras.layers.ReLU(max_value=7.883847279945098, negative_slope=7.607401048113637, threshold=8.804530813574038, name = 'ReL58397', input_shape=(1, 2))(in0ReL58397)
Res35549 = keras.layers.Reshape((1, 2, 1), name = 'Res35549', )(ReL58397)
Res86854 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res86854', )(Res35549)
Zer31441 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer31441', )(Res86854)
Mul14776 = keras.layers.Multiply(name = 'Mul14776', )([in0Mul14776,in1Mul14776])
Sub85230 = keras.layers.Subtract(name = 'Sub85230', )([Zer31441,Mul14776])
Res2822 = keras.layers.Reshape((2, 2, 1), name = 'Res2822', )(Sub85230)
Res33098 = keras.layers.Reshape((2, 2), name = 'Res33098', )(Res2822)
Up_60219 = keras.layers.UpSampling1D(size=(1), name = 'Up_60219', )(Res33098)
Zer54760 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer54760', )(Up_60219)
Dot1329 = keras.layers.Dot(axes=(2, 1), name = 'Dot1329', )([Con59672,Zer54760])
model = tf.keras.models.Model(inputs=[in0Sub46990,in1Sub46990,in0Up_19548,in0Con56337,in0Con59672,in0ReL58397,in0Mul14776,in1Mul14776], outputs=Dot1329)
in0Sub46990 = tf.constant([[[0.5843, 0.3362, 0.6432], [0.4519, 0.5103, 0.3232], [0.7255, 0.0505, 0.9784]]])
in1Sub46990 = tf.constant([[[0.8201, 0.9128, 0.2097], [0.8642, 0.7315, 0.942], [0.2028, 0.9855, 0.7563]]])
in0Up_19548 = tf.constant([[[1.7826, 1.0323], [1.9744, 1.2196], [1.2039, 1.1872], [1.0204, 1.3876]]])
in0Con56337 = tf.constant([[[0.7122], [0.4812], [0.6485], [0.794]]])
in0Con59672 = tf.constant([[[0.8168], [0.2129], [0.1268], [0.1521]]])
in0ReL58397 = tf.constant([[[0.5318, 0.604]]])
in0Mul14776 = tf.constant([[[[[0.7935]], [[0.904]]], [[[0.9416]], [[0.4642]]]]])
in1Mul14776 = tf.constant([[[[[0.376]], [[0.7345]]], [[[0.1656]], [[0.8471]]]]])
print (np.array2string(model.predict([in0Sub46990,in1Sub46990,in0Up_19548,in0Con56337,in0Con59672,in0ReL58397,in0Mul14776,in1Mul14776],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot1329.png')

LSub46990 = subtract_layer([[[0.5843, 0.3362, 0.6432], [0.4519, 0.5103, 0.3232], [0.7255, 0.0505, 0.9784]]], [[[0.8201, 0.9128, 0.2097], [0.8642, 0.7315, 0.942], [0.2028, 0.9855, 0.7563]]], Sub46990), 
LZer28478 = zero_padding1D_layer(Sub46990, 1, 0, Zer28478), 
LUp_19548 = up_sampling1D_layer([[[1.7826, 1.0323], [1.9744, 1.2196], [1.2039, 1.1872], [1.0204, 1.3876]]], 1, Up_19548), 
LLay52140 = layer_normalization_layer(Up_19548, 2, 1.1170291658088443, Lay52140), 
LCon56337 = concatenate_layer([Lay52140,[[[0.7122], [0.4812], [0.6485], [0.794]]]], 2, Con56337), 
LAdd43063 = add_layer([Zer28478,Con56337], Add43063), 
LCon59672 = concatenate_layer([Add43063,[[[0.8168], [0.2129], [0.1268], [0.1521]]]], 2, Con59672), 
LReL58397 = relu_layer([[[0.5318, 0.604]]], 7.883847279945098, 7.607401048113637, 8.804530813574038, ReL58397), 
LRes35549 = reshape_layer(ReL58397, [1, 2, 1], Res35549), 
LRes86854 = reshape_layer(Res35549, [1, 2, 1, 1], Res86854), 
LZer31441 = zero_padding3D_layer(Res86854, 1, 0, 0, 0, 0, 0, Zer31441), 
LMul14776 = multiply_layer([[[[[[0.7935]], [[0.904]]], [[[0.9416]], [[0.4642]]]]], [[[[[0.376]], [[0.7345]]], [[[0.1656]], [[0.8471]]]]]], Mul14776), 
LSub85230 = subtract_layer(Zer31441,Mul14776, Sub85230), 
LRes2822 = reshape_layer(Sub85230, [2, 2, 1], Res2822), 
LRes33098 = reshape_layer(Res2822, [2, 2], Res33098), 
LUp_60219 = up_sampling1D_layer(Res33098, 1, Up_60219), 
LZer54760 = zero_padding1D_layer(Up_60219, 2, 0, Zer54760), 
LDot1329 = dot_layer(Con59672,Zer54760, 2, 1, Dot1329), 
exec_layers([LSub46990,LZer28478,LUp_19548,LLay52140,LCon56337,LAdd43063,LCon59672,LReL58397,LRes35549,LRes86854,LZer31441,LMul14776,LSub85230,LRes2822,LRes33098,LUp_60219,LZer54760,LDot1329],["Sub46990","Zer28478","Up_19548","Lay52140","Con56337","Add43063","Con59672","ReL58397","Res35549","Res86854","Zer31441","Mul14776","Sub85230","Res2822","Res33098","Up_60219","Zer54760","Dot1329"],Dot1329,"Dot1329")

Actual (Unparsed): [[[-51.7443277, -51.7499223], [-13.7047480, -13.9727754], [-8.0086618, -7.9799647], [-9.8991347, -10.2232043]]]

Expected (Unparsed): [[[-51.74432764912478,-51.749922243458414],[-13.704748076872118,-13.972775490643164],[-8.00866176398264,-7.9799645703312025],[-9.899134845937855,-10.223204481845867]]]

Actual:   [[[-51.7443, -51.7499], [-13.7047, -13.9727], [-8.0086, -7.9799], [-9.8991, -10.2232]]]

Expected: [[[-51.7443, -51.7499], [-13.7047, -13.9727], [-8.0086, -7.9799], [-9.8991, -10.2232]]]