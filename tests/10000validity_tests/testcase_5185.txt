import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con23432 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Con23432 = keras.layers.Conv3D(2, (1, 1, 2),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con23432', )(in0Con23432)
Glo76059 = keras.layers.GlobalAveragePooling3D(name = 'Glo76059', )(Con23432)
Res96712 = keras.layers.Reshape((2, 1), name = 'Res96712', )(Glo76059)
Res59700 = keras.layers.Reshape((2, 1, 1), name = 'Res59700', )(Res96712)
Zer49004 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer49004', )(Res59700)
model = tf.keras.models.Model(inputs=[in0Con23432], outputs=Zer49004)
w = model.get_layer('Con23432').get_weights() 
w[0] = np.array([[[[[0.5526, 0.6848]], [[0.1957, 0.297]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con23432').set_weights(w) 
in0Con23432 = tf.constant([[[[[0.706], [0.6171]]]]])
print (np.array2string(model.predict([in0Con23432],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer49004.png')

LCon23432 = conv3D_layer([[[[[0.706], [0.6171]]]]], 1, 1, 2,[[[[[0.5526, 0.6848]], [[0.1957, 0.297]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con23432), 
LGlo76059 = global_average_pooling3D_layer(Con23432, Glo76059), 
LRes96712 = reshape_layer(Glo76059, [2, 1], Res96712), 
LRes59700 = reshape_layer(Res96712, [2, 1, 1], Res59700), 
LZer49004 = zero_padding2D_layer(Res59700, 1, 1, 1, 1, Zer49004), 
exec_layers([LCon23432,LGlo76059,LRes96712,LRes59700,LZer49004],["Con23432","Glo76059","Res96712","Res59700","Zer49004"],Zer49004,"Zer49004")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.4259558], [0.0000000]], [[0.0000000], [0.5446688], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[0.425955765],[0]],[[0],[0.54466879],[0]],[[0],[0],[0]]]]

Actual:   [[[[0], [0], [0]], [[0], [0.426], [0]], [[0], [0.5447], [0]], [[0], [0], [0]]]]

Expected: [[[[0], [0], [0]], [[0], [0.426], [0]], [[0], [0.5447], [0]], [[0], [0], [0]]]]