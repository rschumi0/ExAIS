import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave3275 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave3275 = tf.keras.layers.Input(shape=([2, 1, 1]))

Ave3275 = keras.layers.Average(name = 'Ave3275', )([in0Ave3275,in1Ave3275])
Glo12192 = keras.layers.GlobalMaxPool2D(name = 'Glo12192', )(Ave3275)
Res2064 = keras.layers.Reshape((1, 1), name = 'Res2064', )(Glo12192)
Res16494 = keras.layers.Reshape((1, 1, 1), name = 'Res16494', )(Res2064)
Res88339 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res88339', )(Res16494)
Con17116 = keras.layers.Conv3D(2, (1, 1, 1),strides=(7, 2, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con17116', )(Res88339)
model = tf.keras.models.Model(inputs=[in0Ave3275,in1Ave3275], outputs=Con17116)
w = model.get_layer('Con17116').get_weights() 
w[0] = np.array([[[[[0.2237, 0.293]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con17116').set_weights(w) 
in0Ave3275 = tf.constant([[[[0.9281]], [[0.9009]]]])
in1Ave3275 = tf.constant([[[[0.6734]], [[0.6999]]]])
print (np.array2string(model.predict([in0Ave3275,in1Ave3275],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con17116.png')

LAve3275 = average_layer([[[[[0.9281]], [[0.9009]]]], [[[[0.6734]], [[0.6999]]]]], Ave3275), 
LGlo12192 = global_max_pool2D_layer(Ave3275, Glo12192), 
LRes2064 = reshape_layer(Glo12192, [1, 1], Res2064), 
LRes16494 = reshape_layer(Res2064, [1, 1, 1], Res16494), 
LRes88339 = reshape_layer(Res16494, [1, 1, 1, 1], Res88339), 
LCon17116 = conv3D_layer(Res88339, 1, 1, 1,[[[[[0.2237, 0.293]]]]],[0, 0], 7, 2, 1, true, 1, 1, 1, Con17116), 
exec_layers([LAve3275,LGlo12192,LRes2064,LRes16494,LRes88339,LCon17116],["Ave3275","Glo12192","Res2064","Res16494","Res88339","Con17116"],Con17116,"Con17116")

Actual (Unparsed): [[[[[0.1791278, 0.2346197]]]]]

Expected (Unparsed): [[[[[0.17912777500000002,0.23461975000000002]]]]]

Actual:   [[[[[0.1792, 0.2347]]]]]

Expected: [[[[[0.1792, 0.2347]]]]]