import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave89504 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot60872 = tf.keras.layers.Input(shape=([3]))
in1Dot60872 = tf.keras.layers.Input(shape=([3]))
in0Con7830 = tf.keras.layers.Input(shape=([2]))
in0Up_37595 = tf.keras.layers.Input(shape=([1, 1, 3]))

Ave89504 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave89504', )(in0Ave89504)
Fla19846 = keras.layers.Flatten(name = 'Fla19846', )(Ave89504)
Dot60872 = keras.layers.Dot(axes=(1, 1), name = 'Dot60872', )([in0Dot60872,in1Dot60872])
Mul60565 = keras.layers.Multiply(name = 'Mul60565', )([Fla19846,Dot60872])
Res54201 = keras.layers.Reshape((1, 1), name = 'Res54201', )(Mul60565)
Res50018 = keras.layers.Reshape((1, 1, 1), name = 'Res50018', )(Res54201)
Res70474 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res70474', )(Res50018)
Glo9546 = keras.layers.GlobalMaxPool3D(name = 'Glo9546', )(Res70474)
Con7830 = keras.layers.Concatenate(axis=1, name = 'Con7830', )([Glo9546,in0Con7830])
Up_37595 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_37595', )(in0Up_37595)
Glo30656 = keras.layers.GlobalAveragePooling2D(name = 'Glo30656', )(Up_37595)
Mul3663 = keras.layers.Multiply(name = 'Mul3663', )([Con7830,Glo30656])
model = tf.keras.models.Model(inputs=[in0Ave89504,in0Dot60872,in1Dot60872,in0Con7830,in0Up_37595], outputs=Mul3663)
in0Ave89504 = tf.constant([[[1.4741]]])
in0Dot60872 = tf.constant([[0.3515, 0.6479, 0.1319]])
in1Dot60872 = tf.constant([[0.9037, 0.7944, 0.7737]])
in0Con7830 = tf.constant([[0.2412, 0.7344]])
in0Up_37595 = tf.constant([[[[1.315, 1.3677, 1.1322]]]])
print (np.array2string(model.predict([in0Ave89504,in0Dot60872,in1Dot60872,in0Con7830,in0Up_37595],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul3663.png')

LAve89504 = average_pooling1D_layer([[[1.4741]]], 1, Ave89504), 
LFla19846 = flatten_layer(Ave89504, Fla19846), 
LDot60872 = dot_layer([[0.3515, 0.6479, 0.1319]], [[0.9037, 0.7944, 0.7737]], 1, 1, Dot60872), 
LMul60565 = multiply_layer([Fla19846,Dot60872], Mul60565), 
LRes54201 = reshape_layer(Mul60565, [1, 1], Res54201), 
LRes50018 = reshape_layer(Res54201, [1, 1, 1], Res50018), 
LRes70474 = reshape_layer(Res50018, [1, 1, 1, 1], Res70474), 
LGlo9546 = global_max_pool3D_layer(Res70474, Glo9546), 
LCon7830 = concatenate_layer([Glo9546,[[0.2412, 0.7344]]], 1, Con7830), 
LUp_37595 = up_sampling2D_layer([[[[1.315, 1.3677, 1.1322]]]], 1, 1, Up_37595), 
LGlo30656 = global_average_pooling2D_layer(Up_37595, Glo30656), 
LMul3663 = multiply_layer([Con7830,Glo30656], Mul3663), 
exec_layers([LAve89504,LFla19846,LDot60872,LMul60565,LRes54201,LRes50018,LRes70474,LGlo9546,LCon7830,LUp_37595,LGlo30656,LMul3663],["Ave89504","Fla19846","Dot60872","Mul60565","Res54201","Res50018","Res70474","Glo9546","Con7830","Up_37595","Glo30656","Mul3663"],Mul3663,"Mul3663")

Actual (Unparsed): [[1.8112668, 0.3298892, 0.8314877]]

Expected (Unparsed): [[1.81126682757961,0.32988924,0.8314876800000002]]

Actual:   [[1.8113, 0.3299, 0.8315]]

Expected: [[1.8113, 0.3299, 0.8315]]