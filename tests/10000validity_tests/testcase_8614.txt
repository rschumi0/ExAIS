import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave95724 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con17503 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Min27930 = tf.keras.layers.Input(shape=([1, 1]))
in1Min27930 = tf.keras.layers.Input(shape=([1, 1]))
in0Con48550 = tf.keras.layers.Input(shape=([2, 2, 3]))
in0Thr19576 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Min81992 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Min81992 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con33999 = tf.keras.layers.Input(shape=([2, 2, 3]))
in0Dot44593 = tf.keras.layers.Input(shape=([2]))
in1Dot44593 = tf.keras.layers.Input(shape=([2]))
in0Con76178 = tf.keras.layers.Input(shape=([15]))

Ave95724 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave95724', )(in0Ave95724)
Sep59536 = keras.layers.SeparableConv2D(2, (1, 1),strides=(1, 1), padding='valid', name = 'Sep59536', )(Ave95724)
Zer88369 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer88369', )(Sep59536)
Con17503 = keras.layers.Concatenate(axis=3, name = 'Con17503', )([Zer88369,in0Con17503])
Min27930 = keras.layers.Minimum(name = 'Min27930', )([in0Min27930,in1Min27930])
Res85335 = keras.layers.Reshape((1, 1, 1), name = 'Res85335', )(Min27930)
Zer41837 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer41837', )(Res85335)
Con48550 = keras.layers.Concatenate(axis=3, name = 'Con48550', )([Zer41837,in0Con48550])
Thr19576 = keras.layers.ThresholdedReLU(theta=8.571805536956955, name = 'Thr19576', input_shape=(2, 2, 2, 2))(in0Thr19576)
Res56213 = keras.layers.Reshape((2, 2, 4), name = 'Res56213', )(Thr19576)
Min81992 = keras.layers.Minimum(name = 'Min81992', )([in0Min81992,in1Min81992])
Zer17146 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer17146', )(Min81992)
Con33999 = keras.layers.Concatenate(axis=3, name = 'Con33999', )([Zer17146,in0Con33999])
Add37799 = keras.layers.Add(name = 'Add37799', )([Res56213,Con33999])
Mul47445 = keras.layers.Multiply(name = 'Mul47445', )([Con48550,Add37799])
Max88459 = keras.layers.Maximum(name = 'Max88459', )([Con17503,Mul47445])
Res37585 = keras.layers.Reshape((2, 8), name = 'Res37585', )(Max88459)
Fla25905 = keras.layers.Flatten(name = 'Fla25905', )(Res37585)
Dot44593 = keras.layers.Dot(axes=(1, 1), name = 'Dot44593', )([in0Dot44593,in1Dot44593])
Con76178 = keras.layers.Concatenate(axis=1, name = 'Con76178', )([Dot44593,in0Con76178])
Sub5003 = keras.layers.Subtract(name = 'Sub5003', )([Fla25905,Con76178])
model = tf.keras.models.Model(inputs=[in0Ave95724,in0Con17503,in0Min27930,in1Min27930,in0Con48550,in0Thr19576,in0Min81992,in1Min81992,in0Con33999,in0Dot44593,in1Dot44593,in0Con76178], outputs=Sub5003)
w = model.get_layer('Sep59536').get_weights() 
w[0] = np.array([[[[0.0832]]]])
w[1] = np.array([[[[0.5349, 0.2967]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep59536').set_weights(w) 
in0Ave95724 = tf.constant([[[[1.5665], [1.7346]]]])
in0Con17503 = tf.constant([[[[0.6374, 0.9658], [0.5728, 0.8279]], [[0.7054, 0.3994], [0.2032, 0.7145]]]])
in0Min27930 = tf.constant([[[0.3094]]])
in1Min27930 = tf.constant([[[0.552]]])
in0Con48550 = tf.constant([[[[0.5728, 0.1912, 0.4407], [0.8317, 0.7832, 0.0309]], [[0.6935, 0.551, 0.747], [0.9947, 0.7558, 0.6494]]]])
in0Thr19576 = tf.constant([[[[[0.4812, 0.5732], [0.042, 0.9446]], [[0.9551, 0.1048], [0.2901, 0.0777]]], [[[0.1843, 0.4145], [0.1278, 0.5137]], [[0.3592, 0.6552], [0.6802, 0.0095]]]]])
in0Min81992 = tf.constant([[[[0.2632]]]])
in1Min81992 = tf.constant([[[[0.5685]]]])
in0Con33999 = tf.constant([[[[0.7698, 0.1148, 0.2679], [0.8327, 0.8078, 0.8208]], [[0.6134, 0.7145, 0.7542], [0.2813, 0.3911, 0.3272]]]])
in0Dot44593 = tf.constant([[0.1708, 0.5174]])
in1Dot44593 = tf.constant([[0.2869, 0.13]])
in0Con76178 = tf.constant([[0.8898, 0.9557, 0.6621, 0.4399, 0.8511, 0.7595, 0.3371, 0.9708, 0.2717, 0.9281, 0.3987, 0.6774, 0.4785, 0.185, 0.1539]])
print (np.array2string(model.predict([in0Ave95724,in0Con17503,in0Min27930,in1Min27930,in0Con48550,in0Thr19576,in0Min81992,in1Min81992,in0Con33999,in0Dot44593,in1Dot44593,in0Con76178],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub5003.png')

LAve95724 = average_pooling2D_layer([[[[1.5665], [1.7346]]]], 1, 1, Ave95724), 
LSep59536 = separable_conv2D_layer(Ave95724, 1, 1,[[[[[0.0832]]]],[[[[0.5349, 0.2967]]]]],[0, 0], 1, 1, false, Sep59536), 
LZer88369 = zero_padding2D_layer(Sep59536, 1, 0, 0, 0, Zer88369), 
LCon17503 = concatenate_layer([Zer88369,[[[[0.6374, 0.9658], [0.5728, 0.8279]], [[0.7054, 0.3994], [0.2032, 0.7145]]]]], 3, Con17503), 
LMin27930 = minimum_layer([[[[0.3094]]], [[[0.552]]]], Min27930), 
LRes85335 = reshape_layer(Min27930, [1, 1, 1], Res85335), 
LZer41837 = zero_padding2D_layer(Res85335, 1, 0, 1, 0, Zer41837), 
LCon48550 = concatenate_layer([Zer41837,[[[[0.5728, 0.1912, 0.4407], [0.8317, 0.7832, 0.0309]], [[0.6935, 0.551, 0.747], [0.9947, 0.7558, 0.6494]]]]], 3, Con48550), 
LThr19576 = thresholded_relu_layer([[[[[0.4812, 0.5732], [0.042, 0.9446]], [[0.9551, 0.1048], [0.2901, 0.0777]]], [[[0.1843, 0.4145], [0.1278, 0.5137]], [[0.3592, 0.6552], [0.6802, 0.0095]]]]], 8.571805536956955, Thr19576), 
LRes56213 = reshape_layer(Thr19576, [2, 2, 4], Res56213), 
LMin81992 = minimum_layer([[[[[0.2632]]]], [[[[0.5685]]]]], Min81992), 
LZer17146 = zero_padding2D_layer(Min81992, 1, 0, 1, 0, Zer17146), 
LCon33999 = concatenate_layer([Zer17146,[[[[0.7698, 0.1148, 0.2679], [0.8327, 0.8078, 0.8208]], [[0.6134, 0.7145, 0.7542], [0.2813, 0.3911, 0.3272]]]]], 3, Con33999), 
LAdd37799 = add_layer([Res56213,Con33999], Add37799), 
LMul47445 = multiply_layer([Con48550,Add37799], Mul47445), 
LMax88459 = maximum_layer([Con17503,Mul47445], Max88459), 
LRes37585 = reshape_layer(Max88459, [2, 8], Res37585), 
LFla25905 = flatten_layer(Res37585, Fla25905), 
LDot44593 = dot_layer([[0.1708, 0.5174]], [[0.2869, 0.13]], 1, 1, Dot44593), 
LCon76178 = concatenate_layer([Dot44593,[[0.8898, 0.9557, 0.6621, 0.4399, 0.8511, 0.7595, 0.3371, 0.9708, 0.2717, 0.9281, 0.3987, 0.6774, 0.4785, 0.185, 0.1539]]], 1, Con76178), 
LSub5003 = subtract_layer(Fla25905,Con76178, Sub5003), 
exec_layers([LAve95724,LSep59536,LZer88369,LCon17503,LMin27930,LRes85335,LZer41837,LCon48550,LThr19576,LRes56213,LMin81992,LZer17146,LCon33999,LAdd37799,LMul47445,LMax88459,LRes37585,LFla25905,LDot44593,LCon76178,LSub5003],["Ave95724","Sep59536","Zer88369","Con17503","Min27930","Res85335","Zer41837","Con48550","Thr19576","Res56213","Min81992","Zer17146","Con33999","Add37799","Mul47445","Max88459","Res37585","Fla25905","Dot44593","Con76178","Sub5003"],Sub5003,"Sub5003")

Actual (Unparsed): [[-0.1162645, -0.4488586, -0.3183000, 0.3037000, -0.4399000, -0.1585434, -0.1268311, 0.4908000, -0.9010850, 0.1536929, -0.2227000, 0.1646874, -0.5959659, -0.1986909, 0.1105934, 0.5606000]]

Expected (Unparsed): [[-0.11626452000000001,-0.44885856,-0.3183,0.30369999999999997,-0.4399,-0.15854340999999994,-0.12683104,0.49079999999999996,-0.90108498528,0.15369289999999997,-0.2227,0.16468739999999998,-0.59596592,-0.19869088999999995,0.11059338000000002,0.5606]]

Actual:   [[-0.1162, -0.4488, -0.3183, 0.3037, -0.4399, -0.1585, -0.1268, 0.4908, -0.901, 0.1537, -0.2227, 0.1647, -0.5959, -0.1986, 0.1106, 0.5606]]

Expected: [[-0.1162, -0.4488, -0.3183, 0.3037, -0.4399, -0.1585, -0.1268, 0.4908, -0.901, 0.1537, -0.2227, 0.1647, -0.5959, -0.1986, 0.1106, 0.5606]]