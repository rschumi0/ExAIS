import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot55004 = tf.keras.layers.Input(shape=([3]))
in1Dot55004 = tf.keras.layers.Input(shape=([3]))
in0Mul21803 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Mul21803 = tf.keras.layers.Input(shape=([1, 2, 1]))

Dot55004 = keras.layers.Dot(axes=(1, 1), name = 'Dot55004', )([in0Dot55004,in1Dot55004])
Res52213 = keras.layers.Reshape((1, 1), name = 'Res52213', )(Dot55004)
Res1990 = keras.layers.Reshape((1, 1, 1), name = 'Res1990', )(Res52213)
Zer30790 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer30790', )(Res1990)
Mul21803 = keras.layers.Multiply(name = 'Mul21803', )([in0Mul21803,in1Mul21803])
Sof62208 = keras.layers.Softmax(axis=1, name = 'Sof62208', )(Mul21803)
Max9256 = keras.layers.Maximum(name = 'Max9256', )([Zer30790,Sof62208])
Res44491 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res44491', )(Max9256)
Up_55748 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_55748', )(Res44491)
ReL53277 = keras.layers.ReLU(max_value=7.349357108796088, negative_slope=3.40982153574358, threshold=4.142539450768469, name = 'ReL53277', )(Up_55748)
model = tf.keras.models.Model(inputs=[in0Dot55004,in1Dot55004,in0Mul21803,in1Mul21803], outputs=ReL53277)
in0Dot55004 = tf.constant([[0.0697, 0.2081, 0.5342]])
in1Dot55004 = tf.constant([[0.8831, 0.1868, 0.6089]])
in0Mul21803 = tf.constant([[[[0.5172], [0.4844]]]])
in1Mul21803 = tf.constant([[[[0.8497], [0.2618]]]])
print (np.array2string(model.predict([in0Dot55004,in1Dot55004,in0Mul21803,in1Mul21803],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ReL53277.png')

LDot55004 = dot_layer([[0.0697, 0.2081, 0.5342]], [[0.8831, 0.1868, 0.6089]], 1, 1, Dot55004), 
LRes52213 = reshape_layer(Dot55004, [1, 1], Res52213), 
LRes1990 = reshape_layer(Res52213, [1, 1, 1], Res1990), 
LZer30790 = zero_padding2D_layer(Res1990, 0, 0, 1, 0, Zer30790), 
LMul21803 = multiply_layer([[[[[0.5172], [0.4844]]]], [[[[0.8497], [0.2618]]]]], Mul21803), 
LSof62208 = softmax_layer(Mul21803, 1, Sof62208), 
LMax9256 = maximum_layer([Zer30790,Sof62208], Max9256), 
LRes44491 = reshape_layer(Max9256, [1, 2, 1, 1], Res44491), 
LUp_55748 = up_sampling3D_layer(Res44491, 2, 2, 2, Up_55748), 
LReL53277 = relu_layer(Up_55748, 7.349357108796088, 3.40982153574358, 4.142539450768469, ReL53277), 
exec_layers([LDot55004,LRes52213,LRes1990,LZer30790,LMul21803,LSof62208,LMax9256,LRes44491,LUp_55748,LReL53277],["Dot55004","Res52213","Res1990","Zer30790","Mul21803","Sof62208","Max9256","Res44491","Up_55748","ReL53277"],ReL53277,"ReL53277")

Actual (Unparsed): [[[[[-10.7154987], [-10.7154987]], [[-10.7154987], [-10.7154987]], [[-10.7154987], [-10.7154987]], [[-10.7154987], [-10.7154987]]], [[[-10.7154987], [-10.7154987]], [[-10.7154987], [-10.7154987]], [[-10.7154987], [-10.7154987]], [[-10.7154987], [-10.7154987]]]]]

Expected (Unparsed): [[[[[-10.715498696154128],[-10.715498696154128]],[[-10.715498696154128],[-10.715498696154128]],[[-10.715498696154128],[-10.715498696154128]],[[-10.715498696154128],[-10.715498696154128]]],[[[-10.715498696154128],[-10.715498696154128]],[[-10.715498696154128],[-10.715498696154128]],[[-10.715498696154128],[-10.715498696154128]],[[-10.715498696154128],[-10.715498696154128]]]]]

Actual:   [[[[[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]]], [[[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]]]]]

Expected: [[[[[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]]], [[[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]], [[-10.7154], [-10.7154]]]]]