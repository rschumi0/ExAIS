import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot68169 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot68169 = tf.keras.layers.Input(shape=([3, 3]))
in0Ave98426 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave98426 = tf.keras.layers.Input(shape=([2, 1, 1]))

Dot68169 = keras.layers.Dot(axes=(2, 2), name = 'Dot68169', )([in0Dot68169,in1Dot68169])
Glo49342 = keras.layers.GlobalMaxPool1D(name = 'Glo49342', )(Dot68169)
Res45686 = keras.layers.Reshape((3, 1), name = 'Res45686', )(Glo49342)
Res55345 = keras.layers.Reshape((3, 1, 1), name = 'Res55345', )(Res45686)
Ave98426 = keras.layers.Average(name = 'Ave98426', )([in0Ave98426,in1Ave98426])
Zer64593 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer64593', )(Ave98426)
Min7904 = keras.layers.Minimum(name = 'Min7904', )([Res55345,Zer64593])
model = tf.keras.models.Model(inputs=[in0Dot68169,in1Dot68169,in0Ave98426,in1Ave98426], outputs=Min7904)
in0Dot68169 = tf.constant([[[0.1384, 0.8761, 0.3172], [0.8104, 0.9818, 0.3831], [0.5861, 0.0843, 0.0446]]])
in1Dot68169 = tf.constant([[[0.6985, 0.0266, 0.0331], [0.7968, 0.5393, 0.082], [0.1644, 0.48, 0.1018]]])
in0Ave98426 = tf.constant([[[[0.3435]], [[0.3714]]]])
in1Ave98426 = tf.constant([[[[0.4184]], [[0.4103]]]])
print (np.array2string(model.predict([in0Dot68169,in1Dot68169,in0Ave98426,in1Ave98426],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min7904.png')

LDot68169 = dot_layer([[[0.1384, 0.8761, 0.3172], [0.8104, 0.9818, 0.3831], [0.5861, 0.0843, 0.0446]]], [[[0.6985, 0.0266, 0.0331], [0.7968, 0.5393, 0.082], [0.1644, 0.48, 0.1018]]], 2, 2, Dot68169), 
LGlo49342 = global_max_pool1D_layer(Dot68169, Glo49342), 
LRes45686 = reshape_layer(Glo49342, [3, 1], Res45686), 
LRes55345 = reshape_layer(Res45686, [3, 1, 1], Res55345), 
LAve98426 = average_layer([[[[[0.3435]], [[0.3714]]]], [[[[0.4184]], [[0.4103]]]]], Ave98426), 
LZer64593 = zero_padding2D_layer(Ave98426, 1, 0, 0, 0, Zer64593), 
LMin7904 = minimum_layer([Res55345,Zer64593], Min7904), 
exec_layers([LDot68169,LGlo49342,LRes45686,LRes55345,LAve98426,LZer64593,LMin7904],["Dot68169","Glo49342","Res45686","Res55345","Ave98426","Zer64593","Min7904"],Min7904,"Min7904")

Actual (Unparsed): [[[[0.0000000]], [[0.3809500]], [[0.3908500]]]]

Expected (Unparsed): [[[[0]],[[0.38095]],[[0.39085000000000003]]]]

Actual:   [[[[0]], [[0.381]], [[0.3909]]]]

Expected: [[[[0]], [[0.381]], [[0.3909]]]]