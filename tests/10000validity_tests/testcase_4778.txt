import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave90332 = tf.keras.layers.Input(shape=([2, 1]))
in0Max93686 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Max43783 = tf.keras.layers.Input(shape=([1, 2]))
in0Add10864 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add10864 = tf.keras.layers.Input(shape=([1, 1, 1]))

Ave90332 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave90332', )(in0Ave90332)
ELU23020 = keras.layers.ELU(alpha=9.823858167316327, name = 'ELU23020', )(Ave90332)
Res21482 = keras.layers.Reshape((2, 1, 1), name = 'Res21482', )(ELU23020)
Max93686 = keras.layers.MaxPool2D(pool_size=(2, 1), name = 'Max93686', )(in0Max93686)
Zer18837 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer18837', )(Max93686)
Max96394 = keras.layers.Maximum(name = 'Max96394', )([Res21482,Zer18837])
Zer55084 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer55084', )(Max96394)
Max43783 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max43783', )(in0Max43783)
Res9444 = keras.layers.Reshape((1, 2, 1), name = 'Res9444', )(Max43783)
Add10864 = keras.layers.Add(name = 'Add10864', )([in0Add10864,in1Add10864])
Lea44578 = keras.layers.LeakyReLU(alpha=6.879834779947309, name = 'Lea44578', )(Add10864)
Zer61248 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer61248', )(Lea44578)
Min1963 = keras.layers.Minimum(name = 'Min1963', )([Res9444,Zer61248])
Zer95101 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer95101', )(Min1963)
Min17830 = keras.layers.Minimum(name = 'Min17830', )([Zer55084,Zer95101])
Dep57841 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep57841', )(Min17830)
model = tf.keras.models.Model(inputs=[in0Ave90332,in0Max93686,in0Max43783,in0Add10864,in1Add10864], outputs=Dep57841)
w = model.get_layer('Dep57841').get_weights() 
w[0] = np.array([[[[0.2479]]]])
w[1] = np.array([0])
model.get_layer('Dep57841').set_weights(w) 
in0Ave90332 = tf.constant([[[1.4054], [1.014]]])
in0Max93686 = tf.constant([[[[1.0075]], [[1.0792]]]])
in0Max43783 = tf.constant([[[1.8875, 1.1822]]])
in0Add10864 = tf.constant([[[[0.8212]]]])
in1Add10864 = tf.constant([[[[0.9617]]]])
print (np.array2string(model.predict([in0Ave90332,in0Max93686,in0Max43783,in0Add10864,in1Add10864],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep57841.png')

LAve90332 = average_pooling1D_layer([[[1.4054], [1.014]]], 1, 1, true, Ave90332), 
LELU23020 = elu_layer(Ave90332, 9.823858167316327, ELU23020), 
LRes21482 = reshape_layer(ELU23020, [2, 1, 1], Res21482), 
LMax93686 = max_pool2D_layer([[[[1.0075]], [[1.0792]]]], 2, 1, Max93686), 
LZer18837 = zero_padding2D_layer(Max93686, 1, 0, 0, 0, Zer18837), 
LMax96394 = maximum_layer([Res21482,Zer18837], Max96394), 
LZer55084 = zero_padding2D_layer(Max96394, 0, 0, 2, 0, Zer55084), 
LMax43783 = max_pool1D_layer([[[1.8875, 1.1822]]], 1, Max43783), 
LRes9444 = reshape_layer(Max43783, [1, 2, 1], Res9444), 
LAdd10864 = add_layer([[[[[0.8212]]]], [[[[0.9617]]]]], Add10864), 
LLea44578 = leaky_relu_layer(Add10864, 6.879834779947309, Lea44578), 
LZer61248 = zero_padding2D_layer(Lea44578, 0, 0, 1, 0, Zer61248), 
LMin1963 = minimum_layer([Res9444,Zer61248], Min1963), 
LZer95101 = zero_padding2D_layer(Min1963, 1, 0, 1, 0, Zer95101), 
LMin17830 = minimum_layer([Zer55084,Zer95101], Min17830), 
LDep57841 = depthwise_conv2D_layer(Min17830, 1, 1,[[[[0.2479]]]],[0], 1, 1, true, Dep57841), 
exec_layers([LAve90332,LELU23020,LRes21482,LMax93686,LZer18837,LMax96394,LZer55084,LMax43783,LRes9444,LAdd10864,LLea44578,LZer61248,LMin1963,LZer95101,LMin17830,LDep57841],["Ave90332","ELU23020","Res21482","Max93686","Zer18837","Max96394","Zer55084","Max43783","Res9444","Add10864","Lea44578","Zer61248","Min1963","Zer95101","Min17830","Dep57841"],Dep57841,"Dep57841")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.2675337]]]]

Expected (Unparsed): [[[[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.26753368]]]]

Actual:   [[[[0], [0], [0]], [[0], [0], [0.2676]]]]

Expected: [[[[0], [0], [0]], [[0], [0], [0.2676]]]]