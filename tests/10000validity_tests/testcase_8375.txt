import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max50971 = tf.keras.layers.Input(shape=([1, 2]))
in1Max50971 = tf.keras.layers.Input(shape=([1, 2]))
in0Sub69913 = tf.keras.layers.Input(shape=([3]))
in1Sub69913 = tf.keras.layers.Input(shape=([3]))

Max50971 = keras.layers.Maximum(name = 'Max50971', )([in0Max50971,in1Max50971])
Res29341 = keras.layers.Reshape((1, 2, 1), name = 'Res29341', )(Max50971)
Cro62178 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro62178', )(Res29341)
Sof94866 = keras.layers.Softmax(axis=1, name = 'Sof94866', )(Cro62178)
Res95199 = keras.layers.Reshape((1, 1), name = 'Res95199', )(Sof94866)
Sub69913 = keras.layers.Subtract(name = 'Sub69913', )([in0Sub69913,in1Sub69913])
Res50579 = keras.layers.Reshape((3, 1), name = 'Res50579', )(Sub69913)
Cro4752 = keras.layers.Cropping1D(cropping=((2, 0)), name = 'Cro4752', )(Res50579)
Ave12393 = keras.layers.Average(name = 'Ave12393', )([Res95199,Cro4752])
model = tf.keras.models.Model(inputs=[in0Max50971,in1Max50971,in0Sub69913,in1Sub69913], outputs=Ave12393)
in0Max50971 = tf.constant([[[0.1487, 0.2742]]])
in1Max50971 = tf.constant([[[0.2301, 0.8534]]])
in0Sub69913 = tf.constant([[0.9629, 0.3584, 0.6945]])
in1Sub69913 = tf.constant([[0.8356, 0.2512, 0.5727]])
print (np.array2string(model.predict([in0Max50971,in1Max50971,in0Sub69913,in1Sub69913],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave12393.png')

LMax50971 = maximum_layer([[[[0.1487, 0.2742]]], [[[0.2301, 0.8534]]]], Max50971), 
LRes29341 = reshape_layer(Max50971, [1, 2, 1], Res29341), 
LCro62178 = cropping2D_layer(Res29341, 0, 0, 1, 0, Cro62178), 
LSof94866 = softmax_layer(Cro62178, 1, Sof94866), 
LRes95199 = reshape_layer(Sof94866, [1, 1], Res95199), 
LSub69913 = subtract_layer([[0.9629, 0.3584, 0.6945]], [[0.8356, 0.2512, 0.5727]], Sub69913), 
LRes50579 = reshape_layer(Sub69913, [3, 1], Res50579), 
LCro4752 = cropping1D_layer(Res50579, 2, 0, Cro4752), 
LAve12393 = average_layer([Res95199,Cro4752], Ave12393), 
exec_layers([LMax50971,LRes29341,LCro62178,LSof94866,LRes95199,LSub69913,LRes50579,LCro4752,LAve12393],["Max50971","Res29341","Cro62178","Sof94866","Res95199","Sub69913","Res50579","Cro4752","Ave12393"],Ave12393,"Ave12393")

Actual (Unparsed): [[[0.5609000]]]

Expected (Unparsed): [[[0.5609]]]

Actual:   [[[0.5609]]]

Expected: [[[0.5609]]]