import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub43219 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in1Sub43219 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in0Dot39132 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot39132 = tf.keras.layers.Input(shape=([3, 3]))
in0Con26965 = tf.keras.layers.Input(shape=([3, 15]))
in0Mul19936 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Mul19936 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Sub43219 = keras.layers.Subtract(name = 'Sub43219', )([in0Sub43219,in1Sub43219])
Res48828 = keras.layers.Reshape((2, 3, 6), name = 'Res48828', )(Sub43219)
Res94775 = keras.layers.Reshape((2, 18), name = 'Res94775', )(Res48828)
Zer58910 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer58910', )(Res94775)
Dot39132 = keras.layers.Dot(axes=(2, 2), name = 'Dot39132', )([in0Dot39132,in1Dot39132])
Ave72156 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave72156', )(Dot39132)
Con26965 = keras.layers.Concatenate(axis=2, name = 'Con26965', )([Ave72156,in0Con26965])
Max24401 = keras.layers.Maximum(name = 'Max24401', )([Zer58910,Con26965])
Res49367 = keras.layers.Reshape((3, 18, 1), name = 'Res49367', )(Max24401)
Res40932 = keras.layers.Reshape((3, 18, 1, 1), name = 'Res40932', )(Res49367)
Mul19936 = keras.layers.Multiply(name = 'Mul19936', )([in0Mul19936,in1Mul19936])
Zer39383 = keras.layers.ZeroPadding3D(padding=((2, 0), (16, 0), (0, 0)), name = 'Zer39383', )(Mul19936)
Mul70810 = keras.layers.Multiply(name = 'Mul70810', )([Res40932,Zer39383])
model = tf.keras.models.Model(inputs=[in0Sub43219,in1Sub43219,in0Dot39132,in1Dot39132,in0Con26965,in0Mul19936,in1Mul19936], outputs=Mul70810)
in0Sub43219 = tf.constant([[[[[0.8796, 0.3163, 0.2011], [0.4883, 0.0141, 0.5834]], [[0.4504, 0.3364, 0.3086], [0.731, 0.3995, 0.0606]], [[0.0754, 0.2573, 0.3467], [0.8242, 0.4075, 0.8214]]], [[[0.0521, 0.824, 0.8586], [0.6396, 0.0609, 0.478]], [[0.3889, 0.6601, 0.3928], [0.3785, 0.6971, 0.3345]], [[0.486, 0.7277, 0.261], [0.3288, 0.4377, 0.5714]]]]])
in1Sub43219 = tf.constant([[[[[0.762, 0.44, 0.3935], [0.6514, 0.086, 0.319]], [[0.4018, 0.1097, 0.7574], [0.3409, 0.1753, 0.5917]], [[0.4925, 0.1052, 0.9745], [0.5227, 0.5362, 0.6062]]], [[[0.2683, 0.4604, 0.5866], [0.0658, 0.9134, 0.4609]], [[0.4044, 0.79, 0.3435], [0.342, 0.6547, 0.1779]], [[0.6619, 0.5705, 0.1347], [0.1892, 0.5911, 0.2613]]]]])
in0Dot39132 = tf.constant([[[0.3048, 0.1618, 0.9476], [0.4321, 0.958, 0.8558], [0.6846, 0.2276, 0.9387]]])
in1Dot39132 = tf.constant([[[0.0004, 0.5701, 0.3011], [0.0533, 0.4179, 0.2559], [0.9185, 0.7016, 0.0103]]])
in0Con26965 = tf.constant([[[0.64, 0.3932, 0.545, 0.1865, 0.5762, 0.6985, 0.4314, 0.2511, 0.4712, 0.9404, 0.051, 0.3123, 0.1376, 0.0742, 0.0694], [0.2651, 0.4026, 0.1433, 0.7335, 0.8745, 0.6948, 0.9457, 0.9116, 0.7386, 0.2195, 0.3177, 0.4782, 0.7622, 0.6546, 0.1647], [0.7435, 0.1679, 0.5024, 0.8937, 0.7841, 0.6763, 0.586, 0.8277, 0.3375, 0.9855, 0.6923, 0.5138, 0.3915, 0.0963, 0.0354]]])
in0Mul19936 = tf.constant([[[[[0.8327]], [[0.6389]]]]])
in1Mul19936 = tf.constant([[[[[0.3046]], [[0.5065]]]]])
print (np.array2string(model.predict([in0Sub43219,in1Sub43219,in0Dot39132,in1Dot39132,in0Con26965,in0Mul19936,in1Mul19936],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul70810.png')

LSub43219 = subtract_layer([[[[[0.8796, 0.3163, 0.2011], [0.4883, 0.0141, 0.5834]], [[0.4504, 0.3364, 0.3086], [0.731, 0.3995, 0.0606]], [[0.0754, 0.2573, 0.3467], [0.8242, 0.4075, 0.8214]]], [[[0.0521, 0.824, 0.8586], [0.6396, 0.0609, 0.478]], [[0.3889, 0.6601, 0.3928], [0.3785, 0.6971, 0.3345]], [[0.486, 0.7277, 0.261], [0.3288, 0.4377, 0.5714]]]]], [[[[[0.762, 0.44, 0.3935], [0.6514, 0.086, 0.319]], [[0.4018, 0.1097, 0.7574], [0.3409, 0.1753, 0.5917]], [[0.4925, 0.1052, 0.9745], [0.5227, 0.5362, 0.6062]]], [[[0.2683, 0.4604, 0.5866], [0.0658, 0.9134, 0.4609]], [[0.4044, 0.79, 0.3435], [0.342, 0.6547, 0.1779]], [[0.6619, 0.5705, 0.1347], [0.1892, 0.5911, 0.2613]]]]], Sub43219), 
LRes48828 = reshape_layer(Sub43219, [2, 3, 6], Res48828), 
LRes94775 = reshape_layer(Res48828, [2, 18], Res94775), 
LZer58910 = zero_padding1D_layer(Res94775, 1, 0, Zer58910), 
LDot39132 = dot_layer([[[0.3048, 0.1618, 0.9476], [0.4321, 0.958, 0.8558], [0.6846, 0.2276, 0.9387]]], [[[0.0004, 0.5701, 0.3011], [0.0533, 0.4179, 0.2559], [0.9185, 0.7016, 0.0103]]], 2, 2, Dot39132), 
LAve72156 = average_pooling1D_layer(Dot39132, 1, 1, true, Ave72156), 
LCon26965 = concatenate_layer([Ave72156,[[[0.64, 0.3932, 0.545, 0.1865, 0.5762, 0.6985, 0.4314, 0.2511, 0.4712, 0.9404, 0.051, 0.3123, 0.1376, 0.0742, 0.0694], [0.2651, 0.4026, 0.1433, 0.7335, 0.8745, 0.6948, 0.9457, 0.9116, 0.7386, 0.2195, 0.3177, 0.4782, 0.7622, 0.6546, 0.1647], [0.7435, 0.1679, 0.5024, 0.8937, 0.7841, 0.6763, 0.586, 0.8277, 0.3375, 0.9855, 0.6923, 0.5138, 0.3915, 0.0963, 0.0354]]]], 2, Con26965), 
LMax24401 = maximum_layer([Zer58910,Con26965], Max24401), 
LRes49367 = reshape_layer(Max24401, [3, 18, 1], Res49367), 
LRes40932 = reshape_layer(Res49367, [3, 18, 1, 1], Res40932), 
LMul19936 = multiply_layer([[[[[[0.8327]], [[0.6389]]]]], [[[[[0.3046]], [[0.5065]]]]]], Mul19936), 
LZer39383 = zero_padding3D_layer(Mul19936, 2, 0, 16, 0, 0, 0, Zer39383), 
LMul70810 = multiply_layer([Res40932,Zer39383], Mul70810), 
exec_layers([LSub43219,LRes48828,LRes94775,LZer58910,LDot39132,LAve72156,LCon26965,LMax24401,LRes49367,LRes40932,LMul19936,LZer39383,LMul70810],["Sub43219","Res48828","Res94775","Zer58910","Dot39132","Ave72156","Con26965","Max24401","Res49367","Res40932","Mul19936","Zer39383","Mul70810"],Mul70810,"Mul70810")

Actual (Unparsed): [[[[[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]]], [[[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]]], [[[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0000000]], [[0.0244256]], [[0.1003492]]]]]

Expected (Unparsed): [[[[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]]],[[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]]],[[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.0]],[[0.024425572445999997]],[[0.10034924378500001]]]]]

Actual:   [[[[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]]], [[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]]], [[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0.0245]], [[0.1004]]]]]

Expected: [[[[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]]], [[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]]], [[[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0]], [[0.0245]], [[0.1004]]]]]