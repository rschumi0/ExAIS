import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max541 = tf.keras.layers.Input(shape=([2, 2]))
in1Max541 = tf.keras.layers.Input(shape=([2, 2]))
in0Con40346 = tf.keras.layers.Input(shape=([4, 4]))
in0Max1060 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max1060 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Dot35472 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot35472 = tf.keras.layers.Input(shape=([3, 3]))
in0Con88827 = tf.keras.layers.Input(shape=([3, 5]))
in0Con65334 = tf.keras.layers.Input(shape=([4, 8, 1, 1]))
in0Add83973 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Add83973 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Max541 = keras.layers.Maximum(name = 'Max541', )([in0Max541,in1Max541])
Res39870 = keras.layers.Reshape((2, 2, 1), name = 'Res39870', )(Max541)
Up_11601 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_11601', )(Res39870)
Res11402 = keras.layers.Reshape((4, 4), name = 'Res11402', )(Up_11601)
Con40346 = keras.layers.Concatenate(axis=2, name = 'Con40346', )([Res11402,in0Con40346])
Max1060 = keras.layers.Maximum(name = 'Max1060', )([in0Max1060,in1Max1060])
Res53256 = keras.layers.Reshape((2, 2, 4), name = 'Res53256', )(Max1060)
Res28997 = keras.layers.Reshape((2, 8), name = 'Res28997', )(Res53256)
Zer7713 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer7713', )(Res28997)
Dot35472 = keras.layers.Dot(axes=(1, 1), name = 'Dot35472', )([in0Dot35472,in1Dot35472])
Con88827 = keras.layers.Concatenate(axis=2, name = 'Con88827', )([Dot35472,in0Con88827])
Sub90900 = keras.layers.Subtract(name = 'Sub90900', )([Zer7713,Con88827])
Zer49003 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer49003', )(Sub90900)
Add9484 = keras.layers.Add(name = 'Add9484', )([Con40346,Zer49003])
Res39098 = keras.layers.Reshape((4, 8, 1), name = 'Res39098', )(Add9484)
Res42954 = keras.layers.Reshape((4, 8, 1, 1), name = 'Res42954', )(Res39098)
Con65334 = keras.layers.Concatenate(axis=4, name = 'Con65334', )([Res42954,in0Con65334])
Add83973 = keras.layers.Add(name = 'Add83973', )([in0Add83973,in1Add83973])
Sof92722 = keras.layers.Softmax(axis=1, name = 'Sof92722', )(Add83973)
Mas10234 = keras.layers.Masking(mask_value=1, name = 'Mas10234', )(Sof92722)
Zer66031 = keras.layers.ZeroPadding3D(padding=((3, 0), (7, 0), (0, 0)), name = 'Zer66031', )(Mas10234)
Min84775 = keras.layers.Minimum(name = 'Min84775', )([Con65334,Zer66031])
model = tf.keras.models.Model(inputs=[in0Max541,in1Max541,in0Con40346,in0Max1060,in1Max1060,in0Dot35472,in1Dot35472,in0Con88827,in0Con65334,in0Add83973,in1Add83973], outputs=Min84775)
in0Max541 = tf.constant([[[0.0391, 0.9691], [0.1804, 0.0509]]])
in1Max541 = tf.constant([[[0.0045, 0.6672], [0.6637, 0.0406]]])
in0Con40346 = tf.constant([[[0.5239, 0.6237, 0.6012, 0.9687], [0.8009, 0.5413, 0.9318, 0.1566], [0.6466, 0.6407, 0.7694, 0.8071], [0.8019, 0.9192, 0.9805, 0.7814]]])
in0Max1060 = tf.constant([[[[[0.6605, 0.579], [0.9531, 0.5925]], [[0.7357, 0.8309], [0.743, 0.1121]]], [[[0.465, 0.8003], [0.1287, 0.8577]], [[0.1703, 0.2814], [0.0755, 0.6017]]]]])
in1Max1060 = tf.constant([[[[[0.3944, 0.6799], [0.8517, 0.7517]], [[0.3149, 0.7018], [0.871, 0.1697]]], [[[0.9828, 0.7399], [0.0988, 0.1757]], [[0.785, 0.1762], [0.4234, 0.257]]]]])
in0Dot35472 = tf.constant([[[0.4155, 0.1151, 0.1648], [0.8153, 0.5494, 0.6453], [0.2015, 0.8799, 0.3677]]])
in1Dot35472 = tf.constant([[[0.5842, 0.0312, 0.0909], [0.0518, 0.8032, 0.4502], [0.4141, 0.3785, 0.6539]]])
in0Con88827 = tf.constant([[[0.1251, 0.2994, 0.6438, 0.5601, 0.1935], [0.8613, 0.369, 0.5285, 0.5465, 0.1836], [0.1138, 0.6286, 0.0658, 0.3042, 0.1564]]])
in0Con65334 = tf.constant([[[[[0.7054]], [[0.6731]], [[0.6375]], [[0.2219]], [[0.1108]], [[0.0787]], [[0.0069]], [[0.7643]]], [[[0.8935]], [[0.597]], [[0.9048]], [[0.7511]], [[0.5756]], [[0.9413]], [[0.44]], [[0.4431]]], [[[0.9397]], [[0.849]], [[0.9646]], [[0.42]], [[0.6891]], [[0.6861]], [[0.9404]], [[0.4031]]], [[[0.1974]], [[0.4421]], [[0.1574]], [[0.2667]], [[0.2252]], [[0.4811]], [[0.9861]], [[0.3977]]]]])
in0Add83973 = tf.constant([[[[[0.4352, 0.9872]]]]])
in1Add83973 = tf.constant([[[[[0.588, 0.7201]]]]])
print (np.array2string(model.predict([in0Max541,in1Max541,in0Con40346,in0Max1060,in1Max1060,in0Dot35472,in1Dot35472,in0Con88827,in0Con65334,in0Add83973,in1Add83973],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min84775.png')

LMax541 = maximum_layer([[[[0.0391, 0.9691], [0.1804, 0.0509]]], [[[0.0045, 0.6672], [0.6637, 0.0406]]]], Max541), 
LRes39870 = reshape_layer(Max541, [2, 2, 1], Res39870), 
LUp_11601 = up_sampling2D_layer(Res39870, 2, 2, Up_11601), 
LRes11402 = reshape_layer(Up_11601, [4, 4], Res11402), 
LCon40346 = concatenate_layer([Res11402,[[[0.5239, 0.6237, 0.6012, 0.9687], [0.8009, 0.5413, 0.9318, 0.1566], [0.6466, 0.6407, 0.7694, 0.8071], [0.8019, 0.9192, 0.9805, 0.7814]]]], 2, Con40346), 
LMax1060 = maximum_layer([[[[[[0.6605, 0.579], [0.9531, 0.5925]], [[0.7357, 0.8309], [0.743, 0.1121]]], [[[0.465, 0.8003], [0.1287, 0.8577]], [[0.1703, 0.2814], [0.0755, 0.6017]]]]], [[[[[0.3944, 0.6799], [0.8517, 0.7517]], [[0.3149, 0.7018], [0.871, 0.1697]]], [[[0.9828, 0.7399], [0.0988, 0.1757]], [[0.785, 0.1762], [0.4234, 0.257]]]]]], Max1060), 
LRes53256 = reshape_layer(Max1060, [2, 2, 4], Res53256), 
LRes28997 = reshape_layer(Res53256, [2, 8], Res28997), 
LZer7713 = zero_padding1D_layer(Res28997, 1, 0, Zer7713), 
LDot35472 = dot_layer([[[0.4155, 0.1151, 0.1648], [0.8153, 0.5494, 0.6453], [0.2015, 0.8799, 0.3677]]], [[[0.5842, 0.0312, 0.0909], [0.0518, 0.8032, 0.4502], [0.4141, 0.3785, 0.6539]]], 1, 1, Dot35472), 
LCon88827 = concatenate_layer([Dot35472,[[[0.1251, 0.2994, 0.6438, 0.5601, 0.1935], [0.8613, 0.369, 0.5285, 0.5465, 0.1836], [0.1138, 0.6286, 0.0658, 0.3042, 0.1564]]]], 2, Con88827), 
LSub90900 = subtract_layer(Zer7713,Con88827, Sub90900), 
LZer49003 = zero_padding1D_layer(Sub90900, 1, 0, Zer49003), 
LAdd9484 = add_layer([Con40346,Zer49003], Add9484), 
LRes39098 = reshape_layer(Add9484, [4, 8, 1], Res39098), 
LRes42954 = reshape_layer(Res39098, [4, 8, 1, 1], Res42954), 
LCon65334 = concatenate_layer([Res42954,[[[[[0.7054]], [[0.6731]], [[0.6375]], [[0.2219]], [[0.1108]], [[0.0787]], [[0.0069]], [[0.7643]]], [[[0.8935]], [[0.597]], [[0.9048]], [[0.7511]], [[0.5756]], [[0.9413]], [[0.44]], [[0.4431]]], [[[0.9397]], [[0.849]], [[0.9646]], [[0.42]], [[0.6891]], [[0.6861]], [[0.9404]], [[0.4031]]], [[[0.1974]], [[0.4421]], [[0.1574]], [[0.2667]], [[0.2252]], [[0.4811]], [[0.9861]], [[0.3977]]]]]], 4, Con65334), 
LAdd83973 = add_layer([[[[[[0.4352, 0.9872]]]]], [[[[[0.588, 0.7201]]]]]], Add83973), 
LSof92722 = softmax_layer(Add83973, 1, Sof92722), 
LMas10234 = masking_layer(Sof92722, 1, Mas10234), 
LZer66031 = zero_padding3D_layer(Mas10234, 3, 0, 7, 0, 0, 0, Zer66031), 
LMin84775 = minimum_layer([Con65334,Zer66031], Min84775), 
exec_layers([LMax541,LRes39870,LUp_11601,LRes11402,LCon40346,LMax1060,LRes53256,LRes28997,LZer7713,LDot35472,LCon88827,LSub90900,LZer49003,LAdd9484,LRes39098,LRes42954,LCon65334,LAdd83973,LSof92722,LMas10234,LZer66031,LMin84775],["Max541","Res39870","Up_11601","Res11402","Con40346","Max1060","Res53256","Res28997","Zer7713","Dot35472","Con88827","Sub90900","Zer49003","Add9484","Res39098","Res42954","Con65334","Add83973","Sof92722","Mas10234","Zer66031","Min84775"],Min84775,"Min84775")

Actual (Unparsed): [[[[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[-0.3293088, 0.0000000]], [[-0.7049803, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[-0.1025000, 0.0000000]], [[0.0000000, 0.0000000]], [[-0.0369000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[-0.0587000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[-0.3663334, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]]],[[[-0.32930879,0]],[[-0.7049803099999999,0]],[[0,0]],[[0,0]],[[0,0]],[[-0.10250000000000004,0]],[[0,0]],[[-0.036900000000000016,0]]],[[[0,0]],[[0,0]],[[0,0]],[[-0.05869999999999992,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]]],[[[0,0]],[[0,0]],[[-0.3663334099999999,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[1.0,0.3977]]]]]

Actual:   [[[[[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]]], [[[-0.3293, 0]], [[-0.7049, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[-0.1025, 0]], [[0, 0]], [[-0.0369, 0]]], [[[0, 0]], [[0, 0]], [[0, 0]], [[-0.0587, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]], [[-0.3663, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]]]]]

Expected: [[[[[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]]], [[[-0.3293, 0]], [[-0.7049, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[-0.1025, 0]], [[0, 0]], [[-0.0369, 0]]], [[[0, 0]], [[0, 0]], [[0, 0]], [[-0.0586, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]]], [[[0, 0]], [[0, 0]], [[-0.3663, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[0, 0]], [[1, 0.3977]]]]]