import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla3340 = tf.keras.layers.Input(shape=([4]))
in0Mul78516 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul78516 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Fla3340 = keras.layers.Flatten(name = 'Fla3340', )(in0Fla3340)
Res61857 = keras.layers.Reshape((4, 1), name = 'Res61857', )(Fla3340)
Res78419 = keras.layers.Reshape((4, 1, 1), name = 'Res78419', )(Res61857)
Res7017 = keras.layers.Reshape((4, 1, 1, 1), name = 'Res7017', )(Res78419)
Zer72173 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (2, 0)), name = 'Zer72173', )(Res7017)
Mul78516 = keras.layers.Multiply(name = 'Mul78516', )([in0Mul78516,in1Mul78516])
Zer82653 = keras.layers.ZeroPadding3D(padding=((3, 0), (1, 0), (1, 0)), name = 'Zer82653', )(Mul78516)
Add8300 = keras.layers.Add(name = 'Add8300', )([Zer72173,Zer82653])
model = tf.keras.models.Model(inputs=[in0Fla3340,in0Mul78516,in1Mul78516], outputs=Add8300)
in0Fla3340 = tf.constant([[1.2455, 1.7022, 1.882, 1.4406]])
in0Mul78516 = tf.constant([[[[[0.0319], [0.3017]], [[0.2459], [0.0517]]]]])
in1Mul78516 = tf.constant([[[[[0.9447], [0.0763]], [[0.494], [0.1521]]]]])
print (np.array2string(model.predict([in0Fla3340,in0Mul78516,in1Mul78516],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add8300.png')

LFla3340 = flatten_layer([[1.2455, 1.7022, 1.882, 1.4406]], Fla3340), 
LRes61857 = reshape_layer(Fla3340, [4, 1], Res61857), 
LRes78419 = reshape_layer(Res61857, [4, 1, 1], Res78419), 
LRes7017 = reshape_layer(Res78419, [4, 1, 1, 1], Res7017), 
LZer72173 = zero_padding3D_layer(Res7017, 0, 0, 2, 0, 2, 0, Zer72173), 
LMul78516 = multiply_layer([[[[[[0.0319], [0.3017]], [[0.2459], [0.0517]]]]], [[[[[0.9447], [0.0763]], [[0.494], [0.1521]]]]]], Mul78516), 
LZer82653 = zero_padding3D_layer(Mul78516, 3, 0, 1, 0, 1, 0, Zer82653), 
LAdd8300 = add_layer([Zer72173,Zer82653], Add8300), 
exec_layers([LFla3340,LRes61857,LRes78419,LRes7017,LZer72173,LMul78516,LZer82653,LAdd8300],["Fla3340","Res61857","Res78419","Res7017","Zer72173","Mul78516","Zer82653","Add8300"],Add8300,"Add8300")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [1.2455000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [1.7022001]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [1.8820000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0301359], [0.0230197]], [[0.0000000], [0.1214746], [1.4484636]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[1.2455]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[1.7022]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[1.882]]],[[[0],[0],[0]],[[0],[0.03013593],[0.023019710000000002]],[[0],[0.1214746],[1.4484635700000001]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [1.2455]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [1.7023]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [1.882]]], [[[0], [0], [0]], [[0], [0.0302], [0.0231]], [[0], [0.1215], [1.4485]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [1.2455]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [1.7022]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [1.882]]], [[[0], [0], [0]], [[0], [0.0302], [0.0231]], [[0], [0.1215], [1.4485]]]]]