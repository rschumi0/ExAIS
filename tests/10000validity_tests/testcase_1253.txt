import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot80665 = tf.keras.layers.Input(shape=([2]))
in1Dot80665 = tf.keras.layers.Input(shape=([2]))
in0Con6510 = tf.keras.layers.Input(shape=([1]))
in0Sub50425 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub50425 = tf.keras.layers.Input(shape=([3, 2]))

Dot80665 = keras.layers.Dot(axes=(1, 1), name = 'Dot80665', )([in0Dot80665,in1Dot80665])
Con6510 = keras.layers.Concatenate(axis=1, name = 'Con6510', )([Dot80665,in0Con6510])
Sub50425 = keras.layers.Subtract(name = 'Sub50425', )([in0Sub50425,in1Sub50425])
Glo16453 = keras.layers.GlobalAveragePooling1D(name = 'Glo16453', )(Sub50425)
Mul71261 = keras.layers.Multiply(name = 'Mul71261', )([Con6510,Glo16453])
model = tf.keras.models.Model(inputs=[in0Dot80665,in1Dot80665,in0Con6510,in0Sub50425,in1Sub50425], outputs=Mul71261)
in0Dot80665 = tf.constant([[0.161, 0.9971]])
in1Dot80665 = tf.constant([[0.1962, 0.5494]])
in0Con6510 = tf.constant([[0.604]])
in0Sub50425 = tf.constant([[[0.9547, 0.1273], [0.0211, 0.0078], [0.5432, 0.444]]])
in1Sub50425 = tf.constant([[[0.8444, 0.8738], [0.311, 0.6454], [0.6027, 0.3839]]])
print (np.array2string(model.predict([in0Dot80665,in1Dot80665,in0Con6510,in0Sub50425,in1Sub50425],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul71261.png')

LDot80665 = dot_layer([[0.161, 0.9971]], [[0.1962, 0.5494]], 1, 1, Dot80665), 
LCon6510 = concatenate_layer([Dot80665,[[0.604]]], 1, Con6510), 
LSub50425 = subtract_layer([[[0.9547, 0.1273], [0.0211, 0.0078], [0.5432, 0.444]]], [[[0.8444, 0.8738], [0.311, 0.6454], [0.6027, 0.3839]]], Sub50425), 
LGlo16453 = global_average_pooling1D_layer(Sub50425, Glo16453), 
LMul71261 = multiply_layer([Con6510,Glo16453], Mul71261), 
exec_layers([LDot80665,LCon6510,LSub50425,LGlo16453,LMul71261],["Dot80665","Con6510","Sub50425","Glo16453","Mul71261"],Mul71261,"Mul71261")

Actual (Unparsed): [[-0.0461778, -0.2665653]]

Expected (Unparsed): [[-0.046177776717999997,-0.2665653333333333]]

Actual:   [[-0.0461, -0.2665]]

Expected: [[-0.0461, -0.2665]]