import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub752 = tf.keras.layers.Input(shape=([2, 2, 3]))
in1Sub752 = tf.keras.layers.Input(shape=([2, 2, 3]))
in0Con97607 = tf.keras.layers.Input(shape=([2, 6, 7, 1]))
in0Min81972 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Min81972 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))

Sub752 = keras.layers.Subtract(name = 'Sub752', )([in0Sub752,in1Sub752])
Res1661 = keras.layers.Reshape((2, 6), name = 'Res1661', )(Sub752)
Cro12630 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro12630', )(Res1661)
Res41993 = keras.layers.Reshape((2, 6, 1), name = 'Res41993', )(Cro12630)
Res77311 = keras.layers.Reshape((2, 6, 1, 1), name = 'Res77311', )(Res41993)
Zer35356 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (6, 0)), name = 'Zer35356', )(Res77311)
Con97607 = keras.layers.Concatenate(axis=4, name = 'Con97607', )([Zer35356,in0Con97607])
Min81972 = keras.layers.Minimum(name = 'Min81972', )([in0Min81972,in1Min81972])
Up_14053 = keras.layers.UpSampling3D(size=(1, 2, 2), name = 'Up_14053', )(Min81972)
Zer45526 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (3, 0)), name = 'Zer45526', )(Up_14053)
Min98634 = keras.layers.Minimum(name = 'Min98634', )([Con97607,Zer45526])
model = tf.keras.models.Model(inputs=[in0Sub752,in1Sub752,in0Con97607,in0Min81972,in1Min81972], outputs=Min98634)
in0Sub752 = tf.constant([[[[0.621, 0.0962, 0.4477], [0.3547, 0.3172, 0.4906]], [[0.47, 0.1375, 0.8005], [0.7113, 0.1135, 0.5839]]]])
in1Sub752 = tf.constant([[[[0.9677, 0.119, 0.2704], [0.4191, 0.4796, 0.0717]], [[0.9532, 0.4313, 0.2636], [0.3704, 0.0968, 0.8057]]]])
in0Con97607 = tf.constant([[[[[0.4961], [0.2304], [0.043], [0.8496], [0.3932], [0.3444], [0.608]], [[0.8825], [0.9457], [0.2481], [0.4788], [0.9364], [0.1501], [0.7783]], [[0.7781], [0.2963], [0.7055], [0.0565], [0.7316], [0.5781], [0.7017]], [[0.9718], [0.8036], [0.2091], [0.8122], [0.6398], [0.4056], [0.1748]], [[0.3569], [0.0617], [0.0965], [0.8002], [0.4651], [0.8695], [0.7018]], [[0.2595], [0.9697], [0.4755], [0.3188], [0.7089], [0.5953], [0.17]]], [[[0.7465], [0.4252], [0.4622], [0.7083], [0.4816], [0.0973], [0.9233]], [[0.7117], [0.0552], [0.4685], [0.2757], [0.7705], [0.1504], [0.8524]], [[0.943], [0.4816], [0.637], [0.6605], [0.3124], [0.7795], [0.3869]], [[0.9659], [0.5273], [0.8265], [0.4933], [0.3053], [0.1884], [0.4168]], [[0.3054], [0.3731], [0.0933], [0.3178], [0.514], [0.9949], [0.8603]], [[0.2248], [0.3728], [0.7897], [0.5209], [0.0355], [0.0265], [0.2222]]]]])
in0Min81972 = tf.constant([[[[[0.1808, 0.1462], [0.8705, 0.6084]], [[0.9718, 0.745], [0.851, 0.6794]]], [[[0.1633, 0.2386], [0.7974, 0.2244]], [[0.0909, 0.4229], [0.5729, 0.0766]]]]])
in1Min81972 = tf.constant([[[[[0.575, 0.5529], [0.9678, 0.9438]], [[0.0686, 0.6059], [0.789, 0.9498]]], [[[0.2952, 0.5669], [0.6043, 0.4351]], [[0.485, 0.0843], [0.9569, 0.2909]]]]])
print (np.array2string(model.predict([in0Sub752,in1Sub752,in0Con97607,in0Min81972,in1Min81972],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min98634.png')

LSub752 = subtract_layer([[[[0.621, 0.0962, 0.4477], [0.3547, 0.3172, 0.4906]], [[0.47, 0.1375, 0.8005], [0.7113, 0.1135, 0.5839]]]], [[[[0.9677, 0.119, 0.2704], [0.4191, 0.4796, 0.0717]], [[0.9532, 0.4313, 0.2636], [0.3704, 0.0968, 0.8057]]]], Sub752), 
LRes1661 = reshape_layer(Sub752, [2, 6], Res1661), 
LCro12630 = cropping1D_layer(Res1661, 0, 0, Cro12630), 
LRes41993 = reshape_layer(Cro12630, [2, 6, 1], Res41993), 
LRes77311 = reshape_layer(Res41993, [2, 6, 1, 1], Res77311), 
LZer35356 = zero_padding3D_layer(Res77311, 0, 0, 0, 0, 6, 0, Zer35356), 
LCon97607 = concatenate_layer([Zer35356,[[[[[0.4961], [0.2304], [0.043], [0.8496], [0.3932], [0.3444], [0.608]], [[0.8825], [0.9457], [0.2481], [0.4788], [0.9364], [0.1501], [0.7783]], [[0.7781], [0.2963], [0.7055], [0.0565], [0.7316], [0.5781], [0.7017]], [[0.9718], [0.8036], [0.2091], [0.8122], [0.6398], [0.4056], [0.1748]], [[0.3569], [0.0617], [0.0965], [0.8002], [0.4651], [0.8695], [0.7018]], [[0.2595], [0.9697], [0.4755], [0.3188], [0.7089], [0.5953], [0.17]]], [[[0.7465], [0.4252], [0.4622], [0.7083], [0.4816], [0.0973], [0.9233]], [[0.7117], [0.0552], [0.4685], [0.2757], [0.7705], [0.1504], [0.8524]], [[0.943], [0.4816], [0.637], [0.6605], [0.3124], [0.7795], [0.3869]], [[0.9659], [0.5273], [0.8265], [0.4933], [0.3053], [0.1884], [0.4168]], [[0.3054], [0.3731], [0.0933], [0.3178], [0.514], [0.9949], [0.8603]], [[0.2248], [0.3728], [0.7897], [0.5209], [0.0355], [0.0265], [0.2222]]]]]], 4, Con97607), 
LMin81972 = minimum_layer([[[[[[0.1808, 0.1462], [0.8705, 0.6084]], [[0.9718, 0.745], [0.851, 0.6794]]], [[[0.1633, 0.2386], [0.7974, 0.2244]], [[0.0909, 0.4229], [0.5729, 0.0766]]]]], [[[[[0.575, 0.5529], [0.9678, 0.9438]], [[0.0686, 0.6059], [0.789, 0.9498]]], [[[0.2952, 0.5669], [0.6043, 0.4351]], [[0.485, 0.0843], [0.9569, 0.2909]]]]]], Min81972), 
LUp_14053 = up_sampling3D_layer(Min81972, 1, 2, 2, Up_14053), 
LZer45526 = zero_padding3D_layer(Up_14053, 0, 0, 2, 0, 3, 0, Zer45526), 
LMin98634 = minimum_layer([Con97607,Zer45526], Min98634), 
exec_layers([LSub752,LRes1661,LCro12630,LRes41993,LRes77311,LZer35356,LCon97607,LMin81972,LUp_14053,LZer45526,LMin98634],["Sub752","Res1661","Cro12630","Res41993","Res77311","Zer35356","Con97607","Min81972","Up_14053","Zer45526","Min98634"],Min98634,"Min98634")

Actual (Unparsed): [[[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.3467000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.0228000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0565000], [0.0000000, 0.1462000], [0.0000000, 0.5781000], [0.1773000, 0.6084000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.1462000], [0.0000000, 0.1462000], [0.0000000, 0.4056000], [-0.0644000, 0.1748000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.6059000], [0.0000000, 0.4651000], [0.0000000, 0.6794000], [-0.1624000, 0.6794000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.3188000], [0.0000000, 0.6059000], [0.0000000, 0.5953000], [0.4189000, 0.1700000]]], [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.4832000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [-0.2938000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.2386000], [0.0000000, 0.2386000], [0.0000000, 0.2244000], [0.5369000, 0.2244000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.2386000], [0.0000000, 0.2386000], [0.0000000, 0.1884000], [0.3409000, 0.2244000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0843000], [0.0000000, 0.0843000], [0.0000000, 0.0766000], [0.0167000, 0.0766000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0843000], [0.0000000, 0.0355000], [0.0000000, 0.0265000], [-0.2218000, 0.0766000]]]]]

Expected (Unparsed): [[[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-0.3467,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-0.0228,0]],[[0,0],[0,0],[0,0],[0,0.0565],[0,0.1462],[0,0.5781],[0.1773,0.6084]],[[0,0],[0,0],[0,0],[0,0.1462],[0,0.1462],[0,0.4056],[-0.06439999999999996,0.1748]],[[0,0],[0,0],[0,0],[0,0.6059],[0,0.4651],[0,0.6794],[-0.16240000000000004,0.6794]],[[0,0],[0,0],[0,0],[0,0.3188],[0,0.6059],[0,0.5953],[0.4189,0.17]]],[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-0.4832000000000001,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-0.2938,0]],[[0,0],[0,0],[0,0],[0,0.2386],[0,0.2386],[0,0.2244],[0.5368999999999999,0.2244]],[[0,0],[0,0],[0,0],[0,0.2386],[0,0.2386],[0,0.1884],[0.34090000000000004,0.2244]],[[0,0],[0,0],[0,0],[0,0.0843],[0,0.0843],[0,0.0766],[0.016700000000000007,0.0766]],[[0,0],[0,0],[0,0],[0,0.0843],[0,0.0355],[0,0.0265],[-0.2218,0.0766]]]]]

Actual:   [[[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.3467, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.0228, 0]], [[0, 0], [0, 0], [0, 0], [0, 0.0565], [0, 0.1462], [0, 0.5781], [0.1773, 0.6084]], [[0, 0], [0, 0], [0, 0], [0, 0.1462], [0, 0.1462], [0, 0.4056], [-0.0644, 0.1748]], [[0, 0], [0, 0], [0, 0], [0, 0.6059], [0, 0.4651], [0, 0.6794], [-0.1624, 0.6794]], [[0, 0], [0, 0], [0, 0], [0, 0.3188], [0, 0.6059], [0, 0.5953], [0.4189, 0.17]]], [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.4832, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.2938, 0]], [[0, 0], [0, 0], [0, 0], [0, 0.2386], [0, 0.2386], [0, 0.2244], [0.5369, 0.2244]], [[0, 0], [0, 0], [0, 0], [0, 0.2386], [0, 0.2386], [0, 0.1884], [0.3409, 0.2244]], [[0, 0], [0, 0], [0, 0], [0, 0.0843], [0, 0.0843], [0, 0.0766], [0.0167, 0.0766]], [[0, 0], [0, 0], [0, 0], [0, 0.0843], [0, 0.0355], [0, 0.0265], [-0.2218, 0.0766]]]]]

Expected: [[[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.3467, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.0228, 0]], [[0, 0], [0, 0], [0, 0], [0, 0.0565], [0, 0.1462], [0, 0.5781], [0.1773, 0.6084]], [[0, 0], [0, 0], [0, 0], [0, 0.1462], [0, 0.1462], [0, 0.4056], [-0.0643, 0.1748]], [[0, 0], [0, 0], [0, 0], [0, 0.6059], [0, 0.4651], [0, 0.6794], [-0.1624, 0.6794]], [[0, 0], [0, 0], [0, 0], [0, 0.3188], [0, 0.6059], [0, 0.5953], [0.4189, 0.17]]], [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.4832, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [-0.2938, 0]], [[0, 0], [0, 0], [0, 0], [0, 0.2386], [0, 0.2386], [0, 0.2244], [0.5369, 0.2244]], [[0, 0], [0, 0], [0, 0], [0, 0.2386], [0, 0.2386], [0, 0.1884], [0.341, 0.2244]], [[0, 0], [0, 0], [0, 0], [0, 0.0843], [0, 0.0843], [0, 0.0766], [0.0168, 0.0766]], [[0, 0], [0, 0], [0, 0], [0, 0.0843], [0, 0.0355], [0, 0.0265], [-0.2218, 0.0766]]]]]