import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro8318 = tf.keras.layers.Input(shape=([4, 2, 4]))
in0Dot5076 = tf.keras.layers.Input(shape=([2]))
in1Dot5076 = tf.keras.layers.Input(shape=([2]))
in0Con6128 = tf.keras.layers.Input(shape=([2, 1]))
in0Add51158 = tf.keras.layers.Input(shape=([2, 2]))
in1Add51158 = tf.keras.layers.Input(shape=([2, 2]))
in0Con72785 = tf.keras.layers.Input(shape=([3, 2]))

Cro8318 = keras.layers.Cropping2D(cropping=((1, 0), (1, 0)), name = 'Cro8318', )(in0Cro8318)
Res16217 = keras.layers.Reshape((3, 4), name = 'Res16217', )(Cro8318)
Dot5076 = keras.layers.Dot(axes=(1, 1), name = 'Dot5076', )([in0Dot5076,in1Dot5076])
Res82767 = keras.layers.Reshape((1, 1), name = 'Res82767', )(Dot5076)
Zer11858 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer11858', )(Res82767)
Con6128 = keras.layers.Concatenate(axis=2, name = 'Con6128', )([Zer11858,in0Con6128])
Add51158 = keras.layers.Add(name = 'Add51158', )([in0Add51158,in1Add51158])
Min4361 = keras.layers.Minimum(name = 'Min4361', )([Con6128,Add51158])
Zer76239 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer76239', )(Min4361)
Con72785 = keras.layers.Concatenate(axis=2, name = 'Con72785', )([Zer76239,in0Con72785])
Mul69109 = keras.layers.Multiply(name = 'Mul69109', )([Res16217,Con72785])
model = tf.keras.models.Model(inputs=[in0Cro8318,in0Dot5076,in1Dot5076,in0Con6128,in0Add51158,in1Add51158,in0Con72785], outputs=Mul69109)
in0Cro8318 = tf.constant([[[[1.6285, 1.1381, 1.806, 1.5682], [1.9255, 1.8177, 1.4693, 1.184]], [[1.432, 1.3079, 1.0114, 1.155], [1.6112, 1.7155, 1.5624, 1.9931]], [[1.3906, 1.6306, 1.8601, 1.333], [1.9055, 1.7442, 1.7765, 1.2721]], [[1.7794, 1.4567, 1.3088, 1.2734], [1.9523, 1.4746, 1.2618, 1.9]]]])
in0Dot5076 = tf.constant([[0.8803, 0.1285]])
in1Dot5076 = tf.constant([[0.5577, 0.9001]])
in0Con6128 = tf.constant([[[0.348], [0.8614]]])
in0Add51158 = tf.constant([[[0.7898, 0.1624], [0.3554, 0.1926]]])
in1Add51158 = tf.constant([[[0.549, 0.0416], [0.9342, 0.1186]]])
in0Con72785 = tf.constant([[[0.1306, 0.6391], [0.1233, 0.0942], [0.9277, 0.0809]]])
print (np.array2string(model.predict([in0Cro8318,in0Dot5076,in1Dot5076,in0Con6128,in0Add51158,in1Add51158,in0Con72785],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul69109.png')

LCro8318 = cropping2D_layer([[[[1.6285, 1.1381, 1.806, 1.5682], [1.9255, 1.8177, 1.4693, 1.184]], [[1.432, 1.3079, 1.0114, 1.155], [1.6112, 1.7155, 1.5624, 1.9931]], [[1.3906, 1.6306, 1.8601, 1.333], [1.9055, 1.7442, 1.7765, 1.2721]], [[1.7794, 1.4567, 1.3088, 1.2734], [1.9523, 1.4746, 1.2618, 1.9]]]], 1, 0, 1, 0, Cro8318), 
LRes16217 = reshape_layer(Cro8318, [3, 4], Res16217), 
LDot5076 = dot_layer([[0.8803, 0.1285]], [[0.5577, 0.9001]], 1, 1, Dot5076), 
LRes82767 = reshape_layer(Dot5076, [1, 1], Res82767), 
LZer11858 = zero_padding1D_layer(Res82767, 1, 0, Zer11858), 
LCon6128 = concatenate_layer([Zer11858,[[[0.348], [0.8614]]]], 2, Con6128), 
LAdd51158 = add_layer([[[[0.7898, 0.1624], [0.3554, 0.1926]]], [[[0.549, 0.0416], [0.9342, 0.1186]]]], Add51158), 
LMin4361 = minimum_layer([Con6128,Add51158], Min4361), 
LZer76239 = zero_padding1D_layer(Min4361, 1, 0, Zer76239), 
LCon72785 = concatenate_layer([Zer76239,[[[0.1306, 0.6391], [0.1233, 0.0942], [0.9277, 0.0809]]]], 2, Con72785), 
LMul69109 = multiply_layer([Res16217,Con72785], Mul69109), 
exec_layers([LCro8318,LRes16217,LDot5076,LRes82767,LZer11858,LCon6128,LAdd51158,LMin4361,LZer76239,LCon72785,LMul69109],["Cro8318","Res16217","Dot5076","Res82767","Zer11858","Con6128","Add51158","Min4361","Zer76239","Con72785","Mul69109"],Mul69109,"Mul69109")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.2040494, 1.2737903], [0.0000000, 0.3558168, 0.2190425, 0.1198318], [1.1842771, 0.4588955, 1.1705719, 0.1537100]]]

Expected (Unparsed): [[[0.0,0.0,0.20404944,1.27379021],[0.0,0.3558168,0.21904245,0.11983182],[1.184277206168,0.45889551999999995,1.17057186,0.15370999999999999]]]

Actual:   [[[0, 0, 0.2041, 1.2738], [0, 0.3559, 0.2191, 0.1199], [1.1843, 0.4589, 1.1706, 0.1538]]]

Expected: [[[0, 0, 0.2041, 1.2738], [0, 0.3559, 0.2191, 0.1199], [1.1843, 0.4589, 1.1706, 0.1538]]]