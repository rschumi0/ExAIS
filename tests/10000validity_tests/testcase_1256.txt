import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub30634 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub30634 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot62379 = tf.keras.layers.Input(shape=([3]))
in1Dot62379 = tf.keras.layers.Input(shape=([3]))
in0Con81782 = tf.keras.layers.Input(shape=([2, 1]))
in0Cro10069 = tf.keras.layers.Input(shape=([3, 2, 2]))
in0Add50944 = tf.keras.layers.Input(shape=([1, 1]))
in1Add50944 = tf.keras.layers.Input(shape=([1, 1]))
in0Con22545 = tf.keras.layers.Input(shape=([1, 1]))

Sub30634 = keras.layers.Subtract(name = 'Sub30634', )([in0Sub30634,in1Sub30634])
Ave46883 = keras.layers.AveragePooling1D(pool_size=(2), strides=(10), padding='valid', name = 'Ave46883', )(Sub30634)
Dot62379 = keras.layers.Dot(axes=(1, 1), name = 'Dot62379', )([in0Dot62379,in1Dot62379])
Res17076 = keras.layers.Reshape((1, 1), name = 'Res17076', )(Dot62379)
Zer79421 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer79421', )(Res17076)
Con81782 = keras.layers.Concatenate(axis=2, name = 'Con81782', )([Zer79421,in0Con81782])
Cro10069 = keras.layers.Cropping2D(cropping=((1, 1), (1, 0)), name = 'Cro10069', )(in0Cro10069)
Res81823 = keras.layers.Reshape((1, 2), name = 'Res81823', )(Cro10069)
Add50944 = keras.layers.Add(name = 'Add50944', )([in0Add50944,in1Add50944])
Con22545 = keras.layers.Concatenate(axis=2, name = 'Con22545', )([Add50944,in0Con22545])
Min96628 = keras.layers.Minimum(name = 'Min96628', )([Res81823,Con22545])
Dot6700 = keras.layers.Dot(axes=(1, 2), name = 'Dot6700', )([Con81782,Min96628])
Dot52789 = keras.layers.Dot(axes=(2, 1), name = 'Dot52789', )([Ave46883,Dot6700])
model = tf.keras.models.Model(inputs=[in0Sub30634,in1Sub30634,in0Dot62379,in1Dot62379,in0Con81782,in0Cro10069,in0Add50944,in1Add50944,in0Con22545], outputs=Dot52789)
in0Sub30634 = tf.constant([[[0.4972, 0.8865], [0.6499, 0.6008]]])
in1Sub30634 = tf.constant([[[0.3246, 0.0296], [0.5374, 0.9641]]])
in0Dot62379 = tf.constant([[0.1608, 0.5265, 0.3839]])
in1Dot62379 = tf.constant([[0.8286, 0.1198, 0.0048]])
in0Con81782 = tf.constant([[[0.6214], [0.5145]]])
in0Cro10069 = tf.constant([[[[1.6675, 1.4361], [1.342, 1.612]], [[1.7695, 1.401], [1.6449, 1.9583]], [[1.1078, 1.2222], [1.4543, 1.0346]]]])
in0Add50944 = tf.constant([[[0.718]]])
in1Add50944 = tf.constant([[[0.6586]]])
in0Con22545 = tf.constant([[[0.7765]]])
print (np.array2string(model.predict([in0Sub30634,in1Sub30634,in0Dot62379,in1Dot62379,in0Con81782,in0Cro10069,in0Add50944,in1Add50944,in0Con22545],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot52789.png')

LSub30634 = subtract_layer([[[0.4972, 0.8865], [0.6499, 0.6008]]], [[[0.3246, 0.0296], [0.5374, 0.9641]]], Sub30634), 
LAve46883 = average_pooling1D_layer(Sub30634, 2, 10, false, Ave46883), 
LDot62379 = dot_layer([[0.1608, 0.5265, 0.3839]], [[0.8286, 0.1198, 0.0048]], 1, 1, Dot62379), 
LRes17076 = reshape_layer(Dot62379, [1, 1], Res17076), 
LZer79421 = zero_padding1D_layer(Res17076, 1, 0, Zer79421), 
LCon81782 = concatenate_layer([Zer79421,[[[0.6214], [0.5145]]]], 2, Con81782), 
LCro10069 = cropping2D_layer([[[[1.6675, 1.4361], [1.342, 1.612]], [[1.7695, 1.401], [1.6449, 1.9583]], [[1.1078, 1.2222], [1.4543, 1.0346]]]], 1, 1, 1, 0, Cro10069), 
LRes81823 = reshape_layer(Cro10069, [1, 2], Res81823), 
LAdd50944 = add_layer([[[[0.718]]], [[[0.6586]]]], Add50944), 
LCon22545 = concatenate_layer([Add50944,[[[0.7765]]]], 2, Con22545), 
LMin96628 = minimum_layer([Res81823,Con22545], Min96628), 
LDot6700 = dot_layer(Con81782,Min96628, 1, 2, Dot6700), 
LDot52789 = dot_layer(Ave46883,Dot6700, 2, 1, Dot52789), 
exec_layers([LSub30634,LAve46883,LDot62379,LRes17076,LZer79421,LCon81782,LCro10069,LRes81823,LAdd50944,LCon22545,LMin96628,LDot6700,LDot52789],["Sub30634","Ave46883","Dot62379","Res17076","Zer79421","Con81782","Cro10069","Res81823","Add50944","Con22545","Min96628","Dot6700","Dot52789"],Dot52789,"Dot52789")

Actual (Unparsed): [[[0.3316503]]]

Expected (Unparsed): [[[0.33165028704072247]]]

Actual:   [[[0.3317]]]

Expected: [[[0.3317]]]