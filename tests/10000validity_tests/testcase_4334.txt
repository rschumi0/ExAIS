import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer85896 = tf.keras.layers.Input(shape=([4, 2, 1, 3]))
in0Dot72156 = tf.keras.layers.Input(shape=([3]))
in1Dot72156 = tf.keras.layers.Input(shape=([3]))
in0Con13104 = tf.keras.layers.Input(shape=([215]))

Zer85896 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer85896', )(in0Zer85896)
Res98491 = keras.layers.Reshape((6, 4, 9), name = 'Res98491', )(Zer85896)
Res56369 = keras.layers.Reshape((6, 36), name = 'Res56369', )(Res98491)
Fla20638 = keras.layers.Flatten(name = 'Fla20638', )(Res56369)
Dot72156 = keras.layers.Dot(axes=(1, 1), name = 'Dot72156', )([in0Dot72156,in1Dot72156])
Con13104 = keras.layers.Concatenate(axis=1, name = 'Con13104', )([Dot72156,in0Con13104])
Min33382 = keras.layers.Minimum(name = 'Min33382', )([Fla20638,Con13104])
Res19693 = keras.layers.Reshape((216, 1), name = 'Res19693', )(Min33382)
Res80739 = keras.layers.Reshape((216, 1, 1), name = 'Res80739', )(Res19693)
Max29503 = keras.layers.MaxPool2D(pool_size=(91, 1), strides=(82, 7), padding='valid', name = 'Max29503', )(Res80739)
model = tf.keras.models.Model(inputs=[in0Zer85896,in0Dot72156,in1Dot72156,in0Con13104], outputs=Max29503)
in0Zer85896 = tf.constant([[[[[1.7746, 1.6922, 1.8841]], [[1.466, 1.2736, 1.0982]]], [[[1.2219, 1.4967, 1.4617]], [[1.4276, 1.9935, 1.4448]]], [[[1.0654, 1.805, 1.1071]], [[1.499, 1.9071, 1.6367]]], [[[1.5565, 1.1866, 1.2844]], [[1.3614, 1.9383, 1.2601]]]]])
in0Dot72156 = tf.constant([[0.4455, 0.1377, 0.5586]])
in1Dot72156 = tf.constant([[0.3975, 0.7494, 0.0376]])
in0Con13104 = tf.constant([[0.836, 0.2601, 0.7306, 0.8804, 0.174, 0.4667, 0.0632, 0.0274, 0.6111, 0.1895, 0.2395, 0.8517, 0.8396, 0.8608, 0.1033, 0.4658, 0.3769, 0.2705, 0.9573, 0.5819, 0.1917, 0.2424, 0.8192, 0.6156, 0.1128, 0.5788, 0.8677, 0.4485, 0.694, 0.3341, 0.3959, 0.6818, 0.1613, 0.7522, 0.4961, 0.5646, 0.1753, 0.8759, 0.2544, 0.0365, 0.4022, 0.9222, 0.4558, 0.4805, 0.3082, 0.0041, 0.6661, 0.8553, 0.1654, 0.6777, 0.0896, 0.8454, 0.9911, 0.0931, 0.7851, 0.5497, 0.0259, 0.2358, 0.662, 0.0144, 0.4054, 0.8617, 0.1781, 0.6089, 0.8762, 0.2456, 0.8109, 0.8412, 0.7645, 0.7937, 0.1864, 0.7153, 0.9204, 0.9009, 0.2143, 0.1437, 0.0261, 0.174, 0.6995, 0.2448, 0.4846, 0.288, 0.6802, 0.5806, 0.0865, 0.292, 0.175, 0.5172, 0.7875, 0.1436, 0.1157, 0.9288, 0.2272, 0.6102, 0.9845, 0.4088, 0.067, 0.4489, 0.0835, 0.9973, 0.8321, 0.9529, 0.4187, 0.1917, 0.7064, 0.5357, 0.9009, 0.6688, 0.646, 0.0118, 0.9337, 0.7109, 0.2545, 0.6309, 0.4913, 0.8052, 0.093, 0.722, 0.4704, 0.2649, 0.4855, 0.0135, 0.4422, 0.0055, 0.4258, 0.3079, 0.9287, 0.8022, 0.8911, 0.2122, 0.9785, 0.456, 0.723, 0.0501, 0.1292, 0.2957, 0.2518, 0.9169, 0.8078, 0.3589, 0.0065, 0.0744, 0.8435, 0.4104, 0.1796, 0.5325, 0.0445, 0.6789, 0.9968, 0.7127, 0.7264, 0.8263, 0.7786, 0.548, 0.6697, 0.1958, 0.2767, 0.2381, 0.2307, 0.8305, 0.8162, 0.1491, 0.2345, 0.1016, 0.8821, 0.0235, 0.8376, 0.0406, 0.0514, 0.7489, 0.7629, 0.6295, 0.5905, 0.4253, 0.1842, 0.3743, 0.613, 0.3622, 0.0619, 0.4544, 0.4252, 0.943, 0.9206, 0.6277, 0.5728, 0.9998, 0.8957, 0.8518, 0.1469, 0.4549, 0.3776, 0.2753, 0.1092, 0.5092, 0.7309, 0.855, 0.7496, 0.5813, 0.379, 0.3548, 0.9044, 0.5354, 0.0099, 0.8969, 0.2327, 0.4757, 0.778, 0.5518, 0.6705, 0.5298, 0.1598, 0.6768, 0.1677, 0.5951, 0.5518]])
print (np.array2string(model.predict([in0Zer85896,in0Dot72156,in1Dot72156,in0Con13104],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max29503.png')

LZer85896 = zero_padding3D_layer([[[[[1.7746, 1.6922, 1.8841]], [[1.466, 1.2736, 1.0982]]], [[[1.2219, 1.4967, 1.4617]], [[1.4276, 1.9935, 1.4448]]], [[[1.0654, 1.805, 1.1071]], [[1.499, 1.9071, 1.6367]]], [[[1.5565, 1.1866, 1.2844]], [[1.3614, 1.9383, 1.2601]]]]], 1, 1, 1, 1, 1, 1, Zer85896), 
LRes98491 = reshape_layer(Zer85896, [6, 4, 9], Res98491), 
LRes56369 = reshape_layer(Res98491, [6, 36], Res56369), 
LFla20638 = flatten_layer(Res56369, Fla20638), 
LDot72156 = dot_layer([[0.4455, 0.1377, 0.5586]], [[0.3975, 0.7494, 0.0376]], 1, 1, Dot72156), 
LCon13104 = concatenate_layer([Dot72156,[[0.836, 0.2601, 0.7306, 0.8804, 0.174, 0.4667, 0.0632, 0.0274, 0.6111, 0.1895, 0.2395, 0.8517, 0.8396, 0.8608, 0.1033, 0.4658, 0.3769, 0.2705, 0.9573, 0.5819, 0.1917, 0.2424, 0.8192, 0.6156, 0.1128, 0.5788, 0.8677, 0.4485, 0.694, 0.3341, 0.3959, 0.6818, 0.1613, 0.7522, 0.4961, 0.5646, 0.1753, 0.8759, 0.2544, 0.0365, 0.4022, 0.9222, 0.4558, 0.4805, 0.3082, 0.0041, 0.6661, 0.8553, 0.1654, 0.6777, 0.0896, 0.8454, 0.9911, 0.0931, 0.7851, 0.5497, 0.0259, 0.2358, 0.662, 0.0144, 0.4054, 0.8617, 0.1781, 0.6089, 0.8762, 0.2456, 0.8109, 0.8412, 0.7645, 0.7937, 0.1864, 0.7153, 0.9204, 0.9009, 0.2143, 0.1437, 0.0261, 0.174, 0.6995, 0.2448, 0.4846, 0.288, 0.6802, 0.5806, 0.0865, 0.292, 0.175, 0.5172, 0.7875, 0.1436, 0.1157, 0.9288, 0.2272, 0.6102, 0.9845, 0.4088, 0.067, 0.4489, 0.0835, 0.9973, 0.8321, 0.9529, 0.4187, 0.1917, 0.7064, 0.5357, 0.9009, 0.6688, 0.646, 0.0118, 0.9337, 0.7109, 0.2545, 0.6309, 0.4913, 0.8052, 0.093, 0.722, 0.4704, 0.2649, 0.4855, 0.0135, 0.4422, 0.0055, 0.4258, 0.3079, 0.9287, 0.8022, 0.8911, 0.2122, 0.9785, 0.456, 0.723, 0.0501, 0.1292, 0.2957, 0.2518, 0.9169, 0.8078, 0.3589, 0.0065, 0.0744, 0.8435, 0.4104, 0.1796, 0.5325, 0.0445, 0.6789, 0.9968, 0.7127, 0.7264, 0.8263, 0.7786, 0.548, 0.6697, 0.1958, 0.2767, 0.2381, 0.2307, 0.8305, 0.8162, 0.1491, 0.2345, 0.1016, 0.8821, 0.0235, 0.8376, 0.0406, 0.0514, 0.7489, 0.7629, 0.6295, 0.5905, 0.4253, 0.1842, 0.3743, 0.613, 0.3622, 0.0619, 0.4544, 0.4252, 0.943, 0.9206, 0.6277, 0.5728, 0.9998, 0.8957, 0.8518, 0.1469, 0.4549, 0.3776, 0.2753, 0.1092, 0.5092, 0.7309, 0.855, 0.7496, 0.5813, 0.379, 0.3548, 0.9044, 0.5354, 0.0099, 0.8969, 0.2327, 0.4757, 0.778, 0.5518, 0.6705, 0.5298, 0.1598, 0.6768, 0.1677, 0.5951, 0.5518]]], 1, Con13104), 
LMin33382 = minimum_layer([Fla20638,Con13104], Min33382), 
LRes19693 = reshape_layer(Min33382, [216, 1], Res19693), 
LRes80739 = reshape_layer(Res19693, [216, 1, 1], Res80739), 
LMax29503 = max_pool2D_layer(Res80739, 91, 1, 82, 7, false, Max29503), 
exec_layers([LZer85896,LRes98491,LRes56369,LFla20638,LDot72156,LCon13104,LMin33382,LRes19693,LRes80739,LMax29503],["Zer85896","Res98491","Res56369","Fla20638","Dot72156","Con13104","Min33382","Res19693","Res80739","Max29503"],Max29503,"Max29503")

Actual (Unparsed): [[[[0.8553000]], [[0.9845000]]]]

Expected (Unparsed): [[[[0.8553]],[[0.9845]]]]

Actual:   [[[[0.8553]], [[0.9845]]]]

Expected: [[[[0.8553]], [[0.9845]]]]