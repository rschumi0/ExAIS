import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo53249 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Con64868 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Min9344 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Min9344 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Ave88195 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave88195 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Add95052 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Add95052 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Con46966 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Glo53249 = keras.layers.GlobalMaxPool3D(name = 'Glo53249', )(in0Glo53249)
Res6156 = keras.layers.Reshape((2, 1), name = 'Res6156', )(Glo53249)
Res63187 = keras.layers.Reshape((2, 1, 1), name = 'Res63187', )(Res6156)
Res48744 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res48744', )(Res63187)
Con64868 = keras.layers.Concatenate(axis=4, name = 'Con64868', )([Res48744,in0Con64868])
Min9344 = keras.layers.Minimum(name = 'Min9344', )([in0Min9344,in1Min9344])
Mul3856 = keras.layers.Multiply(name = 'Mul3856', )([Con64868,Min9344])
Zer55678 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer55678', )(Mul3856)
Ave88195 = keras.layers.Average(name = 'Ave88195', )([in0Ave88195,in1Ave88195])
Sub71137 = keras.layers.Subtract(name = 'Sub71137', )([Zer55678,Ave88195])
Add95052 = keras.layers.Add(name = 'Add95052', )([in0Add95052,in1Add95052])
Zer68063 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer68063', )(Add95052)
Con46966 = keras.layers.Concatenate(axis=4, name = 'Con46966', )([Zer68063,in0Con46966])
Add91201 = keras.layers.Add(name = 'Add91201', )([Sub71137,Con46966])
model = tf.keras.models.Model(inputs=[in0Glo53249,in0Con64868,in0Min9344,in1Min9344,in0Ave88195,in1Ave88195,in0Add95052,in1Add95052,in0Con46966], outputs=Add91201)
in0Glo53249 = tf.constant([[[[[1.7792, 1.3047], [1.5769, 1.2451]], [[1.61, 1.7759], [1.2527, 1.4327]]], [[[1.0408, 1.5752], [1.9385, 1.2352]], [[1.4659, 1.0546], [1.9473, 1.9306]]]]])
in0Con64868 = tf.constant([[[[[0.8781]]], [[[0.2211]]]]])
in0Min9344 = tf.constant([[[[[0.6772, 0.1062]]], [[[0.8033, 0.3579]]]]])
in1Min9344 = tf.constant([[[[[0.912, 0.7774]]], [[[0.0177, 0.2326]]]]])
in0Ave88195 = tf.constant([[[[[0.0152, 0.7111], [0.9144, 0.3754]], [[0.8524, 0.7297], [0.1341, 0.9453]]], [[[0.3225, 0.2181], [0.7314, 0.3136]], [[0.9282, 0.9609], [0.9747, 0.9155]]]]])
in1Ave88195 = tf.constant([[[[[0.8887, 0.7424], [0.0536, 0.2733]], [[0.1997, 0.3249], [0.906, 0.3947]]], [[[0.884, 0.391], [0.2867, 0.9236]], [[0.9124, 0.6523], [0.0186, 0.7402]]]]])
in0Add95052 = tf.constant([[[[[0.9203], [0.6102]]], [[[0.0884], [0.1955]]]]])
in1Add95052 = tf.constant([[[[[0.8986], [0.3863]]], [[[0.881], [0.7946]]]]])
in0Con46966 = tf.constant([[[[[0.1055], [0.7441]], [[0.9263], [0.002]]], [[[0.345], [0.0477]], [[0.4054], [0.0796]]]]])
print (np.array2string(model.predict([in0Glo53249,in0Con64868,in0Min9344,in1Min9344,in0Ave88195,in1Ave88195,in0Add95052,in1Add95052,in0Con46966],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add91201.png')

LGlo53249 = global_max_pool3D_layer([[[[[1.7792, 1.3047], [1.5769, 1.2451]], [[1.61, 1.7759], [1.2527, 1.4327]]], [[[1.0408, 1.5752], [1.9385, 1.2352]], [[1.4659, 1.0546], [1.9473, 1.9306]]]]], Glo53249), 
LRes6156 = reshape_layer(Glo53249, [2, 1], Res6156), 
LRes63187 = reshape_layer(Res6156, [2, 1, 1], Res63187), 
LRes48744 = reshape_layer(Res63187, [2, 1, 1, 1], Res48744), 
LCon64868 = concatenate_layer([Res48744,[[[[[0.8781]]], [[[0.2211]]]]]], 4, Con64868), 
LMin9344 = minimum_layer([[[[[[0.6772, 0.1062]]], [[[0.8033, 0.3579]]]]], [[[[[0.912, 0.7774]]], [[[0.0177, 0.2326]]]]]], Min9344), 
LMul3856 = multiply_layer([Con64868,Min9344], Mul3856), 
LZer55678 = zero_padding3D_layer(Mul3856, 0, 0, 1, 0, 1, 0, Zer55678), 
LAve88195 = average_layer([[[[[[0.0152, 0.7111], [0.9144, 0.3754]], [[0.8524, 0.7297], [0.1341, 0.9453]]], [[[0.3225, 0.2181], [0.7314, 0.3136]], [[0.9282, 0.9609], [0.9747, 0.9155]]]]], [[[[[0.8887, 0.7424], [0.0536, 0.2733]], [[0.1997, 0.3249], [0.906, 0.3947]]], [[[0.884, 0.391], [0.2867, 0.9236]], [[0.9124, 0.6523], [0.0186, 0.7402]]]]]], Ave88195), 
LSub71137 = subtract_layer(Zer55678,Ave88195, Sub71137), 
LAdd95052 = add_layer([[[[[[0.9203], [0.6102]]], [[[0.0884], [0.1955]]]]], [[[[[0.8986], [0.3863]]], [[[0.881], [0.7946]]]]]], Add95052), 
LZer68063 = zero_padding3D_layer(Add95052, 0, 0, 1, 0, 0, 0, Zer68063), 
LCon46966 = concatenate_layer([Zer68063,[[[[[0.1055], [0.7441]], [[0.9263], [0.002]]], [[[0.345], [0.0477]], [[0.4054], [0.0796]]]]]], 4, Con46966), 
LAdd91201 = add_layer([Sub71137,Con46966], Add91201), 
exec_layers([LGlo53249,LRes6156,LRes63187,LRes48744,LCon64868,LMin9344,LMul3856,LZer55678,LAve88195,LSub71137,LAdd95052,LZer68063,LCon46966,LAdd91201],["Glo53249","Res6156","Res63187","Res48744","Con64868","Min9344","Mul3856","Zer55678","Ave88195","Sub71137","Add95052","Zer68063","Con46966","Add91201"],Add91201,"Add91201")

Actual (Unparsed): [[[[[-0.4519500, -0.6212500], [-0.4840000, 0.4197500]], [[1.2928500, 0.3990000], [1.7951615, -0.5747458]]], [[[-0.6032500, 0.0404500], [-0.5090500, -0.5709000]], [[0.0491000, -0.4012000], [0.5276216, -0.6968221]]]]]

Expected (Unparsed): [[[[[-0.45195,-0.62125],[-0.484,0.41974999999999996]],[[1.29285,0.399],[1.79516156,-0.57474578]]],[[[-0.6032500000000001,0.040449999999999986],[-0.50905,-0.5709000000000001]],[[0.04910000000000003,-0.4012],[0.52762162,-0.69682214]]]]]

Actual:   [[[[[-0.4519, -0.6212], [-0.484, 0.4198]], [[1.2929, 0.399], [1.7952, -0.5747]]], [[[-0.6032, 0.0405], [-0.509, -0.5709]], [[0.0491, -0.4012], [0.5277, -0.6968]]]]]

Expected: [[[[[-0.4519, -0.6212], [-0.484, 0.4198]], [[1.2929, 0.399], [1.7952, -0.5747]]], [[[-0.6032, 0.0405], [-0.509, -0.5709]], [[0.0492, -0.4012], [0.5277, -0.6968]]]]]