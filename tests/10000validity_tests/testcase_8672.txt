import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave46962 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave46962 = tf.keras.layers.Input(shape=([1, 1, 1]))

Ave46962 = keras.layers.Average(name = 'Ave46962', )([in0Ave46962,in1Ave46962])
Res70300 = keras.layers.Reshape((1, 1), name = 'Res70300', )(Ave46962)
Loc85562 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc85562', )(Res70300)
Per97811 = keras.layers.Permute((2,1), name = 'Per97811',)(Loc85562)
model = tf.keras.models.Model(inputs=[in0Ave46962,in1Ave46962], outputs=Per97811)
w = model.get_layer('Loc85562').get_weights() 
w[0] = np.array([[[0.4542, 0.9319]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc85562').set_weights(w) 
in0Ave46962 = tf.constant([[[[0.5627]]]])
in1Ave46962 = tf.constant([[[[0.1427]]]])
print (np.array2string(model.predict([in0Ave46962,in1Ave46962],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per97811.png')

LAve46962 = average_layer([[[[[0.5627]]]], [[[[0.1427]]]]], Ave46962), 
LRes70300 = reshape_layer(Ave46962, [1, 1], Res70300), 
LLoc85562 = locally_connected1D_layer(Res70300, 1,[[[0.4542, 0.9319]]],[[0, 0]], 1, Loc85562), 
LPer97811 = permute_layer(Loc85562, 2,1, Per97811), 
exec_layers([LAve46962,LRes70300,LLoc85562,LPer97811],["Ave46962","Res70300","Loc85562","Per97811"],Per97811,"Per97811")

Actual (Unparsed): [[[0.1601963], [0.3286811]]]

Expected (Unparsed): [[[0.16019634],[0.32868113]]]

Actual:   [[[0.1602], [0.3287]]]

Expected: [[[0.1602], [0.3287]]]