import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub1378 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub1378 = tf.keras.layers.Input(shape=([2, 3]))

Sub1378 = keras.layers.Subtract(name = 'Sub1378', )([in0Sub1378,in1Sub1378])
Max75725 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max75725', )(Sub1378)
Res4045 = keras.layers.Reshape((2, 3, 1), name = 'Res4045', )(Max75725)
Glo4926 = keras.layers.GlobalAveragePooling2D(name = 'Glo4926', )(Res4045)
Res20782 = keras.layers.Reshape((1, 1), name = 'Res20782', )(Glo4926)
Loc58511 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc58511', )(Res20782)
model = tf.keras.models.Model(inputs=[in0Sub1378,in1Sub1378], outputs=Loc58511)
w = model.get_layer('Loc58511').get_weights() 
w[0] = np.array([[[0.2516, 0.5146, 0.8012, 0.7454]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc58511').set_weights(w) 
in0Sub1378 = tf.constant([[[0.7966, 0.5777, 0.5122], [0.0339, 0.8809, 0.3612]]])
in1Sub1378 = tf.constant([[[0.2298, 0.7478, 0.0178], [0.6432, 0.6263, 0.207]]])
print (np.array2string(model.predict([in0Sub1378,in1Sub1378],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc58511.png')

LSub1378 = subtract_layer([[[0.7966, 0.5777, 0.5122], [0.0339, 0.8809, 0.3612]]], [[[0.2298, 0.7478, 0.0178], [0.6432, 0.6263, 0.207]]], Sub1378), 
LMax75725 = max_pool1D_layer(Sub1378, 1, Max75725), 
LRes4045 = reshape_layer(Max75725, [2, 3, 1], Res4045), 
LGlo4926 = global_average_pooling2D_layer(Res4045, Glo4926), 
LRes20782 = reshape_layer(Glo4926, [1, 1], Res20782), 
LLoc58511 = locally_connected1D_layer(Res20782, 1,[[[0.2516, 0.5146, 0.8012, 0.7454]]],[[0, 0, 0, 0]], 1, Loc58511), 
exec_layers([LSub1378,LMax75725,LRes4045,LGlo4926,LRes20782,LLoc58511],["Sub1378","Max75725","Res4045","Glo4926","Res20782","Loc58511"],Loc58511,"Loc58511")

Actual (Unparsed): [[[0.0289592, 0.0592305, 0.0922181, 0.0857955]]]

Expected (Unparsed): [[[0.028959159999999998,0.05923045999999999,0.09221812,0.08579553999999999]]]

Actual:   [[[0.029, 0.0593, 0.0923, 0.0858]]]

Expected: [[[0.029, 0.0593, 0.0923, 0.0858]]]