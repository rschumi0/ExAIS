import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max88271 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max88271 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Ave1620 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Ave1620 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Up_77390 = tf.keras.layers.Input(shape=([3, 4]))
in0Con41441 = tf.keras.layers.Input(shape=([3, 4]))

Max88271 = keras.layers.Maximum(name = 'Max88271', )([in0Max88271,in1Max88271])
Res72812 = keras.layers.Reshape((2, 2, 4), name = 'Res72812', )(Max88271)
Res76928 = keras.layers.Reshape((2, 8), name = 'Res76928', )(Res72812)
Zer68301 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer68301', )(Res76928)
Ave1620 = keras.layers.Average(name = 'Ave1620', )([in0Ave1620,in1Ave1620])
Res48836 = keras.layers.Reshape((1, 2, 4), name = 'Res48836', )(Ave1620)
Res69984 = keras.layers.Reshape((1, 8), name = 'Res69984', )(Res48836)
Zer48214 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer48214', )(Res69984)
Up_77390 = keras.layers.UpSampling1D(size=(1), name = 'Up_77390', )(in0Up_77390)
Con41441 = keras.layers.Concatenate(axis=2, name = 'Con41441', )([Up_77390,in0Con41441])
Add61392 = keras.layers.Add(name = 'Add61392', )([Zer48214,Con41441])
ELU16531 = keras.layers.ELU(alpha=7.239664879362596, name = 'ELU16531', )(Add61392)
Mul47084 = keras.layers.Multiply(name = 'Mul47084', )([Zer68301,ELU16531])
model = tf.keras.models.Model(inputs=[in0Max88271,in1Max88271,in0Ave1620,in1Ave1620,in0Up_77390,in0Con41441], outputs=Mul47084)
in0Max88271 = tf.constant([[[[[0.1017, 0.9294], [0.002, 0.8172]], [[0.0845, 0.218], [0.5609, 0.7607]]], [[[0.2481, 0.1876], [0.2085, 0.4016]], [[0.6985, 0.7111], [0.4083, 0.6625]]]]])
in1Max88271 = tf.constant([[[[[0.8943, 0.0335], [0.7881, 0.007]], [[0.5028, 0.2264], [0.0655, 0.5872]]], [[[0.5946, 0.9895], [0.1718, 0.3865]], [[0.1631, 0.8443], [0.8174, 0.7741]]]]])
in0Ave1620 = tf.constant([[[[[0.4782, 0.3249], [0.4073, 0.2148]], [[0.8392, 0.1185], [0.9111, 0.4881]]]]])
in1Ave1620 = tf.constant([[[[[0.8795, 0.2327], [0.0219, 0.6621]], [[0.695, 0.1737], [0.6932, 0.242]]]]])
in0Up_77390 = tf.constant([[[1.7134, 1.8096, 1.937, 1.3651], [1.4075, 1.0611, 1.5843, 1.6513], [1.6643, 1.8125, 1.5645, 1.3326]]])
in0Con41441 = tf.constant([[[0.8281, 0.3855, 0.6187, 0.4562], [0.3733, 0.2321, 0.8631, 0.6362], [0.5758, 0.9333, 0.2444, 0.8942]]])
print (np.array2string(model.predict([in0Max88271,in1Max88271,in0Ave1620,in1Ave1620,in0Up_77390,in0Con41441],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul47084.png')

LMax88271 = maximum_layer([[[[[[0.1017, 0.9294], [0.002, 0.8172]], [[0.0845, 0.218], [0.5609, 0.7607]]], [[[0.2481, 0.1876], [0.2085, 0.4016]], [[0.6985, 0.7111], [0.4083, 0.6625]]]]], [[[[[0.8943, 0.0335], [0.7881, 0.007]], [[0.5028, 0.2264], [0.0655, 0.5872]]], [[[0.5946, 0.9895], [0.1718, 0.3865]], [[0.1631, 0.8443], [0.8174, 0.7741]]]]]], Max88271), 
LRes72812 = reshape_layer(Max88271, [2, 2, 4], Res72812), 
LRes76928 = reshape_layer(Res72812, [2, 8], Res76928), 
LZer68301 = zero_padding1D_layer(Res76928, 1, 0, Zer68301), 
LAve1620 = average_layer([[[[[[0.4782, 0.3249], [0.4073, 0.2148]], [[0.8392, 0.1185], [0.9111, 0.4881]]]]], [[[[[0.8795, 0.2327], [0.0219, 0.6621]], [[0.695, 0.1737], [0.6932, 0.242]]]]]], Ave1620), 
LRes48836 = reshape_layer(Ave1620, [1, 2, 4], Res48836), 
LRes69984 = reshape_layer(Res48836, [1, 8], Res69984), 
LZer48214 = zero_padding1D_layer(Res69984, 2, 0, Zer48214), 
LUp_77390 = up_sampling1D_layer([[[1.7134, 1.8096, 1.937, 1.3651], [1.4075, 1.0611, 1.5843, 1.6513], [1.6643, 1.8125, 1.5645, 1.3326]]], 1, Up_77390), 
LCon41441 = concatenate_layer([Up_77390,[[[0.8281, 0.3855, 0.6187, 0.4562], [0.3733, 0.2321, 0.8631, 0.6362], [0.5758, 0.9333, 0.2444, 0.8942]]]], 2, Con41441), 
LAdd61392 = add_layer([Zer48214,Con41441], Add61392), 
LELU16531 = elu_layer(Add61392, 7.239664879362596, ELU16531), 
LMul47084 = multiply_layer([Zer68301,ELU16531], Mul47084), 
exec_layers([LMax88271,LRes72812,LRes76928,LZer68301,LAve1620,LRes48836,LRes69984,LZer48214,LUp_77390,LCon41441,LAdd61392,LELU16531,LMul47084],["Max88271","Res72812","Res76928","Zer68301","Ave1620","Res48836","Res69984","Zer48214","Up_77390","Con41441","Add61392","ELU16531","Mul47084"],Mul47084,"Mul47084")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [1.2587273, 0.9861864, 1.2485869, 1.3494423, 0.1876952, 0.0525474, 0.4841128, 0.4839573], [1.3932370, 2.0693413, 0.3709423, 0.7112537, 0.9380156, 0.9113374, 0.8554499, 0.9747854]]]

Expected (Unparsed): [[[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[1.25872725,0.9861863399999999,1.24858683,1.34944236,0.18769524,0.05254744,0.48411278999999996,0.48395734],[1.39323699,2.06934135,0.37094235,0.71125368,0.9380156499999999,0.9113374200000002,0.8554499700000001,0.974785425]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0], [1.2588, 0.9862, 1.2486, 1.3495, 0.1877, 0.0526, 0.4842, 0.484], [1.3933, 2.0694, 0.371, 0.7113, 0.9381, 0.9114, 0.8555, 0.9748]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0], [1.2588, 0.9862, 1.2486, 1.3495, 0.1877, 0.0526, 0.4842, 0.484], [1.3933, 2.0694, 0.371, 0.7113, 0.9381, 0.9114, 0.8555, 0.9748]]]