import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo45882 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Cro2653 = tf.keras.layers.Input(shape=([4, 1, 1]))
in0Con1314 = tf.keras.layers.Input(shape=([3, 1]))
in0Min28288 = tf.keras.layers.Input(shape=([1, 2]))
in1Min28288 = tf.keras.layers.Input(shape=([1, 2]))

Glo45882 = keras.layers.GlobalMaxPool2D(name = 'Glo45882', )(in0Glo45882)
Den74586 = keras.layers.Dense(2,name = 'Den74586', )(Glo45882)
Cro2653 = keras.layers.Cropping2D(cropping=((0, 1), (0, 0)), name = 'Cro2653', )(in0Cro2653)
Res89252 = keras.layers.Reshape((3, 1), name = 'Res89252', )(Cro2653)
Con1314 = keras.layers.Concatenate(axis=2, name = 'Con1314', )([Res89252,in0Con1314])
Min28288 = keras.layers.Minimum(name = 'Min28288', )([in0Min28288,in1Min28288])
Zer29294 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer29294', )(Min28288)
Ave97448 = keras.layers.Average(name = 'Ave97448', )([Con1314,Zer29294])
Glo54181 = keras.layers.GlobalAveragePooling1D(name = 'Glo54181', )(Ave97448)
Min27464 = keras.layers.Minimum(name = 'Min27464', )([Den74586,Glo54181])
model = tf.keras.models.Model(inputs=[in0Glo45882,in0Cro2653,in0Con1314,in0Min28288,in1Min28288], outputs=Min27464)
w = model.get_layer('Den74586').get_weights() 
w[0] = np.array([[0.1512, 0.6468], [0.836, 0.3447]])
w[1] = np.array([0.867, 0.3175])
model.get_layer('Den74586').set_weights(w) 
in0Glo45882 = tf.constant([[[[1.7196, 1.9083]], [[1.2841, 1.7652]]]])
in0Cro2653 = tf.constant([[[[1.1042]], [[1.693]], [[1.5561]], [[1.9646]]]])
in0Con1314 = tf.constant([[[0.7725], [0.5654], [0.7364]]])
in0Min28288 = tf.constant([[[0.0625, 0.2568]]])
in1Min28288 = tf.constant([[[0.6303, 0.9495]]])
print (np.array2string(model.predict([in0Glo45882,in0Cro2653,in0Con1314,in0Min28288,in1Min28288],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min27464.png')

LGlo45882 = global_max_pool2D_layer([[[[1.7196, 1.9083]], [[1.2841, 1.7652]]]], Glo45882), 
LDen74586 = dense_layer(Glo45882, [[0.1512, 0.6468], [0.836, 0.3447]],[0.867, 0.3175], Den74586), 
LCro2653 = cropping2D_layer([[[[1.1042]], [[1.693]], [[1.5561]], [[1.9646]]]], 0, 1, 0, 0, Cro2653), 
LRes89252 = reshape_layer(Cro2653, [3, 1], Res89252), 
LCon1314 = concatenate_layer([Res89252,[[[0.7725], [0.5654], [0.7364]]]], 2, Con1314), 
LMin28288 = minimum_layer([[[[0.0625, 0.2568]]], [[[0.6303, 0.9495]]]], Min28288), 
LZer29294 = zero_padding1D_layer(Min28288, 2, 0, Zer29294), 
LAve97448 = average_layer([Con1314,Zer29294], Ave97448), 
LGlo54181 = global_average_pooling1D_layer(Ave97448, Glo54181), 
LMin27464 = minimum_layer([Den74586,Glo54181], Min27464), 
exec_layers([LGlo45882,LDen74586,LCro2653,LRes89252,LCon1314,LMin28288,LZer29294,LAve97448,LGlo54181,LMin27464],["Glo45882","Den74586","Cro2653","Res89252","Con1314","Min28288","Zer29294","Ave97448","Glo54181","Min27464"],Min27464,"Min27464")

Actual (Unparsed): [[0.7359667, 0.3885167]]

Expected (Unparsed): [[0.7359666666666667,0.3885166666666667]]

Actual:   [[0.736, 0.3886]]

Expected: [[0.736, 0.3886]]