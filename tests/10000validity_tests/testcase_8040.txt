import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add43912 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add43912 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con45363 = tf.keras.layers.Input(shape=([1]))
in0Glo29321 = tf.keras.layers.Input(shape=([1, 1]))
in0Sof37338 = tf.keras.layers.Input(shape=([2, 1]))
in0GRU65573 = tf.keras.layers.Input(shape=([2, 2]))
in0Con63832 = tf.keras.layers.Input(shape=([1]))

Add43912 = keras.layers.Add(name = 'Add43912', )([in0Add43912,in1Add43912])
Res81679 = keras.layers.Reshape((1, 1), name = 'Res81679', )(Add43912)
Cro98625 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro98625', )(Res81679)
Res17684 = keras.layers.Reshape((1, 1, 1), name = 'Res17684', )(Cro98625)
Res48394 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res48394', )(Res17684)
Cro39854 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 0)), name = 'Cro39854', )(Res48394)
Res22894 = keras.layers.Reshape((1, 1, 1), name = 'Res22894', )(Cro39854)
Res36230 = keras.layers.Reshape((1, 1), name = 'Res36230', )(Res22894)
Fla28367 = keras.layers.Flatten(name = 'Fla28367', )(Res36230)
Con45363 = keras.layers.Concatenate(axis=1, name = 'Con45363', )([Fla28367,in0Con45363])
Glo29321 = keras.layers.GlobalMaxPool1D(name = 'Glo29321', )(in0Glo29321)
Res41898 = keras.layers.Reshape((1, 1), name = 'Res41898', )(Glo29321)
Zer14000 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer14000', )(Res41898)
Sof37338 = keras.layers.Softmax(axis=1, name = 'Sof37338', input_shape=(2, 1))(in0Sof37338)
Ave59057 = keras.layers.Average(name = 'Ave59057', )([Zer14000,Sof37338])
Fla12613 = keras.layers.Flatten(name = 'Fla12613', )(Ave59057)
GRU65573 = keras.layers.GRU(1,reset_after=True, recurrent_activation='sigmoid', name = 'GRU65573', )(in0GRU65573)
Mas51211 = keras.layers.Masking(mask_value=1, name = 'Mas51211', )(GRU65573)
Con63832 = keras.layers.Concatenate(axis=1, name = 'Con63832', )([Mas51211,in0Con63832])
Sub34299 = keras.layers.Subtract(name = 'Sub34299', )([Fla12613,Con63832])
Min68621 = keras.layers.Minimum(name = 'Min68621', )([Con45363,Sub34299])
model = tf.keras.models.Model(inputs=[in0Add43912,in1Add43912,in0Con45363,in0Glo29321,in0Sof37338,in0GRU65573,in0Con63832], outputs=Min68621)
w = model.get_layer('GRU65573').get_weights() 
w[0] = np.array([[7, 7, 9], [7, 8, 7]])
w[1] = np.array([[9, 4, 5]])
w[2] = np.array([[9, 6, 7], [3, 9, 9]])
model.get_layer('GRU65573').set_weights(w) 
in0Add43912 = tf.constant([[[[0.2997]]]])
in1Add43912 = tf.constant([[[[0.7745]]]])
in0Con45363 = tf.constant([[0.0989]])
in0Glo29321 = tf.constant([[[1.7021]]])
in0Sof37338 = tf.constant([[[0.6661], [0.8456]]])
in0GRU65573 = tf.constant([[[9, 10], [3, 5]]])
in0Con63832 = tf.constant([[0.3716]])
print (np.array2string(model.predict([in0Add43912,in1Add43912,in0Con45363,in0Glo29321,in0Sof37338,in0GRU65573,in0Con63832],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min68621.png')

LAdd43912 = add_layer([[[[[0.2997]]]], [[[[0.7745]]]]], Add43912), 
LRes81679 = reshape_layer(Add43912, [1, 1], Res81679), 
LCro98625 = cropping1D_layer(Res81679, 0, 0, Cro98625), 
LRes17684 = reshape_layer(Cro98625, [1, 1, 1], Res17684), 
LRes48394 = reshape_layer(Res17684, [1, 1, 1, 1], Res48394), 
LCro39854 = cropping3D_layer(Res48394, 0, 0, 0, 0, 0, 0, Cro39854), 
LRes22894 = reshape_layer(Cro39854, [1, 1, 1], Res22894), 
LRes36230 = reshape_layer(Res22894, [1, 1], Res36230), 
LFla28367 = flatten_layer(Res36230, Fla28367), 
LCon45363 = concatenate_layer([Fla28367,[[0.0989]]], 1, Con45363), 
LGlo29321 = global_max_pool1D_layer([[[1.7021]]], Glo29321), 
LRes41898 = reshape_layer(Glo29321, [1, 1], Res41898), 
LZer14000 = zero_padding1D_layer(Res41898, 1, 0, Zer14000), 
LSof37338 = softmax_layer([[[0.6661], [0.8456]]], 1, Sof37338), 
LAve59057 = average_layer([Zer14000,Sof37338], Ave59057), 
LFla12613 = flatten_layer(Ave59057, Fla12613), 
LGRU65573 = gru_layer([[[9, 10], [3, 5]]],[[7, 7, 9], [7, 8, 7]],[[9, 4, 5]],[[9, 6, 7], [3, 9, 9]], true, GRU65573), 
LMas51211 = masking_layer(GRU65573, 1, Mas51211), 
LCon63832 = concatenate_layer([Mas51211,[[0.3716]]], 1, Con63832), 
LSub34299 = subtract_layer(Fla12613,Con63832, Sub34299), 
LMin68621 = minimum_layer([Con45363,Sub34299], Min68621), 
exec_layers([LAdd43912,LRes81679,LCro98625,LRes17684,LRes48394,LCro39854,LRes22894,LRes36230,LFla28367,LCon45363,LGlo29321,LRes41898,LZer14000,LSof37338,LAve59057,LFla12613,LGRU65573,LMas51211,LCon63832,LSub34299,LMin68621],["Add43912","Res81679","Cro98625","Res17684","Res48394","Cro39854","Res22894","Res36230","Fla28367","Con45363","Glo29321","Res41898","Zer14000","Sof37338","Ave59057","Fla12613","GRU65573","Mas51211","Con63832","Sub34299","Min68621"],Min68621,"Min68621")

Actual (Unparsed): [[0.2276226, 0.0989000]]

Expected (Unparsed): [[0.22762255167437087,0.0989]]

Actual:   [[0.2277, 0.0989]]

Expected: [[0.2277, 0.0989]]