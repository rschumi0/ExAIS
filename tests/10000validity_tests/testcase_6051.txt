import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave28638 = tf.keras.layers.Input(shape=([2, 2]))
in0Con22891 = tf.keras.layers.Input(shape=([3, 1]))
in0Per40298 = tf.keras.layers.Input(shape=([3, 3]))

Ave28638 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave28638', )(in0Ave28638)
Zer17065 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer17065', )(Ave28638)
Con22891 = keras.layers.Concatenate(axis=2, name = 'Con22891', )([Zer17065,in0Con22891])
Per40298 = keras.layers.Permute((1,2), name = 'Per40298',)(in0Per40298)
ReL82287 = keras.layers.ReLU(max_value=0.9681089106372837, negative_slope=7.087419849397143, threshold=9.46755433089794, name = 'ReL82287', )(Per40298)
Max50596 = keras.layers.Maximum(name = 'Max50596', )([Con22891,ReL82287])
model = tf.keras.models.Model(inputs=[in0Ave28638,in0Con22891,in0Per40298], outputs=Max50596)
in0Ave28638 = tf.constant([[[1.8762, 1.9985], [1.9932, 1.6836]]])
in0Con22891 = tf.constant([[[0.052], [0.1789], [0.303]]])
in0Per40298 = tf.constant([[[1.076, 1.2993, 1.2313], [1.4922, 1.864, 1.4581], [1.7997, 1.9151, 1.8793]]])
print (np.array2string(model.predict([in0Ave28638,in0Con22891,in0Per40298],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max50596.png')

LAve28638 = average_pooling1D_layer([[[1.8762, 1.9985], [1.9932, 1.6836]]], 1, Ave28638), 
LZer17065 = zero_padding1D_layer(Ave28638, 1, 0, Zer17065), 
LCon22891 = concatenate_layer([Zer17065,[[[0.052], [0.1789], [0.303]]]], 2, Con22891), 
LPer40298 = permute_layer([[[1.076, 1.2993, 1.2313], [1.4922, 1.864, 1.4581], [1.7997, 1.9151, 1.8793]]], 1,2, Per40298), 
LReL82287 = relu_layer(Per40298, 0.9681089106372837, 7.087419849397143, 9.46755433089794, ReL82287), 
LMax50596 = maximum_layer([Con22891,ReL82287], Max50596), 
exec_layers([LAve28638,LZer17065,LCon22891,LPer40298,LReL82287,LMax50596],["Ave28638","Zer17065","Con22891","Per40298","ReL82287","Max50596"],Max50596,"Max50596")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0520000], [1.8762000, 1.9985000, 0.1789000], [1.9931999, 1.6835999, 0.3030000]]]

Expected (Unparsed): [[[0,0,0.052],[1.8762,1.9985,0.1789],[1.9932,1.6836,0.303]]]

Actual:   [[[0, 0, 0.052], [1.8762, 1.9985, 0.1789], [1.9932, 1.6836, 0.303]]]

Expected: [[[0, 0, 0.052], [1.8762, 1.9985, 0.1789], [1.9932, 1.6836, 0.303]]]