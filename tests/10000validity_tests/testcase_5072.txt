import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add31907 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add31907 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Ave32279 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave32279 = tf.keras.layers.Input(shape=([2, 1]))

Add31907 = keras.layers.Add(name = 'Add31907', )([in0Add31907,in1Add31907])
Res10338 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res10338', )(Add31907)
Cro29020 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (0, 0)), name = 'Cro29020', )(Res10338)
Res11639 = keras.layers.Reshape((2, 1, 1), name = 'Res11639', )(Cro29020)
Ave32279 = keras.layers.Average(name = 'Ave32279', )([in0Ave32279,in1Ave32279])
Res18420 = keras.layers.Reshape((2, 1, 1), name = 'Res18420', )(Ave32279)
Ave10211 = keras.layers.AveragePooling2D(pool_size=(2, 1), name = 'Ave10211', )(Res18420)
Zer96826 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer96826', )(Ave10211)
Max29258 = keras.layers.Maximum(name = 'Max29258', )([Res11639,Zer96826])
model = tf.keras.models.Model(inputs=[in0Add31907,in1Add31907,in0Ave32279,in1Ave32279], outputs=Max29258)
in0Add31907 = tf.constant([[[[0.0327]], [[0.9184]]]])
in1Add31907 = tf.constant([[[[0.9468]], [[0.6996]]]])
in0Ave32279 = tf.constant([[[0.8934], [0.6476]]])
in1Ave32279 = tf.constant([[[0.725], [0.2065]]])
print (np.array2string(model.predict([in0Add31907,in1Add31907,in0Ave32279,in1Ave32279],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max29258.png')

LAdd31907 = add_layer([[[[[0.0327]], [[0.9184]]]], [[[[0.9468]], [[0.6996]]]]], Add31907), 
LRes10338 = reshape_layer(Add31907, [2, 1, 1, 1], Res10338), 
LCro29020 = cropping3D_layer(Res10338, 0, 0, 0, 0, 0, 0, Cro29020), 
LRes11639 = reshape_layer(Cro29020, [2, 1, 1], Res11639), 
LAve32279 = average_layer([[[[0.8934], [0.6476]]], [[[0.725], [0.2065]]]], Ave32279), 
LRes18420 = reshape_layer(Ave32279, [2, 1, 1], Res18420), 
LAve10211 = average_pooling2D_layer(Res18420, 2, 1, Ave10211), 
LZer96826 = zero_padding2D_layer(Ave10211, 1, 0, 0, 0, Zer96826), 
LMax29258 = maximum_layer([Res11639,Zer96826], Max29258), 
exec_layers([LAdd31907,LRes10338,LCro29020,LRes11639,LAve32279,LRes18420,LAve10211,LZer96826,LMax29258],["Add31907","Res10338","Cro29020","Res11639","Ave32279","Res18420","Ave10211","Zer96826","Max29258"],Max29258,"Max29258")

Actual (Unparsed): [[[[0.9795000]], [[1.6180000]]]]

Expected (Unparsed): [[[[0.9794999999999999]],[[1.6179999999999999]]]]

Actual:   [[[[0.9795]], [[1.618]]]]

Expected: [[[[0.9795]], [[1.618]]]]