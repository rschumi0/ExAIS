import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot43465 = tf.keras.layers.Input(shape=([2]))
in1Dot43465 = tf.keras.layers.Input(shape=([2]))
in0Ave50958 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Ave50958 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Dot43465 = keras.layers.Dot(axes=(1, 1), name = 'Dot43465', )([in0Dot43465,in1Dot43465])
Res76505 = keras.layers.Reshape((1, 1), name = 'Res76505', )(Dot43465)
Res94729 = keras.layers.Reshape((1, 1, 1), name = 'Res94729', )(Res76505)
Ave70301 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave70301', )(Res94729)
Res32652 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res32652', )(Ave70301)
Zer38272 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer38272', )(Res32652)
Ave50958 = keras.layers.Average(name = 'Ave50958', )([in0Ave50958,in1Ave50958])
Add17374 = keras.layers.Add(name = 'Add17374', )([Zer38272,Ave50958])
model = tf.keras.models.Model(inputs=[in0Dot43465,in1Dot43465,in0Ave50958,in1Ave50958], outputs=Add17374)
in0Dot43465 = tf.constant([[0.2673, 0.9883]])
in1Dot43465 = tf.constant([[0.1364, 0.8144]])
in0Ave50958 = tf.constant([[[[[0.2698]], [[0.2683]]], [[[0.247]], [[0.0238]]]]])
in1Ave50958 = tf.constant([[[[[0.483]], [[0.2107]]], [[[0.7994]], [[0.4848]]]]])
print (np.array2string(model.predict([in0Dot43465,in1Dot43465,in0Ave50958,in1Ave50958],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add17374.png')

LDot43465 = dot_layer([[0.2673, 0.9883]], [[0.1364, 0.8144]], 1, 1, Dot43465), 
LRes76505 = reshape_layer(Dot43465, [1, 1], Res76505), 
LRes94729 = reshape_layer(Res76505, [1, 1, 1], Res94729), 
LAve70301 = average_pooling2D_layer(Res94729, 1, 1, Ave70301), 
LRes32652 = reshape_layer(Ave70301, [1, 1, 1, 1], Res32652), 
LZer38272 = zero_padding3D_layer(Res32652, 1, 0, 1, 0, 0, 0, Zer38272), 
LAve50958 = average_layer([[[[[[0.2698]], [[0.2683]]], [[[0.247]], [[0.0238]]]]], [[[[[0.483]], [[0.2107]]], [[[0.7994]], [[0.4848]]]]]], Ave50958), 
LAdd17374 = add_layer([Zer38272,Ave50958], Add17374), 
exec_layers([LDot43465,LRes76505,LRes94729,LAve70301,LRes32652,LZer38272,LAve50958,LAdd17374],["Dot43465","Res76505","Res94729","Ave70301","Res32652","Zer38272","Ave50958","Add17374"],Add17374,"Add17374")

Actual (Unparsed): [[[[[0.3764000]], [[0.2395000]]], [[[0.5232000]], [[1.0956313]]]]]

Expected (Unparsed): [[[[[0.37639999999999996]],[[0.2395]]],[[[0.5232]],[[1.09563124]]]]]

Actual:   [[[[[0.3764]], [[0.2395]]], [[[0.5232]], [[1.0957]]]]]

Expected: [[[[[0.3764]], [[0.2395]]], [[[0.5232]], [[1.0957]]]]]