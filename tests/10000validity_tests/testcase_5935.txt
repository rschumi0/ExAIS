import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub82355 = tf.keras.layers.Input(shape=([3, 3, 2, 3]))
in1Sub82355 = tf.keras.layers.Input(shape=([3, 3, 2, 3]))

Sub82355 = keras.layers.Subtract(name = 'Sub82355', )([in0Sub82355,in1Sub82355])
Res60666 = keras.layers.Reshape((3, 3, 6), name = 'Res60666', )(Sub82355)
Res74282 = keras.layers.Reshape((3, 18), name = 'Res74282', )(Res60666)
Up_3775 = keras.layers.UpSampling1D(size=(2), name = 'Up_3775', )(Res74282)
Res76138 = keras.layers.Reshape((6, 18, 1), name = 'Res76138', )(Up_3775)
Ave32472 = keras.layers.AveragePooling2D(pool_size=(5, 11), strides=(2, 1), padding='same', name = 'Ave32472', )(Res76138)
model = tf.keras.models.Model(inputs=[in0Sub82355,in1Sub82355], outputs=Ave32472)
in0Sub82355 = tf.constant([[[[[0.0914, 0.233, 0.8894], [0.0243, 0.0045, 0.1648]], [[0.3149, 0.7061, 0.325], [0.2468, 0.5097, 0.8544]], [[0.0602, 0.3804, 0.4673], [0.5308, 0.5239, 0.4592]]], [[[0.6607, 0.3216, 0.4438], [0.1622, 0.6834, 0.0396]], [[0.0997, 0.4784, 0.28], [0.0292, 0.6831, 0.9844]], [[0.405, 0.5647, 0.0344], [0.2185, 0.1824, 0.0454]]], [[[0.6688, 0.8468, 0.158], [0.4334, 0.5318, 0.7013]], [[0.0317, 0.656, 0.2391], [0.1847, 0.1376, 0.4972]], [[0.6527, 0.9825, 0.2991], [0.8438, 0.5162, 0.5007]]]]])
in1Sub82355 = tf.constant([[[[[0.3292, 0.0157, 0.5348], [0.9573, 0.3673, 0.3122]], [[0.7199, 0.5938, 0.4494], [0.8361, 0.0416, 0.0467]], [[0.1927, 0.1179, 0.4283], [0.5181, 0.2431, 0.0588]]], [[[0.9413, 0.0222, 0.1827], [0.2305, 0.5099, 0.6473]], [[0.9203, 0.6323, 0.9606], [0.4686, 0.2021, 0.5849]], [[0.1995, 0.4764, 0.7697], [0.567, 0.3128, 0.6426]]], [[[0.8644, 0.4422, 0.0404], [0.0369, 0.2328, 0.7104]], [[0.5469, 0.7283, 0.5225], [0.1269, 0.6646, 0.0565]], [[0.9744, 0.2751, 0.8159], [0.7452, 0.6153, 0.4558]]]]])
print (np.array2string(model.predict([in0Sub82355,in1Sub82355],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave32472.png')

LSub82355 = subtract_layer([[[[[0.0914, 0.233, 0.8894], [0.0243, 0.0045, 0.1648]], [[0.3149, 0.7061, 0.325], [0.2468, 0.5097, 0.8544]], [[0.0602, 0.3804, 0.4673], [0.5308, 0.5239, 0.4592]]], [[[0.6607, 0.3216, 0.4438], [0.1622, 0.6834, 0.0396]], [[0.0997, 0.4784, 0.28], [0.0292, 0.6831, 0.9844]], [[0.405, 0.5647, 0.0344], [0.2185, 0.1824, 0.0454]]], [[[0.6688, 0.8468, 0.158], [0.4334, 0.5318, 0.7013]], [[0.0317, 0.656, 0.2391], [0.1847, 0.1376, 0.4972]], [[0.6527, 0.9825, 0.2991], [0.8438, 0.5162, 0.5007]]]]], [[[[[0.3292, 0.0157, 0.5348], [0.9573, 0.3673, 0.3122]], [[0.7199, 0.5938, 0.4494], [0.8361, 0.0416, 0.0467]], [[0.1927, 0.1179, 0.4283], [0.5181, 0.2431, 0.0588]]], [[[0.9413, 0.0222, 0.1827], [0.2305, 0.5099, 0.6473]], [[0.9203, 0.6323, 0.9606], [0.4686, 0.2021, 0.5849]], [[0.1995, 0.4764, 0.7697], [0.567, 0.3128, 0.6426]]], [[[0.8644, 0.4422, 0.0404], [0.0369, 0.2328, 0.7104]], [[0.5469, 0.7283, 0.5225], [0.1269, 0.6646, 0.0565]], [[0.9744, 0.2751, 0.8159], [0.7452, 0.6153, 0.4558]]]]], Sub82355), 
LRes60666 = reshape_layer(Sub82355, [3, 3, 6], Res60666), 
LRes74282 = reshape_layer(Res60666, [3, 18], Res74282), 
LUp_3775 = up_sampling1D_layer(Res74282, 2, Up_3775), 
LRes76138 = reshape_layer(Up_3775, [6, 18, 1], Res76138), 
LAve32472 = average_pooling2D_layer(Res76138, 5, 11, 2, 1, true, Ave32472), 
exec_layers([LSub82355,LRes60666,LRes74282,LUp_3775,LRes76138,LAve32472],["Sub82355","Res60666","Res74282","Up_3775","Res76138","Ave32472"],Ave32472,"Ave32472")

Actual (Unparsed): [[[[-0.1109750], [-0.1826643], [-0.1624313], [-0.1891056], [-0.2216300], [-0.1583409], [-0.0799046], [-0.1000727], [-0.1121136], [-0.0982500], [-0.1049091], [-0.0637500], [-0.0169864], [-0.0166050], [0.0262722], [0.0938500], [0.0394643], [-0.0545583]], [[0.0157233], [-0.0744257], [-0.0736250], [-0.1110533], [-0.1269980], [-0.1086145], [-0.0417364], [-0.0779218], [-0.0644327], [-0.1042255], [-0.1236673], [-0.1017982], [-0.0586636], [-0.0577280], [-0.0185333], [0.0129625], [0.0040686], [-0.0781900]], [[0.1001889], [-0.0022667], [-0.0144208], [-0.0590185], [-0.0639100], [-0.0754636], [-0.0162909], [-0.0631545], [-0.0326454], [-0.1082091], [-0.1361727], [-0.1271636], [-0.0864485], [-0.0851433], [-0.0484037], [-0.0409625], [-0.0195286], [-0.0939444]]]]

Expected (Unparsed): [[[[-0.110975],[-0.1826642857142857],[-0.16243124999999997],[-0.18910555555555553],[-0.22162999999999994],[-0.15834090909090906],[-0.07990454545454545],[-0.10007272727272727],[-0.11211363636363636],[-0.09824999999999996],[-0.10490909090909085],[-0.06374999999999999],[-0.016986363636363605],[-0.016604999999999977],[0.026272222222222266],[0.09385000000000004],[0.03946428571428574],[-0.05455833333333333]],[[0.015723333333333315],[-0.0744257142857143],[-0.07362500000000002],[-0.11105333333333336],[-0.12699800000000003],[-0.10861454545454548],[-0.04173636363636364],[-0.0779218181818182],[-0.06443272727272731],[-0.10422545454545458],[-0.12366727272727275],[-0.10179818181818183],[-0.058663636363636334],[-0.05772799999999997],[-0.018533333333333315],[0.012962500000000005],[0.004068571428571431],[-0.07818999999999998]],[[0.10018888888888888],[-0.0022666666666666816],[-0.01442083333333334],[-0.059018518518518526],[-0.06391],[-0.07546363636363634],[-0.016290909090909092],[-0.06315454545454544],[-0.03264545454545455],[-0.10820909090909088],[-0.13617272727272722],[-0.1271636363636363],[-0.0864484848484848],[-0.0851433333333333],[-0.04840370370370368],[-0.04096249999999998],[-0.019528571428571416],[-0.09394444444444444]]]]

Actual:   [[[[-0.1109], [-0.1826], [-0.1624], [-0.1891], [-0.2216], [-0.1583], [-0.0799], [-0.1], [-0.1121], [-0.0982], [-0.1049], [-0.0637], [-0.0169], [-0.0166], [0.0263], [0.0939], [0.0395], [-0.0545]], [[0.0158], [-0.0744], [-0.0736], [-0.111], [-0.1269], [-0.1086], [-0.0417], [-0.0779], [-0.0644], [-0.1042], [-0.1236], [-0.1017], [-0.0586], [-0.0577], [-0.0185], [0.013], [0.0041], [-0.0781]], [[0.1002], [-0.0022], [-0.0144], [-0.059], [-0.0639], [-0.0754], [-0.0162], [-0.0631], [-0.0326], [-0.1082], [-0.1361], [-0.1271], [-0.0864], [-0.0851], [-0.0484], [-0.0409], [-0.0195], [-0.0939]]]]

Expected: [[[[-0.1109], [-0.1826], [-0.1624], [-0.1891], [-0.2216], [-0.1583], [-0.0799], [-0.1], [-0.1121], [-0.0982], [-0.1049], [-0.0637], [-0.0169], [-0.0166], [0.0263], [0.0939], [0.0395], [-0.0545]], [[0.0158], [-0.0744], [-0.0736], [-0.111], [-0.1269], [-0.1086], [-0.0417], [-0.0779], [-0.0644], [-0.1042], [-0.1236], [-0.1017], [-0.0586], [-0.0577], [-0.0185], [0.013], [0.0041], [-0.0781]], [[0.1002], [-0.0022], [-0.0144], [-0.059], [-0.0639], [-0.0754], [-0.0162], [-0.0631], [-0.0326], [-0.1082], [-0.1361], [-0.1271], [-0.0864], [-0.0851], [-0.0484], [-0.0409], [-0.0195], [-0.0939]]]]