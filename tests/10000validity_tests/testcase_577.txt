import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave16586 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave16586 = tf.keras.layers.Input(shape=([2, 2]))

Ave16586 = keras.layers.Average(name = 'Ave16586', )([in0Ave16586,in1Ave16586])
Ave54160 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave54160', )(Ave16586)
model = tf.keras.models.Model(inputs=[in0Ave16586,in1Ave16586], outputs=Ave54160)
in0Ave16586 = tf.constant([[[0.5266, 0.393], [0.9677, 0.5088]]])
in1Ave16586 = tf.constant([[[0.5021, 0.6053], [0.0462, 0.2215]]])
print (np.array2string(model.predict([in0Ave16586,in1Ave16586],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave54160.png')

LAve16586 = average_layer([[[[0.5266, 0.393], [0.9677, 0.5088]]], [[[0.5021, 0.6053], [0.0462, 0.2215]]]], Ave16586), 
LAve54160 = average_pooling1D_layer(Ave16586, 1, Ave54160), 
exec_layers([LAve16586,LAve54160],["Ave16586","Ave54160"],Ave54160,"Ave54160")

Actual (Unparsed): [[[0.5143500, 0.4991500], [0.5069500, 0.3651500]]]

Expected (Unparsed): [[[0.51435,0.49915],[0.50695,0.36515000000000003]]]

Actual:   [[[0.5144, 0.4992], [0.507, 0.3652]]]

Expected: [[[0.5144, 0.4992], [0.507, 0.3652]]]