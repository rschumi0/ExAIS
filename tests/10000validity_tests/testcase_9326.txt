import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer88836 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave40257 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave40257 = tf.keras.layers.Input(shape=([2, 1]))
in0Con17237 = tf.keras.layers.Input(shape=([3, 1]))
in0Sub96841 = tf.keras.layers.Input(shape=([2]))
in1Sub96841 = tf.keras.layers.Input(shape=([2]))
in0Con39040 = tf.keras.layers.Input(shape=([4]))

Zer88836 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer88836', )(in0Zer88836)
Ave40257 = keras.layers.Average(name = 'Ave40257', )([in0Ave40257,in1Ave40257])
Zer61136 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer61136', )(Ave40257)
Con17237 = keras.layers.Concatenate(axis=2, name = 'Con17237', )([Zer61136,in0Con17237])
Add65498 = keras.layers.Add(name = 'Add65498', )([Zer88836,Con17237])
Fla77707 = keras.layers.Flatten(name = 'Fla77707', )(Add65498)
Sub96841 = keras.layers.Subtract(name = 'Sub96841', )([in0Sub96841,in1Sub96841])
Con39040 = keras.layers.Concatenate(axis=1, name = 'Con39040', )([Sub96841,in0Con39040])
Ave59709 = keras.layers.Average(name = 'Ave59709', )([Fla77707,Con39040])
model = tf.keras.models.Model(inputs=[in0Zer88836,in0Ave40257,in1Ave40257,in0Con17237,in0Sub96841,in1Sub96841,in0Con39040], outputs=Ave59709)
in0Zer88836 = tf.constant([[[1.8923, 1.2011]]])
in0Ave40257 = tf.constant([[[0.6145], [0.9276]]])
in1Ave40257 = tf.constant([[[0.7989], [0.815]]])
in0Con17237 = tf.constant([[[0.1064], [0.1385], [0.829]]])
in0Sub96841 = tf.constant([[0.0813, 0.3819]])
in1Sub96841 = tf.constant([[0.7572, 0.9217]])
in0Con39040 = tf.constant([[0.1259, 0.4082, 0.1483, 0.6146]])
print (np.array2string(model.predict([in0Zer88836,in0Ave40257,in1Ave40257,in0Con17237,in0Sub96841,in1Sub96841,in0Con39040],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave59709.png')

LZer88836 = zero_padding1D_layer([[[1.8923, 1.2011]]], 1, 1, Zer88836), 
LAve40257 = average_layer([[[[0.6145], [0.9276]]], [[[0.7989], [0.815]]]], Ave40257), 
LZer61136 = zero_padding1D_layer(Ave40257, 1, 0, Zer61136), 
LCon17237 = concatenate_layer([Zer61136,[[[0.1064], [0.1385], [0.829]]]], 2, Con17237), 
LAdd65498 = add_layer([Zer88836,Con17237], Add65498), 
LFla77707 = flatten_layer(Add65498, Fla77707), 
LSub96841 = subtract_layer([[0.0813, 0.3819]], [[0.7572, 0.9217]], Sub96841), 
LCon39040 = concatenate_layer([Sub96841,[[0.1259, 0.4082, 0.1483, 0.6146]]], 1, Con39040), 
LAve59709 = average_layer([Fla77707,Con39040], Ave59709), 
exec_layers([LZer88836,LAve40257,LZer61136,LCon17237,LAdd65498,LFla77707,LSub96841,LCon39040,LAve59709],["Zer88836","Ave40257","Zer61136","Con17237","Add65498","Fla77707","Sub96841","Con39040","Ave59709"],Ave59709,"Ave59709")

Actual (Unparsed): [[-0.3379500, -0.2167000, 1.3624500, 0.8739000, 0.5098000, 0.7218000]]

Expected (Unparsed): [[-0.33795,-0.21669999999999998,1.3624500000000002,0.8739000000000001,0.5098,0.7218]]

Actual:   [[-0.3379, -0.2167, 1.3625, 0.8739, 0.5098, 0.7218]]

Expected: [[-0.3379, -0.2166, 1.3625, 0.874, 0.5098, 0.7218]]