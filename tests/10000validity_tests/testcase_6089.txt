import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add10936 = tf.keras.layers.Input(shape=([1, 1]))
in1Add10936 = tf.keras.layers.Input(shape=([1, 1]))
in0Ave85324 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Ave85324 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Add10936 = keras.layers.Add(name = 'Add10936', )([in0Add10936,in1Add10936])
Res2840 = keras.layers.Reshape((1, 1, 1), name = 'Res2840', )(Add10936)
Res72679 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res72679', )(Res2840)
Zer82320 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer82320', )(Res72679)
Ave85324 = keras.layers.Average(name = 'Ave85324', )([in0Ave85324,in1Ave85324])
Ave85287 = keras.layers.Average(name = 'Ave85287', )([Zer82320,Ave85324])
Den47763 = keras.layers.Dense(2,name = 'Den47763', )(Ave85287)
model = tf.keras.models.Model(inputs=[in0Add10936,in1Add10936,in0Ave85324,in1Ave85324], outputs=Den47763)
w = model.get_layer('Den47763').get_weights() 
w[0] = np.array([[0.0055, 0.6996]])
w[1] = np.array([0.2302, 0.1476])
model.get_layer('Den47763').set_weights(w) 
in0Add10936 = tf.constant([[[0.1759]]])
in1Add10936 = tf.constant([[[0.2534]]])
in0Ave85324 = tf.constant([[[[[0.133]], [[0.5735]]], [[[0.8336]], [[0.3404]]]]])
in1Ave85324 = tf.constant([[[[[0.0931]], [[0.2962]]], [[[0.5695]], [[0.4514]]]]])
print (np.array2string(model.predict([in0Add10936,in1Add10936,in0Ave85324,in1Ave85324],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den47763.png')

LAdd10936 = add_layer([[[[0.1759]]], [[[0.2534]]]], Add10936), 
LRes2840 = reshape_layer(Add10936, [1, 1, 1], Res2840), 
LRes72679 = reshape_layer(Res2840, [1, 1, 1, 1], Res72679), 
LZer82320 = zero_padding3D_layer(Res72679, 1, 0, 1, 0, 0, 0, Zer82320), 
LAve85324 = average_layer([[[[[[0.133]], [[0.5735]]], [[[0.8336]], [[0.3404]]]]], [[[[[0.0931]], [[0.2962]]], [[[0.5695]], [[0.4514]]]]]], Ave85324), 
LAve85287 = average_layer([Zer82320,Ave85324], Ave85287), 
LDen47763 = dense_layer(Ave85287, [[0.0055, 0.6996]],[0.2302, 0.1476], Den47763), 
exec_layers([LAdd10936,LRes2840,LRes72679,LZer82320,LAve85324,LAve85287,LDen47763],["Add10936","Res2840","Res72679","Zer82320","Ave85324","Ave85287","Den47763"],Den47763,"Den47763")

Actual (Unparsed): [[[[[0.2305109, 0.1871449]], [[0.2313958, 0.2997105]]], [[[0.2321293, 0.3930022]], [[0.2324693, 0.4362550]]]]]

Expected (Unparsed): [[[[[0.23051088749999998,0.18714489]],[[0.23139583749999998,0.29971053000000003]]],[[[0.2321292625,0.39300219000000003]],[[0.2324693,0.43625496]]]]]

Actual:   [[[[[0.2306, 0.1872]], [[0.2314, 0.2998]]], [[[0.2322, 0.3931]], [[0.2325, 0.4363]]]]]

Expected: [[[[[0.2306, 0.1872]], [[0.2314, 0.2998]]], [[[0.2322, 0.3931]], [[0.2325, 0.4363]]]]]