import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro86414 = tf.keras.layers.Input(shape=([1, 3, 4]))
in0Cro24593 = tf.keras.layers.Input(shape=([2, 3]))
in0Con44504 = tf.keras.layers.Input(shape=([1, 6]))
in0Lay14277 = tf.keras.layers.Input(shape=([2, 1]))
in0Con65372 = tf.keras.layers.Input(shape=([1, 2]))

Cro86414 = keras.layers.Cropping2D(cropping=((0, 0), (0, 2)), name = 'Cro86414', )(in0Cro86414)
Con77714 = keras.layers.Conv2D(3, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con77714', )(Cro86414)
Res91208 = keras.layers.Reshape((1, 3), name = 'Res91208', )(Con77714)
Up_81142 = keras.layers.UpSampling1D(size=(1), name = 'Up_81142', )(Res91208)
Res16921 = keras.layers.Reshape((1, 3, 1), name = 'Res16921', )(Up_81142)
Up_56427 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_56427', )(Res16921)
Res76499 = keras.layers.Reshape((1, 6), name = 'Res76499', )(Up_56427)
Cro24593 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro24593', )(in0Cro24593)
Con44504 = keras.layers.Concatenate(axis=2, name = 'Con44504', )([Cro24593,in0Con44504])
Lay14277 = keras.layers.LayerNormalization(axis=2, epsilon=2.4051107439370316, name = 'Lay14277', )(in0Lay14277)
Res72402 = keras.layers.Reshape((2, 1, 1), name = 'Res72402', )(Lay14277)
Res43314 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res43314', )(Res72402)
Zer42723 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer42723', )(Res43314)
Res71664 = keras.layers.Reshape((4, 3, 3), name = 'Res71664', )(Zer42723)
Res10503 = keras.layers.Reshape((4, 9), name = 'Res10503', )(Res71664)
Dot14553 = keras.layers.Dot(axes=(2, 2), name = 'Dot14553', )([Con44504,Res10503])
Con65372 = keras.layers.Concatenate(axis=2, name = 'Con65372', )([Dot14553,in0Con65372])
Add49457 = keras.layers.Add(name = 'Add49457', )([Res76499,Con65372])
model = tf.keras.models.Model(inputs=[in0Cro86414,in0Cro24593,in0Con44504,in0Lay14277,in0Con65372], outputs=Add49457)
w = model.get_layer('Con77714').get_weights() 
w[0] = np.array([[[[0.9979, 0.6475, 0.749], [0.1773, 0.42, 0.4064], [0.2989, 0.8725, 0.1782], [0.0583, 0.2268, 0.105]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con77714').set_weights(w) 
in0Cro86414 = tf.constant([[[[1.0585, 1.99, 1.1744, 1.8687], [1.3284, 1.1895, 1.6704, 1.1432], [1.0943, 1.7765, 1.7539, 1.2782]]]])
in0Cro24593 = tf.constant([[[1.6533, 1.6592, 1.7969], [1.6766, 1.3164, 1.5558]]])
in0Con44504 = tf.constant([[[0.6076, 0.1676, 0.8193, 0.3497, 0.1849, 0.8474]]])
in0Lay14277 = tf.constant([[[1.6285], [1.2894]]])
in0Con65372 = tf.constant([[[0.8588, 0.7254]]])
print (np.array2string(model.predict([in0Cro86414,in0Cro24593,in0Con44504,in0Lay14277,in0Con65372],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add49457.png')

LCro86414 = cropping2D_layer([[[[1.0585, 1.99, 1.1744, 1.8687], [1.3284, 1.1895, 1.6704, 1.1432], [1.0943, 1.7765, 1.7539, 1.2782]]]], 0, 0, 0, 2, Cro86414), 
LCon77714 = conv2D_layer(Cro86414, 1, 1,[[[[0.9979, 0.6475, 0.749], [0.1773, 0.42, 0.4064], [0.2989, 0.8725, 0.1782], [0.0583, 0.2268, 0.105]]]],[0, 0, 0], 1, 1, false, 1, 1, Con77714), 
LRes91208 = reshape_layer(Con77714, [1, 3], Res91208), 
LUp_81142 = up_sampling1D_layer(Res91208, 1, Up_81142), 
LRes16921 = reshape_layer(Up_81142, [1, 3, 1], Res16921), 
LUp_56427 = up_sampling2D_layer(Res16921, 1, 2, Up_56427), 
LRes76499 = reshape_layer(Up_56427, [1, 6], Res76499), 
LCro24593 = cropping1D_layer([[[1.6533, 1.6592, 1.7969], [1.6766, 1.3164, 1.5558]]], 1, 0, Cro24593), 
LCon44504 = concatenate_layer([Cro24593,[[[0.6076, 0.1676, 0.8193, 0.3497, 0.1849, 0.8474]]]], 2, Con44504), 
LLay14277 = layer_normalization_layer([[[1.6285], [1.2894]]], 2, 2.4051107439370316, Lay14277), 
LRes72402 = reshape_layer(Lay14277, [2, 1, 1], Res72402), 
LRes43314 = reshape_layer(Res72402, [2, 1, 1, 1], Res43314), 
LZer42723 = zero_padding3D_layer(Res43314, 1, 1, 1, 1, 1, 1, Zer42723), 
LRes71664 = reshape_layer(Zer42723, [4, 3, 3], Res71664), 
LRes10503 = reshape_layer(Res71664, [4, 9], Res10503), 
LDot14553 = dot_layer(Con44504,Res10503, 2, 2, Dot14553), 
LCon65372 = concatenate_layer([Dot14553,[[[0.8588, 0.7254]]]], 2, Con65372), 
LAdd49457 = add_layer([Res76499,Con65372], Add49457), 
exec_layers([LCro86414,LCon77714,LRes91208,LUp_81142,LRes16921,LUp_56427,LRes76499,LCro24593,LCon44504,LLay14277,LRes72402,LRes43314,LZer42723,LRes71664,LRes10503,LDot14553,LCon65372,LAdd49457],["Cro86414","Con77714","Res91208","Up_81142","Res16921","Up_56427","Res76499","Cro24593","Con44504","Lay14277","Res72402","Res43314","Zer42723","Res71664","Res10503","Dot14553","Con65372","Add49457"],Add49457,"Add49457")

Actual (Unparsed): [[[1.8690776, 1.8690776, 2.9696639, 2.9696639, 2.8658441, 2.7324441]]]

Expected (Unparsed): [[[1.86907752,1.86907752,2.9696639100000004,2.9696639100000004,2.86584408,2.73244408]]]

Actual:   [[[1.8691, 1.8691, 2.9697, 2.9697, 2.8659, 2.7325]]]

Expected: [[[1.8691, 1.8691, 2.9697, 2.9697, 2.8659, 2.7325]]]