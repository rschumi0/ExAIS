import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave62669 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Ave62669 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Max23790 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Max23790 = tf.keras.layers.Input(shape=([2, 1, 2]))

Ave62669 = keras.layers.Average(name = 'Ave62669', )([in0Ave62669,in1Ave62669])
Res67598 = keras.layers.Reshape((2, 2, 2), name = 'Res67598', )(Ave62669)
Max23790 = keras.layers.Maximum(name = 'Max23790', )([in0Max23790,in1Max23790])
Zer59173 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer59173', )(Max23790)
Mul68837 = keras.layers.Multiply(name = 'Mul68837', )([Res67598,Zer59173])
Cro71319 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro71319', )(Mul68837)
Res16877 = keras.layers.Reshape((1, 2, 2, 1), name = 'Res16877', )(Cro71319)
Glo90689 = keras.layers.GlobalMaxPool3D(name = 'Glo90689', )(Res16877)
model = tf.keras.models.Model(inputs=[in0Ave62669,in1Ave62669,in0Max23790,in1Max23790], outputs=Glo90689)
in0Ave62669 = tf.constant([[[[[0.9891, 0.6968]], [[0.5548, 0.3158]]], [[[0.9171, 0.2756]], [[0.1796, 0.2847]]]]])
in1Ave62669 = tf.constant([[[[[0.7375, 0.5606]], [[0.3245, 0.6352]]], [[[0.9856, 0.5548]], [[0.911, 0.8395]]]]])
in0Max23790 = tf.constant([[[[0.5348, 0.3571]], [[0.5293, 0.4725]]]])
in1Max23790 = tf.constant([[[[0.5358, 0.7819]], [[0.94, 0.9879]]]])
print (np.array2string(model.predict([in0Ave62669,in1Ave62669,in0Max23790,in1Max23790],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo90689.png')

LAve62669 = average_layer([[[[[[0.9891, 0.6968]], [[0.5548, 0.3158]]], [[[0.9171, 0.2756]], [[0.1796, 0.2847]]]]], [[[[[0.7375, 0.5606]], [[0.3245, 0.6352]]], [[[0.9856, 0.5548]], [[0.911, 0.8395]]]]]], Ave62669), 
LRes67598 = reshape_layer(Ave62669, [2, 2, 2], Res67598), 
LMax23790 = maximum_layer([[[[[0.5348, 0.3571]], [[0.5293, 0.4725]]]], [[[[0.5358, 0.7819]], [[0.94, 0.9879]]]]], Max23790), 
LZer59173 = zero_padding2D_layer(Max23790, 0, 0, 1, 0, Zer59173), 
LMul68837 = multiply_layer([Res67598,Zer59173], Mul68837), 
LCro71319 = cropping2D_layer(Mul68837, 1, 0, 0, 0, Cro71319), 
LRes16877 = reshape_layer(Cro71319, [1, 2, 2, 1], Res16877), 
LGlo90689 = global_max_pool3D_layer(Res16877, Glo90689), 
exec_layers([LAve62669,LRes67598,LMax23790,LZer59173,LMul68837,LCro71319,LRes16877,LGlo90689],["Ave62669","Res67598","Max23790","Zer59173","Mul68837","Cro71319","Res16877","Glo90689"],Glo90689,"Glo90689")

Actual (Unparsed): [[0.5552986]]

Expected (Unparsed): [[0.55529859]]

Actual:   [[0.5553]]

Expected: [[0.5553]]