import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub99561 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub99561 = tf.keras.layers.Input(shape=([2, 2]))
in0Con51591 = tf.keras.layers.Input(shape=([6, 5, 3]))
in0Max24892 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max24892 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Dot56681 = tf.keras.layers.Input(shape=([2]))
in1Dot56681 = tf.keras.layers.Input(shape=([2]))
in0Con75448 = tf.keras.layers.Input(shape=([1]))
in0Dot69109 = tf.keras.layers.Input(shape=([3]))
in1Dot69109 = tf.keras.layers.Input(shape=([3]))

Sub99561 = keras.layers.Subtract(name = 'Sub99561', )([in0Sub99561,in1Sub99561])
Res56567 = keras.layers.Reshape((2, 2, 1), name = 'Res56567', )(Sub99561)
Zer47969 = keras.layers.ZeroPadding2D(padding=((4, 0), (3, 0)), name = 'Zer47969', )(Res56567)
Con51591 = keras.layers.Concatenate(axis=3, name = 'Con51591', )([Zer47969,in0Con51591])
Max24892 = keras.layers.Maximum(name = 'Max24892', )([in0Max24892,in1Max24892])
Res26455 = keras.layers.Reshape((2, 1), name = 'Res26455', )(Max24892)
Fla80471 = keras.layers.Flatten(name = 'Fla80471', )(Res26455)
Dot56681 = keras.layers.Dot(axes=(1, 1), name = 'Dot56681', )([in0Dot56681,in1Dot56681])
Con75448 = keras.layers.Concatenate(axis=1, name = 'Con75448', )([Dot56681,in0Con75448])
Max96712 = keras.layers.Maximum(name = 'Max96712', )([Fla80471,Con75448])
Res38655 = keras.layers.Reshape((2, 1), name = 'Res38655', )(Max96712)
Res3716 = keras.layers.Reshape((2, 1, 1), name = 'Res3716', )(Res38655)
Con5064 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(3, 5), padding='same', name = 'Con5064', )(Res3716)
Sub29499 = keras.layers.Subtract(name = 'Sub29499', )([Con51591,Con5064])
Res14086 = keras.layers.Reshape((6, 5, 4, 1), name = 'Res14086', )(Sub29499)
Dot69109 = keras.layers.Dot(axes=(1, 1), name = 'Dot69109', )([in0Dot69109,in1Dot69109])
Res54323 = keras.layers.Reshape((1, 1), name = 'Res54323', )(Dot69109)
Res78778 = keras.layers.Reshape((1, 1, 1), name = 'Res78778', )(Res54323)
Res57146 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res57146', )(Res78778)
Up_34264 = keras.layers.UpSampling3D(size=(1, 2, 2), name = 'Up_34264', )(Res57146)
Zer18984 = keras.layers.ZeroPadding3D(padding=((5, 0), (3, 0), (2, 0)), name = 'Zer18984', )(Up_34264)
Add69163 = keras.layers.Add(name = 'Add69163', )([Res14086,Zer18984])
model = tf.keras.models.Model(inputs=[in0Sub99561,in1Sub99561,in0Con51591,in0Max24892,in1Max24892,in0Dot56681,in1Dot56681,in0Con75448,in0Dot69109,in1Dot69109], outputs=Add69163)
w = model.get_layer('Con5064').get_weights() 
w[0] = np.array([[[[0.9521], [0.4447], [0.15], [0.2422]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con5064').set_weights(w) 
in0Sub99561 = tf.constant([[[0.632, 0.3376], [0.0366, 0.8908]]])
in1Sub99561 = tf.constant([[[0.932, 0.7784], [0.6184, 0.8529]]])
in0Con51591 = tf.constant([[[[0.6609, 0.0668, 0.4217], [0.522, 0.6417, 0.9497], [0.5232, 0.4174, 0.6728], [0.0701, 0.11, 0.7871], [0.6935, 0.1501, 0.6778]], [[0.7477, 0.2576, 0.692], [0.2542, 0.9684, 0.7567], [0.0587, 0.9829, 0.6474], [0.7287, 0.2195, 0.114], [0.8695, 0.4365, 0.6517]], [[0.5352, 0.5996, 0.3395], [0.0202, 0.1163, 0.5261], [0.1685, 0.292, 0.4329], [0.3336, 0.0652, 0.8873], [0.8854, 0.7508, 0.6468]], [[0.3132, 0.8357, 0.9016], [0.9187, 0.4861, 0.1486], [0.066, 0.6729, 0.6059], [0.4396, 0.9486, 0.3822], [0.0141, 0.4112, 0.9489]], [[0.6284, 0.9428, 0.8873], [0.7264, 0.787, 0.4384], [0.5446, 0.5652, 0.0322], [0.0327, 0.8839, 0.6536], [0.7235, 0.9251, 0.6839]], [[0.4176, 0.8866, 0.5392], [0.0366, 0.4714, 0.8134], [0.3206, 0.0774, 0.5837], [0.7703, 0.555, 0.6885], [0.2953, 0.4255, 0.8025]]]])
in0Max24892 = tf.constant([[[[0.4364]], [[0.1116]]]])
in1Max24892 = tf.constant([[[[0.319]], [[0.0497]]]])
in0Dot56681 = tf.constant([[0.4584, 0.7111]])
in1Dot56681 = tf.constant([[0.5625, 0.8491]])
in0Con75448 = tf.constant([[0.7662]])
in0Dot69109 = tf.constant([[0.8031, 0.9134, 0.1786]])
in1Dot69109 = tf.constant([[0.2264, 0.9851, 0.0367]])
print (np.array2string(model.predict([in0Sub99561,in1Sub99561,in0Con51591,in0Max24892,in1Max24892,in0Dot56681,in1Dot56681,in0Con75448,in0Dot69109,in1Dot69109],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add69163.png')

LSub99561 = subtract_layer([[[0.632, 0.3376], [0.0366, 0.8908]]], [[[0.932, 0.7784], [0.6184, 0.8529]]], Sub99561), 
LRes56567 = reshape_layer(Sub99561, [2, 2, 1], Res56567), 
LZer47969 = zero_padding2D_layer(Res56567, 4, 0, 3, 0, Zer47969), 
LCon51591 = concatenate_layer([Zer47969,[[[[0.6609, 0.0668, 0.4217], [0.522, 0.6417, 0.9497], [0.5232, 0.4174, 0.6728], [0.0701, 0.11, 0.7871], [0.6935, 0.1501, 0.6778]], [[0.7477, 0.2576, 0.692], [0.2542, 0.9684, 0.7567], [0.0587, 0.9829, 0.6474], [0.7287, 0.2195, 0.114], [0.8695, 0.4365, 0.6517]], [[0.5352, 0.5996, 0.3395], [0.0202, 0.1163, 0.5261], [0.1685, 0.292, 0.4329], [0.3336, 0.0652, 0.8873], [0.8854, 0.7508, 0.6468]], [[0.3132, 0.8357, 0.9016], [0.9187, 0.4861, 0.1486], [0.066, 0.6729, 0.6059], [0.4396, 0.9486, 0.3822], [0.0141, 0.4112, 0.9489]], [[0.6284, 0.9428, 0.8873], [0.7264, 0.787, 0.4384], [0.5446, 0.5652, 0.0322], [0.0327, 0.8839, 0.6536], [0.7235, 0.9251, 0.6839]], [[0.4176, 0.8866, 0.5392], [0.0366, 0.4714, 0.8134], [0.3206, 0.0774, 0.5837], [0.7703, 0.555, 0.6885], [0.2953, 0.4255, 0.8025]]]]], 3, Con51591), 
LMax24892 = maximum_layer([[[[[0.4364]], [[0.1116]]]], [[[[0.319]], [[0.0497]]]]], Max24892), 
LRes26455 = reshape_layer(Max24892, [2, 1], Res26455), 
LFla80471 = flatten_layer(Res26455, Fla80471), 
LDot56681 = dot_layer([[0.4584, 0.7111]], [[0.5625, 0.8491]], 1, 1, Dot56681), 
LCon75448 = concatenate_layer([Dot56681,[[0.7662]]], 1, Con75448), 
LMax96712 = maximum_layer([Fla80471,Con75448], Max96712), 
LRes38655 = reshape_layer(Max96712, [2, 1], Res38655), 
LRes3716 = reshape_layer(Res38655, [2, 1, 1], Res3716), 
LCon5064 = conv2D_transpose_layer(Res3716, 1, 1,[[[[0.9521], [0.4447], [0.15], [0.2422]]]],[0, 0, 0, 0], 3, 5, true, Con5064), 
LSub29499 = subtract_layer(Con51591,Con5064, Sub29499), 
LRes14086 = reshape_layer(Sub29499, [6, 5, 4, 1], Res14086), 
LDot69109 = dot_layer([[0.8031, 0.9134, 0.1786]], [[0.2264, 0.9851, 0.0367]], 1, 1, Dot69109), 
LRes54323 = reshape_layer(Dot69109, [1, 1], Res54323), 
LRes78778 = reshape_layer(Res54323, [1, 1, 1], Res78778), 
LRes57146 = reshape_layer(Res78778, [1, 1, 1, 1], Res57146), 
LUp_34264 = up_sampling3D_layer(Res57146, 1, 2, 2, Up_34264), 
LZer18984 = zero_padding3D_layer(Up_34264, 5, 0, 3, 0, 2, 0, Zer18984), 
LAdd69163 = add_layer([Res14086,Zer18984], Add69163), 
exec_layers([LSub99561,LRes56567,LZer47969,LCon51591,LMax24892,LRes26455,LFla80471,LDot56681,LCon75448,LMax96712,LRes38655,LRes3716,LCon5064,LSub29499,LRes14086,LDot69109,LRes54323,LRes78778,LRes57146,LUp_34264,LZer18984,LAdd69163],["Sub99561","Res56567","Zer47969","Con51591","Max24892","Res26455","Fla80471","Dot56681","Con75448","Max96712","Res38655","Res3716","Con5064","Sub29499","Res14086","Dot69109","Res54323","Res78778","Res57146","Up_34264","Zer18984","Add69163"],Add69163,"Add69163")

Actual (Unparsed): [[[[[-0.8203722], [0.2777265], [-0.0624468], [0.2130096]], [[0.0000000], [0.5220000], [0.6417000], [0.9497000]], [[0.0000000], [0.5232000], [0.4174000], [0.6728000]], [[0.0000000], [0.0701000], [0.1100000], [0.7871000]], [[0.0000000], [0.6935000], [0.1501000], [0.6778000]]], [[[0.0000000], [0.7477000], [0.2576000], [0.6920000]], [[0.0000000], [0.2542000], [0.9684000], [0.7567000]], [[0.0000000], [0.0587000], [0.9829000], [0.6474000]], [[0.0000000], [0.7287000], [0.2195000], [0.1140000]], [[0.0000000], [0.8695000], [0.4365000], [0.6517000]]], [[[0.0000000], [0.5352000], [0.5996000], [0.3395000]], [[0.0000000], [0.0202000], [0.1163000], [0.5261000]], [[0.0000000], [0.1685000], [0.2920000], [0.4329000]], [[0.0000000], [0.3336000], [0.0652000], [0.8873000]], [[0.0000000], [0.8854000], [0.7508000], [0.6468000]]], [[[-0.7294990], [-0.0275291], [0.7207700], [0.7160264]], [[0.0000000], [0.9187000], [0.4861000], [0.1486000]], [[0.0000000], [0.0660000], [0.6729000], [0.6059000]], [[0.0000000], [0.4396000], [0.9486000], [0.3822000]], [[0.0000000], [0.0141000], [0.4112000], [0.9489000]]], [[[0.0000000], [0.6284000], [0.9428000], [0.8873000]], [[0.0000000], [0.7264000], [0.7870000], [0.4384000]], [[0.0000000], [0.5446000], [0.5652000], [0.0322000]], [[-0.3000000], [0.0327000], [0.8839000], [0.6536000]], [[-0.4408000], [0.7235000], [0.9251000], [0.6839000]]], [[[0.0000000], [0.4176000], [0.8866000], [0.5392000]], [[0.0000000], [0.0366000], [0.4714000], [0.8134000]], [[0.0000000], [0.3206000], [0.0774000], [0.5837000]], [[-0.5818000], [0.7703000], [1.6431668], [1.7766668]], [[0.0379000], [0.2953000], [1.5136668], [1.8906668]]]]]

Expected (Unparsed): [[[[[-0.8203722140209999],[0.2777264640530001],[-0.06244675149999998],[0.21300957857800004]],[[0],[0.522],[0.6417],[0.9497]],[[0],[0.5232],[0.4174],[0.6728]],[[0],[0.0701],[0.11],[0.7871]],[[0],[0.6935],[0.1501],[0.6778]]],[[[0],[0.7477],[0.2576],[0.692]],[[0],[0.2542],[0.9684],[0.7567]],[[0],[0.0587],[0.9829],[0.6474]],[[0],[0.7287],[0.2195],[0.114]],[[0],[0.8695],[0.4365],[0.6517]]],[[[0],[0.5352],[0.5996],[0.3395]],[[0],[0.0202],[0.1163],[0.5261]],[[0],[0.1685],[0.292],[0.4329]],[[0],[0.3336],[0.0652],[0.8873]],[[0],[0.8854],[0.7508],[0.6468]]],[[[-0.72949902],[-0.027529140000000007],[0.72077],[0.71602636]],[[0],[0.9187],[0.4861],[0.1486]],[[0],[0.066],[0.6729],[0.6059]],[[0],[0.4396],[0.9486],[0.3822]],[[0],[0.0141],[0.4112],[0.9489]]],[[[0],[0.6284],[0.9428],[0.8873]],[[0],[0.7264],[0.787],[0.4384]],[[0],[0.5446],[0.5652],[0.0322]],[[-0.30000000000000004],[0.0327],[0.8839],[0.6536]],[[-0.44079999999999997],[0.7235],[0.9251],[0.6839]]],[[[0],[0.4176],[0.8866],[0.5392]],[[0],[0.0366],[0.4714],[0.8134]],[[0],[0.3206],[0.0774],[0.5837]],[[-0.5818],[0.7703],[1.6431668],[1.7766668]],[[0.037900000000000045],[0.2953],[1.5136668],[1.8906668]]]]]

Actual:   [[[[[-0.8203], [0.2778], [-0.0624], [0.2131]], [[0], [0.522], [0.6417], [0.9497]], [[0], [0.5232], [0.4174], [0.6728]], [[0], [0.0701], [0.11], [0.7871]], [[0], [0.6935], [0.1501], [0.6778]]], [[[0], [0.7477], [0.2576], [0.692]], [[0], [0.2542], [0.9684], [0.7567]], [[0], [0.0587], [0.9829], [0.6474]], [[0], [0.7287], [0.2195], [0.114]], [[0], [0.8695], [0.4365], [0.6517]]], [[[0], [0.5352], [0.5996], [0.3395]], [[0], [0.0202], [0.1163], [0.5261]], [[0], [0.1685], [0.292], [0.4329]], [[0], [0.3336], [0.0652], [0.8873]], [[0], [0.8854], [0.7508], [0.6468]]], [[[-0.7294], [-0.0275], [0.7208], [0.7161]], [[0], [0.9187], [0.4861], [0.1486]], [[0], [0.066], [0.6729], [0.6059]], [[0], [0.4396], [0.9486], [0.3822]], [[0], [0.0141], [0.4112], [0.9489]]], [[[0], [0.6284], [0.9428], [0.8873]], [[0], [0.7264], [0.787], [0.4384]], [[0], [0.5446], [0.5652], [0.0322]], [[-0.3], [0.0327], [0.8839], [0.6536]], [[-0.4408], [0.7235], [0.9251], [0.6839]]], [[[0], [0.4176], [0.8866], [0.5392]], [[0], [0.0366], [0.4714], [0.8134]], [[0], [0.3206], [0.0774], [0.5837]], [[-0.5818], [0.7703], [1.6432], [1.7767]], [[0.0379], [0.2953], [1.5137], [1.8907]]]]]

Expected: [[[[[-0.8203], [0.2778], [-0.0624], [0.2131]], [[0], [0.522], [0.6417], [0.9497]], [[0], [0.5232], [0.4174], [0.6728]], [[0], [0.0701], [0.11], [0.7871]], [[0], [0.6935], [0.1501], [0.6778]]], [[[0], [0.7477], [0.2576], [0.692]], [[0], [0.2542], [0.9684], [0.7567]], [[0], [0.0587], [0.9829], [0.6474]], [[0], [0.7287], [0.2195], [0.114]], [[0], [0.8695], [0.4365], [0.6517]]], [[[0], [0.5352], [0.5996], [0.3395]], [[0], [0.0202], [0.1163], [0.5261]], [[0], [0.1685], [0.292], [0.4329]], [[0], [0.3336], [0.0652], [0.8873]], [[0], [0.8854], [0.7508], [0.6468]]], [[[-0.7294], [-0.0275], [0.7208], [0.7161]], [[0], [0.9187], [0.4861], [0.1486]], [[0], [0.066], [0.6729], [0.6059]], [[0], [0.4396], [0.9486], [0.3822]], [[0], [0.0141], [0.4112], [0.9489]]], [[[0], [0.6284], [0.9428], [0.8873]], [[0], [0.7264], [0.787], [0.4384]], [[0], [0.5446], [0.5652], [0.0322]], [[-0.3], [0.0327], [0.8839], [0.6536]], [[-0.4407], [0.7235], [0.9251], [0.6839]]], [[[0], [0.4176], [0.8866], [0.5392]], [[0], [0.0366], [0.4714], [0.8134]], [[0], [0.3206], [0.0774], [0.5837]], [[-0.5818], [0.7703], [1.6432], [1.7767]], [[0.038], [0.2953], [1.5137], [1.8907]]]]]