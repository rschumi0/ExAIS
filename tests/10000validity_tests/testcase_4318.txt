import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add94580 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Add94580 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Lay18094 = tf.keras.layers.Input(shape=([2, 4]))

Add94580 = keras.layers.Add(name = 'Add94580', )([in0Add94580,in1Add94580])
Res2888 = keras.layers.Reshape((2, 2, 1), name = 'Res2888', )(Add94580)
Res58239 = keras.layers.Reshape((2, 2), name = 'Res58239', )(Res2888)
Lay18094 = keras.layers.LayerNormalization(axis=1, epsilon=2.9598774982738947, name = 'Lay18094', )(in0Lay18094)
Sof85095 = keras.layers.Softmax(axis=1, name = 'Sof85095', )(Lay18094)
Dot40132 = keras.layers.Dot(axes=(1, 1), name = 'Dot40132', )([Res58239,Sof85095])
Up_95974 = keras.layers.UpSampling1D(size=(1), name = 'Up_95974', )(Dot40132)
model = tf.keras.models.Model(inputs=[in0Add94580,in1Add94580,in0Lay18094], outputs=Up_95974)
in0Add94580 = tf.constant([[[[[0.5164]], [[0.0754]]], [[[0.7701]], [[0.3033]]]]])
in1Add94580 = tf.constant([[[[[0.6733]], [[0.445]]], [[[0.417]], [[0.3093]]]]])
in0Lay18094 = tf.constant([[[1.9784, 1.2733, 1.3316, 1.1869], [1.3056, 1.693, 1.5279, 1.7257]]])
print (np.array2string(model.predict([in0Add94580,in1Add94580,in0Lay18094],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_95974.png')

LAdd94580 = add_layer([[[[[[0.5164]], [[0.0754]]], [[[0.7701]], [[0.3033]]]]], [[[[[0.6733]], [[0.445]]], [[[0.417]], [[0.3093]]]]]], Add94580), 
LRes2888 = reshape_layer(Add94580, [2, 2, 1], Res2888), 
LRes58239 = reshape_layer(Res2888, [2, 2], Res58239), 
LLay18094 = layer_normalization_layer([[[1.9784, 1.2733, 1.3316, 1.1869], [1.3056, 1.693, 1.5279, 1.7257]]], 1, 2.9598774982738947, Lay18094), 
LSof85095 = softmax_layer(Lay18094, 1, Sof85095), 
LDot40132 = dot_layer(Res58239,Sof85095, 1, 1, Dot40132), 
LUp_95974 = up_sampling1D_layer(Dot40132, 1, Up_95974), 
exec_layers([LAdd94580,LRes2888,LRes58239,LLay18094,LSof85095,LDot40132,LUp_95974],["Add94580","Res2888","Res58239","Lay18094","Sof85095","Dot40132","Up_95974"],Up_95974,"Up_95974")

Actual (Unparsed): [[[1.1886465, 1.1882434, 1.1883260, 1.1882005], [0.5577605, 0.5720546, 0.5691229, 0.5735755]]]

Expected (Unparsed): [[[1.1886464503411764,1.188243363296166,1.188326035740288,1.188200474515182],[0.5577604917475112,0.5720545784974959,0.5691228864405541,0.5735754806539415]]]

Actual:   [[[1.1887, 1.1883, 1.1884, 1.1883], [0.5578, 0.5721, 0.5692, 0.5736]]]

Expected: [[[1.1887, 1.1883, 1.1884, 1.1883], [0.5578, 0.5721, 0.5692, 0.5736]]]