import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lay54381 = tf.keras.layers.Input(shape=([1]))
in0Con53186 = tf.keras.layers.Input(shape=([6, 2]))
in0Zer9962 = tf.keras.layers.Input(shape=([4, 3]))
in0Con23161 = tf.keras.layers.Input(shape=([8, 7, 1]))
in0Loc73532 = tf.keras.layers.Input(shape=([1, 2]))

Lay54381 = keras.layers.LayerNormalization(axis=1, epsilon=1.2551422477588283, name = 'Lay54381', )(in0Lay54381)
Res22590 = keras.layers.Reshape((1, 1), name = 'Res22590', )(Lay54381)
Zer47009 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer47009', )(Res22590)
Con53186 = keras.layers.Concatenate(axis=2, name = 'Con53186', )([Zer47009,in0Con53186])
Zer9962 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer9962', )(in0Zer9962)
Max68352 = keras.layers.Maximum(name = 'Max68352', )([Con53186,Zer9962])
Zer77428 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer77428', )(Max68352)
Res33659 = keras.layers.Reshape((8, 3, 1), name = 'Res33659', )(Zer77428)
Zer29583 = keras.layers.ZeroPadding2D(padding=((0, 0), (4, 0)), name = 'Zer29583', )(Res33659)
Con23161 = keras.layers.Concatenate(axis=3, name = 'Con23161', )([Zer29583,in0Con23161])
Loc73532 = keras.layers.LocallyConnected1D(3, (1),strides=(4), name = 'Loc73532', )(in0Loc73532)
Res98428 = keras.layers.Reshape((1, 3, 1), name = 'Res98428', )(Loc73532)
Con3609 = keras.layers.Conv2DTranspose(2, (1, 3),strides=(1, 1), padding='valid', name = 'Con3609', )(Res98428)
Zer69432 = keras.layers.ZeroPadding2D(padding=((7, 0), (2, 0)), name = 'Zer69432', )(Con3609)
Add7210 = keras.layers.Add(name = 'Add7210', )([Con23161,Zer69432])
model = tf.keras.models.Model(inputs=[in0Lay54381,in0Con53186,in0Zer9962,in0Con23161,in0Loc73532], outputs=Add7210)
w = model.get_layer('Loc73532').get_weights() 
w[0] = np.array([[[0.1172, 0.7309, 0.0205], [0.6962, 0.8367, 0.3839]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc73532').set_weights(w) 
w = model.get_layer('Con3609').get_weights() 
w[0] = np.array([[[[0.486], [0.8232]], [[0.2613], [0.2929]], [[0.3728], [0.4907]]]])
w[1] = np.array([0, 0])
model.get_layer('Con3609').set_weights(w) 
in0Lay54381 = tf.constant([[1.9894]])
in0Con53186 = tf.constant([[[0.3044, 0.245], [0.8022, 0.5821], [0.4657, 0.3002], [0.9781, 0.8486], [0.9525, 0.9161], [0.3839, 0.0609]]])
in0Zer9962 = tf.constant([[[1.4077, 1.9804, 1.8356], [1.6304, 1.6369, 1.5679], [1.4255, 1.685, 1.2175], [1.8347, 1.3591, 1.5412]]])
in0Con23161 = tf.constant([[[[0.5669], [0.4408], [0.4389], [0.3819], [0.4189], [0.1158], [0.2104]], [[0.976], [0.4491], [0.8473], [0.8827], [0.1892], [0.8094], [0.9793]], [[0.7677], [0.6332], [0.2773], [0.757], [0.9957], [0.3425], [0.7834]], [[0.6782], [0.8008], [0.0001], [0.1067], [0.3545], [0.1292], [0.6338]], [[0.4644], [0.5319], [0.4622], [0.752], [0.0267], [0.1014], [0.6216]], [[0.7781], [0.0916], [0.7736], [0.1157], [0.6848], [0.7747], [0.5871]], [[0.273], [0.931], [0.5815], [0.5729], [0.0112], [0.1598], [0.165]], [[0.7106], [0.5932], [0.6284], [0.8982], [0.7721], [0.1335], [0.0114]]]])
in0Loc73532 = tf.constant([[[0.4092, 0.6334]]])
print (np.array2string(model.predict([in0Lay54381,in0Con53186,in0Zer9962,in0Con23161,in0Loc73532],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add7210.png')

LLay54381 = layer_normalization_layer([[1.9894]], 1, 1.2551422477588283, Lay54381), 
LRes22590 = reshape_layer(Lay54381, [1, 1], Res22590), 
LZer47009 = zero_padding1D_layer(Res22590, 5, 0, Zer47009), 
LCon53186 = concatenate_layer([Zer47009,[[[0.3044, 0.245], [0.8022, 0.5821], [0.4657, 0.3002], [0.9781, 0.8486], [0.9525, 0.9161], [0.3839, 0.0609]]]], 2, Con53186), 
LZer9962 = zero_padding1D_layer([[[1.4077, 1.9804, 1.8356], [1.6304, 1.6369, 1.5679], [1.4255, 1.685, 1.2175], [1.8347, 1.3591, 1.5412]]], 1, 1, Zer9962), 
LMax68352 = maximum_layer([Con53186,Zer9962], Max68352), 
LZer77428 = zero_padding1D_layer(Max68352, 1, 1, Zer77428), 
LRes33659 = reshape_layer(Zer77428, [8, 3, 1], Res33659), 
LZer29583 = zero_padding2D_layer(Res33659, 0, 0, 4, 0, Zer29583), 
LCon23161 = concatenate_layer([Zer29583,[[[[0.5669], [0.4408], [0.4389], [0.3819], [0.4189], [0.1158], [0.2104]], [[0.976], [0.4491], [0.8473], [0.8827], [0.1892], [0.8094], [0.9793]], [[0.7677], [0.6332], [0.2773], [0.757], [0.9957], [0.3425], [0.7834]], [[0.6782], [0.8008], [0.0001], [0.1067], [0.3545], [0.1292], [0.6338]], [[0.4644], [0.5319], [0.4622], [0.752], [0.0267], [0.1014], [0.6216]], [[0.7781], [0.0916], [0.7736], [0.1157], [0.6848], [0.7747], [0.5871]], [[0.273], [0.931], [0.5815], [0.5729], [0.0112], [0.1598], [0.165]], [[0.7106], [0.5932], [0.6284], [0.8982], [0.7721], [0.1335], [0.0114]]]]], 3, Con23161), 
LLoc73532 = locally_connected1D_layer([[[0.4092, 0.6334]]], 1,[[[0.1172, 0.7309, 0.0205], [0.6962, 0.8367, 0.3839]]],[[0, 0, 0]], 4, Loc73532), 
LRes98428 = reshape_layer(Loc73532, [1, 3, 1], Res98428), 
LCon3609 = conv2D_transpose_layer(Res98428, 1, 3,[[[[0.486], [0.8232]], [[0.2613], [0.2929]], [[0.3728], [0.4907]]]],[0, 0], 1, 1, false, Con3609), 
LZer69432 = zero_padding2D_layer(Con3609, 7, 0, 2, 0, Zer69432), 
LAdd7210 = add_layer([Con23161,Zer69432], Add7210), 
exec_layers([LLay54381,LRes22590,LZer47009,LCon53186,LZer9962,LMax68352,LZer77428,LRes33659,LZer29583,LCon23161,LLoc73532,LRes98428,LCon3609,LZer69432,LAdd7210],["Lay54381","Res22590","Zer47009","Con53186","Zer9962","Max68352","Zer77428","Res33659","Zer29583","Con23161","Loc73532","Res98428","Con3609","Zer69432","Add7210"],Add7210,"Add7210")

Actual (Unparsed): [[[[0.0000000, 0.5669000], [0.0000000, 0.4408000], [0.0000000, 0.4389000], [0.0000000, 0.3819000], [0.0000000, 0.4189000], [0.0000000, 0.1158000], [0.0000000, 0.2104000]], [[0.0000000, 0.9760000], [0.0000000, 0.4491000], [0.0000000, 0.8473000], [0.0000000, 0.8827000], [0.0000000, 0.1892000], [0.3044000, 0.8094000], [0.2450000, 0.9793000]], [[0.0000000, 0.7677000], [0.0000000, 0.6332000], [0.0000000, 0.2773000], [0.0000000, 0.7570000], [1.4076999, 0.9957000], [1.9804000, 0.3425000], [1.8356000, 0.7834000]], [[0.0000000, 0.6782000], [0.0000000, 0.8008000], [0.0000000, 0.0001000], [0.0000000, 0.1067000], [1.6303999, 0.3545000], [1.6368999, 0.1292000], [1.5678999, 0.6338000]], [[0.0000000, 0.4644000], [0.0000000, 0.5319000], [0.0000000, 0.4622000], [0.0000000, 0.7520000], [1.4255000, 0.0267000], [1.6849999, 0.1014000], [1.2175000, 0.6216000]], [[0.0000000, 0.7781000], [0.0000000, 0.0916000], [0.0000000, 0.7736000], [0.0000000, 0.1157000], [1.8347000, 0.6848000], [1.3591000, 0.7747000], [1.5412000, 0.5871000]], [[0.0000000, 0.2730000], [0.0000000, 0.9310000], [0.0000000, 0.5815000], [0.0000000, 0.5729000], [0.0000000, 0.0112000], [0.3839000, 0.1598000], [0.0609000, 0.1650000]], [[0.0000000, 0.7106000], [0.0000000, 0.5932000], [0.2376206, 1.0308883], [0.5306761, 1.7238820], [0.5211581, 1.4619240], [0.3748001, 0.6139941], [0.0937782, 0.1348360]]]]

Expected (Unparsed): [[[[0,0.5669],[0,0.4408],[0,0.4389],[0,0.3819],[0,0.4189],[0,0.1158],[0,0.2104]],[[0,0.976],[0,0.4491],[0,0.8473],[0,0.8827],[0,0.1892],[0.3044,0.8094],[0.245,0.9793]],[[0,0.7677],[0,0.6332],[0,0.2773],[0,0.757],[1.4077,0.9957],[1.9804,0.3425],[1.8356,0.7834]],[[0,0.6782],[0,0.8008],[0,0.0001],[0,0.1067],[1.6304,0.3545],[1.6369,0.1292],[1.5679,0.6338]],[[0,0.4644],[0,0.5319],[0,0.4622],[0,0.752],[1.4255,0.0267],[1.685,0.1014],[1.2175,0.6216]],[[0,0.7781],[0,0.0916],[0,0.7736],[0,0.1157],[1.8347,0.6848],[1.3591,0.7747],[1.5412,0.5871]],[[0,0.273],[0,0.931],[0,0.5815],[0,0.5729],[0.0,0.0112],[0.3839,0.1598],[0.0609,0.165]],[[0,0.7106],[0,0.5932],[0.23762062152,1.030888262624],[0.530676083076,1.72388199302],[0.521158094734,1.46192402925],[0.374800102086,0.6139941113359999],[0.093778160608,0.134836007002]]]]

Actual:   [[[[0, 0.5669], [0, 0.4408], [0, 0.4389], [0, 0.3819], [0, 0.4189], [0, 0.1158], [0, 0.2104]], [[0, 0.976], [0, 0.4491], [0, 0.8473], [0, 0.8827], [0, 0.1892], [0.3044, 0.8094], [0.245, 0.9793]], [[0, 0.7677], [0, 0.6332], [0, 0.2773], [0, 0.757], [1.4077, 0.9957], [1.9804, 0.3425], [1.8356, 0.7834]], [[0, 0.6782], [0, 0.8008], [0, 0.0001], [0, 0.1067], [1.6304, 0.3545], [1.6369, 0.1292], [1.5679, 0.6338]], [[0, 0.4644], [0, 0.5319], [0, 0.4622], [0, 0.752], [1.4255, 0.0267], [1.685, 0.1014], [1.2175, 0.6216]], [[0, 0.7781], [0, 0.0916], [0, 0.7736], [0, 0.1157], [1.8347, 0.6848], [1.3591, 0.7747], [1.5412, 0.5871]], [[0, 0.273], [0, 0.931], [0, 0.5815], [0, 0.5729], [0, 0.0112], [0.3839, 0.1598], [0.0609, 0.165]], [[0, 0.7106], [0, 0.5932], [0.2377, 1.0309], [0.5307, 1.7239], [0.5212, 1.462], [0.3749, 0.614], [0.0938, 0.1349]]]]

Expected: [[[[0, 0.5669], [0, 0.4408], [0, 0.4389], [0, 0.3819], [0, 0.4189], [0, 0.1158], [0, 0.2104]], [[0, 0.976], [0, 0.4491], [0, 0.8473], [0, 0.8827], [0, 0.1892], [0.3044, 0.8094], [0.245, 0.9793]], [[0, 0.7677], [0, 0.6332], [0, 0.2773], [0, 0.757], [1.4077, 0.9957], [1.9804, 0.3425], [1.8356, 0.7834]], [[0, 0.6782], [0, 0.8008], [0, 0.0001], [0, 0.1067], [1.6304, 0.3545], [1.6369, 0.1292], [1.5679, 0.6338]], [[0, 0.4644], [0, 0.5319], [0, 0.4622], [0, 0.752], [1.4255, 0.0267], [1.685, 0.1014], [1.2175, 0.6216]], [[0, 0.7781], [0, 0.0916], [0, 0.7736], [0, 0.1157], [1.8347, 0.6848], [1.3591, 0.7747], [1.5412, 0.5871]], [[0, 0.273], [0, 0.931], [0, 0.5815], [0, 0.5729], [0, 0.0112], [0.3839, 0.1598], [0.0609, 0.165]], [[0, 0.7106], [0, 0.5932], [0.2377, 1.0309], [0.5307, 1.7239], [0.5212, 1.462], [0.3749, 0.614], [0.0938, 0.1349]]]]