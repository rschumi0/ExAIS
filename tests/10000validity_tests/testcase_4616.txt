import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot66603 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot66603 = tf.keras.layers.Input(shape=([2, 2]))
in0Con35547 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave98643 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave98643 = tf.keras.layers.Input(shape=([2, 1, 2]))

Dot66603 = keras.layers.Dot(axes=(1, 1), name = 'Dot66603', )([in0Dot66603,in1Dot66603])
Res20612 = keras.layers.Reshape((2, 2, 1), name = 'Res20612', )(Dot66603)
Con35547 = keras.layers.Concatenate(axis=3, name = 'Con35547', )([Res20612,in0Con35547])
Ave98643 = keras.layers.Average(name = 'Ave98643', )([in0Ave98643,in1Ave98643])
Zer82062 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer82062', )(Ave98643)
Mul58865 = keras.layers.Multiply(name = 'Mul58865', )([Con35547,Zer82062])
Res79701 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res79701', )(Mul58865)
Glo62331 = keras.layers.GlobalAveragePooling3D(name = 'Glo62331', )(Res79701)
model = tf.keras.models.Model(inputs=[in0Dot66603,in1Dot66603,in0Con35547,in0Ave98643,in1Ave98643], outputs=Glo62331)
in0Dot66603 = tf.constant([[[0.6389, 0.8771], [0.344, 0.0592]]])
in1Dot66603 = tf.constant([[[0.6879, 0.3207], [0.7953, 0.7654]]])
in0Con35547 = tf.constant([[[[0.209], [0.7412]], [[0.8182], [0.5001]]]])
in0Ave98643 = tf.constant([[[[0.1217, 0.0002]], [[0.3594, 0.7568]]]])
in1Ave98643 = tf.constant([[[[0.6228, 0.1511]], [[0.0397, 0.3386]]]])
print (np.array2string(model.predict([in0Dot66603,in1Dot66603,in0Con35547,in0Ave98643,in1Ave98643],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo62331.png')

LDot66603 = dot_layer([[[0.6389, 0.8771], [0.344, 0.0592]]], [[[0.6879, 0.3207], [0.7953, 0.7654]]], 1, 1, Dot66603), 
LRes20612 = reshape_layer(Dot66603, [2, 2, 1], Res20612), 
LCon35547 = concatenate_layer([Res20612,[[[[0.209], [0.7412]], [[0.8182], [0.5001]]]]], 3, Con35547), 
LAve98643 = average_layer([[[[[0.1217, 0.0002]], [[0.3594, 0.7568]]]], [[[[0.6228, 0.1511]], [[0.0397, 0.3386]]]]], Ave98643), 
LZer82062 = zero_padding2D_layer(Ave98643, 0, 0, 1, 0, Zer82062), 
LMul58865 = multiply_layer([Con35547,Zer82062], Mul58865), 
LRes79701 = reshape_layer(Mul58865, [2, 2, 2, 1], Res79701), 
LGlo62331 = global_average_pooling3D_layer(Res79701, Glo62331), 
exec_layers([LDot66603,LRes20612,LCon35547,LAve98643,LZer82062,LMul58865,LRes79701,LGlo62331],["Dot66603","Res20612","Con35547","Ave98643","Zer82062","Mul58865","Res79701","Glo62331"],Glo62331,"Glo62331")

Actual (Unparsed): [[0.0711792]]

Expected (Unparsed): [[0.071179236503125]]

Actual:   [[0.0712]]

Expected: [[0.0712]]