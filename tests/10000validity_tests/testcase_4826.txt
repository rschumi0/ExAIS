import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo44512 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Max38927 = tf.keras.layers.Input(shape=([2, 1]))
in1Max38927 = tf.keras.layers.Input(shape=([2, 1]))

Glo44512 = keras.layers.GlobalAveragePooling3D(name = 'Glo44512', )(in0Glo44512)
Res56863 = keras.layers.Reshape((1, 1), name = 'Res56863', )(Glo44512)
Res20147 = keras.layers.Reshape((1, 1, 1), name = 'Res20147', )(Res56863)
Ave91803 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave91803', )(Res20147)
Res6464 = keras.layers.Reshape((1, 1), name = 'Res6464', )(Ave91803)
Max39345 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max39345', )(Res6464)
Zer2373 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer2373', )(Max39345)
Max38927 = keras.layers.Maximum(name = 'Max38927', )([in0Max38927,in1Max38927])
Zer99410 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer99410', )(Max38927)
Ave23013 = keras.layers.Average(name = 'Ave23013', )([Zer2373,Zer99410])
model = tf.keras.models.Model(inputs=[in0Glo44512,in0Max38927,in1Max38927], outputs=Ave23013)
in0Glo44512 = tf.constant([[[[[1.3699]]]]])
in0Max38927 = tf.constant([[[0.4939], [0.4146]]])
in1Max38927 = tf.constant([[[0.103], [0.1486]]])
print (np.array2string(model.predict([in0Glo44512,in0Max38927,in1Max38927],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave23013.png')

LGlo44512 = global_average_pooling3D_layer([[[[[1.3699]]]]], Glo44512), 
LRes56863 = reshape_layer(Glo44512, [1, 1], Res56863), 
LRes20147 = reshape_layer(Res56863, [1, 1, 1], Res20147), 
LAve91803 = average_pooling2D_layer(Res20147, 1, 1, Ave91803), 
LRes6464 = reshape_layer(Ave91803, [1, 1], Res6464), 
LMax39345 = max_pool1D_layer(Res6464, 1, Max39345), 
LZer2373 = zero_padding1D_layer(Max39345, 3, 0, Zer2373), 
LMax38927 = maximum_layer([[[[0.4939], [0.4146]]], [[[0.103], [0.1486]]]], Max38927), 
LZer99410 = zero_padding1D_layer(Max38927, 1, 1, Zer99410), 
LAve23013 = average_layer([Zer2373,Zer99410], Ave23013), 
exec_layers([LGlo44512,LRes56863,LRes20147,LAve91803,LRes6464,LMax39345,LZer2373,LMax38927,LZer99410,LAve23013],["Glo44512","Res56863","Res20147","Ave91803","Res6464","Max39345","Zer2373","Max38927","Zer99410","Ave23013"],Ave23013,"Ave23013")

Actual (Unparsed): [[[0.0000000], [0.2469500], [0.2073000], [0.6849500]]]

Expected (Unparsed): [[[0],[0.24695],[0.2073],[0.68495]]]

Actual:   [[[0], [0.247], [0.2073], [0.685]]]

Expected: [[[0], [0.247], [0.2073], [0.685]]]