import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer95460 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0Sub40654 = tf.keras.layers.Input(shape=([3, 3, 2]))
in1Sub40654 = tf.keras.layers.Input(shape=([3, 3, 2]))
in0Glo13562 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con67764 = tf.keras.layers.Input(shape=([2]))

Zer95460 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer95460', )(in0Zer95460)
Res86167 = keras.layers.Reshape((5, 4), name = 'Res86167', )(Zer95460)
Ave70406 = keras.layers.AveragePooling1D(pool_size=(5), name = 'Ave70406', )(Res86167)
Sub40654 = keras.layers.Subtract(name = 'Sub40654', )([in0Sub40654,in1Sub40654])
Res37123 = keras.layers.Reshape((3, 6), name = 'Res37123', )(Sub40654)
Con99153 = keras.layers.Conv1D(4, (1),strides=(7), padding='valid', dilation_rate=(1), name = 'Con99153', )(Res37123)
Min34927 = keras.layers.Minimum(name = 'Min34927', )([Ave70406,Con99153])
Fla68049 = keras.layers.Flatten(name = 'Fla68049', )(Min34927)
Glo13562 = keras.layers.GlobalAveragePooling2D(name = 'Glo13562', )(in0Glo13562)
Con67764 = keras.layers.Concatenate(axis=1, name = 'Con67764', )([Glo13562,in0Con67764])
Add41690 = keras.layers.Add(name = 'Add41690', )([Fla68049,Con67764])
Lea33585 = keras.layers.LeakyReLU(alpha=0.26141154182981513, name = 'Lea33585', )(Add41690)
model = tf.keras.models.Model(inputs=[in0Zer95460,in0Sub40654,in1Sub40654,in0Glo13562,in0Con67764], outputs=Lea33585)
w = model.get_layer('Con99153').get_weights() 
w[0] = np.array([[[0.1731, 0.378, 0.1919, 0.1247], [0.7502, 0.8172, 0.372, 0.2044], [0.8026, 0.3862, 0.2351, 0.4093], [0.6245, 0.1431, 0.3997, 0.1125], [0.3397, 0.3497, 0.5482, 0.5547], [0.538, 0.271, 0.714, 0.9325]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con99153').set_weights(w) 
in0Zer95460 = tf.constant([[[[1.5432], [1.4148]], [[1.0779], [1.7344]], [[1.1348], [1.2356]]]])
in0Sub40654 = tf.constant([[[[0.2265, 0.9447], [0.6727, 0.756], [0.0338, 0.119]], [[0.8112, 0.4283], [0.2668, 0.0675], [0.0344, 0.4509]], [[0.5856, 0.1613], [0.9087, 0.6269], [0.1517, 0.4723]]]])
in1Sub40654 = tf.constant([[[[0.8482, 0.2374], [0.4066, 0.1027], [0.1975, 0.4051]], [[0.0931, 0.3748], [0.105, 0.7567], [0.6464, 0.8932]], [[0.353, 0.7983], [0.6708, 0.6198], [0.04, 0.3156]]]])
in0Glo13562 = tf.constant([[[[1.3343, 1.0101], [1.7687, 1.2763]]]])
in0Con67764 = tf.constant([[0.1536, 0.7252]])
print (np.array2string(model.predict([in0Zer95460,in0Sub40654,in1Sub40654,in0Glo13562,in0Con67764],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Lea33585.png')

LZer95460 = zero_padding2D_layer([[[[1.5432], [1.4148]], [[1.0779], [1.7344]], [[1.1348], [1.2356]]]], 1, 1, 1, 1, Zer95460), 
LRes86167 = reshape_layer(Zer95460, [5, 4], Res86167), 
LAve70406 = average_pooling1D_layer(Res86167, 5, Ave70406), 
LSub40654 = subtract_layer([[[[0.2265, 0.9447], [0.6727, 0.756], [0.0338, 0.119]], [[0.8112, 0.4283], [0.2668, 0.0675], [0.0344, 0.4509]], [[0.5856, 0.1613], [0.9087, 0.6269], [0.1517, 0.4723]]]], [[[[0.8482, 0.2374], [0.4066, 0.1027], [0.1975, 0.4051]], [[0.0931, 0.3748], [0.105, 0.7567], [0.6464, 0.8932]], [[0.353, 0.7983], [0.6708, 0.6198], [0.04, 0.3156]]]], Sub40654), 
LRes37123 = reshape_layer(Sub40654, [3, 6], Res37123), 
LCon99153 = conv1D_layer(Res37123, 1,[[[0.1731, 0.378, 0.1919, 0.1247], [0.7502, 0.8172, 0.372, 0.2044], [0.8026, 0.3862, 0.2351, 0.4093], [0.6245, 0.1431, 0.3997, 0.1125], [0.3397, 0.3497, 0.5482, 0.5547], [0.538, 0.271, 0.714, 0.9325]]],[0, 0, 0, 0], 7, false, 1, Con99153), 
LMin34927 = minimum_layer([Ave70406,Con99153], Min34927), 
LFla68049 = flatten_layer(Min34927, Fla68049), 
LGlo13562 = global_average_pooling2D_layer([[[[1.3343, 1.0101], [1.7687, 1.2763]]]], Glo13562), 
LCon67764 = concatenate_layer([Glo13562,[[0.1536, 0.7252]]], 1, Con67764), 
LAdd41690 = add_layer([Fla68049,Con67764], Add41690), 
LLea33585 = leaky_relu_layer(Add41690, 0.26141154182981513, Lea33585), 
exec_layers([LZer95460,LRes86167,LAve70406,LSub40654,LRes37123,LCon99153,LMin34927,LFla68049,LGlo13562,LCon67764,LAdd41690,LLea33585],["Zer95460","Res86167","Ave70406","Sub40654","Res37123","Con99153","Min34927","Fla68049","Glo13562","Con67764","Add41690","Lea33585"],Lea33585,"Lea33585")

Actual (Unparsed): [[1.5515000, 1.5476790, 0.3270798, 0.6170645]]

Expected (Unparsed): [[1.5514999999999999,1.54767902,0.32707975,0.6170644699999999]]

Actual:   [[1.5515, 1.5477, 0.3271, 0.6171]]

Expected: [[1.5515, 1.5477, 0.3271, 0.6171]]