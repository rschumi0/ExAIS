import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0PRe70242 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Min75970 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min75970 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Sub54388 = tf.keras.layers.Input(shape=([2]))
in1Sub54388 = tf.keras.layers.Input(shape=([2]))
in0Con48462 = tf.keras.layers.Input(shape=([2]))
in0Con45211 = tf.keras.layers.Input(shape=([12]))

PRe70242 = keras.layers.PReLU(name = 'PRe70242', input_shape=(2, 2, 2, 2))(in0PRe70242)
Res56778 = keras.layers.Reshape((2, 2, 4), name = 'Res56778', )(PRe70242)
Res26629 = keras.layers.Reshape((2, 8), name = 'Res26629', )(Res56778)
Fla76537 = keras.layers.Flatten(name = 'Fla76537', )(Res26629)
Min75970 = keras.layers.Minimum(name = 'Min75970', )([in0Min75970,in1Min75970])
Res89660 = keras.layers.Reshape((2, 2), name = 'Res89660', )(Min75970)
Fla98597 = keras.layers.Flatten(name = 'Fla98597', )(Res89660)
Sub54388 = keras.layers.Subtract(name = 'Sub54388', )([in0Sub54388,in1Sub54388])
Con48462 = keras.layers.Concatenate(axis=1, name = 'Con48462', )([Sub54388,in0Con48462])
Ave52325 = keras.layers.Average(name = 'Ave52325', )([Fla98597,Con48462])
ReL2992 = keras.layers.ReLU(max_value=7.728022801431335, negative_slope=7.14120427905624, threshold=0.8645122598462063, name = 'ReL2992', )(Ave52325)
Lay90014 = keras.layers.LayerNormalization(axis=1, epsilon=1.6289407860250353, name = 'Lay90014', )(ReL2992)
Con45211 = keras.layers.Concatenate(axis=1, name = 'Con45211', )([Lay90014,in0Con45211])
Add28538 = keras.layers.Add(name = 'Add28538', )([Fla76537,Con45211])
Res85893 = keras.layers.Reshape((16, 1), name = 'Res85893', )(Add28538)
Res88296 = keras.layers.Reshape((16, 1, 1), name = 'Res88296', )(Res85893)
Zer38534 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer38534', )(Res88296)
model = tf.keras.models.Model(inputs=[in0PRe70242,in0Min75970,in1Min75970,in0Sub54388,in1Sub54388,in0Con48462,in0Con45211], outputs=Zer38534)
w = model.get_layer('PRe70242').get_weights() 
w[0] = np.array([[[[0.3122, 0.8262], [0.496, 0.325]], [[0.3488, 0.3168], [0.9053, 0.9773]]], [[[0.1165, 0.476], [0.277, 0.6114]], [[0.289, 0.8982], [0.668, 0.1447]]]])
model.get_layer('PRe70242').set_weights(w) 
in0PRe70242 = tf.constant([[[[[0.909, 0.8047], [0.2715, 0.4699]], [[0.165, 0.4547], [0.726, 0.2086]]], [[[0.0613, 0.8643], [0.9101, 0.099]], [[0.6045, 0.4064], [0.2122, 0.4854]]]]])
in0Min75970 = tf.constant([[[[0.7537, 0.3017]], [[0.0206, 0.2868]]]])
in1Min75970 = tf.constant([[[[0.8111, 0.7519]], [[0.438, 0.7693]]]])
in0Sub54388 = tf.constant([[0.5787, 0.8249]])
in1Sub54388 = tf.constant([[0.936, 0.4788]])
in0Con48462 = tf.constant([[0.0369, 0.1137]])
in0Con45211 = tf.constant([[0.2651, 0.8418, 0.3813, 0.5042, 0.378, 0.9391, 0.2743, 0.7319, 0.8029, 0.0656, 0.242, 0.747]])
print (np.array2string(model.predict([in0PRe70242,in0Min75970,in1Min75970,in0Sub54388,in1Sub54388,in0Con48462,in0Con45211],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer38534.png')

LPRe70242 = prelu_layer([[[[[0.909, 0.8047], [0.2715, 0.4699]], [[0.165, 0.4547], [0.726, 0.2086]]], [[[0.0613, 0.8643], [0.9101, 0.099]], [[0.6045, 0.4064], [0.2122, 0.4854]]]]], [[[[0.3122, 0.8262], [0.496, 0.325]], [[0.3488, 0.3168], [0.9053, 0.9773]]], [[[0.1165, 0.476], [0.277, 0.6114]], [[0.289, 0.8982], [0.668, 0.1447]]]], PRe70242), 
LRes56778 = reshape_layer(PRe70242, [2, 2, 4], Res56778), 
LRes26629 = reshape_layer(Res56778, [2, 8], Res26629), 
LFla76537 = flatten_layer(Res26629, Fla76537), 
LMin75970 = minimum_layer([[[[[0.7537, 0.3017]], [[0.0206, 0.2868]]]], [[[[0.8111, 0.7519]], [[0.438, 0.7693]]]]], Min75970), 
LRes89660 = reshape_layer(Min75970, [2, 2], Res89660), 
LFla98597 = flatten_layer(Res89660, Fla98597), 
LSub54388 = subtract_layer([[0.5787, 0.8249]], [[0.936, 0.4788]], Sub54388), 
LCon48462 = concatenate_layer([Sub54388,[[0.0369, 0.1137]]], 1, Con48462), 
LAve52325 = average_layer([Fla98597,Con48462], Ave52325), 
LReL2992 = relu_layer(Ave52325, 7.728022801431335, 7.14120427905624, 0.8645122598462063, ReL2992), 
LLay90014 = layer_normalization_layer(ReL2992, 1, 1.6289407860250353, Lay90014), 
LCon45211 = concatenate_layer([Lay90014,[[0.2651, 0.8418, 0.3813, 0.5042, 0.378, 0.9391, 0.2743, 0.7319, 0.8029, 0.0656, 0.242, 0.747]]], 1, Con45211), 
LAdd28538 = add_layer([Fla76537,Con45211], Add28538), 
LRes85893 = reshape_layer(Add28538, [16, 1], Res85893), 
LRes88296 = reshape_layer(Res85893, [16, 1, 1], Res88296), 
LZer38534 = zero_padding2D_layer(Res88296, 1, 1, 1, 1, Zer38534), 
exec_layers([LPRe70242,LRes56778,LRes26629,LFla76537,LMin75970,LRes89660,LFla98597,LSub54388,LCon48462,LAve52325,LReL2992,LLay90014,LCon45211,LAdd28538,LRes85893,LRes88296,LZer38534],["PRe70242","Res56778","Res26629","Fla76537","Min75970","Res89660","Fla98597","Sub54388","Con48462","Ave52325","ReL2992","Lay90014","Con45211","Add28538","Res85893","Res88296","Zer38534"],Zer38534,"Zer38534")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.9592956], [0.0000000]], [[0.0000000], [1.4614368], [0.0000000]], [[0.0000000], [-0.4957183], [0.0000000]], [[0.0000000], [0.5300858], [0.0000000]], [[0.0000000], [0.4301000], [0.0000000]], [[0.0000000], [1.2965000], [0.0000000]], [[0.0000000], [1.1073000], [0.0000000]], [[0.0000000], [0.7128000], [0.0000000]], [[0.0000000], [0.4393000], [0.0000000]], [[0.0000000], [1.8034000], [0.0000000]], [[0.0000000], [1.1844000], [0.0000000]], [[0.0000000], [0.8309000], [0.0000000]], [[0.0000000], [1.4074000], [0.0000000]], [[0.0000000], [0.4720000], [0.0000000]], [[0.0000000], [0.4542000], [0.0000000]], [[0.0000000], [1.2324000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[0.959295552057051],[0]],[[0],[1.4614368847737254],[0]],[[0],[-0.4957182413307016],[0]],[[0],[0.5300858044999244],[0]],[[0],[0.43010000000000004],[0]],[[0],[1.2965],[0]],[[0],[1.1073],[0]],[[0],[0.7128],[0]],[[0],[0.4393],[0]],[[0],[1.8034],[0]],[[0],[1.1844000000000001],[0]],[[0],[0.8309],[0]],[[0],[1.4074],[0]],[[0],[0.472],[0]],[[0],[0.4542],[0]],[[0],[1.2324],[0]],[[0],[0],[0]]]]

Actual:   [[[[0], [0], [0]], [[0], [0.9593], [0]], [[0], [1.4615], [0]], [[0], [-0.4957], [0]], [[0], [0.5301], [0]], [[0], [0.4301], [0]], [[0], [1.2965], [0]], [[0], [1.1073], [0]], [[0], [0.7128], [0]], [[0], [0.4393], [0]], [[0], [1.8034], [0]], [[0], [1.1844], [0]], [[0], [0.8309], [0]], [[0], [1.4074], [0]], [[0], [0.472], [0]], [[0], [0.4542], [0]], [[0], [1.2324], [0]], [[0], [0], [0]]]]

Expected: [[[[0], [0], [0]], [[0], [0.9593], [0]], [[0], [1.4615], [0]], [[0], [-0.4957], [0]], [[0], [0.5301], [0]], [[0], [0.4302], [0]], [[0], [1.2965], [0]], [[0], [1.1073], [0]], [[0], [0.7128], [0]], [[0], [0.4393], [0]], [[0], [1.8034], [0]], [[0], [1.1845], [0]], [[0], [0.8309], [0]], [[0], [1.4074], [0]], [[0], [0.472], [0]], [[0], [0.4542], [0]], [[0], [1.2324], [0]], [[0], [0], [0]]]]