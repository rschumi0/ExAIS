import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add45944 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add45944 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Dot98987 = tf.keras.layers.Input(shape=([3]))
in1Dot98987 = tf.keras.layers.Input(shape=([3]))
in0Con38608 = tf.keras.layers.Input(shape=([7]))

Add45944 = keras.layers.Add(name = 'Add45944', )([in0Add45944,in1Add45944])
Res75134 = keras.layers.Reshape((2, 4), name = 'Res75134', )(Add45944)
Fla39637 = keras.layers.Flatten(name = 'Fla39637', )(Res75134)
Dot98987 = keras.layers.Dot(axes=(1, 1), name = 'Dot98987', )([in0Dot98987,in1Dot98987])
Con38608 = keras.layers.Concatenate(axis=1, name = 'Con38608', )([Dot98987,in0Con38608])
Max34877 = keras.layers.Maximum(name = 'Max34877', )([Fla39637,Con38608])
model = tf.keras.models.Model(inputs=[in0Add45944,in1Add45944,in0Dot98987,in1Dot98987,in0Con38608], outputs=Max34877)
in0Add45944 = tf.constant([[[[0.2217, 0.9957], [0.6515, 0.0018]], [[0.8269, 0.9361], [0.7175, 0.8545]]]])
in1Add45944 = tf.constant([[[[0.5842, 0.6865], [0.9933, 0.661]], [[0.8005, 0.0706], [0.0978, 0.6234]]]])
in0Dot98987 = tf.constant([[0.4927, 0.6347, 0.1624]])
in1Dot98987 = tf.constant([[0.0572, 0.5937, 0.9148]])
in0Con38608 = tf.constant([[0.4745, 0.4445, 0.3439, 0.4586, 0.4234, 0.122, 0.3235]])
print (np.array2string(model.predict([in0Add45944,in1Add45944,in0Dot98987,in1Dot98987,in0Con38608],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max34877.png')

LAdd45944 = add_layer([[[[[0.2217, 0.9957], [0.6515, 0.0018]], [[0.8269, 0.9361], [0.7175, 0.8545]]]], [[[[0.5842, 0.6865], [0.9933, 0.661]], [[0.8005, 0.0706], [0.0978, 0.6234]]]]], Add45944), 
LRes75134 = reshape_layer(Add45944, [2, 4], Res75134), 
LFla39637 = flatten_layer(Res75134, Fla39637), 
LDot98987 = dot_layer([[0.4927, 0.6347, 0.1624]], [[0.0572, 0.5937, 0.9148]], 1, 1, Dot98987), 
LCon38608 = concatenate_layer([Dot98987,[[0.4745, 0.4445, 0.3439, 0.4586, 0.4234, 0.122, 0.3235]]], 1, Con38608), 
LMax34877 = maximum_layer([Fla39637,Con38608], Max34877), 
exec_layers([LAdd45944,LRes75134,LFla39637,LDot98987,LCon38608,LMax34877],["Add45944","Res75134","Fla39637","Dot98987","Con38608","Max34877"],Max34877,"Max34877")

Actual (Unparsed): [[0.8059000, 1.6822000, 1.6448000, 0.6628000, 1.6274000, 1.0067000, 0.8153000, 1.4779000]]

Expected (Unparsed): [[0.8059000000000001,1.6822,1.6448,0.6628000000000001,1.6274,1.0067,0.8153,1.4779]]

Actual:   [[0.8059, 1.6822, 1.6448, 0.6628, 1.6274, 1.0067, 0.8153, 1.4779]]

Expected: [[0.806, 1.6822, 1.6448, 0.6629, 1.6274, 1.0067, 0.8153, 1.4779]]