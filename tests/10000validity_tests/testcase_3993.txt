import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot570 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot570 = tf.keras.layers.Input(shape=([2, 3]))
in0Con62962 = tf.keras.layers.Input(shape=([6, 6, 1]))
in0Zer53130 = tf.keras.layers.Input(shape=([4, 4, 2]))
in0Add3781 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add3781 = tf.keras.layers.Input(shape=([1, 1, 2]))

Dot570 = keras.layers.Dot(axes=(2, 2), name = 'Dot570', )([in0Dot570,in1Dot570])
Res33479 = keras.layers.Reshape((2, 2, 1), name = 'Res33479', )(Dot570)
Zer78663 = keras.layers.ZeroPadding2D(padding=((4, 0), (4, 0)), name = 'Zer78663', )(Res33479)
Con62962 = keras.layers.Concatenate(axis=3, name = 'Con62962', )([Zer78663,in0Con62962])
Zer53130 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer53130', )(in0Zer53130)
Add55802 = keras.layers.Add(name = 'Add55802', )([Con62962,Zer53130])
Res91437 = keras.layers.Reshape((6, 6, 2, 1), name = 'Res91437', )(Add55802)
Zer47407 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer47407', )(Res91437)
Res72721 = keras.layers.Reshape((8, 8, 4), name = 'Res72721', )(Zer47407)
Res2929 = keras.layers.Reshape((8, 32), name = 'Res2929', )(Res72721)
Add3781 = keras.layers.Add(name = 'Add3781', )([in0Add3781,in1Add3781])
Res9945 = keras.layers.Reshape((1, 2), name = 'Res9945', )(Add3781)
Zer36588 = keras.layers.ZeroPadding1D(padding=((7, 0)), name = 'Zer36588', )(Res9945)
Dot63010 = keras.layers.Dot(axes=(1, 1), name = 'Dot63010', )([Res2929,Zer36588])
Zer79148 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer79148', )(Dot63010)
model = tf.keras.models.Model(inputs=[in0Dot570,in1Dot570,in0Con62962,in0Zer53130,in0Add3781,in1Add3781], outputs=Zer79148)
in0Dot570 = tf.constant([[[0.9276, 0.2862, 0.0369], [0.797, 0.7375, 0.488]]])
in1Dot570 = tf.constant([[[0.8523, 0.7108, 0.3739], [0.6502, 0.9631, 0.567]]])
in0Con62962 = tf.constant([[[[0.3994], [0.8501], [0.4317], [0.3982], [0.5516], [0.7448]], [[0.6148], [0.5145], [0.5832], [0.583], [0.0296], [0.675]], [[0.6477], [0.7657], [0.6761], [0.7972], [0.0995], [0.3727]], [[0.1522], [0.715], [0.4918], [0.5561], [0.5804], [0.3032]], [[0.3287], [0.8719], [0.0819], [0.8188], [0.1289], [0.6821]], [[0.2699], [0.8693], [0.695], [0.6345], [0.7119], [0.0573]]]])
in0Zer53130 = tf.constant([[[[1.0486, 1.052], [1.7117, 1.8526], [1.2856, 1.096], [1.5086, 1.4662]], [[1.7649, 1.1524], [1.9643, 1.7228], [1.6042, 1.8341], [1.5905, 1.1969]], [[1.1591, 1.0971], [1.3229, 1.1473], [1.4017, 1.7014], [1.4905, 1.4201]], [[1.9443, 1.989], [1.7495, 1.6698], [1.8181, 1.6419], [1.9371, 1.4524]]]])
in0Add3781 = tf.constant([[[[0.1839, 0.0673]]]])
in1Add3781 = tf.constant([[[[0.757, 0.251]]]])
print (np.array2string(model.predict([in0Dot570,in1Dot570,in0Con62962,in0Zer53130,in0Add3781,in1Add3781],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer79148.png')

LDot570 = dot_layer([[[0.9276, 0.2862, 0.0369], [0.797, 0.7375, 0.488]]], [[[0.8523, 0.7108, 0.3739], [0.6502, 0.9631, 0.567]]], 2, 2, Dot570), 
LRes33479 = reshape_layer(Dot570, [2, 2, 1], Res33479), 
LZer78663 = zero_padding2D_layer(Res33479, 4, 0, 4, 0, Zer78663), 
LCon62962 = concatenate_layer([Zer78663,[[[[0.3994], [0.8501], [0.4317], [0.3982], [0.5516], [0.7448]], [[0.6148], [0.5145], [0.5832], [0.583], [0.0296], [0.675]], [[0.6477], [0.7657], [0.6761], [0.7972], [0.0995], [0.3727]], [[0.1522], [0.715], [0.4918], [0.5561], [0.5804], [0.3032]], [[0.3287], [0.8719], [0.0819], [0.8188], [0.1289], [0.6821]], [[0.2699], [0.8693], [0.695], [0.6345], [0.7119], [0.0573]]]]], 3, Con62962), 
LZer53130 = zero_padding2D_layer([[[[1.0486, 1.052], [1.7117, 1.8526], [1.2856, 1.096], [1.5086, 1.4662]], [[1.7649, 1.1524], [1.9643, 1.7228], [1.6042, 1.8341], [1.5905, 1.1969]], [[1.1591, 1.0971], [1.3229, 1.1473], [1.4017, 1.7014], [1.4905, 1.4201]], [[1.9443, 1.989], [1.7495, 1.6698], [1.8181, 1.6419], [1.9371, 1.4524]]]], 1, 1, 1, 1, Zer53130), 
LAdd55802 = add_layer([Con62962,Zer53130], Add55802), 
LRes91437 = reshape_layer(Add55802, [6, 6, 2, 1], Res91437), 
LZer47407 = zero_padding3D_layer(Res91437, 1, 1, 1, 1, 1, 1, Zer47407), 
LRes72721 = reshape_layer(Zer47407, [8, 8, 4], Res72721), 
LRes2929 = reshape_layer(Res72721, [8, 32], Res2929), 
LAdd3781 = add_layer([[[[[0.1839, 0.0673]]]], [[[[0.757, 0.251]]]]], Add3781), 
LRes9945 = reshape_layer(Add3781, [1, 2], Res9945), 
LZer36588 = zero_padding1D_layer(Res9945, 7, 0, Zer36588), 
LDot63010 = dot_layer(Res2929,Zer36588, 1, 1, Dot63010), 
LZer79148 = zero_padding1D_layer(Dot63010, 1, 1, Zer79148), 
exec_layers([LDot570,LRes33479,LZer78663,LCon62962,LZer53130,LAdd55802,LRes91437,LZer47407,LRes72721,LRes2929,LAdd3781,LRes9945,LZer36588,LDot63010,LZer79148],["Dot570","Res33479","Zer78663","Con62962","Zer53130","Add55802","Res91437","Zer47407","Res72721","Res2929","Add3781","Res9945","Zer36588","Dot63010","Zer79148"],Zer79148,"Zer79148")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0.0,0.0],[0,0]]]

Actual:   [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]

Expected: [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]