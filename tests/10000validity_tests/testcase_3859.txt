import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max70622 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max70622 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Cro99227 = tf.keras.layers.Input(shape=([1, 3, 3, 1]))
in0Con41478 = tf.keras.layers.Input(shape=([1]))
in0Dep35057 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Add50447 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add50447 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Dot9078 = tf.keras.layers.Input(shape=([2]))
in1Dot9078 = tf.keras.layers.Input(shape=([2]))
in0Con71893 = tf.keras.layers.Input(shape=([1]))

Max70622 = keras.layers.Maximum(name = 'Max70622', )([in0Max70622,in1Max70622])
Res75338 = keras.layers.Reshape((2, 1), name = 'Res75338', )(Max70622)
Fla5647 = keras.layers.Flatten(name = 'Fla5647', )(Res75338)
Cro99227 = keras.layers.Cropping3D(cropping=((0, 0), (1, 1), (2, 0)), name = 'Cro99227', )(in0Cro99227)
Res42644 = keras.layers.Reshape((1, 1, 1), name = 'Res42644', )(Cro99227)
Res19110 = keras.layers.Reshape((1, 1), name = 'Res19110', )(Res42644)
Fla97476 = keras.layers.Flatten(name = 'Fla97476', )(Res19110)
Con41478 = keras.layers.Concatenate(axis=1, name = 'Con41478', )([Fla97476,in0Con41478])
Dep35057 = keras.layers.DepthwiseConv2D((2, 1),strides=(1, 1), padding='valid', name = 'Dep35057', )(in0Dep35057)
Res65358 = keras.layers.Reshape((1, 2), name = 'Res65358', )(Dep35057)
Fla34190 = keras.layers.Flatten(name = 'Fla34190', )(Res65358)
Add50447 = keras.layers.Add(name = 'Add50447', )([in0Add50447,in1Add50447])
Res3933 = keras.layers.Reshape((1, 2, 1), name = 'Res3933', )(Add50447)
Res1641 = keras.layers.Reshape((1, 2), name = 'Res1641', )(Res3933)
Fla43168 = keras.layers.Flatten(name = 'Fla43168', )(Res1641)
Dot9078 = keras.layers.Dot(axes=(1, 1), name = 'Dot9078', )([in0Dot9078,in1Dot9078])
Con71893 = keras.layers.Concatenate(axis=1, name = 'Con71893', )([Dot9078,in0Con71893])
Min42536 = keras.layers.Minimum(name = 'Min42536', )([Fla43168,Con71893])
Ave31471 = keras.layers.Average(name = 'Ave31471', )([Fla34190,Min42536])
Max99138 = keras.layers.Maximum(name = 'Max99138', )([Con41478,Ave31471])
Ave55779 = keras.layers.Average(name = 'Ave55779', )([Fla5647,Max99138])
model = tf.keras.models.Model(inputs=[in0Max70622,in1Max70622,in0Cro99227,in0Con41478,in0Dep35057,in0Add50447,in1Add50447,in0Dot9078,in1Dot9078,in0Con71893], outputs=Ave55779)
w = model.get_layer('Dep35057').get_weights() 
w[0] = np.array([[[[0.1361], [0.4274]]], [[[0.2463], [0.6262]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep35057').set_weights(w) 
in0Max70622 = tf.constant([[[[0.0707]], [[0.4426]]]])
in1Max70622 = tf.constant([[[[0.2916]], [[0.9794]]]])
in0Cro99227 = tf.constant([[[[[1.1392], [1.6077], [1.4411]], [[1.2891], [1.3398], [1.7749]], [[1.2571], [1.1618], [1.5778]]]]])
in0Con41478 = tf.constant([[0.9639]])
in0Dep35057 = tf.constant([[[[0.5638, 0.1598]], [[0.0687, 0.6033]]]])
in0Add50447 = tf.constant([[[[[0.5762]], [[0.076]]]]])
in1Add50447 = tf.constant([[[[[0.6448]], [[0.1444]]]]])
in0Dot9078 = tf.constant([[0.8773, 0.0926]])
in1Dot9078 = tf.constant([[0.3651, 0.2718]])
in0Con71893 = tf.constant([[0.9439]])
print (np.array2string(model.predict([in0Max70622,in1Max70622,in0Cro99227,in0Con41478,in0Dep35057,in0Add50447,in1Add50447,in0Dot9078,in1Dot9078,in0Con71893],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave55779.png')

LMax70622 = maximum_layer([[[[[0.0707]], [[0.4426]]]], [[[[0.2916]], [[0.9794]]]]], Max70622), 
LRes75338 = reshape_layer(Max70622, [2, 1], Res75338), 
LFla5647 = flatten_layer(Res75338, Fla5647), 
LCro99227 = cropping3D_layer([[[[[1.1392], [1.6077], [1.4411]], [[1.2891], [1.3398], [1.7749]], [[1.2571], [1.1618], [1.5778]]]]], 0, 0, 1, 1, 2, 0, Cro99227), 
LRes42644 = reshape_layer(Cro99227, [1, 1, 1], Res42644), 
LRes19110 = reshape_layer(Res42644, [1, 1], Res19110), 
LFla97476 = flatten_layer(Res19110, Fla97476), 
LCon41478 = concatenate_layer([Fla97476,[[0.9639]]], 1, Con41478), 
LDep35057 = depthwise_conv2D_layer([[[[0.5638, 0.1598]], [[0.0687, 0.6033]]]], 2, 1,[[[[0.1361], [0.4274]]], [[[0.2463], [0.6262]]]],[0, 0], 1, 1, false, Dep35057), 
LRes65358 = reshape_layer(Dep35057, [1, 2], Res65358), 
LFla34190 = flatten_layer(Res65358, Fla34190), 
LAdd50447 = add_layer([[[[[[0.5762]], [[0.076]]]]], [[[[[0.6448]], [[0.1444]]]]]], Add50447), 
LRes3933 = reshape_layer(Add50447, [1, 2, 1], Res3933), 
LRes1641 = reshape_layer(Res3933, [1, 2], Res1641), 
LFla43168 = flatten_layer(Res1641, Fla43168), 
LDot9078 = dot_layer([[0.8773, 0.0926]], [[0.3651, 0.2718]], 1, 1, Dot9078), 
LCon71893 = concatenate_layer([Dot9078,[[0.9439]]], 1, Con71893), 
LMin42536 = minimum_layer([Fla43168,Con71893], Min42536), 
LAve31471 = average_layer([Fla34190,Min42536], Ave31471), 
LMax99138 = maximum_layer([Con41478,Ave31471], Max99138), 
LAve55779 = average_layer([Fla5647,Max99138], Ave55779), 
exec_layers([LMax70622,LRes75338,LFla5647,LCro99227,LRes42644,LRes19110,LFla97476,LCon41478,LDep35057,LRes65358,LFla34190,LAdd50447,LRes3933,LRes1641,LFla43168,LDot9078,LCon71893,LMin42536,LAve31471,LMax99138,LAve55779],["Max70622","Res75338","Fla5647","Cro99227","Res42644","Res19110","Fla97476","Con41478","Dep35057","Res65358","Fla34190","Add50447","Res3933","Res1641","Fla43168","Dot9078","Con71893","Min42536","Ave31471","Max99138","Ave55779"],Ave55779,"Ave55779")

Actual (Unparsed): [[1.0332500, 0.9716500]]

Expected (Unparsed): [[1.03325,0.97165]]

Actual:   [[1.0333, 0.9717]]

Expected: [[1.0333, 0.9717]]