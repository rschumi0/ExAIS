import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo44227 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Lea49381 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Add36171 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add36171 = tf.keras.layers.Input(shape=([2, 2, 1]))

Glo44227 = keras.layers.GlobalMaxPool2D(name = 'Glo44227', )(in0Glo44227)
Res34929 = keras.layers.Reshape((2, 1), name = 'Res34929', )(Glo44227)
Res47321 = keras.layers.Reshape((2, 1, 1), name = 'Res47321', )(Res34929)
Res60462 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res60462', )(Res47321)
Cro8350 = keras.layers.Cropping3D(cropping=((0, 1), (0, 0), (0, 0)), name = 'Cro8350', )(Res60462)
Zer69209 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer69209', )(Cro8350)
Lea49381 = keras.layers.LeakyReLU(alpha=4.204269774760612, name = 'Lea49381', input_shape=(1, 2, 1, 1))(in0Lea49381)
Sub5352 = keras.layers.Subtract(name = 'Sub5352', )([Zer69209,Lea49381])
Res4256 = keras.layers.Reshape((1, 2, 1), name = 'Res4256', )(Sub5352)
Zer60383 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer60383', )(Res4256)
Add36171 = keras.layers.Add(name = 'Add36171', )([in0Add36171,in1Add36171])
Mul69830 = keras.layers.Multiply(name = 'Mul69830', )([Zer60383,Add36171])
model = tf.keras.models.Model(inputs=[in0Glo44227,in0Lea49381,in0Add36171,in1Add36171], outputs=Mul69830)
in0Glo44227 = tf.constant([[[[1.1298, 1.2917], [1.4763, 1.0577]]]])
in0Lea49381 = tf.constant([[[[[0.988]], [[0.4931]]]]])
in0Add36171 = tf.constant([[[[0.8088], [0.9875]], [[0.7037], [0.8901]]]])
in1Add36171 = tf.constant([[[[0.124], [0.3613]], [[0.3919], [0.9813]]]])
print (np.array2string(model.predict([in0Glo44227,in0Lea49381,in0Add36171,in1Add36171],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul69830.png')

LGlo44227 = global_max_pool2D_layer([[[[1.1298, 1.2917], [1.4763, 1.0577]]]], Glo44227), 
LRes34929 = reshape_layer(Glo44227, [2, 1], Res34929), 
LRes47321 = reshape_layer(Res34929, [2, 1, 1], Res47321), 
LRes60462 = reshape_layer(Res47321, [2, 1, 1, 1], Res60462), 
LCro8350 = cropping3D_layer(Res60462, 0, 1, 0, 0, 0, 0, Cro8350), 
LZer69209 = zero_padding3D_layer(Cro8350, 0, 0, 1, 0, 0, 0, Zer69209), 
LLea49381 = leaky_relu_layer([[[[[0.988]], [[0.4931]]]]], 4.204269774760612, Lea49381), 
LSub5352 = subtract_layer(Zer69209,Lea49381, Sub5352), 
LRes4256 = reshape_layer(Sub5352, [1, 2, 1], Res4256), 
LZer60383 = zero_padding2D_layer(Res4256, 1, 0, 0, 0, Zer60383), 
LAdd36171 = add_layer([[[[[0.8088], [0.9875]], [[0.7037], [0.8901]]]], [[[[0.124], [0.3613]], [[0.3919], [0.9813]]]]], Add36171), 
LMul69830 = multiply_layer([Zer60383,Add36171], Mul69830), 
exec_layers([LGlo44227,LRes34929,LRes47321,LRes60462,LCro8350,LZer69209,LLea49381,LSub5352,LRes4256,LZer60383,LAdd36171,LMul69830],["Glo44227","Res34929","Res47321","Res60462","Cro8350","Zer69209","Lea49381","Sub5352","Res4256","Zer60383","Add36171","Mul69830"],Mul69830,"Mul69830")

Actual (Unparsed): [[[[0.0000000], [0.0000000]], [[-1.0824528], [1.8399605]]]]

Expected (Unparsed): [[[[0.0],[0.0]],[[-1.0824528000000002],[1.8399604799999998]]]]

Actual:   [[[[0], [0]], [[-1.0824], [1.84]]]]

Expected: [[[[0], [0]], [[-1.0824], [1.84]]]]