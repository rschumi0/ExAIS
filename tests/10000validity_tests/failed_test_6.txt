import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo12384 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con43412 = tf.keras.layers.Input(shape=([1, 3]))
in0Cro968 = tf.keras.layers.Input(shape=([3, 4]))

Glo12384 = keras.layers.GlobalAveragePooling2D(name = 'Glo12384', )(in0Glo12384)
Res24009 = keras.layers.Reshape((1, 1), name = 'Res24009', )(Glo12384)
Max91233 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max91233', )(Res24009)
Thr63611 = keras.layers.ThresholdedReLU(theta=5.839190049665135, name = 'Thr63611', )(Max91233)
Con43412 = keras.layers.Concatenate(axis=2, name = 'Con43412', )([Thr63611,in0Con43412])
Cro968 = keras.layers.Cropping1D(cropping=((1, 1)), name = 'Cro968', )(in0Cro968)
Sof81769 = keras.layers.Softmax(axis=1, name = 'Sof81769', )(Cro968)
Mas54789 = keras.layers.Masking(mask_value=1, name = 'Mas54789', )(Sof81769)
Max98748 = keras.layers.Maximum(name = 'Max98748', )([Con43412,Mas54789])
model = tf.keras.models.Model(inputs=[in0Glo12384,in0Con43412,in0Cro968], outputs=Max98748)
in0Glo12384 = tf.constant([[[[1.8826], [1.3342]], [[1.4276], [1.0695]]]])
in0Con43412 = tf.constant([[[0.1878, 0.4274, 0.6363]]])
in0Cro968 = tf.constant([[[1.5022, 1.2439, 1.4908, 1.1607], [1.6873, 1.6993, 1.2023, 1.8106], [1.6377, 1.351, 1.3126, 1.286]]])
print (np.array2string(model.predict([in0Glo12384,in0Con43412,in0Cro968],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max98748.png')

LGlo12384 = global_average_pooling2D_layer([[[[1.8826], [1.3342]], [[1.4276], [1.0695]]]], Glo12384), 
LRes24009 = reshape_layer(Glo12384, [1, 1], Res24009), 
LMax91233 = max_pool1D_layer(Res24009, 1, 1, true, Max91233), 
LThr63611 = thresholded_relu_layer(Max91233, 5.839190049665135, Thr63611), 
LCon43412 = concatenate_layer([Thr63611,[[[0.1878, 0.4274, 0.6363]]]], 2, Con43412), 
LCro968 = cropping1D_layer([[[1.5022, 1.2439, 1.4908, 1.1607], [1.6873, 1.6993, 1.2023, 1.8106], [1.6377, 1.351, 1.3126, 1.286]]], 1, 1, Cro968), 
LSof81769 = softmax_layer(Cro968, 1, Sof81769), 
LMas54789 = masking_layer(Sof81769, 1, Mas54789), 
LMax98748 = maximum_layer([Con43412,Mas54789], Max98748), 
exec_layers([LGlo12384,LRes24009,LMax91233,LThr63611,LCon43412,LCro968,LSof81769,LMas54789,LMax98748],["Glo12384","Res24009","Max91233","Thr63611","Con43412","Cro968","Sof81769","Mas54789","Max98748"],Max98748,"Max98748")

Actual (Unparsed): [[[0.0000000, 0.1878000, 0.4274000, 0.6363000]]]

Expected (Unparsed): [[[1.0,1.0,1.0,1.0]]]

Actual:   [[[0, 0.1878, 0.4274, 0.6363]]]

Expected: [[[1, 1, 1, 1]]]