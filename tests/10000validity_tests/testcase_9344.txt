import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max56679 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max56679 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Ave96956 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave96956 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot34564 = tf.keras.layers.Input(shape=([3]))
in1Dot34564 = tf.keras.layers.Input(shape=([3]))
in0Con72485 = tf.keras.layers.Input(shape=([3]))
in0Con27965 = tf.keras.layers.Input(shape=([4, 2]))
in0Max10196 = tf.keras.layers.Input(shape=([1, 1]))
in1Max10196 = tf.keras.layers.Input(shape=([1, 1]))

Max56679 = keras.layers.Maximum(name = 'Max56679', )([in0Max56679,in1Max56679])
Res39422 = keras.layers.Reshape((1, 2), name = 'Res39422', )(Max56679)
Zer43211 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer43211', )(Res39422)
Ave96956 = keras.layers.Average(name = 'Ave96956', )([in0Ave96956,in1Ave96956])
Max91029 = keras.layers.Maximum(name = 'Max91029', )([Zer43211,Ave96956])
Fla93055 = keras.layers.Flatten(name = 'Fla93055', )(Max91029)
Dot34564 = keras.layers.Dot(axes=(1, 1), name = 'Dot34564', )([in0Dot34564,in1Dot34564])
Con72485 = keras.layers.Concatenate(axis=1, name = 'Con72485', )([Dot34564,in0Con72485])
Ave54004 = keras.layers.Average(name = 'Ave54004', )([Fla93055,Con72485])
Res12184 = keras.layers.Reshape((4, 1), name = 'Res12184', )(Ave54004)
Con27965 = keras.layers.Concatenate(axis=2, name = 'Con27965', )([Res12184,in0Con27965])
Max10196 = keras.layers.Maximum(name = 'Max10196', )([in0Max10196,in1Max10196])
Res72888 = keras.layers.Reshape((1, 1, 1), name = 'Res72888', )(Max10196)
Res50654 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res50654', )(Res72888)
Con43265 = keras.layers.Conv3D(3, (1, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con43265', )(Res50654)
Res83252 = keras.layers.Reshape((1, 1, 3), name = 'Res83252', )(Con43265)
Res25761 = keras.layers.Reshape((1, 3), name = 'Res25761', )(Res83252)
Ave53528 = keras.layers.AveragePooling1D(pool_size=(1), strides=(11), padding='same', name = 'Ave53528', )(Res25761)
Zer64297 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer64297', )(Ave53528)
Max75324 = keras.layers.Maximum(name = 'Max75324', )([Con27965,Zer64297])
model = tf.keras.models.Model(inputs=[in0Max56679,in1Max56679,in0Ave96956,in1Ave96956,in0Dot34564,in1Dot34564,in0Con72485,in0Con27965,in0Max10196,in1Max10196], outputs=Max75324)
w = model.get_layer('Con43265').get_weights() 
w[0] = np.array([[[[[0.634, 0.0623, 0.5506]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con43265').set_weights(w) 
in0Max56679 = tf.constant([[[[0.7773, 0.4083]]]])
in1Max56679 = tf.constant([[[[0.3496, 0.3456]]]])
in0Ave96956 = tf.constant([[[0.451, 0.5055], [0.84, 0.8088]]])
in1Ave96956 = tf.constant([[[0.1903, 0.5623], [0.0132, 0.5936]]])
in0Dot34564 = tf.constant([[0.484, 0.9224, 0.2685]])
in1Dot34564 = tf.constant([[0.2386, 0.7939, 0.9891]])
in0Con72485 = tf.constant([[0.5807, 0.4613, 0.931]])
in0Con27965 = tf.constant([[[0.3637, 0.9969], [0.4442, 0.9859], [0.7688, 0.5445], [0.6974, 0.624]]])
in0Max10196 = tf.constant([[[0.0188]]])
in1Max10196 = tf.constant([[[0.5511]]])
print (np.array2string(model.predict([in0Max56679,in1Max56679,in0Ave96956,in1Ave96956,in0Dot34564,in1Dot34564,in0Con72485,in0Con27965,in0Max10196,in1Max10196],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max75324.png')

LMax56679 = maximum_layer([[[[[0.7773, 0.4083]]]], [[[[0.3496, 0.3456]]]]], Max56679), 
LRes39422 = reshape_layer(Max56679, [1, 2], Res39422), 
LZer43211 = zero_padding1D_layer(Res39422, 1, 0, Zer43211), 
LAve96956 = average_layer([[[[0.451, 0.5055], [0.84, 0.8088]]], [[[0.1903, 0.5623], [0.0132, 0.5936]]]], Ave96956), 
LMax91029 = maximum_layer([Zer43211,Ave96956], Max91029), 
LFla93055 = flatten_layer(Max91029, Fla93055), 
LDot34564 = dot_layer([[0.484, 0.9224, 0.2685]], [[0.2386, 0.7939, 0.9891]], 1, 1, Dot34564), 
LCon72485 = concatenate_layer([Dot34564,[[0.5807, 0.4613, 0.931]]], 1, Con72485), 
LAve54004 = average_layer([Fla93055,Con72485], Ave54004), 
LRes12184 = reshape_layer(Ave54004, [4, 1], Res12184), 
LCon27965 = concatenate_layer([Res12184,[[[0.3637, 0.9969], [0.4442, 0.9859], [0.7688, 0.5445], [0.6974, 0.624]]]], 2, Con27965), 
LMax10196 = maximum_layer([[[[0.0188]]], [[[0.5511]]]], Max10196), 
LRes72888 = reshape_layer(Max10196, [1, 1, 1], Res72888), 
LRes50654 = reshape_layer(Res72888, [1, 1, 1, 1], Res50654), 
LCon43265 = conv3D_layer(Res50654, 1, 1, 1,[[[[[0.634, 0.0623, 0.5506]]]]],[0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con43265), 
LRes83252 = reshape_layer(Con43265, [1, 1, 3], Res83252), 
LRes25761 = reshape_layer(Res83252, [1, 3], Res25761), 
LAve53528 = average_pooling1D_layer(Res25761, 1, 11, true, Ave53528), 
LZer64297 = zero_padding1D_layer(Ave53528, 3, 0, Zer64297), 
LMax75324 = maximum_layer([Con27965,Zer64297], Max75324), 
exec_layers([LMax56679,LRes39422,LZer43211,LAve96956,LMax91029,LFla93055,LDot34564,LCon72485,LAve54004,LRes12184,LCon27965,LMax10196,LRes72888,LRes50654,LCon43265,LRes83252,LRes25761,LAve53528,LZer64297,LMax75324],["Max56679","Res39422","Zer43211","Ave96956","Max91029","Fla93055","Dot34564","Con72485","Ave54004","Res12184","Con27965","Max10196","Res72888","Res50654","Con43265","Res83252","Res25761","Ave53528","Zer64297","Max75324"],Max75324,"Max75324")

Actual (Unparsed): [[[0.7169996, 0.3637000, 0.9969000], [0.5573000, 0.4442000, 0.9859000], [0.6193000, 0.7688000, 0.5445000], [0.8161000, 0.6974000, 0.6240000]]]

Expected (Unparsed): [[[0.7169995549999999,0.3637,0.9969],[0.5573,0.4442,0.9859],[0.6193,0.7688,0.5445],[0.8161,0.6974,0.624]]]

Actual:   [[[0.717, 0.3637, 0.9969], [0.5573, 0.4442, 0.9859], [0.6193, 0.7688, 0.5445], [0.8161, 0.6974, 0.624]]]

Expected: [[[0.717, 0.3637, 0.9969], [0.5573, 0.4442, 0.9859], [0.6193, 0.7688, 0.5445], [0.8161, 0.6974, 0.624]]]