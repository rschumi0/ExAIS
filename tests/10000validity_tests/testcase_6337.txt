import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add30014 = tf.keras.layers.Input(shape=([1, 2]))
in1Add30014 = tf.keras.layers.Input(shape=([1, 2]))

Add30014 = keras.layers.Add(name = 'Add30014', )([in0Add30014,in1Add30014])
Ave13564 = keras.layers.AveragePooling1D(pool_size=(1), strides=(2), padding='same', name = 'Ave13564', )(Add30014)
Con1496 = keras.layers.Conv1D(4, (1),strides=(6), padding='valid', dilation_rate=(1), name = 'Con1496', )(Ave13564)
model = tf.keras.models.Model(inputs=[in0Add30014,in1Add30014], outputs=Con1496)
w = model.get_layer('Con1496').get_weights() 
w[0] = np.array([[[0.7873, 0.8946, 0.3513, 0.1241], [0.0665, 0.6935, 0.0055, 0.8435]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con1496').set_weights(w) 
in0Add30014 = tf.constant([[[0.0318, 0.4082]]])
in1Add30014 = tf.constant([[[0.7249, 0.0843]]])
print (np.array2string(model.predict([in0Add30014,in1Add30014],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con1496.png')

LAdd30014 = add_layer([[[[0.0318, 0.4082]]], [[[0.7249, 0.0843]]]], Add30014), 
LAve13564 = average_pooling1D_layer(Add30014, 1, 2, true, Ave13564), 
LCon1496 = conv1D_layer(Ave13564, 1,[[[0.7873, 0.8946, 0.3513, 0.1241], [0.0665, 0.6935, 0.0055, 0.8435]]],[0, 0, 0, 0], 6, false, 1, Con1496), 
exec_layers([LAdd30014,LAve13564,LCon1496],["Add30014","Ave13564","Con1496"],Con1496,"Con1496")

Actual (Unparsed): [[[0.6285012, 1.0184926, 0.2685375, 0.5093302]]]

Expected (Unparsed): [[[0.62850116,1.01849257,0.26853746,0.50933022]]]

Actual:   [[[0.6286, 1.0185, 0.2686, 0.5094]]]

Expected: [[[0.6286, 1.0185, 0.2686, 0.5094]]]