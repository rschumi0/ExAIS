import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave66909 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave66909 = tf.keras.layers.Input(shape=([1, 2]))
in0Sub30714 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub30714 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub46619 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub46619 = tf.keras.layers.Input(shape=([2, 3, 2]))

Ave66909 = keras.layers.Average(name = 'Ave66909', )([in0Ave66909,in1Ave66909])
ReL60631 = keras.layers.ReLU(max_value=6.087958841625991, negative_slope=4.572357262130917, threshold=6.2135360759179425, name = 'ReL60631', )(Ave66909)
Zer29695 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer29695', )(ReL60631)
Sub30714 = keras.layers.Subtract(name = 'Sub30714', )([in0Sub30714,in1Sub30714])
Sub46619 = keras.layers.Subtract(name = 'Sub46619', )([in0Sub46619,in1Sub46619])
Ave83439 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave83439', )(Sub46619)
Res57016 = keras.layers.Reshape((2, 2), name = 'Res57016', )(Ave83439)
Dot20433 = keras.layers.Dot(axes=(2, 2), name = 'Dot20433', )([Sub30714,Res57016])
Mul36931 = keras.layers.Multiply(name = 'Mul36931', )([Zer29695,Dot20433])
model = tf.keras.models.Model(inputs=[in0Ave66909,in1Ave66909,in0Sub30714,in1Sub30714,in0Sub46619,in1Sub46619], outputs=Mul36931)
in0Ave66909 = tf.constant([[[0.9386, 0.2883]]])
in1Ave66909 = tf.constant([[[0.7181, 0.8282]]])
in0Sub30714 = tf.constant([[[0.3064, 0.8865], [0.4995, 0.7268]]])
in1Sub30714 = tf.constant([[[0.7354, 0.4803], [0.0527, 0.8345]]])
in0Sub46619 = tf.constant([[[[0.2561, 0.7385], [0.5776, 0.5064], [0.7519, 0.0125]], [[0.2019, 0.5829], [0.4564, 0.1956], [0.3327, 0.185]]]])
in1Sub46619 = tf.constant([[[[0.2239, 0.464], [0.7676, 0.4619], [0.5671, 0.3409]], [[0.6212, 0.3883], [0.9303, 0.7587], [0.9245, 0.4004]]]])
print (np.array2string(model.predict([in0Ave66909,in1Ave66909,in0Sub30714,in1Sub30714,in0Sub46619,in1Sub46619],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul36931.png')

LAve66909 = average_layer([[[[0.9386, 0.2883]]], [[[0.7181, 0.8282]]]], Ave66909), 
LReL60631 = relu_layer(Ave66909, 6.087958841625991, 4.572357262130917, 6.2135360759179425, ReL60631), 
LZer29695 = zero_padding1D_layer(ReL60631, 1, 0, Zer29695), 
LSub30714 = subtract_layer([[[0.3064, 0.8865], [0.4995, 0.7268]]], [[[0.7354, 0.4803], [0.0527, 0.8345]]], Sub30714), 
LSub46619 = subtract_layer([[[[0.2561, 0.7385], [0.5776, 0.5064], [0.7519, 0.0125]], [[0.2019, 0.5829], [0.4564, 0.1956], [0.3327, 0.185]]]], [[[[0.2239, 0.464], [0.7676, 0.4619], [0.5671, 0.3409]], [[0.6212, 0.3883], [0.9303, 0.7587], [0.9245, 0.4004]]]], Sub46619), 
LAve83439 = average_pooling2D_layer(Sub46619, 1, 2, Ave83439), 
LRes57016 = reshape_layer(Ave83439, [2, 2], Res57016), 
LDot20433 = dot_layer(Sub30714,Res57016, 2, 2, Dot20433), 
LMul36931 = multiply_layer([Zer29695,Dot20433], Mul36931), 
exec_layers([LAve66909,LReL60631,LZer29695,LSub30714,LSub46619,LAve83439,LRes57016,LDot20433,LMul36931],["Ave66909","ReL60631","Zer29695","Sub30714","Sub46619","Ave83439","Res57016","Dot20433","Mul36931"],Mul36931,"Mul36931")

Actual (Unparsed): [[[0.0000000, 0.0000000], [1.2910001, 4.6466071]]]

Expected (Unparsed): [[[0.0,0.0],[1.291000107542932,4.646606942072751]]]

Actual:   [[[0, 0], [1.2911, 4.6467]]]

Expected: [[[0, 0], [1.2911, 4.6467]]]