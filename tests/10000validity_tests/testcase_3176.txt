import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con32789 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Dot29550 = tf.keras.layers.Input(shape=([2]))
in1Dot29550 = tf.keras.layers.Input(shape=([2]))

Con32789 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(1, 1), padding='same', name = 'Con32789', )(in0Con32789)
ReL38039 = keras.layers.ReLU(max_value=8.629455238350234, negative_slope=8.11884758268815, threshold=6.111712572562556, name = 'ReL38039', )(Con32789)
Res52561 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res52561', )(ReL38039)
Cro85202 = keras.layers.Cropping3D(cropping=((0, 0), (0, 0), (1, 0)), name = 'Cro85202', )(Res52561)
Res34619 = keras.layers.Reshape((1, 1, 1), name = 'Res34619', )(Cro85202)
Res66973 = keras.layers.Reshape((1, 1), name = 'Res66973', )(Res34619)
Fla4438 = keras.layers.Flatten(name = 'Fla4438', )(Res66973)
Dot29550 = keras.layers.Dot(axes=(1, 1), name = 'Dot29550', )([in0Dot29550,in1Dot29550])
Sub49350 = keras.layers.Subtract(name = 'Sub49350', )([Fla4438,Dot29550])
model = tf.keras.models.Model(inputs=[in0Con32789,in0Dot29550,in1Dot29550], outputs=Sub49350)
w = model.get_layer('Con32789').get_weights() 
w[0] = np.array([[[[0.6811, 0.5703], [0.0921, 0.374]]]])
w[1] = np.array([0, 0])
model.get_layer('Con32789').set_weights(w) 
in0Con32789 = tf.constant([[[[0.9336, 0.1803]]]])
in0Dot29550 = tf.constant([[0.0523, 0.3416]])
in1Dot29550 = tf.constant([[0.2777, 0.147]])
print (np.array2string(model.predict([in0Con32789,in0Dot29550,in1Dot29550],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub49350.png')

LCon32789 = conv2D_transpose_layer([[[[0.9336, 0.1803]]]], 1, 1,[[[[0.6811, 0.5703], [0.0921, 0.374]]]],[0, 0], 1, 1, true, Con32789), 
LReL38039 = relu_layer(Con32789, 8.629455238350234, 8.11884758268815, 6.111712572562556, ReL38039), 
LRes52561 = reshape_layer(ReL38039, [1, 1, 2, 1], Res52561), 
LCro85202 = cropping3D_layer(Res52561, 0, 0, 0, 0, 1, 0, Cro85202), 
LRes34619 = reshape_layer(Cro85202, [1, 1, 1], Res34619), 
LRes66973 = reshape_layer(Res34619, [1, 1], Res66973), 
LFla4438 = flatten_layer(Res66973, Fla4438), 
LDot29550 = dot_layer([[0.0523, 0.3416]], [[0.2777, 0.147]], 1, 1, Dot29550), 
LSub49350 = subtract_layer(Fla4438,Dot29550, Sub49350), 
exec_layers([LCon32789,LReL38039,LRes52561,LCro85202,LRes34619,LRes66973,LFla4438,LDot29550,LSub49350],["Con32789","ReL38039","Res52561","Cro85202","Res34619","Res66973","Fla4438","Dot29550","Sub49350"],Sub49350,"Sub49350")

Actual (Unparsed): [[-48.4392345]]

Expected (Unparsed): [[-48.439234464764446]]

Actual:   [[-48.4392]]

Expected: [[-48.4392]]