import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con70942 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Con70942 = keras.layers.Conv3DTranspose(3, (2, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con70942', )(in0Con70942)
Res67705 = keras.layers.Reshape((3, 2, 3), name = 'Res67705', )(Con70942)
Res42423 = keras.layers.Reshape((3, 6), name = 'Res42423', )(Res67705)
Loc46383 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc46383', )(Res42423)
model = tf.keras.models.Model(inputs=[in0Con70942], outputs=Loc46383)
w = model.get_layer('Con70942').get_weights() 
w[0] = np.array([[[[[0.4879], [0.1219], [0.3405]]]], [[[[0.1869], [0.9785], [0.7526]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con70942').set_weights(w) 
w = model.get_layer('Loc46383').get_weights() 
w[0] = np.array([[[0.8593, 0.7191, 0.607], [0.4317, 0.4713, 0.7634], [0.613, 0.7744, 0.0247], [0.6958, 0.0531, 0.1089], [0.4376, 0.8852, 0.6157], [0.9889, 0.602, 0.4732]], [[0.537, 0.6933, 0.5437], [0.4694, 0.4879, 0.9948], [0.6738, 0.0442, 0.1116], [0.0957, 0.353, 0.4801], [0.74, 0.4857, 0.3618], [0.3971, 0.8247, 0.8977]], [[0.7653, 0.8109, 0.6607], [0.2427, 0.0943, 0.2969], [0.0497, 0.3883, 0.7246], [0.0382, 0.6536, 0.9159], [0.8314, 0.8155, 0.923], [0.5349, 0.3199, 0.0632]]])
w[1] = np.array([[0, 0, 0], [0, 0, 0], [0, 0, 0]])
model.get_layer('Loc46383').set_weights(w) 
in0Con70942 = tf.constant([[[[[0.2792]], [[0.0047]]], [[[0.6888]], [[0.4125]]]]])
print (np.array2string(model.predict([in0Con70942],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc46383.png')

LCon70942 = conv3D_transpose_layer([[[[[0.2792]], [[0.0047]]], [[[0.6888]], [[0.4125]]]]], 2, 1, 1,[[[[[0.4879], [0.1219], [0.3405]]]], [[[[0.1869], [0.9785], [0.7526]]]]],[0, 0, 0], 1, 1, 1, false, Con70942), 
LRes67705 = reshape_layer(Con70942, [3, 2, 3], Res67705), 
LRes42423 = reshape_layer(Res67705, [3, 6], Res42423), 
LLoc46383 = locally_connected1D_layer(Res42423, 1,[[[0.8593, 0.7191, 0.607], [0.4317, 0.4713, 0.7634], [0.613, 0.7744, 0.0247], [0.6958, 0.0531, 0.1089], [0.4376, 0.8852, 0.6157], [0.9889, 0.602, 0.4732]], [[0.537, 0.6933, 0.5437], [0.4694, 0.4879, 0.9948], [0.6738, 0.0442, 0.1116], [0.0957, 0.353, 0.4801], [0.74, 0.4857, 0.3618], [0.3971, 0.8247, 0.8977]], [[0.7653, 0.8109, 0.6607], [0.2427, 0.0943, 0.2969], [0.0497, 0.3883, 0.7246], [0.0382, 0.6536, 0.9159], [0.8314, 0.8155, 0.923], [0.5349, 0.3199, 0.0632]]],[[0, 0, 0], [0, 0, 0], [0, 0, 0]], 1, Loc46383), 
exec_layers([LCon70942,LRes67705,LRes42423,LLoc46383],["Con70942","Res67705","Res42423","Loc46383"],Loc46383,"Loc46383")

Actual (Unparsed): [[[0.1934533, 0.1892101, 0.1123764], [0.7928920, 0.6798481, 0.8621850], [0.7924463, 0.8481046, 1.1235746]]]

Expected (Unparsed): [[[0.19345327357699998,0.18921014349100002,0.11237641199000001],[0.7928919855269999,0.679848080351,0.8621849895250001],[0.792446271462,0.848104666017,1.1235746321970002]]]

Actual:   [[[0.1935, 0.1893, 0.1124], [0.7929, 0.6799, 0.8622], [0.7925, 0.8482, 1.1236]]]

Expected: [[[0.1935, 0.1893, 0.1124], [0.7929, 0.6799, 0.8622], [0.7925, 0.8482, 1.1236]]]