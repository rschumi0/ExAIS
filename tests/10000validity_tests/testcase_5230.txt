import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub48156 = tf.keras.layers.Input(shape=([3]))
in1Sub48156 = tf.keras.layers.Input(shape=([3]))

Sub48156 = keras.layers.Subtract(name = 'Sub48156', )([in0Sub48156,in1Sub48156])
Res72951 = keras.layers.Reshape((3, 1), name = 'Res72951', )(Sub48156)
Res16037 = keras.layers.Reshape((3, 1, 1), name = 'Res16037', )(Res72951)
Glo98260 = keras.layers.GlobalAveragePooling2D(name = 'Glo98260', )(Res16037)
Res6039 = keras.layers.Reshape((1, 1), name = 'Res6039', )(Glo98260)
Res39516 = keras.layers.Reshape((1, 1, 1), name = 'Res39516', )(Res6039)
Up_68314 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_68314', )(Res39516)
Glo38167 = keras.layers.GlobalAveragePooling2D(name = 'Glo38167', )(Up_68314)
model = tf.keras.models.Model(inputs=[in0Sub48156,in1Sub48156], outputs=Glo38167)
in0Sub48156 = tf.constant([[0.4817, 0.0748, 0.5261]])
in1Sub48156 = tf.constant([[0.7997, 0.6045, 0.4408]])
print (np.array2string(model.predict([in0Sub48156,in1Sub48156],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo38167.png')

LSub48156 = subtract_layer([[0.4817, 0.0748, 0.5261]], [[0.7997, 0.6045, 0.4408]], Sub48156), 
LRes72951 = reshape_layer(Sub48156, [3, 1], Res72951), 
LRes16037 = reshape_layer(Res72951, [3, 1, 1], Res16037), 
LGlo98260 = global_average_pooling2D_layer(Res16037, Glo98260), 
LRes6039 = reshape_layer(Glo98260, [1, 1], Res6039), 
LRes39516 = reshape_layer(Res6039, [1, 1, 1], Res39516), 
LUp_68314 = up_sampling2D_layer(Res39516, 2, 1, Up_68314), 
LGlo38167 = global_average_pooling2D_layer(Up_68314, Glo38167), 
exec_layers([LSub48156,LRes72951,LRes16037,LGlo98260,LRes6039,LRes39516,LUp_68314,LGlo38167],["Sub48156","Res72951","Res16037","Glo98260","Res6039","Res39516","Up_68314","Glo38167"],Glo38167,"Glo38167")

Actual (Unparsed): [[-0.2541333]]

Expected (Unparsed): [[-0.2541333333333333]]

Actual:   [[-0.2541]]

Expected: [[-0.2541]]