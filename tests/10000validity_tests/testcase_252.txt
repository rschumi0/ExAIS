import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max39426 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max39426 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Con9756 = tf.keras.layers.Input(shape=([2, 1]))
in0Add49448 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add49448 = tf.keras.layers.Input(shape=([1, 2, 1]))

Max39426 = keras.layers.Maximum(name = 'Max39426', )([in0Max39426,in1Max39426])
Glo73045 = keras.layers.GlobalAveragePooling3D(name = 'Glo73045', )(Max39426)
Res68080 = keras.layers.Reshape((2, 1), name = 'Res68080', )(Glo73045)
Con9756 = keras.layers.Concatenate(axis=2, name = 'Con9756', )([Res68080,in0Con9756])
Add49448 = keras.layers.Add(name = 'Add49448', )([in0Add49448,in1Add49448])
Res81736 = keras.layers.Reshape((1, 2), name = 'Res81736', )(Add49448)
Dot78013 = keras.layers.Dot(axes=(1, 2), name = 'Dot78013', )([Con9756,Res81736])
Res11912 = keras.layers.Reshape((2, 1, 1), name = 'Res11912', )(Dot78013)
Glo41985 = keras.layers.GlobalMaxPool2D(name = 'Glo41985', )(Res11912)
model = tf.keras.models.Model(inputs=[in0Max39426,in1Max39426,in0Con9756,in0Add49448,in1Add49448], outputs=Glo41985)
in0Max39426 = tf.constant([[[[[0.4574, 0.4757], [0.5426, 0.0655]], [[0.3214, 0.9554], [0.3794, 0.0807]]], [[[0.9959, 0.5105], [0.3197, 0.4602]], [[0.4589, 0.5429], [0.3179, 0.0265]]]]])
in1Max39426 = tf.constant([[[[[0.1536, 0.4514], [0.0561, 0.8115]], [[0.5813, 0.8059], [0.0936, 0.5897]]], [[[0.6088, 0.3424], [0.0027, 0.6385]], [[0.8518, 0.5684], [0.2562, 0.2713]]]]])
in0Con9756 = tf.constant([[[0.0332], [0.5978]]])
in0Add49448 = tf.constant([[[[0.1542], [0.6915]]]])
in1Add49448 = tf.constant([[[[0.6188], [0.0578]]]])
print (np.array2string(model.predict([in0Max39426,in1Max39426,in0Con9756,in0Add49448,in1Add49448],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo41985.png')

LMax39426 = maximum_layer([[[[[[0.4574, 0.4757], [0.5426, 0.0655]], [[0.3214, 0.9554], [0.3794, 0.0807]]], [[[0.9959, 0.5105], [0.3197, 0.4602]], [[0.4589, 0.5429], [0.3179, 0.0265]]]]], [[[[[0.1536, 0.4514], [0.0561, 0.8115]], [[0.5813, 0.8059], [0.0936, 0.5897]]], [[[0.6088, 0.3424], [0.0027, 0.6385]], [[0.8518, 0.5684], [0.2562, 0.2713]]]]]], Max39426), 
LGlo73045 = global_average_pooling3D_layer(Max39426, Glo73045), 
LRes68080 = reshape_layer(Glo73045, [2, 1], Res68080), 
LCon9756 = concatenate_layer([Res68080,[[[0.0332], [0.5978]]]], 2, Con9756), 
LAdd49448 = add_layer([[[[[0.1542], [0.6915]]]], [[[[0.6188], [0.0578]]]]], Add49448), 
LRes81736 = reshape_layer(Add49448, [1, 2], Res81736), 
LDot78013 = dot_layer(Con9756,Res81736, 1, 2, Dot78013), 
LRes11912 = reshape_layer(Dot78013, [2, 1, 1], Res11912), 
LGlo41985 = global_max_pool2D_layer(Res11912, Glo41985), 
exec_layers([LMax39426,LGlo73045,LRes68080,LCon9756,LAdd49448,LRes81736,LDot78013,LRes11912,LGlo41985],["Max39426","Glo73045","Res68080","Con9756","Add49448","Res81736","Dot78013","Res11912","Glo41985"],Glo41985,"Glo41985")

Actual (Unparsed): [[0.8811417]]

Expected (Unparsed): [[0.8811416625]]

Actual:   [[0.8812]]

Expected: [[0.8812]]