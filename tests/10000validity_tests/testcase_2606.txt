import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul34349 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul34349 = tf.keras.layers.Input(shape=([2, 2]))
in0Add58641 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add58641 = tf.keras.layers.Input(shape=([2, 1, 2]))

Mul34349 = keras.layers.Multiply(name = 'Mul34349', )([in0Mul34349,in1Mul34349])
Add58641 = keras.layers.Add(name = 'Add58641', )([in0Add58641,in1Add58641])
Res6904 = keras.layers.Reshape((2, 2), name = 'Res6904', )(Add58641)
Max37889 = keras.layers.MaxPool1D(pool_size=(2), name = 'Max37889', )(Res6904)
Zer92870 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer92870', )(Max37889)
Sub14215 = keras.layers.Subtract(name = 'Sub14215', )([Mul34349,Zer92870])
model = tf.keras.models.Model(inputs=[in0Mul34349,in1Mul34349,in0Add58641,in1Add58641], outputs=Sub14215)
in0Mul34349 = tf.constant([[[0.3734, 0.7427], [0.6487, 0.9069]]])
in1Mul34349 = tf.constant([[[0.144, 0.3483], [0.2972, 0.6965]]])
in0Add58641 = tf.constant([[[[0.2556, 0.301]], [[0.4112, 0.8126]]]])
in1Add58641 = tf.constant([[[[0.269, 0.3177]], [[0.587, 0.455]]]])
print (np.array2string(model.predict([in0Mul34349,in1Mul34349,in0Add58641,in1Add58641],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub14215.png')

LMul34349 = multiply_layer([[[[0.3734, 0.7427], [0.6487, 0.9069]]], [[[0.144, 0.3483], [0.2972, 0.6965]]]], Mul34349), 
LAdd58641 = add_layer([[[[[0.2556, 0.301]], [[0.4112, 0.8126]]]], [[[[0.269, 0.3177]], [[0.587, 0.455]]]]], Add58641), 
LRes6904 = reshape_layer(Add58641, [2, 2], Res6904), 
LMax37889 = max_pool1D_layer(Res6904, 2, Max37889), 
LZer92870 = zero_padding1D_layer(Max37889, 1, 0, Zer92870), 
LSub14215 = subtract_layer(Mul34349,Zer92870, Sub14215), 
exec_layers([LMul34349,LAdd58641,LRes6904,LMax37889,LZer92870,LSub14215],["Mul34349","Add58641","Res6904","Max37889","Zer92870","Sub14215"],Sub14215,"Sub14215")

Actual (Unparsed): [[[0.0537696, 0.2586824], [-0.8054064, -0.6359442]]]

Expected (Unparsed): [[[0.0537696,0.25868241000000003],[-0.80540636,-0.63594415]]]

Actual:   [[[0.0538, 0.2587], [-0.8054, -0.6359]]]

Expected: [[[0.0538, 0.2587], [-0.8054, -0.6359]]]