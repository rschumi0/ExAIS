import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add84625 = tf.keras.layers.Input(shape=([1, 1]))
in1Add84625 = tf.keras.layers.Input(shape=([1, 1]))
in0Add58111 = tf.keras.layers.Input(shape=([1, 1]))
in1Add58111 = tf.keras.layers.Input(shape=([1, 1]))
in0Con92631 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add471 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add471 = tf.keras.layers.Input(shape=([1, 1, 2]))

Add84625 = keras.layers.Add(name = 'Add84625', )([in0Add84625,in1Add84625])
Add58111 = keras.layers.Add(name = 'Add58111', )([in0Add58111,in1Add58111])
Min35354 = keras.layers.Minimum(name = 'Min35354', )([Add84625,Add58111])
Res54862 = keras.layers.Reshape((1, 1, 1), name = 'Res54862', )(Min35354)
Con92631 = keras.layers.Concatenate(axis=3, name = 'Con92631', )([Res54862,in0Con92631])
Add471 = keras.layers.Add(name = 'Add471', )([in0Add471,in1Add471])
Ave25660 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave25660', )(Add471)
Mas33977 = keras.layers.Masking(mask_value=1, name = 'Mas33977', )(Ave25660)
Max14964 = keras.layers.Maximum(name = 'Max14964', )([Con92631,Mas33977])
model = tf.keras.models.Model(inputs=[in0Add84625,in1Add84625,in0Add58111,in1Add58111,in0Con92631,in0Add471,in1Add471], outputs=Max14964)
in0Add84625 = tf.constant([[[0.9911]]])
in1Add84625 = tf.constant([[[0.4197]]])
in0Add58111 = tf.constant([[[0.8662]]])
in1Add58111 = tf.constant([[[0.9815]]])
in0Con92631 = tf.constant([[[[0.4988]]]])
in0Add471 = tf.constant([[[[0.4486, 0.4598]]]])
in1Add471 = tf.constant([[[[0.2338, 0.6901]]]])
print (np.array2string(model.predict([in0Add84625,in1Add84625,in0Add58111,in1Add58111,in0Con92631,in0Add471,in1Add471],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max14964.png')

LAdd84625 = add_layer([[[[0.9911]]], [[[0.4197]]]], Add84625), 
LAdd58111 = add_layer([[[[0.8662]]], [[[0.9815]]]], Add58111), 
LMin35354 = minimum_layer([Add84625,Add58111], Min35354), 
LRes54862 = reshape_layer(Min35354, [1, 1, 1], Res54862), 
LCon92631 = concatenate_layer([Res54862,[[[[0.4988]]]]], 3, Con92631), 
LAdd471 = add_layer([[[[[0.4486, 0.4598]]]], [[[[0.2338, 0.6901]]]]], Add471), 
LAve25660 = average_pooling2D_layer(Add471, 1, 1, Ave25660), 
LMas33977 = masking_layer(Ave25660, 1, Mas33977), 
LMax14964 = maximum_layer([Con92631,Mas33977], Max14964), 
exec_layers([LAdd84625,LAdd58111,LMin35354,LRes54862,LCon92631,LAdd471,LAve25660,LMas33977,LMax14964],["Add84625","Add58111","Min35354","Res54862","Con92631","Add471","Ave25660","Mas33977","Max14964"],Max14964,"Max14964")

Actual (Unparsed): [[[[1.4108000, 1.1499000]]]]

Expected (Unparsed): [[[[1.4108,1.1499000000000001]]]]

Actual:   [[[[1.4108, 1.1499]]]]

Expected: [[[[1.4108, 1.15]]]]