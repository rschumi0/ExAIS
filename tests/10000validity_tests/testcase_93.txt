import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lea79888 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con537 = tf.keras.layers.Input(shape=([2, 1, 1]))

Lea79888 = keras.layers.LeakyReLU(alpha=6.267397937570966, name = 'Lea79888', input_shape=(1, 1, 2))(in0Lea79888)
Zer24286 = keras.layers.ZeroPadding2D(padding=((17, 0), (0, 0)), name = 'Zer24286', )(Lea79888)
Con537 = keras.layers.Conv2DTranspose(2, (1, 1),strides=(9, 1), padding='valid', name = 'Con537', )(in0Con537)
Min58907 = keras.layers.Minimum(name = 'Min58907', )([Zer24286,Con537])
Res38433 = keras.layers.Reshape((18, 2), name = 'Res38433', )(Min58907)
Up_90427 = keras.layers.UpSampling1D(size=(2), name = 'Up_90427', )(Res38433)
Res37006 = keras.layers.Reshape((36, 2, 1), name = 'Res37006', )(Up_90427)
Res78963 = keras.layers.Reshape((36, 2, 1, 1), name = 'Res78963', )(Res37006)
Up_98701 = keras.layers.UpSampling3D(size=(1, 2, 2), name = 'Up_98701', )(Res78963)
Res55759 = keras.layers.Reshape((36, 4, 2), name = 'Res55759', )(Up_98701)
Res34950 = keras.layers.Reshape((36, 8), name = 'Res34950', )(Res55759)
Res89766 = keras.layers.Reshape((36, 8, 1), name = 'Res89766', )(Res34950)
Dep18565 = keras.layers.DepthwiseConv2D((35, 6),strides=(16, 16), padding='same', name = 'Dep18565', )(Res89766)
model = tf.keras.models.Model(inputs=[in0Lea79888,in0Con537], outputs=Dep18565)
w = model.get_layer('Con537').get_weights() 
w[0] = np.array([[[[0.6763], [0.7837]]]])
w[1] = np.array([0, 0])
model.get_layer('Con537').set_weights(w) 
w = model.get_layer('Dep18565').get_weights() 
w[0] = np.array([[[[0.9471]], [[0.203]], [[0.9956]], [[0.3823]], [[0.9262]], [[0.9165]]], [[[0.0921]], [[0.6943]], [[0.2094]], [[0.7619]], [[0.0034]], [[0.0279]]], [[[0.9781]], [[0.1493]], [[0.1024]], [[0.1288]], [[0.7422]], [[0.266]]], [[[0.1323]], [[0.9058]], [[0.5074]], [[0.8181]], [[0.6328]], [[0.0628]]], [[[0.5883]], [[0.2727]], [[0.0031]], [[0.5015]], [[0.4728]], [[0.0854]]], [[[0.1435]], [[0.4698]], [[0.6594]], [[0.1411]], [[0.148]], [[0.8173]]], [[[0.1862]], [[0.9086]], [[0.8339]], [[0.1341]], [[0.6511]], [[0.6182]]], [[[0.991]], [[0.9951]], [[0.8815]], [[0.1064]], [[0.1055]], [[0.0087]]], [[[0.0549]], [[0.84]], [[0.9745]], [[0.8801]], [[0.9924]], [[0.0319]]], [[[0.0634]], [[0.2355]], [[0.5542]], [[0.692]], [[0.6785]], [[0.5295]]], [[[0.5489]], [[0.917]], [[0.0286]], [[0.9559]], [[0.3367]], [[0.7181]]], [[[0.0312]], [[0.9198]], [[0.3533]], [[0.2069]], [[0.2832]], [[0.2909]]], [[[0.1114]], [[0.0208]], [[0.9581]], [[0.3567]], [[0.8462]], [[0.4487]]], [[[0.5225]], [[0.1196]], [[0.8635]], [[0.8437]], [[0.0665]], [[0.3422]]], [[[0.8215]], [[0.5524]], [[0.7351]], [[0.5351]], [[0.6322]], [[0.7766]]], [[[0.2153]], [[0.9014]], [[0.4017]], [[0.4895]], [[0.4852]], [[0.1065]]], [[[0.8483]], [[0.7773]], [[0.0647]], [[0.6243]], [[0.9326]], [[0.7466]]], [[[0.8181]], [[0.3261]], [[0.0143]], [[0.4481]], [[0.9567]], [[0.9258]]], [[[0.7093]], [[0.0991]], [[0.2634]], [[0.8705]], [[0.7649]], [[0.2612]]], [[[0.7205]], [[0.2776]], [[0.6909]], [[0.5228]], [[0.6568]], [[0.5548]]], [[[0.5902]], [[0.6729]], [[0.2546]], [[0.4168]], [[0.6172]], [[0.309]]], [[[0.7543]], [[0.1085]], [[0.7593]], [[0.3188]], [[0.9789]], [[0.7842]]], [[[0.1847]], [[0.6994]], [[0.8615]], [[0.1523]], [[0.2277]], [[0.7302]]], [[[0.5081]], [[0.6961]], [[0.1945]], [[0.608]], [[0.949]], [[0.0041]]], [[[0.5642]], [[0.265]], [[0.1421]], [[0.0054]], [[0.8301]], [[0.2454]]], [[[0.9797]], [[0.1946]], [[0.1836]], [[0.1925]], [[0.0207]], [[0.2524]]], [[[0.4771]], [[0.7127]], [[0.417]], [[0.8189]], [[0.4178]], [[0.1253]]], [[[0.0426]], [[0.5632]], [[0.7438]], [[0.8811]], [[0.1393]], [[0.1057]]], [[[0.2128]], [[0.2384]], [[0.8935]], [[0.7966]], [[0.5927]], [[0.1232]]], [[[0.2323]], [[0.8315]], [[0.4863]], [[0.9669]], [[0.7829]], [[0.6945]]], [[[0.7449]], [[0.7138]], [[0.3819]], [[0.458]], [[0.4296]], [[0.1253]]], [[[0.7362]], [[0.0401]], [[0.7643]], [[0.964]], [[0.8408]], [[0.1243]]], [[[0.2909]], [[0.6379]], [[0.541]], [[0.0773]], [[0.4856]], [[0.4087]]], [[[0.1897]], [[0.8696]], [[0.424]], [[0.3225]], [[0.6933]], [[0.6949]]], [[[0.6928]], [[0.6099]], [[0.3693]], [[0.7176]], [[0.6377]], [[0.4189]]]])
w[1] = np.array([0])
model.get_layer('Dep18565').set_weights(w) 
in0Lea79888 = tf.constant([[[[0.3575, 0.1522]]]])
in0Con537 = tf.constant([[[[0.8239]], [[0.4625]]]])
print (np.array2string(model.predict([in0Lea79888,in0Con537],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep18565.png')

LLea79888 = leaky_relu_layer([[[[0.3575, 0.1522]]]], 6.267397937570966, Lea79888), 
LZer24286 = zero_padding2D_layer(Lea79888, 17, 0, 0, 0, Zer24286), 
LCon537 = conv2D_transpose_layer([[[[0.8239]], [[0.4625]]]], 1, 1,[[[[0.6763], [0.7837]]]],[0, 0], 9, 1, false, Con537), 
LMin58907 = minimum_layer([Zer24286,Con537], Min58907), 
LRes38433 = reshape_layer(Min58907, [18, 2], Res38433), 
LUp_90427 = up_sampling1D_layer(Res38433, 2, Up_90427), 
LRes37006 = reshape_layer(Up_90427, [36, 2, 1], Res37006), 
LRes78963 = reshape_layer(Res37006, [36, 2, 1, 1], Res78963), 
LUp_98701 = up_sampling3D_layer(Res78963, 1, 2, 2, Up_98701), 
LRes55759 = reshape_layer(Up_98701, [36, 4, 2], Res55759), 
LRes34950 = reshape_layer(Res55759, [36, 8], Res34950), 
LRes89766 = reshape_layer(Res34950, [36, 8, 1], Res89766), 
LDep18565 = depthwise_conv2D_layer(Res89766, 35, 6,[[[[0.9471]], [[0.203]], [[0.9956]], [[0.3823]], [[0.9262]], [[0.9165]]], [[[0.0921]], [[0.6943]], [[0.2094]], [[0.7619]], [[0.0034]], [[0.0279]]], [[[0.9781]], [[0.1493]], [[0.1024]], [[0.1288]], [[0.7422]], [[0.266]]], [[[0.1323]], [[0.9058]], [[0.5074]], [[0.8181]], [[0.6328]], [[0.0628]]], [[[0.5883]], [[0.2727]], [[0.0031]], [[0.5015]], [[0.4728]], [[0.0854]]], [[[0.1435]], [[0.4698]], [[0.6594]], [[0.1411]], [[0.148]], [[0.8173]]], [[[0.1862]], [[0.9086]], [[0.8339]], [[0.1341]], [[0.6511]], [[0.6182]]], [[[0.991]], [[0.9951]], [[0.8815]], [[0.1064]], [[0.1055]], [[0.0087]]], [[[0.0549]], [[0.84]], [[0.9745]], [[0.8801]], [[0.9924]], [[0.0319]]], [[[0.0634]], [[0.2355]], [[0.5542]], [[0.692]], [[0.6785]], [[0.5295]]], [[[0.5489]], [[0.917]], [[0.0286]], [[0.9559]], [[0.3367]], [[0.7181]]], [[[0.0312]], [[0.9198]], [[0.3533]], [[0.2069]], [[0.2832]], [[0.2909]]], [[[0.1114]], [[0.0208]], [[0.9581]], [[0.3567]], [[0.8462]], [[0.4487]]], [[[0.5225]], [[0.1196]], [[0.8635]], [[0.8437]], [[0.0665]], [[0.3422]]], [[[0.8215]], [[0.5524]], [[0.7351]], [[0.5351]], [[0.6322]], [[0.7766]]], [[[0.2153]], [[0.9014]], [[0.4017]], [[0.4895]], [[0.4852]], [[0.1065]]], [[[0.8483]], [[0.7773]], [[0.0647]], [[0.6243]], [[0.9326]], [[0.7466]]], [[[0.8181]], [[0.3261]], [[0.0143]], [[0.4481]], [[0.9567]], [[0.9258]]], [[[0.7093]], [[0.0991]], [[0.2634]], [[0.8705]], [[0.7649]], [[0.2612]]], [[[0.7205]], [[0.2776]], [[0.6909]], [[0.5228]], [[0.6568]], [[0.5548]]], [[[0.5902]], [[0.6729]], [[0.2546]], [[0.4168]], [[0.6172]], [[0.309]]], [[[0.7543]], [[0.1085]], [[0.7593]], [[0.3188]], [[0.9789]], [[0.7842]]], [[[0.1847]], [[0.6994]], [[0.8615]], [[0.1523]], [[0.2277]], [[0.7302]]], [[[0.5081]], [[0.6961]], [[0.1945]], [[0.608]], [[0.949]], [[0.0041]]], [[[0.5642]], [[0.265]], [[0.1421]], [[0.0054]], [[0.8301]], [[0.2454]]], [[[0.9797]], [[0.1946]], [[0.1836]], [[0.1925]], [[0.0207]], [[0.2524]]], [[[0.4771]], [[0.7127]], [[0.417]], [[0.8189]], [[0.4178]], [[0.1253]]], [[[0.0426]], [[0.5632]], [[0.7438]], [[0.8811]], [[0.1393]], [[0.1057]]], [[[0.2128]], [[0.2384]], [[0.8935]], [[0.7966]], [[0.5927]], [[0.1232]]], [[[0.2323]], [[0.8315]], [[0.4863]], [[0.9669]], [[0.7829]], [[0.6945]]], [[[0.7449]], [[0.7138]], [[0.3819]], [[0.458]], [[0.4296]], [[0.1253]]], [[[0.7362]], [[0.0401]], [[0.7643]], [[0.964]], [[0.8408]], [[0.1243]]], [[[0.2909]], [[0.6379]], [[0.541]], [[0.0773]], [[0.4856]], [[0.4087]]], [[[0.1897]], [[0.8696]], [[0.424]], [[0.3225]], [[0.6933]], [[0.6949]]], [[[0.6928]], [[0.6099]], [[0.3693]], [[0.7176]], [[0.6377]], [[0.4189]]]],[0], 16, 16, true, Dep18565), 
exec_layers([LLea79888,LZer24286,LCon537,LMin58907,LRes38433,LUp_90427,LRes37006,LRes78963,LUp_98701,LRes55759,LRes34950,LRes89766,LDep18565],["Lea79888","Zer24286","Con537","Min58907","Res38433","Up_90427","Res37006","Res78963","Up_98701","Res55759","Res34950","Res89766","Dep18565"],Dep18565,"Dep18565")

Actual (Unparsed): [[[[0.0000000]], [[0.0000000]], [[0.0000000]]]]

Expected (Unparsed): [[[[0.0]],[[0.0]],[[0.0]]]]

Actual:   [[[[0]], [[0]], [[0]]]]

Expected: [[[[0]], [[0]], [[0]]]]