import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas73284 = tf.keras.layers.Input(shape=([3, 4]))
in0Mul99901 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul99901 = tf.keras.layers.Input(shape=([2, 1]))
in0Con82632 = tf.keras.layers.Input(shape=([3, 3]))

Mas73284 = keras.layers.Masking(mask_value=2, name = 'Mas73284', )(in0Mas73284)
Mul99901 = keras.layers.Multiply(name = 'Mul99901', )([in0Mul99901,in1Mul99901])
Zer40908 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer40908', )(Mul99901)
Con82632 = keras.layers.Concatenate(axis=2, name = 'Con82632', )([Zer40908,in0Con82632])
Mul19655 = keras.layers.Multiply(name = 'Mul19655', )([Mas73284,Con82632])
model = tf.keras.models.Model(inputs=[in0Mas73284,in0Mul99901,in1Mul99901,in0Con82632], outputs=Mul19655)
in0Mas73284 = tf.constant([[[1.8451, 1.5406, 1.845, 1.7504], [1.1722, 1.9209, 1.6896, 1.0556], [1.0435, 1.4308, 1.4752, 1.4692]]])
in0Mul99901 = tf.constant([[[0.7545], [0.4056]]])
in1Mul99901 = tf.constant([[[0.2965], [0.7723]]])
in0Con82632 = tf.constant([[[0.3992, 0.748, 0.1985], [0.5585, 0.9498, 0.7266], [0.4893, 0.2086, 0.3284]]])
print (np.array2string(model.predict([in0Mas73284,in0Mul99901,in1Mul99901,in0Con82632],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul19655.png')

LMas73284 = masking_layer([[[1.8451, 1.5406, 1.845, 1.7504], [1.1722, 1.9209, 1.6896, 1.0556], [1.0435, 1.4308, 1.4752, 1.4692]]], 2, Mas73284), 
LMul99901 = multiply_layer([[[[0.7545], [0.4056]]], [[[0.2965], [0.7723]]]], Mul99901), 
LZer40908 = zero_padding1D_layer(Mul99901, 1, 0, Zer40908), 
LCon82632 = concatenate_layer([Zer40908,[[[0.3992, 0.748, 0.1985], [0.5585, 0.9498, 0.7266], [0.4893, 0.2086, 0.3284]]]], 2, Con82632), 
LMul19655 = multiply_layer([Mas73284,Con82632], Mul19655), 
exec_layers([LMas73284,LMul99901,LZer40908,LCon82632,LMul19655],["Mas73284","Mul99901","Zer40908","Con82632","Mul19655"],Mul19655,"Mul19655")

Actual (Unparsed): [[[0.0000000, 0.6150075, 1.3800601, 0.3474544], [0.2622320, 1.0728226, 1.6047821, 0.7669990], [0.3268710, 0.7000904, 0.3077267, 0.4824853]]]

Expected (Unparsed): [[[0.0,0.61500752,1.38006,0.3474544],[0.26223198284999993,1.07282265,1.6047820799999999,0.7669989600000001],[0.32687103228000003,0.7000904400000001,0.30772672,0.48248528000000007]]]

Actual:   [[[0, 0.6151, 1.3801, 0.3475], [0.2623, 1.0729, 1.6048, 0.767], [0.3269, 0.7001, 0.3078, 0.4825]]]

Expected: [[[0, 0.6151, 1.3801, 0.3475], [0.2623, 1.0729, 1.6048, 0.767], [0.3269, 0.7001, 0.3078, 0.4825]]]