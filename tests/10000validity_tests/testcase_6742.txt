import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add4827 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add4827 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Con56052 = tf.keras.layers.Input(shape=([2, 2, 4]))
in0Zer48094 = tf.keras.layers.Input(shape=([2, 4]))
in0Con31036 = tf.keras.layers.Input(shape=([4, 4, 3, 1]))
in0Sub92500 = tf.keras.layers.Input(shape=([3, 2, 2, 2]))
in1Sub92500 = tf.keras.layers.Input(shape=([3, 2, 2, 2]))
in0Mul21402 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul21402 = tf.keras.layers.Input(shape=([1, 2]))
in0Con9853 = tf.keras.layers.Input(shape=([2, 10, 3]))

Add4827 = keras.layers.Add(name = 'Add4827', )([in0Add4827,in1Add4827])
Res382 = keras.layers.Reshape((2, 2, 2), name = 'Res382', )(Add4827)
Con56052 = keras.layers.Concatenate(axis=3, name = 'Con56052', )([Res382,in0Con56052])
Zer48094 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer48094', )(in0Zer48094)
Res31407 = keras.layers.Reshape((4, 4, 1), name = 'Res31407', )(Zer48094)
Res34834 = keras.layers.Reshape((4, 4, 1, 1), name = 'Res34834', )(Res31407)
Zer70093 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer70093', )(Res34834)
Con31036 = keras.layers.Concatenate(axis=4, name = 'Con31036', )([Zer70093,in0Con31036])
Sub92500 = keras.layers.Subtract(name = 'Sub92500', )([in0Sub92500,in1Sub92500])
Zer32567 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (1, 0)), name = 'Zer32567', )(Sub92500)
Sub35095 = keras.layers.Subtract(name = 'Sub35095', )([Con31036,Zer32567])
Res99894 = keras.layers.Reshape((4, 4, 6), name = 'Res99894', )(Sub35095)
Ave46707 = keras.layers.AveragePooling2D(pool_size=(3, 3), name = 'Ave46707', )(Res99894)
Zer10801 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer10801', )(Ave46707)
Max21283 = keras.layers.Maximum(name = 'Max21283', )([Con56052,Zer10801])
Zer31834 = keras.layers.ZeroPadding2D(padding=((0, 0), (8, 0)), name = 'Zer31834', )(Max21283)
Mul21402 = keras.layers.Multiply(name = 'Mul21402', )([in0Mul21402,in1Mul21402])
Res81707 = keras.layers.Reshape((1, 2, 1), name = 'Res81707', )(Mul21402)
Res40525 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res40525', )(Res81707)
Con13513 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con13513', )(Res40525)
Res38153 = keras.layers.Reshape((1, 2, 3), name = 'Res38153', )(Con13513)
Res55017 = keras.layers.Reshape((1, 6), name = 'Res55017', )(Res38153)
Up_4965 = keras.layers.UpSampling1D(size=(1), name = 'Up_4965', )(Res55017)
Res95424 = keras.layers.Reshape((1, 6, 1), name = 'Res95424', )(Up_4965)
Con58496 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='same', name = 'Con58496', )(Res95424)
Zer92909 = keras.layers.ZeroPadding2D(padding=((1, 0), (4, 0)), name = 'Zer92909', )(Con58496)
Con9853 = keras.layers.Concatenate(axis=3, name = 'Con9853', )([Zer92909,in0Con9853])
Min66905 = keras.layers.Minimum(name = 'Min66905', )([Zer31834,Con9853])
model = tf.keras.models.Model(inputs=[in0Add4827,in1Add4827,in0Con56052,in0Zer48094,in0Con31036,in0Sub92500,in1Sub92500,in0Mul21402,in1Mul21402,in0Con9853], outputs=Min66905)
w = model.get_layer('Con13513').get_weights() 
w[0] = np.array([[[[[0.763], [0.7964], [0.5016]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con13513').set_weights(w) 
w = model.get_layer('Con58496').get_weights() 
w[0] = np.array([[[[0.8183], [0.9947], [0.2532]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con58496').set_weights(w) 
in0Add4827 = tf.constant([[[[[0.7495], [0.9673]], [[0.6788], [0.2303]]], [[[0.1718], [0.5901]], [[0.7798], [0.93]]]]])
in1Add4827 = tf.constant([[[[[0.321], [0.5888]], [[0.5538], [0.1812]]], [[[0.9123], [0.6349]], [[0.5995], [0.6255]]]]])
in0Con56052 = tf.constant([[[[0.1883, 0.8094, 0.8597, 0.6065], [0.6867, 0.4807, 0.7112, 0.283]], [[0.3211, 0.9952, 0.4128, 0.4172], [0.3572, 0.6256, 0.2428, 0.4466]]]])
in0Zer48094 = tf.constant([[[1.6121, 1.9815, 1.1427, 1.0027], [1.001, 1.5347, 1.61, 1.851]]])
in0Con31036 = tf.constant([[[[[0.2647], [0.5348], [0.9671]], [[0.0655], [0.1008], [0.6851]], [[0.9316], [0.7913], [0.7884]], [[0.4093], [0.8644], [0.5293]]], [[[0.7645], [0.4815], [0.1796]], [[0.7361], [0.6205], [0.9438]], [[0.4391], [0.5964], [0.099]], [[0.2116], [0.6248], [0.4872]]], [[[0.4731], [0.9222], [0.4162]], [[0.1584], [0.9375], [0.9218]], [[0.7031], [0.2851], [0.8184]], [[0.843], [0.318], [0.8065]]], [[[0.9911], [0.443], [0.6342]], [[0.3873], [0.8856], [0.2427]], [[0.2429], [0.4142], [0.8522]], [[0.0369], [0.3964], [0.1668]]]]])
in0Sub92500 = tf.constant([[[[[0.0309, 0.239], [0.7745, 0.7409]], [[0.6668, 0.8537], [0.2045, 0.523]]], [[[0.9908, 0.322], [0.473, 0.9593]], [[0.1639, 0.8437], [0.3433, 0.2831]]], [[[0.29, 0.4481], [0.9381, 0.6837]], [[0.409, 0.3359], [0.7191, 0.4512]]]]])
in1Sub92500 = tf.constant([[[[[0.5546, 0.5091], [0.958, 0.5294]], [[0.0594, 0.2386], [0.2617, 0.5247]]], [[[0.0611, 0.7363], [0.6321, 0.7988]], [[0.4713, 0.9888], [0.4853, 0.1315]]], [[[0.5043, 0.0885], [0.0324, 0.5816]], [[0.2318, 0.5561], [0.4343, 0.5995]]]]])
in0Mul21402 = tf.constant([[[0.5284, 0.0831]]])
in1Mul21402 = tf.constant([[[0.1827, 0.1448]]])
in0Con9853 = tf.constant([[[[0.342, 0.746, 0.183], [0.5743, 0.7408, 0.6861], [0.0867, 0.2397, 0.453], [0.4516, 0.4023, 0.7404], [0.628, 0.6838, 0.3893], [0.9323, 0.3476, 0.9053], [0.9256, 0.3307, 0.4195], [0.9004, 0.4484, 0.3685], [0.9866, 0.8952, 0.0982], [0.8654, 0.5375, 0.5158]], [[0.9171, 0.6741, 0.0338], [0.6411, 0.9072, 0.5578], [0.9059, 0.5595, 0.1222], [0.1041, 0.61, 0.289], [0.7334, 0.8789, 0.289], [0.5284, 0.1901, 0.0883], [0.8361, 0.4678, 0.1764], [0.7288, 0.3168, 0.6065], [0.0543, 0.5798, 0.2776], [0.8029, 0.8819, 0.4208]]]])
print (np.array2string(model.predict([in0Add4827,in1Add4827,in0Con56052,in0Zer48094,in0Con31036,in0Sub92500,in1Sub92500,in0Mul21402,in1Mul21402,in0Con9853],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min66905.png')

LAdd4827 = add_layer([[[[[[0.7495], [0.9673]], [[0.6788], [0.2303]]], [[[0.1718], [0.5901]], [[0.7798], [0.93]]]]], [[[[[0.321], [0.5888]], [[0.5538], [0.1812]]], [[[0.9123], [0.6349]], [[0.5995], [0.6255]]]]]], Add4827), 
LRes382 = reshape_layer(Add4827, [2, 2, 2], Res382), 
LCon56052 = concatenate_layer([Res382,[[[[0.1883, 0.8094, 0.8597, 0.6065], [0.6867, 0.4807, 0.7112, 0.283]], [[0.3211, 0.9952, 0.4128, 0.4172], [0.3572, 0.6256, 0.2428, 0.4466]]]]], 3, Con56052), 
LZer48094 = zero_padding1D_layer([[[1.6121, 1.9815, 1.1427, 1.0027], [1.001, 1.5347, 1.61, 1.851]]], 1, 1, Zer48094), 
LRes31407 = reshape_layer(Zer48094, [4, 4, 1], Res31407), 
LRes34834 = reshape_layer(Res31407, [4, 4, 1, 1], Res34834), 
LZer70093 = zero_padding3D_layer(Res34834, 0, 0, 0, 0, 2, 0, Zer70093), 
LCon31036 = concatenate_layer([Zer70093,[[[[[0.2647], [0.5348], [0.9671]], [[0.0655], [0.1008], [0.6851]], [[0.9316], [0.7913], [0.7884]], [[0.4093], [0.8644], [0.5293]]], [[[0.7645], [0.4815], [0.1796]], [[0.7361], [0.6205], [0.9438]], [[0.4391], [0.5964], [0.099]], [[0.2116], [0.6248], [0.4872]]], [[[0.4731], [0.9222], [0.4162]], [[0.1584], [0.9375], [0.9218]], [[0.7031], [0.2851], [0.8184]], [[0.843], [0.318], [0.8065]]], [[[0.9911], [0.443], [0.6342]], [[0.3873], [0.8856], [0.2427]], [[0.2429], [0.4142], [0.8522]], [[0.0369], [0.3964], [0.1668]]]]]], 4, Con31036), 
LSub92500 = subtract_layer([[[[[0.0309, 0.239], [0.7745, 0.7409]], [[0.6668, 0.8537], [0.2045, 0.523]]], [[[0.9908, 0.322], [0.473, 0.9593]], [[0.1639, 0.8437], [0.3433, 0.2831]]], [[[0.29, 0.4481], [0.9381, 0.6837]], [[0.409, 0.3359], [0.7191, 0.4512]]]]], [[[[[0.5546, 0.5091], [0.958, 0.5294]], [[0.0594, 0.2386], [0.2617, 0.5247]]], [[[0.0611, 0.7363], [0.6321, 0.7988]], [[0.4713, 0.9888], [0.4853, 0.1315]]], [[[0.5043, 0.0885], [0.0324, 0.5816]], [[0.2318, 0.5561], [0.4343, 0.5995]]]]], Sub92500), 
LZer32567 = zero_padding3D_layer(Sub92500, 1, 0, 2, 0, 1, 0, Zer32567), 
LSub35095 = subtract_layer(Con31036,Zer32567, Sub35095), 
LRes99894 = reshape_layer(Sub35095, [4, 4, 6], Res99894), 
LAve46707 = average_pooling2D_layer(Res99894, 3, 3, Ave46707), 
LZer10801 = zero_padding2D_layer(Ave46707, 1, 0, 1, 0, Zer10801), 
LMax21283 = maximum_layer([Con56052,Zer10801], Max21283), 
LZer31834 = zero_padding2D_layer(Max21283, 0, 0, 8, 0, Zer31834), 
LMul21402 = multiply_layer([[[[0.5284, 0.0831]]], [[[0.1827, 0.1448]]]], Mul21402), 
LRes81707 = reshape_layer(Mul21402, [1, 2, 1], Res81707), 
LRes40525 = reshape_layer(Res81707, [1, 2, 1, 1], Res40525), 
LCon13513 = conv3D_transpose_layer(Res40525, 1, 1, 1,[[[[[0.763], [0.7964], [0.5016]]]]],[0, 0, 0], 1, 1, 1, false, Con13513), 
LRes38153 = reshape_layer(Con13513, [1, 2, 3], Res38153), 
LRes55017 = reshape_layer(Res38153, [1, 6], Res55017), 
LUp_4965 = up_sampling1D_layer(Res55017, 1, Up_4965), 
LRes95424 = reshape_layer(Up_4965, [1, 6, 1], Res95424), 
LCon58496 = conv2D_transpose_layer(Res95424, 1, 1,[[[[0.8183], [0.9947], [0.2532]]]],[0, 0, 0], 1, 1, true, Con58496), 
LZer92909 = zero_padding2D_layer(Con58496, 1, 0, 4, 0, Zer92909), 
LCon9853 = concatenate_layer([Zer92909,[[[[0.342, 0.746, 0.183], [0.5743, 0.7408, 0.6861], [0.0867, 0.2397, 0.453], [0.4516, 0.4023, 0.7404], [0.628, 0.6838, 0.3893], [0.9323, 0.3476, 0.9053], [0.9256, 0.3307, 0.4195], [0.9004, 0.4484, 0.3685], [0.9866, 0.8952, 0.0982], [0.8654, 0.5375, 0.5158]], [[0.9171, 0.6741, 0.0338], [0.6411, 0.9072, 0.5578], [0.9059, 0.5595, 0.1222], [0.1041, 0.61, 0.289], [0.7334, 0.8789, 0.289], [0.5284, 0.1901, 0.0883], [0.8361, 0.4678, 0.1764], [0.7288, 0.3168, 0.6065], [0.0543, 0.5798, 0.2776], [0.8029, 0.8819, 0.4208]]]]], 3, Con9853), 
LMin66905 = minimum_layer([Zer31834,Con9853], Min66905), 
exec_layers([LAdd4827,LRes382,LCon56052,LZer48094,LRes31407,LRes34834,LZer70093,LCon31036,LSub92500,LZer32567,LSub35095,LRes99894,LAve46707,LZer10801,LMax21283,LZer31834,LMul21402,LRes81707,LRes40525,LCon13513,LRes38153,LRes55017,LUp_4965,LRes95424,LCon58496,LZer92909,LCon9853,LMin66905],["Add4827","Res382","Con56052","Zer48094","Res31407","Res34834","Zer70093","Con31036","Sub92500","Zer32567","Sub35095","Res99894","Ave46707","Zer10801","Max21283","Zer31834","Mul21402","Res81707","Res40525","Con13513","Res38153","Res55017","Up_4965","Res95424","Con58496","Zer92909","Con9853","Min66905"],Min66905,"Min66905")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.8094000, 0.8597000, 0.0982000], [0.0000000, 0.0000000, 0.0000000, 0.4807000, 0.5375000, 0.2830000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0078418, 0.0095322, 0.0024264, 0.0543000, 0.4128000, 0.2776000], [0.0049390, 0.0060037, 0.0015282, 0.6616111, 0.8819000, 0.4208000]]]]

Expected (Unparsed): [[[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0.8094,0.8597,0.0982],[0,0,0,0.4807,0.5375,0.283]],[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0.0078417571426656,0.0095321958081504,0.0024264119620223995,0.0543,0.4128,0.2776],[0.0049390072611264,0.0060037034371776,0.0015282373683456,0.661611111111111,0.8819,0.4208]]]]

Actual:   [[[[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0.8094, 0.8597, 0.0982], [0, 0, 0, 0.4807, 0.5375, 0.283]], [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0.0079, 0.0096, 0.0025, 0.0543, 0.4128, 0.2776], [0.005, 0.0061, 0.0016, 0.6617, 0.8819, 0.4208]]]]

Expected: [[[[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0.8094, 0.8597, 0.0982], [0, 0, 0, 0.4807, 0.5375, 0.283]], [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0.0079, 0.0096, 0.0025, 0.0543, 0.4128, 0.2776], [0.005, 0.0061, 0.0016, 0.6617, 0.8819, 0.4208]]]]