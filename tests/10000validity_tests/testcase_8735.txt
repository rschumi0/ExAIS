import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot34891 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot34891 = tf.keras.layers.Input(shape=([3, 3]))

Dot34891 = keras.layers.Dot(axes=(2, 1), name = 'Dot34891', )([in0Dot34891,in1Dot34891])
Sep20825 = keras.layers.SeparableConv1D(3, (3),strides=(1), padding='same', name = 'Sep20825', )(Dot34891)
model = tf.keras.models.Model(inputs=[in0Dot34891,in1Dot34891], outputs=Sep20825)
w = model.get_layer('Sep20825').get_weights() 
w[0] = np.array([[[0.1675], [0.7484], [0.1158]], [[0.935], [0.8646], [0.676]], [[0.6448], [0.6867], [0.4328]]])
w[1] = np.array([[[0.4797, 0.2645, 0.438], [0.0281, 0.2714, 0.741], [0.7981, 0.0172, 0.1962]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep20825').set_weights(w) 
in0Dot34891 = tf.constant([[[0.5753, 0.8297, 0.2547], [0.6116, 0.9678, 0.8463], [0.9037, 0.4458, 0.4788]]])
in1Dot34891 = tf.constant([[[0.148, 0.1975, 0.3265], [0.9548, 0.2409, 0.9028], [0.441, 0.5362, 0.1323]]])
print (np.array2string(model.predict([in0Dot34891,in1Dot34891],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep20825.png')

LDot34891 = dot_layer([[[0.5753, 0.8297, 0.2547], [0.6116, 0.9678, 0.8463], [0.9037, 0.4458, 0.4788]]], [[[0.148, 0.1975, 0.3265], [0.9548, 0.2409, 0.9028], [0.441, 0.5362, 0.1323]]], 2, 1, Dot34891), 
LSep20825 = separable_conv1D_layer(Dot34891, 3,[[[[0.1675], [0.7484], [0.1158]], [[0.935], [0.8646], [0.676]], [[0.6448], [0.6867], [0.4328]]],[[[0.4797, 0.2645, 0.438], [0.0281, 0.2714, 0.741], [0.7981, 0.0172, 0.1962]]]],[0, 0, 0], 1, true, Sep20825), 
exec_layers([LDot34891,LSep20825],["Dot34891","Sep20825"],Sep20825,"Sep20825")

Actual (Unparsed): [[[1.8327608, 0.7576923, 1.7259753], [1.9719206, 0.9219284, 2.1456231], [1.0073388, 0.5546391, 1.3407888]]]

Expected (Unparsed): [[[1.8327607655905138,0.7576923126712981,1.7259752465604408],[1.9719205438014382,0.9219283598348968,2.145623041527243],[1.0073387948171095,0.5546391115011399,1.3407887934334366]]]

Actual:   [[[1.8328, 0.7577, 1.726], [1.972, 0.922, 2.1457], [1.0074, 0.5547, 1.3408]]]

Expected: [[[1.8328, 0.7577, 1.726], [1.972, 0.922, 2.1457], [1.0074, 0.5547, 1.3408]]]