import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave9993 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Ave9993 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Ave9993 = keras.layers.Average(name = 'Ave9993', )([in0Ave9993,in1Ave9993])
Res59539 = keras.layers.Reshape((2, 2, 1), name = 'Res59539', )(Ave9993)
Res8109 = keras.layers.Reshape((2, 2), name = 'Res8109', )(Res59539)
Glo39179 = keras.layers.GlobalAveragePooling1D(name = 'Glo39179', )(Res8109)
Lay45067 = keras.layers.LayerNormalization(axis=1, epsilon=2.634494268848875, name = 'Lay45067', )(Glo39179)
ELU29727 = keras.layers.ELU(alpha=-5.485631466121552, name = 'ELU29727', )(Lay45067)
model = tf.keras.models.Model(inputs=[in0Ave9993,in1Ave9993], outputs=ELU29727)
in0Ave9993 = tf.constant([[[[[0.6906]], [[0.9058]]], [[[0.986]], [[0.4765]]]]])
in1Ave9993 = tf.constant([[[[[0.9878]], [[0.7324]]], [[[0.4701]], [[0.2991]]]]])
print (np.array2string(model.predict([in0Ave9993,in1Ave9993],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ELU29727.png')

LAve9993 = average_layer([[[[[[0.6906]], [[0.9058]]], [[[0.986]], [[0.4765]]]]], [[[[[0.9878]], [[0.7324]]], [[[0.4701]], [[0.2991]]]]]], Ave9993), 
LRes59539 = reshape_layer(Ave9993, [2, 2, 1], Res59539), 
LRes8109 = reshape_layer(Res59539, [2, 2], Res8109), 
LGlo39179 = global_average_pooling1D_layer(Res8109, Glo39179), 
LLay45067 = layer_normalization_layer(Glo39179, 1, 2.634494268848875, Lay45067), 
LELU29727 = elu_layer(Lay45067, -5.485631466121552, ELU29727), 
exec_layers([LAve9993,LRes59539,LRes8109,LGlo39179,LLay45067,LELU29727],["Ave9993","Res59539","Res8109","Glo39179","Lay45067","ELU29727"],ELU29727,"ELU29727")

Actual (Unparsed): [[0.0554176, 0.2957307]]

Expected (Unparsed): [[0.05541763601219261,0.295730698425347]]

Actual:   [[0.0555, 0.2958]]

Expected: [[0.0555, 0.2958]]