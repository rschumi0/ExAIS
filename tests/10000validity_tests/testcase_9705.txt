import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot58025 = tf.keras.layers.Input(shape=([3]))
in1Dot58025 = tf.keras.layers.Input(shape=([3]))
in0Mul80213 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul80213 = tf.keras.layers.Input(shape=([2, 1, 1]))

Dot58025 = keras.layers.Dot(axes=(1, 1), name = 'Dot58025', )([in0Dot58025,in1Dot58025])
Res78849 = keras.layers.Reshape((1, 1), name = 'Res78849', )(Dot58025)
Res57615 = keras.layers.Reshape((1, 1, 1), name = 'Res57615', )(Res78849)
Up_27003 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_27003', )(Res57615)
Mul80213 = keras.layers.Multiply(name = 'Mul80213', )([in0Mul80213,in1Mul80213])
Zer34115 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer34115', )(Mul80213)
Mul58719 = keras.layers.Multiply(name = 'Mul58719', )([Up_27003,Zer34115])
model = tf.keras.models.Model(inputs=[in0Dot58025,in1Dot58025,in0Mul80213,in1Mul80213], outputs=Mul58719)
in0Dot58025 = tf.constant([[0.9356, 0.0904, 0.8674]])
in1Dot58025 = tf.constant([[0.1071, 0.4943, 0.9722]])
in0Mul80213 = tf.constant([[[[0.0565]], [[0.0468]]]])
in1Mul80213 = tf.constant([[[[0.2892]], [[0.7629]]]])
print (np.array2string(model.predict([in0Dot58025,in1Dot58025,in0Mul80213,in1Mul80213],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul58719.png')

LDot58025 = dot_layer([[0.9356, 0.0904, 0.8674]], [[0.1071, 0.4943, 0.9722]], 1, 1, Dot58025), 
LRes78849 = reshape_layer(Dot58025, [1, 1], Res78849), 
LRes57615 = reshape_layer(Res78849, [1, 1, 1], Res57615), 
LUp_27003 = up_sampling2D_layer(Res57615, 2, 2, Up_27003), 
LMul80213 = multiply_layer([[[[[0.0565]], [[0.0468]]]], [[[[0.2892]], [[0.7629]]]]], Mul80213), 
LZer34115 = zero_padding2D_layer(Mul80213, 0, 0, 1, 0, Zer34115), 
LMul58719 = multiply_layer([Up_27003,Zer34115], Mul58719), 
exec_layers([LDot58025,LRes78849,LRes57615,LUp_27003,LMul80213,LZer34115,LMul58719],["Dot58025","Res78849","Res57615","Up_27003","Mul80213","Zer34115","Mul58719"],Mul58719,"Mul58719")

Actual (Unparsed): [[[[0.0000000], [0.0161466]], [[0.0000000], [0.0352815]]]]

Expected (Unparsed): [[[[0.0],[0.016146561603648003]],[[0.0],[0.0352814792383872]]]]

Actual:   [[[[0], [0.0162]], [[0], [0.0353]]]]

Expected: [[[[0], [0.0162]], [[0], [0.0353]]]]