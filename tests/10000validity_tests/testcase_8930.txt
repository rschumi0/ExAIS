import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sof81169 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Sof81169 = keras.layers.Softmax(axis=1, name = 'Sof81169', input_shape=(1, 2, 1, 1))(in0Sof81169)
Mas90495 = keras.layers.Masking(mask_value=2, name = 'Mas90495', )(Sof81169)
Res42686 = keras.layers.Reshape((1, 2, 1), name = 'Res42686', )(Mas90495)
Glo60787 = keras.layers.GlobalMaxPool2D(name = 'Glo60787', )(Res42686)
Res47323 = keras.layers.Reshape((1, 1), name = 'Res47323', )(Glo60787)
Res907 = keras.layers.Reshape((1, 1, 1), name = 'Res907', )(Res47323)
Con11464 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='same', name = 'Con11464', )(Res907)
model = tf.keras.models.Model(inputs=[in0Sof81169], outputs=Con11464)
w = model.get_layer('Con11464').get_weights() 
w[0] = np.array([[[[0.521], [0.4165], [0.9757]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con11464').set_weights(w) 
in0Sof81169 = tf.constant([[[[[0.855]], [[0.0803]]]]])
print (np.array2string(model.predict([in0Sof81169],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con11464.png')

LSof81169 = softmax_layer([[[[[0.855]], [[0.0803]]]]], 1, Sof81169), 
LMas90495 = masking_layer(Sof81169, 2, Mas90495), 
LRes42686 = reshape_layer(Mas90495, [1, 2, 1], Res42686), 
LGlo60787 = global_max_pool2D_layer(Res42686, Glo60787), 
LRes47323 = reshape_layer(Glo60787, [1, 1], Res47323), 
LRes907 = reshape_layer(Res47323, [1, 1, 1], Res907), 
LCon11464 = conv2D_transpose_layer(Res907, 1, 1,[[[[0.521], [0.4165], [0.9757]]]],[0, 0, 0], 1, 1, true, Con11464), 
exec_layers([LSof81169,LMas90495,LRes42686,LGlo60787,LRes47323,LRes907,LCon11464],["Sof81169","Mas90495","Res42686","Glo60787","Res47323","Res907","Con11464"],Con11464,"Con11464")

Actual (Unparsed): [[[[0.5210000, 0.4165000, 0.9757000]]]]

Expected (Unparsed): [[[[0.521,0.4165,0.9757]]]]

Actual:   [[[[0.521, 0.4165, 0.9757]]]]

Expected: [[[[0.521, 0.4165, 0.9757]]]]