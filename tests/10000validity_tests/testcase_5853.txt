import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo17919 = tf.keras.layers.Input(shape=([2, 1]))
in0Con41810 = tf.keras.layers.Input(shape=([6, 5]))
in0Min94859 = tf.keras.layers.Input(shape=([1, 2]))
in1Min94859 = tf.keras.layers.Input(shape=([1, 2]))
in0Con11386 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave20940 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave20940 = tf.keras.layers.Input(shape=([1, 2, 2]))

Glo17919 = keras.layers.GlobalAveragePooling1D(name = 'Glo17919', )(in0Glo17919)
Res45172 = keras.layers.Reshape((1, 1), name = 'Res45172', )(Glo17919)
Zer2114 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer2114', )(Res45172)
Con41810 = keras.layers.Concatenate(axis=2, name = 'Con41810', )([Zer2114,in0Con41810])
Min94859 = keras.layers.Minimum(name = 'Min94859', )([in0Min94859,in1Min94859])
Res83266 = keras.layers.Reshape((1, 2, 1), name = 'Res83266', )(Min94859)
Con11386 = keras.layers.Concatenate(axis=3, name = 'Con11386', )([Res83266,in0Con11386])
Ave20940 = keras.layers.Average(name = 'Ave20940', )([in0Ave20940,in1Ave20940])
Add44699 = keras.layers.Add(name = 'Add44699', )([Con11386,Ave20940])
Lea54524 = keras.layers.LeakyReLU(alpha=8.074693297035095, name = 'Lea54524', )(Add44699)
Sep12399 = keras.layers.SeparableConv2D(3, (2, 1),strides=(1, 1), padding='same', name = 'Sep12399', )(Lea54524)
Res78606 = keras.layers.Reshape((1, 6), name = 'Res78606', )(Sep12399)
Dot790 = keras.layers.Dot(axes=(2, 2), name = 'Dot790', )([Con41810,Res78606])
model = tf.keras.models.Model(inputs=[in0Glo17919,in0Con41810,in0Min94859,in1Min94859,in0Con11386,in0Ave20940,in1Ave20940], outputs=Dot790)
w = model.get_layer('Sep12399').get_weights() 
w[0] = np.array([[[[0.2035], [0.5802]]], [[[0.8568], [0.6837]]]])
w[1] = np.array([[[[0.6598, 0.192, 0.3989], [0.1697, 0.4468, 0.5785]]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep12399').set_weights(w) 
in0Glo17919 = tf.constant([[[1.9463], [1.0296]]])
in0Con41810 = tf.constant([[[0.7751, 0.8985, 0.4908, 0.5796, 0.3157], [0.788, 0.8028, 0.9595, 0.5062, 0.6327], [0.9925, 0.8092, 0.1827, 0.7415, 0.2847], [0.2571, 0.5707, 0.2284, 0.2558, 0.5239], [0.2254, 0.5955, 0.414, 0.3522, 0.1495], [0.6567, 0.7159, 0.4059, 0.0612, 0.892]]])
in0Min94859 = tf.constant([[[0.7943, 0.621]]])
in1Min94859 = tf.constant([[[0.6027, 0.1048]]])
in0Con11386 = tf.constant([[[[0.0004], [0.2192]]]])
in0Ave20940 = tf.constant([[[[0.9859, 0.0344], [0.5858, 0.0941]]]])
in1Ave20940 = tf.constant([[[[0.2147, 0.5504], [0.3907, 0.9102]]]])
print (np.array2string(model.predict([in0Glo17919,in0Con41810,in0Min94859,in1Min94859,in0Con11386,in0Ave20940,in1Ave20940],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot790.png')

LGlo17919 = global_average_pooling1D_layer([[[1.9463], [1.0296]]], Glo17919), 
LRes45172 = reshape_layer(Glo17919, [1, 1], Res45172), 
LZer2114 = zero_padding1D_layer(Res45172, 5, 0, Zer2114), 
LCon41810 = concatenate_layer([Zer2114,[[[0.7751, 0.8985, 0.4908, 0.5796, 0.3157], [0.788, 0.8028, 0.9595, 0.5062, 0.6327], [0.9925, 0.8092, 0.1827, 0.7415, 0.2847], [0.2571, 0.5707, 0.2284, 0.2558, 0.5239], [0.2254, 0.5955, 0.414, 0.3522, 0.1495], [0.6567, 0.7159, 0.4059, 0.0612, 0.892]]]], 2, Con41810), 
LMin94859 = minimum_layer([[[[0.7943, 0.621]]], [[[0.6027, 0.1048]]]], Min94859), 
LRes83266 = reshape_layer(Min94859, [1, 2, 1], Res83266), 
LCon11386 = concatenate_layer([Res83266,[[[[0.0004], [0.2192]]]]], 3, Con11386), 
LAve20940 = average_layer([[[[[0.9859, 0.0344], [0.5858, 0.0941]]]], [[[[0.2147, 0.5504], [0.3907, 0.9102]]]]], Ave20940), 
LAdd44699 = add_layer([Con11386,Ave20940], Add44699), 
LLea54524 = leaky_relu_layer(Add44699, 8.074693297035095, Lea54524), 
LSep12399 = separable_conv2D_layer(Lea54524, 2, 1,[[[[[0.2035], [0.5802]]], [[[0.8568], [0.6837]]]],[[[[0.6598, 0.192, 0.3989], [0.1697, 0.4468, 0.5785]]]]],[0, 0, 0], 1, 1, true, Sep12399), 
LRes78606 = reshape_layer(Sep12399, [1, 6], Res78606), 
LDot790 = dot_layer(Con41810,Res78606, 2, 2, Dot790), 
exec_layers([LGlo17919,LRes45172,LZer2114,LCon41810,LMin94859,LRes83266,LCon11386,LAve20940,LAdd44699,LLea54524,LSep12399,LRes78606,LDot790],["Glo17919","Res45172","Zer2114","Con41810","Min94859","Res83266","Con11386","Ave20940","Add44699","Lea54524","Sep12399","Res78606","Dot790"],Dot790,"Dot790")

Actual (Unparsed): [[[0.5586997], [0.6887312], [0.5465354], [0.3836552], [0.3241664], [0.8371433]]]

Expected (Unparsed): [[[0.5586996988583929],[0.6887311552854299],[0.5465353740244796],[0.383655195539123],[0.3241664337209421],[0.8371433341933208]]]

Actual:   [[[0.5587], [0.6888], [0.5466], [0.3837], [0.3242], [0.8372]]]

Expected: [[[0.5587], [0.6888], [0.5466], [0.3837], [0.3242], [0.8372]]]