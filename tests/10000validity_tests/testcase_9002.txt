import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul5542 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul5542 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Max49261 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max49261 = tf.keras.layers.Input(shape=([2, 2, 2]))

Mul5542 = keras.layers.Multiply(name = 'Mul5542', )([in0Mul5542,in1Mul5542])
Max49261 = keras.layers.Maximum(name = 'Max49261', )([in0Max49261,in1Max49261])
Min97161 = keras.layers.Minimum(name = 'Min97161', )([Mul5542,Max49261])
model = tf.keras.models.Model(inputs=[in0Mul5542,in1Mul5542,in0Max49261,in1Max49261], outputs=Min97161)
in0Mul5542 = tf.constant([[[[0.0234, 0.4111], [0.4096, 0.3623]], [[0.9064, 0.6652], [0.7968, 0.0528]]]])
in1Mul5542 = tf.constant([[[[0.7499, 0.6327], [0.847, 0.9534]], [[0.2624, 0.7266], [0.6199, 0.5319]]]])
in0Max49261 = tf.constant([[[[0.8797, 0.5888], [0.1487, 0.2835]], [[0.2622, 0.9321], [0.6369, 0.7828]]]])
in1Max49261 = tf.constant([[[[0.3618, 0.5113], [0.965, 0.144]], [[0.7977, 0.1039], [0.5949, 0.7763]]]])
print (np.array2string(model.predict([in0Mul5542,in1Mul5542,in0Max49261,in1Max49261],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min97161.png')

LMul5542 = multiply_layer([[[[[0.0234, 0.4111], [0.4096, 0.3623]], [[0.9064, 0.6652], [0.7968, 0.0528]]]], [[[[0.7499, 0.6327], [0.847, 0.9534]], [[0.2624, 0.7266], [0.6199, 0.5319]]]]], Mul5542), 
LMax49261 = maximum_layer([[[[[0.8797, 0.5888], [0.1487, 0.2835]], [[0.2622, 0.9321], [0.6369, 0.7828]]]], [[[[0.3618, 0.5113], [0.965, 0.144]], [[0.7977, 0.1039], [0.5949, 0.7763]]]]], Max49261), 
LMin97161 = minimum_layer([Mul5542,Max49261], Min97161), 
exec_layers([LMul5542,LMax49261,LMin97161],["Mul5542","Max49261","Min97161"],Min97161,"Min97161")

Actual (Unparsed): [[[[0.0175477, 0.2601030], [0.3469312, 0.2835000]], [[0.2378394, 0.4833343], [0.4939363, 0.0280843]]]]

Expected (Unparsed): [[[[0.01754766,0.26010297000000004],[0.3469312,0.2835]],[[0.23783936000000003,0.48333432000000004],[0.49393632,0.028084320000000003]]]]

Actual:   [[[[0.0176, 0.2602], [0.347, 0.2835]], [[0.2379, 0.4834], [0.494, 0.0281]]]]

Expected: [[[[0.0176, 0.2602], [0.347, 0.2835]], [[0.2379, 0.4834], [0.494, 0.0281]]]]