import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min88926 = tf.keras.layers.Input(shape=([1, 2]))
in1Min88926 = tf.keras.layers.Input(shape=([1, 2]))
in0Con71954 = tf.keras.layers.Input(shape=([1]))
in0Add52300 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add52300 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con61789 = tf.keras.layers.Input(shape=([2]))
in0Sub2456 = tf.keras.layers.Input(shape=([3]))
in1Sub2456 = tf.keras.layers.Input(shape=([3]))

Min88926 = keras.layers.Minimum(name = 'Min88926', )([in0Min88926,in1Min88926])
Fla83478 = keras.layers.Flatten(name = 'Fla83478', )(Min88926)
Con71954 = keras.layers.Concatenate(axis=1, name = 'Con71954', )([Fla83478,in0Con71954])
Add52300 = keras.layers.Add(name = 'Add52300', )([in0Add52300,in1Add52300])
Res77348 = keras.layers.Reshape((1, 1), name = 'Res77348', )(Add52300)
Fla25668 = keras.layers.Flatten(name = 'Fla25668', )(Res77348)
Con61789 = keras.layers.Concatenate(axis=1, name = 'Con61789', )([Fla25668,in0Con61789])
Sub2456 = keras.layers.Subtract(name = 'Sub2456', )([in0Sub2456,in1Sub2456])
Mul8192 = keras.layers.Multiply(name = 'Mul8192', )([Con61789,Sub2456])
Min33141 = keras.layers.Minimum(name = 'Min33141', )([Con71954,Mul8192])
Res34556 = keras.layers.Reshape((3, 1), name = 'Res34556', )(Min33141)
Per74739 = keras.layers.Permute((1,2), name = 'Per74739',)(Res34556)
model = tf.keras.models.Model(inputs=[in0Min88926,in1Min88926,in0Con71954,in0Add52300,in1Add52300,in0Con61789,in0Sub2456,in1Sub2456], outputs=Per74739)
in0Min88926 = tf.constant([[[0.9769, 0.7499]]])
in1Min88926 = tf.constant([[[0.7855, 0.3027]]])
in0Con71954 = tf.constant([[0.5217]])
in0Add52300 = tf.constant([[[[0.5711]]]])
in1Add52300 = tf.constant([[[[0.2577]]]])
in0Con61789 = tf.constant([[0.717, 0.9761]])
in0Sub2456 = tf.constant([[0.1802, 0.5769, 0.77]])
in1Sub2456 = tf.constant([[0.2385, 0.6716, 0.2235]])
print (np.array2string(model.predict([in0Min88926,in1Min88926,in0Con71954,in0Add52300,in1Add52300,in0Con61789,in0Sub2456,in1Sub2456],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per74739.png')

LMin88926 = minimum_layer([[[[0.9769, 0.7499]]], [[[0.7855, 0.3027]]]], Min88926), 
LFla83478 = flatten_layer(Min88926, Fla83478), 
LCon71954 = concatenate_layer([Fla83478,[[0.5217]]], 1, Con71954), 
LAdd52300 = add_layer([[[[[0.5711]]]], [[[[0.2577]]]]], Add52300), 
LRes77348 = reshape_layer(Add52300, [1, 1], Res77348), 
LFla25668 = flatten_layer(Res77348, Fla25668), 
LCon61789 = concatenate_layer([Fla25668,[[0.717, 0.9761]]], 1, Con61789), 
LSub2456 = subtract_layer([[0.1802, 0.5769, 0.77]], [[0.2385, 0.6716, 0.2235]], Sub2456), 
LMul8192 = multiply_layer([Con61789,Sub2456], Mul8192), 
LMin33141 = minimum_layer([Con71954,Mul8192], Min33141), 
LRes34556 = reshape_layer(Min33141, [3, 1], Res34556), 
LPer74739 = permute_layer(Res34556, 1,2, Per74739), 
exec_layers([LMin88926,LFla83478,LCon71954,LAdd52300,LRes77348,LFla25668,LCon61789,LSub2456,LMul8192,LMin33141,LRes34556,LPer74739],["Min88926","Fla83478","Con71954","Add52300","Res77348","Fla25668","Con61789","Sub2456","Mul8192","Min33141","Res34556","Per74739"],Per74739,"Per74739")

Actual (Unparsed): [[[-0.0483190], [-0.0678999], [0.5217000]]]

Expected (Unparsed): [[[-0.048319039999999994],[-0.0678999],[0.5217]]]

Actual:   [[[-0.0483], [-0.0678], [0.5217]]]

Expected: [[[-0.0483], [-0.0678], [0.5217]]]