import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave38552 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Ave38552 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Cro67448 = tf.keras.layers.Input(shape=([1, 1]))
in0Con30623 = tf.keras.layers.Input(shape=([1, 3]))
in0Con11862 = tf.keras.layers.Input(shape=([2, 7, 2]))
in0ReL15391 = tf.keras.layers.Input(shape=([2, 2]))

Ave38552 = keras.layers.Average(name = 'Ave38552', )([in0Ave38552,in1Ave38552])
Res6642 = keras.layers.Reshape((1, 2, 2), name = 'Res6642', )(Ave38552)
Res96091 = keras.layers.Reshape((1, 4), name = 'Res96091', )(Res6642)
Cro67448 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro67448', )(in0Cro67448)
Con30623 = keras.layers.Concatenate(axis=2, name = 'Con30623', )([Cro67448,in0Con30623])
Max5832 = keras.layers.Maximum(name = 'Max5832', )([Res96091,Con30623])
Res39706 = keras.layers.Reshape((1, 4, 1), name = 'Res39706', )(Max5832)
Zer40298 = keras.layers.ZeroPadding2D(padding=((1, 0), (3, 0)), name = 'Zer40298', )(Res39706)
Con11862 = keras.layers.Concatenate(axis=3, name = 'Con11862', )([Zer40298,in0Con11862])
ReL15391 = keras.layers.ReLU(max_value=1.197206405357871, negative_slope=4.101627682456541, threshold=6.066898136431977, name = 'ReL15391', input_shape=(2, 2))(in0ReL15391)
Res29493 = keras.layers.Reshape((2, 2, 1), name = 'Res29493', )(ReL15391)
Con89657 = keras.layers.Conv2D(3, (1, 1),strides=(1, 12), padding='valid', dilation_rate=(1, 1), name = 'Con89657', )(Res29493)
Zer11179 = keras.layers.ZeroPadding2D(padding=((0, 0), (6, 0)), name = 'Zer11179', )(Con89657)
Add70503 = keras.layers.Add(name = 'Add70503', )([Con11862,Zer11179])
model = tf.keras.models.Model(inputs=[in0Ave38552,in1Ave38552,in0Cro67448,in0Con30623,in0Con11862,in0ReL15391], outputs=Add70503)
w = model.get_layer('Con89657').get_weights() 
w[0] = np.array([[[[0.503, 0.1349, 0.4646]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con89657').set_weights(w) 
in0Ave38552 = tf.constant([[[[[0.2382], [0.5754]], [[0.9923], [0.3982]]]]])
in1Ave38552 = tf.constant([[[[[0.8144], [0.8469]], [[0.9131], [0.2035]]]]])
in0Cro67448 = tf.constant([[[1.3003]]])
in0Con30623 = tf.constant([[[0.9351, 0.6279, 0.2539]]])
in0Con11862 = tf.constant([[[[0.1681, 0.8338], [0.8673, 0.2977], [0.9648, 0.3357], [0.5654, 0.8861], [0.0427, 0.6804], [0.0064, 0.1483], [0.0073, 0.0325]], [[0.9567, 0.0988], [0.8394, 0.1565], [0.2395, 0.0065], [0.8531, 0.1359], [0.8884, 0.2415], [0.5756, 0.6282], [0.9456, 0.3664]]]])
in0ReL15391 = tf.constant([[[0.1828, 0.4646], [0.7507, 0.109]]])
print (np.array2string(model.predict([in0Ave38552,in1Ave38552,in0Cro67448,in0Con30623,in0Con11862,in0ReL15391],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add70503.png')

LAve38552 = average_layer([[[[[[0.2382], [0.5754]], [[0.9923], [0.3982]]]]], [[[[[0.8144], [0.8469]], [[0.9131], [0.2035]]]]]], Ave38552), 
LRes6642 = reshape_layer(Ave38552, [1, 2, 2], Res6642), 
LRes96091 = reshape_layer(Res6642, [1, 4], Res96091), 
LCro67448 = cropping1D_layer([[[1.3003]]], 0, 0, Cro67448), 
LCon30623 = concatenate_layer([Cro67448,[[[0.9351, 0.6279, 0.2539]]]], 2, Con30623), 
LMax5832 = maximum_layer([Res96091,Con30623], Max5832), 
LRes39706 = reshape_layer(Max5832, [1, 4, 1], Res39706), 
LZer40298 = zero_padding2D_layer(Res39706, 1, 0, 3, 0, Zer40298), 
LCon11862 = concatenate_layer([Zer40298,[[[[0.1681, 0.8338], [0.8673, 0.2977], [0.9648, 0.3357], [0.5654, 0.8861], [0.0427, 0.6804], [0.0064, 0.1483], [0.0073, 0.0325]], [[0.9567, 0.0988], [0.8394, 0.1565], [0.2395, 0.0065], [0.8531, 0.1359], [0.8884, 0.2415], [0.5756, 0.6282], [0.9456, 0.3664]]]]], 3, Con11862), 
LReL15391 = relu_layer([[[0.1828, 0.4646], [0.7507, 0.109]]], 1.197206405357871, 4.101627682456541, 6.066898136431977, ReL15391), 
LRes29493 = reshape_layer(ReL15391, [2, 2, 1], Res29493), 
LCon89657 = conv2D_layer(Res29493, 1, 1,[[[[0.503, 0.1349, 0.4646]]]],[0, 0, 0], 1, 12, false, 1, 1, Con89657), 
LZer11179 = zero_padding2D_layer(Con89657, 0, 0, 6, 0, Zer11179), 
LAdd70503 = add_layer([Con11862,Zer11179], Add70503), 
exec_layers([LAve38552,LRes6642,LRes96091,LCro67448,LCon30623,LMax5832,LRes39706,LZer40298,LCon11862,LReL15391,LRes29493,LCon89657,LZer11179,LAdd70503],["Ave38552","Res6642","Res96091","Cro67448","Con30623","Max5832","Res39706","Zer40298","Con11862","ReL15391","Res29493","Con89657","Zer11179","Add70503"],Add70503,"Add70503")

Actual (Unparsed): [[[[0.0000000, 0.1681000, 0.8338000], [0.0000000, 0.8673000, 0.2977000], [0.0000000, 0.9648000, 0.3357000], [0.0000000, 0.5654000, 0.8861000], [0.0000000, 0.0427000, 0.6804000], [0.0000000, 0.0064000, 0.1483000], [-12.1395931, -3.2484278, -11.1803329]], [[0.0000000, 0.9567000, 0.0988000], [0.0000000, 0.8394000, 0.1565000], [0.0000000, 0.2395000, 0.0065000], [1.3003000, 0.8531000, 0.1359000], [0.9351000, 0.8884000, 0.2415000], [0.9527000, 0.5756000, 0.6282000], [-10.6670979, -1.9959034, -9.7642334]]]]

Expected (Unparsed): [[[[0,0.1681,0.8338],[0,0.8673,0.2977],[0,0.9648,0.3357],[0,0.5654,0.8861],[0,0.0427,0.6804],[0,0.0064,0.1483],[-12.139593040748212,-3.248427835381578,-11.180332856325286]],[[0,0.9567,0.0988],[0,0.8394,0.1565],[0,0.2395,0.0065],[1.3003,0.8531,0.1359],[0.9351,0.8884,0.2415],[0.9527,0.5756,0.6282],[-10.667097917232075,-1.9959033281006102,-9.764233404266447]]]]

Actual:   [[[[0, 0.1681, 0.8338], [0, 0.8673, 0.2977], [0, 0.9648, 0.3357], [0, 0.5654, 0.8861], [0, 0.0427, 0.6804], [0, 0.0064, 0.1483], [-12.1395, -3.2484, -11.1803]], [[0, 0.9567, 0.0988], [0, 0.8394, 0.1565], [0, 0.2395, 0.0065], [1.3003, 0.8531, 0.1359], [0.9351, 0.8884, 0.2415], [0.9527, 0.5756, 0.6282], [-10.667, -1.9959, -9.7642]]]]

Expected: [[[[0, 0.1681, 0.8338], [0, 0.8673, 0.2977], [0, 0.9648, 0.3357], [0, 0.5654, 0.8861], [0, 0.0427, 0.6804], [0, 0.0064, 0.1483], [-12.1395, -3.2484, -11.1803]], [[0, 0.9567, 0.0988], [0, 0.8394, 0.1565], [0, 0.2395, 0.0065], [1.3003, 0.8531, 0.1359], [0.9351, 0.8884, 0.2415], [0.9527, 0.5756, 0.6282], [-10.667, -1.9959, -9.7642]]]]