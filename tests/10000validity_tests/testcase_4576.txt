import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul32994 = tf.keras.layers.Input(shape=([2, 2]))
in1Mul32994 = tf.keras.layers.Input(shape=([2, 2]))
in0Con875 = tf.keras.layers.Input(shape=([1]))
in0Con87843 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Mul32994 = keras.layers.Multiply(name = 'Mul32994', )([in0Mul32994,in1Mul32994])
ReL24442 = keras.layers.ReLU(max_value=7.99074449635044, negative_slope=7.766119901146346, threshold=7.675569203358971, name = 'ReL24442', )(Mul32994)
Res12723 = keras.layers.Reshape((2, 2, 1), name = 'Res12723', )(ReL24442)
Glo27095 = keras.layers.GlobalAveragePooling2D(name = 'Glo27095', )(Res12723)
Con875 = keras.layers.Concatenate(axis=1, name = 'Con875', )([Glo27095,in0Con875])
Con87843 = keras.layers.Conv3D(2, (1, 1, 2),strides=(1, 1, 2), padding='same', dilation_rate=(1, 1, 1), name = 'Con87843', )(in0Con87843)
Res45969 = keras.layers.Reshape((2, 1, 2), name = 'Res45969', )(Con87843)
Res51241 = keras.layers.Reshape((2, 2), name = 'Res51241', )(Res45969)
Glo8501 = keras.layers.GlobalMaxPool1D(name = 'Glo8501', )(Res51241)
Min8099 = keras.layers.Minimum(name = 'Min8099', )([Con875,Glo8501])
model = tf.keras.models.Model(inputs=[in0Mul32994,in1Mul32994,in0Con875,in0Con87843], outputs=Min8099)
w = model.get_layer('Con87843').get_weights() 
w[0] = np.array([[[[[0.3617, 0.7743]], [[0.9713, 0.877]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con87843').set_weights(w) 
in0Mul32994 = tf.constant([[[0.73, 0.7812], [0.2216, 0.3926]]])
in1Mul32994 = tf.constant([[[0.0911, 0.2523], [0.5812, 0.4417]]])
in0Con875 = tf.constant([[0.198]])
in0Con87843 = tf.constant([[[[[0.1148], [0.0788]]], [[[0.0209], [0.6932]]]]])
print (np.array2string(model.predict([in0Mul32994,in1Mul32994,in0Con875,in0Con87843],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min8099.png')

LMul32994 = multiply_layer([[[[0.73, 0.7812], [0.2216, 0.3926]]], [[[0.0911, 0.2523], [0.5812, 0.4417]]]], Mul32994), 
LReL24442 = relu_layer(Mul32994, 7.99074449635044, 7.766119901146346, 7.675569203358971, ReL24442), 
LRes12723 = reshape_layer(ReL24442, [2, 2, 1], Res12723), 
LGlo27095 = global_average_pooling2D_layer(Res12723, Glo27095), 
LCon875 = concatenate_layer([Glo27095,[[0.198]]], 1, Con875), 
LCon87843 = conv3D_layer([[[[[0.1148], [0.0788]]], [[[0.0209], [0.6932]]]]], 1, 1, 2,[[[[[0.3617, 0.7743]], [[0.9713, 0.877]]]]],[0, 0], 1, 1, 2, true, 1, 1, 1, Con87843), 
LRes45969 = reshape_layer(Con87843, [2, 1, 2], Res45969), 
LRes51241 = reshape_layer(Res45969, [2, 2], Res51241), 
LGlo8501 = global_max_pool1D_layer(Res51241, Glo8501), 
LMin8099 = minimum_layer([Con875,Glo8501], Min8099), 
exec_layers([LMul32994,LReL24442,LRes12723,LGlo27095,LCon875,LCon87843,LRes45969,LRes51241,LGlo8501,LMin8099],["Mul32994","ReL24442","Res12723","Glo27095","Con875","Con87843","Res45969","Res51241","Glo8501","Min8099"],Min8099,"Min8099")

Actual (Unparsed): [[-58.5108632, 0.1980000]]

Expected (Unparsed): [[-58.510863181012084,0.198]]

Actual:   [[-58.5108, 0.198]]

Expected: [[-58.5108, 0.198]]