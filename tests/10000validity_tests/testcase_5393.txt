import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub29989 = tf.keras.layers.Input(shape=([3, 3, 2]))
in1Sub29989 = tf.keras.layers.Input(shape=([3, 3, 2]))
in0Dot61998 = tf.keras.layers.Input(shape=([2]))
in1Dot61998 = tf.keras.layers.Input(shape=([2]))
in0Con27447 = tf.keras.layers.Input(shape=([5]))

Sub29989 = keras.layers.Subtract(name = 'Sub29989', )([in0Sub29989,in1Sub29989])
Max80684 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(8, 1), padding='valid', name = 'Max80684', )(Sub29989)
Res87025 = keras.layers.Reshape((1, 6), name = 'Res87025', )(Max80684)
Fla94951 = keras.layers.Flatten(name = 'Fla94951', )(Res87025)
Dot61998 = keras.layers.Dot(axes=(1, 1), name = 'Dot61998', )([in0Dot61998,in1Dot61998])
Con27447 = keras.layers.Concatenate(axis=1, name = 'Con27447', )([Dot61998,in0Con27447])
Sub874 = keras.layers.Subtract(name = 'Sub874', )([Fla94951,Con27447])
model = tf.keras.models.Model(inputs=[in0Sub29989,in1Sub29989,in0Dot61998,in1Dot61998,in0Con27447], outputs=Sub874)
in0Sub29989 = tf.constant([[[[0.1031, 0.1276], [0.0763, 0.968], [0.6319, 0.9005]], [[0.7233, 0.0499], [0.6522, 0.4041], [0.3271, 0.0882]], [[0.7724, 0.8497], [0.8769, 0.4164], [0.3051, 0.1168]]]])
in1Sub29989 = tf.constant([[[[0.4496, 0.8936], [0.5378, 0.0792], [0.8126, 0.1811]], [[0.6244, 0.4556], [0.3676, 0.415], [0.2984, 0.1479]], [[0.225, 0.6534], [0.9775, 0.3701], [0.0715, 0.9531]]]])
in0Dot61998 = tf.constant([[0.4615, 0.733]])
in1Dot61998 = tf.constant([[0.1508, 0.4419]])
in0Con27447 = tf.constant([[0.7609, 0.783, 0.3967, 0.1011, 0.9121]])
print (np.array2string(model.predict([in0Sub29989,in1Sub29989,in0Dot61998,in1Dot61998,in0Con27447],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub874.png')

LSub29989 = subtract_layer([[[[0.1031, 0.1276], [0.0763, 0.968], [0.6319, 0.9005]], [[0.7233, 0.0499], [0.6522, 0.4041], [0.3271, 0.0882]], [[0.7724, 0.8497], [0.8769, 0.4164], [0.3051, 0.1168]]]], [[[[0.4496, 0.8936], [0.5378, 0.0792], [0.8126, 0.1811]], [[0.6244, 0.4556], [0.3676, 0.415], [0.2984, 0.1479]], [[0.225, 0.6534], [0.9775, 0.3701], [0.0715, 0.9531]]]], Sub29989), 
LMax80684 = max_pool2D_layer(Sub29989, 2, 1, 8, 1, false, Max80684), 
LRes87025 = reshape_layer(Max80684, [1, 6], Res87025), 
LFla94951 = flatten_layer(Res87025, Fla94951), 
LDot61998 = dot_layer([[0.4615, 0.733]], [[0.1508, 0.4419]], 1, 1, Dot61998), 
LCon27447 = concatenate_layer([Dot61998,[[0.7609, 0.783, 0.3967, 0.1011, 0.9121]]], 1, Con27447), 
LSub874 = subtract_layer(Fla94951,Con27447, Sub874), 
exec_layers([LSub29989,LMax80684,LRes87025,LFla94951,LDot61998,LCon27447,LSub874],["Sub29989","Max80684","Res87025","Fla94951","Dot61998","Con27447","Sub874"],Sub874,"Sub874")

Actual (Unparsed): [[-0.2946069, -1.1666000, -0.4984000, 0.4921000, -0.0724000, -0.1927000]]

Expected (Unparsed): [[-0.2946068999999999,-1.1666,-0.4984,0.4920999999999999,-0.07239999999999999,-0.1927000000000001]]

Actual:   [[-0.2946, -1.1666, -0.4984, 0.4921, -0.0724, -0.1927]]

Expected: [[-0.2946, -1.1666, -0.4984, 0.4921, -0.0723, -0.1927]]