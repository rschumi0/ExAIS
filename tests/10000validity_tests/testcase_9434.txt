import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo61347 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Glo61347 = keras.layers.GlobalMaxPool3D(name = 'Glo61347', )(in0Glo61347)
Res9291 = keras.layers.Reshape((1, 1), name = 'Res9291', )(Glo61347)
LST62017 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST62017', )(Res9291)
model = tf.keras.models.Model(inputs=[in0Glo61347], outputs=LST62017)
w = model.get_layer('LST62017').get_weights() 
w[0] = np.array([[10, 4, 6, 2, 4, 7, 2, 10, 6, 3, 5, 9]])
w[1] = np.array([[3, 6, 4, 7, 6, 3, 2, 9, 2, 7, 8, 9], [3, 7, 8, 7, 10, 8, 9, 9, 3, 9, 3, 8], [5, 6, 4, 8, 10, 10, 9, 4, 5, 4, 6, 4]])
w[2] = np.array([5, 1, 9, 9, 8, 2, 2, 5, 8, 1, 6, 6])
model.get_layer('LST62017').set_weights(w) 
in0Glo61347 = tf.constant([[[[[1.7179]]], [[[1.1318]]]]])
print (np.array2string(model.predict([in0Glo61347],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST62017.png')

LGlo61347 = global_max_pool3D_layer([[[[[1.7179]]], [[[1.1318]]]]], Glo61347), 
LRes9291 = reshape_layer(Glo61347, [1, 1], Res9291), 
LLST62017 = lstm_layer(Res9291,[[10, 4, 6, 2, 4, 7, 2, 10, 6, 3, 5, 9]],[[3, 6, 4, 7, 6, 3, 2, 9, 2, 7, 8, 9], [3, 7, 8, 7, 10, 8, 9, 9, 3, 9, 3, 8], [5, 6, 4, 8, 10, 10, 9, 4, 5, 4, 6, 4]],[5, 1, 9, 9, 8, 2, 2, 5, 8, 1, 6, 6], LST62017), 
exec_layers([LGlo61347,LRes9291,LLST62017],["Glo61347","Res9291","LST62017"],LST62017,"LST62017")

Actual (Unparsed): [[0.7599628, 0.7614336, 0.7615942]]

Expected (Unparsed): [[0.7599628262422395,0.7614336312550672,0.7615941538612935]]

Actual:   [[0.76, 0.7615, 0.7616]]

Expected: [[0.76, 0.7615, 0.7616]]