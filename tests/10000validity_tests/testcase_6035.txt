import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add88970 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add88970 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Glo11922 = tf.keras.layers.Input(shape=([2, 1, 2]))

Add88970 = keras.layers.Add(name = 'Add88970', )([in0Add88970,in1Add88970])
Sep30720 = keras.layers.SeparableConv2D(2, (1, 1),strides=(2, 2), padding='valid', name = 'Sep30720', )(Add88970)
Fla22493 = keras.layers.Flatten(name = 'Fla22493', )(Sep30720)
Glo11922 = keras.layers.GlobalAveragePooling2D(name = 'Glo11922', )(in0Glo11922)
Lay9945 = keras.layers.LayerNormalization(axis=1, epsilon=2.6957196924342113, name = 'Lay9945', )(Glo11922)
Sub11887 = keras.layers.Subtract(name = 'Sub11887', )([Fla22493,Lay9945])
model = tf.keras.models.Model(inputs=[in0Add88970,in1Add88970,in0Glo11922], outputs=Sub11887)
w = model.get_layer('Sep30720').get_weights() 
w[0] = np.array([[[[0.2365], [0.7131]]]])
w[1] = np.array([[[[0.7469, 0.3634], [0.5532, 0.1981]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep30720').set_weights(w) 
in0Add88970 = tf.constant([[[[0.7503, 0.4135], [0.6179, 0.5513]], [[0.7284, 0.0807], [0.5737, 0.7374]]]])
in1Add88970 = tf.constant([[[[0.9628, 0.8714], [0.2482, 0.9221]], [[0.0551, 0.4384], [0.8948, 0.2551]]]])
in0Glo11922 = tf.constant([[[[1.477, 1.2045]], [[1.2667, 1.9436]]]])
print (np.array2string(model.predict([in0Add88970,in1Add88970,in0Glo11922],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub11887.png')

LAdd88970 = add_layer([[[[[0.7503, 0.4135], [0.6179, 0.5513]], [[0.7284, 0.0807], [0.5737, 0.7374]]]], [[[[0.9628, 0.8714], [0.2482, 0.9221]], [[0.0551, 0.4384], [0.8948, 0.2551]]]]], Add88970), 
LSep30720 = separable_conv2D_layer(Add88970, 1, 1,[[[[[0.2365], [0.7131]]]],[[[[0.7469, 0.3634], [0.5532, 0.1981]]]]],[0, 0], 2, 2, false, Sep30720), 
LFla22493 = flatten_layer(Sep30720, Fla22493), 
LGlo11922 = global_average_pooling2D_layer([[[[1.477, 1.2045]], [[1.2667, 1.9436]]]], Glo11922), 
LLay9945 = layer_normalization_layer(Glo11922, 1, 2.6957196924342113, Lay9945), 
LSub11887 = subtract_layer(Fla22493,Lay9945, Sub11887), 
exec_layers([LAdd88970,LSep30720,LFla22493,LGlo11922,LLay9945,LSub11887],["Add88970","Sep30720","Fla22493","Glo11922","Lay9945","Sub11887"],Sub11887,"Sub11887")

Actual (Unparsed): [[0.8709413, 0.2672825]]

Expected (Unparsed): [[0.870941318338321,0.2672824559536788]]

Actual:   [[0.871, 0.2673]]

Expected: [[0.871, 0.2673]]