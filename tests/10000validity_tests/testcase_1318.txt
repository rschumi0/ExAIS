import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub27888 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub27888 = tf.keras.layers.Input(shape=([2, 3, 2]))

Sub27888 = keras.layers.Subtract(name = 'Sub27888', )([in0Sub27888,in1Sub27888])
Ave19539 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave19539', )(Sub27888)
Sep98513 = keras.layers.SeparableConv2D(4, (1, 1),strides=(2, 2), padding='valid', name = 'Sep98513', )(Ave19539)
model = tf.keras.models.Model(inputs=[in0Sub27888,in1Sub27888], outputs=Sep98513)
w = model.get_layer('Sep98513').get_weights() 
w[0] = np.array([[[[0.5288], [0.2814]]]])
w[1] = np.array([[[[0.9692, 0.8211, 0.5772, 0.8262], [0.6942, 0.3646, 0.8805, 0.0533]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep98513').set_weights(w) 
in0Sub27888 = tf.constant([[[[0.2842, 0.3718], [0.5884, 0.9662], [0.6324, 0.6814]], [[0.7053, 0.3187], [0.5907, 0.2645], [0.6658, 0.0711]]]])
in1Sub27888 = tf.constant([[[[0.7285, 0.2782], [0.4276, 0.5734], [0.7456, 0.2799]], [[0.6438, 0.437], [0.12, 0.0286], [0.9561, 0.4665]]]])
print (np.array2string(model.predict([in0Sub27888,in1Sub27888],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep98513.png')

LSub27888 = subtract_layer([[[[0.2842, 0.3718], [0.5884, 0.9662], [0.6324, 0.6814]], [[0.7053, 0.3187], [0.5907, 0.2645], [0.6658, 0.0711]]]], [[[[0.7285, 0.2782], [0.4276, 0.5734], [0.7456, 0.2799]], [[0.6438, 0.437], [0.12, 0.0286], [0.9561, 0.4665]]]], Sub27888), 
LAve19539 = average_pooling2D_layer(Sub27888, 1, 2, Ave19539), 
LSep98513 = separable_conv2D_layer(Ave19539, 1, 1,[[[[[0.5288], [0.2814]]]],[[[[0.9692, 0.8211, 0.5772, 0.8262], [0.6942, 0.3646, 0.8805, 0.0533]]]]],[0, 0, 0, 0], 2, 2, false, Sep98513), 
exec_layers([LSub27888,LAve19539,LSep98513],["Sub27888","Ave19539","Sep98513"],Sep98513,"Sep98513")

Actual (Unparsed): [[[[-0.0251401, -0.0365956, 0.0169929, -0.0582821]]]]

Expected (Unparsed): [[[[-0.025140107663999982,-0.036595580532,0.016992909359999996,-0.058282139495999995]]]]

Actual:   [[[[-0.0251, -0.0365, 0.017, -0.0582]]]]

Expected: [[[[-0.0251, -0.0365, 0.017, -0.0582]]]]