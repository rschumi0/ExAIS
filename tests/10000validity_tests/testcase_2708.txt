import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer3135 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con2681 = tf.keras.layers.Input(shape=([3, 8]))
in0Dep38842 = tf.keras.layers.Input(shape=([1, 2, 2]))

Zer3135 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer3135', )(in0Zer3135)
Res86572 = keras.layers.Reshape((3, 4, 3), name = 'Res86572', )(Zer3135)
Res73724 = keras.layers.Reshape((3, 12), name = 'Res73724', )(Res86572)
Con2681 = keras.layers.Concatenate(axis=2, name = 'Con2681', )([Res73724,in0Con2681])
Dep38842 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep38842', )(in0Dep38842)
Res25961 = keras.layers.Reshape((1, 4), name = 'Res25961', )(Dep38842)
Zer2800 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer2800', )(Res25961)
Dot7582 = keras.layers.Dot(axes=(1, 1), name = 'Dot7582', )([Con2681,Zer2800])
model = tf.keras.models.Model(inputs=[in0Zer3135,in0Con2681,in0Dep38842], outputs=Dot7582)
w = model.get_layer('Dep38842').get_weights() 
w[0] = np.array([[[[0.5002], [0.9704]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep38842').set_weights(w) 
in0Zer3135 = tf.constant([[[[[1.3411]], [[1.361]]]]])
in0Con2681 = tf.constant([[[0.9803, 0.8987, 0.7001, 0.3869, 0.6919, 0.61, 0.1047, 0.0496], [0.7806, 0.7587, 0.2739, 0.1365, 0.6449, 0.6824, 0.5068, 0.3733], [0.0796, 0.541, 0.6449, 0.1657, 0.6779, 0.638, 0.832, 0.09]]])
in0Dep38842 = tf.constant([[[[0.3848, 0.2313], [0.7183, 0.6173]]]])
print (np.array2string(model.predict([in0Zer3135,in0Con2681,in0Dep38842],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot7582.png')

LZer3135 = zero_padding3D_layer([[[[[1.3411]], [[1.361]]]]], 1, 1, 1, 1, 1, 1, Zer3135), 
LRes86572 = reshape_layer(Zer3135, [3, 4, 3], Res86572), 
LRes73724 = reshape_layer(Res86572, [3, 12], Res73724), 
LCon2681 = concatenate_layer([Res73724,[[[0.9803, 0.8987, 0.7001, 0.3869, 0.6919, 0.61, 0.1047, 0.0496], [0.7806, 0.7587, 0.2739, 0.1365, 0.6449, 0.6824, 0.5068, 0.3733], [0.0796, 0.541, 0.6449, 0.1657, 0.6779, 0.638, 0.832, 0.09]]]], 2, Con2681), 
LDep38842 = depthwise_conv2D_layer([[[[0.3848, 0.2313], [0.7183, 0.6173]]]], 1, 1,[[[[0.5002], [0.9704]]]],[0, 0], 1, 1, true, Dep38842), 
LRes25961 = reshape_layer(Dep38842, [1, 4], Res25961), 
LZer2800 = zero_padding1D_layer(Res25961, 2, 0, Zer2800), 
LDot7582 = dot_layer(Con2681,Zer2800, 1, 1, Dot7582), 
exec_layers([LZer3135,LRes86572,LRes73724,LCon2681,LDep38842,LRes25961,LZer2800,LDot7582],["Zer3135","Res86572","Res73724","Con2681","Dep38842","Res25961","Zer2800","Dot7582"],Dot7582,"Dot7582")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0153212, 0.0178665, 0.0285998, 0.0476826], [0.1041300, 0.1214294, 0.1943779, 0.3240741], [0.1241284, 0.1447501, 0.2317085, 0.3863131], [0.0318934, 0.0371919, 0.0595350, 0.0992589], [0.1304801, 0.1521570, 0.2435652, 0.4060810], [0.1228003, 0.1432013, 0.2292294, 0.3821798], [0.1601408, 0.1867453, 0.2989323, 0.4983912], [0.0173229, 0.0202008, 0.0323364, 0.0539125]]]

Expected (Unparsed): [[[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0],[0.015321166015999999,0.017866500192000003,0.028599775336000003,0.047682622432],[0.10413003536,0.12142935432000002,0.19437787006,0.32407410472],[0.12412839150399999,0.14475007504800003,0.23170848133400002,0.386313105608],[0.03189343227199999,0.037191948264,0.059534959462,0.09925892634399998],[0.13048013118399998,0.152157041208,0.243565172114,0.4060810269679999],[0.12280030047999999,0.14320134576000002,0.22922935508,0.38217981296],[0.16014083071999996,0.18674532864,0.29893232512,0.4983912294399999],[0.017322926399999997,0.0202008168,0.0323364294,0.05391251279999999]]]

Actual:   [[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.0154, 0.0179, 0.0286, 0.0477], [0.1042, 0.1215, 0.1944, 0.3241], [0.1242, 0.1448, 0.2318, 0.3864], [0.0319, 0.0372, 0.0596, 0.0993], [0.1305, 0.1522, 0.2436, 0.4061], [0.1229, 0.1433, 0.2293, 0.3822], [0.1602, 0.1868, 0.299, 0.4984], [0.0174, 0.0203, 0.0324, 0.054]]]

Expected: [[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0.0154, 0.0179, 0.0286, 0.0477], [0.1042, 0.1215, 0.1944, 0.3241], [0.1242, 0.1448, 0.2318, 0.3864], [0.0319, 0.0372, 0.0596, 0.0993], [0.1305, 0.1522, 0.2436, 0.4061], [0.1229, 0.1433, 0.2293, 0.3822], [0.1602, 0.1868, 0.299, 0.4984], [0.0174, 0.0203, 0.0324, 0.054]]]