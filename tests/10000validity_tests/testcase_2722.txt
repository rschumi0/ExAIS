import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer7494 = tf.keras.layers.Input(shape=([3, 4]))
in0Mul4872 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul4872 = tf.keras.layers.Input(shape=([1, 2, 2]))

Zer7494 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer7494', )(in0Zer7494)
Mul4872 = keras.layers.Multiply(name = 'Mul4872', )([in0Mul4872,in1Mul4872])
Res66245 = keras.layers.Reshape((1, 4), name = 'Res66245', )(Mul4872)
Dot55004 = keras.layers.Dot(axes=(2, 2), name = 'Dot55004', )([Zer7494,Res66245])
Sim50566 = keras.layers.SimpleRNN(1,name = 'Sim50566', )(Dot55004)
model = tf.keras.models.Model(inputs=[in0Zer7494,in0Mul4872,in1Mul4872], outputs=Sim50566)
w = model.get_layer('Sim50566').get_weights() 
w[0] = np.array([[7]])
w[1] = np.array([[8]])
w[2] = np.array([9])
model.get_layer('Sim50566').set_weights(w) 
in0Zer7494 = tf.constant([[[1.6559, 1.7443, 1.1962, 1.1251], [1.2461, 1.6572, 1.8976, 1.4788], [1.5164, 1.6426, 1.0628, 1.9586]]])
in0Mul4872 = tf.constant([[[[0.8251, 0.9992], [0.8895, 0.7168]]]])
in1Mul4872 = tf.constant([[[[0.266, 0.5167], [0.5002, 0.9598]]]])
print (np.array2string(model.predict([in0Zer7494,in0Mul4872,in1Mul4872],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sim50566.png')

LZer7494 = zero_padding1D_layer([[[1.6559, 1.7443, 1.1962, 1.1251], [1.2461, 1.6572, 1.8976, 1.4788], [1.5164, 1.6426, 1.0628, 1.9586]]], 1, 1, Zer7494), 
LMul4872 = multiply_layer([[[[[0.8251, 0.9992], [0.8895, 0.7168]]]], [[[[0.266, 0.5167], [0.5002, 0.9598]]]]], Mul4872), 
LRes66245 = reshape_layer(Mul4872, [1, 4], Res66245), 
LDot55004 = dot_layer(Zer7494,Res66245, 2, 2, Dot55004), 
LSim50566 = simple_rnn_layer(Dot55004,[[7]],[[8]],[9], Sim50566), 
exec_layers([LZer7494,LMul4872,LRes66245,LDot55004,LSim50566],["Zer7494","Mul4872","Res66245","Dot55004","Sim50566"],Sim50566,"Sim50566")

Actual (Unparsed): [[1.0000000]]

Expected (Unparsed): [[0.9999999999999966]]

Actual:   [[1]]

Expected: [[1]]