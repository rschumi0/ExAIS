import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add72342 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Add72342 = tf.keras.layers.Input(shape=([2, 2, 2]))

Add72342 = keras.layers.Add(name = 'Add72342', )([in0Add72342,in1Add72342])
Glo24354 = keras.layers.GlobalAveragePooling2D(name = 'Glo24354', )(Add72342)
Res86986 = keras.layers.Reshape((2, 1), name = 'Res86986', )(Glo24354)
Res99061 = keras.layers.Reshape((2, 1, 1), name = 'Res99061', )(Res86986)
Res82381 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res82381', )(Res99061)
Con42440 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(9, 1, 1), padding='valid', name = 'Con42440', )(Res82381)
model = tf.keras.models.Model(inputs=[in0Add72342,in1Add72342], outputs=Con42440)
w = model.get_layer('Con42440').get_weights() 
w[0] = np.array([[[[[0.3084], [0.147]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con42440').set_weights(w) 
in0Add72342 = tf.constant([[[[0.822, 0.571], [0.8127, 0.7654]], [[0.2818, 0.1781], [0.7404, 0.5034]]]])
in1Add72342 = tf.constant([[[[0.952, 0.395], [0.9477, 0.1371]], [[0.3685, 0.7819], [0.8109, 0.3099]]]])
print (np.array2string(model.predict([in0Add72342,in1Add72342],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con42440.png')

LAdd72342 = add_layer([[[[[0.822, 0.571], [0.8127, 0.7654]], [[0.2818, 0.1781], [0.7404, 0.5034]]]], [[[[0.952, 0.395], [0.9477, 0.1371]], [[0.3685, 0.7819], [0.8109, 0.3099]]]]], Add72342), 
LGlo24354 = global_average_pooling2D_layer(Add72342, Glo24354), 
LRes86986 = reshape_layer(Glo24354, [2, 1], Res86986), 
LRes99061 = reshape_layer(Res86986, [2, 1, 1], Res99061), 
LRes82381 = reshape_layer(Res99061, [2, 1, 1, 1], Res82381), 
LCon42440 = conv3D_transpose_layer(Res82381, 1, 1, 1,[[[[[0.3084], [0.147]]]]],[0, 0], 9, 1, 1, false, Con42440), 
exec_layers([LAdd72342,LGlo24354,LRes86986,LRes99061,LRes82381,LCon42440],["Add72342","Glo24354","Res86986","Res99061","Res82381","Con42440"],Con42440,"Con42440")

Actual (Unparsed): [[[[[0.4422456, 0.2107980]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.2807828, 0.1338361]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.44224560000000007,0.210798]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0.28078278,0.13383615]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]],[[[0,0]]]]]

Actual:   [[[[[0.4423, 0.2108]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0.2808, 0.1339]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]]]]

Expected: [[[[[0.4423, 0.2108]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0.2808, 0.1339]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]]]]