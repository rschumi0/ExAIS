import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add54397 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add54397 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con95638 = tf.keras.layers.Input(shape=([11]))
in0Zer72848 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Glo45136 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Con37810 = tf.keras.layers.Input(shape=([10]))

Add54397 = keras.layers.Add(name = 'Add54397', )([in0Add54397,in1Add54397])
Res75475 = keras.layers.Reshape((1, 1), name = 'Res75475', )(Add54397)
Fla25415 = keras.layers.Flatten(name = 'Fla25415', )(Res75475)
Con95638 = keras.layers.Concatenate(axis=1, name = 'Con95638', )([Fla25415,in0Con95638])
Zer72848 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer72848', )(in0Zer72848)
Res77685 = keras.layers.Reshape((3, 4), name = 'Res77685', )(Zer72848)
Fla79932 = keras.layers.Flatten(name = 'Fla79932', )(Res77685)
Glo45136 = keras.layers.GlobalMaxPool3D(name = 'Glo45136', )(in0Glo45136)
Con37810 = keras.layers.Concatenate(axis=1, name = 'Con37810', )([Glo45136,in0Con37810])
Max20739 = keras.layers.Maximum(name = 'Max20739', )([Fla79932,Con37810])
Mul13237 = keras.layers.Multiply(name = 'Mul13237', )([Con95638,Max20739])
model = tf.keras.models.Model(inputs=[in0Add54397,in1Add54397,in0Con95638,in0Zer72848,in0Glo45136,in0Con37810], outputs=Mul13237)
in0Add54397 = tf.constant([[[[0.6605]]]])
in1Add54397 = tf.constant([[[[0.7264]]]])
in0Con95638 = tf.constant([[0.4135, 0.2186, 0.137, 0.4668, 0.4363, 0.9867, 0.2181, 0.0601, 0.2934, 0.466, 0.5372]])
in0Zer72848 = tf.constant([[[[1.3672], [1.5489]]]])
in0Glo45136 = tf.constant([[[[[1.2006, 1.1757]], [[1.0842, 1.2342]]]]])
in0Con37810 = tf.constant([[0.9509, 0.2457, 0.9026, 0.38, 0.9948, 0.5713, 0.0832, 0.883, 0.2775, 0.4013]])
print (np.array2string(model.predict([in0Add54397,in1Add54397,in0Con95638,in0Zer72848,in0Glo45136,in0Con37810],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul13237.png')

LAdd54397 = add_layer([[[[[0.6605]]]], [[[[0.7264]]]]], Add54397), 
LRes75475 = reshape_layer(Add54397, [1, 1], Res75475), 
LFla25415 = flatten_layer(Res75475, Fla25415), 
LCon95638 = concatenate_layer([Fla25415,[[0.4135, 0.2186, 0.137, 0.4668, 0.4363, 0.9867, 0.2181, 0.0601, 0.2934, 0.466, 0.5372]]], 1, Con95638), 
LZer72848 = zero_padding2D_layer([[[[1.3672], [1.5489]]]], 1, 1, 1, 1, Zer72848), 
LRes77685 = reshape_layer(Zer72848, [3, 4], Res77685), 
LFla79932 = flatten_layer(Res77685, Fla79932), 
LGlo45136 = global_max_pool3D_layer([[[[[1.2006, 1.1757]], [[1.0842, 1.2342]]]]], Glo45136), 
LCon37810 = concatenate_layer([Glo45136,[[0.9509, 0.2457, 0.9026, 0.38, 0.9948, 0.5713, 0.0832, 0.883, 0.2775, 0.4013]]], 1, Con37810), 
LMax20739 = maximum_layer([Fla79932,Con37810], Max20739), 
LMul13237 = multiply_layer([Con95638,Max20739], Mul13237), 
exec_layers([LAdd54397,LRes75475,LFla25415,LCon95638,LZer72848,LRes77685,LFla79932,LGlo45136,LCon37810,LMax20739,LMul13237],["Add54397","Res75475","Fla25415","Con95638","Zer72848","Res77685","Fla79932","Glo45136","Con37810","Max20739","Mul13237"],Mul13237,"Mul13237")

Actual (Unparsed): [[1.6651122, 0.5103417, 0.2078667, 0.0336609, 0.4213337, 0.5965094, 1.5282996, 0.1246005, 0.0050003, 0.2590722, 0.1293150, 0.2155784]]

Expected (Unparsed): [[1.66511214,0.5103417,0.20786674,0.0336609,0.42133368,0.59650936,1.52829963,0.12460053,0.00500032,0.2590722,0.129315,0.21557836]]

Actual:   [[1.6652, 0.5104, 0.2079, 0.0337, 0.4214, 0.5966, 1.5283, 0.1247, 0.0051, 0.2591, 0.1294, 0.2156]]

Expected: [[1.6652, 0.5104, 0.2079, 0.0337, 0.4214, 0.5966, 1.5283, 0.1247, 0.0051, 0.2591, 0.1294, 0.2156]]