import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min36425 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Min36425 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Sim22751 = tf.keras.layers.Input(shape=([1, 3]))
in0Con81099 = tf.keras.layers.Input(shape=([3]))

Min36425 = keras.layers.Minimum(name = 'Min36425', )([in0Min36425,in1Min36425])
Res50236 = keras.layers.Reshape((1, 4), name = 'Res50236', )(Min36425)
Fla65844 = keras.layers.Flatten(name = 'Fla65844', )(Res50236)
Sim22751 = keras.layers.SimpleRNN(1,name = 'Sim22751', )(in0Sim22751)
Con81099 = keras.layers.Concatenate(axis=1, name = 'Con81099', )([Sim22751,in0Con81099])
Ave72630 = keras.layers.Average(name = 'Ave72630', )([Fla65844,Con81099])
model = tf.keras.models.Model(inputs=[in0Min36425,in1Min36425,in0Sim22751,in0Con81099], outputs=Ave72630)
w = model.get_layer('Sim22751').get_weights() 
w[0] = np.array([[7], [8], [2]])
w[1] = np.array([[1]])
w[2] = np.array([1])
model.get_layer('Sim22751').set_weights(w) 
in0Min36425 = tf.constant([[[[0.0364, 0.7732], [0.9433, 0.0679]]]])
in1Min36425 = tf.constant([[[[0.4226, 0.2052], [0.6008, 0.3174]]]])
in0Sim22751 = tf.constant([[[4, 5, 9]]])
in0Con81099 = tf.constant([[0.1232, 0.8339, 0.0161]])
print (np.array2string(model.predict([in0Min36425,in1Min36425,in0Sim22751,in0Con81099],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave72630.png')

LMin36425 = minimum_layer([[[[[0.0364, 0.7732], [0.9433, 0.0679]]]], [[[[0.4226, 0.2052], [0.6008, 0.3174]]]]], Min36425), 
LRes50236 = reshape_layer(Min36425, [1, 4], Res50236), 
LFla65844 = flatten_layer(Res50236, Fla65844), 
LSim22751 = simple_rnn_layer([[[4, 5, 9]]],[[7], [8], [2]],[[1]],[1], Sim22751), 
LCon81099 = concatenate_layer([Sim22751,[[0.1232, 0.8339, 0.0161]]], 1, Con81099), 
LAve72630 = average_layer([Fla65844,Con81099], Ave72630), 
exec_layers([LMin36425,LRes50236,LFla65844,LSim22751,LCon81099,LAve72630],["Min36425","Res50236","Fla65844","Sim22751","Con81099","Ave72630"],Ave72630,"Ave72630")

Actual (Unparsed): [[0.5182000, 0.1642000, 0.7173500, 0.0420000]]

Expected (Unparsed): [[0.5182,0.1642,0.7173499999999999,0.042]]

Actual:   [[0.5182, 0.1642, 0.7174, 0.042]]

Expected: [[0.5182, 0.1642, 0.7174, 0.042]]