import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave64303 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Ave64303 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Lay2468 = tf.keras.layers.Input(shape=([1, 2]))
in0Con74017 = tf.keras.layers.Input(shape=([2, 2]))

Ave64303 = keras.layers.Average(name = 'Ave64303', )([in0Ave64303,in1Ave64303])
Res3352 = keras.layers.Reshape((2, 4), name = 'Res3352', )(Ave64303)
Lay2468 = keras.layers.LayerNormalization(axis=1, epsilon=2.979303114064498, name = 'Lay2468', )(in0Lay2468)
Zer54107 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer54107', )(Lay2468)
Con74017 = keras.layers.Concatenate(axis=2, name = 'Con74017', )([Zer54107,in0Con74017])
Max2513 = keras.layers.Maximum(name = 'Max2513', )([Res3352,Con74017])
model = tf.keras.models.Model(inputs=[in0Ave64303,in1Ave64303,in0Lay2468,in0Con74017], outputs=Max2513)
in0Ave64303 = tf.constant([[[[0.8518, 0.6099], [0.1201, 0.2868]], [[0.5394, 0.1753], [0.7608, 0.7698]]]])
in1Ave64303 = tf.constant([[[[0.2937, 0.3997], [0.2485, 0.3533]], [[0.1749, 0.6011], [0.773, 0.7457]]]])
in0Lay2468 = tf.constant([[[1.0613, 1.3383]]])
in0Con74017 = tf.constant([[[0.2292, 0.9037], [0.524, 0.1846]]])
print (np.array2string(model.predict([in0Ave64303,in1Ave64303,in0Lay2468,in0Con74017],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max2513.png')

LAve64303 = average_layer([[[[[0.8518, 0.6099], [0.1201, 0.2868]], [[0.5394, 0.1753], [0.7608, 0.7698]]]], [[[[0.2937, 0.3997], [0.2485, 0.3533]], [[0.1749, 0.6011], [0.773, 0.7457]]]]], Ave64303), 
LRes3352 = reshape_layer(Ave64303, [2, 4], Res3352), 
LLay2468 = layer_normalization_layer([[[1.0613, 1.3383]]], 1, 2.979303114064498, Lay2468), 
LZer54107 = zero_padding1D_layer(Lay2468, 1, 0, Zer54107), 
LCon74017 = concatenate_layer([Zer54107,[[[0.2292, 0.9037], [0.524, 0.1846]]]], 2, Con74017), 
LMax2513 = maximum_layer([Res3352,Con74017], Max2513), 
exec_layers([LAve64303,LRes3352,LLay2468,LZer54107,LCon74017,LMax2513],["Ave64303","Res3352","Lay2468","Zer54107","Con74017","Max2513"],Max2513,"Max2513")

Actual (Unparsed): [[[0.5727500, 0.5048000, 0.2292000, 0.9037000], [0.3571500, 0.3882000, 0.7669000, 0.7577500]]]

Expected (Unparsed): [[[0.57275,0.5048,0.2292,0.9037],[0.35714999999999997,0.3882,0.7669,0.75775]]]

Actual:   [[[0.5728, 0.5048, 0.2292, 0.9037], [0.3572, 0.3882, 0.7669, 0.7578]]]

Expected: [[[0.5728, 0.5048, 0.2292, 0.9037], [0.3572, 0.3882, 0.7669, 0.7578]]]