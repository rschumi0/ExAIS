import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min27968 = tf.keras.layers.Input(shape=([2, 2]))
in1Min27968 = tf.keras.layers.Input(shape=([2, 2]))

Min27968 = keras.layers.Minimum(name = 'Min27968', )([in0Min27968,in1Min27968])
Res25028 = keras.layers.Reshape((2, 2, 1), name = 'Res25028', )(Min27968)
Res69511 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res69511', )(Res25028)
Con64732 = keras.layers.Conv3D(4, (2, 2, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con64732', )(Res69511)
Zer25102 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer25102', )(Con64732)
Glo25934 = keras.layers.GlobalAveragePooling3D(name = 'Glo25934', )(Zer25102)
model = tf.keras.models.Model(inputs=[in0Min27968,in1Min27968], outputs=Glo25934)
w = model.get_layer('Con64732').get_weights() 
w[0] = np.array([[[[[0.7036, 0.8633, 0.0193, 0.1362]]], [[[0.6278, 0.5559, 0.6007, 0.6416]]]], [[[[0.4155, 0.1714, 0.293, 0.0239]]], [[[0.383, 0.6868, 0.4973, 0.5427]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con64732').set_weights(w) 
in0Min27968 = tf.constant([[[0.3973, 0.6856], [0.4996, 0.1426]]])
in1Min27968 = tf.constant([[[0.4937, 0.0359], [0.7976, 0.5473]]])
print (np.array2string(model.predict([in0Min27968,in1Min27968],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo25934.png')

LMin27968 = minimum_layer([[[[0.3973, 0.6856], [0.4996, 0.1426]]], [[[0.4937, 0.0359], [0.7976, 0.5473]]]], Min27968), 
LRes25028 = reshape_layer(Min27968, [2, 2, 1], Res25028), 
LRes69511 = reshape_layer(Res25028, [2, 2, 1, 1], Res69511), 
LCon64732 = conv3D_layer(Res69511, 2, 2, 1,[[[[[0.7036, 0.8633, 0.0193, 0.1362]]], [[[0.6278, 0.5559, 0.6007, 0.6416]]]], [[[[0.4155, 0.1714, 0.293, 0.0239]]], [[[0.383, 0.6868, 0.4973, 0.5427]]]]],[0, 0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con64732), 
LZer25102 = zero_padding3D_layer(Con64732, 1, 1, 1, 1, 1, 1, Zer25102), 
LGlo25934 = global_average_pooling3D_layer(Zer25102, Glo25934), 
exec_layers([LMin27968,LRes25028,LRes69511,LCon64732,LZer25102,LGlo25934],["Min27968","Res25028","Res69511","Con64732","Zer25102","Glo25934"],Glo25934,"Glo25934")

Actual (Unparsed): [[0.0208992, 0.0202413, 0.0091308, 0.0061657]]

Expected (Unparsed): [[0.020899181481481482,0.020241297037037035,0.00913077037037037,0.006165746666666667]]

Actual:   [[0.0209, 0.0203, 0.0092, 0.0062]]

Expected: [[0.0209, 0.0203, 0.0092, 0.0062]]