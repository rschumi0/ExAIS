import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min37276 = tf.keras.layers.Input(shape=([2, 2]))
in1Min37276 = tf.keras.layers.Input(shape=([2, 2]))
in0Con4261 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave74442 = tf.keras.layers.Input(shape=([2, 1]))
in0Con60418 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Max1769 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max1769 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max27792 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max27792 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add83480 = tf.keras.layers.Input(shape=([1, 1]))
in1Add83480 = tf.keras.layers.Input(shape=([1, 1]))
in0Con80731 = tf.keras.layers.Input(shape=([2, 3]))

Min37276 = keras.layers.Minimum(name = 'Min37276', )([in0Min37276,in1Min37276])
Res39411 = keras.layers.Reshape((2, 2, 1), name = 'Res39411', )(Min37276)
Con4261 = keras.layers.Concatenate(axis=3, name = 'Con4261', )([Res39411,in0Con4261])
Ave74442 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave74442', )(in0Ave74442)
Res3306 = keras.layers.Reshape((1, 1, 1), name = 'Res3306', )(Ave74442)
Con60418 = keras.layers.Concatenate(axis=3, name = 'Con60418', )([Res3306,in0Con60418])
Max1769 = keras.layers.Maximum(name = 'Max1769', )([in0Max1769,in1Max1769])
Max68557 = keras.layers.Maximum(name = 'Max68557', )([Con60418,Max1769])
Zer60505 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer60505', )(Max68557)
Max78768 = keras.layers.Maximum(name = 'Max78768', )([Con4261,Zer60505])
Res82496 = keras.layers.Reshape((2, 4), name = 'Res82496', )(Max78768)
Max27792 = keras.layers.Maximum(name = 'Max27792', )([in0Max27792,in1Max27792])
Res39387 = keras.layers.Reshape((1, 1), name = 'Res39387', )(Max27792)
Add83480 = keras.layers.Add(name = 'Add83480', )([in0Add83480,in1Add83480])
Ave31584 = keras.layers.Average(name = 'Ave31584', )([Res39387,Add83480])
Zer32780 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer32780', )(Ave31584)
Con80731 = keras.layers.Concatenate(axis=2, name = 'Con80731', )([Zer32780,in0Con80731])
Ave39658 = keras.layers.Average(name = 'Ave39658', )([Res82496,Con80731])
model = tf.keras.models.Model(inputs=[in0Min37276,in1Min37276,in0Con4261,in0Ave74442,in0Con60418,in0Max1769,in1Max1769,in0Max27792,in1Max27792,in0Add83480,in1Add83480,in0Con80731], outputs=Ave39658)
in0Min37276 = tf.constant([[[0.4024, 0.1549], [0.9978, 0.2089]]])
in1Min37276 = tf.constant([[[0.9794, 0.3172], [0.0075, 0.6677]]])
in0Con4261 = tf.constant([[[[0.777], [0.5898]], [[0.6593], [0.1996]]]])
in0Ave74442 = tf.constant([[[1.9528], [1.5038]]])
in0Con60418 = tf.constant([[[[0.0339]]]])
in0Max1769 = tf.constant([[[[0.0522, 0.5197]]]])
in1Max1769 = tf.constant([[[[0.5076, 0.7468]]]])
in0Max27792 = tf.constant([[[[0.2417]]]])
in1Max27792 = tf.constant([[[[0.323]]]])
in0Add83480 = tf.constant([[[0.2375]]])
in1Add83480 = tf.constant([[[0.3208]]])
in0Con80731 = tf.constant([[[0.1672, 0.9981, 0.4405], [0.0929, 0.2394, 0.9125]]])
print (np.array2string(model.predict([in0Min37276,in1Min37276,in0Con4261,in0Ave74442,in0Con60418,in0Max1769,in1Max1769,in0Max27792,in1Max27792,in0Add83480,in1Add83480,in0Con80731],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave39658.png')

LMin37276 = minimum_layer([[[[0.4024, 0.1549], [0.9978, 0.2089]]], [[[0.9794, 0.3172], [0.0075, 0.6677]]]], Min37276), 
LRes39411 = reshape_layer(Min37276, [2, 2, 1], Res39411), 
LCon4261 = concatenate_layer([Res39411,[[[[0.777], [0.5898]], [[0.6593], [0.1996]]]]], 3, Con4261), 
LAve74442 = average_pooling1D_layer([[[1.9528], [1.5038]]], 2, Ave74442), 
LRes3306 = reshape_layer(Ave74442, [1, 1, 1], Res3306), 
LCon60418 = concatenate_layer([Res3306,[[[[0.0339]]]]], 3, Con60418), 
LMax1769 = maximum_layer([[[[[0.0522, 0.5197]]]], [[[[0.5076, 0.7468]]]]], Max1769), 
LMax68557 = maximum_layer([Con60418,Max1769], Max68557), 
LZer60505 = zero_padding2D_layer(Max68557, 1, 0, 1, 0, Zer60505), 
LMax78768 = maximum_layer([Con4261,Zer60505], Max78768), 
LRes82496 = reshape_layer(Max78768, [2, 4], Res82496), 
LMax27792 = maximum_layer([[[[[0.2417]]]], [[[[0.323]]]]], Max27792), 
LRes39387 = reshape_layer(Max27792, [1, 1], Res39387), 
LAdd83480 = add_layer([[[[0.2375]]], [[[0.3208]]]], Add83480), 
LAve31584 = average_layer([Res39387,Add83480], Ave31584), 
LZer32780 = zero_padding1D_layer(Ave31584, 1, 0, Zer32780), 
LCon80731 = concatenate_layer([Zer32780,[[[0.1672, 0.9981, 0.4405], [0.0929, 0.2394, 0.9125]]]], 2, Con80731), 
LAve39658 = average_layer([Res82496,Con80731], Ave39658), 
exec_layers([LMin37276,LRes39411,LCon4261,LAve74442,LRes3306,LCon60418,LMax1769,LMax68557,LZer60505,LMax78768,LRes82496,LMax27792,LRes39387,LAdd83480,LAve31584,LZer32780,LCon80731,LAve39658],["Min37276","Res39411","Con4261","Ave74442","Res3306","Con60418","Max1769","Max68557","Zer60505","Max78768","Res82496","Max27792","Res39387","Add83480","Ave31584","Zer32780","Con80731","Ave39658"],Ave39658,"Ave39658")

Actual (Unparsed): [[[0.2012000, 0.4721000, 0.5765000, 0.5151500], [0.2240750, 0.3761000, 0.9838500, 0.8296500]]]

Expected (Unparsed): [[[0.2012,0.4721,0.5765,0.51515],[0.224075,0.3761,0.98385,0.82965]]]

Actual:   [[[0.2012, 0.4721, 0.5765, 0.5152], [0.2241, 0.3761, 0.9839, 0.8297]]]

Expected: [[[0.2012, 0.4721, 0.5765, 0.5152], [0.2241, 0.3761, 0.9839, 0.8297]]]