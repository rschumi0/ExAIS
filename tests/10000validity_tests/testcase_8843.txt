import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_45410 = tf.keras.layers.Input(shape=([1, 3, 3]))

Up_45410 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_45410', )(in0Up_45410)
Res40330 = keras.layers.Reshape((1, 3, 3, 1), name = 'Res40330', )(Up_45410)
Glo36513 = keras.layers.GlobalAveragePooling3D(name = 'Glo36513', )(Res40330)
Res82755 = keras.layers.Reshape((1, 1), name = 'Res82755', )(Glo36513)
Res51888 = keras.layers.Reshape((1, 1, 1), name = 'Res51888', )(Res82755)
Con45585 = keras.layers.Conv2D(4, (1, 1),strides=(1, 4), padding='same', dilation_rate=(1, 1), name = 'Con45585', )(Res51888)
model = tf.keras.models.Model(inputs=[in0Up_45410], outputs=Con45585)
w = model.get_layer('Con45585').get_weights() 
w[0] = np.array([[[[0.4815, 0.8706, 0.2711, 0.9939]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con45585').set_weights(w) 
in0Up_45410 = tf.constant([[[[1.1413, 1.9035, 1.8151], [1.1765, 1.7377, 1.4008], [1.0327, 1.265, 1.2782]]]])
print (np.array2string(model.predict([in0Up_45410],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con45585.png')

LUp_45410 = up_sampling2D_layer([[[[1.1413, 1.9035, 1.8151], [1.1765, 1.7377, 1.4008], [1.0327, 1.265, 1.2782]]]], 1, 1, Up_45410), 
LRes40330 = reshape_layer(Up_45410, [1, 3, 3, 1], Res40330), 
LGlo36513 = global_average_pooling3D_layer(Res40330, Glo36513), 
LRes82755 = reshape_layer(Glo36513, [1, 1], Res82755), 
LRes51888 = reshape_layer(Res82755, [1, 1, 1], Res51888), 
LCon45585 = conv2D_layer(Res51888, 1, 1,[[[[0.4815, 0.8706, 0.2711, 0.9939]]]],[0, 0, 0, 0], 1, 4, true, 1, 1, Con45585), 
exec_layers([LUp_45410,LRes40330,LGlo36513,LRes82755,LRes51888,LCon45585],["Up_45410","Res40330","Glo36513","Res82755","Res51888","Con45585"],Con45585,"Con45585")

Actual (Unparsed): [[[[0.6821678, 1.2334274, 0.3840824, 1.4081133]]]]

Expected (Unparsed): [[[[0.6821678,1.2334273866666667,0.3840824311111111,1.4081133466666667]]]]

Actual:   [[[[0.6822, 1.2335, 0.3841, 1.4082]]]]

Expected: [[[[0.6822, 1.2335, 0.3841, 1.4082]]]]