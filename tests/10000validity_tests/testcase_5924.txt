import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add74932 = tf.keras.layers.Input(shape=([1, 2]))
in1Add74932 = tf.keras.layers.Input(shape=([1, 2]))
in0Up_84075 = tf.keras.layers.Input(shape=([1, 4]))

Add74932 = keras.layers.Add(name = 'Add74932', )([in0Add74932,in1Add74932])
Res42815 = keras.layers.Reshape((1, 2, 1), name = 'Res42815', )(Add74932)
Cro87581 = keras.layers.Cropping2D(cropping=((0, 0), (0, 1)), name = 'Cro87581', )(Res42815)
Res54321 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res54321', )(Cro87581)
Zer18161 = keras.layers.ZeroPadding3D(padding=((3, 0), (3, 0), (0, 0)), name = 'Zer18161', )(Res54321)
Up_84075 = keras.layers.UpSampling1D(size=(2), name = 'Up_84075', )(in0Up_84075)
Max42983 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max42983', )(Up_84075)
Sof4257 = keras.layers.Softmax(axis=1, name = 'Sof4257', )(Max42983)
Res43648 = keras.layers.Reshape((2, 4, 1), name = 'Res43648', )(Sof4257)
Res51407 = keras.layers.Reshape((2, 4, 1, 1), name = 'Res51407', )(Res43648)
Up_93954 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_93954', )(Res51407)
Sub35924 = keras.layers.Subtract(name = 'Sub35924', )([Zer18161,Up_93954])
model = tf.keras.models.Model(inputs=[in0Add74932,in1Add74932,in0Up_84075], outputs=Sub35924)
in0Add74932 = tf.constant([[[0.9645, 0.2537]]])
in1Add74932 = tf.constant([[[0.7374, 0.8932]]])
in0Up_84075 = tf.constant([[[1.1976, 1.2823, 1.4073, 1.6618]]])
print (np.array2string(model.predict([in0Add74932,in1Add74932,in0Up_84075],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub35924.png')

LAdd74932 = add_layer([[[[0.9645, 0.2537]]], [[[0.7374, 0.8932]]]], Add74932), 
LRes42815 = reshape_layer(Add74932, [1, 2, 1], Res42815), 
LCro87581 = cropping2D_layer(Res42815, 0, 0, 0, 1, Cro87581), 
LRes54321 = reshape_layer(Cro87581, [1, 1, 1, 1], Res54321), 
LZer18161 = zero_padding3D_layer(Res54321, 3, 0, 3, 0, 0, 0, Zer18161), 
LUp_84075 = up_sampling1D_layer([[[1.1976, 1.2823, 1.4073, 1.6618]]], 2, Up_84075), 
LMax42983 = max_pool1D_layer(Up_84075, 1, 1, false, Max42983), 
LSof4257 = softmax_layer(Max42983, 1, Sof4257), 
LRes43648 = reshape_layer(Sof4257, [2, 4, 1], Res43648), 
LRes51407 = reshape_layer(Res43648, [2, 4, 1, 1], Res51407), 
LUp_93954 = up_sampling3D_layer(Res51407, 2, 1, 1, Up_93954), 
LSub35924 = subtract_layer(Zer18161,Up_93954, Sub35924), 
exec_layers([LAdd74932,LRes42815,LCro87581,LRes54321,LZer18161,LUp_84075,LMax42983,LSof4257,LRes43648,LRes51407,LUp_93954,LSub35924],["Add74932","Res42815","Cro87581","Res54321","Zer18161","Up_84075","Max42983","Sof4257","Res43648","Res51407","Up_93954","Sub35924"],Sub35924,"Sub35924")

Actual (Unparsed): [[[[[-0.5000000]], [[-0.5000000]], [[-0.5000000]], [[-0.5000000]]], [[[-0.5000000]], [[-0.5000000]], [[-0.5000000]], [[-0.5000000]]], [[[-0.5000000]], [[-0.5000000]], [[-0.5000000]], [[-0.5000000]]], [[[-0.5000000]], [[-0.5000000]], [[-0.5000000]], [[1.2019000]]]]]

Expected (Unparsed): [[[[[-0.5]],[[-0.5]],[[-0.5]],[[-0.5]]],[[[-0.5]],[[-0.5]],[[-0.5]],[[-0.5]]],[[[-0.5]],[[-0.5]],[[-0.5]],[[-0.5]]],[[[-0.5]],[[-0.5]],[[-0.5]],[[1.2019000000000002]]]]]

Actual:   [[[[[-0.5]], [[-0.5]], [[-0.5]], [[-0.5]]], [[[-0.5]], [[-0.5]], [[-0.5]], [[-0.5]]], [[[-0.5]], [[-0.5]], [[-0.5]], [[-0.5]]], [[[-0.5]], [[-0.5]], [[-0.5]], [[1.2019]]]]]

Expected: [[[[[-0.5]], [[-0.5]], [[-0.5]], [[-0.5]]], [[[-0.5]], [[-0.5]], [[-0.5]], [[-0.5]]], [[[-0.5]], [[-0.5]], [[-0.5]], [[-0.5]]], [[[-0.5]], [[-0.5]], [[-0.5]], [[1.202]]]]]