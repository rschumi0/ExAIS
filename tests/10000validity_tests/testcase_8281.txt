import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave77516 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave77516 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Sub72970 = tf.keras.layers.Input(shape=([2]))
in1Sub72970 = tf.keras.layers.Input(shape=([2]))
in0Con32713 = tf.keras.layers.Input(shape=([1]))

Ave77516 = keras.layers.Average(name = 'Ave77516', )([in0Ave77516,in1Ave77516])
Con49604 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con49604', )(Ave77516)
Res82333 = keras.layers.Reshape((1, 1, 3), name = 'Res82333', )(Con49604)
Res19924 = keras.layers.Reshape((1, 3), name = 'Res19924', )(Res82333)
Fla1741 = keras.layers.Flatten(name = 'Fla1741', )(Res19924)
Sub72970 = keras.layers.Subtract(name = 'Sub72970', )([in0Sub72970,in1Sub72970])
Con32713 = keras.layers.Concatenate(axis=1, name = 'Con32713', )([Sub72970,in0Con32713])
Add2006 = keras.layers.Add(name = 'Add2006', )([Fla1741,Con32713])
model = tf.keras.models.Model(inputs=[in0Ave77516,in1Ave77516,in0Sub72970,in1Sub72970,in0Con32713], outputs=Add2006)
w = model.get_layer('Con49604').get_weights() 
w[0] = np.array([[[[[0.937], [0.3528], [0.9097]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con49604').set_weights(w) 
in0Ave77516 = tf.constant([[[[[0.9269]]]]])
in1Ave77516 = tf.constant([[[[[0.1351]]]]])
in0Sub72970 = tf.constant([[0.4395, 0.0778]])
in1Sub72970 = tf.constant([[0.2014, 0.6925]])
in0Con32713 = tf.constant([[0.2831]])
print (np.array2string(model.predict([in0Ave77516,in1Ave77516,in0Sub72970,in1Sub72970,in0Con32713],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add2006.png')

LAve77516 = average_layer([[[[[[0.9269]]]]], [[[[[0.1351]]]]]], Ave77516), 
LCon49604 = conv3D_transpose_layer(Ave77516, 1, 1, 1,[[[[[0.937], [0.3528], [0.9097]]]]],[0, 0, 0], 1, 1, 1, false, Con49604), 
LRes82333 = reshape_layer(Con49604, [1, 1, 3], Res82333), 
LRes19924 = reshape_layer(Res82333, [1, 3], Res19924), 
LFla1741 = flatten_layer(Res19924, Fla1741), 
LSub72970 = subtract_layer([[0.4395, 0.0778]], [[0.2014, 0.6925]], Sub72970), 
LCon32713 = concatenate_layer([Sub72970,[[0.2831]]], 1, Con32713), 
LAdd2006 = add_layer([Fla1741,Con32713], Add2006), 
exec_layers([LAve77516,LCon49604,LRes82333,LRes19924,LFla1741,LSub72970,LCon32713,LAdd2006],["Ave77516","Con49604","Res82333","Res19924","Fla1741","Sub72970","Con32713","Add2006"],Add2006,"Add2006")

Actual (Unparsed): [[0.7356470, -0.4273632, 0.7661507]]

Expected (Unparsed): [[0.7356469999999999,-0.42736320000000005,0.7661506999999999]]

Actual:   [[0.7357, -0.4273, 0.7662]]

Expected: [[0.7357, -0.4273, 0.7662]]