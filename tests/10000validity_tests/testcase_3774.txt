import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave35189 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Min29106 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Min29106 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con72515 = tf.keras.layers.Input(shape=([2, 1]))
in0Add17908 = tf.keras.layers.Input(shape=([2, 2]))
in1Add17908 = tf.keras.layers.Input(shape=([2, 2]))

Ave35189 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave35189', )(in0Ave35189)
Res92022 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res92022', )(Ave35189)
Min29106 = keras.layers.Minimum(name = 'Min29106', )([in0Min29106,in1Min29106])
Max5020 = keras.layers.Maximum(name = 'Max5020', )([Res92022,Min29106])
Res47022 = keras.layers.Reshape((2, 1, 1), name = 'Res47022', )(Max5020)
Res62527 = keras.layers.Reshape((2, 1), name = 'Res62527', )(Res47022)
Con72515 = keras.layers.Concatenate(axis=2, name = 'Con72515', )([Res62527,in0Con72515])
Add17908 = keras.layers.Add(name = 'Add17908', )([in0Add17908,in1Add17908])
Per78187 = keras.layers.Permute((2,1), name = 'Per78187',)(Add17908)
Max55166 = keras.layers.Maximum(name = 'Max55166', )([Con72515,Per78187])
model = tf.keras.models.Model(inputs=[in0Ave35189,in0Min29106,in1Min29106,in0Con72515,in0Add17908,in1Add17908], outputs=Max55166)
in0Ave35189 = tf.constant([[[[1.5992]], [[1.5191]]]])
in0Min29106 = tf.constant([[[[[0.1742]]], [[[0.9373]]]]])
in1Min29106 = tf.constant([[[[[0.3535]]], [[[0.1508]]]]])
in0Con72515 = tf.constant([[[0.5179], [0.1159]]])
in0Add17908 = tf.constant([[[0.6639, 0.3867], [0.1066, 0.8024]]])
in1Add17908 = tf.constant([[[0.532, 0.7695], [0.8842, 0.8403]]])
print (np.array2string(model.predict([in0Ave35189,in0Min29106,in1Min29106,in0Con72515,in0Add17908,in1Add17908],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max55166.png')

LAve35189 = average_pooling2D_layer([[[[1.5992]], [[1.5191]]]], 1, 1, Ave35189), 
LRes92022 = reshape_layer(Ave35189, [2, 1, 1, 1], Res92022), 
LMin29106 = minimum_layer([[[[[[0.1742]]], [[[0.9373]]]]], [[[[[0.3535]]], [[[0.1508]]]]]], Min29106), 
LMax5020 = maximum_layer([Res92022,Min29106], Max5020), 
LRes47022 = reshape_layer(Max5020, [2, 1, 1], Res47022), 
LRes62527 = reshape_layer(Res47022, [2, 1], Res62527), 
LCon72515 = concatenate_layer([Res62527,[[[0.5179], [0.1159]]]], 2, Con72515), 
LAdd17908 = add_layer([[[[0.6639, 0.3867], [0.1066, 0.8024]]], [[[0.532, 0.7695], [0.8842, 0.8403]]]], Add17908), 
LPer78187 = permute_layer(Add17908, 2,1, Per78187), 
LMax55166 = maximum_layer([Con72515,Per78187], Max55166), 
exec_layers([LAve35189,LRes92022,LMin29106,LMax5020,LRes47022,LRes62527,LCon72515,LAdd17908,LPer78187,LMax55166],["Ave35189","Res92022","Min29106","Max5020","Res47022","Res62527","Con72515","Add17908","Per78187","Max55166"],Max55166,"Max55166")

Actual (Unparsed): [[[1.5992000, 0.9908000], [1.5191000, 1.6427000]]]

Expected (Unparsed): [[[1.5992,0.9908],[1.5191,1.6427]]]

Actual:   [[[1.5992, 0.9908], [1.5191, 1.6427]]]

Expected: [[[1.5992, 0.9908], [1.5191, 1.6427]]]