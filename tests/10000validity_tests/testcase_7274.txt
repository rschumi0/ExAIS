import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave9036 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave9036 = tf.keras.layers.Input(shape=([1, 1]))

Ave9036 = keras.layers.Average(name = 'Ave9036', )([in0Ave9036,in1Ave9036])
Mas44391 = keras.layers.Masking(mask_value=2, name = 'Mas44391', )(Ave9036)
Fla4531 = keras.layers.Flatten(name = 'Fla4531', )(Mas44391)
model = tf.keras.models.Model(inputs=[in0Ave9036,in1Ave9036], outputs=Fla4531)
in0Ave9036 = tf.constant([[[0.3548]]])
in1Ave9036 = tf.constant([[[0.5266]]])
print (np.array2string(model.predict([in0Ave9036,in1Ave9036],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla4531.png')

LAve9036 = average_layer([[[[0.3548]]], [[[0.5266]]]], Ave9036), 
LMas44391 = masking_layer(Ave9036, 2, Mas44391), 
LFla4531 = flatten_layer(Mas44391, Fla4531), 
exec_layers([LAve9036,LMas44391,LFla4531],["Ave9036","Mas44391","Fla4531"],Fla4531,"Fla4531")

Actual (Unparsed): [[0.4407000]]

Expected (Unparsed): [[0.4407]]

Actual:   [[0.4407]]

Expected: [[0.4407]]