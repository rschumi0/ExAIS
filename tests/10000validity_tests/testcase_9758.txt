import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer76635 = tf.keras.layers.Input(shape=([2, 2, 4, 1]))
in0Dot95106 = tf.keras.layers.Input(shape=([3]))
in1Dot95106 = tf.keras.layers.Input(shape=([3]))
in0Add52177 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add52177 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Add41467 = tf.keras.layers.Input(shape=([1, 1]))
in1Add41467 = tf.keras.layers.Input(shape=([1, 1]))
in0Con37871 = tf.keras.layers.Input(shape=([4, 23]))

Zer76635 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer76635', )(in0Zer76635)
Res42596 = keras.layers.Reshape((4, 4, 6), name = 'Res42596', )(Zer76635)
Res68692 = keras.layers.Reshape((4, 24), name = 'Res68692', )(Res42596)
Dot95106 = keras.layers.Dot(axes=(1, 1), name = 'Dot95106', )([in0Dot95106,in1Dot95106])
Res14147 = keras.layers.Reshape((1, 1), name = 'Res14147', )(Dot95106)
Zer9234 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer9234', )(Res14147)
Add52177 = keras.layers.Add(name = 'Add52177', )([in0Add52177,in1Add52177])
Res12315 = keras.layers.Reshape((2, 1), name = 'Res12315', )(Add52177)
Add41467 = keras.layers.Add(name = 'Add41467', )([in0Add41467,in1Add41467])
Zer62396 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer62396', )(Add41467)
Mul52605 = keras.layers.Multiply(name = 'Mul52605', )([Res12315,Zer62396])
Add48005 = keras.layers.Add(name = 'Add48005', )([Zer9234,Mul52605])
Zer88458 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer88458', )(Add48005)
Con37871 = keras.layers.Concatenate(axis=2, name = 'Con37871', )([Zer88458,in0Con37871])
Max94961 = keras.layers.Maximum(name = 'Max94961', )([Res68692,Con37871])
Fla82983 = keras.layers.Flatten(name = 'Fla82983', )(Max94961)
Res58227 = keras.layers.Reshape((96, 1), name = 'Res58227', )(Fla82983)
Res5297 = keras.layers.Reshape((96, 1, 1), name = 'Res5297', )(Res58227)
Cro85631 = keras.layers.Cropping2D(cropping=((84, 4), (0, 0)), name = 'Cro85631', )(Res5297)
model = tf.keras.models.Model(inputs=[in0Zer76635,in0Dot95106,in1Dot95106,in0Add52177,in1Add52177,in0Add41467,in1Add41467,in0Con37871], outputs=Cro85631)
in0Zer76635 = tf.constant([[[[[1.677], [1.3575], [1.4196], [1.9941]], [[1.1004], [1.4211], [1.7774], [1.8297]]], [[[1.3057], [1.9195], [1.2169], [1.6567]], [[1.5199], [1.2105], [1.2062], [1.2438]]]]])
in0Dot95106 = tf.constant([[0.7337, 0.6351, 0.2046]])
in1Dot95106 = tf.constant([[0.0978, 0.7968, 0.004]])
in0Add52177 = tf.constant([[[[0.5137]], [[0.9013]]]])
in1Add52177 = tf.constant([[[[0.8432]], [[0.852]]]])
in0Add41467 = tf.constant([[[0.1323]]])
in1Add41467 = tf.constant([[[0.3725]]])
in0Con37871 = tf.constant([[[0.2965, 0.5401, 0.3319, 0.8086, 0.7323, 0.8891, 0.5328, 0.8242, 0.1761, 0.8433, 0.7792, 0.4183, 0.9635, 0.576, 0.566, 0.8905, 0.7751, 0.5075, 0.7411, 0.7852, 0.0872, 0.9856, 0.5871], [0.8609, 0.4259, 0.7871, 0.3256, 0.2805, 0.5009, 0.6625, 0.1092, 0.314, 0.9645, 0.2973, 0.7499, 0.1421, 0.4977, 0.7445, 0.4076, 0.6625, 0.1588, 0.5924, 0.208, 0.5609, 0.4482, 0.8783], [0.2967, 0.2853, 0.3393, 0.0297, 0.1445, 0.9841, 0.6065, 0.923, 0.0187, 0.9088, 0.1397, 0.4853, 0.4067, 0.2637, 0.5769, 0.1327, 0.8393, 0.9921, 0.5105, 0.7391, 0.9963, 0.5288, 0.7253], [0.7595, 0.1993, 0.1195, 0.4128, 0.5936, 0.3954, 0.9116, 0.0719, 0.2687, 0.52, 0.6537, 0.8555, 0.0454, 0.6879, 0.5049, 0.4495, 0.6065, 0.0091, 0.1551, 0.1835, 0.0729, 0.9495, 0.1804]]])
print (np.array2string(model.predict([in0Zer76635,in0Dot95106,in1Dot95106,in0Add52177,in1Add52177,in0Add41467,in1Add41467,in0Con37871],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro85631.png')

LZer76635 = zero_padding3D_layer([[[[[1.677], [1.3575], [1.4196], [1.9941]], [[1.1004], [1.4211], [1.7774], [1.8297]]], [[[1.3057], [1.9195], [1.2169], [1.6567]], [[1.5199], [1.2105], [1.2062], [1.2438]]]]], 1, 1, 1, 1, 1, 1, Zer76635), 
LRes42596 = reshape_layer(Zer76635, [4, 4, 6], Res42596), 
LRes68692 = reshape_layer(Res42596, [4, 24], Res68692), 
LDot95106 = dot_layer([[0.7337, 0.6351, 0.2046]], [[0.0978, 0.7968, 0.004]], 1, 1, Dot95106), 
LRes14147 = reshape_layer(Dot95106, [1, 1], Res14147), 
LZer9234 = zero_padding1D_layer(Res14147, 1, 0, Zer9234), 
LAdd52177 = add_layer([[[[[0.5137]], [[0.9013]]]], [[[[0.8432]], [[0.852]]]]], Add52177), 
LRes12315 = reshape_layer(Add52177, [2, 1], Res12315), 
LAdd41467 = add_layer([[[[0.1323]]], [[[0.3725]]]], Add41467), 
LZer62396 = zero_padding1D_layer(Add41467, 1, 0, Zer62396), 
LMul52605 = multiply_layer([Res12315,Zer62396], Mul52605), 
LAdd48005 = add_layer([Zer9234,Mul52605], Add48005), 
LZer88458 = zero_padding1D_layer(Add48005, 2, 0, Zer88458), 
LCon37871 = concatenate_layer([Zer88458,[[[0.2965, 0.5401, 0.3319, 0.8086, 0.7323, 0.8891, 0.5328, 0.8242, 0.1761, 0.8433, 0.7792, 0.4183, 0.9635, 0.576, 0.566, 0.8905, 0.7751, 0.5075, 0.7411, 0.7852, 0.0872, 0.9856, 0.5871], [0.8609, 0.4259, 0.7871, 0.3256, 0.2805, 0.5009, 0.6625, 0.1092, 0.314, 0.9645, 0.2973, 0.7499, 0.1421, 0.4977, 0.7445, 0.4076, 0.6625, 0.1588, 0.5924, 0.208, 0.5609, 0.4482, 0.8783], [0.2967, 0.2853, 0.3393, 0.0297, 0.1445, 0.9841, 0.6065, 0.923, 0.0187, 0.9088, 0.1397, 0.4853, 0.4067, 0.2637, 0.5769, 0.1327, 0.8393, 0.9921, 0.5105, 0.7391, 0.9963, 0.5288, 0.7253], [0.7595, 0.1993, 0.1195, 0.4128, 0.5936, 0.3954, 0.9116, 0.0719, 0.2687, 0.52, 0.6537, 0.8555, 0.0454, 0.6879, 0.5049, 0.4495, 0.6065, 0.0091, 0.1551, 0.1835, 0.0729, 0.9495, 0.1804]]]], 2, Con37871), 
LMax94961 = maximum_layer([Res68692,Con37871], Max94961), 
LFla82983 = flatten_layer(Max94961, Fla82983), 
LRes58227 = reshape_layer(Fla82983, [96, 1], Res58227), 
LRes5297 = reshape_layer(Res58227, [96, 1, 1], Res5297), 
LCro85631 = cropping2D_layer(Res5297, 84, 4, 0, 0, Cro85631), 
exec_layers([LZer76635,LRes42596,LRes68692,LDot95106,LRes14147,LZer9234,LAdd52177,LRes12315,LAdd41467,LZer62396,LMul52605,LAdd48005,LZer88458,LCon37871,LMax94961,LFla82983,LRes58227,LRes5297,LCro85631],["Zer76635","Res42596","Res68692","Dot95106","Res14147","Zer9234","Add52177","Res12315","Add41467","Zer62396","Mul52605","Add48005","Zer88458","Con37871","Max94961","Fla82983","Res58227","Res5297","Cro85631"],Cro85631,"Cro85631")

Actual (Unparsed): [[[[0.8555000]], [[0.0454000]], [[0.6879000]], [[0.5049000]], [[0.4495000]], [[0.6065000]], [[0.0091000]], [[0.1551000]]]]

Expected (Unparsed): [[[[0.8555]],[[0.0454]],[[0.6879]],[[0.5049]],[[0.4495]],[[0.6065]],[[0.0091]],[[0.1551]]]]

Actual:   [[[[0.8555]], [[0.0454]], [[0.6879]], [[0.5049]], [[0.4495]], [[0.6065]], [[0.0091]], [[0.1551]]]]

Expected: [[[[0.8555]], [[0.0454]], [[0.6879]], [[0.5049]], [[0.4495]], [[0.6065]], [[0.0091]], [[0.1551]]]]