import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot15944 = tf.keras.layers.Input(shape=([2]))
in1Dot15944 = tf.keras.layers.Input(shape=([2]))
in0Con42930 = tf.keras.layers.Input(shape=([1]))
in0Ave88915 = tf.keras.layers.Input(shape=([1, 2, 2]))

Dot15944 = keras.layers.Dot(axes=(1, 1), name = 'Dot15944', )([in0Dot15944,in1Dot15944])
ReL51223 = keras.layers.ReLU(max_value=1.5982771569269774, negative_slope=6.011775131554064, threshold=8.24389836406516, name = 'ReL51223', )(Dot15944)
Con42930 = keras.layers.Concatenate(axis=1, name = 'Con42930', )([ReL51223,in0Con42930])
Ave88915 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave88915', )(in0Ave88915)
Res17860 = keras.layers.Reshape((1, 2), name = 'Res17860', )(Ave88915)
Glo61221 = keras.layers.GlobalMaxPool1D(name = 'Glo61221', )(Res17860)
Ave82315 = keras.layers.Average(name = 'Ave82315', )([Con42930,Glo61221])
model = tf.keras.models.Model(inputs=[in0Dot15944,in1Dot15944,in0Con42930,in0Ave88915], outputs=Ave82315)
in0Dot15944 = tf.constant([[0.3159, 0.2783]])
in1Dot15944 = tf.constant([[0.6702, 0.2259]])
in0Con42930 = tf.constant([[0.0872]])
in0Ave88915 = tf.constant([[[[1.9065, 1.6243], [1.6506, 1.3509]]]])
print (np.array2string(model.predict([in0Dot15944,in1Dot15944,in0Con42930,in0Ave88915],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave82315.png')

LDot15944 = dot_layer([[0.3159, 0.2783]], [[0.6702, 0.2259]], 1, 1, Dot15944), 
LReL51223 = relu_layer(Dot15944, 1.5982771569269774, 6.011775131554064, 8.24389836406516, ReL51223), 
LCon42930 = concatenate_layer([ReL51223,[[0.0872]]], 1, Con42930), 
LAve88915 = average_pooling2D_layer([[[[1.9065, 1.6243], [1.6506, 1.3509]]]], 1, 2, Ave88915), 
LRes17860 = reshape_layer(Ave88915, [1, 2], Res17860), 
LGlo61221 = global_max_pool1D_layer(Res17860, Glo61221), 
LAve82315 = average_layer([Con42930,Glo61221], Ave82315), 
exec_layers([LDot15944,LReL51223,LCon42930,LAve88915,LRes17860,LGlo61221,LAve82315],["Dot15944","ReL51223","Con42930","Ave88915","Res17860","Glo61221","Ave82315"],Ave82315,"Ave82315")

Actual (Unparsed): [[-23.0655875, 0.7874000]]

Expected (Unparsed): [[-23.06558750382862,0.7874]]

Actual:   [[-23.0655, 0.7874]]

Expected: [[-23.0655, 0.7874]]