import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer78391 = tf.keras.layers.Input(shape=([4, 1, 4]))
in0Ave3169 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave3169 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Zer78391 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer78391', )(in0Zer78391)
Res7914 = keras.layers.Reshape((6, 3, 4, 1), name = 'Res7914', )(Zer78391)
Ave3169 = keras.layers.Average(name = 'Ave3169', )([in0Ave3169,in1Ave3169])
Zer72052 = keras.layers.ZeroPadding3D(padding=((5, 0), (2, 0), (3, 0)), name = 'Zer72052', )(Ave3169)
Sub74997 = keras.layers.Subtract(name = 'Sub74997', )([Res7914,Zer72052])
model = tf.keras.models.Model(inputs=[in0Zer78391,in0Ave3169,in1Ave3169], outputs=Sub74997)
in0Zer78391 = tf.constant([[[[1.9539, 1.7988, 1.1933, 1.7048]], [[1.3462, 1.117, 1.5041, 1.6711]], [[1.5628, 1.0089, 1.692, 1.8462]], [[1.8615, 1.6296, 1.129, 1.9554]]]])
in0Ave3169 = tf.constant([[[[[0.0733]]]]])
in1Ave3169 = tf.constant([[[[[0.2685]]]]])
print (np.array2string(model.predict([in0Zer78391,in0Ave3169,in1Ave3169],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub74997.png')

LZer78391 = zero_padding2D_layer([[[[1.9539, 1.7988, 1.1933, 1.7048]], [[1.3462, 1.117, 1.5041, 1.6711]], [[1.5628, 1.0089, 1.692, 1.8462]], [[1.8615, 1.6296, 1.129, 1.9554]]]], 1, 1, 1, 1, Zer78391), 
LRes7914 = reshape_layer(Zer78391, [6, 3, 4, 1], Res7914), 
LAve3169 = average_layer([[[[[[0.0733]]]]], [[[[[0.2685]]]]]], Ave3169), 
LZer72052 = zero_padding3D_layer(Ave3169, 5, 0, 2, 0, 3, 0, Zer72052), 
LSub74997 = subtract_layer(Res7914,Zer72052, Sub74997), 
exec_layers([LZer78391,LRes7914,LAve3169,LZer72052,LSub74997],["Zer78391","Res7914","Ave3169","Zer72052","Sub74997"],Sub74997,"Sub74997")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[1.9539000], [1.7988000], [1.1933000], [1.7048000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[1.3462000], [1.1170000], [1.5041000], [1.6711000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[1.5628000], [1.0089000], [1.6920000], [1.8462000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[1.8615000], [1.6296000], [1.1289999], [1.9554000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [-0.1709000]]]]]

Expected (Unparsed): [[[[[0],[0],[0],[0]],[[0],[0],[0],[0]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[1.9539],[1.7988],[1.1933],[1.7048]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[1.3462],[1.117],[1.5041],[1.6711]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[1.5628],[1.0089],[1.692],[1.8462]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[1.8615],[1.6296],[1.129],[1.9554]],[[0],[0],[0],[0]]],[[[0],[0],[0],[0]],[[0],[0],[0],[0]],[[0],[0],[0],[-0.1709]]]]]

Actual:   [[[[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.9539], [1.7988], [1.1933], [1.7048]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.3462], [1.117], [1.5041], [1.6711]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.5628], [1.0089], [1.692], [1.8462]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.8615], [1.6296], [1.129], [1.9554]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [-0.1709]]]]]

Expected: [[[[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.9539], [1.7988], [1.1933], [1.7048]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.3462], [1.117], [1.5041], [1.6711]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.5628], [1.0089], [1.692], [1.8462]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[1.8615], [1.6296], [1.129], [1.9554]], [[0], [0], [0], [0]]], [[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [-0.1709]]]]]