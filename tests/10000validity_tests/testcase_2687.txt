import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave7696 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min21367 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Min21367 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Ave7696 = keras.layers.AveragePooling2D(pool_size=(2, 2), strides=(1, 1), padding='same', name = 'Ave7696', )(in0Ave7696)
Res83972 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res83972', )(Ave7696)
Min21367 = keras.layers.Minimum(name = 'Min21367', )([in0Min21367,in1Min21367])
Zer21806 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer21806', )(Min21367)
Min38656 = keras.layers.Minimum(name = 'Min38656', )([Res83972,Zer21806])
Mas4488 = keras.layers.Masking(mask_value=2, name = 'Mas4488', )(Min38656)
model = tf.keras.models.Model(inputs=[in0Ave7696,in0Min21367,in1Min21367], outputs=Mas4488)
in0Ave7696 = tf.constant([[[[1.6328], [1.2155]], [[1.2759], [1.9899]]]])
in0Min21367 = tf.constant([[[[[0.2416]]], [[[0.8287]]]]])
in1Min21367 = tf.constant([[[[[0.2401]]], [[[0.6638]]]]])
print (np.array2string(model.predict([in0Ave7696,in0Min21367,in1Min21367],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas4488.png')

LAve7696 = average_pooling2D_layer([[[[1.6328], [1.2155]], [[1.2759], [1.9899]]]], 2, 2, 1, 1, true, Ave7696), 
LRes83972 = reshape_layer(Ave7696, [2, 2, 1, 1], Res83972), 
LMin21367 = minimum_layer([[[[[[0.2416]]], [[[0.8287]]]]], [[[[[0.2401]]], [[[0.6638]]]]]], Min21367), 
LZer21806 = zero_padding3D_layer(Min21367, 0, 0, 1, 0, 0, 0, Zer21806), 
LMin38656 = minimum_layer([Res83972,Zer21806], Min38656), 
LMas4488 = masking_layer(Min38656, 2, Mas4488), 
exec_layers([LAve7696,LRes83972,LMin21367,LZer21806,LMin38656,LMas4488],["Ave7696","Res83972","Min21367","Zer21806","Min38656","Mas4488"],Mas4488,"Mas4488")

Actual (Unparsed): [[[[[0.0000000]], [[0.2401000]]], [[[0.0000000]], [[0.6638000]]]]]

Expected (Unparsed): [[[[[0]],[[0.2401]]],[[[0]],[[0.6638]]]]]

Actual:   [[[[[0]], [[0.2401]]], [[[0]], [[0.6638]]]]]

Expected: [[[[[0]], [[0.2401]]], [[[0]], [[0.6638]]]]]