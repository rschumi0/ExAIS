import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub10437 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))
in1Sub10437 = tf.keras.layers.Input(shape=([3, 3, 3, 2]))

Sub10437 = keras.layers.Subtract(name = 'Sub10437', )([in0Sub10437,in1Sub10437])
Fla6897 = keras.layers.Flatten(name = 'Fla6897', )(Sub10437)
model = tf.keras.models.Model(inputs=[in0Sub10437,in1Sub10437], outputs=Fla6897)
in0Sub10437 = tf.constant([[[[[0.7232, 0.6123], [0.7832, 0.6625], [0.166, 0.5885]], [[0.3388, 0.4528], [0.9653, 0.8185], [0.1992, 0.5791]], [[0.8399, 0.2447], [0.095, 0.5423], [0.9974, 0.1271]]], [[[0.9832, 0.1605], [0.9823, 0.4794], [0.1518, 0.4973]], [[0.2255, 0.9703], [0.3197, 0.4247], [0.9606, 0.6782]], [[0.4454, 0.2274], [0.3665, 0.7827], [0.9741, 0.3044]]], [[[0.8905, 0.1393], [0.6827, 0.3364], [0.7149, 0.6907]], [[0.112, 0.2512], [0.2386, 0.8398], [0.819, 0.9434]], [[0.2643, 0.236], [0.3221, 0.981], [0.3039, 0.9028]]]]])
in1Sub10437 = tf.constant([[[[[0.6701, 0.4672], [0.0467, 0.2792], [0.0179, 0.8175]], [[0.5684, 0.5355], [0.4605, 0.456], [0.3039, 0.4772]], [[0.6451, 0.3421], [0.1543, 0.4575], [0.3582, 0.7956]]], [[[0.3526, 0.9789], [0.3691, 0.3052], [0.8761, 0.0876]], [[0.2969, 0.8769], [0.2579, 0.2343], [0.1693, 0.0079]], [[0.6262, 0.0114], [0.6362, 0.5552], [0.6782, 0.0613]]], [[[0.5161, 0.6097], [0.0823, 0.4957], [0.4614, 0.9836]], [[0.4944, 0.3645], [0.0552, 0.0706], [0.9739, 0.0726]], [[0.5722, 0.652], [0.0866, 0.1506], [0.9766, 0.6824]]]]])
print (np.array2string(model.predict([in0Sub10437,in1Sub10437],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla6897.png')

LSub10437 = subtract_layer([[[[[0.7232, 0.6123], [0.7832, 0.6625], [0.166, 0.5885]], [[0.3388, 0.4528], [0.9653, 0.8185], [0.1992, 0.5791]], [[0.8399, 0.2447], [0.095, 0.5423], [0.9974, 0.1271]]], [[[0.9832, 0.1605], [0.9823, 0.4794], [0.1518, 0.4973]], [[0.2255, 0.9703], [0.3197, 0.4247], [0.9606, 0.6782]], [[0.4454, 0.2274], [0.3665, 0.7827], [0.9741, 0.3044]]], [[[0.8905, 0.1393], [0.6827, 0.3364], [0.7149, 0.6907]], [[0.112, 0.2512], [0.2386, 0.8398], [0.819, 0.9434]], [[0.2643, 0.236], [0.3221, 0.981], [0.3039, 0.9028]]]]], [[[[[0.6701, 0.4672], [0.0467, 0.2792], [0.0179, 0.8175]], [[0.5684, 0.5355], [0.4605, 0.456], [0.3039, 0.4772]], [[0.6451, 0.3421], [0.1543, 0.4575], [0.3582, 0.7956]]], [[[0.3526, 0.9789], [0.3691, 0.3052], [0.8761, 0.0876]], [[0.2969, 0.8769], [0.2579, 0.2343], [0.1693, 0.0079]], [[0.6262, 0.0114], [0.6362, 0.5552], [0.6782, 0.0613]]], [[[0.5161, 0.6097], [0.0823, 0.4957], [0.4614, 0.9836]], [[0.4944, 0.3645], [0.0552, 0.0706], [0.9739, 0.0726]], [[0.5722, 0.652], [0.0866, 0.1506], [0.9766, 0.6824]]]]], Sub10437), 
LFla6897 = flatten_layer(Sub10437, Fla6897), 
exec_layers([LSub10437,LFla6897],["Sub10437","Fla6897"],Fla6897,"Fla6897")

Actual (Unparsed): [[0.0531000, 0.1451000, 0.7365000, 0.3833000, 0.1481000, -0.2290000, -0.2296000, -0.0827000, 0.5048000, 0.3625000, -0.1047000, 0.1019000, 0.1948000, -0.0974000, -0.0593000, 0.0848000, 0.6392000, -0.6685000, 0.6306000, -0.8184000, 0.6132000, 0.1742000, -0.7243000, 0.4097000, -0.0714000, 0.0934000, 0.0618000, 0.1904000, 0.7913000, 0.6703000, -0.1808000, 0.2160000, -0.2697000, 0.2275000, 0.2959000, 0.2431000, 0.3744000, -0.4704000, 0.6004000, -0.1593000, 0.2535000, -0.2929000, -0.3824000, -0.1133000, 0.1834000, 0.7692000, -0.1549000, 0.8708000, -0.3079000, -0.4160000, 0.2355000, 0.8304000, -0.6727000, 0.2204000]]

Expected (Unparsed): [[0.053099999999999925,0.14509999999999995,0.7365,0.3833,0.1481,-0.22899999999999998,-0.22960000000000003,-0.0827,0.5048,0.3625,-0.10470000000000002,0.10189999999999994,0.19479999999999997,-0.09740000000000001,-0.05929999999999999,0.08479999999999999,0.6392,-0.6685,0.6305999999999999,-0.8184,0.6132,0.17419999999999997,-0.7242999999999999,0.4097,-0.07139999999999999,0.09340000000000004,0.061799999999999966,0.1904,0.7913,0.6703,-0.18079999999999996,0.216,-0.2697,0.22749999999999992,0.29589999999999994,0.2431,0.37439999999999996,-0.47040000000000004,0.6003999999999999,-0.1593,0.2535,-0.29290000000000005,-0.3824,-0.11330000000000001,0.1834,0.7692,-0.15490000000000004,0.8708,-0.30790000000000006,-0.41600000000000004,0.2355,0.8304,-0.6727000000000001,0.22040000000000004]]

Actual:   [[0.0531, 0.1451, 0.7365, 0.3833, 0.1481, -0.229, -0.2296, -0.0827, 0.5048, 0.3625, -0.1047, 0.1019, 0.1948, -0.0974, -0.0593, 0.0848, 0.6392, -0.6685, 0.6306, -0.8184, 0.6132, 0.1742, -0.7243, 0.4097, -0.0714, 0.0934, 0.0618, 0.1904, 0.7913, 0.6703, -0.1808, 0.216, -0.2697, 0.2275, 0.2959, 0.2431, 0.3744, -0.4704, 0.6004, -0.1593, 0.2535, -0.2929, -0.3824, -0.1133, 0.1834, 0.7692, -0.1549, 0.8708, -0.3079, -0.416, 0.2355, 0.8304, -0.6727, 0.2204]]

Expected: [[0.0531, 0.1451, 0.7365, 0.3833, 0.1481, -0.2289, -0.2296, -0.0827, 0.5048, 0.3625, -0.1047, 0.1019, 0.1948, -0.0974, -0.0592, 0.0848, 0.6392, -0.6685, 0.6306, -0.8184, 0.6132, 0.1742, -0.7242, 0.4097, -0.0713, 0.0935, 0.0618, 0.1904, 0.7913, 0.6703, -0.1807, 0.216, -0.2697, 0.2275, 0.2959, 0.2431, 0.3744, -0.4704, 0.6004, -0.1593, 0.2535, -0.2929, -0.3824, -0.1133, 0.1834, 0.7692, -0.1549, 0.8708, -0.3079, -0.416, 0.2355, 0.8304, -0.6727, 0.2205]]