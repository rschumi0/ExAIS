import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lea18407 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Dot39223 = tf.keras.layers.Input(shape=([2]))
in1Dot39223 = tf.keras.layers.Input(shape=([2]))
in0Min99589 = tf.keras.layers.Input(shape=([1, 1]))
in1Min99589 = tf.keras.layers.Input(shape=([1, 1]))
in0PRe50058 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con7022 = tf.keras.layers.Input(shape=([8]))

Lea18407 = keras.layers.LeakyReLU(alpha=2.0822653924435213, name = 'Lea18407', input_shape=(1, 1, 1))(in0Lea18407)
Zer92794 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer92794', )(Lea18407)
Max53732 = keras.layers.MaxPool2D(pool_size=(2, 1), name = 'Max53732', )(Zer92794)
ReL47118 = keras.layers.ReLU(max_value=4.5283419242646055, negative_slope=2.930463554879425, threshold=7.8823013293831785, name = 'ReL47118', )(Max53732)
Res35665 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res35665', )(ReL47118)
Zer68320 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer68320', )(Res35665)
Dot39223 = keras.layers.Dot(axes=(1, 1), name = 'Dot39223', )([in0Dot39223,in1Dot39223])
Res13026 = keras.layers.Reshape((1, 1), name = 'Res13026', )(Dot39223)
Res5966 = keras.layers.Reshape((1, 1, 1), name = 'Res5966', )(Res13026)
Res63098 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res63098', )(Res5966)
Up_9191 = keras.layers.UpSampling3D(size=(1, 2, 2), name = 'Up_9191', )(Res63098)
Zer12474 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer12474', )(Up_9191)
Min16448 = keras.layers.Minimum(name = 'Min16448', )([Zer68320,Zer12474])
Res256 = keras.layers.Reshape((1, 3, 3), name = 'Res256', )(Min16448)
Res73692 = keras.layers.Reshape((1, 9), name = 'Res73692', )(Res256)
Min99589 = keras.layers.Minimum(name = 'Min99589', )([in0Min99589,in1Min99589])
Sof34556 = keras.layers.Softmax(axis=1, name = 'Sof34556', )(Min99589)
Thr17028 = keras.layers.ThresholdedReLU(theta=9.908335915287003, name = 'Thr17028', )(Sof34556)
Dot64608 = keras.layers.Dot(axes=(1, 1), name = 'Dot64608', )([Res73692,Thr17028])
Fla86978 = keras.layers.Flatten(name = 'Fla86978', )(Dot64608)
PRe50058 = keras.layers.PReLU(name = 'PRe50058', input_shape=(2, 1, 1, 1))(in0PRe50058)
Res57703 = keras.layers.Reshape((2, 1, 1), name = 'Res57703', )(PRe50058)
Sep57807 = keras.layers.SeparableConv2D(4, (1, 1),strides=(1, 1), padding='same', name = 'Sep57807', )(Res57703)
Res46403 = keras.layers.Reshape((2, 1, 4, 1), name = 'Res46403', )(Sep57807)
Glo46336 = keras.layers.GlobalMaxPool3D(name = 'Glo46336', )(Res46403)
Con7022 = keras.layers.Concatenate(axis=1, name = 'Con7022', )([Glo46336,in0Con7022])
Mul25311 = keras.layers.Multiply(name = 'Mul25311', )([Fla86978,Con7022])
model = tf.keras.models.Model(inputs=[in0Lea18407,in0Dot39223,in1Dot39223,in0Min99589,in1Min99589,in0PRe50058,in0Con7022], outputs=Mul25311)
w = model.get_layer('PRe50058').get_weights() 
w[0] = np.array([[[[0.4102]]], [[[0.0316]]]])
model.get_layer('PRe50058').set_weights(w) 
w = model.get_layer('Sep57807').get_weights() 
w[0] = np.array([[[[0.3311]]]])
w[1] = np.array([[[[0.0591, 0.1076, 0.3379, 0.8414]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep57807').set_weights(w) 
in0Lea18407 = tf.constant([[[[0.4108]]]])
in0Dot39223 = tf.constant([[0.562, 0.5742]])
in1Dot39223 = tf.constant([[0.2912, 0.5164]])
in0Min99589 = tf.constant([[[0.9369]]])
in1Min99589 = tf.constant([[[0.1234]]])
in0PRe50058 = tf.constant([[[[[0.4744]]], [[[0.202]]]]])
in0Con7022 = tf.constant([[0.9116, 0.6006, 0.0165, 0.9833, 0.5745, 0.8086, 0.8129, 0.9563]])
print (np.array2string(model.predict([in0Lea18407,in0Dot39223,in1Dot39223,in0Min99589,in1Min99589,in0PRe50058,in0Con7022],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul25311.png')

LLea18407 = leaky_relu_layer([[[[0.4108]]]], 2.0822653924435213, Lea18407), 
LZer92794 = zero_padding2D_layer(Lea18407, 1, 1, 1, 1, Zer92794), 
LMax53732 = max_pool2D_layer(Zer92794, 2, 1, Max53732), 
LReL47118 = relu_layer(Max53732, 4.5283419242646055, 2.930463554879425, 7.8823013293831785, ReL47118), 
LRes35665 = reshape_layer(ReL47118, [1, 3, 1, 1], Res35665), 
LZer68320 = zero_padding3D_layer(Res35665, 0, 0, 0, 0, 2, 0, Zer68320), 
LDot39223 = dot_layer([[0.562, 0.5742]], [[0.2912, 0.5164]], 1, 1, Dot39223), 
LRes13026 = reshape_layer(Dot39223, [1, 1], Res13026), 
LRes5966 = reshape_layer(Res13026, [1, 1, 1], Res5966), 
LRes63098 = reshape_layer(Res5966, [1, 1, 1, 1], Res63098), 
LUp_9191 = up_sampling3D_layer(Res63098, 1, 2, 2, Up_9191), 
LZer12474 = zero_padding3D_layer(Up_9191, 0, 0, 1, 0, 1, 0, Zer12474), 
LMin16448 = minimum_layer([Zer68320,Zer12474], Min16448), 
LRes256 = reshape_layer(Min16448, [1, 3, 3], Res256), 
LRes73692 = reshape_layer(Res256, [1, 9], Res73692), 
LMin99589 = minimum_layer([[[[0.9369]]], [[[0.1234]]]], Min99589), 
LSof34556 = softmax_layer(Min99589, 1, Sof34556), 
LThr17028 = thresholded_relu_layer(Sof34556, 9.908335915287003, Thr17028), 
LDot64608 = dot_layer(Res73692,Thr17028, 1, 1, Dot64608), 
LFla86978 = flatten_layer(Dot64608, Fla86978), 
LPRe50058 = prelu_layer([[[[[0.4744]]], [[[0.202]]]]], [[[[0.4102]]], [[[0.0316]]]], PRe50058), 
LRes57703 = reshape_layer(PRe50058, [2, 1, 1], Res57703), 
LSep57807 = separable_conv2D_layer(Res57703, 1, 1,[[[[[0.3311]]]],[[[[0.0591, 0.1076, 0.3379, 0.8414]]]]],[0, 0, 0, 0], 1, 1, true, Sep57807), 
LRes46403 = reshape_layer(Sep57807, [2, 1, 4, 1], Res46403), 
LGlo46336 = global_max_pool3D_layer(Res46403, Glo46336), 
LCon7022 = concatenate_layer([Glo46336,[[0.9116, 0.6006, 0.0165, 0.9833, 0.5745, 0.8086, 0.8129, 0.9563]]], 1, Con7022), 
LMul25311 = multiply_layer([Fla86978,Con7022], Mul25311), 
exec_layers([LLea18407,LZer92794,LMax53732,LReL47118,LRes35665,LZer68320,LDot39223,LRes13026,LRes5966,LRes63098,LUp_9191,LZer12474,LMin16448,LRes256,LRes73692,LMin99589,LSof34556,LThr17028,LDot64608,LFla86978,LPRe50058,LRes57703,LSep57807,LRes46403,LGlo46336,LCon7022,LMul25311],["Lea18407","Zer92794","Max53732","ReL47118","Res35665","Zer68320","Dot39223","Res13026","Res5966","Res63098","Up_9191","Zer12474","Min16448","Res256","Res73692","Min99589","Sof34556","Thr17028","Dot64608","Fla86978","PRe50058","Res57703","Sep57807","Res46403","Glo46336","Con7022","Mul25311"],Mul25311,"Mul25311")

Actual (Unparsed): [[0.0000000, 0.0000000, -0.0000000, 0.0000000, 0.0000000, -0.0000000, 0.0000000, 0.0000000, -0.0000000]]

Expected (Unparsed): [[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]]

Actual:   [[0, 0, -0, 0, 0, -0, 0, 0, -0]]

Expected: [[0, 0, 0, 0, 0, 0, 0, 0, 0]]