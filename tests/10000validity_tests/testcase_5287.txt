import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul51334 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul51334 = tf.keras.layers.Input(shape=([1, 1, 1]))

Mul51334 = keras.layers.Multiply(name = 'Mul51334', )([in0Mul51334,in1Mul51334])
Zer91823 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer91823', )(Mul51334)
Res80055 = keras.layers.Reshape((3, 3), name = 'Res80055', )(Zer91823)
Glo83510 = keras.layers.GlobalAveragePooling1D(name = 'Glo83510', )(Res80055)
Res36459 = keras.layers.Reshape((3, 1), name = 'Res36459', )(Glo83510)
Res41395 = keras.layers.Reshape((3, 1, 1), name = 'Res41395', )(Res36459)
Max1703 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(1, 11), padding='same', name = 'Max1703', )(Res41395)
model = tf.keras.models.Model(inputs=[in0Mul51334,in1Mul51334], outputs=Max1703)
in0Mul51334 = tf.constant([[[[0.9845]]]])
in1Mul51334 = tf.constant([[[[0.8836]]]])
print (np.array2string(model.predict([in0Mul51334,in1Mul51334],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max1703.png')

LMul51334 = multiply_layer([[[[[0.9845]]]], [[[[0.8836]]]]], Mul51334), 
LZer91823 = zero_padding2D_layer(Mul51334, 1, 1, 1, 1, Zer91823), 
LRes80055 = reshape_layer(Zer91823, [3, 3], Res80055), 
LGlo83510 = global_average_pooling1D_layer(Res80055, Glo83510), 
LRes36459 = reshape_layer(Glo83510, [3, 1], Res36459), 
LRes41395 = reshape_layer(Res36459, [3, 1, 1], Res41395), 
LMax1703 = max_pool2D_layer(Res41395, 2, 1, 1, 11, true, Max1703), 
exec_layers([LMul51334,LZer91823,LRes80055,LGlo83510,LRes36459,LRes41395,LMax1703],["Mul51334","Zer91823","Res80055","Glo83510","Res36459","Res41395","Max1703"],Max1703,"Max1703")

Actual (Unparsed): [[[[0.2899681]], [[0.2899681]], [[0.0000000]]]]

Expected (Unparsed): [[[[0.2899680666666667]],[[0.2899680666666667]],[[0]]]]

Actual:   [[[[0.29]], [[0.29]], [[0]]]]

Expected: [[[[0.29]], [[0.29]], [[0]]]]