import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot32604 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot32604 = tf.keras.layers.Input(shape=([3, 2]))

Dot32604 = keras.layers.Dot(axes=(2, 2), name = 'Dot32604', )([in0Dot32604,in1Dot32604])
PRe52357 = keras.layers.PReLU(name = 'PRe52357', )(Dot32604)
Up_45599 = keras.layers.UpSampling1D(size=(1), name = 'Up_45599', )(PRe52357)
model = tf.keras.models.Model(inputs=[in0Dot32604,in1Dot32604], outputs=Up_45599)
w = model.get_layer('PRe52357').get_weights() 
w[0] = np.array([[0.5498, 0.8028, 0.4849], [0.4662, 0.7956, 0.0182], [0.3501, 0.3367, 0.7672]])
model.get_layer('PRe52357').set_weights(w) 
in0Dot32604 = tf.constant([[[0.3472, 0.4157], [0.4324, 0.7462], [0.1938, 0.4378]]])
in1Dot32604 = tf.constant([[[0.6522, 0.8325], [0.9474, 0.7794], [0.0965, 0.6399]]])
print (np.array2string(model.predict([in0Dot32604,in1Dot32604],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_45599.png')

LDot32604 = dot_layer([[[0.3472, 0.4157], [0.4324, 0.7462], [0.1938, 0.4378]]], [[[0.6522, 0.8325], [0.9474, 0.7794], [0.0965, 0.6399]]], 2, 2, Dot32604), 
LPRe52357 = prelu_layer(Dot32604, [[0.5498, 0.8028, 0.4849], [0.4662, 0.7956, 0.0182], [0.3501, 0.3367, 0.7672]], PRe52357), 
LUp_45599 = up_sampling1D_layer(PRe52357, 1, Up_45599), 
exec_layers([LDot32604,LPRe52357,LUp_45599],["Dot32604","PRe52357","Up_45599"],Up_45599,"Up_45599")

Actual (Unparsed): [[[0.5725141, 0.6529338, 0.2995112], [0.9032228, 0.9912440, 0.5192200], [0.4908648, 0.5248274, 0.2988499]]]

Expected (Unparsed): [[[0.5725140900000001,0.65293386,0.29951123],[0.9032227800000001,0.99124404,0.51921998],[0.49086486000000007,0.52482744,0.29884992]]]

Actual:   [[[0.5726, 0.653, 0.2996], [0.9033, 0.9913, 0.5193], [0.4909, 0.5249, 0.2989]]]

Expected: [[[0.5726, 0.653, 0.2996], [0.9033, 0.9913, 0.5193], [0.4909, 0.5249, 0.2989]]]