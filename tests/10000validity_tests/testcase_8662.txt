import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max16891 = tf.keras.layers.Input(shape=([1, 2]))
in0Con99749 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Sub2019 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub2019 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Con38975 = tf.keras.layers.Input(shape=([2, 24]))
in0Zer74152 = tf.keras.layers.Input(shape=([3, 4, 3, 1]))

Max16891 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max16891', )(in0Max16891)
Res51145 = keras.layers.Reshape((1, 2, 1), name = 'Res51145', )(Max16891)
Zer79375 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer79375', )(Res51145)
Con99749 = keras.layers.Concatenate(axis=3, name = 'Con99749', )([Zer79375,in0Con99749])
Sub2019 = keras.layers.Subtract(name = 'Sub2019', )([in0Sub2019,in1Sub2019])
Ave23622 = keras.layers.Average(name = 'Ave23622', )([Con99749,Sub2019])
Res40665 = keras.layers.Reshape((2, 6), name = 'Res40665', )(Ave23622)
Con38975 = keras.layers.Concatenate(axis=2, name = 'Con38975', )([Res40665,in0Con38975])
Zer74152 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer74152', )(in0Zer74152)
Res40544 = keras.layers.Reshape((5, 6, 5), name = 'Res40544', )(Zer74152)
Res38182 = keras.layers.Reshape((5, 30), name = 'Res38182', )(Res40544)
Dot70327 = keras.layers.Dot(axes=(2, 2), name = 'Dot70327', )([Con38975,Res38182])
Cro19740 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro19740', )(Dot70327)
model = tf.keras.models.Model(inputs=[in0Max16891,in0Con99749,in0Sub2019,in1Sub2019,in0Con38975,in0Zer74152], outputs=Cro19740)
in0Max16891 = tf.constant([[[1.3409, 1.8094]]])
in0Con99749 = tf.constant([[[[0.0626], [0.7972], [0.9393]], [[0.977], [0.5878], [0.3498]]]])
in0Sub2019 = tf.constant([[[[0.222, 0.3351], [0.0216, 0.0174], [0.7178, 0.5684]], [[0.2901, 0.9053], [0.292, 0.6665], [0.1201, 0.5603]]]])
in1Sub2019 = tf.constant([[[[0.9729, 0.1708], [0.9182, 0.328], [0.7539, 0.9061]], [[0.5196, 0.9799], [0.9223, 0.0099], [0.2913, 0.0775]]]])
in0Con38975 = tf.constant([[[0.7166, 0.9053, 0.3489, 0.8468, 0.7848, 0.2406, 0.4949, 0.3786, 0.0795, 0.5138, 0.4986, 0.5895, 0.8978, 0.2841, 0.6267, 0.816, 0.3906, 0.6379, 0.0916, 0.898, 0.3659, 0.0215, 0.4365, 0.0387], [0.0209, 0.0267, 0.2726, 0.8583, 0.2194, 0.063, 0.778, 0.1385, 0.0892, 0.8593, 0.7932, 0.6546, 0.65, 0.7779, 0.0468, 0.9222, 0.9056, 0.9955, 0.0372, 0.6477, 0.3315, 0.7069, 0.3563, 0.1643]]])
in0Zer74152 = tf.constant([[[[[1.4561], [1.936], [1.5247]], [[1.6166], [1.5561], [1.7147]], [[1.6093], [1.0366], [1.3945]], [[1.5872], [1.4473], [1.5933]]], [[[1.3294], [1.3687], [1.1872]], [[1.9088], [1.1595], [1.5408]], [[1.6371], [1.239], [1.4773]], [[1.1267], [1.6491], [1.6243]]], [[[1.8115], [1.8592], [1.3602]], [[1.6308], [1.0505], [1.0166]], [[1.419], [1.8271], [1.5813]], [[1.5719], [1.2343], [1.4924]]]]])
print (np.array2string(model.predict([in0Max16891,in0Con99749,in0Sub2019,in1Sub2019,in0Con38975,in0Zer74152],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro19740.png')

LMax16891 = max_pool1D_layer([[[1.3409, 1.8094]]], 1, 1, false, Max16891), 
LRes51145 = reshape_layer(Max16891, [1, 2, 1], Res51145), 
LZer79375 = zero_padding2D_layer(Res51145, 1, 0, 1, 0, Zer79375), 
LCon99749 = concatenate_layer([Zer79375,[[[[0.0626], [0.7972], [0.9393]], [[0.977], [0.5878], [0.3498]]]]], 3, Con99749), 
LSub2019 = subtract_layer([[[[0.222, 0.3351], [0.0216, 0.0174], [0.7178, 0.5684]], [[0.2901, 0.9053], [0.292, 0.6665], [0.1201, 0.5603]]]], [[[[0.9729, 0.1708], [0.9182, 0.328], [0.7539, 0.9061]], [[0.5196, 0.9799], [0.9223, 0.0099], [0.2913, 0.0775]]]], Sub2019), 
LAve23622 = average_layer([Con99749,Sub2019], Ave23622), 
LRes40665 = reshape_layer(Ave23622, [2, 6], Res40665), 
LCon38975 = concatenate_layer([Res40665,[[[0.7166, 0.9053, 0.3489, 0.8468, 0.7848, 0.2406, 0.4949, 0.3786, 0.0795, 0.5138, 0.4986, 0.5895, 0.8978, 0.2841, 0.6267, 0.816, 0.3906, 0.6379, 0.0916, 0.898, 0.3659, 0.0215, 0.4365, 0.0387], [0.0209, 0.0267, 0.2726, 0.8583, 0.2194, 0.063, 0.778, 0.1385, 0.0892, 0.8593, 0.7932, 0.6546, 0.65, 0.7779, 0.0468, 0.9222, 0.9056, 0.9955, 0.0372, 0.6477, 0.3315, 0.7069, 0.3563, 0.1643]]]], 2, Con38975), 
LZer74152 = zero_padding3D_layer([[[[[1.4561], [1.936], [1.5247]], [[1.6166], [1.5561], [1.7147]], [[1.6093], [1.0366], [1.3945]], [[1.5872], [1.4473], [1.5933]]], [[[1.3294], [1.3687], [1.1872]], [[1.9088], [1.1595], [1.5408]], [[1.6371], [1.239], [1.4773]], [[1.1267], [1.6491], [1.6243]]], [[[1.8115], [1.8592], [1.3602]], [[1.6308], [1.0505], [1.0166]], [[1.419], [1.8271], [1.5813]], [[1.5719], [1.2343], [1.4924]]]]], 1, 1, 1, 1, 1, 1, Zer74152), 
LRes40544 = reshape_layer(Zer74152, [5, 6, 5], Res40544), 
LRes38182 = reshape_layer(Res40544, [5, 30], Res38182), 
LDot70327 = dot_layer(Con38975,Res38182, 2, 2, Dot70327), 
LCro19740 = cropping1D_layer(Dot70327, 0, 0, Cro19740), 
exec_layers([LMax16891,LRes51145,LZer79375,LCon99749,LSub2019,LAve23622,LRes40665,LCon38975,LZer74152,LRes40544,LRes38182,LDot70327,LCro19740],["Max16891","Res51145","Zer79375","Con99749","Sub2019","Ave23622","Res40665","Con38975","Zer74152","Res40544","Res38182","Dot70327","Cro19740"],Cro19740,"Cro19740")

Actual (Unparsed): [[[0.0000000, 10.6786147, 9.6950221, 10.6740462, 0.0000000], [0.0000000, 9.2697356, 8.8430062, 8.9216082, 0.0000000]]]

Expected (Unparsed): [[[0.0,10.67861459,9.69502207,10.674046060000002,0.0],[0.0,9.26973545,8.84300614,8.92160793,0.0]]]

Actual:   [[[0, 10.6787, 9.6951, 10.6741, 0], [0, 9.2698, 8.8431, 8.9217, 0]]]

Expected: [[[0, 10.6787, 9.6951, 10.6741, 0], [0, 9.2698, 8.8431, 8.9217, 0]]]