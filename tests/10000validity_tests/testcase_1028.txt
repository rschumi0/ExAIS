import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub67370 = tf.keras.layers.Input(shape=([3, 2, 2, 2]))
in1Sub67370 = tf.keras.layers.Input(shape=([3, 2, 2, 2]))

Sub67370 = keras.layers.Subtract(name = 'Sub67370', )([in0Sub67370,in1Sub67370])
Fla30619 = keras.layers.Flatten(name = 'Fla30619', )(Sub67370)
Res64632 = keras.layers.Reshape((24, 1), name = 'Res64632', )(Fla30619)
Res35353 = keras.layers.Reshape((24, 1, 1), name = 'Res35353', )(Res64632)
Res22069 = keras.layers.Reshape((24, 1, 1, 1), name = 'Res22069', )(Res35353)
Glo79930 = keras.layers.GlobalAveragePooling3D(name = 'Glo79930', )(Res22069)
model = tf.keras.models.Model(inputs=[in0Sub67370,in1Sub67370], outputs=Glo79930)
in0Sub67370 = tf.constant([[[[[0.8684, 0.1953], [0.1204, 0.8884]], [[0.4397, 0.3187], [0.0747, 0.6683]]], [[[0.189, 0.262], [0.2164, 0.3587]], [[0.6985, 0.1897], [0.2182, 0.2471]]], [[[0.8284, 0.3585], [0.5922, 0.4343]], [[0.7743, 0.2917], [0.6193, 0.5983]]]]])
in1Sub67370 = tf.constant([[[[[0.9509, 0.4969], [0.4512, 0.7317]], [[0.0181, 0.2628], [0.1259, 0.1911]]], [[[0.3822, 0.8987], [0.2074, 0.3037]], [[0.67, 0.0233], [0.3767, 0.5979]]], [[[0.0016, 0.1543], [0.5859, 0.4453]], [[0.3691, 0.8995], [0.3158, 0.5327]]]]])
print (np.array2string(model.predict([in0Sub67370,in1Sub67370],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo79930.png')

LSub67370 = subtract_layer([[[[[0.8684, 0.1953], [0.1204, 0.8884]], [[0.4397, 0.3187], [0.0747, 0.6683]]], [[[0.189, 0.262], [0.2164, 0.3587]], [[0.6985, 0.1897], [0.2182, 0.2471]]], [[[0.8284, 0.3585], [0.5922, 0.4343]], [[0.7743, 0.2917], [0.6193, 0.5983]]]]], [[[[[0.9509, 0.4969], [0.4512, 0.7317]], [[0.0181, 0.2628], [0.1259, 0.1911]]], [[[0.3822, 0.8987], [0.2074, 0.3037]], [[0.67, 0.0233], [0.3767, 0.5979]]], [[[0.0016, 0.1543], [0.5859, 0.4453]], [[0.3691, 0.8995], [0.3158, 0.5327]]]]], Sub67370), 
LFla30619 = flatten_layer(Sub67370, Fla30619), 
LRes64632 = reshape_layer(Fla30619, [24, 1], Res64632), 
LRes35353 = reshape_layer(Res64632, [24, 1, 1], Res35353), 
LRes22069 = reshape_layer(Res35353, [24, 1, 1, 1], Res22069), 
LGlo79930 = global_average_pooling3D_layer(Res22069, Glo79930), 
exec_layers([LSub67370,LFla30619,LRes64632,LRes35353,LRes22069,LGlo79930],["Sub67370","Fla30619","Res64632","Res35353","Res22069","Glo79930"],Glo79930,"Glo79930")

Actual (Unparsed): [[0.0190750]]

Expected (Unparsed): [[0.019075]]

Actual:   [[0.0191]]

Expected: [[0.0191]]