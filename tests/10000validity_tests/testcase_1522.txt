import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave55289 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Ave55289 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Max12760 = tf.keras.layers.Input(shape=([2, 2]))
in1Max12760 = tf.keras.layers.Input(shape=([2, 2]))
in0Con93196 = tf.keras.layers.Input(shape=([2, 2]))

Ave55289 = keras.layers.Average(name = 'Ave55289', )([in0Ave55289,in1Ave55289])
Res53495 = keras.layers.Reshape((2, 2, 2), name = 'Res53495', )(Ave55289)
Res50986 = keras.layers.Reshape((2, 4), name = 'Res50986', )(Res53495)
Max12760 = keras.layers.Maximum(name = 'Max12760', )([in0Max12760,in1Max12760])
Con93196 = keras.layers.Concatenate(axis=2, name = 'Con93196', )([Max12760,in0Con93196])
Mul69218 = keras.layers.Multiply(name = 'Mul69218', )([Res50986,Con93196])
Cro52258 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro52258', )(Mul69218)
model = tf.keras.models.Model(inputs=[in0Ave55289,in1Ave55289,in0Max12760,in1Max12760,in0Con93196], outputs=Cro52258)
in0Ave55289 = tf.constant([[[[[0.0317], [0.2465]], [[0.7413], [0.671]]], [[[0.7141], [0.9491]], [[0.9904], [0.0002]]]]])
in1Ave55289 = tf.constant([[[[[0.0514], [0.1039]], [[0.298], [0.8762]]], [[[0.0548], [0.9568]], [[0.5485], [0.4326]]]]])
in0Max12760 = tf.constant([[[0.1802, 0.1777], [0.0202, 0.0585]]])
in1Max12760 = tf.constant([[[0.0878, 0.7148], [0.3897, 0.3127]]])
in0Con93196 = tf.constant([[[0.076, 0.1637], [0.7157, 0.8402]]])
print (np.array2string(model.predict([in0Ave55289,in1Ave55289,in0Max12760,in1Max12760,in0Con93196],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro52258.png')

LAve55289 = average_layer([[[[[[0.0317], [0.2465]], [[0.7413], [0.671]]], [[[0.7141], [0.9491]], [[0.9904], [0.0002]]]]], [[[[[0.0514], [0.1039]], [[0.298], [0.8762]]], [[[0.0548], [0.9568]], [[0.5485], [0.4326]]]]]], Ave55289), 
LRes53495 = reshape_layer(Ave55289, [2, 2, 2], Res53495), 
LRes50986 = reshape_layer(Res53495, [2, 4], Res50986), 
LMax12760 = maximum_layer([[[[0.1802, 0.1777], [0.0202, 0.0585]]], [[[0.0878, 0.7148], [0.3897, 0.3127]]]], Max12760), 
LCon93196 = concatenate_layer([Max12760,[[[0.076, 0.1637], [0.7157, 0.8402]]]], 2, Con93196), 
LMul69218 = multiply_layer([Res50986,Con93196], Mul69218), 
LCro52258 = cropping1D_layer(Mul69218, 0, 0, Cro52258), 
exec_layers([LAve55289,LRes53495,LRes50986,LMax12760,LCon93196,LMul69218,LCro52258],["Ave55289","Res53495","Res50986","Max12760","Con93196","Mul69218","Cro52258"],Cro52258,"Cro52258")

Actual (Unparsed): [[[0.0074873, 0.1252330, 0.0394934, 0.1266383], [0.1498202, 0.2979875, 0.5506953, 0.1818193]]]

Expected (Unparsed): [[[0.0074873100000000005,0.12523296,0.0394934,0.12663832000000003],[0.14982016499999998,0.29798746499999995,0.5506953649999999,0.18181927999999997]]]

Actual:   [[[0.0075, 0.1253, 0.0395, 0.1267], [0.1499, 0.298, 0.5507, 0.1819]]]

Expected: [[[0.0075, 0.1253, 0.0395, 0.1267], [0.1499, 0.298, 0.5507, 0.1819]]]