import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo61959 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max87287 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max87287 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con41556 = tf.keras.layers.Input(shape=([4]))
in0Loc95000 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Glo36449 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con8227 = tf.keras.layers.Input(shape=([7]))
in0Glo28204 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con1497 = tf.keras.layers.Input(shape=([6]))
in0Con76924 = tf.keras.layers.Input(shape=([1]))

Glo61959 = keras.layers.GlobalMaxPool2D(name = 'Glo61959', )(in0Glo61959)
Max87287 = keras.layers.Maximum(name = 'Max87287', )([in0Max87287,in1Max87287])
Res48438 = keras.layers.Reshape((1, 4), name = 'Res48438', )(Max87287)
Fla49765 = keras.layers.Flatten(name = 'Fla49765', )(Res48438)
Con41556 = keras.layers.Concatenate(axis=1, name = 'Con41556', )([Fla49765,in0Con41556])
Loc95000 = keras.layers.LocallyConnected2D(4, (2, 1),strides=(1, 1), name = 'Loc95000', )(in0Loc95000)
Res15473 = keras.layers.Reshape((1, 8), name = 'Res15473', )(Loc95000)
Fla83603 = keras.layers.Flatten(name = 'Fla83603', )(Res15473)
Glo36449 = keras.layers.GlobalMaxPool2D(name = 'Glo36449', )(in0Glo36449)
Con8227 = keras.layers.Concatenate(axis=1, name = 'Con8227', )([Glo36449,in0Con8227])
Add69483 = keras.layers.Add(name = 'Add69483', )([Fla83603,Con8227])
Glo28204 = keras.layers.GlobalAveragePooling2D(name = 'Glo28204', )(in0Glo28204)
Con1497 = keras.layers.Concatenate(axis=1, name = 'Con1497', )([Glo28204,in0Con1497])
Max17942 = keras.layers.Maximum(name = 'Max17942', )([Add69483,Con1497])
Dot47281 = keras.layers.Dot(axes=(1, 1), name = 'Dot47281', )([Con41556,Max17942])
Con76924 = keras.layers.Concatenate(axis=1, name = 'Con76924', )([Dot47281,in0Con76924])
Add63206 = keras.layers.Add(name = 'Add63206', )([Glo61959,Con76924])
model = tf.keras.models.Model(inputs=[in0Glo61959,in0Max87287,in1Max87287,in0Con41556,in0Loc95000,in0Glo36449,in0Con8227,in0Glo28204,in0Con1497,in0Con76924], outputs=Add63206)
w = model.get_layer('Loc95000').get_weights() 
w[0] = np.array([[[0.4005, 0.0141, 0.4698, 0.9093], [0.2628, 0.5956, 0.0716, 0.5412]], [[0.3174, 0.4613, 0.4259, 0.9337], [0.7316, 0.1904, 0.4776, 0.2939]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc95000').set_weights(w) 
in0Glo61959 = tf.constant([[[[1.6404, 1.9532]]]])
in0Max87287 = tf.constant([[[[0.1639, 0.7004], [0.6081, 0.076]]]])
in1Max87287 = tf.constant([[[[0.5328, 0.8154], [0.2191, 0.1738]]]])
in0Con41556 = tf.constant([[0.0677, 0.5483, 0.306, 0.9752]])
in0Loc95000 = tf.constant([[[[0.0676], [0.507]], [[0.4748], [0.6652]]]])
in0Glo36449 = tf.constant([[[[1.4433], [1.4149]], [[1.8865], [1.2388]]]])
in0Con8227 = tf.constant([[0.1914, 0.6044, 0.9939, 0.8756, 0.4538, 0.8636, 0.4055]])
in0Glo28204 = tf.constant([[[[1.2853, 1.0915], [1.0305, 1.4838]]]])
in0Con1497 = tf.constant([[0.481, 0.7949, 0.9385, 0.878, 0.715, 0.736]])
in0Con76924 = tf.constant([[0.5294]])
print (np.array2string(model.predict([in0Glo61959,in0Max87287,in1Max87287,in0Con41556,in0Loc95000,in0Glo36449,in0Con8227,in0Glo28204,in0Con1497,in0Con76924],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add63206.png')

LGlo61959 = global_max_pool2D_layer([[[[1.6404, 1.9532]]]], Glo61959), 
LMax87287 = maximum_layer([[[[[0.1639, 0.7004], [0.6081, 0.076]]]], [[[[0.5328, 0.8154], [0.2191, 0.1738]]]]], Max87287), 
LRes48438 = reshape_layer(Max87287, [1, 4], Res48438), 
LFla49765 = flatten_layer(Res48438, Fla49765), 
LCon41556 = concatenate_layer([Fla49765,[[0.0677, 0.5483, 0.306, 0.9752]]], 1, Con41556), 
LLoc95000 = locally_connected2D_layer([[[[0.0676], [0.507]], [[0.4748], [0.6652]]]], 2, 1,[[[0.4005, 0.0141, 0.4698, 0.9093], [0.2628, 0.5956, 0.0716, 0.5412]], [[0.3174, 0.4613, 0.4259, 0.9337], [0.7316, 0.1904, 0.4776, 0.2939]]],[[[0, 0, 0, 0], [0, 0, 0, 0]]], 1, 1, Loc95000), 
LRes15473 = reshape_layer(Loc95000, [1, 8], Res15473), 
LFla83603 = flatten_layer(Res15473, Fla83603), 
LGlo36449 = global_max_pool2D_layer([[[[1.4433], [1.4149]], [[1.8865], [1.2388]]]], Glo36449), 
LCon8227 = concatenate_layer([Glo36449,[[0.1914, 0.6044, 0.9939, 0.8756, 0.4538, 0.8636, 0.4055]]], 1, Con8227), 
LAdd69483 = add_layer([Fla83603,Con8227], Add69483), 
LGlo28204 = global_average_pooling2D_layer([[[[1.2853, 1.0915], [1.0305, 1.4838]]]], Glo28204), 
LCon1497 = concatenate_layer([Glo28204,[[0.481, 0.7949, 0.9385, 0.878, 0.715, 0.736]]], 1, Con1497), 
LMax17942 = maximum_layer([Add69483,Con1497], Max17942), 
LDot47281 = dot_layer(Con41556,Max17942, 1, 1, Dot47281), 
LCon76924 = concatenate_layer([Dot47281,[[0.5294]]], 1, Con76924), 
LAdd63206 = add_layer([Glo61959,Con76924], Add63206), 
exec_layers([LGlo61959,LMax87287,LRes48438,LFla49765,LCon41556,LLoc95000,LRes15473,LFla83603,LGlo36449,LCon8227,LAdd69483,LGlo28204,LCon1497,LMax17942,LDot47281,LCon76924,LAdd63206],["Glo61959","Max87287","Res48438","Fla49765","Con41556","Loc95000","Res15473","Fla83603","Glo36449","Con8227","Add69483","Glo28204","Con1497","Max17942","Dot47281","Con76924","Add63206"],Add63206,"Add63206")

Actual (Unparsed): [[6.4718101, 2.4826000]]

Expected (Unparsed): [[6.47180993942,2.4826]]

Actual:   [[6.4719, 2.4826]]

Expected: [[6.4719, 2.4826]]