import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro96743 = tf.keras.layers.Input(shape=([1, 3, 2, 2]))
in0Max90108 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Max90108 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con32919 = tf.keras.layers.Input(shape=([1]))

Cro96743 = keras.layers.Cropping3D(cropping=((0, 0), (1, 1), (1, 0)), name = 'Cro96743', )(in0Cro96743)
Res75112 = keras.layers.Reshape((1, 1, 2), name = 'Res75112', )(Cro96743)
Res477 = keras.layers.Reshape((1, 2), name = 'Res477', )(Res75112)
Fla90669 = keras.layers.Flatten(name = 'Fla90669', )(Res477)
Max90108 = keras.layers.Maximum(name = 'Max90108', )([in0Max90108,in1Max90108])
Res64616 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res64616', )(Max90108)
Glo76449 = keras.layers.GlobalMaxPool3D(name = 'Glo76449', )(Res64616)
Con32919 = keras.layers.Concatenate(axis=1, name = 'Con32919', )([Glo76449,in0Con32919])
Ave45821 = keras.layers.Average(name = 'Ave45821', )([Fla90669,Con32919])
model = tf.keras.models.Model(inputs=[in0Cro96743,in0Max90108,in1Max90108,in0Con32919], outputs=Ave45821)
in0Cro96743 = tf.constant([[[[[1.4541, 1.1902], [1.0916, 1.0209]], [[1.7166, 1.9827], [1.9131, 1.5141]], [[1.8551, 1.3441], [1.4939, 1.4344]]]]])
in0Max90108 = tf.constant([[[[0.4038], [0.6914]], [[0.8458], [0.2776]]]])
in1Max90108 = tf.constant([[[[0.5278], [0.0292]], [[0.1257], [0.2413]]]])
in0Con32919 = tf.constant([[0.5091]])
print (np.array2string(model.predict([in0Cro96743,in0Max90108,in1Max90108,in0Con32919],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave45821.png')

LCro96743 = cropping3D_layer([[[[[1.4541, 1.1902], [1.0916, 1.0209]], [[1.7166, 1.9827], [1.9131, 1.5141]], [[1.8551, 1.3441], [1.4939, 1.4344]]]]], 0, 0, 1, 1, 1, 0, Cro96743), 
LRes75112 = reshape_layer(Cro96743, [1, 1, 2], Res75112), 
LRes477 = reshape_layer(Res75112, [1, 2], Res477), 
LFla90669 = flatten_layer(Res477, Fla90669), 
LMax90108 = maximum_layer([[[[[0.4038], [0.6914]], [[0.8458], [0.2776]]]], [[[[0.5278], [0.0292]], [[0.1257], [0.2413]]]]], Max90108), 
LRes64616 = reshape_layer(Max90108, [2, 2, 1, 1], Res64616), 
LGlo76449 = global_max_pool3D_layer(Res64616, Glo76449), 
LCon32919 = concatenate_layer([Glo76449,[[0.5091]]], 1, Con32919), 
LAve45821 = average_layer([Fla90669,Con32919], Ave45821), 
exec_layers([LCro96743,LRes75112,LRes477,LFla90669,LMax90108,LRes64616,LGlo76449,LCon32919,LAve45821],["Cro96743","Res75112","Res477","Fla90669","Max90108","Res64616","Glo76449","Con32919","Ave45821"],Ave45821,"Ave45821")

Actual (Unparsed): [[1.3794500, 1.0116000]]

Expected (Unparsed): [[1.37945,1.0116]]

Actual:   [[1.3795, 1.0116]]

Expected: [[1.3795, 1.0116]]