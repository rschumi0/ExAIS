import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub50943 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub50943 = tf.keras.layers.Input(shape=([2, 2]))
in0Thr20555 = tf.keras.layers.Input(shape=([2, 1, 1]))

Sub50943 = keras.layers.Subtract(name = 'Sub50943', )([in0Sub50943,in1Sub50943])
Thr20555 = keras.layers.ThresholdedReLU(theta=6.4012322169378235, name = 'Thr20555', input_shape=(2, 1, 1))(in0Thr20555)
Res12587 = keras.layers.Reshape((2, 1), name = 'Res12587', )(Thr20555)
Dot72601 = keras.layers.Dot(axes=(1, 1), name = 'Dot72601', )([Sub50943,Res12587])
Res38529 = keras.layers.Reshape((2, 1, 1), name = 'Res38529', )(Dot72601)
Res14654 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res14654', )(Res38529)
Glo25932 = keras.layers.GlobalAveragePooling3D(name = 'Glo25932', )(Res14654)
model = tf.keras.models.Model(inputs=[in0Sub50943,in1Sub50943,in0Thr20555], outputs=Glo25932)
in0Sub50943 = tf.constant([[[0.3044, 0.0557], [0.1513, 0.7156]]])
in1Sub50943 = tf.constant([[[0.4426, 0.1145], [0.0065, 0.7323]]])
in0Thr20555 = tf.constant([[[[0.749]], [[0.3216]]]])
print (np.array2string(model.predict([in0Sub50943,in1Sub50943,in0Thr20555],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo25932.png')

LSub50943 = subtract_layer([[[0.3044, 0.0557], [0.1513, 0.7156]]], [[[0.4426, 0.1145], [0.0065, 0.7323]]], Sub50943), 
LThr20555 = thresholded_relu_layer([[[[0.749]], [[0.3216]]]], 6.4012322169378235, Thr20555), 
LRes12587 = reshape_layer(Thr20555, [2, 1], Res12587), 
LDot72601 = dot_layer(Sub50943,Res12587, 1, 1, Dot72601), 
LRes38529 = reshape_layer(Dot72601, [2, 1, 1], Res38529), 
LRes14654 = reshape_layer(Res38529, [2, 1, 1, 1], Res14654), 
LGlo25932 = global_average_pooling3D_layer(Res14654, Glo25932), 
exec_layers([LSub50943,LThr20555,LRes12587,LDot72601,LRes38529,LRes14654,LGlo25932],["Sub50943","Thr20555","Res12587","Dot72601","Res38529","Res14654","Glo25932"],Glo25932,"Glo25932")

Actual (Unparsed): [[0.0000000]]

Expected (Unparsed): [[0.0]]

Actual:   [[0]]

Expected: [[0]]