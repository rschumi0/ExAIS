import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Thr31854 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Dot88623 = tf.keras.layers.Input(shape=([3]))
in1Dot88623 = tf.keras.layers.Input(shape=([3]))
in0Con61445 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Ave50812 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave50812 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con91066 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Add97884 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Add97884 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Thr31854 = keras.layers.ThresholdedReLU(theta=6.93496911980378, name = 'Thr31854', input_shape=(1, 2, 1, 2))(in0Thr31854)
Res73023 = keras.layers.Reshape((1, 2, 2), name = 'Res73023', )(Thr31854)
Dot88623 = keras.layers.Dot(axes=(1, 1), name = 'Dot88623', )([in0Dot88623,in1Dot88623])
Res47272 = keras.layers.Reshape((1, 1), name = 'Res47272', )(Dot88623)
Res37892 = keras.layers.Reshape((1, 1, 1), name = 'Res37892', )(Res47272)
Res66448 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res66448', )(Res37892)
Zer8196 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer8196', )(Res66448)
Con61445 = keras.layers.Concatenate(axis=4, name = 'Con61445', )([Zer8196,in0Con61445])
Ave50812 = keras.layers.Average(name = 'Ave50812', )([in0Ave50812,in1Ave50812])
Zer40205 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer40205', )(Ave50812)
Con91066 = keras.layers.Concatenate(axis=4, name = 'Con91066', )([Zer40205,in0Con91066])
Add97884 = keras.layers.Add(name = 'Add97884', )([in0Add97884,in1Add97884])
Sub37918 = keras.layers.Subtract(name = 'Sub37918', )([Con91066,Add97884])
Thr42389 = keras.layers.ThresholdedReLU(theta=6.211501034448215, name = 'Thr42389', )(Sub37918)
Mul30210 = keras.layers.Multiply(name = 'Mul30210', )([Con61445,Thr42389])
Res75552 = keras.layers.Reshape((1, 2, 2), name = 'Res75552', )(Mul30210)
Cro478 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro478', )(Res75552)
Add84171 = keras.layers.Add(name = 'Add84171', )([Res73023,Cro478])
model = tf.keras.models.Model(inputs=[in0Thr31854,in0Dot88623,in1Dot88623,in0Con61445,in0Ave50812,in1Ave50812,in0Con91066,in0Add97884,in1Add97884], outputs=Add84171)
in0Thr31854 = tf.constant([[[[[0.3268, 0.0237]], [[0.8433, 0.6155]]]]])
in0Dot88623 = tf.constant([[0.2161, 0.1465, 0.018]])
in1Dot88623 = tf.constant([[0.4911, 0.6386, 0.7384]])
in0Con61445 = tf.constant([[[[[0.9148]], [[0.6955]]]]])
in0Ave50812 = tf.constant([[[[[0.9618]]]]])
in1Ave50812 = tf.constant([[[[[0.7107]]]]])
in0Con91066 = tf.constant([[[[[0.3009]], [[0.0508]]]]])
in0Add97884 = tf.constant([[[[[0.6335, 0.9742]], [[0.5212, 0.7144]]]]])
in1Add97884 = tf.constant([[[[[0.4012, 0.9365]], [[0.9288, 0.1996]]]]])
print (np.array2string(model.predict([in0Thr31854,in0Dot88623,in1Dot88623,in0Con61445,in0Ave50812,in1Ave50812,in0Con91066,in0Add97884,in1Add97884],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add84171.png')

LThr31854 = thresholded_relu_layer([[[[[0.3268, 0.0237]], [[0.8433, 0.6155]]]]], 6.93496911980378, Thr31854), 
LRes73023 = reshape_layer(Thr31854, [1, 2, 2], Res73023), 
LDot88623 = dot_layer([[0.2161, 0.1465, 0.018]], [[0.4911, 0.6386, 0.7384]], 1, 1, Dot88623), 
LRes47272 = reshape_layer(Dot88623, [1, 1], Res47272), 
LRes37892 = reshape_layer(Res47272, [1, 1, 1], Res37892), 
LRes66448 = reshape_layer(Res37892, [1, 1, 1, 1], Res66448), 
LZer8196 = zero_padding3D_layer(Res66448, 0, 0, 1, 0, 0, 0, Zer8196), 
LCon61445 = concatenate_layer([Zer8196,[[[[[0.9148]], [[0.6955]]]]]], 4, Con61445), 
LAve50812 = average_layer([[[[[[0.9618]]]]], [[[[[0.7107]]]]]], Ave50812), 
LZer40205 = zero_padding3D_layer(Ave50812, 0, 0, 1, 0, 0, 0, Zer40205), 
LCon91066 = concatenate_layer([Zer40205,[[[[[0.3009]], [[0.0508]]]]]], 4, Con91066), 
LAdd97884 = add_layer([[[[[[0.6335, 0.9742]], [[0.5212, 0.7144]]]]], [[[[[0.4012, 0.9365]], [[0.9288, 0.1996]]]]]], Add97884), 
LSub37918 = subtract_layer(Con91066,Add97884, Sub37918), 
LThr42389 = thresholded_relu_layer(Sub37918, 6.211501034448215, Thr42389), 
LMul30210 = multiply_layer([Con61445,Thr42389], Mul30210), 
LRes75552 = reshape_layer(Mul30210, [1, 2, 2], Res75552), 
LCro478 = cropping2D_layer(Res75552, 0, 0, 0, 0, Cro478), 
LAdd84171 = add_layer([Res73023,Cro478], Add84171), 
exec_layers([LThr31854,LRes73023,LDot88623,LRes47272,LRes37892,LRes66448,LZer8196,LCon61445,LAve50812,LZer40205,LCon91066,LAdd97884,LSub37918,LThr42389,LMul30210,LRes75552,LCro478,LAdd84171],["Thr31854","Res73023","Dot88623","Res47272","Res37892","Res66448","Zer8196","Con61445","Ave50812","Zer40205","Con91066","Add97884","Sub37918","Thr42389","Mul30210","Res75552","Cro478","Add84171"],Add84171,"Add84171")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0.0],[0.0,0.0]]]]

Actual:   [[[[0, 0], [0, 0]]]]

Expected: [[[[0, 0], [0, 0]]]]