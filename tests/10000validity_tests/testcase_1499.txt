import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul33869 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Mul33869 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con75078 = tf.keras.layers.Input(shape=([1, 6]))
in0Add21719 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Add21719 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Mul74845 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul74845 = tf.keras.layers.Input(shape=([2, 1, 1]))

Mul33869 = keras.layers.Multiply(name = 'Mul33869', )([in0Mul33869,in1Mul33869])
Res8338 = keras.layers.Reshape((1, 2), name = 'Res8338', )(Mul33869)
Con75078 = keras.layers.Concatenate(axis=2, name = 'Con75078', )([Res8338,in0Con75078])
Add21719 = keras.layers.Add(name = 'Add21719', )([in0Add21719,in1Add21719])
Res95078 = keras.layers.Reshape((2, 2, 4), name = 'Res95078', )(Add21719)
Res15336 = keras.layers.Reshape((2, 8), name = 'Res15336', )(Res95078)
Ave35709 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave35709', )(Res15336)
Res26444 = keras.layers.Reshape((2, 8, 1), name = 'Res26444', )(Ave35709)
Mul74845 = keras.layers.Multiply(name = 'Mul74845', )([in0Mul74845,in1Mul74845])
Zer58357 = keras.layers.ZeroPadding2D(padding=((0, 0), (7, 0)), name = 'Zer58357', )(Mul74845)
Max95301 = keras.layers.Maximum(name = 'Max95301', )([Res26444,Zer58357])
Res36863 = keras.layers.Reshape((2, 8), name = 'Res36863', )(Max95301)
Dot27101 = keras.layers.Dot(axes=(2, 2), name = 'Dot27101', )([Con75078,Res36863])
model = tf.keras.models.Model(inputs=[in0Mul33869,in1Mul33869,in0Con75078,in0Add21719,in1Add21719,in0Mul74845,in1Mul74845], outputs=Dot27101)
in0Mul33869 = tf.constant([[[[0.2452], [0.9188]]]])
in1Mul33869 = tf.constant([[[[0.1753], [0.0366]]]])
in0Con75078 = tf.constant([[[0.1144, 0.2414, 0.0082, 0.807, 0.4836, 0.9868]]])
in0Add21719 = tf.constant([[[[[0.1759, 0.9339], [0.8434, 0.8801]], [[0.3722, 0.0953], [0.9376, 0.9994]]], [[[0.8871, 0.1068], [0.0122, 0.9506]], [[0.4373, 0.8468], [0.8688, 0.1281]]]]])
in1Add21719 = tf.constant([[[[[0.373, 0.7621], [0.7056, 0.1809]], [[0.9174, 0.1818], [0.3819, 0.9793]]], [[[0.1115, 0.7854], [0.7687, 0.6511]], [[0.8784, 0.0139], [0.5847, 0.343]]]]])
in0Mul74845 = tf.constant([[[[0.7606]], [[0.1674]]]])
in1Mul74845 = tf.constant([[[[0.2137]], [[0.3948]]]])
print (np.array2string(model.predict([in0Mul33869,in1Mul33869,in0Con75078,in0Add21719,in1Add21719,in0Mul74845,in1Mul74845],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot27101.png')

LMul33869 = multiply_layer([[[[[0.2452], [0.9188]]]], [[[[0.1753], [0.0366]]]]], Mul33869), 
LRes8338 = reshape_layer(Mul33869, [1, 2], Res8338), 
LCon75078 = concatenate_layer([Res8338,[[[0.1144, 0.2414, 0.0082, 0.807, 0.4836, 0.9868]]]], 2, Con75078), 
LAdd21719 = add_layer([[[[[[0.1759, 0.9339], [0.8434, 0.8801]], [[0.3722, 0.0953], [0.9376, 0.9994]]], [[[0.8871, 0.1068], [0.0122, 0.9506]], [[0.4373, 0.8468], [0.8688, 0.1281]]]]], [[[[[0.373, 0.7621], [0.7056, 0.1809]], [[0.9174, 0.1818], [0.3819, 0.9793]]], [[[0.1115, 0.7854], [0.7687, 0.6511]], [[0.8784, 0.0139], [0.5847, 0.343]]]]]], Add21719), 
LRes95078 = reshape_layer(Add21719, [2, 2, 4], Res95078), 
LRes15336 = reshape_layer(Res95078, [2, 8], Res15336), 
LAve35709 = average_pooling1D_layer(Res15336, 1, 1, true, Ave35709), 
LRes26444 = reshape_layer(Ave35709, [2, 8, 1], Res26444), 
LMul74845 = multiply_layer([[[[[0.7606]], [[0.1674]]]], [[[[0.2137]], [[0.3948]]]]], Mul74845), 
LZer58357 = zero_padding2D_layer(Mul74845, 0, 0, 7, 0, Zer58357), 
LMax95301 = maximum_layer([Res26444,Zer58357], Max95301), 
LRes36863 = reshape_layer(Max95301, [2, 8], Res36863), 
LDot27101 = dot_layer(Con75078,Res36863, 2, 2, Dot27101), 
exec_layers([LMul33869,LRes8338,LCon75078,LAdd21719,LRes95078,LRes15336,LAve35709,LRes26444,LMul74845,LZer58357,LMax95301,LRes36863,LDot27101],["Mul33869","Res8338","Con75078","Add21719","Res95078","Res15336","Ave35709","Res26444","Mul74845","Zer58357","Max95301","Res36863","Dot27101"],Dot27101,"Dot27101")

Actual (Unparsed): [[[3.3388437, 2.4220794]]]

Expected (Unparsed): [[[3.338843679764,2.4220794159919996]]]

Actual:   [[[3.3389, 2.4221]]]

Expected: [[[3.3389, 2.4221]]]