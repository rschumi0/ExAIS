import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot7602 = tf.keras.layers.Input(shape=([2]))
in1Dot7602 = tf.keras.layers.Input(shape=([2]))
in0Mul9994 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Mul9994 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Min86739 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min86739 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con23860 = tf.keras.layers.Input(shape=([2, 2, 1]))

Dot7602 = keras.layers.Dot(axes=(1, 1), name = 'Dot7602', )([in0Dot7602,in1Dot7602])
Res46068 = keras.layers.Reshape((1, 1), name = 'Res46068', )(Dot7602)
Zer83434 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer83434', )(Res46068)
Mul9994 = keras.layers.Multiply(name = 'Mul9994', )([in0Mul9994,in1Mul9994])
Zer82043 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer82043', )(Mul9994)
Min86739 = keras.layers.Minimum(name = 'Min86739', )([in0Min86739,in1Min86739])
Con23860 = keras.layers.Concatenate(axis=3, name = 'Con23860', )([Min86739,in0Con23860])
Min22153 = keras.layers.Minimum(name = 'Min22153', )([Zer82043,Con23860])
Res12051 = keras.layers.Reshape((2, 4), name = 'Res12051', )(Min22153)
Dot84178 = keras.layers.Dot(axes=(1, 1), name = 'Dot84178', )([Zer83434,Res12051])
model = tf.keras.models.Model(inputs=[in0Dot7602,in1Dot7602,in0Mul9994,in1Mul9994,in0Min86739,in1Min86739,in0Con23860], outputs=Dot84178)
in0Dot7602 = tf.constant([[0.2185, 0.9664]])
in1Dot7602 = tf.constant([[0.7003, 0.0846]])
in0Mul9994 = tf.constant([[[[0.8944, 0.1681], [0.107, 0.0359]]]])
in1Mul9994 = tf.constant([[[[0.5948, 0.8328], [0.2348, 0.8143]]]])
in0Min86739 = tf.constant([[[[0.4026], [0.3951]], [[0.3711], [0.1187]]]])
in1Min86739 = tf.constant([[[[0.6186], [0.9833]], [[0.3794], [0.9104]]]])
in0Con23860 = tf.constant([[[[0.6893], [0.88]], [[0.7002], [0.2892]]]])
print (np.array2string(model.predict([in0Dot7602,in1Dot7602,in0Mul9994,in1Mul9994,in0Min86739,in1Min86739,in0Con23860],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot84178.png')

LDot7602 = dot_layer([[0.2185, 0.9664]], [[0.7003, 0.0846]], 1, 1, Dot7602), 
LRes46068 = reshape_layer(Dot7602, [1, 1], Res46068), 
LZer83434 = zero_padding1D_layer(Res46068, 1, 0, Zer83434), 
LMul9994 = multiply_layer([[[[[0.8944, 0.1681], [0.107, 0.0359]]]], [[[[0.5948, 0.8328], [0.2348, 0.8143]]]]], Mul9994), 
LZer82043 = zero_padding2D_layer(Mul9994, 1, 0, 0, 0, Zer82043), 
LMin86739 = minimum_layer([[[[[0.4026], [0.3951]], [[0.3711], [0.1187]]]], [[[[0.6186], [0.9833]], [[0.3794], [0.9104]]]]], Min86739), 
LCon23860 = concatenate_layer([Min86739,[[[[0.6893], [0.88]], [[0.7002], [0.2892]]]]], 3, Con23860), 
LMin22153 = minimum_layer([Zer82043,Con23860], Min22153), 
LRes12051 = reshape_layer(Min22153, [2, 4], Res12051), 
LDot84178 = dot_layer(Zer83434,Res12051, 1, 1, Dot84178), 
exec_layers([LDot7602,LRes46068,LZer83434,LMul9994,LZer82043,LMin86739,LCon23860,LMin22153,LRes12051,LDot84178],["Dot7602","Res46068","Zer83434","Mul9994","Zer82043","Min86739","Con23860","Min22153","Res12051","Dot84178"],Dot84178,"Dot84178")

Actual (Unparsed): [[[0.0871243, 0.0328667, 0.0058983, 0.0068632]]]

Expected (Unparsed): [[[0.087124256589,0.032866734834703204,0.0058983426915640005,0.006863205682676301]]]

Actual:   [[[0.0872, 0.0329, 0.0059, 0.0069]]]

Expected: [[[0.0872, 0.0329, 0.0059, 0.0069]]]