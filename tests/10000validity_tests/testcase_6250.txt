import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub48980 = tf.keras.layers.Input(shape=([2]))
in1Sub48980 = tf.keras.layers.Input(shape=([2]))
in0Max74033 = tf.keras.layers.Input(shape=([2, 2]))

Sub48980 = keras.layers.Subtract(name = 'Sub48980', )([in0Sub48980,in1Sub48980])
Res95139 = keras.layers.Reshape((2, 1), name = 'Res95139', )(Sub48980)
Max74033 = keras.layers.MaxPool1D(pool_size=(2), strides=(2), padding='same', name = 'Max74033', )(in0Max74033)
Res69166 = keras.layers.Reshape((1, 2, 1), name = 'Res69166', )(Max74033)
Max82903 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max82903', )(Res69166)
Res24682 = keras.layers.Reshape((2, 1), name = 'Res24682', )(Max82903)
Ave68860 = keras.layers.Average(name = 'Ave68860', )([Res95139,Res24682])
model = tf.keras.models.Model(inputs=[in0Sub48980,in1Sub48980,in0Max74033], outputs=Ave68860)
in0Sub48980 = tf.constant([[0.9615, 0.1345]])
in1Sub48980 = tf.constant([[0.3773, 0.6258]])
in0Max74033 = tf.constant([[[1.5232, 1.6289], [1.535, 1.2998]]])
print (np.array2string(model.predict([in0Sub48980,in1Sub48980,in0Max74033],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave68860.png')

LSub48980 = subtract_layer([[0.9615, 0.1345]], [[0.3773, 0.6258]], Sub48980), 
LRes95139 = reshape_layer(Sub48980, [2, 1], Res95139), 
LMax74033 = max_pool1D_layer([[[1.5232, 1.6289], [1.535, 1.2998]]], 2, 2, true, Max74033), 
LRes69166 = reshape_layer(Max74033, [1, 2, 1], Res69166), 
LMax82903 = max_pool2D_layer(Res69166, 1, 1, Max82903), 
LRes24682 = reshape_layer(Max82903, [2, 1], Res24682), 
LAve68860 = average_layer([Res95139,Res24682], Ave68860), 
exec_layers([LSub48980,LRes95139,LMax74033,LRes69166,LMax82903,LRes24682,LAve68860],["Sub48980","Res95139","Max74033","Res69166","Max82903","Res24682","Ave68860"],Ave68860,"Ave68860")

Actual (Unparsed): [[[1.0596000], [0.5688000]]]

Expected (Unparsed): [[[1.0596],[0.5688]]]

Actual:   [[[1.0596], [0.5688]]]

Expected: [[[1.0596], [0.5688]]]