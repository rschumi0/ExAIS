import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add1504 = tf.keras.layers.Input(shape=([1, 2]))
in1Add1504 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave94342 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave94342 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Add1504 = keras.layers.Add(name = 'Add1504', )([in0Add1504,in1Add1504])
Res3323 = keras.layers.Reshape((1, 2, 1), name = 'Res3323', )(Add1504)
Res98294 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res98294', )(Res3323)
Ave94342 = keras.layers.Average(name = 'Ave94342', )([in0Ave94342,in1Ave94342])
Zer47449 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer47449', )(Ave94342)
Ave47159 = keras.layers.Average(name = 'Ave47159', )([Res98294,Zer47449])
Up_7103 = keras.layers.UpSampling3D(size=(2, 2, 2), name = 'Up_7103', )(Ave47159)
model = tf.keras.models.Model(inputs=[in0Add1504,in1Add1504,in0Ave94342,in1Ave94342], outputs=Up_7103)
in0Add1504 = tf.constant([[[0.4884, 0.0953]]])
in1Add1504 = tf.constant([[[0.0236, 0.2942]]])
in0Ave94342 = tf.constant([[[[[0.2534]]]]])
in1Ave94342 = tf.constant([[[[[0.75]]]]])
print (np.array2string(model.predict([in0Add1504,in1Add1504,in0Ave94342,in1Ave94342],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_7103.png')

LAdd1504 = add_layer([[[[0.4884, 0.0953]]], [[[0.0236, 0.2942]]]], Add1504), 
LRes3323 = reshape_layer(Add1504, [1, 2, 1], Res3323), 
LRes98294 = reshape_layer(Res3323, [1, 2, 1, 1], Res98294), 
LAve94342 = average_layer([[[[[[0.2534]]]]], [[[[[0.75]]]]]], Ave94342), 
LZer47449 = zero_padding3D_layer(Ave94342, 0, 0, 1, 0, 0, 0, Zer47449), 
LAve47159 = average_layer([Res98294,Zer47449], Ave47159), 
LUp_7103 = up_sampling3D_layer(Ave47159, 2, 2, 2, Up_7103), 
exec_layers([LAdd1504,LRes3323,LRes98294,LAve94342,LZer47449,LAve47159,LUp_7103],["Add1504","Res3323","Res98294","Ave94342","Zer47449","Ave47159","Up_7103"],Up_7103,"Up_7103")

Actual (Unparsed): [[[[[0.2560000], [0.2560000]], [[0.2560000], [0.2560000]], [[0.4456000], [0.4456000]], [[0.4456000], [0.4456000]]], [[[0.2560000], [0.2560000]], [[0.2560000], [0.2560000]], [[0.4456000], [0.4456000]], [[0.4456000], [0.4456000]]]]]

Expected (Unparsed): [[[[[0.256],[0.256]],[[0.256],[0.256]],[[0.4456],[0.4456]],[[0.4456],[0.4456]]],[[[0.256],[0.256]],[[0.256],[0.256]],[[0.4456],[0.4456]],[[0.4456],[0.4456]]]]]

Actual:   [[[[[0.256], [0.256]], [[0.256], [0.256]], [[0.4456], [0.4456]], [[0.4456], [0.4456]]], [[[0.256], [0.256]], [[0.256], [0.256]], [[0.4456], [0.4456]], [[0.4456], [0.4456]]]]]

Expected: [[[[[0.256], [0.256]], [[0.256], [0.256]], [[0.4456], [0.4456]], [[0.4456], [0.4456]]], [[[0.256], [0.256]], [[0.256], [0.256]], [[0.4456], [0.4456]], [[0.4456], [0.4456]]]]]