import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul77261 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul77261 = tf.keras.layers.Input(shape=([1, 2]))
in0Con57454 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Sub8059 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub8059 = tf.keras.layers.Input(shape=([2, 3, 3]))

Mul77261 = keras.layers.Multiply(name = 'Mul77261', )([in0Mul77261,in1Mul77261])
Res42211 = keras.layers.Reshape((1, 2, 1), name = 'Res42211', )(Mul77261)
Zer50092 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer50092', )(Res42211)
Con57454 = keras.layers.Concatenate(axis=3, name = 'Con57454', )([Zer50092,in0Con57454])
Sub8059 = keras.layers.Subtract(name = 'Sub8059', )([in0Sub8059,in1Sub8059])
Min82571 = keras.layers.Minimum(name = 'Min82571', )([Con57454,Sub8059])
Fla29410 = keras.layers.Flatten(name = 'Fla29410', )(Min82571)
model = tf.keras.models.Model(inputs=[in0Mul77261,in1Mul77261,in0Con57454,in0Sub8059,in1Sub8059], outputs=Fla29410)
in0Mul77261 = tf.constant([[[0.8553, 0.2718]]])
in1Mul77261 = tf.constant([[[0.4035, 0.7818]]])
in0Con57454 = tf.constant([[[[0.9205, 0.9372], [0.4767, 0.6516], [0.1284, 0.9338]], [[0.0809, 0.0633], [0.6936, 0.1926], [0.1609, 0.8327]]]])
in0Sub8059 = tf.constant([[[[0.9507, 0.7317, 0.8118], [0.6669, 0.8411, 0.243], [0.5954, 0.5077, 0.5936]], [[0.2406, 0.489, 0.3881], [0.4114, 0.796, 0.2784], [0.3324, 0.2825, 0.289]]]])
in1Sub8059 = tf.constant([[[[0.6758, 0.3403, 0.1939], [0.7681, 0.1596, 0.614], [0.31, 0.6177, 0.4118]], [[0.5057, 0.6131, 0.413], [0.4779, 0.993, 0.6439], [0.3934, 0.8011, 0.5546]]]])
print (np.array2string(model.predict([in0Mul77261,in1Mul77261,in0Con57454,in0Sub8059,in1Sub8059],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla29410.png')

LMul77261 = multiply_layer([[[[0.8553, 0.2718]]], [[[0.4035, 0.7818]]]], Mul77261), 
LRes42211 = reshape_layer(Mul77261, [1, 2, 1], Res42211), 
LZer50092 = zero_padding2D_layer(Res42211, 1, 0, 1, 0, Zer50092), 
LCon57454 = concatenate_layer([Zer50092,[[[[0.9205, 0.9372], [0.4767, 0.6516], [0.1284, 0.9338]], [[0.0809, 0.0633], [0.6936, 0.1926], [0.1609, 0.8327]]]]], 3, Con57454), 
LSub8059 = subtract_layer([[[[0.9507, 0.7317, 0.8118], [0.6669, 0.8411, 0.243], [0.5954, 0.5077, 0.5936]], [[0.2406, 0.489, 0.3881], [0.4114, 0.796, 0.2784], [0.3324, 0.2825, 0.289]]]], [[[[0.6758, 0.3403, 0.1939], [0.7681, 0.1596, 0.614], [0.31, 0.6177, 0.4118]], [[0.5057, 0.6131, 0.413], [0.4779, 0.993, 0.6439], [0.3934, 0.8011, 0.5546]]]], Sub8059), 
LMin82571 = minimum_layer([Con57454,Sub8059], Min82571), 
LFla29410 = flatten_layer(Min82571, Fla29410), 
exec_layers([LMul77261,LRes42211,LZer50092,LCon57454,LSub8059,LMin82571,LFla29410],["Mul77261","Res42211","Zer50092","Con57454","Sub8059","Min82571","Fla29410"],Fla29410,"Fla29410")

Actual (Unparsed): [[0.0000000, 0.3914000, 0.6179000, -0.1012000, 0.4767000, -0.3710000, 0.0000000, -0.1100000, 0.1818000, -0.2651000, -0.1241000, -0.0249000, -0.0665000, -0.1970000, -0.3655000, -0.0610000, -0.5186000, -0.2656000]]

Expected (Unparsed): [[0,0.3914,0.6179,-0.10119999999999996,0.4767,-0.371,0,-0.10999999999999999,0.18180000000000002,-0.2651,-0.12409999999999999,-0.024899999999999978,-0.0665,-0.19699999999999995,-0.36550000000000005,-0.061000000000000054,-0.5186000000000001,-0.2656]]

Actual:   [[0, 0.3914, 0.6179, -0.1012, 0.4767, -0.371, 0, -0.11, 0.1818, -0.2651, -0.1241, -0.0249, -0.0665, -0.197, -0.3655, -0.061, -0.5186, -0.2656]]

Expected: [[0, 0.3914, 0.6179, -0.1011, 0.4767, -0.371, 0, -0.1099, 0.1819, -0.2651, -0.124, -0.0248, -0.0665, -0.1969, -0.3655, -0.061, -0.5186, -0.2656]]