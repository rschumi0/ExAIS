import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add47886 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add47886 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Dot33957 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot33957 = tf.keras.layers.Input(shape=([3, 2]))
in0Con80117 = tf.keras.layers.Input(shape=([2, 2]))
in0Min43158 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Min43158 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Sub80607 = tf.keras.layers.Input(shape=([2]))
in1Sub80607 = tf.keras.layers.Input(shape=([2]))
in0Con87499 = tf.keras.layers.Input(shape=([2, 2]))

Add47886 = keras.layers.Add(name = 'Add47886', )([in0Add47886,in1Add47886])
Res29772 = keras.layers.Reshape((1, 4), name = 'Res29772', )(Add47886)
Zer83137 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer83137', )(Res29772)
Dot33957 = keras.layers.Dot(axes=(1, 1), name = 'Dot33957', )([in0Dot33957,in1Dot33957])
Con80117 = keras.layers.Concatenate(axis=2, name = 'Con80117', )([Dot33957,in0Con80117])
Max55955 = keras.layers.Maximum(name = 'Max55955', )([Zer83137,Con80117])
Min43158 = keras.layers.Minimum(name = 'Min43158', )([in0Min43158,in1Min43158])
Res60866 = keras.layers.Reshape((1, 2), name = 'Res60866', )(Min43158)
Sub80607 = keras.layers.Subtract(name = 'Sub80607', )([in0Sub80607,in1Sub80607])
Res81681 = keras.layers.Reshape((1, 2), name = 'Res81681', )(Sub80607)
Max67475 = keras.layers.Maximum(name = 'Max67475', )([Res60866,Res81681])
Zer72797 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer72797', )(Max67475)
Con87499 = keras.layers.Concatenate(axis=2, name = 'Con87499', )([Zer72797,in0Con87499])
Ave90383 = keras.layers.Average(name = 'Ave90383', )([Max55955,Con87499])
model = tf.keras.models.Model(inputs=[in0Add47886,in1Add47886,in0Dot33957,in1Dot33957,in0Con80117,in0Min43158,in1Min43158,in0Sub80607,in1Sub80607,in0Con87499], outputs=Ave90383)
in0Add47886 = tf.constant([[[[0.4132, 0.7246], [0.9571, 0.2331]]]])
in1Add47886 = tf.constant([[[[0.9171, 0.5415], [0.0588, 0.5053]]]])
in0Dot33957 = tf.constant([[[0.1739, 0.5382], [0.584, 0.5565], [0.4783, 0.3815]]])
in1Dot33957 = tf.constant([[[0.4791, 0.5434], [0.7319, 0.139], [0.074, 0.9873]]])
in0Con80117 = tf.constant([[[0.7385, 0.2976], [0.1278, 0.0844]]])
in0Min43158 = tf.constant([[[[0.8573], [0.065]]]])
in1Min43158 = tf.constant([[[[0.4507], [0.228]]]])
in0Sub80607 = tf.constant([[0.5293, 0.8398]])
in1Sub80607 = tf.constant([[0.9089, 0.8001]])
in0Con87499 = tf.constant([[[0.1002, 0.2352], [0.5837, 0.9396]]])
print (np.array2string(model.predict([in0Add47886,in1Add47886,in0Dot33957,in1Dot33957,in0Con80117,in0Min43158,in1Min43158,in0Sub80607,in1Sub80607,in0Con87499],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave90383.png')

LAdd47886 = add_layer([[[[[0.4132, 0.7246], [0.9571, 0.2331]]]], [[[[0.9171, 0.5415], [0.0588, 0.5053]]]]], Add47886), 
LRes29772 = reshape_layer(Add47886, [1, 4], Res29772), 
LZer83137 = zero_padding1D_layer(Res29772, 1, 0, Zer83137), 
LDot33957 = dot_layer([[[0.1739, 0.5382], [0.584, 0.5565], [0.4783, 0.3815]]], [[[0.4791, 0.5434], [0.7319, 0.139], [0.074, 0.9873]]], 1, 1, Dot33957), 
LCon80117 = concatenate_layer([Dot33957,[[[0.7385, 0.2976], [0.1278, 0.0844]]]], 2, Con80117), 
LMax55955 = maximum_layer([Zer83137,Con80117], Max55955), 
LMin43158 = minimum_layer([[[[[0.8573], [0.065]]]], [[[[0.4507], [0.228]]]]], Min43158), 
LRes60866 = reshape_layer(Min43158, [1, 2], Res60866), 
LSub80607 = subtract_layer([[0.5293, 0.8398]], [[0.9089, 0.8001]], Sub80607), 
LRes81681 = reshape_layer(Sub80607, [1, 2], Res81681), 
LMax67475 = maximum_layer([Res60866,Res81681], Max67475), 
LZer72797 = zero_padding1D_layer(Max67475, 1, 0, Zer72797), 
LCon87499 = concatenate_layer([Zer72797,[[[0.1002, 0.2352], [0.5837, 0.9396]]]], 2, Con87499), 
LAve90383 = average_layer([Max55955,Con87499], Ave90383), 
exec_layers([LAdd47886,LRes29772,LZer83137,LDot33957,LCon80117,LMax55955,LMin43158,LRes60866,LSub80607,LRes81681,LMax67475,LZer72797,LCon87499,LAve90383],["Add47886","Res29772","Zer83137","Dot33957","Con80117","Max55955","Min43158","Res60866","Sub80607","Res81681","Max67475","Zer72797","Con87499","Ave90383"],Ave90383,"Ave90383")

Actual (Unparsed): [[[0.2730696, 0.3239494, 0.4193500, 0.2664000], [0.8905000, 0.6655500, 0.7998000, 0.8390000]]]

Expected (Unparsed): [[[0.273069645,0.323949425,0.41935,0.26639999999999997],[0.8905000000000001,0.66555,0.7998000000000001,0.839]]]

Actual:   [[[0.2731, 0.324, 0.4194, 0.2664], [0.8905, 0.6656, 0.7998, 0.839]]]

Expected: [[[0.2731, 0.324, 0.4194, 0.2664], [0.8906, 0.6656, 0.7999, 0.839]]]