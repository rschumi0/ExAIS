import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add67645 = tf.keras.layers.Input(shape=([2, 2]))
in1Add67645 = tf.keras.layers.Input(shape=([2, 2]))
in0Min12686 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min12686 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Add4335 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Add4335 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Add67645 = keras.layers.Add(name = 'Add67645', )([in0Add67645,in1Add67645])
Ave78493 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave78493', )(Add67645)
Res26116 = keras.layers.Reshape((2, 2, 1), name = 'Res26116', )(Ave78493)
Min12686 = keras.layers.Minimum(name = 'Min12686', )([in0Min12686,in1Min12686])
Res86107 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res86107', )(Min12686)
Zer92102 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer92102', )(Res86107)
Add4335 = keras.layers.Add(name = 'Add4335', )([in0Add4335,in1Add4335])
Add8555 = keras.layers.Add(name = 'Add8555', )([Zer92102,Add4335])
Res38989 = keras.layers.Reshape((2, 2, 1), name = 'Res38989', )(Add8555)
Ave69485 = keras.layers.Average(name = 'Ave69485', )([Res26116,Res38989])
model = tf.keras.models.Model(inputs=[in0Add67645,in1Add67645,in0Min12686,in1Min12686,in0Add4335,in1Add4335], outputs=Ave69485)
in0Add67645 = tf.constant([[[0.3628, 0.1997], [0.385, 0.0119]]])
in1Add67645 = tf.constant([[[0.5367, 0.8652], [0.512, 0.836]]])
in0Min12686 = tf.constant([[[[0.8146, 0.2006]]]])
in1Min12686 = tf.constant([[[[0.7705, 0.7337]]]])
in0Add4335 = tf.constant([[[[[0.5844], [0.6007]]], [[[0.0533], [0.7527]]]]])
in1Add4335 = tf.constant([[[[[0.7283], [0.2276]]], [[[0.4831], [0.1949]]]]])
print (np.array2string(model.predict([in0Add67645,in1Add67645,in0Min12686,in1Min12686,in0Add4335,in1Add4335],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave69485.png')

LAdd67645 = add_layer([[[[0.3628, 0.1997], [0.385, 0.0119]]], [[[0.5367, 0.8652], [0.512, 0.836]]]], Add67645), 
LAve78493 = average_pooling1D_layer(Add67645, 1, Ave78493), 
LRes26116 = reshape_layer(Ave78493, [2, 2, 1], Res26116), 
LMin12686 = minimum_layer([[[[[0.8146, 0.2006]]]], [[[[0.7705, 0.7337]]]]], Min12686), 
LRes86107 = reshape_layer(Min12686, [1, 1, 2, 1], Res86107), 
LZer92102 = zero_padding3D_layer(Res86107, 1, 0, 0, 0, 0, 0, Zer92102), 
LAdd4335 = add_layer([[[[[[0.5844], [0.6007]]], [[[0.0533], [0.7527]]]]], [[[[[0.7283], [0.2276]]], [[[0.4831], [0.1949]]]]]], Add4335), 
LAdd8555 = add_layer([Zer92102,Add4335], Add8555), 
LRes38989 = reshape_layer(Add8555, [2, 2, 1], Res38989), 
LAve69485 = average_layer([Res26116,Res38989], Ave69485), 
exec_layers([LAdd67645,LAve78493,LRes26116,LMin12686,LRes86107,LZer92102,LAdd4335,LAdd8555,LRes38989,LAve69485],["Add67645","Ave78493","Res26116","Min12686","Res86107","Zer92102","Add4335","Add8555","Res38989","Ave69485"],Ave69485,"Ave69485")

Actual (Unparsed): [[[[1.1061000], [0.9466000]], [[1.1019500], [0.9980500]]]]

Expected (Unparsed): [[[[1.1061],[0.9466]],[[1.10195],[0.9980500000000001]]]]

Actual:   [[[[1.1061], [0.9466]], [[1.102], [0.9981]]]]

Expected: [[[[1.1061], [0.9466]], [[1.102], [0.9981]]]]