import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul82279 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul82279 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Glo87450 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Mul11356 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Mul11356 = tf.keras.layers.Input(shape=([2, 1, 1]))

Mul82279 = keras.layers.Multiply(name = 'Mul82279', )([in0Mul82279,in1Mul82279])
Res98658 = keras.layers.Reshape((1, 2), name = 'Res98658', )(Mul82279)
Ave10448 = keras.layers.AveragePooling1D(pool_size=(1), strides=(3), padding='valid', name = 'Ave10448', )(Res98658)
Res49212 = keras.layers.Reshape((1, 2, 1), name = 'Res49212', )(Ave10448)
Zer15162 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer15162', )(Res49212)
Glo87450 = keras.layers.GlobalMaxPool2D(name = 'Glo87450', )(in0Glo87450)
Res4699 = keras.layers.Reshape((2, 1), name = 'Res4699', )(Glo87450)
Res34315 = keras.layers.Reshape((2, 1, 1), name = 'Res34315', )(Res4699)
Res85663 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res85663', )(Res34315)
Glo28352 = keras.layers.GlobalMaxPool3D(name = 'Glo28352', )(Res85663)
Res1452 = keras.layers.Reshape((1, 1), name = 'Res1452', )(Glo28352)
Res18411 = keras.layers.Reshape((1, 1, 1), name = 'Res18411', )(Res1452)
Zer722 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer722', )(Res18411)
Mul11356 = keras.layers.Multiply(name = 'Mul11356', )([in0Mul11356,in1Mul11356])
Min95689 = keras.layers.Minimum(name = 'Min95689', )([Zer722,Mul11356])
Zer75462 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer75462', )(Min95689)
Mul33868 = keras.layers.Multiply(name = 'Mul33868', )([Zer15162,Zer75462])
model = tf.keras.models.Model(inputs=[in0Mul82279,in1Mul82279,in0Glo87450,in0Mul11356,in1Mul11356], outputs=Mul33868)
in0Mul82279 = tf.constant([[[[0.8901, 0.3166]]]])
in1Mul82279 = tf.constant([[[[0.7706, 0.9408]]]])
in0Glo87450 = tf.constant([[[[1.3285, 1.7237], [1.677, 1.3947]], [[1.3786, 1.6726], [1.9988, 1.3869]]]])
in0Mul11356 = tf.constant([[[[0.9485]], [[0.1609]]]])
in1Mul11356 = tf.constant([[[[0.6096]], [[0.5948]]]])
print (np.array2string(model.predict([in0Mul82279,in1Mul82279,in0Glo87450,in0Mul11356,in1Mul11356],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul33868.png')

LMul82279 = multiply_layer([[[[[0.8901, 0.3166]]]], [[[[0.7706, 0.9408]]]]], Mul82279), 
LRes98658 = reshape_layer(Mul82279, [1, 2], Res98658), 
LAve10448 = average_pooling1D_layer(Res98658, 1, 3, false, Ave10448), 
LRes49212 = reshape_layer(Ave10448, [1, 2, 1], Res49212), 
LZer15162 = zero_padding2D_layer(Res49212, 1, 0, 1, 0, Zer15162), 
LGlo87450 = global_max_pool2D_layer([[[[1.3285, 1.7237], [1.677, 1.3947]], [[1.3786, 1.6726], [1.9988, 1.3869]]]], Glo87450), 
LRes4699 = reshape_layer(Glo87450, [2, 1], Res4699), 
LRes34315 = reshape_layer(Res4699, [2, 1, 1], Res34315), 
LRes85663 = reshape_layer(Res34315, [2, 1, 1, 1], Res85663), 
LGlo28352 = global_max_pool3D_layer(Res85663, Glo28352), 
LRes1452 = reshape_layer(Glo28352, [1, 1], Res1452), 
LRes18411 = reshape_layer(Res1452, [1, 1, 1], Res18411), 
LZer722 = zero_padding2D_layer(Res18411, 1, 0, 0, 0, Zer722), 
LMul11356 = multiply_layer([[[[[0.9485]], [[0.1609]]]], [[[[0.6096]], [[0.5948]]]]], Mul11356), 
LMin95689 = minimum_layer([Zer722,Mul11356], Min95689), 
LZer75462 = zero_padding2D_layer(Min95689, 0, 0, 2, 0, Zer75462), 
LMul33868 = multiply_layer([Zer15162,Zer75462], Mul33868), 
exec_layers([LMul82279,LRes98658,LAve10448,LRes49212,LZer15162,LGlo87450,LRes4699,LRes34315,LRes85663,LGlo28352,LRes1452,LRes18411,LZer722,LMul11356,LMin95689,LZer75462,LMul33868],["Mul82279","Res98658","Ave10448","Res49212","Zer15162","Glo87450","Res4699","Res34315","Res85663","Glo28352","Res1452","Res18411","Zer722","Mul11356","Min95689","Zer75462","Mul33868"],Mul33868,"Mul33868")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0285059]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[0.0],[0.0285059305821696]]]]

Actual:   [[[[0], [0], [0]], [[0], [0], [0.0286]]]]

Expected: [[[[0], [0], [0]], [[0], [0], [0.0286]]]]