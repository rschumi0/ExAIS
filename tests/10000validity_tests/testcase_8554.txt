import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add53734 = tf.keras.layers.Input(shape=([2, 2]))
in1Add53734 = tf.keras.layers.Input(shape=([2, 2]))
in0Mas6746 = tf.keras.layers.Input(shape=([1]))
in0Con14570 = tf.keras.layers.Input(shape=([3]))
in0Dot14191 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot14191 = tf.keras.layers.Input(shape=([2, 3]))
in0Max81649 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Max81649 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Mul2794 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Mul2794 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Glo81739 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Con94641 = tf.keras.layers.Input(shape=([3]))
in0Ave45206 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave45206 = tf.keras.layers.Input(shape=([2, 1]))
in0Con73916 = tf.keras.layers.Input(shape=([4, 4]))

Add53734 = keras.layers.Add(name = 'Add53734', )([in0Add53734,in1Add53734])
Fla61003 = keras.layers.Flatten(name = 'Fla61003', )(Add53734)
Mas6746 = keras.layers.Masking(mask_value=1, name = 'Mas6746', )(in0Mas6746)
Con14570 = keras.layers.Concatenate(axis=1, name = 'Con14570', )([Mas6746,in0Con14570])
Mul66506 = keras.layers.Multiply(name = 'Mul66506', )([Fla61003,Con14570])
Res77892 = keras.layers.Reshape((4, 1), name = 'Res77892', )(Mul66506)
Res25592 = keras.layers.Reshape((4, 1, 1), name = 'Res25592', )(Res77892)
Zer90062 = keras.layers.ZeroPadding2D(padding=((0, 0), (4, 0)), name = 'Zer90062', )(Res25592)
Dot14191 = keras.layers.Dot(axes=(1, 1), name = 'Dot14191', )([in0Dot14191,in1Dot14191])
Res69739 = keras.layers.Reshape((3, 3, 1), name = 'Res69739', )(Dot14191)
Max81649 = keras.layers.Maximum(name = 'Max81649', )([in0Max81649,in1Max81649])
Zer97443 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer97443', )(Max81649)
Mul50091 = keras.layers.Multiply(name = 'Mul50091', )([Res69739,Zer97443])
Zer88691 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer88691', )(Mul50091)
Max85527 = keras.layers.Maximum(name = 'Max85527', )([Zer90062,Zer88691])
Res44629 = keras.layers.Reshape((4, 5), name = 'Res44629', )(Max85527)
Mul2794 = keras.layers.Multiply(name = 'Mul2794', )([in0Mul2794,in1Mul2794])
Res56516 = keras.layers.Reshape((2, 2, 1), name = 'Res56516', )(Mul2794)
Res79468 = keras.layers.Reshape((2, 2), name = 'Res79468', )(Res56516)
Fla87633 = keras.layers.Flatten(name = 'Fla87633', )(Res79468)
Glo81739 = keras.layers.GlobalAveragePooling3D(name = 'Glo81739', )(in0Glo81739)
Con94641 = keras.layers.Concatenate(axis=1, name = 'Con94641', )([Glo81739,in0Con94641])
Sub37810 = keras.layers.Subtract(name = 'Sub37810', )([Fla87633,Con94641])
Res19902 = keras.layers.Reshape((4, 1), name = 'Res19902', )(Sub37810)
Ave45206 = keras.layers.Average(name = 'Ave45206', )([in0Ave45206,in1Ave45206])
Zer95658 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer95658', )(Ave45206)
Add10446 = keras.layers.Add(name = 'Add10446', )([Res19902,Zer95658])
Con73916 = keras.layers.Concatenate(axis=2, name = 'Con73916', )([Add10446,in0Con73916])
Sub62195 = keras.layers.Subtract(name = 'Sub62195', )([Res44629,Con73916])
model = tf.keras.models.Model(inputs=[in0Add53734,in1Add53734,in0Mas6746,in0Con14570,in0Dot14191,in1Dot14191,in0Max81649,in1Max81649,in0Mul2794,in1Mul2794,in0Glo81739,in0Con94641,in0Ave45206,in1Ave45206,in0Con73916], outputs=Sub62195)
in0Add53734 = tf.constant([[[0.1537, 0.2598], [0.3819, 0.4408]]])
in1Add53734 = tf.constant([[[0.7317, 0.7311], [0.6244, 0.0382]]])
in0Mas6746 = tf.constant([[1.6137]])
in0Con14570 = tf.constant([[0.367, 0.3907, 0.8937]])
in0Dot14191 = tf.constant([[[0.9359, 0.1577, 0.3364], [0.148, 0.9912, 0.1154]]])
in1Dot14191 = tf.constant([[[0.2573, 0.8121, 0.3508], [0.5354, 0.7668, 0.0157]]])
in0Max81649 = tf.constant([[[[0.4195], [0.1202]], [[0.0121], [0.6971]]]])
in1Max81649 = tf.constant([[[[0.9584], [0.0783]], [[0.0409], [0.5202]]]])
in0Mul2794 = tf.constant([[[[[0.7141]], [[0.9438]]], [[[0.2684]], [[0.9787]]]]])
in1Mul2794 = tf.constant([[[[[0.8004]], [[0.5388]]], [[[0.347]], [[0.9992]]]]])
in0Glo81739 = tf.constant([[[[[1.5003]], [[1.7894]]], [[[1.1228]], [[1.695]]]]])
in0Con94641 = tf.constant([[0.223, 0.8538, 0.8919]])
in0Ave45206 = tf.constant([[[0.3179], [0.9367]]])
in1Ave45206 = tf.constant([[[0.9141], [0.771]]])
in0Con73916 = tf.constant([[[0.9123, 0.4499, 0.7649, 0.1377], [0.2887, 0.5873, 0.8898, 0.4405], [0.585, 0.9955, 0.409, 0.1293], [0.4571, 0.1938, 0.7498, 0.8599]]])
print (np.array2string(model.predict([in0Add53734,in1Add53734,in0Mas6746,in0Con14570,in0Dot14191,in1Dot14191,in0Max81649,in1Max81649,in0Mul2794,in1Mul2794,in0Glo81739,in0Con94641,in0Ave45206,in1Ave45206,in0Con73916],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub62195.png')

LAdd53734 = add_layer([[[[0.1537, 0.2598], [0.3819, 0.4408]]], [[[0.7317, 0.7311], [0.6244, 0.0382]]]], Add53734), 
LFla61003 = flatten_layer(Add53734, Fla61003), 
LMas6746 = masking_layer([[1.6137]], 1, Mas6746), 
LCon14570 = concatenate_layer([Mas6746,[[0.367, 0.3907, 0.8937]]], 1, Con14570), 
LMul66506 = multiply_layer([Fla61003,Con14570], Mul66506), 
LRes77892 = reshape_layer(Mul66506, [4, 1], Res77892), 
LRes25592 = reshape_layer(Res77892, [4, 1, 1], Res25592), 
LZer90062 = zero_padding2D_layer(Res25592, 0, 0, 4, 0, Zer90062), 
LDot14191 = dot_layer([[[0.9359, 0.1577, 0.3364], [0.148, 0.9912, 0.1154]]], [[[0.2573, 0.8121, 0.3508], [0.5354, 0.7668, 0.0157]]], 1, 1, Dot14191), 
LRes69739 = reshape_layer(Dot14191, [3, 3, 1], Res69739), 
LMax81649 = maximum_layer([[[[[0.4195], [0.1202]], [[0.0121], [0.6971]]]], [[[[0.9584], [0.0783]], [[0.0409], [0.5202]]]]], Max81649), 
LZer97443 = zero_padding2D_layer(Max81649, 1, 0, 1, 0, Zer97443), 
LMul50091 = multiply_layer([Res69739,Zer97443], Mul50091), 
LZer88691 = zero_padding2D_layer(Mul50091, 1, 0, 2, 0, Zer88691), 
LMax85527 = maximum_layer([Zer90062,Zer88691], Max85527), 
LRes44629 = reshape_layer(Max85527, [4, 5], Res44629), 
LMul2794 = multiply_layer([[[[[[0.7141]], [[0.9438]]], [[[0.2684]], [[0.9787]]]]], [[[[[0.8004]], [[0.5388]]], [[[0.347]], [[0.9992]]]]]], Mul2794), 
LRes56516 = reshape_layer(Mul2794, [2, 2, 1], Res56516), 
LRes79468 = reshape_layer(Res56516, [2, 2], Res79468), 
LFla87633 = flatten_layer(Res79468, Fla87633), 
LGlo81739 = global_average_pooling3D_layer([[[[[1.5003]], [[1.7894]]], [[[1.1228]], [[1.695]]]]], Glo81739), 
LCon94641 = concatenate_layer([Glo81739,[[0.223, 0.8538, 0.8919]]], 1, Con94641), 
LSub37810 = subtract_layer(Fla87633,Con94641, Sub37810), 
LRes19902 = reshape_layer(Sub37810, [4, 1], Res19902), 
LAve45206 = average_layer([[[[0.3179], [0.9367]]], [[[0.9141], [0.771]]]], Ave45206), 
LZer95658 = zero_padding1D_layer(Ave45206, 2, 0, Zer95658), 
LAdd10446 = add_layer([Res19902,Zer95658], Add10446), 
LCon73916 = concatenate_layer([Add10446,[[[0.9123, 0.4499, 0.7649, 0.1377], [0.2887, 0.5873, 0.8898, 0.4405], [0.585, 0.9955, 0.409, 0.1293], [0.4571, 0.1938, 0.7498, 0.8599]]]], 2, Con73916), 
LSub62195 = subtract_layer(Res44629,Con73916, Sub62195), 
exec_layers([LAdd53734,LFla61003,LMas6746,LCon14570,LMul66506,LRes77892,LRes25592,LZer90062,LDot14191,LRes69739,LMax81649,LZer97443,LMul50091,LZer88691,LMax85527,LRes44629,LMul2794,LRes56516,LRes79468,LFla87633,LGlo81739,LCon94641,LSub37810,LRes19902,LAve45206,LZer95658,LAdd10446,LCon73916,LSub62195],["Add53734","Fla61003","Mas6746","Con14570","Mul66506","Res77892","Res25592","Zer90062","Dot14191","Res69739","Max81649","Zer97443","Mul50091","Zer88691","Max85527","Res44629","Mul2794","Res56516","Res79468","Fla87633","Glo81739","Con94641","Sub37810","Res19902","Ave45206","Zer95658","Add10446","Con73916","Sub62195"],Sub62195,"Sub62195")

Actual (Unparsed): [[[0.9553094, -0.9123000, -0.4499000, -0.7649000, 1.2910700], [-0.2855194, -0.2887000, -0.5873000, -0.8898000, -0.0768397], [0.1446652, -0.5850000, -0.9955000, 0.4421745, 0.2638614], [-0.9398670, -0.4571000, -0.1938000, -0.7350073, -0.4318177]]]

Expected (Unparsed): [[[0.95530936,-0.9123,-0.4499,-0.7649,1.2910699799999998],[-0.28551943999999996,-0.2887,-0.5873,-0.8898,-0.07683970000000007],[0.14466520000000005,-0.585,-0.9955,0.44217452427200005,0.26386140999999996],[-0.93986704,-0.4571,-0.1938,-0.735007322356,-0.4318176999999999]]]

Actual:   [[[0.9554, -0.9123, -0.4499, -0.7649, 1.2911], [-0.2855, -0.2887, -0.5873, -0.8898, -0.0768], [0.1447, -0.585, -0.9955, 0.4422, 0.2639], [-0.9398, -0.4571, -0.1938, -0.735, -0.4318]]]

Expected: [[[0.9554, -0.9123, -0.4499, -0.7649, 1.2911], [-0.2855, -0.2887, -0.5873, -0.8898, -0.0768], [0.1447, -0.585, -0.9955, 0.4422, 0.2639], [-0.9398, -0.4571, -0.1938, -0.735, -0.4318]]]