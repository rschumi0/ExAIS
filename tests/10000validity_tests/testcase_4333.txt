import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max59725 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max59725 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Max59725 = keras.layers.Maximum(name = 'Max59725', )([in0Max59725,in1Max59725])
Res14839 = keras.layers.Reshape((1, 2, 4), name = 'Res14839', )(Max59725)
Res24699 = keras.layers.Reshape((1, 8), name = 'Res24699', )(Res14839)
Per92908 = keras.layers.Permute((1,2), name = 'Per92908',)(Res24699)
model = tf.keras.models.Model(inputs=[in0Max59725,in1Max59725], outputs=Per92908)
in0Max59725 = tf.constant([[[[[0.6561, 0.5692], [0.7797, 0.1425]], [[0.7322, 0.3809], [0.1, 0.5236]]]]])
in1Max59725 = tf.constant([[[[[0.3097, 0.9759], [0.2025, 0.0906]], [[0.6998, 0.8586], [0.3187, 0.2039]]]]])
print (np.array2string(model.predict([in0Max59725,in1Max59725],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per92908.png')

LMax59725 = maximum_layer([[[[[[0.6561, 0.5692], [0.7797, 0.1425]], [[0.7322, 0.3809], [0.1, 0.5236]]]]], [[[[[0.3097, 0.9759], [0.2025, 0.0906]], [[0.6998, 0.8586], [0.3187, 0.2039]]]]]], Max59725), 
LRes14839 = reshape_layer(Max59725, [1, 2, 4], Res14839), 
LRes24699 = reshape_layer(Res14839, [1, 8], Res24699), 
LPer92908 = permute_layer(Res24699, 1,2, Per92908), 
exec_layers([LMax59725,LRes14839,LRes24699,LPer92908],["Max59725","Res14839","Res24699","Per92908"],Per92908,"Per92908")

Actual (Unparsed): [[[0.6561000, 0.9759000, 0.7797000, 0.1425000, 0.7322000, 0.8586000, 0.3187000, 0.5236000]]]

Expected (Unparsed): [[[0.6561,0.9759,0.7797,0.1425,0.7322,0.8586,0.3187,0.5236]]]

Actual:   [[[0.6561, 0.9759, 0.7797, 0.1425, 0.7322, 0.8586, 0.3187, 0.5236]]]

Expected: [[[0.6561, 0.9759, 0.7797, 0.1425, 0.7322, 0.8586, 0.3187, 0.5236]]]