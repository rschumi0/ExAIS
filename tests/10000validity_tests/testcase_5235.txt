import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave27033 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave27033 = tf.keras.layers.Input(shape=([1, 2]))
in0Max32473 = tf.keras.layers.Input(shape=([1, 2]))
in1Max32473 = tf.keras.layers.Input(shape=([1, 2]))
in0Con88598 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Ave31971 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave31971 = tf.keras.layers.Input(shape=([2, 1, 2]))

Ave27033 = keras.layers.Average(name = 'Ave27033', )([in0Ave27033,in1Ave27033])
Max32473 = keras.layers.Maximum(name = 'Max32473', )([in0Max32473,in1Max32473])
Mul23988 = keras.layers.Multiply(name = 'Mul23988', )([Ave27033,Max32473])
Res31811 = keras.layers.Reshape((1, 2, 1), name = 'Res31811', )(Mul23988)
Zer25852 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer25852', )(Res31811)
Con88598 = keras.layers.Concatenate(axis=3, name = 'Con88598', )([Zer25852,in0Con88598])
Ave31971 = keras.layers.Average(name = 'Ave31971', )([in0Ave31971,in1Ave31971])
Zer25856 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer25856', )(Ave31971)
Min87578 = keras.layers.Minimum(name = 'Min87578', )([Con88598,Zer25856])
model = tf.keras.models.Model(inputs=[in0Ave27033,in1Ave27033,in0Max32473,in1Max32473,in0Con88598,in0Ave31971,in1Ave31971], outputs=Min87578)
in0Ave27033 = tf.constant([[[0.6018, 0.4231]]])
in1Ave27033 = tf.constant([[[0.8619, 0.9125]]])
in0Max32473 = tf.constant([[[0.8818, 0.0859]]])
in1Max32473 = tf.constant([[[0.2625, 0.2597]]])
in0Con88598 = tf.constant([[[[0.6969], [0.3708], [0.3646]], [[0.4667], [0.9647], [0.6227]]]])
in0Ave31971 = tf.constant([[[[0.5535, 0.9008]], [[0.6321, 0.8901]]]])
in1Ave31971 = tf.constant([[[[0.2857, 0.3601]], [[0.8039, 0.4033]]]])
print (np.array2string(model.predict([in0Ave27033,in1Ave27033,in0Max32473,in1Max32473,in0Con88598,in0Ave31971,in1Ave31971],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min87578.png')

LAve27033 = average_layer([[[[0.6018, 0.4231]]], [[[0.8619, 0.9125]]]], Ave27033), 
LMax32473 = maximum_layer([[[[0.8818, 0.0859]]], [[[0.2625, 0.2597]]]], Max32473), 
LMul23988 = multiply_layer([Ave27033,Max32473], Mul23988), 
LRes31811 = reshape_layer(Mul23988, [1, 2, 1], Res31811), 
LZer25852 = zero_padding2D_layer(Res31811, 1, 0, 1, 0, Zer25852), 
LCon88598 = concatenate_layer([Zer25852,[[[[0.6969], [0.3708], [0.3646]], [[0.4667], [0.9647], [0.6227]]]]], 3, Con88598), 
LAve31971 = average_layer([[[[[0.5535, 0.9008]], [[0.6321, 0.8901]]]], [[[[0.2857, 0.3601]], [[0.8039, 0.4033]]]]], Ave31971), 
LZer25856 = zero_padding2D_layer(Ave31971, 0, 0, 2, 0, Zer25856), 
LMin87578 = minimum_layer([Con88598,Zer25856], Min87578), 
exec_layers([LAve27033,LMax32473,LMul23988,LRes31811,LZer25852,LCon88598,LAve31971,LZer25856,LMin87578],["Ave27033","Max32473","Mul23988","Res31811","Zer25852","Con88598","Ave31971","Zer25856","Min87578"],Min87578,"Min87578")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.3646000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.1734277, 0.6227000]]]]

Expected (Unparsed): [[[[0,0],[0,0],[0,0.3646]],[[0,0],[0,0],[0.17342765999999998,0.6227]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0.3646]], [[0, 0], [0, 0], [0.1735, 0.6227]]]]

Expected: [[[[0, 0], [0, 0], [0, 0.3646]], [[0, 0], [0, 0], [0.1735, 0.6227]]]]