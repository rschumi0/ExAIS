import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add13534 = tf.keras.layers.Input(shape=([2, 1]))
in1Add13534 = tf.keras.layers.Input(shape=([2, 1]))
in0Glo39348 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con16710 = tf.keras.layers.Input(shape=([1]))

Add13534 = keras.layers.Add(name = 'Add13534', )([in0Add13534,in1Add13534])
Max22734 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max22734', )(Add13534)
Fla88204 = keras.layers.Flatten(name = 'Fla88204', )(Max22734)
Glo39348 = keras.layers.GlobalMaxPool3D(name = 'Glo39348', )(in0Glo39348)
Con16710 = keras.layers.Concatenate(axis=1, name = 'Con16710', )([Glo39348,in0Con16710])
Add70225 = keras.layers.Add(name = 'Add70225', )([Fla88204,Con16710])
Res81555 = keras.layers.Reshape((2, 1), name = 'Res81555', )(Add70225)
Loc30099 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc30099', )(Res81555)
model = tf.keras.models.Model(inputs=[in0Add13534,in1Add13534,in0Glo39348,in0Con16710], outputs=Loc30099)
w = model.get_layer('Loc30099').get_weights() 
w[0] = np.array([[[0.9348, 0.2408]], [[0.1074, 0.0056]]])
w[1] = np.array([[0, 0], [0, 0]])
model.get_layer('Loc30099').set_weights(w) 
in0Add13534 = tf.constant([[[0.5901], [0.066]]])
in1Add13534 = tf.constant([[[0.4128], [0.6795]]])
in0Glo39348 = tf.constant([[[[[1.6332]]], [[[1.3788]]]]])
in0Con16710 = tf.constant([[0.7522]])
print (np.array2string(model.predict([in0Add13534,in1Add13534,in0Glo39348,in0Con16710],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc30099.png')

LAdd13534 = add_layer([[[[0.5901], [0.066]]], [[[0.4128], [0.6795]]]], Add13534), 
LMax22734 = max_pool1D_layer(Add13534, 1, 1, false, Max22734), 
LFla88204 = flatten_layer(Max22734, Fla88204), 
LGlo39348 = global_max_pool3D_layer([[[[[1.6332]]], [[[1.3788]]]]], Glo39348), 
LCon16710 = concatenate_layer([Glo39348,[[0.7522]]], 1, Con16710), 
LAdd70225 = add_layer([Fla88204,Con16710], Add70225), 
LRes81555 = reshape_layer(Add70225, [2, 1], Res81555), 
LLoc30099 = locally_connected1D_layer(Res81555, 1,[[[0.9348, 0.2408]], [[0.1074, 0.0056]]],[[0, 0], [0, 0]], 1, Loc30099), 
exec_layers([LAdd13534,LMax22734,LFla88204,LGlo39348,LCon16710,LAdd70225,LRes81555,LLoc30099],["Add13534","Max22734","Fla88204","Glo39348","Con16710","Add70225","Res81555","Loc30099"],Loc30099,"Loc30099")

Actual (Unparsed): [[[2.4642263, 0.6347729], [0.1608530, 0.0083871]]]

Expected (Unparsed): [[[2.4642262799999997,0.63477288],[0.16085298,0.00838712]]]

Actual:   [[[2.4643, 0.6348], [0.1609, 0.0084]]]

Expected: [[[2.4643, 0.6348], [0.1609, 0.0084]]]