import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min37126 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Min37126 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Min37126 = keras.layers.Minimum(name = 'Min37126', )([in0Min37126,in1Min37126])
Res32248 = keras.layers.Reshape((1, 2, 2), name = 'Res32248', )(Min37126)
Glo42266 = keras.layers.GlobalAveragePooling2D(name = 'Glo42266', )(Res32248)
Res95221 = keras.layers.Reshape((2, 1), name = 'Res95221', )(Glo42266)
Res5312 = keras.layers.Reshape((2, 1, 1), name = 'Res5312', )(Res95221)
Ave19538 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 1), padding='same', name = 'Ave19538', )(Res5312)
model = tf.keras.models.Model(inputs=[in0Min37126,in1Min37126], outputs=Ave19538)
in0Min37126 = tf.constant([[[[[0.0707], [0.3361]], [[0.7452], [0.7134]]]]])
in1Min37126 = tf.constant([[[[[0.8146], [0.7984]], [[0.4404], [0.3633]]]]])
print (np.array2string(model.predict([in0Min37126,in1Min37126],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave19538.png')

LMin37126 = minimum_layer([[[[[[0.0707], [0.3361]], [[0.7452], [0.7134]]]]], [[[[[0.8146], [0.7984]], [[0.4404], [0.3633]]]]]], Min37126), 
LRes32248 = reshape_layer(Min37126, [1, 2, 2], Res32248), 
LGlo42266 = global_average_pooling2D_layer(Res32248, Glo42266), 
LRes95221 = reshape_layer(Glo42266, [2, 1], Res95221), 
LRes5312 = reshape_layer(Res95221, [2, 1, 1], Res5312), 
LAve19538 = average_pooling2D_layer(Res5312, 2, 1, 1, 1, true, Ave19538), 
exec_layers([LMin37126,LRes32248,LGlo42266,LRes95221,LRes5312,LAve19538],["Min37126","Res32248","Glo42266","Res95221","Res5312","Ave19538"],Ave19538,"Ave19538")

Actual (Unparsed): [[[[0.3026250]], [[0.3497000]]]]

Expected (Unparsed): [[[[0.30262500000000003]],[[0.3497]]]]

Actual:   [[[[0.3027]], [[0.3497]]]]

Expected: [[[[0.3027]], [[0.3497]]]]