import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub71681 = tf.keras.layers.Input(shape=([2, 2, 3]))
in1Sub71681 = tf.keras.layers.Input(shape=([2, 2, 3]))

Sub71681 = keras.layers.Subtract(name = 'Sub71681', )([in0Sub71681,in1Sub71681])
Res64430 = keras.layers.Reshape((2, 6), name = 'Res64430', )(Sub71681)
Up_14045 = keras.layers.UpSampling1D(size=(2), name = 'Up_14045', )(Res64430)
Res73176 = keras.layers.Reshape((4, 6, 1), name = 'Res73176', )(Up_14045)
Ave86284 = keras.layers.AveragePooling2D(pool_size=(1, 5), strides=(1, 3), padding='same', name = 'Ave86284', )(Res73176)
model = tf.keras.models.Model(inputs=[in0Sub71681,in1Sub71681], outputs=Ave86284)
in0Sub71681 = tf.constant([[[[0.5694, 0.0213, 0.2272], [0.828, 0.0073, 0.1775]], [[0.2657, 0.0834, 0.2647], [0.2739, 0.7667, 0.9283]]]])
in1Sub71681 = tf.constant([[[[0.409, 0.475, 0.8111], [0.1633, 0.259, 0.9517]], [[0.6047, 0.1351, 0.1621], [0.8418, 0.2779, 0.9061]]]])
print (np.array2string(model.predict([in0Sub71681,in1Sub71681],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave86284.png')

LSub71681 = subtract_layer([[[[0.5694, 0.0213, 0.2272], [0.828, 0.0073, 0.1775]], [[0.2657, 0.0834, 0.2647], [0.2739, 0.7667, 0.9283]]]], [[[[0.409, 0.475, 0.8111], [0.1633, 0.259, 0.9517]], [[0.6047, 0.1351, 0.1621], [0.8418, 0.2779, 0.9061]]]], Sub71681), 
LRes64430 = reshape_layer(Sub71681, [2, 6], Res64430), 
LUp_14045 = up_sampling1D_layer(Res64430, 2, Up_14045), 
LRes73176 = reshape_layer(Up_14045, [4, 6, 1], Res73176), 
LAve86284 = average_pooling2D_layer(Res73176, 1, 5, 1, 3, true, Ave86284), 
exec_layers([LSub71681,LRes64430,LUp_14045,LRes73176,LAve86284],["Sub71681","Res64430","Up_14045","Res73176","Ave86284"],Ave86284,"Ave86284")

Actual (Unparsed): [[[[-0.0531250], [-0.2362750]], [[-0.0531250], [-0.2362750]], [[-0.2140000], [0.0114250]], [[-0.2140000], [0.0114250]]]]

Expected (Unparsed): [[[[-0.053125000000000006],[-0.23627500000000004]],[[-0.053125000000000006],[-0.23627500000000004]],[[-0.21400000000000002],[0.011425000000000005]],[[-0.21400000000000002],[0.011425000000000005]]]]

Actual:   [[[[-0.0531], [-0.2362]], [[-0.0531], [-0.2362]], [[-0.214], [0.0115]], [[-0.214], [0.0115]]]]

Expected: [[[[-0.0531], [-0.2362]], [[-0.0531], [-0.2362]], [[-0.214], [0.0115]], [[-0.214], [0.0115]]]]