import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add33797 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Add33797 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Add33797 = keras.layers.Add(name = 'Add33797', )([in0Add33797,in1Add33797])
Res64895 = keras.layers.Reshape((1, 1, 2), name = 'Res64895', )(Add33797)
Con84056 = keras.layers.Conv2D(2, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con84056', )(Res64895)
Res73234 = keras.layers.Reshape((1, 2), name = 'Res73234', )(Con84056)
Sim3946 = keras.layers.SimpleRNN(2,name = 'Sim3946', )(Res73234)
Res21958 = keras.layers.Reshape((2, 1), name = 'Res21958', )(Sim3946)
Glo24732 = keras.layers.GlobalAveragePooling1D(name = 'Glo24732', )(Res21958)
model = tf.keras.models.Model(inputs=[in0Add33797,in1Add33797], outputs=Glo24732)
w = model.get_layer('Con84056').get_weights() 
w[0] = np.array([[[[0.9572, 0.6589], [0.8477, 0.4773]]]])
w[1] = np.array([0, 0])
model.get_layer('Con84056').set_weights(w) 
w = model.get_layer('Sim3946').get_weights() 
w[0] = np.array([[7, 6], [6, 1]])
w[1] = np.array([[10, 3], [8, 1]])
w[2] = np.array([9, 8])
model.get_layer('Sim3946').set_weights(w) 
in0Add33797 = tf.constant([[[[[0.2309, 0.8124]]]]])
in1Add33797 = tf.constant([[[[[0.9133, 0.7553]]]]])
print (np.array2string(model.predict([in0Add33797,in1Add33797],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo24732.png')

LAdd33797 = add_layer([[[[[[0.2309, 0.8124]]]]], [[[[[0.9133, 0.7553]]]]]], Add33797), 
LRes64895 = reshape_layer(Add33797, [1, 1, 2], Res64895), 
LCon84056 = conv2D_layer(Res64895, 1, 1,[[[[0.9572, 0.6589], [0.8477, 0.4773]]]],[0, 0], 1, 1, false, 1, 1, Con84056), 
LRes73234 = reshape_layer(Con84056, [1, 2], Res73234), 
LSim3946 = simple_rnn_layer(Res73234,[[7, 6], [6, 1]],[[10, 3], [8, 1]],[9, 8], Sim3946), 
LRes21958 = reshape_layer(Sim3946, [2, 1], Res21958), 
LGlo24732 = global_average_pooling1D_layer(Res21958, Glo24732), 
exec_layers([LAdd33797,LRes64895,LCon84056,LRes73234,LSim3946,LRes21958,LGlo24732],["Add33797","Res64895","Con84056","Res73234","Sim3946","Res21958","Glo24732"],Glo24732,"Glo24732")

Actual (Unparsed): [[1.0000000]]

Expected (Unparsed): [[1.0]]

Actual:   [[1]]

Expected: [[1]]