import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul79988 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul79988 = tf.keras.layers.Input(shape=([1, 1]))
in0Mul70648 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul70648 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave29827 = tf.keras.layers.Input(shape=([1, 1]))

Mul79988 = keras.layers.Multiply(name = 'Mul79988', )([in0Mul79988,in1Mul79988])
Mul70648 = keras.layers.Multiply(name = 'Mul70648', )([in0Mul70648,in1Mul70648])
Res7913 = keras.layers.Reshape((1, 1), name = 'Res7913', )(Mul70648)
Ave29827 = keras.layers.AveragePooling1D(pool_size=(1), strides=(6), padding='valid', name = 'Ave29827', )(in0Ave29827)
Sub84291 = keras.layers.Subtract(name = 'Sub84291', )([Res7913,Ave29827])
Max40659 = keras.layers.Maximum(name = 'Max40659', )([Mul79988,Sub84291])
model = tf.keras.models.Model(inputs=[in0Mul79988,in1Mul79988,in0Mul70648,in1Mul70648,in0Ave29827], outputs=Max40659)
in0Mul79988 = tf.constant([[[0.3455]]])
in1Mul79988 = tf.constant([[[0.9934]]])
in0Mul70648 = tf.constant([[[[0.3188]]]])
in1Mul70648 = tf.constant([[[[0.5038]]]])
in0Ave29827 = tf.constant([[[1.7399]]])
print (np.array2string(model.predict([in0Mul79988,in1Mul79988,in0Mul70648,in1Mul70648,in0Ave29827],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max40659.png')

LMul79988 = multiply_layer([[[[0.3455]]], [[[0.9934]]]], Mul79988), 
LMul70648 = multiply_layer([[[[[0.3188]]]], [[[[0.5038]]]]], Mul70648), 
LRes7913 = reshape_layer(Mul70648, [1, 1], Res7913), 
LAve29827 = average_pooling1D_layer([[[1.7399]]], 1, 6, false, Ave29827), 
LSub84291 = subtract_layer(Res7913,Ave29827, Sub84291), 
LMax40659 = maximum_layer([Mul79988,Sub84291], Max40659), 
exec_layers([LMul79988,LMul70648,LRes7913,LAve29827,LSub84291,LMax40659],["Mul79988","Mul70648","Res7913","Ave29827","Sub84291","Max40659"],Max40659,"Max40659")

Actual (Unparsed): [[[0.3432197]]]

Expected (Unparsed): [[[0.34321969999999996]]]

Actual:   [[[0.3433]]]

Expected: [[[0.3433]]]