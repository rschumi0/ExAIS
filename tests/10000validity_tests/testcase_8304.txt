import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add39833 = tf.keras.layers.Input(shape=([2, 2]))
in1Add39833 = tf.keras.layers.Input(shape=([2, 2]))
in0Con18870 = tf.keras.layers.Input(shape=([3, 3, 1]))
in0Sub55799 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub55799 = tf.keras.layers.Input(shape=([3, 3]))
in0Con78776 = tf.keras.layers.Input(shape=([3, 3, 1]))
in0Min14385 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min14385 = tf.keras.layers.Input(shape=([2, 1, 2]))

Add39833 = keras.layers.Add(name = 'Add39833', )([in0Add39833,in1Add39833])
Res30455 = keras.layers.Reshape((2, 2, 1), name = 'Res30455', )(Add39833)
Zer22560 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer22560', )(Res30455)
Con18870 = keras.layers.Concatenate(axis=3, name = 'Con18870', )([Zer22560,in0Con18870])
Sub55799 = keras.layers.Subtract(name = 'Sub55799', )([in0Sub55799,in1Sub55799])
Res16086 = keras.layers.Reshape((3, 3, 1), name = 'Res16086', )(Sub55799)
Con78776 = keras.layers.Concatenate(axis=3, name = 'Con78776', )([Res16086,in0Con78776])
Min14385 = keras.layers.Minimum(name = 'Min14385', )([in0Min14385,in1Min14385])
Zer32195 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer32195', )(Min14385)
Max42117 = keras.layers.Maximum(name = 'Max42117', )([Con78776,Zer32195])
Mul22047 = keras.layers.Multiply(name = 'Mul22047', )([Con18870,Max42117])
Res15182 = keras.layers.Reshape((3, 6), name = 'Res15182', )(Mul22047)
Fla72338 = keras.layers.Flatten(name = 'Fla72338', )(Res15182)
Thr52718 = keras.layers.ThresholdedReLU(theta=7.989966529197865, name = 'Thr52718', )(Fla72338)
model = tf.keras.models.Model(inputs=[in0Add39833,in1Add39833,in0Con18870,in0Sub55799,in1Sub55799,in0Con78776,in0Min14385,in1Min14385], outputs=Thr52718)
in0Add39833 = tf.constant([[[0.9983, 0.5415], [0.4249, 0.7443]]])
in1Add39833 = tf.constant([[[0.1877, 0.2071], [0.8088, 0.7401]]])
in0Con18870 = tf.constant([[[[0.4808], [0.6636], [0.9048]], [[0.2684], [0.0017], [0.2499]], [[0.2235], [0.0362], [0.783]]]])
in0Sub55799 = tf.constant([[[0.4065, 0.8871, 0.7794], [0.3698, 0.6562, 0.8965], [0.4703, 0.3293, 0.4909]]])
in1Sub55799 = tf.constant([[[0.5493, 0.8669, 0.024], [0.2506, 0.6092, 0.1888], [0.5712, 0.5604, 0.0298]]])
in0Con78776 = tf.constant([[[[0.8952], [0.9105], [0.1673]], [[0.019], [0.0186], [0.4705]], [[0.4127], [0.4002], [0.9652]]]])
in0Min14385 = tf.constant([[[[0.5695, 0.8356]], [[0.3505, 0.4221]]]])
in1Min14385 = tf.constant([[[[0.2087, 0.0344]], [[0.1281, 0.3345]]]])
print (np.array2string(model.predict([in0Add39833,in1Add39833,in0Con18870,in0Sub55799,in1Sub55799,in0Con78776,in0Min14385,in1Min14385],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr52718.png')

LAdd39833 = add_layer([[[[0.9983, 0.5415], [0.4249, 0.7443]]], [[[0.1877, 0.2071], [0.8088, 0.7401]]]], Add39833), 
LRes30455 = reshape_layer(Add39833, [2, 2, 1], Res30455), 
LZer22560 = zero_padding2D_layer(Res30455, 1, 0, 1, 0, Zer22560), 
LCon18870 = concatenate_layer([Zer22560,[[[[0.4808], [0.6636], [0.9048]], [[0.2684], [0.0017], [0.2499]], [[0.2235], [0.0362], [0.783]]]]], 3, Con18870), 
LSub55799 = subtract_layer([[[0.4065, 0.8871, 0.7794], [0.3698, 0.6562, 0.8965], [0.4703, 0.3293, 0.4909]]], [[[0.5493, 0.8669, 0.024], [0.2506, 0.6092, 0.1888], [0.5712, 0.5604, 0.0298]]], Sub55799), 
LRes16086 = reshape_layer(Sub55799, [3, 3, 1], Res16086), 
LCon78776 = concatenate_layer([Res16086,[[[[0.8952], [0.9105], [0.1673]], [[0.019], [0.0186], [0.4705]], [[0.4127], [0.4002], [0.9652]]]]], 3, Con78776), 
LMin14385 = minimum_layer([[[[[0.5695, 0.8356]], [[0.3505, 0.4221]]]], [[[[0.2087, 0.0344]], [[0.1281, 0.3345]]]]], Min14385), 
LZer32195 = zero_padding2D_layer(Min14385, 1, 0, 2, 0, Zer32195), 
LMax42117 = maximum_layer([Con78776,Zer32195], Max42117), 
LMul22047 = multiply_layer([Con18870,Max42117], Mul22047), 
LRes15182 = reshape_layer(Mul22047, [3, 6], Res15182), 
LFla72338 = flatten_layer(Res15182, Fla72338), 
LThr52718 = thresholded_relu_layer(Fla72338, 7.989966529197865, Thr52718), 
exec_layers([LAdd39833,LRes30455,LZer22560,LCon18870,LSub55799,LRes16086,LCon78776,LMin14385,LZer32195,LMax42117,LMul22047,LRes15182,LFla72338,LThr52718],["Add39833","Res30455","Zer22560","Con18870","Sub55799","Res16086","Con78776","Min14385","Zer32195","Max42117","Mul22047","Res15182","Fla72338","Thr52718"],Thr52718,"Thr52718")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]

Actual:   [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]

Expected: [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]