import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max42407 = tf.keras.layers.Input(shape=([2, 1]))
in1Max42407 = tf.keras.layers.Input(shape=([2, 1]))
in0Lea3385 = tf.keras.layers.Input(shape=([1, 2, 1]))

Max42407 = keras.layers.Maximum(name = 'Max42407', )([in0Max42407,in1Max42407])
Den28752 = keras.layers.Dense(2,name = 'Den28752', )(Max42407)
Res64137 = keras.layers.Reshape((2, 2, 1), name = 'Res64137', )(Den28752)
Lea3385 = keras.layers.LeakyReLU(alpha=8.709026908287772, name = 'Lea3385', input_shape=(1, 2, 1))(in0Lea3385)
Zer97471 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer97471', )(Lea3385)
Ave6719 = keras.layers.Average(name = 'Ave6719', )([Res64137,Zer97471])
model = tf.keras.models.Model(inputs=[in0Max42407,in1Max42407,in0Lea3385], outputs=Ave6719)
w = model.get_layer('Den28752').get_weights() 
w[0] = np.array([[0.8786, 0.2508]])
w[1] = np.array([0.2896, 0.571])
model.get_layer('Den28752').set_weights(w) 
in0Max42407 = tf.constant([[[0.2529], [0.0559]]])
in1Max42407 = tf.constant([[[0.3144], [0.9714]]])
in0Lea3385 = tf.constant([[[[0.6703], [0.5729]]]])
print (np.array2string(model.predict([in0Max42407,in1Max42407,in0Lea3385],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave6719.png')

LMax42407 = maximum_layer([[[[0.2529], [0.0559]]], [[[0.3144], [0.9714]]]], Max42407), 
LDen28752 = dense_layer(Max42407, [[0.8786, 0.2508]],[0.2896, 0.571], Den28752), 
LRes64137 = reshape_layer(Den28752, [2, 2, 1], Res64137), 
LLea3385 = leaky_relu_layer([[[[0.6703], [0.5729]]]], 8.709026908287772, Lea3385), 
LZer97471 = zero_padding2D_layer(Lea3385, 1, 0, 0, 0, Zer97471), 
LAve6719 = average_layer([Res64137,Zer97471], Ave6719), 
exec_layers([LMax42407,LDen28752,LRes64137,LLea3385,LZer97471,LAve6719],["Max42407","Den28752","Res64137","Lea3385","Zer97471","Ave6719"],Ave6719,"Ave6719")

Actual (Unparsed): [[[[0.2829159], [0.3249258]], [[0.9066860], [0.6937636]]]]

Expected (Unparsed): [[[[0.28291592],[0.32492575999999995]],[[0.90668602],[0.69376356]]]]

Actual:   [[[[0.283], [0.325]], [[0.9067], [0.6938]]]]

Expected: [[[[0.283], [0.325]], [[0.9067], [0.6938]]]]