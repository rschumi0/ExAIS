import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul83486 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul83486 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Sep95448 = tf.keras.layers.Input(shape=([2, 1]))
in0Den51434 = tf.keras.layers.Input(shape=([4, 2]))
in0Con7047 = tf.keras.layers.Input(shape=([4, 2]))
in0Con365 = tf.keras.layers.Input(shape=([8, 8, 1]))
in0Max71853 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Max71853 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con651 = tf.keras.layers.Input(shape=([8, 8, 1]))

Mul83486 = keras.layers.Multiply(name = 'Mul83486', )([in0Mul83486,in1Mul83486])
Zer49059 = keras.layers.ZeroPadding2D(padding=((7, 0), (7, 0)), name = 'Zer49059', )(Mul83486)
Sep95448 = keras.layers.SeparableConv1D(4, (1),strides=(1), padding='valid', name = 'Sep95448', )(in0Sep95448)
Zer70993 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer70993', )(Sep95448)
Den51434 = keras.layers.Dense(2,name = 'Den51434', )(in0Den51434)
Con7047 = keras.layers.Concatenate(axis=2, name = 'Con7047', )([Den51434,in0Con7047])
Ave11185 = keras.layers.Average(name = 'Ave11185', )([Zer70993,Con7047])
Res99117 = keras.layers.Reshape((4, 4, 1), name = 'Res99117', )(Ave11185)
Up_69316 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_69316', )(Res99117)
Con365 = keras.layers.Concatenate(axis=3, name = 'Con365', )([Up_69316,in0Con365])
Ave57036 = keras.layers.Average(name = 'Ave57036', )([Zer49059,Con365])
Max71853 = keras.layers.Maximum(name = 'Max71853', )([in0Max71853,in1Max71853])
Zer16889 = keras.layers.ZeroPadding2D(padding=((7, 0), (7, 0)), name = 'Zer16889', )(Max71853)
Con651 = keras.layers.Concatenate(axis=3, name = 'Con651', )([Zer16889,in0Con651])
Max26055 = keras.layers.Maximum(name = 'Max26055', )([Ave57036,Con651])
Res61454 = keras.layers.Reshape((8, 16), name = 'Res61454', )(Max26055)
Cro38532 = keras.layers.Cropping1D(cropping=((4, 0)), name = 'Cro38532', )(Res61454)
model = tf.keras.models.Model(inputs=[in0Mul83486,in1Mul83486,in0Sep95448,in0Den51434,in0Con7047,in0Con365,in0Max71853,in1Max71853,in0Con651], outputs=Cro38532)
w = model.get_layer('Sep95448').get_weights() 
w[0] = np.array([[[0.5203]]])
w[1] = np.array([[[0.0397, 0.0359, 0.7605, 0.3063]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep95448').set_weights(w) 
w = model.get_layer('Den51434').get_weights() 
w[0] = np.array([[0.3943, 0.5311], [0.828, 0.8635]])
w[1] = np.array([0.1451, 0.3874])
model.get_layer('Den51434').set_weights(w) 
in0Mul83486 = tf.constant([[[[0.4888, 0.9314]]]])
in1Mul83486 = tf.constant([[[[0.5758, 0.7863]]]])
in0Sep95448 = tf.constant([[[0.8929], [0.8402]]])
in0Den51434 = tf.constant([[[0.4264, 0.5439], [0.0918, 0.2017], [0.3543, 0.0162], [0.1429, 0.9689]]])
in0Con7047 = tf.constant([[[0.8072, 0.9215], [0.5449, 0.9367], [0.5952, 0.9353], [0.7375, 0.6914]]])
in0Con365 = tf.constant([[[[0.5566], [0.0773], [0.6737], [0.6072], [0.4185], [0.2576], [0.5376], [0.9559]], [[0.399], [0.957], [0.8625], [0.2478], [0.2846], [0.0125], [0.4532], [0.5671]], [[0.7617], [0.0113], [0.7844], [0.5109], [0.8552], [0.1064], [0.5798], [0.3635]], [[0.9581], [0.0873], [0.036], [0.8513], [0.5667], [0.8268], [0.8838], [0.5125]], [[0.1893], [0.5609], [0.357], [0.1946], [0.5443], [0.327], [0.7954], [0.6998]], [[0.0816], [0.2845], [0.0474], [0.1398], [0.0692], [0.5743], [0.0569], [0.1325]], [[0.968], [0.8327], [0.0209], [0.5757], [0.5895], [0.472], [0.2863], [0.3653]], [[0.5739], [0.3611], [0.7164], [0.0933], [0.0587], [0.5974], [0.6052], [0.4546]]]])
in0Max71853 = tf.constant([[[[0.1339]]]])
in1Max71853 = tf.constant([[[[0.1898]]]])
in0Con651 = tf.constant([[[[0.046], [0.7299], [0.7545], [0.4391], [0.5904], [0.9785], [0.8468], [0.3571]], [[0.0948], [0.1021], [0.5843], [0.7607], [0.2807], [0.6391], [0.0051], [0.8803]], [[0.1912], [0.7811], [0.2644], [0.9567], [0.1951], [0.1878], [0.5101], [0.237]], [[0.8446], [0.7341], [0.9045], [0.1493], [0.6412], [0.5544], [0.2238], [0.1105]], [[0.4629], [0.1804], [0.1853], [0.4882], [0.3952], [0.53], [0.1545], [0.3425]], [[0.973], [0.9986], [0.1653], [0.7084], [0.3885], [0.9277], [0.2517], [0.3411]], [[0.0506], [0.2822], [0.9319], [0.0464], [0.9897], [0.4547], [0.3137], [0.9439]], [[0.9948], [0.7323], [0.6956], [0.2695], [0.0427], [0.112], [0.7292], [0.6148]]]])
print (np.array2string(model.predict([in0Mul83486,in1Mul83486,in0Sep95448,in0Den51434,in0Con7047,in0Con365,in0Max71853,in1Max71853,in0Con651],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro38532.png')

LMul83486 = multiply_layer([[[[[0.4888, 0.9314]]]], [[[[0.5758, 0.7863]]]]], Mul83486), 
LZer49059 = zero_padding2D_layer(Mul83486, 7, 0, 7, 0, Zer49059), 
LSep95448 = separable_conv1D_layer([[[0.8929], [0.8402]]], 1,[[[[0.5203]]],[[[0.0397, 0.0359, 0.7605, 0.3063]]]],[0, 0, 0, 0], 1, false, Sep95448), 
LZer70993 = zero_padding1D_layer(Sep95448, 2, 0, Zer70993), 
LDen51434 = dense_layer([[[0.4264, 0.5439], [0.0918, 0.2017], [0.3543, 0.0162], [0.1429, 0.9689]]], [[0.3943, 0.5311], [0.828, 0.8635]],[0.1451, 0.3874], Den51434), 
LCon7047 = concatenate_layer([Den51434,[[[0.8072, 0.9215], [0.5449, 0.9367], [0.5952, 0.9353], [0.7375, 0.6914]]]], 2, Con7047), 
LAve11185 = average_layer([Zer70993,Con7047], Ave11185), 
LRes99117 = reshape_layer(Ave11185, [4, 4, 1], Res99117), 
LUp_69316 = up_sampling2D_layer(Res99117, 2, 2, Up_69316), 
LCon365 = concatenate_layer([Up_69316,[[[[0.5566], [0.0773], [0.6737], [0.6072], [0.4185], [0.2576], [0.5376], [0.9559]], [[0.399], [0.957], [0.8625], [0.2478], [0.2846], [0.0125], [0.4532], [0.5671]], [[0.7617], [0.0113], [0.7844], [0.5109], [0.8552], [0.1064], [0.5798], [0.3635]], [[0.9581], [0.0873], [0.036], [0.8513], [0.5667], [0.8268], [0.8838], [0.5125]], [[0.1893], [0.5609], [0.357], [0.1946], [0.5443], [0.327], [0.7954], [0.6998]], [[0.0816], [0.2845], [0.0474], [0.1398], [0.0692], [0.5743], [0.0569], [0.1325]], [[0.968], [0.8327], [0.0209], [0.5757], [0.5895], [0.472], [0.2863], [0.3653]], [[0.5739], [0.3611], [0.7164], [0.0933], [0.0587], [0.5974], [0.6052], [0.4546]]]]], 3, Con365), 
LAve57036 = average_layer([Zer49059,Con365], Ave57036), 
LMax71853 = maximum_layer([[[[[0.1339]]]], [[[[0.1898]]]]], Max71853), 
LZer16889 = zero_padding2D_layer(Max71853, 7, 0, 7, 0, Zer16889), 
LCon651 = concatenate_layer([Zer16889,[[[[0.046], [0.7299], [0.7545], [0.4391], [0.5904], [0.9785], [0.8468], [0.3571]], [[0.0948], [0.1021], [0.5843], [0.7607], [0.2807], [0.6391], [0.0051], [0.8803]], [[0.1912], [0.7811], [0.2644], [0.9567], [0.1951], [0.1878], [0.5101], [0.237]], [[0.8446], [0.7341], [0.9045], [0.1493], [0.6412], [0.5544], [0.2238], [0.1105]], [[0.4629], [0.1804], [0.1853], [0.4882], [0.3952], [0.53], [0.1545], [0.3425]], [[0.973], [0.9986], [0.1653], [0.7084], [0.3885], [0.9277], [0.2517], [0.3411]], [[0.0506], [0.2822], [0.9319], [0.0464], [0.9897], [0.4547], [0.3137], [0.9439]], [[0.9948], [0.7323], [0.6956], [0.2695], [0.0427], [0.112], [0.7292], [0.6148]]]]], 3, Con651), 
LMax26055 = maximum_layer([Ave57036,Con651], Max26055), 
LRes61454 = reshape_layer(Max26055, [8, 16], Res61454), 
LCro38532 = cropping1D_layer(Res61454, 4, 0, Cro38532), 
exec_layers([LMul83486,LZer49059,LSep95448,LZer70993,LDen51434,LCon7047,LAve11185,LRes99117,LUp_69316,LCon365,LAve57036,LMax71853,LZer16889,LCon651,LMax26055,LRes61454,LCro38532],["Mul83486","Zer49059","Sep95448","Zer70993","Den51434","Con7047","Ave11185","Res99117","Up_69316","Con365","Ave57036","Max71853","Zer16889","Con651","Max26055","Res61454","Cro38532"],Cro38532,"Cro38532")

Actual (Unparsed): [[[0.0791644, 0.4629000, 0.0791644, 0.2804500, 0.1515589, 0.1853000, 0.1515589, 0.4882000, 0.2371275, 0.3952000, 0.2371275, 0.5300000, 0.2693999, 0.3977000, 0.2693999, 0.3499000], [0.0791644, 0.9730000, 0.0791644, 0.9986000, 0.1515589, 0.1653000, 0.1515589, 0.7084000, 0.2371275, 0.3885000, 0.2371275, 0.9277000, 0.2693999, 0.2517000, 0.2693999, 0.3411000], [0.2552624, 0.4840000, 0.2552624, 0.4163500, 0.3289083, 0.9319000, 0.3289083, 0.2878500, 0.2674893, 0.9897000, 0.2674893, 0.4547000, 0.2063252, 0.3137000, 0.2063252, 0.9439000], [0.2552624, 0.9948000, 0.2552624, 0.7323000, 0.3289083, 0.6956000, 0.3289083, 0.2695000, 0.2674893, 0.0427000, 0.2674893, 0.2987000, 0.2063252, 0.7292000, 0.3470507, 0.6148000]]]

Expected (Unparsed): [[[0.07916443800975,0.4629,0.07916443800975,0.28045,0.15155892593325002,0.1853,0.15155892593325002,0.4882,0.23712748728375,0.3952,0.23712748728375,0.53,0.26939989724525,0.3977,0.26939989724525,0.3499],[0.07916443800975,0.973,0.07916443800975,0.9986,0.15155892593325002,0.1653,0.15155892593325002,0.7084,0.23712748728375,0.3885,0.23712748728375,0.9277,0.26939989724525,0.2517,0.26939989724525,0.3411],[0.25526244139550003,0.484,0.25526244139550003,0.41635,0.3289083106385,0.9319,0.3289083106385,0.28785,0.2674892959075,0.9897,0.2674892959075,0.4547,0.2063252252945,0.3137,0.2063252252945,0.9439],[0.25526244139550003,0.9948,0.25526244139550003,0.7323,0.3289083106385,0.6956,0.3289083106385,0.2695,0.2674892959075,0.0427,0.2674892959075,0.2987,0.2063252252945,0.7292,0.3470507452945,0.6148]]]

Actual:   [[[0.0792, 0.4629, 0.0792, 0.2805, 0.1516, 0.1853, 0.1516, 0.4882, 0.2372, 0.3952, 0.2372, 0.53, 0.2694, 0.3977, 0.2694, 0.3499], [0.0792, 0.973, 0.0792, 0.9986, 0.1516, 0.1653, 0.1516, 0.7084, 0.2372, 0.3885, 0.2372, 0.9277, 0.2694, 0.2517, 0.2694, 0.3411], [0.2553, 0.484, 0.2553, 0.4164, 0.329, 0.9319, 0.329, 0.2879, 0.2675, 0.9897, 0.2675, 0.4547, 0.2064, 0.3137, 0.2064, 0.9439], [0.2553, 0.9948, 0.2553, 0.7323, 0.329, 0.6956, 0.329, 0.2695, 0.2675, 0.0427, 0.2675, 0.2987, 0.2064, 0.7292, 0.3471, 0.6148]]]

Expected: [[[0.0792, 0.4629, 0.0792, 0.2805, 0.1516, 0.1853, 0.1516, 0.4882, 0.2372, 0.3952, 0.2372, 0.53, 0.2694, 0.3977, 0.2694, 0.3499], [0.0792, 0.973, 0.0792, 0.9986, 0.1516, 0.1653, 0.1516, 0.7084, 0.2372, 0.3885, 0.2372, 0.9277, 0.2694, 0.2517, 0.2694, 0.3411], [0.2553, 0.484, 0.2553, 0.4164, 0.329, 0.9319, 0.329, 0.2879, 0.2675, 0.9897, 0.2675, 0.4547, 0.2064, 0.3137, 0.2064, 0.9439], [0.2553, 0.9948, 0.2553, 0.7323, 0.329, 0.6956, 0.329, 0.2695, 0.2675, 0.0427, 0.2675, 0.2987, 0.2064, 0.7292, 0.3471, 0.6148]]]