import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul14604 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul14604 = tf.keras.layers.Input(shape=([1, 2]))

Mul14604 = keras.layers.Multiply(name = 'Mul14604', )([in0Mul14604,in1Mul14604])
Res43971 = keras.layers.Reshape((1, 2, 1), name = 'Res43971', )(Mul14604)
Res6624 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res6624', )(Res43971)
Con30660 = keras.layers.Conv3D(2, (1, 2, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con30660', )(Res6624)
Res9870 = keras.layers.Reshape((1, 2, 2), name = 'Res9870', )(Con30660)
Res99846 = keras.layers.Reshape((1, 4), name = 'Res99846', )(Res9870)
Loc42207 = keras.layers.LocallyConnected1D(4, (1),strides=(1), name = 'Loc42207', )(Res99846)
model = tf.keras.models.Model(inputs=[in0Mul14604,in1Mul14604], outputs=Loc42207)
w = model.get_layer('Con30660').get_weights() 
w[0] = np.array([[[[[0.2288, 0.9306]]], [[[0.3413, 0.7487]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con30660').set_weights(w) 
w = model.get_layer('Loc42207').get_weights() 
w[0] = np.array([[[0.8213, 0.4102, 0.3574, 0.4332], [0.1681, 0.7124, 0.6391, 0.6011], [0.4536, 0.2349, 0.0809, 0.0702], [0.3202, 0.0969, 0.5097, 0.0317]]])
w[1] = np.array([[0, 0, 0, 0]])
model.get_layer('Loc42207').set_weights(w) 
in0Mul14604 = tf.constant([[[0.0181, 0.3421]]])
in1Mul14604 = tf.constant([[[0.5029, 0.895]]])
print (np.array2string(model.predict([in0Mul14604,in1Mul14604],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc42207.png')

LMul14604 = multiply_layer([[[[0.0181, 0.3421]]], [[[0.5029, 0.895]]]], Mul14604), 
LRes43971 = reshape_layer(Mul14604, [1, 2, 1], Res43971), 
LRes6624 = reshape_layer(Res43971, [1, 2, 1, 1], Res6624), 
LCon30660 = conv3D_layer(Res6624, 1, 2, 1,[[[[[0.2288, 0.9306]]], [[[0.3413, 0.7487]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con30660), 
LRes9870 = reshape_layer(Con30660, [1, 2, 2], Res9870), 
LRes99846 = reshape_layer(Res9870, [1, 4], Res99846), 
LLoc42207 = locally_connected1D_layer(Res99846, 1,[[[0.8213, 0.4102, 0.3574, 0.4332], [0.1681, 0.7124, 0.6391, 0.6011], [0.4536, 0.2349, 0.0809, 0.0702], [0.3202, 0.0969, 0.5097, 0.0317]]],[[0, 0, 0, 0]], 1, Loc42207), 
exec_layers([LMul14604,LRes43971,LRes6624,LCon30660,LRes9870,LRes99846,LLoc42207],["Mul14604","Res43971","Res6624","Con30660","Res9870","Res99846","Loc42207"],Loc42207,"Loc42207")

Actual (Unparsed): [[[0.2505054, 0.2571280, 0.3409076, 0.2030072]]]

Expected (Unparsed): [[[0.250505396683597,0.257127981509168,0.34090759031138923,0.2030071805300968]]]

Actual:   [[[0.2506, 0.2572, 0.341, 0.2031]]]

Expected: [[[0.2506, 0.2572, 0.341, 0.2031]]]