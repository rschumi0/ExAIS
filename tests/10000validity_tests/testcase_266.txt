import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave79468 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave79468 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot83949 = tf.keras.layers.Input(shape=([2]))
in1Dot83949 = tf.keras.layers.Input(shape=([2]))
in0Up_10524 = tf.keras.layers.Input(shape=([1, 1]))

Ave79468 = keras.layers.Average(name = 'Ave79468', )([in0Ave79468,in1Ave79468])
Dot83949 = keras.layers.Dot(axes=(1, 1), name = 'Dot83949', )([in0Dot83949,in1Dot83949])
Res83800 = keras.layers.Reshape((1, 1), name = 'Res83800', )(Dot83949)
Up_10524 = keras.layers.UpSampling1D(size=(1), name = 'Up_10524', )(in0Up_10524)
Max51102 = keras.layers.Maximum(name = 'Max51102', )([Res83800,Up_10524])
Dot5962 = keras.layers.Dot(axes=(2, 2), name = 'Dot5962', )([Ave79468,Max51102])
model = tf.keras.models.Model(inputs=[in0Ave79468,in1Ave79468,in0Dot83949,in1Dot83949,in0Up_10524], outputs=Dot5962)
in0Ave79468 = tf.constant([[[0.0444]]])
in1Ave79468 = tf.constant([[[0.6659]]])
in0Dot83949 = tf.constant([[0.6023, 0.5057]])
in1Dot83949 = tf.constant([[0.2014, 0.0443]])
in0Up_10524 = tf.constant([[[1.2702]]])
print (np.array2string(model.predict([in0Ave79468,in1Ave79468,in0Dot83949,in1Dot83949,in0Up_10524],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot5962.png')

LAve79468 = average_layer([[[[0.0444]]], [[[0.6659]]]], Ave79468), 
LDot83949 = dot_layer([[0.6023, 0.5057]], [[0.2014, 0.0443]], 1, 1, Dot83949), 
LRes83800 = reshape_layer(Dot83949, [1, 1], Res83800), 
LUp_10524 = up_sampling1D_layer([[[1.2702]]], 1, Up_10524), 
LMax51102 = maximum_layer([Res83800,Up_10524], Max51102), 
LDot5962 = dot_layer(Ave79468,Max51102, 2, 2, Dot5962), 
exec_layers([LAve79468,LDot83949,LRes83800,LUp_10524,LMax51102,LDot5962],["Ave79468","Dot83949","Res83800","Up_10524","Max51102","Dot5962"],Dot5962,"Dot5962")

Actual (Unparsed): [[[0.4511115]]]

Expected (Unparsed): [[[0.45111153000000004]]]

Actual:   [[[0.4512]]]

Expected: [[[0.4512]]]