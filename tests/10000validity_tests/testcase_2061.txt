import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave65988 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave65988 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Dot50193 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot50193 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot61497 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot61497 = tf.keras.layers.Input(shape=([2, 2]))

Ave65988 = keras.layers.Average(name = 'Ave65988', )([in0Ave65988,in1Ave65988])
Res19897 = keras.layers.Reshape((1, 2), name = 'Res19897', )(Ave65988)
Zer21015 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer21015', )(Res19897)
Dot50193 = keras.layers.Dot(axes=(1, 1), name = 'Dot50193', )([in0Dot50193,in1Dot50193])
Dot61497 = keras.layers.Dot(axes=(1, 1), name = 'Dot61497', )([in0Dot61497,in1Dot61497])
Dot52133 = keras.layers.Dot(axes=(2, 2), name = 'Dot52133', )([Dot50193,Dot61497])
Mul77129 = keras.layers.Multiply(name = 'Mul77129', )([Zer21015,Dot52133])
Res40769 = keras.layers.Reshape((2, 2, 1), name = 'Res40769', )(Mul77129)
Res62636 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res62636', )(Res40769)
Zer48869 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer48869', )(Res62636)
model = tf.keras.models.Model(inputs=[in0Ave65988,in1Ave65988,in0Dot50193,in1Dot50193,in0Dot61497,in1Dot61497], outputs=Zer48869)
in0Ave65988 = tf.constant([[[[0.8585], [0.368]]]])
in1Ave65988 = tf.constant([[[[0.5083], [0.5463]]]])
in0Dot50193 = tf.constant([[[0.5615, 0.2323], [0.0377, 0.5754]]])
in1Dot50193 = tf.constant([[[0.2767, 0.4687], [0.2316, 0.4917]]])
in0Dot61497 = tf.constant([[[0.4169, 0.9611], [0.3979, 0.8867]]])
in1Dot61497 = tf.constant([[[0.1928, 0.8984], [0.1934, 0.9483]]])
print (np.array2string(model.predict([in0Ave65988,in1Ave65988,in0Dot50193,in1Dot50193,in0Dot61497,in1Dot61497],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer48869.png')

LAve65988 = average_layer([[[[[0.8585], [0.368]]]], [[[[0.5083], [0.5463]]]]], Ave65988), 
LRes19897 = reshape_layer(Ave65988, [1, 2], Res19897), 
LZer21015 = zero_padding1D_layer(Res19897, 1, 0, Zer21015), 
LDot50193 = dot_layer([[[0.5615, 0.2323], [0.0377, 0.5754]]], [[[0.2767, 0.4687], [0.2316, 0.4917]]], 1, 1, Dot50193), 
LDot61497 = dot_layer([[[0.4169, 0.9611], [0.3979, 0.8867]]], [[[0.1928, 0.8984], [0.1934, 0.9483]]], 1, 1, Dot61497), 
LDot52133 = dot_layer(Dot50193,Dot61497, 2, 2, Dot52133), 
LMul77129 = multiply_layer([Zer21015,Dot52133], Mul77129), 
LRes40769 = reshape_layer(Mul77129, [2, 2, 1], Res40769), 
LRes62636 = reshape_layer(Res40769, [2, 2, 1, 1], Res62636), 
LZer48869 = zero_padding3D_layer(Res62636, 1, 1, 1, 1, 1, 1, Zer48869), 
exec_layers([LAve65988,LRes19897,LZer21015,LDot50193,LDot61497,LDot52133,LMul77129,LRes40769,LRes62636,LZer48869],["Ave65988","Res19897","Zer21015","Dot50193","Dot61497","Dot52133","Mul77129","Res40769","Res62636","Zer48869"],Zer48869,"Zer48869")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.2225595], [0.0000000]], [[0.0000000], [0.3374836], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.0],[0]],[[0],[0.0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.22255950926716814],[0]],[[0],[0.33748364003992437],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.2226], [0]], [[0], [0.3375], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.2226], [0]], [[0], [0.3375], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]