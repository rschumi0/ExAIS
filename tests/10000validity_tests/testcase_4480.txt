import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot66288 = tf.keras.layers.Input(shape=([3]))
in1Dot66288 = tf.keras.layers.Input(shape=([3]))
in0Con52515 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Add31030 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add31030 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Dot5830 = tf.keras.layers.Input(shape=([2]))
in1Dot5830 = tf.keras.layers.Input(shape=([2]))
in0Con90973 = tf.keras.layers.Input(shape=([1]))
in0Glo77211 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Con94908 = tf.keras.layers.Input(shape=([2, 3]))

Dot66288 = keras.layers.Dot(axes=(1, 1), name = 'Dot66288', )([in0Dot66288,in1Dot66288])
Res21516 = keras.layers.Reshape((1, 1), name = 'Res21516', )(Dot66288)
Res47281 = keras.layers.Reshape((1, 1, 1), name = 'Res47281', )(Res21516)
Zer58511 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer58511', )(Res47281)
Con52515 = keras.layers.Concatenate(axis=3, name = 'Con52515', )([Zer58511,in0Con52515])
Add31030 = keras.layers.Add(name = 'Add31030', )([in0Add31030,in1Add31030])
Sub94582 = keras.layers.Subtract(name = 'Sub94582', )([Con52515,Add31030])
Res14225 = keras.layers.Reshape((1, 4), name = 'Res14225', )(Sub94582)
Zer23245 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer23245', )(Res14225)
Dot5830 = keras.layers.Dot(axes=(1, 1), name = 'Dot5830', )([in0Dot5830,in1Dot5830])
Con90973 = keras.layers.Concatenate(axis=1, name = 'Con90973', )([Dot5830,in0Con90973])
Glo77211 = keras.layers.GlobalMaxPool2D(name = 'Glo77211', )(in0Glo77211)
Max16265 = keras.layers.Maximum(name = 'Max16265', )([Con90973,Glo77211])
Res46051 = keras.layers.Reshape((2, 1), name = 'Res46051', )(Max16265)
Up_75813 = keras.layers.UpSampling1D(size=(1), name = 'Up_75813', )(Res46051)
Con94908 = keras.layers.Concatenate(axis=2, name = 'Con94908', )([Up_75813,in0Con94908])
Sub27539 = keras.layers.Subtract(name = 'Sub27539', )([Zer23245,Con94908])
Res42394 = keras.layers.Reshape((2, 4, 1), name = 'Res42394', )(Sub27539)
Up_88733 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_88733', )(Res42394)
model = tf.keras.models.Model(inputs=[in0Dot66288,in1Dot66288,in0Con52515,in0Add31030,in1Add31030,in0Dot5830,in1Dot5830,in0Con90973,in0Glo77211,in0Con94908], outputs=Up_88733)
in0Dot66288 = tf.constant([[0.5086, 0.3807, 0.3675]])
in1Dot66288 = tf.constant([[0.1107, 0.2967, 0.0487]])
in0Con52515 = tf.constant([[[[0.2142], [0.2111]]]])
in0Add31030 = tf.constant([[[[0.6212, 0.3016], [0.9867, 0.5481]]]])
in1Add31030 = tf.constant([[[[0.6659, 0.5061], [0.5325, 0.7348]]]])
in0Dot5830 = tf.constant([[0.3775, 0.3056]])
in1Dot5830 = tf.constant([[0.5597, 0.7273]])
in0Con90973 = tf.constant([[0.7794]])
in0Glo77211 = tf.constant([[[[1.8245, 1.4], [1.8419, 1.6814]]]])
in0Con94908 = tf.constant([[[0.1844, 0.3538, 0.2727], [0.1669, 0.1913, 0.2644]]])
print (np.array2string(model.predict([in0Dot66288,in1Dot66288,in0Con52515,in0Add31030,in1Add31030,in0Dot5830,in1Dot5830,in0Con90973,in0Glo77211,in0Con94908],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_88733.png')

LDot66288 = dot_layer([[0.5086, 0.3807, 0.3675]], [[0.1107, 0.2967, 0.0487]], 1, 1, Dot66288), 
LRes21516 = reshape_layer(Dot66288, [1, 1], Res21516), 
LRes47281 = reshape_layer(Res21516, [1, 1, 1], Res47281), 
LZer58511 = zero_padding2D_layer(Res47281, 0, 0, 1, 0, Zer58511), 
LCon52515 = concatenate_layer([Zer58511,[[[[0.2142], [0.2111]]]]], 3, Con52515), 
LAdd31030 = add_layer([[[[[0.6212, 0.3016], [0.9867, 0.5481]]]], [[[[0.6659, 0.5061], [0.5325, 0.7348]]]]], Add31030), 
LSub94582 = subtract_layer(Con52515,Add31030, Sub94582), 
LRes14225 = reshape_layer(Sub94582, [1, 4], Res14225), 
LZer23245 = zero_padding1D_layer(Res14225, 1, 0, Zer23245), 
LDot5830 = dot_layer([[0.3775, 0.3056]], [[0.5597, 0.7273]], 1, 1, Dot5830), 
LCon90973 = concatenate_layer([Dot5830,[[0.7794]]], 1, Con90973), 
LGlo77211 = global_max_pool2D_layer([[[[1.8245, 1.4], [1.8419, 1.6814]]]], Glo77211), 
LMax16265 = maximum_layer([Con90973,Glo77211], Max16265), 
LRes46051 = reshape_layer(Max16265, [2, 1], Res46051), 
LUp_75813 = up_sampling1D_layer(Res46051, 1, Up_75813), 
LCon94908 = concatenate_layer([Up_75813,[[[0.1844, 0.3538, 0.2727], [0.1669, 0.1913, 0.2644]]]], 2, Con94908), 
LSub27539 = subtract_layer(Zer23245,Con94908, Sub27539), 
LRes42394 = reshape_layer(Sub27539, [2, 4, 1], Res42394), 
LUp_88733 = up_sampling2D_layer(Res42394, 2, 1, Up_88733), 
exec_layers([LDot66288,LRes21516,LRes47281,LZer58511,LCon52515,LAdd31030,LSub94582,LRes14225,LZer23245,LDot5830,LCon90973,LGlo77211,LMax16265,LRes46051,LUp_75813,LCon94908,LSub27539,LRes42394,LUp_88733],["Dot66288","Res21516","Res47281","Zer58511","Con52515","Add31030","Sub94582","Res14225","Zer23245","Dot5830","Con90973","Glo77211","Max16265","Res46051","Up_75813","Con94908","Sub27539","Res42394","Up_88733"],Up_88733,"Up_88733")

Actual (Unparsed): [[[[-1.8419000], [-0.1844000], [-0.3538000], [-0.2727000]], [[-1.8419000], [-0.1844000], [-0.3538000], [-0.2727000]], [[-2.9685000], [-0.7604000], [-1.5233471], [-1.3362000]], [[-2.9685000], [-0.7604000], [-1.5233471], [-1.3362000]]]]

Expected (Unparsed): [[[[-1.8419],[-0.1844],[-0.3538],[-0.2727]],[[-1.8419],[-0.1844],[-0.3538],[-0.2727]],[[-2.9685],[-0.7604],[-1.5233470400000002],[-1.3362]],[[-2.9685],[-0.7604],[-1.5233470400000002],[-1.3362]]]]

Actual:   [[[[-1.8419], [-0.1844], [-0.3538], [-0.2727]], [[-1.8419], [-0.1844], [-0.3538], [-0.2727]], [[-2.9685], [-0.7604], [-1.5233], [-1.3362]], [[-2.9685], [-0.7604], [-1.5233], [-1.3362]]]]

Expected: [[[[-1.8419], [-0.1844], [-0.3538], [-0.2727]], [[-1.8419], [-0.1844], [-0.3538], [-0.2727]], [[-2.9685], [-0.7604], [-1.5233], [-1.3362]], [[-2.9685], [-0.7604], [-1.5233], [-1.3362]]]]