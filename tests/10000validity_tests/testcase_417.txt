import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub45421 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Sub45421 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Max77573 = tf.keras.layers.Input(shape=([1, 1]))
in0Con60436 = tf.keras.layers.Input(shape=([3, 3, 3, 1]))
in0Ave73584 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Ave73584 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Sub45421 = keras.layers.Subtract(name = 'Sub45421', )([in0Sub45421,in1Sub45421])
Zer88584 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer88584', )(Sub45421)
Max77573 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max77573', )(in0Max77573)
Res69187 = keras.layers.Reshape((1, 1, 1), name = 'Res69187', )(Max77573)
Res21073 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res21073', )(Res69187)
Zer28317 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer28317', )(Res21073)
Con60436 = keras.layers.Concatenate(axis=4, name = 'Con60436', )([Zer28317,in0Con60436])
Max43838 = keras.layers.Maximum(name = 'Max43838', )([Zer88584,Con60436])
Glo7945 = keras.layers.GlobalAveragePooling3D(name = 'Glo7945', )(Max43838)
Res2774 = keras.layers.Reshape((2, 1), name = 'Res2774', )(Glo7945)
Ave73584 = keras.layers.Average(name = 'Ave73584', )([in0Ave73584,in1Ave73584])
Res79501 = keras.layers.Reshape((2, 1, 2), name = 'Res79501', )(Ave73584)
Res89319 = keras.layers.Reshape((2, 2), name = 'Res89319', )(Res79501)
ELU28788 = keras.layers.ELU(alpha=-0.21330195246125783, name = 'ELU28788', )(Res89319)
Dot32215 = keras.layers.Dot(axes=(1, 1), name = 'Dot32215', )([Res2774,ELU28788])
model = tf.keras.models.Model(inputs=[in0Sub45421,in1Sub45421,in0Max77573,in0Con60436,in0Ave73584,in1Ave73584], outputs=Dot32215)
in0Sub45421 = tf.constant([[[[[0.2596, 0.0706], [0.8024, 0.8456]], [[0.8291, 0.8058], [0.7388, 0.7209]]], [[[0.064, 0.1447], [0.3323, 0.3184]], [[0.3108, 0.8368], [0.3481, 0.2769]]]]])
in1Sub45421 = tf.constant([[[[[0.6699, 0.7651], [0.2893, 0.182]], [[0.7838, 0.8761], [0.2551, 0.5737]]], [[[0.8469, 0.7942], [0.8522, 0.8549]], [[0.6124, 0.2904], [0.6152, 0.737]]]]])
in0Max77573 = tf.constant([[[1.7551]]])
in0Con60436 = tf.constant([[[[[0.5081], [0.8395], [0.5475]], [[0.1987], [0.4579], [0.5056]], [[0.2921], [0.3023], [0.9]]], [[[0.5916], [0.6592], [0.2781]], [[0.1878], [0.2142], [0.0718]], [[0.5727], [0.6605], [0.4589]]], [[[0.8734], [0.3282], [0.7941]], [[0.4816], [0.4804], [0.1844]], [[0.8888], [0.5389], [0.3785]]]]])
in0Ave73584 = tf.constant([[[[[0.4964], [0.0488]]], [[[0.7759], [0.9378]]]]])
in1Ave73584 = tf.constant([[[[[0.1206], [0.9746]]], [[[0.6276], [0.323]]]]])
print (np.array2string(model.predict([in0Sub45421,in1Sub45421,in0Max77573,in0Con60436,in0Ave73584,in1Ave73584],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot32215.png')

LSub45421 = subtract_layer([[[[[0.2596, 0.0706], [0.8024, 0.8456]], [[0.8291, 0.8058], [0.7388, 0.7209]]], [[[0.064, 0.1447], [0.3323, 0.3184]], [[0.3108, 0.8368], [0.3481, 0.2769]]]]], [[[[[0.6699, 0.7651], [0.2893, 0.182]], [[0.7838, 0.8761], [0.2551, 0.5737]]], [[[0.8469, 0.7942], [0.8522, 0.8549]], [[0.6124, 0.2904], [0.6152, 0.737]]]]], Sub45421), 
LZer88584 = zero_padding3D_layer(Sub45421, 1, 0, 1, 0, 1, 0, Zer88584), 
LMax77573 = max_pool1D_layer([[[1.7551]]], 1, Max77573), 
LRes69187 = reshape_layer(Max77573, [1, 1, 1], Res69187), 
LRes21073 = reshape_layer(Res69187, [1, 1, 1, 1], Res21073), 
LZer28317 = zero_padding3D_layer(Res21073, 1, 1, 1, 1, 1, 1, Zer28317), 
LCon60436 = concatenate_layer([Zer28317,[[[[[0.5081], [0.8395], [0.5475]], [[0.1987], [0.4579], [0.5056]], [[0.2921], [0.3023], [0.9]]], [[[0.5916], [0.6592], [0.2781]], [[0.1878], [0.2142], [0.0718]], [[0.5727], [0.6605], [0.4589]]], [[[0.8734], [0.3282], [0.7941]], [[0.4816], [0.4804], [0.1844]], [[0.8888], [0.5389], [0.3785]]]]]], 4, Con60436), 
LMax43838 = maximum_layer([Zer88584,Con60436], Max43838), 
LGlo7945 = global_average_pooling3D_layer(Max43838, Glo7945), 
LRes2774 = reshape_layer(Glo7945, [2, 1], Res2774), 
LAve73584 = average_layer([[[[[[0.4964], [0.0488]]], [[[0.7759], [0.9378]]]]], [[[[[0.1206], [0.9746]]], [[[0.6276], [0.323]]]]]], Ave73584), 
LRes79501 = reshape_layer(Ave73584, [2, 1, 2], Res79501), 
LRes89319 = reshape_layer(Res79501, [2, 2], Res89319), 
LELU28788 = elu_layer(Res89319, -0.21330195246125783, ELU28788), 
LDot32215 = dot_layer(Res2774,ELU28788, 1, 1, Dot32215), 
exec_layers([LSub45421,LZer88584,LMax77573,LRes69187,LRes21073,LZer28317,LCon60436,LMax43838,LGlo7945,LRes2774,LAve73584,LRes79501,LRes89319,LELU28788,LDot32215],["Sub45421","Zer88584","Max77573","Res69187","Res21073","Zer28317","Con60436","Max43838","Glo7945","Res2774","Ave73584","Res79501","Res89319","ELU28788","Dot32215"],Dot32215,"Dot32215")

Actual (Unparsed): [[[0.3904795, 0.3750788]]]

Expected (Unparsed): [[[0.39047947685185197,0.3750788103703704]]]

Actual:   [[[0.3905, 0.3751]]]

Expected: [[[0.3905, 0.3751]]]