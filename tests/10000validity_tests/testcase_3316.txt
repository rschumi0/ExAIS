import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul47193 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul47193 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Mul47193 = keras.layers.Multiply(name = 'Mul47193', )([in0Mul47193,in1Mul47193])
Res34455 = keras.layers.Reshape((1, 2, 2), name = 'Res34455', )(Mul47193)
Res14244 = keras.layers.Reshape((1, 4), name = 'Res14244', )(Res34455)
Ave30561 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave30561', )(Res14244)
Res36236 = keras.layers.Reshape((1, 4, 1), name = 'Res36236', )(Ave30561)
Con76597 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 1), padding='valid', name = 'Con76597', )(Res36236)
Zer91001 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer91001', )(Con76597)
model = tf.keras.models.Model(inputs=[in0Mul47193,in1Mul47193], outputs=Zer91001)
w = model.get_layer('Con76597').get_weights() 
w[0] = np.array([[[[0.8384], [0.1069], [0.689], [0.5639]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con76597').set_weights(w) 
in0Mul47193 = tf.constant([[[[[0.3401], [0.978]], [[0.3083], [0.4428]]]]])
in1Mul47193 = tf.constant([[[[[0.0803], [0.4174]], [[0.959], [0.2915]]]]])
print (np.array2string(model.predict([in0Mul47193,in1Mul47193],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer91001.png')

LMul47193 = multiply_layer([[[[[[0.3401], [0.978]], [[0.3083], [0.4428]]]]], [[[[[0.0803], [0.4174]], [[0.959], [0.2915]]]]]], Mul47193), 
LRes34455 = reshape_layer(Mul47193, [1, 2, 2], Res34455), 
LRes14244 = reshape_layer(Res34455, [1, 4], Res14244), 
LAve30561 = average_pooling1D_layer(Res14244, 1, Ave30561), 
LRes36236 = reshape_layer(Ave30561, [1, 4, 1], Res36236), 
LCon76597 = conv2D_transpose_layer(Res36236, 1, 1,[[[[0.8384], [0.1069], [0.689], [0.5639]]]],[0, 0, 0, 0], 1, 1, false, Con76597), 
LZer91001 = zero_padding2D_layer(Con76597, 1, 1, 1, 1, Zer91001), 
exec_layers([LMul47193,LRes34455,LRes14244,LAve30561,LRes36236,LCon76597,LZer91001],["Mul47193","Res34455","Res14244","Ave30561","Res36236","Con76597","Zer91001"],Zer91001,"Zer91001")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0228967, 0.0029194, 0.0188166, 0.0154001], [0.3422493, 0.0436384, 0.2812616, 0.2301937], [0.2478811, 0.0316060, 0.2037095, 0.1667225], [0.1082175, 0.0137982, 0.0889335, 0.0727861], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0.022896729152,0.0029194422069999996,0.018816610669999997,0.015400125916999999],[0.34224930048,0.04363841868,0.2812616508,0.23019367908],[0.24788109248000004,0.03160602193,0.2037095333,0.16672250483],[0.10821748608000001,0.01379824578,0.0889335018,0.07278606918],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]]

Actual:   [[[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.0229, 0.003, 0.0189, 0.0155], [0.3423, 0.0437, 0.2813, 0.2302], [0.2479, 0.0317, 0.2038, 0.1668], [0.1083, 0.0138, 0.089, 0.0728], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]

Expected: [[[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0.0229, 0.003, 0.0189, 0.0155], [0.3423, 0.0437, 0.2813, 0.2302], [0.2479, 0.0317, 0.2038, 0.1668], [0.1083, 0.0138, 0.089, 0.0728], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]