import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot36124 = tf.keras.layers.Input(shape=([3]))
in1Dot36124 = tf.keras.layers.Input(shape=([3]))
in0Con76710 = tf.keras.layers.Input(shape=([4, 3]))
in0Min72333 = tf.keras.layers.Input(shape=([1, 1]))
in1Min72333 = tf.keras.layers.Input(shape=([1, 1]))
in0Con32415 = tf.keras.layers.Input(shape=([1, 3]))
in0Cro91877 = tf.keras.layers.Input(shape=([3, 4, 4]))

Dot36124 = keras.layers.Dot(axes=(1, 1), name = 'Dot36124', )([in0Dot36124,in1Dot36124])
Res21223 = keras.layers.Reshape((1, 1), name = 'Res21223', )(Dot36124)
Zer65524 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer65524', )(Res21223)
Con76710 = keras.layers.Concatenate(axis=2, name = 'Con76710', )([Zer65524,in0Con76710])
Min72333 = keras.layers.Minimum(name = 'Min72333', )([in0Min72333,in1Min72333])
Con32415 = keras.layers.Concatenate(axis=2, name = 'Con32415', )([Min72333,in0Con32415])
Cro91877 = keras.layers.Cropping2D(cropping=((2, 0), (2, 1)), name = 'Cro91877', )(in0Cro91877)
Res12137 = keras.layers.Reshape((1, 4), name = 'Res12137', )(Cro91877)
Dot55836 = keras.layers.Dot(axes=(1, 1), name = 'Dot55836', )([Con32415,Res12137])
Max50079 = keras.layers.Maximum(name = 'Max50079', )([Con76710,Dot55836])
Con91948 = keras.layers.Conv1D(3, (2),strides=(7), padding='valid', dilation_rate=(1), name = 'Con91948', )(Max50079)
model = tf.keras.models.Model(inputs=[in0Dot36124,in1Dot36124,in0Con76710,in0Min72333,in1Min72333,in0Con32415,in0Cro91877], outputs=Con91948)
w = model.get_layer('Con91948').get_weights() 
w[0] = np.array([[[0.6847, 0.4294, 0.0919], [0.9437, 0.8399, 0.6721], [0.4264, 0.8479, 0.777], [0.074, 0.3648, 0.9951]], [[0.9809, 0.8003, 0.0849], [0.9164, 0.8835, 0.338], [0.4052, 0.049, 0.7909], [0.2974, 0.2257, 0.6431]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con91948').set_weights(w) 
in0Dot36124 = tf.constant([[0.8573, 0.6797, 0.8774]])
in1Dot36124 = tf.constant([[0.149, 0.8387, 0.2499]])
in0Con76710 = tf.constant([[[0.5305, 0.9014, 0.001], [0.0215, 0.2167, 0.7741], [0.1616, 0.8219, 0.8387], [0.6677, 0.9574, 0.1421]]])
in0Min72333 = tf.constant([[[0.3712]]])
in1Min72333 = tf.constant([[[0.3493]]])
in0Con32415 = tf.constant([[[0.1747, 0.2891, 0.4811]]])
in0Cro91877 = tf.constant([[[[1.7003, 1.723, 1.5383, 1.455], [1.9482, 1.5199, 1.4216, 1.8658], [1.0582, 1.9724, 1.6975, 1.0114], [1.4447, 1.7883, 1.3377, 1.9057]], [[1.0093, 1.5051, 1.4721, 1.8501], [1.4685, 1.3933, 1.8229, 1.6827], [1.5729, 1.023, 1.2543, 1.6171], [1.014, 1.5009, 1.4358, 1.8969]], [[1.2879, 1.206, 1.3515, 1.2036], [1.0337, 1.7039, 1.4061, 1.999], [1.3981, 1.4031, 1.1737, 1.7555], [1.7913, 1.4328, 1.4188, 1.3374]]]])
print (np.array2string(model.predict([in0Dot36124,in1Dot36124,in0Con76710,in0Min72333,in1Min72333,in0Con32415,in0Cro91877],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con91948.png')

LDot36124 = dot_layer([[0.8573, 0.6797, 0.8774]], [[0.149, 0.8387, 0.2499]], 1, 1, Dot36124), 
LRes21223 = reshape_layer(Dot36124, [1, 1], Res21223), 
LZer65524 = zero_padding1D_layer(Res21223, 3, 0, Zer65524), 
LCon76710 = concatenate_layer([Zer65524,[[[0.5305, 0.9014, 0.001], [0.0215, 0.2167, 0.7741], [0.1616, 0.8219, 0.8387], [0.6677, 0.9574, 0.1421]]]], 2, Con76710), 
LMin72333 = minimum_layer([[[[0.3712]]], [[[0.3493]]]], Min72333), 
LCon32415 = concatenate_layer([Min72333,[[[0.1747, 0.2891, 0.4811]]]], 2, Con32415), 
LCro91877 = cropping2D_layer([[[[1.7003, 1.723, 1.5383, 1.455], [1.9482, 1.5199, 1.4216, 1.8658], [1.0582, 1.9724, 1.6975, 1.0114], [1.4447, 1.7883, 1.3377, 1.9057]], [[1.0093, 1.5051, 1.4721, 1.8501], [1.4685, 1.3933, 1.8229, 1.6827], [1.5729, 1.023, 1.2543, 1.6171], [1.014, 1.5009, 1.4358, 1.8969]], [[1.2879, 1.206, 1.3515, 1.2036], [1.0337, 1.7039, 1.4061, 1.999], [1.3981, 1.4031, 1.1737, 1.7555], [1.7913, 1.4328, 1.4188, 1.3374]]]], 2, 0, 2, 1, Cro91877), 
LRes12137 = reshape_layer(Cro91877, [1, 4], Res12137), 
LDot55836 = dot_layer(Con32415,Res12137, 1, 1, Dot55836), 
LMax50079 = maximum_layer([Con76710,Dot55836], Max50079), 
LCon91948 = conv1D_layer(Max50079, 2,[[[0.6847, 0.4294, 0.0919], [0.9437, 0.8399, 0.6721], [0.4264, 0.8479, 0.777], [0.074, 0.3648, 0.9951]], [[0.9809, 0.8003, 0.0849], [0.9164, 0.8835, 0.338], [0.4052, 0.049, 0.7909], [0.2974, 0.2257, 0.6431]]],[0, 0, 0], 7, false, 1, Con91948), 
exec_layers([LDot36124,LRes21223,LZer65524,LCon76710,LMin72333,LCon32415,LCro91877,LRes12137,LDot55836,LMax50079,LCon91948],["Dot36124","Res21223","Zer65524","Con76710","Min72333","Con32415","Cro91877","Res12137","Dot55836","Max50079","Con91948"],Con91948,"Con91948")

Actual (Unparsed): [[[2.0469805, 2.2406275, 2.4848078]]]

Expected (Unparsed): [[[2.046980422862,2.2406274811379996,2.484807777395]]]

Actual:   [[[2.047, 2.2407, 2.4849]]]

Expected: [[[2.047, 2.2407, 2.4849]]]