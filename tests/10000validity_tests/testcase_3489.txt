import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU45583 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con3345 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Sof78900 = tf.keras.layers.Input(shape=([2, 2, 2]))

ELU45583 = keras.layers.ELU(alpha=-4.011232637799209, name = 'ELU45583', input_shape=(1, 1, 1, 2))(in0ELU45583)
Glo16965 = keras.layers.GlobalAveragePooling3D(name = 'Glo16965', )(ELU45583)
Res48393 = keras.layers.Reshape((2, 1), name = 'Res48393', )(Glo16965)
Res61276 = keras.layers.Reshape((2, 1, 1), name = 'Res61276', )(Res48393)
Res22640 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res22640', )(Res61276)
Glo46118 = keras.layers.GlobalMaxPool3D(name = 'Glo46118', )(Res22640)
Res77263 = keras.layers.Reshape((1, 1), name = 'Res77263', )(Glo46118)
Res1120 = keras.layers.Reshape((1, 1, 1), name = 'Res1120', )(Res77263)
Zer13419 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer13419', )(Res1120)
Con3345 = keras.layers.Concatenate(axis=3, name = 'Con3345', )([Zer13419,in0Con3345])
Sof78900 = keras.layers.Softmax(axis=1, name = 'Sof78900', input_shape=(2, 2, 2))(in0Sof78900)
Add70628 = keras.layers.Add(name = 'Add70628', )([Con3345,Sof78900])
model = tf.keras.models.Model(inputs=[in0ELU45583,in0Con3345,in0Sof78900], outputs=Add70628)
in0ELU45583 = tf.constant([[[[[0.0066, 0.5344]]]]])
in0Con3345 = tf.constant([[[[0.5273], [0.0372]], [[0.0593], [0.6023]]]])
in0Sof78900 = tf.constant([[[[0.3442, 0.6245], [0.8681, 0.4862]], [[0.9917, 0.1379], [0.342, 0.6777]]]])
print (np.array2string(model.predict([in0ELU45583,in0Con3345,in0Sof78900],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add70628.png')

LELU45583 = elu_layer([[[[[0.0066, 0.5344]]]]], -4.011232637799209, ELU45583), 
LGlo16965 = global_average_pooling3D_layer(ELU45583, Glo16965), 
LRes48393 = reshape_layer(Glo16965, [2, 1], Res48393), 
LRes61276 = reshape_layer(Res48393, [2, 1, 1], Res61276), 
LRes22640 = reshape_layer(Res61276, [2, 1, 1, 1], Res22640), 
LGlo46118 = global_max_pool3D_layer(Res22640, Glo46118), 
LRes77263 = reshape_layer(Glo46118, [1, 1], Res77263), 
LRes1120 = reshape_layer(Res77263, [1, 1, 1], Res1120), 
LZer13419 = zero_padding2D_layer(Res1120, 1, 0, 1, 0, Zer13419), 
LCon3345 = concatenate_layer([Zer13419,[[[[0.5273], [0.0372]], [[0.0593], [0.6023]]]]], 3, Con3345), 
LSof78900 = softmax_layer([[[[0.3442, 0.6245], [0.8681, 0.4862]], [[0.9917, 0.1379], [0.342, 0.6777]]]], 1, Sof78900), 
LAdd70628 = add_layer([Con3345,Sof78900], Add70628), 
exec_layers([LELU45583,LGlo16965,LRes48393,LRes61276,LRes22640,LGlo46118,LRes77263,LRes1120,LZer13419,LCon3345,LSof78900,LAdd70628],["ELU45583","Glo16965","Res48393","Res61276","Res22640","Glo46118","Res77263","Res1120","Zer13419","Con3345","Sof78900","Add70628"],Add70628,"Add70628")

Actual (Unparsed): [[[[0.3435531, 1.1466051], [0.6285730, 0.4894708]], [[0.6564469, 0.4399949], [0.9058270, 1.1500292]]]]

Expected (Unparsed): [[[[0.34355312754339407,1.1466051527902794],[0.6285730404667498,0.48947077244038706]],[[0.6564468724566059,0.43999484720972065],[0.9058269595332502,1.150029227559613]]]]

Actual:   [[[[0.3436, 1.1467], [0.6286, 0.4895]], [[0.6565, 0.44], [0.9059, 1.1501]]]]

Expected: [[[[0.3436, 1.1467], [0.6286, 0.4895]], [[0.6565, 0.44], [0.9059, 1.1501]]]]