import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub2241 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub2241 = tf.keras.layers.Input(shape=([3, 2]))
in0Con69763 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0Mul76474 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul76474 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Mul2192 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Mul2192 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Sub2241 = keras.layers.Subtract(name = 'Sub2241', )([in0Sub2241,in1Sub2241])
Res32388 = keras.layers.Reshape((3, 2, 1), name = 'Res32388', )(Sub2241)
Con69763 = keras.layers.Concatenate(axis=3, name = 'Con69763', )([Res32388,in0Con69763])
Mul76474 = keras.layers.Multiply(name = 'Mul76474', )([in0Mul76474,in1Mul76474])
Zer27294 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer27294', )(Mul76474)
Min69043 = keras.layers.Minimum(name = 'Min69043', )([Con69763,Zer27294])
Res66860 = keras.layers.Reshape((3, 2, 2, 1), name = 'Res66860', )(Min69043)
Mul2192 = keras.layers.Multiply(name = 'Mul2192', )([in0Mul2192,in1Mul2192])
Zer81461 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (1, 0)), name = 'Zer81461', )(Mul2192)
Min5051 = keras.layers.Minimum(name = 'Min5051', )([Res66860,Zer81461])
model = tf.keras.models.Model(inputs=[in0Sub2241,in1Sub2241,in0Con69763,in0Mul76474,in1Mul76474,in0Mul2192,in1Mul2192], outputs=Min5051)
in0Sub2241 = tf.constant([[[0.7406, 0.9561], [0.1106, 0.5169], [0.8036, 0.5174]]])
in1Sub2241 = tf.constant([[[0.7235, 0.962], [0.1343, 0.4336], [0.5119, 0.5622]]])
in0Con69763 = tf.constant([[[[0.8193], [0.7549]], [[0.181], [0.3661]], [[0.5219], [0.1925]]]])
in0Mul76474 = tf.constant([[[[0.4542, 0.8759]], [[0.1102, 0.6701]]]])
in1Mul76474 = tf.constant([[[[0.8882, 0.8378]], [[0.1326, 0.6118]]]])
in0Mul2192 = tf.constant([[[[[0.985]]], [[[0.387]]]]])
in1Mul2192 = tf.constant([[[[[0.86]]], [[[0.475]]]]])
print (np.array2string(model.predict([in0Sub2241,in1Sub2241,in0Con69763,in0Mul76474,in1Mul76474,in0Mul2192,in1Mul2192],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min5051.png')

LSub2241 = subtract_layer([[[0.7406, 0.9561], [0.1106, 0.5169], [0.8036, 0.5174]]], [[[0.7235, 0.962], [0.1343, 0.4336], [0.5119, 0.5622]]], Sub2241), 
LRes32388 = reshape_layer(Sub2241, [3, 2, 1], Res32388), 
LCon69763 = concatenate_layer([Res32388,[[[[0.8193], [0.7549]], [[0.181], [0.3661]], [[0.5219], [0.1925]]]]], 3, Con69763), 
LMul76474 = multiply_layer([[[[[0.4542, 0.8759]], [[0.1102, 0.6701]]]], [[[[0.8882, 0.8378]], [[0.1326, 0.6118]]]]], Mul76474), 
LZer27294 = zero_padding2D_layer(Mul76474, 1, 0, 1, 0, Zer27294), 
LMin69043 = minimum_layer([Con69763,Zer27294], Min69043), 
LRes66860 = reshape_layer(Min69043, [3, 2, 2, 1], Res66860), 
LMul2192 = multiply_layer([[[[[[0.985]]], [[[0.387]]]]], [[[[[0.86]]], [[[0.475]]]]]], Mul2192), 
LZer81461 = zero_padding3D_layer(Mul2192, 1, 0, 1, 0, 1, 0, Zer81461), 
LMin5051 = minimum_layer([Res66860,Zer81461], Min5051), 
exec_layers([LSub2241,LRes32388,LCon69763,LMul76474,LZer27294,LMin69043,LRes66860,LMul2192,LZer81461,LMin5051],["Sub2241","Res32388","Con69763","Mul76474","Zer27294","Min69043","Res66860","Mul2192","Zer81461","Min5051"],Min5051,"Min5051")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]], [[-0.0059000], [0.0000000]]], [[[-0.0237000], [0.0000000]], [[0.0000000], [0.3661000]]], [[[0.0000000], [0.0000000]], [[-0.0448000], [0.1838250]]]]]

Expected (Unparsed): [[[[[0],[0]],[[-0.005900000000000016],[0]]],[[[-0.0237],[0]],[[0],[0.3661]]],[[[0],[0]],[[-0.04480000000000006],[0.183825]]]]]

Actual:   [[[[[0], [0]], [[-0.0059], [0]]], [[[-0.0237], [0]], [[0], [0.3661]]], [[[0], [0]], [[-0.0448], [0.1839]]]]]

Expected: [[[[[0], [0]], [[-0.0059], [0]]], [[[-0.0237], [0]], [[0], [0.3661]]], [[[0], [0]], [[-0.0448], [0.1839]]]]]