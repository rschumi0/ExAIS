import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0PRe50517 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Glo48596 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con95668 = tf.keras.layers.Input(shape=([1]))

PRe50517 = keras.layers.PReLU(name = 'PRe50517', input_shape=(1, 2, 1, 1))(in0PRe50517)
Res99387 = keras.layers.Reshape((1, 2, 1), name = 'Res99387', )(PRe50517)
Res32730 = keras.layers.Reshape((1, 2), name = 'Res32730', )(Res99387)
Fla83441 = keras.layers.Flatten(name = 'Fla83441', )(Res32730)
Glo48596 = keras.layers.GlobalAveragePooling3D(name = 'Glo48596', )(in0Glo48596)
Con95668 = keras.layers.Concatenate(axis=1, name = 'Con95668', )([Glo48596,in0Con95668])
Sub3410 = keras.layers.Subtract(name = 'Sub3410', )([Fla83441,Con95668])
Res29886 = keras.layers.Reshape((2, 1), name = 'Res29886', )(Sub3410)
Res23109 = keras.layers.Reshape((2, 1, 1), name = 'Res23109', )(Res29886)
Max84236 = keras.layers.MaxPool2D(pool_size=(2, 1), strides=(2, 1), padding='same', name = 'Max84236', )(Res23109)
model = tf.keras.models.Model(inputs=[in0PRe50517,in0Glo48596,in0Con95668], outputs=Max84236)
w = model.get_layer('PRe50517').get_weights() 
w[0] = np.array([[[[0.0237]], [[0.3996]]]])
model.get_layer('PRe50517').set_weights(w) 
in0PRe50517 = tf.constant([[[[[0.8962]], [[0.3924]]]]])
in0Glo48596 = tf.constant([[[[[1.2072], [1.3082]]]]])
in0Con95668 = tf.constant([[0.5177]])
print (np.array2string(model.predict([in0PRe50517,in0Glo48596,in0Con95668],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max84236.png')

LPRe50517 = prelu_layer([[[[[0.8962]], [[0.3924]]]]], [[[[0.0237]], [[0.3996]]]], PRe50517), 
LRes99387 = reshape_layer(PRe50517, [1, 2, 1], Res99387), 
LRes32730 = reshape_layer(Res99387, [1, 2], Res32730), 
LFla83441 = flatten_layer(Res32730, Fla83441), 
LGlo48596 = global_average_pooling3D_layer([[[[[1.2072], [1.3082]]]]], Glo48596), 
LCon95668 = concatenate_layer([Glo48596,[[0.5177]]], 1, Con95668), 
LSub3410 = subtract_layer(Fla83441,Con95668, Sub3410), 
LRes29886 = reshape_layer(Sub3410, [2, 1], Res29886), 
LRes23109 = reshape_layer(Res29886, [2, 1, 1], Res23109), 
LMax84236 = max_pool2D_layer(Res23109, 2, 1, 2, 1, true, Max84236), 
exec_layers([LPRe50517,LRes99387,LRes32730,LFla83441,LGlo48596,LCon95668,LSub3410,LRes29886,LRes23109,LMax84236],["PRe50517","Res99387","Res32730","Fla83441","Glo48596","Con95668","Sub3410","Res29886","Res23109","Max84236"],Max84236,"Max84236")

Actual (Unparsed): [[[[-0.1253000]]]]

Expected (Unparsed): [[[[-0.12530000000000002]]]]

Actual:   [[[[-0.1253]]]]

Expected: [[[[-0.1253]]]]