import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con45700 = tf.keras.layers.Input(shape=([1, 2, 1]))

Con45700 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='same', name = 'Con45700', )(in0Con45700)
Res91308 = keras.layers.Reshape((1, 6), name = 'Res91308', )(Con45700)
Ave20309 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave20309', )(Res91308)
Mas18470 = keras.layers.Masking(mask_value=1, name = 'Mas18470', )(Ave20309)
model = tf.keras.models.Model(inputs=[in0Con45700], outputs=Mas18470)
w = model.get_layer('Con45700').get_weights() 
w[0] = np.array([[[[0.1932], [0.3445], [0.3864]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con45700').set_weights(w) 
in0Con45700 = tf.constant([[[[0.8582], [0.6377]]]])
print (np.array2string(model.predict([in0Con45700],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas18470.png')

LCon45700 = conv2D_transpose_layer([[[[0.8582], [0.6377]]]], 1, 1,[[[[0.1932], [0.3445], [0.3864]]]],[0, 0, 0], 1, 1, true, Con45700), 
LRes91308 = reshape_layer(Con45700, [1, 6], Res91308), 
LAve20309 = average_pooling1D_layer(Res91308, 1, 1, true, Ave20309), 
LMas18470 = masking_layer(Ave20309, 1, Mas18470), 
exec_layers([LCon45700,LRes91308,LAve20309,LMas18470],["Con45700","Res91308","Ave20309","Mas18470"],Mas18470,"Mas18470")

Actual (Unparsed): [[[0.1658042, 0.2956499, 0.3316085, 0.1232036, 0.2196877, 0.2464073]]]

Expected (Unparsed): [[[0.16580424,0.29564989999999997,0.33160848,0.12320364000000002,0.21968764999999998,0.24640728000000003]]]

Actual:   [[[0.1659, 0.2957, 0.3317, 0.1233, 0.2197, 0.2465]]]

Expected: [[[0.1659, 0.2957, 0.3317, 0.1233, 0.2197, 0.2465]]]