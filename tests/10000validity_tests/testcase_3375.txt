import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo27474 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con36791 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Mul42105 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul42105 = tf.keras.layers.Input(shape=([2, 2, 2]))

Glo27474 = keras.layers.GlobalAveragePooling2D(name = 'Glo27474', )(in0Glo27474)
Res29175 = keras.layers.Reshape((1, 1), name = 'Res29175', )(Glo27474)
Res51022 = keras.layers.Reshape((1, 1, 1), name = 'Res51022', )(Res29175)
Zer74038 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer74038', )(Res51022)
Con36791 = keras.layers.Concatenate(axis=3, name = 'Con36791', )([Zer74038,in0Con36791])
Mul42105 = keras.layers.Multiply(name = 'Mul42105', )([in0Mul42105,in1Mul42105])
Ave94150 = keras.layers.Average(name = 'Ave94150', )([Con36791,Mul42105])
model = tf.keras.models.Model(inputs=[in0Glo27474,in0Con36791,in0Mul42105,in1Mul42105], outputs=Ave94150)
in0Glo27474 = tf.constant([[[[1.3279]]]])
in0Con36791 = tf.constant([[[[0.0734], [0.1838]], [[0.1271], [0.9804]]]])
in0Mul42105 = tf.constant([[[[0.6557, 0.6454], [0.5786, 0.8855]], [[0.1117, 0.2597], [0.0597, 0.3529]]]])
in1Mul42105 = tf.constant([[[[0.7228, 0.7119], [0.6513, 0.327]], [[0.5852, 0.5074], [0.3928, 0.8327]]]])
print (np.array2string(model.predict([in0Glo27474,in0Con36791,in0Mul42105,in1Mul42105],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave94150.png')

LGlo27474 = global_average_pooling2D_layer([[[[1.3279]]]], Glo27474), 
LRes29175 = reshape_layer(Glo27474, [1, 1], Res29175), 
LRes51022 = reshape_layer(Res29175, [1, 1, 1], Res51022), 
LZer74038 = zero_padding2D_layer(Res51022, 1, 0, 1, 0, Zer74038), 
LCon36791 = concatenate_layer([Zer74038,[[[[0.0734], [0.1838]], [[0.1271], [0.9804]]]]], 3, Con36791), 
LMul42105 = multiply_layer([[[[[0.6557, 0.6454], [0.5786, 0.8855]], [[0.1117, 0.2597], [0.0597, 0.3529]]]], [[[[0.7228, 0.7119], [0.6513, 0.327]], [[0.5852, 0.5074], [0.3928, 0.8327]]]]], Mul42105), 
LAve94150 = average_layer([Con36791,Mul42105], Ave94150), 
exec_layers([LGlo27474,LRes29175,LRes51022,LZer74038,LCon36791,LMul42105,LAve94150],["Glo27474","Res29175","Res51022","Zer74038","Con36791","Mul42105","Ave94150"],Ave94150,"Ave94150")

Actual (Unparsed): [[[[0.2369700, 0.2664301], [0.1884211, 0.2366792]], [[0.0326834, 0.1294359], [0.6756751, 0.6371299]]]]

Expected (Unparsed): [[[[0.23696997999999997,0.26643013],[0.18842108999999999,0.23667925]],[[0.03268342,0.12943589],[0.6756750800000001,0.637129915]]]]

Actual:   [[[[0.237, 0.2665], [0.1885, 0.2367]], [[0.0327, 0.1295], [0.6757, 0.6372]]]]

Expected: [[[[0.237, 0.2665], [0.1885, 0.2367]], [[0.0327, 0.1295], [0.6757, 0.6372]]]]