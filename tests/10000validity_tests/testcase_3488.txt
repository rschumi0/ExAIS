import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot86610 = tf.keras.layers.Input(shape=([3]))
in1Dot86610 = tf.keras.layers.Input(shape=([3]))
in0Con81974 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Dot86610 = keras.layers.Dot(axes=(1, 1), name = 'Dot86610', )([in0Dot86610,in1Dot86610])
Con81974 = keras.layers.Conv3D(3, (2, 1, 1),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con81974', )(in0Con81974)
Res54596 = keras.layers.Reshape((2, 1, 6), name = 'Res54596', )(Con81974)
Res22794 = keras.layers.Reshape((2, 6), name = 'Res22794', )(Res54596)
LST37205 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST37205', )(Res22794)
Add75296 = keras.layers.Add(name = 'Add75296', )([Dot86610,LST37205])
model = tf.keras.models.Model(inputs=[in0Dot86610,in1Dot86610,in0Con81974], outputs=Add75296)
w = model.get_layer('Con81974').get_weights() 
w[0] = np.array([[[[[0.6416, 0.131, 0.528]]]], [[[[0.6946, 0.9879, 0.899]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con81974').set_weights(w) 
w = model.get_layer('LST37205').get_weights() 
w[0] = np.array([[10, 10, 6, 2], [5, 3, 1, 6], [5, 10, 10, 9], [3, 9, 1, 2], [7, 2, 2, 7], [9, 4, 10, 7]])
w[1] = np.array([[1, 2, 9, 9]])
w[2] = np.array([4, 4, 7, 1])
model.get_layer('LST37205').set_weights(w) 
in0Dot86610 = tf.constant([[0.4932, 0.7815, 0.8553]])
in1Dot86610 = tf.constant([[0.1221, 0.0298, 0.0771]])
in0Con81974 = tf.constant([[[[[0.9815], [0.5544]]], [[[0.1908], [0.7431]]]]])
print (np.array2string(model.predict([in0Dot86610,in1Dot86610,in0Con81974],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add75296.png')

LDot86610 = dot_layer([[0.4932, 0.7815, 0.8553]], [[0.1221, 0.0298, 0.0771]], 1, 1, Dot86610), 
LCon81974 = conv3D_layer([[[[[0.9815], [0.5544]]], [[[0.1908], [0.7431]]]]], 2, 1, 1,[[[[[0.6416, 0.131, 0.528]]]], [[[[0.6946, 0.9879, 0.899]]]]],[0, 0, 0], 1, 1, 1, true, 1, 1, 1, Con81974), 
LRes54596 = reshape_layer(Con81974, [2, 1, 6], Res54596), 
LRes22794 = reshape_layer(Res54596, [2, 6], Res22794), 
LLST37205 = lstm_layer(Res22794,[[10, 10, 6, 2], [5, 3, 1, 6], [5, 10, 10, 9], [3, 9, 1, 2], [7, 2, 2, 7], [9, 4, 10, 7]],[[1, 2, 9, 9]],[4, 4, 7, 1], LST37205), 
LAdd75296 = add_layer([Dot86610,LST37205], Add75296), 
exec_layers([LDot86610,LCon81974,LRes54596,LRes22794,LLST37205,LAdd75296],["Dot86610","Con81974","Res54596","Res22794","LST37205","Add75296"],Add75296,"Add75296")

Actual (Unparsed): [[1.1134780]]

Expected (Unparsed): [[1.1134779553262253]]

Actual:   [[1.1135]]

Expected: [[1.1135]]