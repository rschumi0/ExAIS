import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep80692 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Mul53626 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul53626 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Dep80692 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep80692', )(in0Dep80692)
Res48543 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res48543', )(Dep80692)
Zer39355 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer39355', )(Res48543)
Mul53626 = keras.layers.Multiply(name = 'Mul53626', )([in0Mul53626,in1Mul53626])
Sub18000 = keras.layers.Subtract(name = 'Sub18000', )([Zer39355,Mul53626])
Res82757 = keras.layers.Reshape((1, 2, 2), name = 'Res82757', )(Sub18000)
Res38608 = keras.layers.Reshape((1, 4), name = 'Res38608', )(Res82757)
Loc42928 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc42928', )(Res38608)
model = tf.keras.models.Model(inputs=[in0Dep80692,in0Mul53626,in1Mul53626], outputs=Loc42928)
w = model.get_layer('Dep80692').get_weights() 
w[0] = np.array([[[[0.1831]]]])
w[1] = np.array([0])
model.get_layer('Dep80692').set_weights(w) 
w = model.get_layer('Loc42928').get_weights() 
w[0] = np.array([[[0.7114, 0.8064, 0.8424], [0.9654, 0.554, 0.036], [0.7669, 0.3026, 0.6194], [0.3478, 0.2704, 0.7518]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc42928').set_weights(w) 
in0Dep80692 = tf.constant([[[[0.6816]]]])
in0Mul53626 = tf.constant([[[[[0.1128], [0.7651]], [[0.0337], [0.0354]]]]])
in1Mul53626 = tf.constant([[[[[0.881], [0.0982]], [[0.5529], [0.5136]]]]])
print (np.array2string(model.predict([in0Dep80692,in0Mul53626,in1Mul53626],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc42928.png')

LDep80692 = depthwise_conv2D_layer([[[[0.6816]]]], 1, 1,[[[[0.1831]]]],[0], 1, 1, true, Dep80692), 
LRes48543 = reshape_layer(Dep80692, [1, 1, 1, 1], Res48543), 
LZer39355 = zero_padding3D_layer(Res48543, 0, 0, 1, 0, 1, 0, Zer39355), 
LMul53626 = multiply_layer([[[[[[0.1128], [0.7651]], [[0.0337], [0.0354]]]]], [[[[[0.881], [0.0982]], [[0.5529], [0.5136]]]]]], Mul53626), 
LSub18000 = subtract_layer(Zer39355,Mul53626, Sub18000), 
LRes82757 = reshape_layer(Sub18000, [1, 2, 2], Res82757), 
LRes38608 = reshape_layer(Res82757, [1, 4], Res38608), 
LLoc42928 = locally_connected1D_layer(Res38608, 1,[[[0.7114, 0.8064, 0.8424], [0.9654, 0.554, 0.036], [0.7669, 0.3026, 0.6194], [0.3478, 0.2704, 0.7518]]],[[0, 0, 0]], 1, Loc42928), 
exec_layers([LDep80692,LRes48543,LZer39355,LMul53626,LSub18000,LRes82757,LRes38608,LLoc42928],["Dep80692","Res48543","Zer39355","Mul53626","Sub18000","Res82757","Res38608","Loc42928"],Loc42928,"Loc42928")

Actual (Unparsed): [[[-0.1204371, -0.0985694, -0.0178044]]]

Expected (Unparsed): [[[-0.12043705152900001,-0.09856937969000001,-0.017804355666000013]]]

Actual:   [[[-0.1204, -0.0985, -0.0178]]]

Expected: [[[-0.1204, -0.0985, -0.0178]]]