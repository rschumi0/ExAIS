import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc17737 = tf.keras.layers.Input(shape=([2, 2, 1]))

Loc17737 = keras.layers.LocallyConnected2D(2, (1, 2),strides=(1, 1), name = 'Loc17737', )(in0Loc17737)
Res54406 = keras.layers.Reshape((2, 2), name = 'Res54406', )(Loc17737)
Zer22104 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer22104', )(Res54406)
Res83041 = keras.layers.Reshape((4, 2, 1), name = 'Res83041', )(Zer22104)
Loc47939 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(9, 1), name = 'Loc47939', )(Res83041)
model = tf.keras.models.Model(inputs=[in0Loc17737], outputs=Loc47939)
w = model.get_layer('Loc17737').get_weights() 
w[0] = np.array([[[0.1761, 0.6784], [0.5505, 0.2299]], [[0.6385, 0.5183], [0.0542, 0.8248]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc17737').set_weights(w) 
w = model.get_layer('Loc47939').get_weights() 
w[0] = np.array([[[0.9585, 0.777, 0.206, 0.3581]], [[0.011, 0.9309, 0.0643, 0.3424]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc47939').set_weights(w) 
in0Loc17737 = tf.constant([[[[0.6828], [0.013]], [[0.2189], [0.0432]]]])
print (np.array2string(model.predict([in0Loc17737],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc47939.png')

LLoc17737 = locally_connected2D_layer([[[[0.6828], [0.013]], [[0.2189], [0.0432]]]], 1, 2,[[[0.1761, 0.6784], [0.5505, 0.2299]], [[0.6385, 0.5183], [0.0542, 0.8248]]],[[[0, 0]], [[0, 0]]], 1, 1, Loc17737), 
LRes54406 = reshape_layer(Loc17737, [2, 2], Res54406), 
LZer22104 = zero_padding1D_layer(Res54406, 1, 1, Zer22104), 
LRes83041 = reshape_layer(Zer22104, [4, 2, 1], Res83041), 
LLoc47939 = locally_connected2D_layer(Res83041, 1, 1,[[[0.9585, 0.777, 0.206, 0.3581]], [[0.011, 0.9309, 0.0643, 0.3424]]],[[[0, 0, 0, 0], [0, 0, 0, 0]]], 9, 1, Loc47939), 
exec_layers([LLoc17737,LRes54406,LZer22104,LRes83041,LLoc47939],["Loc17737","Res54406","Zer22104","Res83041","Loc47939"],Loc47939,"Loc47939")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0]]]]

Actual:   [[[[0, 0, 0, 0], [0, 0, 0, 0]]]]

Expected: [[[[0, 0, 0, 0], [0, 0, 0, 0]]]]