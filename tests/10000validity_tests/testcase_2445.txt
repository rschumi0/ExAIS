import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min18249 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min18249 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Sub96683 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub96683 = tf.keras.layers.Input(shape=([2, 3]))
in0Con81263 = tf.keras.layers.Input(shape=([5]))
in0Con72081 = tf.keras.layers.Input(shape=([6, 1]))
in0Max1320 = tf.keras.layers.Input(shape=([2, 2]))

Min18249 = keras.layers.Minimum(name = 'Min18249', )([in0Min18249,in1Min18249])
Lay23382 = keras.layers.LayerNormalization(axis=1, epsilon=1.9775962115948795, name = 'Lay23382', )(Min18249)
Res24837 = keras.layers.Reshape((2, 2), name = 'Res24837', )(Lay23382)
Zer55832 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer55832', )(Res24837)
ELU45767 = keras.layers.ELU(alpha=-3.6406885255418935, name = 'ELU45767', )(Zer55832)
Fla27940 = keras.layers.Flatten(name = 'Fla27940', )(ELU45767)
Sub96683 = keras.layers.Subtract(name = 'Sub96683', )([in0Sub96683,in1Sub96683])
Fla11115 = keras.layers.Flatten(name = 'Fla11115', )(Sub96683)
Res72511 = keras.layers.Reshape((6, 1), name = 'Res72511', )(Fla11115)
Res40122 = keras.layers.Reshape((6, 1, 1), name = 'Res40122', )(Res72511)
Res49293 = keras.layers.Reshape((6, 1, 1, 1), name = 'Res49293', )(Res40122)
Glo98431 = keras.layers.GlobalMaxPool3D(name = 'Glo98431', )(Res49293)
Con81263 = keras.layers.Concatenate(axis=1, name = 'Con81263', )([Glo98431,in0Con81263])
Max95674 = keras.layers.Maximum(name = 'Max95674', )([Fla27940,Con81263])
Res74129 = keras.layers.Reshape((6, 1), name = 'Res74129', )(Max95674)
Con72081 = keras.layers.Concatenate(axis=2, name = 'Con72081', )([Res74129,in0Con72081])
Max1320 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max1320', )(in0Max1320)
Zer32877 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer32877', )(Max1320)
Max80404 = keras.layers.Maximum(name = 'Max80404', )([Con72081,Zer32877])
model = tf.keras.models.Model(inputs=[in0Min18249,in1Min18249,in0Sub96683,in1Sub96683,in0Con81263,in0Con72081,in0Max1320], outputs=Max80404)
in0Min18249 = tf.constant([[[[0.8804], [0.5515]], [[0.502], [0.8688]]]])
in1Min18249 = tf.constant([[[[0.3895], [0.6325]], [[0.2002], [0.107]]]])
in0Sub96683 = tf.constant([[[0.2469, 0.2826, 0.7159], [0.0091, 0.0085, 0.6648]]])
in1Sub96683 = tf.constant([[[0.9785, 0.0567, 0.1417], [0.8457, 0.9383, 0.9499]]])
in0Con81263 = tf.constant([[0.3697, 0.1303, 0.8009, 0.0002, 0.9776]])
in0Con72081 = tf.constant([[[0.9009], [0.6739], [0.2091], [0.8548], [0.0699], [0.7286]]])
in0Max1320 = tf.constant([[[1.0068, 1.6925], [1.5185, 1.8576]]])
print (np.array2string(model.predict([in0Min18249,in1Min18249,in0Sub96683,in1Sub96683,in0Con81263,in0Con72081,in0Max1320],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max80404.png')

LMin18249 = minimum_layer([[[[[0.8804], [0.5515]], [[0.502], [0.8688]]]], [[[[0.3895], [0.6325]], [[0.2002], [0.107]]]]], Min18249), 
LLay23382 = layer_normalization_layer(Min18249, 1, 1.9775962115948795, Lay23382), 
LRes24837 = reshape_layer(Lay23382, [2, 2], Res24837), 
LZer55832 = zero_padding1D_layer(Res24837, 1, 0, Zer55832), 
LELU45767 = elu_layer(Zer55832, -3.6406885255418935, ELU45767), 
LFla27940 = flatten_layer(ELU45767, Fla27940), 
LSub96683 = subtract_layer([[[0.2469, 0.2826, 0.7159], [0.0091, 0.0085, 0.6648]]], [[[0.9785, 0.0567, 0.1417], [0.8457, 0.9383, 0.9499]]], Sub96683), 
LFla11115 = flatten_layer(Sub96683, Fla11115), 
LRes72511 = reshape_layer(Fla11115, [6, 1], Res72511), 
LRes40122 = reshape_layer(Res72511, [6, 1, 1], Res40122), 
LRes49293 = reshape_layer(Res40122, [6, 1, 1, 1], Res49293), 
LGlo98431 = global_max_pool3D_layer(Res49293, Glo98431), 
LCon81263 = concatenate_layer([Glo98431,[[0.3697, 0.1303, 0.8009, 0.0002, 0.9776]]], 1, Con81263), 
LMax95674 = maximum_layer([Fla27940,Con81263], Max95674), 
LRes74129 = reshape_layer(Max95674, [6, 1], Res74129), 
LCon72081 = concatenate_layer([Res74129,[[[0.9009], [0.6739], [0.2091], [0.8548], [0.0699], [0.7286]]]], 2, Con72081), 
LMax1320 = max_pool1D_layer([[[1.0068, 1.6925], [1.5185, 1.8576]]], 1, Max1320), 
LZer32877 = zero_padding1D_layer(Max1320, 4, 0, Zer32877), 
LMax80404 = maximum_layer([Con72081,Zer32877], Max80404), 
exec_layers([LMin18249,LLay23382,LRes24837,LZer55832,LELU45767,LFla27940,LSub96683,LFla11115,LRes72511,LRes40122,LRes49293,LGlo98431,LCon81263,LMax95674,LRes74129,LCon72081,LMax1320,LZer32877,LMax80404],["Min18249","Lay23382","Res24837","Zer55832","ELU45767","Fla27940","Sub96683","Fla11115","Res72511","Res40122","Res49293","Glo98431","Con81263","Max95674","Res74129","Con72081","Max1320","Zer32877","Max80404"],Max80404,"Max80404")

Actual (Unparsed): [[[0.5742000, 0.9009000], [0.3697000, 0.6739000], [0.1303000, 0.2091000], [0.8009000, 0.8548000], [1.0068001, 1.6925000], [1.5185000, 1.8576000]]]

Expected (Unparsed): [[[0.5742,0.9009],[0.3697,0.6739],[0.1303,0.2091],[0.8009,0.8548],[1.0068,1.6925],[1.5185,1.8576]]]

Actual:   [[[0.5742, 0.9009], [0.3697, 0.6739], [0.1303, 0.2091], [0.8009, 0.8548], [1.0069, 1.6925], [1.5185, 1.8576]]]

Expected: [[[0.5742, 0.9009], [0.3697, 0.6739], [0.1303, 0.2091], [0.8009, 0.8548], [1.0068, 1.6925], [1.5185, 1.8576]]]