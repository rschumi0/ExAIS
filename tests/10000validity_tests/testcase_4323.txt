import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave30032 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave30032 = tf.keras.layers.Input(shape=([1, 2]))

Ave30032 = keras.layers.Average(name = 'Ave30032', )([in0Ave30032,in1Ave30032])
Res21744 = keras.layers.Reshape((1, 2, 1), name = 'Res21744', )(Ave30032)
Loc13259 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(1, 1), name = 'Loc13259', )(Res21744)
model = tf.keras.models.Model(inputs=[in0Ave30032,in1Ave30032], outputs=Loc13259)
w = model.get_layer('Loc13259').get_weights() 
w[0] = np.array([[[0.8872, 0.3454, 0.4461, 0.3654]], [[0.0254, 0.6206, 0.6246, 0.0304]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc13259').set_weights(w) 
in0Ave30032 = tf.constant([[[0.0558, 0.7367]]])
in1Ave30032 = tf.constant([[[0.536, 0.9038]]])
print (np.array2string(model.predict([in0Ave30032,in1Ave30032],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc13259.png')

LAve30032 = average_layer([[[[0.0558, 0.7367]]], [[[0.536, 0.9038]]]], Ave30032), 
LRes21744 = reshape_layer(Ave30032, [1, 2, 1], Res21744), 
LLoc13259 = locally_connected2D_layer(Res21744, 1, 1,[[[0.8872, 0.3454, 0.4461, 0.3654]], [[0.0254, 0.6206, 0.6246, 0.0304]]],[[[0, 0, 0, 0], [0, 0, 0, 0]]], 1, 1, Loc13259), 
exec_layers([LAve30032,LRes21744,LLoc13259],["Ave30032","Res21744","Loc13259"],Loc13259,"Loc13259")

Actual (Unparsed): [[[[0.2625225, 0.1022039, 0.1320010, 0.1081219], [0.0208344, 0.5090472, 0.5123282, 0.0249356]]]]

Expected (Unparsed): [[[[0.26252248,0.10220386,0.13200098999999998,0.10812186],[0.02083435,0.50904715,0.5123281500000001,0.024935600000000002]]]]

Actual:   [[[[0.2626, 0.1023, 0.1321, 0.1082], [0.0209, 0.5091, 0.5124, 0.025]]]]

Expected: [[[[0.2626, 0.1023, 0.1321, 0.1082], [0.0209, 0.5091, 0.5124, 0.025]]]]