import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0PRe30525 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Add71663 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add71663 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con74019 = tf.keras.layers.Input(shape=([4, 5, 2]))

PRe30525 = keras.layers.PReLU(name = 'PRe30525', input_shape=(1, 2, 1))(in0PRe30525)
Res28903 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res28903', )(PRe30525)
Con12203 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 2, 1), padding='valid', name = 'Con12203', )(Res28903)
Res65651 = keras.layers.Reshape((1, 4, 3), name = 'Res65651', )(Con12203)
Zer78852 = keras.layers.ZeroPadding2D(padding=((3, 0), (1, 0)), name = 'Zer78852', )(Res65651)
Add71663 = keras.layers.Add(name = 'Add71663', )([in0Add71663,in1Add71663])
Zer90462 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer90462', )(Add71663)
Zer17309 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer17309', )(Zer90462)
Con74019 = keras.layers.Concatenate(axis=3, name = 'Con74019', )([Zer17309,in0Con74019])
Add75723 = keras.layers.Add(name = 'Add75723', )([Zer78852,Con74019])
model = tf.keras.models.Model(inputs=[in0PRe30525,in0Add71663,in1Add71663,in0Con74019], outputs=Add75723)
w = model.get_layer('PRe30525').get_weights() 
w[0] = np.array([[[0.1088], [0.9815]]])
model.get_layer('PRe30525').set_weights(w) 
w = model.get_layer('Con12203').get_weights() 
w[0] = np.array([[[[[0.5622], [0.1272], [0.8584]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con12203').set_weights(w) 
in0PRe30525 = tf.constant([[[[0.4226], [0.7176]]]])
in0Add71663 = tf.constant([[[[0.0715]], [[0.2748]]]])
in1Add71663 = tf.constant([[[[0.622]], [[0.472]]]])
in0Con74019 = tf.constant([[[[0.7467, 0.5312], [0.0427, 0.3008], [0.7648, 0.6664], [0.1594, 0.6589], [0.9984, 0.5465]], [[0.5786, 0.7725], [0.2173, 0.4059], [0.0934, 0.6043], [0.5393, 0.9836], [0.1777, 0.3891]], [[0.7298, 0.0378], [0.454, 0.618], [0.2674, 0.7643], [0.8824, 0.5326], [0.1604, 0.5848]], [[0.2323, 0.8049], [0.323, 0.9131], [0.1835, 0.3008], [0.3026, 0.0633], [0.8306, 0.9533]]]])
print (np.array2string(model.predict([in0PRe30525,in0Add71663,in1Add71663,in0Con74019],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add75723.png')

LPRe30525 = prelu_layer([[[[0.4226], [0.7176]]]], [[[0.1088], [0.9815]]], PRe30525), 
LRes28903 = reshape_layer(PRe30525, [1, 2, 1, 1], Res28903), 
LCon12203 = conv3D_transpose_layer(Res28903, 1, 1, 1,[[[[[0.5622], [0.1272], [0.8584]]]]],[0, 0, 0], 1, 2, 1, false, Con12203), 
LRes65651 = reshape_layer(Con12203, [1, 4, 3], Res65651), 
LZer78852 = zero_padding2D_layer(Res65651, 3, 0, 1, 0, Zer78852), 
LAdd71663 = add_layer([[[[[0.0715]], [[0.2748]]]], [[[[0.622]], [[0.472]]]]], Add71663), 
LZer90462 = zero_padding2D_layer(Add71663, 1, 1, 1, 1, Zer90462), 
LZer17309 = zero_padding2D_layer(Zer90462, 0, 0, 2, 0, Zer17309), 
LCon74019 = concatenate_layer([Zer17309,[[[[0.7467, 0.5312], [0.0427, 0.3008], [0.7648, 0.6664], [0.1594, 0.6589], [0.9984, 0.5465]], [[0.5786, 0.7725], [0.2173, 0.4059], [0.0934, 0.6043], [0.5393, 0.9836], [0.1777, 0.3891]], [[0.7298, 0.0378], [0.454, 0.618], [0.2674, 0.7643], [0.8824, 0.5326], [0.1604, 0.5848]], [[0.2323, 0.8049], [0.323, 0.9131], [0.1835, 0.3008], [0.3026, 0.0633], [0.8306, 0.9533]]]]], 3, Con74019), 
LAdd75723 = add_layer([Zer78852,Con74019], Add75723), 
exec_layers([LPRe30525,LRes28903,LCon12203,LRes65651,LZer78852,LAdd71663,LZer90462,LZer17309,LCon74019,LAdd75723],["PRe30525","Res28903","Con12203","Res65651","Zer78852","Add71663","Zer90462","Zer17309","Con74019","Add75723"],Add75723,"Add75723")

Actual (Unparsed): [[[[0.0000000, 0.7467000, 0.5312000], [0.0000000, 0.0427000, 0.3008000], [0.0000000, 0.7648000, 0.6664000], [0.0000000, 0.1594000, 0.6589000], [0.0000000, 0.9984000, 0.5465000]], [[0.0000000, 0.5786000, 0.7725000], [0.0000000, 0.2173000, 0.4059000], [0.0000000, 0.0934000, 0.6043000], [0.6935000, 0.5393000, 0.9836000], [0.0000000, 0.1777000, 0.3891000]], [[0.0000000, 0.7298000, 0.0378000], [0.0000000, 0.4540000, 0.6180000], [0.0000000, 0.2674000, 0.7643000], [0.7468000, 0.8824000, 0.5326000], [0.0000000, 0.1604000, 0.5848000]], [[0.0000000, 0.2323000, 0.8049000], [0.2375857, 0.3767547, 1.2758598], [0.0000000, 0.1835000, 0.3008000], [0.4034347, 0.3938787, 0.6792878], [0.0000000, 0.8306000, 0.9533000]]]]

Expected (Unparsed): [[[[0,0.7467,0.5312],[0,0.0427,0.3008],[0,0.7648,0.6664],[0,0.1594,0.6589],[0,0.9984,0.5465]],[[0,0.5786,0.7725],[0,0.2173,0.4059],[0,0.0934,0.6043],[0.6935,0.5393,0.9836],[0,0.1777,0.3891]],[[0,0.7298,0.0378],[0,0.454,0.618],[0,0.2674,0.7643],[0.7467999999999999,0.8824,0.5326],[0,0.1604,0.5848]],[[0,0.2323,0.8049],[0.23758572,0.37675472,1.27585984],[0,0.1835,0.3008],[0.40343472,0.39387872,0.6792878400000001],[0,0.8306,0.9533]]]]

Actual:   [[[[0, 0.7467, 0.5312], [0, 0.0427, 0.3008], [0, 0.7648, 0.6664], [0, 0.1594, 0.6589], [0, 0.9984, 0.5465]], [[0, 0.5786, 0.7725], [0, 0.2173, 0.4059], [0, 0.0934, 0.6043], [0.6935, 0.5393, 0.9836], [0, 0.1777, 0.3891]], [[0, 0.7298, 0.0378], [0, 0.454, 0.618], [0, 0.2674, 0.7643], [0.7468, 0.8824, 0.5326], [0, 0.1604, 0.5848]], [[0, 0.2323, 0.8049], [0.2376, 0.3768, 1.2759], [0, 0.1835, 0.3008], [0.4035, 0.3939, 0.6793], [0, 0.8306, 0.9533]]]]

Expected: [[[[0, 0.7467, 0.5312], [0, 0.0427, 0.3008], [0, 0.7648, 0.6664], [0, 0.1594, 0.6589], [0, 0.9984, 0.5465]], [[0, 0.5786, 0.7725], [0, 0.2173, 0.4059], [0, 0.0934, 0.6043], [0.6935, 0.5393, 0.9836], [0, 0.1777, 0.3891]], [[0, 0.7298, 0.0378], [0, 0.454, 0.618], [0, 0.2674, 0.7643], [0.7468, 0.8824, 0.5326], [0, 0.1604, 0.5848]], [[0, 0.2323, 0.8049], [0.2376, 0.3768, 1.2759], [0, 0.1835, 0.3008], [0.4035, 0.3939, 0.6793], [0, 0.8306, 0.9533]]]]