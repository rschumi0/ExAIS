import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max4133 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Max4133 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Max4133 = keras.layers.Maximum(name = 'Max4133', )([in0Max4133,in1Max4133])
Res57443 = keras.layers.Reshape((1, 2, 4), name = 'Res57443', )(Max4133)
Glo87984 = keras.layers.GlobalAveragePooling2D(name = 'Glo87984', )(Res57443)
Mas44631 = keras.layers.Masking(mask_value=2, name = 'Mas44631', )(Glo87984)
model = tf.keras.models.Model(inputs=[in0Max4133,in1Max4133], outputs=Mas44631)
in0Max4133 = tf.constant([[[[[0.1932, 0.7559], [0.4408, 0.0605]], [[0.9501, 0.0545], [0.6455, 0.1491]]]]])
in1Max4133 = tf.constant([[[[[0.1749, 0.7029], [0.9592, 0.0249]], [[0.9919, 0.5658], [0.294, 0.3442]]]]])
print (np.array2string(model.predict([in0Max4133,in1Max4133],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas44631.png')

LMax4133 = maximum_layer([[[[[[0.1932, 0.7559], [0.4408, 0.0605]], [[0.9501, 0.0545], [0.6455, 0.1491]]]]], [[[[[0.1749, 0.7029], [0.9592, 0.0249]], [[0.9919, 0.5658], [0.294, 0.3442]]]]]], Max4133), 
LRes57443 = reshape_layer(Max4133, [1, 2, 4], Res57443), 
LGlo87984 = global_average_pooling2D_layer(Res57443, Glo87984), 
LMas44631 = masking_layer(Glo87984, 2, Mas44631), 
exec_layers([LMax4133,LRes57443,LGlo87984,LMas44631],["Max4133","Res57443","Glo87984","Mas44631"],Mas44631,"Mas44631")

Actual (Unparsed): [[0.5925500, 0.6608500, 0.8023500, 0.2023500]]

Expected (Unparsed): [[0.59255,0.6608499999999999,0.80235,0.20235]]

Actual:   [[0.5926, 0.6609, 0.8024, 0.2024]]

Expected: [[0.5926, 0.6609, 0.8024, 0.2024]]