import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min61542 = tf.keras.layers.Input(shape=([1, 2]))
in1Min61542 = tf.keras.layers.Input(shape=([1, 2]))
in0Add96792 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add96792 = tf.keras.layers.Input(shape=([1, 1, 1]))

Min61542 = keras.layers.Minimum(name = 'Min61542', )([in0Min61542,in1Min61542])
Res37038 = keras.layers.Reshape((1, 2, 1), name = 'Res37038', )(Min61542)
Ave12146 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Ave12146', )(Res37038)
Add96792 = keras.layers.Add(name = 'Add96792', )([in0Add96792,in1Add96792])
Zer80668 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer80668', )(Add96792)
Sub19611 = keras.layers.Subtract(name = 'Sub19611', )([Ave12146,Zer80668])
model = tf.keras.models.Model(inputs=[in0Min61542,in1Min61542,in0Add96792,in1Add96792], outputs=Sub19611)
in0Min61542 = tf.constant([[[0.0312, 0.64]]])
in1Min61542 = tf.constant([[[0.35, 0.8261]]])
in0Add96792 = tf.constant([[[[0.0542]]]])
in1Add96792 = tf.constant([[[[0.9917]]]])
print (np.array2string(model.predict([in0Min61542,in1Min61542,in0Add96792,in1Add96792],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub19611.png')

LMin61542 = minimum_layer([[[[0.0312, 0.64]]], [[[0.35, 0.8261]]]], Min61542), 
LRes37038 = reshape_layer(Min61542, [1, 2, 1], Res37038), 
LAve12146 = average_pooling2D_layer(Res37038, 1, 1, 1, 1, true, Ave12146), 
LAdd96792 = add_layer([[[[[0.0542]]]], [[[[0.9917]]]]], Add96792), 
LZer80668 = zero_padding2D_layer(Add96792, 0, 0, 1, 0, Zer80668), 
LSub19611 = subtract_layer(Ave12146,Zer80668, Sub19611), 
exec_layers([LMin61542,LRes37038,LAve12146,LAdd96792,LZer80668,LSub19611],["Min61542","Res37038","Ave12146","Add96792","Zer80668","Sub19611"],Sub19611,"Sub19611")

Actual (Unparsed): [[[[0.0312000], [-0.4059000]]]]

Expected (Unparsed): [[[[0.0312],[-0.40590000000000004]]]]

Actual:   [[[[0.0312], [-0.4059]]]]

Expected: [[[[0.0312], [-0.4059]]]]