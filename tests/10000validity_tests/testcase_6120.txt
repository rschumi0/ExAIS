import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo86845 = tf.keras.layers.Input(shape=([1, 2]))
in0Min40468 = tf.keras.layers.Input(shape=([2, 1]))
in1Min40468 = tf.keras.layers.Input(shape=([2, 1]))
in0Add52461 = tf.keras.layers.Input(shape=([1, 1]))
in1Add52461 = tf.keras.layers.Input(shape=([1, 1]))

Glo86845 = keras.layers.GlobalMaxPool1D(name = 'Glo86845', )(in0Glo86845)
Res63996 = keras.layers.Reshape((2, 1), name = 'Res63996', )(Glo86845)
Min40468 = keras.layers.Minimum(name = 'Min40468', )([in0Min40468,in1Min40468])
Add52461 = keras.layers.Add(name = 'Add52461', )([in0Add52461,in1Add52461])
Dot93395 = keras.layers.Dot(axes=(2, 2), name = 'Dot93395', )([Min40468,Add52461])
Max28278 = keras.layers.Maximum(name = 'Max28278', )([Res63996,Dot93395])
Sim71980 = keras.layers.SimpleRNN(3,name = 'Sim71980', )(Max28278)
model = tf.keras.models.Model(inputs=[in0Glo86845,in0Min40468,in1Min40468,in0Add52461,in1Add52461], outputs=Sim71980)
w = model.get_layer('Sim71980').get_weights() 
w[0] = np.array([[5, 1, 10]])
w[1] = np.array([[1, 8, 5], [4, 10, 10], [7, 5, 2]])
w[2] = np.array([2, 7, 7])
model.get_layer('Sim71980').set_weights(w) 
in0Glo86845 = tf.constant([[[1.0341, 1.1075]]])
in0Min40468 = tf.constant([[[0.2847], [0.233]]])
in1Min40468 = tf.constant([[[0.3187], [0.6262]]])
in0Add52461 = tf.constant([[[0.1749]]])
in1Add52461 = tf.constant([[[0.0434]]])
print (np.array2string(model.predict([in0Glo86845,in0Min40468,in1Min40468,in0Add52461,in1Add52461],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sim71980.png')

LGlo86845 = global_max_pool1D_layer([[[1.0341, 1.1075]]], Glo86845), 
LRes63996 = reshape_layer(Glo86845, [2, 1], Res63996), 
LMin40468 = minimum_layer([[[[0.2847], [0.233]]], [[[0.3187], [0.6262]]]], Min40468), 
LAdd52461 = add_layer([[[[0.1749]]], [[[0.0434]]]], Add52461), 
LDot93395 = dot_layer(Min40468,Add52461, 2, 2, Dot93395), 
LMax28278 = maximum_layer([Res63996,Dot93395], Max28278), 
LSim71980 = simple_rnn_layer(Max28278,[[5, 1, 10]],[[1, 8, 5], [4, 10, 10], [7, 5, 2]],[2, 7, 7], Sim71980), 
exec_layers([LGlo86845,LRes63996,LMin40468,LAdd52461,LDot93395,LMax28278,LSim71980],["Glo86845","Res63996","Min40468","Add52461","Dot93395","Max28278","Sim71980"],Sim71980,"Sim71980")

Actual (Unparsed): [[1.0000000, 1.0000000, 1.0000000]]

Expected (Unparsed): [[1.0,1.0,1.0]]

Actual:   [[1, 1, 1]]

Expected: [[1, 1, 1]]