import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den69744 = tf.keras.layers.Input(shape=([3, 2]))

Den69744 = keras.layers.Dense(4,name = 'Den69744', )(in0Den69744)
Sim19241 = keras.layers.SimpleRNN(1,name = 'Sim19241', )(Den69744)
Res48803 = keras.layers.Reshape((1, 1), name = 'Res48803', )(Sim19241)
Res14101 = keras.layers.Reshape((1, 1, 1), name = 'Res14101', )(Res48803)
Ave53120 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 7), padding='valid', name = 'Ave53120', )(Res14101)
Max33718 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max33718', )(Ave53120)
Res47672 = keras.layers.Reshape((1, 1), name = 'Res47672', )(Max33718)
Glo96589 = keras.layers.GlobalMaxPool1D(name = 'Glo96589', )(Res47672)
model = tf.keras.models.Model(inputs=[in0Den69744], outputs=Glo96589)
w = model.get_layer('Den69744').get_weights() 
w[0] = np.array([[0.8966, 0.8258, 0.2996, 0.6199], [0.8851, 0.2365, 0.4141, 0.9235]])
w[1] = np.array([0.3521, 0.9268, 0.2068, 0.9306])
model.get_layer('Den69744').set_weights(w) 
w = model.get_layer('Sim19241').get_weights() 
w[0] = np.array([[9], [7], [1], [1]])
w[1] = np.array([[2]])
w[2] = np.array([6])
model.get_layer('Sim19241').set_weights(w) 
in0Den69744 = tf.constant([[[0.4493, 0.5797], [0.8767, 0.8096], [0.6104, 0.6807]]])
print (np.array2string(model.predict([in0Den69744],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo96589.png')

LDen69744 = dense_layer([[[0.4493, 0.5797], [0.8767, 0.8096], [0.6104, 0.6807]]], [[0.8966, 0.8258, 0.2996, 0.6199], [0.8851, 0.2365, 0.4141, 0.9235]],[0.3521, 0.9268, 0.2068, 0.9306], Den69744), 
LSim19241 = simple_rnn_layer(Den69744,[[9], [7], [1], [1]],[[2]],[6], Sim19241), 
LRes48803 = reshape_layer(Sim19241, [1, 1], Res48803), 
LRes14101 = reshape_layer(Res48803, [1, 1, 1], Res14101), 
LAve53120 = average_pooling2D_layer(Res14101, 1, 1, 1, 7, false, Ave53120), 
LMax33718 = max_pool2D_layer(Ave53120, 1, 1, Max33718), 
LRes47672 = reshape_layer(Max33718, [1, 1], Res47672), 
LGlo96589 = global_max_pool1D_layer(Res47672, Glo96589), 
exec_layers([LDen69744,LSim19241,LRes48803,LRes14101,LAve53120,LMax33718,LRes47672,LGlo96589],["Den69744","Sim19241","Res48803","Res14101","Ave53120","Max33718","Res47672","Glo96589"],Glo96589,"Glo96589")

Actual (Unparsed): [[1.0000000]]

Expected (Unparsed): [[1.0]]

Actual:   [[1]]

Expected: [[1]]