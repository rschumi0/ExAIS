import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU23781 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Add94338 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add94338 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con95134 = tf.keras.layers.Input(shape=([5]))
in0Con42957 = tf.keras.layers.Input(shape=([6, 1]))
in0Add43716 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Add43716 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

ELU23781 = keras.layers.ELU(alpha=-0.32458295027237405, name = 'ELU23781', input_shape=(2, 1, 1))(in0ELU23781)
Zer74633 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer74633', )(ELU23781)
Max56281 = keras.layers.MaxPool2D(pool_size=(2, 1), name = 'Max56281', )(Zer74633)
Res57300 = keras.layers.Reshape((2, 3), name = 'Res57300', )(Max56281)
Fla82287 = keras.layers.Flatten(name = 'Fla82287', )(Res57300)
Add94338 = keras.layers.Add(name = 'Add94338', )([in0Add94338,in1Add94338])
Res64244 = keras.layers.Reshape((1, 2, 1), name = 'Res64244', )(Add94338)
Glo8422 = keras.layers.GlobalAveragePooling2D(name = 'Glo8422', )(Res64244)
Con95134 = keras.layers.Concatenate(axis=1, name = 'Con95134', )([Glo8422,in0Con95134])
Mul97834 = keras.layers.Multiply(name = 'Mul97834', )([Fla82287,Con95134])
Res23770 = keras.layers.Reshape((6, 1), name = 'Res23770', )(Mul97834)
Con42957 = keras.layers.Concatenate(axis=2, name = 'Con42957', )([Res23770,in0Con42957])
Add43716 = keras.layers.Add(name = 'Add43716', )([in0Add43716,in1Add43716])
Res59304 = keras.layers.Reshape((2, 2, 1), name = 'Res59304', )(Add43716)
Res12794 = keras.layers.Reshape((2, 2), name = 'Res12794', )(Res59304)
Dot2712 = keras.layers.Dot(axes=(2, 2), name = 'Dot2712', )([Con42957,Res12794])
Res27132 = keras.layers.Reshape((6, 2, 1), name = 'Res27132', )(Dot2712)
Zer93899 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer93899', )(Res27132)
model = tf.keras.models.Model(inputs=[in0ELU23781,in0Add94338,in1Add94338,in0Con95134,in0Con42957,in0Add43716,in1Add43716], outputs=Zer93899)
in0ELU23781 = tf.constant([[[[0.6623]], [[0.1867]]]])
in0Add94338 = tf.constant([[[[[0.0636]], [[0.422]]]]])
in1Add94338 = tf.constant([[[[[0.0466]], [[0.7245]]]]])
in0Con95134 = tf.constant([[0.8593, 0.6046, 0.2682, 0.752, 0.0762]])
in0Con42957 = tf.constant([[[0.8199], [0.9819], [0.9754], [0.398], [0.8588], [0.0146]]])
in0Add43716 = tf.constant([[[[[0.2403]], [[0.9129]]], [[[0.5211]], [[0.6133]]]]])
in1Add43716 = tf.constant([[[[[0.9819]], [[0.0327]]], [[[0.7794]], [[0.817]]]]])
print (np.array2string(model.predict([in0ELU23781,in0Add94338,in1Add94338,in0Con95134,in0Con42957,in0Add43716,in1Add43716],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer93899.png')

LELU23781 = elu_layer([[[[0.6623]], [[0.1867]]]], -0.32458295027237405, ELU23781), 
LZer74633 = zero_padding2D_layer(ELU23781, 1, 1, 1, 1, Zer74633), 
LMax56281 = max_pool2D_layer(Zer74633, 2, 1, Max56281), 
LRes57300 = reshape_layer(Max56281, [2, 3], Res57300), 
LFla82287 = flatten_layer(Res57300, Fla82287), 
LAdd94338 = add_layer([[[[[[0.0636]], [[0.422]]]]], [[[[[0.0466]], [[0.7245]]]]]], Add94338), 
LRes64244 = reshape_layer(Add94338, [1, 2, 1], Res64244), 
LGlo8422 = global_average_pooling2D_layer(Res64244, Glo8422), 
LCon95134 = concatenate_layer([Glo8422,[[0.8593, 0.6046, 0.2682, 0.752, 0.0762]]], 1, Con95134), 
LMul97834 = multiply_layer([Fla82287,Con95134], Mul97834), 
LRes23770 = reshape_layer(Mul97834, [6, 1], Res23770), 
LCon42957 = concatenate_layer([Res23770,[[[0.8199], [0.9819], [0.9754], [0.398], [0.8588], [0.0146]]]], 2, Con42957), 
LAdd43716 = add_layer([[[[[[0.2403]], [[0.9129]]], [[[0.5211]], [[0.6133]]]]], [[[[[0.9819]], [[0.0327]]], [[[0.7794]], [[0.817]]]]]], Add43716), 
LRes59304 = reshape_layer(Add43716, [2, 2, 1], Res59304), 
LRes12794 = reshape_layer(Res59304, [2, 2], Res12794), 
LDot2712 = dot_layer(Con42957,Res12794, 2, 2, Dot2712), 
LRes27132 = reshape_layer(Dot2712, [6, 2, 1], Res27132), 
LZer93899 = zero_padding2D_layer(Res27132, 1, 1, 1, 1, Zer93899), 
exec_layers([LELU23781,LZer74633,LMax56281,LRes57300,LFla82287,LAdd94338,LRes64244,LGlo8422,LCon95134,LMul97834,LRes23770,LCon42957,LAdd43716,LRes59304,LRes12794,LDot2712,LRes27132,LZer93899],["ELU23781","Zer74633","Max56281","Res57300","Fla82287","Add94338","Res64244","Glo8422","Con95134","Mul97834","Res23770","Con42957","Add43716","Res59304","Res12794","Dot2712","Res27132","Zer93899"],Zer93899,"Zer93899")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.7752974], [1.1727029], [0.0000000]], [[0.0000000], [1.6240562], [2.1445448], [0.0000000]], [[0.0000000], [0.9223382], [1.3951146], [0.0000000]], [[0.0000000], [0.3763488], [0.5692594], [0.0000000]], [[0.0000000], [0.9836762], [1.4109297], [0.0000000]], [[0.0000000], [0.0138058], [0.0208824], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0],[0]],[[0],[0.77529744],[1.1727029699999998],[0]],[[0],[1.6240562474579998],[2.144544834195],[0]],[[0],[0.9223382400000001],[1.39511462],[0]],[[0],[0.37634880000000004],[0.5692594],[0]],[[0],[0.98367620448],[1.4109297592],[0]],[[0],[0.01380576],[0.02088238],[0]],[[0],[0],[0],[0]]]]

Actual:   [[[[0], [0], [0], [0]], [[0], [0.7753], [1.1728], [0]], [[0], [1.6241], [2.1446], [0]], [[0], [0.9224], [1.3952], [0]], [[0], [0.3764], [0.5693], [0]], [[0], [0.9837], [1.411], [0]], [[0], [0.0139], [0.0209], [0]], [[0], [0], [0], [0]]]]

Expected: [[[[0], [0], [0], [0]], [[0], [0.7753], [1.1728], [0]], [[0], [1.6241], [2.1446], [0]], [[0], [0.9224], [1.3952], [0]], [[0], [0.3764], [0.5693], [0]], [[0], [0.9837], [1.411], [0]], [[0], [0.0139], [0.0209], [0]], [[0], [0], [0], [0]]]]