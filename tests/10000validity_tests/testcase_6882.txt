import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add2168 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add2168 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Glo82796 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Con12685 = tf.keras.layers.Input(shape=([2]))

Add2168 = keras.layers.Add(name = 'Add2168', )([in0Add2168,in1Add2168])
Res62477 = keras.layers.Reshape((2, 2), name = 'Res62477', )(Add2168)
Fla72455 = keras.layers.Flatten(name = 'Fla72455', )(Res62477)
Glo82796 = keras.layers.GlobalAveragePooling3D(name = 'Glo82796', )(in0Glo82796)
Con12685 = keras.layers.Concatenate(axis=1, name = 'Con12685', )([Glo82796,in0Con12685])
Ave81175 = keras.layers.Average(name = 'Ave81175', )([Fla72455,Con12685])
model = tf.keras.models.Model(inputs=[in0Add2168,in1Add2168,in0Glo82796,in0Con12685], outputs=Ave81175)
in0Add2168 = tf.constant([[[[0.252, 0.8579]], [[0.9004, 0.7235]]]])
in1Add2168 = tf.constant([[[[0.5921, 0.8937]], [[0.7009, 0.056]]]])
in0Glo82796 = tf.constant([[[[[1.3528, 1.7749]], [[1.7829, 1.1767]]]]])
in0Con12685 = tf.constant([[0.7062, 0.3001]])
print (np.array2string(model.predict([in0Add2168,in1Add2168,in0Glo82796,in0Con12685],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave81175.png')

LAdd2168 = add_layer([[[[[0.252, 0.8579]], [[0.9004, 0.7235]]]], [[[[0.5921, 0.8937]], [[0.7009, 0.056]]]]], Add2168), 
LRes62477 = reshape_layer(Add2168, [2, 2], Res62477), 
LFla72455 = flatten_layer(Res62477, Fla72455), 
LGlo82796 = global_average_pooling3D_layer([[[[[1.3528, 1.7749]], [[1.7829, 1.1767]]]]], Glo82796), 
LCon12685 = concatenate_layer([Glo82796,[[0.7062, 0.3001]]], 1, Con12685), 
LAve81175 = average_layer([Fla72455,Con12685], Ave81175), 
exec_layers([LAdd2168,LRes62477,LFla72455,LGlo82796,LCon12685,LAve81175],["Add2168","Res62477","Fla72455","Glo82796","Con12685","Ave81175"],Ave81175,"Ave81175")

Actual (Unparsed): [[1.2059750, 1.6137000, 1.1537500, 0.5398000]]

Expected (Unparsed): [[1.205975,1.6137000000000001,1.15375,0.5398000000000001]]

Actual:   [[1.206, 1.6137, 1.1538, 0.5398]]

Expected: [[1.206, 1.6138, 1.1538, 0.5399]]