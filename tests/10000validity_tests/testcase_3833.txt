import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU4473 = tf.keras.layers.Input(shape=([1, 2]))

ELU4473 = keras.layers.ELU(alpha=-0.0087472654640397, name = 'ELU4473', input_shape=(1, 2))(in0ELU4473)
LST41126 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST41126', )(ELU4473)
Res96547 = keras.layers.Reshape((3, 1), name = 'Res96547', )(LST41126)
Res65698 = keras.layers.Reshape((3, 1, 1), name = 'Res65698', )(Res96547)
Res94247 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res94247', )(Res65698)
Glo90489 = keras.layers.GlobalAveragePooling3D(name = 'Glo90489', )(Res94247)
model = tf.keras.models.Model(inputs=[in0ELU4473], outputs=Glo90489)
w = model.get_layer('LST41126').get_weights() 
w[0] = np.array([[9, 2, 6, 9, 7, 10, 2, 3, 10, 2, 1, 10], [2, 3, 7, 10, 10, 4, 1, 10, 1, 5, 3, 2]])
w[1] = np.array([[2, 6, 3, 3, 5, 5, 1, 5, 7, 3, 3, 1], [5, 8, 9, 10, 10, 9, 3, 3, 9, 5, 7, 5], [6, 1, 7, 4, 6, 9, 10, 1, 4, 3, 5, 3]])
w[2] = np.array([2, 9, 7, 10, 5, 4, 5, 6, 8, 6, 8, 5])
model.get_layer('LST41126').set_weights(w) 
in0ELU4473 = tf.constant([[[0.6619, 0.7615]]])
print (np.array2string(model.predict([in0ELU4473],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo90489.png')

LELU4473 = elu_layer([[[0.6619, 0.7615]]], -0.0087472654640397, ELU4473), 
LLST41126 = lstm_layer(ELU4473,[[9, 2, 6, 9, 7, 10, 2, 3, 10, 2, 1, 10], [2, 3, 7, 10, 10, 4, 1, 10, 1, 5, 3, 2]],[[2, 6, 3, 3, 5, 5, 1, 5, 7, 3, 3, 1], [5, 8, 9, 10, 10, 9, 3, 3, 9, 5, 7, 5], [6, 1, 7, 4, 6, 9, 10, 1, 4, 3, 5, 3]],[2, 9, 7, 10, 5, 4, 5, 6, 8, 6, 8, 5], LST41126), 
LRes96547 = reshape_layer(LST41126, [3, 1], Res96547), 
LRes65698 = reshape_layer(Res96547, [3, 1, 1], Res65698), 
LRes94247 = reshape_layer(Res65698, [3, 1, 1, 1], Res94247), 
LGlo90489 = global_average_pooling3D_layer(Res94247, Glo90489), 
exec_layers([LELU4473,LLST41126,LRes96547,LRes65698,LRes94247,LGlo90489],["ELU4473","LST41126","Res96547","Res65698","Res94247","Glo90489"],Glo90489,"Glo90489")

Actual (Unparsed): [[0.7615741]]

Expected (Unparsed): [[0.7615741015602415]]

Actual:   [[0.7616]]

Expected: [[0.7616]]