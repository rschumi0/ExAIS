import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub42946 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub42946 = tf.keras.layers.Input(shape=([2, 2]))

Sub42946 = keras.layers.Subtract(name = 'Sub42946', )([in0Sub42946,in1Sub42946])
Glo67972 = keras.layers.GlobalMaxPool1D(name = 'Glo67972', )(Sub42946)
Res45856 = keras.layers.Reshape((2, 1), name = 'Res45856', )(Glo67972)
Res73560 = keras.layers.Reshape((2, 1, 1), name = 'Res73560', )(Res45856)
Glo36394 = keras.layers.GlobalMaxPool2D(name = 'Glo36394', )(Res73560)
model = tf.keras.models.Model(inputs=[in0Sub42946,in1Sub42946], outputs=Glo36394)
in0Sub42946 = tf.constant([[[0.3837, 0.1829], [0.5009, 0.6677]]])
in1Sub42946 = tf.constant([[[0.0523, 0.2499], [0.7979, 0.476]]])
print (np.array2string(model.predict([in0Sub42946,in1Sub42946],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo36394.png')

LSub42946 = subtract_layer([[[0.3837, 0.1829], [0.5009, 0.6677]]], [[[0.0523, 0.2499], [0.7979, 0.476]]], Sub42946), 
LGlo67972 = global_max_pool1D_layer(Sub42946, Glo67972), 
LRes45856 = reshape_layer(Glo67972, [2, 1], Res45856), 
LRes73560 = reshape_layer(Res45856, [2, 1, 1], Res73560), 
LGlo36394 = global_max_pool2D_layer(Res73560, Glo36394), 
exec_layers([LSub42946,LGlo67972,LRes45856,LRes73560,LGlo36394],["Sub42946","Glo67972","Res45856","Res73560","Glo36394"],Glo36394,"Glo36394")

Actual (Unparsed): [[0.3314000]]

Expected (Unparsed): [[0.3314]]

Actual:   [[0.3314]]

Expected: [[0.3314]]