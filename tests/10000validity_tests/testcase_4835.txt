import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add95808 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Add95808 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Glo24477 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con25685 = tf.keras.layers.Input(shape=([4, 1]))
in0Per34385 = tf.keras.layers.Input(shape=([4, 2]))
in0Con18632 = tf.keras.layers.Input(shape=([4, 2]))
in0Con8742 = tf.keras.layers.Input(shape=([4, 4, 1, 1]))
in0Add57249 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Add57249 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Add95808 = keras.layers.Add(name = 'Add95808', )([in0Add95808,in1Add95808])
Res81937 = keras.layers.Reshape((2, 2, 2), name = 'Res81937', )(Add95808)
Res16705 = keras.layers.Reshape((2, 4), name = 'Res16705', )(Res81937)
Zer57817 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer57817', )(Res16705)
Glo24477 = keras.layers.GlobalAveragePooling2D(name = 'Glo24477', )(in0Glo24477)
Fla48612 = keras.layers.Flatten(name = 'Fla48612', )(Glo24477)
Res92607 = keras.layers.Reshape((1, 1), name = 'Res92607', )(Fla48612)
Zer32830 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer32830', )(Res92607)
Con25685 = keras.layers.Concatenate(axis=2, name = 'Con25685', )([Zer32830,in0Con25685])
Per34385 = keras.layers.Permute((1,2), name = 'Per34385',)(in0Per34385)
Sub38974 = keras.layers.Subtract(name = 'Sub38974', )([Con25685,Per34385])
Con18632 = keras.layers.Concatenate(axis=2, name = 'Con18632', )([Sub38974,in0Con18632])
Mul55127 = keras.layers.Multiply(name = 'Mul55127', )([Zer57817,Con18632])
Res72811 = keras.layers.Reshape((4, 4, 1), name = 'Res72811', )(Mul55127)
Res20024 = keras.layers.Reshape((4, 4, 1, 1), name = 'Res20024', )(Res72811)
Con8742 = keras.layers.Concatenate(axis=4, name = 'Con8742', )([Res20024,in0Con8742])
Add57249 = keras.layers.Add(name = 'Add57249', )([in0Add57249,in1Add57249])
Zer82269 = keras.layers.ZeroPadding3D(padding=((3, 0), (3, 0), (0, 0)), name = 'Zer82269', )(Add57249)
Mul72590 = keras.layers.Multiply(name = 'Mul72590', )([Con8742,Zer82269])
model = tf.keras.models.Model(inputs=[in0Add95808,in1Add95808,in0Glo24477,in0Con25685,in0Per34385,in0Con18632,in0Con8742,in0Add57249,in1Add57249], outputs=Mul72590)
in0Add95808 = tf.constant([[[[[0.9146, 0.7906]], [[0.2184, 0.094]]], [[[0.6309, 0.1371]], [[0.7519, 0.894]]]]])
in1Add95808 = tf.constant([[[[[0.3481, 0.0514]], [[0.5645, 0.4002]]], [[[0.6624, 0.1868]], [[0.3976, 0.9563]]]]])
in0Glo24477 = tf.constant([[[[1.0235]]]])
in0Con25685 = tf.constant([[[0.4037], [0.8616], [0.2008], [0.6969]]])
in0Per34385 = tf.constant([[[1.6932, 1.6243], [1.8109, 1.9866], [1.9634, 1.063], [1.2606, 1.7492]]])
in0Con18632 = tf.constant([[[0.9369, 0.391], [0.562, 0.4939], [0.314, 0.5366], [0.1383, 0.0916]]])
in0Con8742 = tf.constant([[[[[0.2506]], [[0.5428]], [[0.0326]], [[0.4182]]], [[[0.6135]], [[0.468]], [[0.4191]], [[0.8192]]], [[[0.2599]], [[0.4884]], [[0.348]], [[0.0837]]], [[[0.6928]], [[0.2418]], [[0.1826]], [[0.899]]]]])
in0Add57249 = tf.constant([[[[[0.2394, 0.7671]]]]])
in1Add57249 = tf.constant([[[[[0.6635, 0.936]]]]])
print (np.array2string(model.predict([in0Add95808,in1Add95808,in0Glo24477,in0Con25685,in0Per34385,in0Con18632,in0Con8742,in0Add57249,in1Add57249],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul72590.png')

LAdd95808 = add_layer([[[[[[0.9146, 0.7906]], [[0.2184, 0.094]]], [[[0.6309, 0.1371]], [[0.7519, 0.894]]]]], [[[[[0.3481, 0.0514]], [[0.5645, 0.4002]]], [[[0.6624, 0.1868]], [[0.3976, 0.9563]]]]]], Add95808), 
LRes81937 = reshape_layer(Add95808, [2, 2, 2], Res81937), 
LRes16705 = reshape_layer(Res81937, [2, 4], Res16705), 
LZer57817 = zero_padding1D_layer(Res16705, 2, 0, Zer57817), 
LGlo24477 = global_average_pooling2D_layer([[[[1.0235]]]], Glo24477), 
LFla48612 = flatten_layer(Glo24477, Fla48612), 
LRes92607 = reshape_layer(Fla48612, [1, 1], Res92607), 
LZer32830 = zero_padding1D_layer(Res92607, 3, 0, Zer32830), 
LCon25685 = concatenate_layer([Zer32830,[[[0.4037], [0.8616], [0.2008], [0.6969]]]], 2, Con25685), 
LPer34385 = permute_layer([[[1.6932, 1.6243], [1.8109, 1.9866], [1.9634, 1.063], [1.2606, 1.7492]]], 1,2, Per34385), 
LSub38974 = subtract_layer(Con25685,Per34385, Sub38974), 
LCon18632 = concatenate_layer([Sub38974,[[[0.9369, 0.391], [0.562, 0.4939], [0.314, 0.5366], [0.1383, 0.0916]]]], 2, Con18632), 
LMul55127 = multiply_layer([Zer57817,Con18632], Mul55127), 
LRes72811 = reshape_layer(Mul55127, [4, 4, 1], Res72811), 
LRes20024 = reshape_layer(Res72811, [4, 4, 1, 1], Res20024), 
LCon8742 = concatenate_layer([Res20024,[[[[[0.2506]], [[0.5428]], [[0.0326]], [[0.4182]]], [[[0.6135]], [[0.468]], [[0.4191]], [[0.8192]]], [[[0.2599]], [[0.4884]], [[0.348]], [[0.0837]]], [[[0.6928]], [[0.2418]], [[0.1826]], [[0.899]]]]]], 4, Con8742), 
LAdd57249 = add_layer([[[[[[0.2394, 0.7671]]]]], [[[[[0.6635, 0.936]]]]]], Add57249), 
LZer82269 = zero_padding3D_layer(Add57249, 3, 0, 3, 0, 0, 0, Zer82269), 
LMul72590 = multiply_layer([Con8742,Zer82269], Mul72590), 
exec_layers([LAdd95808,LRes81937,LRes16705,LZer57817,LGlo24477,LFla48612,LRes92607,LZer32830,LCon25685,LPer34385,LSub38974,LCon18632,LMul55127,LRes72811,LRes20024,LCon8742,LAdd57249,LZer82269,LMul72590],["Add95808","Res81937","Res16705","Zer57817","Glo24477","Fla48612","Res92607","Zer32830","Con25685","Per34385","Sub38974","Con18632","Mul55127","Res72811","Res20024","Con8742","Add57249","Zer82269","Mul72590"],Mul72590,"Mul72590")

Actual (Unparsed): [[[[[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.0000000, 0.0000000]]], [[[-0.0000000, 0.0000000]], [[-0.0000000, 0.0000000]], [[0.0000000, 0.0000000]], [[0.1530303, 1.5310869]]]]]

Expected (Unparsed): [[[[[-0.0,0.0]],[[-0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]]],[[[-0.0,0.0]],[[-0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]]],[[[-0.0,0.0]],[[-0.0,0.0]],[[0.0,0.0]],[[0.0,0.0]]],[[[-0.0,0.0]],[[-0.0,0.0]],[[0.0,0.0]],[[0.153030245692,1.5310869]]]]]

Actual:   [[[[[-0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]]], [[[-0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]]], [[[-0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]]], [[[-0, 0]], [[-0, 0]], [[0, 0]], [[0.1531, 1.5311]]]]]

Expected: [[[[[-0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]]], [[[-0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]]], [[[-0, 0]], [[-0, 0]], [[0, 0]], [[0, 0]]], [[[-0, 0]], [[-0, 0]], [[0, 0]], [[0.1531, 1.5311]]]]]