import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo91913 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Con47907 = tf.keras.layers.Input(shape=([3, 2]))
in0Min96916 = tf.keras.layers.Input(shape=([2, 2]))
in1Min96916 = tf.keras.layers.Input(shape=([2, 2]))
in0Con96496 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot20641 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot20641 = tf.keras.layers.Input(shape=([3, 2]))
in0Ave78444 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Con52536 = tf.keras.layers.Input(shape=([2, 1]))
in0Con31952 = tf.keras.layers.Input(shape=([1, 2]))
in0Con90546 = tf.keras.layers.Input(shape=([3, 2]))

Glo91913 = keras.layers.GlobalMaxPool3D(name = 'Glo91913', )(in0Glo91913)
Res50561 = keras.layers.Reshape((1, 1), name = 'Res50561', )(Glo91913)
Zer79661 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer79661', )(Res50561)
Con47907 = keras.layers.Concatenate(axis=2, name = 'Con47907', )([Zer79661,in0Con47907])
Min96916 = keras.layers.Minimum(name = 'Min96916', )([in0Min96916,in1Min96916])
Zer17528 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer17528', )(Min96916)
Con96496 = keras.layers.Concatenate(axis=2, name = 'Con96496', )([Zer17528,in0Con96496])
Dot20641 = keras.layers.Dot(axes=(2, 2), name = 'Dot20641', )([in0Dot20641,in1Dot20641])
Mul97663 = keras.layers.Multiply(name = 'Mul97663', )([Con96496,Dot20641])
Ave78444 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave78444', )(in0Ave78444)
Glo89403 = keras.layers.GlobalMaxPool2D(name = 'Glo89403', )(Ave78444)
Res50334 = keras.layers.Reshape((2, 1), name = 'Res50334', )(Glo89403)
Con52536 = keras.layers.Concatenate(axis=2, name = 'Con52536', )([Res50334,in0Con52536])
Con31952 = keras.layers.Conv1D(2, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con31952', )(in0Con31952)
Dot1115 = keras.layers.Dot(axes=(2, 2), name = 'Dot1115', )([Con52536,Con31952])
Zer23809 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer23809', )(Dot1115)
Con90546 = keras.layers.Concatenate(axis=2, name = 'Con90546', )([Zer23809,in0Con90546])
Add58955 = keras.layers.Add(name = 'Add58955', )([Mul97663,Con90546])
Add28517 = keras.layers.Add(name = 'Add28517', )([Con47907,Add58955])
model = tf.keras.models.Model(inputs=[in0Glo91913,in0Con47907,in0Min96916,in1Min96916,in0Con96496,in0Dot20641,in1Dot20641,in0Ave78444,in0Con52536,in0Con31952,in0Con90546], outputs=Add28517)
w = model.get_layer('Con31952').get_weights() 
w[0] = np.array([[[0.5611, 0.9967], [0.8148, 0.5171]]])
w[1] = np.array([0, 0])
model.get_layer('Con31952').set_weights(w) 
in0Glo91913 = tf.constant([[[[[1.4752]], [[1.9607]]], [[[1.7088]], [[1.2839]]]]])
in0Con47907 = tf.constant([[[0.4586, 0.3033], [0.9068, 0.7712], [0.5489, 0.7875]]])
in0Min96916 = tf.constant([[[0.5167, 0.4188], [0.7235, 0.6747]]])
in1Min96916 = tf.constant([[[0.5392, 0.4143], [0.7099, 0.2031]]])
in0Con96496 = tf.constant([[[0.3623], [0.0326], [0.8473]]])
in0Dot20641 = tf.constant([[[0.7142, 0.1738], [0.851, 0.1803], [0.0393, 0.5074]]])
in1Dot20641 = tf.constant([[[0.4312, 0.5691], [0.6068, 0.1499], [0.1266, 0.8139]]])
in0Ave78444 = tf.constant([[[[1.6682, 1.4057], [1.3724, 1.3671]], [[1.4827, 1.4433], [1.9321, 1.3224]]]])
in0Con52536 = tf.constant([[[0.7443], [0.1254]]])
in0Con31952 = tf.constant([[[0.3489, 0.6627]]])
in0Con90546 = tf.constant([[[0.4629, 0.9982], [0.2321, 0.2513], [0.1529, 0.7672]]])
print (np.array2string(model.predict([in0Glo91913,in0Con47907,in0Min96916,in1Min96916,in0Con96496,in0Dot20641,in1Dot20641,in0Ave78444,in0Con52536,in0Con31952,in0Con90546],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add28517.png')

LGlo91913 = global_max_pool3D_layer([[[[[1.4752]], [[1.9607]]], [[[1.7088]], [[1.2839]]]]], Glo91913), 
LRes50561 = reshape_layer(Glo91913, [1, 1], Res50561), 
LZer79661 = zero_padding1D_layer(Res50561, 2, 0, Zer79661), 
LCon47907 = concatenate_layer([Zer79661,[[[0.4586, 0.3033], [0.9068, 0.7712], [0.5489, 0.7875]]]], 2, Con47907), 
LMin96916 = minimum_layer([[[[0.5167, 0.4188], [0.7235, 0.6747]]], [[[0.5392, 0.4143], [0.7099, 0.2031]]]], Min96916), 
LZer17528 = zero_padding1D_layer(Min96916, 1, 0, Zer17528), 
LCon96496 = concatenate_layer([Zer17528,[[[0.3623], [0.0326], [0.8473]]]], 2, Con96496), 
LDot20641 = dot_layer([[[0.7142, 0.1738], [0.851, 0.1803], [0.0393, 0.5074]]], [[[0.4312, 0.5691], [0.6068, 0.1499], [0.1266, 0.8139]]], 2, 2, Dot20641), 
LMul97663 = multiply_layer([Con96496,Dot20641], Mul97663), 
LAve78444 = average_pooling2D_layer([[[[1.6682, 1.4057], [1.3724, 1.3671]], [[1.4827, 1.4433], [1.9321, 1.3224]]]], 1, 2, Ave78444), 
LGlo89403 = global_max_pool2D_layer(Ave78444, Glo89403), 
LRes50334 = reshape_layer(Glo89403, [2, 1], Res50334), 
LCon52536 = concatenate_layer([Res50334,[[[0.7443], [0.1254]]]], 2, Con52536), 
LCon31952 = conv1D_layer([[[0.3489, 0.6627]]], 1,[[[0.5611, 0.9967], [0.8148, 0.5171]]],[0, 0], 1, true, 1, Con31952), 
LDot1115 = dot_layer(Con52536,Con31952, 2, 2, Dot1115), 
LZer23809 = zero_padding1D_layer(Dot1115, 1, 0, Zer23809), 
LCon90546 = concatenate_layer([Zer23809,[[[0.4629, 0.9982], [0.2321, 0.2513], [0.1529, 0.7672]]]], 2, Con90546), 
LAdd58955 = add_layer([Mul97663,Con90546], Add58955), 
LAdd28517 = add_layer([Con47907,Add58955], Add28517), 
exec_layers([LGlo91913,LRes50561,LZer79661,LCon47907,LMin96916,LZer17528,LCon96496,LDot20641,LMul97663,LAve78444,LGlo89403,LRes50334,LCon52536,LCon31952,LDot1115,LZer23809,LCon90546,LAdd58955,LAdd28517],["Glo91913","Res50561","Zer79661","Con47907","Min96916","Zer17528","Con96496","Dot20641","Mul97663","Ave78444","Glo89403","Res50334","Con52536","Con31952","Dot1115","Zer23809","Con90546","Add58955","Add28517"],Add28517,"Add28517")

Actual (Unparsed): [[[0.0000000, 0.9215000, 1.3855078], [2.0127045, 1.3640363, 1.0307961], [3.2843258, 0.7220910, 1.9088275]]]

Expected (Unparsed): [[[0.0,0.9215,1.3855077835420002],[2.0127044798209996,1.364036324911,1.0307961383020001],[3.28432582037,0.7220910101500001,1.908827543752]]]

Actual:   [[[0, 0.9215, 1.3856], [2.0128, 1.3641, 1.0308], [3.2844, 0.7221, 1.9089]]]

Expected: [[[0, 0.9215, 1.3856], [2.0128, 1.3641, 1.0308], [3.2844, 0.7221, 1.9089]]]