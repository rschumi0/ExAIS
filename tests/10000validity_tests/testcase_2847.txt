import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub87509 = tf.keras.layers.Input(shape=([2]))
in1Sub87509 = tf.keras.layers.Input(shape=([2]))
in0Max49410 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Max49410 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Sub87509 = keras.layers.Subtract(name = 'Sub87509', )([in0Sub87509,in1Sub87509])
Res88689 = keras.layers.Reshape((2, 1), name = 'Res88689', )(Sub87509)
Glo74874 = keras.layers.GlobalMaxPool1D(name = 'Glo74874', )(Res88689)
Res30708 = keras.layers.Reshape((1, 1), name = 'Res30708', )(Glo74874)
Res35549 = keras.layers.Reshape((1, 1, 1), name = 'Res35549', )(Res30708)
Res15831 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res15831', )(Res35549)
Up_61882 = keras.layers.UpSampling3D(size=(1, 2, 1), name = 'Up_61882', )(Res15831)
Res29113 = keras.layers.Reshape((1, 2, 1), name = 'Res29113', )(Up_61882)
Max49410 = keras.layers.Maximum(name = 'Max49410', )([in0Max49410,in1Max49410])
Res72344 = keras.layers.Reshape((1, 2, 1), name = 'Res72344', )(Max49410)
Res46750 = keras.layers.Reshape((1, 2), name = 'Res46750', )(Res72344)
Cro52035 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro52035', )(Res46750)
Res36839 = keras.layers.Reshape((1, 2, 1), name = 'Res36839', )(Cro52035)
Max81051 = keras.layers.Maximum(name = 'Max81051', )([Res29113,Res36839])
model = tf.keras.models.Model(inputs=[in0Sub87509,in1Sub87509,in0Max49410,in1Max49410], outputs=Max81051)
in0Sub87509 = tf.constant([[0.9481, 0.1634]])
in1Sub87509 = tf.constant([[0.44, 0.2817]])
in0Max49410 = tf.constant([[[[[0.9464]], [[0.1331]]]]])
in1Max49410 = tf.constant([[[[[0.5372]], [[0.2135]]]]])
print (np.array2string(model.predict([in0Sub87509,in1Sub87509,in0Max49410,in1Max49410],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max81051.png')

LSub87509 = subtract_layer([[0.9481, 0.1634]], [[0.44, 0.2817]], Sub87509), 
LRes88689 = reshape_layer(Sub87509, [2, 1], Res88689), 
LGlo74874 = global_max_pool1D_layer(Res88689, Glo74874), 
LRes30708 = reshape_layer(Glo74874, [1, 1], Res30708), 
LRes35549 = reshape_layer(Res30708, [1, 1, 1], Res35549), 
LRes15831 = reshape_layer(Res35549, [1, 1, 1, 1], Res15831), 
LUp_61882 = up_sampling3D_layer(Res15831, 1, 2, 1, Up_61882), 
LRes29113 = reshape_layer(Up_61882, [1, 2, 1], Res29113), 
LMax49410 = maximum_layer([[[[[[0.9464]], [[0.1331]]]]], [[[[[0.5372]], [[0.2135]]]]]], Max49410), 
LRes72344 = reshape_layer(Max49410, [1, 2, 1], Res72344), 
LRes46750 = reshape_layer(Res72344, [1, 2], Res46750), 
LCro52035 = cropping1D_layer(Res46750, 0, 0, Cro52035), 
LRes36839 = reshape_layer(Cro52035, [1, 2, 1], Res36839), 
LMax81051 = maximum_layer([Res29113,Res36839], Max81051), 
exec_layers([LSub87509,LRes88689,LGlo74874,LRes30708,LRes35549,LRes15831,LUp_61882,LRes29113,LMax49410,LRes72344,LRes46750,LCro52035,LRes36839,LMax81051],["Sub87509","Res88689","Glo74874","Res30708","Res35549","Res15831","Up_61882","Res29113","Max49410","Res72344","Res46750","Cro52035","Res36839","Max81051"],Max81051,"Max81051")

Actual (Unparsed): [[[[0.9464000], [0.5081000]]]]

Expected (Unparsed): [[[[0.9464],[0.5081]]]]

Actual:   [[[[0.9464], [0.5081]]]]

Expected: [[[[0.9464], [0.5081]]]]