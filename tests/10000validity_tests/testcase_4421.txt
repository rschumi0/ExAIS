import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave71624 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave71624 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Ave17413 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave17413 = tf.keras.layers.Input(shape=([1, 2]))
in0Con62257 = tf.keras.layers.Input(shape=([2, 6]))
in0Ave72965 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave72965 = tf.keras.layers.Input(shape=([1, 2, 1]))

Ave71624 = keras.layers.Average(name = 'Ave71624', )([in0Ave71624,in1Ave71624])
Res38604 = keras.layers.Reshape((2, 2, 4), name = 'Res38604', )(Ave71624)
Res35668 = keras.layers.Reshape((2, 8), name = 'Res35668', )(Res38604)
Ave17413 = keras.layers.Average(name = 'Ave17413', )([in0Ave17413,in1Ave17413])
Zer74860 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer74860', )(Ave17413)
Con62257 = keras.layers.Concatenate(axis=2, name = 'Con62257', )([Zer74860,in0Con62257])
Max46394 = keras.layers.Maximum(name = 'Max46394', )([Res35668,Con62257])
Res34072 = keras.layers.Reshape((2, 8, 1), name = 'Res34072', )(Max46394)
Ave72965 = keras.layers.Average(name = 'Ave72965', )([in0Ave72965,in1Ave72965])
Up_84641 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_84641', )(Ave72965)
Zer68687 = keras.layers.ZeroPadding2D(padding=((1, 0), (6, 0)), name = 'Zer68687', )(Up_84641)
Sub59340 = keras.layers.Subtract(name = 'Sub59340', )([Res34072,Zer68687])
model = tf.keras.models.Model(inputs=[in0Ave71624,in1Ave71624,in0Ave17413,in1Ave17413,in0Con62257,in0Ave72965,in1Ave72965], outputs=Sub59340)
in0Ave71624 = tf.constant([[[[[0.4703, 0.8797], [0.3889, 0.0365]], [[0.3074, 0.4163], [0.8766, 0.5555]]], [[[0.1875, 0.6226], [0.9599, 0.8889]], [[0.8077, 0.3538], [0.6768, 0.6771]]]]])
in1Ave71624 = tf.constant([[[[[0.5272, 0.9294], [0.7738, 0.6699]], [[0.6113, 0.6893], [0.6349, 0.5732]]], [[[0.7438, 0.4069], [0.0934, 0.255]], [[0.3544, 0.0383], [0.0792, 0.5414]]]]])
in0Ave17413 = tf.constant([[[0.9704, 0.2061]]])
in1Ave17413 = tf.constant([[[0.0419, 0.2065]]])
in0Con62257 = tf.constant([[[0.26, 0.8308, 0.9163, 0.0392, 0.2624, 0.9404], [0.9929, 0.3942, 0.1105, 0.5127, 0.9198, 0.312]]])
in0Ave72965 = tf.constant([[[[0.3682], [0.8898]]]])
in1Ave72965 = tf.constant([[[[0.4878], [0.7883]]]])
print (np.array2string(model.predict([in0Ave71624,in1Ave71624,in0Ave17413,in1Ave17413,in0Con62257,in0Ave72965,in1Ave72965],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub59340.png')

LAve71624 = average_layer([[[[[[0.4703, 0.8797], [0.3889, 0.0365]], [[0.3074, 0.4163], [0.8766, 0.5555]]], [[[0.1875, 0.6226], [0.9599, 0.8889]], [[0.8077, 0.3538], [0.6768, 0.6771]]]]], [[[[[0.5272, 0.9294], [0.7738, 0.6699]], [[0.6113, 0.6893], [0.6349, 0.5732]]], [[[0.7438, 0.4069], [0.0934, 0.255]], [[0.3544, 0.0383], [0.0792, 0.5414]]]]]], Ave71624), 
LRes38604 = reshape_layer(Ave71624, [2, 2, 4], Res38604), 
LRes35668 = reshape_layer(Res38604, [2, 8], Res35668), 
LAve17413 = average_layer([[[[0.9704, 0.2061]]], [[[0.0419, 0.2065]]]], Ave17413), 
LZer74860 = zero_padding1D_layer(Ave17413, 1, 0, Zer74860), 
LCon62257 = concatenate_layer([Zer74860,[[[0.26, 0.8308, 0.9163, 0.0392, 0.2624, 0.9404], [0.9929, 0.3942, 0.1105, 0.5127, 0.9198, 0.312]]]], 2, Con62257), 
LMax46394 = maximum_layer([Res35668,Con62257], Max46394), 
LRes34072 = reshape_layer(Max46394, [2, 8, 1], Res34072), 
LAve72965 = average_layer([[[[[0.3682], [0.8898]]]], [[[[0.4878], [0.7883]]]]], Ave72965), 
LUp_84641 = up_sampling2D_layer(Ave72965, 1, 1, Up_84641), 
LZer68687 = zero_padding2D_layer(Up_84641, 1, 0, 6, 0, Zer68687), 
LSub59340 = subtract_layer(Res34072,Zer68687, Sub59340), 
exec_layers([LAve71624,LRes38604,LRes35668,LAve17413,LZer74860,LCon62257,LMax46394,LRes34072,LAve72965,LUp_84641,LZer68687,LSub59340],["Ave71624","Res38604","Res35668","Ave17413","Zer74860","Con62257","Max46394","Res34072","Ave72965","Up_84641","Zer68687","Sub59340"],Sub59340,"Sub59340")

Actual (Unparsed): [[[[0.4987500], [0.9045500], [0.5813500], [0.8308000], [0.9163000], [0.5528000], [0.7557500], [0.9404000]], [[0.5061500], [0.5147500], [0.9929000], [0.5719500], [0.5810500], [0.5127000], [0.4918000], [-0.2298000]]]]

Expected (Unparsed): [[[[0.49875],[0.90455],[0.58135],[0.8308],[0.9163],[0.5528],[0.75575],[0.9404]],[[0.50615],[0.51475],[0.9929],[0.57195],[0.58105],[0.5127],[0.4917999999999999],[-0.2298]]]]

Actual:   [[[[0.4988], [0.9046], [0.5814], [0.8308], [0.9163], [0.5528], [0.7558], [0.9404]], [[0.5062], [0.5148], [0.9929], [0.572], [0.5811], [0.5127], [0.4918], [-0.2298]]]]

Expected: [[[[0.4988], [0.9046], [0.5814], [0.8308], [0.9163], [0.5528], [0.7558], [0.9404]], [[0.5062], [0.5148], [0.9929], [0.572], [0.5811], [0.5127], [0.4918], [-0.2298]]]]