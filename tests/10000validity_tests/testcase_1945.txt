import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo12182 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con5402 = tf.keras.layers.Input(shape=([3, 2, 2]))
in0Loc90476 = tf.keras.layers.Input(shape=([2, 1, 1]))

Glo12182 = keras.layers.GlobalMaxPool3D(name = 'Glo12182', )(in0Glo12182)
Res91983 = keras.layers.Reshape((2, 1), name = 'Res91983', )(Glo12182)
Res3793 = keras.layers.Reshape((2, 1, 1), name = 'Res3793', )(Res91983)
Zer10018 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer10018', )(Res3793)
Con5402 = keras.layers.Concatenate(axis=3, name = 'Con5402', )([Zer10018,in0Con5402])
Loc90476 = keras.layers.LocallyConnected2D(3, (2, 1),strides=(6, 1), name = 'Loc90476', )(in0Loc90476)
Res1169 = keras.layers.Reshape((1, 1, 3, 1), name = 'Res1169', )(Loc90476)
Zer32516 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer32516', )(Res1169)
Res15909 = keras.layers.Reshape((3, 3, 5), name = 'Res15909', )(Zer32516)
Loc79764 = keras.layers.LocallyConnected2D(3, (1, 2),strides=(1, 1), name = 'Loc79764', )(Res15909)
ELU23651 = keras.layers.ELU(alpha=-6.034837041540966, name = 'ELU23651', )(Loc79764)
Max23021 = keras.layers.Maximum(name = 'Max23021', )([Con5402,ELU23651])
Res5893 = keras.layers.Reshape((3, 6), name = 'Res5893', )(Max23021)
Glo24335 = keras.layers.GlobalMaxPool1D(name = 'Glo24335', )(Res5893)
model = tf.keras.models.Model(inputs=[in0Glo12182,in0Con5402,in0Loc90476], outputs=Glo24335)
w = model.get_layer('Loc90476').get_weights() 
w[0] = np.array([[[0.6902, 0.107, 0.7553], [0.2657, 0.4839, 0.4803]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc90476').set_weights(w) 
w = model.get_layer('Loc79764').get_weights() 
w[0] = np.array([[[0.2279, 0.5822, 0.0294], [0.4852, 0.2826, 0.4327], [0.8672, 0.9119, 0.8975], [0.1997, 0.3752, 0.6471], [0.1942, 0.2033, 0.6643], [0.5237, 0.5707, 0.7728], [0.4177, 0.1968, 0.0613], [0.6769, 0.858, 0.7144], [0.6674, 0.6601, 0.258], [0.9241, 0.5991, 0.4583]], [[0.1519, 0.9517, 0.119], [0.0229, 0.9172, 0.7284], [0.2096, 0.0615, 0.197], [0.818, 0.6025, 0.4243], [0.7122, 0.6034, 0.7987], [0.3054, 0.3713, 0.2252], [0.5891, 0.7108, 0.2293], [0.5367, 0.2379, 0.1509], [0.7687, 0.7358, 0.932], [0.0557, 0.1801, 0.2685]], [[0.3202, 0.9834, 0.806], [0.0567, 0.9639, 0.2936], [0.6758, 0.0996, 0.3062], [0.5931, 0.1108, 0.0209], [0.3288, 0.9233, 0.7047], [0.189, 0.4091, 0.3588], [0.5971, 0.6257, 0.0198], [0.4104, 0.8477, 0.0357], [0.8157, 0.388, 0.8924], [0.9413, 0.3452, 0.6661]], [[0.5179, 0.0822, 0.091], [0.6174, 0.5232, 0.9585], [0.7964, 0.8329, 0.2582], [0.6338, 0.0654, 0.1282], [0.5213, 0.6901, 0.04], [0.7551, 0.8833, 0.5349], [0.5496, 0.179, 0.3599], [0.0935, 0.5065, 0.7637], [0.5002, 0.2918, 0.4772], [0.7121, 0.38, 0.6306]], [[0.2978, 0.6533, 0.6928], [0.5859, 0.3215, 0.3345], [0.1174, 0.531, 0.388], [0.9824, 0.4066, 0.3668], [0.8849, 0.0303, 0.1905], [0.0761, 0.338, 0.0728], [0.3166, 0.9678, 0.8073], [0.106, 0.6581, 0.4687], [0.9974, 0.3396, 0.7157], [0.9348, 0.3922, 0.1242]], [[0.0089, 0.1062, 0.9172], [0.8297, 0.2077, 0.5096], [0.5987, 0.8291, 0.1918], [0.3226, 0.4441, 0.0975], [0.7397, 0.9604, 0.2949], [0.3172, 0.3475, 0.9168], [0.7215, 0.797, 0.7601], [0.199, 0.1227, 0.9583], [0.1512, 0.0323, 0.0668], [0.6195, 0.537, 0.3775]]])
w[1] = np.array([[[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]]])
model.get_layer('Loc79764').set_weights(w) 
in0Glo12182 = tf.constant([[[[[1.1799, 1.0419]]]]])
in0Con5402 = tf.constant([[[[0.5711, 0.2114], [0.2664, 0.2543]], [[0.2254, 0.9515], [0.3694, 0.1239]], [[0.0882, 0.0145], [0.7832, 0.4865]]]])
in0Loc90476 = tf.constant([[[[0.5473]], [[0.0484]]]])
print (np.array2string(model.predict([in0Glo12182,in0Con5402,in0Loc90476],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo24335.png')

LGlo12182 = global_max_pool3D_layer([[[[[1.1799, 1.0419]]]]], Glo12182), 
LRes91983 = reshape_layer(Glo12182, [2, 1], Res91983), 
LRes3793 = reshape_layer(Res91983, [2, 1, 1], Res3793), 
LZer10018 = zero_padding2D_layer(Res3793, 1, 0, 1, 0, Zer10018), 
LCon5402 = concatenate_layer([Zer10018,[[[[0.5711, 0.2114], [0.2664, 0.2543]], [[0.2254, 0.9515], [0.3694, 0.1239]], [[0.0882, 0.0145], [0.7832, 0.4865]]]]], 3, Con5402), 
LLoc90476 = locally_connected2D_layer([[[[0.5473]], [[0.0484]]]], 2, 1,[[[0.6902, 0.107, 0.7553], [0.2657, 0.4839, 0.4803]]],[[[0, 0, 0]]], 6, 1, Loc90476), 
LRes1169 = reshape_layer(Loc90476, [1, 1, 3, 1], Res1169), 
LZer32516 = zero_padding3D_layer(Res1169, 1, 1, 1, 1, 1, 1, Zer32516), 
LRes15909 = reshape_layer(Zer32516, [3, 3, 5], Res15909), 
LLoc79764 = locally_connected2D_layer(Res15909, 1, 2,[[[0.2279, 0.5822, 0.0294], [0.4852, 0.2826, 0.4327], [0.8672, 0.9119, 0.8975], [0.1997, 0.3752, 0.6471], [0.1942, 0.2033, 0.6643], [0.5237, 0.5707, 0.7728], [0.4177, 0.1968, 0.0613], [0.6769, 0.858, 0.7144], [0.6674, 0.6601, 0.258], [0.9241, 0.5991, 0.4583]], [[0.1519, 0.9517, 0.119], [0.0229, 0.9172, 0.7284], [0.2096, 0.0615, 0.197], [0.818, 0.6025, 0.4243], [0.7122, 0.6034, 0.7987], [0.3054, 0.3713, 0.2252], [0.5891, 0.7108, 0.2293], [0.5367, 0.2379, 0.1509], [0.7687, 0.7358, 0.932], [0.0557, 0.1801, 0.2685]], [[0.3202, 0.9834, 0.806], [0.0567, 0.9639, 0.2936], [0.6758, 0.0996, 0.3062], [0.5931, 0.1108, 0.0209], [0.3288, 0.9233, 0.7047], [0.189, 0.4091, 0.3588], [0.5971, 0.6257, 0.0198], [0.4104, 0.8477, 0.0357], [0.8157, 0.388, 0.8924], [0.9413, 0.3452, 0.6661]], [[0.5179, 0.0822, 0.091], [0.6174, 0.5232, 0.9585], [0.7964, 0.8329, 0.2582], [0.6338, 0.0654, 0.1282], [0.5213, 0.6901, 0.04], [0.7551, 0.8833, 0.5349], [0.5496, 0.179, 0.3599], [0.0935, 0.5065, 0.7637], [0.5002, 0.2918, 0.4772], [0.7121, 0.38, 0.6306]], [[0.2978, 0.6533, 0.6928], [0.5859, 0.3215, 0.3345], [0.1174, 0.531, 0.388], [0.9824, 0.4066, 0.3668], [0.8849, 0.0303, 0.1905], [0.0761, 0.338, 0.0728], [0.3166, 0.9678, 0.8073], [0.106, 0.6581, 0.4687], [0.9974, 0.3396, 0.7157], [0.9348, 0.3922, 0.1242]], [[0.0089, 0.1062, 0.9172], [0.8297, 0.2077, 0.5096], [0.5987, 0.8291, 0.1918], [0.3226, 0.4441, 0.0975], [0.7397, 0.9604, 0.2949], [0.3172, 0.3475, 0.9168], [0.7215, 0.797, 0.7601], [0.199, 0.1227, 0.9583], [0.1512, 0.0323, 0.0668], [0.6195, 0.537, 0.3775]]],[[[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]]], 1, 1, Loc79764), 
LELU23651 = elu_layer(Loc79764, -6.034837041540966, ELU23651), 
LMax23021 = maximum_layer([Con5402,ELU23651], Max23021), 
LRes5893 = reshape_layer(Max23021, [3, 6], Res5893), 
LGlo24335 = global_max_pool1D_layer(Res5893, Glo24335), 
exec_layers([LGlo12182,LRes91983,LRes3793,LZer10018,LCon5402,LLoc90476,LRes1169,LZer32516,LRes15909,LLoc79764,LELU23651,LMax23021,LRes5893,LGlo24335],["Glo12182","Res91983","Res3793","Zer10018","Con5402","Loc90476","Res1169","Zer32516","Res15909","Loc79764","ELU23651","Max23021","Res5893","Glo24335"],Glo24335,"Glo24335")

Actual (Unparsed): [[0.6230291, 0.5711000, 0.9515000, 1.1799001, 0.7832000, 0.4865000]]

Expected (Unparsed): [[0.6230291376549999,0.5711,0.9515,1.1799,0.7832,0.4865]]

Actual:   [[0.6231, 0.5711, 0.9515, 1.18, 0.7832, 0.4865]]

Expected: [[0.6231, 0.5711, 0.9515, 1.1799, 0.7832, 0.4865]]