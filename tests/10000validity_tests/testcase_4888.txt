import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min35725 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Min35725 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Add86696 = tf.keras.layers.Input(shape=([2, 2]))
in1Add86696 = tf.keras.layers.Input(shape=([2, 2]))

Min35725 = keras.layers.Minimum(name = 'Min35725', )([in0Min35725,in1Min35725])
Res56830 = keras.layers.Reshape((1, 4), name = 'Res56830', )(Min35725)
Zer12371 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer12371', )(Res56830)
Res9172 = keras.layers.Reshape((3, 4, 1), name = 'Res9172', )(Zer12371)
Cro93080 = keras.layers.Cropping2D(cropping=((2, 0), (0, 1)), name = 'Cro93080', )(Res9172)
Res66941 = keras.layers.Reshape((1, 3), name = 'Res66941', )(Cro93080)
Add86696 = keras.layers.Add(name = 'Add86696', )([in0Add86696,in1Add86696])
Res62753 = keras.layers.Reshape((2, 2, 1), name = 'Res62753', )(Add86696)
Cro99960 = keras.layers.Cropping2D(cropping=((1, 0), (0, 1)), name = 'Cro99960', )(Res62753)
Res79331 = keras.layers.Reshape((1, 1), name = 'Res79331', )(Cro99960)
Dot76007 = keras.layers.Dot(axes=(1, 2), name = 'Dot76007', )([Res66941,Res79331])
model = tf.keras.models.Model(inputs=[in0Min35725,in1Min35725,in0Add86696,in1Add86696], outputs=Dot76007)
in0Min35725 = tf.constant([[[[0.5762, 0.5369], [0.3176, 0.1161]]]])
in1Min35725 = tf.constant([[[[0.4863, 0.7191], [0.9491, 0.0997]]]])
in0Add86696 = tf.constant([[[0.5352, 0.053], [0.1163, 0.8392]]])
in1Add86696 = tf.constant([[[0.1395, 0.2043], [0.5714, 0.8859]]])
print (np.array2string(model.predict([in0Min35725,in1Min35725,in0Add86696,in1Add86696],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot76007.png')

LMin35725 = minimum_layer([[[[[0.5762, 0.5369], [0.3176, 0.1161]]]], [[[[0.4863, 0.7191], [0.9491, 0.0997]]]]], Min35725), 
LRes56830 = reshape_layer(Min35725, [1, 4], Res56830), 
LZer12371 = zero_padding1D_layer(Res56830, 1, 1, Zer12371), 
LRes9172 = reshape_layer(Zer12371, [3, 4, 1], Res9172), 
LCro93080 = cropping2D_layer(Res9172, 2, 0, 0, 1, Cro93080), 
LRes66941 = reshape_layer(Cro93080, [1, 3], Res66941), 
LAdd86696 = add_layer([[[[0.5352, 0.053], [0.1163, 0.8392]]], [[[0.1395, 0.2043], [0.5714, 0.8859]]]], Add86696), 
LRes62753 = reshape_layer(Add86696, [2, 2, 1], Res62753), 
LCro99960 = cropping2D_layer(Res62753, 1, 0, 0, 1, Cro99960), 
LRes79331 = reshape_layer(Cro99960, [1, 1], Res79331), 
LDot76007 = dot_layer(Res66941,Res79331, 1, 2, Dot76007), 
exec_layers([LMin35725,LRes56830,LZer12371,LRes9172,LCro93080,LRes66941,LAdd86696,LRes62753,LCro99960,LRes79331,LDot76007],["Min35725","Res56830","Zer12371","Res9172","Cro93080","Res66941","Add86696","Res62753","Cro99960","Res79331","Dot76007"],Dot76007,"Dot76007")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000]]]

Expected (Unparsed): [[[0.0],[0.0],[0.0]]]

Actual:   [[[0], [0], [0]]]

Expected: [[[0], [0], [0]]]