import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max52536 = tf.keras.layers.Input(shape=([2, 2]))
in1Max52536 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub7983 = tf.keras.layers.Input(shape=([2]))
in1Sub7983 = tf.keras.layers.Input(shape=([2]))
in0Con25618 = tf.keras.layers.Input(shape=([14]))

Max52536 = keras.layers.Maximum(name = 'Max52536', )([in0Max52536,in1Max52536])
Res16504 = keras.layers.Reshape((2, 2, 1), name = 'Res16504', )(Max52536)
Zer54572 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer54572', )(Res16504)
Res38419 = keras.layers.Reshape((4, 4), name = 'Res38419', )(Zer54572)
Fla56454 = keras.layers.Flatten(name = 'Fla56454', )(Res38419)
Sub7983 = keras.layers.Subtract(name = 'Sub7983', )([in0Sub7983,in1Sub7983])
Con25618 = keras.layers.Concatenate(axis=1, name = 'Con25618', )([Sub7983,in0Con25618])
Sub7907 = keras.layers.Subtract(name = 'Sub7907', )([Fla56454,Con25618])
Res26823 = keras.layers.Reshape((16, 1), name = 'Res26823', )(Sub7907)
Glo23521 = keras.layers.GlobalAveragePooling1D(name = 'Glo23521', )(Res26823)
model = tf.keras.models.Model(inputs=[in0Max52536,in1Max52536,in0Sub7983,in1Sub7983,in0Con25618], outputs=Glo23521)
in0Max52536 = tf.constant([[[0.5462, 0.0593], [0.9571, 0.0473]]])
in1Max52536 = tf.constant([[[0.4822, 0.3631], [0.9352, 0.3839]]])
in0Sub7983 = tf.constant([[0.8639, 0.5186]])
in1Sub7983 = tf.constant([[0.4829, 0.0028]])
in0Con25618 = tf.constant([[0.5586, 0.8567, 0.5273, 0.7057, 0.5237, 0.8555, 0.2148, 0.2318, 0.0717, 0.3863, 0.2586, 0.3511, 0.0978, 0.2969]])
print (np.array2string(model.predict([in0Max52536,in1Max52536,in0Sub7983,in1Sub7983,in0Con25618],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo23521.png')

LMax52536 = maximum_layer([[[[0.5462, 0.0593], [0.9571, 0.0473]]], [[[0.4822, 0.3631], [0.9352, 0.3839]]]], Max52536), 
LRes16504 = reshape_layer(Max52536, [2, 2, 1], Res16504), 
LZer54572 = zero_padding2D_layer(Res16504, 1, 1, 1, 1, Zer54572), 
LRes38419 = reshape_layer(Zer54572, [4, 4], Res38419), 
LFla56454 = flatten_layer(Res38419, Fla56454), 
LSub7983 = subtract_layer([[0.8639, 0.5186]], [[0.4829, 0.0028]], Sub7983), 
LCon25618 = concatenate_layer([Sub7983,[[0.5586, 0.8567, 0.5273, 0.7057, 0.5237, 0.8555, 0.2148, 0.2318, 0.0717, 0.3863, 0.2586, 0.3511, 0.0978, 0.2969]]], 1, Con25618), 
LSub7907 = subtract_layer(Fla56454,Con25618, Sub7907), 
LRes26823 = reshape_layer(Sub7907, [16, 1], Res26823), 
LGlo23521 = global_average_pooling1D_layer(Res26823, Glo23521), 
exec_layers([LMax52536,LRes16504,LZer54572,LRes38419,LFla56454,LSub7983,LCon25618,LSub7907,LRes26823,LGlo23521],["Max52536","Res16504","Zer54572","Res38419","Fla56454","Sub7983","Con25618","Sub7907","Res26823","Glo23521"],Glo23521,"Glo23521")

Actual (Unparsed): [[-0.2864375]]

Expected (Unparsed): [[-0.2864375]]

Actual:   [[-0.2864]]

Expected: [[-0.2864]]