import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add98032 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add98032 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con26895 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot64503 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot64503 = tf.keras.layers.Input(shape=([3, 2]))

Add98032 = keras.layers.Add(name = 'Add98032', )([in0Add98032,in1Add98032])
Res55589 = keras.layers.Reshape((1, 2), name = 'Res55589', )(Add98032)
Zer63691 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer63691', )(Res55589)
Con26895 = keras.layers.Concatenate(axis=2, name = 'Con26895', )([Zer63691,in0Con26895])
Dot64503 = keras.layers.Dot(axes=(2, 2), name = 'Dot64503', )([in0Dot64503,in1Dot64503])
Add50759 = keras.layers.Add(name = 'Add50759', )([Con26895,Dot64503])
Ave15788 = keras.layers.AveragePooling1D(pool_size=(1), strides=(5), padding='valid', name = 'Ave15788', )(Add50759)
model = tf.keras.models.Model(inputs=[in0Add98032,in1Add98032,in0Con26895,in0Dot64503,in1Dot64503], outputs=Ave15788)
in0Add98032 = tf.constant([[[[0.922], [0.2679]]]])
in1Add98032 = tf.constant([[[[0.5487], [0.5019]]]])
in0Con26895 = tf.constant([[[0.3351], [0.1262], [0.3239]]])
in0Dot64503 = tf.constant([[[0.7582, 0.2714], [0.7736, 0.138], [0.9585, 0.3975]]])
in1Dot64503 = tf.constant([[[0.3744, 0.4095], [0.3812, 0.176], [0.4175, 0.0527]]])
print (np.array2string(model.predict([in0Add98032,in1Add98032,in0Con26895,in0Dot64503,in1Dot64503],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave15788.png')

LAdd98032 = add_layer([[[[[0.922], [0.2679]]]], [[[[0.5487], [0.5019]]]]], Add98032), 
LRes55589 = reshape_layer(Add98032, [1, 2], Res55589), 
LZer63691 = zero_padding1D_layer(Res55589, 2, 0, Zer63691), 
LCon26895 = concatenate_layer([Zer63691,[[[0.3351], [0.1262], [0.3239]]]], 2, Con26895), 
LDot64503 = dot_layer([[[0.7582, 0.2714], [0.7736, 0.138], [0.9585, 0.3975]]], [[[0.3744, 0.4095], [0.3812, 0.176], [0.4175, 0.0527]]], 2, 2, Dot64503), 
LAdd50759 = add_layer([Con26895,Dot64503], Add50759), 
LAve15788 = average_pooling1D_layer(Add50759, 1, 5, false, Ave15788), 
exec_layers([LAdd98032,LRes55589,LZer63691,LCon26895,LDot64503,LAdd50759,LAve15788],["Add98032","Res55589","Zer63691","Con26895","Dot64503","Add50759","Ave15788"],Ave15788,"Ave15788")

Actual (Unparsed): [[[0.3950084, 0.3367922, 0.6659513]]]

Expected (Unparsed): [[[0.39500838,0.33679223999999996,0.66595128]]]

Actual:   [[[0.3951, 0.3368, 0.666]]]

Expected: [[[0.3951, 0.3368, 0.666]]]