import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla51847 = tf.keras.layers.Input(shape=([2]))

Fla51847 = keras.layers.Flatten(name = 'Fla51847', )(in0Fla51847)
Res89696 = keras.layers.Reshape((2, 1), name = 'Res89696', )(Fla51847)
Res44913 = keras.layers.Reshape((2, 1, 1), name = 'Res44913', )(Res89696)
Res22445 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res22445', )(Res44913)
Con15816 = keras.layers.Conv3DTranspose(4, (2, 1, 1),strides=(2, 1, 1), padding='same', name = 'Con15816', )(Res22445)
Res26197 = keras.layers.Reshape((4, 1, 4), name = 'Res26197', )(Con15816)
Max47620 = keras.layers.MaxPool2D(pool_size=(2, 1), name = 'Max47620', )(Res26197)
Res84789 = keras.layers.Reshape((2, 4), name = 'Res84789', )(Max47620)
Con20557 = keras.layers.Conv1D(4, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con20557', )(Res84789)
model = tf.keras.models.Model(inputs=[in0Fla51847], outputs=Con20557)
w = model.get_layer('Con15816').get_weights() 
w[0] = np.array([[[[[0.892], [0.7251], [0.2289], [0.4716]]]], [[[[0.9319], [0.3295], [0.7704], [0.2623]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con15816').set_weights(w) 
w = model.get_layer('Con20557').get_weights() 
w[0] = np.array([[[0.5053, 0.486, 0.4845, 0.1932], [0.2239, 0.1388, 0.8774, 0.7342], [0.8867, 0.3812, 0.915, 0.1577], [0.965, 0.9795, 0.1373, 0.0246]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con20557').set_weights(w) 
in0Fla51847 = tf.constant([[1.8361, 1.326]])
print (np.array2string(model.predict([in0Fla51847],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con20557.png')

LFla51847 = flatten_layer([[1.8361, 1.326]], Fla51847), 
LRes89696 = reshape_layer(Fla51847, [2, 1], Res89696), 
LRes44913 = reshape_layer(Res89696, [2, 1, 1], Res44913), 
LRes22445 = reshape_layer(Res44913, [2, 1, 1, 1], Res22445), 
LCon15816 = conv3D_transpose_layer(Res22445, 2, 1, 1,[[[[[0.892], [0.7251], [0.2289], [0.4716]]]], [[[[0.9319], [0.3295], [0.7704], [0.2623]]]]],[0, 0, 0, 0], 2, 1, 1, true, Con15816), 
LRes26197 = reshape_layer(Con15816, [4, 1, 4], Res26197), 
LMax47620 = max_pool2D_layer(Res26197, 2, 1, Max47620), 
LRes84789 = reshape_layer(Max47620, [2, 4], Res84789), 
LCon20557 = conv1D_layer(Res84789, 1,[[[0.5053, 0.486, 0.4845, 0.1932], [0.2239, 0.1388, 0.8774, 0.7342], [0.8867, 0.3812, 0.915, 0.1577], [0.965, 0.9795, 0.1373, 0.0246]]],[0, 0, 0, 0], 1, true, 1, Con20557), 
exec_layers([LFla51847,LRes89696,LRes44913,LRes22445,LCon15816,LRes26197,LMax47620,LRes84789,LCon20557],["Fla51847","Res89696","Res44913","Res22445","Con15816","Res26197","Max47620","Res84789","Con20557"],Con20557,"Con20557")

Actual (Unparsed): [[[3.2525531, 2.4037412, 3.4103261, 1.5524316], [2.3489382, 1.7359408, 2.4628792, 1.1211395]]]

Expected (Unparsed): [[[3.2525531757039996,2.403741258156,3.4103261824169997,1.552431620334],[2.34893824464,1.7359408029599999,2.46287921022,1.12113955044]]]

Actual:   [[[3.2526, 2.4038, 3.4104, 1.5525], [2.349, 1.736, 2.4629, 1.1212]]]

Expected: [[[3.2526, 2.4038, 3.4104, 1.5525], [2.349, 1.736, 2.4629, 1.1212]]]