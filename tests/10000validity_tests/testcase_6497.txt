import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub20329 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Sub20329 = tf.keras.layers.Input(shape=([2, 2, 2]))

Sub20329 = keras.layers.Subtract(name = 'Sub20329', )([in0Sub20329,in1Sub20329])
Res80457 = keras.layers.Reshape((2, 4), name = 'Res80457', )(Sub20329)
Loc19220 = keras.layers.LocallyConnected1D(3, (2),strides=(11), name = 'Loc19220', )(Res80457)
Res74380 = keras.layers.Reshape((1, 3, 1), name = 'Res74380', )(Loc19220)
Res91417 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res91417', )(Res74380)
Cro31999 = keras.layers.Cropping3D(cropping=((0, 0), (2, 0), (0, 0)), name = 'Cro31999', )(Res91417)
model = tf.keras.models.Model(inputs=[in0Sub20329,in1Sub20329], outputs=Cro31999)
w = model.get_layer('Loc19220').get_weights() 
w[0] = np.array([[[0.6369, 0.5051, 0.5433], [0.5295, 0.3821, 0.3036], [0.2028, 0.9073, 0.404], [0.7511, 0.7942, 0.9675], [0.3963, 0.3873, 0.1879], [0.1391, 0.6166, 0.911], [0.5001, 0.7794, 0.3935], [0.1824, 0.5572, 0.944]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc19220').set_weights(w) 
in0Sub20329 = tf.constant([[[[0.8784, 0.9229], [0.6115, 0.5638]], [[0.1913, 0.2063], [0.3875, 0.9205]]]])
in1Sub20329 = tf.constant([[[[0.6519, 0.5657], [0.2912, 0.4558]], [[0.5706, 0.5252], [0.5121, 0.2409]]]])
print (np.array2string(model.predict([in0Sub20329,in1Sub20329],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro31999.png')

LSub20329 = subtract_layer([[[[0.8784, 0.9229], [0.6115, 0.5638]], [[0.1913, 0.2063], [0.3875, 0.9205]]]], [[[[0.6519, 0.5657], [0.2912, 0.4558]], [[0.5706, 0.5252], [0.5121, 0.2409]]]], Sub20329), 
LRes80457 = reshape_layer(Sub20329, [2, 4], Res80457), 
LLoc19220 = locally_connected1D_layer(Res80457, 2,[[[0.6369, 0.5051, 0.5433], [0.5295, 0.3821, 0.3036], [0.2028, 0.9073, 0.404], [0.7511, 0.7942, 0.9675], [0.3963, 0.3873, 0.1879], [0.1391, 0.6166, 0.911], [0.5001, 0.7794, 0.3935], [0.1824, 0.5572, 0.944]]],[[0, 0, 0]], 11, Loc19220), 
LRes74380 = reshape_layer(Loc19220, [1, 3, 1], Res74380), 
LRes91417 = reshape_layer(Res74380, [1, 3, 1, 1], Res91417), 
LCro31999 = cropping3D_layer(Res91417, 0, 0, 2, 0, 0, 0, Cro31999), 
exec_layers([LSub20329,LRes80457,LLoc19220,LRes74380,LRes91417,LCro31999],["Sub20329","Res80457","Loc19220","Res74380","Res91417","Cro31999"],Cro31999,"Cro31999")

Actual (Unparsed): [[[[[0.6961185]]]]]

Expected (Unparsed): [[[[[0.6961185]]]]]

Actual:   [[[[[0.6962]]]]]

Expected: [[[[[0.6962]]]]]