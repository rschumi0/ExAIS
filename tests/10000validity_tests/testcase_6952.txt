import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo29863 = tf.keras.layers.Input(shape=([1, 1, 2]))

Glo29863 = keras.layers.GlobalMaxPool2D(name = 'Glo29863', )(in0Glo29863)
Res22370 = keras.layers.Reshape((2, 1), name = 'Res22370', )(Glo29863)
Res96185 = keras.layers.Reshape((2, 1, 1), name = 'Res96185', )(Res22370)
Con39486 = keras.layers.Conv2D(3, (2, 1),strides=(2, 1), padding='same', dilation_rate=(1, 1), name = 'Con39486', )(Res96185)
Res77170 = keras.layers.Reshape((1, 1, 3, 1), name = 'Res77170', )(Con39486)
Up_68420 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_68420', )(Res77170)
Res79481 = keras.layers.Reshape((2, 2, 3), name = 'Res79481', )(Up_68420)
Res65888 = keras.layers.Reshape((2, 6), name = 'Res65888', )(Res79481)
Glo337 = keras.layers.GlobalAveragePooling1D(name = 'Glo337', )(Res65888)
Res65236 = keras.layers.Reshape((6, 1), name = 'Res65236', )(Glo337)
Glo99655 = keras.layers.GlobalMaxPool1D(name = 'Glo99655', )(Res65236)
model = tf.keras.models.Model(inputs=[in0Glo29863], outputs=Glo99655)
w = model.get_layer('Con39486').get_weights() 
w[0] = np.array([[[[0.7175, 0.0297, 0.9914]]], [[[0.8229, 0.2936, 0.1047]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con39486').set_weights(w) 
in0Glo29863 = tf.constant([[[[1.1265, 1.966]]]])
print (np.array2string(model.predict([in0Glo29863],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo99655.png')

LGlo29863 = global_max_pool2D_layer([[[[1.1265, 1.966]]]], Glo29863), 
LRes22370 = reshape_layer(Glo29863, [2, 1], Res22370), 
LRes96185 = reshape_layer(Res22370, [2, 1, 1], Res96185), 
LCon39486 = conv2D_layer(Res96185, 2, 1,[[[[0.7175, 0.0297, 0.9914]]], [[[0.8229, 0.2936, 0.1047]]]],[0, 0, 0], 2, 1, true, 1, 1, Con39486), 
LRes77170 = reshape_layer(Con39486, [1, 1, 3, 1], Res77170), 
LUp_68420 = up_sampling3D_layer(Res77170, 2, 2, 1, Up_68420), 
LRes79481 = reshape_layer(Up_68420, [2, 2, 3], Res79481), 
LRes65888 = reshape_layer(Res79481, [2, 6], Res65888), 
LGlo337 = global_average_pooling1D_layer(Res65888, Glo337), 
LRes65236 = reshape_layer(Glo337, [6, 1], Res65236), 
LGlo99655 = global_max_pool1D_layer(Res65236, Glo99655), 
exec_layers([LGlo29863,LRes22370,LRes96185,LCon39486,LRes77170,LUp_68420,LRes79481,LRes65888,LGlo337,LRes65236,LGlo99655],["Glo29863","Res22370","Res96185","Con39486","Res77170","Up_68420","Res79481","Res65888","Glo337","Res65236","Glo99655"],Glo99655,"Glo99655")

Actual (Unparsed): [[2.4260851]]

Expected (Unparsed): [[2.42608515]]

Actual:   [[2.4261]]

Expected: [[2.4261]]