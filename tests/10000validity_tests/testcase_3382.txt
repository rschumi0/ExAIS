import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max55051 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con67504 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Ave29761 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave29761 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Max55051 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(4, 2), padding='valid', name = 'Max55051', )(in0Max55051)
Res97591 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res97591', )(Max55051)
Con67504 = keras.layers.Concatenate(axis=4, name = 'Con67504', )([Res97591,in0Con67504])
Ave29761 = keras.layers.Average(name = 'Ave29761', )([in0Ave29761,in1Ave29761])
Max89989 = keras.layers.Maximum(name = 'Max89989', )([Con67504,Ave29761])
model = tf.keras.models.Model(inputs=[in0Max55051,in0Con67504,in0Ave29761,in1Ave29761], outputs=Max89989)
in0Max55051 = tf.constant([[[[1.753, 1.004]], [[1.4808, 1.0557]]]])
in0Con67504 = tf.constant([[[[[0.8705], [0.1916]]]]])
in0Ave29761 = tf.constant([[[[[0.4613, 0.1217], [0.1413, 0.6907]]]]])
in1Ave29761 = tf.constant([[[[[0.9681, 0.9402], [0.2207, 0.1691]]]]])
print (np.array2string(model.predict([in0Max55051,in0Con67504,in0Ave29761,in1Ave29761],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max89989.png')

LMax55051 = max_pool2D_layer([[[[1.753, 1.004]], [[1.4808, 1.0557]]]], 1, 1, 4, 2, false, Max55051), 
LRes97591 = reshape_layer(Max55051, [1, 1, 2, 1], Res97591), 
LCon67504 = concatenate_layer([Res97591,[[[[[0.8705], [0.1916]]]]]], 4, Con67504), 
LAve29761 = average_layer([[[[[[0.4613, 0.1217], [0.1413, 0.6907]]]]], [[[[[0.9681, 0.9402], [0.2207, 0.1691]]]]]], Ave29761), 
LMax89989 = maximum_layer([Con67504,Ave29761], Max89989), 
exec_layers([LMax55051,LRes97591,LCon67504,LAve29761,LMax89989],["Max55051","Res97591","Con67504","Ave29761","Max89989"],Max89989,"Max89989")

Actual (Unparsed): [[[[[1.7530000, 0.8705000], [1.0039999, 0.4299000]]]]]

Expected (Unparsed): [[[[[1.753,0.8705],[1.004,0.4299]]]]]

Actual:   [[[[[1.753, 0.8705], [1.004, 0.4299]]]]]

Expected: [[[[[1.753, 0.8705], [1.004, 0.4299]]]]]