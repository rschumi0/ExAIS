import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas92747 = tf.keras.layers.Input(shape=([4, 4, 3]))

Mas92747 = keras.layers.Masking(mask_value=2, name = 'Mas92747', )(in0Mas92747)
Res9990 = keras.layers.Reshape((4, 12), name = 'Res9990', )(Mas92747)
Cro57806 = keras.layers.Cropping1D(cropping=((2, 1)), name = 'Cro57806', )(Res9990)
Res53409 = keras.layers.Reshape((1, 12, 1), name = 'Res53409', )(Cro57806)
Sep61874 = keras.layers.SeparableConv2D(3, (1, 3),strides=(1, 1), padding='valid', name = 'Sep61874', )(Res53409)
Glo51035 = keras.layers.GlobalMaxPool2D(name = 'Glo51035', )(Sep61874)
model = tf.keras.models.Model(inputs=[in0Mas92747], outputs=Glo51035)
w = model.get_layer('Sep61874').get_weights() 
w[0] = np.array([[[[0.662]], [[0.8652]], [[0.5795]]]])
w[1] = np.array([[[[0.3969, 0.4949, 0.6013]]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep61874').set_weights(w) 
in0Mas92747 = tf.constant([[[[1.3186, 1.9448, 1.5674], [1.0123, 1.6432, 1.9995], [1.6644, 1.9603, 1.6735], [1.9237, 1.8616, 1.2552]], [[1.3399, 1.6601, 1.783], [1.0752, 1.1992, 1.6825], [1.5206, 1.2371, 1.8398], [1.9561, 1.0511, 1.9751]], [[1.5925, 1.2439, 1.5646], [1.1173, 1.9711, 1.4542], [1.3377, 1.9795, 1.813], [1.9239, 1.712, 1.5194]], [[1.6559, 1.0198, 1.202], [1.2929, 1.4942, 1.2061], [1.7481, 1.5366, 1.6872], [1.7739, 1.6567, 1.2652]]]])
print (np.array2string(model.predict([in0Mas92747],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo51035.png')

LMas92747 = masking_layer([[[[1.3186, 1.9448, 1.5674], [1.0123, 1.6432, 1.9995], [1.6644, 1.9603, 1.6735], [1.9237, 1.8616, 1.2552]], [[1.3399, 1.6601, 1.783], [1.0752, 1.1992, 1.6825], [1.5206, 1.2371, 1.8398], [1.9561, 1.0511, 1.9751]], [[1.5925, 1.2439, 1.5646], [1.1173, 1.9711, 1.4542], [1.3377, 1.9795, 1.813], [1.9239, 1.712, 1.5194]], [[1.6559, 1.0198, 1.202], [1.2929, 1.4942, 1.2061], [1.7481, 1.5366, 1.6872], [1.7739, 1.6567, 1.2652]]]], 2, Mas92747), 
LRes9990 = reshape_layer(Mas92747, [4, 12], Res9990), 
LCro57806 = cropping1D_layer(Res9990, 2, 1, Cro57806), 
LRes53409 = reshape_layer(Cro57806, [1, 12, 1], Res53409), 
LSep61874 = separable_conv2D_layer(Res53409, 1, 3,[[[[[0.662]], [[0.8652]], [[0.5795]]]],[[[[0.3969, 0.4949, 0.6013]]]]],[0, 0, 0], 1, 1, false, Sep61874), 
LGlo51035 = global_max_pool2D_layer(Sep61874, Glo51035), 
exec_layers([LMas92747,LRes9990,LCro57806,LRes53409,LSep61874,LGlo51035],["Mas92747","Res9990","Cro57806","Res53409","Sep61874","Glo51035"],Glo51035,"Glo51035")

Actual (Unparsed): [[1.5851935, 1.9765993, 2.4015541]]

Expected (Unparsed): [[1.5851934563849999,1.9765992480850003,2.4015541076449995]]

Actual:   [[1.5852, 1.9766, 2.4016]]

Expected: [[1.5852, 1.9766, 2.4016]]