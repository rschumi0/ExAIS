import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro58527 = tf.keras.layers.Input(shape=([1, 3, 4, 3]))
in0Min472 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Min472 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Cro58527 = keras.layers.Cropping3D(cropping=((0, 0), (2, 0), (0, 1)), name = 'Cro58527', )(in0Cro58527)
Res63511 = keras.layers.Reshape((1, 1, 9), name = 'Res63511', )(Cro58527)
Glo66416 = keras.layers.GlobalMaxPool2D(name = 'Glo66416', )(Res63511)
ReL58730 = keras.layers.ReLU(max_value=5.107452612393075, negative_slope=4.572312853304074, threshold=3.434464793333558, name = 'ReL58730', )(Glo66416)
Res53996 = keras.layers.Reshape((9, 1), name = 'Res53996', )(ReL58730)
Res6192 = keras.layers.Reshape((9, 1, 1), name = 'Res6192', )(Res53996)
Min472 = keras.layers.Minimum(name = 'Min472', )([in0Min472,in1Min472])
Res89093 = keras.layers.Reshape((2, 1, 1), name = 'Res89093', )(Min472)
Ave33953 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave33953', )(Res89093)
Zer54610 = keras.layers.ZeroPadding2D(padding=((7, 0), (0, 0)), name = 'Zer54610', )(Ave33953)
Ave5375 = keras.layers.Average(name = 'Ave5375', )([Res6192,Zer54610])
Res42601 = keras.layers.Reshape((9, 1, 1, 1), name = 'Res42601', )(Ave5375)
Glo56718 = keras.layers.GlobalMaxPool3D(name = 'Glo56718', )(Res42601)
model = tf.keras.models.Model(inputs=[in0Cro58527,in0Min472,in1Min472], outputs=Glo56718)
in0Cro58527 = tf.constant([[[[[1.7722, 1.477, 1.5682], [1.7651, 1.7437, 1.2531], [1.7313, 1.9255, 1.9724], [1.1424, 1.8622, 1.3012]], [[1.545, 1.5327, 1.8684], [1.0512, 1.9973, 1.2987], [1.0528, 1.5128, 1.6178], [1.2385, 1.8215, 1.0248]], [[1.8107, 1.6775, 1.9294], [1.0633, 1.6072, 1.3192], [1.3814, 1.1492, 1.3196], [1.5932, 1.3426, 1.6065]]]]])
in0Min472 = tf.constant([[[[[0.1555]]], [[[0.0759]]]]])
in1Min472 = tf.constant([[[[[0.0607]]], [[[0.5311]]]]])
print (np.array2string(model.predict([in0Cro58527,in0Min472,in1Min472],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo56718.png')

LCro58527 = cropping3D_layer([[[[[1.7722, 1.477, 1.5682], [1.7651, 1.7437, 1.2531], [1.7313, 1.9255, 1.9724], [1.1424, 1.8622, 1.3012]], [[1.545, 1.5327, 1.8684], [1.0512, 1.9973, 1.2987], [1.0528, 1.5128, 1.6178], [1.2385, 1.8215, 1.0248]], [[1.8107, 1.6775, 1.9294], [1.0633, 1.6072, 1.3192], [1.3814, 1.1492, 1.3196], [1.5932, 1.3426, 1.6065]]]]], 0, 0, 2, 0, 0, 1, Cro58527), 
LRes63511 = reshape_layer(Cro58527, [1, 1, 9], Res63511), 
LGlo66416 = global_max_pool2D_layer(Res63511, Glo66416), 
LReL58730 = relu_layer(Glo66416, 5.107452612393075, 4.572312853304074, 3.434464793333558, ReL58730), 
LRes53996 = reshape_layer(ReL58730, [9, 1], Res53996), 
LRes6192 = reshape_layer(Res53996, [9, 1, 1], Res6192), 
LMin472 = minimum_layer([[[[[[0.1555]]], [[[0.0759]]]]], [[[[[0.0607]]], [[[0.5311]]]]]], Min472), 
LRes89093 = reshape_layer(Min472, [2, 1, 1], Res89093), 
LAve33953 = average_pooling2D_layer(Res89093, 1, 1, Ave33953), 
LZer54610 = zero_padding2D_layer(Ave33953, 7, 0, 0, 0, Zer54610), 
LAve5375 = average_layer([Res6192,Zer54610], Ave5375), 
LRes42601 = reshape_layer(Ave5375, [9, 1, 1, 1], Res42601), 
LGlo56718 = global_max_pool3D_layer(Res42601, Glo56718), 
exec_layers([LCro58527,LRes63511,LGlo66416,LReL58730,LRes53996,LRes6192,LMin472,LRes89093,LAve33953,LZer54610,LAve5375,LRes42601,LGlo56718],["Cro58527","Res63511","Glo66416","ReL58730","Res53996","Res6192","Min472","Res89093","Ave33953","Zer54610","Ave5375","Res42601","Glo56718"],Glo56718,"Glo56718")

Actual (Unparsed): [[-3.4408136]]

Expected (Unparsed): [[-3.440813549807234]]

Actual:   [[-3.4408]]

Expected: [[-3.4408]]