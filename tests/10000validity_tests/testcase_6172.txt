import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot62940 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot62940 = tf.keras.layers.Input(shape=([2, 2]))
in0Con83305 = tf.keras.layers.Input(shape=([2, 2]))
in0Up_22794 = tf.keras.layers.Input(shape=([1, 4]))
in0Con88663 = tf.keras.layers.Input(shape=([2, 4, 1]))
in0Add84995 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add84995 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Max6814 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max6814 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con76266 = tf.keras.layers.Input(shape=([2, 3, 1]))

Dot62940 = keras.layers.Dot(axes=(1, 1), name = 'Dot62940', )([in0Dot62940,in1Dot62940])
Con83305 = keras.layers.Concatenate(axis=2, name = 'Con83305', )([Dot62940,in0Con83305])
Up_22794 = keras.layers.UpSampling1D(size=(1), name = 'Up_22794', )(in0Up_22794)
Zer70118 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer70118', )(Up_22794)
Min30689 = keras.layers.Minimum(name = 'Min30689', )([Con83305,Zer70118])
Res25756 = keras.layers.Reshape((2, 4, 1), name = 'Res25756', )(Min30689)
Con88663 = keras.layers.Concatenate(axis=3, name = 'Con88663', )([Res25756,in0Con88663])
Add84995 = keras.layers.Add(name = 'Add84995', )([in0Add84995,in1Add84995])
Zer89814 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer89814', )(Add84995)
Max6814 = keras.layers.Maximum(name = 'Max6814', )([in0Max6814,in1Max6814])
Zer81958 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer81958', )(Max6814)
Con76266 = keras.layers.Concatenate(axis=3, name = 'Con76266', )([Zer81958,in0Con76266])
Sub72208 = keras.layers.Subtract(name = 'Sub72208', )([Zer89814,Con76266])
Zer80335 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer80335', )(Sub72208)
Max60622 = keras.layers.Maximum(name = 'Max60622', )([Con88663,Zer80335])
model = tf.keras.models.Model(inputs=[in0Dot62940,in1Dot62940,in0Con83305,in0Up_22794,in0Con88663,in0Add84995,in1Add84995,in0Max6814,in1Max6814,in0Con76266], outputs=Max60622)
in0Dot62940 = tf.constant([[[0.7237, 0.6901], [0.4188, 0.8749]]])
in1Dot62940 = tf.constant([[[0.5637, 0.5742], [0.8105, 0.4131]]])
in0Con83305 = tf.constant([[[0.5574, 0.2972], [0.1463, 0.8881]]])
in0Up_22794 = tf.constant([[[1.6826, 1.4428, 1.0061, 1.7284]]])
in0Con88663 = tf.constant([[[[0.2914], [0.4286], [0.211], [0.7346]], [[0.6006], [0.5906], [0.1285], [0.2041]]]])
in0Add84995 = tf.constant([[[[0.5431, 0.3825]], [[0.0593, 0.5383]]]])
in1Add84995 = tf.constant([[[[0.8726, 0.7632]], [[0.6652, 0.7373]]]])
in0Max6814 = tf.constant([[[[0.1282], [0.989]]]])
in1Max6814 = tf.constant([[[[0.6721], [0.2288]]]])
in0Con76266 = tf.constant([[[[0.1879], [0.0881], [0.9855]], [[0.1388], [0.0321], [0.4405]]]])
print (np.array2string(model.predict([in0Dot62940,in1Dot62940,in0Con83305,in0Up_22794,in0Con88663,in0Add84995,in1Add84995,in0Max6814,in1Max6814,in0Con76266],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max60622.png')

LDot62940 = dot_layer([[[0.7237, 0.6901], [0.4188, 0.8749]]], [[[0.5637, 0.5742], [0.8105, 0.4131]]], 1, 1, Dot62940), 
LCon83305 = concatenate_layer([Dot62940,[[[0.5574, 0.2972], [0.1463, 0.8881]]]], 2, Con83305), 
LUp_22794 = up_sampling1D_layer([[[1.6826, 1.4428, 1.0061, 1.7284]]], 1, Up_22794), 
LZer70118 = zero_padding1D_layer(Up_22794, 1, 0, Zer70118), 
LMin30689 = minimum_layer([Con83305,Zer70118], Min30689), 
LRes25756 = reshape_layer(Min30689, [2, 4, 1], Res25756), 
LCon88663 = concatenate_layer([Res25756,[[[[0.2914], [0.4286], [0.211], [0.7346]], [[0.6006], [0.5906], [0.1285], [0.2041]]]]], 3, Con88663), 
LAdd84995 = add_layer([[[[[0.5431, 0.3825]], [[0.0593, 0.5383]]]], [[[[0.8726, 0.7632]], [[0.6652, 0.7373]]]]], Add84995), 
LZer89814 = zero_padding2D_layer(Add84995, 0, 0, 2, 0, Zer89814), 
LMax6814 = maximum_layer([[[[[0.1282], [0.989]]]], [[[[0.6721], [0.2288]]]]], Max6814), 
LZer81958 = zero_padding2D_layer(Max6814, 1, 0, 1, 0, Zer81958), 
LCon76266 = concatenate_layer([Zer81958,[[[[0.1879], [0.0881], [0.9855]], [[0.1388], [0.0321], [0.4405]]]]], 3, Con76266), 
LSub72208 = subtract_layer(Zer89814,Con76266, Sub72208), 
LZer80335 = zero_padding2D_layer(Sub72208, 0, 0, 1, 0, Zer80335), 
LMax60622 = maximum_layer([Con88663,Zer80335], Max60622), 
exec_layers([LDot62940,LCon83305,LUp_22794,LZer70118,LMin30689,LRes25756,LCon88663,LAdd84995,LZer89814,LMax6814,LZer81958,LCon76266,LSub72208,LZer80335,LMax60622],["Dot62940","Con83305","Up_22794","Zer70118","Min30689","Res25756","Con88663","Add84995","Zer89814","Max6814","Zer81958","Con76266","Sub72208","Zer80335","Max60622"],Max60622,"Max60622")

Actual (Unparsed): [[[[0.0000000, 0.2914000], [0.0000000, 0.4286000], [0.0000000, 0.2110000], [1.4157000, 0.7346000]], [[1.0981159, 0.6006000], [0.7576766, 0.5906000], [0.1463000, 0.1285000], [0.8881000, 0.8351000]]]]

Expected (Unparsed): [[[[0,0.2914],[0,0.4286],[0,0.211],[1.4157000000000002,0.7346]],[[1.09811582,0.6006],[0.7576766100000001,0.5906],[0.1463,0.1285],[0.8881,0.8350999999999998]]]]

Actual:   [[[[0, 0.2914], [0, 0.4286], [0, 0.211], [1.4157, 0.7346]], [[1.0982, 0.6006], [0.7577, 0.5906], [0.1463, 0.1285], [0.8881, 0.8351]]]]

Expected: [[[[0, 0.2914], [0, 0.4286], [0, 0.211], [1.4158, 0.7346]], [[1.0982, 0.6006], [0.7577, 0.5906], [0.1463, 0.1285], [0.8881, 0.8351]]]]