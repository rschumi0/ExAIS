import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con84085 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave63754 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Ave63754 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Con84085 = keras.layers.Conv2D(2, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con84085', )(in0Con84085)
Res64990 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res64990', )(Con84085)
Zer50884 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer50884', )(Res64990)
Ave63754 = keras.layers.Average(name = 'Ave63754', )([in0Ave63754,in1Ave63754])
Thr92898 = keras.layers.ThresholdedReLU(theta=2.6493483064347383, name = 'Thr92898', )(Ave63754)
Add77334 = keras.layers.Add(name = 'Add77334', )([Zer50884,Thr92898])
model = tf.keras.models.Model(inputs=[in0Con84085,in0Ave63754,in1Ave63754], outputs=Add77334)
w = model.get_layer('Con84085').get_weights() 
w[0] = np.array([[[[0.3156, 0.2822]]]])
w[1] = np.array([0, 0])
model.get_layer('Con84085').set_weights(w) 
in0Con84085 = tf.constant([[[[0.1141]]]])
in0Ave63754 = tf.constant([[[[[0.4511], [0.3301]]], [[[0.7213], [0.3621]]]]])
in1Ave63754 = tf.constant([[[[[0.7469], [0.3235]]], [[[0.6712], [0.1302]]]]])
print (np.array2string(model.predict([in0Con84085,in0Ave63754,in1Ave63754],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add77334.png')

LCon84085 = conv2D_layer([[[[0.1141]]]], 1, 1,[[[[0.3156, 0.2822]]]],[0, 0], 1, 1, true, 1, 1, Con84085), 
LRes64990 = reshape_layer(Con84085, [1, 1, 2, 1], Res64990), 
LZer50884 = zero_padding3D_layer(Res64990, 1, 0, 0, 0, 0, 0, Zer50884), 
LAve63754 = average_layer([[[[[[0.4511], [0.3301]]], [[[0.7213], [0.3621]]]]], [[[[[0.7469], [0.3235]]], [[[0.6712], [0.1302]]]]]], Ave63754), 
LThr92898 = thresholded_relu_layer(Ave63754, 2.6493483064347383, Thr92898), 
LAdd77334 = add_layer([Zer50884,Thr92898], Add77334), 
exec_layers([LCon84085,LRes64990,LZer50884,LAve63754,LThr92898,LAdd77334],["Con84085","Res64990","Zer50884","Ave63754","Thr92898","Add77334"],Add77334,"Add77334")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]]], [[[0.0360100], [0.0321990]]]]]

Expected (Unparsed): [[[[[0],[0]]],[[[0.036009959999999994],[0.03219902]]]]]

Actual:   [[[[[0], [0]]], [[[0.0361], [0.0322]]]]]

Expected: [[[[[0], [0]]], [[[0.0361], [0.0322]]]]]