import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul54239 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul54239 = tf.keras.layers.Input(shape=([1, 1]))
in0Con77878 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Min42118 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min42118 = tf.keras.layers.Input(shape=([1, 1, 2]))

Mul54239 = keras.layers.Multiply(name = 'Mul54239', )([in0Mul54239,in1Mul54239])
Per79791 = keras.layers.Permute((1,2), name = 'Per79791',)(Mul54239)
Res76534 = keras.layers.Reshape((1, 1, 1), name = 'Res76534', )(Per79791)
Con77878 = keras.layers.Concatenate(axis=3, name = 'Con77878', )([Res76534,in0Con77878])
Min42118 = keras.layers.Minimum(name = 'Min42118', )([in0Min42118,in1Min42118])
Min89821 = keras.layers.Minimum(name = 'Min89821', )([Con77878,Min42118])
model = tf.keras.models.Model(inputs=[in0Mul54239,in1Mul54239,in0Con77878,in0Min42118,in1Min42118], outputs=Min89821)
in0Mul54239 = tf.constant([[[0.238]]])
in1Mul54239 = tf.constant([[[0.1407]]])
in0Con77878 = tf.constant([[[[0.8483]]]])
in0Min42118 = tf.constant([[[[0.9061, 0.6669]]]])
in1Min42118 = tf.constant([[[[0.5883, 0.6699]]]])
print (np.array2string(model.predict([in0Mul54239,in1Mul54239,in0Con77878,in0Min42118,in1Min42118],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min89821.png')

LMul54239 = multiply_layer([[[[0.238]]], [[[0.1407]]]], Mul54239), 
LPer79791 = permute_layer(Mul54239, 1,2, Per79791), 
LRes76534 = reshape_layer(Per79791, [1, 1, 1], Res76534), 
LCon77878 = concatenate_layer([Res76534,[[[[0.8483]]]]], 3, Con77878), 
LMin42118 = minimum_layer([[[[[0.9061, 0.6669]]]], [[[[0.5883, 0.6699]]]]], Min42118), 
LMin89821 = minimum_layer([Con77878,Min42118], Min89821), 
exec_layers([LMul54239,LPer79791,LRes76534,LCon77878,LMin42118,LMin89821],["Mul54239","Per79791","Res76534","Con77878","Min42118","Min89821"],Min89821,"Min89821")

Actual (Unparsed): [[[[0.0334866, 0.6669000]]]]

Expected (Unparsed): [[[[0.0334866,0.6669]]]]

Actual:   [[[[0.0335, 0.6669]]]]

Expected: [[[[0.0335, 0.6669]]]]