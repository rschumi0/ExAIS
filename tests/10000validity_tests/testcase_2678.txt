import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min59224 = tf.keras.layers.Input(shape=([1, 2]))
in1Min59224 = tf.keras.layers.Input(shape=([1, 2]))
in0Con49880 = tf.keras.layers.Input(shape=([3, 1]))
in0Mas44106 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0Mul63024 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul63024 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con27909 = tf.keras.layers.Input(shape=([3, 1]))
in0Ave2773 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave2773 = tf.keras.layers.Input(shape=([1, 1, 1]))

Min59224 = keras.layers.Minimum(name = 'Min59224', )([in0Min59224,in1Min59224])
Cro6318 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro6318', )(Min59224)
Zer55429 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer55429', )(Cro6318)
Con49880 = keras.layers.Concatenate(axis=2, name = 'Con49880', )([Zer55429,in0Con49880])
Mas44106 = keras.layers.Masking(mask_value=2, name = 'Mas44106', )(in0Mas44106)
Res50968 = keras.layers.Reshape((3, 2), name = 'Res50968', )(Mas44106)
Loc91086 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc91086', )(Res50968)
Ave54698 = keras.layers.Average(name = 'Ave54698', )([Con49880,Loc91086])
Mul63024 = keras.layers.Multiply(name = 'Mul63024', )([in0Mul63024,in1Mul63024])
Res59210 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res59210', )(Mul63024)
Con84792 = keras.layers.Conv3D(3, (1, 1, 2),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con84792', )(Res59210)
Res23458 = keras.layers.Reshape((1, 1, 6), name = 'Res23458', )(Con84792)
Res85312 = keras.layers.Reshape((1, 6), name = 'Res85312', )(Res23458)
Sep44012 = keras.layers.SeparableConv1D(2, (1),strides=(1), padding='same', name = 'Sep44012', )(Res85312)
Zer43944 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer43944', )(Sep44012)
Con27909 = keras.layers.Concatenate(axis=2, name = 'Con27909', )([Zer43944,in0Con27909])
Max45567 = keras.layers.Maximum(name = 'Max45567', )([Ave54698,Con27909])
Res86612 = keras.layers.Reshape((3, 3, 1), name = 'Res86612', )(Max45567)
Ave2773 = keras.layers.Average(name = 'Ave2773', )([in0Ave2773,in1Ave2773])
Zer50763 = keras.layers.ZeroPadding2D(padding=((2, 0), (2, 0)), name = 'Zer50763', )(Ave2773)
Add26517 = keras.layers.Add(name = 'Add26517', )([Res86612,Zer50763])
model = tf.keras.models.Model(inputs=[in0Min59224,in1Min59224,in0Con49880,in0Mas44106,in0Mul63024,in1Mul63024,in0Con27909,in0Ave2773,in1Ave2773], outputs=Add26517)
w = model.get_layer('Loc91086').get_weights() 
w[0] = np.array([[[0.3338, 0.8312, 0.3009], [0.1229, 0.2362, 0.2531]], [[0.7863, 0.5059, 0.4403], [0.222, 0.8945, 0.7496]], [[0.769, 0.7405, 0.3136], [0.8265, 0.8113, 0.8612]]])
w[1] = np.array([[0, 0, 0], [0, 0, 0], [0, 0, 0]])
model.get_layer('Loc91086').set_weights(w) 
w = model.get_layer('Con84792').get_weights() 
w[0] = np.array([[[[[0.169, 0.239, 0.9079]], [[0.8518, 0.5802, 0.1303]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con84792').set_weights(w) 
w = model.get_layer('Sep44012').get_weights() 
w[0] = np.array([[[0.6142], [0.9477], [0.4026], [0.8821], [0.7956], [0.516]]])
w[1] = np.array([[[0.54, 0.9718], [0.6987, 0.1642], [0.4209, 0.2359], [0.0984, 0.1471], [0.2909, 0.5662], [0.5852, 0.0498]]])
w[2] = np.array([0, 0])
model.get_layer('Sep44012').set_weights(w) 
in0Min59224 = tf.constant([[[0.2837, 0.0111]]])
in1Min59224 = tf.constant([[[0.1586, 0.8732]]])
in0Con49880 = tf.constant([[[0.332], [0.5767], [0.3956]]])
in0Mas44106 = tf.constant([[[[1.8122], [1.2633]], [[1.402], [1.0611]], [[1.4682], [1.6267]]]])
in0Mul63024 = tf.constant([[[[0.2462, 0.4217]]]])
in1Mul63024 = tf.constant([[[[0.0067, 0.7519]]]])
in0Con27909 = tf.constant([[[0.2676], [0.437], [0.7117]]])
in0Ave2773 = tf.constant([[[[0.7052]]]])
in1Ave2773 = tf.constant([[[[0.3376]]]])
print (np.array2string(model.predict([in0Min59224,in1Min59224,in0Con49880,in0Mas44106,in0Mul63024,in1Mul63024,in0Con27909,in0Ave2773,in1Ave2773],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add26517.png')

LMin59224 = minimum_layer([[[[0.2837, 0.0111]]], [[[0.1586, 0.8732]]]], Min59224), 
LCro6318 = cropping1D_layer(Min59224, 0, 0, Cro6318), 
LZer55429 = zero_padding1D_layer(Cro6318, 2, 0, Zer55429), 
LCon49880 = concatenate_layer([Zer55429,[[[0.332], [0.5767], [0.3956]]]], 2, Con49880), 
LMas44106 = masking_layer([[[[1.8122], [1.2633]], [[1.402], [1.0611]], [[1.4682], [1.6267]]]], 2, Mas44106), 
LRes50968 = reshape_layer(Mas44106, [3, 2], Res50968), 
LLoc91086 = locally_connected1D_layer(Res50968, 1,[[[0.3338, 0.8312, 0.3009], [0.1229, 0.2362, 0.2531]], [[0.7863, 0.5059, 0.4403], [0.222, 0.8945, 0.7496]], [[0.769, 0.7405, 0.3136], [0.8265, 0.8113, 0.8612]]],[[0, 0, 0], [0, 0, 0], [0, 0, 0]], 1, Loc91086), 
LAve54698 = average_layer([Con49880,Loc91086], Ave54698), 
LMul63024 = multiply_layer([[[[[0.2462, 0.4217]]]], [[[[0.0067, 0.7519]]]]], Mul63024), 
LRes59210 = reshape_layer(Mul63024, [1, 1, 2, 1], Res59210), 
LCon84792 = conv3D_layer(Res59210, 1, 1, 2,[[[[[0.169, 0.239, 0.9079]], [[0.8518, 0.5802, 0.1303]]]]],[0, 0, 0], 1, 1, 1, true, 1, 1, 1, Con84792), 
LRes23458 = reshape_layer(Con84792, [1, 1, 6], Res23458), 
LRes85312 = reshape_layer(Res23458, [1, 6], Res85312), 
LSep44012 = separable_conv1D_layer(Res85312, 1,[[[[0.6142], [0.9477], [0.4026], [0.8821], [0.7956], [0.516]]],[[[0.54, 0.9718], [0.6987, 0.1642], [0.4209, 0.2359], [0.0984, 0.1471], [0.2909, 0.5662], [0.5852, 0.0498]]]],[0, 0], 1, true, Sep44012), 
LZer43944 = zero_padding1D_layer(Sep44012, 2, 0, Zer43944), 
LCon27909 = concatenate_layer([Zer43944,[[[0.2676], [0.437], [0.7117]]]], 2, Con27909), 
LMax45567 = maximum_layer([Ave54698,Con27909], Max45567), 
LRes86612 = reshape_layer(Max45567, [3, 3, 1], Res86612), 
LAve2773 = average_layer([[[[[0.7052]]]], [[[[0.3376]]]]], Ave2773), 
LZer50763 = zero_padding2D_layer(Ave2773, 2, 0, 2, 0, Zer50763), 
LAdd26517 = add_layer([Res86612,Zer50763], Add26517), 
exec_layers([LMin59224,LCro6318,LZer55429,LCon49880,LMas44106,LRes50968,LLoc91086,LAve54698,LMul63024,LRes59210,LCon84792,LRes23458,LRes85312,LSep44012,LZer43944,LCon27909,LMax45567,LRes86612,LAve2773,LZer50763,LAdd26517],["Min59224","Cro6318","Zer55429","Con49880","Mas44106","Res50968","Loc91086","Ave54698","Mul63024","Res59210","Con84792","Res23458","Res85312","Sep44012","Zer43944","Con27909","Max45567","Res86612","Ave2773","Zer50763","Add26517"],Add26517,"Add26517")

Actual (Unparsed): [[[[0.3800860], [0.9023460], [0.5985161]], [[0.6689784], [0.8292129], [0.9947006]], [[1.3160567], [1.2090219], [1.6498708]]]]

Expected (Unparsed): [[[[0.380085965],[0.90234605],[0.598516105]],[[0.6689784],[0.829212875],[0.9947005800000001]],[[1.316056675],[1.209021905],[1.64987078]]]]

Actual:   [[[[0.3801], [0.9024], [0.5986]], [[0.669], [0.8293], [0.9948]], [[1.3161], [1.2091], [1.6499]]]]

Expected: [[[[0.3801], [0.9024], [0.5986]], [[0.669], [0.8293], [0.9948]], [[1.3161], [1.2091], [1.6499]]]]