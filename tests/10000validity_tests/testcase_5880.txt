import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max61421 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot82605 = tf.keras.layers.Input(shape=([2]))
in1Dot82605 = tf.keras.layers.Input(shape=([2]))
in0Con34482 = tf.keras.layers.Input(shape=([1]))

Max61421 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max61421', )(in0Max61421)
Res22809 = keras.layers.Reshape((2, 2, 1), name = 'Res22809', )(Max61421)
Cro60889 = keras.layers.Cropping2D(cropping=((0, 0), (1, 0)), name = 'Cro60889', )(Res22809)
Res92624 = keras.layers.Reshape((2, 1), name = 'Res92624', )(Cro60889)
Fla94493 = keras.layers.Flatten(name = 'Fla94493', )(Res92624)
Dot82605 = keras.layers.Dot(axes=(1, 1), name = 'Dot82605', )([in0Dot82605,in1Dot82605])
Con34482 = keras.layers.Concatenate(axis=1, name = 'Con34482', )([Dot82605,in0Con34482])
Mul90130 = keras.layers.Multiply(name = 'Mul90130', )([Fla94493,Con34482])
Res3323 = keras.layers.Reshape((2, 1), name = 'Res3323', )(Mul90130)
Max59632 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max59632', )(Res3323)
model = tf.keras.models.Model(inputs=[in0Max61421,in0Dot82605,in1Dot82605,in0Con34482], outputs=Max59632)
in0Max61421 = tf.constant([[[1.0596, 1.4658], [1.2627, 1.6107]]])
in0Dot82605 = tf.constant([[0.174, 0.7241]])
in1Dot82605 = tf.constant([[0.182, 0.6131]])
in0Con34482 = tf.constant([[0.0436]])
print (np.array2string(model.predict([in0Max61421,in0Dot82605,in1Dot82605,in0Con34482],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max59632.png')

LMax61421 = max_pool1D_layer([[[1.0596, 1.4658], [1.2627, 1.6107]]], 1, 1, true, Max61421), 
LRes22809 = reshape_layer(Max61421, [2, 2, 1], Res22809), 
LCro60889 = cropping2D_layer(Res22809, 0, 0, 1, 0, Cro60889), 
LRes92624 = reshape_layer(Cro60889, [2, 1], Res92624), 
LFla94493 = flatten_layer(Res92624, Fla94493), 
LDot82605 = dot_layer([[0.174, 0.7241]], [[0.182, 0.6131]], 1, 1, Dot82605), 
LCon34482 = concatenate_layer([Dot82605,[[0.0436]]], 1, Con34482), 
LMul90130 = multiply_layer([Fla94493,Con34482], Mul90130), 
LRes3323 = reshape_layer(Mul90130, [2, 1], Res3323), 
LMax59632 = max_pool1D_layer(Res3323, 1, 1, true, Max59632), 
exec_layers([LMax61421,LRes22809,LCro60889,LRes92624,LFla94493,LDot82605,LCon34482,LMul90130,LRes3323,LMax59632],["Max61421","Res22809","Cro60889","Res92624","Fla94493","Dot82605","Con34482","Mul90130","Res3323","Max59632"],Max59632,"Max59632")

Actual (Unparsed): [[[0.6971546], [0.0702265]]]

Expected (Unparsed): [[[0.6971545761179999],[0.07022652]]]

Actual:   [[[0.6972], [0.0703]]]

Expected: [[[0.6972], [0.0703]]]