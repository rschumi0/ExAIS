import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave65414 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Ave65414 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Glo48951 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Con64004 = tf.keras.layers.Input(shape=([15]))

Ave65414 = keras.layers.Average(name = 'Ave65414', )([in0Ave65414,in1Ave65414])
Res51009 = keras.layers.Reshape((2, 2, 4), name = 'Res51009', )(Ave65414)
Res94371 = keras.layers.Reshape((2, 8), name = 'Res94371', )(Res51009)
Fla73694 = keras.layers.Flatten(name = 'Fla73694', )(Res94371)
Glo48951 = keras.layers.GlobalMaxPool3D(name = 'Glo48951', )(in0Glo48951)
Con64004 = keras.layers.Concatenate(axis=1, name = 'Con64004', )([Glo48951,in0Con64004])
Ave17672 = keras.layers.Average(name = 'Ave17672', )([Fla73694,Con64004])
ELU72513 = keras.layers.ELU(alpha=1.8752788517441097, name = 'ELU72513', )(Ave17672)
model = tf.keras.models.Model(inputs=[in0Ave65414,in1Ave65414,in0Glo48951,in0Con64004], outputs=ELU72513)
in0Ave65414 = tf.constant([[[[[0.0191, 0.6885], [0.3007, 0.1274]], [[0.4017, 0.0787], [0.1179, 0.4712]]], [[[0.5577, 0.5648], [0.1324, 0.7796]], [[0.3089, 0.4985], [0.814, 0.8995]]]]])
in1Ave65414 = tf.constant([[[[[0.9464, 0.4093], [0.1622, 0.5718]], [[0.9065, 0.1638], [0.4209, 0.9653]]], [[[0.7529, 0.1428], [0.6069, 0.2159]], [[0.8326, 0.7695], [0.9565, 0.715]]]]])
in0Glo48951 = tf.constant([[[[[1.0738], [1.9905]], [[1.8821], [1.1757]]], [[[1.5302], [1.8592]], [[1.0602], [1.5669]]]]])
in0Con64004 = tf.constant([[0.0963, 0.3922, 0.9016, 0.2864, 0.2727, 0.0064, 0.6202, 0.6253, 0.2692, 0.1004, 0.1667, 0.3182, 0.0083, 0.612, 0.9035]])
print (np.array2string(model.predict([in0Ave65414,in1Ave65414,in0Glo48951,in0Con64004],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ELU72513.png')

LAve65414 = average_layer([[[[[[0.0191, 0.6885], [0.3007, 0.1274]], [[0.4017, 0.0787], [0.1179, 0.4712]]], [[[0.5577, 0.5648], [0.1324, 0.7796]], [[0.3089, 0.4985], [0.814, 0.8995]]]]], [[[[[0.9464, 0.4093], [0.1622, 0.5718]], [[0.9065, 0.1638], [0.4209, 0.9653]]], [[[0.7529, 0.1428], [0.6069, 0.2159]], [[0.8326, 0.7695], [0.9565, 0.715]]]]]], Ave65414), 
LRes51009 = reshape_layer(Ave65414, [2, 2, 4], Res51009), 
LRes94371 = reshape_layer(Res51009, [2, 8], Res94371), 
LFla73694 = flatten_layer(Res94371, Fla73694), 
LGlo48951 = global_max_pool3D_layer([[[[[1.0738], [1.9905]], [[1.8821], [1.1757]]], [[[1.5302], [1.8592]], [[1.0602], [1.5669]]]]], Glo48951), 
LCon64004 = concatenate_layer([Glo48951,[[0.0963, 0.3922, 0.9016, 0.2864, 0.2727, 0.0064, 0.6202, 0.6253, 0.2692, 0.1004, 0.1667, 0.3182, 0.0083, 0.612, 0.9035]]], 1, Con64004), 
LAve17672 = average_layer([Fla73694,Con64004], Ave17672), 
LELU72513 = elu_layer(Ave17672, 1.8752788517441097, ELU72513), 
exec_layers([LAve65414,LRes51009,LRes94371,LFla73694,LGlo48951,LCon64004,LAve17672,LELU72513],["Ave65414","Res51009","Res94371","Fla73694","Glo48951","Con64004","Ave17672","ELU72513"],ELU72513,"ELU72513")

Actual (Unparsed): [[1.2366250, 0.3226000, 0.3118250, 0.6256000, 0.4702500, 0.1969750, 0.1379000, 0.6692250, 0.6403000, 0.3115000, 0.2350250, 0.3322250, 0.4444750, 0.3211500, 0.7486250, 0.8553750]]

Expected (Unparsed): [[1.236625,0.3226,0.311825,0.6255999999999999,0.47025,0.196975,0.1379,0.669225,0.6403,0.3115,0.23502499999999998,0.332225,0.44447499999999995,0.32115,0.748625,0.855375]]

Actual:   [[1.2367, 0.3226, 0.3119, 0.6256, 0.4703, 0.197, 0.1379, 0.6693, 0.6403, 0.3115, 0.2351, 0.3323, 0.4445, 0.3212, 0.7487, 0.8554]]

Expected: [[1.2367, 0.3226, 0.3119, 0.6256, 0.4703, 0.197, 0.1379, 0.6693, 0.6403, 0.3115, 0.2351, 0.3323, 0.4445, 0.3212, 0.7487, 0.8554]]