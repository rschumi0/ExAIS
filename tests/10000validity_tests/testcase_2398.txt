import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul9774 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Mul9774 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Max72027 = tf.keras.layers.Input(shape=([1, 2]))
in1Max72027 = tf.keras.layers.Input(shape=([1, 2]))
in0Dot60471 = tf.keras.layers.Input(shape=([3]))
in1Dot60471 = tf.keras.layers.Input(shape=([3]))
in0Con21829 = tf.keras.layers.Input(shape=([1]))
in0Con26294 = tf.keras.layers.Input(shape=([2, 1]))
in0Dot46252 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot46252 = tf.keras.layers.Input(shape=([3, 2]))

Mul9774 = keras.layers.Multiply(name = 'Mul9774', )([in0Mul9774,in1Mul9774])
Res3260 = keras.layers.Reshape((1, 1, 2), name = 'Res3260', )(Mul9774)
Res58971 = keras.layers.Reshape((1, 2), name = 'Res58971', )(Res3260)
Max72027 = keras.layers.Maximum(name = 'Max72027', )([in0Max72027,in1Max72027])
Max60430 = keras.layers.Maximum(name = 'Max60430', )([Res58971,Max72027])
Fla92761 = keras.layers.Flatten(name = 'Fla92761', )(Max60430)
Dot60471 = keras.layers.Dot(axes=(1, 1), name = 'Dot60471', )([in0Dot60471,in1Dot60471])
Con21829 = keras.layers.Concatenate(axis=1, name = 'Con21829', )([Dot60471,in0Con21829])
Sub85704 = keras.layers.Subtract(name = 'Sub85704', )([Fla92761,Con21829])
Res93577 = keras.layers.Reshape((2, 1), name = 'Res93577', )(Sub85704)
Con26294 = keras.layers.Concatenate(axis=2, name = 'Con26294', )([Res93577,in0Con26294])
Dot46252 = keras.layers.Dot(axes=(1, 1), name = 'Dot46252', )([in0Dot46252,in1Dot46252])
Cro34706 = keras.layers.Cropping1D(cropping=((0, 1)), name = 'Cro34706', )(Dot46252)
Zer33654 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer33654', )(Cro34706)
Max48191 = keras.layers.Maximum(name = 'Max48191', )([Con26294,Zer33654])
model = tf.keras.models.Model(inputs=[in0Mul9774,in1Mul9774,in0Max72027,in1Max72027,in0Dot60471,in1Dot60471,in0Con21829,in0Con26294,in0Dot46252,in1Dot46252], outputs=Max48191)
in0Mul9774 = tf.constant([[[[[0.3229], [0.406]]]]])
in1Mul9774 = tf.constant([[[[[0.8861], [0.9061]]]]])
in0Max72027 = tf.constant([[[0.7145, 0.9436]]])
in1Max72027 = tf.constant([[[0.4356, 0.0145]]])
in0Dot60471 = tf.constant([[0.9837, 0.434, 0.8574]])
in1Dot60471 = tf.constant([[0.6406, 0.3929, 0.2379]])
in0Con21829 = tf.constant([[0.4717]])
in0Con26294 = tf.constant([[[0.6129], [0.3788]]])
in0Dot46252 = tf.constant([[[0.0151, 0.0538], [0.282, 0.0985], [0.4289, 0.3446]]])
in1Dot46252 = tf.constant([[[0.0201, 0.7028], [0.7412, 0.5231], [0.568, 0.9139]]])
print (np.array2string(model.predict([in0Mul9774,in1Mul9774,in0Max72027,in1Max72027,in0Dot60471,in1Dot60471,in0Con21829,in0Con26294,in0Dot46252,in1Dot46252],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max48191.png')

LMul9774 = multiply_layer([[[[[[0.3229], [0.406]]]]], [[[[[0.8861], [0.9061]]]]]], Mul9774), 
LRes3260 = reshape_layer(Mul9774, [1, 1, 2], Res3260), 
LRes58971 = reshape_layer(Res3260, [1, 2], Res58971), 
LMax72027 = maximum_layer([[[[0.7145, 0.9436]]], [[[0.4356, 0.0145]]]], Max72027), 
LMax60430 = maximum_layer([Res58971,Max72027], Max60430), 
LFla92761 = flatten_layer(Max60430, Fla92761), 
LDot60471 = dot_layer([[0.9837, 0.434, 0.8574]], [[0.6406, 0.3929, 0.2379]], 1, 1, Dot60471), 
LCon21829 = concatenate_layer([Dot60471,[[0.4717]]], 1, Con21829), 
LSub85704 = subtract_layer(Fla92761,Con21829, Sub85704), 
LRes93577 = reshape_layer(Sub85704, [2, 1], Res93577), 
LCon26294 = concatenate_layer([Res93577,[[[0.6129], [0.3788]]]], 2, Con26294), 
LDot46252 = dot_layer([[[0.0151, 0.0538], [0.282, 0.0985], [0.4289, 0.3446]]], [[[0.0201, 0.7028], [0.7412, 0.5231], [0.568, 0.9139]]], 1, 1, Dot46252), 
LCro34706 = cropping1D_layer(Dot46252, 0, 1, Cro34706), 
LZer33654 = zero_padding1D_layer(Cro34706, 1, 0, Zer33654), 
LMax48191 = maximum_layer([Con26294,Zer33654], Max48191), 
exec_layers([LMul9774,LRes3260,LRes58971,LMax72027,LMax60430,LFla92761,LDot60471,LCon21829,LSub85704,LRes93577,LCon26294,LDot46252,LCro34706,LZer33654,LMax48191],["Mul9774","Res3260","Res58971","Max72027","Max60430","Fla92761","Dot60471","Con21829","Sub85704","Res93577","Con26294","Dot46252","Cro34706","Zer33654","Max48191"],Max48191,"Max48191")

Actual (Unparsed): [[[0.0000000, 0.6129000], [0.4719000, 0.5500982]]]

Expected (Unparsed): [[[0,0.6129],[0.4719,0.55009819]]]

Actual:   [[[0, 0.6129], [0.4719, 0.5501]]]

Expected: [[[0, 0.6129], [0.4719, 0.5501]]]