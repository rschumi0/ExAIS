import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo57068 = tf.keras.layers.Input(shape=([2, 1]))
in0Con59006 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Min65328 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min65328 = tf.keras.layers.Input(shape=([2, 1, 2]))

Glo57068 = keras.layers.GlobalMaxPool1D(name = 'Glo57068', )(in0Glo57068)
Res76000 = keras.layers.Reshape((1, 1), name = 'Res76000', )(Glo57068)
Cro41082 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro41082', )(Res76000)
Res29016 = keras.layers.Reshape((1, 1, 1), name = 'Res29016', )(Cro41082)
Res92453 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res92453', )(Res29016)
Glo77355 = keras.layers.GlobalMaxPool3D(name = 'Glo77355', )(Res92453)
Res90825 = keras.layers.Reshape((1, 1), name = 'Res90825', )(Glo77355)
Res65830 = keras.layers.Reshape((1, 1, 1), name = 'Res65830', )(Res90825)
Zer19037 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer19037', )(Res65830)
Con59006 = keras.layers.Concatenate(axis=3, name = 'Con59006', )([Zer19037,in0Con59006])
Min65328 = keras.layers.Minimum(name = 'Min65328', )([in0Min65328,in1Min65328])
Mul64397 = keras.layers.Multiply(name = 'Mul64397', )([Con59006,Min65328])
model = tf.keras.models.Model(inputs=[in0Glo57068,in0Con59006,in0Min65328,in1Min65328], outputs=Mul64397)
in0Glo57068 = tf.constant([[[1.8253], [1.6862]]])
in0Con59006 = tf.constant([[[[0.1454]], [[0.9504]]]])
in0Min65328 = tf.constant([[[[0.1721, 0.8783]], [[0.8106, 0.5112]]]])
in1Min65328 = tf.constant([[[[0.5447, 0.2328]], [[0.6859, 0.8703]]]])
print (np.array2string(model.predict([in0Glo57068,in0Con59006,in0Min65328,in1Min65328],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul64397.png')

LGlo57068 = global_max_pool1D_layer([[[1.8253], [1.6862]]], Glo57068), 
LRes76000 = reshape_layer(Glo57068, [1, 1], Res76000), 
LCro41082 = cropping1D_layer(Res76000, 0, 0, Cro41082), 
LRes29016 = reshape_layer(Cro41082, [1, 1, 1], Res29016), 
LRes92453 = reshape_layer(Res29016, [1, 1, 1, 1], Res92453), 
LGlo77355 = global_max_pool3D_layer(Res92453, Glo77355), 
LRes90825 = reshape_layer(Glo77355, [1, 1], Res90825), 
LRes65830 = reshape_layer(Res90825, [1, 1, 1], Res65830), 
LZer19037 = zero_padding2D_layer(Res65830, 1, 0, 0, 0, Zer19037), 
LCon59006 = concatenate_layer([Zer19037,[[[[0.1454]], [[0.9504]]]]], 3, Con59006), 
LMin65328 = minimum_layer([[[[[0.1721, 0.8783]], [[0.8106, 0.5112]]]], [[[[0.5447, 0.2328]], [[0.6859, 0.8703]]]]], Min65328), 
LMul64397 = multiply_layer([Con59006,Min65328], Mul64397), 
exec_layers([LGlo57068,LRes76000,LCro41082,LRes29016,LRes92453,LGlo77355,LRes90825,LRes65830,LZer19037,LCon59006,LMin65328,LMul64397],["Glo57068","Res76000","Cro41082","Res29016","Res92453","Glo77355","Res90825","Res65830","Zer19037","Con59006","Min65328","Mul64397"],Mul64397,"Mul64397")

Actual (Unparsed): [[[[0.0000000, 0.0338491]], [[1.2519732, 0.4858445]]]]

Expected (Unparsed): [[[[0.0,0.03384912]],[[1.25197327,0.48584448]]]]

Actual:   [[[[0, 0.0339]], [[1.252, 0.4859]]]]

Expected: [[[[0, 0.0339]], [[1.252, 0.4859]]]]