import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave41374 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave41374 = tf.keras.layers.Input(shape=([2, 1]))
in0Add63972 = tf.keras.layers.Input(shape=([2, 1]))
in1Add63972 = tf.keras.layers.Input(shape=([2, 1]))

Ave41374 = keras.layers.Average(name = 'Ave41374', )([in0Ave41374,in1Ave41374])
Add63972 = keras.layers.Add(name = 'Add63972', )([in0Add63972,in1Add63972])
Ave96950 = keras.layers.Average(name = 'Ave96950', )([Ave41374,Add63972])
model = tf.keras.models.Model(inputs=[in0Ave41374,in1Ave41374,in0Add63972,in1Add63972], outputs=Ave96950)
in0Ave41374 = tf.constant([[[0.7718], [0.6297]]])
in1Ave41374 = tf.constant([[[0.0112], [0.579]]])
in0Add63972 = tf.constant([[[0.5449], [0.2324]]])
in1Add63972 = tf.constant([[[0.535], [0.8882]]])
print (np.array2string(model.predict([in0Ave41374,in1Ave41374,in0Add63972,in1Add63972],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave96950.png')

LAve41374 = average_layer([[[[0.7718], [0.6297]]], [[[0.0112], [0.579]]]], Ave41374), 
LAdd63972 = add_layer([[[[0.5449], [0.2324]]], [[[0.535], [0.8882]]]], Add63972), 
LAve96950 = average_layer([Ave41374,Add63972], Ave96950), 
exec_layers([LAve41374,LAdd63972,LAve96950],["Ave41374","Add63972","Ave96950"],Ave96950,"Ave96950")

Actual (Unparsed): [[[0.7357000], [0.8624750]]]

Expected (Unparsed): [[[0.7357],[0.862475]]]

Actual:   [[[0.7357], [0.8625]]]

Expected: [[[0.7357], [0.8625]]]