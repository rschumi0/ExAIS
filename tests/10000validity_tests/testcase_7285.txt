import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sof89475 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Glo98442 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Sof89475 = keras.layers.Softmax(axis=1, name = 'Sof89475', input_shape=(1, 2, 1))(in0Sof89475)
Res89283 = keras.layers.Reshape((1, 2), name = 'Res89283', )(Sof89475)
Glo98442 = keras.layers.GlobalAveragePooling3D(name = 'Glo98442', )(in0Glo98442)
Sof28643 = keras.layers.Softmax(axis=1, name = 'Sof28643', )(Glo98442)
Res41712 = keras.layers.Reshape((1, 2), name = 'Res41712', )(Sof28643)
Mul68005 = keras.layers.Multiply(name = 'Mul68005', )([Res89283,Res41712])
Res40522 = keras.layers.Reshape((1, 2, 1), name = 'Res40522', )(Mul68005)
Dep33697 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='valid', name = 'Dep33697', )(Res40522)
ReL37810 = keras.layers.ReLU(max_value=7.611235139526859, negative_slope=5.557972334215573, threshold=7.397242462670373, name = 'ReL37810', )(Dep33697)
model = tf.keras.models.Model(inputs=[in0Sof89475,in0Glo98442], outputs=ReL37810)
w = model.get_layer('Dep33697').get_weights() 
w[0] = np.array([[[[0.8277]], [[0.9446]]]])
w[1] = np.array([0])
model.get_layer('Dep33697').set_weights(w) 
in0Sof89475 = tf.constant([[[[0.8766], [0.3366]]]])
in0Glo98442 = tf.constant([[[[[1.632, 1.5292], [1.9311, 1.1633]], [[1.788, 1.0045], [1.8323, 1.8203]]]]])
print (np.array2string(model.predict([in0Sof89475,in0Glo98442],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ReL37810.png')

LSof89475 = softmax_layer([[[[0.8766], [0.3366]]]], 1, Sof89475), 
LRes89283 = reshape_layer(Sof89475, [1, 2], Res89283), 
LGlo98442 = global_average_pooling3D_layer([[[[[1.632, 1.5292], [1.9311, 1.1633]], [[1.788, 1.0045], [1.8323, 1.8203]]]]], Glo98442), 
LSof28643 = softmax_layer(Glo98442, 1, Sof28643), 
LRes41712 = reshape_layer(Sof28643, [1, 2], Res41712), 
LMul68005 = multiply_layer([Res89283,Res41712], Mul68005), 
LRes40522 = reshape_layer(Mul68005, [1, 2, 1], Res40522), 
LDep33697 = depthwise_conv2D_layer(Res40522, 1, 2,[[[[0.8277]], [[0.9446]]]],[0], 1, 1, false, Dep33697), 
LReL37810 = relu_layer(Dep33697, 7.611235139526859, 5.557972334215573, 7.397242462670373, ReL37810), 
exec_layers([LSof89475,LRes89283,LGlo98442,LSof28643,LRes41712,LMul68005,LRes40522,LDep33697,LReL37810],["Sof89475","Res89283","Glo98442","Sof28643","Res41712","Mul68005","Res40522","Dep33697","ReL37810"],ReL37810,"ReL37810")

Actual (Unparsed): [[[[-36.2551672]]]]

Expected (Unparsed): [[[[-36.255167165186066]]]]

Actual:   [[[[-36.2551]]]]

Expected: [[[[-36.2551]]]]