import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer59364 = tf.keras.layers.Input(shape=([4, 2]))

Zer59364 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer59364', )(in0Zer59364)
Res69492 = keras.layers.Reshape((6, 2, 1), name = 'Res69492', )(Zer59364)
Glo77882 = keras.layers.GlobalMaxPool2D(name = 'Glo77882', )(Res69492)
Res43278 = keras.layers.Reshape((1, 1), name = 'Res43278', )(Glo77882)
LST20504 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST20504', )(Res43278)
model = tf.keras.models.Model(inputs=[in0Zer59364], outputs=LST20504)
w = model.get_layer('LST20504').get_weights() 
w[0] = np.array([[10, 8, 6, 5, 9, 3, 1, 6, 7, 8, 1, 1]])
w[1] = np.array([[1, 5, 8, 8, 2, 10, 1, 4, 1, 3, 9, 5], [1, 9, 10, 4, 4, 9, 6, 10, 7, 3, 5, 3], [4, 8, 1, 5, 9, 3, 7, 10, 5, 1, 5, 7]])
w[2] = np.array([8, 6, 5, 6, 8, 7, 9, 8, 8, 3, 5, 7])
model.get_layer('LST20504').set_weights(w) 
in0Zer59364 = tf.constant([[[1.6535, 1.748], [1.4286, 1.6886], [1.25, 1.8009], [1.8586, 1.7064]]])
print (np.array2string(model.predict([in0Zer59364],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST20504.png')

LZer59364 = zero_padding1D_layer([[[1.6535, 1.748], [1.4286, 1.6886], [1.25, 1.8009], [1.8586, 1.7064]]], 1, 1, Zer59364), 
LRes69492 = reshape_layer(Zer59364, [6, 2, 1], Res69492), 
LGlo77882 = global_max_pool2D_layer(Res69492, Glo77882), 
LRes43278 = reshape_layer(Glo77882, [1, 1], Res43278), 
LLST20504 = lstm_layer(Res43278,[[10, 8, 6, 5, 9, 3, 1, 6, 7, 8, 1, 1]],[[1, 5, 8, 8, 2, 10, 1, 4, 1, 3, 9, 5], [1, 9, 10, 4, 4, 9, 6, 10, 7, 3, 5, 3], [4, 8, 1, 5, 9, 3, 7, 10, 5, 1, 5, 7]],[8, 6, 5, 6, 8, 7, 9, 8, 8, 3, 5, 7], LST20504), 
exec_layers([LZer59364,LRes69492,LGlo77882,LRes43278,LLST20504],["Zer59364","Res69492","Glo77882","Res43278","LST20504"],LST20504,"LST20504")

Actual (Unparsed): [[0.7615941, 0.7607950, 0.7614859]]

Expected (Unparsed): [[0.7615941424184877,0.7607950290924608,0.7614858671255208]]

Actual:   [[0.7616, 0.7608, 0.7615]]

Expected: [[0.7616, 0.7608, 0.7615]]