import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min33906 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Min33906 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Dot89617 = tf.keras.layers.Input(shape=([3]))
in1Dot89617 = tf.keras.layers.Input(shape=([3]))
in0Ave21968 = tf.keras.layers.Input(shape=([1, 1]))
in0Con35912 = tf.keras.layers.Input(shape=([3]))
in0Mas86307 = tf.keras.layers.Input(shape=([4]))
in0Con68497 = tf.keras.layers.Input(shape=([3]))

Min33906 = keras.layers.Minimum(name = 'Min33906', )([in0Min33906,in1Min33906])
Res51700 = keras.layers.Reshape((1, 2, 2), name = 'Res51700', )(Min33906)
Res35737 = keras.layers.Reshape((1, 4), name = 'Res35737', )(Res51700)
Fla83332 = keras.layers.Flatten(name = 'Fla83332', )(Res35737)
Dot89617 = keras.layers.Dot(axes=(1, 1), name = 'Dot89617', )([in0Dot89617,in1Dot89617])
Ave21968 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave21968', )(in0Ave21968)
Res8504 = keras.layers.Reshape((1, 1, 1), name = 'Res8504', )(Ave21968)
Glo49777 = keras.layers.GlobalMaxPool2D(name = 'Glo49777', )(Res8504)
Con35912 = keras.layers.Concatenate(axis=1, name = 'Con35912', )([Glo49777,in0Con35912])
Mas86307 = keras.layers.Masking(mask_value=2, name = 'Mas86307', )(in0Mas86307)
Dot13061 = keras.layers.Dot(axes=(1, 1), name = 'Dot13061', )([Con35912,Mas86307])
Dot22223 = keras.layers.Dot(axes=(1, 1), name = 'Dot22223', )([Dot89617,Dot13061])
Con68497 = keras.layers.Concatenate(axis=1, name = 'Con68497', )([Dot22223,in0Con68497])
Add2487 = keras.layers.Add(name = 'Add2487', )([Fla83332,Con68497])
Res42951 = keras.layers.Reshape((4, 1), name = 'Res42951', )(Add2487)
Zer21582 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer21582', )(Res42951)
model = tf.keras.models.Model(inputs=[in0Min33906,in1Min33906,in0Dot89617,in1Dot89617,in0Ave21968,in0Con35912,in0Mas86307,in0Con68497], outputs=Zer21582)
in0Min33906 = tf.constant([[[[[0.4738, 0.1015]], [[0.1688, 0.7462]]]]])
in1Min33906 = tf.constant([[[[[0.4067, 0.6919]], [[0.5323, 0.2539]]]]])
in0Dot89617 = tf.constant([[0.9366, 0.8429, 0.3183]])
in1Dot89617 = tf.constant([[0.0787, 0.9359, 0.793]])
in0Ave21968 = tf.constant([[[1.4597]]])
in0Con35912 = tf.constant([[0.7417, 0.7536, 0.1549]])
in0Mas86307 = tf.constant([[1.3316, 1.2145, 1.2855, 1.2654]])
in0Con68497 = tf.constant([[0.4686, 0.6227, 0.5276]])
print (np.array2string(model.predict([in0Min33906,in1Min33906,in0Dot89617,in1Dot89617,in0Ave21968,in0Con35912,in0Mas86307,in0Con68497],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer21582.png')

LMin33906 = minimum_layer([[[[[[0.4738, 0.1015]], [[0.1688, 0.7462]]]]], [[[[[0.4067, 0.6919]], [[0.5323, 0.2539]]]]]], Min33906), 
LRes51700 = reshape_layer(Min33906, [1, 2, 2], Res51700), 
LRes35737 = reshape_layer(Res51700, [1, 4], Res35737), 
LFla83332 = flatten_layer(Res35737, Fla83332), 
LDot89617 = dot_layer([[0.9366, 0.8429, 0.3183]], [[0.0787, 0.9359, 0.793]], 1, 1, Dot89617), 
LAve21968 = average_pooling1D_layer([[[1.4597]]], 1, 1, true, Ave21968), 
LRes8504 = reshape_layer(Ave21968, [1, 1, 1], Res8504), 
LGlo49777 = global_max_pool2D_layer(Res8504, Glo49777), 
LCon35912 = concatenate_layer([Glo49777,[[0.7417, 0.7536, 0.1549]]], 1, Con35912), 
LMas86307 = masking_layer([[1.3316, 1.2145, 1.2855, 1.2654]], 2, Mas86307), 
LDot13061 = dot_layer(Con35912,Mas86307, 1, 1, Dot13061), 
LDot22223 = dot_layer(Dot89617,Dot13061, 1, 1, Dot22223), 
LCon68497 = concatenate_layer([Dot22223,[[0.4686, 0.6227, 0.5276]]], 1, Con68497), 
LAdd2487 = add_layer([Fla83332,Con68497], Add2487), 
LRes42951 = reshape_layer(Add2487, [4, 1], Res42951), 
LZer21582 = zero_padding1D_layer(Res42951, 1, 1, Zer21582), 
exec_layers([LMin33906,LRes51700,LRes35737,LFla83332,LDot89617,LAve21968,LRes8504,LGlo49777,LCon35912,LMas86307,LDot13061,LDot22223,LCon68497,LAdd2487,LRes42951,LZer21582],["Min33906","Res51700","Res35737","Fla83332","Dot89617","Ave21968","Res8504","Glo49777","Con35912","Mas86307","Dot13061","Dot22223","Con68497","Add2487","Res42951","Zer21582"],Zer21582,"Zer21582")

Actual (Unparsed): [[[0.0000000], [4.8770327], [0.5701000], [0.7915000], [0.7815000], [0.0000000]]]

Expected (Unparsed): [[[0],[4.877032939091165],[0.5701],[0.7915000000000001],[0.7815],[0]]]

Actual:   [[[0], [4.8771], [0.5701], [0.7915], [0.7815], [0]]]

Expected: [[[0], [4.8771], [0.5701], [0.7916], [0.7815], [0]]]