import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max26929 = tf.keras.layers.Input(shape=([1, 2]))
in1Max26929 = tf.keras.layers.Input(shape=([1, 2]))
in0Dot54266 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot54266 = tf.keras.layers.Input(shape=([2, 3]))
in0Max80615 = tf.keras.layers.Input(shape=([1, 2]))
in0Den26017 = tf.keras.layers.Input(shape=([5, 2]))
in0Con40276 = tf.keras.layers.Input(shape=([5, 3, 1]))
in0Sub90945 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub90945 = tf.keras.layers.Input(shape=([3, 2]))
in0Con61473 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0ReL37516 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Max26534 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Max26534 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Max26929 = keras.layers.Maximum(name = 'Max26929', )([in0Max26929,in1Max26929])
Zer92944 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer92944', )(Max26929)
Dot54266 = keras.layers.Dot(axes=(2, 2), name = 'Dot54266', )([in0Dot54266,in1Dot54266])
Max80615 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max80615', )(in0Max80615)
Zer97859 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer97859', )(Max80615)
Min87229 = keras.layers.Minimum(name = 'Min87229', )([Dot54266,Zer97859])
Add23822 = keras.layers.Add(name = 'Add23822', )([Zer92944,Min87229])
Res83757 = keras.layers.Reshape((2, 2, 1), name = 'Res83757', )(Add23822)
Res61108 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res61108', )(Res83757)
Zer56893 = keras.layers.ZeroPadding3D(padding=((3, 0), (1, 0), (1, 0)), name = 'Zer56893', )(Res61108)
Den26017 = keras.layers.Dense(3,name = 'Den26017', )(in0Den26017)
Res50756 = keras.layers.Reshape((5, 3, 1), name = 'Res50756', )(Den26017)
Con40276 = keras.layers.Concatenate(axis=3, name = 'Con40276', )([Res50756,in0Con40276])
Sub90945 = keras.layers.Subtract(name = 'Sub90945', )([in0Sub90945,in1Sub90945])
Res17361 = keras.layers.Reshape((3, 2, 1), name = 'Res17361', )(Sub90945)
Con61473 = keras.layers.Concatenate(axis=3, name = 'Con61473', )([Res17361,in0Con61473])
ReL37516 = keras.layers.ReLU(max_value=4.603279828597995, negative_slope=9.286146104901874, threshold=6.142824487018487, name = 'ReL37516', input_shape=(1, 2, 2))(in0ReL37516)
Zer36865 = keras.layers.ZeroPadding2D(padding=((2, 0), (0, 0)), name = 'Zer36865', )(ReL37516)
Mul1097 = keras.layers.Multiply(name = 'Mul1097', )([Con61473,Zer36865])
Zer85714 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer85714', )(Mul1097)
Min7961 = keras.layers.Minimum(name = 'Min7961', )([Con40276,Zer85714])
Res8330 = keras.layers.Reshape((5, 3, 2, 1), name = 'Res8330', )(Min7961)
Max26534 = keras.layers.Maximum(name = 'Max26534', )([in0Max26534,in1Max26534])
Zer64577 = keras.layers.ZeroPadding3D(padding=((4, 0), (2, 0), (1, 0)), name = 'Zer64577', )(Max26534)
Max71945 = keras.layers.Maximum(name = 'Max71945', )([Res8330,Zer64577])
Mul84036 = keras.layers.Multiply(name = 'Mul84036', )([Zer56893,Max71945])
model = tf.keras.models.Model(inputs=[in0Max26929,in1Max26929,in0Dot54266,in1Dot54266,in0Max80615,in0Den26017,in0Con40276,in0Sub90945,in1Sub90945,in0Con61473,in0ReL37516,in0Max26534,in1Max26534], outputs=Mul84036)
w = model.get_layer('Den26017').get_weights() 
w[0] = np.array([[0.1893, 0.193, 0.0741], [0.6777, 0.7048, 0.4073]])
w[1] = np.array([0.3209, 0.1229, 0.806])
model.get_layer('Den26017').set_weights(w) 
in0Max26929 = tf.constant([[[0.2067, 0.2799]]])
in1Max26929 = tf.constant([[[0.3003, 0.5539]]])
in0Dot54266 = tf.constant([[[0.6187, 0.7656, 0.6234], [0.5727, 0.0967, 0.9618]]])
in1Dot54266 = tf.constant([[[0.4791, 0.272, 0.0335], [0.9841, 0.1392, 0.951]]])
in0Max80615 = tf.constant([[[1.3881, 1.3627]]])
in0Den26017 = tf.constant([[[0.3442, 0.7915], [0.9655, 0.1144], [0.8813, 1], [0.2433, 0.3257], [0.49, 0.3209]]])
in0Con40276 = tf.constant([[[[0.6325], [0.6182], [0.0686]], [[0.9311], [0.1413], [0.896]], [[0.7487], [0.9813], [0.6781]], [[0.5051], [0.6782], [0.8892]], [[0.9697], [0.1203], [0.243]]]])
in0Sub90945 = tf.constant([[[0.5163, 0.165], [0.8391, 0.0649], [0.9918, 0.6698]]])
in1Sub90945 = tf.constant([[[0.6332, 0.8026], [0.4786, 0.4873], [0.8653, 0.7818]]])
in0Con61473 = tf.constant([[[[0.6784], [0.9774]], [[0.4734], [0.5305]], [[0.6831], [0.6623]]]])
in0ReL37516 = tf.constant([[[[0.4801, 0.9864], [0.8614, 0.9464]]]])
in0Max26534 = tf.constant([[[[[0.8318]]]]])
in1Max26534 = tf.constant([[[[[0.8046]]]]])
print (np.array2string(model.predict([in0Max26929,in1Max26929,in0Dot54266,in1Dot54266,in0Max80615,in0Den26017,in0Con40276,in0Sub90945,in1Sub90945,in0Con61473,in0ReL37516,in0Max26534,in1Max26534],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul84036.png')

LMax26929 = maximum_layer([[[[0.2067, 0.2799]]], [[[0.3003, 0.5539]]]], Max26929), 
LZer92944 = zero_padding1D_layer(Max26929, 1, 0, Zer92944), 
LDot54266 = dot_layer([[[0.6187, 0.7656, 0.6234], [0.5727, 0.0967, 0.9618]]], [[[0.4791, 0.272, 0.0335], [0.9841, 0.1392, 0.951]]], 2, 2, Dot54266), 
LMax80615 = max_pool1D_layer([[[1.3881, 1.3627]]], 1, 1, true, Max80615), 
LZer97859 = zero_padding1D_layer(Max80615, 1, 0, Zer97859), 
LMin87229 = minimum_layer([Dot54266,Zer97859], Min87229), 
LAdd23822 = add_layer([Zer92944,Min87229], Add23822), 
LRes83757 = reshape_layer(Add23822, [2, 2, 1], Res83757), 
LRes61108 = reshape_layer(Res83757, [2, 2, 1, 1], Res61108), 
LZer56893 = zero_padding3D_layer(Res61108, 3, 0, 1, 0, 1, 0, Zer56893), 
LDen26017 = dense_layer([[[0.3442, 0.7915], [0.9655, 0.1144], [0.8813, 1], [0.2433, 0.3257], [0.49, 0.3209]]], [[0.1893, 0.193, 0.0741], [0.6777, 0.7048, 0.4073]],[0.3209, 0.1229, 0.806], Den26017), 
LRes50756 = reshape_layer(Den26017, [5, 3, 1], Res50756), 
LCon40276 = concatenate_layer([Res50756,[[[[0.6325], [0.6182], [0.0686]], [[0.9311], [0.1413], [0.896]], [[0.7487], [0.9813], [0.6781]], [[0.5051], [0.6782], [0.8892]], [[0.9697], [0.1203], [0.243]]]]], 3, Con40276), 
LSub90945 = subtract_layer([[[0.5163, 0.165], [0.8391, 0.0649], [0.9918, 0.6698]]], [[[0.6332, 0.8026], [0.4786, 0.4873], [0.8653, 0.7818]]], Sub90945), 
LRes17361 = reshape_layer(Sub90945, [3, 2, 1], Res17361), 
LCon61473 = concatenate_layer([Res17361,[[[[0.6784], [0.9774]], [[0.4734], [0.5305]], [[0.6831], [0.6623]]]]], 3, Con61473), 
LReL37516 = relu_layer([[[[0.4801, 0.9864], [0.8614, 0.9464]]]], 4.603279828597995, 9.286146104901874, 6.142824487018487, ReL37516), 
LZer36865 = zero_padding2D_layer(ReL37516, 2, 0, 0, 0, Zer36865), 
LMul1097 = multiply_layer([Con61473,Zer36865], Mul1097), 
LZer85714 = zero_padding2D_layer(Mul1097, 2, 0, 1, 0, Zer85714), 
LMin7961 = minimum_layer([Con40276,Zer85714], Min7961), 
LRes8330 = reshape_layer(Min7961, [5, 3, 2, 1], Res8330), 
LMax26534 = maximum_layer([[[[[[0.8318]]]]], [[[[[0.8046]]]]]], Max26534), 
LZer64577 = zero_padding3D_layer(Max26534, 4, 0, 2, 0, 1, 0, Zer64577), 
LMax71945 = maximum_layer([Res8330,Zer64577], Max71945), 
LMul84036 = multiply_layer([Zer56893,Max71945], Mul84036), 
exec_layers([LMax26929,LZer92944,LDot54266,LMax80615,LZer97859,LMin87229,LAdd23822,LRes83757,LRes61108,LZer56893,LDen26017,LRes50756,LCon40276,LSub90945,LRes17361,LCon61473,LReL37516,LZer36865,LMul1097,LZer85714,LMin7961,LRes8330,LMax26534,LZer64577,LMax71945,LMul84036],["Max26929","Zer92944","Dot54266","Max80615","Zer97859","Min87229","Add23822","Res83757","Res61108","Zer56893","Den26017","Res50756","Con40276","Sub90945","Res17361","Con61473","ReL37516","Zer36865","Mul1097","Zer85714","Min7961","Res8330","Max26534","Zer64577","Max71945","Mul84036"],Mul84036,"Mul84036")

Actual (Unparsed): [[[[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000]], [[0.0000000], [0.0000000]], [[0.0000000], [1.5942278]]]]]

Expected (Unparsed): [[[[[0],[0]],[[0],[0]],[[0],[0]]],[[[0],[0]],[[0],[0]],[[0],[0]]],[[[0],[0]],[[-0.0],[0.0]],[[-0.0],[0.0]]],[[[0],[0]],[[0.0],[0.0]],[[-0.0],[0.0]]],[[[0],[0]],[[0],[0.0]],[[0.0],[1.5942278799999998]]]]]

Actual:   [[[[[0], [0]], [[0], [0]], [[0], [0]]], [[[0], [0]], [[0], [0]], [[0], [0]]], [[[0], [0]], [[0], [0]], [[0], [0]]], [[[0], [0]], [[0], [0]], [[0], [0]]], [[[0], [0]], [[0], [0]], [[0], [1.5943]]]]]

Expected: [[[[[0], [0]], [[0], [0]], [[0], [0]]], [[[0], [0]], [[0], [0]], [[0], [0]]], [[[0], [0]], [[-0], [0]], [[-0], [0]]], [[[0], [0]], [[0], [0]], [[-0], [0]]], [[[0], [0]], [[0], [0]], [[0], [1.5943]]]]]