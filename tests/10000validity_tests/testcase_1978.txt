import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo90761 = tf.keras.layers.Input(shape=([2, 2, 2]))

Glo90761 = keras.layers.GlobalMaxPool2D(name = 'Glo90761', )(in0Glo90761)
Res14778 = keras.layers.Reshape((2, 1), name = 'Res14778', )(Glo90761)
Res20796 = keras.layers.Reshape((2, 1, 1), name = 'Res20796', )(Res14778)
Res1376 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res1376', )(Res20796)
Zer36725 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer36725', )(Res1376)
Up_62229 = keras.layers.UpSampling3D(size=(2, 1, 2), name = 'Up_62229', )(Zer36725)
Res49050 = keras.layers.Reshape((8, 3, 6), name = 'Res49050', )(Up_62229)
Res98434 = keras.layers.Reshape((8, 18), name = 'Res98434', )(Res49050)
Max4929 = keras.layers.MaxPool1D(pool_size=(7), strides=(1), padding='valid', name = 'Max4929', )(Res98434)
model = tf.keras.models.Model(inputs=[in0Glo90761], outputs=Max4929)
in0Glo90761 = tf.constant([[[[1.6194, 1.6217], [1.0673, 1.9765]], [[1.2475, 1.508], [1.7259, 1.4774]]]])
print (np.array2string(model.predict([in0Glo90761],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max4929.png')

LGlo90761 = global_max_pool2D_layer([[[[1.6194, 1.6217], [1.0673, 1.9765]], [[1.2475, 1.508], [1.7259, 1.4774]]]], Glo90761), 
LRes14778 = reshape_layer(Glo90761, [2, 1], Res14778), 
LRes20796 = reshape_layer(Res14778, [2, 1, 1], Res20796), 
LRes1376 = reshape_layer(Res20796, [2, 1, 1, 1], Res1376), 
LZer36725 = zero_padding3D_layer(Res1376, 1, 1, 1, 1, 1, 1, Zer36725), 
LUp_62229 = up_sampling3D_layer(Zer36725, 2, 1, 2, Up_62229), 
LRes49050 = reshape_layer(Up_62229, [8, 3, 6], Res49050), 
LRes98434 = reshape_layer(Res49050, [8, 18], Res98434), 
LMax4929 = max_pool1D_layer(Res98434, 7, 1, false, Max4929), 
exec_layers([LGlo90761,LRes14778,LRes20796,LRes1376,LZer36725,LUp_62229,LRes49050,LRes98434,LMax4929],["Glo90761","Res14778","Res20796","Res1376","Zer36725","Up_62229","Res49050","Res98434","Max4929"],Max4929,"Max4929")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.9765000, 1.9765000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.9765000, 1.9765000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,1.9765,1.9765,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1.9765,1.9765,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 1.9765, 1.9765, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1.9765, 1.9765, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 1.9765, 1.9765, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1.9765, 1.9765, 0, 0, 0, 0, 0, 0, 0, 0]]]