import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot57454 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot57454 = tf.keras.layers.Input(shape=([3, 3]))

Dot57454 = keras.layers.Dot(axes=(1, 1), name = 'Dot57454', )([in0Dot57454,in1Dot57454])
Res35482 = keras.layers.Reshape((3, 3, 1), name = 'Res35482', )(Dot57454)
Ave40053 = keras.layers.AveragePooling2D(pool_size=(3, 1), name = 'Ave40053', )(Res35482)
model = tf.keras.models.Model(inputs=[in0Dot57454,in1Dot57454], outputs=Ave40053)
in0Dot57454 = tf.constant([[[0.2756, 0.7894, 0.6754], [0.1017, 0.7646, 0.6863], [0.9328, 0.6291, 0.2714]]])
in1Dot57454 = tf.constant([[[0.9458, 0.4638, 0.2641], [0.4856, 0.7941, 0.2872], [0.7655, 0.4753, 0.7329]]])
print (np.array2string(model.predict([in0Dot57454,in1Dot57454],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave40053.png')

LDot57454 = dot_layer([[[0.2756, 0.7894, 0.6754], [0.1017, 0.7646, 0.6863], [0.9328, 0.6291, 0.2714]]], [[[0.9458, 0.4638, 0.2641], [0.4856, 0.7941, 0.2872], [0.7655, 0.4753, 0.7329]]], 1, 1, Dot57454), 
LRes35482 = reshape_layer(Dot57454, [3, 3, 1], Res35482), 
LAve40053 = average_pooling2D_layer(Res35482, 3, 1, Ave40053), 
exec_layers([LDot57454,LRes35482,LAve40053],["Dot57454","Res35482","Ave40053"],Ave40053,"Ave40053")

Actual (Unparsed): [[[[1.2678013], [0.9704949], [0.7497240]]]]

Expected (Unparsed): [[[[1.267801343333333],[0.97049489],[0.7497239766666667]]]]

Actual:   [[[[1.2679], [0.9705], [0.7498]]]]

Expected: [[[[1.2679], [0.9705], [0.7498]]]]