import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add23721 = tf.keras.layers.Input(shape=([2, 2]))
in1Add23721 = tf.keras.layers.Input(shape=([2, 2]))
in0Con52170 = tf.keras.layers.Input(shape=([3, 2, 2]))
in0Sub62955 = tf.keras.layers.Input(shape=([3, 2, 3]))
in1Sub62955 = tf.keras.layers.Input(shape=([3, 2, 3]))

Add23721 = keras.layers.Add(name = 'Add23721', )([in0Add23721,in1Add23721])
Res54486 = keras.layers.Reshape((2, 2, 1), name = 'Res54486', )(Add23721)
Zer20593 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer20593', )(Res54486)
Con52170 = keras.layers.Concatenate(axis=3, name = 'Con52170', )([Zer20593,in0Con52170])
Sub62955 = keras.layers.Subtract(name = 'Sub62955', )([in0Sub62955,in1Sub62955])
Ave33788 = keras.layers.Average(name = 'Ave33788', )([Con52170,Sub62955])
Res4054 = keras.layers.Reshape((3, 2, 3, 1), name = 'Res4054', )(Ave33788)
Glo93063 = keras.layers.GlobalMaxPool3D(name = 'Glo93063', )(Res4054)
model = tf.keras.models.Model(inputs=[in0Add23721,in1Add23721,in0Con52170,in0Sub62955,in1Sub62955], outputs=Glo93063)
in0Add23721 = tf.constant([[[0.6402, 0.1629], [0.652, 0.4337]]])
in1Add23721 = tf.constant([[[0.8302, 0.2695], [0.3654, 0.6967]]])
in0Con52170 = tf.constant([[[[0.7715, 0.552], [0.5223, 0.5548]], [[0.7878, 0.9653], [0.4054, 0.4911]], [[0.4565, 0.9906], [0.977, 0.1506]]]])
in0Sub62955 = tf.constant([[[[0.5363, 0.6458, 0.261], [0.2556, 0.0955, 0.7071]], [[0.192, 0.9903, 0.7042], [0.1732, 0.5177, 0.3059]], [[0.2254, 0.8557, 0.6428], [0.9159, 0.2555, 0.5603]]]])
in1Sub62955 = tf.constant([[[[0.1468, 0.9272, 0.7229], [0.5091, 0.9176, 0.9034]], [[0.2337, 0.9598, 0.6032], [0.9348, 0.495, 0.3765]], [[0.2589, 0.9957, 0.4004], [0.5859, 0.2777, 0.0325]]]])
print (np.array2string(model.predict([in0Add23721,in1Add23721,in0Con52170,in0Sub62955,in1Sub62955],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo93063.png')

LAdd23721 = add_layer([[[[0.6402, 0.1629], [0.652, 0.4337]]], [[[0.8302, 0.2695], [0.3654, 0.6967]]]], Add23721), 
LRes54486 = reshape_layer(Add23721, [2, 2, 1], Res54486), 
LZer20593 = zero_padding2D_layer(Res54486, 1, 0, 0, 0, Zer20593), 
LCon52170 = concatenate_layer([Zer20593,[[[[0.7715, 0.552], [0.5223, 0.5548]], [[0.7878, 0.9653], [0.4054, 0.4911]], [[0.4565, 0.9906], [0.977, 0.1506]]]]], 3, Con52170), 
LSub62955 = subtract_layer([[[[0.5363, 0.6458, 0.261], [0.2556, 0.0955, 0.7071]], [[0.192, 0.9903, 0.7042], [0.1732, 0.5177, 0.3059]], [[0.2254, 0.8557, 0.6428], [0.9159, 0.2555, 0.5603]]]], [[[[0.1468, 0.9272, 0.7229], [0.5091, 0.9176, 0.9034]], [[0.2337, 0.9598, 0.6032], [0.9348, 0.495, 0.3765]], [[0.2589, 0.9957, 0.4004], [0.5859, 0.2777, 0.0325]]]], Sub62955), 
LAve33788 = average_layer([Con52170,Sub62955], Ave33788), 
LRes4054 = reshape_layer(Ave33788, [3, 2, 3, 1], Res4054), 
LGlo93063 = global_max_pool3D_layer(Res4054, Glo93063), 
exec_layers([LAdd23721,LRes54486,LZer20593,LCon52170,LSub62955,LAve33788,LRes4054,LGlo93063],["Add23721","Res54486","Zer20593","Con52170","Sub62955","Ave33788","Res4054","Glo93063"],Glo93063,"Glo93063")

Actual (Unparsed): [[0.7302000]]

Expected (Unparsed): [[0.7302]]

Actual:   [[0.7302]]

Expected: [[0.7302]]