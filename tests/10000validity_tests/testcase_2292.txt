import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub40597 = tf.keras.layers.Input(shape=([3]))
in1Sub40597 = tf.keras.layers.Input(shape=([3]))

Sub40597 = keras.layers.Subtract(name = 'Sub40597', )([in0Sub40597,in1Sub40597])
Thr52440 = keras.layers.ThresholdedReLU(theta=4.201246282208099, name = 'Thr52440', )(Sub40597)
Res50255 = keras.layers.Reshape((3, 1), name = 'Res50255', )(Thr52440)
Res49792 = keras.layers.Reshape((3, 1, 1), name = 'Res49792', )(Res50255)
Res1995 = keras.layers.Reshape((3, 1, 1, 1), name = 'Res1995', )(Res49792)
Con73736 = keras.layers.Conv3DTranspose(4, (3, 1, 1),strides=(3, 1, 1), padding='valid', name = 'Con73736', )(Res1995)
model = tf.keras.models.Model(inputs=[in0Sub40597,in1Sub40597], outputs=Con73736)
w = model.get_layer('Con73736').get_weights() 
w[0] = np.array([[[[[0.5532], [0.9723], [0.6804], [0.2568]]]], [[[[0.0108], [0.1452], [0.618], [0.8564]]]], [[[[0.6119], [0.002], [0.9811], [0.7226]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con73736').set_weights(w) 
in0Sub40597 = tf.constant([[0.0179, 0.3318, 0.6639]])
in1Sub40597 = tf.constant([[0.5911, 0.1139, 0.8107]])
print (np.array2string(model.predict([in0Sub40597,in1Sub40597],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con73736.png')

LSub40597 = subtract_layer([[0.0179, 0.3318, 0.6639]], [[0.5911, 0.1139, 0.8107]], Sub40597), 
LThr52440 = thresholded_relu_layer(Sub40597, 4.201246282208099, Thr52440), 
LRes50255 = reshape_layer(Thr52440, [3, 1], Res50255), 
LRes49792 = reshape_layer(Res50255, [3, 1, 1], Res49792), 
LRes1995 = reshape_layer(Res49792, [3, 1, 1, 1], Res1995), 
LCon73736 = conv3D_transpose_layer(Res1995, 3, 1, 1,[[[[[0.5532], [0.9723], [0.6804], [0.2568]]]], [[[[0.0108], [0.1452], [0.618], [0.8564]]]], [[[[0.6119], [0.002], [0.9811], [0.7226]]]]],[0, 0, 0, 0], 3, 1, 1, false, Con73736), 
exec_layers([LSub40597,LThr52440,LRes50255,LRes49792,LRes1995,LCon73736],["Sub40597","Thr52440","Res50255","Res49792","Res1995","Con73736"],Con73736,"Con73736")

Actual (Unparsed): [[[[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]]

Expected (Unparsed): [[[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]],[[[0.0,0.0,0.0,0.0]]]]]

Actual:   [[[[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]]]]

Expected: [[[[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]], [[[0, 0, 0, 0]]]]]