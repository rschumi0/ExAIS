import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul66132 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Mul66132 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Mul76150 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul76150 = tf.keras.layers.Input(shape=([1, 2]))

Mul66132 = keras.layers.Multiply(name = 'Mul66132', )([in0Mul66132,in1Mul66132])
Res22856 = keras.layers.Reshape((1, 1, 2), name = 'Res22856', )(Mul66132)
Mul76150 = keras.layers.Multiply(name = 'Mul76150', )([in0Mul76150,in1Mul76150])
Sep76652 = keras.layers.SeparableConv1D(2, (1),strides=(1), padding='same', name = 'Sep76652', )(Mul76150)
Res54572 = keras.layers.Reshape((1, 1, 2), name = 'Res54572', )(Sep76652)
Mul16466 = keras.layers.Multiply(name = 'Mul16466', )([Res22856,Res54572])
model = tf.keras.models.Model(inputs=[in0Mul66132,in1Mul66132,in0Mul76150,in1Mul76150], outputs=Mul16466)
w = model.get_layer('Sep76652').get_weights() 
w[0] = np.array([[[0.8977], [0.8137]]])
w[1] = np.array([[[0.0146, 0.1728], [0.3547, 0.5911]]])
w[2] = np.array([0, 0])
model.get_layer('Sep76652').set_weights(w) 
in0Mul66132 = tf.constant([[[[[0.3098], [0.4142]]]]])
in1Mul66132 = tf.constant([[[[[0.9945], [0.9475]]]]])
in0Mul76150 = tf.constant([[[0.8104, 0.2521]]])
in1Mul76150 = tf.constant([[[0.8623, 0.6958]]])
print (np.array2string(model.predict([in0Mul66132,in1Mul66132,in0Mul76150,in1Mul76150],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul16466.png')

LMul66132 = multiply_layer([[[[[[0.3098], [0.4142]]]]], [[[[[0.9945], [0.9475]]]]]], Mul66132), 
LRes22856 = reshape_layer(Mul66132, [1, 1, 2], Res22856), 
LMul76150 = multiply_layer([[[[0.8104, 0.2521]]], [[[0.8623, 0.6958]]]], Mul76150), 
LSep76652 = separable_conv1D_layer(Mul76150, 1,[[[[0.8977], [0.8137]]],[[[0.0146, 0.1728], [0.3547, 0.5911]]]],[0, 0], 1, true, Sep76652), 
LRes54572 = reshape_layer(Sep76652, [1, 1, 2], Res54572), 
LMul16466 = multiply_layer([Res22856,Res54572], Mul16466), 
exec_layers([LMul66132,LRes22856,LMul76150,LSep76652,LRes54572,LMul16466],["Mul66132","Res22856","Mul76150","Sep76652","Res54572","Mul16466"],Mul16466,"Mul16466")

Actual (Unparsed): [[[[0.0184198, 0.0756534]]]]

Expected (Unparsed): [[[[0.018419814292474267,0.07565337716616673]]]]

Actual:   [[[[0.0185, 0.0757]]]]

Expected: [[[[0.0185, 0.0757]]]]