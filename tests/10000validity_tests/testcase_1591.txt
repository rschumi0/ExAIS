import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con42932 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))

Con42932 = keras.layers.Conv3DTranspose(3, (1, 1, 2),strides=(1, 1, 1), padding='valid', name = 'Con42932', )(in0Con42932)
Bat83448 = keras.layers.BatchNormalization(axis=2, epsilon=0.3695353337837137,  name = 'Bat83448', )(Con42932)
Res58989 = keras.layers.Reshape((2, 2, 9), name = 'Res58989', )(Bat83448)
Cro43317 = keras.layers.Cropping2D(cropping=((1, 0), (1, 0)), name = 'Cro43317', )(Res58989)
Res82224 = keras.layers.Reshape((1, 9), name = 'Res82224', )(Cro43317)
Sim93859 = keras.layers.SimpleRNN(3,name = 'Sim93859', )(Res82224)
model = tf.keras.models.Model(inputs=[in0Con42932], outputs=Sim93859)
w = model.get_layer('Con42932').get_weights() 
w[0] = np.array([[[[[0.5864], [0.53], [0.6187]], [[0.7342], [0.8943], [0.6494]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con42932').set_weights(w) 
w = model.get_layer('Bat83448').get_weights() 
w[0] = np.array([0.9801, 0.6097])
w[1] = np.array([0.9557, 0.5769])
w[2] = np.array([0.9448, 0.0194])
w[3] = np.array([0.0092, 0.7659])
model.get_layer('Bat83448').set_weights(w) 
w = model.get_layer('Sim93859').get_weights() 
w[0] = np.array([[4, 4, 1], [4, 2, 6], [2, 2, 6], [8, 10, 6], [7, 9, 8], [5, 10, 2], [4, 1, 8], [10, 1, 1], [8, 7, 8]])
w[1] = np.array([[1, 7, 2], [6, 3, 6], [10, 3, 8]])
w[2] = np.array([2, 7, 9])
model.get_layer('Sim93859').set_weights(w) 
in0Con42932 = tf.constant([[[[[0.8818], [0.3101]], [[0.6268], [0.9565]]], [[[0.6207], [0.4975]], [[0.1417], [0.14]]]]])
print (np.array2string(model.predict([in0Con42932],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sim93859.png')

LCon42932 = conv3D_transpose_layer([[[[[0.8818], [0.3101]], [[0.6268], [0.9565]]], [[[0.6207], [0.4975]], [[0.1417], [0.14]]]]], 1, 1, 2,[[[[[0.5864], [0.53], [0.6187]], [[0.7342], [0.8943], [0.6494]]]]],[0, 0, 0], 1, 1, 1, false, Con42932), 
LBat83448 = batch_normalization_layer(Con42932, 2, 0.3695353337837137, [0.9801, 0.6097], [0.9557, 0.5769], [0.9448, 0.0194], [0.0092, 0.7659], Bat83448), 
LRes58989 = reshape_layer(Bat83448, [2, 2, 9], Res58989), 
LCro43317 = cropping2D_layer(Res58989, 1, 0, 1, 0, Cro43317), 
LRes82224 = reshape_layer(Cro43317, [1, 9], Res82224), 
LSim93859 = simple_rnn_layer(Res82224,[[4, 4, 1], [4, 2, 6], [2, 2, 6], [8, 10, 6], [7, 9, 8], [5, 10, 2], [4, 1, 8], [10, 1, 1], [8, 7, 8]],[[1, 7, 2], [6, 3, 6], [10, 3, 8]],[2, 7, 9], Sim93859), 
exec_layers([LCon42932,LBat83448,LRes58989,LCro43317,LRes82224,LSim93859],["Con42932","Bat83448","Res58989","Cro43317","Res82224","Sim93859"],Sim93859,"Sim93859")

Actual (Unparsed): [[1.0000000, 1.0000000, 1.0000000]]

Expected (Unparsed): [[1.0,1.0,1.0]]

Actual:   [[1, 1, 1]]

Expected: [[1, 1, 1]]