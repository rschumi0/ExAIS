import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min10646 = tf.keras.layers.Input(shape=([2, 1]))
in1Min10646 = tf.keras.layers.Input(shape=([2, 1]))
in0Min18931 = tf.keras.layers.Input(shape=([2, 1]))
in1Min18931 = tf.keras.layers.Input(shape=([2, 1]))

Min10646 = keras.layers.Minimum(name = 'Min10646', )([in0Min10646,in1Min10646])
Min18931 = keras.layers.Minimum(name = 'Min18931', )([in0Min18931,in1Min18931])
Res35227 = keras.layers.Reshape((2, 1, 1), name = 'Res35227', )(Min18931)
Cro54413 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro54413', )(Res35227)
Res82198 = keras.layers.Reshape((1, 1), name = 'Res82198', )(Cro54413)
Ave21773 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave21773', )(Res82198)
Zer84804 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer84804', )(Ave21773)
Sub52904 = keras.layers.Subtract(name = 'Sub52904', )([Min10646,Zer84804])
model = tf.keras.models.Model(inputs=[in0Min10646,in1Min10646,in0Min18931,in1Min18931], outputs=Sub52904)
in0Min10646 = tf.constant([[[0.5872], [0.7841]]])
in1Min10646 = tf.constant([[[0.2711], [0.6868]]])
in0Min18931 = tf.constant([[[0.2793], [0.9523]]])
in1Min18931 = tf.constant([[[0.5997], [0.0591]]])
print (np.array2string(model.predict([in0Min10646,in1Min10646,in0Min18931,in1Min18931],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub52904.png')

LMin10646 = minimum_layer([[[[0.5872], [0.7841]]], [[[0.2711], [0.6868]]]], Min10646), 
LMin18931 = minimum_layer([[[[0.2793], [0.9523]]], [[[0.5997], [0.0591]]]], Min18931), 
LRes35227 = reshape_layer(Min18931, [2, 1, 1], Res35227), 
LCro54413 = cropping2D_layer(Res35227, 1, 0, 0, 0, Cro54413), 
LRes82198 = reshape_layer(Cro54413, [1, 1], Res82198), 
LAve21773 = average_pooling1D_layer(Res82198, 1, Ave21773), 
LZer84804 = zero_padding1D_layer(Ave21773, 1, 0, Zer84804), 
LSub52904 = subtract_layer(Min10646,Zer84804, Sub52904), 
exec_layers([LMin10646,LMin18931,LRes35227,LCro54413,LRes82198,LAve21773,LZer84804,LSub52904],["Min10646","Min18931","Res35227","Cro54413","Res82198","Ave21773","Zer84804","Sub52904"],Sub52904,"Sub52904")

Actual (Unparsed): [[[0.2711000], [0.6277000]]]

Expected (Unparsed): [[[0.2711],[0.6276999999999999]]]

Actual:   [[[0.2711], [0.6277]]]

Expected: [[[0.2711], [0.6277]]]