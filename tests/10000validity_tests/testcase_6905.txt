import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min58437 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Min58437 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0ReL32593 = tf.keras.layers.Input(shape=([1, 1]))
in0Con64430 = tf.keras.layers.Input(shape=([1, 3]))
in0Ave35775 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave35775 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Glo5266 = tf.keras.layers.Input(shape=([2, 1]))

Min58437 = keras.layers.Minimum(name = 'Min58437', )([in0Min58437,in1Min58437])
Res65407 = keras.layers.Reshape((1, 1, 4), name = 'Res65407', )(Min58437)
Res78869 = keras.layers.Reshape((1, 4), name = 'Res78869', )(Res65407)
ReL32593 = keras.layers.ReLU(max_value=3.007893252738843, negative_slope=6.1317913845887215, threshold=0.20372130253114684, name = 'ReL32593', input_shape=(1, 1))(in0ReL32593)
Con64430 = keras.layers.Concatenate(axis=2, name = 'Con64430', )([ReL32593,in0Con64430])
Mul61572 = keras.layers.Multiply(name = 'Mul61572', )([Res78869,Con64430])
Res57929 = keras.layers.Reshape((1, 4, 1), name = 'Res57929', )(Mul61572)
Ave35775 = keras.layers.Average(name = 'Ave35775', )([in0Ave35775,in1Ave35775])
Zer35333 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer35333', )(Ave35775)
Max47444 = keras.layers.Maximum(name = 'Max47444', )([Res57929,Zer35333])
Res5852 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res5852', )(Max47444)
Glo8840 = keras.layers.GlobalMaxPool3D(name = 'Glo8840', )(Res5852)
Glo5266 = keras.layers.GlobalMaxPool1D(name = 'Glo5266', )(in0Glo5266)
Mas26722 = keras.layers.Masking(mask_value=2, name = 'Mas26722', )(Glo5266)
ELU33172 = keras.layers.ELU(alpha=-6.189918595635069, name = 'ELU33172', )(Mas26722)
Dot85310 = keras.layers.Dot(axes=(1, 1), name = 'Dot85310', )([Glo8840,ELU33172])
model = tf.keras.models.Model(inputs=[in0Min58437,in1Min58437,in0ReL32593,in0Con64430,in0Ave35775,in1Ave35775,in0Glo5266], outputs=Dot85310)
in0Min58437 = tf.constant([[[[[0.5142, 0.646], [0.5381, 0.7961]]]]])
in1Min58437 = tf.constant([[[[[0.9554, 0.854], [0.9182, 0.2145]]]]])
in0ReL32593 = tf.constant([[[0.6826]]])
in0Con64430 = tf.constant([[[0.0772, 0.5169, 0.492]]])
in0Ave35775 = tf.constant([[[[0.6541], [0.746]]]])
in1Ave35775 = tf.constant([[[[0.7699], [0.0878]]]])
in0Glo5266 = tf.constant([[[1.5434], [1.5916]]])
print (np.array2string(model.predict([in0Min58437,in1Min58437,in0ReL32593,in0Con64430,in0Ave35775,in1Ave35775,in0Glo5266],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot85310.png')

LMin58437 = minimum_layer([[[[[[0.5142, 0.646], [0.5381, 0.7961]]]]], [[[[[0.9554, 0.854], [0.9182, 0.2145]]]]]], Min58437), 
LRes65407 = reshape_layer(Min58437, [1, 1, 4], Res65407), 
LRes78869 = reshape_layer(Res65407, [1, 4], Res78869), 
LReL32593 = relu_layer([[[0.6826]]], 3.007893252738843, 6.1317913845887215, 0.20372130253114684, ReL32593), 
LCon64430 = concatenate_layer([ReL32593,[[[0.0772, 0.5169, 0.492]]]], 2, Con64430), 
LMul61572 = multiply_layer([Res78869,Con64430], Mul61572), 
LRes57929 = reshape_layer(Mul61572, [1, 4, 1], Res57929), 
LAve35775 = average_layer([[[[[0.6541], [0.746]]]], [[[[0.7699], [0.0878]]]]], Ave35775), 
LZer35333 = zero_padding2D_layer(Ave35775, 0, 0, 2, 0, Zer35333), 
LMax47444 = maximum_layer([Res57929,Zer35333], Max47444), 
LRes5852 = reshape_layer(Max47444, [1, 4, 1, 1], Res5852), 
LGlo8840 = global_max_pool3D_layer(Res5852, Glo8840), 
LGlo5266 = global_max_pool1D_layer([[[1.5434], [1.5916]]], Glo5266), 
LMas26722 = masking_layer(Glo5266, 2, Mas26722), 
LELU33172 = elu_layer(Mas26722, -6.189918595635069, ELU33172), 
LDot85310 = dot_layer(Glo8840,ELU33172, 1, 1, Dot85310), 
exec_layers([LMin58437,LRes65407,LRes78869,LReL32593,LCon64430,LMul61572,LRes57929,LAve35775,LZer35333,LMax47444,LRes5852,LGlo8840,LGlo5266,LMas26722,LELU33172,LDot85310],["Min58437","Res65407","Res78869","ReL32593","Con64430","Mul61572","Res57929","Ave35775","Zer35333","Max47444","Res5852","Glo8840","Glo5266","Mas26722","ELU33172","Dot85310"],Dot85310,"Dot85310")

Actual (Unparsed): [[1.1332192]]

Expected (Unparsed): [[1.1332191999999999]]

Actual:   [[1.1333]]

Expected: [[1.1333]]