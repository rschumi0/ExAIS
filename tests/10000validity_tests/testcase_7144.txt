import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max74487 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max74487 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Glo31275 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Con43277 = tf.keras.layers.Input(shape=([2, 1]))
in0Ave22350 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave22350 = tf.keras.layers.Input(shape=([2, 1, 1]))

Max74487 = keras.layers.Maximum(name = 'Max74487', )([in0Max74487,in1Max74487])
Res86506 = keras.layers.Reshape((2, 1), name = 'Res86506', )(Max74487)
Glo31275 = keras.layers.GlobalAveragePooling3D(name = 'Glo31275', )(in0Glo31275)
Res85877 = keras.layers.Reshape((2, 1), name = 'Res85877', )(Glo31275)
Max3839 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='same', name = 'Max3839', )(Res85877)
Dot41787 = keras.layers.Dot(axes=(2, 2), name = 'Dot41787', )([Res86506,Max3839])
Con43277 = keras.layers.Concatenate(axis=2, name = 'Con43277', )([Dot41787,in0Con43277])
Ave22350 = keras.layers.Average(name = 'Ave22350', )([in0Ave22350,in1Ave22350])
Res17954 = keras.layers.Reshape((2, 1), name = 'Res17954', )(Ave22350)
Dot68389 = keras.layers.Dot(axes=(1, 1), name = 'Dot68389', )([Con43277,Res17954])
model = tf.keras.models.Model(inputs=[in0Max74487,in1Max74487,in0Glo31275,in0Con43277,in0Ave22350,in1Ave22350], outputs=Dot68389)
in0Max74487 = tf.constant([[[[0.0244]], [[0.3187]]]])
in1Max74487 = tf.constant([[[[0.9325]], [[0.2572]]]])
in0Glo31275 = tf.constant([[[[[1.7846, 1.0432]], [[1.3121, 1.7314]]]]])
in0Con43277 = tf.constant([[[0.5548], [0.1018]]])
in0Ave22350 = tf.constant([[[[0.3108]], [[0.5076]]]])
in1Ave22350 = tf.constant([[[[0.7022]], [[0.6373]]]])
print (np.array2string(model.predict([in0Max74487,in1Max74487,in0Glo31275,in0Con43277,in0Ave22350,in1Ave22350],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot68389.png')

LMax74487 = maximum_layer([[[[[0.0244]], [[0.3187]]]], [[[[0.9325]], [[0.2572]]]]], Max74487), 
LRes86506 = reshape_layer(Max74487, [2, 1], Res86506), 
LGlo31275 = global_average_pooling3D_layer([[[[[1.7846, 1.0432]], [[1.3121, 1.7314]]]]], Glo31275), 
LRes85877 = reshape_layer(Glo31275, [2, 1], Res85877), 
LMax3839 = max_pool1D_layer(Res85877, 2, 1, true, Max3839), 
LDot41787 = dot_layer(Res86506,Max3839, 2, 2, Dot41787), 
LCon43277 = concatenate_layer([Dot41787,[[[0.5548], [0.1018]]]], 2, Con43277), 
LAve22350 = average_layer([[[[[0.3108]], [[0.5076]]]], [[[[0.7022]], [[0.6373]]]]], Ave22350), 
LRes17954 = reshape_layer(Ave22350, [2, 1], Res17954), 
LDot68389 = dot_layer(Con43277,Res17954, 1, 1, Dot68389), 
exec_layers([LMax74487,LRes86506,LGlo31275,LRes85877,LMax3839,LDot41787,LCon43277,LAve22350,LRes17954,LDot68389],["Max74487","Res86506","Glo31275","Res85877","Max3839","Dot41787","Con43277","Ave22350","Res17954","Dot68389"],Dot68389,"Dot68389")

Actual (Unparsed): [[[1.0137838], [0.9083361], [0.3392816]]]

Expected (Unparsed): [[[1.01378381149275],[0.9083361524745001],[0.33928161]]]

Actual:   [[[1.0138], [0.9084], [0.3393]]]

Expected: [[[1.0138], [0.9084], [0.3393]]]