import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave54208 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave54208 = tf.keras.layers.Input(shape=([1, 1]))
in0Min3070 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Min3070 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Mul60098 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Mul60098 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Dot80962 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot80962 = tf.keras.layers.Input(shape=([2, 3]))
in0Add56108 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add56108 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Ave54208 = keras.layers.Average(name = 'Ave54208', )([in0Ave54208,in1Ave54208])
Res1439 = keras.layers.Reshape((1, 1, 1), name = 'Res1439', )(Ave54208)
Min3070 = keras.layers.Minimum(name = 'Min3070', )([in0Min3070,in1Min3070])
Res57717 = keras.layers.Reshape((1, 1, 1), name = 'Res57717', )(Min3070)
Sub70019 = keras.layers.Subtract(name = 'Sub70019', )([Res1439,Res57717])
Res15645 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res15645', )(Sub70019)
Zer35925 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (0, 0)), name = 'Zer35925', )(Res15645)
Mul60098 = keras.layers.Multiply(name = 'Mul60098', )([in0Mul60098,in1Mul60098])
Zer85825 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (0, 0)), name = 'Zer85825', )(Mul60098)
Dot80962 = keras.layers.Dot(axes=(1, 1), name = 'Dot80962', )([in0Dot80962,in1Dot80962])
Res24012 = keras.layers.Reshape((3, 3, 1), name = 'Res24012', )(Dot80962)
Res576 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res576', )(Res24012)
Add56108 = keras.layers.Add(name = 'Add56108', )([in0Add56108,in1Add56108])
Zer81944 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (0, 0)), name = 'Zer81944', )(Add56108)
Sub4031 = keras.layers.Subtract(name = 'Sub4031', )([Res576,Zer81944])
Min96539 = keras.layers.Minimum(name = 'Min96539', )([Zer85825,Sub4031])
Mul75965 = keras.layers.Multiply(name = 'Mul75965', )([Zer35925,Min96539])
model = tf.keras.models.Model(inputs=[in0Ave54208,in1Ave54208,in0Min3070,in1Min3070,in0Mul60098,in1Mul60098,in0Dot80962,in1Dot80962,in0Add56108,in1Add56108], outputs=Mul75965)
in0Ave54208 = tf.constant([[[0.9311]]])
in1Ave54208 = tf.constant([[[0.6679]]])
in0Min3070 = tf.constant([[[[[0.5066]]]]])
in1Min3070 = tf.constant([[[[[0.7304]]]]])
in0Mul60098 = tf.constant([[[[[0.2587]]]]])
in1Mul60098 = tf.constant([[[[[0.3351]]]]])
in0Dot80962 = tf.constant([[[0.9156, 0.6545, 0.7578], [0.8674, 0.3614, 0.8146]]])
in1Dot80962 = tf.constant([[[0.1202, 0.9027, 0.7536], [0.883, 0.2522, 0.5686]]])
in0Add56108 = tf.constant([[[[[0.5651]], [[0.8628]]]]])
in1Add56108 = tf.constant([[[[[0.821]], [[0.0693]]]]])
print (np.array2string(model.predict([in0Ave54208,in1Ave54208,in0Min3070,in1Min3070,in0Mul60098,in1Mul60098,in0Dot80962,in1Dot80962,in0Add56108,in1Add56108],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul75965.png')

LAve54208 = average_layer([[[[0.9311]]], [[[0.6679]]]], Ave54208), 
LRes1439 = reshape_layer(Ave54208, [1, 1, 1], Res1439), 
LMin3070 = minimum_layer([[[[[[0.5066]]]]], [[[[[0.7304]]]]]], Min3070), 
LRes57717 = reshape_layer(Min3070, [1, 1, 1], Res57717), 
LSub70019 = subtract_layer(Res1439,Res57717, Sub70019), 
LRes15645 = reshape_layer(Sub70019, [1, 1, 1, 1], Res15645), 
LZer35925 = zero_padding3D_layer(Res15645, 2, 0, 2, 0, 0, 0, Zer35925), 
LMul60098 = multiply_layer([[[[[[0.2587]]]]], [[[[[0.3351]]]]]], Mul60098), 
LZer85825 = zero_padding3D_layer(Mul60098, 2, 0, 2, 0, 0, 0, Zer85825), 
LDot80962 = dot_layer([[[0.9156, 0.6545, 0.7578], [0.8674, 0.3614, 0.8146]]], [[[0.1202, 0.9027, 0.7536], [0.883, 0.2522, 0.5686]]], 1, 1, Dot80962), 
LRes24012 = reshape_layer(Dot80962, [3, 3, 1], Res24012), 
LRes576 = reshape_layer(Res24012, [3, 3, 1, 1], Res576), 
LAdd56108 = add_layer([[[[[[0.5651]], [[0.8628]]]]], [[[[[0.821]], [[0.0693]]]]]], Add56108), 
LZer81944 = zero_padding3D_layer(Add56108, 2, 0, 1, 0, 0, 0, Zer81944), 
LSub4031 = subtract_layer(Res576,Zer81944, Sub4031), 
LMin96539 = minimum_layer([Zer85825,Sub4031], Min96539), 
LMul75965 = multiply_layer([Zer35925,Min96539], Mul75965), 
exec_layers([LAve54208,LRes1439,LMin3070,LRes57717,LSub70019,LRes15645,LZer35925,LMul60098,LZer85825,LDot80962,LRes24012,LRes576,LAdd56108,LZer81944,LSub4031,LMin96539,LMul75965],["Ave54208","Res1439","Min3070","Res57717","Sub70019","Res15645","Zer35925","Mul60098","Zer85825","Dot80962","Res24012","Res576","Add56108","Zer81944","Sub4031","Min96539","Mul75965"],Mul75965,"Mul75965")

Actual (Unparsed): [[[[[0.0000000]], [[0.0000000]], [[0.0000000]]], [[[0.0000000]], [[0.0000000]], [[0.0000000]]], [[[0.0000000]], [[-0.0000000]], [[0.0253916]]]]]

Expected (Unparsed): [[[[[0]],[[0]],[[0]]],[[[0]],[[0]],[[0]]],[[[0]],[[-0.0]],[[0.025391609373000005]]]]]

Actual:   [[[[[0]], [[0]], [[0]]], [[[0]], [[0]], [[0]]], [[[0]], [[-0]], [[0.0254]]]]]

Expected: [[[[[0]], [[0]], [[0]]], [[[0]], [[0]], [[0]]], [[[0]], [[-0]], [[0.0254]]]]]