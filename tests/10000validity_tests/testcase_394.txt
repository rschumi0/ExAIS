import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min34505 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Min34505 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Dot28843 = tf.keras.layers.Input(shape=([2]))
in1Dot28843 = tf.keras.layers.Input(shape=([2]))

Min34505 = keras.layers.Minimum(name = 'Min34505', )([in0Min34505,in1Min34505])
Loc1800 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 2), name = 'Loc1800', )(Min34505)
Res46060 = keras.layers.Reshape((2, 1, 2, 1), name = 'Res46060', )(Loc1800)
Zer67309 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (1, 0)), name = 'Zer67309', )(Res46060)
Dot28843 = keras.layers.Dot(axes=(1, 1), name = 'Dot28843', )([in0Dot28843,in1Dot28843])
Res54874 = keras.layers.Reshape((1, 1), name = 'Res54874', )(Dot28843)
Up_53414 = keras.layers.UpSampling1D(size=(1), name = 'Up_53414', )(Res54874)
Res93710 = keras.layers.Reshape((1, 1, 1), name = 'Res93710', )(Up_53414)
Res77299 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res77299', )(Res93710)
Zer33567 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer33567', )(Res77299)
Min55767 = keras.layers.Minimum(name = 'Min55767', )([Zer67309,Zer33567])
model = tf.keras.models.Model(inputs=[in0Min34505,in1Min34505,in0Dot28843,in1Dot28843], outputs=Min55767)
w = model.get_layer('Loc1800').get_weights() 
w[0] = np.array([[[0.4875, 0.1401]], [[0.4177, 0.6237]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc1800').set_weights(w) 
in0Min34505 = tf.constant([[[[0.5434], [0.7864]], [[0.8066], [0.1059]]]])
in1Min34505 = tf.constant([[[[0.3219], [0.7309]], [[0.3257], [0.9876]]]])
in0Dot28843 = tf.constant([[0.8939, 0.5211]])
in1Dot28843 = tf.constant([[0.3994, 0.8262]])
print (np.array2string(model.predict([in0Min34505,in1Min34505,in0Dot28843,in1Dot28843],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min55767.png')

LMin34505 = minimum_layer([[[[[0.5434], [0.7864]], [[0.8066], [0.1059]]]], [[[[0.3219], [0.7309]], [[0.3257], [0.9876]]]]], Min34505), 
LLoc1800 = locally_connected2D_layer(Min34505, 1, 1,[[[0.4875, 0.1401]], [[0.4177, 0.6237]]],[[[0, 0]], [[0, 0]]], 1, 2, Loc1800), 
LRes46060 = reshape_layer(Loc1800, [2, 1, 2, 1], Res46060), 
LZer67309 = zero_padding3D_layer(Res46060, 1, 0, 2, 0, 1, 0, Zer67309), 
LDot28843 = dot_layer([[0.8939, 0.5211]], [[0.3994, 0.8262]], 1, 1, Dot28843), 
LRes54874 = reshape_layer(Dot28843, [1, 1], Res54874), 
LUp_53414 = up_sampling1D_layer(Res54874, 1, Up_53414), 
LRes93710 = reshape_layer(Up_53414, [1, 1, 1], Res93710), 
LRes77299 = reshape_layer(Res93710, [1, 1, 1, 1], Res77299), 
LZer33567 = zero_padding3D_layer(Res77299, 1, 1, 1, 1, 1, 1, Zer33567), 
LMin55767 = minimum_layer([Zer67309,Zer33567], Min55767), 
exec_layers([LMin34505,LLoc1800,LRes46060,LZer67309,LDot28843,LRes54874,LUp_53414,LRes93710,LRes77299,LZer33567,LMin55767],["Min34505","Loc1800","Res46060","Zer67309","Dot28843","Res54874","Up_53414","Res93710","Res77299","Zer33567","Min55767"],Min55767,"Min55767")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]