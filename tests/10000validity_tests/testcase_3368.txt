import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub5636 = tf.keras.layers.Input(shape=([3, 2]))
in1Sub5636 = tf.keras.layers.Input(shape=([3, 2]))
in0Add86954 = tf.keras.layers.Input(shape=([1, 2]))
in1Add86954 = tf.keras.layers.Input(shape=([1, 2]))
in0Con25348 = tf.keras.layers.Input(shape=([3, 3, 1, 1]))
in0Dot36227 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot36227 = tf.keras.layers.Input(shape=([3, 3]))
in0Con51505 = tf.keras.layers.Input(shape=([3, 3, 1, 1]))
in0Min23604 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Min23604 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Sub5636 = keras.layers.Subtract(name = 'Sub5636', )([in0Sub5636,in1Sub5636])
Res93245 = keras.layers.Reshape((3, 2, 1), name = 'Res93245', )(Sub5636)
Cro67280 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro67280', )(Res93245)
Res96986 = keras.layers.Reshape((2, 2), name = 'Res96986', )(Cro67280)
Add86954 = keras.layers.Add(name = 'Add86954', )([in0Add86954,in1Add86954])
Ave6711 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave6711', )(Add86954)
Zer22229 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer22229', )(Ave6711)
Ave73099 = keras.layers.Average(name = 'Ave73099', )([Res96986,Zer22229])
Fla23305 = keras.layers.Flatten(name = 'Fla23305', )(Ave73099)
Res17689 = keras.layers.Reshape((4, 1), name = 'Res17689', )(Fla23305)
Glo61599 = keras.layers.GlobalAveragePooling1D(name = 'Glo61599', )(Res17689)
Res59696 = keras.layers.Reshape((1, 1), name = 'Res59696', )(Glo61599)
Res28835 = keras.layers.Reshape((1, 1, 1), name = 'Res28835', )(Res59696)
Res507 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res507', )(Res28835)
Zer96433 = keras.layers.ZeroPadding3D(padding=((2, 0), (2, 0), (0, 0)), name = 'Zer96433', )(Res507)
Con25348 = keras.layers.Concatenate(axis=4, name = 'Con25348', )([Zer96433,in0Con25348])
Dot36227 = keras.layers.Dot(axes=(1, 1), name = 'Dot36227', )([in0Dot36227,in1Dot36227])
Per34768 = keras.layers.Permute((2,1), name = 'Per34768',)(Dot36227)
Res48827 = keras.layers.Reshape((3, 3, 1), name = 'Res48827', )(Per34768)
Res86308 = keras.layers.Reshape((3, 3, 1, 1), name = 'Res86308', )(Res48827)
Con51505 = keras.layers.Concatenate(axis=4, name = 'Con51505', )([Res86308,in0Con51505])
Min23604 = keras.layers.Minimum(name = 'Min23604', )([in0Min23604,in1Min23604])
Zer24312 = keras.layers.ZeroPadding3D(padding=((1, 0), (2, 0), (0, 0)), name = 'Zer24312', )(Min23604)
Add61988 = keras.layers.Add(name = 'Add61988', )([Con51505,Zer24312])
Min20247 = keras.layers.Minimum(name = 'Min20247', )([Con25348,Add61988])
model = tf.keras.models.Model(inputs=[in0Sub5636,in1Sub5636,in0Add86954,in1Add86954,in0Con25348,in0Dot36227,in1Dot36227,in0Con51505,in0Min23604,in1Min23604], outputs=Min20247)
in0Sub5636 = tf.constant([[[0.8108, 0.2054], [0.1054, 0.5], [0.7991, 0.7097]]])
in1Sub5636 = tf.constant([[[0.5305, 0.7889], [0.1997, 0.3312], [0.4249, 0.3593]]])
in0Add86954 = tf.constant([[[0.1602, 0.4401]]])
in1Add86954 = tf.constant([[[0.9017, 0.8988]]])
in0Con25348 = tf.constant([[[[[0.5934]], [[0.4574]], [[0.5449]]], [[[0.4857]], [[0.0674]], [[0.4434]]], [[[0.2796]], [[0.7412]], [[0.7457]]]]])
in0Dot36227 = tf.constant([[[0.7189, 0.8841, 0.4488], [0.6402, 0.3347, 0.3739], [0.8618, 0.8189, 0.1449]]])
in1Dot36227 = tf.constant([[[0.5555, 0.2234, 0.8501], [0.5296, 0.5438, 0.1311], [0.9948, 0.2789, 0.8854]]])
in0Con51505 = tf.constant([[[[[0.6205]], [[0.9698]], [[0.7397]]], [[[0.6558]], [[0.0257]], [[0.0462]]], [[[0.534]], [[0.6775]], [[0.3817]]]]])
in0Min23604 = tf.constant([[[[[0.7791, 0.9318]]], [[[0.3664, 0.9555]]]]])
in1Min23604 = tf.constant([[[[[0.5644, 0.1661]]], [[[0.1268, 0.9181]]]]])
print (np.array2string(model.predict([in0Sub5636,in1Sub5636,in0Add86954,in1Add86954,in0Con25348,in0Dot36227,in1Dot36227,in0Con51505,in0Min23604,in1Min23604],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min20247.png')

LSub5636 = subtract_layer([[[0.8108, 0.2054], [0.1054, 0.5], [0.7991, 0.7097]]], [[[0.5305, 0.7889], [0.1997, 0.3312], [0.4249, 0.3593]]], Sub5636), 
LRes93245 = reshape_layer(Sub5636, [3, 2, 1], Res93245), 
LCro67280 = cropping2D_layer(Res93245, 1, 0, 0, 0, Cro67280), 
LRes96986 = reshape_layer(Cro67280, [2, 2], Res96986), 
LAdd86954 = add_layer([[[[0.1602, 0.4401]]], [[[0.9017, 0.8988]]]], Add86954), 
LAve6711 = average_pooling1D_layer(Add86954, 1, Ave6711), 
LZer22229 = zero_padding1D_layer(Ave6711, 1, 0, Zer22229), 
LAve73099 = average_layer([Res96986,Zer22229], Ave73099), 
LFla23305 = flatten_layer(Ave73099, Fla23305), 
LRes17689 = reshape_layer(Fla23305, [4, 1], Res17689), 
LGlo61599 = global_average_pooling1D_layer(Res17689, Glo61599), 
LRes59696 = reshape_layer(Glo61599, [1, 1], Res59696), 
LRes28835 = reshape_layer(Res59696, [1, 1, 1], Res28835), 
LRes507 = reshape_layer(Res28835, [1, 1, 1, 1], Res507), 
LZer96433 = zero_padding3D_layer(Res507, 2, 0, 2, 0, 0, 0, Zer96433), 
LCon25348 = concatenate_layer([Zer96433,[[[[[0.5934]], [[0.4574]], [[0.5449]]], [[[0.4857]], [[0.0674]], [[0.4434]]], [[[0.2796]], [[0.7412]], [[0.7457]]]]]], 4, Con25348), 
LDot36227 = dot_layer([[[0.7189, 0.8841, 0.4488], [0.6402, 0.3347, 0.3739], [0.8618, 0.8189, 0.1449]]], [[[0.5555, 0.2234, 0.8501], [0.5296, 0.5438, 0.1311], [0.9948, 0.2789, 0.8854]]], 1, 1, Dot36227), 
LPer34768 = permute_layer(Dot36227, 2,1, Per34768), 
LRes48827 = reshape_layer(Per34768, [3, 3, 1], Res48827), 
LRes86308 = reshape_layer(Res48827, [3, 3, 1, 1], Res86308), 
LCon51505 = concatenate_layer([Res86308,[[[[[0.6205]], [[0.9698]], [[0.7397]]], [[[0.6558]], [[0.0257]], [[0.0462]]], [[[0.534]], [[0.6775]], [[0.3817]]]]]], 4, Con51505), 
LMin23604 = minimum_layer([[[[[[0.7791, 0.9318]]], [[[0.3664, 0.9555]]]]], [[[[[0.5644, 0.1661]]], [[[0.1268, 0.9181]]]]]], Min23604), 
LZer24312 = zero_padding3D_layer(Min23604, 1, 0, 2, 0, 0, 0, Zer24312), 
LAdd61988 = add_layer([Con51505,Zer24312], Add61988), 
LMin20247 = minimum_layer([Con25348,Add61988], Min20247), 
exec_layers([LSub5636,LRes93245,LCro67280,LRes96986,LAdd86954,LAve6711,LZer22229,LAve73099,LFla23305,LRes17689,LGlo61599,LRes59696,LRes28835,LRes507,LZer96433,LCon25348,LDot36227,LPer34768,LRes48827,LRes86308,LCon51505,LMin23604,LZer24312,LAdd61988,LMin20247],["Sub5636","Res93245","Cro67280","Res96986","Add86954","Ave6711","Zer22229","Ave73099","Fla23305","Res17689","Glo61599","Res59696","Res28835","Res507","Zer96433","Con25348","Dot36227","Per34768","Res48827","Res86308","Con51505","Min23604","Zer24312","Add61988","Min20247"],Min20247,"Min20247")

Actual (Unparsed): [[[[[0.0000000, 0.5934000]], [[0.0000000, 0.4574000]], [[0.0000000, 0.5449000]]], [[[0.0000000, 0.4857000]], [[0.0000000, 0.0257000]], [[0.0000000, 0.2123000]]], [[[0.0000000, 0.2796000]], [[0.0000000, 0.6775000]], [[0.3999875, 0.7457000]]]]]

Expected (Unparsed): [[[[[0,0.5934]],[[0,0.4574]],[[0,0.5449]]],[[[0,0.4857]],[[0,0.0257]],[[0,0.2123]]],[[[0,0.2796]],[[0,0.6775]],[[0.39998750000000005,0.7457]]]]]

Actual:   [[[[[0, 0.5934]], [[0, 0.4574]], [[0, 0.5449]]], [[[0, 0.4857]], [[0, 0.0257]], [[0, 0.2123]]], [[[0, 0.2796]], [[0, 0.6775]], [[0.4, 0.7457]]]]]

Expected: [[[[[0, 0.5934]], [[0, 0.4574]], [[0, 0.5449]]], [[[0, 0.4857]], [[0, 0.0257]], [[0, 0.2123]]], [[[0, 0.2796]], [[0, 0.6775]], [[0.4, 0.7457]]]]]