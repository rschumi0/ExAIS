import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave83344 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Ave83344 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))

Ave83344 = keras.layers.Average(name = 'Ave83344', )([in0Ave83344,in1Ave83344])
Res25445 = keras.layers.Reshape((2, 2, 2), name = 'Res25445', )(Ave83344)
Res43412 = keras.layers.Reshape((2, 4), name = 'Res43412', )(Res25445)
Zer73836 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer73836', )(Res43412)
model = tf.keras.models.Model(inputs=[in0Ave83344,in1Ave83344], outputs=Zer73836)
in0Ave83344 = tf.constant([[[[[0.7472, 0.5547]], [[0.1675, 0.137]]], [[[0.3884, 0.0888]], [[0.3005, 0.5249]]]]])
in1Ave83344 = tf.constant([[[[[0.416, 0.6795]], [[0.834, 0.3235]]], [[[0.1014, 0.247]], [[0.2951, 0.061]]]]])
print (np.array2string(model.predict([in0Ave83344,in1Ave83344],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer73836.png')

LAve83344 = average_layer([[[[[[0.7472, 0.5547]], [[0.1675, 0.137]]], [[[0.3884, 0.0888]], [[0.3005, 0.5249]]]]], [[[[[0.416, 0.6795]], [[0.834, 0.3235]]], [[[0.1014, 0.247]], [[0.2951, 0.061]]]]]], Ave83344), 
LRes25445 = reshape_layer(Ave83344, [2, 2, 2], Res25445), 
LRes43412 = reshape_layer(Res25445, [2, 4], Res43412), 
LZer73836 = zero_padding1D_layer(Res43412, 1, 1, Zer73836), 
exec_layers([LAve83344,LRes25445,LRes43412,LZer73836],["Ave83344","Res25445","Res43412","Zer73836"],Zer73836,"Zer73836")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.5816000, 0.6171000, 0.5007500, 0.2302500], [0.2449000, 0.1679000, 0.2978000, 0.2929500], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0],[0.5816,0.6171,0.50075,0.23025],[0.2449,0.1679,0.29779999999999995,0.29295000000000004],[0,0,0,0]]]

Actual:   [[[0, 0, 0, 0], [0.5816, 0.6171, 0.5008, 0.2303], [0.2449, 0.1679, 0.2978, 0.293], [0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0], [0.5816, 0.6171, 0.5008, 0.2303], [0.2449, 0.1679, 0.2978, 0.293], [0, 0, 0, 0]]]