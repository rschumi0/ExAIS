import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave22950 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Ave22950 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Add22368 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Add22368 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Sub88070 = tf.keras.layers.Input(shape=([3]))
in1Sub88070 = tf.keras.layers.Input(shape=([3]))
in0Con54102 = tf.keras.layers.Input(shape=([1]))
in0ReL14075 = tf.keras.layers.Input(shape=([1, 1]))
in0Con72276 = tf.keras.layers.Input(shape=([1, 3]))

Ave22950 = keras.layers.Average(name = 'Ave22950', )([in0Ave22950,in1Ave22950])
Res52684 = keras.layers.Reshape((1, 2, 2), name = 'Res52684', )(Ave22950)
Add22368 = keras.layers.Add(name = 'Add22368', )([in0Add22368,in1Add22368])
Res78850 = keras.layers.Reshape((1, 1, 4), name = 'Res78850', )(Add22368)
Res26523 = keras.layers.Reshape((1, 4), name = 'Res26523', )(Res78850)
Fla63217 = keras.layers.Flatten(name = 'Fla63217', )(Res26523)
Sub88070 = keras.layers.Subtract(name = 'Sub88070', )([in0Sub88070,in1Sub88070])
Con54102 = keras.layers.Concatenate(axis=1, name = 'Con54102', )([Sub88070,in0Con54102])
Min89751 = keras.layers.Minimum(name = 'Min89751', )([Fla63217,Con54102])
Res40758 = keras.layers.Reshape((1, 2, 2), name = 'Res40758', )(Min89751)
Ave51865 = keras.layers.Average(name = 'Ave51865', )([Res52684,Res40758])
Res72132 = keras.layers.Reshape((1, 4), name = 'Res72132', )(Ave51865)
ReL14075 = keras.layers.ReLU(max_value=7.186740891615189, negative_slope=2.374428848390121, threshold=2.39043127455545, name = 'ReL14075', input_shape=(1, 1))(in0ReL14075)
Con72276 = keras.layers.Concatenate(axis=2, name = 'Con72276', )([ReL14075,in0Con72276])
Min60090 = keras.layers.Minimum(name = 'Min60090', )([Res72132,Con72276])
model = tf.keras.models.Model(inputs=[in0Ave22950,in1Ave22950,in0Add22368,in1Add22368,in0Sub88070,in1Sub88070,in0Con54102,in0ReL14075,in0Con72276], outputs=Min60090)
in0Ave22950 = tf.constant([[[[[0.8549], [0.9124]], [[0.441], [0.7375]]]]])
in1Ave22950 = tf.constant([[[[[0.4711], [0.2141]], [[0.2077], [0.8152]]]]])
in0Add22368 = tf.constant([[[[[0.8844, 0.3633], [0.2364, 0.1513]]]]])
in1Add22368 = tf.constant([[[[[0.0106, 0.537], [0.0637, 0.1542]]]]])
in0Sub88070 = tf.constant([[0.0417, 0.6426, 0.7919]])
in1Sub88070 = tf.constant([[0.9003, 0.9495, 0.6056]])
in0Con54102 = tf.constant([[0.5182]])
in0ReL14075 = tf.constant([[[0.0961]]])
in0Con72276 = tf.constant([[[0.6055, 0.9326, 0.2291]]])
print (np.array2string(model.predict([in0Ave22950,in1Ave22950,in0Add22368,in1Add22368,in0Sub88070,in1Sub88070,in0Con54102,in0ReL14075,in0Con72276],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min60090.png')

LAve22950 = average_layer([[[[[[0.8549], [0.9124]], [[0.441], [0.7375]]]]], [[[[[0.4711], [0.2141]], [[0.2077], [0.8152]]]]]], Ave22950), 
LRes52684 = reshape_layer(Ave22950, [1, 2, 2], Res52684), 
LAdd22368 = add_layer([[[[[[0.8844, 0.3633], [0.2364, 0.1513]]]]], [[[[[0.0106, 0.537], [0.0637, 0.1542]]]]]], Add22368), 
LRes78850 = reshape_layer(Add22368, [1, 1, 4], Res78850), 
LRes26523 = reshape_layer(Res78850, [1, 4], Res26523), 
LFla63217 = flatten_layer(Res26523, Fla63217), 
LSub88070 = subtract_layer([[0.0417, 0.6426, 0.7919]], [[0.9003, 0.9495, 0.6056]], Sub88070), 
LCon54102 = concatenate_layer([Sub88070,[[0.5182]]], 1, Con54102), 
LMin89751 = minimum_layer([Fla63217,Con54102], Min89751), 
LRes40758 = reshape_layer(Min89751, [1, 2, 2], Res40758), 
LAve51865 = average_layer([Res52684,Res40758], Ave51865), 
LRes72132 = reshape_layer(Ave51865, [1, 4], Res72132), 
LReL14075 = relu_layer([[[0.0961]]], 7.186740891615189, 2.374428848390121, 2.39043127455545, ReL14075), 
LCon72276 = concatenate_layer([ReL14075,[[[0.6055, 0.9326, 0.2291]]]], 2, Con72276), 
LMin60090 = minimum_layer([Res72132,Con72276], Min60090), 
exec_layers([LAve22950,LRes52684,LAdd22368,LRes78850,LRes26523,LFla63217,LSub88070,LCon54102,LMin89751,LRes40758,LAve51865,LRes72132,LReL14075,LCon72276,LMin60090],["Ave22950","Res52684","Add22368","Res78850","Res26523","Fla63217","Sub88070","Con54102","Min89751","Res40758","Ave51865","Res72132","ReL14075","Con72276","Min60090"],Min60090,"Min60090")

Actual (Unparsed): [[[-5.4477264, 0.1281750, 0.2553250, 0.2291000]]]

Expected (Unparsed): [[[-5.447726366068135,0.12817499999999998,0.255325,0.2291]]]

Actual:   [[[-5.4477, 0.1282, 0.2554, 0.2291]]]

Expected: [[[-5.4477, 0.1282, 0.2554, 0.2291]]]