import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub86428 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub86428 = tf.keras.layers.Input(shape=([2, 3]))
in0Min24671 = tf.keras.layers.Input(shape=([1, 1]))
in1Min24671 = tf.keras.layers.Input(shape=([1, 1]))
in0Con45859 = tf.keras.layers.Input(shape=([2]))

Sub86428 = keras.layers.Subtract(name = 'Sub86428', )([in0Sub86428,in1Sub86428])
Res71266 = keras.layers.Reshape((2, 3, 1), name = 'Res71266', )(Sub86428)
Loc50274 = keras.layers.LocallyConnected2D(3, (1, 2),strides=(1, 1), name = 'Loc50274', )(Res71266)
Res66633 = keras.layers.Reshape((2, 6), name = 'Res66633', )(Loc50274)
Con45281 = keras.layers.Conv1D(3, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con45281', )(Res66633)
Res74360 = keras.layers.Reshape((1, 3, 1), name = 'Res74360', )(Con45281)
Res87324 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res87324', )(Res74360)
Up_1891 = keras.layers.UpSampling3D(size=(1, 1, 1), name = 'Up_1891', )(Res87324)
Res39876 = keras.layers.Reshape((1, 3, 1), name = 'Res39876', )(Up_1891)
Res17205 = keras.layers.Reshape((1, 3), name = 'Res17205', )(Res39876)
Fla83761 = keras.layers.Flatten(name = 'Fla83761', )(Res17205)
Min24671 = keras.layers.Minimum(name = 'Min24671', )([in0Min24671,in1Min24671])
Glo16280 = keras.layers.GlobalMaxPool1D(name = 'Glo16280', )(Min24671)
Res12417 = keras.layers.Reshape((1, 1), name = 'Res12417', )(Glo16280)
Res66931 = keras.layers.Reshape((1, 1, 1), name = 'Res66931', )(Res12417)
Glo60432 = keras.layers.GlobalAveragePooling2D(name = 'Glo60432', )(Res66931)
Con45859 = keras.layers.Concatenate(axis=1, name = 'Con45859', )([Glo60432,in0Con45859])
Add1744 = keras.layers.Add(name = 'Add1744', )([Fla83761,Con45859])
model = tf.keras.models.Model(inputs=[in0Sub86428,in1Sub86428,in0Min24671,in1Min24671,in0Con45859], outputs=Add1744)
w = model.get_layer('Loc50274').get_weights() 
w[0] = np.array([[[0.728, 0.027, 0.436], [0.0651, 0.7035, 0.808]], [[0.2123, 0.5093, 0.187], [0.7108, 0.2515, 0.8105]], [[0.6857, 0.4585, 0.4782], [0.8762, 0.0246, 0.708]], [[0.0521, 0.6452, 0.92], [0.9049, 0.2582, 0.708]]])
w[1] = np.array([[[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]]])
model.get_layer('Loc50274').set_weights(w) 
w = model.get_layer('Con45281').get_weights() 
w[0] = np.array([[[0.1449, 0.8776, 0.1218], [0.5057, 0.3799, 0.6852], [0.4841, 0.1643, 0.8523], [0.2263, 0.7088, 0.7898], [0.6629, 0.0376, 0.1093], [0.4723, 0.4764, 0.5501]], [[0.9184, 0.1038, 0.6775], [0.2255, 0.9667, 0.9942], [0.6813, 0.7846, 0.5258], [0.0229, 0.5926, 0.3143], [0.0782, 0.2888, 0.5532], [0.2188, 0.0682, 0.1806]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con45281').set_weights(w) 
in0Sub86428 = tf.constant([[[0.554, 0.5952, 0.8944], [0.8392, 0.2152, 0.148]]])
in1Sub86428 = tf.constant([[[0.2278, 0.3796, 0.4423], [0.7489, 0.327, 0.9939]]])
in0Min24671 = tf.constant([[[0.0738]]])
in1Min24671 = tf.constant([[[0.6469]]])
in0Con45859 = tf.constant([[0.2758, 0.6231]])
print (np.array2string(model.predict([in0Sub86428,in1Sub86428,in0Min24671,in1Min24671,in0Con45859],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add1744.png')

LSub86428 = subtract_layer([[[0.554, 0.5952, 0.8944], [0.8392, 0.2152, 0.148]]], [[[0.2278, 0.3796, 0.4423], [0.7489, 0.327, 0.9939]]], Sub86428), 
LRes71266 = reshape_layer(Sub86428, [2, 3, 1], Res71266), 
LLoc50274 = locally_connected2D_layer(Res71266, 1, 2,[[[0.728, 0.027, 0.436], [0.0651, 0.7035, 0.808]], [[0.2123, 0.5093, 0.187], [0.7108, 0.2515, 0.8105]], [[0.6857, 0.4585, 0.4782], [0.8762, 0.0246, 0.708]], [[0.0521, 0.6452, 0.92], [0.9049, 0.2582, 0.708]]],[[[0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]]], 1, 1, Loc50274), 
LRes66633 = reshape_layer(Loc50274, [2, 6], Res66633), 
LCon45281 = conv1D_layer(Res66633, 2,[[[0.1449, 0.8776, 0.1218], [0.5057, 0.3799, 0.6852], [0.4841, 0.1643, 0.8523], [0.2263, 0.7088, 0.7898], [0.6629, 0.0376, 0.1093], [0.4723, 0.4764, 0.5501]], [[0.9184, 0.1038, 0.6775], [0.2255, 0.9667, 0.9942], [0.6813, 0.7846, 0.5258], [0.0229, 0.5926, 0.3143], [0.0782, 0.2888, 0.5532], [0.2188, 0.0682, 0.1806]]],[0, 0, 0], 1, false, 1, Con45281), 
LRes74360 = reshape_layer(Con45281, [1, 3, 1], Res74360), 
LRes87324 = reshape_layer(Res74360, [1, 3, 1, 1], Res87324), 
LUp_1891 = up_sampling3D_layer(Res87324, 1, 1, 1, Up_1891), 
LRes39876 = reshape_layer(Up_1891, [1, 3, 1], Res39876), 
LRes17205 = reshape_layer(Res39876, [1, 3], Res17205), 
LFla83761 = flatten_layer(Res17205, Fla83761), 
LMin24671 = minimum_layer([[[[0.0738]]], [[[0.6469]]]], Min24671), 
LGlo16280 = global_max_pool1D_layer(Min24671, Glo16280), 
LRes12417 = reshape_layer(Glo16280, [1, 1], Res12417), 
LRes66931 = reshape_layer(Res12417, [1, 1, 1], Res66931), 
LGlo60432 = global_average_pooling2D_layer(Res66931, Glo60432), 
LCon45859 = concatenate_layer([Glo60432,[[0.2758, 0.6231]]], 1, Con45859), 
LAdd1744 = add_layer([Fla83761,Con45859], Add1744), 
exec_layers([LSub86428,LRes71266,LLoc50274,LRes66633,LCon45281,LRes74360,LRes87324,LUp_1891,LRes39876,LRes17205,LFla83761,LMin24671,LGlo16280,LRes12417,LRes66931,LGlo60432,LCon45859,LAdd1744],["Sub86428","Res71266","Loc50274","Res66633","Con45281","Res74360","Res87324","Up_1891","Res39876","Res17205","Fla83761","Min24671","Glo16280","Res12417","Res66931","Glo60432","Con45859","Add1744"],Add1744,"Add1744")

Actual (Unparsed): [[0.5251132, 0.4884460, 1.0367391]]

Expected (Unparsed): [[0.5251130922079998,0.48844597782099985,1.036739030892]]

Actual:   [[0.5252, 0.4885, 1.0368]]

Expected: [[0.5252, 0.4885, 1.0368]]