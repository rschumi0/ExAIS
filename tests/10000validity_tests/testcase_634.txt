import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max93739 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max93739 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Sof20572 = tf.keras.layers.Input(shape=([1, 1]))
in0Min58063 = tf.keras.layers.Input(shape=([1, 1]))
in1Min58063 = tf.keras.layers.Input(shape=([1, 1]))
in0Con5440 = tf.keras.layers.Input(shape=([1]))

Max93739 = keras.layers.Maximum(name = 'Max93739', )([in0Max93739,in1Max93739])
Res32050 = keras.layers.Reshape((2, 1), name = 'Res32050', )(Max93739)
Sof20572 = keras.layers.Softmax(axis=1, name = 'Sof20572', input_shape=(1, 1))(in0Sof20572)
Zer56832 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer56832', )(Sof20572)
Mul11946 = keras.layers.Multiply(name = 'Mul11946', )([Res32050,Zer56832])
Fla3652 = keras.layers.Flatten(name = 'Fla3652', )(Mul11946)
Min58063 = keras.layers.Minimum(name = 'Min58063', )([in0Min58063,in1Min58063])
Res26508 = keras.layers.Reshape((1, 1, 1), name = 'Res26508', )(Min58063)
Glo33422 = keras.layers.GlobalMaxPool2D(name = 'Glo33422', )(Res26508)
Con5440 = keras.layers.Concatenate(axis=1, name = 'Con5440', )([Glo33422,in0Con5440])
Ave47712 = keras.layers.Average(name = 'Ave47712', )([Fla3652,Con5440])
Thr5287 = keras.layers.ThresholdedReLU(theta=6.117776873243181, name = 'Thr5287', )(Ave47712)
model = tf.keras.models.Model(inputs=[in0Max93739,in1Max93739,in0Sof20572,in0Min58063,in1Min58063,in0Con5440], outputs=Thr5287)
in0Max93739 = tf.constant([[[[0.3291]], [[0.2958]]]])
in1Max93739 = tf.constant([[[[0.1495]], [[0.7322]]]])
in0Sof20572 = tf.constant([[[0.549]]])
in0Min58063 = tf.constant([[[0.362]]])
in1Min58063 = tf.constant([[[0.6143]]])
in0Con5440 = tf.constant([[0.0437]])
print (np.array2string(model.predict([in0Max93739,in1Max93739,in0Sof20572,in0Min58063,in1Min58063,in0Con5440],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr5287.png')

LMax93739 = maximum_layer([[[[[0.3291]], [[0.2958]]]], [[[[0.1495]], [[0.7322]]]]], Max93739), 
LRes32050 = reshape_layer(Max93739, [2, 1], Res32050), 
LSof20572 = softmax_layer([[[0.549]]], 1, Sof20572), 
LZer56832 = zero_padding1D_layer(Sof20572, 1, 0, Zer56832), 
LMul11946 = multiply_layer([Res32050,Zer56832], Mul11946), 
LFla3652 = flatten_layer(Mul11946, Fla3652), 
LMin58063 = minimum_layer([[[[0.362]]], [[[0.6143]]]], Min58063), 
LRes26508 = reshape_layer(Min58063, [1, 1, 1], Res26508), 
LGlo33422 = global_max_pool2D_layer(Res26508, Glo33422), 
LCon5440 = concatenate_layer([Glo33422,[[0.0437]]], 1, Con5440), 
LAve47712 = average_layer([Fla3652,Con5440], Ave47712), 
LThr5287 = thresholded_relu_layer(Ave47712, 6.117776873243181, Thr5287), 
exec_layers([LMax93739,LRes32050,LSof20572,LZer56832,LMul11946,LFla3652,LMin58063,LRes26508,LGlo33422,LCon5440,LAve47712,LThr5287],["Max93739","Res32050","Sof20572","Zer56832","Mul11946","Fla3652","Min58063","Res26508","Glo33422","Con5440","Ave47712","Thr5287"],Thr5287,"Thr5287")

Actual (Unparsed): [[0.0000000, 0.0000000]]

Expected (Unparsed): [[0,0]]

Actual:   [[0, 0]]

Expected: [[0, 0]]