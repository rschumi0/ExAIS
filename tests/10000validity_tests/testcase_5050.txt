import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max74784 = tf.keras.layers.Input(shape=([1, 1]))
in1Max74784 = tf.keras.layers.Input(shape=([1, 1]))
in0Con63597 = tf.keras.layers.Input(shape=([1]))
in0Mul8144 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Mul8144 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Max74784 = keras.layers.Maximum(name = 'Max74784', )([in0Max74784,in1Max74784])
Fla24679 = keras.layers.Flatten(name = 'Fla24679', )(Max74784)
Con63597 = keras.layers.Concatenate(axis=1, name = 'Con63597', )([Fla24679,in0Con63597])
Mul8144 = keras.layers.Multiply(name = 'Mul8144', )([in0Mul8144,in1Mul8144])
Fla44146 = keras.layers.Flatten(name = 'Fla44146', )(Mul8144)
Sub81444 = keras.layers.Subtract(name = 'Sub81444', )([Con63597,Fla44146])
Res59530 = keras.layers.Reshape((2, 1), name = 'Res59530', )(Sub81444)
Glo31129 = keras.layers.GlobalMaxPool1D(name = 'Glo31129', )(Res59530)
model = tf.keras.models.Model(inputs=[in0Max74784,in1Max74784,in0Con63597,in0Mul8144,in1Mul8144], outputs=Glo31129)
in0Max74784 = tf.constant([[[0.038]]])
in1Max74784 = tf.constant([[[0.2623]]])
in0Con63597 = tf.constant([[0.8692]])
in0Mul8144 = tf.constant([[[[[0.5367]], [[0.8069]]]]])
in1Mul8144 = tf.constant([[[[[0.2334]], [[0.9034]]]]])
print (np.array2string(model.predict([in0Max74784,in1Max74784,in0Con63597,in0Mul8144,in1Mul8144],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo31129.png')

LMax74784 = maximum_layer([[[[0.038]]], [[[0.2623]]]], Max74784), 
LFla24679 = flatten_layer(Max74784, Fla24679), 
LCon63597 = concatenate_layer([Fla24679,[[0.8692]]], 1, Con63597), 
LMul8144 = multiply_layer([[[[[[0.5367]], [[0.8069]]]]], [[[[[0.2334]], [[0.9034]]]]]], Mul8144), 
LFla44146 = flatten_layer(Mul8144, Fla44146), 
LSub81444 = subtract_layer(Con63597,Fla44146, Sub81444), 
LRes59530 = reshape_layer(Sub81444, [2, 1], Res59530), 
LGlo31129 = global_max_pool1D_layer(Res59530, Glo31129), 
exec_layers([LMax74784,LFla24679,LCon63597,LMul8144,LFla44146,LSub81444,LRes59530,LGlo31129],["Max74784","Fla24679","Con63597","Mul8144","Fla44146","Sub81444","Res59530","Glo31129"],Glo31129,"Glo31129")

Actual (Unparsed): [[0.1402465]]

Expected (Unparsed): [[0.14024654000000003]]

Actual:   [[0.1403]]

Expected: [[0.1403]]