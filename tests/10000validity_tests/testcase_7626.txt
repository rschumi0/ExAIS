import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro20710 = tf.keras.layers.Input(shape=([4, 4, 3, 1]))
in0Con54496 = tf.keras.layers.Input(shape=([3, 1]))
in0Min31093 = tf.keras.layers.Input(shape=([2, 2]))
in1Min31093 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul19323 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul19323 = tf.keras.layers.Input(shape=([2, 1, 2]))

Cro20710 = keras.layers.Cropping3D(cropping=((1, 0), (3, 0), (2, 0)), name = 'Cro20710', )(in0Cro20710)
Res96848 = keras.layers.Reshape((3, 1, 1), name = 'Res96848', )(Cro20710)
Res95693 = keras.layers.Reshape((3, 1), name = 'Res95693', )(Res96848)
Con54496 = keras.layers.Concatenate(axis=2, name = 'Con54496', )([Res95693,in0Con54496])
Min31093 = keras.layers.Minimum(name = 'Min31093', )([in0Min31093,in1Min31093])
Mul19323 = keras.layers.Multiply(name = 'Mul19323', )([in0Mul19323,in1Mul19323])
Res30513 = keras.layers.Reshape((2, 2), name = 'Res30513', )(Mul19323)
Max62331 = keras.layers.MaxPool1D(pool_size=(2), name = 'Max62331', )(Res30513)
Zer59779 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer59779', )(Max62331)
Mul6228 = keras.layers.Multiply(name = 'Mul6228', )([Min31093,Zer59779])
ELU2735 = keras.layers.ELU(alpha=6.1616160857532165, name = 'ELU2735', )(Mul6228)
Dot1129 = keras.layers.Dot(axes=(2, 2), name = 'Dot1129', )([Con54496,ELU2735])
model = tf.keras.models.Model(inputs=[in0Cro20710,in0Con54496,in0Min31093,in1Min31093,in0Mul19323,in1Mul19323], outputs=Dot1129)
in0Cro20710 = tf.constant([[[[[1.5224], [1.0913], [1.3236]], [[1.8299], [1.0324], [1.1082]], [[1.3515], [1.8141], [1.2172]], [[1.3622], [1.8722], [1.3391]]], [[[1.3961], [1.0717], [1.3593]], [[1.3205], [1.2715], [1.6285]], [[1.4295], [1.3761], [1.0625]], [[1.2029], [1.2632], [1.1938]]], [[[1.7769], [1.5286], [1.0286]], [[1.2215], [1.777], [1.1024]], [[1.0012], [1.4101], [1.3091]], [[1.7773], [1.6021], [1.1168]]], [[[1.4686], [1.9986], [1.8906]], [[1.6966], [1.1473], [1.7434]], [[1.1425], [1.7545], [1.873]], [[1.5562], [1.0215], [1.5064]]]]])
in0Con54496 = tf.constant([[[0.4925], [0.1944], [0.2456]]])
in0Min31093 = tf.constant([[[0.0914, 0.9438], [0.5079, 0.2091]]])
in1Min31093 = tf.constant([[[0.3646, 0.7916], [0.1872, 0.1565]]])
in0Mul19323 = tf.constant([[[[0.162, 0.3952]], [[0.7214, 0.3129]]]])
in1Mul19323 = tf.constant([[[[0.4085, 0.1596]], [[0.3264, 0.2552]]]])
print (np.array2string(model.predict([in0Cro20710,in0Con54496,in0Min31093,in1Min31093,in0Mul19323,in1Mul19323],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot1129.png')

LCro20710 = cropping3D_layer([[[[[1.5224], [1.0913], [1.3236]], [[1.8299], [1.0324], [1.1082]], [[1.3515], [1.8141], [1.2172]], [[1.3622], [1.8722], [1.3391]]], [[[1.3961], [1.0717], [1.3593]], [[1.3205], [1.2715], [1.6285]], [[1.4295], [1.3761], [1.0625]], [[1.2029], [1.2632], [1.1938]]], [[[1.7769], [1.5286], [1.0286]], [[1.2215], [1.777], [1.1024]], [[1.0012], [1.4101], [1.3091]], [[1.7773], [1.6021], [1.1168]]], [[[1.4686], [1.9986], [1.8906]], [[1.6966], [1.1473], [1.7434]], [[1.1425], [1.7545], [1.873]], [[1.5562], [1.0215], [1.5064]]]]], 1, 0, 3, 0, 2, 0, Cro20710), 
LRes96848 = reshape_layer(Cro20710, [3, 1, 1], Res96848), 
LRes95693 = reshape_layer(Res96848, [3, 1], Res95693), 
LCon54496 = concatenate_layer([Res95693,[[[0.4925], [0.1944], [0.2456]]]], 2, Con54496), 
LMin31093 = minimum_layer([[[[0.0914, 0.9438], [0.5079, 0.2091]]], [[[0.3646, 0.7916], [0.1872, 0.1565]]]], Min31093), 
LMul19323 = multiply_layer([[[[[0.162, 0.3952]], [[0.7214, 0.3129]]]], [[[[0.4085, 0.1596]], [[0.3264, 0.2552]]]]], Mul19323), 
LRes30513 = reshape_layer(Mul19323, [2, 2], Res30513), 
LMax62331 = max_pool1D_layer(Res30513, 2, Max62331), 
LZer59779 = zero_padding1D_layer(Max62331, 1, 0, Zer59779), 
LMul6228 = multiply_layer([Min31093,Zer59779], Mul6228), 
LELU2735 = elu_layer(Mul6228, 6.1616160857532165, ELU2735), 
LDot1129 = dot_layer(Con54496,ELU2735, 2, 2, Dot1129), 
exec_layers([LCro20710,LRes96848,LRes95693,LCon54496,LMin31093,LMul19323,LRes30513,LMax62331,LZer59779,LMul6228,LELU2735,LDot1129],["Cro20710","Res96848","Res95693","Con54496","Min31093","Mul19323","Res30513","Max62331","Zer59779","Mul6228","ELU2735","Dot1129"],Dot1129,"Dot1129")

Actual (Unparsed): [[[0.0000000, 0.0587763], [0.0000000, 0.0516569], [0.0000000, 0.0694699]]]

Expected (Unparsed): [[[0.0,0.0587762574443256],[0.0,0.05165686018488961],[0.0,0.06946989311498881]]]

Actual:   [[[0, 0.0588], [0, 0.0517], [0, 0.0695]]]

Expected: [[[0, 0.0588], [0, 0.0517], [0, 0.0695]]]