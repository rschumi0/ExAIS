import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo25555 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Dot19794 = tf.keras.layers.Input(shape=([2]))
in1Dot19794 = tf.keras.layers.Input(shape=([2]))

Glo25555 = keras.layers.GlobalMaxPool2D(name = 'Glo25555', )(in0Glo25555)
Dot19794 = keras.layers.Dot(axes=(1, 1), name = 'Dot19794', )([in0Dot19794,in1Dot19794])
Min67643 = keras.layers.Minimum(name = 'Min67643', )([Glo25555,Dot19794])
Res49162 = keras.layers.Reshape((1, 1), name = 'Res49162', )(Min67643)
Res17561 = keras.layers.Reshape((1, 1, 1), name = 'Res17561', )(Res49162)
Dep6977 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep6977', )(Res17561)
model = tf.keras.models.Model(inputs=[in0Glo25555,in0Dot19794,in1Dot19794], outputs=Dep6977)
w = model.get_layer('Dep6977').get_weights() 
w[0] = np.array([[[[0.2564]]]])
w[1] = np.array([0])
model.get_layer('Dep6977').set_weights(w) 
in0Glo25555 = tf.constant([[[[1.0405], [1.6844]], [[1.8377], [1.7457]]]])
in0Dot19794 = tf.constant([[0.5066, 0.8075]])
in1Dot19794 = tf.constant([[0.2104, 0.145]])
print (np.array2string(model.predict([in0Glo25555,in0Dot19794,in1Dot19794],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep6977.png')

LGlo25555 = global_max_pool2D_layer([[[[1.0405], [1.6844]], [[1.8377], [1.7457]]]], Glo25555), 
LDot19794 = dot_layer([[0.5066, 0.8075]], [[0.2104, 0.145]], 1, 1, Dot19794), 
LMin67643 = minimum_layer([Glo25555,Dot19794], Min67643), 
LRes49162 = reshape_layer(Min67643, [1, 1], Res49162), 
LRes17561 = reshape_layer(Res49162, [1, 1, 1], Res17561), 
LDep6977 = depthwise_conv2D_layer(Res17561, 1, 1,[[[[0.2564]]]],[0], 1, 1, true, Dep6977), 
exec_layers([LGlo25555,LDot19794,LMin67643,LRes49162,LRes17561,LDep6977],["Glo25555","Dot19794","Min67643","Res49162","Res17561","Dep6977"],Dep6977,"Dep6977")

Actual (Unparsed): [[[[0.0573506]]]]

Expected (Unparsed): [[[[0.05735056229600001]]]]

Actual:   [[[[0.0574]]]]

Expected: [[[[0.0574]]]]