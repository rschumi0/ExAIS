import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo45412 = tf.keras.layers.Input(shape=([2, 2]))
in0Con35026 = tf.keras.layers.Input(shape=([2]))
in0Sof25090 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Max52391 = tf.keras.layers.Input(shape=([2, 2]))
in1Max52391 = tf.keras.layers.Input(shape=([2, 2]))

Glo45412 = keras.layers.GlobalAveragePooling1D(name = 'Glo45412', )(in0Glo45412)
Con35026 = keras.layers.Concatenate(axis=1, name = 'Con35026', )([Glo45412,in0Con35026])
Sof25090 = keras.layers.Softmax(axis=1, name = 'Sof25090', input_shape=(2, 1, 2, 1))(in0Sof25090)
Res30896 = keras.layers.Reshape((2, 1, 2), name = 'Res30896', )(Sof25090)
Res58481 = keras.layers.Reshape((2, 2), name = 'Res58481', )(Res30896)
Max52391 = keras.layers.Maximum(name = 'Max52391', )([in0Max52391,in1Max52391])
Add24539 = keras.layers.Add(name = 'Add24539', )([Res58481,Max52391])
Fla35101 = keras.layers.Flatten(name = 'Fla35101', )(Add24539)
Dot42658 = keras.layers.Dot(axes=(1, 1), name = 'Dot42658', )([Con35026,Fla35101])
model = tf.keras.models.Model(inputs=[in0Glo45412,in0Con35026,in0Sof25090,in0Max52391,in1Max52391], outputs=Dot42658)
in0Glo45412 = tf.constant([[[1.647, 1.0629], [1.4495, 1.7583]]])
in0Con35026 = tf.constant([[0.1109, 0.9275]])
in0Sof25090 = tf.constant([[[[[0.8587], [0.4735]]], [[[0.3393], [0.0792]]]]])
in0Max52391 = tf.constant([[[0.8924, 0.2164], [0.641, 0.7949]]])
in1Max52391 = tf.constant([[[0.6063, 0.163], [0.9852, 0.7265]]])
print (np.array2string(model.predict([in0Glo45412,in0Con35026,in0Sof25090,in0Max52391,in1Max52391],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot42658.png')

LGlo45412 = global_average_pooling1D_layer([[[1.647, 1.0629], [1.4495, 1.7583]]], Glo45412), 
LCon35026 = concatenate_layer([Glo45412,[[0.1109, 0.9275]]], 1, Con35026), 
LSof25090 = softmax_layer([[[[[0.8587], [0.4735]]], [[[0.3393], [0.0792]]]]], 1, Sof25090), 
LRes30896 = reshape_layer(Sof25090, [2, 1, 2], Res30896), 
LRes58481 = reshape_layer(Res30896, [2, 2], Res58481), 
LMax52391 = maximum_layer([[[[0.8924, 0.2164], [0.641, 0.7949]]], [[[0.6063, 0.163], [0.9852, 0.7265]]]], Max52391), 
LAdd24539 = add_layer([Res58481,Max52391], Add24539), 
LFla35101 = flatten_layer(Add24539, Fla35101), 
LDot42658 = dot_layer(Con35026,Fla35101, 1, 1, Dot42658), 
exec_layers([LGlo45412,LCon35026,LSof25090,LRes30896,LRes58481,LMax52391,LAdd24539,LFla35101,LDot42658],["Glo45412","Con35026","Sof25090","Res30896","Res58481","Max52391","Add24539","Fla35101","Dot42658"],Dot42658,"Dot42658")

Actual (Unparsed): [[4.7616337]]

Expected (Unparsed): [[4.761633775443087]]

Actual:   [[4.7617]]

Expected: [[4.7617]]