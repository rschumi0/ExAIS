import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave54612 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0GRU69245 = tf.keras.layers.Input(shape=([1, 3]))

Ave54612 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave54612', )(in0Ave54612)
Res99937 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res99937', )(Ave54612)
Glo27394 = keras.layers.GlobalAveragePooling3D(name = 'Glo27394', )(Res99937)
Res49989 = keras.layers.Reshape((1, 1), name = 'Res49989', )(Glo27394)
Zer5523 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer5523', )(Res49989)
Fla6651 = keras.layers.Flatten(name = 'Fla6651', )(Zer5523)
GRU69245 = keras.layers.GRU(3,reset_after=True, recurrent_activation='sigmoid', name = 'GRU69245', )(in0GRU69245)
Dot25075 = keras.layers.Dot(axes=(1, 1), name = 'Dot25075', )([Fla6651,GRU69245])
model = tf.keras.models.Model(inputs=[in0Ave54612,in0GRU69245], outputs=Dot25075)
w = model.get_layer('GRU69245').get_weights() 
w[0] = np.array([[10, 5, 6, 8, 10, 4, 8, 7, 4], [3, 1, 1, 8, 7, 1, 3, 8, 4], [7, 1, 4, 7, 3, 2, 9, 4, 7]])
w[1] = np.array([[9, 2, 8, 1, 9, 9, 7, 5, 10], [2, 10, 6, 2, 6, 2, 7, 7, 5], [1, 10, 9, 7, 10, 9, 1, 5, 3]])
w[2] = np.array([[4, 9, 8, 1, 1, 3, 4, 5, 3], [4, 1, 1, 8, 5, 2, 10, 10, 2]])
model.get_layer('GRU69245').set_weights(w) 
in0Ave54612 = tf.constant([[[[1.528, 1.6734]]]])
in0GRU69245 = tf.constant([[[9, 6, 8]]])
print (np.array2string(model.predict([in0Ave54612,in0GRU69245],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot25075.png')

LAve54612 = average_pooling2D_layer([[[[1.528, 1.6734]]]], 1, 1, 1, 1, false, Ave54612), 
LRes99937 = reshape_layer(Ave54612, [1, 1, 2, 1], Res99937), 
LGlo27394 = global_average_pooling3D_layer(Res99937, Glo27394), 
LRes49989 = reshape_layer(Glo27394, [1, 1], Res49989), 
LZer5523 = zero_padding1D_layer(Res49989, 1, 1, Zer5523), 
LFla6651 = flatten_layer(Zer5523, Fla6651), 
LGRU69245 = gru_layer([[[9, 6, 8]]],[[10, 5, 6, 8, 10, 4, 8, 7, 4], [3, 1, 1, 8, 7, 1, 3, 8, 4], [7, 1, 4, 7, 3, 2, 9, 4, 7]],[[9, 2, 8, 1, 9, 9, 7, 5, 10], [2, 10, 6, 2, 6, 2, 7, 7, 5], [1, 10, 9, 7, 10, 9, 1, 5, 3]],[[4, 9, 8, 1, 1, 3, 4, 5, 3], [4, 1, 1, 8, 5, 2, 10, 10, 2]], true, GRU69245), 
LDot25075 = dot_layer(Fla6651,GRU69245, 1, 1, Dot25075), 
exec_layers([LAve54612,LRes99937,LGlo27394,LRes49989,LZer5523,LFla6651,LGRU69245,LDot25075],["Ave54612","Res99937","Glo27394","Res49989","Zer5523","Fla6651","GRU69245","Dot25075"],Dot25075,"Dot25075")

Actual (Unparsed): [[0.0000000]]

Expected (Unparsed): [[0.0]]

Actual:   [[0]]

Expected: [[0]]