import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub35908 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub35908 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul33678 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Mul33678 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Dot77335 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot77335 = tf.keras.layers.Input(shape=([2, 3]))
in0Con70918 = tf.keras.layers.Input(shape=([3, 1]))
in0Ave72457 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave72457 = tf.keras.layers.Input(shape=([1, 1]))
in0Con66951 = tf.keras.layers.Input(shape=([3, 3]))
in0Con4639 = tf.keras.layers.Input(shape=([3]))

Sub35908 = keras.layers.Subtract(name = 'Sub35908', )([in0Sub35908,in1Sub35908])
Fla37190 = keras.layers.Flatten(name = 'Fla37190', )(Sub35908)
Mul33678 = keras.layers.Multiply(name = 'Mul33678', )([in0Mul33678,in1Mul33678])
Res44659 = keras.layers.Reshape((2, 2, 2), name = 'Res44659', )(Mul33678)
Res1598 = keras.layers.Reshape((2, 4), name = 'Res1598', )(Res44659)
Zer10044 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer10044', )(Res1598)
Dot77335 = keras.layers.Dot(axes=(1, 1), name = 'Dot77335', )([in0Dot77335,in1Dot77335])
Con70918 = keras.layers.Concatenate(axis=2, name = 'Con70918', )([Dot77335,in0Con70918])
Min63501 = keras.layers.Minimum(name = 'Min63501', )([Zer10044,Con70918])
Ave72457 = keras.layers.Average(name = 'Ave72457', )([in0Ave72457,in1Ave72457])
Zer72877 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer72877', )(Ave72457)
Con66951 = keras.layers.Concatenate(axis=2, name = 'Con66951', )([Zer72877,in0Con66951])
Ave28497 = keras.layers.Average(name = 'Ave28497', )([Min63501,Con66951])
Res96627 = keras.layers.Reshape((3, 4, 1), name = 'Res96627', )(Ave28497)
Glo59453 = keras.layers.GlobalMaxPool2D(name = 'Glo59453', )(Res96627)
Con4639 = keras.layers.Concatenate(axis=1, name = 'Con4639', )([Glo59453,in0Con4639])
Min96559 = keras.layers.Minimum(name = 'Min96559', )([Fla37190,Con4639])
model = tf.keras.models.Model(inputs=[in0Sub35908,in1Sub35908,in0Mul33678,in1Mul33678,in0Dot77335,in1Dot77335,in0Con70918,in0Ave72457,in1Ave72457,in0Con66951,in0Con4639], outputs=Min96559)
in0Sub35908 = tf.constant([[[0.0258, 0.5398], [0.8214, 0.0171]]])
in1Sub35908 = tf.constant([[[0.5658, 0.2327], [0.0777, 0.6885]]])
in0Mul33678 = tf.constant([[[[[0.9191], [0.463]], [[0.9876], [0.0573]]], [[[0.347], [0.8849]], [[0.6068], [0.8881]]]]])
in1Mul33678 = tf.constant([[[[[0.8897], [0.0746]], [[0.4761], [0.7958]]], [[[0.6793], [0.9523]], [[0.6155], [0.404]]]]])
in0Dot77335 = tf.constant([[[0.8929, 0.0953, 0.134], [0.4432, 0.7921, 0.5756]]])
in1Dot77335 = tf.constant([[[0.2359, 0.9982, 0.2206], [0.1772, 0.9735, 0.5996]]])
in0Con70918 = tf.constant([[[0.5238], [0.126], [0.618]]])
in0Ave72457 = tf.constant([[[0.3974]]])
in1Ave72457 = tf.constant([[[0.8463]]])
in0Con66951 = tf.constant([[[0.0765, 0.8957, 0.6217], [0.4529, 0.8265, 0.5908], [0.7859, 0.9629, 0.0418]]])
in0Con4639 = tf.constant([[0.4845, 0.7946, 0.5125]])
print (np.array2string(model.predict([in0Sub35908,in1Sub35908,in0Mul33678,in1Mul33678,in0Dot77335,in1Dot77335,in0Con70918,in0Ave72457,in1Ave72457,in0Con66951,in0Con4639],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min96559.png')

LSub35908 = subtract_layer([[[0.0258, 0.5398], [0.8214, 0.0171]]], [[[0.5658, 0.2327], [0.0777, 0.6885]]], Sub35908), 
LFla37190 = flatten_layer(Sub35908, Fla37190), 
LMul33678 = multiply_layer([[[[[[0.9191], [0.463]], [[0.9876], [0.0573]]], [[[0.347], [0.8849]], [[0.6068], [0.8881]]]]], [[[[[0.8897], [0.0746]], [[0.4761], [0.7958]]], [[[0.6793], [0.9523]], [[0.6155], [0.404]]]]]], Mul33678), 
LRes44659 = reshape_layer(Mul33678, [2, 2, 2], Res44659), 
LRes1598 = reshape_layer(Res44659, [2, 4], Res1598), 
LZer10044 = zero_padding1D_layer(Res1598, 1, 0, Zer10044), 
LDot77335 = dot_layer([[[0.8929, 0.0953, 0.134], [0.4432, 0.7921, 0.5756]]], [[[0.2359, 0.9982, 0.2206], [0.1772, 0.9735, 0.5996]]], 1, 1, Dot77335), 
LCon70918 = concatenate_layer([Dot77335,[[[0.5238], [0.126], [0.618]]]], 2, Con70918), 
LMin63501 = minimum_layer([Zer10044,Con70918], Min63501), 
LAve72457 = average_layer([[[[0.3974]]], [[[0.8463]]]], Ave72457), 
LZer72877 = zero_padding1D_layer(Ave72457, 2, 0, Zer72877), 
LCon66951 = concatenate_layer([Zer72877,[[[0.0765, 0.8957, 0.6217], [0.4529, 0.8265, 0.5908], [0.7859, 0.9629, 0.0418]]]], 2, Con66951), 
LAve28497 = average_layer([Min63501,Con66951], Ave28497), 
LRes96627 = reshape_layer(Ave28497, [3, 4, 1], Res96627), 
LGlo59453 = global_max_pool2D_layer(Res96627, Glo59453), 
LCon4639 = concatenate_layer([Glo59453,[[0.4845, 0.7946, 0.5125]]], 1, Con4639), 
LMin96559 = minimum_layer([Fla37190,Con4639], Min96559), 
exec_layers([LSub35908,LFla37190,LMul33678,LRes44659,LRes1598,LZer10044,LDot77335,LCon70918,LMin63501,LAve72457,LZer72877,LCon66951,LAve28497,LRes96627,LGlo59453,LCon4639,LMin96559],["Sub35908","Fla37190","Mul33678","Res44659","Res1598","Zer10044","Dot77335","Con70918","Min63501","Ave72457","Zer72877","Con66951","Ave28497","Res96627","Glo59453","Con4639","Min96559"],Min96559,"Min96559")

Actual (Unparsed): [[-0.5400000, 0.3071000, 0.7437000, -0.6714000]]

Expected (Unparsed): [[-0.5399999999999999,0.30709999999999993,0.7437,-0.6714]]

Actual:   [[-0.54, 0.3071, 0.7437, -0.6714]]

Expected: [[-0.5399, 0.3071, 0.7437, -0.6714]]