import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot69212 = tf.keras.layers.Input(shape=([2]))
in1Dot69212 = tf.keras.layers.Input(shape=([2]))

Dot69212 = keras.layers.Dot(axes=(1, 1), name = 'Dot69212', )([in0Dot69212,in1Dot69212])
Res49588 = keras.layers.Reshape((1, 1), name = 'Res49588', )(Dot69212)
Res48760 = keras.layers.Reshape((1, 1, 1), name = 'Res48760', )(Res49588)
Glo66066 = keras.layers.GlobalMaxPool2D(name = 'Glo66066', )(Res48760)
Res87416 = keras.layers.Reshape((1, 1), name = 'Res87416', )(Glo66066)
Res29380 = keras.layers.Reshape((1, 1, 1), name = 'Res29380', )(Res87416)
Up_56880 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_56880', )(Res29380)
Cro31786 = keras.layers.Cropping2D(cropping=((1, 0), (0, 0)), name = 'Cro31786', )(Up_56880)
Mas1501 = keras.layers.Masking(mask_value=1, name = 'Mas1501', )(Cro31786)
model = tf.keras.models.Model(inputs=[in0Dot69212,in1Dot69212], outputs=Mas1501)
in0Dot69212 = tf.constant([[0.4463, 0.9355]])
in1Dot69212 = tf.constant([[0.3345, 0.9089]])
print (np.array2string(model.predict([in0Dot69212,in1Dot69212],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas1501.png')

LDot69212 = dot_layer([[0.4463, 0.9355]], [[0.3345, 0.9089]], 1, 1, Dot69212), 
LRes49588 = reshape_layer(Dot69212, [1, 1], Res49588), 
LRes48760 = reshape_layer(Res49588, [1, 1, 1], Res48760), 
LGlo66066 = global_max_pool2D_layer(Res48760, Glo66066), 
LRes87416 = reshape_layer(Glo66066, [1, 1], Res87416), 
LRes29380 = reshape_layer(Res87416, [1, 1, 1], Res29380), 
LUp_56880 = up_sampling2D_layer(Res29380, 2, 1, Up_56880), 
LCro31786 = cropping2D_layer(Up_56880, 1, 0, 0, 0, Cro31786), 
LMas1501 = masking_layer(Cro31786, 1, Mas1501), 
exec_layers([LDot69212,LRes49588,LRes48760,LGlo66066,LRes87416,LRes29380,LUp_56880,LCro31786,LMas1501],["Dot69212","Res49588","Res48760","Glo66066","Res87416","Res29380","Up_56880","Cro31786","Mas1501"],Mas1501,"Mas1501")

Actual (Unparsed): [[[[0.9995634]]]]

Expected (Unparsed): [[[[0.9995633]]]]

Actual:   [[[[0.9996]]]]

Expected: [[[[0.9996]]]]