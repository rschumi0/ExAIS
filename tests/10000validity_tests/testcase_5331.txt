import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min80686 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Min80686 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Dot93225 = tf.keras.layers.Input(shape=([3]))
in1Dot93225 = tf.keras.layers.Input(shape=([3]))

Min80686 = keras.layers.Minimum(name = 'Min80686', )([in0Min80686,in1Min80686])
Res78415 = keras.layers.Reshape((1, 2, 2), name = 'Res78415', )(Min80686)
Res2211 = keras.layers.Reshape((1, 4), name = 'Res2211', )(Res78415)
Max43951 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max43951', )(Res2211)
Res97852 = keras.layers.Reshape((1, 4, 1), name = 'Res97852', )(Max43951)
Res28739 = keras.layers.Reshape((1, 4, 1, 1), name = 'Res28739', )(Res97852)
Zer56135 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (2, 0)), name = 'Zer56135', )(Res28739)
Dot93225 = keras.layers.Dot(axes=(1, 1), name = 'Dot93225', )([in0Dot93225,in1Dot93225])
Res21198 = keras.layers.Reshape((1, 1), name = 'Res21198', )(Dot93225)
Res87217 = keras.layers.Reshape((1, 1, 1), name = 'Res87217', )(Res21198)
Res88509 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res88509', )(Res87217)
Zer75642 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer75642', )(Res88509)
Zer61431 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer61431', )(Zer75642)
Add61742 = keras.layers.Add(name = 'Add61742', )([Zer56135,Zer61431])
model = tf.keras.models.Model(inputs=[in0Min80686,in1Min80686,in0Dot93225,in1Dot93225], outputs=Add61742)
in0Min80686 = tf.constant([[[[[0.4219], [0.4358]], [[0.7477], [0.0829]]]]])
in1Min80686 = tf.constant([[[[[0.5032], [0.8583]], [[0.1435], [0.2519]]]]])
in0Dot93225 = tf.constant([[0.1691, 0.6126, 0.6487]])
in1Dot93225 = tf.constant([[0.6366, 0.5212, 0.4544]])
print (np.array2string(model.predict([in0Min80686,in1Min80686,in0Dot93225,in1Dot93225],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add61742.png')

LMin80686 = minimum_layer([[[[[[0.4219], [0.4358]], [[0.7477], [0.0829]]]]], [[[[[0.5032], [0.8583]], [[0.1435], [0.2519]]]]]], Min80686), 
LRes78415 = reshape_layer(Min80686, [1, 2, 2], Res78415), 
LRes2211 = reshape_layer(Res78415, [1, 4], Res2211), 
LMax43951 = max_pool1D_layer(Res2211, 1, Max43951), 
LRes97852 = reshape_layer(Max43951, [1, 4, 1], Res97852), 
LRes28739 = reshape_layer(Res97852, [1, 4, 1, 1], Res28739), 
LZer56135 = zero_padding3D_layer(Res28739, 2, 0, 1, 0, 2, 0, Zer56135), 
LDot93225 = dot_layer([[0.1691, 0.6126, 0.6487]], [[0.6366, 0.5212, 0.4544]], 1, 1, Dot93225), 
LRes21198 = reshape_layer(Dot93225, [1, 1], Res21198), 
LRes87217 = reshape_layer(Res21198, [1, 1, 1], Res87217), 
LRes88509 = reshape_layer(Res87217, [1, 1, 1, 1], Res88509), 
LZer75642 = zero_padding3D_layer(Res88509, 1, 1, 1, 1, 1, 1, Zer75642), 
LZer61431 = zero_padding3D_layer(Zer75642, 0, 0, 2, 0, 0, 0, Zer61431), 
LAdd61742 = add_layer([Zer56135,Zer61431], Add61742), 
exec_layers([LMin80686,LRes78415,LRes2211,LMax43951,LRes97852,LRes28739,LZer56135,LDot93225,LRes21198,LRes87217,LRes88509,LZer75642,LZer61431,LAdd61742],["Min80686","Res78415","Res2211","Max43951","Res97852","Res28739","Zer56135","Dot93225","Res21198","Res87217","Res88509","Zer75642","Zer61431","Add61742"],Add61742,"Add61742")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.7217055], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.4219000]], [[0.0000000], [0.0000000], [0.4358000]], [[0.0000000], [0.0000000], [0.1435000]], [[0.0000000], [0.0000000], [0.0829000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],[[0],[0.7217054600000001],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0.4219]],[[0],[0],[0.4358]],[[0],[0],[0.1435]],[[0],[0],[0.0829]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.7218], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0.4219]], [[0], [0], [0.4358]], [[0], [0], [0.1435]], [[0], [0], [0.0829]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0.7218], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0.4219]], [[0], [0], [0.4358]], [[0], [0], [0.1435]], [[0], [0], [0.0829]]]]]