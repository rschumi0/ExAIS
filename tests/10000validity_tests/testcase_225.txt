import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo46353 = tf.keras.layers.Input(shape=([2, 2]))
in0Con29165 = tf.keras.layers.Input(shape=([2, 3]))
in0Max84587 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max84587 = tf.keras.layers.Input(shape=([1, 2, 2]))

Glo46353 = keras.layers.GlobalAveragePooling1D(name = 'Glo46353', )(in0Glo46353)
Res68256 = keras.layers.Reshape((2, 1), name = 'Res68256', )(Glo46353)
Con29165 = keras.layers.Concatenate(axis=2, name = 'Con29165', )([Res68256,in0Con29165])
Max84587 = keras.layers.Maximum(name = 'Max84587', )([in0Max84587,in1Max84587])
Res64184 = keras.layers.Reshape((1, 4), name = 'Res64184', )(Max84587)
Ave48393 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave48393', )(Res64184)
Zer82819 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer82819', )(Ave48393)
Ave66709 = keras.layers.Average(name = 'Ave66709', )([Con29165,Zer82819])
Res96026 = keras.layers.Reshape((2, 4, 1), name = 'Res96026', )(Ave66709)
Glo23675 = keras.layers.GlobalMaxPool2D(name = 'Glo23675', )(Res96026)
Res27114 = keras.layers.Reshape((1, 1), name = 'Res27114', )(Glo23675)
Zer65315 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer65315', )(Res27114)
model = tf.keras.models.Model(inputs=[in0Glo46353,in0Con29165,in0Max84587,in1Max84587], outputs=Zer65315)
in0Glo46353 = tf.constant([[[1.9635, 1.9771], [1.7083, 1.9021]]])
in0Con29165 = tf.constant([[[0.6515, 0.853, 0.7279], [0.673, 0.7145, 0.5821]]])
in0Max84587 = tf.constant([[[[0.1221, 0.9458], [0.099, 0.0954]]]])
in1Max84587 = tf.constant([[[[0.5052, 0.9454], [0.3487, 0.976]]]])
print (np.array2string(model.predict([in0Glo46353,in0Con29165,in0Max84587,in1Max84587],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer65315.png')

LGlo46353 = global_average_pooling1D_layer([[[1.9635, 1.9771], [1.7083, 1.9021]]], Glo46353), 
LRes68256 = reshape_layer(Glo46353, [2, 1], Res68256), 
LCon29165 = concatenate_layer([Res68256,[[[0.6515, 0.853, 0.7279], [0.673, 0.7145, 0.5821]]]], 2, Con29165), 
LMax84587 = maximum_layer([[[[[0.1221, 0.9458], [0.099, 0.0954]]]], [[[[0.5052, 0.9454], [0.3487, 0.976]]]]], Max84587), 
LRes64184 = reshape_layer(Max84587, [1, 4], Res64184), 
LAve48393 = average_pooling1D_layer(Res64184, 1, 1, true, Ave48393), 
LZer82819 = zero_padding1D_layer(Ave48393, 1, 0, Zer82819), 
LAve66709 = average_layer([Con29165,Zer82819], Ave66709), 
LRes96026 = reshape_layer(Ave66709, [2, 4, 1], Res96026), 
LGlo23675 = global_max_pool2D_layer(Res96026, Glo23675), 
LRes27114 = reshape_layer(Glo23675, [1, 1], Res27114), 
LZer65315 = zero_padding1D_layer(Res27114, 1, 1, Zer65315), 
exec_layers([LGlo46353,LRes68256,LCon29165,LMax84587,LRes64184,LAve48393,LZer82819,LAve66709,LRes96026,LGlo23675,LRes27114,LZer65315],["Glo46353","Res68256","Con29165","Max84587","Res64184","Ave48393","Zer82819","Ave66709","Res96026","Glo23675","Res27114","Zer65315"],Zer65315,"Zer65315")

Actual (Unparsed): [[[0.0000000], [1.2224000], [0.0000000]]]

Expected (Unparsed): [[[0],[1.2224],[0]]]

Actual:   [[[0], [1.2224], [0]]]

Expected: [[[0], [1.2224], [0]]]