import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add99270 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Add99270 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Mul12826 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul12826 = tf.keras.layers.Input(shape=([2, 1]))
in0Glo75148 = tf.keras.layers.Input(shape=([1, 1]))
in0Con57094 = tf.keras.layers.Input(shape=([1]))
in0Con47967 = tf.keras.layers.Input(shape=([1]))

Add99270 = keras.layers.Add(name = 'Add99270', )([in0Add99270,in1Add99270])
PRe17955 = keras.layers.PReLU(name = 'PRe17955', )(Add99270)
Thr22779 = keras.layers.ThresholdedReLU(theta=9.018206666519516, name = 'Thr22779', )(PRe17955)
Res28762 = keras.layers.Reshape((2, 1), name = 'Res28762', )(Thr22779)
Fla88212 = keras.layers.Flatten(name = 'Fla88212', )(Res28762)
Mul12826 = keras.layers.Multiply(name = 'Mul12826', )([in0Mul12826,in1Mul12826])
Fla46695 = keras.layers.Flatten(name = 'Fla46695', )(Mul12826)
Glo75148 = keras.layers.GlobalMaxPool1D(name = 'Glo75148', )(in0Glo75148)
Con57094 = keras.layers.Concatenate(axis=1, name = 'Con57094', )([Glo75148,in0Con57094])
Max66127 = keras.layers.Maximum(name = 'Max66127', )([Fla46695,Con57094])
Res55700 = keras.layers.Reshape((2, 1), name = 'Res55700', )(Max66127)
Res53795 = keras.layers.Reshape((2, 1, 1), name = 'Res53795', )(Res55700)
Glo92067 = keras.layers.GlobalAveragePooling2D(name = 'Glo92067', )(Res53795)
Con47967 = keras.layers.Concatenate(axis=1, name = 'Con47967', )([Glo92067,in0Con47967])
Mul82025 = keras.layers.Multiply(name = 'Mul82025', )([Fla88212,Con47967])
model = tf.keras.models.Model(inputs=[in0Add99270,in1Add99270,in0Mul12826,in1Mul12826,in0Glo75148,in0Con57094,in0Con47967], outputs=Mul82025)
w = model.get_layer('PRe17955').get_weights() 
w[0] = np.array([[[0.4451]], [[0.0957]]])
model.get_layer('PRe17955').set_weights(w) 
in0Add99270 = tf.constant([[[[0.2934]], [[0.8276]]]])
in1Add99270 = tf.constant([[[[0.9327]], [[0.6679]]]])
in0Mul12826 = tf.constant([[[0.8479], [0.5456]]])
in1Mul12826 = tf.constant([[[0.1468], [0.4149]]])
in0Glo75148 = tf.constant([[[1.8304]]])
in0Con57094 = tf.constant([[0.3498]])
in0Con47967 = tf.constant([[0.7727]])
print (np.array2string(model.predict([in0Add99270,in1Add99270,in0Mul12826,in1Mul12826,in0Glo75148,in0Con57094,in0Con47967],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul82025.png')

LAdd99270 = add_layer([[[[[0.2934]], [[0.8276]]]], [[[[0.9327]], [[0.6679]]]]], Add99270), 
LPRe17955 = prelu_layer(Add99270, [[[0.4451]], [[0.0957]]], PRe17955), 
LThr22779 = thresholded_relu_layer(PRe17955, 9.018206666519516, Thr22779), 
LRes28762 = reshape_layer(Thr22779, [2, 1], Res28762), 
LFla88212 = flatten_layer(Res28762, Fla88212), 
LMul12826 = multiply_layer([[[[0.8479], [0.5456]]], [[[0.1468], [0.4149]]]], Mul12826), 
LFla46695 = flatten_layer(Mul12826, Fla46695), 
LGlo75148 = global_max_pool1D_layer([[[1.8304]]], Glo75148), 
LCon57094 = concatenate_layer([Glo75148,[[0.3498]]], 1, Con57094), 
LMax66127 = maximum_layer([Fla46695,Con57094], Max66127), 
LRes55700 = reshape_layer(Max66127, [2, 1], Res55700), 
LRes53795 = reshape_layer(Res55700, [2, 1, 1], Res53795), 
LGlo92067 = global_average_pooling2D_layer(Res53795, Glo92067), 
LCon47967 = concatenate_layer([Glo92067,[[0.7727]]], 1, Con47967), 
LMul82025 = multiply_layer([Fla88212,Con47967], Mul82025), 
exec_layers([LAdd99270,LPRe17955,LThr22779,LRes28762,LFla88212,LMul12826,LFla46695,LGlo75148,LCon57094,LMax66127,LRes55700,LRes53795,LGlo92067,LCon47967,LMul82025],["Add99270","PRe17955","Thr22779","Res28762","Fla88212","Mul12826","Fla46695","Glo75148","Con57094","Max66127","Res55700","Res53795","Glo92067","Con47967","Mul82025"],Mul82025,"Mul82025")

Actual (Unparsed): [[0.0000000, 0.0000000]]

Expected (Unparsed): [[0.0,0.0]]

Actual:   [[0, 0]]

Expected: [[0, 0]]