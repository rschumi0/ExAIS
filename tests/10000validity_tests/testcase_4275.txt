import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave64401 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave64401 = tf.keras.layers.Input(shape=([2, 1]))
in0Max19366 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Max19366 = tf.keras.layers.Input(shape=([2, 1, 1]))

Ave64401 = keras.layers.Average(name = 'Ave64401', )([in0Ave64401,in1Ave64401])
Max19366 = keras.layers.Maximum(name = 'Max19366', )([in0Max19366,in1Max19366])
Res47448 = keras.layers.Reshape((2, 1), name = 'Res47448', )(Max19366)
Max71216 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max71216', )(Res47448)
Dot17658 = keras.layers.Dot(axes=(1, 1), name = 'Dot17658', )([Ave64401,Max71216])
model = tf.keras.models.Model(inputs=[in0Ave64401,in1Ave64401,in0Max19366,in1Max19366], outputs=Dot17658)
in0Ave64401 = tf.constant([[[0.8557], [0.0886]]])
in1Ave64401 = tf.constant([[[0.1375], [0.6134]]])
in0Max19366 = tf.constant([[[[0.6105]], [[0.3481]]]])
in1Max19366 = tf.constant([[[[0.6497]], [[0.7965]]]])
print (np.array2string(model.predict([in0Ave64401,in1Ave64401,in0Max19366,in1Max19366],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot17658.png')

LAve64401 = average_layer([[[[0.8557], [0.0886]]], [[[0.1375], [0.6134]]]], Ave64401), 
LMax19366 = maximum_layer([[[[[0.6105]], [[0.3481]]]], [[[[0.6497]], [[0.7965]]]]], Max19366), 
LRes47448 = reshape_layer(Max19366, [2, 1], Res47448), 
LMax71216 = max_pool1D_layer(Res47448, 1, 1, true, Max71216), 
LDot17658 = dot_layer(Ave64401,Max71216, 1, 1, Dot17658), 
exec_layers([LAve64401,LMax19366,LRes47448,LMax71216,LDot17658],["Ave64401","Max19366","Res47448","Max71216","Dot17658"],Dot17658,"Dot17658")

Actual (Unparsed): [[[0.6022125]]]

Expected (Unparsed): [[[0.60221252]]]

Actual:   [[[0.6023]]]

Expected: [[[0.6023]]]