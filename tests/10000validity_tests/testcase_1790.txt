import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min97191 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Min97191 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Con44911 = tf.keras.layers.Input(shape=([3, 5]))
in0Sub47919 = tf.keras.layers.Input(shape=([3, 3, 3]))
in1Sub47919 = tf.keras.layers.Input(shape=([3, 3, 3]))
in0ReL31759 = tf.keras.layers.Input(shape=([2, 2]))
in0Con88376 = tf.keras.layers.Input(shape=([3, 7]))
in0Dot7003 = tf.keras.layers.Input(shape=([3]))
in1Dot7003 = tf.keras.layers.Input(shape=([3]))
in0Mul89527 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Mul89527 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con38946 = tf.keras.layers.Input(shape=([26]))

Min97191 = keras.layers.Minimum(name = 'Min97191', )([in0Min97191,in1Min97191])
Res1164 = keras.layers.Reshape((1, 2, 2), name = 'Res1164', )(Min97191)
Res76367 = keras.layers.Reshape((1, 4), name = 'Res76367', )(Res1164)
Zer80370 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer80370', )(Res76367)
Con44911 = keras.layers.Concatenate(axis=2, name = 'Con44911', )([Zer80370,in0Con44911])
Sub47919 = keras.layers.Subtract(name = 'Sub47919', )([in0Sub47919,in1Sub47919])
Res73006 = keras.layers.Reshape((3, 9), name = 'Res73006', )(Sub47919)
ReL31759 = keras.layers.ReLU(max_value=9.933396032915851, negative_slope=4.876389419255177, threshold=7.323291832572753, name = 'ReL31759', input_shape=(2, 2))(in0ReL31759)
Zer76183 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer76183', )(ReL31759)
Con88376 = keras.layers.Concatenate(axis=2, name = 'Con88376', )([Zer76183,in0Con88376])
Add70984 = keras.layers.Add(name = 'Add70984', )([Res73006,Con88376])
Min24851 = keras.layers.Minimum(name = 'Min24851', )([Con44911,Add70984])
Fla93284 = keras.layers.Flatten(name = 'Fla93284', )(Min24851)
Dot7003 = keras.layers.Dot(axes=(1, 1), name = 'Dot7003', )([in0Dot7003,in1Dot7003])
Res41734 = keras.layers.Reshape((1, 1), name = 'Res41734', )(Dot7003)
Res80518 = keras.layers.Reshape((1, 1, 1), name = 'Res80518', )(Res41734)
Glo74885 = keras.layers.GlobalMaxPool2D(name = 'Glo74885', )(Res80518)
Mul89527 = keras.layers.Multiply(name = 'Mul89527', )([in0Mul89527,in1Mul89527])
Glo23224 = keras.layers.GlobalAveragePooling3D(name = 'Glo23224', )(Mul89527)
Max56604 = keras.layers.Maximum(name = 'Max56604', )([Glo74885,Glo23224])
Con38946 = keras.layers.Concatenate(axis=1, name = 'Con38946', )([Max56604,in0Con38946])
Min25797 = keras.layers.Minimum(name = 'Min25797', )([Fla93284,Con38946])
model = tf.keras.models.Model(inputs=[in0Min97191,in1Min97191,in0Con44911,in0Sub47919,in1Sub47919,in0ReL31759,in0Con88376,in0Dot7003,in1Dot7003,in0Mul89527,in1Mul89527,in0Con38946], outputs=Min25797)
in0Min97191 = tf.constant([[[[[0.3178, 0.6463]], [[0.7599, 0.9081]]]]])
in1Min97191 = tf.constant([[[[[0.1678, 0.3989]], [[0.6103, 0.5248]]]]])
in0Con44911 = tf.constant([[[0.2647, 0.9546, 0.8368, 0.5746, 0.5666], [0.429, 0.8417, 0.2021, 0.5068, 0.7602], [0.8005, 0.9179, 0.1031, 0.0892, 0.5255]]])
in0Sub47919 = tf.constant([[[[0.3308, 0.2261, 0.3183], [0.7494, 0.2769, 0.3682], [0.332, 0.9234, 0.6783]], [[0.9773, 0.8133, 0.3521], [0.6154, 0.423, 0.4518], [0.5025, 0.6252, 0.095]], [[0.6929, 0.4773, 0.7049], [0.6294, 0.8733, 0.7784], [0.0889, 0.9184, 0.477]]]])
in1Sub47919 = tf.constant([[[[0.4466, 0.6036, 0.2224], [0.2262, 0.7642, 0.6685], [0.1997, 0.0033, 0.8429]], [[0.5633, 0.6898, 0.6634], [0.584, 0.4071, 0.6454], [0.6432, 0.6937, 0.4069]], [[0.6932, 0.895, 0.665], [0.3252, 0.4212, 0.0852], [0.8936, 0.7877, 0.6421]]]])
in0ReL31759 = tf.constant([[[0.1826, 0.39], [0.0077, 0.5607]]])
in0Con88376 = tf.constant([[[0.2981, 0.856, 0.4077, 0.9643, 0.9365, 0.9097, 0.5524], [0.3509, 0.759, 0.1542, 0.7998, 0.9582, 0.8902, 0.3686], [0.7073, 0.8539, 0.4622, 0.4795, 0.657, 0.6594, 0.0054]]])
in0Dot7003 = tf.constant([[0.533, 0.8672, 0.7385]])
in1Dot7003 = tf.constant([[0.9861, 0.2665, 0.3362]])
in0Mul89527 = tf.constant([[[[[0.781]]], [[[0.4719]]]]])
in1Mul89527 = tf.constant([[[[[0.4171]]], [[[0.7292]]]]])
in0Con38946 = tf.constant([[0.0046, 0.2331, 0.1236, 0.4129, 0.9425, 0.65, 0.6679, 0.6346, 0.3901, 0.1559, 0.4835, 0.8145, 0.986, 0.5276, 0.6205, 0.4357, 0.2958, 0.4166, 0.3693, 0.8542, 0.1999, 0.919, 0.0159, 0.8079, 0.5481, 0.907]])
print (np.array2string(model.predict([in0Min97191,in1Min97191,in0Con44911,in0Sub47919,in1Sub47919,in0ReL31759,in0Con88376,in0Dot7003,in1Dot7003,in0Mul89527,in1Mul89527,in0Con38946],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min25797.png')

LMin97191 = minimum_layer([[[[[[0.3178, 0.6463]], [[0.7599, 0.9081]]]]], [[[[[0.1678, 0.3989]], [[0.6103, 0.5248]]]]]], Min97191), 
LRes1164 = reshape_layer(Min97191, [1, 2, 2], Res1164), 
LRes76367 = reshape_layer(Res1164, [1, 4], Res76367), 
LZer80370 = zero_padding1D_layer(Res76367, 2, 0, Zer80370), 
LCon44911 = concatenate_layer([Zer80370,[[[0.2647, 0.9546, 0.8368, 0.5746, 0.5666], [0.429, 0.8417, 0.2021, 0.5068, 0.7602], [0.8005, 0.9179, 0.1031, 0.0892, 0.5255]]]], 2, Con44911), 
LSub47919 = subtract_layer([[[[0.3308, 0.2261, 0.3183], [0.7494, 0.2769, 0.3682], [0.332, 0.9234, 0.6783]], [[0.9773, 0.8133, 0.3521], [0.6154, 0.423, 0.4518], [0.5025, 0.6252, 0.095]], [[0.6929, 0.4773, 0.7049], [0.6294, 0.8733, 0.7784], [0.0889, 0.9184, 0.477]]]], [[[[0.4466, 0.6036, 0.2224], [0.2262, 0.7642, 0.6685], [0.1997, 0.0033, 0.8429]], [[0.5633, 0.6898, 0.6634], [0.584, 0.4071, 0.6454], [0.6432, 0.6937, 0.4069]], [[0.6932, 0.895, 0.665], [0.3252, 0.4212, 0.0852], [0.8936, 0.7877, 0.6421]]]], Sub47919), 
LRes73006 = reshape_layer(Sub47919, [3, 9], Res73006), 
LReL31759 = relu_layer([[[0.1826, 0.39], [0.0077, 0.5607]]], 9.933396032915851, 4.876389419255177, 7.323291832572753, ReL31759), 
LZer76183 = zero_padding1D_layer(ReL31759, 1, 0, Zer76183), 
LCon88376 = concatenate_layer([Zer76183,[[[0.2981, 0.856, 0.4077, 0.9643, 0.9365, 0.9097, 0.5524], [0.3509, 0.759, 0.1542, 0.7998, 0.9582, 0.8902, 0.3686], [0.7073, 0.8539, 0.4622, 0.4795, 0.657, 0.6594, 0.0054]]]], 2, Con88376), 
LAdd70984 = add_layer([Res73006,Con88376], Add70984), 
LMin24851 = minimum_layer([Con44911,Add70984], Min24851), 
LFla93284 = flatten_layer(Min24851, Fla93284), 
LDot7003 = dot_layer([[0.533, 0.8672, 0.7385]], [[0.9861, 0.2665, 0.3362]], 1, 1, Dot7003), 
LRes41734 = reshape_layer(Dot7003, [1, 1], Res41734), 
LRes80518 = reshape_layer(Res41734, [1, 1, 1], Res80518), 
LGlo74885 = global_max_pool2D_layer(Res80518, Glo74885), 
LMul89527 = multiply_layer([[[[[[0.781]]], [[[0.4719]]]]], [[[[[0.4171]]], [[[0.7292]]]]]], Mul89527), 
LGlo23224 = global_average_pooling3D_layer(Mul89527, Glo23224), 
LMax56604 = maximum_layer([Glo74885,Glo23224], Max56604), 
LCon38946 = concatenate_layer([Max56604,[[0.0046, 0.2331, 0.1236, 0.4129, 0.9425, 0.65, 0.6679, 0.6346, 0.3901, 0.1559, 0.4835, 0.8145, 0.986, 0.5276, 0.6205, 0.4357, 0.2958, 0.4166, 0.3693, 0.8542, 0.1999, 0.919, 0.0159, 0.8079, 0.5481, 0.907]]], 1, Con38946), 
LMin25797 = minimum_layer([Fla93284,Con38946], Min25797), 
exec_layers([LMin97191,LRes1164,LRes76367,LZer80370,LCon44911,LSub47919,LRes73006,LReL31759,LZer76183,LCon88376,LAdd70984,LMin24851,LFla93284,LDot7003,LRes41734,LRes80518,LGlo74885,LMul89527,LGlo23224,LMax56604,LCon38946,LMin25797],["Min97191","Res1164","Res76367","Zer80370","Con44911","Sub47919","Res73006","ReL31759","Zer76183","Con88376","Add70984","Min24851","Fla93284","Dot7003","Res41734","Res80518","Glo74885","Mul89527","Glo23224","Max56604","Con38946","Min25797"],Min25797,"Min25797")

Actual (Unparsed): [[-0.1158000, -0.3775000, 0.0000000, 0.0000000, -0.0796000, 0.6640000, 0.6500000, 0.5746000, 0.3878000, -34.4067941, -33.6859310, 0.0000000, 0.0000000, 0.1701000, 0.5276000, 0.2021000, 0.4357000, 0.0567000, -35.6739746, -33.3947313, 0.6103000, 0.1999000, 0.8005000, 0.0159000, -0.1477000, 0.0892000, -0.1597000]]

Expected (Unparsed): [[-0.11580000000000001,-0.37750000000000006,0,0,-0.0796,0.6640000000000001,0.65,0.5746,0.38780000000000003,-34.406794098519626,-33.68593093296611,0,0,0.17009999999999997,0.5276,0.2021,0.4357,0.05670000000000003,-35.673974607947365,-33.39473125909925,0.6103,0.1999,0.8005,0.0159,-0.14769999999999994,0.0892,-0.15970000000000004]]

Actual:   [[-0.1158, -0.3775, 0, 0, -0.0796, 0.664, 0.65, 0.5746, 0.3878, -34.4067, -33.6859, 0, 0, 0.1701, 0.5276, 0.2021, 0.4357, 0.0567, -35.6739, -33.3947, 0.6103, 0.1999, 0.8005, 0.0159, -0.1477, 0.0892, -0.1597]]

Expected: [[-0.1158, -0.3775, 0, 0, -0.0796, 0.6641, 0.65, 0.5746, 0.3879, -34.4067, -33.6859, 0, 0, 0.1701, 0.5276, 0.2021, 0.4357, 0.0568, -35.6739, -33.3947, 0.6103, 0.1999, 0.8005, 0.0159, -0.1476, 0.0892, -0.1597]]