import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave47259 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Ave47259 = tf.keras.layers.Input(shape=([1, 2, 2]))

Ave47259 = keras.layers.Average(name = 'Ave47259', )([in0Ave47259,in1Ave47259])
Dep57670 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='same', name = 'Dep57670', )(Ave47259)
model = tf.keras.models.Model(inputs=[in0Ave47259,in1Ave47259], outputs=Dep57670)
w = model.get_layer('Dep57670').get_weights() 
w[0] = np.array([[[[0.5506], [0.102]], [[0.7026], [0.4354]]]])
w[1] = np.array([0, 0])
model.get_layer('Dep57670').set_weights(w) 
in0Ave47259 = tf.constant([[[[0.877, 0.4407], [0.5072, 0.4707]]]])
in1Ave47259 = tf.constant([[[[0.6152, 0.7348], [0.3626, 0.409]]]])
print (np.array2string(model.predict([in0Ave47259,in1Ave47259],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dep57670.png')

LAve47259 = average_layer([[[[[0.877, 0.4407], [0.5072, 0.4707]]]], [[[[0.6152, 0.7348], [0.3626, 0.409]]]]], Ave47259), 
LDep57670 = depthwise_conv2D_layer(Ave47259, 1, 2,[[[[0.5506], [0.102]], [[0.7026], [0.4354]]]],[0, 0], 1, 1, true, Dep57670), 
exec_layers([LAve47259,LDep57670],["Ave47259","Dep57670"],Dep57670,"Dep57670")

Actual (Unparsed): [[[[0.7163634, 0.2514612], [0.2394559, 0.0448647]]]]

Expected (Unparsed): [[[[0.7163633999999999,0.25146119],[0.23945593999999998,0.044864699999999993]]]]

Actual:   [[[[0.7164, 0.2515], [0.2395, 0.0449]]]]

Expected: [[[[0.7164, 0.2515], [0.2395, 0.0449]]]]