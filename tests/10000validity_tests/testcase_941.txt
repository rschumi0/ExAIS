import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul83390 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Mul83390 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))

Mul83390 = keras.layers.Multiply(name = 'Mul83390', )([in0Mul83390,in1Mul83390])
Res39035 = keras.layers.Reshape((2, 1, 4), name = 'Res39035', )(Mul83390)
Con38618 = keras.layers.Conv2DTranspose(4, (1, 1),strides=(1, 1), padding='same', name = 'Con38618', )(Res39035)
model = tf.keras.models.Model(inputs=[in0Mul83390,in1Mul83390], outputs=Con38618)
w = model.get_layer('Con38618').get_weights() 
w[0] = np.array([[[[0.1542, 0.7841, 0.4399, 0.9894], [0.2049, 0.2753, 0.5673, 0.1787], [0.4465, 0.4666, 0.0992, 0.9329], [0.5875, 0.8372, 0.259, 0.6043]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con38618').set_weights(w) 
in0Mul83390 = tf.constant([[[[[0.4712, 0.3615], [0.2468, 0.5394]]], [[[0.2259, 0.6335], [0.0017, 0.0283]]]]])
in1Mul83390 = tf.constant([[[[[0.6386, 0.2643], [0.6442, 0.5845]]], [[[0.5076, 0.8998], [0.4157, 0.8133]]]]])
print (np.array2string(model.predict([in0Mul83390,in1Mul83390],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con38618.png')

LMul83390 = multiply_layer([[[[[[0.4712, 0.3615], [0.2468, 0.5394]]], [[[0.2259, 0.6335], [0.0017, 0.0283]]]]], [[[[[0.6386, 0.2643], [0.6442, 0.5845]]], [[[0.5076, 0.8998], [0.4157, 0.8133]]]]]], Mul83390), 
LRes39035 = reshape_layer(Mul83390, [2, 1, 4], Res39035), 
LCon38618 = conv2D_transpose_layer(Res39035, 1, 1,[[[[0.1542, 0.7841, 0.4399, 0.9894], [0.2049, 0.2753, 0.5673, 0.1787], [0.4465, 0.4666, 0.0992, 0.9329], [0.5875, 0.8372, 0.259, 0.6043]]]],[0, 0, 0, 0], 1, 1, true, Con38618), 
exec_layers([LMul83390,LRes39035,LCon38618],["Mul83390","Res39035","Con38618"],Con38618,"Con38618")

Actual (Unparsed): [[[[0.5031929, 0.2344941, 0.4888323, 0.4884748]], [[0.4877202, 0.1849366, 0.3387137, 0.5586821]]]]

Expected (Unparsed): [[[[0.503192873153,0.234494122851,0.488832329372,0.48847476957]],[[0.48772018545500007,0.184936584136,0.338713709719,0.5586821124470001]]]]

Actual:   [[[[0.5032, 0.2345, 0.4889, 0.4885]], [[0.4878, 0.185, 0.3388, 0.5587]]]]

Expected: [[[[0.5032, 0.2345, 0.4889, 0.4885]], [[0.4878, 0.185, 0.3388, 0.5587]]]]