import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max65066 = tf.keras.layers.Input(shape=([1, 2]))
in1Max65066 = tf.keras.layers.Input(shape=([1, 2]))
in0Con51465 = tf.keras.layers.Input(shape=([2, 1]))
in0Min11717 = tf.keras.layers.Input(shape=([2, 2]))
in1Min11717 = tf.keras.layers.Input(shape=([2, 2]))

Max65066 = keras.layers.Maximum(name = 'Max65066', )([in0Max65066,in1Max65066])
Res16826 = keras.layers.Reshape((1, 2, 1), name = 'Res16826', )(Max65066)
Res1391 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res1391', )(Res16826)
Cro28426 = keras.layers.Cropping3D(cropping=((0, 0), (0, 1), (0, 0)), name = 'Cro28426', )(Res1391)
Res86159 = keras.layers.Reshape((1, 1, 1), name = 'Res86159', )(Cro28426)
Res80365 = keras.layers.Reshape((1, 1), name = 'Res80365', )(Res86159)
Zer24132 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer24132', )(Res80365)
Con51465 = keras.layers.Concatenate(axis=2, name = 'Con51465', )([Zer24132,in0Con51465])
Min11717 = keras.layers.Minimum(name = 'Min11717', )([in0Min11717,in1Min11717])
Per24503 = keras.layers.Permute((1,2), name = 'Per24503',)(Min11717)
Mul83547 = keras.layers.Multiply(name = 'Mul83547', )([Con51465,Per24503])
model = tf.keras.models.Model(inputs=[in0Max65066,in1Max65066,in0Con51465,in0Min11717,in1Min11717], outputs=Mul83547)
in0Max65066 = tf.constant([[[0.5225, 0.2153]]])
in1Max65066 = tf.constant([[[0.4327, 0.2178]]])
in0Con51465 = tf.constant([[[0.8861], [0.3711]]])
in0Min11717 = tf.constant([[[0.8599, 0.499], [0.9801, 0.3303]]])
in1Min11717 = tf.constant([[[0.6881, 0.2103], [0.5038, 0.5279]]])
print (np.array2string(model.predict([in0Max65066,in1Max65066,in0Con51465,in0Min11717,in1Min11717],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul83547.png')

LMax65066 = maximum_layer([[[[0.5225, 0.2153]]], [[[0.4327, 0.2178]]]], Max65066), 
LRes16826 = reshape_layer(Max65066, [1, 2, 1], Res16826), 
LRes1391 = reshape_layer(Res16826, [1, 2, 1, 1], Res1391), 
LCro28426 = cropping3D_layer(Res1391, 0, 0, 0, 1, 0, 0, Cro28426), 
LRes86159 = reshape_layer(Cro28426, [1, 1, 1], Res86159), 
LRes80365 = reshape_layer(Res86159, [1, 1], Res80365), 
LZer24132 = zero_padding1D_layer(Res80365, 1, 0, Zer24132), 
LCon51465 = concatenate_layer([Zer24132,[[[0.8861], [0.3711]]]], 2, Con51465), 
LMin11717 = minimum_layer([[[[0.8599, 0.499], [0.9801, 0.3303]]], [[[0.6881, 0.2103], [0.5038, 0.5279]]]], Min11717), 
LPer24503 = permute_layer(Min11717, 1,2, Per24503), 
LMul83547 = multiply_layer([Con51465,Per24503], Mul83547), 
exec_layers([LMax65066,LRes16826,LRes1391,LCro28426,LRes86159,LRes80365,LZer24132,LCon51465,LMin11717,LPer24503,LMul83547],["Max65066","Res16826","Res1391","Cro28426","Res86159","Res80365","Zer24132","Con51465","Min11717","Per24503","Mul83547"],Mul83547,"Mul83547")

Actual (Unparsed): [[[0.0000000, 0.1863468], [0.2632355, 0.1225743]]]

Expected (Unparsed): [[[0.0,0.18634683],[0.2632355,0.12257433]]]

Actual:   [[[0, 0.1864], [0.2633, 0.1226]]]

Expected: [[[0, 0.1864], [0.2633, 0.1226]]]