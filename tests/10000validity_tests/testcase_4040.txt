import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max23933 = tf.keras.layers.Input(shape=([1, 1]))
in1Max23933 = tf.keras.layers.Input(shape=([1, 1]))
in0Min80532 = tf.keras.layers.Input(shape=([2, 1]))
in1Min80532 = tf.keras.layers.Input(shape=([2, 1]))
in0Max16352 = tf.keras.layers.Input(shape=([2, 2]))
in1Max16352 = tf.keras.layers.Input(shape=([2, 2]))
in0Con44904 = tf.keras.layers.Input(shape=([4, 1]))

Max23933 = keras.layers.Maximum(name = 'Max23933', )([in0Max23933,in1Max23933])
Zer65581 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer65581', )(Max23933)
Min80532 = keras.layers.Minimum(name = 'Min80532', )([in0Min80532,in1Min80532])
Min76283 = keras.layers.Minimum(name = 'Min76283', )([Zer65581,Min80532])
Res96208 = keras.layers.Reshape((2, 1, 1), name = 'Res96208', )(Min76283)
Zer48081 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer48081', )(Res96208)
Res78608 = keras.layers.Reshape((4, 3), name = 'Res78608', )(Zer48081)
Max16352 = keras.layers.Maximum(name = 'Max16352', )([in0Max16352,in1Max16352])
Zer69599 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer69599', )(Max16352)
Con44904 = keras.layers.Concatenate(axis=2, name = 'Con44904', )([Zer69599,in0Con44904])
Max8713 = keras.layers.Maximum(name = 'Max8713', )([Res78608,Con44904])
Res69622 = keras.layers.Reshape((4, 3, 1), name = 'Res69622', )(Max8713)
Glo7909 = keras.layers.GlobalMaxPool2D(name = 'Glo7909', )(Res69622)
model = tf.keras.models.Model(inputs=[in0Max23933,in1Max23933,in0Min80532,in1Min80532,in0Max16352,in1Max16352,in0Con44904], outputs=Glo7909)
in0Max23933 = tf.constant([[[0.1842]]])
in1Max23933 = tf.constant([[[0.1394]]])
in0Min80532 = tf.constant([[[0.3075], [0.4607]]])
in1Min80532 = tf.constant([[[0.1635], [0.7955]]])
in0Max16352 = tf.constant([[[0.4991, 0.3115], [0.8934, 0.3146]]])
in1Max16352 = tf.constant([[[0.2245, 0.366], [0.8707, 0.1843]]])
in0Con44904 = tf.constant([[[0.7791], [0.0203], [0.5212], [0.6357]]])
print (np.array2string(model.predict([in0Max23933,in1Max23933,in0Min80532,in1Min80532,in0Max16352,in1Max16352,in0Con44904],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo7909.png')

LMax23933 = maximum_layer([[[[0.1842]]], [[[0.1394]]]], Max23933), 
LZer65581 = zero_padding1D_layer(Max23933, 1, 0, Zer65581), 
LMin80532 = minimum_layer([[[[0.3075], [0.4607]]], [[[0.1635], [0.7955]]]], Min80532), 
LMin76283 = minimum_layer([Zer65581,Min80532], Min76283), 
LRes96208 = reshape_layer(Min76283, [2, 1, 1], Res96208), 
LZer48081 = zero_padding2D_layer(Res96208, 1, 1, 1, 1, Zer48081), 
LRes78608 = reshape_layer(Zer48081, [4, 3], Res78608), 
LMax16352 = maximum_layer([[[[0.4991, 0.3115], [0.8934, 0.3146]]], [[[0.2245, 0.366], [0.8707, 0.1843]]]], Max16352), 
LZer69599 = zero_padding1D_layer(Max16352, 2, 0, Zer69599), 
LCon44904 = concatenate_layer([Zer69599,[[[0.7791], [0.0203], [0.5212], [0.6357]]]], 2, Con44904), 
LMax8713 = maximum_layer([Res78608,Con44904], Max8713), 
LRes69622 = reshape_layer(Max8713, [4, 3, 1], Res69622), 
LGlo7909 = global_max_pool2D_layer(Res69622, Glo7909), 
exec_layers([LMax23933,LZer65581,LMin80532,LMin76283,LRes96208,LZer48081,LRes78608,LMax16352,LZer69599,LCon44904,LMax8713,LRes69622,LGlo7909],["Max23933","Zer65581","Min80532","Min76283","Res96208","Zer48081","Res78608","Max16352","Zer69599","Con44904","Max8713","Res69622","Glo7909"],Glo7909,"Glo7909")

Actual (Unparsed): [[0.8934000]]

Expected (Unparsed): [[0.8934]]

Actual:   [[0.8934]]

Expected: [[0.8934]]