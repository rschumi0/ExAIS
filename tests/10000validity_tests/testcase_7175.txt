import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min73727 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Min73727 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Max72738 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in1Max72738 = tf.keras.layers.Input(shape=([2, 2, 2, 2]))
in0Sub777 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub777 = tf.keras.layers.Input(shape=([2, 2]))
in0Con20461 = tf.keras.layers.Input(shape=([8, 2]))

Min73727 = keras.layers.Minimum(name = 'Min73727', )([in0Min73727,in1Min73727])
Res10605 = keras.layers.Reshape((1, 2, 2), name = 'Res10605', )(Min73727)
Res5158 = keras.layers.Reshape((1, 4), name = 'Res5158', )(Res10605)
Zer8765 = keras.layers.ZeroPadding1D(padding=((7, 0)), name = 'Zer8765', )(Res5158)
Max72738 = keras.layers.Maximum(name = 'Max72738', )([in0Max72738,in1Max72738])
Res59109 = keras.layers.Reshape((2, 2, 4), name = 'Res59109', )(Max72738)
Res26149 = keras.layers.Reshape((2, 8), name = 'Res26149', )(Res59109)
Sub777 = keras.layers.Subtract(name = 'Sub777', )([in0Sub777,in1Sub777])
Dot82248 = keras.layers.Dot(axes=(1, 1), name = 'Dot82248', )([Res26149,Sub777])
Con20461 = keras.layers.Concatenate(axis=2, name = 'Con20461', )([Dot82248,in0Con20461])
Add51525 = keras.layers.Add(name = 'Add51525', )([Zer8765,Con20461])
model = tf.keras.models.Model(inputs=[in0Min73727,in1Min73727,in0Max72738,in1Max72738,in0Sub777,in1Sub777,in0Con20461], outputs=Add51525)
in0Min73727 = tf.constant([[[[[0.6242], [0.5735]], [[0.5539], [0.3149]]]]])
in1Min73727 = tf.constant([[[[[0.4047], [0.2605]], [[0.1295], [0.4654]]]]])
in0Max72738 = tf.constant([[[[[0.4587, 0.3619], [0.5111, 0.406]], [[0.9597, 0.0455], [0.4171, 0.8483]]], [[[0.6259, 0.0589], [0.3047, 0.6451]], [[0.2774, 0.8891], [0.3618, 0.6041]]]]])
in1Max72738 = tf.constant([[[[[0.6018, 0.2364], [0.8914, 0.0677]], [[0.0753, 0.8526], [0.8527, 0.9207]]], [[[0.4991, 0.7171], [0.7207, 0.1306]], [[0.15, 0.7283], [0.7565, 0.1421]]]]])
in0Sub777 = tf.constant([[[0.1143, 0.5731], [0.244, 0.45]]])
in1Sub777 = tf.constant([[[0.9773, 0.2045], [0.2403, 0.4551]]])
in0Con20461 = tf.constant([[[0.5639, 0.0759], [0.8664, 0.8646], [0.8226, 0.0317], [0.3935, 0.8711], [0.723, 0.3882], [0.2173, 0.311], [0.0727, 0.9324], [0.0087, 0.2014]]])
print (np.array2string(model.predict([in0Min73727,in1Min73727,in0Max72738,in1Max72738,in0Sub777,in1Sub777,in0Con20461],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add51525.png')

LMin73727 = minimum_layer([[[[[[0.6242], [0.5735]], [[0.5539], [0.3149]]]]], [[[[[0.4047], [0.2605]], [[0.1295], [0.4654]]]]]], Min73727), 
LRes10605 = reshape_layer(Min73727, [1, 2, 2], Res10605), 
LRes5158 = reshape_layer(Res10605, [1, 4], Res5158), 
LZer8765 = zero_padding1D_layer(Res5158, 7, 0, Zer8765), 
LMax72738 = maximum_layer([[[[[[0.4587, 0.3619], [0.5111, 0.406]], [[0.9597, 0.0455], [0.4171, 0.8483]]], [[[0.6259, 0.0589], [0.3047, 0.6451]], [[0.2774, 0.8891], [0.3618, 0.6041]]]]], [[[[[0.6018, 0.2364], [0.8914, 0.0677]], [[0.0753, 0.8526], [0.8527, 0.9207]]], [[[0.4991, 0.7171], [0.7207, 0.1306]], [[0.15, 0.7283], [0.7565, 0.1421]]]]]], Max72738), 
LRes59109 = reshape_layer(Max72738, [2, 2, 4], Res59109), 
LRes26149 = reshape_layer(Res59109, [2, 8], Res26149), 
LSub777 = subtract_layer([[[0.1143, 0.5731], [0.244, 0.45]]], [[[0.9773, 0.2045], [0.2403, 0.4551]]], Sub777), 
LDot82248 = dot_layer(Res26149,Sub777, 1, 1, Dot82248), 
LCon20461 = concatenate_layer([Dot82248,[[[0.5639, 0.0759], [0.8664, 0.8646], [0.8226, 0.0317], [0.3935, 0.8711], [0.723, 0.3882], [0.2173, 0.311], [0.0727, 0.9324], [0.0087, 0.2014]]]], 2, Con20461), 
LAdd51525 = add_layer([Zer8765,Con20461], Add51525), 
exec_layers([LMin73727,LRes10605,LRes5158,LZer8765,LMax72738,LRes59109,LRes26149,LSub777,LDot82248,LCon20461,LAdd51525],["Min73727","Res10605","Res5158","Zer8765","Max72738","Res59109","Res26149","Sub777","Dot82248","Con20461","Add51525"],Add51525,"Add51525")

Actual (Unparsed): [[[-0.5170376, 0.2186314, 0.5639000, 0.0759000], [-0.3096664, 0.1297391, 0.8664000, 0.8646000], [-0.7666116, 0.3248944, 0.8226000, 0.0317000], [-0.3479911, 0.1463616, 0.3935000, 0.8711000], [-0.8271947, 0.3523306, 0.7230000, 0.3882000], [-0.7325041, 0.3097339, 0.2173000, 0.3110000], [-0.7330810, 0.3104470, 0.0727000, 0.9324000], [-0.3876289, 0.5967891, 0.1382000, 0.5163000]]]

Expected (Unparsed): [[[-0.51703757,0.21863139,0.5639,0.0759],[-0.30966643,0.12973913,0.8664,0.8646],[-0.7666116099999999,0.32489447,0.8226,0.0317],[-0.34799113000000004,0.14636159000000004,0.3935,0.8711],[-0.8271947199999999,0.35233068,0.723,0.3882],[-0.73250413,0.30973395000000004,0.2173,0.311],[-0.73308105,0.31044707000000005,0.0727,0.9324],[-0.38762893000000004,0.59678911,0.1382,0.5163]]]

Actual:   [[[-0.517, 0.2187, 0.5639, 0.0759], [-0.3096, 0.1298, 0.8664, 0.8646], [-0.7666, 0.3249, 0.8226, 0.0317], [-0.3479, 0.1464, 0.3935, 0.8711], [-0.8271, 0.3524, 0.723, 0.3882], [-0.7325, 0.3098, 0.2173, 0.311], [-0.733, 0.3105, 0.0727, 0.9324], [-0.3876, 0.5968, 0.1382, 0.5163]]]

Expected: [[[-0.517, 0.2187, 0.5639, 0.0759], [-0.3096, 0.1298, 0.8664, 0.8646], [-0.7666, 0.3249, 0.8226, 0.0317], [-0.3479, 0.1464, 0.3935, 0.8711], [-0.8271, 0.3524, 0.723, 0.3882], [-0.7325, 0.3098, 0.2173, 0.311], [-0.733, 0.3105, 0.0727, 0.9324], [-0.3876, 0.5968, 0.1382, 0.5163]]]