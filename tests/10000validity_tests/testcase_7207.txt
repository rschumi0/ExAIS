import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add29059 = tf.keras.layers.Input(shape=([2, 2]))
in1Add29059 = tf.keras.layers.Input(shape=([2, 2]))
in0Add89973 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add89973 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con44854 = tf.keras.layers.Input(shape=([2, 2, 3, 1]))
in0Sub39975 = tf.keras.layers.Input(shape=([2, 2, 3, 2]))
in1Sub39975 = tf.keras.layers.Input(shape=([2, 2, 3, 2]))
in0Add54911 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add54911 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con96332 = tf.keras.layers.Input(shape=([2, 2, 5]))

Add29059 = keras.layers.Add(name = 'Add29059', )([in0Add29059,in1Add29059])
Res93802 = keras.layers.Reshape((2, 2, 1), name = 'Res93802', )(Add29059)
Add89973 = keras.layers.Add(name = 'Add89973', )([in0Add89973,in1Add89973])
Res93516 = keras.layers.Reshape((2, 2, 1), name = 'Res93516', )(Add89973)
Mul74598 = keras.layers.Multiply(name = 'Mul74598', )([Res93802,Res93516])
Con94466 = keras.layers.Conv2D(3, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con94466', )(Mul74598)
Res49132 = keras.layers.Reshape((2, 2, 3, 1), name = 'Res49132', )(Con94466)
Con44854 = keras.layers.Concatenate(axis=4, name = 'Con44854', )([Res49132,in0Con44854])
Sub39975 = keras.layers.Subtract(name = 'Sub39975', )([in0Sub39975,in1Sub39975])
Sub55278 = keras.layers.Subtract(name = 'Sub55278', )([Con44854,Sub39975])
Res89563 = keras.layers.Reshape((2, 2, 6), name = 'Res89563', )(Sub55278)
Add54911 = keras.layers.Add(name = 'Add54911', )([in0Add54911,in1Add54911])
Zer33324 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer33324', )(Add54911)
Con96332 = keras.layers.Concatenate(axis=3, name = 'Con96332', )([Zer33324,in0Con96332])
Mul98851 = keras.layers.Multiply(name = 'Mul98851', )([Res89563,Con96332])
model = tf.keras.models.Model(inputs=[in0Add29059,in1Add29059,in0Add89973,in1Add89973,in0Con44854,in0Sub39975,in1Sub39975,in0Add54911,in1Add54911,in0Con96332], outputs=Mul98851)
w = model.get_layer('Con94466').get_weights() 
w[0] = np.array([[[[0.0664, 0.9802, 0.3778]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con94466').set_weights(w) 
in0Add29059 = tf.constant([[[0.9357, 0.7901], [0.3106, 0.8693]]])
in1Add29059 = tf.constant([[[0.4028, 0.3302], [0.2892, 0.32]]])
in0Add89973 = tf.constant([[[[[0.4693], [0.836]], [[0.4236], [0.0477]]]]])
in1Add89973 = tf.constant([[[[[0.7767], [0.5782]], [[0.7978], [0.0057]]]]])
in0Con44854 = tf.constant([[[[[0.5713], [0.2559], [0.0242]], [[0.2373], [0.7822], [0.9658]]], [[[0.0089], [0.9801], [0.7573]], [[0.7937], [0.2615], [0.5334]]]]])
in0Sub39975 = tf.constant([[[[[0.227, 0.5987], [0.442, 0.0978], [0.9225, 0.4146]], [[0.1155, 0.3724], [0.8494, 0.0427], [0.6849, 0.0636]]], [[[0.2665, 0.3247], [0.1759, 0.0652], [0.7533, 0.3135]], [[0.2102, 0.4712], [0.396, 0.0479], [0.2064, 0.1458]]]]])
in1Sub39975 = tf.constant([[[[[0.6455, 0.3844], [0.4173, 0.8947], [0.9687, 0.683]], [[0.6057, 0.7041], [0.5321, 0.0507], [0.9188, 0.6837]]], [[[0.8068, 0.5338], [0.3107, 0.8052], [0.1637, 0.1211]], [[0.6852, 0.2642], [0.2409, 0.6701], [0.782, 0.3079]]]]])
in0Add54911 = tf.constant([[[[0.1075], [0.9024]]]])
in1Add54911 = tf.constant([[[[0.7157], [0.671]]]])
in0Con96332 = tf.constant([[[[0.0371, 0.643, 0.4139, 0.8994, 0.1348], [0.8341, 0.9775, 0.6697, 0.9029, 0.705]], [[0.8603, 0.2899, 0.0171, 0.4682, 0.5268], [0.2275, 0.1805, 0.1824, 0.1292, 0.9217]]]])
print (np.array2string(model.predict([in0Add29059,in1Add29059,in0Add89973,in1Add89973,in0Con44854,in0Sub39975,in1Sub39975,in0Add54911,in1Add54911,in0Con96332],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul98851.png')

LAdd29059 = add_layer([[[[0.9357, 0.7901], [0.3106, 0.8693]]], [[[0.4028, 0.3302], [0.2892, 0.32]]]], Add29059), 
LRes93802 = reshape_layer(Add29059, [2, 2, 1], Res93802), 
LAdd89973 = add_layer([[[[[[0.4693], [0.836]], [[0.4236], [0.0477]]]]], [[[[[0.7767], [0.5782]], [[0.7978], [0.0057]]]]]], Add89973), 
LRes93516 = reshape_layer(Add89973, [2, 2, 1], Res93516), 
LMul74598 = multiply_layer([Res93802,Res93516], Mul74598), 
LCon94466 = conv2D_layer(Mul74598, 1, 1,[[[[0.0664, 0.9802, 0.3778]]]],[0, 0, 0], 1, 1, true, 1, 1, Con94466), 
LRes49132 = reshape_layer(Con94466, [2, 2, 3, 1], Res49132), 
LCon44854 = concatenate_layer([Res49132,[[[[[0.5713], [0.2559], [0.0242]], [[0.2373], [0.7822], [0.9658]]], [[[0.0089], [0.9801], [0.7573]], [[0.7937], [0.2615], [0.5334]]]]]], 4, Con44854), 
LSub39975 = subtract_layer([[[[[0.227, 0.5987], [0.442, 0.0978], [0.9225, 0.4146]], [[0.1155, 0.3724], [0.8494, 0.0427], [0.6849, 0.0636]]], [[[0.2665, 0.3247], [0.1759, 0.0652], [0.7533, 0.3135]], [[0.2102, 0.4712], [0.396, 0.0479], [0.2064, 0.1458]]]]], [[[[[0.6455, 0.3844], [0.4173, 0.8947], [0.9687, 0.683]], [[0.6057, 0.7041], [0.5321, 0.0507], [0.9188, 0.6837]]], [[[0.8068, 0.5338], [0.3107, 0.8052], [0.1637, 0.1211]], [[0.6852, 0.2642], [0.2409, 0.6701], [0.782, 0.3079]]]]], Sub39975), 
LSub55278 = subtract_layer(Con44854,Sub39975, Sub55278), 
LRes89563 = reshape_layer(Sub55278, [2, 2, 6], Res89563), 
LAdd54911 = add_layer([[[[[0.1075], [0.9024]]]], [[[[0.7157], [0.671]]]]], Add54911), 
LZer33324 = zero_padding2D_layer(Add54911, 1, 0, 0, 0, Zer33324), 
LCon96332 = concatenate_layer([Zer33324,[[[[0.0371, 0.643, 0.4139, 0.8994, 0.1348], [0.8341, 0.9775, 0.6697, 0.9029, 0.705]], [[0.8603, 0.2899, 0.0171, 0.4682, 0.5268], [0.2275, 0.1805, 0.1824, 0.1292, 0.9217]]]]], 3, Con96332), 
LMul98851 = multiply_layer([Res89563,Con96332], Mul98851), 
exec_layers([LAdd29059,LRes93802,LAdd89973,LRes93516,LMul74598,LCon94466,LRes49132,LCon44854,LSub39975,LSub55278,LRes89563,LAdd54911,LZer33324,LCon96332,LMul98851],["Add29059","Res93802","Add89973","Res93516","Mul74598","Con94466","Res49132","Con44854","Sub39975","Sub55278","Res89563","Add54911","Zer33324","Con96332","Mul98851"],Mul98851,"Mul98851")

Actual (Unparsed): [[[[0.0000000, 0.0132447, 1.0352616, 0.4357539, 0.6082497, 0.0394425], [0.0000000, 0.4746029, 1.2078563, 0.5291969, 0.7516274, 1.1180595]], [[0.4848190, 0.1875454, 0.2472529, 0.0294137, -0.1464648, 0.2975893], [0.7540000, 0.1334743, -0.0167592, 0.1611869, 0.0774675, 0.6410424]]]]

Expected (Unparsed): [[[[0.0,0.013244700000000002,1.0352615932906,0.43575391999999996,0.6082497250897201,0.03944248],[0.0,0.47460289999999994,1.2078562428418298,0.52919694,0.7516274266934213,1.1180595]],[[0.4848189937011456,0.18754540000000003,0.2472529051432856,0.02941371,-0.14646482277590872,0.29758932],[0.7539999843238112,0.13347425000000002,-0.016759217547018004,0.16118688000000003,0.0774674875173712,0.64104235]]]]

Actual:   [[[[0, 0.0133, 1.0353, 0.4358, 0.6083, 0.0395], [0, 0.4747, 1.2079, 0.5292, 0.7517, 1.1181]], [[0.4849, 0.1876, 0.2473, 0.0295, -0.1464, 0.2976], [0.754, 0.1335, -0.0167, 0.1612, 0.0775, 0.6411]]]]

Expected: [[[[0, 0.0133, 1.0353, 0.4358, 0.6083, 0.0395], [0, 0.4747, 1.2079, 0.5292, 0.7517, 1.1181]], [[0.4849, 0.1876, 0.2473, 0.0295, -0.1464, 0.2976], [0.754, 0.1335, -0.0167, 0.1612, 0.0775, 0.6411]]]]