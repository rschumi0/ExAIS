import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave13123 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Ave13123 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Ave13123 = keras.layers.Average(name = 'Ave13123', )([in0Ave13123,in1Ave13123])
ELU34770 = keras.layers.ELU(alpha=9.196167307937767, name = 'ELU34770', )(Ave13123)
Res97199 = keras.layers.Reshape((2, 2, 1), name = 'Res97199', )(ELU34770)
Glo43813 = keras.layers.GlobalMaxPool2D(name = 'Glo43813', )(Res97199)
Res83820 = keras.layers.Reshape((1, 1), name = 'Res83820', )(Glo43813)
Res51915 = keras.layers.Reshape((1, 1, 1), name = 'Res51915', )(Res83820)
Res63485 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res63485', )(Res51915)
Con73623 = keras.layers.Conv3D(3, (1, 1, 1),strides=(1, 1, 11), padding='valid', dilation_rate=(1, 1, 1), name = 'Con73623', )(Res63485)
model = tf.keras.models.Model(inputs=[in0Ave13123,in1Ave13123], outputs=Con73623)
w = model.get_layer('Con73623').get_weights() 
w[0] = np.array([[[[[0.6839, 0.5125, 0.5985]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con73623').set_weights(w) 
in0Ave13123 = tf.constant([[[[[0.3219]], [[0.8676]]], [[[0.0643]], [[0.6703]]]]])
in1Ave13123 = tf.constant([[[[[0.7753]], [[0.1065]]], [[[0.2889]], [[0.0199]]]]])
print (np.array2string(model.predict([in0Ave13123,in1Ave13123],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con73623.png')

LAve13123 = average_layer([[[[[[0.3219]], [[0.8676]]], [[[0.0643]], [[0.6703]]]]], [[[[[0.7753]], [[0.1065]]], [[[0.2889]], [[0.0199]]]]]], Ave13123), 
LELU34770 = elu_layer(Ave13123, 9.196167307937767, ELU34770), 
LRes97199 = reshape_layer(ELU34770, [2, 2, 1], Res97199), 
LGlo43813 = global_max_pool2D_layer(Res97199, Glo43813), 
LRes83820 = reshape_layer(Glo43813, [1, 1], Res83820), 
LRes51915 = reshape_layer(Res83820, [1, 1, 1], Res51915), 
LRes63485 = reshape_layer(Res51915, [1, 1, 1, 1], Res63485), 
LCon73623 = conv3D_layer(Res63485, 1, 1, 1,[[[[[0.6839, 0.5125, 0.5985]]]]],[0, 0, 0], 1, 1, 11, false, 1, 1, 1, Con73623), 
exec_layers([LAve13123,LELU34770,LRes97199,LGlo43813,LRes83820,LRes51915,LRes63485,LCon73623],["Ave13123","ELU34770","Res97199","Glo43813","Res83820","Res51915","Res63485","Con73623"],Con73623,"Con73623")

Actual (Unparsed): [[[[[0.3751876, 0.2811575, 0.3283371]]]]]

Expected (Unparsed): [[[[[0.37518753999999993,0.28115749999999995,0.3283371]]]]]

Actual:   [[[[[0.3752, 0.2812, 0.3284]]]]]

Expected: [[[[[0.3752, 0.2812, 0.3284]]]]]