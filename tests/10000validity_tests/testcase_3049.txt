import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave1077 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave1077 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Ave38217 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave38217 = tf.keras.layers.Input(shape=([2, 2]))

Ave1077 = keras.layers.Average(name = 'Ave1077', )([in0Ave1077,in1Ave1077])
Res20662 = keras.layers.Reshape((2, 2), name = 'Res20662', )(Ave1077)
Ave38217 = keras.layers.Average(name = 'Ave38217', )([in0Ave38217,in1Ave38217])
ELU37509 = keras.layers.ELU(alpha=-1.5888211266933023, name = 'ELU37509', )(Ave38217)
Sub51073 = keras.layers.Subtract(name = 'Sub51073', )([Res20662,ELU37509])
Con55734 = keras.layers.Conv1D(3, (2),strides=(1), padding='valid', dilation_rate=(1), name = 'Con55734', )(Sub51073)
Cro24849 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro24849', )(Con55734)
model = tf.keras.models.Model(inputs=[in0Ave1077,in1Ave1077,in0Ave38217,in1Ave38217], outputs=Cro24849)
w = model.get_layer('Con55734').get_weights() 
w[0] = np.array([[[0.6586, 0.9365, 0.8404], [0.0194, 0.8485, 0.3421]], [[0.5736, 0.9504, 0.7873], [0.5075, 0.9522, 0.2537]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con55734').set_weights(w) 
in0Ave1077 = tf.constant([[[[0.9801, 0.8106]], [[0.5611, 0.4881]]]])
in1Ave1077 = tf.constant([[[[0.4951, 0.8217]], [[0.9329, 0.2859]]]])
in0Ave38217 = tf.constant([[[0.7345, 0.9835], [0.2863, 0.2356]]])
in1Ave38217 = tf.constant([[[0.6307, 0.8776], [0.6054, 0.0201]]])
print (np.array2string(model.predict([in0Ave1077,in1Ave1077,in0Ave38217,in1Ave38217],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro24849.png')

LAve1077 = average_layer([[[[[0.9801, 0.8106]], [[0.5611, 0.4881]]]], [[[[0.4951, 0.8217]], [[0.9329, 0.2859]]]]], Ave1077), 
LRes20662 = reshape_layer(Ave1077, [2, 2], Res20662), 
LAve38217 = average_layer([[[[0.7345, 0.9835], [0.2863, 0.2356]]], [[[0.6307, 0.8776], [0.6054, 0.0201]]]], Ave38217), 
LELU37509 = elu_layer(Ave38217, -1.5888211266933023, ELU37509), 
LSub51073 = subtract_layer(Res20662,ELU37509, Sub51073), 
LCon55734 = conv1D_layer(Sub51073, 2,[[[0.6586, 0.9365, 0.8404], [0.0194, 0.8485, 0.3421]], [[0.5736, 0.9504, 0.7873], [0.5075, 0.9522, 0.2537]]],[0, 0, 0], 1, false, 1, Con55734), 
LCro24849 = cropping1D_layer(Con55734, 0, 0, Cro24849), 
exec_layers([LAve1077,LRes20662,LAve38217,LELU37509,LSub51073,LCon55734,LCro24849],["Ave1077","Res20662","Ave38217","ELU37509","Sub51073","Con55734","Cro24849"],Cro24849,"Cro24849")

Actual (Unparsed): [[[0.3382619, 0.4874147, 0.3099275]]]

Expected (Unparsed): [[[0.33826190499999986,0.4874146899999998,0.3099275099999999]]]

Actual:   [[[0.3383, 0.4875, 0.31]]]

Expected: [[[0.3383, 0.4875, 0.31]]]