import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep55494 = tf.keras.layers.Input(shape=([1, 2]))
in0Dot99585 = tf.keras.layers.Input(shape=([2]))
in1Dot99585 = tf.keras.layers.Input(shape=([2]))
in0Con70359 = tf.keras.layers.Input(shape=([2]))

Sep55494 = keras.layers.SeparableConv1D(3, (1),strides=(1), padding='valid', name = 'Sep55494', )(in0Sep55494)
Fla52096 = keras.layers.Flatten(name = 'Fla52096', )(Sep55494)
Dot99585 = keras.layers.Dot(axes=(1, 1), name = 'Dot99585', )([in0Dot99585,in1Dot99585])
Con70359 = keras.layers.Concatenate(axis=1, name = 'Con70359', )([Dot99585,in0Con70359])
Min45734 = keras.layers.Minimum(name = 'Min45734', )([Fla52096,Con70359])
Res67144 = keras.layers.Reshape((3, 1), name = 'Res67144', )(Min45734)
Res60253 = keras.layers.Reshape((3, 1, 1), name = 'Res60253', )(Res67144)
Con25346 = keras.layers.Conv2D(2, (2, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con25346', )(Res60253)
Res29861 = keras.layers.Reshape((2, 1, 2, 1), name = 'Res29861', )(Con25346)
Up_50026 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_50026', )(Res29861)
model = tf.keras.models.Model(inputs=[in0Sep55494,in0Dot99585,in1Dot99585,in0Con70359], outputs=Up_50026)
w = model.get_layer('Sep55494').get_weights() 
w[0] = np.array([[[0.941], [0.2305]]])
w[1] = np.array([[[0.4961, 0.4522, 0.5194], [0.9853, 0.489, 0.293]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep55494').set_weights(w) 
w = model.get_layer('Con25346').get_weights() 
w[0] = np.array([[[[0.5084, 0.7744]]], [[[0.4372, 0.3414]]]])
w[1] = np.array([0, 0])
model.get_layer('Con25346').set_weights(w) 
in0Sep55494 = tf.constant([[[0.6155, 0.4118]]])
in0Dot99585 = tf.constant([[0.5375, 0.7209]])
in1Dot99585 = tf.constant([[0.2838, 0.666]])
in0Con70359 = tf.constant([[0.8434, 0.2498]])
print (np.array2string(model.predict([in0Sep55494,in0Dot99585,in1Dot99585,in0Con70359],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_50026.png')

LSep55494 = separable_conv1D_layer([[[0.6155, 0.4118]]], 1,[[[[0.941], [0.2305]]],[[[0.4961, 0.4522, 0.5194], [0.9853, 0.489, 0.293]]]],[0, 0, 0], 1, false, Sep55494), 
LFla52096 = flatten_layer(Sep55494, Fla52096), 
LDot99585 = dot_layer([[0.5375, 0.7209]], [[0.2838, 0.666]], 1, 1, Dot99585), 
LCon70359 = concatenate_layer([Dot99585,[[0.8434, 0.2498]]], 1, Con70359), 
LMin45734 = minimum_layer([Fla52096,Con70359], Min45734), 
LRes67144 = reshape_layer(Min45734, [3, 1], Res67144), 
LRes60253 = reshape_layer(Res67144, [3, 1, 1], Res60253), 
LCon25346 = conv2D_layer(Res60253, 2, 1,[[[[0.5084, 0.7744]]], [[[0.4372, 0.3414]]]],[0, 0], 1, 1, false, 1, 1, Con25346), 
LRes29861 = reshape_layer(Con25346, [2, 1, 2, 1], Res29861), 
LUp_50026 = up_sampling3D_layer(Res29861, 2, 2, 1, Up_50026), 
exec_layers([LSep55494,LFla52096,LDot99585,LCon70359,LMin45734,LRes67144,LRes60253,LCon25346,LRes29861,LUp_50026],["Sep55494","Fla52096","Dot99585","Con70359","Min45734","Res67144","Res60253","Con25346","Res29861","Up_50026"],Up_50026,"Up_50026")

Actual (Unparsed): [[[[[0.3284275], [0.4001985]], [[0.3284275], [0.4001985]]], [[[0.3284275], [0.4001985]], [[0.3284275], [0.4001985]]], [[[0.2659642], [0.3240474]], [[0.2659642], [0.3240474]]], [[[0.2659642], [0.3240474]], [[0.2659642], [0.3240474]]]]]

Expected (Unparsed): [[[[[0.328427503852008],[0.40019847326096797]],[[0.328427503852008],[0.40019847326096797]]],[[[0.328427503852008],[0.40019847326096797]],[[0.328427503852008],[0.40019847326096797]]],[[[0.26596423461928],[0.32404744939648]],[[0.26596423461928],[0.32404744939648]]],[[[0.26596423461928],[0.32404744939648]],[[0.26596423461928],[0.32404744939648]]]]]

Actual:   [[[[[0.3285], [0.4002]], [[0.3285], [0.4002]]], [[[0.3285], [0.4002]], [[0.3285], [0.4002]]], [[[0.266], [0.3241]], [[0.266], [0.3241]]], [[[0.266], [0.3241]], [[0.266], [0.3241]]]]]

Expected: [[[[[0.3285], [0.4002]], [[0.3285], [0.4002]]], [[[0.3285], [0.4002]], [[0.3285], [0.4002]]], [[[0.266], [0.3241]], [[0.266], [0.3241]]], [[[0.266], [0.3241]], [[0.266], [0.3241]]]]]