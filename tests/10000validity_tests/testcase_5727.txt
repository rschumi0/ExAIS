import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot68379 = tf.keras.layers.Input(shape=([2]))
in1Dot68379 = tf.keras.layers.Input(shape=([2]))
in0Con97502 = tf.keras.layers.Input(shape=([1, 2]))
in0Ave94758 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Ave94758 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Sub63385 = tf.keras.layers.Input(shape=([2, 3]))
in1Sub63385 = tf.keras.layers.Input(shape=([2, 3]))

Dot68379 = keras.layers.Dot(axes=(1, 1), name = 'Dot68379', )([in0Dot68379,in1Dot68379])
Res86156 = keras.layers.Reshape((1, 1), name = 'Res86156', )(Dot68379)
Con97502 = keras.layers.Concatenate(axis=2, name = 'Con97502', )([Res86156,in0Con97502])
Ave94758 = keras.layers.Average(name = 'Ave94758', )([in0Ave94758,in1Ave94758])
Res37271 = keras.layers.Reshape((2, 1), name = 'Res37271', )(Ave94758)
Sub63385 = keras.layers.Subtract(name = 'Sub63385', )([in0Sub63385,in1Sub63385])
Dot22999 = keras.layers.Dot(axes=(1, 1), name = 'Dot22999', )([Res37271,Sub63385])
Sub84202 = keras.layers.Subtract(name = 'Sub84202', )([Con97502,Dot22999])
model = tf.keras.models.Model(inputs=[in0Dot68379,in1Dot68379,in0Con97502,in0Ave94758,in1Ave94758,in0Sub63385,in1Sub63385], outputs=Sub84202)
in0Dot68379 = tf.constant([[0.9607, 0.802]])
in1Dot68379 = tf.constant([[0.034, 0.9746]])
in0Con97502 = tf.constant([[[0.873, 0.3888]]])
in0Ave94758 = tf.constant([[[[0.7396]], [[0.0245]]]])
in1Ave94758 = tf.constant([[[[0.672]], [[0.0955]]]])
in0Sub63385 = tf.constant([[[0.6119, 0.7811, 0.5395], [0.6215, 0.4822, 0.8319]]])
in1Sub63385 = tf.constant([[[0.3235, 0.6051, 0.4027], [0.5296, 0.6748, 0.6269]]])
print (np.array2string(model.predict([in0Dot68379,in1Dot68379,in0Con97502,in0Ave94758,in1Ave94758,in0Sub63385,in1Sub63385],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub84202.png')

LDot68379 = dot_layer([[0.9607, 0.802]], [[0.034, 0.9746]], 1, 1, Dot68379), 
LRes86156 = reshape_layer(Dot68379, [1, 1], Res86156), 
LCon97502 = concatenate_layer([Res86156,[[[0.873, 0.3888]]]], 2, Con97502), 
LAve94758 = average_layer([[[[[0.7396]], [[0.0245]]]], [[[[0.672]], [[0.0955]]]]], Ave94758), 
LRes37271 = reshape_layer(Ave94758, [2, 1], Res37271), 
LSub63385 = subtract_layer([[[0.6119, 0.7811, 0.5395], [0.6215, 0.4822, 0.8319]]], [[[0.3235, 0.6051, 0.4027], [0.5296, 0.6748, 0.6269]]], Sub63385), 
LDot22999 = dot_layer(Res37271,Sub63385, 1, 1, Dot22999), 
LSub84202 = subtract_layer(Con97502,Dot22999, Sub84202), 
exec_layers([LDot68379,LRes86156,LCon97502,LAve94758,LRes37271,LSub63385,LDot22999,LSub84202],["Dot68379","Res86156","Con97502","Ave94758","Res37271","Sub63385","Dot22999","Sub84202"],Sub84202,"Sub84202")

Actual (Unparsed): [[[0.6052263, 0.7603352, 0.2799466]]]

Expected (Unparsed): [[[0.6052262800000001,0.7603352,0.27994656]]]

Actual:   [[[0.6053, 0.7604, 0.28]]]

Expected: [[[0.6053, 0.7604, 0.28]]]