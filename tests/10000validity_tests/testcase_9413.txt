import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot66697 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot66697 = tf.keras.layers.Input(shape=([3, 3]))
in0Up_45885 = tf.keras.layers.Input(shape=([4, 3]))

Dot66697 = keras.layers.Dot(axes=(1, 1), name = 'Dot66697', )([in0Dot66697,in1Dot66697])
Up_45885 = keras.layers.UpSampling1D(size=(1), name = 'Up_45885', )(in0Up_45885)
Mas45615 = keras.layers.Masking(mask_value=2, name = 'Mas45615', )(Up_45885)
Zer26069 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer26069', )(Mas45615)
Dot27432 = keras.layers.Dot(axes=(2, 2), name = 'Dot27432', )([Dot66697,Zer26069])
model = tf.keras.models.Model(inputs=[in0Dot66697,in1Dot66697,in0Up_45885], outputs=Dot27432)
in0Dot66697 = tf.constant([[[0.5915, 0.8804, 0.1652], [0.4406, 0.5622, 0.2733], [0.3098, 0.7794, 0.8499]]])
in1Dot66697 = tf.constant([[[0.7828, 0.0473, 0.0611], [0.0121, 0.0271, 0.6466], [0.6722, 0.2104, 0.9477]]])
in0Up_45885 = tf.constant([[[1.16, 1.343, 1.6537], [1.5654, 1.7099, 1.2911], [1.8258, 1.8918, 1.3313], [1.6093, 1.3017, 1.7018]]])
print (np.array2string(model.predict([in0Dot66697,in1Dot66697,in0Up_45885],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot27432.png')

LDot66697 = dot_layer([[[0.5915, 0.8804, 0.1652], [0.4406, 0.5622, 0.2733], [0.3098, 0.7794, 0.8499]]], [[[0.7828, 0.0473, 0.0611], [0.0121, 0.0271, 0.6466], [0.6722, 0.2104, 0.9477]]], 1, 1, Dot66697), 
LUp_45885 = up_sampling1D_layer([[[1.16, 1.343, 1.6537], [1.5654, 1.7099, 1.2911], [1.8258, 1.8918, 1.3313], [1.6093, 1.3017, 1.7018]]], 1, Up_45885), 
LMas45615 = masking_layer(Up_45885, 2, Mas45615), 
LZer26069 = zero_padding1D_layer(Mas45615, 1, 0, Zer26069), 
LDot27432 = dot_layer(Dot66697,Zer26069, 2, 2, Dot27432), 
exec_layers([LDot66697,LUp_45885,LMas45615,LZer26069,LDot27432],["Dot66697","Up_45885","Mas45615","Zer26069","Dot27432"],Dot27432,"Dot27432")

Actual (Unparsed): [[[0.0000000, 1.9424251, 2.0324171, 2.2524309, 2.2716468], [0.0000000, 3.6232878, 3.7797205, 4.1840247, 4.2178649], [0.0000000, 2.7180516, 2.7148238, 2.9733113, 3.0740405]]]

Expected (Unparsed): [[[0.0,1.9424250445490001,2.032417093972,2.2524308836410003,2.2716467510330003],[0.0,3.6232877319579995,3.7797203626119993,4.184024688218001,4.217864815828],[0.0,2.718051555751,2.7148237358259997,2.973311256245,3.07404039532]]]

Actual:   [[[0, 1.9425, 2.0325, 2.2525, 2.2717], [0, 3.6233, 3.7798, 4.1841, 4.2179], [0, 2.7181, 2.7149, 2.9734, 3.0741]]]

Expected: [[[0, 1.9425, 2.0325, 2.2525, 2.2717], [0, 3.6233, 3.7798, 4.1841, 4.2179], [0, 2.7181, 2.7149, 2.9734, 3.0741]]]