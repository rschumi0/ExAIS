import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max80800 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max80800 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con33625 = tf.keras.layers.Input(shape=([14]))
in0Mul8139 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Mul8139 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con35329 = tf.keras.layers.Input(shape=([14]))
in0Den60418 = tf.keras.layers.Input(shape=([4, 4]))
in0Glo15156 = tf.keras.layers.Input(shape=([2, 2]))
in0Con26881 = tf.keras.layers.Input(shape=([14]))
in0Min59043 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Min59043 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Max96144 = tf.keras.layers.Input(shape=([2, 1]))
in1Max96144 = tf.keras.layers.Input(shape=([2, 1]))
in0Con7431 = tf.keras.layers.Input(shape=([2, 1]))
in0Ave46587 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave46587 = tf.keras.layers.Input(shape=([1, 2]))

Max80800 = keras.layers.Maximum(name = 'Max80800', )([in0Max80800,in1Max80800])
Res6276 = keras.layers.Reshape((1, 2), name = 'Res6276', )(Max80800)
Fla31947 = keras.layers.Flatten(name = 'Fla31947', )(Res6276)
Con33625 = keras.layers.Concatenate(axis=1, name = 'Con33625', )([Fla31947,in0Con33625])
Mul8139 = keras.layers.Multiply(name = 'Mul8139', )([in0Mul8139,in1Mul8139])
Res37660 = keras.layers.Reshape((1, 2), name = 'Res37660', )(Mul8139)
Fla52042 = keras.layers.Flatten(name = 'Fla52042', )(Res37660)
Con35329 = keras.layers.Concatenate(axis=1, name = 'Con35329', )([Fla52042,in0Con35329])
Den60418 = keras.layers.Dense(4,name = 'Den60418', )(in0Den60418)
Fla41604 = keras.layers.Flatten(name = 'Fla41604', )(Den60418)
Glo15156 = keras.layers.GlobalMaxPool1D(name = 'Glo15156', )(in0Glo15156)
Con26881 = keras.layers.Concatenate(axis=1, name = 'Con26881', )([Glo15156,in0Con26881])
Sub14276 = keras.layers.Subtract(name = 'Sub14276', )([Fla41604,Con26881])
Add21663 = keras.layers.Add(name = 'Add21663', )([Con35329,Sub14276])
Min56798 = keras.layers.Minimum(name = 'Min56798', )([Con33625,Add21663])
Res45576 = keras.layers.Reshape((16, 1), name = 'Res45576', )(Min56798)
Min59043 = keras.layers.Minimum(name = 'Min59043', )([in0Min59043,in1Min59043])
Res84553 = keras.layers.Reshape((2, 1, 2), name = 'Res84553', )(Min59043)
Glo80132 = keras.layers.GlobalMaxPool2D(name = 'Glo80132', )(Res84553)
Res74425 = keras.layers.Reshape((2, 1), name = 'Res74425', )(Glo80132)
Res90491 = keras.layers.Reshape((2, 1, 1), name = 'Res90491', )(Res74425)
Max96144 = keras.layers.Maximum(name = 'Max96144', )([in0Max96144,in1Max96144])
Con7431 = keras.layers.Concatenate(axis=2, name = 'Con7431', )([Max96144,in0Con7431])
Ave46587 = keras.layers.Average(name = 'Ave46587', )([in0Ave46587,in1Ave46587])
Zer31209 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer31209', )(Ave46587)
Dot76705 = keras.layers.Dot(axes=(1, 1), name = 'Dot76705', )([Con7431,Zer31209])
Res78445 = keras.layers.Reshape((2, 2, 1), name = 'Res78445', )(Dot76705)
Dep14788 = keras.layers.DepthwiseConv2D((1, 1),strides=(2, 2), padding='valid', name = 'Dep14788', )(Res78445)
Zer96665 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer96665', )(Dep14788)
Add29846 = keras.layers.Add(name = 'Add29846', )([Res90491,Zer96665])
Res92685 = keras.layers.Reshape((2, 1), name = 'Res92685', )(Add29846)
Zer77735 = keras.layers.ZeroPadding1D(padding=((14, 0)), name = 'Zer77735', )(Res92685)
Dot75909 = keras.layers.Dot(axes=(1, 1), name = 'Dot75909', )([Res45576,Zer77735])
model = tf.keras.models.Model(inputs=[in0Max80800,in1Max80800,in0Con33625,in0Mul8139,in1Mul8139,in0Con35329,in0Den60418,in0Glo15156,in0Con26881,in0Min59043,in1Min59043,in0Max96144,in1Max96144,in0Con7431,in0Ave46587,in1Ave46587], outputs=Dot75909)
w = model.get_layer('Den60418').get_weights() 
w[0] = np.array([[0.193, 0.3749, 0.3866, 0.4846], [0.1956, 0.9321, 0.1316, 0.3503], [0.7141, 0.5726, 0.2598, 0.3687], [0.6246, 0.1361, 0.5778, 0.211]])
w[1] = np.array([0.7174, 0.8738, 0.3454, 0.7921])
model.get_layer('Den60418').set_weights(w) 
w = model.get_layer('Dep14788').get_weights() 
w[0] = np.array([[[[0.6016]]]])
w[1] = np.array([0])
model.get_layer('Dep14788').set_weights(w) 
in0Max80800 = tf.constant([[[[0.3103], [0.1806]]]])
in1Max80800 = tf.constant([[[[0.6394], [0.3151]]]])
in0Con33625 = tf.constant([[0.4343, 0.7804, 0.4961, 0.4003, 0.9732, 0.6288, 0.7477, 0.6668, 0.3934, 0.6585, 0.0177, 0.2279, 0.4429, 0.3067]])
in0Mul8139 = tf.constant([[[[0.5884, 0.6105]]]])
in1Mul8139 = tf.constant([[[[0.0801, 0.4927]]]])
in0Con35329 = tf.constant([[0.2483, 0.6955, 0.2497, 0.1138, 0.2684, 0.0746, 0.1427, 0.9735, 0.7986, 0.5243, 0.9115, 0.4432, 0.8453, 0.1561]])
in0Den60418 = tf.constant([[[0.9852, 0.3926, 0.2797, 0.6754], [0.8758, 0.9109, 0.8075, 0.2484], [0.8984, 0.353, 0.0843, 0.4892], [0.5088, 0.8529, 0.0253, 0.1322]]])
in0Glo15156 = tf.constant([[[1.1564, 1.7488], [1.0875, 1.0481]]])
in0Con26881 = tf.constant([[0.0667, 0.2276, 0.267, 0.5947, 0.0652, 0.7036, 0.6624, 0.4717, 0.2698, 0.5485, 0.0662, 0.3012, 0.8584, 0.7051]])
in0Min59043 = tf.constant([[[[[0.2529, 0.3874]]], [[[0.2684, 0.1461]]]]])
in1Min59043 = tf.constant([[[[[0.741, 0.9491]]], [[[0.1272, 0.165]]]]])
in0Max96144 = tf.constant([[[0.7343], [0.1036]]])
in1Max96144 = tf.constant([[[0.9591], [0.3693]]])
in0Con7431 = tf.constant([[[0.6756], [0.5459]]])
in0Ave46587 = tf.constant([[[0.3951, 0.91]]])
in1Ave46587 = tf.constant([[[0.8351, 0.2901]]])
print (np.array2string(model.predict([in0Max80800,in1Max80800,in0Con33625,in0Mul8139,in1Mul8139,in0Con35329,in0Den60418,in0Glo15156,in0Con26881,in0Min59043,in1Min59043,in0Max96144,in1Max96144,in0Con7431,in0Ave46587,in1Ave46587],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot75909.png')

LMax80800 = maximum_layer([[[[[0.3103], [0.1806]]]], [[[[0.6394], [0.3151]]]]], Max80800), 
LRes6276 = reshape_layer(Max80800, [1, 2], Res6276), 
LFla31947 = flatten_layer(Res6276, Fla31947), 
LCon33625 = concatenate_layer([Fla31947,[[0.4343, 0.7804, 0.4961, 0.4003, 0.9732, 0.6288, 0.7477, 0.6668, 0.3934, 0.6585, 0.0177, 0.2279, 0.4429, 0.3067]]], 1, Con33625), 
LMul8139 = multiply_layer([[[[[0.5884, 0.6105]]]], [[[[0.0801, 0.4927]]]]], Mul8139), 
LRes37660 = reshape_layer(Mul8139, [1, 2], Res37660), 
LFla52042 = flatten_layer(Res37660, Fla52042), 
LCon35329 = concatenate_layer([Fla52042,[[0.2483, 0.6955, 0.2497, 0.1138, 0.2684, 0.0746, 0.1427, 0.9735, 0.7986, 0.5243, 0.9115, 0.4432, 0.8453, 0.1561]]], 1, Con35329), 
LDen60418 = dense_layer([[[0.9852, 0.3926, 0.2797, 0.6754], [0.8758, 0.9109, 0.8075, 0.2484], [0.8984, 0.353, 0.0843, 0.4892], [0.5088, 0.8529, 0.0253, 0.1322]]], [[0.193, 0.3749, 0.3866, 0.4846], [0.1956, 0.9321, 0.1316, 0.3503], [0.7141, 0.5726, 0.2598, 0.3687], [0.6246, 0.1361, 0.5778, 0.211]],[0.7174, 0.8738, 0.3454, 0.7921], Den60418), 
LFla41604 = flatten_layer(Den60418, Fla41604), 
LGlo15156 = global_max_pool1D_layer([[[1.1564, 1.7488], [1.0875, 1.0481]]], Glo15156), 
LCon26881 = concatenate_layer([Glo15156,[[0.0667, 0.2276, 0.267, 0.5947, 0.0652, 0.7036, 0.6624, 0.4717, 0.2698, 0.5485, 0.0662, 0.3012, 0.8584, 0.7051]]], 1, Con26881), 
LSub14276 = subtract_layer(Fla41604,Con26881, Sub14276), 
LAdd21663 = add_layer([Con35329,Sub14276], Add21663), 
LMin56798 = minimum_layer([Con33625,Add21663], Min56798), 
LRes45576 = reshape_layer(Min56798, [16, 1], Res45576), 
LMin59043 = minimum_layer([[[[[[0.2529, 0.3874]]], [[[0.2684, 0.1461]]]]], [[[[[0.741, 0.9491]]], [[[0.1272, 0.165]]]]]], Min59043), 
LRes84553 = reshape_layer(Min59043, [2, 1, 2], Res84553), 
LGlo80132 = global_max_pool2D_layer(Res84553, Glo80132), 
LRes74425 = reshape_layer(Glo80132, [2, 1], Res74425), 
LRes90491 = reshape_layer(Res74425, [2, 1, 1], Res90491), 
LMax96144 = maximum_layer([[[[0.7343], [0.1036]]], [[[0.9591], [0.3693]]]], Max96144), 
LCon7431 = concatenate_layer([Max96144,[[[0.6756], [0.5459]]]], 2, Con7431), 
LAve46587 = average_layer([[[[0.3951, 0.91]]], [[[0.8351, 0.2901]]]], Ave46587), 
LZer31209 = zero_padding1D_layer(Ave46587, 1, 0, Zer31209), 
LDot76705 = dot_layer(Con7431,Zer31209, 1, 1, Dot76705), 
LRes78445 = reshape_layer(Dot76705, [2, 2, 1], Res78445), 
LDep14788 = depthwise_conv2D_layer(Res78445, 1, 1,[[[[0.6016]]]],[0], 2, 2, false, Dep14788), 
LZer96665 = zero_padding2D_layer(Dep14788, 1, 0, 0, 0, Zer96665), 
LAdd29846 = add_layer([Res90491,Zer96665], Add29846), 
LRes92685 = reshape_layer(Add29846, [2, 1], Res92685), 
LZer77735 = zero_padding1D_layer(Res92685, 14, 0, Zer77735), 
LDot75909 = dot_layer(Res45576,Zer77735, 1, 1, Dot75909), 
exec_layers([LMax80800,LRes6276,LFla31947,LCon33625,LMul8139,LRes37660,LFla52042,LCon35329,LDen60418,LFla41604,LGlo15156,LCon26881,LSub14276,LAdd21663,LMin56798,LRes45576,LMin59043,LRes84553,LGlo80132,LRes74425,LRes90491,LMax96144,LCon7431,LAve46587,LZer31209,LDot76705,LRes78445,LDep14788,LZer96665,LAdd29846,LRes92685,LZer77735,LDot75909],["Max80800","Res6276","Fla31947","Con33625","Mul8139","Res37660","Fla52042","Con35329","Den60418","Fla41604","Glo15156","Con26881","Sub14276","Add21663","Min56798","Res45576","Min59043","Res84553","Glo80132","Res74425","Res90491","Max96144","Con7431","Ave46587","Zer31209","Dot76705","Res78445","Dep14788","Zer96665","Add29846","Res92685","Zer77735","Dot75909"],Dot75909,"Dot75909")

Actual (Unparsed): [[[0.2727378]]]

Expected (Unparsed): [[[0.2727377864519296]]]

Actual:   [[[0.2728]]]

Expected: [[[0.2728]]]