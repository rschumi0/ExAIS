import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul14789 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Mul14789 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Glo881 = tf.keras.layers.Input(shape=([1, 2]))
in0Con9479 = tf.keras.layers.Input(shape=([2]))

Mul14789 = keras.layers.Multiply(name = 'Mul14789', )([in0Mul14789,in1Mul14789])
Res22189 = keras.layers.Reshape((1, 2, 2), name = 'Res22189', )(Mul14789)
Res17764 = keras.layers.Reshape((1, 4), name = 'Res17764', )(Res22189)
Fla25018 = keras.layers.Flatten(name = 'Fla25018', )(Res17764)
Glo881 = keras.layers.GlobalAveragePooling1D(name = 'Glo881', )(in0Glo881)
Con9479 = keras.layers.Concatenate(axis=1, name = 'Con9479', )([Glo881,in0Con9479])
Sub22516 = keras.layers.Subtract(name = 'Sub22516', )([Fla25018,Con9479])
model = tf.keras.models.Model(inputs=[in0Mul14789,in1Mul14789,in0Glo881,in0Con9479], outputs=Sub22516)
in0Mul14789 = tf.constant([[[[[0.3699, 0.3592]], [[0.4238, 0.076]]]]])
in1Mul14789 = tf.constant([[[[[0.9767, 0.5009]], [[0.9118, 0.0125]]]]])
in0Glo881 = tf.constant([[[1.6819, 1.2347]]])
in0Con9479 = tf.constant([[0.7415, 0.7101]])
print (np.array2string(model.predict([in0Mul14789,in1Mul14789,in0Glo881,in0Con9479],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub22516.png')

LMul14789 = multiply_layer([[[[[[0.3699, 0.3592]], [[0.4238, 0.076]]]]], [[[[[0.9767, 0.5009]], [[0.9118, 0.0125]]]]]], Mul14789), 
LRes22189 = reshape_layer(Mul14789, [1, 2, 2], Res22189), 
LRes17764 = reshape_layer(Res22189, [1, 4], Res17764), 
LFla25018 = flatten_layer(Res17764, Fla25018), 
LGlo881 = global_average_pooling1D_layer([[[1.6819, 1.2347]]], Glo881), 
LCon9479 = concatenate_layer([Glo881,[[0.7415, 0.7101]]], 1, Con9479), 
LSub22516 = subtract_layer(Fla25018,Con9479, Sub22516), 
exec_layers([LMul14789,LRes22189,LRes17764,LFla25018,LGlo881,LCon9479,LSub22516],["Mul14789","Res22189","Res17764","Fla25018","Glo881","Con9479","Sub22516"],Sub22516,"Sub22516")

Actual (Unparsed): [[-1.3206187, -1.0547767, -0.3550792, -0.7091500]]

Expected (Unparsed): [[-1.32061867,-1.05477672,-0.35507916,-0.70915]]

Actual:   [[-1.3206, -1.0547, -0.355, -0.7091]]

Expected: [[-1.3206, -1.0547, -0.355, -0.7091]]