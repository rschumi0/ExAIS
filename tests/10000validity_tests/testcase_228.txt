import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add1061 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Add1061 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Con47997 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Min10092 = tf.keras.layers.Input(shape=([2, 1]))
in1Min10092 = tf.keras.layers.Input(shape=([2, 1]))
in0Con84745 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Con13613 = tf.keras.layers.Input(shape=([5]))

Add1061 = keras.layers.Add(name = 'Add1061', )([in0Add1061,in1Add1061])
Res40838 = keras.layers.Reshape((1, 2, 2), name = 'Res40838', )(Add1061)
Con47997 = keras.layers.Concatenate(axis=3, name = 'Con47997', )([Res40838,in0Con47997])
Min10092 = keras.layers.Minimum(name = 'Min10092', )([in0Min10092,in1Min10092])
Res66884 = keras.layers.Reshape((2, 1, 1), name = 'Res66884', )(Min10092)
Dep55769 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep55769', )(Res66884)
Sep53270 = keras.layers.SeparableConv2D(4, (1, 1),strides=(2, 2), padding='valid', name = 'Sep53270', )(Dep55769)
Zer94149 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer94149', )(Sep53270)
Add98114 = keras.layers.Add(name = 'Add98114', )([Con47997,Zer94149])
Res34676 = keras.layers.Reshape((1, 8), name = 'Res34676', )(Add98114)
Fla20194 = keras.layers.Flatten(name = 'Fla20194', )(Res34676)
Con84745 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con84745', )(in0Con84745)
Res5631 = keras.layers.Reshape((1, 1, 3), name = 'Res5631', )(Con84745)
Res92646 = keras.layers.Reshape((1, 3), name = 'Res92646', )(Res5631)
Glo62795 = keras.layers.GlobalAveragePooling1D(name = 'Glo62795', )(Res92646)
Con13613 = keras.layers.Concatenate(axis=1, name = 'Con13613', )([Glo62795,in0Con13613])
Min87753 = keras.layers.Minimum(name = 'Min87753', )([Fla20194,Con13613])
model = tf.keras.models.Model(inputs=[in0Add1061,in1Add1061,in0Con47997,in0Min10092,in1Min10092,in0Con84745,in0Con13613], outputs=Min87753)
w = model.get_layer('Dep55769').get_weights() 
w[0] = np.array([[[[0.6884]]]])
w[1] = np.array([0])
model.get_layer('Dep55769').set_weights(w) 
w = model.get_layer('Sep53270').get_weights() 
w[0] = np.array([[[[0.0651]]]])
w[1] = np.array([[[[0.7051, 0.7442, 0.2725, 0.7836]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep53270').set_weights(w) 
w = model.get_layer('Con84745').get_weights() 
w[0] = np.array([[[[[0.6519, 0.5937], [0.0174, 0.7849], [0.6869, 0.6983]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con84745').set_weights(w) 
in0Add1061 = tf.constant([[[[[0.2749], [0.9947]], [[0.2896], [0.3734]]]]])
in1Add1061 = tf.constant([[[[[0.8477], [0.1894]], [[0.2528], [0.7802]]]]])
in0Con47997 = tf.constant([[[[0.1323, 0.4941], [0.8448, 0.8155]]]])
in0Min10092 = tf.constant([[[0.2082], [0.8811]]])
in1Min10092 = tf.constant([[[0.3172], [0.4084]]])
in0Con84745 = tf.constant([[[[[0.7196, 0.1416]]]]])
in0Con13613 = tf.constant([[0.714, 0.837, 0.643, 0.9304, 0.3667]])
print (np.array2string(model.predict([in0Add1061,in1Add1061,in0Con47997,in0Min10092,in1Min10092,in0Con84745,in0Con13613],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min87753.png')

LAdd1061 = add_layer([[[[[[0.2749], [0.9947]], [[0.2896], [0.3734]]]]], [[[[[0.8477], [0.1894]], [[0.2528], [0.7802]]]]]], Add1061), 
LRes40838 = reshape_layer(Add1061, [1, 2, 2], Res40838), 
LCon47997 = concatenate_layer([Res40838,[[[[0.1323, 0.4941], [0.8448, 0.8155]]]]], 3, Con47997), 
LMin10092 = minimum_layer([[[[0.2082], [0.8811]]], [[[0.3172], [0.4084]]]], Min10092), 
LRes66884 = reshape_layer(Min10092, [2, 1, 1], Res66884), 
LDep55769 = depthwise_conv2D_layer(Res66884, 1, 1,[[[[0.6884]]]],[0], 1, 1, false, Dep55769), 
LSep53270 = separable_conv2D_layer(Dep55769, 1, 1,[[[[[0.0651]]]],[[[[0.7051, 0.7442, 0.2725, 0.7836]]]]],[0, 0, 0, 0], 2, 2, false, Sep53270), 
LZer94149 = zero_padding2D_layer(Sep53270, 0, 0, 1, 0, Zer94149), 
LAdd98114 = add_layer([Con47997,Zer94149], Add98114), 
LRes34676 = reshape_layer(Add98114, [1, 8], Res34676), 
LFla20194 = flatten_layer(Res34676, Fla20194), 
LCon84745 = conv3D_transpose_layer([[[[[0.7196, 0.1416]]]]], 1, 1, 1,[[[[[0.6519, 0.5937], [0.0174, 0.7849], [0.6869, 0.6983]]]]],[0, 0, 0], 1, 1, 1, false, Con84745), 
LRes5631 = reshape_layer(Con84745, [1, 1, 3], Res5631), 
LRes92646 = reshape_layer(Res5631, [1, 3], Res92646), 
LGlo62795 = global_average_pooling1D_layer(Res92646, Glo62795), 
LCon13613 = concatenate_layer([Glo62795,[[0.714, 0.837, 0.643, 0.9304, 0.3667]]], 1, Con13613), 
LMin87753 = minimum_layer([Fla20194,Con13613], Min87753), 
exec_layers([LAdd1061,LRes40838,LCon47997,LMin10092,LRes66884,LDep55769,LSep53270,LZer94149,LAdd98114,LRes34676,LFla20194,LCon84745,LRes5631,LRes92646,LGlo62795,LCon13613,LMin87753],["Add1061","Res40838","Con47997","Min10092","Res66884","Dep55769","Sep53270","Zer94149","Add98114","Res34676","Fla20194","Con84745","Res5631","Res92646","Glo62795","Con13613","Min87753"],Min87753,"Min87753")

Actual (Unparsed): [[0.5531752, 0.1236629, 0.1323000, 0.4941000, 0.5489789, 0.6430000, 0.8473425, 0.3667000]]

Expected (Unparsed): [[0.55317516,0.12366288,0.1323,0.4941,0.5489789000750088,0.643,0.84734254753998,0.3667]]

Actual:   [[0.5532, 0.1237, 0.1323, 0.4941, 0.549, 0.643, 0.8474, 0.3667]]

Expected: [[0.5532, 0.1237, 0.1323, 0.4941, 0.549, 0.643, 0.8474, 0.3667]]