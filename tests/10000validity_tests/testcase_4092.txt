import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul64474 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in1Mul64474 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Mul64474 = keras.layers.Multiply(name = 'Mul64474', )([in0Mul64474,in1Mul64474])
Res57200 = keras.layers.Reshape((1, 2, 4), name = 'Res57200', )(Mul64474)
Ave66472 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave66472', )(Res57200)
Res93369 = keras.layers.Reshape((1, 4), name = 'Res93369', )(Ave66472)
Sep42786 = keras.layers.SeparableConv1D(3, (1),strides=(1), padding='valid', name = 'Sep42786', )(Res93369)
model = tf.keras.models.Model(inputs=[in0Mul64474,in1Mul64474], outputs=Sep42786)
w = model.get_layer('Sep42786').get_weights() 
w[0] = np.array([[[0.5663], [0.753], [0.4667], [0.429]]])
w[1] = np.array([[[0.7939, 0.0267, 0.3945], [0.617, 0.1267, 0.9044], [0.2747, 0.6136, 0.0246], [0.7998, 0.869, 0.208]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep42786').set_weights(w) 
in0Mul64474 = tf.constant([[[[[0.5894, 0.1632], [0.1328, 0.3699]], [[0.2413, 0.0238], [0.0638, 0.7867]]]]])
in1Mul64474 = tf.constant([[[[[0.1007, 0.4102], [0.5416, 0.6687]], [[0.7001, 0.875], [0.9146, 0.5008]]]]])
print (np.array2string(model.predict([in0Mul64474,in1Mul64474],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep42786.png')

LMul64474 = multiply_layer([[[[[[0.5894, 0.1632], [0.1328, 0.3699]], [[0.2413, 0.0238], [0.0638, 0.7867]]]]], [[[[[0.1007, 0.4102], [0.5416, 0.6687]], [[0.7001, 0.875], [0.9146, 0.5008]]]]]], Mul64474), 
LRes57200 = reshape_layer(Mul64474, [1, 2, 4], Res57200), 
LAve66472 = average_pooling2D_layer(Res57200, 1, 2, Ave66472), 
LRes93369 = reshape_layer(Ave66472, [1, 4], Res93369), 
LSep42786 = separable_conv1D_layer(Res93369, 1,[[[[0.5663], [0.753], [0.4667], [0.429]]],[[[0.7939, 0.0267, 0.3945], [0.617, 0.1267, 0.9044], [0.2747, 0.6136, 0.0246], [0.7998, 0.869, 0.208]]]],[0, 0, 0], 1, false, Sep42786), 
exec_layers([LMul64474,LRes57200,LAve66472,LRes93369,LSep42786],["Mul64474","Res57200","Ave66472","Res93369","Sep42786"],Sep42786,"Sep42786")

Actual (Unparsed): [[[0.1900820, 0.1441106, 0.0847479]]]

Expected (Unparsed): [[[0.19008195836885655,0.14411059327524917,0.08474786105495685]]]

Actual:   [[[0.1901, 0.1442, 0.0848]]]

Expected: [[[0.1901, 0.1442, 0.0848]]]