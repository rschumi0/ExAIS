import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla26136 = tf.keras.layers.Input(shape=([1, 4, 4]))

Fla26136 = keras.layers.Flatten(name = 'Fla26136', )(in0Fla26136)
Res3504 = keras.layers.Reshape((16, 1), name = 'Res3504', )(Fla26136)
Res62592 = keras.layers.Reshape((16, 1, 1), name = 'Res62592', )(Res3504)
Zer48925 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer48925', )(Res62592)
ELU13590 = keras.layers.ELU(alpha=6.096660381100023, name = 'ELU13590', )(Zer48925)
Res24491 = keras.layers.Reshape((18, 3), name = 'Res24491', )(ELU13590)
Sep47522 = keras.layers.SeparableConv1D(4, (12),strides=(17), padding='valid', name = 'Sep47522', )(Res24491)
model = tf.keras.models.Model(inputs=[in0Fla26136], outputs=Sep47522)
w = model.get_layer('Sep47522').get_weights() 
w[0] = np.array([[[0.7324], [0.5967], [0.1135]], [[0.2666], [0.6482], [0.9698]], [[0.8632], [0.1508], [0.5048]], [[0.6453], [0.2564], [0.2143]], [[0.2591], [0.383], [0.1413]], [[0.879], [0.4428], [0.2957]], [[0.3554], [0.8309], [0.4142]], [[0.7959], [0.8813], [0.3214]], [[0.9086], [0.3006], [0.4018]], [[0.1593], [0.7073], [0.8099]], [[0.5954], [0.9523], [0.414]], [[0.3076], [0.0636], [0.0045]]])
w[1] = np.array([[[0.85, 0.8565, 0.68, 0.3299], [0.9398, 0.7955, 0.9613, 0.0064], [0.7329, 0.3571, 0.0809, 0.2968]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep47522').set_weights(w) 
in0Fla26136 = tf.constant([[[[1.5359, 1.4426, 1.6461, 1.974], [1.0499, 1.4313, 1.0781, 1.8625], [1.6345, 1.5621, 1.9069, 1.0241], [1.3388, 1.1693, 1.0682, 1.9548]]]])
print (np.array2string(model.predict([in0Fla26136],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep47522.png')

LFla26136 = flatten_layer([[[[1.5359, 1.4426, 1.6461, 1.974], [1.0499, 1.4313, 1.0781, 1.8625], [1.6345, 1.5621, 1.9069, 1.0241], [1.3388, 1.1693, 1.0682, 1.9548]]]], Fla26136), 
LRes3504 = reshape_layer(Fla26136, [16, 1], Res3504), 
LRes62592 = reshape_layer(Res3504, [16, 1, 1], Res62592), 
LZer48925 = zero_padding2D_layer(Res62592, 1, 1, 1, 1, Zer48925), 
LELU13590 = elu_layer(Zer48925, 6.096660381100023, ELU13590), 
LRes24491 = reshape_layer(ELU13590, [18, 3], Res24491), 
LSep47522 = separable_conv1D_layer(Res24491, 12,[[[[0.7324], [0.5967], [0.1135]], [[0.2666], [0.6482], [0.9698]], [[0.8632], [0.1508], [0.5048]], [[0.6453], [0.2564], [0.2143]], [[0.2591], [0.383], [0.1413]], [[0.879], [0.4428], [0.2957]], [[0.3554], [0.8309], [0.4142]], [[0.7959], [0.8813], [0.3214]], [[0.9086], [0.3006], [0.4018]], [[0.1593], [0.7073], [0.8099]], [[0.5954], [0.9523], [0.414]], [[0.3076], [0.0636], [0.0045]]],[[[0.85, 0.8565, 0.68, 0.3299], [0.9398, 0.7955, 0.9613, 0.0064], [0.7329, 0.3571, 0.0809, 0.2968]]]],[0, 0, 0, 0], 17, false, Sep47522), 
exec_layers([LFla26136,LRes3504,LRes62592,LZer48925,LELU13590,LRes24491,LSep47522],["Fla26136","Res3504","Res62592","Zer48925","ELU13590","Res24491","Sep47522"],Sep47522,"Sep47522")

Actual (Unparsed): [[[7.8194415, 6.6188186, 7.9983285, 0.0532501]]]

Expected (Unparsed): [[[7.819441378612001,6.61881848977,7.998328364822,0.05325007961600001]]]

Actual:   [[[7.8195, 6.6189, 7.9984, 0.0533]]]

Expected: [[[7.8195, 6.6189, 7.9984, 0.0533]]]