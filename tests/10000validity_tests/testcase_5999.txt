import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add75912 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Add75912 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Min82896 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Min82896 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))

Add75912 = keras.layers.Add(name = 'Add75912', )([in0Add75912,in1Add75912])
Res39385 = keras.layers.Reshape((1, 1, 4), name = 'Res39385', )(Add75912)
Res67740 = keras.layers.Reshape((1, 4), name = 'Res67740', )(Res39385)
Fla85641 = keras.layers.Flatten(name = 'Fla85641', )(Res67740)
Min82896 = keras.layers.Minimum(name = 'Min82896', )([in0Min82896,in1Min82896])
Res14603 = keras.layers.Reshape((1, 2, 2), name = 'Res14603', )(Min82896)
Res89293 = keras.layers.Reshape((1, 4), name = 'Res89293', )(Res14603)
Glo94158 = keras.layers.GlobalMaxPool1D(name = 'Glo94158', )(Res89293)
Mul21109 = keras.layers.Multiply(name = 'Mul21109', )([Fla85641,Glo94158])
model = tf.keras.models.Model(inputs=[in0Add75912,in1Add75912,in0Min82896,in1Min82896], outputs=Mul21109)
in0Add75912 = tf.constant([[[[[0.6692, 0.1605], [0.5999, 0.0281]]]]])
in1Add75912 = tf.constant([[[[[0.8404, 0.2546], [0.1596, 0.5964]]]]])
in0Min82896 = tf.constant([[[[[0.3099, 0.2867]], [[0.0196, 0.3006]]]]])
in1Min82896 = tf.constant([[[[[0.2118, 0.0795]], [[0.3747, 0.9973]]]]])
print (np.array2string(model.predict([in0Add75912,in1Add75912,in0Min82896,in1Min82896],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul21109.png')

LAdd75912 = add_layer([[[[[[0.6692, 0.1605], [0.5999, 0.0281]]]]], [[[[[0.8404, 0.2546], [0.1596, 0.5964]]]]]], Add75912), 
LRes39385 = reshape_layer(Add75912, [1, 1, 4], Res39385), 
LRes67740 = reshape_layer(Res39385, [1, 4], Res67740), 
LFla85641 = flatten_layer(Res67740, Fla85641), 
LMin82896 = minimum_layer([[[[[[0.3099, 0.2867]], [[0.0196, 0.3006]]]]], [[[[[0.2118, 0.0795]], [[0.3747, 0.9973]]]]]], Min82896), 
LRes14603 = reshape_layer(Min82896, [1, 2, 2], Res14603), 
LRes89293 = reshape_layer(Res14603, [1, 4], Res89293), 
LGlo94158 = global_max_pool1D_layer(Res89293, Glo94158), 
LMul21109 = multiply_layer([Fla85641,Glo94158], Mul21109), 
exec_layers([LAdd75912,LRes39385,LRes67740,LFla85641,LMin82896,LRes14603,LRes89293,LGlo94158,LMul21109],["Add75912","Res39385","Res67740","Fla85641","Min82896","Res14603","Res89293","Glo94158","Mul21109"],Mul21109,"Mul21109")

Actual (Unparsed): [[0.3197333, 0.0330004, 0.0148862, 0.1877247]]

Expected (Unparsed): [[0.31973328,0.03300045,0.014886199999999999,0.1877247]]

Actual:   [[0.3198, 0.0331, 0.0149, 0.1878]]

Expected: [[0.3198, 0.0331, 0.0149, 0.1878]]