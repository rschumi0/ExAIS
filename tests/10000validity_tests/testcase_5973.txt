import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add86535 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add86535 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Loc56395 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Dot5857 = tf.keras.layers.Input(shape=([3]))
in1Dot5857 = tf.keras.layers.Input(shape=([3]))
in0Con3097 = tf.keras.layers.Input(shape=([3]))
in0Con7840 = tf.keras.layers.Input(shape=([1, 1]))
in0Max46095 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Max46095 = tf.keras.layers.Input(shape=([1, 2, 1]))

Add86535 = keras.layers.Add(name = 'Add86535', )([in0Add86535,in1Add86535])
Res74667 = keras.layers.Reshape((1, 2), name = 'Res74667', )(Add86535)
Loc56395 = keras.layers.LocallyConnected2D(4, (1, 1),strides=(1, 1), name = 'Loc56395', )(in0Loc56395)
Res67547 = keras.layers.Reshape((1, 4), name = 'Res67547', )(Loc56395)
Fla65970 = keras.layers.Flatten(name = 'Fla65970', )(Res67547)
Dot5857 = keras.layers.Dot(axes=(1, 1), name = 'Dot5857', )([in0Dot5857,in1Dot5857])
Con3097 = keras.layers.Concatenate(axis=1, name = 'Con3097', )([Dot5857,in0Con3097])
Sub60893 = keras.layers.Subtract(name = 'Sub60893', )([Fla65970,Con3097])
Res60775 = keras.layers.Reshape((4, 1), name = 'Res60775', )(Sub60893)
Cro26061 = keras.layers.Cropping1D(cropping=((3, 0)), name = 'Cro26061', )(Res60775)
Con7840 = keras.layers.Concatenate(axis=2, name = 'Con7840', )([Cro26061,in0Con7840])
Max41847 = keras.layers.Maximum(name = 'Max41847', )([Res74667,Con7840])
Res47701 = keras.layers.Reshape((1, 2, 1), name = 'Res47701', )(Max41847)
Max46095 = keras.layers.Maximum(name = 'Max46095', )([in0Max46095,in1Max46095])
Min65623 = keras.layers.Minimum(name = 'Min65623', )([Res47701,Max46095])
model = tf.keras.models.Model(inputs=[in0Add86535,in1Add86535,in0Loc56395,in0Dot5857,in1Dot5857,in0Con3097,in0Con7840,in0Max46095,in1Max46095], outputs=Min65623)
w = model.get_layer('Loc56395').get_weights() 
w[0] = np.array([[[0.8993, 0.4914, 0.3027, 0.9999], [0.2732, 0.1952, 0.7262, 0.96]]])
w[1] = np.array([[[0, 0, 0, 0]]])
model.get_layer('Loc56395').set_weights(w) 
in0Add86535 = tf.constant([[[[0.1157], [0.5886]]]])
in1Add86535 = tf.constant([[[[0.699], [0.5092]]]])
in0Loc56395 = tf.constant([[[[0.7031, 0.1376]]]])
in0Dot5857 = tf.constant([[0.0333, 0.3102, 0.6618]])
in1Dot5857 = tf.constant([[0.7306, 0.4825, 0.4705]])
in0Con3097 = tf.constant([[0.1251, 0.2336, 0.4602]])
in0Con7840 = tf.constant([[[0.6616]]])
in0Max46095 = tf.constant([[[[0.3259], [0.5193]]]])
in1Max46095 = tf.constant([[[[0.2628], [0.217]]]])
print (np.array2string(model.predict([in0Add86535,in1Add86535,in0Loc56395,in0Dot5857,in1Dot5857,in0Con3097,in0Con7840,in0Max46095,in1Max46095],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min65623.png')

LAdd86535 = add_layer([[[[[0.1157], [0.5886]]]], [[[[0.699], [0.5092]]]]], Add86535), 
LRes74667 = reshape_layer(Add86535, [1, 2], Res74667), 
LLoc56395 = locally_connected2D_layer([[[[0.7031, 0.1376]]]], 1, 1,[[[0.8993, 0.4914, 0.3027, 0.9999], [0.2732, 0.1952, 0.7262, 0.96]]],[[[0, 0, 0, 0]]], 1, 1, Loc56395), 
LRes67547 = reshape_layer(Loc56395, [1, 4], Res67547), 
LFla65970 = flatten_layer(Res67547, Fla65970), 
LDot5857 = dot_layer([[0.0333, 0.3102, 0.6618]], [[0.7306, 0.4825, 0.4705]], 1, 1, Dot5857), 
LCon3097 = concatenate_layer([Dot5857,[[0.1251, 0.2336, 0.4602]]], 1, Con3097), 
LSub60893 = subtract_layer(Fla65970,Con3097, Sub60893), 
LRes60775 = reshape_layer(Sub60893, [4, 1], Res60775), 
LCro26061 = cropping1D_layer(Res60775, 3, 0, Cro26061), 
LCon7840 = concatenate_layer([Cro26061,[[[0.6616]]]], 2, Con7840), 
LMax41847 = maximum_layer([Res74667,Con7840], Max41847), 
LRes47701 = reshape_layer(Max41847, [1, 2, 1], Res47701), 
LMax46095 = maximum_layer([[[[[0.3259], [0.5193]]]], [[[[0.2628], [0.217]]]]], Max46095), 
LMin65623 = minimum_layer([Res47701,Max46095], Min65623), 
exec_layers([LAdd86535,LRes74667,LLoc56395,LRes67547,LFla65970,LDot5857,LCon3097,LSub60893,LRes60775,LCro26061,LCon7840,LMax41847,LRes47701,LMax46095,LMin65623],["Add86535","Res74667","Loc56395","Res67547","Fla65970","Dot5857","Con3097","Sub60893","Res60775","Cro26061","Con7840","Max41847","Res47701","Max46095","Min65623"],Min65623,"Min65623")

Actual (Unparsed): [[[[0.3259000], [0.5193000]]]]

Expected (Unparsed): [[[[0.3259],[0.5193]]]]

Actual:   [[[[0.3259], [0.5193]]]]

Expected: [[[[0.3259], [0.5193]]]]