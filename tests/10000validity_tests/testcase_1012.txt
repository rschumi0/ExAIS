import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot32786 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot32786 = tf.keras.layers.Input(shape=([2, 3]))
in0Glo69488 = tf.keras.layers.Input(shape=([1, 2, 2]))

Dot32786 = keras.layers.Dot(axes=(1, 1), name = 'Dot32786', )([in0Dot32786,in1Dot32786])
Glo32628 = keras.layers.GlobalAveragePooling1D(name = 'Glo32628', )(Dot32786)
Res20759 = keras.layers.Reshape((3, 1), name = 'Res20759', )(Glo32628)
Res90929 = keras.layers.Reshape((3, 1, 1), name = 'Res90929', )(Res20759)
Zer98968 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer98968', )(Res90929)
Glo69488 = keras.layers.GlobalMaxPool2D(name = 'Glo69488', )(in0Glo69488)
Res21220 = keras.layers.Reshape((2, 1), name = 'Res21220', )(Glo69488)
Res83710 = keras.layers.Reshape((2, 1, 1), name = 'Res83710', )(Res21220)
Zer34486 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer34486', )(Res83710)
Mul17761 = keras.layers.Multiply(name = 'Mul17761', )([Zer98968,Zer34486])
model = tf.keras.models.Model(inputs=[in0Dot32786,in1Dot32786,in0Glo69488], outputs=Mul17761)
in0Dot32786 = tf.constant([[[0.8593, 0.548, 0.0027], [0.8676, 0.5134, 0.3252]]])
in1Dot32786 = tf.constant([[[0.7237, 0.3224, 0.5012], [0.7417, 0.6141, 0.0167]]])
in0Glo69488 = tf.constant([[[[1.9863, 1.0531], [1.71, 1.7787]]]])
print (np.array2string(model.predict([in0Dot32786,in1Dot32786,in0Glo69488],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul17761.png')

LDot32786 = dot_layer([[[0.8593, 0.548, 0.0027], [0.8676, 0.5134, 0.3252]]], [[[0.7237, 0.3224, 0.5012], [0.7417, 0.6141, 0.0167]]], 1, 1, Dot32786), 
LGlo32628 = global_average_pooling1D_layer(Dot32786, Glo32628), 
LRes20759 = reshape_layer(Glo32628, [3, 1], Res20759), 
LRes90929 = reshape_layer(Res20759, [3, 1, 1], Res90929), 
LZer98968 = zero_padding2D_layer(Res90929, 1, 0, 2, 0, Zer98968), 
LGlo69488 = global_max_pool2D_layer([[[[1.9863, 1.0531], [1.71, 1.7787]]]], Glo69488), 
LRes21220 = reshape_layer(Glo69488, [2, 1], Res21220), 
LRes83710 = reshape_layer(Res21220, [2, 1, 1], Res83710), 
LZer34486 = zero_padding2D_layer(Res83710, 1, 1, 1, 1, Zer34486), 
LMul17761 = multiply_layer([Zer98968,Zer34486], Mul17761), 
exec_layers([LDot32786,LGlo32628,LRes20759,LRes90929,LZer98968,LGlo69488,LRes21220,LRes83710,LZer34486,LMul17761],["Dot32786","Glo32628","Res20759","Res90929","Zer98968","Glo69488","Res21220","Res83710","Zer34486","Mul17761"],Mul17761,"Mul17761")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[0.0],[0.0]],[[0],[0.0],[0.0]],[[0],[0],[0.0]]]]

Actual:   [[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]

Expected: [[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]