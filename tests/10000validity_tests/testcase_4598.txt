import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add2101 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add2101 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con2845 = tf.keras.layers.Input(shape=([1]))
in0Add15893 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add15893 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Add2101 = keras.layers.Add(name = 'Add2101', )([in0Add2101,in1Add2101])
Res18661 = keras.layers.Reshape((1, 1), name = 'Res18661', )(Add2101)
Fla40216 = keras.layers.Flatten(name = 'Fla40216', )(Res18661)
Con2845 = keras.layers.Concatenate(axis=1, name = 'Con2845', )([Fla40216,in0Con2845])
Add15893 = keras.layers.Add(name = 'Add15893', )([in0Add15893,in1Add15893])
Res86536 = keras.layers.Reshape((1, 2, 1), name = 'Res86536', )(Add15893)
Res4119 = keras.layers.Reshape((1, 2), name = 'Res4119', )(Res86536)
Glo4069 = keras.layers.GlobalAveragePooling1D(name = 'Glo4069', )(Res4119)
Sub288 = keras.layers.Subtract(name = 'Sub288', )([Con2845,Glo4069])
model = tf.keras.models.Model(inputs=[in0Add2101,in1Add2101,in0Con2845,in0Add15893,in1Add15893], outputs=Sub288)
in0Add2101 = tf.constant([[[[0.8326]]]])
in1Add2101 = tf.constant([[[[0.7348]]]])
in0Con2845 = tf.constant([[0.0013]])
in0Add15893 = tf.constant([[[[[0.7706]], [[0.419]]]]])
in1Add15893 = tf.constant([[[[[0.9119]], [[0.831]]]]])
print (np.array2string(model.predict([in0Add2101,in1Add2101,in0Con2845,in0Add15893,in1Add15893],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub288.png')

LAdd2101 = add_layer([[[[[0.8326]]]], [[[[0.7348]]]]], Add2101), 
LRes18661 = reshape_layer(Add2101, [1, 1], Res18661), 
LFla40216 = flatten_layer(Res18661, Fla40216), 
LCon2845 = concatenate_layer([Fla40216,[[0.0013]]], 1, Con2845), 
LAdd15893 = add_layer([[[[[[0.7706]], [[0.419]]]]], [[[[[0.9119]], [[0.831]]]]]], Add15893), 
LRes86536 = reshape_layer(Add15893, [1, 2, 1], Res86536), 
LRes4119 = reshape_layer(Res86536, [1, 2], Res4119), 
LGlo4069 = global_average_pooling1D_layer(Res4119, Glo4069), 
LSub288 = subtract_layer(Con2845,Glo4069, Sub288), 
exec_layers([LAdd2101,LRes18661,LFla40216,LCon2845,LAdd15893,LRes86536,LRes4119,LGlo4069,LSub288],["Add2101","Res18661","Fla40216","Con2845","Add15893","Res86536","Res4119","Glo4069","Sub288"],Sub288,"Sub288")

Actual (Unparsed): [[-0.1151000, -1.2487000]]

Expected (Unparsed): [[-0.11509999999999998,-1.2487]]

Actual:   [[-0.1151, -1.2487]]

Expected: [[-0.115, -1.2487]]