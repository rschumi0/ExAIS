import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave23706 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Ave23706 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con41752 = tf.keras.layers.Input(shape=([4, 8]))
in0Zer95222 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Up_15084 = tf.keras.layers.Input(shape=([2, 4, 3]))
in0Con49766 = tf.keras.layers.Input(shape=([4, 6]))
in0Sub31799 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in1Sub31799 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in0Con7720 = tf.keras.layers.Input(shape=([4, 8]))

Ave23706 = keras.layers.Average(name = 'Ave23706', )([in0Ave23706,in1Ave23706])
Res12280 = keras.layers.Reshape((1, 1, 2), name = 'Res12280', )(Ave23706)
Res54795 = keras.layers.Reshape((1, 2), name = 'Res54795', )(Res12280)
Zer73710 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer73710', )(Res54795)
Con41752 = keras.layers.Concatenate(axis=2, name = 'Con41752', )([Zer73710,in0Con41752])
Zer95222 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer95222', )(in0Zer95222)
Res15168 = keras.layers.Reshape((4, 10), name = 'Res15168', )(Zer95222)
Up_15084 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_15084', )(in0Up_15084)
Lea4923 = keras.layers.LeakyReLU(alpha=7.772113362382437, name = 'Lea4923', )(Up_15084)
Res40105 = keras.layers.Reshape((4, 12), name = 'Res40105', )(Lea4923)
Con49766 = keras.layers.Concatenate(axis=2, name = 'Con49766', )([Res40105,in0Con49766])
Sub31799 = keras.layers.Subtract(name = 'Sub31799', )([in0Sub31799,in1Sub31799])
Res4263 = keras.layers.Reshape((2, 3, 6), name = 'Res4263', )(Sub31799)
Res25901 = keras.layers.Reshape((2, 18), name = 'Res25901', )(Res4263)
Dot43658 = keras.layers.Dot(axes=(2, 2), name = 'Dot43658', )([Con49766,Res25901])
Con7720 = keras.layers.Concatenate(axis=2, name = 'Con7720', )([Dot43658,in0Con7720])
Add3158 = keras.layers.Add(name = 'Add3158', )([Res15168,Con7720])
Sub89374 = keras.layers.Subtract(name = 'Sub89374', )([Con41752,Add3158])
model = tf.keras.models.Model(inputs=[in0Ave23706,in1Ave23706,in0Con41752,in0Zer95222,in0Up_15084,in0Con49766,in0Sub31799,in1Sub31799,in0Con7720], outputs=Sub89374)
in0Ave23706 = tf.constant([[[[[0.6301], [0.6273]]]]])
in1Ave23706 = tf.constant([[[[[0.8873], [0.0133]]]]])
in0Con41752 = tf.constant([[[0.6167, 0.8542, 0.0142, 0.461, 0.5856, 0.3177, 0.1322, 0.9993], [0.3689, 0.9304, 0.8248, 0.05, 0.0238, 0.0479, 0.6193, 0.0295], [0.6405, 0.7168, 0.2817, 0.9199, 0.736, 0.2091, 0.1335, 0.5012], [0.3447, 0.7464, 0.1174, 0.4899, 0.0249, 0.7872, 0.0458, 0.6117]]])
in0Zer95222 = tf.constant([[[[1.2148, 1.6874], [1.9693, 1.3827], [1.418, 1.6197]], [[1.7923, 1.8384], [1.0428, 1.4535], [1.7745, 1.0429]]]])
in0Up_15084 = tf.constant([[[[1.4158, 1.5056, 1.7879], [1.8417, 1.7469, 1.7868], [1.2961, 1.0619, 1.635], [1.5624, 1.6341, 1.6503]], [[1.6128, 1.4236, 1.4389], [1.7027, 1.5472, 1.6255], [1.6785, 1.4766, 1.9186], [1.3785, 1.9433, 1.0525]]]])
in0Con49766 = tf.constant([[[0.8898, 0.53, 0.5843, 0.6757, 0.0858, 0.7639], [0.8472, 0.6765, 0.2042, 0.3194, 0.5599, 0.1822], [0.5332, 0.2297, 0.0276, 0.7745, 0.0578, 0.9483], [0.9101, 0.1127, 0.1067, 0.3748, 0.4361, 0.2557]]])
in0Sub31799 = tf.constant([[[[[0.4835, 0.2409, 0.6688], [0.9074, 0.5949, 0.7555]], [[0.7396, 0.3029, 0.5015], [0.9945, 0.4851, 0.0514]], [[0.2751, 0.7368, 0.4281], [0.9213, 0.6282, 0.5835]]], [[[0.2667, 0.6723, 0.7721], [0.4413, 0.4826, 0.4652]], [[0.6416, 0.4474, 0.6546], [0.1866, 0.2659, 0.5946]], [[0.0255, 0.0455, 0.798], [0.0244, 0.1237, 0.6549]]]]])
in1Sub31799 = tf.constant([[[[[0.737, 0.2006, 0.2716], [0.6914, 0.1679, 0.9496]], [[0.6256, 0.1463, 0.4315], [0.6585, 0.9893, 0.1209]], [[0.489, 0.7621, 0.0163], [0.104, 0.3928, 0.0134]]], [[[0.5753, 0.6713, 0.6972], [0.9361, 0.9908, 0.5915]], [[0.344, 0.285, 0.5914], [0.3931, 0.5459, 0.3039]], [[0.4969, 0.5477, 0.4582], [0.0636, 0.8617, 0.5617]]]]])
in0Con7720 = tf.constant([[[0.6936, 0.4739, 0.6942, 0.3437, 0.8646, 0.8017, 0.605, 0.5754], [0.3324, 0.5377, 0.1061, 0.4185, 0.5138, 0.6874, 0.4731, 0.3282], [0.9979, 0.1913, 0.287, 0.4979, 0.4504, 0.2341, 0.3277, 0.3479], [0.6978, 0.2447, 0.5263, 0.3329, 0.0658, 0.713, 0.6891, 0.3501]]])
print (np.array2string(model.predict([in0Ave23706,in1Ave23706,in0Con41752,in0Zer95222,in0Up_15084,in0Con49766,in0Sub31799,in1Sub31799,in0Con7720],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub89374.png')

LAve23706 = average_layer([[[[[[0.6301], [0.6273]]]]], [[[[[0.8873], [0.0133]]]]]], Ave23706), 
LRes12280 = reshape_layer(Ave23706, [1, 1, 2], Res12280), 
LRes54795 = reshape_layer(Res12280, [1, 2], Res54795), 
LZer73710 = zero_padding1D_layer(Res54795, 3, 0, Zer73710), 
LCon41752 = concatenate_layer([Zer73710,[[[0.6167, 0.8542, 0.0142, 0.461, 0.5856, 0.3177, 0.1322, 0.9993], [0.3689, 0.9304, 0.8248, 0.05, 0.0238, 0.0479, 0.6193, 0.0295], [0.6405, 0.7168, 0.2817, 0.9199, 0.736, 0.2091, 0.1335, 0.5012], [0.3447, 0.7464, 0.1174, 0.4899, 0.0249, 0.7872, 0.0458, 0.6117]]]], 2, Con41752), 
LZer95222 = zero_padding2D_layer([[[[1.2148, 1.6874], [1.9693, 1.3827], [1.418, 1.6197]], [[1.7923, 1.8384], [1.0428, 1.4535], [1.7745, 1.0429]]]], 1, 1, 1, 1, Zer95222), 
LRes15168 = reshape_layer(Zer95222, [4, 10], Res15168), 
LUp_15084 = up_sampling2D_layer([[[[1.4158, 1.5056, 1.7879], [1.8417, 1.7469, 1.7868], [1.2961, 1.0619, 1.635], [1.5624, 1.6341, 1.6503]], [[1.6128, 1.4236, 1.4389], [1.7027, 1.5472, 1.6255], [1.6785, 1.4766, 1.9186], [1.3785, 1.9433, 1.0525]]]], 2, 1, Up_15084), 
LLea4923 = leaky_relu_layer(Up_15084, 7.772113362382437, Lea4923), 
LRes40105 = reshape_layer(Lea4923, [4, 12], Res40105), 
LCon49766 = concatenate_layer([Res40105,[[[0.8898, 0.53, 0.5843, 0.6757, 0.0858, 0.7639], [0.8472, 0.6765, 0.2042, 0.3194, 0.5599, 0.1822], [0.5332, 0.2297, 0.0276, 0.7745, 0.0578, 0.9483], [0.9101, 0.1127, 0.1067, 0.3748, 0.4361, 0.2557]]]], 2, Con49766), 
LSub31799 = subtract_layer([[[[[0.4835, 0.2409, 0.6688], [0.9074, 0.5949, 0.7555]], [[0.7396, 0.3029, 0.5015], [0.9945, 0.4851, 0.0514]], [[0.2751, 0.7368, 0.4281], [0.9213, 0.6282, 0.5835]]], [[[0.2667, 0.6723, 0.7721], [0.4413, 0.4826, 0.4652]], [[0.6416, 0.4474, 0.6546], [0.1866, 0.2659, 0.5946]], [[0.0255, 0.0455, 0.798], [0.0244, 0.1237, 0.6549]]]]], [[[[[0.737, 0.2006, 0.2716], [0.6914, 0.1679, 0.9496]], [[0.6256, 0.1463, 0.4315], [0.6585, 0.9893, 0.1209]], [[0.489, 0.7621, 0.0163], [0.104, 0.3928, 0.0134]]], [[[0.5753, 0.6713, 0.6972], [0.9361, 0.9908, 0.5915]], [[0.344, 0.285, 0.5914], [0.3931, 0.5459, 0.3039]], [[0.4969, 0.5477, 0.4582], [0.0636, 0.8617, 0.5617]]]]], Sub31799), 
LRes4263 = reshape_layer(Sub31799, [2, 3, 6], Res4263), 
LRes25901 = reshape_layer(Res4263, [2, 18], Res25901), 
LDot43658 = dot_layer(Con49766,Res25901, 2, 2, Dot43658), 
LCon7720 = concatenate_layer([Dot43658,[[[0.6936, 0.4739, 0.6942, 0.3437, 0.8646, 0.8017, 0.605, 0.5754], [0.3324, 0.5377, 0.1061, 0.4185, 0.5138, 0.6874, 0.4731, 0.3282], [0.9979, 0.1913, 0.287, 0.4979, 0.4504, 0.2341, 0.3277, 0.3479], [0.6978, 0.2447, 0.5263, 0.3329, 0.0658, 0.713, 0.6891, 0.3501]]]], 2, Con7720), 
LAdd3158 = add_layer([Res15168,Con7720], Add3158), 
LSub89374 = subtract_layer(Con41752,Add3158, Sub89374), 
exec_layers([LAve23706,LRes12280,LRes54795,LZer73710,LCon41752,LZer95222,LRes15168,LUp_15084,LLea4923,LRes40105,LCon49766,LSub31799,LRes4263,LRes25901,LDot43658,LCon7720,LAdd3158,LSub89374],["Ave23706","Res12280","Res54795","Zer73710","Con41752","Zer95222","Res15168","Up_15084","Lea4923","Res40105","Con49766","Sub31799","Res4263","Res25901","Dot43658","Con7720","Add3158","Sub89374"],Sub89374,"Sub89374")

Actual (Unparsed): [[[-2.2685201, 2.4708395, -0.0769000, 0.3803000, -0.6800000, 0.1173000, -0.2790000, -0.4840000, -0.4728000, 0.4239000], [-1.6061726, 3.0436214, -1.1783000, -1.2947000, -1.2506000, -1.7512000, -1.9080000, -2.2591999, 0.1462000, -0.2987000], [-1.9788211, 2.2268046, -2.1497000, -1.3129000, -1.0481000, -1.0315000, -1.4889000, -1.0679000, -0.1942000, 0.1533000], [-0.5425614, 2.9672071, -0.3531000, 0.5017000, -0.4089000, 0.1570000, -0.0409000, 0.0742000, -0.6433000, 0.2616000]]]

Expected (Unparsed): [[[-2.26851999,2.47083956,-0.07689999999999997,0.38029999999999997,-0.68,0.11730000000000002,-0.279,-0.484,-0.4728,0.42389999999999994],[-1.60617248,3.04362148,-1.1783000000000001,-1.2946999999999997,-1.2506000000000002,-1.7512,-1.908,-2.2592000000000003,0.14619999999999994,-0.29869999999999997],[-1.9788209500000002,2.2268046399999992,-2.1497,-1.3129,-1.0480999999999998,-1.0314999999999999,-1.4889,-1.0678999999999998,-0.19419999999999998,0.1533],[-0.5425612700000002,2.9672072000000003,-0.35309999999999997,0.5016999999999999,-0.4089,0.15700000000000003,-0.0409,0.07420000000000004,-0.6433000000000001,0.2616]]]

Actual:   [[[-2.2685, 2.4709, -0.0769, 0.3803, -0.68, 0.1173, -0.279, -0.484, -0.4728, 0.4239], [-1.6061, 3.0437, -1.1783, -1.2947, -1.2506, -1.7512, -1.908, -2.2591, 0.1462, -0.2987], [-1.9788, 2.2269, -2.1497, -1.3129, -1.0481, -1.0315, -1.4889, -1.0679, -0.1942, 0.1533], [-0.5425, 2.9673, -0.3531, 0.5017, -0.4089, 0.157, -0.0409, 0.0742, -0.6433, 0.2616]]]

Expected: [[[-2.2685, 2.4709, -0.0768, 0.3803, -0.68, 0.1174, -0.279, -0.484, -0.4728, 0.4239], [-1.6061, 3.0437, -1.1783, -1.2946, -1.2506, -1.7512, -1.908, -2.2592, 0.1462, -0.2986], [-1.9788, 2.2269, -2.1497, -1.3129, -1.048, -1.0314, -1.4889, -1.0678, -0.1941, 0.1533], [-0.5425, 2.9673, -0.353, 0.5017, -0.4089, 0.1571, -0.0409, 0.0743, -0.6433, 0.2616]]]