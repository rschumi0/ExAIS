import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul92811 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Mul92811 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con39024 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con55248 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Mul92811 = keras.layers.Multiply(name = 'Mul92811', )([in0Mul92811,in1Mul92811])
Res21611 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res21611', )(Mul92811)
Zer7191 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer7191', )(Res21611)
Con39024 = keras.layers.Concatenate(axis=4, name = 'Con39024', )([Zer7191,in0Con39024])
Con55248 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con55248', )(in0Con55248)
Ave49423 = keras.layers.Average(name = 'Ave49423', )([Con39024,Con55248])
Res99239 = keras.layers.Reshape((1, 2, 2), name = 'Res99239', )(Ave49423)
Zer10815 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer10815', )(Res99239)
Zer6529 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer6529', )(Zer10815)
model = tf.keras.models.Model(inputs=[in0Mul92811,in1Mul92811,in0Con39024,in0Con55248], outputs=Zer6529)
w = model.get_layer('Con55248').get_weights() 
w[0] = np.array([[[[[0.3582], [0.937]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con55248').set_weights(w) 
in0Mul92811 = tf.constant([[[[0.9873]]]])
in1Mul92811 = tf.constant([[[[0.8924]]]])
in0Con39024 = tf.constant([[[[[0.9364]], [[0.1788]]]]])
in0Con55248 = tf.constant([[[[[0.7135]], [[0.1132]]]]])
print (np.array2string(model.predict([in0Mul92811,in1Mul92811,in0Con39024,in0Con55248],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer6529.png')

LMul92811 = multiply_layer([[[[[0.9873]]]], [[[[0.8924]]]]], Mul92811), 
LRes21611 = reshape_layer(Mul92811, [1, 1, 1, 1], Res21611), 
LZer7191 = zero_padding3D_layer(Res21611, 0, 0, 1, 0, 0, 0, Zer7191), 
LCon39024 = concatenate_layer([Zer7191,[[[[[0.9364]], [[0.1788]]]]]], 4, Con39024), 
LCon55248 = conv3D_transpose_layer([[[[[0.7135]], [[0.1132]]]]], 1, 1, 1,[[[[[0.3582], [0.937]]]]],[0, 0], 1, 1, 1, true, Con55248), 
LAve49423 = average_layer([Con39024,Con55248], Ave49423), 
LRes99239 = reshape_layer(Ave49423, [1, 2, 2], Res99239), 
LZer10815 = zero_padding2D_layer(Res99239, 1, 1, 1, 1, Zer10815), 
LZer6529 = zero_padding2D_layer(Zer10815, 1, 1, 1, 1, Zer6529), 
exec_layers([LMul92811,LRes21611,LZer7191,LCon39024,LCon55248,LAve49423,LRes99239,LZer10815,LZer6529],["Mul92811","Res21611","Zer7191","Con39024","Con55248","Ave49423","Res99239","Zer10815","Zer6529"],Zer6529,"Zer6529")

Actual (Unparsed): [[[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.1277879, 0.8024748], [0.4608074, 0.1424342], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]], [[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0.12778785,0.80247475],[0.46080738,0.1424342],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]]]

Actual:   [[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0.1278, 0.8025], [0.4609, 0.1425], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]]

Expected: [[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0.1278, 0.8025], [0.4609, 0.1425], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]]