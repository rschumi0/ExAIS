import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add82399 = tf.keras.layers.Input(shape=([2, 2]))
in1Add82399 = tf.keras.layers.Input(shape=([2, 2]))
in0Zer28046 = tf.keras.layers.Input(shape=([1, 4, 2, 2]))

Add82399 = keras.layers.Add(name = 'Add82399', )([in0Add82399,in1Add82399])
Zer28046 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer28046', )(in0Zer28046)
Con7495 = keras.layers.Conv3D(4, (2, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con7495', )(Zer28046)
Res92291 = keras.layers.Reshape((2, 6, 16), name = 'Res92291', )(Con7495)
Res10018 = keras.layers.Reshape((2, 96), name = 'Res10018', )(Res92291)
Dot47319 = keras.layers.Dot(axes=(1, 1), name = 'Dot47319', )([Add82399,Res10018])
model = tf.keras.models.Model(inputs=[in0Add82399,in1Add82399,in0Zer28046], outputs=Dot47319)
w = model.get_layer('Con7495').get_weights() 
w[0] = np.array([[[[[0.098, 0.0318, 0.3539, 0.864], [0.2299, 0.3707, 0.6176, 0.4526]]]], [[[[0.3262, 0.8621, 0.6672, 0.6866], [0.9996, 0.331, 0.1679, 0.0165]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con7495').set_weights(w) 
in0Add82399 = tf.constant([[[0.9859, 0.3248], [0.0396, 0.8936]]])
in1Add82399 = tf.constant([[[0.77, 0.3186], [0.1729, 0.0683]]])
in0Zer28046 = tf.constant([[[[[1.6376, 1.1057], [1.7435, 1.9869]], [[1.198, 1.8061], [1.214, 1.6798]], [[1.2832, 1.595], [1.5673, 1.8042]], [[1.7498, 1.7203], [1.8299, 1.1141]]]]])
print (np.array2string(model.predict([in0Add82399,in1Add82399,in0Zer28046],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot47319.png')

LAdd82399 = add_layer([[[[0.9859, 0.3248], [0.0396, 0.8936]]], [[[0.77, 0.3186], [0.1729, 0.0683]]]], Add82399), 
LZer28046 = zero_padding3D_layer([[[[[1.6376, 1.1057], [1.7435, 1.9869]], [[1.198, 1.8061], [1.214, 1.6798]], [[1.2832, 1.595], [1.5673, 1.8042]], [[1.7498, 1.7203], [1.8299, 1.1141]]]]], 1, 1, 1, 1, 1, 1, Zer28046), 
LCon7495 = conv3D_layer(Zer28046, 2, 1, 1,[[[[[0.098, 0.0318, 0.3539, 0.864], [0.2299, 0.3707, 0.6176, 0.4526]]]], [[[[0.3262, 0.8621, 0.6672, 0.6866], [0.9996, 0.331, 0.1679, 0.0165]]]]],[0, 0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con7495), 
LRes92291 = reshape_layer(Con7495, [2, 6, 16], Res92291), 
LRes10018 = reshape_layer(Res92291, [2, 96], Res10018), 
LDot47319 = dot_layer(Add82399,Res10018, 1, 1, Dot47319), 
exec_layers([LAdd82399,LZer28046,LCon7495,LRes92291,LRes10018,LDot47319],["Add82399","Zer28046","Con7495","Res92291","Res10018","Dot47319"],Dot47319,"Dot47319")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 2.9668182, 3.2197378, 2.5127514, 2.4133335, 4.6194104, 3.9623322, 3.0202214, 2.6707320, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 3.9694294, 3.0135653, 2.2630938, 1.8902958, 3.7510754, 2.9545387, 2.2292308, 1.8967166, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 3.6391689, 3.0037926, 2.2793758, 1.9822367, 4.1852181, 3.5738390, 2.7227054, 2.4030899, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 4.1421900, 3.7959616, 2.9144894, 2.6461190, 3.0961214, 3.5176775, 2.7560785, 2.6815283, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.4537033, 1.5881699, 2.0367569, 2.5775141, 2.2475186, 2.1520295, 2.7369547, 3.1052984, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.9253460, 1.7297951, 2.1901482, 2.3303324, 1.8210533, 1.6672262, 2.1137885, 2.2943716, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 1.7688088, 1.6594293, 2.1075136, 2.3446338, 2.0360240, 1.9448508, 2.4730618, 2.7995449, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 2.0190167, 2.0038768, 2.5546248, 2.9944211, 1.5194500, 1.7055003, 2.1906665, 2.8260275, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.966818294131,3.219737916169,2.5127514886249998,2.413333648489,4.619410574521,3.9623322906000005,3.020221482514,2.6707320758549997,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.969429512319,3.013565457785,2.2630938327609997,1.8902958702049997,3.7510754150420005,2.95453870913,2.2292308528979996,1.89671665919,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.6391689481059997,3.003792596398,2.279375761086,1.9822366569579997,4.185218139572,3.5738391282269997,2.722705494041,2.4030899926319997,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.1421901513009995,3.7959617847169995,2.914489520337,2.646119091767,3.096121525041,3.5176775025760003,2.756078501978,2.681528247991,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.453703245993,1.588169896717,2.036756955574,2.577514134132,2.247518595485,2.152029480197,2.7369546921850003,3.105298456016,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.925345988485,1.729795063433,2.19014820965,2.330332469364,1.8210532812300002,1.6672261598939997,2.1137885331999997,2.294371641352,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.7688087596459998,1.6594292595419997,2.1075135149479998,2.344633743128,2.036023963234,1.9448507668539996,2.473061810957,2.7995449492599995,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.019016730379,2.0038768154069997,2.554624883812,2.9944212024039993,1.519449979717,1.7055002298370001,2.190666507241,2.8260274389599997,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.9669, 3.2198, 2.5128, 2.4134, 4.6195, 3.9624, 3.0203, 2.6708, 0, 0, 0, 0, 0, 0, 0, 0, 3.9695, 3.0136, 2.2631, 1.8903, 3.7511, 2.9546, 2.2293, 1.8968, 0, 0, 0, 0, 0, 0, 0, 0, 3.6392, 3.0038, 2.2794, 1.9823, 4.1853, 3.5739, 2.7228, 2.4031, 0, 0, 0, 0, 0, 0, 0, 0, 4.1422, 3.796, 2.9145, 2.6462, 3.0962, 3.5177, 2.7561, 2.6816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.4538, 1.5882, 2.0368, 2.5776, 2.2476, 2.1521, 2.737, 3.1053, 0, 0, 0, 0, 0, 0, 0, 0, 1.9254, 1.7298, 2.1902, 2.3304, 1.8211, 1.6673, 2.1138, 2.2944, 0, 0, 0, 0, 0, 0, 0, 0, 1.7689, 1.6595, 2.1076, 2.3447, 2.0361, 1.9449, 2.4731, 2.7996, 0, 0, 0, 0, 0, 0, 0, 0, 2.0191, 2.0039, 2.5547, 2.9945, 1.5195, 1.7056, 2.1907, 2.8261, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.9669, 3.2198, 2.5128, 2.4134, 4.6195, 3.9624, 3.0203, 2.6708, 0, 0, 0, 0, 0, 0, 0, 0, 3.9695, 3.0136, 2.2631, 1.8903, 3.7511, 2.9546, 2.2293, 1.8968, 0, 0, 0, 0, 0, 0, 0, 0, 3.6392, 3.0038, 2.2794, 1.9823, 4.1853, 3.5739, 2.7228, 2.4031, 0, 0, 0, 0, 0, 0, 0, 0, 4.1422, 3.796, 2.9145, 2.6462, 3.0962, 3.5177, 2.7561, 2.6816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.4538, 1.5882, 2.0368, 2.5776, 2.2476, 2.1521, 2.737, 3.1053, 0, 0, 0, 0, 0, 0, 0, 0, 1.9254, 1.7298, 2.1902, 2.3304, 1.8211, 1.6673, 2.1138, 2.2944, 0, 0, 0, 0, 0, 0, 0, 0, 1.7689, 1.6595, 2.1076, 2.3447, 2.0361, 1.9449, 2.4731, 2.7996, 0, 0, 0, 0, 0, 0, 0, 0, 2.0191, 2.0039, 2.5547, 2.9945, 1.5195, 1.7056, 2.1907, 2.8261, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]