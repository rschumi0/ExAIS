import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add49981 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Add49981 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Ave16420 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave16420 = tf.keras.layers.Input(shape=([1, 1]))
in0Con42666 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add59386 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add59386 = tf.keras.layers.Input(shape=([1, 1, 2]))

Add49981 = keras.layers.Add(name = 'Add49981', )([in0Add49981,in1Add49981])
Res76000 = keras.layers.Reshape((1, 1, 1), name = 'Res76000', )(Add49981)
Res89216 = keras.layers.Reshape((1, 1), name = 'Res89216', )(Res76000)
Ave16420 = keras.layers.Average(name = 'Ave16420', )([in0Ave16420,in1Ave16420])
Dot73582 = keras.layers.Dot(axes=(1, 2), name = 'Dot73582', )([Res89216,Ave16420])
Res98409 = keras.layers.Reshape((1, 1, 1), name = 'Res98409', )(Dot73582)
Con42666 = keras.layers.Concatenate(axis=3, name = 'Con42666', )([Res98409,in0Con42666])
Add59386 = keras.layers.Add(name = 'Add59386', )([in0Add59386,in1Add59386])
Max87636 = keras.layers.Maximum(name = 'Max87636', )([Con42666,Add59386])
Den79307 = keras.layers.Dense(4,name = 'Den79307', )(Max87636)
model = tf.keras.models.Model(inputs=[in0Add49981,in1Add49981,in0Ave16420,in1Ave16420,in0Con42666,in0Add59386,in1Add59386], outputs=Den79307)
w = model.get_layer('Den79307').get_weights() 
w[0] = np.array([[0.4073, 0.0958, 0.9435, 0.5116], [0.2205, 0.6318, 0.5928, 0.8207]])
w[1] = np.array([0.2082, 0.6683, 0.3251, 0.0746])
model.get_layer('Den79307').set_weights(w) 
in0Add49981 = tf.constant([[[[[0.7644]]]]])
in1Add49981 = tf.constant([[[[[0.1533]]]]])
in0Ave16420 = tf.constant([[[0.0234]]])
in1Ave16420 = tf.constant([[[0.9516]]])
in0Con42666 = tf.constant([[[[0.8684]]]])
in0Add59386 = tf.constant([[[[0.0712, 0.1217]]]])
in1Add59386 = tf.constant([[[[0.8775, 0.6389]]]])
print (np.array2string(model.predict([in0Add49981,in1Add49981,in0Ave16420,in1Ave16420,in0Con42666,in0Add59386,in1Add59386],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Den79307.png')

LAdd49981 = add_layer([[[[[[0.7644]]]]], [[[[[0.1533]]]]]], Add49981), 
LRes76000 = reshape_layer(Add49981, [1, 1, 1], Res76000), 
LRes89216 = reshape_layer(Res76000, [1, 1], Res89216), 
LAve16420 = average_layer([[[[0.0234]]], [[[0.9516]]]], Ave16420), 
LDot73582 = dot_layer(Res89216,Ave16420, 1, 2, Dot73582), 
LRes98409 = reshape_layer(Dot73582, [1, 1, 1], Res98409), 
LCon42666 = concatenate_layer([Res98409,[[[[0.8684]]]]], 3, Con42666), 
LAdd59386 = add_layer([[[[[0.0712, 0.1217]]]], [[[[0.8775, 0.6389]]]]], Add59386), 
LMax87636 = maximum_layer([Con42666,Add59386], Max87636), 
LDen79307 = dense_layer(Max87636, [[0.4073, 0.0958, 0.9435, 0.5116], [0.2205, 0.6318, 0.5928, 0.8207]],[0.2082, 0.6683, 0.3251, 0.0746], Den79307), 
exec_layers([LAdd49981,LRes76000,LRes89216,LAve16420,LDot73582,LRes98409,LCon42666,LAdd59386,LMax87636,LDen79307],["Add49981","Res76000","Res89216","Ave16420","Dot73582","Res98409","Con42666","Add59386","Max87636","Den79307"],Den79307,"Den79307")

Actual (Unparsed): [[[[0.7860877, 1.3078406, 1.7349860, 1.2726508]]]]

Expected (Unparsed): [[[[0.7860877100000001,1.30784058,1.7349859699999999,1.2726508]]]]

Actual:   [[[[0.7861, 1.3079, 1.735, 1.2727]]]]

Expected: [[[[0.7861, 1.3079, 1.735, 1.2727]]]]