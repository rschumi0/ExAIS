import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot63252 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot63252 = tf.keras.layers.Input(shape=([2, 3]))
in0Max8635 = tf.keras.layers.Input(shape=([2, 2, 2]))

Dot63252 = keras.layers.Dot(axes=(2, 2), name = 'Dot63252', )([in0Dot63252,in1Dot63252])
Max8635 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max8635', )(in0Max8635)
Res37396 = keras.layers.Reshape((2, 4), name = 'Res37396', )(Max8635)
Dot33110 = keras.layers.Dot(axes=(1, 1), name = 'Dot33110', )([Dot63252,Res37396])
Max28788 = keras.layers.MaxPool1D(pool_size=(1), strides=(6), padding='valid', name = 'Max28788', )(Dot33110)
model = tf.keras.models.Model(inputs=[in0Dot63252,in1Dot63252,in0Max8635], outputs=Max28788)
in0Dot63252 = tf.constant([[[0.6918, 0.6307, 0.9207], [0.2236, 0.8956, 0.5321]]])
in1Dot63252 = tf.constant([[[0.4212, 0.2893, 0.2845], [0.88, 0.7826, 0.821]]])
in0Max8635 = tf.constant([[[[1.2044, 1.0301], [1.4745, 1.2596]], [[1.8908, 1.0619], [1.3256, 1.8445]]]])
print (np.array2string(model.predict([in0Dot63252,in1Dot63252,in0Max8635],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max28788.png')

LDot63252 = dot_layer([[[0.6918, 0.6307, 0.9207], [0.2236, 0.8956, 0.5321]]], [[[0.4212, 0.2893, 0.2845], [0.88, 0.7826, 0.821]]], 2, 2, Dot63252), 
LMax8635 = max_pool2D_layer([[[[1.2044, 1.0301], [1.4745, 1.2596]], [[1.8908, 1.0619], [1.3256, 1.8445]]]], 1, 1, Max8635), 
LRes37396 = reshape_layer(Max8635, [2, 4], Res37396), 
LDot33110 = dot_layer(Dot63252,Res37396, 1, 1, Dot33110), 
LMax28788 = max_pool1D_layer(Dot33110, 1, 6, false, Max28788), 
exec_layers([LDot63252,LMax8635,LRes37396,LDot33110,LMax28788],["Dot63252","Max8635","Res37396","Dot33110","Max28788"],Max28788,"Max28788")

Actual (Unparsed): [[[1.8403925, 1.2938323, 1.7538948, 1.8576422]]]

Expected (Unparsed): [[[1.8403924903879996,1.293832297997,1.75389476325,1.857642171797]]]

Actual:   [[[1.8404, 1.2939, 1.7539, 1.8577]]]

Expected: [[[1.8404, 1.2939, 1.7539, 1.8577]]]