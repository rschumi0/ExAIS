import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul22891 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul22891 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot20107 = tf.keras.layers.Input(shape=([2]))
in1Dot20107 = tf.keras.layers.Input(shape=([2]))

Mul22891 = keras.layers.Multiply(name = 'Mul22891', )([in0Mul22891,in1Mul22891])
Res19916 = keras.layers.Reshape((1, 1, 1), name = 'Res19916', )(Mul22891)
Max74314 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max74314', )(Res19916)
Res79827 = keras.layers.Reshape((1, 1), name = 'Res79827', )(Max74314)
Dot20107 = keras.layers.Dot(axes=(1, 1), name = 'Dot20107', )([in0Dot20107,in1Dot20107])
Res41573 = keras.layers.Reshape((1, 1), name = 'Res41573', )(Dot20107)
Mul85367 = keras.layers.Multiply(name = 'Mul85367', )([Res79827,Res41573])
model = tf.keras.models.Model(inputs=[in0Mul22891,in1Mul22891,in0Dot20107,in1Dot20107], outputs=Mul85367)
in0Mul22891 = tf.constant([[[0.3757]]])
in1Mul22891 = tf.constant([[[0.211]]])
in0Dot20107 = tf.constant([[0.1062, 0.3304]])
in1Dot20107 = tf.constant([[0.3272, 0.1976]])
print (np.array2string(model.predict([in0Mul22891,in1Mul22891,in0Dot20107,in1Dot20107],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul85367.png')

LMul22891 = multiply_layer([[[[0.3757]]], [[[0.211]]]], Mul22891), 
LRes19916 = reshape_layer(Mul22891, [1, 1, 1], Res19916), 
LMax74314 = max_pool2D_layer(Res19916, 1, 1, Max74314), 
LRes79827 = reshape_layer(Max74314, [1, 1], Res79827), 
LDot20107 = dot_layer([[0.1062, 0.3304]], [[0.3272, 0.1976]], 1, 1, Dot20107), 
LRes41573 = reshape_layer(Dot20107, [1, 1], Res41573), 
LMul85367 = multiply_layer([Res79827,Res41573], Mul85367), 
exec_layers([LMul22891,LRes19916,LMax74314,LRes79827,LDot20107,LRes41573,LMul85367],["Mul22891","Res19916","Max74314","Res79827","Dot20107","Res41573","Mul85367"],Mul85367,"Mul85367")

Actual (Unparsed): [[[0.0079301]]]

Expected (Unparsed): [[[0.007930098449935998]]]

Actual:   [[[0.008]]]

Expected: [[[0.008]]]