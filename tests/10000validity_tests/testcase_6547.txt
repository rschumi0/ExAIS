import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den35189 = tf.keras.layers.Input(shape=([3, 3, 2]))
in0Zer34069 = tf.keras.layers.Input(shape=([1, 1, 2]))

Den35189 = keras.layers.Dense(3,name = 'Den35189', )(in0Den35189)
Den37321 = keras.layers.Dense(2,name = 'Den37321', )(Den35189)
Res71796 = keras.layers.Reshape((3, 6), name = 'Res71796', )(Den37321)
Zer34069 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer34069', )(in0Zer34069)
Res18146 = keras.layers.Reshape((3, 6), name = 'Res18146', )(Zer34069)
Dot53245 = keras.layers.Dot(axes=(1, 1), name = 'Dot53245', )([Res71796,Res18146])
model = tf.keras.models.Model(inputs=[in0Den35189,in0Zer34069], outputs=Dot53245)
w = model.get_layer('Den35189').get_weights() 
w[0] = np.array([[0.59, 0.5596, 0.8306], [0.7766, 0.2219, 0.7768]])
w[1] = np.array([0.9295, 0.9021, 0.1631])
model.get_layer('Den35189').set_weights(w) 
w = model.get_layer('Den37321').get_weights() 
w[0] = np.array([[0.5759, 0.7917], [0.7629, 0.5755], [0.2946, 0.0657]])
w[1] = np.array([0.1741, 0.5196])
model.get_layer('Den37321').set_weights(w) 
in0Den35189 = tf.constant([[[[0.6471, 0.99], [0.3882, 0.1645], [0.2455, 0.777]], [[0.9255, 0.0737], [0.0259, 0.0414], [0.7965, 0.7543]], [[0.3542, 0.2217], [0.3502, 0.4021], [0.3994, 0.9802]]]])
in0Zer34069 = tf.constant([[[[1.264, 1.7307]]]])
print (np.array2string(model.predict([in0Den35189,in0Zer34069],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot53245.png')

LDen35189 = dense_layer([[[[0.6471, 0.99], [0.3882, 0.1645], [0.2455, 0.777]], [[0.9255, 0.0737], [0.0259, 0.0414], [0.7965, 0.7543]], [[0.3542, 0.2217], [0.3502, 0.4021], [0.3994, 0.9802]]]], [[0.59, 0.5596, 0.8306], [0.7766, 0.2219, 0.7768]],[0.9295, 0.9021, 0.1631], Den35189), 
LDen37321 = dense_layer(Den35189, [[0.5759, 0.7917], [0.7629, 0.5755], [0.2946, 0.0657]],[0.1741, 0.5196], Den37321), 
LRes71796 = reshape_layer(Den37321, [3, 6], Res71796), 
LZer34069 = zero_padding2D_layer([[[[1.264, 1.7307]]]], 1, 1, 1, 1, Zer34069), 
LRes18146 = reshape_layer(Zer34069, [3, 6], Res18146), 
LDot53245 = dot_layer(Res71796,Res18146, 1, 1, Dot53245), 
exec_layers([LDen35189,LDen37321,LRes71796,LZer34069,LRes18146,LDot53245],["Den35189","Den37321","Res71796","Zer34069","Res18146","Dot53245"],Dot53245,"Dot53245")

Actual (Unparsed): [[[0.0000000, 0.0000000, 3.0892292, 4.2298487, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 3.3176356, 4.5425883, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 1.9046637, 2.6079124, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 2.3258432, 3.1846018, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 3.6515747, 4.9998260, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 3.8627556, 5.2889801, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0.0,0.0,3.0892291042684636,4.229848742687841,0.0,0.0],[0.0,0.0,3.317635426882864,4.54258831748906,0.0,0.0],[0.0,0.0,1.904663603587168,2.6079124198799932,0.0,0.0],[0.0,0.0,2.3258430971296002,3.18460177864098,0.0,0.0],[0.0,0.0,3.6515744870524958,4.999825921472906,0.0,0.0],[0.0,0.0,3.862755374165456,5.288980004800755,0.0,0.0]]]

Actual:   [[[0, 0, 3.0893, 4.2299, 0, 0], [0, 0, 3.3177, 4.5426, 0, 0], [0, 0, 1.9047, 2.608, 0, 0], [0, 0, 2.3259, 3.1847, 0, 0], [0, 0, 3.6516, 4.9999, 0, 0], [0, 0, 3.8628, 5.289, 0, 0]]]

Expected: [[[0, 0, 3.0893, 4.2299, 0, 0], [0, 0, 3.3177, 4.5426, 0, 0], [0, 0, 1.9047, 2.608, 0, 0], [0, 0, 2.3259, 3.1847, 0, 0], [0, 0, 3.6516, 4.9999, 0, 0], [0, 0, 3.8628, 5.289, 0, 0]]]