import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub32508 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in1Sub32508 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))

Sub32508 = keras.layers.Subtract(name = 'Sub32508', )([in0Sub32508,in1Sub32508])
Res54168 = keras.layers.Reshape((2, 3, 6), name = 'Res54168', )(Sub32508)
Dep35114 = keras.layers.DepthwiseConv2D((1, 3),strides=(1, 1), padding='same', name = 'Dep35114', )(Res54168)
Res17714 = keras.layers.Reshape((2, 3, 6, 1), name = 'Res17714', )(Dep35114)
Cro74506 = keras.layers.Cropping3D(cropping=((1, 0), (1, 1), (1, 1)), name = 'Cro74506', )(Res17714)
model = tf.keras.models.Model(inputs=[in0Sub32508,in1Sub32508], outputs=Cro74506)
w = model.get_layer('Dep35114').get_weights() 
w[0] = np.array([[[[0.8089], [0.3077], [0.3522], [0.4601], [0.5509], [0.9952]], [[0.7389], [0.6111], [0.4674], [0.36], [0.4946], [0.8004]], [[0.8669], [0.7634], [0.1279], [0.3453], [0.3355], [0.8118]]]])
w[1] = np.array([0, 0, 0, 0, 0, 0])
model.get_layer('Dep35114').set_weights(w) 
in0Sub32508 = tf.constant([[[[[0.3034, 0.1848, 0.2329], [0.9434, 0.2938, 0.1602]], [[0.2297, 0.1977, 0.6305], [0.9834, 0.5151, 0.4862]], [[0.5959, 0.84, 0.8917], [0.4124, 0.3536, 0.1431]]], [[[0.8667, 0.5862, 0.4825], [0.9191, 0.2382, 0.1071]], [[0.0637, 0.8548, 0.302], [0.6035, 0.4529, 0.829]], [[0.1485, 0.2236, 0.7981], [0.9692, 0.0876, 0.4597]]]]])
in1Sub32508 = tf.constant([[[[[0.828, 0.2767, 0.842], [0.4542, 0.4253, 0.643]], [[0.785, 0.4841, 0.0288], [0.6464, 0.1622, 0.6473]], [[0.958, 0.8622, 0.933], [0.3883, 0.3469, 0.5432]]], [[[0.5965, 0.3894, 0.4859], [0.4387, 0.1242, 0.5271]], [[0.0252, 0.2042, 0.9109], [0.0485, 0.67, 0.3282]], [[0.48, 0.8571, 0.7129], [0.7483, 0.5277, 0.8129]]]]])
print (np.array2string(model.predict([in0Sub32508,in1Sub32508],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro74506.png')

LSub32508 = subtract_layer([[[[[0.3034, 0.1848, 0.2329], [0.9434, 0.2938, 0.1602]], [[0.2297, 0.1977, 0.6305], [0.9834, 0.5151, 0.4862]], [[0.5959, 0.84, 0.8917], [0.4124, 0.3536, 0.1431]]], [[[0.8667, 0.5862, 0.4825], [0.9191, 0.2382, 0.1071]], [[0.0637, 0.8548, 0.302], [0.6035, 0.4529, 0.829]], [[0.1485, 0.2236, 0.7981], [0.9692, 0.0876, 0.4597]]]]], [[[[[0.828, 0.2767, 0.842], [0.4542, 0.4253, 0.643]], [[0.785, 0.4841, 0.0288], [0.6464, 0.1622, 0.6473]], [[0.958, 0.8622, 0.933], [0.3883, 0.3469, 0.5432]]], [[[0.5965, 0.3894, 0.4859], [0.4387, 0.1242, 0.5271]], [[0.0252, 0.2042, 0.9109], [0.0485, 0.67, 0.3282]], [[0.48, 0.8571, 0.7129], [0.7483, 0.5277, 0.8129]]]]], Sub32508), 
LRes54168 = reshape_layer(Sub32508, [2, 3, 6], Res54168), 
LDep35114 = depthwise_conv2D_layer(Res54168, 1, 3,[[[[0.8089], [0.3077], [0.3522], [0.4601], [0.5509], [0.9952]], [[0.7389], [0.6111], [0.4674], [0.36], [0.4946], [0.8004]], [[0.8669], [0.7634], [0.1279], [0.3453], [0.3355], [0.8118]]]],[0, 0, 0, 0, 0, 0], 1, 1, true, Dep35114), 
LRes17714 = reshape_layer(Dep35114, [2, 3, 6, 1], Res17714), 
LCro74506 = cropping3D_layer(Res17714, 1, 0, 1, 1, 1, 1, Cro74506), 
exec_layers([LSub32508,LRes54168,LDep35114,LRes17714,LCro74506],["Sub32508","Res54168","Dep35114","Res17714","Cro74506"],Cro74506,"Cro74506")

Actual (Unparsed): [[[[[-0.0254769], [-0.2749003], [0.4971088], [-0.1922286]]]]]

Expected (Unparsed): [[[[[-0.025476879999999924],[-0.27490026],[0.49710881000000007],[-0.19222861000000002]]]]]

Actual:   [[[[[-0.0254], [-0.2749], [0.4972], [-0.1922]]]]]

Expected: [[[[[-0.0254], [-0.2749], [0.4972], [-0.1922]]]]]