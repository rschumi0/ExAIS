import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con63764 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Con63764 = keras.layers.Conv3D(3, (1, 2, 2),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con63764', )(in0Con63764)
Res19923 = keras.layers.Reshape((1, 2, 6), name = 'Res19923', )(Con63764)
Con7676 = keras.layers.Conv2DTranspose(3, (1, 2),strides=(1, 1), padding='valid', name = 'Con7676', )(Res19923)
Res62677 = keras.layers.Reshape((1, 9), name = 'Res62677', )(Con7676)
Up_24876 = keras.layers.UpSampling1D(size=(2), name = 'Up_24876', )(Res62677)
model = tf.keras.models.Model(inputs=[in0Con63764], outputs=Up_24876)
w = model.get_layer('Con63764').get_weights() 
w[0] = np.array([[[[[0.9204, 0.2249, 0.8786], [0.1964, 0.7077, 0.5295]], [[0.984, 0.3726, 0.2117], [0.4091, 0.1708, 0.2565]]], [[[0.7706, 0.607, 0.6838], [0.7976, 0.6587, 0.9772]], [[0.8006, 0.718, 0.1084], [0.386, 0.3406, 0.9181]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con63764').set_weights(w) 
w = model.get_layer('Con7676').get_weights() 
w[0] = np.array([[[[0.4948, 0.939, 0.8212, 0.2152, 0.5428, 0.1108], [0.6561, 0.6094, 0.2691, 0.1225, 0.2091, 0.5088], [0.3215, 0.3496, 0.0818, 0.9635, 0.9261, 0.0077]], [[0.9232, 0.5592, 0.4868, 0.2169, 0.6936, 0.0282], [0.1427, 0.3788, 0.8782, 0.4433, 0.6887, 0.351], [0.5916, 0.9689, 0.7822, 0.6475, 0.0454, 0.5334]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con7676').set_weights(w) 
in0Con63764 = tf.constant([[[[[0.3619, 0.9472], [0.3319, 0.4736]], [[0.3496, 0.0231], [0.2968, 0.3713]]]]])
print (np.array2string(model.predict([in0Con63764],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_24876.png')

LCon63764 = conv3D_layer([[[[[0.3619, 0.9472], [0.3319, 0.4736]], [[0.3496, 0.0231], [0.2968, 0.3713]]]]], 1, 2, 2,[[[[[0.9204, 0.2249, 0.8786], [0.1964, 0.7077, 0.5295]], [[0.984, 0.3726, 0.2117], [0.4091, 0.1708, 0.2565]]], [[[0.7706, 0.607, 0.6838], [0.7976, 0.6587, 0.9772]], [[0.8006, 0.718, 0.1084], [0.386, 0.3406, 0.9181]]]]],[0, 0, 0], 1, 1, 1, true, 1, 1, 1, Con63764), 
LRes19923 = reshape_layer(Con63764, [1, 2, 6], Res19923), 
LCon7676 = conv2D_transpose_layer(Res19923, 1, 2,[[[[0.4948, 0.939, 0.8212, 0.2152, 0.5428, 0.1108], [0.6561, 0.6094, 0.2691, 0.1225, 0.2091, 0.5088], [0.3215, 0.3496, 0.0818, 0.9635, 0.9261, 0.0077]], [[0.9232, 0.5592, 0.4868, 0.2169, 0.6936, 0.0282], [0.1427, 0.3788, 0.8782, 0.4433, 0.6887, 0.351], [0.5916, 0.9689, 0.7822, 0.6475, 0.0454, 0.5334]]]],[0, 0, 0], 1, 1, false, Con7676), 
LRes62677 = reshape_layer(Con7676, [1, 9], Res62677), 
LUp_24876 = up_sampling1D_layer(Res62677, 2, Up_24876), 
exec_layers([LCon63764,LRes19923,LCon7676,LRes62677,LUp_24876],["Con63764","Res19923","Con7676","Res62677","Up_24876"],Up_24876,"Up_24876")

Actual (Unparsed): [[[4.4017139, 3.3434226, 2.8874296, 5.3702676, 4.7810651, 6.0236852, 1.4104648, 1.1720140, 1.5727892], [4.4017139, 3.3434226, 2.8874296, 5.3702676, 4.7810651, 6.0236852, 1.4104648, 1.1720140, 1.5727892]]]

Expected (Unparsed): [[[4.401713897960001,3.3434225798160004,2.8874295931000002,5.370267641014001,4.781065120168,6.023685214717,1.4104648732740002,1.172014026758,1.572789249891],[4.401713897960001,3.3434225798160004,2.8874295931000002,5.370267641014001,4.781065120168,6.023685214717,1.4104648732740002,1.172014026758,1.572789249891]]]

Actual:   [[[4.4018, 3.3435, 2.8875, 5.3703, 4.7811, 6.0237, 1.4105, 1.1721, 1.5728], [4.4018, 3.3435, 2.8875, 5.3703, 4.7811, 6.0237, 1.4105, 1.1721, 1.5728]]]

Expected: [[[4.4018, 3.3435, 2.8875, 5.3703, 4.7811, 6.0237, 1.4105, 1.1721, 1.5728], [4.4018, 3.3435, 2.8875, 5.3703, 4.7811, 6.0237, 1.4105, 1.1721, 1.5728]]]