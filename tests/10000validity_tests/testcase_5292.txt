import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub33429 = tf.keras.layers.Input(shape=([2, 2, 2, 3]))
in1Sub33429 = tf.keras.layers.Input(shape=([2, 2, 2, 3]))
in0Sof45505 = tf.keras.layers.Input(shape=([2, 1]))
in0Con12922 = tf.keras.layers.Input(shape=([2, 11]))
in0Con66689 = tf.keras.layers.Input(shape=([2, 12, 1]))
in0Mul63744 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Mul63744 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Con83932 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min63294 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min63294 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Dot29392 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot29392 = tf.keras.layers.Input(shape=([3, 2]))
in0Con50108 = tf.keras.layers.Input(shape=([3, 21]))

Sub33429 = keras.layers.Subtract(name = 'Sub33429', )([in0Sub33429,in1Sub33429])
Res19209 = keras.layers.Reshape((2, 2, 6), name = 'Res19209', )(Sub33429)
Res23307 = keras.layers.Reshape((2, 12), name = 'Res23307', )(Res19209)
Sof45505 = keras.layers.Softmax(axis=1, name = 'Sof45505', input_shape=(2, 1))(in0Sof45505)
Con12922 = keras.layers.Concatenate(axis=2, name = 'Con12922', )([Sof45505,in0Con12922])
Sub52315 = keras.layers.Subtract(name = 'Sub52315', )([Res23307,Con12922])
Res65980 = keras.layers.Reshape((2, 12, 1), name = 'Res65980', )(Sub52315)
Con66689 = keras.layers.Concatenate(axis=3, name = 'Con66689', )([Res65980,in0Con66689])
Mul63744 = keras.layers.Multiply(name = 'Mul63744', )([in0Mul63744,in1Mul63744])
Con83932 = keras.layers.Concatenate(axis=3, name = 'Con83932', )([Mul63744,in0Con83932])
Min63294 = keras.layers.Minimum(name = 'Min63294', )([in0Min63294,in1Min63294])
Zer74193 = keras.layers.ZeroPadding2D(padding=((0, 0), (1, 0)), name = 'Zer74193', )(Min63294)
Min55649 = keras.layers.Minimum(name = 'Min55649', )([Con83932,Zer74193])
Zer29462 = keras.layers.ZeroPadding2D(padding=((0, 0), (10, 0)), name = 'Zer29462', )(Min55649)
Min83938 = keras.layers.Minimum(name = 'Min83938', )([Con66689,Zer29462])
Res57637 = keras.layers.Reshape((2, 24), name = 'Res57637', )(Min83938)
Zer40994 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer40994', )(Res57637)
Dot29392 = keras.layers.Dot(axes=(2, 2), name = 'Dot29392', )([in0Dot29392,in1Dot29392])
Con50108 = keras.layers.Concatenate(axis=2, name = 'Con50108', )([Dot29392,in0Con50108])
Min38136 = keras.layers.Minimum(name = 'Min38136', )([Zer40994,Con50108])
model = tf.keras.models.Model(inputs=[in0Sub33429,in1Sub33429,in0Sof45505,in0Con12922,in0Con66689,in0Mul63744,in1Mul63744,in0Con83932,in0Min63294,in1Min63294,in0Dot29392,in1Dot29392,in0Con50108], outputs=Min38136)
in0Sub33429 = tf.constant([[[[[0.2753, 0.2375, 0.9286], [0.3232, 0.7983, 0.2294]], [[0.4896, 0.6958, 0.2416], [0.9349, 0.1371, 0.4166]]], [[[0.195, 0.392, 0.0253], [0.546, 0.608, 0.4191]], [[0.617, 0.9932, 0.9537], [0.3621, 0.4632, 0.8494]]]]])
in1Sub33429 = tf.constant([[[[[0.3586, 0.5848, 0.6346], [0.0913, 0.6786, 0.1791]], [[0.6266, 0.6145, 0.4987], [0.9736, 0.3219, 0.5507]]], [[[0.8214, 0.5529, 0.6433], [0.3487, 0.7662, 0.6651]], [[0.8627, 0.1515, 0.9525], [0.0916, 0.1358, 0.5927]]]]])
in0Sof45505 = tf.constant([[[0.3616], [0.7795]]])
in0Con12922 = tf.constant([[[0.7183, 0.432, 0.1902, 0.9187, 0.8335, 0.0979, 0.5933, 0.2844, 0.4971, 0.3891, 0.156], [0.9848, 0.5893, 0.4789, 0.7875, 0.7438, 0.863, 0.1587, 0.3272, 0.0389, 0.6285, 0.6794]]])
in0Con66689 = tf.constant([[[[0.513], [0.5841], [0.9887], [0.6706], [0.4524], [0.4217], [0.2763], [0.4967], [0.6309], [0.4231], [0.2484], [0.6003]], [[0.5898], [0.6504], [0.1052], [0.7359], [0.1574], [0.735], [0.4438], [0.4663], [0.629], [0.8363], [0.6539], [0.3772]]]])
in0Mul63744 = tf.constant([[[[0.7287], [0.2488]], [[0.3803], [0.7982]]]])
in1Mul63744 = tf.constant([[[[0.5749], [0.6395]], [[0.4195], [0.469]]]])
in0Con83932 = tf.constant([[[[0.2781], [0.3457]], [[0.7793], [0.4358]]]])
in0Min63294 = tf.constant([[[[0.2515, 0.8421]], [[0.9676, 0.8399]]]])
in1Min63294 = tf.constant([[[[0.2049, 0.5035]], [[0.1934, 0.5289]]]])
in0Dot29392 = tf.constant([[[0.0662, 0.2734], [0.2412, 0.8447], [0.201, 0.457]]])
in1Dot29392 = tf.constant([[[0.1779, 0.0057], [0.2111, 0.9935], [0.1443, 0.2287]]])
in0Con50108 = tf.constant([[[0.9352, 0.8766, 0.9297, 0.5011, 0.5533, 0.2418, 0.5698, 0.8706, 0.3356, 0.8108, 0.352, 0.5066, 0.2518, 0.8942, 0.9792, 0.3331, 0.3674, 0.6831, 0.2523, 0.7013, 0.4352], [0.1758, 0.9445, 0.859, 0.0629, 0.318, 0.8557, 0.8329, 0.5297, 0.8562, 0.9041, 0.7609, 0.8106, 0.4588, 0.0501, 0.3443, 1, 0.1136, 0.4338, 0.6226, 0.1249, 0.6786], [0.3606, 0.7201, 0.2835, 0.7296, 0.6652, 0.5571, 0.156, 0.5284, 0.552, 0.7783, 0.1933, 0.0155, 0.2175, 0.3093, 0.2099, 0.2227, 0.4408, 0.0192, 0.6843, 0.3949, 0.8481]]])
print (np.array2string(model.predict([in0Sub33429,in1Sub33429,in0Sof45505,in0Con12922,in0Con66689,in0Mul63744,in1Mul63744,in0Con83932,in0Min63294,in1Min63294,in0Dot29392,in1Dot29392,in0Con50108],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min38136.png')

LSub33429 = subtract_layer([[[[[0.2753, 0.2375, 0.9286], [0.3232, 0.7983, 0.2294]], [[0.4896, 0.6958, 0.2416], [0.9349, 0.1371, 0.4166]]], [[[0.195, 0.392, 0.0253], [0.546, 0.608, 0.4191]], [[0.617, 0.9932, 0.9537], [0.3621, 0.4632, 0.8494]]]]], [[[[[0.3586, 0.5848, 0.6346], [0.0913, 0.6786, 0.1791]], [[0.6266, 0.6145, 0.4987], [0.9736, 0.3219, 0.5507]]], [[[0.8214, 0.5529, 0.6433], [0.3487, 0.7662, 0.6651]], [[0.8627, 0.1515, 0.9525], [0.0916, 0.1358, 0.5927]]]]], Sub33429), 
LRes19209 = reshape_layer(Sub33429, [2, 2, 6], Res19209), 
LRes23307 = reshape_layer(Res19209, [2, 12], Res23307), 
LSof45505 = softmax_layer([[[0.3616], [0.7795]]], 1, Sof45505), 
LCon12922 = concatenate_layer([Sof45505,[[[0.7183, 0.432, 0.1902, 0.9187, 0.8335, 0.0979, 0.5933, 0.2844, 0.4971, 0.3891, 0.156], [0.9848, 0.5893, 0.4789, 0.7875, 0.7438, 0.863, 0.1587, 0.3272, 0.0389, 0.6285, 0.6794]]]], 2, Con12922), 
LSub52315 = subtract_layer(Res23307,Con12922, Sub52315), 
LRes65980 = reshape_layer(Sub52315, [2, 12, 1], Res65980), 
LCon66689 = concatenate_layer([Res65980,[[[[0.513], [0.5841], [0.9887], [0.6706], [0.4524], [0.4217], [0.2763], [0.4967], [0.6309], [0.4231], [0.2484], [0.6003]], [[0.5898], [0.6504], [0.1052], [0.7359], [0.1574], [0.735], [0.4438], [0.4663], [0.629], [0.8363], [0.6539], [0.3772]]]]], 3, Con66689), 
LMul63744 = multiply_layer([[[[[0.7287], [0.2488]], [[0.3803], [0.7982]]]], [[[[0.5749], [0.6395]], [[0.4195], [0.469]]]]], Mul63744), 
LCon83932 = concatenate_layer([Mul63744,[[[[0.2781], [0.3457]], [[0.7793], [0.4358]]]]], 3, Con83932), 
LMin63294 = minimum_layer([[[[[0.2515, 0.8421]], [[0.9676, 0.8399]]]], [[[[0.2049, 0.5035]], [[0.1934, 0.5289]]]]], Min63294), 
LZer74193 = zero_padding2D_layer(Min63294, 0, 0, 1, 0, Zer74193), 
LMin55649 = minimum_layer([Con83932,Zer74193], Min55649), 
LZer29462 = zero_padding2D_layer(Min55649, 0, 0, 10, 0, Zer29462), 
LMin83938 = minimum_layer([Con66689,Zer29462], Min83938), 
LRes57637 = reshape_layer(Min83938, [2, 24], Res57637), 
LZer40994 = zero_padding1D_layer(Res57637, 1, 0, Zer40994), 
LDot29392 = dot_layer([[[0.0662, 0.2734], [0.2412, 0.8447], [0.201, 0.457]]], [[[0.1779, 0.0057], [0.2111, 0.9935], [0.1443, 0.2287]]], 2, 2, Dot29392), 
LCon50108 = concatenate_layer([Dot29392,[[[0.9352, 0.8766, 0.9297, 0.5011, 0.5533, 0.2418, 0.5698, 0.8706, 0.3356, 0.8108, 0.352, 0.5066, 0.2518, 0.8942, 0.9792, 0.3331, 0.3674, 0.6831, 0.2523, 0.7013, 0.4352], [0.1758, 0.9445, 0.859, 0.0629, 0.318, 0.8557, 0.8329, 0.5297, 0.8562, 0.9041, 0.7609, 0.8106, 0.4588, 0.0501, 0.3443, 1, 0.1136, 0.4338, 0.6226, 0.1249, 0.6786], [0.3606, 0.7201, 0.2835, 0.7296, 0.6652, 0.5571, 0.156, 0.5284, 0.552, 0.7783, 0.1933, 0.0155, 0.2175, 0.3093, 0.2099, 0.2227, 0.4408, 0.0192, 0.6843, 0.3949, 0.8481]]]], 2, Con50108), 
LMin38136 = minimum_layer([Zer40994,Con50108], Min38136), 
exec_layers([LSub33429,LRes19209,LRes23307,LSof45505,LCon12922,LSub52315,LRes65980,LCon66689,LMul63744,LCon83932,LMin63294,LZer74193,LMin55649,LZer29462,LMin83938,LRes57637,LZer40994,LDot29392,LCon50108,LMin38136],["Sub33429","Res19209","Res23307","Sof45505","Con12922","Sub52315","Res65980","Con66689","Mul63744","Con83932","Min63294","Zer74193","Min55649","Zer29462","Min83938","Res57637","Zer40994","Dot29392","Con50108","Min38136"],Min38136,"Min38136")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [-0.4803194, 0.0000000, -1.0656000, 0.0000000, -0.1380000, 0.0000000, 0.0000000, 0.0000000, -0.7990000, 0.0000000, -0.7832000, 0.0000000, -0.2349000, 0.0000000, -0.5120000, 0.0000000, -0.5415000, 0.0000000, -0.5358000, 0.0000000, -0.5739000, 0.0000000, -0.2901000, 0.3457000], [-1.2293806, 0.0000000, -1.1457000, 0.0000000, -1.2073000, 0.0000000, -0.2816000, 0.0000000, -0.9457000, 0.0000000, -0.9898000, 0.0000000, -1.1087000, 0.0000000, 0.0000000, 0.0000000, -0.3260000, 0.0000000, 0.0000000, 0.0000000, -0.3011000, 0.0000000, -0.4227000, 0.3772000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-0.4803193707331624,0,-1.0656,0,-0.13800000000000007,0,0,0,-0.7989999999999999,0,-0.7832,0,-0.23490000000000005,0,-0.5120000000000001,0,-0.5415,0,-0.5358,0,-0.5739000000000001,0,-0.2900999999999999,0.3457],[-1.2293806292668377,0,-1.1457,0,-1.2073,0,-0.28159999999999996,0,-0.9457,0,-0.9898,0,-1.1087,0,0,0,-0.326,0,0,0,-0.3010999999999999,0,-0.42269999999999996,0.3772]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [-0.4803, 0, -1.0656, 0, -0.138, 0, 0, 0, -0.799, 0, -0.7832, 0, -0.2349, 0, -0.512, 0, -0.5415, 0, -0.5358, 0, -0.5739, 0, -0.2901, 0.3457], [-1.2293, 0, -1.1457, 0, -1.2073, 0, -0.2816, 0, -0.9457, 0, -0.9898, 0, -1.1087, 0, 0, 0, -0.326, 0, 0, 0, -0.3011, 0, -0.4227, 0.3772]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [-0.4803, 0, -1.0656, 0, -0.138, 0, 0, 0, -0.7989, 0, -0.7832, 0, -0.2349, 0, -0.512, 0, -0.5415, 0, -0.5358, 0, -0.5739, 0, -0.29, 0.3457], [-1.2293, 0, -1.1457, 0, -1.2073, 0, -0.2815, 0, -0.9457, 0, -0.9898, 0, -1.1087, 0, 0, 0, -0.326, 0, 0, 0, -0.301, 0, -0.4226, 0.3772]]]