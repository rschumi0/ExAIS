import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con72996 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Con72996 = keras.layers.Conv3DTranspose(4, (1, 2, 1),strides=(1, 1, 1), padding='same', name = 'Con72996', )(in0Con72996)
Res43188 = keras.layers.Reshape((1, 2, 8), name = 'Res43188', )(Con72996)
Res79237 = keras.layers.Reshape((1, 16), name = 'Res79237', )(Res43188)
Con32278 = keras.layers.Conv1D(3, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con32278', )(Res79237)
model = tf.keras.models.Model(inputs=[in0Con72996], outputs=Con32278)
w = model.get_layer('Con72996').get_weights() 
w[0] = np.array([[[[[0.3991, 0.0523], [0.6727, 0.9756], [0.9534, 0.1407], [0.3726, 0.0779]]], [[[0.7976, 0.7223], [0.8439, 0.7991], [0.7103, 0.4403], [0.673, 0.736]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con72996').set_weights(w) 
w = model.get_layer('Con32278').get_weights() 
w[0] = np.array([[[0.8532, 0.7768, 0.742], [0.1639, 0.3819, 0.5675], [0.6055, 0.432, 0.2248], [0.9238, 0.0332, 0.6784], [0.632, 0.1971, 0.9398], [0.8054, 0.6524, 0.8091], [0.249, 0.8211, 0.5739], [0.2362, 0.3029, 0.2702], [0.3259, 0.5641, 0.8951], [0.0088, 0.2928, 0.5378], [0.335, 0.2416, 0.6337], [0.309, 0.6785, 0.222], [0.2551, 0.0173, 0.8838], [0.652, 0.0397, 0.9334], [0.193, 0.6144, 0.8011], [0.1386, 0.4792, 0.8184]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con32278').set_weights(w) 
in0Con72996 = tf.constant([[[[[0.1442, 0.9973], [0.1922, 0.1227]], [[0.4278, 0.4985], [0.8915, 0.4182]]]]])
print (np.array2string(model.predict([in0Con72996],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con32278.png')

LCon72996 = conv3D_transpose_layer([[[[[0.1442, 0.9973], [0.1922, 0.1227]], [[0.4278, 0.4985], [0.8915, 0.4182]]]]], 1, 2, 1,[[[[[0.3991, 0.0523], [0.6727, 0.9756], [0.9534, 0.1407], [0.3726, 0.0779]]], [[[0.7976, 0.7223], [0.8439, 0.7991], [0.7103, 0.4403], [0.673, 0.736]]]]],[0, 0, 0, 0], 1, 1, 1, true, Con72996), 
LRes43188 = reshape_layer(Con72996, [1, 2, 8], Res43188), 
LRes79237 = reshape_layer(Res43188, [1, 16], Res79237), 
LCon32278 = conv1D_layer(Res79237, 1,[[[0.8532, 0.7768, 0.742], [0.1639, 0.3819, 0.5675], [0.6055, 0.432, 0.2248], [0.9238, 0.0332, 0.6784], [0.632, 0.1971, 0.9398], [0.8054, 0.6524, 0.8091], [0.249, 0.8211, 0.5739], [0.2362, 0.3029, 0.2702], [0.3259, 0.5641, 0.8951], [0.0088, 0.2928, 0.5378], [0.335, 0.2416, 0.6337], [0.309, 0.6785, 0.222], [0.2551, 0.0173, 0.8838], [0.652, 0.0397, 0.9334], [0.193, 0.6144, 0.8011], [0.1386, 0.4792, 0.8184]]],[0, 0, 0], 1, true, 1, Con32278), 
exec_layers([LCon72996,LRes43188,LRes79237,LCon32278],["Con72996","Res43188","Res79237","Con32278"],Con32278,"Con32278")

Actual (Unparsed): [[[3.1695763, 4.0253904, 7.0557156]]]

Expected (Unparsed): [[[3.169576234765,4.025390347066,7.055715569958]]]

Actual:   [[[3.1696, 4.0254, 7.0558]]]

Expected: [[[3.1696, 4.0254, 7.0558]]]