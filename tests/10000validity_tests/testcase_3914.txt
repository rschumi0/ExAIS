import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub46774 = tf.keras.layers.Input(shape=([3]))
in1Sub46774 = tf.keras.layers.Input(shape=([3]))
in0Con35687 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot81820 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot81820 = tf.keras.layers.Input(shape=([2, 2]))

Sub46774 = keras.layers.Subtract(name = 'Sub46774', )([in0Sub46774,in1Sub46774])
Res19801 = keras.layers.Reshape((3, 1), name = 'Res19801', )(Sub46774)
Con35687 = keras.layers.Concatenate(axis=2, name = 'Con35687', )([Res19801,in0Con35687])
Dot81820 = keras.layers.Dot(axes=(1, 1), name = 'Dot81820', )([in0Dot81820,in1Dot81820])
Zer70923 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer70923', )(Dot81820)
Mul45693 = keras.layers.Multiply(name = 'Mul45693', )([Con35687,Zer70923])
Res27679 = keras.layers.Reshape((3, 2, 1), name = 'Res27679', )(Mul45693)
Glo30381 = keras.layers.GlobalMaxPool2D(name = 'Glo30381', )(Res27679)
model = tf.keras.models.Model(inputs=[in0Sub46774,in1Sub46774,in0Con35687,in0Dot81820,in1Dot81820], outputs=Glo30381)
in0Sub46774 = tf.constant([[0.1889, 0.7626, 0.8865]])
in1Sub46774 = tf.constant([[0.1726, 0.3033, 0.6749]])
in0Con35687 = tf.constant([[[0.615], [0.5203], [0.7071]]])
in0Dot81820 = tf.constant([[[0.3611, 0.901], [0.7189, 0.8886]]])
in1Dot81820 = tf.constant([[[0.7535, 0.0727], [0.6151, 0.4329]]])
print (np.array2string(model.predict([in0Sub46774,in1Sub46774,in0Con35687,in0Dot81820,in1Dot81820],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo30381.png')

LSub46774 = subtract_layer([[0.1889, 0.7626, 0.8865]], [[0.1726, 0.3033, 0.6749]], Sub46774), 
LRes19801 = reshape_layer(Sub46774, [3, 1], Res19801), 
LCon35687 = concatenate_layer([Res19801,[[[0.615], [0.5203], [0.7071]]]], 2, Con35687), 
LDot81820 = dot_layer([[[0.3611, 0.901], [0.7189, 0.8886]]], [[[0.7535, 0.0727], [0.6151, 0.4329]]], 1, 1, Dot81820), 
LZer70923 = zero_padding1D_layer(Dot81820, 1, 0, Zer70923), 
LMul45693 = multiply_layer([Con35687,Zer70923], Mul45693), 
LRes27679 = reshape_layer(Mul45693, [3, 2, 1], Res27679), 
LGlo30381 = global_max_pool2D_layer(Res27679, Glo30381), 
exec_layers([LSub46774,LRes19801,LCon35687,LDot81820,LZer70923,LMul45693,LRes27679,LGlo30381],["Sub46774","Res19801","Con35687","Dot81820","Zer70923","Mul45693","Res27679","Glo30381"],Glo30381,"Glo30381")

Actual (Unparsed): [[0.3280708]]

Expected (Unparsed): [[0.32807075143199993]]

Actual:   [[0.3281]]

Expected: [[0.3281]]