import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max54111 = tf.keras.layers.Input(shape=([2, 2]))
in1Max54111 = tf.keras.layers.Input(shape=([2, 2]))

Max54111 = keras.layers.Maximum(name = 'Max54111', )([in0Max54111,in1Max54111])
Res75186 = keras.layers.Reshape((2, 2, 1), name = 'Res75186', )(Max54111)
Res61218 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res61218', )(Res75186)
Con13721 = keras.layers.Conv3DTranspose(2, (2, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con13721', )(Res61218)
Res69846 = keras.layers.Reshape((3, 2, 2), name = 'Res69846', )(Con13721)
Res44949 = keras.layers.Reshape((3, 4), name = 'Res44949', )(Res69846)
Glo25183 = keras.layers.GlobalAveragePooling1D(name = 'Glo25183', )(Res44949)
model = tf.keras.models.Model(inputs=[in0Max54111,in1Max54111], outputs=Glo25183)
w = model.get_layer('Con13721').get_weights() 
w[0] = np.array([[[[[0.5447], [0.9753]]]], [[[[0.2054], [0.942]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con13721').set_weights(w) 
in0Max54111 = tf.constant([[[0.7201, 0.242], [0.0992, 0.1725]]])
in1Max54111 = tf.constant([[[0.3986, 0.4785], [0.3079, 0.8972]]])
print (np.array2string(model.predict([in0Max54111,in1Max54111],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo25183.png')

LMax54111 = maximum_layer([[[[0.7201, 0.242], [0.0992, 0.1725]]], [[[0.3986, 0.4785], [0.3079, 0.8972]]]], Max54111), 
LRes75186 = reshape_layer(Max54111, [2, 2, 1], Res75186), 
LRes61218 = reshape_layer(Res75186, [2, 2, 1, 1], Res61218), 
LCon13721 = conv3D_transpose_layer(Res61218, 2, 1, 1,[[[[[0.5447], [0.9753]]]], [[[[0.2054], [0.942]]]]],[0, 0], 1, 1, 1, false, Con13721), 
LRes69846 = reshape_layer(Con13721, [3, 2, 2], Res69846), 
LRes44949 = reshape_layer(Res69846, [3, 4], Res44949), 
LGlo25183 = global_average_pooling1D_layer(Res44949, Glo25183), 
exec_layers([LMax54111,LRes75186,LRes61218,LCon13721,LRes69846,LRes44949,LGlo25183],["Max54111","Res75186","Res61218","Con13721","Res69846","Res44949","Glo25183"],Glo25183,"Glo25183")

Actual (Unparsed): [[0.2570343, 0.6569948, 0.3439709, 0.8792099]]

Expected (Unparsed): [[0.2570342666666667,0.6569948,0.34397085666666666,0.87920987]]

Actual:   [[0.2571, 0.657, 0.344, 0.8793]]

Expected: [[0.2571, 0.657, 0.344, 0.8793]]