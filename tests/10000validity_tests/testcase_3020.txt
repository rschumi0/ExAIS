import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min53225 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Min53225 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Cro46987 = tf.keras.layers.Input(shape=([1, 3]))

Min53225 = keras.layers.Minimum(name = 'Min53225', )([in0Min53225,in1Min53225])
Lea60166 = keras.layers.LeakyReLU(alpha=8.015078489375647, name = 'Lea60166', )(Min53225)
Res14109 = keras.layers.Reshape((1, 1), name = 'Res14109', )(Lea60166)
Cro46987 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro46987', )(in0Cro46987)
Res82697 = keras.layers.Reshape((1, 3, 1), name = 'Res82697', )(Cro46987)
Con97920 = keras.layers.Conv2D(4, (1, 2),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con97920', )(Res82697)
Res60830 = keras.layers.Reshape((1, 8), name = 'Res60830', )(Con97920)
Dot18562 = keras.layers.Dot(axes=(1, 1), name = 'Dot18562', )([Res14109,Res60830])
model = tf.keras.models.Model(inputs=[in0Min53225,in1Min53225,in0Cro46987], outputs=Dot18562)
w = model.get_layer('Con97920').get_weights() 
w[0] = np.array([[[[0.5166, 0.424, 0.6066, 0.3145]], [[0.0546, 0.4964, 0.3301, 0.1088]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con97920').set_weights(w) 
in0Min53225 = tf.constant([[[[0.9325]]]])
in1Min53225 = tf.constant([[[[0.2402]]]])
in0Cro46987 = tf.constant([[[1.2037, 1.2053, 1.8132]]])
print (np.array2string(model.predict([in0Min53225,in1Min53225,in0Cro46987],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot18562.png')

LMin53225 = minimum_layer([[[[[0.9325]]]], [[[[0.2402]]]]], Min53225), 
LLea60166 = leaky_relu_layer(Min53225, 8.015078489375647, Lea60166), 
LRes14109 = reshape_layer(Lea60166, [1, 1], Res14109), 
LCro46987 = cropping1D_layer([[[1.2037, 1.2053, 1.8132]]], 0, 0, Cro46987), 
LRes82697 = reshape_layer(Cro46987, [1, 3, 1], Res82697), 
LCon97920 = conv2D_layer(Res82697, 1, 2,[[[[0.5166, 0.424, 0.6066, 0.3145]], [[0.0546, 0.4964, 0.3301, 0.1088]]]],[0, 0, 0, 0], 1, 1, false, 1, 1, Con97920), 
LRes60830 = reshape_layer(Con97920, [1, 8], Res60830), 
LDot18562 = dot_layer(Res14109,Res60830, 1, 1, Dot18562), 
exec_layers([LMin53225,LLea60166,LRes14109,LCro46987,LRes82697,LCon97920,LRes60830,LDot18562],["Min53225","Lea60166","Res14109","Cro46987","Res82697","Con97920","Res60830","Dot18562"],Dot18562,"Dot18562")

Actual (Unparsed): [[[0.1651713, 0.2663049, 0.2709537, 0.1224300, 0.1733424, 0.3389509, 0.3193873, 0.1384376]]]

Expected (Unparsed): [[[0.16517132016,0.266304868744,0.27095375479,0.12243000965799998,0.17334241974,0.338950947136,0.31938728646,0.13843759100199998]]]

Actual:   [[[0.1652, 0.2664, 0.271, 0.1225, 0.1734, 0.339, 0.3194, 0.1385]]]

Expected: [[[0.1652, 0.2664, 0.271, 0.1225, 0.1734, 0.339, 0.3194, 0.1385]]]