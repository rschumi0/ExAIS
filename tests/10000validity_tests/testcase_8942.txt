import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave35508 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave35508 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Ave29172 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul93220 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul93220 = tf.keras.layers.Input(shape=([1, 2]))

Ave35508 = keras.layers.Average(name = 'Ave35508', )([in0Ave35508,in1Ave35508])
Res17884 = keras.layers.Reshape((2, 2), name = 'Res17884', )(Ave35508)
Ave29172 = keras.layers.AveragePooling1D(pool_size=(2), strides=(1), padding='valid', name = 'Ave29172', )(in0Ave29172)
ReL72373 = keras.layers.ReLU(max_value=7.503838663740854, negative_slope=0.23117466236786124, threshold=5.614490356847397, name = 'ReL72373', )(Ave29172)
Zer50187 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer50187', )(ReL72373)
Mul83680 = keras.layers.Multiply(name = 'Mul83680', )([Res17884,Zer50187])
Mul93220 = keras.layers.Multiply(name = 'Mul93220', )([in0Mul93220,in1Mul93220])
Zer73972 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer73972', )(Mul93220)
Ave84060 = keras.layers.Average(name = 'Ave84060', )([Mul83680,Zer73972])
model = tf.keras.models.Model(inputs=[in0Ave35508,in1Ave35508,in0Ave29172,in0Mul93220,in1Mul93220], outputs=Ave84060)
in0Ave35508 = tf.constant([[[[0.5567], [0.7945]], [[0.7118], [0.7758]]]])
in1Ave35508 = tf.constant([[[[0.4207], [0.3103]], [[0.5036], [0.8851]]]])
in0Ave29172 = tf.constant([[[1.2973, 1.2395], [1.1212, 1.5557]]])
in0Mul93220 = tf.constant([[[0.6427, 0.1062]]])
in1Mul93220 = tf.constant([[[0.8018, 0.5822]]])
print (np.array2string(model.predict([in0Ave35508,in1Ave35508,in0Ave29172,in0Mul93220,in1Mul93220],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave84060.png')

LAve35508 = average_layer([[[[[0.5567], [0.7945]], [[0.7118], [0.7758]]]], [[[[0.4207], [0.3103]], [[0.5036], [0.8851]]]]], Ave35508), 
LRes17884 = reshape_layer(Ave35508, [2, 2], Res17884), 
LAve29172 = average_pooling1D_layer([[[1.2973, 1.2395], [1.1212, 1.5557]]], 2, 1, false, Ave29172), 
LReL72373 = relu_layer(Ave29172, 7.503838663740854, 0.23117466236786124, 5.614490356847397, ReL72373), 
LZer50187 = zero_padding1D_layer(ReL72373, 1, 0, Zer50187), 
LMul83680 = multiply_layer([Res17884,Zer50187], Mul83680), 
LMul93220 = multiply_layer([[[[0.6427, 0.1062]]], [[[0.8018, 0.5822]]]], Mul93220), 
LZer73972 = zero_padding1D_layer(Mul93220, 1, 0, Zer73972), 
LAve84060 = average_layer([Mul83680,Zer73972], Ave84060), 
exec_layers([LAve35508,LRes17884,LAve29172,LReL72373,LZer50187,LMul83680,LMul93220,LZer73972,LAve84060],["Ave35508","Res17884","Ave29172","ReL72373","Zer50187","Mul83680","Mul93220","Zer73972","Ave84060"],Ave84060,"Ave84060")

Actual (Unparsed): [[[0.0000000, 0.0000000], [-0.0517763, -0.3738624]]]

Expected (Unparsed): [[[0.0,0.0],[-0.051776318458794435,-0.3738623734579015]]]

Actual:   [[[0, 0], [-0.0517, -0.3738]]]

Expected: [[[0, 0], [-0.0517, -0.3738]]]