import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub69717 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in1Sub69717 = tf.keras.layers.Input(shape=([3, 3, 2, 2]))
in0Sub78377 = tf.keras.layers.Input(shape=([2]))
in1Sub78377 = tf.keras.layers.Input(shape=([2]))
in0Con24041 = tf.keras.layers.Input(shape=([34]))
in0Ave42996 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave42996 = tf.keras.layers.Input(shape=([1, 1, 1]))

Sub69717 = keras.layers.Subtract(name = 'Sub69717', )([in0Sub69717,in1Sub69717])
Res8986 = keras.layers.Reshape((3, 3, 4), name = 'Res8986', )(Sub69717)
Res70386 = keras.layers.Reshape((3, 12), name = 'Res70386', )(Res8986)
Fla24347 = keras.layers.Flatten(name = 'Fla24347', )(Res70386)
Sub78377 = keras.layers.Subtract(name = 'Sub78377', )([in0Sub78377,in1Sub78377])
Con24041 = keras.layers.Concatenate(axis=1, name = 'Con24041', )([Sub78377,in0Con24041])
Sub17880 = keras.layers.Subtract(name = 'Sub17880', )([Fla24347,Con24041])
Res30725 = keras.layers.Reshape((36, 1), name = 'Res30725', )(Sub17880)
Sep53274 = keras.layers.SeparableConv1D(3, (5),strides=(3), padding='valid', name = 'Sep53274', )(Res30725)
Res9527 = keras.layers.Reshape((11, 3, 1), name = 'Res9527', )(Sep53274)
Ave42996 = keras.layers.Average(name = 'Ave42996', )([in0Ave42996,in1Ave42996])
Zer24691 = keras.layers.ZeroPadding2D(padding=((10, 0), (2, 0)), name = 'Zer24691', )(Ave42996)
Min45286 = keras.layers.Minimum(name = 'Min45286', )([Res9527,Zer24691])
model = tf.keras.models.Model(inputs=[in0Sub69717,in1Sub69717,in0Sub78377,in1Sub78377,in0Con24041,in0Ave42996,in1Ave42996], outputs=Min45286)
w = model.get_layer('Sep53274').get_weights() 
w[0] = np.array([[[0.543]], [[0.9499]], [[0.7247]], [[0.5017]], [[0.7629]]])
w[1] = np.array([[[0.4664, 0.6931, 0.1958]]])
w[2] = np.array([0, 0, 0])
model.get_layer('Sep53274').set_weights(w) 
in0Sub69717 = tf.constant([[[[[0.7452, 0.2075], [0.0313, 0.5037]], [[0.2169, 0.1708], [0.6054, 0.4439]], [[0.2924, 0.7234], [0.6922, 0.8009]]], [[[0.7679, 0.2594], [0.7094, 0.163]], [[0.1359, 0.9393], [0.7669, 0.9918]], [[0.5403, 0.1091], [0.8818, 0.7268]]], [[[0.9083, 0.8745], [0.8448, 0.5495]], [[0.5293, 0.914], [0.182, 0.2324]], [[0.3272, 0.7496], [0.0195, 0.662]]]]])
in1Sub69717 = tf.constant([[[[[0.0806, 0.1244], [0.5614, 0.5586]], [[0.8883, 0.8327], [0.3202, 0.6383]], [[0.2443, 0.3408], [0.2015, 0.962]]], [[[0.1937, 0.797], [0.0369, 0.4994]], [[0.1713, 0.5817], [0.1858, 0.9992]], [[0.2921, 0.3756], [0.3793, 0.101]]], [[[0.0562, 0.8338], [0.0695, 0.2501]], [[0.6625, 0.3479], [0.1624, 0.3866]], [[0.3801, 0.0464], [0.1654, 0.5627]]]]])
in0Sub78377 = tf.constant([[0.7183, 0.144]])
in1Sub78377 = tf.constant([[0.4586, 0.6186]])
in0Con24041 = tf.constant([[0.3257, 0.3178, 0.4237, 0.5917, 0.1919, 0.1655, 0.3825, 0.2188, 0.3666, 0.5579, 0.7764, 0.1254, 0.8633, 0.8877, 0.264, 0.8749, 0.2609, 0.2928, 0.3776, 0.2509, 0.5921, 0.4418, 0.2026, 0.6551, 0.5616, 0.045, 0.4015, 0.7081, 0.2107, 0.1263, 0.2564, 0.041, 0.0862, 0.1357]])
in0Ave42996 = tf.constant([[[[0.4584]]]])
in1Ave42996 = tf.constant([[[[0.979]]]])
print (np.array2string(model.predict([in0Sub69717,in1Sub69717,in0Sub78377,in1Sub78377,in0Con24041,in0Ave42996,in1Ave42996],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min45286.png')

LSub69717 = subtract_layer([[[[[0.7452, 0.2075], [0.0313, 0.5037]], [[0.2169, 0.1708], [0.6054, 0.4439]], [[0.2924, 0.7234], [0.6922, 0.8009]]], [[[0.7679, 0.2594], [0.7094, 0.163]], [[0.1359, 0.9393], [0.7669, 0.9918]], [[0.5403, 0.1091], [0.8818, 0.7268]]], [[[0.9083, 0.8745], [0.8448, 0.5495]], [[0.5293, 0.914], [0.182, 0.2324]], [[0.3272, 0.7496], [0.0195, 0.662]]]]], [[[[[0.0806, 0.1244], [0.5614, 0.5586]], [[0.8883, 0.8327], [0.3202, 0.6383]], [[0.2443, 0.3408], [0.2015, 0.962]]], [[[0.1937, 0.797], [0.0369, 0.4994]], [[0.1713, 0.5817], [0.1858, 0.9992]], [[0.2921, 0.3756], [0.3793, 0.101]]], [[[0.0562, 0.8338], [0.0695, 0.2501]], [[0.6625, 0.3479], [0.1624, 0.3866]], [[0.3801, 0.0464], [0.1654, 0.5627]]]]], Sub69717), 
LRes8986 = reshape_layer(Sub69717, [3, 3, 4], Res8986), 
LRes70386 = reshape_layer(Res8986, [3, 12], Res70386), 
LFla24347 = flatten_layer(Res70386, Fla24347), 
LSub78377 = subtract_layer([[0.7183, 0.144]], [[0.4586, 0.6186]], Sub78377), 
LCon24041 = concatenate_layer([Sub78377,[[0.3257, 0.3178, 0.4237, 0.5917, 0.1919, 0.1655, 0.3825, 0.2188, 0.3666, 0.5579, 0.7764, 0.1254, 0.8633, 0.8877, 0.264, 0.8749, 0.2609, 0.2928, 0.3776, 0.2509, 0.5921, 0.4418, 0.2026, 0.6551, 0.5616, 0.045, 0.4015, 0.7081, 0.2107, 0.1263, 0.2564, 0.041, 0.0862, 0.1357]]], 1, Con24041), 
LSub17880 = subtract_layer(Fla24347,Con24041, Sub17880), 
LRes30725 = reshape_layer(Sub17880, [36, 1], Res30725), 
LSep53274 = separable_conv1D_layer(Res30725, 5,[[[[0.543]], [[0.9499]], [[0.7247]], [[0.5017]], [[0.7629]]],[[[0.4664, 0.6931, 0.1958]]]],[0, 0, 0], 3, false, Sep53274), 
LRes9527 = reshape_layer(Sep53274, [11, 3, 1], Res9527), 
LAve42996 = average_layer([[[[[0.4584]]]], [[[[0.979]]]]], Ave42996), 
LZer24691 = zero_padding2D_layer(Ave42996, 10, 0, 2, 0, Zer24691), 
LMin45286 = minimum_layer([Res9527,Zer24691], Min45286), 
exec_layers([LSub69717,LRes8986,LRes70386,LFla24347,LSub78377,LCon24041,LSub17880,LRes30725,LSep53274,LRes9527,LAve42996,LZer24691,LMin45286],["Sub69717","Res8986","Res70386","Fla24347","Sub78377","Con24041","Sub17880","Res30725","Sep53274","Res9527","Ave42996","Zer24691","Min45286"],Min45286,"Min45286")

Actual (Unparsed): [[[[-0.4165016], [-0.6189478], [-0.1748521]], [[-1.1094978], [-1.6487841], [-0.4657797]], [[-0.1663613], [-0.2472235], [-0.0698404]], [[-0.4297782], [-0.6386776], [-0.1804257]], [[-0.8023919], [-1.1924053], [-0.3368532]], [[-0.6493929], [-0.9650391], [-0.2726225]], [[-0.2485926], [-0.3694244], [-0.1043620]], [[-0.1751734], [-0.2603187], [-0.0735398]], [[-0.1662072], [-0.2469944], [-0.0697757]], [[-0.3649804], [-0.5423841], [-0.1532229]], [[-0.2048463], [-0.3044146], [-0.0859968]]]]

Expected (Unparsed): [[[[-0.416501594344],[-0.6189478024010002],[-0.17485208441800004]],[[-1.109497790104],[-1.648784130191],[-0.465779732638]],[[-0.16636135401599997],[-0.24722353016399992],[-0.06984037975199998]],[[-0.4297781554],[-0.6386776147250001],[-0.18042573504999998]],[[-0.802391896856],[-1.1924052823990001],[-0.336853201982]],[[-0.649392930824],[-0.9650391088210001],[-0.27262250397800003]],[[-0.24859258987199997],[-0.369424365438],[-0.10436198348399998]],[[-0.17517333371999996],[-0.260318691255],[-0.07353974859]],[[-0.16620715284799992],[-0.24699437744199987],[-0.06977564435599998]],[[-0.3649804105199999],[-0.5423840534549998],[-0.15322290818999995]],[[-0.204846289384],[-0.304414586561],[-0.085996791298]]]]

Actual:   [[[[-0.4165], [-0.6189], [-0.1748]], [[-1.1094], [-1.6487], [-0.4657]], [[-0.1663], [-0.2472], [-0.0698]], [[-0.4297], [-0.6386], [-0.1804]], [[-0.8023], [-1.1924], [-0.3368]], [[-0.6493], [-0.965], [-0.2726]], [[-0.2485], [-0.3694], [-0.1043]], [[-0.1751], [-0.2603], [-0.0735]], [[-0.1662], [-0.2469], [-0.0697]], [[-0.3649], [-0.5423], [-0.1532]], [[-0.2048], [-0.3044], [-0.0859]]]]

Expected: [[[[-0.4165], [-0.6189], [-0.1748]], [[-1.1094], [-1.6487], [-0.4657]], [[-0.1663], [-0.2472], [-0.0698]], [[-0.4297], [-0.6386], [-0.1804]], [[-0.8023], [-1.1924], [-0.3368]], [[-0.6493], [-0.965], [-0.2726]], [[-0.2485], [-0.3694], [-0.1043]], [[-0.1751], [-0.2603], [-0.0735]], [[-0.1662], [-0.2469], [-0.0697]], [[-0.3649], [-0.5423], [-0.1532]], [[-0.2048], [-0.3044], [-0.0859]]]]