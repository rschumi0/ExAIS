import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add72885 = tf.keras.layers.Input(shape=([1, 2]))
in1Add72885 = tf.keras.layers.Input(shape=([1, 2]))
in0Max4414 = tf.keras.layers.Input(shape=([2, 2]))
in0Cro76615 = tf.keras.layers.Input(shape=([4, 3, 1]))

Add72885 = keras.layers.Add(name = 'Add72885', )([in0Add72885,in1Add72885])
Res63238 = keras.layers.Reshape((1, 2, 1), name = 'Res63238', )(Add72885)
Zer16551 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer16551', )(Res63238)
Max4414 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max4414', )(in0Max4414)
Res47789 = keras.layers.Reshape((2, 2, 1), name = 'Res47789', )(Max4414)
Cro76615 = keras.layers.Cropping2D(cropping=((3, 0), (0, 2)), name = 'Cro76615', )(in0Cro76615)
Zer24167 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer24167', )(Cro76615)
Min69234 = keras.layers.Minimum(name = 'Min69234', )([Res47789,Zer24167])
Ave718 = keras.layers.Average(name = 'Ave718', )([Zer16551,Min69234])
model = tf.keras.models.Model(inputs=[in0Add72885,in1Add72885,in0Max4414,in0Cro76615], outputs=Ave718)
in0Add72885 = tf.constant([[[0.2293, 0.7658]]])
in1Add72885 = tf.constant([[[0.6883, 0.0604]]])
in0Max4414 = tf.constant([[[1.7827, 1.4405], [1.8773, 1.5999]]])
in0Cro76615 = tf.constant([[[[1.5701], [1.1797], [1.8323]], [[1.9949], [1.3774], [1.5164]], [[1.6245], [1.9955], [1.6739]], [[1.6686], [1.8179], [1.6563]]]])
print (np.array2string(model.predict([in0Add72885,in1Add72885,in0Max4414,in0Cro76615],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave718.png')

LAdd72885 = add_layer([[[[0.2293, 0.7658]]], [[[0.6883, 0.0604]]]], Add72885), 
LRes63238 = reshape_layer(Add72885, [1, 2, 1], Res63238), 
LZer16551 = zero_padding2D_layer(Res63238, 1, 0, 0, 0, Zer16551), 
LMax4414 = max_pool1D_layer([[[1.7827, 1.4405], [1.8773, 1.5999]]], 1, Max4414), 
LRes47789 = reshape_layer(Max4414, [2, 2, 1], Res47789), 
LCro76615 = cropping2D_layer([[[[1.5701], [1.1797], [1.8323]], [[1.9949], [1.3774], [1.5164]], [[1.6245], [1.9955], [1.6739]], [[1.6686], [1.8179], [1.6563]]]], 3, 0, 0, 2, Cro76615), 
LZer24167 = zero_padding2D_layer(Cro76615, 1, 0, 1, 0, Zer24167), 
LMin69234 = minimum_layer([Res47789,Zer24167], Min69234), 
LAve718 = average_layer([Zer16551,Min69234], Ave718), 
exec_layers([LAdd72885,LRes63238,LZer16551,LMax4414,LRes47789,LCro76615,LZer24167,LMin69234,LAve718],["Add72885","Res63238","Zer16551","Max4414","Res47789","Cro76615","Zer24167","Min69234","Ave718"],Ave718,"Ave718")

Actual (Unparsed): [[[[0.0000000], [0.0000000]], [[0.4588000], [1.2130500]]]]

Expected (Unparsed): [[[[0],[0]],[[0.4588],[1.21305]]]]

Actual:   [[[[0], [0]], [[0.4588], [1.2131]]]]

Expected: [[[[0], [0]], [[0.4588], [1.2131]]]]