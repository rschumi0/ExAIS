import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max37461 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul49913 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Mul49913 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Max37461 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max37461', )(in0Max37461)
Res1919 = keras.layers.Reshape((2, 2, 1), name = 'Res1919', )(Max37461)
Res49123 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res49123', )(Res1919)
Mul49913 = keras.layers.Multiply(name = 'Mul49913', )([in0Mul49913,in1Mul49913])
Zer75893 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer75893', )(Mul49913)
Ave8404 = keras.layers.Average(name = 'Ave8404', )([Res49123,Zer75893])
Sof68377 = keras.layers.Softmax(axis=1, name = 'Sof68377', )(Ave8404)
Lay77375 = keras.layers.LayerNormalization(axis=1, epsilon=1.1262651957661551, name = 'Lay77375', )(Sof68377)
Res36733 = keras.layers.Reshape((2, 2, 1), name = 'Res36733', )(Lay77375)
Res92828 = keras.layers.Reshape((2, 2), name = 'Res92828', )(Res36733)
Glo55550 = keras.layers.GlobalAveragePooling1D(name = 'Glo55550', )(Res92828)
model = tf.keras.models.Model(inputs=[in0Max37461,in0Mul49913,in1Mul49913], outputs=Glo55550)
in0Max37461 = tf.constant([[[1.9278, 1.9403], [1.9218, 1.149]]])
in0Mul49913 = tf.constant([[[[[0.9603]]], [[[0.9782]]]]])
in1Mul49913 = tf.constant([[[[[0.079]]], [[[0.4748]]]]])
print (np.array2string(model.predict([in0Max37461,in0Mul49913,in1Mul49913],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo55550.png')

LMax37461 = max_pool1D_layer([[[1.9278, 1.9403], [1.9218, 1.149]]], 1, Max37461), 
LRes1919 = reshape_layer(Max37461, [2, 2, 1], Res1919), 
LRes49123 = reshape_layer(Res1919, [2, 2, 1, 1], Res49123), 
LMul49913 = multiply_layer([[[[[[0.9603]]], [[[0.9782]]]]], [[[[[0.079]]], [[[0.4748]]]]]], Mul49913), 
LZer75893 = zero_padding3D_layer(Mul49913, 0, 0, 1, 0, 0, 0, Zer75893), 
LAve8404 = average_layer([Res49123,Zer75893], Ave8404), 
LSof68377 = softmax_layer(Ave8404, 1, Sof68377), 
LLay77375 = layer_normalization_layer(Sof68377, 1, 1.1262651957661551, Lay77375), 
LRes36733 = reshape_layer(Lay77375, [2, 2, 1], Res36733), 
LRes92828 = reshape_layer(Res36733, [2, 2], Res92828), 
LGlo55550 = global_average_pooling1D_layer(Res92828, Glo55550), 
exec_layers([LMax37461,LRes1919,LRes49123,LMul49913,LZer75893,LAve8404,LSof68377,LLay77375,LRes36733,LRes92828,LGlo55550],["Max37461","Res1919","Res49123","Mul49913","Zer75893","Ave8404","Sof68377","Lay77375","Res36733","Res92828","Glo55550"],Glo55550,"Glo55550")

Actual (Unparsed): [[0.0000000, 0.0000000]]

Expected (Unparsed): [[0.0,5.204170427930421e-17]]

Actual:   [[0, 0]]

Expected: [[0, 0]]