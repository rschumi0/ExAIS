import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max2452 = tf.keras.layers.Input(shape=([2, 1]))
in1Max2452 = tf.keras.layers.Input(shape=([2, 1]))
in0Ave52950 = tf.keras.layers.Input(shape=([2, 2]))
in1Ave52950 = tf.keras.layers.Input(shape=([2, 2]))

Max2452 = keras.layers.Maximum(name = 'Max2452', )([in0Max2452,in1Max2452])
Res79181 = keras.layers.Reshape((2, 1, 1), name = 'Res79181', )(Max2452)
Zer73809 = keras.layers.ZeroPadding2D(padding=((2, 0), (7, 0)), name = 'Zer73809', )(Res79181)
Ave52950 = keras.layers.Average(name = 'Ave52950', )([in0Ave52950,in1Ave52950])
Res90025 = keras.layers.Reshape((2, 2, 1), name = 'Res90025', )(Ave52950)
Zer73508 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer73508', )(Res90025)
Up_29835 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_29835', )(Zer73508)
Sub92130 = keras.layers.Subtract(name = 'Sub92130', )([Zer73809,Up_29835])
Glo41642 = keras.layers.GlobalMaxPool2D(name = 'Glo41642', )(Sub92130)
model = tf.keras.models.Model(inputs=[in0Max2452,in1Max2452,in0Ave52950,in1Ave52950], outputs=Glo41642)
in0Max2452 = tf.constant([[[0.5478], [0.3459]]])
in1Max2452 = tf.constant([[[0.2163], [0.5526]]])
in0Ave52950 = tf.constant([[[0.9569, 0.9875], [0.228, 0.4112]]])
in1Ave52950 = tf.constant([[[0.3308, 0.1199], [0.2385, 0.2628]]])
print (np.array2string(model.predict([in0Max2452,in1Max2452,in0Ave52950,in1Ave52950],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo41642.png')

LMax2452 = maximum_layer([[[[0.5478], [0.3459]]], [[[0.2163], [0.5526]]]], Max2452), 
LRes79181 = reshape_layer(Max2452, [2, 1, 1], Res79181), 
LZer73809 = zero_padding2D_layer(Res79181, 2, 0, 7, 0, Zer73809), 
LAve52950 = average_layer([[[[0.9569, 0.9875], [0.228, 0.4112]]], [[[0.3308, 0.1199], [0.2385, 0.2628]]]], Ave52950), 
LRes90025 = reshape_layer(Ave52950, [2, 2, 1], Res90025), 
LZer73508 = zero_padding2D_layer(Res90025, 1, 1, 1, 1, Zer73508), 
LUp_29835 = up_sampling2D_layer(Zer73508, 1, 2, Up_29835), 
LSub92130 = subtract_layer(Zer73809,Up_29835, Sub92130), 
LGlo41642 = global_max_pool2D_layer(Sub92130, Glo41642), 
exec_layers([LMax2452,LRes79181,LZer73809,LAve52950,LRes90025,LZer73508,LUp_29835,LSub92130,LGlo41642],["Max2452","Res79181","Zer73809","Ave52950","Res90025","Zer73508","Up_29835","Sub92130","Glo41642"],Glo41642,"Glo41642")

Actual (Unparsed): [[0.5526000]]

Expected (Unparsed): [[0.5526]]

Actual:   [[0.5526]]

Expected: [[0.5526]]