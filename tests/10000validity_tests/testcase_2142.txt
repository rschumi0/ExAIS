import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave2138 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave2138 = tf.keras.layers.Input(shape=([2, 2, 1]))

Ave2138 = keras.layers.Average(name = 'Ave2138', )([in0Ave2138,in1Ave2138])
Res70238 = keras.layers.Reshape((2, 2), name = 'Res70238', )(Ave2138)
Con53972 = keras.layers.Conv1D(3, (1),strides=(11), padding='valid', dilation_rate=(1), name = 'Con53972', )(Res70238)
model = tf.keras.models.Model(inputs=[in0Ave2138,in1Ave2138], outputs=Con53972)
w = model.get_layer('Con53972').get_weights() 
w[0] = np.array([[[0.4748, 0.3546, 0.0774], [0.9856, 0.5665, 0.1328]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con53972').set_weights(w) 
in0Ave2138 = tf.constant([[[[0.762], [0.5402]], [[0.0244], [0.9967]]]])
in1Ave2138 = tf.constant([[[[0.6409], [0.8279]], [[0.0588], [0.2131]]]])
print (np.array2string(model.predict([in0Ave2138,in1Ave2138],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con53972.png')

LAve2138 = average_layer([[[[[0.762], [0.5402]], [[0.0244], [0.9967]]]], [[[[0.6409], [0.8279]], [[0.0588], [0.2131]]]]], Ave2138), 
LRes70238 = reshape_layer(Ave2138, [2, 2], Res70238), 
LCon53972 = conv1D_layer(Res70238, 1,[[[0.4748, 0.3546, 0.0774], [0.9856, 0.5665, 0.1328]]],[0, 0, 0], 11, false, 1, Con53972), 
exec_layers([LAve2138,LRes70238,LCon53972],["Ave2138","Res70238","Con53972"],Con53972,"Con53972")

Actual (Unparsed): [[[1.0072481, 0.6362485, 0.1451341]]]

Expected (Unparsed): [[[1.0072481400000002,0.636248495,0.14513407]]]

Actual:   [[[1.0073, 0.6363, 0.1452]]]

Expected: [[[1.0073, 0.6363, 0.1452]]]