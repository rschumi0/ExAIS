import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add74074 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Add74074 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Con62269 = tf.keras.layers.Input(shape=([1]))
in0ELU72512 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Glo18362 = tf.keras.layers.Input(shape=([2, 1]))
in0Con17554 = tf.keras.layers.Input(shape=([1]))

Add74074 = keras.layers.Add(name = 'Add74074', )([in0Add74074,in1Add74074])
Res46839 = keras.layers.Reshape((1, 1, 1), name = 'Res46839', )(Add74074)
Res57167 = keras.layers.Reshape((1, 1), name = 'Res57167', )(Res46839)
Fla72805 = keras.layers.Flatten(name = 'Fla72805', )(Res57167)
Con62269 = keras.layers.Concatenate(axis=1, name = 'Con62269', )([Fla72805,in0Con62269])
ELU72512 = keras.layers.ELU(alpha=-7.603061138920156, name = 'ELU72512', input_shape=(1, 1, 2, 1))(in0ELU72512)
Res79884 = keras.layers.Reshape((1, 1, 2), name = 'Res79884', )(ELU72512)
Res62351 = keras.layers.Reshape((1, 2), name = 'Res62351', )(Res79884)
Fla65593 = keras.layers.Flatten(name = 'Fla65593', )(Res62351)
Glo18362 = keras.layers.GlobalMaxPool1D(name = 'Glo18362', )(in0Glo18362)
Con17554 = keras.layers.Concatenate(axis=1, name = 'Con17554', )([Glo18362,in0Con17554])
Add78735 = keras.layers.Add(name = 'Add78735', )([Fla65593,Con17554])
Add22516 = keras.layers.Add(name = 'Add22516', )([Con62269,Add78735])
Res61436 = keras.layers.Reshape((2, 1), name = 'Res61436', )(Add22516)
LST12843 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST12843', )(Res61436)
model = tf.keras.models.Model(inputs=[in0Add74074,in1Add74074,in0Con62269,in0ELU72512,in0Glo18362,in0Con17554], outputs=LST12843)
w = model.get_layer('LST12843').get_weights() 
w[0] = np.array([[10, 3, 4, 6]])
w[1] = np.array([[1, 3, 4, 8]])
w[2] = np.array([10, 1, 5, 2])
model.get_layer('LST12843').set_weights(w) 
in0Add74074 = tf.constant([[[[[0.4044]]]]])
in1Add74074 = tf.constant([[[[[0.5975]]]]])
in0Con62269 = tf.constant([[0.6696]])
in0ELU72512 = tf.constant([[[[[0.997], [0.2832]]]]])
in0Glo18362 = tf.constant([[[1.4741], [1.1254]]])
in0Con17554 = tf.constant([[0.3809]])
print (np.array2string(model.predict([in0Add74074,in1Add74074,in0Con62269,in0ELU72512,in0Glo18362,in0Con17554],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='LST12843.png')

LAdd74074 = add_layer([[[[[[0.4044]]]]], [[[[[0.5975]]]]]], Add74074), 
LRes46839 = reshape_layer(Add74074, [1, 1, 1], Res46839), 
LRes57167 = reshape_layer(Res46839, [1, 1], Res57167), 
LFla72805 = flatten_layer(Res57167, Fla72805), 
LCon62269 = concatenate_layer([Fla72805,[[0.6696]]], 1, Con62269), 
LELU72512 = elu_layer([[[[[0.997], [0.2832]]]]], -7.603061138920156, ELU72512), 
LRes79884 = reshape_layer(ELU72512, [1, 1, 2], Res79884), 
LRes62351 = reshape_layer(Res79884, [1, 2], Res62351), 
LFla65593 = flatten_layer(Res62351, Fla65593), 
LGlo18362 = global_max_pool1D_layer([[[1.4741], [1.1254]]], Glo18362), 
LCon17554 = concatenate_layer([Glo18362,[[0.3809]]], 1, Con17554), 
LAdd78735 = add_layer([Fla65593,Con17554], Add78735), 
LAdd22516 = add_layer([Con62269,Add78735], Add22516), 
LRes61436 = reshape_layer(Add22516, [2, 1], Res61436), 
LLST12843 = lstm_layer(Res61436,[[10, 3, 4, 6]],[[1, 3, 4, 8]],[10, 1, 5, 2], LST12843), 
exec_layers([LAdd74074,LRes46839,LRes57167,LFla72805,LCon62269,LELU72512,LRes79884,LRes62351,LFla65593,LGlo18362,LCon17554,LAdd78735,LAdd22516,LRes61436,LLST12843],["Add74074","Res46839","Res57167","Fla72805","Con62269","ELU72512","Res79884","Res62351","Fla65593","Glo18362","Con17554","Add78735","Add22516","Res61436","LST12843"],LST12843,"LST12843")

Actual (Unparsed): [[0.9639791]]

Expected (Unparsed): [[0.9639790766758128]]

Actual:   [[0.964]]

Expected: [[0.964]]