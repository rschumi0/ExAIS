import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min42645 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Min42645 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Max82327 = tf.keras.layers.Input(shape=([2, 2]))
in1Max82327 = tf.keras.layers.Input(shape=([2, 2]))
in0Cro28677 = tf.keras.layers.Input(shape=([4, 2, 4, 1]))
in0Con23544 = tf.keras.layers.Input(shape=([4, 15]))
in0Zer59003 = tf.keras.layers.Input(shape=([3, 1, 4, 1]))

Min42645 = keras.layers.Minimum(name = 'Min42645', )([in0Min42645,in1Min42645])
Up_54610 = keras.layers.UpSampling2D(size=(1, 2), name = 'Up_54610', )(Min42645)
Res87407 = keras.layers.Reshape((1, 2), name = 'Res87407', )(Up_54610)
Zer49995 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer49995', )(Res87407)
Max82327 = keras.layers.Maximum(name = 'Max82327', )([in0Max82327,in1Max82327])
Ave35370 = keras.layers.Average(name = 'Ave35370', )([Zer49995,Max82327])
Res44455 = keras.layers.Reshape((2, 2, 1), name = 'Res44455', )(Ave35370)
Res43645 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res43645', )(Res44455)
Zer30179 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer30179', )(Res43645)
Cro28677 = keras.layers.Cropping3D(cropping=((0, 1), (1, 0), (2, 1)), name = 'Cro28677', )(in0Cro28677)
Zer22406 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (0, 0)), name = 'Zer22406', )(Cro28677)
Max90769 = keras.layers.Maximum(name = 'Max90769', )([Zer30179,Zer22406])
Res2014 = keras.layers.Reshape((3, 3, 1), name = 'Res2014', )(Max90769)
Res98331 = keras.layers.Reshape((3, 3), name = 'Res98331', )(Res2014)
Zer27738 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer27738', )(Res98331)
Con23544 = keras.layers.Concatenate(axis=2, name = 'Con23544', )([Zer27738,in0Con23544])
Zer59003 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer59003', )(in0Zer59003)
Res87445 = keras.layers.Reshape((5, 3, 6), name = 'Res87445', )(Zer59003)
Res21691 = keras.layers.Reshape((5, 18), name = 'Res21691', )(Res87445)
Ave49628 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave49628', )(Res21691)
Dot88682 = keras.layers.Dot(axes=(2, 2), name = 'Dot88682', )([Con23544,Ave49628])
model = tf.keras.models.Model(inputs=[in0Min42645,in1Min42645,in0Max82327,in1Max82327,in0Cro28677,in0Con23544,in0Zer59003], outputs=Dot88682)
in0Min42645 = tf.constant([[[[0.9602]]]])
in1Min42645 = tf.constant([[[[0.1375]]]])
in0Max82327 = tf.constant([[[0.1509, 0.2909], [0.9566, 0.2324]]])
in1Max82327 = tf.constant([[[0.2913, 0.3381], [0.7693, 0.0054]]])
in0Cro28677 = tf.constant([[[[[1.4379], [1.6976], [1.2293], [1.0239]], [[1.9829], [1.3823], [1.0685], [1.7616]]], [[[1.487], [1.4774], [1.3131], [1.7201]], [[1.2122], [1.5405], [1.7499], [1.1327]]], [[[1.3529], [1.2524], [1.0872], [1.199]], [[1.2069], [1.7783], [1.4949], [1.9607]]], [[[1.3608], [1.8592], [1.0531], [1.1267]], [[1.0701], [1.7396], [1.2657], [1.3848]]]]])
in0Con23544 = tf.constant([[[0.8697, 0.9217, 0.0291, 0.0943, 0.5694, 0.9396, 0.5688, 0.9108, 0.5823, 0.6067, 0.9402, 0.237, 0.3367, 0.794, 0.5545], [0.9559, 0.0959, 0.5318, 0.0742, 0.9402, 0.7471, 0.4761, 0.934, 0.3621, 0.4586, 0.1264, 0.9795, 0.2556, 0.7358, 0.3324], [0.0254, 0.6763, 0.6787, 0.5296, 0.4877, 0.9089, 0.9185, 0.7035, 0.4937, 0.436, 0.7956, 0.3005, 0.0399, 0.8011, 0.8284], [0.1705, 0.8308, 0.0729, 0.4206, 0.1601, 0.4095, 0.3506, 0.054, 0.156, 0.0674, 0.6368, 0.9225, 0.2212, 0.8083, 0.4479]]])
in0Zer59003 = tf.constant([[[[[1.4085], [1.6539], [1.2001], [1.9923]]], [[[1.4343], [1.7456], [1.0064], [1.7314]]], [[[1.5732], [1.9727], [1.5354], [1.635]]]]])
print (np.array2string(model.predict([in0Min42645,in1Min42645,in0Max82327,in1Max82327,in0Cro28677,in0Con23544,in0Zer59003],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot88682.png')

LMin42645 = minimum_layer([[[[[0.9602]]]], [[[[0.1375]]]]], Min42645), 
LUp_54610 = up_sampling2D_layer(Min42645, 1, 2, Up_54610), 
LRes87407 = reshape_layer(Up_54610, [1, 2], Res87407), 
LZer49995 = zero_padding1D_layer(Res87407, 1, 0, Zer49995), 
LMax82327 = maximum_layer([[[[0.1509, 0.2909], [0.9566, 0.2324]]], [[[0.2913, 0.3381], [0.7693, 0.0054]]]], Max82327), 
LAve35370 = average_layer([Zer49995,Max82327], Ave35370), 
LRes44455 = reshape_layer(Ave35370, [2, 2, 1], Res44455), 
LRes43645 = reshape_layer(Res44455, [2, 2, 1, 1], Res43645), 
LZer30179 = zero_padding3D_layer(Res43645, 1, 0, 1, 0, 0, 0, Zer30179), 
LCro28677 = cropping3D_layer([[[[[1.4379], [1.6976], [1.2293], [1.0239]], [[1.9829], [1.3823], [1.0685], [1.7616]]], [[[1.487], [1.4774], [1.3131], [1.7201]], [[1.2122], [1.5405], [1.7499], [1.1327]]], [[[1.3529], [1.2524], [1.0872], [1.199]], [[1.2069], [1.7783], [1.4949], [1.9607]]], [[[1.3608], [1.8592], [1.0531], [1.1267]], [[1.0701], [1.7396], [1.2657], [1.3848]]]]], 0, 1, 1, 0, 2, 1, Cro28677), 
LZer22406 = zero_padding3D_layer(Cro28677, 0, 0, 2, 0, 0, 0, Zer22406), 
LMax90769 = maximum_layer([Zer30179,Zer22406], Max90769), 
LRes2014 = reshape_layer(Max90769, [3, 3, 1], Res2014), 
LRes98331 = reshape_layer(Res2014, [3, 3], Res98331), 
LZer27738 = zero_padding1D_layer(Res98331, 1, 0, Zer27738), 
LCon23544 = concatenate_layer([Zer27738,[[[0.8697, 0.9217, 0.0291, 0.0943, 0.5694, 0.9396, 0.5688, 0.9108, 0.5823, 0.6067, 0.9402, 0.237, 0.3367, 0.794, 0.5545], [0.9559, 0.0959, 0.5318, 0.0742, 0.9402, 0.7471, 0.4761, 0.934, 0.3621, 0.4586, 0.1264, 0.9795, 0.2556, 0.7358, 0.3324], [0.0254, 0.6763, 0.6787, 0.5296, 0.4877, 0.9089, 0.9185, 0.7035, 0.4937, 0.436, 0.7956, 0.3005, 0.0399, 0.8011, 0.8284], [0.1705, 0.8308, 0.0729, 0.4206, 0.1601, 0.4095, 0.3506, 0.054, 0.156, 0.0674, 0.6368, 0.9225, 0.2212, 0.8083, 0.4479]]]], 2, Con23544), 
LZer59003 = zero_padding3D_layer([[[[[1.4085], [1.6539], [1.2001], [1.9923]]], [[[1.4343], [1.7456], [1.0064], [1.7314]]], [[[1.5732], [1.9727], [1.5354], [1.635]]]]], 1, 1, 1, 1, 1, 1, Zer59003), 
LRes87445 = reshape_layer(Zer59003, [5, 3, 6], Res87445), 
LRes21691 = reshape_layer(Res87445, [5, 18], Res21691), 
LAve49628 = average_pooling1D_layer(Res21691, 2, Ave49628), 
LDot88682 = dot_layer(Con23544,Ave49628, 2, 2, Dot88682), 
exec_layers([LMin42645,LUp_54610,LRes87407,LZer49995,LMax82327,LAve35370,LRes44455,LRes43645,LZer30179,LCro28677,LZer22406,LMax90769,LRes2014,LRes98331,LZer27738,LCon23544,LZer59003,LRes87445,LRes21691,LAve49628,LDot88682],["Min42645","Up_54610","Res87407","Zer49995","Max82327","Ave35370","Res44455","Res43645","Zer30179","Cro28677","Zer22406","Max90769","Res2014","Res98331","Zer27738","Con23544","Zer59003","Res87445","Res21691","Ave49628","Dot88682"],Dot88682,"Dot88682")

Actual (Unparsed): [[[2.4266040, 4.8590390], [2.4960381, 4.9799809], [2.3470150, 4.7746131], [0.7155561, 1.5385426]]]

Expected (Unparsed): [[[2.42660403,4.85903907],[2.4960381000000003,4.979981005],[2.34701503,4.7746131599999995],[0.7155560799999999,1.5385426400000002]]]

Actual:   [[[2.4267, 4.8591], [2.4961, 4.98], [2.3471, 4.7747], [0.7156, 1.5386]]]

Expected: [[[2.4267, 4.8591], [2.4961, 4.98], [2.3471, 4.7747], [0.7156, 1.5386]]]