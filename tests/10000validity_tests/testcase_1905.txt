import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer16935 = tf.keras.layers.Input(shape=([3, 1]))
in0GRU11705 = tf.keras.layers.Input(shape=([3, 1]))
in0Con39510 = tf.keras.layers.Input(shape=([2]))

Zer16935 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer16935', )(in0Zer16935)
Fla67696 = keras.layers.Flatten(name = 'Fla67696', )(Zer16935)
GRU11705 = keras.layers.GRU(3,reset_after=False, recurrent_activation='sigmoid', name = 'GRU11705', )(in0GRU11705)
Con39510 = keras.layers.Concatenate(axis=1, name = 'Con39510', )([GRU11705,in0Con39510])
Add32403 = keras.layers.Add(name = 'Add32403', )([Fla67696,Con39510])
Res93962 = keras.layers.Reshape((5, 1), name = 'Res93962', )(Add32403)
Res45935 = keras.layers.Reshape((5, 1, 1), name = 'Res45935', )(Res93962)
Res58726 = keras.layers.Reshape((5, 1, 1, 1), name = 'Res58726', )(Res45935)
Zer62343 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer62343', )(Res58726)
model = tf.keras.models.Model(inputs=[in0Zer16935,in0GRU11705,in0Con39510], outputs=Zer62343)
w = model.get_layer('GRU11705').get_weights() 
w[0] = np.array([[3, 4, 2, 1, 1, 3, 3, 6, 5]])
w[1] = np.array([[10, 6, 6, 9, 5, 9, 2, 1, 3], [4, 1, 2, 2, 2, 6, 9, 4, 5], [6, 3, 7, 2, 9, 8, 2, 4, 9]])
w[2] = np.array([8, 9, 10, 5, 5, 6, 6, 10, 1])
model.get_layer('GRU11705').set_weights(w) 
in0Zer16935 = tf.constant([[[1.4837], [1.7692], [1.3787]]])
in0GRU11705 = tf.constant([[[2], [4], [6]]])
in0Con39510 = tf.constant([[0.1094, 0.8307]])
print (np.array2string(model.predict([in0Zer16935,in0GRU11705,in0Con39510],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Zer62343.png')

LZer16935 = zero_padding1D_layer([[[1.4837], [1.7692], [1.3787]]], 1, 1, Zer16935), 
LFla67696 = flatten_layer(Zer16935, Fla67696), 
LGRU11705 = gru_layer([[[2], [4], [6]]],[[3, 4, 2, 1, 1, 3, 3, 6, 5]],[[10, 6, 6, 9, 5, 9, 2, 1, 3], [4, 1, 2, 2, 2, 6, 9, 4, 5], [6, 3, 7, 2, 9, 8, 2, 4, 9]],[8, 9, 10, 5, 5, 6, 6, 10, 1], false, GRU11705), 
LCon39510 = concatenate_layer([GRU11705,[[0.1094, 0.8307]]], 1, Con39510), 
LAdd32403 = add_layer([Fla67696,Con39510], Add32403), 
LRes93962 = reshape_layer(Add32403, [5, 1], Res93962), 
LRes45935 = reshape_layer(Res93962, [5, 1, 1], Res45935), 
LRes58726 = reshape_layer(Res45935, [5, 1, 1, 1], Res58726), 
LZer62343 = zero_padding3D_layer(Res58726, 1, 1, 1, 1, 1, 1, Zer62343), 
exec_layers([LZer16935,LFla67696,LGRU11705,LCon39510,LAdd32403,LRes93962,LRes45935,LRes58726,LZer62343],["Zer16935","Fla67696","GRU11705","Con39510","Add32403","Res93962","Res45935","Res58726","Zer62343"],Zer62343,"Zer62343")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000008], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.4837001], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.7692008], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [1.4881000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.8307000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[8.335942609470737e-7],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.483700041413268],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.769200847036772],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[1.4881],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.8307],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.4838], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.7693], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.4881], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.8307], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.4838], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.7693], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [1.4881], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.8307], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]]]]