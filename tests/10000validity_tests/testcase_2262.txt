import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo14951 = tf.keras.layers.Input(shape=([2, 1]))

Glo14951 = keras.layers.GlobalAveragePooling1D(name = 'Glo14951', )(in0Glo14951)
Res44688 = keras.layers.Reshape((1, 1), name = 'Res44688', )(Glo14951)
Res34875 = keras.layers.Reshape((1, 1, 1), name = 'Res34875', )(Res44688)
Res92294 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res92294', )(Res34875)
Con51481 = keras.layers.Conv3D(4, (1, 1, 1),strides=(1, 1, 10), padding='same', dilation_rate=(1, 1, 1), name = 'Con51481', )(Res92294)
Res37837 = keras.layers.Reshape((1, 1, 4), name = 'Res37837', )(Con51481)
Ave82123 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave82123', )(Res37837)
Res24670 = keras.layers.Reshape((1, 4), name = 'Res24670', )(Ave82123)
Max81139 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max81139', )(Res24670)
model = tf.keras.models.Model(inputs=[in0Glo14951], outputs=Max81139)
w = model.get_layer('Con51481').get_weights() 
w[0] = np.array([[[[[0.2587, 0.1521, 0.2859, 0.5819]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con51481').set_weights(w) 
in0Glo14951 = tf.constant([[[1.6532], [1.368]]])
print (np.array2string(model.predict([in0Glo14951],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max81139.png')

LGlo14951 = global_average_pooling1D_layer([[[1.6532], [1.368]]], Glo14951), 
LRes44688 = reshape_layer(Glo14951, [1, 1], Res44688), 
LRes34875 = reshape_layer(Res44688, [1, 1, 1], Res34875), 
LRes92294 = reshape_layer(Res34875, [1, 1, 1, 1], Res92294), 
LCon51481 = conv3D_layer(Res92294, 1, 1, 1,[[[[[0.2587, 0.1521, 0.2859, 0.5819]]]]],[0, 0, 0, 0], 1, 1, 10, true, 1, 1, 1, Con51481), 
LRes37837 = reshape_layer(Con51481, [1, 1, 4], Res37837), 
LAve82123 = average_pooling2D_layer(Res37837, 1, 1, Ave82123), 
LRes24670 = reshape_layer(Ave82123, [1, 4], Res24670), 
LMax81139 = max_pool1D_layer(Res24670, 1, 1, false, Max81139), 
exec_layers([LGlo14951,LRes44688,LRes34875,LRes92294,LCon51481,LRes37837,LAve82123,LRes24670,LMax81139],["Glo14951","Res44688","Res34875","Res92294","Con51481","Res37837","Ave82123","Res24670","Max81139"],Max81139,"Max81139")

Actual (Unparsed): [[[0.3907922, 0.2297623, 0.4318805, 0.8790182]]]

Expected (Unparsed): [[[0.39079222,0.22976226000000005,0.43188054000000003,0.87901814]]]

Actual:   [[[0.3908, 0.2298, 0.4319, 0.8791]]]

Expected: [[[0.3908, 0.2298, 0.4319, 0.8791]]]