import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro79243 = tf.keras.layers.Input(shape=([2, 4, 2]))
in0Con42655 = tf.keras.layers.Input(shape=([2]))
in0Min80465 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Min80465 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Cro79243 = keras.layers.Cropping2D(cropping=((0, 1), (3, 0)), name = 'Cro79243', )(in0Cro79243)
Lea13417 = keras.layers.LeakyReLU(alpha=8.869189624821287, name = 'Lea13417', )(Cro79243)
Res62456 = keras.layers.Reshape((1, 2), name = 'Res62456', )(Lea13417)
Per15992 = keras.layers.Permute((1,2), name = 'Per15992',)(Res62456)
Fla58662 = keras.layers.Flatten(name = 'Fla58662', )(Per15992)
Con42655 = keras.layers.Concatenate(axis=1, name = 'Con42655', )([Fla58662,in0Con42655])
Min80465 = keras.layers.Minimum(name = 'Min80465', )([in0Min80465,in1Min80465])
Res43693 = keras.layers.Reshape((1, 1, 4), name = 'Res43693', )(Min80465)
Glo44572 = keras.layers.GlobalAveragePooling2D(name = 'Glo44572', )(Res43693)
Dot90725 = keras.layers.Dot(axes=(1, 1), name = 'Dot90725', )([Con42655,Glo44572])
model = tf.keras.models.Model(inputs=[in0Cro79243,in0Con42655,in0Min80465,in1Min80465], outputs=Dot90725)
in0Cro79243 = tf.constant([[[[1.7283, 1.6727], [1.3172, 1.5701], [1.2937, 1.7136], [1.2168, 1.2272]], [[1.741, 1.5909], [1.7579, 1.8298], [1.8332, 1.6555], [1.6136, 1.6176]]]])
in0Con42655 = tf.constant([[0.7511, 0.2447]])
in0Min80465 = tf.constant([[[[[0.4435, 0.051], [0.3804, 0.9892]]]]])
in1Min80465 = tf.constant([[[[[0.6264, 0.5416], [0.2278, 0.0514]]]]])
print (np.array2string(model.predict([in0Cro79243,in0Con42655,in0Min80465,in1Min80465],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot90725.png')

LCro79243 = cropping2D_layer([[[[1.7283, 1.6727], [1.3172, 1.5701], [1.2937, 1.7136], [1.2168, 1.2272]], [[1.741, 1.5909], [1.7579, 1.8298], [1.8332, 1.6555], [1.6136, 1.6176]]]], 0, 1, 3, 0, Cro79243), 
LLea13417 = leaky_relu_layer(Cro79243, 8.869189624821287, Lea13417), 
LRes62456 = reshape_layer(Lea13417, [1, 2], Res62456), 
LPer15992 = permute_layer(Res62456, 1,2, Per15992), 
LFla58662 = flatten_layer(Per15992, Fla58662), 
LCon42655 = concatenate_layer([Fla58662,[[0.7511, 0.2447]]], 1, Con42655), 
LMin80465 = minimum_layer([[[[[[0.4435, 0.051], [0.3804, 0.9892]]]]], [[[[[0.6264, 0.5416], [0.2278, 0.0514]]]]]], Min80465), 
LRes43693 = reshape_layer(Min80465, [1, 1, 4], Res43693), 
LGlo44572 = global_average_pooling2D_layer(Res43693, Glo44572), 
LDot90725 = dot_layer(Con42655,Glo44572, 1, 1, Dot90725), 
exec_layers([LCro79243,LLea13417,LRes62456,LPer15992,LFla58662,LCon42655,LMin80465,LRes43693,LGlo44572,LDot90725],["Cro79243","Lea13417","Res62456","Per15992","Fla58662","Con42655","Min80465","Res43693","Glo44572","Dot90725"],Dot90725,"Dot90725")

Actual (Unparsed): [[0.7859162]]

Expected (Unparsed): [[0.7859161600000001]]

Actual:   [[0.786]]

Expected: [[0.786]]