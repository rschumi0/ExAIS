import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add76498 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in1Add76498 = tf.keras.layers.Input(shape=([2, 2, 2, 1]))
in0Con78570 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot69953 = tf.keras.layers.Input(shape=([3, 2]))
in1Dot69953 = tf.keras.layers.Input(shape=([3, 2]))

Add76498 = keras.layers.Add(name = 'Add76498', )([in0Add76498,in1Add76498])
Res97974 = keras.layers.Reshape((2, 2, 2), name = 'Res97974', )(Add76498)
Res39071 = keras.layers.Reshape((2, 4), name = 'Res39071', )(Res97974)
LST1677 = keras.layers.LSTM(3,recurrent_activation='sigmoid', name = 'LST1677', )(Res39071)
Res73452 = keras.layers.Reshape((3, 1), name = 'Res73452', )(LST1677)
Con78570 = keras.layers.Concatenate(axis=2, name = 'Con78570', )([Res73452,in0Con78570])
Dot69953 = keras.layers.Dot(axes=(1, 1), name = 'Dot69953', )([in0Dot69953,in1Dot69953])
Zer76505 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer76505', )(Dot69953)
Min45867 = keras.layers.Minimum(name = 'Min45867', )([Con78570,Zer76505])
model = tf.keras.models.Model(inputs=[in0Add76498,in1Add76498,in0Con78570,in0Dot69953,in1Dot69953], outputs=Min45867)
w = model.get_layer('LST1677').get_weights() 
w[0] = np.array([[9, 9, 1, 1, 7, 9, 9, 1, 5, 3, 4, 6], [8, 5, 1, 6, 4, 3, 1, 2, 1, 5, 4, 9], [10, 2, 7, 3, 8, 8, 3, 10, 2, 6, 1, 6], [4, 2, 3, 4, 1, 2, 9, 5, 6, 9, 4, 7]])
w[1] = np.array([[7, 6, 8, 5, 7, 2, 2, 1, 1, 1, 1, 9], [3, 5, 2, 1, 6, 5, 1, 1, 7, 2, 2, 8], [9, 7, 3, 4, 7, 6, 1, 1, 9, 5, 1, 2]])
w[2] = np.array([2, 9, 3, 6, 6, 3, 10, 2, 3, 1, 8, 10])
model.get_layer('LST1677').set_weights(w) 
in0Add76498 = tf.constant([[[[[0.7579], [0.0732]], [[0.8492], [0.5165]]], [[[0.9819], [0.7561]], [[0.2595], [0.3108]]]]])
in1Add76498 = tf.constant([[[[[0.373], [0.6695]], [[0.6538], [0.9141]]], [[[0.8593], [0.534]], [[0.8894], [0.5794]]]]])
in0Con78570 = tf.constant([[[0.4062], [0.8592], [0.214]]])
in0Dot69953 = tf.constant([[[0.4595, 0.8442], [0.4083, 0.9781], [0.2974, 0.9849]]])
in1Dot69953 = tf.constant([[[0.4538, 0.9899], [0.7837, 0.0551], [0.8898, 0.1145]]])
print (np.array2string(model.predict([in0Add76498,in1Add76498,in0Con78570,in0Dot69953,in1Dot69953],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min45867.png')

LAdd76498 = add_layer([[[[[[0.7579], [0.0732]], [[0.8492], [0.5165]]], [[[0.9819], [0.7561]], [[0.2595], [0.3108]]]]], [[[[[0.373], [0.6695]], [[0.6538], [0.9141]]], [[[0.8593], [0.534]], [[0.8894], [0.5794]]]]]], Add76498), 
LRes97974 = reshape_layer(Add76498, [2, 2, 2], Res97974), 
LRes39071 = reshape_layer(Res97974, [2, 4], Res39071), 
LLST1677 = lstm_layer(Res39071,[[9, 9, 1, 1, 7, 9, 9, 1, 5, 3, 4, 6], [8, 5, 1, 6, 4, 3, 1, 2, 1, 5, 4, 9], [10, 2, 7, 3, 8, 8, 3, 10, 2, 6, 1, 6], [4, 2, 3, 4, 1, 2, 9, 5, 6, 9, 4, 7]],[[7, 6, 8, 5, 7, 2, 2, 1, 1, 1, 1, 9], [3, 5, 2, 1, 6, 5, 1, 1, 7, 2, 2, 8], [9, 7, 3, 4, 7, 6, 1, 1, 9, 5, 1, 2]],[2, 9, 3, 6, 6, 3, 10, 2, 3, 1, 8, 10], LST1677), 
LRes73452 = reshape_layer(LST1677, [3, 1], Res73452), 
LCon78570 = concatenate_layer([Res73452,[[[0.4062], [0.8592], [0.214]]]], 2, Con78570), 
LDot69953 = dot_layer([[[0.4595, 0.8442], [0.4083, 0.9781], [0.2974, 0.9849]]], [[[0.4538, 0.9899], [0.7837, 0.0551], [0.8898, 0.1145]]], 1, 1, Dot69953), 
LZer76505 = zero_padding1D_layer(Dot69953, 1, 0, Zer76505), 
LMin45867 = minimum_layer([Con78570,Zer76505], Min45867), 
exec_layers([LAdd76498,LRes97974,LRes39071,LLST1677,LRes73452,LCon78570,LDot69953,LZer76505,LMin45867],["Add76498","Res97974","Res39071","LST1677","Res73452","Con78570","Dot69953","Zer76505","Min45867"],Min45867,"Min45867")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.7931323, 0.5114087], [0.9640276, 0.2140000]]]

Expected (Unparsed): [[[0,0],[0.7931323299999999,0.5114086800000001],[0.9640275798763844,0.214]]]

Actual:   [[[0, 0], [0.7932, 0.5115], [0.9641, 0.214]]]

Expected: [[[0, 0], [0.7932, 0.5115], [0.9641, 0.214]]]