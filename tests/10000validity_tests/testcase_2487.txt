import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add91909 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add91909 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Con22463 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Add87881 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Add87881 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))

Add91909 = keras.layers.Add(name = 'Add91909', )([in0Add91909,in1Add91909])
Res51789 = keras.layers.Reshape((1, 1, 2), name = 'Res51789', )(Add91909)
Con22463 = keras.layers.Concatenate(axis=3, name = 'Con22463', )([Res51789,in0Con22463])
Add87881 = keras.layers.Add(name = 'Add87881', )([in0Add87881,in1Add87881])
Res99332 = keras.layers.Reshape((1, 1, 1), name = 'Res99332', )(Add87881)
Con43639 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con43639', )(Res99332)
Ave76364 = keras.layers.Average(name = 'Ave76364', )([Con22463,Con43639])
model = tf.keras.models.Model(inputs=[in0Add91909,in1Add91909,in0Con22463,in0Add87881,in1Add87881], outputs=Ave76364)
w = model.get_layer('Con43639').get_weights() 
w[0] = np.array([[[[0.2079, 0.6127, 0.9287, 0.539]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con43639').set_weights(w) 
in0Add91909 = tf.constant([[[[[0.1742], [0.5526]]]]])
in1Add91909 = tf.constant([[[[[0.4269], [0.017]]]]])
in0Con22463 = tf.constant([[[[0.6761, 0.2219]]]])
in0Add87881 = tf.constant([[[[[0.007]]]]])
in1Add87881 = tf.constant([[[[[0.5199]]]]])
print (np.array2string(model.predict([in0Add91909,in1Add91909,in0Con22463,in0Add87881,in1Add87881],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave76364.png')

LAdd91909 = add_layer([[[[[[0.1742], [0.5526]]]]], [[[[[0.4269], [0.017]]]]]], Add91909), 
LRes51789 = reshape_layer(Add91909, [1, 1, 2], Res51789), 
LCon22463 = concatenate_layer([Res51789,[[[[0.6761, 0.2219]]]]], 3, Con22463), 
LAdd87881 = add_layer([[[[[[0.007]]]]], [[[[[0.5199]]]]]], Add87881), 
LRes99332 = reshape_layer(Add87881, [1, 1, 1], Res99332), 
LCon43639 = conv2D_layer(Res99332, 1, 1,[[[[0.2079, 0.6127, 0.9287, 0.539]]]],[0, 0, 0, 0], 1, 1, false, 1, 1, Con43639), 
LAve76364 = average_layer([Con22463,Con43639], Ave76364), 
exec_layers([LAdd91909,LRes51789,LCon22463,LAdd87881,LRes99332,LCon43639,LAve76364],["Add91909","Res51789","Con22463","Add87881","Res99332","Con43639","Ave76364"],Ave76364,"Ave76364")

Actual (Unparsed): [[[[0.3553213, 0.4462158, 0.5827160, 0.2529496]]]]

Expected (Unparsed): [[[[0.355321255,0.446215815,0.582716015,0.25294955]]]]

Actual:   [[[[0.3554, 0.4463, 0.5828, 0.253]]]]

Expected: [[[[0.3554, 0.4463, 0.5828, 0.253]]]]