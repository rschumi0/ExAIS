import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max37676 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con67946 = tf.keras.layers.Input(shape=([2, 1]))
in0Add92535 = tf.keras.layers.Input(shape=([2, 2]))
in1Add92535 = tf.keras.layers.Input(shape=([2, 2]))

Max37676 = keras.layers.MaxPool2D(pool_size=(1, 1), name = 'Max37676', )(in0Max37676)
Res27162 = keras.layers.Reshape((2, 1), name = 'Res27162', )(Max37676)
Con67946 = keras.layers.Concatenate(axis=2, name = 'Con67946', )([Res27162,in0Con67946])
Add92535 = keras.layers.Add(name = 'Add92535', )([in0Add92535,in1Add92535])
ReL98182 = keras.layers.ReLU(max_value=1.7503655484727474, negative_slope=5.462227404815189, threshold=5.869639847271562, name = 'ReL98182', )(Add92535)
Max96626 = keras.layers.Maximum(name = 'Max96626', )([Con67946,ReL98182])
Lea87102 = keras.layers.LeakyReLU(alpha=7.687075907925119, name = 'Lea87102', )(Max96626)
Per26896 = keras.layers.Permute((2,1), name = 'Per26896',)(Lea87102)
model = tf.keras.models.Model(inputs=[in0Max37676,in0Con67946,in0Add92535,in1Add92535], outputs=Per26896)
in0Max37676 = tf.constant([[[[1.2719]], [[1.9068]]]])
in0Con67946 = tf.constant([[[0.528], [0.653]]])
in0Add92535 = tf.constant([[[0.3959, 0.2772], [0.705, 0.9708]]])
in1Add92535 = tf.constant([[[0.8966, 0.4888], [0.0129, 0.0991]]])
print (np.array2string(model.predict([in0Max37676,in0Con67946,in0Add92535,in1Add92535],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per26896.png')

LMax37676 = max_pool2D_layer([[[[1.2719]], [[1.9068]]]], 1, 1, Max37676), 
LRes27162 = reshape_layer(Max37676, [2, 1], Res27162), 
LCon67946 = concatenate_layer([Res27162,[[[0.528], [0.653]]]], 2, Con67946), 
LAdd92535 = add_layer([[[[0.3959, 0.2772], [0.705, 0.9708]]], [[[0.8966, 0.4888], [0.0129, 0.0991]]]], Add92535), 
LReL98182 = relu_layer(Add92535, 1.7503655484727474, 5.462227404815189, 5.869639847271562, ReL98182), 
LMax96626 = maximum_layer([Con67946,ReL98182], Max96626), 
LLea87102 = leaky_relu_layer(Max96626, 7.687075907925119, Lea87102), 
LPer26896 = permute_layer(Lea87102, 2,1, Per26896), 
exec_layers([LMax37676,LRes27162,LCon67946,LAdd92535,LReL98182,LMax96626,LLea87102,LPer26896],["Max37676","Res27162","Con67946","Add92535","ReL98182","Max96626","Lea87102","Per26896"],Per26896,"Per26896")

Actual (Unparsed): [[[1.2719001, 1.9068000], [0.5280000, 0.6530000]]]

Expected (Unparsed): [[[1.2719,1.9068],[0.528,0.653]]]

Actual:   [[[1.272, 1.9068], [0.528, 0.653]]]

Expected: [[[1.2719, 1.9068], [0.528, 0.653]]]