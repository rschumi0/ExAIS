import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla53662 = tf.keras.layers.Input(shape=([2]))
in0Add38627 = tf.keras.layers.Input(shape=([2, 2]))
in1Add38627 = tf.keras.layers.Input(shape=([2, 2]))

Fla53662 = keras.layers.Flatten(name = 'Fla53662', )(in0Fla53662)
Res70928 = keras.layers.Reshape((2, 1), name = 'Res70928', )(Fla53662)
Add38627 = keras.layers.Add(name = 'Add38627', )([in0Add38627,in1Add38627])
Dot93633 = keras.layers.Dot(axes=(1, 1), name = 'Dot93633', )([Res70928,Add38627])
Glo98441 = keras.layers.GlobalAveragePooling1D(name = 'Glo98441', )(Dot93633)
model = tf.keras.models.Model(inputs=[in0Fla53662,in0Add38627,in1Add38627], outputs=Glo98441)
in0Fla53662 = tf.constant([[1.0507, 1.6652]])
in0Add38627 = tf.constant([[[0.1295, 0.5562], [0.9881, 0.0148]]])
in1Add38627 = tf.constant([[[0.2877, 0.5236], [0.3801, 0.6382]]])
print (np.array2string(model.predict([in0Fla53662,in0Add38627,in1Add38627],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo98441.png')

LFla53662 = flatten_layer([[1.0507, 1.6652]], Fla53662), 
LRes70928 = reshape_layer(Fla53662, [2, 1], Res70928), 
LAdd38627 = add_layer([[[[0.1295, 0.5562], [0.9881, 0.0148]]], [[[0.2877, 0.5236], [0.3801, 0.6382]]]], Add38627), 
LDot93633 = dot_layer(Res70928,Add38627, 1, 1, Dot93633), 
LGlo98441 = global_average_pooling1D_layer(Dot93633, Glo98441), 
exec_layers([LFla53662,LRes70928,LAdd38627,LDot93633,LGlo98441],["Fla53662","Res70928","Add38627","Dot93633","Glo98441"],Glo98441,"Glo98441")

Actual (Unparsed): [[2.7166787, 2.2219214]]

Expected (Unparsed): [[2.71667868,2.22192146]]

Actual:   [[2.7167, 2.222]]

Expected: [[2.7167, 2.222]]