import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max98213 = tf.keras.layers.Input(shape=([2, 2]))
in0Con33458 = tf.keras.layers.Input(shape=([2, 3]))
in0ReL48547 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Ave52744 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in1Ave52744 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Mul44533 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul44533 = tf.keras.layers.Input(shape=([2, 1]))
in0Con58422 = tf.keras.layers.Input(shape=([2, 3]))

Max98213 = keras.layers.MaxPool1D(pool_size=(2), strides=(11), padding='valid', name = 'Max98213', )(in0Max98213)
Glo88473 = keras.layers.GlobalAveragePooling1D(name = 'Glo88473', )(Max98213)
Res66227 = keras.layers.Reshape((2, 1), name = 'Res66227', )(Glo88473)
Con33458 = keras.layers.Concatenate(axis=2, name = 'Con33458', )([Res66227,in0Con33458])
ReL48547 = keras.layers.ReLU(max_value=9.721291985623532, negative_slope=1.4364840530650453, threshold=1.0604296436228522, name = 'ReL48547', input_shape=(2, 2, 2))(in0ReL48547)
Res16460 = keras.layers.Reshape((2, 4), name = 'Res16460', )(ReL48547)
Ave52744 = keras.layers.Average(name = 'Ave52744', )([in0Ave52744,in1Ave52744])
Res3780 = keras.layers.Reshape((1, 1, 1), name = 'Res3780', )(Ave52744)
Res92246 = keras.layers.Reshape((1, 1), name = 'Res92246', )(Res3780)
Zer34053 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer34053', )(Res92246)
Mul44533 = keras.layers.Multiply(name = 'Mul44533', )([in0Mul44533,in1Mul44533])
Max74799 = keras.layers.Maximum(name = 'Max74799', )([Zer34053,Mul44533])
Con58422 = keras.layers.Concatenate(axis=2, name = 'Con58422', )([Max74799,in0Con58422])
Sub29414 = keras.layers.Subtract(name = 'Sub29414', )([Res16460,Con58422])
Max58930 = keras.layers.Maximum(name = 'Max58930', )([Con33458,Sub29414])
model = tf.keras.models.Model(inputs=[in0Max98213,in0Con33458,in0ReL48547,in0Ave52744,in1Ave52744,in0Mul44533,in1Mul44533,in0Con58422], outputs=Max58930)
in0Max98213 = tf.constant([[[1.8917, 1.468], [1.8371, 1.7799]]])
in0Con33458 = tf.constant([[[0.3679, 0.7855, 0.6276], [0.4085, 0.2289, 0.6928]]])
in0ReL48547 = tf.constant([[[[0.0555, 0.4304], [0.9006, 0.0513]], [[0.5657, 0.2849], [0.6427, 0.0343]]]])
in0Ave52744 = tf.constant([[[[[0.1839]]]]])
in1Ave52744 = tf.constant([[[[[0.2734]]]]])
in0Mul44533 = tf.constant([[[0.6634], [0.2836]]])
in1Mul44533 = tf.constant([[[0.1305], [0.5325]]])
in0Con58422 = tf.constant([[[0.2419, 0.6129, 0.4762], [0.1802, 0.1914, 0.0628]]])
print (np.array2string(model.predict([in0Max98213,in0Con33458,in0ReL48547,in0Ave52744,in1Ave52744,in0Mul44533,in1Mul44533,in0Con58422],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max58930.png')

LMax98213 = max_pool1D_layer([[[1.8917, 1.468], [1.8371, 1.7799]]], 2, 11, false, Max98213), 
LGlo88473 = global_average_pooling1D_layer(Max98213, Glo88473), 
LRes66227 = reshape_layer(Glo88473, [2, 1], Res66227), 
LCon33458 = concatenate_layer([Res66227,[[[0.3679, 0.7855, 0.6276], [0.4085, 0.2289, 0.6928]]]], 2, Con33458), 
LReL48547 = relu_layer([[[[0.0555, 0.4304], [0.9006, 0.0513]], [[0.5657, 0.2849], [0.6427, 0.0343]]]], 9.721291985623532, 1.4364840530650453, 1.0604296436228522, ReL48547), 
LRes16460 = reshape_layer(ReL48547, [2, 4], Res16460), 
LAve52744 = average_layer([[[[[[0.1839]]]]], [[[[[0.2734]]]]]], Ave52744), 
LRes3780 = reshape_layer(Ave52744, [1, 1, 1], Res3780), 
LRes92246 = reshape_layer(Res3780, [1, 1], Res92246), 
LZer34053 = zero_padding1D_layer(Res92246, 1, 0, Zer34053), 
LMul44533 = multiply_layer([[[[0.6634], [0.2836]]], [[[0.1305], [0.5325]]]], Mul44533), 
LMax74799 = maximum_layer([Zer34053,Mul44533], Max74799), 
LCon58422 = concatenate_layer([Max74799,[[[0.2419, 0.6129, 0.4762], [0.1802, 0.1914, 0.0628]]]], 2, Con58422), 
LSub29414 = subtract_layer(Res16460,Con58422, Sub29414), 
LMax58930 = maximum_layer([Con33458,Sub29414], Max58930), 
exec_layers([LMax98213,LGlo88473,LRes66227,LCon33458,LReL48547,LRes16460,LAve52744,LRes3780,LRes92246,LZer34053,LMul44533,LMax74799,LCon58422,LSub29414,LMax58930],["Max98213","Glo88473","Res66227","Con33458","ReL48547","Res16460","Ave52744","Res3780","Res92246","Zer34053","Mul44533","Max74799","Con58422","Sub29414","Max58930"],Max58930,"Max58930")

Actual (Unparsed): [[[1.8917000, 0.3679000, 0.7855000, 0.6276000], [1.7799000, 0.4085000, 0.2289000, 0.6928000]]]

Expected (Unparsed): [[[1.8917,0.3679,0.7855,0.6276],[1.7799,0.4085,0.2289,0.6928]]]

Actual:   [[[1.8917, 0.3679, 0.7855, 0.6276], [1.7799, 0.4085, 0.2289, 0.6928]]]

Expected: [[[1.8917, 0.3679, 0.7855, 0.6276], [1.7799, 0.4085, 0.2289, 0.6928]]]