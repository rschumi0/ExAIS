import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_43007 = tf.keras.layers.Input(shape=([1, 4, 2, 3]))

Up_43007 = keras.layers.UpSampling3D(size=(2, 1, 2), name = 'Up_43007', )(in0Up_43007)
Res30094 = keras.layers.Reshape((2, 4, 12), name = 'Res30094', )(Up_43007)
Res53336 = keras.layers.Reshape((2, 48), name = 'Res53336', )(Res30094)
Max85037 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='same', name = 'Max85037', )(Res53336)
Res55832 = keras.layers.Reshape((2, 48, 1), name = 'Res55832', )(Max85037)
Con51723 = keras.layers.Conv2D(4, (1, 16),strides=(11, 1), padding='valid', dilation_rate=(1, 1), name = 'Con51723', )(Res55832)
Zer63001 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer63001', )(Con51723)
Thr72049 = keras.layers.ThresholdedReLU(theta=8.47598525264114, name = 'Thr72049', )(Zer63001)
model = tf.keras.models.Model(inputs=[in0Up_43007], outputs=Thr72049)
w = model.get_layer('Con51723').get_weights() 
w[0] = np.array([[[[0.6469, 0.1718, 0.1117, 0.0215]], [[0.2135, 0.9132, 0.9674, 0.0777]], [[0.351, 0.1834, 0.5295, 0.7707]], [[0.9525, 0.244, 0.5411, 0.0151]], [[0.9089, 0.7738, 0.0724, 0.7934]], [[0.273, 0.7389, 0.9368, 0.521]], [[0.9598, 0.3107, 0.1642, 0.1894]], [[0.1048, 0.9524, 0.303, 0.9988]], [[0.2929, 0.8312, 0.6171, 0.5609]], [[0.6151, 0.6564, 0.6931, 0.5179]], [[0.9179, 0.8927, 0.5824, 0.6047]], [[0.6654, 0.0513, 0.3614, 0.7621]], [[0.5533, 0.4241, 0.9159, 0.8977]], [[0.3837, 0.1924, 0.8283, 0.29]], [[0.7402, 0.3169, 0.479, 0.4267]], [[0.6846, 0.9929, 0.86, 0.2846]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con51723').set_weights(w) 
in0Up_43007 = tf.constant([[[[[1.678, 1.506, 1.6097], [1.3558, 1.5913, 1.201]], [[1.4254, 1.52, 1.8441], [1.2653, 1.2807, 1.6018]], [[1.8799, 1.6832, 1.0708], [1.2322, 1.1441, 1.3873]], [[1.6644, 1.8886, 1.4091], [1.5315, 1.1549, 1.4703]]]]])
print (np.array2string(model.predict([in0Up_43007],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr72049.png')

LUp_43007 = up_sampling3D_layer([[[[[1.678, 1.506, 1.6097], [1.3558, 1.5913, 1.201]], [[1.4254, 1.52, 1.8441], [1.2653, 1.2807, 1.6018]], [[1.8799, 1.6832, 1.0708], [1.2322, 1.1441, 1.3873]], [[1.6644, 1.8886, 1.4091], [1.5315, 1.1549, 1.4703]]]]], 2, 1, 2, Up_43007), 
LRes30094 = reshape_layer(Up_43007, [2, 4, 12], Res30094), 
LRes53336 = reshape_layer(Res30094, [2, 48], Res53336), 
LMax85037 = max_pool1D_layer(Res53336, 2, 1, true, Max85037), 
LRes55832 = reshape_layer(Max85037, [2, 48, 1], Res55832), 
LCon51723 = conv2D_layer(Res55832, 1, 16,[[[[0.6469, 0.1718, 0.1117, 0.0215]], [[0.2135, 0.9132, 0.9674, 0.0777]], [[0.351, 0.1834, 0.5295, 0.7707]], [[0.9525, 0.244, 0.5411, 0.0151]], [[0.9089, 0.7738, 0.0724, 0.7934]], [[0.273, 0.7389, 0.9368, 0.521]], [[0.9598, 0.3107, 0.1642, 0.1894]], [[0.1048, 0.9524, 0.303, 0.9988]], [[0.2929, 0.8312, 0.6171, 0.5609]], [[0.6151, 0.6564, 0.6931, 0.5179]], [[0.9179, 0.8927, 0.5824, 0.6047]], [[0.6654, 0.0513, 0.3614, 0.7621]], [[0.5533, 0.4241, 0.9159, 0.8977]], [[0.3837, 0.1924, 0.8283, 0.29]], [[0.7402, 0.3169, 0.479, 0.4267]], [[0.6846, 0.9929, 0.86, 0.2846]]]],[0, 0, 0, 0], 11, 1, false, 1, 1, Con51723), 
LZer63001 = zero_padding2D_layer(Con51723, 1, 1, 1, 1, Zer63001), 
LThr72049 = thresholded_relu_layer(Zer63001, 8.47598525264114, Thr72049), 
exec_layers([LUp_43007,LRes30094,LRes53336,LMax85037,LRes55832,LCon51723,LZer63001,LThr72049],["Up_43007","Res30094","Res53336","Max85037","Res55832","Con51723","Zer63001","Thr72049"],Thr72049,"Thr72049")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [14.0049001, 12.9267802, 13.4417909, 11.4649987], [13.8987814, 12.5666339, 13.5044906, 11.2951344], [13.9023832, 13.1976877, 14.0459990, 11.6134902], [13.9596377, 12.4682437, 12.9921991, 11.7523505], [13.7799699, 12.5089124, 13.4360393, 10.9784158], [13.4517893, 12.9013121, 13.5255302, 11.7931135], [13.5139050, 12.7133689, 12.7480938, 11.4232404], [13.4339512, 12.6357863, 12.8208119, 11.2064806], [13.4081926, 12.7741247, 13.1220727, 11.4275072], [13.6323584, 13.4294594, 13.5737035, 11.4654148], [14.2889656, 13.2167407, 13.1004164, 11.7858292], [13.9449004, 12.1896637, 13.3807220, 11.1669147], [13.7396271, 13.1850168, 14.2466578, 11.9936401], [14.5092763, 13.4684202, 13.6028344, 12.1392412], [14.4556809, 12.2682660, 13.1940667, 11.0848662], [13.2542366, 12.8741402, 13.8271856, 11.6478062], [13.0966153, 12.7536811, 12.9461474, 11.6222846], [13.5315104, 12.6092031, 12.3254098, 11.1211679], [13.1601234, 12.4384849, 12.4565390, 11.0568855], [12.7807150, 12.3637965, 12.7002877, 10.5786129], [12.7554836, 12.7039491, 12.3505449, 11.1943230], [13.5796422, 12.0465088, 12.0439816, 10.8116297], [13.4959977, 12.4303207, 13.4633443, 10.5822647], [13.2229368, 12.6929701, 13.2946978, 11.2080980], [13.8322597, 12.3041166, 13.1694225, 10.5764665], [13.6898078, 12.0120204, 13.2513698, 11.4302620], [13.3515095, 12.2338127, 13.2761742, 11.3101750], [13.6844872, 12.7802572, 13.7031576, 10.9566868], [13.2405192, 12.1033881, 12.7403990, 11.5497110], [13.0500546, 12.4681393, 12.7319997, 11.3755118], [13.4509640, 12.9180563, 12.8867424, 11.6765294], [13.3232890, 12.5650246, 12.8507669, 11.2084931], [13.2954662, 13.2835109, 13.2131641, 11.5326591], [0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000]]]]

Expected (Unparsed): [[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[14.00490011,12.92678011,13.44179093,11.46499867],[13.898781379999999,12.566633930000002,13.504490559999999,11.295134399999998],[13.902383239999999,13.197687689999999,14.045999020000002,11.61349016],[13.95963765,12.468243690000001,12.992199050000002,11.75235055],[13.7799699,12.5089125,13.436039279999997,10.9784158],[13.451789399999997,12.90131211,13.52553017,11.79311347],[13.51390495,12.713368830000002,12.74809383,11.423240380000001],[13.433951219999999,12.635786390000002,12.820811929999998,11.206480600000003],[13.408192689999998,12.77412474,13.122072770000003,11.427507189999998],[13.63235844,13.42945948,13.5737035,11.465414850000002],[14.28896569,13.21674075,13.100416480000002,11.78582918],[13.944900480000001,12.18966371,13.380722089999999,11.166914740000001],[13.739627170000002,13.18501695,14.246657890000002,11.99364028],[14.50927648,13.46842024,13.60283446,12.139241250000001],[14.455681079999998,12.268266100000004,13.19406686,11.084866300000002],[13.25423664,12.8741403,13.827185680000001,11.64780642],[13.096615449999998,12.753681259999999,12.946147470000001,11.622284669999999],[13.5315105,12.609203179999998,12.32540988,11.121168050000001],[13.1601235,12.438485000000002,12.4565391,11.056885650000002],[12.78071517,12.36379673,12.700287900000001,10.57861307],[12.75548375,12.703949099999997,12.35054494,11.194323090000001],[13.579642309999999,12.04650898,12.04398175,10.811629779999999],[13.49599787,12.430320869999997,13.46334447,10.58226481],[13.222936970000001,12.69297007,13.29469783,11.208097989999999],[13.832259780000001,12.304116669999999,13.16942261,10.57646662],[13.68980793,12.012020499999998,13.251369810000002,11.43026209],[13.351509559999998,12.23381274,13.27617427,11.31017496],[13.68448719,12.7802573,13.703157640000002,10.95668688],[13.240519280000001,12.103388180000001,12.740399040000002,11.549710929999998],[13.050054600000001,12.46813935,12.731999750000002,11.375511809999999],[13.450964070000001,12.91805643,12.88674246,11.676529420000001],[13.323289150000003,12.56502459,12.850767000000001,11.208493090000001],[13.295466240000001,13.283511,13.213164180000001,11.532659299999999],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]]

Actual:   [[[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [14.005, 12.9268, 13.4418, 11.465], [13.8988, 12.5667, 13.5045, 11.2952], [13.9024, 13.1977, 14.046, 11.6135], [13.9597, 12.4683, 12.9922, 11.7524], [13.78, 12.509, 13.4361, 10.9785], [13.4518, 12.9014, 13.5256, 11.7932], [13.514, 12.7134, 12.7481, 11.4233], [13.434, 12.6358, 12.8209, 11.2065], [13.4082, 12.7742, 13.1221, 11.4276], [13.6324, 13.4295, 13.5738, 11.4655], [14.289, 13.2168, 13.1005, 11.7859], [13.945, 12.1897, 13.3808, 11.167], [13.7397, 13.1851, 14.2467, 11.9937], [14.5093, 13.4685, 13.6029, 12.1393], [14.4557, 12.2683, 13.1941, 11.0849], [13.2543, 12.8742, 13.8272, 11.6479], [13.0967, 12.7537, 12.9462, 11.6223], [13.5316, 12.6093, 12.3255, 11.1212], [13.1602, 12.4385, 12.4566, 11.0569], [12.7808, 12.3638, 12.7003, 10.5787], [12.7555, 12.704, 12.3506, 11.1944], [13.5797, 12.0466, 12.044, 10.8117], [13.496, 12.4304, 13.4634, 10.5823], [13.223, 12.693, 13.2947, 11.2081], [13.8323, 12.3042, 13.1695, 10.5765], [13.6899, 12.0121, 13.2514, 11.4303], [13.3516, 12.2339, 13.2762, 11.3102], [13.6845, 12.7803, 13.7032, 10.9567], [13.2406, 12.1034, 12.7404, 11.5498], [13.0501, 12.4682, 12.732, 11.3756], [13.451, 12.9181, 12.8868, 11.6766], [13.3233, 12.5651, 12.8508, 11.2085], [13.2955, 13.2836, 13.2132, 11.5327], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]

Expected: [[[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [14.005, 12.9268, 13.4418, 11.465], [13.8988, 12.5667, 13.5045, 11.2952], [13.9024, 13.1977, 14.046, 11.6135], [13.9597, 12.4683, 12.9922, 11.7524], [13.78, 12.509, 13.4361, 10.9785], [13.4518, 12.9014, 13.5256, 11.7932], [13.514, 12.7134, 12.7481, 11.4233], [13.434, 12.6358, 12.8209, 11.2065], [13.4082, 12.7742, 13.1221, 11.4276], [13.6324, 13.4295, 13.5738, 11.4655], [14.289, 13.2168, 13.1005, 11.7859], [13.945, 12.1897, 13.3808, 11.167], [13.7397, 13.1851, 14.2467, 11.9937], [14.5093, 13.4685, 13.6029, 12.1393], [14.4557, 12.2683, 13.1941, 11.0849], [13.2543, 12.8742, 13.8272, 11.6479], [13.0967, 12.7537, 12.9462, 11.6223], [13.5316, 12.6093, 12.3255, 11.1212], [13.1602, 12.4385, 12.4566, 11.0569], [12.7808, 12.3638, 12.7003, 10.5787], [12.7555, 12.704, 12.3506, 11.1944], [13.5797, 12.0466, 12.044, 10.8117], [13.496, 12.4304, 13.4634, 10.5823], [13.223, 12.693, 13.2947, 11.2081], [13.8323, 12.3042, 13.1695, 10.5765], [13.6899, 12.0121, 13.2514, 11.4303], [13.3516, 12.2339, 13.2762, 11.3102], [13.6845, 12.7803, 13.7032, 10.9567], [13.2406, 12.1034, 12.7404, 11.5498], [13.0501, 12.4682, 12.732, 11.3756], [13.451, 12.9181, 12.8868, 11.6766], [13.3233, 12.5651, 12.8508, 11.2085], [13.2955, 13.2836, 13.2132, 11.5327], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]]]