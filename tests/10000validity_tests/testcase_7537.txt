import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_76889 = tf.keras.layers.Input(shape=([4, 3]))

Up_76889 = keras.layers.UpSampling1D(size=(1), name = 'Up_76889', )(in0Up_76889)
Res64205 = keras.layers.Reshape((4, 3, 1), name = 'Res64205', )(Up_76889)
Res34492 = keras.layers.Reshape((4, 3, 1, 1), name = 'Res34492', )(Res64205)
Con20561 = keras.layers.Conv3D(3, (3, 1, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con20561', )(Res34492)
Res17177 = keras.layers.Reshape((2, 3, 3), name = 'Res17177', )(Con20561)
Res38168 = keras.layers.Reshape((2, 9), name = 'Res38168', )(Res17177)
Ave35769 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave35769', )(Res38168)
model = tf.keras.models.Model(inputs=[in0Up_76889], outputs=Ave35769)
w = model.get_layer('Con20561').get_weights() 
w[0] = np.array([[[[[0.2709, 0.4775, 0.4121]]]], [[[[0.9545, 0.4077, 0.0559]]]], [[[[0.5475, 0.5394, 0.7144]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con20561').set_weights(w) 
in0Up_76889 = tf.constant([[[1.5648, 1.1269, 1.8991], [1.0155, 1.7561, 1.9006], [1.5381, 1.1034, 1.4554], [1.7736, 1.4149, 1.0954]]])
print (np.array2string(model.predict([in0Up_76889],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave35769.png')

LUp_76889 = up_sampling1D_layer([[[1.5648, 1.1269, 1.8991], [1.0155, 1.7561, 1.9006], [1.5381, 1.1034, 1.4554], [1.7736, 1.4149, 1.0954]]], 1, Up_76889), 
LRes64205 = reshape_layer(Up_76889, [4, 3, 1], Res64205), 
LRes34492 = reshape_layer(Res64205, [4, 3, 1, 1], Res34492), 
LCon20561 = conv3D_layer(Res34492, 3, 1, 1,[[[[[0.2709, 0.4775, 0.4121]]]], [[[[0.9545, 0.4077, 0.0559]]]], [[[[0.5475, 0.5394, 0.7144]]]]],[0, 0, 0], 1, 1, 1, false, 1, 1, 1, Con20561), 
LRes17177 = reshape_layer(Con20561, [2, 3, 3], Res17177), 
LRes38168 = reshape_layer(Res17177, [2, 9], Res38168), 
LAve35769 = average_pooling1D_layer(Res38168, 2, Ave35769), 
exec_layers([LUp_76889,LRes64205,LRes34492,LCon20561,LRes17177,LRes38168,LAve35769],["Up_76889","Res64205","Res34492","Con20561","Res17177","Res38168","Ave35769"],Ave35769,"Ave35769")

Actual (Unparsed): [[[2.4747851, 2.0297635, 1.7859832, 2.4445834, 1.9504108, 1.5735019, 2.8146018, 2.2792497, 1.7878741]]]

Expected (Unparsed): [[[2.47478511,2.0297634749999998,1.7859831750000001,2.4445833500000003,1.950410835,1.5735019350000004,2.814601865,2.279249735,1.787874145]]]

Actual:   [[[2.4748, 2.0298, 1.786, 2.4446, 1.9505, 1.5736, 2.8147, 2.2793, 1.7879]]]

Expected: [[[2.4748, 2.0298, 1.786, 2.4446, 1.9505, 1.5736, 2.8147, 2.2793, 1.7879]]]