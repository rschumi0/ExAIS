import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max42641 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Max42641 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Ave2477 = tf.keras.layers.Input(shape=([1, 2]))
in1Ave2477 = tf.keras.layers.Input(shape=([1, 2]))
in0Con17995 = tf.keras.layers.Input(shape=([1, 2]))

Max42641 = keras.layers.Maximum(name = 'Max42641', )([in0Max42641,in1Max42641])
Res98605 = keras.layers.Reshape((1, 2, 2), name = 'Res98605', )(Max42641)
Res47883 = keras.layers.Reshape((1, 4), name = 'Res47883', )(Res98605)
Ave2477 = keras.layers.Average(name = 'Ave2477', )([in0Ave2477,in1Ave2477])
Con17995 = keras.layers.Concatenate(axis=2, name = 'Con17995', )([Ave2477,in0Con17995])
Ave13332 = keras.layers.Average(name = 'Ave13332', )([Res47883,Con17995])
model = tf.keras.models.Model(inputs=[in0Max42641,in1Max42641,in0Ave2477,in1Ave2477,in0Con17995], outputs=Ave13332)
in0Max42641 = tf.constant([[[[[0.6053], [0.7892]], [[0.1164], [0.1371]]]]])
in1Max42641 = tf.constant([[[[[0.13], [0.7324]], [[0.7205], [0.3346]]]]])
in0Ave2477 = tf.constant([[[0.574, 0.2154]]])
in1Ave2477 = tf.constant([[[0.7158, 0.9019]]])
in0Con17995 = tf.constant([[[0.949, 0.483]]])
print (np.array2string(model.predict([in0Max42641,in1Max42641,in0Ave2477,in1Ave2477,in0Con17995],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave13332.png')

LMax42641 = maximum_layer([[[[[[0.6053], [0.7892]], [[0.1164], [0.1371]]]]], [[[[[0.13], [0.7324]], [[0.7205], [0.3346]]]]]], Max42641), 
LRes98605 = reshape_layer(Max42641, [1, 2, 2], Res98605), 
LRes47883 = reshape_layer(Res98605, [1, 4], Res47883), 
LAve2477 = average_layer([[[[0.574, 0.2154]]], [[[0.7158, 0.9019]]]], Ave2477), 
LCon17995 = concatenate_layer([Ave2477,[[[0.949, 0.483]]]], 2, Con17995), 
LAve13332 = average_layer([Res47883,Con17995], Ave13332), 
exec_layers([LMax42641,LRes98605,LRes47883,LAve2477,LCon17995,LAve13332],["Max42641","Res98605","Res47883","Ave2477","Con17995","Ave13332"],Ave13332,"Ave13332")

Actual (Unparsed): [[[0.6251000, 0.6739250, 0.8347500, 0.4088000]]]

Expected (Unparsed): [[[0.6251,0.673925,0.83475,0.4088]]]

Actual:   [[[0.6251, 0.674, 0.8348, 0.4088]]]

Expected: [[[0.6251, 0.674, 0.8348, 0.4088]]]