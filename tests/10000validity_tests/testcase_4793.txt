import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave81878 = tf.keras.layers.Input(shape=([2, 2]))
in0Con31435 = tf.keras.layers.Input(shape=([2, 4]))
in0Sub5714 = tf.keras.layers.Input(shape=([2, 2, 3]))
in1Sub5714 = tf.keras.layers.Input(shape=([2, 2, 3]))
in0Add9950 = tf.keras.layers.Input(shape=([2, 2]))
in1Add9950 = tf.keras.layers.Input(shape=([2, 2]))
in0Con70033 = tf.keras.layers.Input(shape=([2, 4]))

Ave81878 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave81878', )(in0Ave81878)
ELU62480 = keras.layers.ELU(alpha=3.735008119812452, name = 'ELU62480', )(Ave81878)
Zer89151 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer89151', )(ELU62480)
Con31435 = keras.layers.Concatenate(axis=2, name = 'Con31435', )([Zer89151,in0Con31435])
Sub5714 = keras.layers.Subtract(name = 'Sub5714', )([in0Sub5714,in1Sub5714])
Res17449 = keras.layers.Reshape((2, 6), name = 'Res17449', )(Sub5714)
Add9950 = keras.layers.Add(name = 'Add9950', )([in0Add9950,in1Add9950])
Con70033 = keras.layers.Concatenate(axis=2, name = 'Con70033', )([Add9950,in0Con70033])
Mul11418 = keras.layers.Multiply(name = 'Mul11418', )([Res17449,Con70033])
Min47648 = keras.layers.Minimum(name = 'Min47648', )([Con31435,Mul11418])
model = tf.keras.models.Model(inputs=[in0Ave81878,in0Con31435,in0Sub5714,in1Sub5714,in0Add9950,in1Add9950,in0Con70033], outputs=Min47648)
in0Ave81878 = tf.constant([[[1.6305, 1.0737], [1.1211, 1.1348]]])
in0Con31435 = tf.constant([[[0.1884, 0.837, 0.5224, 0.164], [0.0549, 0.347, 0.7212, 0.0914]]])
in0Sub5714 = tf.constant([[[[0.9042, 0.5431, 0.6661], [0.9727, 0.8325, 0.7823]], [[0.3336, 0.9889, 0.3103], [0.7753, 0.9214, 0.5501]]]])
in1Sub5714 = tf.constant([[[[0.0082, 0.3099, 0.4141], [0.8935, 0.7151, 0.1079]], [[0.0052, 0.273, 0.9534], [0.4478, 0.3992, 0.1102]]]])
in0Add9950 = tf.constant([[[0.3213, 0.8937], [0.6667, 0.7862]]])
in1Add9950 = tf.constant([[[0.5951, 0.0449], [0.5153, 0.6554]]])
in0Con70033 = tf.constant([[[0.2294, 0.4776, 0.6505, 0.9077], [0.4434, 0.7589, 0.0385, 0.7743]]])
print (np.array2string(model.predict([in0Ave81878,in0Con31435,in0Sub5714,in1Sub5714,in0Add9950,in1Add9950,in0Con70033],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min47648.png')

LAve81878 = average_pooling1D_layer([[[1.6305, 1.0737], [1.1211, 1.1348]]], 2, Ave81878), 
LELU62480 = elu_layer(Ave81878, 3.735008119812452, ELU62480), 
LZer89151 = zero_padding1D_layer(ELU62480, 1, 0, Zer89151), 
LCon31435 = concatenate_layer([Zer89151,[[[0.1884, 0.837, 0.5224, 0.164], [0.0549, 0.347, 0.7212, 0.0914]]]], 2, Con31435), 
LSub5714 = subtract_layer([[[[0.9042, 0.5431, 0.6661], [0.9727, 0.8325, 0.7823]], [[0.3336, 0.9889, 0.3103], [0.7753, 0.9214, 0.5501]]]], [[[[0.0082, 0.3099, 0.4141], [0.8935, 0.7151, 0.1079]], [[0.0052, 0.273, 0.9534], [0.4478, 0.3992, 0.1102]]]], Sub5714), 
LRes17449 = reshape_layer(Sub5714, [2, 6], Res17449), 
LAdd9950 = add_layer([[[[0.3213, 0.8937], [0.6667, 0.7862]]], [[[0.5951, 0.0449], [0.5153, 0.6554]]]], Add9950), 
LCon70033 = concatenate_layer([Add9950,[[[0.2294, 0.4776, 0.6505, 0.9077], [0.4434, 0.7589, 0.0385, 0.7743]]]], 2, Con70033), 
LMul11418 = multiply_layer([Res17449,Con70033], Mul11418), 
LMin47648 = minimum_layer([Con31435,Mul11418], Min47648), 
exec_layers([LAve81878,LELU62480,LZer89151,LCon31435,LSub5714,LRes17449,LAdd9950,LCon70033,LMul11418,LMin47648],["Ave81878","ELU62480","Zer89151","Con31435","Sub5714","Res17449","Add9950","Con70033","Mul11418","Min47648"],Min47648,"Min47648")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0578088, 0.0378259, 0.0763687, 0.1640000], [0.3881688, 1.0320414, -0.2851505, 0.2485398, 0.0201047, 0.0914000]]]

Expected (Unparsed): [[[0,0,0.0578088,0.03782592000000003,0.07636870000000004,0.164],[0.38816880000000004,1.03204144,-0.28515054,0.24853975,0.0201047,0.0914]]]

Actual:   [[[0, 0, 0.0579, 0.0379, 0.0764, 0.164], [0.3882, 1.0321, -0.2851, 0.2486, 0.0202, 0.0914]]]

Expected: [[[0, 0, 0.0579, 0.0379, 0.0764, 0.164], [0.3882, 1.0321, -0.2851, 0.2486, 0.0202, 0.0914]]]