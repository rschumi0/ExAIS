import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max23226 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Max23226 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Max29032 = tf.keras.layers.Input(shape=([1, 1]))
in1Max29032 = tf.keras.layers.Input(shape=([1, 1]))
in0Con75337 = tf.keras.layers.Input(shape=([1, 1, 1]))

Max23226 = keras.layers.Maximum(name = 'Max23226', )([in0Max23226,in1Max23226])
Res57130 = keras.layers.Reshape((1, 1, 4), name = 'Res57130', )(Max23226)
Max29032 = keras.layers.Maximum(name = 'Max29032', )([in0Max29032,in1Max29032])
Res39364 = keras.layers.Reshape((1, 1, 1), name = 'Res39364', )(Max29032)
Loc10050 = keras.layers.LocallyConnected2D(3, (1, 1),strides=(1, 1), name = 'Loc10050', )(Res39364)
Con75337 = keras.layers.Concatenate(axis=3, name = 'Con75337', )([Loc10050,in0Con75337])
Max7622 = keras.layers.Maximum(name = 'Max7622', )([Res57130,Con75337])
model = tf.keras.models.Model(inputs=[in0Max23226,in1Max23226,in0Max29032,in1Max29032,in0Con75337], outputs=Max7622)
w = model.get_layer('Loc10050').get_weights() 
w[0] = np.array([[[0.7422, 0.0669, 0.6036]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc10050').set_weights(w) 
in0Max23226 = tf.constant([[[[[0.5437, 0.8562], [0.9879, 0.1659]]]]])
in1Max23226 = tf.constant([[[[[0.8121, 0.2897], [0.0858, 0.5723]]]]])
in0Max29032 = tf.constant([[[0.1965]]])
in1Max29032 = tf.constant([[[0.6796]]])
in0Con75337 = tf.constant([[[[0.6067]]]])
print (np.array2string(model.predict([in0Max23226,in1Max23226,in0Max29032,in1Max29032,in0Con75337],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max7622.png')

LMax23226 = maximum_layer([[[[[[0.5437, 0.8562], [0.9879, 0.1659]]]]], [[[[[0.8121, 0.2897], [0.0858, 0.5723]]]]]], Max23226), 
LRes57130 = reshape_layer(Max23226, [1, 1, 4], Res57130), 
LMax29032 = maximum_layer([[[[0.1965]]], [[[0.6796]]]], Max29032), 
LRes39364 = reshape_layer(Max29032, [1, 1, 1], Res39364), 
LLoc10050 = locally_connected2D_layer(Res39364, 1, 1,[[[0.7422, 0.0669, 0.6036]]],[[[0, 0, 0]]], 1, 1, Loc10050), 
LCon75337 = concatenate_layer([Loc10050,[[[[0.6067]]]]], 3, Con75337), 
LMax7622 = maximum_layer([Res57130,Con75337], Max7622), 
exec_layers([LMax23226,LRes57130,LMax29032,LRes39364,LLoc10050,LCon75337,LMax7622],["Max23226","Res57130","Max29032","Res39364","Loc10050","Con75337","Max7622"],Max7622,"Max7622")

Actual (Unparsed): [[[[0.8121000, 0.8562000, 0.9879000, 0.6067000]]]]

Expected (Unparsed): [[[[0.8121,0.8562,0.9879,0.6067]]]]

Actual:   [[[[0.8121, 0.8562, 0.9879, 0.6067]]]]

Expected: [[[[0.8121, 0.8562, 0.9879, 0.6067]]]]