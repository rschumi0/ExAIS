import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul74249 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul74249 = tf.keras.layers.Input(shape=([1, 1]))
in0Up_78298 = tf.keras.layers.Input(shape=([3, 1, 2, 1]))
in0Max63549 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Max63549 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Add37070 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Add37070 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Mul74249 = keras.layers.Multiply(name = 'Mul74249', )([in0Mul74249,in1Mul74249])
Zer48880 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer48880', )(Mul74249)
Up_78298 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_78298', )(in0Up_78298)
Res63847 = keras.layers.Reshape((6, 2, 2), name = 'Res63847', )(Up_78298)
Res84088 = keras.layers.Reshape((6, 4), name = 'Res84088', )(Res63847)
Max63549 = keras.layers.Maximum(name = 'Max63549', )([in0Max63549,in1Max63549])
Add37070 = keras.layers.Add(name = 'Add37070', )([in0Add37070,in1Add37070])
Zer66266 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer66266', )(Add37070)
Add60038 = keras.layers.Add(name = 'Add60038', )([Max63549,Zer66266])
Lay75721 = keras.layers.LayerNormalization(axis=1, epsilon=2.650716924919977, name = 'Lay75721', )(Add60038)
Res59584 = keras.layers.Reshape((1, 2, 2), name = 'Res59584', )(Lay75721)
Res39807 = keras.layers.Reshape((1, 4), name = 'Res39807', )(Res59584)
Dot57756 = keras.layers.Dot(axes=(2, 2), name = 'Dot57756', )([Res84088,Res39807])
Add12024 = keras.layers.Add(name = 'Add12024', )([Zer48880,Dot57756])
model = tf.keras.models.Model(inputs=[in0Mul74249,in1Mul74249,in0Up_78298,in0Max63549,in1Max63549,in0Add37070,in1Add37070], outputs=Add12024)
in0Mul74249 = tf.constant([[[0.5055]]])
in1Mul74249 = tf.constant([[[0.0336]]])
in0Up_78298 = tf.constant([[[[[1.9484], [1.4859]]], [[[1.8752], [1.891]]], [[[1.8225], [1.4249]]]]])
in0Max63549 = tf.constant([[[[[0.7733], [0.9095]], [[0.2341], [0.6764]]]]])
in1Max63549 = tf.constant([[[[[0.2748], [0.218]], [[0.3454], [0.9619]]]]])
in0Add37070 = tf.constant([[[[[0.2052]], [[0.84]]]]])
in1Add37070 = tf.constant([[[[[0.2792]], [[0.5671]]]]])
print (np.array2string(model.predict([in0Mul74249,in1Mul74249,in0Up_78298,in0Max63549,in1Max63549,in0Add37070,in1Add37070],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add12024.png')

LMul74249 = multiply_layer([[[[0.5055]]], [[[0.0336]]]], Mul74249), 
LZer48880 = zero_padding1D_layer(Mul74249, 5, 0, Zer48880), 
LUp_78298 = up_sampling3D_layer([[[[[1.9484], [1.4859]]], [[[1.8752], [1.891]]], [[[1.8225], [1.4249]]]]], 2, 2, 1, Up_78298), 
LRes63847 = reshape_layer(Up_78298, [6, 2, 2], Res63847), 
LRes84088 = reshape_layer(Res63847, [6, 4], Res84088), 
LMax63549 = maximum_layer([[[[[[0.7733], [0.9095]], [[0.2341], [0.6764]]]]], [[[[[0.2748], [0.218]], [[0.3454], [0.9619]]]]]], Max63549), 
LAdd37070 = add_layer([[[[[[0.2052]], [[0.84]]]]], [[[[[0.2792]], [[0.5671]]]]]], Add37070), 
LZer66266 = zero_padding3D_layer(Add37070, 0, 0, 0, 0, 1, 0, Zer66266), 
LAdd60038 = add_layer([Max63549,Zer66266], Add60038), 
LLay75721 = layer_normalization_layer(Add60038, 1, 2.650716924919977, Lay75721), 
LRes59584 = reshape_layer(Lay75721, [1, 2, 2], Res59584), 
LRes39807 = reshape_layer(Res59584, [1, 4], Res39807), 
LDot57756 = dot_layer(Res84088,Res39807, 2, 2, Dot57756), 
LAdd12024 = add_layer([Zer48880,Dot57756], Add12024), 
exec_layers([LMul74249,LZer48880,LUp_78298,LRes63847,LRes84088,LMax63549,LAdd37070,LZer66266,LAdd60038,LLay75721,LRes59584,LRes39807,LDot57756,LAdd12024],["Mul74249","Zer48880","Up_78298","Res63847","Res84088","Max63549","Add37070","Zer66266","Add60038","Lay75721","Res59584","Res39807","Dot57756","Add12024"],Add12024,"Add12024")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0169848]]]

Expected (Unparsed): [[[0.0],[0.0],[0.0],[0.0],[0.0],[0.016984799999999998]]]

Actual:   [[[0], [0], [0], [0], [0], [0.017]]]

Expected: [[[0], [0], [0], [0], [0], [0.017]]]