import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer936 = tf.keras.layers.Input(shape=([4, 4, 4, 1]))
in0Add39073 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add39073 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Ave86418 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave86418 = tf.keras.layers.Input(shape=([2, 1]))
in0Con32419 = tf.keras.layers.Input(shape=([2, 1, 4]))

Zer936 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer936', )(in0Zer936)
Res29268 = keras.layers.Reshape((6, 6, 6), name = 'Res29268', )(Zer936)
Add39073 = keras.layers.Add(name = 'Add39073', )([in0Add39073,in1Add39073])
Den45360 = keras.layers.Dense(3,name = 'Den45360', )(Add39073)
Res96079 = keras.layers.Reshape((1, 1, 6), name = 'Res96079', )(Den45360)
Zer70010 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer70010', )(Res96079)
Ave86418 = keras.layers.Average(name = 'Ave86418', )([in0Ave86418,in1Ave86418])
Res48709 = keras.layers.Reshape((2, 1, 1), name = 'Res48709', )(Ave86418)
Loc15559 = keras.layers.LocallyConnected2D(2, (1, 1),strides=(1, 1), name = 'Loc15559', )(Res48709)
Con32419 = keras.layers.Concatenate(axis=3, name = 'Con32419', )([Loc15559,in0Con32419])
Max91934 = keras.layers.Maximum(name = 'Max91934', )([Zer70010,Con32419])
Zer6922 = keras.layers.ZeroPadding2D(padding=((4, 0), (5, 0)), name = 'Zer6922', )(Max91934)
Sub10956 = keras.layers.Subtract(name = 'Sub10956', )([Res29268,Zer6922])
model = tf.keras.models.Model(inputs=[in0Zer936,in0Add39073,in1Add39073,in0Ave86418,in1Ave86418,in0Con32419], outputs=Sub10956)
w = model.get_layer('Den45360').get_weights() 
w[0] = np.array([[0.7414, 0.057, 0.0827]])
w[1] = np.array([0.4228, 0.3124, 0.1215])
model.get_layer('Den45360').set_weights(w) 
w = model.get_layer('Loc15559').get_weights() 
w[0] = np.array([[[0.5358, 0.4061]], [[0.7971, 0.5472]]])
w[1] = np.array([[[0, 0]], [[0, 0]]])
model.get_layer('Loc15559').set_weights(w) 
in0Zer936 = tf.constant([[[[[1.5074], [1.9694], [1.2361], [1.4048]], [[1.7492], [1.9256], [1.3508], [1.9652]], [[1.6943], [1.4322], [1.8544], [1.8601]], [[1.885], [1.3082], [1.9666], [1.6381]]], [[[1.4172], [1.9425], [1.2053], [1.1253]], [[1.0081], [1.1161], [1.4106], [1.0395]], [[1.1717], [1.0749], [1.9764], [1.3542]], [[1.1675], [1.3116], [1.2636], [1.5754]]], [[[1.825], [1.0548], [1.3728], [1.0229]], [[1.5659], [1.0351], [1.9389], [1.671]], [[1.9486], [1.7018], [1.3764], [1.0974]], [[1.84], [1.6946], [1.0545], [1.6117]]], [[[1.8839], [1.043], [1.2067], [1.6914]], [[1.2802], [1.2596], [1.9931], [1.4408]], [[1.0145], [1.224], [1.0219], [1.906]], [[1.5856], [1.5095], [1.8136], [1.7273]]]]])
in0Add39073 = tf.constant([[[[[0.9666], [0.5977]]]]])
in1Add39073 = tf.constant([[[[[0.1416], [0.7937]]]]])
in0Ave86418 = tf.constant([[[0.0037], [0.2447]]])
in1Ave86418 = tf.constant([[[0.9207], [0.273]]])
in0Con32419 = tf.constant([[[[0.8947, 0.9108, 0.7511, 0.7521]], [[0.106, 0.8782, 0.7169, 0.2252]]]])
print (np.array2string(model.predict([in0Zer936,in0Add39073,in1Add39073,in0Ave86418,in1Ave86418,in0Con32419],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub10956.png')

LZer936 = zero_padding3D_layer([[[[[1.5074], [1.9694], [1.2361], [1.4048]], [[1.7492], [1.9256], [1.3508], [1.9652]], [[1.6943], [1.4322], [1.8544], [1.8601]], [[1.885], [1.3082], [1.9666], [1.6381]]], [[[1.4172], [1.9425], [1.2053], [1.1253]], [[1.0081], [1.1161], [1.4106], [1.0395]], [[1.1717], [1.0749], [1.9764], [1.3542]], [[1.1675], [1.3116], [1.2636], [1.5754]]], [[[1.825], [1.0548], [1.3728], [1.0229]], [[1.5659], [1.0351], [1.9389], [1.671]], [[1.9486], [1.7018], [1.3764], [1.0974]], [[1.84], [1.6946], [1.0545], [1.6117]]], [[[1.8839], [1.043], [1.2067], [1.6914]], [[1.2802], [1.2596], [1.9931], [1.4408]], [[1.0145], [1.224], [1.0219], [1.906]], [[1.5856], [1.5095], [1.8136], [1.7273]]]]], 1, 1, 1, 1, 1, 1, Zer936), 
LRes29268 = reshape_layer(Zer936, [6, 6, 6], Res29268), 
LAdd39073 = add_layer([[[[[[0.9666], [0.5977]]]]], [[[[[0.1416], [0.7937]]]]]], Add39073), 
LDen45360 = dense_layer(Add39073, [[0.7414, 0.057, 0.0827]],[0.4228, 0.3124, 0.1215], Den45360), 
LRes96079 = reshape_layer(Den45360, [1, 1, 6], Res96079), 
LZer70010 = zero_padding2D_layer(Res96079, 1, 0, 0, 0, Zer70010), 
LAve86418 = average_layer([[[[0.0037], [0.2447]]], [[[0.9207], [0.273]]]], Ave86418), 
LRes48709 = reshape_layer(Ave86418, [2, 1, 1], Res48709), 
LLoc15559 = locally_connected2D_layer(Res48709, 1, 1,[[[0.5358, 0.4061]], [[0.7971, 0.5472]]],[[[0, 0]], [[0, 0]]], 1, 1, Loc15559), 
LCon32419 = concatenate_layer([Loc15559,[[[[0.8947, 0.9108, 0.7511, 0.7521]], [[0.106, 0.8782, 0.7169, 0.2252]]]]], 3, Con32419), 
LMax91934 = maximum_layer([Zer70010,Con32419], Max91934), 
LZer6922 = zero_padding2D_layer(Max91934, 4, 0, 5, 0, Zer6922), 
LSub10956 = subtract_layer(Res29268,Zer6922, Sub10956), 
exec_layers([LZer936,LRes29268,LAdd39073,LDen45360,LRes96079,LZer70010,LAve86418,LRes48709,LLoc15559,LCon32419,LMax91934,LZer6922,LSub10956],["Zer936","Res29268","Add39073","Den45360","Res96079","Zer70010","Ave86418","Res48709","Loc15559","Con32419","Max91934","Zer6922","Sub10956"],Sub10956,"Sub10956")

Actual (Unparsed): [[[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 1.5074000, 1.9694000, 1.2361000, 1.4048001, 0.0000000], [0.0000000, 1.7492000, 1.9256001, 1.3508000, 1.9651999, 0.0000000], [0.0000000, 1.6943001, 1.4322000, 1.8544000, 1.8601000, 0.0000000], [0.0000000, 1.8850000, 1.3082000, 1.9665999, 1.6381000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 1.4172000, 1.9425000, 1.2053000, 1.1253000, 0.0000000], [0.0000000, 1.0081000, 1.1161000, 1.4105999, 1.0395000, 0.0000000], [0.0000000, 1.1717000, 1.0749000, 1.9764000, 1.3542000, 0.0000000], [0.0000000, 1.1675000, 1.3116000, 1.2636000, 1.5754000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 1.8250000, 1.0548000, 1.3728000, 1.0229000, 0.0000000], [0.0000000, 1.5659000, 1.0351000, 1.9389000, 1.6710000, 0.0000000], [0.0000000, 1.9486001, 1.7018000, 1.3764000, 1.0974000, 0.0000000], [0.0000000, 1.8400000, 1.6946000, 1.0545000, 1.6117001, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 1.8839000, 1.0430000, 1.2067000, 1.6914001, 0.0000000], [0.0000000, 1.2802000, 1.2596000, 1.9931000, 1.4408000, 0.0000000], [0.0000000, 1.0145000, 1.2240000, 1.0219001, 1.9060000, 0.0000000], [0.0000000, 1.5856000, 1.5095000, 1.8135999, 1.7273000, 0.0000000], [-0.2476468, -0.1876994, -0.8947000, -0.9108000, -0.7511000, -0.7521000]], [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [-1.2444195, -0.3755674, -0.2131481, -1.4543839, -0.7169000, -0.2365688]]]]

Expected (Unparsed): [[[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],[[0,0,0,0,0,0],[0,1.5074,1.9694,1.2361,1.4048,0],[0,1.7492,1.9256,1.3508,1.9652,0],[0,1.6943,1.4322,1.8544,1.8601,0],[0,1.885,1.3082,1.9666,1.6381,0],[0,0,0,0,0,0]],[[0,0,0,0,0,0],[0,1.4172,1.9425,1.2053,1.1253,0],[0,1.0081,1.1161,1.4106,1.0395,0],[0,1.1717,1.0749,1.9764,1.3542,0],[0,1.1675,1.3116,1.2636,1.5754,0],[0,0,0,0,0,0]],[[0,0,0,0,0,0],[0,1.825,1.0548,1.3728,1.0229,0],[0,1.5659,1.0351,1.9389,1.671,0],[0,1.9486,1.7018,1.3764,1.0974,0],[0,1.84,1.6946,1.0545,1.6117,0],[0,0,0,0,0,0]],[[0,0,0,0,0,0],[0,1.8839,1.043,1.2067,1.6914,0],[0,1.2802,1.2596,1.9931,1.4408,0],[0,1.0145,1.224,1.0219,1.906,0],[0,1.5856,1.5095,1.8136,1.7273,0],[-0.24764676000000002,-0.18769942,-0.8947,-0.9108,-0.7511,-0.7521]],[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[-1.24441948,-0.3755674,-0.21314813999999999,-1.45438396,-0.7169,-0.23656877999999998]]]]

Actual:   [[[[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.5074, 1.9694, 1.2361, 1.4049, 0], [0, 1.7492, 1.9257, 1.3508, 1.9652, 0], [0, 1.6944, 1.4322, 1.8544, 1.8601, 0], [0, 1.885, 1.3082, 1.9666, 1.6381, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.4172, 1.9425, 1.2053, 1.1253, 0], [0, 1.0081, 1.1161, 1.4106, 1.0395, 0], [0, 1.1717, 1.0749, 1.9764, 1.3542, 0], [0, 1.1675, 1.3116, 1.2636, 1.5754, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.825, 1.0548, 1.3728, 1.0229, 0], [0, 1.5659, 1.0351, 1.9389, 1.671, 0], [0, 1.9487, 1.7018, 1.3764, 1.0974, 0], [0, 1.84, 1.6946, 1.0545, 1.6118, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.8839, 1.043, 1.2067, 1.6915, 0], [0, 1.2802, 1.2596, 1.9931, 1.4408, 0], [0, 1.0145, 1.224, 1.022, 1.906, 0], [0, 1.5856, 1.5095, 1.8136, 1.7273, 0], [-0.2476, -0.1876, -0.8947, -0.9108, -0.7511, -0.7521]], [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [-1.2444, -0.3755, -0.2131, -1.4543, -0.7169, -0.2365]]]]

Expected: [[[[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.5074, 1.9694, 1.2361, 1.4048, 0], [0, 1.7492, 1.9256, 1.3508, 1.9652, 0], [0, 1.6943, 1.4322, 1.8544, 1.8601, 0], [0, 1.885, 1.3082, 1.9666, 1.6381, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.4172, 1.9425, 1.2053, 1.1253, 0], [0, 1.0081, 1.1161, 1.4106, 1.0395, 0], [0, 1.1717, 1.0749, 1.9764, 1.3542, 0], [0, 1.1675, 1.3116, 1.2636, 1.5754, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.825, 1.0548, 1.3728, 1.0229, 0], [0, 1.5659, 1.0351, 1.9389, 1.671, 0], [0, 1.9486, 1.7018, 1.3764, 1.0974, 0], [0, 1.84, 1.6946, 1.0545, 1.6117, 0], [0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0], [0, 1.8839, 1.043, 1.2067, 1.6914, 0], [0, 1.2802, 1.2596, 1.9931, 1.4408, 0], [0, 1.0145, 1.224, 1.0219, 1.906, 0], [0, 1.5856, 1.5095, 1.8136, 1.7273, 0], [-0.2476, -0.1876, -0.8947, -0.9108, -0.7511, -0.7521]], [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [-1.2444, -0.3755, -0.2131, -1.4543, -0.7169, -0.2365]]]]