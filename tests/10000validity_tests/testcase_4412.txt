import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add78918 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add78918 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con75703 = tf.keras.layers.Input(shape=([1]))
in0Bat2195 = tf.keras.layers.Input(shape=([1]))
in0Con83500 = tf.keras.layers.Input(shape=([2]))
in0Fla47937 = tf.keras.layers.Input(shape=([3]))

Add78918 = keras.layers.Add(name = 'Add78918', )([in0Add78918,in1Add78918])
Lea43315 = keras.layers.LeakyReLU(alpha=2.836744544872086, name = 'Lea43315', )(Add78918)
Res77962 = keras.layers.Reshape((1, 2), name = 'Res77962', )(Lea43315)
Fla77504 = keras.layers.Flatten(name = 'Fla77504', )(Res77962)
Con75703 = keras.layers.Concatenate(axis=1, name = 'Con75703', )([Fla77504,in0Con75703])
Bat2195 = keras.layers.BatchNormalization(axis=1, epsilon=0.15639931338395596,  name = 'Bat2195', )(in0Bat2195)
Con83500 = keras.layers.Concatenate(axis=1, name = 'Con83500', )([Bat2195,in0Con83500])
Fla47937 = keras.layers.Flatten(name = 'Fla47937', )(in0Fla47937)
Min36803 = keras.layers.Minimum(name = 'Min36803', )([Con83500,Fla47937])
Ave42185 = keras.layers.Average(name = 'Ave42185', )([Con75703,Min36803])
model = tf.keras.models.Model(inputs=[in0Add78918,in1Add78918,in0Con75703,in0Bat2195,in0Con83500,in0Fla47937], outputs=Ave42185)
w = model.get_layer('Bat2195').get_weights() 
w[0] = np.array([0.5844])
w[1] = np.array([0.3021])
w[2] = np.array([0.8801])
w[3] = np.array([0.707])
model.get_layer('Bat2195').set_weights(w) 
in0Add78918 = tf.constant([[[[0.6336, 0.399]]]])
in1Add78918 = tf.constant([[[[0.1875, 0.0621]]]])
in0Con75703 = tf.constant([[0.2478]])
in0Bat2195 = tf.constant([[1.8651]])
in0Con83500 = tf.constant([[0.2493, 0.4877]])
in0Fla47937 = tf.constant([[1.2903, 1.5781, 1.8143]])
print (np.array2string(model.predict([in0Add78918,in1Add78918,in0Con75703,in0Bat2195,in0Con83500,in0Fla47937],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave42185.png')

LAdd78918 = add_layer([[[[[0.6336, 0.399]]]], [[[[0.1875, 0.0621]]]]], Add78918), 
LLea43315 = leaky_relu_layer(Add78918, 2.836744544872086, Lea43315), 
LRes77962 = reshape_layer(Lea43315, [1, 2], Res77962), 
LFla77504 = flatten_layer(Res77962, Fla77504), 
LCon75703 = concatenate_layer([Fla77504,[[0.2478]]], 1, Con75703), 
LBat2195 = batch_normalization_layer([[1.8651]], 1, 0.15639931338395596, [0.5844], [0.3021], [0.8801], [0.707], Bat2195), 
LCon83500 = concatenate_layer([Bat2195,[[0.2493, 0.4877]]], 1, Con83500), 
LFla47937 = flatten_layer([[1.2903, 1.5781, 1.8143]], Fla47937), 
LMin36803 = minimum_layer([Con83500,Fla47937], Min36803), 
LAve42185 = average_layer([Con75703,Min36803], Ave42185), 
exec_layers([LAdd78918,LLea43315,LRes77962,LFla77504,LCon75703,LBat2195,LCon83500,LFla47937,LMin36803,LAve42185],["Add78918","Lea43315","Res77962","Fla77504","Con75703","Bat2195","Con83500","Fla47937","Min36803","Ave42185"],Ave42185,"Ave42185")

Actual (Unparsed): [[0.8713495, 0.3552000, 0.3677500]]

Expected (Unparsed): [[0.8713494847471666,0.3552,0.36775]]

Actual:   [[0.8714, 0.3552, 0.3678]]

Expected: [[0.8714, 0.3552, 0.3678]]