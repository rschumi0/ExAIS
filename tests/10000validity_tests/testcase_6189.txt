import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave49448 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave49448 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Dot3147 = tf.keras.layers.Input(shape=([3]))
in1Dot3147 = tf.keras.layers.Input(shape=([3]))
in0Con13081 = tf.keras.layers.Input(shape=([6, 1]))
in0Zer13658 = tf.keras.layers.Input(shape=([4, 2]))

Ave49448 = keras.layers.Average(name = 'Ave49448', )([in0Ave49448,in1Ave49448])
Res92049 = keras.layers.Reshape((1, 2), name = 'Res92049', )(Ave49448)
Zer98713 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer98713', )(Res92049)
Dot3147 = keras.layers.Dot(axes=(1, 1), name = 'Dot3147', )([in0Dot3147,in1Dot3147])
Res78369 = keras.layers.Reshape((1, 1), name = 'Res78369', )(Dot3147)
Zer38344 = keras.layers.ZeroPadding1D(padding=((5, 0)), name = 'Zer38344', )(Res78369)
Con13081 = keras.layers.Concatenate(axis=2, name = 'Con13081', )([Zer38344,in0Con13081])
Zer13658 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer13658', )(in0Zer13658)
Max83252 = keras.layers.Maximum(name = 'Max83252', )([Con13081,Zer13658])
Max44795 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max44795', )(Max83252)
Min54477 = keras.layers.Minimum(name = 'Min54477', )([Zer98713,Max44795])
model = tf.keras.models.Model(inputs=[in0Ave49448,in1Ave49448,in0Dot3147,in1Dot3147,in0Con13081,in0Zer13658], outputs=Min54477)
in0Ave49448 = tf.constant([[[[0.8946, 0.8165]]]])
in1Ave49448 = tf.constant([[[[0.0425, 0.8463]]]])
in0Dot3147 = tf.constant([[0.4034, 0.7603, 0.1633]])
in1Dot3147 = tf.constant([[0.5028, 0.0303, 0.1371]])
in0Con13081 = tf.constant([[[0.0261], [0.1121], [0.2684], [0.2874], [0.0842], [0.8595]]])
in0Zer13658 = tf.constant([[[1.5315, 1.0116], [1.9003, 1.3117], [1.4811, 1.5556], [1.7849, 1.3889]]])
print (np.array2string(model.predict([in0Ave49448,in1Ave49448,in0Dot3147,in1Dot3147,in0Con13081,in0Zer13658],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min54477.png')

LAve49448 = average_layer([[[[[0.8946, 0.8165]]]], [[[[0.0425, 0.8463]]]]], Ave49448), 
LRes92049 = reshape_layer(Ave49448, [1, 2], Res92049), 
LZer98713 = zero_padding1D_layer(Res92049, 5, 0, Zer98713), 
LDot3147 = dot_layer([[0.4034, 0.7603, 0.1633]], [[0.5028, 0.0303, 0.1371]], 1, 1, Dot3147), 
LRes78369 = reshape_layer(Dot3147, [1, 1], Res78369), 
LZer38344 = zero_padding1D_layer(Res78369, 5, 0, Zer38344), 
LCon13081 = concatenate_layer([Zer38344,[[[0.0261], [0.1121], [0.2684], [0.2874], [0.0842], [0.8595]]]], 2, Con13081), 
LZer13658 = zero_padding1D_layer([[[1.5315, 1.0116], [1.9003, 1.3117], [1.4811, 1.5556], [1.7849, 1.3889]]], 1, 1, Zer13658), 
LMax83252 = maximum_layer([Con13081,Zer13658], Max83252), 
LMax44795 = max_pool1D_layer(Max83252, 1, Max44795), 
LMin54477 = minimum_layer([Zer98713,Max44795], Min54477), 
exec_layers([LAve49448,LRes92049,LZer98713,LDot3147,LRes78369,LZer38344,LCon13081,LZer13658,LMax83252,LMax44795,LMin54477],["Ave49448","Res92049","Zer98713","Dot3147","Res78369","Zer38344","Con13081","Zer13658","Max83252","Max44795","Min54477"],Min54477,"Min54477")

Actual (Unparsed): [[[0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.0000000, 0.0000000], [0.2482550, 0.8314000]]]

Expected (Unparsed): [[[0,0],[0,0],[0,0],[0,0],[0,0],[0.24825504000000004,0.8314]]]

Actual:   [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0.2483, 0.8314]]]

Expected: [[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0.2483, 0.8314]]]