import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max38848 = tf.keras.layers.Input(shape=([2, 1]))
in0Con97300 = tf.keras.layers.Input(shape=([1, 3]))
in0Max39787 = tf.keras.layers.Input(shape=([2, 1]))

Max38848 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max38848', )(in0Max38848)
Res67906 = keras.layers.Reshape((2, 1, 1), name = 'Res67906', )(Max38848)
Cro27451 = keras.layers.Cropping2D(cropping=((0, 1), (0, 0)), name = 'Cro27451', )(Res67906)
Res5921 = keras.layers.Reshape((1, 1), name = 'Res5921', )(Cro27451)
Con97300 = keras.layers.Concatenate(axis=2, name = 'Con97300', )([Res5921,in0Con97300])
Max39787 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='valid', name = 'Max39787', )(in0Max39787)
Sep83037 = keras.layers.SeparableConv1D(4, (1),strides=(2), padding='valid', name = 'Sep83037', )(Max39787)
Ave33125 = keras.layers.Average(name = 'Ave33125', )([Con97300,Sep83037])
Glo55814 = keras.layers.GlobalMaxPool1D(name = 'Glo55814', )(Ave33125)
model = tf.keras.models.Model(inputs=[in0Max38848,in0Con97300,in0Max39787], outputs=Glo55814)
w = model.get_layer('Sep83037').get_weights() 
w[0] = np.array([[[0.6025]]])
w[1] = np.array([[[0.9338, 0.4674, 0.7188, 0.8474]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep83037').set_weights(w) 
in0Max38848 = tf.constant([[[1.2716], [1.4559]]])
in0Con97300 = tf.constant([[[0.8351, 0.1141, 0.5978]]])
in0Max39787 = tf.constant([[[1.7578], [1.9882]]])
print (np.array2string(model.predict([in0Max38848,in0Con97300,in0Max39787],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo55814.png')

LMax38848 = max_pool1D_layer([[[1.2716], [1.4559]]], 1, Max38848), 
LRes67906 = reshape_layer(Max38848, [2, 1, 1], Res67906), 
LCro27451 = cropping2D_layer(Res67906, 0, 1, 0, 0, Cro27451), 
LRes5921 = reshape_layer(Cro27451, [1, 1], Res5921), 
LCon97300 = concatenate_layer([Res5921,[[[0.8351, 0.1141, 0.5978]]]], 2, Con97300), 
LMax39787 = max_pool1D_layer([[[1.7578], [1.9882]]], 2, 1, false, Max39787), 
LSep83037 = separable_conv1D_layer(Max39787, 1,[[[[0.6025]]],[[[0.9338, 0.4674, 0.7188, 0.8474]]]],[0, 0, 0, 0], 2, false, Sep83037), 
LAve33125 = average_layer([Con97300,Sep83037], Ave33125), 
LGlo55814 = global_max_pool1D_layer(Ave33125, Glo55814), 
exec_layers([LMax38848,LRes67906,LCro27451,LRes5921,LCon97300,LMax39787,LSep83037,LAve33125,LGlo55814],["Max38848","Res67906","Cro27451","Res5921","Con97300","Max39787","Sep83037","Ave33125","Glo55814"],Glo55814,"Glo55814")

Actual (Unparsed): [[1.1950951, 0.6974970, 0.4875718, 0.8064462]]

Expected (Unparsed): [[1.19509507445,0.69749700985,0.48757184569999995,0.8064462048500001]]

Actual:   [[1.1951, 0.6975, 0.4876, 0.8065]]

Expected: [[1.1951, 0.6975, 0.4876, 0.8065]]