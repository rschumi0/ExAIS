import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con18724 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Sub75532 = tf.keras.layers.Input(shape=([3, 2, 3]))
in1Sub75532 = tf.keras.layers.Input(shape=([3, 2, 3]))
in0Con47085 = tf.keras.layers.Input(shape=([3]))
in0Glo83362 = tf.keras.layers.Input(shape=([2, 2]))
in0Con9806 = tf.keras.layers.Input(shape=([3]))

Con18724 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con18724', )(in0Con18724)
Res52461 = keras.layers.Reshape((1, 4), name = 'Res52461', )(Con18724)
Fla93933 = keras.layers.Flatten(name = 'Fla93933', )(Res52461)
Sub75532 = keras.layers.Subtract(name = 'Sub75532', )([in0Sub75532,in1Sub75532])
Res78622 = keras.layers.Reshape((3, 2, 3, 1), name = 'Res78622', )(Sub75532)
Glo78389 = keras.layers.GlobalAveragePooling3D(name = 'Glo78389', )(Res78622)
Con47085 = keras.layers.Concatenate(axis=1, name = 'Con47085', )([Glo78389,in0Con47085])
Ave30763 = keras.layers.Average(name = 'Ave30763', )([Fla93933,Con47085])
Glo83362 = keras.layers.GlobalAveragePooling1D(name = 'Glo83362', )(in0Glo83362)
Res89536 = keras.layers.Reshape((2, 1), name = 'Res89536', )(Glo83362)
Glo31366 = keras.layers.GlobalAveragePooling1D(name = 'Glo31366', )(Res89536)
Con9806 = keras.layers.Concatenate(axis=1, name = 'Con9806', )([Glo31366,in0Con9806])
Max28924 = keras.layers.Maximum(name = 'Max28924', )([Ave30763,Con9806])
model = tf.keras.models.Model(inputs=[in0Con18724,in0Sub75532,in1Sub75532,in0Con47085,in0Glo83362,in0Con9806], outputs=Max28924)
w = model.get_layer('Con18724').get_weights() 
w[0] = np.array([[[[0.6009, 0.6088, 0.9422, 0.0349], [0.4773, 0.1035, 0.1434, 0.1355]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con18724').set_weights(w) 
in0Con18724 = tf.constant([[[[0.0139, 0.1109]]]])
in0Sub75532 = tf.constant([[[[0.2318, 0.5531, 0.1922], [0.1541, 0.805, 0.5537]], [[0.5396, 0.8727, 0.7877], [0.4392, 0.7708, 0.8593]], [[0.4186, 0.2592, 0.8463], [0.0501, 0.8221, 0.0227]]]])
in1Sub75532 = tf.constant([[[[0.3823, 0.6927, 0.5817], [0.5772, 0.2327, 0.9773]], [[0.4805, 0.1529, 0.6887], [0.7727, 0.4885, 0.7636]], [[0.0178, 0.2224, 0.4913], [0.7294, 0.8671, 0.05]]]])
in0Con47085 = tf.constant([[0.0376, 0.4497, 0.5949]])
in0Glo83362 = tf.constant([[[1.7014, 1.9501], [1.3957, 1.3005]]])
in0Con9806 = tf.constant([[0.8377, 0.272, 0.6033]])
print (np.array2string(model.predict([in0Con18724,in0Sub75532,in1Sub75532,in0Con47085,in0Glo83362,in0Con9806],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max28924.png')

LCon18724 = conv2D_layer([[[[0.0139, 0.1109]]]], 1, 1,[[[[0.6009, 0.6088, 0.9422, 0.0349], [0.4773, 0.1035, 0.1434, 0.1355]]]],[0, 0, 0, 0], 1, 1, false, 1, 1, Con18724), 
LRes52461 = reshape_layer(Con18724, [1, 4], Res52461), 
LFla93933 = flatten_layer(Res52461, Fla93933), 
LSub75532 = subtract_layer([[[[0.2318, 0.5531, 0.1922], [0.1541, 0.805, 0.5537]], [[0.5396, 0.8727, 0.7877], [0.4392, 0.7708, 0.8593]], [[0.4186, 0.2592, 0.8463], [0.0501, 0.8221, 0.0227]]]], [[[[0.3823, 0.6927, 0.5817], [0.5772, 0.2327, 0.9773]], [[0.4805, 0.1529, 0.6887], [0.7727, 0.4885, 0.7636]], [[0.0178, 0.2224, 0.4913], [0.7294, 0.8671, 0.05]]]], Sub75532), 
LRes78622 = reshape_layer(Sub75532, [3, 2, 3, 1], Res78622), 
LGlo78389 = global_average_pooling3D_layer(Res78622, Glo78389), 
LCon47085 = concatenate_layer([Glo78389,[[0.0376, 0.4497, 0.5949]]], 1, Con47085), 
LAve30763 = average_layer([Fla93933,Con47085], Ave30763), 
LGlo83362 = global_average_pooling1D_layer([[[1.7014, 1.9501], [1.3957, 1.3005]]], Glo83362), 
LRes89536 = reshape_layer(Glo83362, [2, 1], Res89536), 
LGlo31366 = global_average_pooling1D_layer(Res89536, Glo31366), 
LCon9806 = concatenate_layer([Glo31366,[[0.8377, 0.272, 0.6033]]], 1, Con9806), 
LMax28924 = maximum_layer([Ave30763,Con9806], Max28924), 
exec_layers([LCon18724,LRes52461,LFla93933,LSub75532,LRes78622,LGlo78389,LCon47085,LAve30763,LGlo83362,LRes89536,LGlo31366,LCon9806,LMax28924],["Con18724","Res52461","Fla93933","Sub75532","Res78622","Glo78389","Con47085","Ave30763","Glo83362","Res89536","Glo31366","Con9806","Max28924"],Max28924,"Max28924")

Actual (Unparsed): [[1.5869250, 0.8377000, 0.2720000, 0.6033000]]

Expected (Unparsed): [[1.586925,0.8377,0.272,0.6033]]

Actual:   [[1.587, 0.8377, 0.272, 0.6033]]

Expected: [[1.587, 0.8377, 0.272, 0.6033]]