import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU41273 = tf.keras.layers.Input(shape=([1, 1]))
in0LST51178 = tf.keras.layers.Input(shape=([3, 1]))
in0Con88804 = tf.keras.layers.Input(shape=([1]))
in0Sub20160 = tf.keras.layers.Input(shape=([2]))
in1Sub20160 = tf.keras.layers.Input(shape=([2]))

ELU41273 = keras.layers.ELU(alpha=8.776783470398065, name = 'ELU41273', input_shape=(1, 1))(in0ELU41273)
LST51178 = keras.layers.LSTM(1,recurrent_activation='sigmoid', name = 'LST51178', )(in0LST51178)
Res91741 = keras.layers.Reshape((1, 1), name = 'Res91741', )(LST51178)
Res46821 = keras.layers.Reshape((1, 1, 1), name = 'Res46821', )(Res91741)
Cro79710 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro79710', )(Res46821)
Res6582 = keras.layers.Reshape((1, 1), name = 'Res6582', )(Cro79710)
Dot47508 = keras.layers.Dot(axes=(2, 2), name = 'Dot47508', )([ELU41273,Res6582])
Fla36946 = keras.layers.Flatten(name = 'Fla36946', )(Dot47508)
Con88804 = keras.layers.Concatenate(axis=1, name = 'Con88804', )([Fla36946,in0Con88804])
Sub20160 = keras.layers.Subtract(name = 'Sub20160', )([in0Sub20160,in1Sub20160])
Mul79146 = keras.layers.Multiply(name = 'Mul79146', )([Con88804,Sub20160])
model = tf.keras.models.Model(inputs=[in0ELU41273,in0LST51178,in0Con88804,in0Sub20160,in1Sub20160], outputs=Mul79146)
w = model.get_layer('LST51178').get_weights() 
w[0] = np.array([[10, 5, 4, 3]])
w[1] = np.array([[1, 4, 5, 6]])
w[2] = np.array([9, 10, 5, 9])
model.get_layer('LST51178').set_weights(w) 
in0ELU41273 = tf.constant([[[0.7043]]])
in0LST51178 = tf.constant([[[5], [7], [7]]])
in0Con88804 = tf.constant([[0.8236]])
in0Sub20160 = tf.constant([[0.1408, 0.7273]])
in1Sub20160 = tf.constant([[0.6882, 0.1763]])
print (np.array2string(model.predict([in0ELU41273,in0LST51178,in0Con88804,in0Sub20160,in1Sub20160],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul79146.png')

LELU41273 = elu_layer([[[0.7043]]], 8.776783470398065, ELU41273), 
LLST51178 = lstm_layer([[[5], [7], [7]]],[[10, 5, 4, 3]],[[1, 4, 5, 6]],[9, 10, 5, 9], LST51178), 
LRes91741 = reshape_layer(LST51178, [1, 1], Res91741), 
LRes46821 = reshape_layer(Res91741, [1, 1, 1], Res46821), 
LCro79710 = cropping2D_layer(Res46821, 0, 0, 0, 0, Cro79710), 
LRes6582 = reshape_layer(Cro79710, [1, 1], Res6582), 
LDot47508 = dot_layer(ELU41273,Res6582, 2, 2, Dot47508), 
LFla36946 = flatten_layer(Dot47508, Fla36946), 
LCon88804 = concatenate_layer([Fla36946,[[0.8236]]], 1, Con88804), 
LSub20160 = subtract_layer([[0.1408, 0.7273]], [[0.6882, 0.1763]], Sub20160), 
LMul79146 = multiply_layer([Con88804,Sub20160], Mul79146), 
exec_layers([LELU41273,LLST51178,LRes91741,LRes46821,LCro79710,LRes6582,LDot47508,LFla36946,LCon88804,LSub20160,LMul79146],["ELU41273","LST51178","Res91741","Res46821","Cro79710","Res6582","Dot47508","Fla36946","Con88804","Sub20160","Mul79146"],Mul79146,"Mul79146")

Actual (Unparsed): [[-0.3836273, 0.4538036]]

Expected (Unparsed): [[-0.3836272602980042,0.4538035999999999]]

Actual:   [[-0.3836, 0.4539]]

Expected: [[-0.3836, 0.4539]]