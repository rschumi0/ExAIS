import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul15959 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Mul15959 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in0Up_15988 = tf.keras.layers.Input(shape=([1, 1]))
in0Sub9161 = tf.keras.layers.Input(shape=([2]))
in1Sub9161 = tf.keras.layers.Input(shape=([2]))
in0Add71794 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Add71794 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Mul15959 = keras.layers.Multiply(name = 'Mul15959', )([in0Mul15959,in1Mul15959])
Res45905 = keras.layers.Reshape((1, 1, 2), name = 'Res45905', )(Mul15959)
Res83966 = keras.layers.Reshape((1, 2), name = 'Res83966', )(Res45905)
Fla74666 = keras.layers.Flatten(name = 'Fla74666', )(Res83966)
Up_15988 = keras.layers.UpSampling1D(size=(2), name = 'Up_15988', )(in0Up_15988)
Fla85045 = keras.layers.Flatten(name = 'Fla85045', )(Up_15988)
Sub9161 = keras.layers.Subtract(name = 'Sub9161', )([in0Sub9161,in1Sub9161])
Ave26017 = keras.layers.Average(name = 'Ave26017', )([Fla85045,Sub9161])
Mul39706 = keras.layers.Multiply(name = 'Mul39706', )([Fla74666,Ave26017])
Res75029 = keras.layers.Reshape((2, 1), name = 'Res75029', )(Mul39706)
Add71794 = keras.layers.Add(name = 'Add71794', )([in0Add71794,in1Add71794])
Res25203 = keras.layers.Reshape((2, 1), name = 'Res25203', )(Add71794)
Mul53484 = keras.layers.Multiply(name = 'Mul53484', )([Res75029,Res25203])
model = tf.keras.models.Model(inputs=[in0Mul15959,in1Mul15959,in0Up_15988,in0Sub9161,in1Sub9161,in0Add71794,in1Add71794], outputs=Mul53484)
in0Mul15959 = tf.constant([[[[[0.4069, 0.618]]]]])
in1Mul15959 = tf.constant([[[[[0.7629, 0.8539]]]]])
in0Up_15988 = tf.constant([[[1.9918]]])
in0Sub9161 = tf.constant([[0.1622, 0.4604]])
in1Sub9161 = tf.constant([[0.6401, 0.3155]])
in0Add71794 = tf.constant([[[[[0.4947], [0.104]]]]])
in1Add71794 = tf.constant([[[[[0.3273], [0.4687]]]]])
print (np.array2string(model.predict([in0Mul15959,in1Mul15959,in0Up_15988,in0Sub9161,in1Sub9161,in0Add71794,in1Add71794],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul53484.png')

LMul15959 = multiply_layer([[[[[[0.4069, 0.618]]]]], [[[[[0.7629, 0.8539]]]]]], Mul15959), 
LRes45905 = reshape_layer(Mul15959, [1, 1, 2], Res45905), 
LRes83966 = reshape_layer(Res45905, [1, 2], Res83966), 
LFla74666 = flatten_layer(Res83966, Fla74666), 
LUp_15988 = up_sampling1D_layer([[[1.9918]]], 2, Up_15988), 
LFla85045 = flatten_layer(Up_15988, Fla85045), 
LSub9161 = subtract_layer([[0.1622, 0.4604]], [[0.6401, 0.3155]], Sub9161), 
LAve26017 = average_layer([Fla85045,Sub9161], Ave26017), 
LMul39706 = multiply_layer([Fla74666,Ave26017], Mul39706), 
LRes75029 = reshape_layer(Mul39706, [2, 1], Res75029), 
LAdd71794 = add_layer([[[[[[0.4947], [0.104]]]]], [[[[[0.3273], [0.4687]]]]]], Add71794), 
LRes25203 = reshape_layer(Add71794, [2, 1], Res25203), 
LMul53484 = multiply_layer([Res75029,Res25203], Mul53484), 
exec_layers([LMul15959,LRes45905,LRes83966,LFla74666,LUp_15988,LFla85045,LSub9161,LAve26017,LMul39706,LRes75029,LAdd71794,LRes25203,LMul53484],["Mul15959","Res45905","Res83966","Fla74666","Up_15988","Fla85045","Sub9161","Ave26017","Mul39706","Res75029","Add71794","Res25203","Mul53484"],Mul53484,"Mul53484")

Actual (Unparsed): [[[0.1931498], [0.3228763]]]

Expected (Unparsed): [[[0.193149823491729],[0.32287634335575893]]]

Actual:   [[[0.1932], [0.3229]]]

Expected: [[[0.1932], [0.3229]]]