import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den88198 = tf.keras.layers.Input(shape=([5, 2, 2]))

Den88198 = keras.layers.Dense(2,name = 'Den88198', )(in0Den88198)
Res15079 = keras.layers.Reshape((5, 4), name = 'Res15079', )(Den88198)
Up_9636 = keras.layers.UpSampling1D(size=(2), name = 'Up_9636', )(Res15079)
Con60759 = keras.layers.Conv1D(3, (5),strides=(11), padding='valid', dilation_rate=(1), name = 'Con60759', )(Up_9636)
Res36549 = keras.layers.Reshape((1, 3, 1), name = 'Res36549', )(Con60759)
Max53955 = keras.layers.MaxPool2D(pool_size=(1, 3), strides=(1, 2), padding='valid', name = 'Max53955', )(Res36549)
model = tf.keras.models.Model(inputs=[in0Den88198], outputs=Max53955)
w = model.get_layer('Den88198').get_weights() 
w[0] = np.array([[0.108, 0.8601], [0.8969, 0.8633]])
w[1] = np.array([0.4316, 0.2198])
model.get_layer('Den88198').set_weights(w) 
w = model.get_layer('Con60759').get_weights() 
w[0] = np.array([[[0.8817, 0.0731, 0.5376], [0.5055, 0.6159, 0.3925], [0.022, 0.9549, 0.589], [0.2062, 0.869, 0.8837]], [[0.2233, 0.0247, 0.1058], [0.9108, 0.4204, 0.8429], [0.683, 0.3404, 0.6528], [0.1056, 0.8903, 0.7952]], [[0.8436, 0.0528, 0.1109], [0.7532, 0.2606, 0.269], [0.3341, 0.211, 0.9815], [0.3135, 0.1886, 0.3892]], [[0.0973, 0.8967, 0.3883], [0.1263, 0.7114, 0.186], [0.3859, 0.3651, 0.9669], [0.4729, 0.721, 0.9238]], [[0.7863, 0.6148, 0.0187], [0.5689, 0.7452, 0.3771], [0.8426, 0.2565, 0.5163], [0.0424, 0.6439, 0.2943]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con60759').set_weights(w) 
in0Den88198 = tf.constant([[[[0.2685, 0.246], [0.2013, 0.3658]], [[0.7862, 0.9792], [0.8005, 0.959]], [[0.4078, 0.1953], [0.39, 0.6827]], [[0.7721, 0.8757], [0.4133, 0.8477]], [[0.8267, 0.6627], [0.2062, 0.6914]]]])
print (np.array2string(model.predict([in0Den88198],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max53955.png')

LDen88198 = dense_layer([[[[0.2685, 0.246], [0.2013, 0.3658]], [[0.7862, 0.9792], [0.8005, 0.959]], [[0.4078, 0.1953], [0.39, 0.6827]], [[0.7721, 0.8757], [0.4133, 0.8477]], [[0.8267, 0.6627], [0.2062, 0.6914]]]], [[0.108, 0.8601], [0.8969, 0.8633]],[0.4316, 0.2198], Den88198), 
LRes15079 = reshape_layer(Den88198, [5, 4], Res15079), 
LUp_9636 = up_sampling1D_layer(Res15079, 2, Up_9636), 
LCon60759 = conv1D_layer(Up_9636, 5,[[[0.8817, 0.0731, 0.5376], [0.5055, 0.6159, 0.3925], [0.022, 0.9549, 0.589], [0.2062, 0.869, 0.8837]], [[0.2233, 0.0247, 0.1058], [0.9108, 0.4204, 0.8429], [0.683, 0.3404, 0.6528], [0.1056, 0.8903, 0.7952]], [[0.8436, 0.0528, 0.1109], [0.7532, 0.2606, 0.269], [0.3341, 0.211, 0.9815], [0.3135, 0.1886, 0.3892]], [[0.0973, 0.8967, 0.3883], [0.1263, 0.7114, 0.186], [0.3859, 0.3651, 0.9669], [0.4729, 0.721, 0.9238]], [[0.7863, 0.6148, 0.0187], [0.5689, 0.7452, 0.3771], [0.8426, 0.2565, 0.5163], [0.0424, 0.6439, 0.2943]]],[0, 0, 0], 11, false, 1, Con60759), 
LRes36549 = reshape_layer(Con60759, [1, 3, 1], Res36549), 
LMax53955 = max_pool2D_layer(Res36549, 1, 3, 1, 2, false, Max53955), 
exec_layers([LDen88198,LRes15079,LUp_9636,LCon60759,LRes36549,LMax53955],["Den88198","Res15079","Up_9636","Con60759","Res36549","Max53955"],Max53955,"Max53955")

Actual (Unparsed): [[[[11.0597372]]]]

Expected (Unparsed): [[[[11.059737288692997]]]]

Actual:   [[[[11.0598]]]]

Expected: [[[[11.0598]]]]