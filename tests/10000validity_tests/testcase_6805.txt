import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add89939 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Add89939 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Add17991 = tf.keras.layers.Input(shape=([2, 2]))
in1Add17991 = tf.keras.layers.Input(shape=([2, 2]))
in0Ave16164 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave16164 = tf.keras.layers.Input(shape=([1, 1]))
in0Con35647 = tf.keras.layers.Input(shape=([2, 1]))

Add89939 = keras.layers.Add(name = 'Add89939', )([in0Add89939,in1Add89939])
Res17265 = keras.layers.Reshape((1, 2), name = 'Res17265', )(Add89939)
Zer40068 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer40068', )(Res17265)
Add17991 = keras.layers.Add(name = 'Add17991', )([in0Add17991,in1Add17991])
Ave16164 = keras.layers.Average(name = 'Ave16164', )([in0Ave16164,in1Ave16164])
Zer2439 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer2439', )(Ave16164)
Con35647 = keras.layers.Concatenate(axis=2, name = 'Con35647', )([Zer2439,in0Con35647])
Sub26298 = keras.layers.Subtract(name = 'Sub26298', )([Add17991,Con35647])
Max74216 = keras.layers.Maximum(name = 'Max74216', )([Zer40068,Sub26298])
model = tf.keras.models.Model(inputs=[in0Add89939,in1Add89939,in0Add17991,in1Add17991,in0Ave16164,in1Ave16164,in0Con35647], outputs=Max74216)
in0Add89939 = tf.constant([[[[0.265, 0.1302]]]])
in1Add89939 = tf.constant([[[[0.1282, 0.9964]]]])
in0Add17991 = tf.constant([[[0.1651, 0.4338], [0.5346, 0.7894]]])
in1Add17991 = tf.constant([[[0.5441, 0.5392], [0.1734, 0.928]]])
in0Ave16164 = tf.constant([[[0.6932]]])
in1Ave16164 = tf.constant([[[0.3429]]])
in0Con35647 = tf.constant([[[0.7007], [0.4205]]])
print (np.array2string(model.predict([in0Add89939,in1Add89939,in0Add17991,in1Add17991,in0Ave16164,in1Ave16164,in0Con35647],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max74216.png')

LAdd89939 = add_layer([[[[[0.265, 0.1302]]]], [[[[0.1282, 0.9964]]]]], Add89939), 
LRes17265 = reshape_layer(Add89939, [1, 2], Res17265), 
LZer40068 = zero_padding1D_layer(Res17265, 1, 0, Zer40068), 
LAdd17991 = add_layer([[[[0.1651, 0.4338], [0.5346, 0.7894]]], [[[0.5441, 0.5392], [0.1734, 0.928]]]], Add17991), 
LAve16164 = average_layer([[[[0.6932]]], [[[0.3429]]]], Ave16164), 
LZer2439 = zero_padding1D_layer(Ave16164, 1, 0, Zer2439), 
LCon35647 = concatenate_layer([Zer2439,[[[0.7007], [0.4205]]]], 2, Con35647), 
LSub26298 = subtract_layer(Add17991,Con35647, Sub26298), 
LMax74216 = maximum_layer([Zer40068,Sub26298], Max74216), 
exec_layers([LAdd89939,LRes17265,LZer40068,LAdd17991,LAve16164,LZer2439,LCon35647,LSub26298,LMax74216],["Add89939","Res17265","Zer40068","Add17991","Ave16164","Zer2439","Con35647","Sub26298","Max74216"],Max74216,"Max74216")

Actual (Unparsed): [[[0.7092000, 0.2723000], [0.3932000, 1.2968999]]]

Expected (Unparsed): [[[0.7092,0.2723000000000001],[0.3932,1.2969]]]

Actual:   [[[0.7092, 0.2723], [0.3932, 1.2969]]]

Expected: [[[0.7092, 0.2724], [0.3932, 1.2969]]]