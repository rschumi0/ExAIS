import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min77694 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Min77694 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in0Max79138 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max79138 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Min77694 = keras.layers.Minimum(name = 'Min77694', )([in0Min77694,in1Min77694])
Res43170 = keras.layers.Reshape((2, 2, 1), name = 'Res43170', )(Min77694)
Glo65305 = keras.layers.GlobalAveragePooling2D(name = 'Glo65305', )(Res43170)
Thr41487 = keras.layers.ThresholdedReLU(theta=8.056592488451079, name = 'Thr41487', )(Glo65305)
Res22767 = keras.layers.Reshape((1, 1), name = 'Res22767', )(Thr41487)
Res91720 = keras.layers.Reshape((1, 1, 1), name = 'Res91720', )(Res22767)
Res37844 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res37844', )(Res91720)
Zer53443 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer53443', )(Res37844)
Max79138 = keras.layers.Maximum(name = 'Max79138', )([in0Max79138,in1Max79138])
Sub28320 = keras.layers.Subtract(name = 'Sub28320', )([Zer53443,Max79138])
Res83323 = keras.layers.Reshape((1, 1, 2), name = 'Res83323', )(Sub28320)
Res61971 = keras.layers.Reshape((1, 2), name = 'Res61971', )(Res83323)
Max18337 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='same', name = 'Max18337', )(Res61971)
model = tf.keras.models.Model(inputs=[in0Min77694,in1Min77694,in0Max79138,in1Max79138], outputs=Max18337)
in0Min77694 = tf.constant([[[[[0.9526]], [[0.7175]]], [[[0.044]], [[0.1819]]]]])
in1Min77694 = tf.constant([[[[[0.8483]], [[0.2744]]], [[[0.1372]], [[0.9383]]]]])
in0Max79138 = tf.constant([[[[[0.4839], [0.0514]]]]])
in1Max79138 = tf.constant([[[[[0.6277], [0.5411]]]]])
print (np.array2string(model.predict([in0Min77694,in1Min77694,in0Max79138,in1Max79138],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max18337.png')

LMin77694 = minimum_layer([[[[[[0.9526]], [[0.7175]]], [[[0.044]], [[0.1819]]]]], [[[[[0.8483]], [[0.2744]]], [[[0.1372]], [[0.9383]]]]]], Min77694), 
LRes43170 = reshape_layer(Min77694, [2, 2, 1], Res43170), 
LGlo65305 = global_average_pooling2D_layer(Res43170, Glo65305), 
LThr41487 = thresholded_relu_layer(Glo65305, 8.056592488451079, Thr41487), 
LRes22767 = reshape_layer(Thr41487, [1, 1], Res22767), 
LRes91720 = reshape_layer(Res22767, [1, 1, 1], Res91720), 
LRes37844 = reshape_layer(Res91720, [1, 1, 1, 1], Res37844), 
LZer53443 = zero_padding3D_layer(Res37844, 0, 0, 0, 0, 1, 0, Zer53443), 
LMax79138 = maximum_layer([[[[[[0.4839], [0.0514]]]]], [[[[[0.6277], [0.5411]]]]]], Max79138), 
LSub28320 = subtract_layer(Zer53443,Max79138, Sub28320), 
LRes83323 = reshape_layer(Sub28320, [1, 1, 2], Res83323), 
LRes61971 = reshape_layer(Res83323, [1, 2], Res61971), 
LMax18337 = max_pool1D_layer(Res61971, 1, 1, true, Max18337), 
exec_layers([LMin77694,LRes43170,LGlo65305,LThr41487,LRes22767,LRes91720,LRes37844,LZer53443,LMax79138,LSub28320,LRes83323,LRes61971,LMax18337],["Min77694","Res43170","Glo65305","Thr41487","Res22767","Res91720","Res37844","Zer53443","Max79138","Sub28320","Res83323","Res61971","Max18337"],Max18337,"Max18337")

Actual (Unparsed): [[[-0.6277000, -0.5411000]]]

Expected (Unparsed): [[[-0.6277,-0.5411]]]

Actual:   [[[-0.6277, -0.5411]]]

Expected: [[[-0.6277, -0.5411]]]