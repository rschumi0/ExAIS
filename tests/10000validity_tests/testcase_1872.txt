import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dep81618 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con51539 = tf.keras.layers.Input(shape=([1, 6]))
in0Dot5261 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot5261 = tf.keras.layers.Input(shape=([2, 2]))
in0Con49215 = tf.keras.layers.Input(shape=([1, 2, 3]))
in0Con73468 = tf.keras.layers.Input(shape=([1, 2, 1]))

Dep81618 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep81618', )(in0Dep81618)
Res60063 = keras.layers.Reshape((1, 1), name = 'Res60063', )(Dep81618)
Con26798 = keras.layers.Conv1D(2, (1),strides=(1), padding='same', dilation_rate=(1), name = 'Con26798', )(Res60063)
Con51539 = keras.layers.Concatenate(axis=2, name = 'Con51539', )([Con26798,in0Con51539])
Dot5261 = keras.layers.Dot(axes=(1, 1), name = 'Dot5261', )([in0Dot5261,in1Dot5261])
Cro35677 = keras.layers.Cropping1D(cropping=((1, 0)), name = 'Cro35677', )(Dot5261)
Res62985 = keras.layers.Reshape((1, 2, 1), name = 'Res62985', )(Cro35677)
Con49215 = keras.layers.Concatenate(axis=3, name = 'Con49215', )([Res62985,in0Con49215])
Con73468 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='same', dilation_rate=(1, 1), name = 'Con73468', )(in0Con73468)
ELU68206 = keras.layers.ELU(alpha=1.634806411222085, name = 'ELU68206', )(Con73468)
Bat20928 = keras.layers.BatchNormalization(axis=3, epsilon=0.6681578407103252,  name = 'Bat20928', )(ELU68206)
Mul95298 = keras.layers.Multiply(name = 'Mul95298', )([Con49215,Bat20928])
Res87478 = keras.layers.Reshape((1, 8), name = 'Res87478', )(Mul95298)
Up_24127 = keras.layers.UpSampling1D(size=(1), name = 'Up_24127', )(Res87478)
Max36036 = keras.layers.Maximum(name = 'Max36036', )([Con51539,Up_24127])
model = tf.keras.models.Model(inputs=[in0Dep81618,in0Con51539,in0Dot5261,in1Dot5261,in0Con49215,in0Con73468], outputs=Max36036)
w = model.get_layer('Dep81618').get_weights() 
w[0] = np.array([[[[0.2132]]]])
w[1] = np.array([0])
model.get_layer('Dep81618').set_weights(w) 
w = model.get_layer('Con26798').get_weights() 
w[0] = np.array([[[0.8578, 0.2921]]])
w[1] = np.array([0, 0])
model.get_layer('Con26798').set_weights(w) 
w = model.get_layer('Con73468').get_weights() 
w[0] = np.array([[[[0.5326, 0.3498, 0.3381, 0.7245]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con73468').set_weights(w) 
w = model.get_layer('Bat20928').get_weights() 
w[0] = np.array([0.0454, 0.8889, 0.212, 0.6324])
w[1] = np.array([0.8298, 0.0384, 0.3245, 0.4023])
w[2] = np.array([0.2962, 0.059, 0.4809, 0.0981])
w[3] = np.array([0.7632, 0.2318, 0.2537, 0.7056])
model.get_layer('Bat20928').set_weights(w) 
in0Dep81618 = tf.constant([[[[0.5628]]]])
in0Con51539 = tf.constant([[[0.7519, 0.3928, 0.5975, 0.3129, 0.248, 0.1482]]])
in0Dot5261 = tf.constant([[[0.9418, 0.9725], [0.2802, 0.2491]]])
in1Dot5261 = tf.constant([[[0.5343, 0.2911], [0.0151, 0.9671]]])
in0Con49215 = tf.constant([[[[0.0146, 0.1281, 0.2708], [0.3359, 0.5742, 0.704]]]])
in0Con73468 = tf.constant([[[[0.6391], [0.7578]]]])
print (np.array2string(model.predict([in0Dep81618,in0Con51539,in0Dot5261,in1Dot5261,in0Con49215,in0Con73468],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max36036.png')

LDep81618 = depthwise_conv2D_layer([[[[0.5628]]]], 1, 1,[[[[0.2132]]]],[0], 1, 1, false, Dep81618), 
LRes60063 = reshape_layer(Dep81618, [1, 1], Res60063), 
LCon26798 = conv1D_layer(Res60063, 1,[[[0.8578, 0.2921]]],[0, 0], 1, true, 1, Con26798), 
LCon51539 = concatenate_layer([Con26798,[[[0.7519, 0.3928, 0.5975, 0.3129, 0.248, 0.1482]]]], 2, Con51539), 
LDot5261 = dot_layer([[[0.9418, 0.9725], [0.2802, 0.2491]]], [[[0.5343, 0.2911], [0.0151, 0.9671]]], 1, 1, Dot5261), 
LCro35677 = cropping1D_layer(Dot5261, 1, 0, Cro35677), 
LRes62985 = reshape_layer(Cro35677, [1, 2, 1], Res62985), 
LCon49215 = concatenate_layer([Res62985,[[[[0.0146, 0.1281, 0.2708], [0.3359, 0.5742, 0.704]]]]], 3, Con49215), 
LCon73468 = conv2D_layer([[[[0.6391], [0.7578]]]], 1, 1,[[[[0.5326, 0.3498, 0.3381, 0.7245]]]],[0, 0, 0, 0], 1, 1, true, 1, 1, Con73468), 
LELU68206 = elu_layer(Con73468, 1.634806411222085, ELU68206), 
LBat20928 = batch_normalization_layer(ELU68206, 3, 0.6681578407103252, [0.0454, 0.8889, 0.212, 0.6324], [0.8298, 0.0384, 0.3245, 0.4023], [0.2962, 0.059, 0.4809, 0.0981], [0.7632, 0.2318, 0.2537, 0.7056], Bat20928), 
LMul95298 = multiply_layer([Con49215,Bat20928], Mul95298), 
LRes87478 = reshape_layer(Mul95298, [1, 8], Res87478), 
LUp_24127 = up_sampling1D_layer(Res87478, 1, Up_24127), 
LMax36036 = maximum_layer([Con51539,Up_24127], Max36036), 
exec_layers([LDep81618,LRes60063,LCon26798,LCon51539,LDot5261,LCro35677,LRes62985,LCon49215,LCon73468,LELU68206,LBat20928,LMul95298,LRes87478,LUp_24127,LMax36036],["Dep81618","Res60063","Con26798","Con51539","Dot5261","Cro35677","Res62985","Con49215","Con73468","ELU68206","Bat20928","Mul95298","Res87478","Up_24127","Max36036"],Max36036,"Max36036")

Actual (Unparsed): [[[0.4351685, 0.0350488, 0.7519000, 0.3928000, 0.5975000, 0.3129000, 0.2480000, 0.4545024]]]

Expected (Unparsed): [[[0.43516842630916613,0.035048775216,0.7519,0.3928,0.5975,0.3129,0.248,0.4545024132617098]]]

Actual:   [[[0.4352, 0.0351, 0.7519, 0.3928, 0.5975, 0.3129, 0.248, 0.4546]]]

Expected: [[[0.4352, 0.0351, 0.7519, 0.3928, 0.5975, 0.3129, 0.248, 0.4546]]]