import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub63386 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub63386 = tf.keras.layers.Input(shape=([2, 3, 3]))

Sub63386 = keras.layers.Subtract(name = 'Sub63386', )([in0Sub63386,in1Sub63386])
Res76814 = keras.layers.Reshape((2, 3, 3, 1), name = 'Res76814', )(Sub63386)
Con48498 = keras.layers.Conv3DTranspose(2, (1, 1, 2),strides=(4, 3, 1), padding='valid', name = 'Con48498', )(Res76814)
Lay6053 = keras.layers.LayerNormalization(axis=1, epsilon=1.821259125370595, name = 'Lay6053', )(Con48498)
Res28481 = keras.layers.Reshape((8, 9, 8), name = 'Res28481', )(Lay6053)
Res90012 = keras.layers.Reshape((8, 72), name = 'Res90012', )(Res28481)
Cro37116 = keras.layers.Cropping1D(cropping=((4, 0)), name = 'Cro37116', )(Res90012)
model = tf.keras.models.Model(inputs=[in0Sub63386,in1Sub63386], outputs=Cro37116)
w = model.get_layer('Con48498').get_weights() 
w[0] = np.array([[[[[0.027], [0.7309]], [[0.0128], [0.8881]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con48498').set_weights(w) 
in0Sub63386 = tf.constant([[[[0.588, 0.0841, 0.9671], [0.5391, 0.3423, 0.4689], [0.2066, 0.4811, 0.8335]], [[0.2724, 0.7652, 0.279], [0.2317, 0.9238, 0.1174], [0.0907, 0.9254, 0.1469]]]])
in1Sub63386 = tf.constant([[[[0.3625, 0.5585, 0.6385], [0.5244, 0.9606, 0.5512], [0.6108, 0.0398, 0.2099]], [[0.6246, 0.5427, 0.6279], [0.597, 0.8515, 0.159], [0.3604, 0.5106, 0.6015]]]])
print (np.array2string(model.predict([in0Sub63386,in1Sub63386],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro37116.png')

LSub63386 = subtract_layer([[[[0.588, 0.0841, 0.9671], [0.5391, 0.3423, 0.4689], [0.2066, 0.4811, 0.8335]], [[0.2724, 0.7652, 0.279], [0.2317, 0.9238, 0.1174], [0.0907, 0.9254, 0.1469]]]], [[[[0.3625, 0.5585, 0.6385], [0.5244, 0.9606, 0.5512], [0.6108, 0.0398, 0.2099]], [[0.6246, 0.5427, 0.6279], [0.597, 0.8515, 0.159], [0.3604, 0.5106, 0.6015]]]], Sub63386), 
LRes76814 = reshape_layer(Sub63386, [2, 3, 3, 1], Res76814), 
LCon48498 = conv3D_transpose_layer(Res76814, 1, 1, 2,[[[[[0.027], [0.7309]], [[0.0128], [0.8881]]]]],[0, 0], 4, 3, 1, false, Con48498), 
LLay6053 = layer_normalization_layer(Con48498, 1, 1.821259125370595, Lay6053), 
LRes28481 = reshape_layer(Lay6053, [8, 9, 8], Res28481), 
LRes90012 = reshape_layer(Res28481, [8, 72], Res90012), 
LCro37116 = cropping1D_layer(Res90012, 4, 0, Cro37116), 
exec_layers([LSub63386,LRes76814,LCon48498,LLay6053,LRes28481,LRes90012,LCro37116],["Sub63386","Res76814","Con48498","Lay6053","Res28481","Res90012","Cro37116"],Cro37116,"Cro37116")

Actual (Unparsed): [[[-0.0067295, -0.1815965, 0.0018912, -0.0836998, -0.0045206, -0.0204237, -0.0032851, -0.2265291, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, -0.0064317, -0.1737319, -0.0002371, -0.1344993, 0.0008106, 0.0774753, -0.0002477, -0.0171809, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, -0.0037105, -0.1001163, 0.0043988, 0.0446387, -0.0065983, -0.0539609, -0.0045121, -0.3081645, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0003169, 0.0085504, 0.0007802, 0.0274446, 0.0003494, 0.0220735, 0.0000241, 0.0016596, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0008768, 0.0236840, 0.0017811, 0.0653496, 0.0009572, 0.0527063, 0.0001469, 0.0101901, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0016853, 0.0454731, -0.0013420, -0.0025220, -0.0014376, -0.0801694, -0.0002004, -0.0136843, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0003169, 0.0085504, 0.0007802, 0.0274446, 0.0003494, 0.0220735, 0.0000241, 0.0016596, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0008768, 0.0236840, 0.0017811, 0.0653496, 0.0009572, 0.0527063, 0.0001469, 0.0101901, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0016853, 0.0454731, -0.0013420, -0.0025220, -0.0014376, -0.0801694, -0.0002004, -0.0136843, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0003169, 0.0085504, 0.0007802, 0.0274446, 0.0003494, 0.0220735, 0.0000241, 0.0016596, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0008768, 0.0236840, 0.0017811, 0.0653496, 0.0009572, 0.0527063, 0.0001469, 0.0101901, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0016853, 0.0454731, -0.0013420, -0.0025220, -0.0014376, -0.0801694, -0.0002004, -0.0136843, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[-0.006729512235154949,-0.181596516292513,0.0018911731527751707,-0.0836997660244807,-0.0045206038038836304,-0.02042372533604309,-0.00328514394768999,-0.22652905937296897,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-0.006431670892054332,-0.1737318710286179,-0.00023713810171271214,-0.13449929528153312,0.0008106457518275881,0.07747528732457713,-0.00024766950499944103,-0.017180945551030054,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-0.003710496744511419,-0.10011633690883544,0.004398776524443101,0.04463868815855133,-0.006598346577088422,-0.053960968033729954,-0.004512099089614894,-0.3081645359269051,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0003168565164792941,0.008550402695849493,0.0007801761472703907,0.027444583454096207,0.0003494165305531552,0.022073502464549817,2.4067422908840727e-5,0.0016595834946303608,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0008767959463232943,0.02368395442205204,0.0017811181028899213,0.06534956055235353,0.0009571840859551834,0.052706345755345586,0.00014689445509540817,0.010190134771530036,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0016853162742645046,0.045473073696073465,-0.001342006996139052,-0.002521966218393786,-0.0014376006832578535,-0.08016940750657527,-0.00020036385152790928,-0.013684325653383518,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0003168565164792941,0.008550402695849493,0.0007801761472703907,0.027444583454096207,0.0003494165305531552,0.022073502464549817,2.4067422908840727e-5,0.0016595834946303608,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0008767959463232943,0.02368395442205204,0.0017811181028899213,0.06534956055235353,0.0009571840859551834,0.052706345755345586,0.00014689445509540817,0.010190134771530036,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0016853162742645046,0.045473073696073465,-0.001342006996139052,-0.002521966218393786,-0.0014376006832578535,-0.08016940750657527,-0.00020036385152790928,-0.013684325653383518,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0003168565164792941,0.008550402695849493,0.0007801761472703907,0.027444583454096207,0.0003494165305531552,0.022073502464549817,2.4067422908840727e-5,0.0016595834946303608,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0008767959463232943,0.02368395442205204,0.0017811181028899213,0.06534956055235353,0.0009571840859551834,0.052706345755345586,0.00014689445509540817,0.010190134771530036,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0016853162742645046,0.045473073696073465,-0.001342006996139052,-0.002521966218393786,-0.0014376006832578535,-0.08016940750657527,-0.00020036385152790928,-0.013684325653383518,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]]]

Actual:   [[[-0.0067, -0.1815, 0.0019, -0.0836, -0.0045, -0.0204, -0.0032, -0.2265, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0064, -0.1737, -0.0002, -0.1344, 0.0009, 0.0775, -0.0002, -0.0171, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0037, -0.1001, 0.0044, 0.0447, -0.0065, -0.0539, -0.0045, -0.3081, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.0004, 0.0086, 0.0008, 0.0275, 0.0004, 0.0221, 0.0001, 0.0017, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009, 0.0237, 0.0018, 0.0654, 0.001, 0.0528, 0.0002, 0.0102, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0017, 0.0455, -0.0013, -0.0025, -0.0014, -0.0801, -0.0002, -0.0136, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.0004, 0.0086, 0.0008, 0.0275, 0.0004, 0.0221, 0.0001, 0.0017, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009, 0.0237, 0.0018, 0.0654, 0.001, 0.0528, 0.0002, 0.0102, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0017, 0.0455, -0.0013, -0.0025, -0.0014, -0.0801, -0.0002, -0.0136, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.0004, 0.0086, 0.0008, 0.0275, 0.0004, 0.0221, 0.0001, 0.0017, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009, 0.0237, 0.0018, 0.0654, 0.001, 0.0528, 0.0002, 0.0102, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0017, 0.0455, -0.0013, -0.0025, -0.0014, -0.0801, -0.0002, -0.0136, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[-0.0067, -0.1815, 0.0019, -0.0836, -0.0045, -0.0204, -0.0032, -0.2265, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0064, -0.1737, -0.0002, -0.1344, 0.0009, 0.0775, -0.0002, -0.0171, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0037, -0.1001, 0.0044, 0.0447, -0.0065, -0.0539, -0.0045, -0.3081, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.0004, 0.0086, 0.0008, 0.0275, 0.0004, 0.0221, 0.0001, 0.0017, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009, 0.0237, 0.0018, 0.0654, 0.001, 0.0528, 0.0002, 0.0102, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0017, 0.0455, -0.0013, -0.0025, -0.0014, -0.0801, -0.0002, -0.0136, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.0004, 0.0086, 0.0008, 0.0275, 0.0004, 0.0221, 0.0001, 0.0017, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009, 0.0237, 0.0018, 0.0654, 0.001, 0.0528, 0.0002, 0.0102, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0017, 0.0455, -0.0013, -0.0025, -0.0014, -0.0801, -0.0002, -0.0136, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0.0004, 0.0086, 0.0008, 0.0275, 0.0004, 0.0221, 0.0001, 0.0017, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009, 0.0237, 0.0018, 0.0654, 0.001, 0.0528, 0.0002, 0.0102, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0017, 0.0455, -0.0013, -0.0025, -0.0014, -0.0801, -0.0002, -0.0136, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]