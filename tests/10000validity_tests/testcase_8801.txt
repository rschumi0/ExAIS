import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add32741 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Add32741 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con69156 = tf.keras.layers.Input(shape=([3, 1]))
in0Dot52124 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot52124 = tf.keras.layers.Input(shape=([3, 3]))
in0Min78379 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min78379 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Ave61481 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Ave61481 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con36829 = tf.keras.layers.Input(shape=([3, 2]))

Add32741 = keras.layers.Add(name = 'Add32741', )([in0Add32741,in1Add32741])
Res53887 = keras.layers.Reshape((2, 2), name = 'Res53887', )(Add32741)
Zer71868 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer71868', )(Res53887)
Con69156 = keras.layers.Concatenate(axis=2, name = 'Con69156', )([Zer71868,in0Con69156])
Dot52124 = keras.layers.Dot(axes=(2, 2), name = 'Dot52124', )([in0Dot52124,in1Dot52124])
Add4940 = keras.layers.Add(name = 'Add4940', )([Con69156,Dot52124])
Min78379 = keras.layers.Minimum(name = 'Min78379', )([in0Min78379,in1Min78379])
Glo74681 = keras.layers.GlobalAveragePooling2D(name = 'Glo74681', )(Min78379)
Res86966 = keras.layers.Reshape((2, 1), name = 'Res86966', )(Glo74681)
Ave61481 = keras.layers.Average(name = 'Ave61481', )([in0Ave61481,in1Ave61481])
Res24795 = keras.layers.Reshape((2, 1), name = 'Res24795', )(Ave61481)
Ave63242 = keras.layers.Average(name = 'Ave63242', )([Res86966,Res24795])
Zer51212 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer51212', )(Ave63242)
Con36829 = keras.layers.Concatenate(axis=2, name = 'Con36829', )([Zer51212,in0Con36829])
Add2708 = keras.layers.Add(name = 'Add2708', )([Add4940,Con36829])
model = tf.keras.models.Model(inputs=[in0Add32741,in1Add32741,in0Con69156,in0Dot52124,in1Dot52124,in0Min78379,in1Min78379,in0Ave61481,in1Ave61481,in0Con36829], outputs=Add2708)
in0Add32741 = tf.constant([[[[0.4545, 0.4747]], [[0.8121, 0.8538]]]])
in1Add32741 = tf.constant([[[[0.5512, 0.6701]], [[0.5023, 0.4437]]]])
in0Con69156 = tf.constant([[[0.8111], [0.682], [0.5924]]])
in0Dot52124 = tf.constant([[[0.0533, 0.0317, 0.043], [0.7873, 0.4192, 0.9449], [0.7219, 0.742, 0.6506]]])
in1Dot52124 = tf.constant([[[0.4003, 0.644, 0.1199], [0.8581, 0.1534, 0.6011], [0.4927, 0.8957, 0.8377]]])
in0Min78379 = tf.constant([[[[0.7215, 0.154]], [[0.777, 0.0429]]]])
in1Min78379 = tf.constant([[[[0.5243, 0.3173]], [[0.3857, 0.0451]]]])
in0Ave61481 = tf.constant([[[[[0.3827]], [[0.0185]]]]])
in1Ave61481 = tf.constant([[[[[0.2034]], [[0.2251]]]]])
in0Con36829 = tf.constant([[[0.8152, 0.2386], [0.4243, 0.9136], [0.6079, 0.0693]]])
print (np.array2string(model.predict([in0Add32741,in1Add32741,in0Con69156,in0Dot52124,in1Dot52124,in0Min78379,in1Min78379,in0Ave61481,in1Ave61481,in0Con36829],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add2708.png')

LAdd32741 = add_layer([[[[[0.4545, 0.4747]], [[0.8121, 0.8538]]]], [[[[0.5512, 0.6701]], [[0.5023, 0.4437]]]]], Add32741), 
LRes53887 = reshape_layer(Add32741, [2, 2], Res53887), 
LZer71868 = zero_padding1D_layer(Res53887, 1, 0, Zer71868), 
LCon69156 = concatenate_layer([Zer71868,[[[0.8111], [0.682], [0.5924]]]], 2, Con69156), 
LDot52124 = dot_layer([[[0.0533, 0.0317, 0.043], [0.7873, 0.4192, 0.9449], [0.7219, 0.742, 0.6506]]], [[[0.4003, 0.644, 0.1199], [0.8581, 0.1534, 0.6011], [0.4927, 0.8957, 0.8377]]], 2, 2, Dot52124), 
LAdd4940 = add_layer([Con69156,Dot52124], Add4940), 
LMin78379 = minimum_layer([[[[[0.7215, 0.154]], [[0.777, 0.0429]]]], [[[[0.5243, 0.3173]], [[0.3857, 0.0451]]]]], Min78379), 
LGlo74681 = global_average_pooling2D_layer(Min78379, Glo74681), 
LRes86966 = reshape_layer(Glo74681, [2, 1], Res86966), 
LAve61481 = average_layer([[[[[[0.3827]], [[0.0185]]]]], [[[[[0.2034]], [[0.2251]]]]]], Ave61481), 
LRes24795 = reshape_layer(Ave61481, [2, 1], Res24795), 
LAve63242 = average_layer([Res86966,Res24795], Ave63242), 
LZer51212 = zero_padding1D_layer(Ave63242, 1, 0, Zer51212), 
LCon36829 = concatenate_layer([Zer51212,[[[0.8152, 0.2386], [0.4243, 0.9136], [0.6079, 0.0693]]]], 2, Con36829), 
LAdd2708 = add_layer([Add4940,Con36829], Add2708), 
exec_layers([LAdd32741,LRes53887,LZer71868,LCon69156,LDot52124,LAdd4940,LMin78379,LGlo74681,LRes86966,LAve61481,LRes24795,LAve63242,LZer51212,LCon36829,LAdd2708],["Add32741","Res53887","Zer71868","Con69156","Dot52124","Add4940","Min78379","Glo74681","Res86966","Ave61481","Res24795","Ave63242","Zer51212","Con36829","Add2708"],Add2708,"Add2708")

Actual (Unparsed): [[[0.0469065, 0.8916468, 1.1403757], [2.0781394, 2.8769668, 3.1505229], [2.2693565, 3.0297609, 2.2269972]]]

Expected (Unparsed): [[[0.046906489999999995,0.89164681,1.1403757],[2.0781395000000003,2.8769668000000004,3.1505228800000005],[2.26935651,3.0297608499999997,2.2269971500000003]]]

Actual:   [[[0.047, 0.8917, 1.1404], [2.0782, 2.877, 3.1506], [2.2694, 3.0298, 2.227]]]

Expected: [[[0.047, 0.8917, 1.1404], [2.0782, 2.877, 3.1506], [2.2694, 3.0298, 2.227]]]