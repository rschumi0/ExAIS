import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sep99488 = tf.keras.layers.Input(shape=([2, 2]))
in0Con44719 = tf.keras.layers.Input(shape=([4]))
in0Con7725 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Sep99488 = keras.layers.SeparableConv1D(2, (2),strides=(2), padding='valid', name = 'Sep99488', )(in0Sep99488)
Fla33423 = keras.layers.Flatten(name = 'Fla33423', )(Sep99488)
Con44719 = keras.layers.Concatenate(axis=1, name = 'Con44719', )([Fla33423,in0Con44719])
Con7725 = keras.layers.Conv3DTranspose(3, (2, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con7725', )(in0Con7725)
Res87116 = keras.layers.Reshape((2, 1, 3), name = 'Res87116', )(Con7725)
Ave17664 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='same', name = 'Ave17664', )(Res87116)
Fla6980 = keras.layers.Flatten(name = 'Fla6980', )(Ave17664)
Min98182 = keras.layers.Minimum(name = 'Min98182', )([Con44719,Fla6980])
model = tf.keras.models.Model(inputs=[in0Sep99488,in0Con44719,in0Con7725], outputs=Min98182)
w = model.get_layer('Sep99488').get_weights() 
w[0] = np.array([[[0.7776], [0.6479]], [[0.065], [0.9571]]])
w[1] = np.array([[[0.6121, 0.2017], [0.849, 0.2388]]])
w[2] = np.array([0, 0])
model.get_layer('Sep99488').set_weights(w) 
w = model.get_layer('Con7725').get_weights() 
w[0] = np.array([[[[[0.6718], [0.833], [0.7169]]]], [[[[0.9396], [0.4802], [0.7843]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con7725').set_weights(w) 
in0Sep99488 = tf.constant([[[0.2079, 0.916], [0.4521, 0.4683]]])
in0Con44719 = tf.constant([[0.1085, 0.4828, 0.3733, 0.2794]])
in0Con7725 = tf.constant([[[[[0.031]]], [[[0.9388]]]]])
print (np.array2string(model.predict([in0Sep99488,in0Con44719,in0Con7725],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min98182.png')

LSep99488 = separable_conv1D_layer([[[0.2079, 0.916], [0.4521, 0.4683]]], 2,[[[[0.7776], [0.6479]], [[0.065], [0.9571]]],[[[0.6121, 0.2017], [0.849, 0.2388]]]],[0, 0], 2, false, Sep99488), 
LFla33423 = flatten_layer(Sep99488, Fla33423), 
LCon44719 = concatenate_layer([Fla33423,[[0.1085, 0.4828, 0.3733, 0.2794]]], 1, Con44719), 
LCon7725 = conv3D_transpose_layer([[[[[0.031]]], [[[0.9388]]]]], 2, 1, 1,[[[[[0.6718], [0.833], [0.7169]]]], [[[[0.9396], [0.4802], [0.7843]]]]],[0, 0, 0], 1, 1, 1, true, Con7725), 
LRes87116 = reshape_layer(Con7725, [2, 1, 3], Res87116), 
LAve17664 = average_pooling2D_layer(Res87116, 1, 1, 1, 1, true, Ave17664), 
LFla6980 = flatten_layer(Ave17664, Fla6980), 
LMin98182 = minimum_layer([Con44719,Fla6980], Min98182), 
exec_layers([LSep99488,LFla33423,LCon44719,LCon7725,LRes87116,LAve17664,LFla6980,LMin98182],["Sep99488","Fla33423","Con44719","Con7725","Res87116","Ave17664","Fla6980","Min98182"],Min98182,"Min98182")

Actual (Unparsed): [[0.0208258, 0.0258230, 0.0222239, 0.4828000, 0.3733000, 0.2794000]]

Expected (Unparsed): [[0.0208258,0.025823,0.022223899999999998,0.4828,0.3733,0.2794]]

Actual:   [[0.0209, 0.0259, 0.0223, 0.4828, 0.3733, 0.2794]]

Expected: [[0.0209, 0.0259, 0.0223, 0.4828, 0.3733, 0.2794]]