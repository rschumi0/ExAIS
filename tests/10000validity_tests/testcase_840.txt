import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min51862 = tf.keras.layers.Input(shape=([2, 1]))
in1Min51862 = tf.keras.layers.Input(shape=([2, 1]))
in0Min18065 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Min18065 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

Min51862 = keras.layers.Minimum(name = 'Min51862', )([in0Min51862,in1Min51862])
Lay48077 = keras.layers.LayerNormalization(axis=1, epsilon=2.476614344422906, name = 'Lay48077', )(Min51862)
Fla61135 = keras.layers.Flatten(name = 'Fla61135', )(Lay48077)
Res17413 = keras.layers.Reshape((2, 1), name = 'Res17413', )(Fla61135)
Res98854 = keras.layers.Reshape((2, 1, 1), name = 'Res98854', )(Res17413)
Up_24808 = keras.layers.UpSampling2D(size=(1, 1), name = 'Up_24808', )(Res98854)
Res75449 = keras.layers.Reshape((2, 1), name = 'Res75449', )(Up_24808)
Glo75573 = keras.layers.GlobalMaxPool1D(name = 'Glo75573', )(Res75449)
Res77517 = keras.layers.Reshape((1, 1), name = 'Res77517', )(Glo75573)
Res16301 = keras.layers.Reshape((1, 1, 1), name = 'Res16301', )(Res77517)
Res19653 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res19653', )(Res16301)
Zer67120 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer67120', )(Res19653)
Min18065 = keras.layers.Minimum(name = 'Min18065', )([in0Min18065,in1Min18065])
Ave89024 = keras.layers.Average(name = 'Ave89024', )([Zer67120,Min18065])
model = tf.keras.models.Model(inputs=[in0Min51862,in1Min51862,in0Min18065,in1Min18065], outputs=Ave89024)
in0Min51862 = tf.constant([[[0.536], [0.8288]]])
in1Min51862 = tf.constant([[[0.1801], [0.7791]]])
in0Min18065 = tf.constant([[[[[0.845], [0.4543]]]]])
in1Min18065 = tf.constant([[[[[0.7423], [0.5466]]]]])
print (np.array2string(model.predict([in0Min51862,in1Min51862,in0Min18065,in1Min18065],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave89024.png')

LMin51862 = minimum_layer([[[[0.536], [0.8288]]], [[[0.1801], [0.7791]]]], Min51862), 
LLay48077 = layer_normalization_layer(Min51862, 1, 2.476614344422906, Lay48077), 
LFla61135 = flatten_layer(Lay48077, Fla61135), 
LRes17413 = reshape_layer(Fla61135, [2, 1], Res17413), 
LRes98854 = reshape_layer(Res17413, [2, 1, 1], Res98854), 
LUp_24808 = up_sampling2D_layer(Res98854, 1, 1, Up_24808), 
LRes75449 = reshape_layer(Up_24808, [2, 1], Res75449), 
LGlo75573 = global_max_pool1D_layer(Res75449, Glo75573), 
LRes77517 = reshape_layer(Glo75573, [1, 1], Res77517), 
LRes16301 = reshape_layer(Res77517, [1, 1, 1], Res16301), 
LRes19653 = reshape_layer(Res16301, [1, 1, 1, 1], Res19653), 
LZer67120 = zero_padding3D_layer(Res19653, 0, 0, 0, 0, 1, 0, Zer67120), 
LMin18065 = minimum_layer([[[[[[0.845], [0.4543]]]]], [[[[[0.7423], [0.5466]]]]]], Min18065), 
LAve89024 = average_layer([Zer67120,Min18065], Ave89024), 
exec_layers([LMin51862,LLay48077,LFla61135,LRes17413,LRes98854,LUp_24808,LRes75449,LGlo75573,LRes77517,LRes16301,LRes19653,LZer67120,LMin18065,LAve89024],["Min51862","Lay48077","Fla61135","Res17413","Res98854","Up_24808","Res75449","Glo75573","Res77517","Res16301","Res19653","Zer67120","Min18065","Ave89024"],Ave89024,"Ave89024")

Actual (Unparsed): [[[[[0.3711500], [0.3206285]]]]]

Expected (Unparsed): [[[[[0.37115],[0.3206285321358017]]]]]

Actual:   [[[[[0.3712], [0.3207]]]]]

Expected: [[[[[0.3712], [0.3207]]]]]