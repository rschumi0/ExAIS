import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add89053 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add89053 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Add5769 = tf.keras.layers.Input(shape=([1, 2]))
in1Add5769 = tf.keras.layers.Input(shape=([1, 2]))
in0Con1365 = tf.keras.layers.Input(shape=([1, 2, 3, 1]))
in0Ave14945 = tf.keras.layers.Input(shape=([1, 2, 2]))

Add89053 = keras.layers.Add(name = 'Add89053', )([in0Add89053,in1Add89053])
Res52964 = keras.layers.Reshape((1, 2), name = 'Res52964', )(Add89053)
Zer34754 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer34754', )(Res52964)
Res97196 = keras.layers.Reshape((2, 2, 1), name = 'Res97196', )(Zer34754)
Cro54225 = keras.layers.Cropping2D(cropping=((0, 1), (0, 1)), name = 'Cro54225', )(Res97196)
Res46443 = keras.layers.Reshape((1, 1), name = 'Res46443', )(Cro54225)
Add5769 = keras.layers.Add(name = 'Add5769', )([in0Add5769,in1Add5769])
Res58406 = keras.layers.Reshape((1, 2, 1), name = 'Res58406', )(Add5769)
Res49210 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res49210', )(Res58406)
Zer77391 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer77391', )(Res49210)
Con1365 = keras.layers.Concatenate(axis=4, name = 'Con1365', )([Zer77391,in0Con1365])
Ave14945 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 1), padding='valid', name = 'Ave14945', )(in0Ave14945)
Res47707 = keras.layers.Reshape((1, 1, 2, 1), name = 'Res47707', )(Ave14945)
Con21421 = keras.layers.Conv3D(2, (1, 1, 2),strides=(1, 1, 1), padding='same', dilation_rate=(1, 1, 1), name = 'Con21421', )(Res47707)
Zer18944 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer18944', )(Con21421)
Sub46191 = keras.layers.Subtract(name = 'Sub46191', )([Con1365,Zer18944])
Res46843 = keras.layers.Reshape((1, 2, 6), name = 'Res46843', )(Sub46191)
Res2583 = keras.layers.Reshape((1, 12), name = 'Res2583', )(Res46843)
Dot27201 = keras.layers.Dot(axes=(1, 1), name = 'Dot27201', )([Res46443,Res2583])
model = tf.keras.models.Model(inputs=[in0Add89053,in1Add89053,in0Add5769,in1Add5769,in0Con1365,in0Ave14945], outputs=Dot27201)
w = model.get_layer('Con21421').get_weights() 
w[0] = np.array([[[[[0.7956, 0.919]], [[0.2044, 0.8936]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con21421').set_weights(w) 
in0Add89053 = tf.constant([[[[0.5232], [0.2809]]]])
in1Add89053 = tf.constant([[[[0.5139], [0.6918]]]])
in0Add5769 = tf.constant([[[0.188, 0.6496]]])
in1Add5769 = tf.constant([[[0.6556, 0.4442]]])
in0Con1365 = tf.constant([[[[[0.1583], [0.485], [0.0839]], [[0.4295], [0.9263], [0.7211]]]]])
in0Ave14945 = tf.constant([[[[1.7677, 1.8202], [1.995, 1.8998]]]])
print (np.array2string(model.predict([in0Add89053,in1Add89053,in0Add5769,in1Add5769,in0Con1365,in0Ave14945],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot27201.png')

LAdd89053 = add_layer([[[[[0.5232], [0.2809]]]], [[[[0.5139], [0.6918]]]]], Add89053), 
LRes52964 = reshape_layer(Add89053, [1, 2], Res52964), 
LZer34754 = zero_padding1D_layer(Res52964, 1, 0, Zer34754), 
LRes97196 = reshape_layer(Zer34754, [2, 2, 1], Res97196), 
LCro54225 = cropping2D_layer(Res97196, 0, 1, 0, 1, Cro54225), 
LRes46443 = reshape_layer(Cro54225, [1, 1], Res46443), 
LAdd5769 = add_layer([[[[0.188, 0.6496]]], [[[0.6556, 0.4442]]]], Add5769), 
LRes58406 = reshape_layer(Add5769, [1, 2, 1], Res58406), 
LRes49210 = reshape_layer(Res58406, [1, 2, 1, 1], Res49210), 
LZer77391 = zero_padding3D_layer(Res49210, 0, 0, 0, 0, 2, 0, Zer77391), 
LCon1365 = concatenate_layer([Zer77391,[[[[[0.1583], [0.485], [0.0839]], [[0.4295], [0.9263], [0.7211]]]]]], 4, Con1365), 
LAve14945 = average_pooling2D_layer([[[[1.7677, 1.8202], [1.995, 1.8998]]]], 1, 2, 1, 1, false, Ave14945), 
LRes47707 = reshape_layer(Ave14945, [1, 1, 2, 1], Res47707), 
LCon21421 = conv3D_layer(Res47707, 1, 1, 2,[[[[[0.7956, 0.919]], [[0.2044, 0.8936]]]]],[0, 0], 1, 1, 1, true, 1, 1, 1, Con21421), 
LZer18944 = zero_padding3D_layer(Con21421, 0, 0, 1, 0, 1, 0, Zer18944), 
LSub46191 = subtract_layer(Con1365,Zer18944, Sub46191), 
LRes46843 = reshape_layer(Sub46191, [1, 2, 6], Res46843), 
LRes2583 = reshape_layer(Res46843, [1, 12], Res2583), 
LDot27201 = dot_layer(Res46443,Res2583, 1, 1, Dot27201), 
exec_layers([LAdd89053,LRes52964,LZer34754,LRes97196,LCro54225,LRes46443,LAdd5769,LRes58406,LRes49210,LZer77391,LCon1365,LAve14945,LRes47707,LCon21421,LZer18944,LSub46191,LRes46843,LRes2583,LDot27201],["Add89053","Res52964","Zer34754","Res97196","Cro54225","Res46443","Add5769","Res58406","Res49210","Zer77391","Con1365","Ave14945","Res47707","Con21421","Zer18944","Sub46191","Res46843","Res2583","Dot27201"],Dot27201,"Dot27201")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0.0,0,0.0,0.0,0.0,0,0.0,0.0,0.0,0.0,0.0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]]