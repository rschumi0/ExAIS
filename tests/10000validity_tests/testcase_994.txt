import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub93373 = tf.keras.layers.Input(shape=([3, 2, 2]))
in1Sub93373 = tf.keras.layers.Input(shape=([3, 2, 2]))
in0Con52150 = tf.keras.layers.Input(shape=([3, 2, 1]))
in0Con17550 = tf.keras.layers.Input(shape=([1, 1, 2]))

Sub93373 = keras.layers.Subtract(name = 'Sub93373', )([in0Sub93373,in1Sub93373])
Con52150 = keras.layers.Concatenate(axis=3, name = 'Con52150', )([Sub93373,in0Con52150])
Con17550 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='same', name = 'Con17550', )(in0Con17550)
Zer42448 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer42448', )(Con17550)
Min65169 = keras.layers.Minimum(name = 'Min65169', )([Con52150,Zer42448])
model = tf.keras.models.Model(inputs=[in0Sub93373,in1Sub93373,in0Con52150,in0Con17550], outputs=Min65169)
w = model.get_layer('Con17550').get_weights() 
w[0] = np.array([[[[0.1139, 0.9794], [0.1046, 0.5491], [0.7402, 0.7521]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con17550').set_weights(w) 
in0Sub93373 = tf.constant([[[[0.033, 0.3747], [0.311, 0.8555]], [[0.9571, 0.4078], [0.9269, 0.7902]], [[0.1855, 0.9578], [0.8104, 0.638]]]])
in1Sub93373 = tf.constant([[[[0.0034, 0.6617], [0.0943, 0.4044]], [[0.079, 0.2483], [0.3646, 0.3825]], [[0.9582, 0.1061], [0.0453, 0.7413]]]])
in0Con52150 = tf.constant([[[[0.3414], [0.1089]], [[0.0808], [0.828]], [[0.5895], [0.1879]]]])
in0Con17550 = tf.constant([[[[0.6842, 0.2928]]]])
print (np.array2string(model.predict([in0Sub93373,in1Sub93373,in0Con52150,in0Con17550],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min65169.png')

LSub93373 = subtract_layer([[[[0.033, 0.3747], [0.311, 0.8555]], [[0.9571, 0.4078], [0.9269, 0.7902]], [[0.1855, 0.9578], [0.8104, 0.638]]]], [[[[0.0034, 0.6617], [0.0943, 0.4044]], [[0.079, 0.2483], [0.3646, 0.3825]], [[0.9582, 0.1061], [0.0453, 0.7413]]]], Sub93373), 
LCon52150 = concatenate_layer([Sub93373,[[[[0.3414], [0.1089]], [[0.0808], [0.828]], [[0.5895], [0.1879]]]]], 3, Con52150), 
LCon17550 = conv2D_transpose_layer([[[[0.6842, 0.2928]]]], 1, 1,[[[[0.1139, 0.9794], [0.1046, 0.5491], [0.7402, 0.7521]]]],[0, 0, 0], 1, 1, true, Con17550), 
LZer42448 = zero_padding2D_layer(Con17550, 2, 0, 1, 0, Zer42448), 
LMin65169 = minimum_layer([Con52150,Zer42448], Min65169), 
exec_layers([LSub93373,LCon52150,LCon17550,LZer42448,LMin65169],["Sub93373","Con52150","Con17550","Zer42448","Min65169"],Min65169,"Min65169")

Actual (Unparsed): [[[[0.0000000, -0.2870000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000]], [[-0.7727000, 0.0000000, 0.0000000], [0.3646987, -0.1033000, 0.1879000]]]]

Expected (Unparsed): [[[[0,-0.287,0],[0,0,0]],[[0,0,0],[0,0,0]],[[-0.7727,0,0],[0.36469870000000004,-0.10329999999999995,0.1879]]]]

Actual:   [[[[0, -0.287, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]], [[-0.7727, 0, 0], [0.3647, -0.1033, 0.1879]]]]

Expected: [[[[0, -0.287, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0]], [[-0.7727, 0, 0], [0.3647, -0.1032, 0.1879]]]]