import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub73652 = tf.keras.layers.Input(shape=([3, 3, 3]))
in1Sub73652 = tf.keras.layers.Input(shape=([3, 3, 3]))

Sub73652 = keras.layers.Subtract(name = 'Sub73652', )([in0Sub73652,in1Sub73652])
Res28549 = keras.layers.Reshape((3, 9), name = 'Res28549', )(Sub73652)
Glo19912 = keras.layers.GlobalMaxPool1D(name = 'Glo19912', )(Res28549)
Thr57574 = keras.layers.ThresholdedReLU(theta=1.1214564337283277, name = 'Thr57574', )(Glo19912)
model = tf.keras.models.Model(inputs=[in0Sub73652,in1Sub73652], outputs=Thr57574)
in0Sub73652 = tf.constant([[[[0.3851, 0.2336, 0.1583], [0.6819, 0.4938, 0.3952], [0.1977, 0.4889, 0.1033]], [[0.7245, 0.7779, 0.4667], [0.7074, 0.9586, 0.9734], [0.7824, 0.8429, 0.4431]], [[0.4035, 0.1477, 0.4054], [0.464, 0.7122, 0.5768], [0.2599, 0.0155, 0.6057]]]])
in1Sub73652 = tf.constant([[[[0.7305, 0.0836, 0.2231], [0.2445, 0.5972, 0.7306], [0.1549, 0.5298, 0.7975]], [[0.7916, 0.5537, 0.0985], [0.1114, 0.4368, 0.1015], [0.6478, 0.9205, 0.0777]], [[0.1861, 0.5451, 0.1369], [0.8587, 0.7855, 0.5505], [0.8432, 0.5004, 0.0034]]]])
print (np.array2string(model.predict([in0Sub73652,in1Sub73652],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Thr57574.png')

LSub73652 = subtract_layer([[[[0.3851, 0.2336, 0.1583], [0.6819, 0.4938, 0.3952], [0.1977, 0.4889, 0.1033]], [[0.7245, 0.7779, 0.4667], [0.7074, 0.9586, 0.9734], [0.7824, 0.8429, 0.4431]], [[0.4035, 0.1477, 0.4054], [0.464, 0.7122, 0.5768], [0.2599, 0.0155, 0.6057]]]], [[[[0.7305, 0.0836, 0.2231], [0.2445, 0.5972, 0.7306], [0.1549, 0.5298, 0.7975]], [[0.7916, 0.5537, 0.0985], [0.1114, 0.4368, 0.1015], [0.6478, 0.9205, 0.0777]], [[0.1861, 0.5451, 0.1369], [0.8587, 0.7855, 0.5505], [0.8432, 0.5004, 0.0034]]]], Sub73652), 
LRes28549 = reshape_layer(Sub73652, [3, 9], Res28549), 
LGlo19912 = global_max_pool1D_layer(Res28549, Glo19912), 
LThr57574 = thresholded_relu_layer(Glo19912, 1.1214564337283277, Thr57574), 
exec_layers([LSub73652,LRes28549,LGlo19912,LThr57574],["Sub73652","Res28549","Glo19912","Thr57574"],Thr57574,"Thr57574")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, -0.0000000, 0.0000000]]

Expected (Unparsed): [[0,0,0,0,0,0,0,0,0]]

Actual:   [[0, 0, 0, 0, 0, 0, 0, -0, 0]]

Expected: [[0, 0, 0, 0, 0, 0, 0, 0, 0]]