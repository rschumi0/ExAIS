import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Per91456 = tf.keras.layers.Input(shape=([1, 2]))

Per91456 = keras.layers.Permute((1,2), name = 'Per91456',)(in0Per91456)
Per5837 = keras.layers.Permute((1,2), name = 'Per5837',)(Per91456)
Res56747 = keras.layers.Reshape((1, 2, 1), name = 'Res56747', )(Per5837)
Max87329 = keras.layers.MaxPool2D(pool_size=(1, 1), strides=(1, 5), padding='valid', name = 'Max87329', )(Res56747)
Res7273 = keras.layers.Reshape((1, 1), name = 'Res7273', )(Max87329)
Ave58535 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave58535', )(Res7273)
model = tf.keras.models.Model(inputs=[in0Per91456], outputs=Ave58535)
in0Per91456 = tf.constant([[[1.2576, 1.0869]]])
print (np.array2string(model.predict([in0Per91456],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave58535.png')

LPer91456 = permute_layer([[[1.2576, 1.0869]]], 1,2, Per91456), 
LPer5837 = permute_layer(Per91456, 1,2, Per5837), 
LRes56747 = reshape_layer(Per5837, [1, 2, 1], Res56747), 
LMax87329 = max_pool2D_layer(Res56747, 1, 1, 1, 5, false, Max87329), 
LRes7273 = reshape_layer(Max87329, [1, 1], Res7273), 
LAve58535 = average_pooling1D_layer(Res7273, 1, 1, false, Ave58535), 
exec_layers([LPer91456,LPer5837,LRes56747,LMax87329,LRes7273,LAve58535],["Per91456","Per5837","Res56747","Max87329","Res7273","Ave58535"],Ave58535,"Ave58535")

Actual (Unparsed): [[[1.2575999]]]

Expected (Unparsed): [[[1.2576]]]

Actual:   [[[1.2576]]]

Expected: [[[1.2576]]]