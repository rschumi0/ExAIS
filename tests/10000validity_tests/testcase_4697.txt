import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max29963 = tf.keras.layers.Input(shape=([1, 1]))
in0Con63204 = tf.keras.layers.Input(shape=([1, 2]))
in0Per48006 = tf.keras.layers.Input(shape=([1, 3]))

Max29963 = keras.layers.MaxPool1D(pool_size=(1), strides=(12), padding='same', name = 'Max29963', )(in0Max29963)
Con63204 = keras.layers.Concatenate(axis=2, name = 'Con63204', )([Max29963,in0Con63204])
Per48006 = keras.layers.Permute((1,2), name = 'Per48006',)(in0Per48006)
Ave43633 = keras.layers.Average(name = 'Ave43633', )([Con63204,Per48006])
model = tf.keras.models.Model(inputs=[in0Max29963,in0Con63204,in0Per48006], outputs=Ave43633)
in0Max29963 = tf.constant([[[1.9052]]])
in0Con63204 = tf.constant([[[0.5517, 0.9158]]])
in0Per48006 = tf.constant([[[1.4752, 1.9541, 1.1746]]])
print (np.array2string(model.predict([in0Max29963,in0Con63204,in0Per48006],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave43633.png')

LMax29963 = max_pool1D_layer([[[1.9052]]], 1, 12, true, Max29963), 
LCon63204 = concatenate_layer([Max29963,[[[0.5517, 0.9158]]]], 2, Con63204), 
LPer48006 = permute_layer([[[1.4752, 1.9541, 1.1746]]], 1,2, Per48006), 
LAve43633 = average_layer([Con63204,Per48006], Ave43633), 
exec_layers([LMax29963,LCon63204,LPer48006,LAve43633],["Max29963","Con63204","Per48006","Ave43633"],Ave43633,"Ave43633")

Actual (Unparsed): [[[1.6902000, 1.2529000, 1.0452000]]]

Expected (Unparsed): [[[1.6902,1.2529,1.0452]]]

Actual:   [[[1.6902, 1.2529, 1.0452]]]

Expected: [[[1.6902, 1.2529, 1.0452]]]