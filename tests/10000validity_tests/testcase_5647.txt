import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul86060 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Mul86060 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con93554 = tf.keras.layers.Input(shape=([2, 1]))
in0Con10763 = tf.keras.layers.Input(shape=([2, 1]))

Mul86060 = keras.layers.Multiply(name = 'Mul86060', )([in0Mul86060,in1Mul86060])
Res44580 = keras.layers.Reshape((2, 1, 1), name = 'Res44580', )(Mul86060)
Res29706 = keras.layers.Reshape((2, 1), name = 'Res29706', )(Res44580)
Con93554 = keras.layers.Concatenate(axis=2, name = 'Con93554', )([Res29706,in0Con93554])
Con10763 = keras.layers.Conv1D(2, (1),strides=(1), padding='valid', dilation_rate=(1), name = 'Con10763', )(in0Con10763)
Min39118 = keras.layers.Minimum(name = 'Min39118', )([Con93554,Con10763])
Max86225 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max86225', )(Min39118)
Up_99995 = keras.layers.UpSampling1D(size=(1), name = 'Up_99995', )(Max86225)
model = tf.keras.models.Model(inputs=[in0Mul86060,in1Mul86060,in0Con93554,in0Con10763], outputs=Up_99995)
w = model.get_layer('Con10763').get_weights() 
w[0] = np.array([[[0.1211, 0.4895]]])
w[1] = np.array([0, 0])
model.get_layer('Con10763').set_weights(w) 
in0Mul86060 = tf.constant([[[[[0.1482]]], [[[0.9392]]]]])
in1Mul86060 = tf.constant([[[[[0.7541]]], [[[0.0148]]]]])
in0Con93554 = tf.constant([[[0.2108], [0.0217]]])
in0Con10763 = tf.constant([[[0.2088], [0.7921]]])
print (np.array2string(model.predict([in0Mul86060,in1Mul86060,in0Con93554,in0Con10763],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_99995.png')

LMul86060 = multiply_layer([[[[[[0.1482]]], [[[0.9392]]]]], [[[[[0.7541]]], [[[0.0148]]]]]], Mul86060), 
LRes44580 = reshape_layer(Mul86060, [2, 1, 1], Res44580), 
LRes29706 = reshape_layer(Res44580, [2, 1], Res29706), 
LCon93554 = concatenate_layer([Res29706,[[[0.2108], [0.0217]]]], 2, Con93554), 
LCon10763 = conv1D_layer([[[0.2088], [0.7921]]], 1,[[[0.1211, 0.4895]]],[0, 0], 1, false, 1, Con10763), 
LMin39118 = minimum_layer([Con93554,Con10763], Min39118), 
LMax86225 = max_pool1D_layer(Min39118, 1, 1, false, Max86225), 
LUp_99995 = up_sampling1D_layer(Max86225, 1, Up_99995), 
exec_layers([LMul86060,LRes44580,LRes29706,LCon93554,LCon10763,LMin39118,LMax86225,LUp_99995],["Mul86060","Res44580","Res29706","Con93554","Con10763","Min39118","Max86225","Up_99995"],Up_99995,"Up_99995")

Actual (Unparsed): [[[0.0252857, 0.1022076], [0.0139002, 0.0217000]]]

Expected (Unparsed): [[[0.02528568,0.10220760000000001],[0.013900160000000002,0.0217]]]

Actual:   [[[0.0253, 0.1023], [0.014, 0.0217]]]

Expected: [[[0.0253, 0.1023], [0.014, 0.0217]]]