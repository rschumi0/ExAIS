import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lea31172 = tf.keras.layers.Input(shape=([1, 1]))
in0Up_92496 = tf.keras.layers.Input(shape=([2, 1]))

Lea31172 = keras.layers.LeakyReLU(alpha=2.4317046809964045, name = 'Lea31172', input_shape=(1, 1))(in0Lea31172)
Zer70551 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer70551', )(Lea31172)
Up_92496 = keras.layers.UpSampling1D(size=(2), name = 'Up_92496', )(in0Up_92496)
Bat6571 = keras.layers.BatchNormalization(axis=1, epsilon=0.38726120330944747,  name = 'Bat6571', )(Up_92496)
Ave57947 = keras.layers.Average(name = 'Ave57947', )([Zer70551,Bat6571])
model = tf.keras.models.Model(inputs=[in0Lea31172,in0Up_92496], outputs=Ave57947)
w = model.get_layer('Bat6571').get_weights() 
w[0] = np.array([0.2388, 0.9835, 0.6039, 0.9094])
w[1] = np.array([0.5733, 0.0351, 0.222, 0.3448])
w[2] = np.array([0.8985, 0.2584, 0.6551, 0.6748])
w[3] = np.array([0.6847, 0.7093, 0.377, 0.3795])
model.get_layer('Bat6571').set_weights(w) 
in0Lea31172 = tf.constant([[[0.5479]]])
in0Up_92496 = tf.constant([[[1.9215], [1.5559]]])
print (np.array2string(model.predict([in0Lea31172,in0Up_92496],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave57947.png')

LLea31172 = leaky_relu_layer([[[0.5479]]], 2.4317046809964045, Lea31172), 
LZer70551 = zero_padding1D_layer(Lea31172, 3, 0, Zer70551), 
LUp_92496 = up_sampling1D_layer([[[1.9215], [1.5559]]], 2, Up_92496), 
LBat6571 = batch_normalization_layer(Up_92496, 1, 0.38726120330944747, [0.2388, 0.9835, 0.6039, 0.9094], [0.5733, 0.0351, 0.222, 0.3448], [0.8985, 0.2584, 0.6551, 0.6748], [0.6847, 0.7093, 0.377, 0.3795], Bat6571), 
LAve57947 = average_layer([Zer70551,Bat6571], Ave57947), 
exec_layers([LLea31172,LZer70551,LUp_92496,LBat6571,LAve57947],["Lea31172","Zer70551","Up_92496","Bat6571","Ave57947"],Ave57947,"Ave57947")

Actual (Unparsed): [[[0.4046251], [0.7985415], [0.4221304], [0.9038805]]]

Expected (Unparsed): [[[0.4046251197199144],[0.7985414761957631],[0.42213044100729896],[0.9038805420454954]]]

Actual:   [[[0.4047], [0.7986], [0.4222], [0.9039]]]

Expected: [[[0.4047], [0.7986], [0.4222], [0.9039]]]