import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo16694 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Con88463 = tf.keras.layers.Input(shape=([2, 1]))
in0Lay40592 = tf.keras.layers.Input(shape=([2, 2]))
in0Max87096 = tf.keras.layers.Input(shape=([2, 1]))
in1Max87096 = tf.keras.layers.Input(shape=([2, 1]))

Glo16694 = keras.layers.GlobalAveragePooling2D(name = 'Glo16694', )(in0Glo16694)
Res93220 = keras.layers.Reshape((1, 1), name = 'Res93220', )(Glo16694)
Zer72700 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer72700', )(Res93220)
Con88463 = keras.layers.Concatenate(axis=2, name = 'Con88463', )([Zer72700,in0Con88463])
Lay40592 = keras.layers.LayerNormalization(axis=2, epsilon=2.029551668244114, name = 'Lay40592', )(in0Lay40592)
Max23971 = keras.layers.Maximum(name = 'Max23971', )([Con88463,Lay40592])
Res56316 = keras.layers.Reshape((2, 2, 1), name = 'Res56316', )(Max23971)
Res74470 = keras.layers.Reshape((2, 2, 1, 1), name = 'Res74470', )(Res56316)
Zer34571 = keras.layers.ZeroPadding3D(padding=((2, 0), (1, 0), (2, 0)), name = 'Zer34571', )(Res74470)
Max87096 = keras.layers.Maximum(name = 'Max87096', )([in0Max87096,in1Max87096])
Res23612 = keras.layers.Reshape((2, 1, 1), name = 'Res23612', )(Max87096)
Res60382 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res60382', )(Res23612)
Zer70829 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer70829', )(Res60382)
Add8891 = keras.layers.Add(name = 'Add8891', )([Zer34571,Zer70829])
model = tf.keras.models.Model(inputs=[in0Glo16694,in0Con88463,in0Lay40592,in0Max87096,in1Max87096], outputs=Add8891)
in0Glo16694 = tf.constant([[[[1.6895]], [[1.2328]]]])
in0Con88463 = tf.constant([[[0.0948], [0.126]]])
in0Lay40592 = tf.constant([[[1.3421, 1.126], [1.5517, 1.3908]]])
in0Max87096 = tf.constant([[[0.0407], [0.9345]]])
in1Max87096 = tf.constant([[[0.5682], [0.9089]]])
print (np.array2string(model.predict([in0Glo16694,in0Con88463,in0Lay40592,in0Max87096,in1Max87096],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add8891.png')

LGlo16694 = global_average_pooling2D_layer([[[[1.6895]], [[1.2328]]]], Glo16694), 
LRes93220 = reshape_layer(Glo16694, [1, 1], Res93220), 
LZer72700 = zero_padding1D_layer(Res93220, 1, 0, Zer72700), 
LCon88463 = concatenate_layer([Zer72700,[[[0.0948], [0.126]]]], 2, Con88463), 
LLay40592 = layer_normalization_layer([[[1.3421, 1.126], [1.5517, 1.3908]]], 2, 2.029551668244114, Lay40592), 
LMax23971 = maximum_layer([Con88463,Lay40592], Max23971), 
LRes56316 = reshape_layer(Max23971, [2, 2, 1], Res56316), 
LRes74470 = reshape_layer(Res56316, [2, 2, 1, 1], Res74470), 
LZer34571 = zero_padding3D_layer(Res74470, 2, 0, 1, 0, 2, 0, Zer34571), 
LMax87096 = maximum_layer([[[[0.0407], [0.9345]]], [[[0.5682], [0.9089]]]], Max87096), 
LRes23612 = reshape_layer(Max87096, [2, 1, 1], Res23612), 
LRes60382 = reshape_layer(Res23612, [2, 1, 1, 1], Res60382), 
LZer70829 = zero_padding3D_layer(Res60382, 1, 1, 1, 1, 1, 1, Zer70829), 
LAdd8891 = add_layer([Zer34571,Zer70829], Add8891), 
exec_layers([LGlo16694,LRes93220,LZer72700,LCon88463,LLay40592,LMax23971,LRes56316,LRes74470,LZer34571,LMax87096,LRes23612,LRes60382,LZer70829,LAdd8891],["Glo16694","Res93220","Zer72700","Con88463","Lay40592","Max23971","Res56316","Res74470","Zer34571","Max87096","Res23612","Res60382","Zer70829","Add8891"],Add8891,"Add8891")

Actual (Unparsed): [[[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.5682000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.9345000], [0.0756274]], [[0.0000000], [0.0000000], [0.0948000]]], [[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [1.4611500]], [[0.0000000], [0.0000000], [0.1260000]]]]]

Expected (Unparsed): [[[[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.5682],[0]],[[0],[0],[0]]],[[[0],[0],[0]],[[0],[0.9345],[0.07562740093726336]],[[0],[0],[0.0948]]],[[[0],[0],[0]],[[0],[0],[1.46115]],[[0],[0],[0.126]]]]]

Actual:   [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.5682], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.9345], [0.0757]], [[0], [0], [0.0948]]], [[[0], [0], [0]], [[0], [0], [1.4612]], [[0], [0], [0.126]]]]]

Expected: [[[[[0], [0], [0]], [[0], [0], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.5682], [0]], [[0], [0], [0]]], [[[0], [0], [0]], [[0], [0.9345], [0.0757]], [[0], [0], [0.0948]]], [[[0], [0], [0]], [[0], [0], [1.4612]], [[0], [0], [0.126]]]]]