import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub6168 = tf.keras.layers.Input(shape=([2]))
in1Sub6168 = tf.keras.layers.Input(shape=([2]))
in0Glo94867 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Con17884 = tf.keras.layers.Input(shape=([1]))
in0Dot40297 = tf.keras.layers.Input(shape=([2]))
in1Dot40297 = tf.keras.layers.Input(shape=([2]))
in0Con40266 = tf.keras.layers.Input(shape=([1]))

Sub6168 = keras.layers.Subtract(name = 'Sub6168', )([in0Sub6168,in1Sub6168])
Glo94867 = keras.layers.GlobalMaxPool3D(name = 'Glo94867', )(in0Glo94867)
Con17884 = keras.layers.Concatenate(axis=1, name = 'Con17884', )([Glo94867,in0Con17884])
Ave4661 = keras.layers.Average(name = 'Ave4661', )([Sub6168,Con17884])
Dot40297 = keras.layers.Dot(axes=(1, 1), name = 'Dot40297', )([in0Dot40297,in1Dot40297])
Res46753 = keras.layers.Reshape((1, 1), name = 'Res46753', )(Dot40297)
Max15788 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max15788', )(Res46753)
Res34739 = keras.layers.Reshape((1, 1, 1), name = 'Res34739', )(Max15788)
Res5517 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res5517', )(Res34739)
Glo79591 = keras.layers.GlobalAveragePooling3D(name = 'Glo79591', )(Res5517)
Con40266 = keras.layers.Concatenate(axis=1, name = 'Con40266', )([Glo79591,in0Con40266])
Mul63241 = keras.layers.Multiply(name = 'Mul63241', )([Ave4661,Con40266])
model = tf.keras.models.Model(inputs=[in0Sub6168,in1Sub6168,in0Glo94867,in0Con17884,in0Dot40297,in1Dot40297,in0Con40266], outputs=Mul63241)
in0Sub6168 = tf.constant([[0.4956, 0.3067]])
in1Sub6168 = tf.constant([[0.3272, 0.6907]])
in0Glo94867 = tf.constant([[[[[1.4532]], [[1.2922]]]]])
in0Con17884 = tf.constant([[0.9789]])
in0Dot40297 = tf.constant([[0.9104, 0.9817]])
in1Dot40297 = tf.constant([[0.3113, 0.5815]])
in0Con40266 = tf.constant([[0.3894]])
print (np.array2string(model.predict([in0Sub6168,in1Sub6168,in0Glo94867,in0Con17884,in0Dot40297,in1Dot40297,in0Con40266],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul63241.png')

LSub6168 = subtract_layer([[0.4956, 0.3067]], [[0.3272, 0.6907]], Sub6168), 
LGlo94867 = global_max_pool3D_layer([[[[[1.4532]], [[1.2922]]]]], Glo94867), 
LCon17884 = concatenate_layer([Glo94867,[[0.9789]]], 1, Con17884), 
LAve4661 = average_layer([Sub6168,Con17884], Ave4661), 
LDot40297 = dot_layer([[0.9104, 0.9817]], [[0.3113, 0.5815]], 1, 1, Dot40297), 
LRes46753 = reshape_layer(Dot40297, [1, 1], Res46753), 
LMax15788 = max_pool1D_layer(Res46753, 1, Max15788), 
LRes34739 = reshape_layer(Max15788, [1, 1, 1], Res34739), 
LRes5517 = reshape_layer(Res34739, [1, 1, 1, 1], Res5517), 
LGlo79591 = global_average_pooling3D_layer(Res5517, Glo79591), 
LCon40266 = concatenate_layer([Glo79591,[[0.3894]]], 1, Con40266), 
LMul63241 = multiply_layer([Ave4661,Con40266], Mul63241), 
exec_layers([LSub6168,LGlo94867,LCon17884,LAve4661,LDot40297,LRes46753,LMax15788,LRes34739,LRes5517,LGlo79591,LCon40266,LMul63241],["Sub6168","Glo94867","Con17884","Ave4661","Dot40297","Res46753","Max15788","Res34739","Res5517","Glo79591","Con40266","Mul63241"],Mul63241,"Mul63241")

Actual (Unparsed): [[0.6926389, 0.1158270]]

Expected (Unparsed): [[0.692638929556,0.11582703]]

Actual:   [[0.6927, 0.1159]]

Expected: [[0.6927, 0.1159]]