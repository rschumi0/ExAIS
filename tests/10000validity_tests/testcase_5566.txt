import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max48446 = tf.keras.layers.Input(shape=([2, 1]))
in1Max48446 = tf.keras.layers.Input(shape=([2, 1]))
in0Mul15671 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Mul15671 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))

Max48446 = keras.layers.Maximum(name = 'Max48446', )([in0Max48446,in1Max48446])
Res74854 = keras.layers.Reshape((2, 1, 1), name = 'Res74854', )(Max48446)
Ave95585 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave95585', )(Res74854)
Res6501 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res6501', )(Ave95585)
Mul15671 = keras.layers.Multiply(name = 'Mul15671', )([in0Mul15671,in1Mul15671])
Sub13060 = keras.layers.Subtract(name = 'Sub13060', )([Res6501,Mul15671])
Res82272 = keras.layers.Reshape((2, 1, 1), name = 'Res82272', )(Sub13060)
Up_44104 = keras.layers.UpSampling2D(size=(2, 2), name = 'Up_44104', )(Res82272)
model = tf.keras.models.Model(inputs=[in0Max48446,in1Max48446,in0Mul15671,in1Mul15671], outputs=Up_44104)
in0Max48446 = tf.constant([[[0.5078], [0.9391]]])
in1Max48446 = tf.constant([[[0.3991], [0.3143]]])
in0Mul15671 = tf.constant([[[[[0.1776]]], [[[0.5016]]]]])
in1Mul15671 = tf.constant([[[[[0.433]]], [[[0.9326]]]]])
print (np.array2string(model.predict([in0Max48446,in1Max48446,in0Mul15671,in1Mul15671],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_44104.png')

LMax48446 = maximum_layer([[[[0.5078], [0.9391]]], [[[0.3991], [0.3143]]]], Max48446), 
LRes74854 = reshape_layer(Max48446, [2, 1, 1], Res74854), 
LAve95585 = average_pooling2D_layer(Res74854, 1, 1, Ave95585), 
LRes6501 = reshape_layer(Ave95585, [2, 1, 1, 1], Res6501), 
LMul15671 = multiply_layer([[[[[[0.1776]]], [[[0.5016]]]]], [[[[[0.433]]], [[[0.9326]]]]]], Mul15671), 
LSub13060 = subtract_layer(Res6501,Mul15671, Sub13060), 
LRes82272 = reshape_layer(Sub13060, [2, 1, 1], Res82272), 
LUp_44104 = up_sampling2D_layer(Res82272, 2, 2, Up_44104), 
exec_layers([LMax48446,LRes74854,LAve95585,LRes6501,LMul15671,LSub13060,LRes82272,LUp_44104],["Max48446","Res74854","Ave95585","Res6501","Mul15671","Sub13060","Res82272","Up_44104"],Up_44104,"Up_44104")

Actual (Unparsed): [[[[0.4308992], [0.4308992]], [[0.4308992], [0.4308992]], [[0.4713078], [0.4713078]], [[0.4713078], [0.4713078]]]]

Expected (Unparsed): [[[[0.43089920000000004],[0.43089920000000004]],[[0.43089920000000004],[0.43089920000000004]],[[0.47130784000000003],[0.47130784000000003]],[[0.47130784000000003],[0.47130784000000003]]]]

Actual:   [[[[0.4309], [0.4309]], [[0.4309], [0.4309]], [[0.4714], [0.4714]], [[0.4714], [0.4714]]]]

Expected: [[[[0.4309], [0.4309]], [[0.4309], [0.4309]], [[0.4714], [0.4714]], [[0.4714], [0.4714]]]]