import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave31222 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Ave31222 = tf.keras.layers.Input(shape=([2, 2, 1]))

Ave31222 = keras.layers.Average(name = 'Ave31222', )([in0Ave31222,in1Ave31222])
Lea40430 = keras.layers.LeakyReLU(alpha=1.8007048953730038, name = 'Lea40430', )(Ave31222)
model = tf.keras.models.Model(inputs=[in0Ave31222,in1Ave31222], outputs=Lea40430)
in0Ave31222 = tf.constant([[[[0.284], [0.2651]], [[0.0906], [0.2647]]]])
in1Ave31222 = tf.constant([[[[0.4042], [0.4948]], [[0.3486], [0.6021]]]])
print (np.array2string(model.predict([in0Ave31222,in1Ave31222],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Lea40430.png')

LAve31222 = average_layer([[[[[0.284], [0.2651]], [[0.0906], [0.2647]]]], [[[[0.4042], [0.4948]], [[0.3486], [0.6021]]]]], Ave31222), 
LLea40430 = leaky_relu_layer(Ave31222, 1.8007048953730038, Lea40430), 
exec_layers([LAve31222,LLea40430],["Ave31222","Lea40430"],Lea40430,"Lea40430")

Actual (Unparsed): [[[[0.3441000], [0.3799500]], [[0.2196000], [0.4334000]]]]

Expected (Unparsed): [[[[0.34409999999999996],[0.37995]],[[0.21960000000000002],[0.4334]]]]

Actual:   [[[[0.3441], [0.38]], [[0.2196], [0.4334]]]]

Expected: [[[[0.3441], [0.38]], [[0.2197], [0.4334]]]]