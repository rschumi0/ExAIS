import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer98137 = tf.keras.layers.Input(shape=([2, 3]))
in0Con53564 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0Max57683 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Max57683 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Cro71407 = tf.keras.layers.Input(shape=([1, 4]))
in0Dot9719 = tf.keras.layers.Input(shape=([2]))
in1Dot9719 = tf.keras.layers.Input(shape=([2]))
in0Glo11136 = tf.keras.layers.Input(shape=([2, 1]))
in0Con89145 = tf.keras.layers.Input(shape=([3]))
in0Con27056 = tf.keras.layers.Input(shape=([20]))

Zer98137 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer98137', )(in0Zer98137)
Res41654 = keras.layers.Reshape((4, 3, 1), name = 'Res41654', )(Zer98137)
Con53564 = keras.layers.Concatenate(axis=3, name = 'Con53564', )([Res41654,in0Con53564])
Max57683 = keras.layers.Maximum(name = 'Max57683', )([in0Max57683,in1Max57683])
Lay71423 = keras.layers.LayerNormalization(axis=1, epsilon=2.1522936232080854, name = 'Lay71423', )(Max57683)
Zer95202 = keras.layers.ZeroPadding2D(padding=((2, 0), (1, 0)), name = 'Zer95202', )(Lay71423)
Ave5687 = keras.layers.Average(name = 'Ave5687', )([Con53564,Zer95202])
Res45755 = keras.layers.Reshape((4, 6), name = 'Res45755', )(Ave5687)
Fla43539 = keras.layers.Flatten(name = 'Fla43539', )(Res45755)
Cro71407 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro71407', )(in0Cro71407)
Fla93143 = keras.layers.Flatten(name = 'Fla93143', )(Cro71407)
Dot9719 = keras.layers.Dot(axes=(1, 1), name = 'Dot9719', )([in0Dot9719,in1Dot9719])
Glo11136 = keras.layers.GlobalAveragePooling1D(name = 'Glo11136', )(in0Glo11136)
Add92331 = keras.layers.Add(name = 'Add92331', )([Dot9719,Glo11136])
Con89145 = keras.layers.Concatenate(axis=1, name = 'Con89145', )([Add92331,in0Con89145])
Max14472 = keras.layers.Maximum(name = 'Max14472', )([Fla93143,Con89145])
Con27056 = keras.layers.Concatenate(axis=1, name = 'Con27056', )([Max14472,in0Con27056])
Add73714 = keras.layers.Add(name = 'Add73714', )([Fla43539,Con27056])
model = tf.keras.models.Model(inputs=[in0Zer98137,in0Con53564,in0Max57683,in1Max57683,in0Cro71407,in0Dot9719,in1Dot9719,in0Glo11136,in0Con89145,in0Con27056], outputs=Add73714)
in0Zer98137 = tf.constant([[[1.3989, 1.6773, 1.5451], [1.4351, 1.8873, 1.1086]]])
in0Con53564 = tf.constant([[[[0.172], [0.2914], [0.5435]], [[0.9014], [0.3508], [0.9192]], [[0.8499], [0.4289], [0.8662]], [[0.8091], [0.0419], [0.5066]]]])
in0Max57683 = tf.constant([[[[0.6987, 0.8993], [0.8546, 0.2616]], [[0.5157, 0.1476], [0.6521, 0.9366]]]])
in1Max57683 = tf.constant([[[[0.0965, 0.9387], [0.6557, 0.3354]], [[0.3617, 0.5631], [0.9582, 0.4075]]]])
in0Cro71407 = tf.constant([[[1.651, 1.2235, 1.3897, 1.5773]]])
in0Dot9719 = tf.constant([[0.1223, 0.3979]])
in1Dot9719 = tf.constant([[0.609, 0.1886]])
in0Glo11136 = tf.constant([[[1.28], [1.5531]]])
in0Con89145 = tf.constant([[0.8563, 0.0973, 0.6633]])
in0Con27056 = tf.constant([[0.7324, 0.6772, 0.9101, 0.2523, 0.4088, 0.8512, 0.2286, 0.8988, 0.6577, 0.247, 0.7079, 0.8752, 0.0114, 0.1073, 0.075, 0.9085, 0.4495, 0.8419, 0.998, 0.2145]])
print (np.array2string(model.predict([in0Zer98137,in0Con53564,in0Max57683,in1Max57683,in0Cro71407,in0Dot9719,in1Dot9719,in0Glo11136,in0Con89145,in0Con27056],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add73714.png')

LZer98137 = zero_padding1D_layer([[[1.3989, 1.6773, 1.5451], [1.4351, 1.8873, 1.1086]]], 1, 1, Zer98137), 
LRes41654 = reshape_layer(Zer98137, [4, 3, 1], Res41654), 
LCon53564 = concatenate_layer([Res41654,[[[[0.172], [0.2914], [0.5435]], [[0.9014], [0.3508], [0.9192]], [[0.8499], [0.4289], [0.8662]], [[0.8091], [0.0419], [0.5066]]]]], 3, Con53564), 
LMax57683 = maximum_layer([[[[[0.6987, 0.8993], [0.8546, 0.2616]], [[0.5157, 0.1476], [0.6521, 0.9366]]]], [[[[0.0965, 0.9387], [0.6557, 0.3354]], [[0.3617, 0.5631], [0.9582, 0.4075]]]]], Max57683), 
LLay71423 = layer_normalization_layer(Max57683, 1, 2.1522936232080854, Lay71423), 
LZer95202 = zero_padding2D_layer(Lay71423, 2, 0, 1, 0, Zer95202), 
LAve5687 = average_layer([Con53564,Zer95202], Ave5687), 
LRes45755 = reshape_layer(Ave5687, [4, 6], Res45755), 
LFla43539 = flatten_layer(Res45755, Fla43539), 
LCro71407 = cropping1D_layer([[[1.651, 1.2235, 1.3897, 1.5773]]], 0, 0, Cro71407), 
LFla93143 = flatten_layer(Cro71407, Fla93143), 
LDot9719 = dot_layer([[0.1223, 0.3979]], [[0.609, 0.1886]], 1, 1, Dot9719), 
LGlo11136 = global_average_pooling1D_layer([[[1.28], [1.5531]]], Glo11136), 
LAdd92331 = add_layer([Dot9719,Glo11136], Add92331), 
LCon89145 = concatenate_layer([Add92331,[[0.8563, 0.0973, 0.6633]]], 1, Con89145), 
LMax14472 = maximum_layer([Fla93143,Con89145], Max14472), 
LCon27056 = concatenate_layer([Max14472,[[0.7324, 0.6772, 0.9101, 0.2523, 0.4088, 0.8512, 0.2286, 0.8988, 0.6577, 0.247, 0.7079, 0.8752, 0.0114, 0.1073, 0.075, 0.9085, 0.4495, 0.8419, 0.998, 0.2145]]], 1, Con27056), 
LAdd73714 = add_layer([Fla43539,Con27056], Add73714), 
exec_layers([LZer98137,LRes41654,LCon53564,LMax57683,LLay71423,LZer95202,LAve5687,LRes45755,LFla43539,LCro71407,LFla93143,LDot9719,LGlo11136,LAdd92331,LCon89145,LMax14472,LCon27056,LAdd73714],["Zer98137","Res41654","Con53564","Max57683","Lay71423","Zer95202","Ave5687","Res45755","Fla43539","Cro71407","Fla93143","Dot9719","Glo11136","Add92331","Con89145","Max14472","Con27056","Add73714"],Add73714,"Add73714")

Actual (Unparsed): [[1.6510000, 1.3095000, 1.3897001, 1.7229999, 0.7324000, 0.9489500, 1.6095500, 0.7030000, 1.2474500, 1.0266000, 1.0011500, 1.3584000, 1.3752500, 0.6719500, 1.6826741, 1.1531371, 0.5480568, 0.4400360, 0.0750000, 1.3130500, 0.4183759, 0.7993629, 1.0156433, 0.5681640]]

Expected (Unparsed): [[1.651,1.3095,1.3897,1.7229999999999999,0.7324,0.94895,1.60955,0.7030000000000001,1.24745,1.0266,1.00115,1.3584,1.3752499999999999,0.67195,1.6826741351268684,1.1531370811972737,0.5480567552726784,0.4400360270673735,0.075,1.31305,0.41837586487313166,0.7993629188027264,1.0156432447273216,0.5681639729326265]]

Actual:   [[1.651, 1.3095, 1.3898, 1.723, 0.7324, 0.949, 1.6096, 0.703, 1.2475, 1.0266, 1.0012, 1.3584, 1.3753, 0.672, 1.6827, 1.1532, 0.5481, 0.4401, 0.075, 1.3131, 0.4184, 0.7994, 1.0157, 0.5682]]

Expected: [[1.651, 1.3095, 1.3897, 1.723, 0.7324, 0.949, 1.6096, 0.7031, 1.2475, 1.0266, 1.0012, 1.3584, 1.3753, 0.672, 1.6827, 1.1532, 0.5481, 0.4401, 0.075, 1.3131, 0.4184, 0.7994, 1.0157, 0.5682]]