import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub63701 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))
in1Sub63701 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))

Sub63701 = keras.layers.Subtract(name = 'Sub63701', )([in0Sub63701,in1Sub63701])
Res58715 = keras.layers.Reshape((2, 3, 6), name = 'Res58715', )(Sub63701)
Res58619 = keras.layers.Reshape((2, 18), name = 'Res58619', )(Res58715)
Cro88283 = keras.layers.Cropping1D(cropping=((0, 1)), name = 'Cro88283', )(Res58619)
model = tf.keras.models.Model(inputs=[in0Sub63701,in1Sub63701], outputs=Cro88283)
in0Sub63701 = tf.constant([[[[[0.1105, 0.3244, 0.5197], [0.0134, 0.0665, 0.478]], [[0.5048, 0.5016, 0.0273], [0.3579, 0.7224, 0.5748]], [[0.6187, 0.3661, 0.2378], [0.2586, 0.5777, 0.0031]]], [[[0.1326, 0.7633, 0.5818], [0.3231, 0.0631, 0.0468]], [[0.939, 0.1067, 0.8547], [0.9901, 0.9057, 0.0777]], [[0.3644, 0.6232, 0.6517], [0.3463, 0.8616, 0.082]]]]])
in1Sub63701 = tf.constant([[[[[0.9235, 0.1416, 0.4741], [0.7504, 0.2696, 0.8116]], [[0.8269, 0.35, 0.2881], [0.0176, 0.8608, 0.5738]], [[0.7314, 0.0254, 0.959], [0.2302, 0.46, 0.0036]]], [[[0.9334, 0.7622, 0.1773], [0.283, 0.1263, 0.439]], [[0.5952, 0.5982, 0.8691], [0.4757, 0.1824, 0.4375]], [[0.8048, 0.8343, 0.9297], [0.7612, 0.129, 0.4797]]]]])
print (np.array2string(model.predict([in0Sub63701,in1Sub63701],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Cro88283.png')

LSub63701 = subtract_layer([[[[[0.1105, 0.3244, 0.5197], [0.0134, 0.0665, 0.478]], [[0.5048, 0.5016, 0.0273], [0.3579, 0.7224, 0.5748]], [[0.6187, 0.3661, 0.2378], [0.2586, 0.5777, 0.0031]]], [[[0.1326, 0.7633, 0.5818], [0.3231, 0.0631, 0.0468]], [[0.939, 0.1067, 0.8547], [0.9901, 0.9057, 0.0777]], [[0.3644, 0.6232, 0.6517], [0.3463, 0.8616, 0.082]]]]], [[[[[0.9235, 0.1416, 0.4741], [0.7504, 0.2696, 0.8116]], [[0.8269, 0.35, 0.2881], [0.0176, 0.8608, 0.5738]], [[0.7314, 0.0254, 0.959], [0.2302, 0.46, 0.0036]]], [[[0.9334, 0.7622, 0.1773], [0.283, 0.1263, 0.439]], [[0.5952, 0.5982, 0.8691], [0.4757, 0.1824, 0.4375]], [[0.8048, 0.8343, 0.9297], [0.7612, 0.129, 0.4797]]]]], Sub63701), 
LRes58715 = reshape_layer(Sub63701, [2, 3, 6], Res58715), 
LRes58619 = reshape_layer(Res58715, [2, 18], Res58619), 
LCro88283 = cropping1D_layer(Res58619, 0, 1, Cro88283), 
exec_layers([LSub63701,LRes58715,LRes58619,LCro88283],["Sub63701","Res58715","Res58619","Cro88283"],Cro88283,"Cro88283")

Actual (Unparsed): [[[-0.8130000, 0.1828000, 0.0456000, -0.7370000, -0.2031000, -0.3336000, -0.3221000, 0.1516000, -0.2608000, 0.3403000, -0.1384000, 0.0010000, -0.1127000, 0.3407000, -0.7212000, 0.0284000, 0.1177000, -0.0005000]]]

Expected (Unparsed): [[[-0.813,0.18280000000000002,0.04560000000000003,-0.737,-0.2031,-0.3336,-0.32209999999999994,0.15160000000000007,-0.26080000000000003,0.3403,-0.13839999999999997,0.0010000000000000009,-0.11270000000000002,0.3407,-0.7212,0.02840000000000001,0.11769999999999997,-0.0005]]]

Actual:   [[[-0.813, 0.1828, 0.0456, -0.737, -0.2031, -0.3336, -0.3221, 0.1516, -0.2608, 0.3403, -0.1384, 0.001, -0.1127, 0.3407, -0.7212, 0.0284, 0.1177, -0.0005]]]

Expected: [[[-0.813, 0.1829, 0.0457, -0.737, -0.2031, -0.3336, -0.322, 0.1517, -0.2608, 0.3403, -0.1383, 0.0011, -0.1127, 0.3407, -0.7212, 0.0285, 0.1177, -0.0005]]]