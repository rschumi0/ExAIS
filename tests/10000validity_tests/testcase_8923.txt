import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave4310 = tf.keras.layers.Input(shape=([2, 2, 2]))

Ave4310 = keras.layers.AveragePooling2D(pool_size=(1, 2), name = 'Ave4310', )(in0Ave4310)
Res46679 = keras.layers.Reshape((2, 2), name = 'Res46679', )(Ave4310)
Fla31325 = keras.layers.Flatten(name = 'Fla31325', )(Res46679)
Res13449 = keras.layers.Reshape((4, 1), name = 'Res13449', )(Fla31325)
Res92444 = keras.layers.Reshape((4, 1, 1), name = 'Res92444', )(Res13449)
Sep92339 = keras.layers.SeparableConv2D(4, (4, 1),strides=(4, 4), padding='valid', name = 'Sep92339', )(Res92444)
model = tf.keras.models.Model(inputs=[in0Ave4310], outputs=Sep92339)
w = model.get_layer('Sep92339').get_weights() 
w[0] = np.array([[[[0.1701]]], [[[0.9812]]], [[[0.0142]]], [[[0.9201]]]])
w[1] = np.array([[[[0.4062, 0.3975, 0.7717, 0.9915]]]])
w[2] = np.array([0, 0, 0, 0])
model.get_layer('Sep92339').set_weights(w) 
in0Ave4310 = tf.constant([[[[1.8694, 1.9074], [1.6303, 1.3256]], [[1.9252, 1.6003], [1.5041, 1.3101]]]])
print (np.array2string(model.predict([in0Ave4310],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sep92339.png')

LAve4310 = average_pooling2D_layer([[[[1.8694, 1.9074], [1.6303, 1.3256]], [[1.9252, 1.6003], [1.5041, 1.3101]]]], 1, 2, Ave4310), 
LRes46679 = reshape_layer(Ave4310, [2, 2], Res46679), 
LFla31325 = flatten_layer(Res46679, Fla31325), 
LRes13449 = reshape_layer(Fla31325, [4, 1], Res13449), 
LRes92444 = reshape_layer(Res13449, [4, 1, 1], Res92444), 
LSep92339 = separable_conv2D_layer(Res92444, 4, 1,[[[[[0.1701]]], [[[0.9812]]], [[[0.0142]]], [[[0.9201]]]],[[[[0.4062, 0.3975, 0.7717, 0.9915]]]]],[0, 0, 0, 0], 4, 4, false, Sep92339), 
exec_layers([LAve4310,LRes46679,LFla31325,LRes13449,LRes92444,LSep92339],["Ave4310","Res46679","Fla31325","Res13449","Res92444","Sep92339"],Sep92339,"Sep92339")

Actual (Unparsed): [[[[1.3189464, 1.2906971, 2.5057383, 3.2194370]]]]

Expected (Unparsed): [[[[1.318946362377,1.2906971419125002,2.5057383255695003,3.2194370219024995]]]]

Actual:   [[[[1.319, 1.2907, 2.5058, 3.2195]]]]

Expected: [[[[1.319, 1.2907, 2.5058, 3.2195]]]]