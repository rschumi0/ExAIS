import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max82665 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max82665 = tf.keras.layers.Input(shape=([1, 2, 2]))

Max82665 = keras.layers.Maximum(name = 'Max82665', )([in0Max82665,in1Max82665])
ELU80038 = keras.layers.ELU(alpha=-8.742552870541589, name = 'ELU80038', )(Max82665)
Con80202 = keras.layers.Conv2DTranspose(4, (1, 2),strides=(1, 1), padding='valid', name = 'Con80202', )(ELU80038)
Res28802 = keras.layers.Reshape((1, 3, 4, 1), name = 'Res28802', )(Con80202)
Glo33318 = keras.layers.GlobalAveragePooling3D(name = 'Glo33318', )(Res28802)
model = tf.keras.models.Model(inputs=[in0Max82665,in1Max82665], outputs=Glo33318)
w = model.get_layer('Con80202').get_weights() 
w[0] = np.array([[[[0.4845, 0.6243], [0.238, 0.7035], [0.8187, 0.8137], [0.1528, 0.6975]], [[0.3048, 0.2608], [0.2315, 0.8342], [0.9051, 0.2731], [0.8986, 0.6789]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con80202').set_weights(w) 
in0Max82665 = tf.constant([[[[0.5113, 0.6642], [0.4041, 0.626]]]])
in1Max82665 = tf.constant([[[[0.5296, 0.0144], [0.5428, 0.3116]]]])
print (np.array2string(model.predict([in0Max82665,in1Max82665],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo33318.png')

LMax82665 = maximum_layer([[[[[0.5113, 0.6642], [0.4041, 0.626]]]], [[[[0.5296, 0.0144], [0.5428, 0.3116]]]]], Max82665), 
LELU80038 = elu_layer(Max82665, -8.742552870541589, ELU80038), 
LCon80202 = conv2D_transpose_layer(ELU80038, 1, 2,[[[[0.4845, 0.6243], [0.238, 0.7035], [0.8187, 0.8137], [0.1528, 0.6975]], [[0.3048, 0.2608], [0.2315, 0.8342], [0.9051, 0.2731], [0.8986, 0.6789]]]],[0, 0, 0, 0], 1, 1, false, Con80202), 
LRes28802 = reshape_layer(Con80202, [1, 3, 4, 1], Res28802), 
LGlo33318 = global_average_pooling3D_layer(Res28802, Glo33318), 
exec_layers([LMax82665,LELU80038,LCon80202,LRes28802,LGlo33318],["Max82665","ELU80038","Con80202","Res28802","Glo33318"],Glo33318,"Glo33318")

Actual (Unparsed): [[0.8858316]]

Expected (Unparsed): [[0.8858315666666666]]

Actual:   [[0.8859]]

Expected: [[0.8859]]