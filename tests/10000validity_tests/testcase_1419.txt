import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer8974 = tf.keras.layers.Input(shape=([2, 4]))
in0Glo60695 = tf.keras.layers.Input(shape=([2, 2, 1]))

Zer8974 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer8974', )(in0Zer8974)
Res87164 = keras.layers.Reshape((4, 4, 1), name = 'Res87164', )(Zer8974)
Glo60695 = keras.layers.GlobalMaxPool2D(name = 'Glo60695', )(in0Glo60695)
Res13625 = keras.layers.Reshape((1, 1), name = 'Res13625', )(Glo60695)
Res83381 = keras.layers.Reshape((1, 1, 1), name = 'Res83381', )(Res13625)
Dep44873 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='same', name = 'Dep44873', )(Res83381)
Zer50468 = keras.layers.ZeroPadding2D(padding=((3, 0), (3, 0)), name = 'Zer50468', )(Dep44873)
Mul90622 = keras.layers.Multiply(name = 'Mul90622', )([Res87164,Zer50468])
model = tf.keras.models.Model(inputs=[in0Zer8974,in0Glo60695], outputs=Mul90622)
w = model.get_layer('Dep44873').get_weights() 
w[0] = np.array([[[[0.5509]]]])
w[1] = np.array([0])
model.get_layer('Dep44873').set_weights(w) 
in0Zer8974 = tf.constant([[[1.0899, 1.3177, 1.8231, 1.969], [1.4893, 1.1193, 1.9282, 1.775]]])
in0Glo60695 = tf.constant([[[[1.518], [1.5701]], [[1.0336], [1.124]]]])
print (np.array2string(model.predict([in0Zer8974,in0Glo60695],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul90622.png')

LZer8974 = zero_padding1D_layer([[[1.0899, 1.3177, 1.8231, 1.969], [1.4893, 1.1193, 1.9282, 1.775]]], 1, 1, Zer8974), 
LRes87164 = reshape_layer(Zer8974, [4, 4, 1], Res87164), 
LGlo60695 = global_max_pool2D_layer([[[[1.518], [1.5701]], [[1.0336], [1.124]]]], Glo60695), 
LRes13625 = reshape_layer(Glo60695, [1, 1], Res13625), 
LRes83381 = reshape_layer(Res13625, [1, 1, 1], Res83381), 
LDep44873 = depthwise_conv2D_layer(Res83381, 1, 1,[[[[0.5509]]]],[0], 1, 1, true, Dep44873), 
LZer50468 = zero_padding2D_layer(Dep44873, 3, 0, 3, 0, Zer50468), 
LMul90622 = multiply_layer([Res87164,Zer50468], Mul90622), 
exec_layers([LZer8974,LRes87164,LGlo60695,LRes13625,LRes83381,LDep44873,LZer50468,LMul90622],["Zer8974","Res87164","Glo60695","Res13625","Res83381","Dep44873","Zer50468","Mul90622"],Mul90622,"Mul90622")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.0000000], [0.0000000], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0],[0]],[[0.0],[0.0],[0.0],[0.0]],[[0.0],[0.0],[0.0],[0.0]],[[0],[0],[0],[0.0]]]]

Actual:   [[[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]]]

Expected: [[[[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]], [[0], [0], [0], [0]]]]