import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub14161 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub14161 = tf.keras.layers.Input(shape=([2, 3, 3]))

Sub14161 = keras.layers.Subtract(name = 'Sub14161', )([in0Sub14161,in1Sub14161])
Res17356 = keras.layers.Reshape((2, 9), name = 'Res17356', )(Sub14161)
Glo39293 = keras.layers.GlobalMaxPool1D(name = 'Glo39293', )(Res17356)
model = tf.keras.models.Model(inputs=[in0Sub14161,in1Sub14161], outputs=Glo39293)
in0Sub14161 = tf.constant([[[[0.6417, 0.8878, 0.7344], [0.1775, 0.0344, 0.6544], [0.0684, 0.7952, 0.7916]], [[0.1119, 0.7594, 0.4481], [0.5692, 0.3671, 0.926], [0.6898, 0.433, 0.7634]]]])
in1Sub14161 = tf.constant([[[[0.3957, 0.8526, 0.072], [0.8238, 0.086, 0.5778], [0.3118, 0.0534, 0.7776]], [[0.021, 0.8522, 0.8043], [0.6675, 0.8439, 0.8646], [0.0679, 0.0035, 0.0883]]]])
print (np.array2string(model.predict([in0Sub14161,in1Sub14161],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo39293.png')

LSub14161 = subtract_layer([[[[0.6417, 0.8878, 0.7344], [0.1775, 0.0344, 0.6544], [0.0684, 0.7952, 0.7916]], [[0.1119, 0.7594, 0.4481], [0.5692, 0.3671, 0.926], [0.6898, 0.433, 0.7634]]]], [[[[0.3957, 0.8526, 0.072], [0.8238, 0.086, 0.5778], [0.3118, 0.0534, 0.7776]], [[0.021, 0.8522, 0.8043], [0.6675, 0.8439, 0.8646], [0.0679, 0.0035, 0.0883]]]], Sub14161), 
LRes17356 = reshape_layer(Sub14161, [2, 9], Res17356), 
LGlo39293 = global_max_pool1D_layer(Res17356, Glo39293), 
exec_layers([LSub14161,LRes17356,LGlo39293],["Sub14161","Res17356","Glo39293"],Glo39293,"Glo39293")

Actual (Unparsed): [[0.2460000, 0.0352000, 0.6624000, -0.0983000, -0.0516000, 0.0766000, 0.6219000, 0.7418000, 0.6751000]]

Expected (Unparsed): [[0.24600000000000005,0.03520000000000001,0.6624000000000001,-0.09829999999999994,-0.05159999999999999,0.0766,0.6219,0.7418,0.6750999999999999]]

Actual:   [[0.246, 0.0352, 0.6624, -0.0983, -0.0516, 0.0766, 0.6219, 0.7418, 0.6751]]

Expected: [[0.2461, 0.0353, 0.6625, -0.0982, -0.0515, 0.0766, 0.6219, 0.7418, 0.6751]]