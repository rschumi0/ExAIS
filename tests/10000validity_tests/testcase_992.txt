import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max56747 = tf.keras.layers.Input(shape=([2, 1]))
in1Max56747 = tf.keras.layers.Input(shape=([2, 1]))

Max56747 = keras.layers.Maximum(name = 'Max56747', )([in0Max56747,in1Max56747])
Res22302 = keras.layers.Reshape((2, 1, 1), name = 'Res22302', )(Max56747)
Res26395 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res26395', )(Res22302)
Con49288 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 4), padding='valid', name = 'Con49288', )(Res26395)
Res39719 = keras.layers.Reshape((2, 1, 12), name = 'Res39719', )(Con49288)
Res6445 = keras.layers.Reshape((2, 12), name = 'Res6445', )(Res39719)
Glo10251 = keras.layers.GlobalMaxPool1D(name = 'Glo10251', )(Res6445)
model = tf.keras.models.Model(inputs=[in0Max56747,in1Max56747], outputs=Glo10251)
w = model.get_layer('Con49288').get_weights() 
w[0] = np.array([[[[[0.5891], [0.7458], [0.2729]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con49288').set_weights(w) 
in0Max56747 = tf.constant([[[0.7696], [0.8807]]])
in1Max56747 = tf.constant([[[0.3187], [0.3845]]])
print (np.array2string(model.predict([in0Max56747,in1Max56747],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo10251.png')

LMax56747 = maximum_layer([[[[0.7696], [0.8807]]], [[[0.3187], [0.3845]]]], Max56747), 
LRes22302 = reshape_layer(Max56747, [2, 1, 1], Res22302), 
LRes26395 = reshape_layer(Res22302, [2, 1, 1, 1], Res26395), 
LCon49288 = conv3D_transpose_layer(Res26395, 1, 1, 1,[[[[[0.5891], [0.7458], [0.2729]]]]],[0, 0, 0], 1, 1, 4, false, Con49288), 
LRes39719 = reshape_layer(Con49288, [2, 1, 12], Res39719), 
LRes6445 = reshape_layer(Res39719, [2, 12], Res6445), 
LGlo10251 = global_max_pool1D_layer(Res6445, Glo10251), 
exec_layers([LMax56747,LRes22302,LRes26395,LCon49288,LRes39719,LRes6445,LGlo10251],["Max56747","Res22302","Res26395","Con49288","Res39719","Res6445","Glo10251"],Glo10251,"Glo10251")

Actual (Unparsed): [[0.5188204, 0.6568261, 0.2403430, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0.51882037,0.6568260600000001,0.24034302999999999,0,0,0,0,0,0,0,0,0]]

Actual:   [[0.5189, 0.6569, 0.2404, 0, 0, 0, 0, 0, 0, 0, 0, 0]]

Expected: [[0.5189, 0.6569, 0.2404, 0, 0, 0, 0, 0, 0, 0, 0, 0]]