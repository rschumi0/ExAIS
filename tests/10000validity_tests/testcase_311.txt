import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul33524 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul33524 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Sub40548 = tf.keras.layers.Input(shape=([3]))
in1Sub40548 = tf.keras.layers.Input(shape=([3]))
in0Con34645 = tf.keras.layers.Input(shape=([5]))
in0Con27802 = tf.keras.layers.Input(shape=([8, 1, 1, 1]))
in0Con53517 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Mul33524 = keras.layers.Multiply(name = 'Mul33524', )([in0Mul33524,in1Mul33524])
Res19770 = keras.layers.Reshape((2, 4), name = 'Res19770', )(Mul33524)
Fla61473 = keras.layers.Flatten(name = 'Fla61473', )(Res19770)
Sub40548 = keras.layers.Subtract(name = 'Sub40548', )([in0Sub40548,in1Sub40548])
Con34645 = keras.layers.Concatenate(axis=1, name = 'Con34645', )([Sub40548,in0Con34645])
Min92500 = keras.layers.Minimum(name = 'Min92500', )([Fla61473,Con34645])
Res57048 = keras.layers.Reshape((8, 1), name = 'Res57048', )(Min92500)
Res3066 = keras.layers.Reshape((8, 1, 1), name = 'Res3066', )(Res57048)
Res63705 = keras.layers.Reshape((8, 1, 1, 1), name = 'Res63705', )(Res3066)
Con27802 = keras.layers.Concatenate(axis=4, name = 'Con27802', )([Res63705,in0Con27802])
Con53517 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con53517', )(in0Con53517)
Zer30529 = keras.layers.ZeroPadding3D(padding=((6, 0), (0, 0), (0, 0)), name = 'Zer30529', )(Con53517)
Mul30995 = keras.layers.Multiply(name = 'Mul30995', )([Con27802,Zer30529])
model = tf.keras.models.Model(inputs=[in0Mul33524,in1Mul33524,in0Sub40548,in1Sub40548,in0Con34645,in0Con27802,in0Con53517], outputs=Mul30995)
w = model.get_layer('Con53517').get_weights() 
w[0] = np.array([[[[[0.6735, 0.3222], [0.8623, 0.1977]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con53517').set_weights(w) 
in0Mul33524 = tf.constant([[[[0.5972, 0.7568], [0.5943, 0.8593]], [[0.116, 0.3279], [0.8978, 0.7139]]]])
in1Mul33524 = tf.constant([[[[0.244, 0.6236], [0.7104, 0.8561]], [[0.7692, 0.6183], [0.7762, 0.0298]]]])
in0Sub40548 = tf.constant([[0.2193, 0.7116, 0.3807]])
in1Sub40548 = tf.constant([[0.6851, 0.5447, 0.4116]])
in0Con34645 = tf.constant([[0.8135, 0.8887, 0.8082, 0.3604, 0.1787]])
in0Con27802 = tf.constant([[[[[0.515]]], [[[0.0775]]], [[[0.6409]]], [[[0.1578]]], [[[0.011]]], [[[0.3033]]], [[[0.491]]], [[[0.1745]]]]])
in0Con53517 = tf.constant([[[[[0.6188, 0.0677]]], [[[0.1359, 0.9406]]]]])
print (np.array2string(model.predict([in0Mul33524,in1Mul33524,in0Sub40548,in1Sub40548,in0Con34645,in0Con27802,in0Con53517],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul30995.png')

LMul33524 = multiply_layer([[[[[0.5972, 0.7568], [0.5943, 0.8593]], [[0.116, 0.3279], [0.8978, 0.7139]]]], [[[[0.244, 0.6236], [0.7104, 0.8561]], [[0.7692, 0.6183], [0.7762, 0.0298]]]]], Mul33524), 
LRes19770 = reshape_layer(Mul33524, [2, 4], Res19770), 
LFla61473 = flatten_layer(Res19770, Fla61473), 
LSub40548 = subtract_layer([[0.2193, 0.7116, 0.3807]], [[0.6851, 0.5447, 0.4116]], Sub40548), 
LCon34645 = concatenate_layer([Sub40548,[[0.8135, 0.8887, 0.8082, 0.3604, 0.1787]]], 1, Con34645), 
LMin92500 = minimum_layer([Fla61473,Con34645], Min92500), 
LRes57048 = reshape_layer(Min92500, [8, 1], Res57048), 
LRes3066 = reshape_layer(Res57048, [8, 1, 1], Res3066), 
LRes63705 = reshape_layer(Res3066, [8, 1, 1, 1], Res63705), 
LCon27802 = concatenate_layer([Res63705,[[[[[0.515]]], [[[0.0775]]], [[[0.6409]]], [[[0.1578]]], [[[0.011]]], [[[0.3033]]], [[[0.491]]], [[[0.1745]]]]]], 4, Con27802), 
LCon53517 = conv3D_transpose_layer([[[[[0.6188, 0.0677]]], [[[0.1359, 0.9406]]]]], 1, 1, 1,[[[[[0.6735, 0.3222], [0.8623, 0.1977]]]]],[0, 0], 1, 1, 1, true, Con53517), 
LZer30529 = zero_padding3D_layer(Con53517, 6, 0, 0, 0, 0, 0, Zer30529), 
LMul30995 = multiply_layer([Con27802,Zer30529], Mul30995), 
exec_layers([LMul33524,LRes19770,LFla61473,LSub40548,LCon34645,LMin92500,LRes57048,LRes3066,LRes63705,LCon27802,LCon53517,LZer30529,LMul30995],["Mul33524","Res19770","Fla61473","Sub40548","Con34645","Min92500","Res57048","Res3066","Res63705","Con27802","Con53517","Zer30529","Mul30995"],Mul30995,"Mul30995")

Actual (Unparsed): [[[[[-0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[-0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.0000000, 0.0000000]]], [[[0.1580623, 0.2685650]]], [[[0.0083946, 0.0528985]]]]]

Expected (Unparsed): [[[[[-0.0,0.0]]],[[[0.0,0.0]]],[[[-0.0,0.0]]],[[[0.0,0.0]]],[[[0.0,0.0]]],[[[0.0,0.0]]],[[[0.158062336296,0.26856498523]]],[[[0.0083945938315734,0.052898486655]]]]]

Actual:   [[[[[-0, 0]]], [[[0, 0]]], [[[-0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0.1581, 0.2686]]], [[[0.0084, 0.0529]]]]]

Expected: [[[[[-0, 0]]], [[[0, 0]]], [[[-0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0, 0]]], [[[0.1581, 0.2686]]], [[[0.0084, 0.0529]]]]]