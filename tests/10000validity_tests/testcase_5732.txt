import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo33044 = tf.keras.layers.Input(shape=([1, 1]))
in0Con43616 = tf.keras.layers.Input(shape=([3, 2]))
in0Dot40088 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot40088 = tf.keras.layers.Input(shape=([2, 3]))

Glo33044 = keras.layers.GlobalMaxPool1D(name = 'Glo33044', )(in0Glo33044)
Res18609 = keras.layers.Reshape((1, 1), name = 'Res18609', )(Glo33044)
Zer46062 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer46062', )(Res18609)
Con43616 = keras.layers.Concatenate(axis=2, name = 'Con43616', )([Zer46062,in0Con43616])
Dot40088 = keras.layers.Dot(axes=(1, 1), name = 'Dot40088', )([in0Dot40088,in1Dot40088])
Mul78836 = keras.layers.Multiply(name = 'Mul78836', )([Con43616,Dot40088])
model = tf.keras.models.Model(inputs=[in0Glo33044,in0Con43616,in0Dot40088,in1Dot40088], outputs=Mul78836)
in0Glo33044 = tf.constant([[[1.0145]]])
in0Con43616 = tf.constant([[[0.6966, 0.6482], [0.4344, 0.6101], [0.4073, 0.2394]]])
in0Dot40088 = tf.constant([[[0.1301, 0.4235, 0.2333], [0.8083, 0.0784, 0.4841]]])
in1Dot40088 = tf.constant([[[0.0293, 0.833, 0.1798], [0.2078, 0.2716, 0.615]]])
print (np.array2string(model.predict([in0Glo33044,in0Con43616,in0Dot40088,in1Dot40088],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul78836.png')

LGlo33044 = global_max_pool1D_layer([[[1.0145]]], Glo33044), 
LRes18609 = reshape_layer(Glo33044, [1, 1], Res18609), 
LZer46062 = zero_padding1D_layer(Res18609, 2, 0, Zer46062), 
LCon43616 = concatenate_layer([Zer46062,[[[0.6966, 0.6482], [0.4344, 0.6101], [0.4073, 0.2394]]]], 2, Con43616), 
LDot40088 = dot_layer([[[0.1301, 0.4235, 0.2333], [0.8083, 0.0784, 0.4841]]], [[[0.0293, 0.833, 0.1798], [0.2078, 0.2716, 0.615]]], 1, 1, Dot40088), 
LMul78836 = multiply_layer([Con43616,Dot40088], Mul78836), 
exec_layers([LGlo33044,LRes18609,LZer46062,LCon43616,LDot40088,LMul78836],["Glo33044","Res18609","Zer46062","Con43616","Dot40088","Mul78836"],Mul78836,"Mul78836")

Actual (Unparsed): [[[0.0000000, 0.2284204, 0.3373858], [0.0000000, 0.1624955, 0.0758728], [0.1089894, 0.1327067, 0.0813167]]]

Expected (Unparsed): [[[0.0,0.228420420228,0.337385818336],[0.0,0.16249554753599998,0.07587282913],[0.108989429215,0.132706673358,0.081316720296]]]

Actual:   [[[0, 0.2285, 0.3374], [0, 0.1625, 0.0759], [0.109, 0.1328, 0.0814]]]

Expected: [[[0, 0.2285, 0.3374], [0, 0.1625, 0.0759], [0.109, 0.1328, 0.0814]]]