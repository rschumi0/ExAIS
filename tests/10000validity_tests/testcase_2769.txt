import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max49076 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max49076 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Dot15035 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot15035 = tf.keras.layers.Input(shape=([2, 3]))
in0Ave4432 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave4432 = tf.keras.layers.Input(shape=([1, 1]))
in0Con36663 = tf.keras.layers.Input(shape=([3, 2]))
in0Min6385 = tf.keras.layers.Input(shape=([2, 2]))
in1Min6385 = tf.keras.layers.Input(shape=([2, 2]))
in0Con79786 = tf.keras.layers.Input(shape=([3, 2]))
in0Lea73004 = tf.keras.layers.Input(shape=([2, 2, 1]))

Max49076 = keras.layers.Maximum(name = 'Max49076', )([in0Max49076,in1Max49076])
Res36858 = keras.layers.Reshape((1, 4), name = 'Res36858', )(Max49076)
Ave23106 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='same', name = 'Ave23106', )(Res36858)
Zer31416 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer31416', )(Ave23106)
Dot15035 = keras.layers.Dot(axes=(1, 1), name = 'Dot15035', )([in0Dot15035,in1Dot15035])
Ave4432 = keras.layers.Average(name = 'Ave4432', )([in0Ave4432,in1Ave4432])
Zer63933 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer63933', )(Ave4432)
Con36663 = keras.layers.Concatenate(axis=2, name = 'Con36663', )([Zer63933,in0Con36663])
Mul75797 = keras.layers.Multiply(name = 'Mul75797', )([Dot15035,Con36663])
Min6385 = keras.layers.Minimum(name = 'Min6385', )([in0Min6385,in1Min6385])
Zer33637 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer33637', )(Min6385)
Dot71552 = keras.layers.Dot(axes=(1, 1), name = 'Dot71552', )([Mul75797,Zer33637])
Con79786 = keras.layers.Concatenate(axis=2, name = 'Con79786', )([Dot71552,in0Con79786])
Sub23633 = keras.layers.Subtract(name = 'Sub23633', )([Zer31416,Con79786])
Lea73004 = keras.layers.LeakyReLU(alpha=8.117211704657933, name = 'Lea73004', input_shape=(2, 2, 1))(in0Lea73004)
Max89381 = keras.layers.MaxPool2D(pool_size=(2, 1), name = 'Max89381', )(Lea73004)
Res43843 = keras.layers.Reshape((1, 2), name = 'Res43843', )(Max89381)
Zer14692 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer14692', )(Res43843)
Dot65422 = keras.layers.Dot(axes=(1, 1), name = 'Dot65422', )([Sub23633,Zer14692])
model = tf.keras.models.Model(inputs=[in0Max49076,in1Max49076,in0Dot15035,in1Dot15035,in0Ave4432,in1Ave4432,in0Con36663,in0Min6385,in1Min6385,in0Con79786,in0Lea73004], outputs=Dot65422)
in0Max49076 = tf.constant([[[[0.6852, 0.2883], [0.7069, 0.185]]]])
in1Max49076 = tf.constant([[[[0.6285, 0.8898], [0.0241, 0.2397]]]])
in0Dot15035 = tf.constant([[[0.6646, 0.3636, 0.0217], [0.2148, 0.6635, 0.9075]]])
in1Dot15035 = tf.constant([[[0.6211, 0.0306, 0.6956], [0.294, 0.9751, 0.6832]]])
in0Ave4432 = tf.constant([[[0.661]]])
in1Ave4432 = tf.constant([[[0.848]]])
in0Con36663 = tf.constant([[[0.3639, 0.6499], [0.5425, 0.7249], [0.0021, 0.2184]]])
in0Min6385 = tf.constant([[[0.2763, 0.9488], [0.8525, 0.259]]])
in1Min6385 = tf.constant([[[0.1566, 0.7261], [0.1117, 0.5759]]])
in0Con79786 = tf.constant([[[0.5112, 0.7239], [0.9166, 0.4425], [0.1935, 0.0382]]])
in0Lea73004 = tf.constant([[[[0.4682], [0.1995]], [[0.4436], [0.6664]]]])
print (np.array2string(model.predict([in0Max49076,in1Max49076,in0Dot15035,in1Dot15035,in0Ave4432,in1Ave4432,in0Con36663,in0Min6385,in1Min6385,in0Con79786,in0Lea73004],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot65422.png')

LMax49076 = maximum_layer([[[[[0.6852, 0.2883], [0.7069, 0.185]]]], [[[[0.6285, 0.8898], [0.0241, 0.2397]]]]], Max49076), 
LRes36858 = reshape_layer(Max49076, [1, 4], Res36858), 
LAve23106 = average_pooling1D_layer(Res36858, 1, 1, true, Ave23106), 
LZer31416 = zero_padding1D_layer(Ave23106, 2, 0, Zer31416), 
LDot15035 = dot_layer([[[0.6646, 0.3636, 0.0217], [0.2148, 0.6635, 0.9075]]], [[[0.6211, 0.0306, 0.6956], [0.294, 0.9751, 0.6832]]], 1, 1, Dot15035), 
LAve4432 = average_layer([[[[0.661]]], [[[0.848]]]], Ave4432), 
LZer63933 = zero_padding1D_layer(Ave4432, 2, 0, Zer63933), 
LCon36663 = concatenate_layer([Zer63933,[[[0.3639, 0.6499], [0.5425, 0.7249], [0.0021, 0.2184]]]], 2, Con36663), 
LMul75797 = multiply_layer([Dot15035,Con36663], Mul75797), 
LMin6385 = minimum_layer([[[[0.2763, 0.9488], [0.8525, 0.259]]], [[[0.1566, 0.7261], [0.1117, 0.5759]]]], Min6385), 
LZer33637 = zero_padding1D_layer(Min6385, 1, 0, Zer33637), 
LDot71552 = dot_layer(Mul75797,Zer33637, 1, 1, Dot71552), 
LCon79786 = concatenate_layer([Dot71552,[[[0.5112, 0.7239], [0.9166, 0.4425], [0.1935, 0.0382]]]], 2, Con79786), 
LSub23633 = subtract_layer(Zer31416,Con79786, Sub23633), 
LLea73004 = leaky_relu_layer([[[[0.4682], [0.1995]], [[0.4436], [0.6664]]]], 8.117211704657933, Lea73004), 
LMax89381 = max_pool2D_layer(Lea73004, 2, 1, Max89381), 
LRes43843 = reshape_layer(Max89381, [1, 2], Res43843), 
LZer14692 = zero_padding1D_layer(Res43843, 2, 0, Zer14692), 
LDot65422 = dot_layer(Sub23633,Zer14692, 1, 1, Dot65422), 
exec_layers([LMax49076,LRes36858,LAve23106,LZer31416,LDot15035,LAve4432,LZer63933,LCon36663,LMul75797,LMin6385,LZer33637,LDot71552,LCon79786,LSub23633,LLea73004,LMax89381,LRes43843,LZer14692,LDot65422],["Max49076","Res36858","Ave23106","Zer31416","Dot15035","Ave4432","Zer63933","Con36663","Mul75797","Min6385","Zer33637","Dot71552","Con79786","Sub23633","Lea73004","Max89381","Res43843","Zer14692","Dot65422"],Dot65422,"Dot65422")

Actual (Unparsed): [[[0.2760210, 0.3928672], [0.2257448, 0.3213079], [0.2403739, 0.3421298], [0.0943423, 0.1342796]]]

Expected (Unparsed): [[[0.276021028655596,0.39286717961573936],[0.22574482272370888,0.3213078809548902],[0.24037387999999998,0.34212975999999995],[0.0943423,0.1342796]]]

Actual:   [[[0.2761, 0.3929], [0.2258, 0.3214], [0.2404, 0.3422], [0.0944, 0.1343]]]

Expected: [[[0.2761, 0.3929], [0.2258, 0.3214], [0.2404, 0.3422], [0.0944, 0.1343]]]