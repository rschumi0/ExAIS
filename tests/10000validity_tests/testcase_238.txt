import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min27287 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min27287 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Max73902 = tf.keras.layers.Input(shape=([2, 2]))
in0Con27405 = tf.keras.layers.Input(shape=([2, 1]))

Min27287 = keras.layers.Minimum(name = 'Min27287', )([in0Min27287,in1Min27287])
Loc21017 = keras.layers.LocallyConnected2D(3, (1, 1),strides=(8, 1), name = 'Loc21017', )(Min27287)
Res57684 = keras.layers.Reshape((1, 3), name = 'Res57684', )(Loc21017)
Zer58379 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer58379', )(Res57684)
Max73902 = keras.layers.MaxPool1D(pool_size=(1), strides=(1), padding='valid', name = 'Max73902', )(in0Max73902)
Con27405 = keras.layers.Concatenate(axis=2, name = 'Con27405', )([Max73902,in0Con27405])
Mul3342 = keras.layers.Multiply(name = 'Mul3342', )([Zer58379,Con27405])
model = tf.keras.models.Model(inputs=[in0Min27287,in1Min27287,in0Max73902,in0Con27405], outputs=Mul3342)
w = model.get_layer('Loc21017').get_weights() 
w[0] = np.array([[[0.8227, 0.1043, 0.8772], [0.6879, 0.0574, 0.9684]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc21017').set_weights(w) 
in0Min27287 = tf.constant([[[[0.8981, 0.7716]]]])
in1Min27287 = tf.constant([[[[0.2114, 0.9396]]]])
in0Max73902 = tf.constant([[[1.875, 1.2176], [1.3058, 1.8899]]])
in0Con27405 = tf.constant([[[0.1096], [0.2082]]])
print (np.array2string(model.predict([in0Min27287,in1Min27287,in0Max73902,in0Con27405],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul3342.png')

LMin27287 = minimum_layer([[[[[0.8981, 0.7716]]]], [[[[0.2114, 0.9396]]]]], Min27287), 
LLoc21017 = locally_connected2D_layer(Min27287, 1, 1,[[[0.8227, 0.1043, 0.8772], [0.6879, 0.0574, 0.9684]]],[[[0, 0, 0]]], 8, 1, Loc21017), 
LRes57684 = reshape_layer(Loc21017, [1, 3], Res57684), 
LZer58379 = zero_padding1D_layer(Res57684, 1, 0, Zer58379), 
LMax73902 = max_pool1D_layer([[[1.875, 1.2176], [1.3058, 1.8899]]], 1, 1, false, Max73902), 
LCon27405 = concatenate_layer([Max73902,[[[0.1096], [0.2082]]]], 2, Con27405), 
LMul3342 = multiply_layer([Zer58379,Con27405], Mul3342), 
exec_layers([LMin27287,LLoc21017,LRes57684,LZer58379,LMax73902,LCon27405,LMul3342],["Min27287","Loc21017","Res57684","Zer58379","Max73902","Con27405","Mul3342"],Mul3342,"Mul3342")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000], [0.9202004, 0.1253738, 0.1941793]]]

Expected (Unparsed): [[[0.0,0.0,0.0],[0.9202004200359998,0.12537381151399998,0.194179295664]]]

Actual:   [[[0, 0, 0], [0.9203, 0.1254, 0.1942]]]

Expected: [[[0, 0, 0], [0.9203, 0.1254, 0.1942]]]