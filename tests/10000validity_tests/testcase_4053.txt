import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave5029 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Ave5029 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Sub36232 = tf.keras.layers.Input(shape=([2]))
in1Sub36232 = tf.keras.layers.Input(shape=([2]))
in0Con32266 = tf.keras.layers.Input(shape=([1, 1]))

Ave5029 = keras.layers.Average(name = 'Ave5029', )([in0Ave5029,in1Ave5029])
Res48894 = keras.layers.Reshape((1, 2), name = 'Res48894', )(Ave5029)
Sub36232 = keras.layers.Subtract(name = 'Sub36232', )([in0Sub36232,in1Sub36232])
Res93220 = keras.layers.Reshape((2, 1), name = 'Res93220', )(Sub36232)
Max63841 = keras.layers.MaxPool1D(pool_size=(2), strides=(2), padding='valid', name = 'Max63841', )(Res93220)
Con32266 = keras.layers.Concatenate(axis=2, name = 'Con32266', )([Max63841,in0Con32266])
Sub73423 = keras.layers.Subtract(name = 'Sub73423', )([Res48894,Con32266])
Glo97565 = keras.layers.GlobalAveragePooling1D(name = 'Glo97565', )(Sub73423)
model = tf.keras.models.Model(inputs=[in0Ave5029,in1Ave5029,in0Sub36232,in1Sub36232,in0Con32266], outputs=Glo97565)
in0Ave5029 = tf.constant([[[[0.1887, 0.1507]]]])
in1Ave5029 = tf.constant([[[[0.865, 0.7642]]]])
in0Sub36232 = tf.constant([[0.2729, 0.785]])
in1Sub36232 = tf.constant([[0.4491, 0.37]])
in0Con32266 = tf.constant([[[0.6993]]])
print (np.array2string(model.predict([in0Ave5029,in1Ave5029,in0Sub36232,in1Sub36232,in0Con32266],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo97565.png')

LAve5029 = average_layer([[[[[0.1887, 0.1507]]]], [[[[0.865, 0.7642]]]]], Ave5029), 
LRes48894 = reshape_layer(Ave5029, [1, 2], Res48894), 
LSub36232 = subtract_layer([[0.2729, 0.785]], [[0.4491, 0.37]], Sub36232), 
LRes93220 = reshape_layer(Sub36232, [2, 1], Res93220), 
LMax63841 = max_pool1D_layer(Res93220, 2, 2, false, Max63841), 
LCon32266 = concatenate_layer([Max63841,[[[0.6993]]]], 2, Con32266), 
LSub73423 = subtract_layer(Res48894,Con32266, Sub73423), 
LGlo97565 = global_average_pooling1D_layer(Sub73423, Glo97565), 
exec_layers([LAve5029,LRes48894,LSub36232,LRes93220,LMax63841,LCon32266,LSub73423,LGlo97565],["Ave5029","Res48894","Sub36232","Res93220","Max63841","Con32266","Sub73423","Glo97565"],Glo97565,"Glo97565")

Actual (Unparsed): [[0.1118500, -0.2418500]]

Expected (Unparsed): [[0.11185,-0.24185]]

Actual:   [[0.1119, -0.2418]]

Expected: [[0.1119, -0.2418]]