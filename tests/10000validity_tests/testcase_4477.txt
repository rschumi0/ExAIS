import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Up_92477 = tf.keras.layers.Input(shape=([1, 4, 4, 4]))

Up_92477 = keras.layers.UpSampling3D(size=(1, 1, 1), name = 'Up_92477', )(in0Up_92477)
Con66490 = keras.layers.Conv3D(2, (1, 4, 1),strides=(1, 1, 1), padding='valid', dilation_rate=(1, 1, 1), name = 'Con66490', )(Up_92477)
model = tf.keras.models.Model(inputs=[in0Up_92477], outputs=Con66490)
w = model.get_layer('Con66490').get_weights() 
w[0] = np.array([[[[[0.3216, 0.9425], [0.3532, 0.857], [0.6335, 0.3688], [0.3124, 0.5983]]], [[[0.8927, 0.1513], [0.7187, 0.8565], [0.2614, 0.6511], [0.8547, 0.0576]]], [[[0.136, 0.1935], [0.7391, 0.7109], [0.0128, 0.3158], [0.7273, 0.8274]]], [[[0.9038, 0.9721], [0.3627, 0.0548], [0.1456, 0.2128], [0.2077, 0.4549]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con66490').set_weights(w) 
in0Up_92477 = tf.constant([[[[[1.0652, 1.2537, 1.9846, 1.9728], [1.567, 1.0613, 1.8553, 1.6768], [1.6404, 1.6317, 1.897, 1.7493], [1.8693, 1.8998, 1.3205, 1.0313]], [[1.0151, 1.4254, 1.4459, 1.9894], [1.4747, 1.8905, 1.1278, 1.9847], [1.6378, 1.8192, 1.6914, 1.0188], [1.1065, 1.4021, 1.1082, 1.53]], [[1.405, 1.6397, 1.1946, 1.1631], [1.5027, 1.6269, 1.2062, 1.5551], [1.2023, 1.6931, 1.3154, 1.0942], [1.2023, 1.2858, 1.1122, 1.2906]], [[1.4355, 1.9393, 1.4468, 1.8729], [1.1033, 1.4049, 1.6459, 1.9717], [1.6805, 1.0368, 1.3765, 1.7854], [1.0487, 1.8249, 1.2066, 1.9365]]]]])
print (np.array2string(model.predict([in0Up_92477],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con66490.png')

LUp_92477 = up_sampling3D_layer([[[[[1.0652, 1.2537, 1.9846, 1.9728], [1.567, 1.0613, 1.8553, 1.6768], [1.6404, 1.6317, 1.897, 1.7493], [1.8693, 1.8998, 1.3205, 1.0313]], [[1.0151, 1.4254, 1.4459, 1.9894], [1.4747, 1.8905, 1.1278, 1.9847], [1.6378, 1.8192, 1.6914, 1.0188], [1.1065, 1.4021, 1.1082, 1.53]], [[1.405, 1.6397, 1.1946, 1.1631], [1.5027, 1.6269, 1.2062, 1.5551], [1.2023, 1.6931, 1.3154, 1.0942], [1.2023, 1.2858, 1.1122, 1.2906]], [[1.4355, 1.9393, 1.4468, 1.8729], [1.1033, 1.4049, 1.6459, 1.9717], [1.6805, 1.0368, 1.3765, 1.7854], [1.0487, 1.8249, 1.2066, 1.9365]]]]], 1, 1, 1, Up_92477), 
LCon66490 = conv3D_layer(Up_92477, 1, 4, 1,[[[[[0.3216, 0.9425], [0.3532, 0.857], [0.6335, 0.3688], [0.3124, 0.5983]]], [[[0.8927, 0.1513], [0.7187, 0.8565], [0.2614, 0.6511], [0.8547, 0.0576]]], [[[0.136, 0.1935], [0.7391, 0.7109], [0.0128, 0.3158], [0.7273, 0.8274]]], [[[0.9038, 0.9721], [0.3627, 0.0548], [0.1456, 0.2128], [0.2077, 0.4549]]]]],[0, 0], 1, 1, 1, false, 1, 1, 1, Con66490), 
exec_layers([LUp_92477,LCon66490],["Up_92477","Con66490"],Con66490,"Con66490")

Actual (Unparsed): [[[[[11.5324754, 11.8597916], [11.9534176, 12.2764839], [11.6281844, 13.2091038], [10.2780627, 11.4948795]]]]]

Expected (Unparsed): [[[[[11.532475369999998,11.859791569999999],[11.95341776,12.276484],[11.62818435,13.209103639999999],[10.27806283,11.494879749999999]]]]]

Actual:   [[[[[11.5325, 11.8598], [11.9535, 12.2765], [11.6282, 13.2092], [10.2781, 11.4949]]]]]

Expected: [[[[[11.5325, 11.8598], [11.9535, 12.2765], [11.6282, 13.2092], [10.2781, 11.4949]]]]]