import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0PRe32089 = tf.keras.layers.Input(shape=([1, 1, 1]))

PRe32089 = keras.layers.PReLU(name = 'PRe32089', input_shape=(1, 1, 1))(in0PRe32089)
Con11438 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(10, 3), padding='valid', name = 'Con11438', )(PRe32089)
ELU14529 = keras.layers.ELU(alpha=-3.2882911495881295, name = 'ELU14529', )(Con11438)
Res50082 = keras.layers.Reshape((10, 9), name = 'Res50082', )(ELU14529)
Glo41590 = keras.layers.GlobalMaxPool1D(name = 'Glo41590', )(Res50082)
Res50863 = keras.layers.Reshape((9, 1), name = 'Res50863', )(Glo41590)
Res32982 = keras.layers.Reshape((9, 1, 1), name = 'Res32982', )(Res50863)
Ave22122 = keras.layers.AveragePooling2D(pool_size=(3, 1), name = 'Ave22122', )(Res32982)
model = tf.keras.models.Model(inputs=[in0PRe32089], outputs=Ave22122)
w = model.get_layer('PRe32089').get_weights() 
w[0] = np.array([[[0.0205]]])
model.get_layer('PRe32089').set_weights(w) 
w = model.get_layer('Con11438').get_weights() 
w[0] = np.array([[[[0.3538], [0.7116], [0.2963]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con11438').set_weights(w) 
in0PRe32089 = tf.constant([[[[0.2127]]]])
print (np.array2string(model.predict([in0PRe32089],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave22122.png')

LPRe32089 = prelu_layer([[[[0.2127]]]], [[[0.0205]]], PRe32089), 
LCon11438 = conv2D_transpose_layer(PRe32089, 1, 1,[[[[0.3538], [0.7116], [0.2963]]]],[0, 0, 0], 10, 3, false, Con11438), 
LELU14529 = elu_layer(Con11438, -3.2882911495881295, ELU14529), 
LRes50082 = reshape_layer(ELU14529, [10, 9], Res50082), 
LGlo41590 = global_max_pool1D_layer(Res50082, Glo41590), 
LRes50863 = reshape_layer(Glo41590, [9, 1], Res50863), 
LRes32982 = reshape_layer(Res50863, [9, 1, 1], Res32982), 
LAve22122 = average_pooling2D_layer(Res32982, 3, 1, Ave22122), 
exec_layers([LPRe32089,LCon11438,LELU14529,LRes50082,LGlo41590,LRes50863,LRes32982,LAve22122],["PRe32089","Con11438","ELU14529","Res50082","Glo41590","Res50863","Res32982","Ave22122"],Ave22122,"Ave22122")

Actual (Unparsed): [[[[0.0965445]], [[0.0000000]], [[0.0000000]]]]

Expected (Unparsed): [[[[0.09654453]],[[0]],[[0]]]]

Actual:   [[[[0.0966]], [[0]], [[0]]]]

Expected: [[[[0.0966]], [[0]], [[0]]]]