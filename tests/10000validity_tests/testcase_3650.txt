import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub95491 = tf.keras.layers.Input(shape=([2, 3, 2]))
in1Sub95491 = tf.keras.layers.Input(shape=([2, 3, 2]))
in0Con51090 = tf.keras.layers.Input(shape=([4, 3, 1]))
in0Con71419 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Sub97638 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub97638 = tf.keras.layers.Input(shape=([2, 3, 3]))
in0Min17341 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Min17341 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con6663 = tf.keras.layers.Input(shape=([2, 3, 2]))

Sub95491 = keras.layers.Subtract(name = 'Sub95491', )([in0Sub95491,in1Sub95491])
Res36910 = keras.layers.Reshape((2, 3, 2, 1), name = 'Res36910', )(Sub95491)
Up_60458 = keras.layers.UpSampling3D(size=(2, 1, 1), name = 'Up_60458', )(Res36910)
Res27640 = keras.layers.Reshape((4, 3, 2), name = 'Res27640', )(Up_60458)
Con51090 = keras.layers.Concatenate(axis=3, name = 'Con51090', )([Res27640,in0Con51090])
Con71419 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(1, 1), padding='valid', name = 'Con71419', )(in0Con71419)
Zer57517 = keras.layers.ZeroPadding2D(padding=((3, 0), (2, 0)), name = 'Zer57517', )(Con71419)
Ave38298 = keras.layers.Average(name = 'Ave38298', )([Con51090,Zer57517])
Sub97638 = keras.layers.Subtract(name = 'Sub97638', )([in0Sub97638,in1Sub97638])
Min17341 = keras.layers.Minimum(name = 'Min17341', )([in0Min17341,in1Min17341])
Zer95387 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer95387', )(Min17341)
Con6663 = keras.layers.Concatenate(axis=3, name = 'Con6663', )([Zer95387,in0Con6663])
Mul30169 = keras.layers.Multiply(name = 'Mul30169', )([Sub97638,Con6663])
Zer69424 = keras.layers.ZeroPadding2D(padding=((2, 0), (0, 0)), name = 'Zer69424', )(Mul30169)
Add8951 = keras.layers.Add(name = 'Add8951', )([Ave38298,Zer69424])
ReL88192 = keras.layers.ReLU(max_value=2.5787029570458957, negative_slope=2.451421712540964, threshold=9.895077271796982, name = 'ReL88192', )(Add8951)
model = tf.keras.models.Model(inputs=[in0Sub95491,in1Sub95491,in0Con51090,in0Con71419,in0Sub97638,in1Sub97638,in0Min17341,in1Min17341,in0Con6663], outputs=ReL88192)
w = model.get_layer('Con71419').get_weights() 
w[0] = np.array([[[[0.3203, 0.3759], [0.1349, 0.0373], [0.7505, 0.5611]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con71419').set_weights(w) 
in0Sub95491 = tf.constant([[[[0.8897, 0.4349], [0.5476, 0.4571], [0.4884, 0.7105]], [[0.8204, 0.9569], [0.4321, 0.1871], [0.4258, 0.4689]]]])
in1Sub95491 = tf.constant([[[[0.4997, 0.1686], [0.9139, 0.5969], [0.5802, 0.8819]], [[0.0875, 0.7038], [0.2053, 0.8532], [0.6151, 0.8624]]]])
in0Con51090 = tf.constant([[[[0.7172], [0.2674], [0.3644]], [[0.82], [0.345], [0.588]], [[0.7008], [0.7032], [0.6802]], [[0.167], [0.8682], [0.6922]]]])
in0Con71419 = tf.constant([[[[0.5402, 0.006]]]])
in0Sub97638 = tf.constant([[[[0.2589, 0.1602, 0.5903], [0.5545, 0.6626, 0.6272], [0.1718, 0.6292, 0.8946]], [[0.4957, 0.1495, 0.8427], [0.8414, 0.8498, 0.5473], [0.6803, 0.1095, 0.977]]]])
in1Sub97638 = tf.constant([[[[0.4014, 0.6838, 0.3065], [0.8977, 0.6453, 0.884], [0.4465, 0.6119, 0.8905]], [[0.8363, 0.752, 0.5793], [0.6978, 0.9116, 0.3101], [0.8281, 0.8225, 0.2061]]]])
in0Min17341 = tf.constant([[[[0.8805], [0.8723]]]])
in1Min17341 = tf.constant([[[[0.9613], [0.5459]]]])
in0Con6663 = tf.constant([[[[0.1677, 0.3363], [0.0019, 0.2208], [0.0094, 0.943]], [[0.9848, 0.5809], [0.9981, 0.0876], [0.4363, 0.2395]]]])
print (np.array2string(model.predict([in0Sub95491,in1Sub95491,in0Con51090,in0Con71419,in0Sub97638,in1Sub97638,in0Min17341,in1Min17341,in0Con6663],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='ReL88192.png')

LSub95491 = subtract_layer([[[[0.8897, 0.4349], [0.5476, 0.4571], [0.4884, 0.7105]], [[0.8204, 0.9569], [0.4321, 0.1871], [0.4258, 0.4689]]]], [[[[0.4997, 0.1686], [0.9139, 0.5969], [0.5802, 0.8819]], [[0.0875, 0.7038], [0.2053, 0.8532], [0.6151, 0.8624]]]], Sub95491), 
LRes36910 = reshape_layer(Sub95491, [2, 3, 2, 1], Res36910), 
LUp_60458 = up_sampling3D_layer(Res36910, 2, 1, 1, Up_60458), 
LRes27640 = reshape_layer(Up_60458, [4, 3, 2], Res27640), 
LCon51090 = concatenate_layer([Res27640,[[[[0.7172], [0.2674], [0.3644]], [[0.82], [0.345], [0.588]], [[0.7008], [0.7032], [0.6802]], [[0.167], [0.8682], [0.6922]]]]], 3, Con51090), 
LCon71419 = conv2D_transpose_layer([[[[0.5402, 0.006]]]], 1, 1,[[[[0.3203, 0.3759], [0.1349, 0.0373], [0.7505, 0.5611]]]],[0, 0, 0], 1, 1, false, Con71419), 
LZer57517 = zero_padding2D_layer(Con71419, 3, 0, 2, 0, Zer57517), 
LAve38298 = average_layer([Con51090,Zer57517], Ave38298), 
LSub97638 = subtract_layer([[[[0.2589, 0.1602, 0.5903], [0.5545, 0.6626, 0.6272], [0.1718, 0.6292, 0.8946]], [[0.4957, 0.1495, 0.8427], [0.8414, 0.8498, 0.5473], [0.6803, 0.1095, 0.977]]]], [[[[0.4014, 0.6838, 0.3065], [0.8977, 0.6453, 0.884], [0.4465, 0.6119, 0.8905]], [[0.8363, 0.752, 0.5793], [0.6978, 0.9116, 0.3101], [0.8281, 0.8225, 0.2061]]]], Sub97638), 
LMin17341 = minimum_layer([[[[[0.8805], [0.8723]]]], [[[[0.9613], [0.5459]]]]], Min17341), 
LZer95387 = zero_padding2D_layer(Min17341, 1, 0, 1, 0, Zer95387), 
LCon6663 = concatenate_layer([Zer95387,[[[[0.1677, 0.3363], [0.0019, 0.2208], [0.0094, 0.943]], [[0.9848, 0.5809], [0.9981, 0.0876], [0.4363, 0.2395]]]]], 3, Con6663), 
LMul30169 = multiply_layer([Sub97638,Con6663], Mul30169), 
LZer69424 = zero_padding2D_layer(Mul30169, 2, 0, 0, 0, Zer69424), 
LAdd8951 = add_layer([Ave38298,Zer69424], Add8951), 
LReL88192 = relu_layer(Add8951, 2.5787029570458957, 2.451421712540964, 9.895077271796982, ReL88192), 
exec_layers([LSub95491,LRes36910,LUp_60458,LRes27640,LCon51090,LCon71419,LZer57517,LAve38298,LSub97638,LMin17341,LZer95387,LCon6663,LMul30169,LZer69424,LAdd8951,LReL88192],["Sub95491","Res36910","Up_60458","Res27640","Con51090","Con71419","Zer57517","Ave38298","Sub97638","Min17341","Zer95387","Con6663","Mul30169","Zer69424","Add8951","ReL88192"],ReL88192,"ReL88192")

Actual (Unparsed): [[[[-23.7789801, -23.9306005, -23.3779275], [-24.7059852, -24.4283616, -23.9292522], [-24.3695275, -24.4670941, -23.8103582]], [[-23.7789801, -23.9306005, -23.2519244], [-24.7059852, -24.4283616, -23.8341370], [-24.3695275, -24.4670941, -23.5362893]], [[-23.3586838, -24.1620336, -23.1640606], [-23.9790161, -25.0733727, -23.5340866], [-24.4890344, -24.7389258, -23.4138009]], [[-23.3586838, -25.4013113, -23.6772238], [-23.6690587, -25.2246633, -23.1419077], [-24.4719806, -25.4123219, -22.4549086]]]]

Expected (Unparsed): [[[[-23.778980037408235,-23.930600470328894,-23.377927445236537],[-24.705985158005603,-24.42836164906034,-23.929252188386997],[-24.369527527959356,-24.467094112118485,-23.81035823532876]],[[-23.778980037408235,-23.930600470328894,-23.25192436921193],[-24.705985158005603,-24.42836164906034,-23.834137025940407],[-24.369527527959356,-24.467094112118485,-23.536289287866683]],[[-23.35868378479309,-24.162033604968382,-23.164060659276338],[-23.97901604915158,-25.0733726944838,-23.534086538372662],[-24.489034336445727,-24.738925843097267,-23.413800815151347]],[[-23.35868378479309,-25.401311315394146,-23.677223826457073],[-23.669058778102244,-25.224663288613037,-23.141907700572883],[-24.471980506503876,-25.41232190053024,-22.45490858148593]]]]

Actual:   [[[[-23.7789, -23.9306, -23.3779], [-24.7059, -24.4283, -23.9292], [-24.3695, -24.467, -23.8103]], [[-23.7789, -23.9306, -23.2519], [-24.7059, -24.4283, -23.8341], [-24.3695, -24.467, -23.5362]], [[-23.3586, -24.162, -23.164], [-23.979, -25.0733, -23.534], [-24.489, -24.7389, -23.4138]], [[-23.3586, -25.4013, -23.6772], [-23.669, -25.2246, -23.1419], [-24.4719, -25.4123, -22.4549]]]]

Expected: [[[[-23.7789, -23.9306, -23.3779], [-24.7059, -24.4283, -23.9292], [-24.3695, -24.467, -23.8103]], [[-23.7789, -23.9306, -23.2519], [-24.7059, -24.4283, -23.8341], [-24.3695, -24.467, -23.5362]], [[-23.3586, -24.162, -23.164], [-23.979, -25.0733, -23.534], [-24.489, -24.7389, -23.4138]], [[-23.3586, -25.4013, -23.6772], [-23.669, -25.2246, -23.1419], [-24.4719, -25.4123, -22.4549]]]]