import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot97457 = tf.keras.layers.Input(shape=([3]))
in1Dot97457 = tf.keras.layers.Input(shape=([3]))
in0Add96178 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Add96178 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Up_90063 = tf.keras.layers.Input(shape=([3, 2]))
in0Con64980 = tf.keras.layers.Input(shape=([3, 2]))
in0Mul78602 = tf.keras.layers.Input(shape=([1, 1]))
in1Mul78602 = tf.keras.layers.Input(shape=([1, 1]))
in0Con54185 = tf.keras.layers.Input(shape=([3, 3]))

Dot97457 = keras.layers.Dot(axes=(1, 1), name = 'Dot97457', )([in0Dot97457,in1Dot97457])
Res21650 = keras.layers.Reshape((1, 1), name = 'Res21650', )(Dot97457)
Add96178 = keras.layers.Add(name = 'Add96178', )([in0Add96178,in1Add96178])
Res87579 = keras.layers.Reshape((1, 4), name = 'Res87579', )(Add96178)
Dot69352 = keras.layers.Dot(axes=(1, 1), name = 'Dot69352', )([Res21650,Res87579])
Zer63677 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer63677', )(Dot69352)
Up_90063 = keras.layers.UpSampling1D(size=(1), name = 'Up_90063', )(in0Up_90063)
Con64980 = keras.layers.Concatenate(axis=2, name = 'Con64980', )([Up_90063,in0Con64980])
Max13902 = keras.layers.Maximum(name = 'Max13902', )([Zer63677,Con64980])
Mul78602 = keras.layers.Multiply(name = 'Mul78602', )([in0Mul78602,in1Mul78602])
Ave54099 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave54099', )(Mul78602)
Zer72342 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer72342', )(Ave54099)
Con54185 = keras.layers.Concatenate(axis=2, name = 'Con54185', )([Zer72342,in0Con54185])
Max23833 = keras.layers.Maximum(name = 'Max23833', )([Max13902,Con54185])
model = tf.keras.models.Model(inputs=[in0Dot97457,in1Dot97457,in0Add96178,in1Add96178,in0Up_90063,in0Con64980,in0Mul78602,in1Mul78602,in0Con54185], outputs=Max23833)
in0Dot97457 = tf.constant([[0.358, 0.5445, 0.3792]])
in1Dot97457 = tf.constant([[0.3966, 0.1242, 0.0316]])
in0Add96178 = tf.constant([[[[0.2968, 0.1454], [0.1474, 0.8652]]]])
in1Add96178 = tf.constant([[[[0.1096, 0.0455], [0.7555, 0.5834]]]])
in0Up_90063 = tf.constant([[[1.8566, 1.3621], [1.3648, 1.2639], [1.8338, 1.7062]]])
in0Con64980 = tf.constant([[[0.9822, 0.0967], [0.6665, 0.3295], [0.2657, 0.6526]]])
in0Mul78602 = tf.constant([[[0.4898]]])
in1Mul78602 = tf.constant([[[0.5304]]])
in0Con54185 = tf.constant([[[0.6556, 0.5164, 0.6294], [0.0199, 0.3057, 0.9517], [0.9569, 0.137, 0.8004]]])
print (np.array2string(model.predict([in0Dot97457,in1Dot97457,in0Add96178,in1Add96178,in0Up_90063,in0Con64980,in0Mul78602,in1Mul78602,in0Con54185],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max23833.png')

LDot97457 = dot_layer([[0.358, 0.5445, 0.3792]], [[0.3966, 0.1242, 0.0316]], 1, 1, Dot97457), 
LRes21650 = reshape_layer(Dot97457, [1, 1], Res21650), 
LAdd96178 = add_layer([[[[[0.2968, 0.1454], [0.1474, 0.8652]]]], [[[[0.1096, 0.0455], [0.7555, 0.5834]]]]], Add96178), 
LRes87579 = reshape_layer(Add96178, [1, 4], Res87579), 
LDot69352 = dot_layer(Res21650,Res87579, 1, 1, Dot69352), 
LZer63677 = zero_padding1D_layer(Dot69352, 2, 0, Zer63677), 
LUp_90063 = up_sampling1D_layer([[[1.8566, 1.3621], [1.3648, 1.2639], [1.8338, 1.7062]]], 1, Up_90063), 
LCon64980 = concatenate_layer([Up_90063,[[[0.9822, 0.0967], [0.6665, 0.3295], [0.2657, 0.6526]]]], 2, Con64980), 
LMax13902 = maximum_layer([Zer63677,Con64980], Max13902), 
LMul78602 = multiply_layer([[[[0.4898]]], [[[0.5304]]]], Mul78602), 
LAve54099 = average_pooling1D_layer(Mul78602, 1, 1, false, Ave54099), 
LZer72342 = zero_padding1D_layer(Ave54099, 2, 0, Zer72342), 
LCon54185 = concatenate_layer([Zer72342,[[[0.6556, 0.5164, 0.6294], [0.0199, 0.3057, 0.9517], [0.9569, 0.137, 0.8004]]]], 2, Con54185), 
LMax23833 = maximum_layer([Max13902,Con54185], Max23833), 
exec_layers([LDot97457,LRes21650,LAdd96178,LRes87579,LDot69352,LZer63677,LUp_90063,LCon64980,LMax13902,LMul78602,LAve54099,LZer72342,LCon54185,LMax23833],["Dot97457","Res21650","Add96178","Res87579","Dot69352","Zer63677","Up_90063","Con64980","Max13902","Mul78602","Ave54099","Zer72342","Con54185","Max23833"],Max23833,"Max23833")

Actual (Unparsed): [[[1.8566000, 1.3621000, 0.9822000, 0.6294000], [1.3648000, 1.2639000, 0.6665000, 0.9517000], [1.8338000, 1.7062000, 0.2657000, 0.8004000]]]

Expected (Unparsed): [[[1.8566,1.3621,0.9822,0.6294],[1.3648,1.2639,0.6665,0.9517],[1.8338,1.7062,0.2657,0.8004]]]

Actual:   [[[1.8566, 1.3621, 0.9822, 0.6294], [1.3648, 1.2639, 0.6665, 0.9517], [1.8338, 1.7062, 0.2657, 0.8004]]]

Expected: [[[1.8566, 1.3621, 0.9822, 0.6294], [1.3648, 1.2639, 0.6665, 0.9517], [1.8338, 1.7062, 0.2657, 0.8004]]]