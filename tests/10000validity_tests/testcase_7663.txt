import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub6919 = tf.keras.layers.Input(shape=([2]))
in1Sub6919 = tf.keras.layers.Input(shape=([2]))
in0Min36333 = tf.keras.layers.Input(shape=([2, 1]))
in1Min36333 = tf.keras.layers.Input(shape=([2, 1]))

Sub6919 = keras.layers.Subtract(name = 'Sub6919', )([in0Sub6919,in1Sub6919])
Res60103 = keras.layers.Reshape((2, 1), name = 'Res60103', )(Sub6919)
Res52579 = keras.layers.Reshape((2, 1, 1), name = 'Res52579', )(Res60103)
Ave23730 = keras.layers.AveragePooling2D(pool_size=(2, 1), strides=(1, 1), padding='same', name = 'Ave23730', )(Res52579)
Res3869 = keras.layers.Reshape((2, 1), name = 'Res3869', )(Ave23730)
Min36333 = keras.layers.Minimum(name = 'Min36333', )([in0Min36333,in1Min36333])
Max20052 = keras.layers.Maximum(name = 'Max20052', )([Res3869,Min36333])
Res88200 = keras.layers.Reshape((2, 1, 1), name = 'Res88200', )(Max20052)
Res92432 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res92432', )(Res88200)
Up_12162 = keras.layers.UpSampling3D(size=(1, 1, 1), name = 'Up_12162', )(Res92432)
model = tf.keras.models.Model(inputs=[in0Sub6919,in1Sub6919,in0Min36333,in1Min36333], outputs=Up_12162)
in0Sub6919 = tf.constant([[0.0383, 0.5538]])
in1Sub6919 = tf.constant([[0.2074, 0.4401]])
in0Min36333 = tf.constant([[[0.6398], [0.9745]]])
in1Min36333 = tf.constant([[[0.823], [0.3158]]])
print (np.array2string(model.predict([in0Sub6919,in1Sub6919,in0Min36333,in1Min36333],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_12162.png')

LSub6919 = subtract_layer([[0.0383, 0.5538]], [[0.2074, 0.4401]], Sub6919), 
LRes60103 = reshape_layer(Sub6919, [2, 1], Res60103), 
LRes52579 = reshape_layer(Res60103, [2, 1, 1], Res52579), 
LAve23730 = average_pooling2D_layer(Res52579, 2, 1, 1, 1, true, Ave23730), 
LRes3869 = reshape_layer(Ave23730, [2, 1], Res3869), 
LMin36333 = minimum_layer([[[[0.6398], [0.9745]]], [[[0.823], [0.3158]]]], Min36333), 
LMax20052 = maximum_layer([Res3869,Min36333], Max20052), 
LRes88200 = reshape_layer(Max20052, [2, 1, 1], Res88200), 
LRes92432 = reshape_layer(Res88200, [2, 1, 1, 1], Res92432), 
LUp_12162 = up_sampling3D_layer(Res92432, 1, 1, 1, Up_12162), 
exec_layers([LSub6919,LRes60103,LRes52579,LAve23730,LRes3869,LMin36333,LMax20052,LRes88200,LRes92432,LUp_12162],["Sub6919","Res60103","Res52579","Ave23730","Res3869","Min36333","Max20052","Res88200","Res92432","Up_12162"],Up_12162,"Up_12162")

Actual (Unparsed): [[[[[0.6398000]]], [[[0.3158000]]]]]

Expected (Unparsed): [[[[[0.6398]]],[[[0.3158]]]]]

Actual:   [[[[[0.6398]]], [[[0.3158]]]]]

Expected: [[[[[0.6398]]], [[[0.3158]]]]]