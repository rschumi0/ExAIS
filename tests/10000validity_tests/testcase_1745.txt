import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul44626 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Mul44626 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))

Mul44626 = keras.layers.Multiply(name = 'Mul44626', )([in0Mul44626,in1Mul44626])
Res57761 = keras.layers.Reshape((1, 2, 2), name = 'Res57761', )(Mul44626)
Res63764 = keras.layers.Reshape((1, 4), name = 'Res63764', )(Res57761)
Cro64531 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro64531', )(Res63764)
Loc19670 = keras.layers.LocallyConnected1D(2, (1),strides=(1), name = 'Loc19670', )(Cro64531)
model = tf.keras.models.Model(inputs=[in0Mul44626,in1Mul44626], outputs=Loc19670)
w = model.get_layer('Loc19670').get_weights() 
w[0] = np.array([[[0.6551, 0.0989], [0.5781, 0.5288], [0.0191, 0.6206], [0.2513, 0.92]]])
w[1] = np.array([[0, 0]])
model.get_layer('Loc19670').set_weights(w) 
in0Mul44626 = tf.constant([[[[[0.5769], [0.404]], [[0.6908], [0.5175]]]]])
in1Mul44626 = tf.constant([[[[[0.1337], [0.9261]], [[0.6295], [0.2759]]]]])
print (np.array2string(model.predict([in0Mul44626,in1Mul44626],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Loc19670.png')

LMul44626 = multiply_layer([[[[[[0.5769], [0.404]], [[0.6908], [0.5175]]]]], [[[[[0.1337], [0.9261]], [[0.6295], [0.2759]]]]]], Mul44626), 
LRes57761 = reshape_layer(Mul44626, [1, 2, 2], Res57761), 
LRes63764 = reshape_layer(Res57761, [1, 4], Res63764), 
LCro64531 = cropping1D_layer(Res63764, 0, 0, Cro64531), 
LLoc19670 = locally_connected1D_layer(Cro64531, 1,[[[0.6551, 0.0989], [0.5781, 0.5288], [0.0191, 0.6206], [0.2513, 0.92]]],[[0, 0]], 1, Loc19670), 
exec_layers([LMul44626,LRes57761,LRes63764,LCro64531,LLoc19670],["Mul44626","Res57761","Res63764","Cro64531","Loc19670"],Loc19670,"Loc19670")

Actual (Unparsed): [[[0.3110077, 0.6067051]]]

Expected (Unparsed): [[[0.311007716428,0.606705104197]]]

Actual:   [[[0.3111, 0.6068]]]

Expected: [[[0.3111, 0.6068]]]