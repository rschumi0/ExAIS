import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave86485 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave86485 = tf.keras.layers.Input(shape=([1, 1]))

Ave86485 = keras.layers.Average(name = 'Ave86485', )([in0Ave86485,in1Ave86485])
Mas2818 = keras.layers.Masking(mask_value=1, name = 'Mas2818', )(Ave86485)
model = tf.keras.models.Model(inputs=[in0Ave86485,in1Ave86485], outputs=Mas2818)
in0Ave86485 = tf.constant([[[0.1357]]])
in1Ave86485 = tf.constant([[[0.6706]]])
print (np.array2string(model.predict([in0Ave86485,in1Ave86485],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mas2818.png')

LAve86485 = average_layer([[[[0.1357]]], [[[0.6706]]]], Ave86485), 
LMas2818 = masking_layer(Ave86485, 1, Mas2818), 
exec_layers([LAve86485,LMas2818],["Ave86485","Mas2818"],Mas2818,"Mas2818")

Actual (Unparsed): [[[0.4031500]]]

Expected (Unparsed): [[[0.40315]]]

Actual:   [[[0.4032]]]

Expected: [[[0.4032]]]