import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot17695 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot17695 = tf.keras.layers.Input(shape=([3, 3]))
in0Sub28957 = tf.keras.layers.Input(shape=([2]))
in1Sub28957 = tf.keras.layers.Input(shape=([2]))
in0Con54900 = tf.keras.layers.Input(shape=([7]))

Dot17695 = keras.layers.Dot(axes=(1, 1), name = 'Dot17695', )([in0Dot17695,in1Dot17695])
Fla3537 = keras.layers.Flatten(name = 'Fla3537', )(Dot17695)
Sub28957 = keras.layers.Subtract(name = 'Sub28957', )([in0Sub28957,in1Sub28957])
Con54900 = keras.layers.Concatenate(axis=1, name = 'Con54900', )([Sub28957,in0Con54900])
Ave89717 = keras.layers.Average(name = 'Ave89717', )([Fla3537,Con54900])
model = tf.keras.models.Model(inputs=[in0Dot17695,in1Dot17695,in0Sub28957,in1Sub28957,in0Con54900], outputs=Ave89717)
in0Dot17695 = tf.constant([[[0.163, 0.1193, 0.2445], [0.4441, 0.2043, 0.0778], [0.8777, 0.7987, 0.831]]])
in1Dot17695 = tf.constant([[[0.1448, 0.7079, 0.4235], [0.3931, 0.1006, 0.4984], [0.5615, 0.3966, 0.4998]]])
in0Sub28957 = tf.constant([[0.7509, 0.4424]])
in1Sub28957 = tf.constant([[0.3327, 0.3301]])
in0Con54900 = tf.constant([[0.0083, 0.2753, 0.4923, 0.9833, 0.7032, 0.363, 0.555]])
print (np.array2string(model.predict([in0Dot17695,in1Dot17695,in0Sub28957,in1Sub28957,in0Con54900],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave89717.png')

LDot17695 = dot_layer([[[0.163, 0.1193, 0.2445], [0.4441, 0.2043, 0.0778], [0.8777, 0.7987, 0.831]]], [[[0.1448, 0.7079, 0.4235], [0.3931, 0.1006, 0.4984], [0.5615, 0.3966, 0.4998]]], 1, 1, Dot17695), 
LFla3537 = flatten_layer(Dot17695, Fla3537), 
LSub28957 = subtract_layer([[0.7509, 0.4424]], [[0.3327, 0.3301]], Sub28957), 
LCon54900 = concatenate_layer([Sub28957,[[0.0083, 0.2753, 0.4923, 0.9833, 0.7032, 0.363, 0.555]]], 1, Con54900), 
LAve89717 = average_layer([Fla3537,Con54900], Ave89717), 
exec_layers([LDot17695,LFla3537,LSub28957,LCon54900,LAve89717],["Dot17695","Fla3537","Sub28957","Con54900","Ave89717"],Ave89717,"Ave89717")

Actual (Unparsed): [[0.5546033, 0.3102300, 0.3686722, 0.4106775, 0.4570347, 0.7674184, 0.6178966, 0.4367414, 0.5563275]]

Expected (Unparsed): [[0.55460333,0.31022998999999996,0.3686722,0.41067750999999997,0.457034735,0.767418465,0.61789664,0.43674141499999997,0.5563275350000001]]

Actual:   [[0.5547, 0.3103, 0.3687, 0.4107, 0.4571, 0.7675, 0.6179, 0.4368, 0.5564]]

Expected: [[0.5547, 0.3103, 0.3687, 0.4107, 0.4571, 0.7675, 0.6179, 0.4368, 0.5564]]