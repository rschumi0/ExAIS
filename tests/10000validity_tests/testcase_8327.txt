import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min78168 = tf.keras.layers.Input(shape=([2, 2]))
in1Min78168 = tf.keras.layers.Input(shape=([2, 2]))
in0Mul96309 = tf.keras.layers.Input(shape=([2, 1]))
in1Mul96309 = tf.keras.layers.Input(shape=([2, 1]))
in0Con98495 = tf.keras.layers.Input(shape=([2, 1]))

Min78168 = keras.layers.Minimum(name = 'Min78168', )([in0Min78168,in1Min78168])
Mul96309 = keras.layers.Multiply(name = 'Mul96309', )([in0Mul96309,in1Mul96309])
Con98495 = keras.layers.Concatenate(axis=2, name = 'Con98495', )([Mul96309,in0Con98495])
Min88845 = keras.layers.Minimum(name = 'Min88845', )([Min78168,Con98495])
Res13602 = keras.layers.Reshape((2, 2, 1), name = 'Res13602', )(Min88845)
Dep32938 = keras.layers.DepthwiseConv2D((1, 1),strides=(2, 2), padding='valid', name = 'Dep32938', )(Res13602)
Res96231 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res96231', )(Dep32938)
Con46685 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con46685', )(Res96231)
model = tf.keras.models.Model(inputs=[in0Min78168,in1Min78168,in0Mul96309,in1Mul96309,in0Con98495], outputs=Con46685)
w = model.get_layer('Dep32938').get_weights() 
w[0] = np.array([[[[0.4572]]]])
w[1] = np.array([0])
model.get_layer('Dep32938').set_weights(w) 
w = model.get_layer('Con46685').get_weights() 
w[0] = np.array([[[[[0.349], [0.2416], [0.7658]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con46685').set_weights(w) 
in0Min78168 = tf.constant([[[0.5423, 0.711], [0.3689, 0.3076]]])
in1Min78168 = tf.constant([[[0.2434, 0.0489], [0.4565, 0.4871]]])
in0Mul96309 = tf.constant([[[0.8363], [0.242]]])
in1Mul96309 = tf.constant([[[0.0096], [0.8953]]])
in0Con98495 = tf.constant([[[0.1054], [0.5927]]])
print (np.array2string(model.predict([in0Min78168,in1Min78168,in0Mul96309,in1Mul96309,in0Con98495],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con46685.png')

LMin78168 = minimum_layer([[[[0.5423, 0.711], [0.3689, 0.3076]]], [[[0.2434, 0.0489], [0.4565, 0.4871]]]], Min78168), 
LMul96309 = multiply_layer([[[[0.8363], [0.242]]], [[[0.0096], [0.8953]]]], Mul96309), 
LCon98495 = concatenate_layer([Mul96309,[[[0.1054], [0.5927]]]], 2, Con98495), 
LMin88845 = minimum_layer([Min78168,Con98495], Min88845), 
LRes13602 = reshape_layer(Min88845, [2, 2, 1], Res13602), 
LDep32938 = depthwise_conv2D_layer(Res13602, 1, 1,[[[[0.4572]]]],[0], 2, 2, false, Dep32938), 
LRes96231 = reshape_layer(Dep32938, [1, 1, 1, 1], Res96231), 
LCon46685 = conv3D_transpose_layer(Res96231, 1, 1, 1,[[[[[0.349], [0.2416], [0.7658]]]]],[0, 0, 0], 1, 1, 1, false, Con46685), 
exec_layers([LMin78168,LMul96309,LCon98495,LMin88845,LRes13602,LDep32938,LRes96231,LCon46685],["Min78168","Mul96309","Con98495","Min88845","Res13602","Dep32938","Res96231","Con46685"],Con46685,"Con46685")

Actual (Unparsed): [[[[[0.0012810, 0.0008868, 0.0028110]]]]]

Expected (Unparsed): [[[[[0.0012810467485439997,0.0008868220471295999,0.0028109616046848]]]]]

Actual:   [[[[[0.0013, 0.0009, 0.0029]]]]]

Expected: [[[[[0.0013, 0.0009, 0.0029]]]]]