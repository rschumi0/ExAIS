import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave50851 = tf.keras.layers.Input(shape=([1, 2, 2]))
in0Ave89732 = tf.keras.layers.Input(shape=([2, 2]))
in0Thr90121 = tf.keras.layers.Input(shape=([1, 1]))
in0Con81527 = tf.keras.layers.Input(shape=([2, 2, 1]))

Ave50851 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 1), padding='same', name = 'Ave50851', )(in0Ave50851)
Zer85661 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer85661', )(Ave50851)
Ave89732 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave89732', )(in0Ave89732)
Res54564 = keras.layers.Reshape((2, 2, 1), name = 'Res54564', )(Ave89732)
Thr90121 = keras.layers.ThresholdedReLU(theta=9.89620670104776, name = 'Thr90121', input_shape=(1, 1))(in0Thr90121)
Res14802 = keras.layers.Reshape((1, 1, 1), name = 'Res14802', )(Thr90121)
Ave54614 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave54614', )(Res14802)
Zer19056 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer19056', )(Ave54614)
Min94537 = keras.layers.Minimum(name = 'Min94537', )([Res54564,Zer19056])
Con81527 = keras.layers.Concatenate(axis=3, name = 'Con81527', )([Min94537,in0Con81527])
Max32905 = keras.layers.Maximum(name = 'Max32905', )([Zer85661,Con81527])
Fla39637 = keras.layers.Flatten(name = 'Fla39637', )(Max32905)
model = tf.keras.models.Model(inputs=[in0Ave50851,in0Ave89732,in0Thr90121,in0Con81527], outputs=Fla39637)
in0Ave50851 = tf.constant([[[[1.7794, 1.231], [1.406, 1.6049]]]])
in0Ave89732 = tf.constant([[[1.4193, 1.607], [1.9426, 1.7718]]])
in0Thr90121 = tf.constant([[[0.1438]]])
in0Con81527 = tf.constant([[[[0.6862], [0.8083]], [[0.4419], [0.3579]]]])
print (np.array2string(model.predict([in0Ave50851,in0Ave89732,in0Thr90121,in0Con81527],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Fla39637.png')

LAve50851 = average_pooling2D_layer([[[[1.7794, 1.231], [1.406, 1.6049]]]], 1, 2, 1, 1, true, Ave50851), 
LZer85661 = zero_padding2D_layer(Ave50851, 1, 0, 0, 0, Zer85661), 
LAve89732 = average_pooling1D_layer([[[1.4193, 1.607], [1.9426, 1.7718]]], 1, Ave89732), 
LRes54564 = reshape_layer(Ave89732, [2, 2, 1], Res54564), 
LThr90121 = thresholded_relu_layer([[[0.1438]]], 9.89620670104776, Thr90121), 
LRes14802 = reshape_layer(Thr90121, [1, 1, 1], Res14802), 
LAve54614 = average_pooling2D_layer(Res14802, 1, 1, Ave54614), 
LZer19056 = zero_padding2D_layer(Ave54614, 1, 0, 1, 0, Zer19056), 
LMin94537 = minimum_layer([Res54564,Zer19056], Min94537), 
LCon81527 = concatenate_layer([Min94537,[[[[0.6862], [0.8083]], [[0.4419], [0.3579]]]]], 3, Con81527), 
LMax32905 = maximum_layer([Zer85661,Con81527], Max32905), 
LFla39637 = flatten_layer(Max32905, Fla39637), 
exec_layers([LAve50851,LZer85661,LAve89732,LRes54564,LThr90121,LRes14802,LAve54614,LZer19056,LMin94537,LCon81527,LMax32905,LFla39637],["Ave50851","Zer85661","Ave89732","Res54564","Thr90121","Res14802","Ave54614","Zer19056","Min94537","Con81527","Max32905","Fla39637"],Fla39637,"Fla39637")

Actual (Unparsed): [[0.0000000, 0.6862000, 0.0000000, 0.8083000, 1.5927000, 1.4179500, 1.4060000, 1.6049000]]

Expected (Unparsed): [[0,0.6862,0,0.8083,1.5927,1.41795,1.406,1.6049]]

Actual:   [[0, 0.6862, 0, 0.8083, 1.5927, 1.418, 1.406, 1.6049]]

Expected: [[0, 0.6862, 0, 0.8083, 1.5927, 1.418, 1.406, 1.6049]]