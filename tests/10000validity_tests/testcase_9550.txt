import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro17843 = tf.keras.layers.Input(shape=([2, 3, 2, 3]))

Cro17843 = keras.layers.Cropping3D(cropping=((0, 0), (2, 0), (1, 0)), name = 'Cro17843', )(in0Cro17843)
Res53919 = keras.layers.Reshape((2, 1, 3), name = 'Res53919', )(Cro17843)
Res92235 = keras.layers.Reshape((2, 3), name = 'Res92235', )(Res53919)
Ave81968 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave81968', )(Res92235)
Res15781 = keras.layers.Reshape((1, 3, 1), name = 'Res15781', )(Ave81968)
Res29567 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res29567', )(Res15781)
Con21026 = keras.layers.Conv3DTranspose(2, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con21026', )(Res29567)
model = tf.keras.models.Model(inputs=[in0Cro17843], outputs=Con21026)
w = model.get_layer('Con21026').get_weights() 
w[0] = np.array([[[[[0.52], [0.3653]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con21026').set_weights(w) 
in0Cro17843 = tf.constant([[[[[1.6834, 1.0573, 1.5283], [1.6687, 1.6297, 1.9774]], [[1.5033, 1.3205, 1.4548], [1.6172, 1.3644, 1.6423]], [[1.7991, 1.4279, 1.5496], [1.9018, 1.0338, 1.979]]], [[[1.6227, 1.0313, 1.1495], [1.6318, 1.9392, 1.4118]], [[1.1251, 1.8395, 1.7347], [1.3617, 1.6667, 1.0964]], [[1.8386, 1.6645, 1.2482], [1.6642, 1.714, 1.1684]]]]])
print (np.array2string(model.predict([in0Cro17843],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con21026.png')

LCro17843 = cropping3D_layer([[[[[1.6834, 1.0573, 1.5283], [1.6687, 1.6297, 1.9774]], [[1.5033, 1.3205, 1.4548], [1.6172, 1.3644, 1.6423]], [[1.7991, 1.4279, 1.5496], [1.9018, 1.0338, 1.979]]], [[[1.6227, 1.0313, 1.1495], [1.6318, 1.9392, 1.4118]], [[1.1251, 1.8395, 1.7347], [1.3617, 1.6667, 1.0964]], [[1.8386, 1.6645, 1.2482], [1.6642, 1.714, 1.1684]]]]], 0, 0, 2, 0, 1, 0, Cro17843), 
LRes53919 = reshape_layer(Cro17843, [2, 1, 3], Res53919), 
LRes92235 = reshape_layer(Res53919, [2, 3], Res92235), 
LAve81968 = average_pooling1D_layer(Res92235, 2, Ave81968), 
LRes15781 = reshape_layer(Ave81968, [1, 3, 1], Res15781), 
LRes29567 = reshape_layer(Res15781, [1, 3, 1, 1], Res29567), 
LCon21026 = conv3D_transpose_layer(Res29567, 1, 1, 1,[[[[[0.52], [0.3653]]]]],[0, 0], 1, 1, 1, true, Con21026), 
exec_layers([LCro17843,LRes53919,LRes92235,LAve81968,LRes15781,LRes29567,LCon21026],["Cro17843","Res53919","Res92235","Ave81968","Res15781","Res29567","Con21026"],Con21026,"Con21026")

Actual (Unparsed): [[[[[0.9271600, 0.6513299]], [[0.7144280, 0.5018857]], [[0.8183240, 0.5748726]]]]]

Expected (Unparsed): [[[[[0.92716,0.6513299]],[[0.714428,0.50188567]],[[0.818324,0.57487261]]]]]

Actual:   [[[[[0.9272, 0.6514]], [[0.7145, 0.5019]], [[0.8184, 0.5749]]]]]

Expected: [[[[[0.9272, 0.6514]], [[0.7145, 0.5019]], [[0.8184, 0.5749]]]]]