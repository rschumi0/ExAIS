import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro51576 = tf.keras.layers.Input(shape=([3, 3]))
in0Con7386 = tf.keras.layers.Input(shape=([1, 1]))
in0Max30990 = tf.keras.layers.Input(shape=([1, 2]))
in1Max30990 = tf.keras.layers.Input(shape=([1, 2]))
in0Con66934 = tf.keras.layers.Input(shape=([1, 30]))
in0Zer33389 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))
in0Dot15948 = tf.keras.layers.Input(shape=([3]))
in1Dot15948 = tf.keras.layers.Input(shape=([3]))

Cro51576 = keras.layers.Cropping1D(cropping=((1, 1)), name = 'Cro51576', )(in0Cro51576)
Res8331 = keras.layers.Reshape((1, 3, 1), name = 'Res8331', )(Cro51576)
Glo20968 = keras.layers.GlobalAveragePooling2D(name = 'Glo20968', )(Res8331)
Res53551 = keras.layers.Reshape((1, 1), name = 'Res53551', )(Glo20968)
Con7386 = keras.layers.Concatenate(axis=2, name = 'Con7386', )([Res53551,in0Con7386])
Max30990 = keras.layers.Maximum(name = 'Max30990', )([in0Max30990,in1Max30990])
Sub74664 = keras.layers.Subtract(name = 'Sub74664', )([Con7386,Max30990])
Con66934 = keras.layers.Concatenate(axis=2, name = 'Con66934', )([Sub74664,in0Con66934])
Zer33389 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer33389', )(in0Zer33389)
Res24221 = keras.layers.Reshape((3, 4, 8), name = 'Res24221', )(Zer33389)
Res19765 = keras.layers.Reshape((3, 32), name = 'Res19765', )(Res24221)
Dot72500 = keras.layers.Dot(axes=(2, 2), name = 'Dot72500', )([Con66934,Res19765])
Res31962 = keras.layers.Reshape((1, 3, 1), name = 'Res31962', )(Dot72500)
Zer9957 = keras.layers.ZeroPadding2D(padding=((2, 0), (0, 0)), name = 'Zer9957', )(Res31962)
Dot15948 = keras.layers.Dot(axes=(1, 1), name = 'Dot15948', )([in0Dot15948,in1Dot15948])
Res34350 = keras.layers.Reshape((1, 1), name = 'Res34350', )(Dot15948)
Res40053 = keras.layers.Reshape((1, 1, 1), name = 'Res40053', )(Res34350)
Zer79760 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer79760', )(Res40053)
Max33803 = keras.layers.Maximum(name = 'Max33803', )([Zer9957,Zer79760])
model = tf.keras.models.Model(inputs=[in0Cro51576,in0Con7386,in0Max30990,in1Max30990,in0Con66934,in0Zer33389,in0Dot15948,in1Dot15948], outputs=Max33803)
in0Cro51576 = tf.constant([[[1.8198, 1.7773, 1.6137], [1.5959, 1.5836, 1.3794], [1.2627, 1.1304, 1.3811]]])
in0Con7386 = tf.constant([[[0.5565]]])
in0Max30990 = tf.constant([[[0.4878, 0.704]]])
in1Max30990 = tf.constant([[[0.0051, 0.8484]]])
in0Con66934 = tf.constant([[[0.0693, 0.7462, 0.3009, 0.0797, 0.4066, 0.0723, 0.4628, 0.8947, 0.0956, 0.3276, 0.315, 0.4624, 0.12, 0.8282, 0.6247, 0.5017, 0.0285, 0.4205, 0.8267, 0.2744, 0.519, 0.1873, 0.613, 0.797, 0.6381, 0.149, 0.9748, 0.0733, 0.675, 0.9183]]])
in0Zer33389 = tf.constant([[[[[1.2003, 1.7944], [1.2282, 1.5028]], [[1.1839, 1.4876], [1.1114, 1.0334]]]]])
in0Dot15948 = tf.constant([[0.2605, 0.9131, 0.4163]])
in1Dot15948 = tf.constant([[0.391, 0.7493, 0.1951]])
print (np.array2string(model.predict([in0Cro51576,in0Con7386,in0Max30990,in1Max30990,in0Con66934,in0Zer33389,in0Dot15948,in1Dot15948],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max33803.png')

LCro51576 = cropping1D_layer([[[1.8198, 1.7773, 1.6137], [1.5959, 1.5836, 1.3794], [1.2627, 1.1304, 1.3811]]], 1, 1, Cro51576), 
LRes8331 = reshape_layer(Cro51576, [1, 3, 1], Res8331), 
LGlo20968 = global_average_pooling2D_layer(Res8331, Glo20968), 
LRes53551 = reshape_layer(Glo20968, [1, 1], Res53551), 
LCon7386 = concatenate_layer([Res53551,[[[0.5565]]]], 2, Con7386), 
LMax30990 = maximum_layer([[[[0.4878, 0.704]]], [[[0.0051, 0.8484]]]], Max30990), 
LSub74664 = subtract_layer(Con7386,Max30990, Sub74664), 
LCon66934 = concatenate_layer([Sub74664,[[[0.0693, 0.7462, 0.3009, 0.0797, 0.4066, 0.0723, 0.4628, 0.8947, 0.0956, 0.3276, 0.315, 0.4624, 0.12, 0.8282, 0.6247, 0.5017, 0.0285, 0.4205, 0.8267, 0.2744, 0.519, 0.1873, 0.613, 0.797, 0.6381, 0.149, 0.9748, 0.0733, 0.675, 0.9183]]]], 2, Con66934), 
LZer33389 = zero_padding3D_layer([[[[[1.2003, 1.7944], [1.2282, 1.5028]], [[1.1839, 1.4876], [1.1114, 1.0334]]]]], 1, 1, 1, 1, 1, 1, Zer33389), 
LRes24221 = reshape_layer(Zer33389, [3, 4, 8], Res24221), 
LRes19765 = reshape_layer(Res24221, [3, 32], Res19765), 
LDot72500 = dot_layer(Con66934,Res19765, 2, 2, Dot72500), 
LRes31962 = reshape_layer(Dot72500, [1, 3, 1], Res31962), 
LZer9957 = zero_padding2D_layer(Res31962, 2, 0, 0, 0, Zer9957), 
LDot15948 = dot_layer([[0.2605, 0.9131, 0.4163]], [[0.391, 0.7493, 0.1951]], 1, 1, Dot15948), 
LRes34350 = reshape_layer(Dot15948, [1, 1], Res34350), 
LRes40053 = reshape_layer(Res34350, [1, 1, 1], Res40053), 
LZer79760 = zero_padding2D_layer(Res40053, 1, 1, 1, 1, Zer79760), 
LMax33803 = maximum_layer([Zer9957,Zer79760], Max33803), 
exec_layers([LCro51576,LRes8331,LGlo20968,LRes53551,LCon7386,LMax30990,LSub74664,LCon66934,LZer33389,LRes24221,LRes19765,LDot72500,LRes31962,LZer9957,LDot15948,LRes34350,LRes40053,LZer79760,LMax33803],["Cro51576","Res8331","Glo20968","Res53551","Con7386","Max30990","Sub74664","Con66934","Zer33389","Res24221","Res19765","Dot72500","Res31962","Zer9957","Dot15948","Res34350","Res40053","Zer79760","Max33803"],Max33803,"Max33803")

Actual (Unparsed): [[[[0.0000000], [0.0000000], [0.0000000]], [[0.0000000], [0.8672615], [0.0000000]], [[0.0000000], [3.6460081], [0.0000000]]]]

Expected (Unparsed): [[[[0],[0],[0]],[[0],[0.8672614599999999],[0]],[[0.0],[3.6460081300000002],[0.0]]]]

Actual:   [[[[0], [0], [0]], [[0], [0.8673], [0]], [[0], [3.6461], [0]]]]

Expected: [[[[0], [0], [0]], [[0], [0.8673], [0]], [[0], [3.6461], [0]]]]