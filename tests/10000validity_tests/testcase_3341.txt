import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave31327 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave31327 = tf.keras.layers.Input(shape=([2, 1]))
in0Con33345 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0ReL62910 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))

Ave31327 = keras.layers.Average(name = 'Ave31327', )([in0Ave31327,in1Ave31327])
Res65523 = keras.layers.Reshape((2, 1, 1), name = 'Res65523', )(Ave31327)
Res37425 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res37425', )(Res65523)
Zer43310 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer43310', )(Res37425)
Con33345 = keras.layers.Concatenate(axis=4, name = 'Con33345', )([Zer43310,in0Con33345])
ReL62910 = keras.layers.ReLU(max_value=9.535272695884075, negative_slope=2.0775947024887333, threshold=7.3674108630028545, name = 'ReL62910', input_shape=(2, 1, 2, 2))(in0ReL62910)
Min46420 = keras.layers.Minimum(name = 'Min46420', )([Con33345,ReL62910])
model = tf.keras.models.Model(inputs=[in0Ave31327,in1Ave31327,in0Con33345,in0ReL62910], outputs=Min46420)
in0Ave31327 = tf.constant([[[0.4797], [0.0069]]])
in1Ave31327 = tf.constant([[[0.2871], [0.3344]]])
in0Con33345 = tf.constant([[[[[0.0739], [0.2705]]], [[[0.7952], [0.9862]]]]])
in0ReL62910 = tf.constant([[[[[0.165, 0.6264], [0.1112, 0.8793]]], [[[0.0163, 0.0926], [0.6854, 0.7456]]]]])
print (np.array2string(model.predict([in0Ave31327,in1Ave31327,in0Con33345,in0ReL62910],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min46420.png')

LAve31327 = average_layer([[[[0.4797], [0.0069]]], [[[0.2871], [0.3344]]]], Ave31327), 
LRes65523 = reshape_layer(Ave31327, [2, 1, 1], Res65523), 
LRes37425 = reshape_layer(Res65523, [2, 1, 1, 1], Res37425), 
LZer43310 = zero_padding3D_layer(Res37425, 0, 0, 0, 0, 1, 0, Zer43310), 
LCon33345 = concatenate_layer([Zer43310,[[[[[0.0739], [0.2705]]], [[[0.7952], [0.9862]]]]]], 4, Con33345), 
LReL62910 = relu_layer([[[[[0.165, 0.6264], [0.1112, 0.8793]]], [[[0.0163, 0.0926], [0.6854, 0.7456]]]]], 9.535272695884075, 2.0775947024887333, 7.3674108630028545, ReL62910), 
LMin46420 = minimum_layer([Con33345,ReL62910], Min46420), 
exec_layers([LAve31327,LRes65523,LRes37425,LZer43310,LCon33345,LReL62910,LMin46420],["Ave31327","Res65523","Res37425","Zer43310","Con33345","ReL62910","Min46420"],Min46420,"Min46420")

Actual (Unparsed): [[[[[-14.9636906, -14.0050885], [-15.0754653, -13.4796648]]], [[[-15.2726290, -15.1141085], [-13.8825104, -13.7574392]]]]]

Expected (Unparsed): [[[[[-14.963690654122036,-14.005088458393736],[-15.07546524911593,-13.479664758134335]]],[[[-15.272628986382111,-15.114108510582222],[-13.8825103709469,-13.75743916985708]]]]]

Actual:   [[[[[-14.9636, -14.005], [-15.0754, -13.4796]]], [[[-15.2726, -15.1141], [-13.8825, -13.7574]]]]]

Expected: [[[[[-14.9636, -14.005], [-15.0754, -13.4796]]], [[[-15.2726, -15.1141], [-13.8825, -13.7574]]]]]