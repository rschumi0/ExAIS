import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave17683 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave17683 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0ReL18881 = tf.keras.layers.Input(shape=([1, 2]))

Ave17683 = keras.layers.Average(name = 'Ave17683', )([in0Ave17683,in1Ave17683])
Res70788 = keras.layers.Reshape((1, 2), name = 'Res70788', )(Ave17683)
ReL18881 = keras.layers.ReLU(max_value=2.341391102009988, negative_slope=9.285544360220252, threshold=6.845681555224719, name = 'ReL18881', input_shape=(1, 2))(in0ReL18881)
Res26380 = keras.layers.Reshape((1, 2, 1), name = 'Res26380', )(ReL18881)
Ave34559 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(1, 1), padding='same', name = 'Ave34559', )(Res26380)
Res39495 = keras.layers.Reshape((1, 2), name = 'Res39495', )(Ave34559)
Glo84220 = keras.layers.GlobalMaxPool1D(name = 'Glo84220', )(Res39495)
Res2299 = keras.layers.Reshape((1, 2), name = 'Res2299', )(Glo84220)
Max64762 = keras.layers.Maximum(name = 'Max64762', )([Res70788,Res2299])
Per42868 = keras.layers.Permute((2,1), name = 'Per42868',)(Max64762)
model = tf.keras.models.Model(inputs=[in0Ave17683,in1Ave17683,in0ReL18881], outputs=Per42868)
in0Ave17683 = tf.constant([[[[0.3748], [0.3635]]]])
in1Ave17683 = tf.constant([[[[0.7068], [0.751]]]])
in0ReL18881 = tf.constant([[[0.4547, 0.1289]]])
print (np.array2string(model.predict([in0Ave17683,in1Ave17683,in0ReL18881],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per42868.png')

LAve17683 = average_layer([[[[[0.3748], [0.3635]]]], [[[[0.7068], [0.751]]]]], Ave17683), 
LRes70788 = reshape_layer(Ave17683, [1, 2], Res70788), 
LReL18881 = relu_layer([[[0.4547, 0.1289]]], 2.341391102009988, 9.285544360220252, 6.845681555224719, ReL18881), 
LRes26380 = reshape_layer(ReL18881, [1, 2, 1], Res26380), 
LAve34559 = average_pooling2D_layer(Res26380, 1, 2, 1, 1, true, Ave34559), 
LRes39495 = reshape_layer(Ave34559, [1, 2], Res39495), 
LGlo84220 = global_max_pool1D_layer(Res39495, Glo84220), 
LRes2299 = reshape_layer(Glo84220, [1, 2], Res2299), 
LMax64762 = maximum_layer([Res70788,Res2299], Max64762), 
LPer42868 = permute_layer(Max64762, 2,1, Per42868), 
exec_layers([LAve17683,LRes70788,LReL18881,LRes26380,LAve34559,LRes39495,LGlo84220,LRes2299,LMax64762,LPer42868],["Ave17683","Res70788","ReL18881","Res26380","Ave34559","Res39495","Glo84220","Res2299","Max64762","Per42868"],Per42868,"Per42868")

Actual (Unparsed): [[[0.5408000], [0.5572500]]]

Expected (Unparsed): [[[0.5408],[0.55725]]]

Actual:   [[[0.5408], [0.5573]]]

Expected: [[[0.5408], [0.5573]]]