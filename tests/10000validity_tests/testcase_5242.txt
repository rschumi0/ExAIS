import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max89031 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in1Max89031 = tf.keras.layers.Input(shape=([1, 2, 2, 1]))
in0Up_1966 = tf.keras.layers.Input(shape=([2, 4]))
in0Con31360 = tf.keras.layers.Input(shape=([4, 6, 1]))
in0Ave38548 = tf.keras.layers.Input(shape=([1, 1]))
in1Ave38548 = tf.keras.layers.Input(shape=([1, 1]))
in0Sof84708 = tf.keras.layers.Input(shape=([1, 1]))
in0Con19354 = tf.keras.layers.Input(shape=([94]))

Max89031 = keras.layers.Maximum(name = 'Max89031', )([in0Max89031,in1Max89031])
Res80743 = keras.layers.Reshape((1, 2, 2), name = 'Res80743', )(Max89031)
Zer66798 = keras.layers.ZeroPadding2D(padding=((3, 0), (4, 0)), name = 'Zer66798', )(Res80743)
Up_1966 = keras.layers.UpSampling1D(size=(1), name = 'Up_1966', )(in0Up_1966)
Res18447 = keras.layers.Reshape((2, 4, 1), name = 'Res18447', )(Up_1966)
Zer74337 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer74337', )(Res18447)
Con31360 = keras.layers.Concatenate(axis=3, name = 'Con31360', )([Zer74337,in0Con31360])
Min2764 = keras.layers.Minimum(name = 'Min2764', )([Zer66798,Con31360])
Zer14483 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer14483', )(Min2764)
Res22913 = keras.layers.Reshape((6, 16), name = 'Res22913', )(Zer14483)
Fla70109 = keras.layers.Flatten(name = 'Fla70109', )(Res22913)
Ave38548 = keras.layers.Average(name = 'Ave38548', )([in0Ave38548,in1Ave38548])
Sof84708 = keras.layers.Softmax(axis=1, name = 'Sof84708', input_shape=(1, 1))(in0Sof84708)
Min85071 = keras.layers.Minimum(name = 'Min85071', )([Ave38548,Sof84708])
Res93240 = keras.layers.Reshape((1, 1, 1), name = 'Res93240', )(Min85071)
Res403 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res403', )(Res93240)
Up_18842 = keras.layers.UpSampling3D(size=(1, 1, 2), name = 'Up_18842', )(Res403)
Res23000 = keras.layers.Reshape((1, 1, 2), name = 'Res23000', )(Up_18842)
Res90009 = keras.layers.Reshape((1, 2), name = 'Res90009', )(Res23000)
Glo2379 = keras.layers.GlobalMaxPool1D(name = 'Glo2379', )(Res90009)
Con19354 = keras.layers.Concatenate(axis=1, name = 'Con19354', )([Glo2379,in0Con19354])
Min33827 = keras.layers.Minimum(name = 'Min33827', )([Fla70109,Con19354])
model = tf.keras.models.Model(inputs=[in0Max89031,in1Max89031,in0Up_1966,in0Con31360,in0Ave38548,in1Ave38548,in0Sof84708,in0Con19354], outputs=Min33827)
in0Max89031 = tf.constant([[[[[0.0125], [0.5873]], [[0.4232], [0.3773]]]]])
in1Max89031 = tf.constant([[[[[0.7543], [0.6741]], [[0.4084], [0.9378]]]]])
in0Up_1966 = tf.constant([[[1.7599, 1.6217, 1.0215, 1.5576], [1.6135, 1.3843, 1.9778, 1.9124]]])
in0Con31360 = tf.constant([[[[0.4828], [0.5685], [0.6962], [0.0938], [0.9923], [0.7135]], [[0.8513], [0.7955], [0.622], [0.8919], [0.2738], [0.8155]], [[0.5728], [0.8731], [0.7607], [0.6003], [0.4772], [0.8642]], [[0.7142], [0.1312], [0.8], [0.0788], [0.9107], [0.0562]]]])
in0Ave38548 = tf.constant([[[0.1636]]])
in1Ave38548 = tf.constant([[[0.8812]]])
in0Sof84708 = tf.constant([[[0.9692]]])
in0Con19354 = tf.constant([[0.1062, 0.3476, 0.1672, 0.4274, 0.6869, 0.9437, 0.9271, 0.1769, 0.5646, 0.0455, 0.1894, 0.4638, 0.7533, 0.3476, 0.9111, 0.2007, 0.2094, 0.7141, 0.2056, 0.7767, 0.2047, 0.0664, 0.2583, 0.4449, 0.0277, 0.5808, 0.7164, 0.0893, 0.46, 0.3936, 0.7564, 0.0346, 0.9338, 0.1983, 0.5023, 0.3824, 0.01, 0.8267, 0.7225, 0.2109, 0.8315, 0.152, 0.7591, 0.857, 0.5071, 0.4253, 0.4632, 0.4178, 0.9582, 0.4613, 0.5003, 0.5521, 0.6219, 0.9286, 0.7679, 0.6405, 0.5451, 0.3659, 0.8233, 0.3734, 0.8283, 0.4462, 0.16, 0.8738, 0.0793, 0.4397, 0.8879, 0.5344, 0.5264, 0.7918, 0.8772, 0.8509, 0.7024, 0.2216, 0.7042, 0.6663, 0.1634, 0.7731, 0.8041, 0.409, 0.5312, 0.8069, 0.0782, 0.0981, 0.2625, 0.0061, 0.8298, 0.1235, 0.9355, 0.089, 0.3117, 0.0627, 0.5212, 0.0704]])
print (np.array2string(model.predict([in0Max89031,in1Max89031,in0Up_1966,in0Con31360,in0Ave38548,in1Ave38548,in0Sof84708,in0Con19354],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Min33827.png')

LMax89031 = maximum_layer([[[[[[0.0125], [0.5873]], [[0.4232], [0.3773]]]]], [[[[[0.7543], [0.6741]], [[0.4084], [0.9378]]]]]], Max89031), 
LRes80743 = reshape_layer(Max89031, [1, 2, 2], Res80743), 
LZer66798 = zero_padding2D_layer(Res80743, 3, 0, 4, 0, Zer66798), 
LUp_1966 = up_sampling1D_layer([[[1.7599, 1.6217, 1.0215, 1.5576], [1.6135, 1.3843, 1.9778, 1.9124]]], 1, Up_1966), 
LRes18447 = reshape_layer(Up_1966, [2, 4, 1], Res18447), 
LZer74337 = zero_padding2D_layer(Res18447, 1, 1, 1, 1, Zer74337), 
LCon31360 = concatenate_layer([Zer74337,[[[[0.4828], [0.5685], [0.6962], [0.0938], [0.9923], [0.7135]], [[0.8513], [0.7955], [0.622], [0.8919], [0.2738], [0.8155]], [[0.5728], [0.8731], [0.7607], [0.6003], [0.4772], [0.8642]], [[0.7142], [0.1312], [0.8], [0.0788], [0.9107], [0.0562]]]]], 3, Con31360), 
LMin2764 = minimum_layer([Zer66798,Con31360], Min2764), 
LZer14483 = zero_padding2D_layer(Min2764, 1, 1, 1, 1, Zer14483), 
LRes22913 = reshape_layer(Zer14483, [6, 16], Res22913), 
LFla70109 = flatten_layer(Res22913, Fla70109), 
LAve38548 = average_layer([[[[0.1636]]], [[[0.8812]]]], Ave38548), 
LSof84708 = softmax_layer([[[0.9692]]], 1, Sof84708), 
LMin85071 = minimum_layer([Ave38548,Sof84708], Min85071), 
LRes93240 = reshape_layer(Min85071, [1, 1, 1], Res93240), 
LRes403 = reshape_layer(Res93240, [1, 1, 1, 1], Res403), 
LUp_18842 = up_sampling3D_layer(Res403, 1, 1, 2, Up_18842), 
LRes23000 = reshape_layer(Up_18842, [1, 1, 2], Res23000), 
LRes90009 = reshape_layer(Res23000, [1, 2], Res90009), 
LGlo2379 = global_max_pool1D_layer(Res90009, Glo2379), 
LCon19354 = concatenate_layer([Glo2379,[[0.1062, 0.3476, 0.1672, 0.4274, 0.6869, 0.9437, 0.9271, 0.1769, 0.5646, 0.0455, 0.1894, 0.4638, 0.7533, 0.3476, 0.9111, 0.2007, 0.2094, 0.7141, 0.2056, 0.7767, 0.2047, 0.0664, 0.2583, 0.4449, 0.0277, 0.5808, 0.7164, 0.0893, 0.46, 0.3936, 0.7564, 0.0346, 0.9338, 0.1983, 0.5023, 0.3824, 0.01, 0.8267, 0.7225, 0.2109, 0.8315, 0.152, 0.7591, 0.857, 0.5071, 0.4253, 0.4632, 0.4178, 0.9582, 0.4613, 0.5003, 0.5521, 0.6219, 0.9286, 0.7679, 0.6405, 0.5451, 0.3659, 0.8233, 0.3734, 0.8283, 0.4462, 0.16, 0.8738, 0.0793, 0.4397, 0.8879, 0.5344, 0.5264, 0.7918, 0.8772, 0.8509, 0.7024, 0.2216, 0.7042, 0.6663, 0.1634, 0.7731, 0.8041, 0.409, 0.5312, 0.8069, 0.0782, 0.0981, 0.2625, 0.0061, 0.8298, 0.1235, 0.9355, 0.089, 0.3117, 0.0627, 0.5212, 0.0704]]], 1, Con19354), 
LMin33827 = minimum_layer([Fla70109,Con19354], Min33827), 
exec_layers([LMax89031,LRes80743,LZer66798,LUp_1966,LRes18447,LZer74337,LCon31360,LMin2764,LZer14483,LRes22913,LFla70109,LAve38548,LSof84708,LMin85071,LRes93240,LRes403,LUp_18842,LRes23000,LRes90009,LGlo2379,LCon19354,LMin33827],["Max89031","Res80743","Zer66798","Up_1966","Res18447","Zer74337","Con31360","Min2764","Zer14483","Res22913","Fla70109","Ave38548","Sof84708","Min85071","Res93240","Res403","Up_18842","Res23000","Res90009","Glo2379","Con19354","Min33827"],Min33827,"Min33827")

Actual (Unparsed): [[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.2216000, 0.0000000, 0.0562000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]

Expected (Unparsed): [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2216,0,0.0562,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]

Actual:   [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2216, 0, 0.0562, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]

Expected: [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2216, 0, 0.0562, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]