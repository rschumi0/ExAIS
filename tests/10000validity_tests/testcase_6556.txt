import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max69447 = tf.keras.layers.Input(shape=([1, 1]))
in1Max69447 = tf.keras.layers.Input(shape=([1, 1]))

Max69447 = keras.layers.Maximum(name = 'Max69447', )([in0Max69447,in1Max69447])
Res66733 = keras.layers.Reshape((1, 1, 1), name = 'Res66733', )(Max69447)
Res7961 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res7961', )(Res66733)
Zer81232 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer81232', )(Res7961)
Res88135 = keras.layers.Reshape((3, 3, 3), name = 'Res88135', )(Zer81232)
Res80057 = keras.layers.Reshape((3, 9), name = 'Res80057', )(Res88135)
Per58493 = keras.layers.Permute((1,2), name = 'Per58493',)(Res80057)
model = tf.keras.models.Model(inputs=[in0Max69447,in1Max69447], outputs=Per58493)
in0Max69447 = tf.constant([[[0.9794]]])
in1Max69447 = tf.constant([[[0.1469]]])
print (np.array2string(model.predict([in0Max69447,in1Max69447],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per58493.png')

LMax69447 = maximum_layer([[[[0.9794]]], [[[0.1469]]]], Max69447), 
LRes66733 = reshape_layer(Max69447, [1, 1, 1], Res66733), 
LRes7961 = reshape_layer(Res66733, [1, 1, 1, 1], Res7961), 
LZer81232 = zero_padding3D_layer(Res7961, 1, 1, 1, 1, 1, 1, Zer81232), 
LRes88135 = reshape_layer(Zer81232, [3, 3, 3], Res88135), 
LRes80057 = reshape_layer(Res88135, [3, 9], Res80057), 
LPer58493 = permute_layer(Res80057, 1,2, Per58493), 
exec_layers([LMax69447,LRes66733,LRes7961,LZer81232,LRes88135,LRes80057,LPer58493],["Max69447","Res66733","Res7961","Zer81232","Res88135","Res80057","Per58493"],Per58493,"Per58493")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.9794000, 0.0000000, 0.0000000, 0.0000000, 0.0000000], [0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000]]]

Expected (Unparsed): [[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0.9794,0,0,0,0],[0,0,0,0,0,0,0,0,0]]]

Actual:   [[[0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0.9794, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]]]

Expected: [[[0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0.9794, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]]]