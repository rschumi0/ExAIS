import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot54012 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot54012 = tf.keras.layers.Input(shape=([3, 3]))

Dot54012 = keras.layers.Dot(axes=(1, 2), name = 'Dot54012', )([in0Dot54012,in1Dot54012])
Up_34212 = keras.layers.UpSampling1D(size=(2), name = 'Up_34212', )(Dot54012)
model = tf.keras.models.Model(inputs=[in0Dot54012,in1Dot54012], outputs=Up_34212)
in0Dot54012 = tf.constant([[[0.2232, 0.5007, 0.3956], [0.4255, 0.1377, 0.9378], [0.9392, 0.0907, 0.0431]]])
in1Dot54012 = tf.constant([[[0.3034, 0.354, 0.2731], [0.8304, 0.9898, 0.6295], [0.4651, 0.6755, 0.6412]]])
print (np.array2string(model.predict([in0Dot54012,in1Dot54012],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_34212.png')

LDot54012 = dot_layer([[[0.2232, 0.5007, 0.3956], [0.4255, 0.1377, 0.9378], [0.9392, 0.0907, 0.0431]]], [[[0.3034, 0.354, 0.2731], [0.8304, 0.9898, 0.6295], [0.4651, 0.6755, 0.6412]]], 1, 2, Dot54012), 
LUp_34212 = up_sampling1D_layer(Dot54012, 2, Up_34212), 
exec_layers([LDot54012,LUp_34212],["Dot54012","Up_34212"],Up_34212,"Up_34212")

Actual (Unparsed): [[[0.4748414, 1.1977315, 0.9934506], [0.4748414, 1.1977315, 0.9934506], [0.2254284, 0.6091724, 0.3840488], [0.2254284, 0.6091724, 0.3840488], [0.4637768, 1.2838721, 0.8451131], [0.4637768, 1.2838721, 0.8451131]]]

Expected (Unparsed): [[[0.4748414,1.19773158,0.99345061],[0.4748414,1.19773158,0.99345061],[0.22542835000000003,0.6091723899999999,0.38404876],[0.22542835000000003,0.6091723899999999,0.38404876],[0.46377685,1.28387213,0.84511318],[0.46377685,1.28387213,0.84511318]]]

Actual:   [[[0.4749, 1.1978, 0.9935], [0.4749, 1.1978, 0.9935], [0.2255, 0.6092, 0.3841], [0.2255, 0.6092, 0.3841], [0.4638, 1.2839, 0.8452], [0.4638, 1.2839, 0.8452]]]

Expected: [[[0.4749, 1.1978, 0.9935], [0.4749, 1.1978, 0.9935], [0.2255, 0.6092, 0.3841], [0.2255, 0.6092, 0.3841], [0.4638, 1.2839, 0.8452], [0.4638, 1.2839, 0.8452]]]