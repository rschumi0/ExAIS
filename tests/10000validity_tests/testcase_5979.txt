import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub7101 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in1Sub7101 = tf.keras.layers.Input(shape=([2, 3, 2, 2]))
in0Min5715 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Min5715 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Sub7101 = keras.layers.Subtract(name = 'Sub7101', )([in0Sub7101,in1Sub7101])
Min5715 = keras.layers.Minimum(name = 'Min5715', )([in0Min5715,in1Min5715])
Zer36332 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (1, 0)), name = 'Zer36332', )(Min5715)
Add29131 = keras.layers.Add(name = 'Add29131', )([Sub7101,Zer36332])
model = tf.keras.models.Model(inputs=[in0Sub7101,in1Sub7101,in0Min5715,in1Min5715], outputs=Add29131)
in0Sub7101 = tf.constant([[[[[0.9089, 0.0498], [0.8118, 0.5953]], [[0.0744, 0.4886], [0.6756, 0.9424]], [[0.707, 0.8739], [0.1626, 0.7054]]], [[[0.2463, 0.6943], [0.5051, 0.1873]], [[0.8876, 0.746], [0.4293, 0.9605]], [[0.4724, 0.7104], [0.8666, 0.8839]]]]])
in1Sub7101 = tf.constant([[[[[0.3176, 0.151], [0.19, 0.3324]], [[0.5212, 0.5176], [0.5325, 0.1672]], [[0.453, 0.5713], [0.2987, 0.8227]]], [[[0.33, 0.7593], [0.0711, 0.5058]], [[0.0071, 0.4553], [0.7252, 0.917]], [[0.3711, 0.6559], [0.7241, 0.0866]]]]])
in0Min5715 = tf.constant([[[[[0.0155, 0.6796]]], [[[0.2367, 0.8914]]]]])
in1Min5715 = tf.constant([[[[[0.1973, 0.6467]]], [[[0.9408, 0.568]]]]])
print (np.array2string(model.predict([in0Sub7101,in1Sub7101,in0Min5715,in1Min5715],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add29131.png')

LSub7101 = subtract_layer([[[[[0.9089, 0.0498], [0.8118, 0.5953]], [[0.0744, 0.4886], [0.6756, 0.9424]], [[0.707, 0.8739], [0.1626, 0.7054]]], [[[0.2463, 0.6943], [0.5051, 0.1873]], [[0.8876, 0.746], [0.4293, 0.9605]], [[0.4724, 0.7104], [0.8666, 0.8839]]]]], [[[[[0.3176, 0.151], [0.19, 0.3324]], [[0.5212, 0.5176], [0.5325, 0.1672]], [[0.453, 0.5713], [0.2987, 0.8227]]], [[[0.33, 0.7593], [0.0711, 0.5058]], [[0.0071, 0.4553], [0.7252, 0.917]], [[0.3711, 0.6559], [0.7241, 0.0866]]]]], Sub7101), 
LMin5715 = minimum_layer([[[[[[0.0155, 0.6796]]], [[[0.2367, 0.8914]]]]], [[[[[0.1973, 0.6467]]], [[[0.9408, 0.568]]]]]], Min5715), 
LZer36332 = zero_padding3D_layer(Min5715, 0, 0, 2, 0, 1, 0, Zer36332), 
LAdd29131 = add_layer([Sub7101,Zer36332], Add29131), 
exec_layers([LSub7101,LMin5715,LZer36332,LAdd29131],["Sub7101","Min5715","Zer36332","Add29131"],Add29131,"Add29131")

Actual (Unparsed): [[[[[0.5913000, -0.1012000], [0.6218000, 0.2629000]], [[-0.4468000, -0.0290000], [0.1431000, 0.7752000]], [[0.2540000, 0.3026000], [-0.1206000, 0.5294000]]], [[[-0.0837000, -0.0650000], [0.4340000, -0.3185000]], [[0.8805000, 0.2907000], [-0.2959000, 0.0435000]], [[0.1013000, 0.0545000], [0.3792000, 1.3653000]]]]]

Expected (Unparsed): [[[[[0.5913,-0.1012],[0.6217999999999999,0.2629000000000001]],[[-0.4468,-0.02899999999999997],[0.1431,0.7752]],[[0.25399999999999995,0.3026],[-0.12060000000000003,0.5294000000000001]]],[[[-0.08370000000000002,-0.06499999999999995],[0.434,-0.3185]],[[0.8805,0.2907],[-0.29589999999999994,0.04349999999999998]],[[0.1013,0.05449999999999999],[0.3792000000000001,1.3653]]]]]

Actual:   [[[[[0.5913, -0.1012], [0.6218, 0.2629]], [[-0.4468, -0.029], [0.1431, 0.7752]], [[0.254, 0.3026], [-0.1206, 0.5294]]], [[[-0.0837, -0.065], [0.434, -0.3185]], [[0.8805, 0.2907], [-0.2959, 0.0435]], [[0.1013, 0.0545], [0.3792, 1.3653]]]]]

Expected: [[[[[0.5913, -0.1012], [0.6218, 0.263]], [[-0.4468, -0.0289], [0.1431, 0.7752]], [[0.254, 0.3026], [-0.1206, 0.5295]]], [[[-0.0837, -0.0649], [0.434, -0.3185]], [[0.8805, 0.2907], [-0.2958, 0.0435]], [[0.1013, 0.0545], [0.3793, 1.3653]]]]]