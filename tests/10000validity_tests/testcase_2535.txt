import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Zer67987 = tf.keras.layers.Input(shape=([3, 3]))
in0Min27263 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Min27263 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Con13686 = tf.keras.layers.Input(shape=([1, 7]))
in0Sub49971 = tf.keras.layers.Input(shape=([2, 3, 3]))
in1Sub49971 = tf.keras.layers.Input(shape=([2, 3, 3]))
in0Con60253 = tf.keras.layers.Input(shape=([5, 1]))

Zer67987 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer67987', )(in0Zer67987)
Min27263 = keras.layers.Minimum(name = 'Min27263', )([in0Min27263,in1Min27263])
Sep84482 = keras.layers.SeparableConv2D(2, (1, 1),strides=(1, 1), padding='valid', name = 'Sep84482', )(Min27263)
Res69054 = keras.layers.Reshape((1, 2), name = 'Res69054', )(Sep84482)
Con13686 = keras.layers.Concatenate(axis=2, name = 'Con13686', )([Res69054,in0Con13686])
Sub49971 = keras.layers.Subtract(name = 'Sub49971', )([in0Sub49971,in1Sub49971])
Res79019 = keras.layers.Reshape((2, 9), name = 'Res79019', )(Sub49971)
Dot61901 = keras.layers.Dot(axes=(2, 2), name = 'Dot61901', )([Con13686,Res79019])
Zer66747 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer66747', )(Dot61901)
Con60253 = keras.layers.Concatenate(axis=2, name = 'Con60253', )([Zer66747,in0Con60253])
Add69471 = keras.layers.Add(name = 'Add69471', )([Zer67987,Con60253])
model = tf.keras.models.Model(inputs=[in0Zer67987,in0Min27263,in1Min27263,in0Con13686,in0Sub49971,in1Sub49971,in0Con60253], outputs=Add69471)
w = model.get_layer('Sep84482').get_weights() 
w[0] = np.array([[[[0.0211], [0.3146]]]])
w[1] = np.array([[[[0.8458, 0.1995], [0.5226, 0.226]]]])
w[2] = np.array([0, 0])
model.get_layer('Sep84482').set_weights(w) 
in0Zer67987 = tf.constant([[[1.3902, 1.0039, 1.5305], [1.1033, 1.2238, 1.4118], [1.937, 1.4027, 1.1417]]])
in0Min27263 = tf.constant([[[[0.3008, 0.4853]]]])
in1Min27263 = tf.constant([[[[0.411, 0.2191]]]])
in0Con13686 = tf.constant([[[0.1085, 0.0049, 0.818, 0.6847, 0.8829, 0.03, 0.6531]]])
in0Sub49971 = tf.constant([[[[0.9634, 0.0215, 0.3838], [0.6962, 0.2513, 0.874], [0.7081, 0.3199, 0.1091]], [[0.5571, 0.5254, 0.5679], [0.7564, 0.4049, 0.5683], [0.7369, 0.4037, 0.0194]]]])
in1Sub49971 = tf.constant([[[[0.1435, 0.0036, 0.1161], [0.3114, 0.3132, 0.4752], [0.1987, 0.0834, 0.9765]], [[0.9324, 0.2643, 0.5587], [0.7322, 0.4411, 0.9688], [0.9964, 0.117, 0.2547]]]])
in0Con60253 = tf.constant([[[0.0777], [0.9294], [0.2966], [0.8287], [0.9181]]])
print (np.array2string(model.predict([in0Zer67987,in0Min27263,in1Min27263,in0Con13686,in0Sub49971,in1Sub49971,in0Con60253],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add69471.png')

LZer67987 = zero_padding1D_layer([[[1.3902, 1.0039, 1.5305], [1.1033, 1.2238, 1.4118], [1.937, 1.4027, 1.1417]]], 1, 1, Zer67987), 
LMin27263 = minimum_layer([[[[[0.3008, 0.4853]]]], [[[[0.411, 0.2191]]]]], Min27263), 
LSep84482 = separable_conv2D_layer(Min27263, 1, 1,[[[[[0.0211], [0.3146]]]],[[[[0.8458, 0.1995], [0.5226, 0.226]]]]],[0, 0], 1, 1, false, Sep84482), 
LRes69054 = reshape_layer(Sep84482, [1, 2], Res69054), 
LCon13686 = concatenate_layer([Res69054,[[[0.1085, 0.0049, 0.818, 0.6847, 0.8829, 0.03, 0.6531]]]], 2, Con13686), 
LSub49971 = subtract_layer([[[[0.9634, 0.0215, 0.3838], [0.6962, 0.2513, 0.874], [0.7081, 0.3199, 0.1091]], [[0.5571, 0.5254, 0.5679], [0.7564, 0.4049, 0.5683], [0.7369, 0.4037, 0.0194]]]], [[[[0.1435, 0.0036, 0.1161], [0.3114, 0.3132, 0.4752], [0.1987, 0.0834, 0.9765]], [[0.9324, 0.2643, 0.5587], [0.7322, 0.4411, 0.9688], [0.9964, 0.117, 0.2547]]]], Sub49971), 
LRes79019 = reshape_layer(Sub49971, [2, 9], Res79019), 
LDot61901 = dot_layer(Con13686,Res79019, 2, 2, Dot61901), 
LZer66747 = zero_padding1D_layer(Dot61901, 4, 0, Zer66747), 
LCon60253 = concatenate_layer([Zer66747,[[[0.0777], [0.9294], [0.2966], [0.8287], [0.9181]]]], 2, Con60253), 
LAdd69471 = add_layer([Zer67987,Con60253], Add69471), 
exec_layers([LZer67987,LMin27263,LSep84482,LRes69054,LCon13686,LSub49971,LRes79019,LDot61901,LZer66747,LCon60253,LAdd69471],["Zer67987","Min27263","Sep84482","Res69054","Con13686","Sub49971","Res79019","Dot61901","Zer66747","Con60253","Add69471"],Add69471,"Add69471")

Actual (Unparsed): [[[0.0000000, 0.0000000, 0.0777000], [1.3902000, 1.0039001, 2.4599001], [1.1033000, 1.2237999, 1.7084000], [1.9370000, 1.4026999, 1.9704000], [0.1779380, -0.6880390, 0.9181000]]]

Expected (Unparsed): [[[0,0,0.0777],[1.3902,1.0039,2.4599],[1.1033,1.2238,1.7084],[1.937,1.4027,1.9704],[0.177937959733534,-0.68803897110989,0.9181]]]

Actual:   [[[0, 0, 0.0777], [1.3902, 1.004, 2.46], [1.1033, 1.2238, 1.7084], [1.937, 1.4027, 1.9704], [0.178, -0.688, 0.9181]]]

Expected: [[[0, 0, 0.0777], [1.3902, 1.0039, 2.4599], [1.1033, 1.2238, 1.7084], [1.937, 1.4027, 1.9704], [0.178, -0.688, 0.9181]]]