import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mas46393 = tf.keras.layers.Input(shape=([1, 4]))

Mas46393 = keras.layers.Masking(mask_value=1, name = 'Mas46393', )(in0Mas46393)
Bat37683 = keras.layers.BatchNormalization(axis=2, epsilon=0.8237306712900393,  name = 'Bat37683', )(Mas46393)
Res59054 = keras.layers.Reshape((1, 4, 1), name = 'Res59054', )(Bat37683)
Ave64383 = keras.layers.AveragePooling2D(pool_size=(1, 2), strides=(5, 1), padding='valid', name = 'Ave64383', )(Res59054)
Res91593 = keras.layers.Reshape((1, 3), name = 'Res91593', )(Ave64383)
Glo71895 = keras.layers.GlobalMaxPool1D(name = 'Glo71895', )(Res91593)
model = tf.keras.models.Model(inputs=[in0Mas46393], outputs=Glo71895)
w = model.get_layer('Bat37683').get_weights() 
w[0] = np.array([0.8842, 0.5502, 0.4529, 0.827])
w[1] = np.array([0.661, 0.8654, 0.9402, 0.9906])
w[2] = np.array([0.651, 0.2269, 0.5191, 0.3609])
w[3] = np.array([0.1309, 0.9896, 0.3718, 0.8563])
model.get_layer('Bat37683').set_weights(w) 
in0Mas46393 = tf.constant([[[1.2748, 1.763, 1.4582, 1.8184]]])
print (np.array2string(model.predict([in0Mas46393],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo71895.png')

LMas46393 = masking_layer([[[1.2748, 1.763, 1.4582, 1.8184]]], 1, Mas46393), 
LBat37683 = batch_normalization_layer(Mas46393, 2, 0.8237306712900393, [0.8842, 0.5502, 0.4529, 0.827], [0.661, 0.8654, 0.9402, 0.9906], [0.651, 0.2269, 0.5191, 0.3609], [0.1309, 0.9896, 0.3718, 0.8563], Bat37683), 
LRes59054 = reshape_layer(Bat37683, [1, 4, 1], Res59054), 
LAve64383 = average_pooling2D_layer(Res59054, 1, 2, 5, 1, false, Ave64383), 
LRes91593 = reshape_layer(Ave64383, [1, 3], Res91593), 
LGlo71895 = global_max_pool1D_layer(Res91593, Glo71895), 
exec_layers([LMas46393,LBat37683,LRes59054,LAve64383,LRes91593,LGlo71895],["Mas46393","Bat37683","Res59054","Ave64383","Res91593","Glo71895"],Glo71895,"Glo71895")

Actual (Unparsed): [[1.3592727, 1.4111064, 1.6248635]]

Expected (Unparsed): [[1.3592727228471349,1.4111063896501883,1.6248635006622734]]

Actual:   [[1.3593, 1.4112, 1.6249]]

Expected: [[1.3593, 1.4112, 1.6249]]