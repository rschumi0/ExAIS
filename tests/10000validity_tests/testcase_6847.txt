import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den4592 = tf.keras.layers.Input(shape=([4, 2, 2]))
in0Con64262 = tf.keras.layers.Input(shape=([6, 2]))
in0Add67714 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Add67714 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con52942 = tf.keras.layers.Input(shape=([2, 2]))
in0Dot82836 = tf.keras.layers.Input(shape=([2, 2]))
in1Dot82836 = tf.keras.layers.Input(shape=([2, 2]))
in0Con87621 = tf.keras.layers.Input(shape=([2, 10]))
in0Sub7638 = tf.keras.layers.Input(shape=([3, 2, 3, 2]))
in1Sub7638 = tf.keras.layers.Input(shape=([3, 2, 3, 2]))

Den4592 = keras.layers.Dense(3,name = 'Den4592', )(in0Den4592)
Res64277 = keras.layers.Reshape((4, 6), name = 'Res64277', )(Den4592)
Glo4917 = keras.layers.GlobalMaxPool1D(name = 'Glo4917', )(Res64277)
Res86236 = keras.layers.Reshape((6, 1), name = 'Res86236', )(Glo4917)
Con64262 = keras.layers.Concatenate(axis=2, name = 'Con64262', )([Res86236,in0Con64262])
Add67714 = keras.layers.Add(name = 'Add67714', )([in0Add67714,in1Add67714])
Ave57143 = keras.layers.AveragePooling2D(pool_size=(1, 1), strides=(1, 1), padding='valid', name = 'Ave57143', )(Add67714)
Res90181 = keras.layers.Reshape((1, 1), name = 'Res90181', )(Ave57143)
Zer42689 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer42689', )(Res90181)
Con52942 = keras.layers.Concatenate(axis=2, name = 'Con52942', )([Zer42689,in0Con52942])
Dot82836 = keras.layers.Dot(axes=(1, 2), name = 'Dot82836', )([in0Dot82836,in1Dot82836])
Con87621 = keras.layers.Concatenate(axis=2, name = 'Con87621', )([Dot82836,in0Con87621])
Sub7638 = keras.layers.Subtract(name = 'Sub7638', )([in0Sub7638,in1Sub7638])
Res10554 = keras.layers.Reshape((3, 2, 6), name = 'Res10554', )(Sub7638)
Res65019 = keras.layers.Reshape((3, 12), name = 'Res65019', )(Res10554)
Dot95580 = keras.layers.Dot(axes=(2, 2), name = 'Dot95580', )([Con87621,Res65019])
Add99312 = keras.layers.Add(name = 'Add99312', )([Con52942,Dot95580])
Zer17700 = keras.layers.ZeroPadding1D(padding=((4, 0)), name = 'Zer17700', )(Add99312)
Max91720 = keras.layers.Maximum(name = 'Max91720', )([Con64262,Zer17700])
Res58562 = keras.layers.Reshape((6, 3, 1), name = 'Res58562', )(Max91720)
Res58417 = keras.layers.Reshape((6, 3, 1, 1), name = 'Res58417', )(Res58562)
Glo88329 = keras.layers.GlobalAveragePooling3D(name = 'Glo88329', )(Res58417)
model = tf.keras.models.Model(inputs=[in0Den4592,in0Con64262,in0Add67714,in1Add67714,in0Con52942,in0Dot82836,in1Dot82836,in0Con87621,in0Sub7638,in1Sub7638], outputs=Glo88329)
w = model.get_layer('Den4592').get_weights() 
w[0] = np.array([[0.6792, 0.392, 0.7637], [0.7722, 0.2611, 0.0007]])
w[1] = np.array([0.8743, 0.7033, 0.819])
model.get_layer('Den4592').set_weights(w) 
in0Den4592 = tf.constant([[[[0.7116, 0.8417], [0.1131, 0.9244]], [[0.394, 0.0833], [0.6597, 0.4391]], [[0.5636, 0.8914], [0.2127, 0.1317]], [[0.8503, 0.7237], [0.7318, 0.0488]]]])
in0Con64262 = tf.constant([[[0.0579, 0.2164], [0.02, 0.5017], [0.5954, 0.5203], [0.8193, 0.2059], [0.5126, 0.4886], [0.609, 0.7485]]])
in0Add67714 = tf.constant([[[[0.9971]]]])
in1Add67714 = tf.constant([[[[0.4671]]]])
in0Con52942 = tf.constant([[[0.3887, 0.1334], [0.2085, 0.1438]]])
in0Dot82836 = tf.constant([[[0.9996, 0.2817], [0.6437, 0.0213]]])
in1Dot82836 = tf.constant([[[0.2354, 0.0681], [0.0895, 0.8073]]])
in0Con87621 = tf.constant([[[0.7082, 0.5544, 0.5777, 0.1252, 0.4891, 0.7867, 0.547, 0.8682, 0.8662, 0.4429], [0.8204, 0.7708, 0.7775, 0.8796, 0.5997, 0.5894, 0.442, 0.0306, 0.8535, 0.9516]]])
in0Sub7638 = tf.constant([[[[[0.386, 0.6759], [0.2249, 0.8268], [0.4988, 0.554]], [[0.5723, 0.2492], [0.0992, 0.9765], [0.9092, 0.8871]]], [[[0.2905, 0.6833], [0.2604, 0.3357], [0.3772, 0.8239]], [[0.1392, 0.9994], [0.1684, 0.8501], [0.7966, 0.7044]]], [[[0.7627, 0.8691], [0.8914, 0.1061], [0.5391, 0.37]], [[0.4341, 0.6398], [0.2792, 0.1656], [0.0777, 0.3347]]]]])
in1Sub7638 = tf.constant([[[[[0.8358, 0.8559], [0.8294, 0.4141], [0.5257, 0.1091]], [[0.0367, 0.2364], [0.4754, 0.5836], [0.0701, 0.7997]]], [[[0.4745, 0.3694], [0.4639, 0.7273], [0.5057, 0.412]], [[0.4068, 0.378], [0.0073, 0.5039], [0.378, 0.4866]]], [[[0.1018, 0.0748], [0.4156, 0.527], [0.4744, 0.1942]], [[0.9717, 0.8148], [0.3224, 0.911], [0.561, 0.2146]]]]])
print (np.array2string(model.predict([in0Den4592,in0Con64262,in0Add67714,in1Add67714,in0Con52942,in0Dot82836,in1Dot82836,in0Con87621,in0Sub7638,in1Sub7638],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo88329.png')

LDen4592 = dense_layer([[[[0.7116, 0.8417], [0.1131, 0.9244]], [[0.394, 0.0833], [0.6597, 0.4391]], [[0.5636, 0.8914], [0.2127, 0.1317]], [[0.8503, 0.7237], [0.7318, 0.0488]]]], [[0.6792, 0.392, 0.7637], [0.7722, 0.2611, 0.0007]],[0.8743, 0.7033, 0.819], Den4592), 
LRes64277 = reshape_layer(Den4592, [4, 6], Res64277), 
LGlo4917 = global_max_pool1D_layer(Res64277, Glo4917), 
LRes86236 = reshape_layer(Glo4917, [6, 1], Res86236), 
LCon64262 = concatenate_layer([Res86236,[[[0.0579, 0.2164], [0.02, 0.5017], [0.5954, 0.5203], [0.8193, 0.2059], [0.5126, 0.4886], [0.609, 0.7485]]]], 2, Con64262), 
LAdd67714 = add_layer([[[[[0.9971]]]], [[[[0.4671]]]]], Add67714), 
LAve57143 = average_pooling2D_layer(Add67714, 1, 1, 1, 1, false, Ave57143), 
LRes90181 = reshape_layer(Ave57143, [1, 1], Res90181), 
LZer42689 = zero_padding1D_layer(Res90181, 1, 0, Zer42689), 
LCon52942 = concatenate_layer([Zer42689,[[[0.3887, 0.1334], [0.2085, 0.1438]]]], 2, Con52942), 
LDot82836 = dot_layer([[[0.9996, 0.2817], [0.6437, 0.0213]]], [[[0.2354, 0.0681], [0.0895, 0.8073]]], 1, 2, Dot82836), 
LCon87621 = concatenate_layer([Dot82836,[[[0.7082, 0.5544, 0.5777, 0.1252, 0.4891, 0.7867, 0.547, 0.8682, 0.8662, 0.4429], [0.8204, 0.7708, 0.7775, 0.8796, 0.5997, 0.5894, 0.442, 0.0306, 0.8535, 0.9516]]]], 2, Con87621), 
LSub7638 = subtract_layer([[[[[0.386, 0.6759], [0.2249, 0.8268], [0.4988, 0.554]], [[0.5723, 0.2492], [0.0992, 0.9765], [0.9092, 0.8871]]], [[[0.2905, 0.6833], [0.2604, 0.3357], [0.3772, 0.8239]], [[0.1392, 0.9994], [0.1684, 0.8501], [0.7966, 0.7044]]], [[[0.7627, 0.8691], [0.8914, 0.1061], [0.5391, 0.37]], [[0.4341, 0.6398], [0.2792, 0.1656], [0.0777, 0.3347]]]]], [[[[[0.8358, 0.8559], [0.8294, 0.4141], [0.5257, 0.1091]], [[0.0367, 0.2364], [0.4754, 0.5836], [0.0701, 0.7997]]], [[[0.4745, 0.3694], [0.4639, 0.7273], [0.5057, 0.412]], [[0.4068, 0.378], [0.0073, 0.5039], [0.378, 0.4866]]], [[[0.1018, 0.0748], [0.4156, 0.527], [0.4744, 0.1942]], [[0.9717, 0.8148], [0.3224, 0.911], [0.561, 0.2146]]]]], Sub7638), 
LRes10554 = reshape_layer(Sub7638, [3, 2, 6], Res10554), 
LRes65019 = reshape_layer(Res10554, [3, 12], Res65019), 
LDot95580 = dot_layer(Con87621,Res65019, 2, 2, Dot95580), 
LAdd99312 = add_layer([Con52942,Dot95580], Add99312), 
LZer17700 = zero_padding1D_layer(Add99312, 4, 0, Zer17700), 
LMax91720 = maximum_layer([Con64262,Zer17700], Max91720), 
LRes58562 = reshape_layer(Max91720, [6, 3, 1], Res58562), 
LRes58417 = reshape_layer(Res58562, [6, 3, 1, 1], Res58417), 
LGlo88329 = global_average_pooling3D_layer(Res58417, Glo88329), 
exec_layers([LDen4592,LRes64277,LGlo4917,LRes86236,LCon64262,LAdd67714,LAve57143,LRes90181,LZer42689,LCon52942,LDot82836,LCon87621,LSub7638,LRes10554,LRes65019,LDot95580,LAdd99312,LZer17700,LMax91720,LRes58562,LRes58417,LGlo88329],["Den4592","Res64277","Glo4917","Res86236","Con64262","Add67714","Ave57143","Res90181","Zer42689","Con52942","Dot82836","Con87621","Sub7638","Res10554","Res65019","Dot95580","Add99312","Zer17700","Max91720","Res58562","Res58417","Glo88329"],Glo88329,"Glo88329")

Actual (Unparsed): [[0.9121417]]

Expected (Unparsed): [[0.9121416888876112]]

Actual:   [[0.9122]]

Expected: [[0.9122]]