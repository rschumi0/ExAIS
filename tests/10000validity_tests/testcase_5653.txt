import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave23483 = tf.keras.layers.Input(shape=([1, 1, 1]))
in1Ave23483 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con2276 = tf.keras.layers.Input(shape=([1, 2]))
in0Con24573 = tf.keras.layers.Input(shape=([1, 1]))
in0Add26086 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in1Add26086 = tf.keras.layers.Input(shape=([2, 1, 2, 2]))
in0Sub46522 = tf.keras.layers.Input(shape=([3, 3]))
in1Sub46522 = tf.keras.layers.Input(shape=([3, 3]))

Ave23483 = keras.layers.Average(name = 'Ave23483', )([in0Ave23483,in1Ave23483])
Res66445 = keras.layers.Reshape((1, 1), name = 'Res66445', )(Ave23483)
Con2276 = keras.layers.Concatenate(axis=2, name = 'Con2276', )([Res66445,in0Con2276])
Con24573 = keras.layers.Concatenate(axis=2, name = 'Con24573', )([Con2276,in0Con24573])
Add26086 = keras.layers.Add(name = 'Add26086', )([in0Add26086,in1Add26086])
Res17206 = keras.layers.Reshape((2, 1, 4), name = 'Res17206', )(Add26086)
Res60266 = keras.layers.Reshape((2, 4), name = 'Res60266', )(Res17206)
Zer92294 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer92294', )(Res60266)
Dot33348 = keras.layers.Dot(axes=(2, 2), name = 'Dot33348', )([Con24573,Zer92294])
Zer9957 = keras.layers.ZeroPadding1D(padding=((2, 0)), name = 'Zer9957', )(Dot33348)
Sub46522 = keras.layers.Subtract(name = 'Sub46522', )([in0Sub46522,in1Sub46522])
Add6892 = keras.layers.Add(name = 'Add6892', )([Zer9957,Sub46522])
model = tf.keras.models.Model(inputs=[in0Ave23483,in1Ave23483,in0Con2276,in0Con24573,in0Add26086,in1Add26086,in0Sub46522,in1Sub46522], outputs=Add6892)
in0Ave23483 = tf.constant([[[[0.519]]]])
in1Ave23483 = tf.constant([[[[0.8753]]]])
in0Con2276 = tf.constant([[[0.1572, 0.226]]])
in0Con24573 = tf.constant([[[0.9851]]])
in0Add26086 = tf.constant([[[[[0.586, 0.9896], [0.3981, 0.8404]]], [[[0.8685, 0.2692], [0.8977, 0.1979]]]]])
in1Add26086 = tf.constant([[[[[0.5321, 0.0706], [0.746, 0.1423]]], [[[0.6743, 0.6479], [0.1961, 0.3873]]]]])
in0Sub46522 = tf.constant([[[0.1151, 0.0105, 0.0593], [0.7976, 0.9199, 0.1171], [0.7051, 0.0488, 0.174]]])
in1Sub46522 = tf.constant([[[0.0317, 0.3576, 0.4054], [0.9216, 0.5455, 0.3787], [0.0407, 0.0595, 0.2456]]])
print (np.array2string(model.predict([in0Ave23483,in1Ave23483,in0Con2276,in0Con24573,in0Add26086,in1Add26086,in0Sub46522,in1Sub46522],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add6892.png')

LAve23483 = average_layer([[[[[0.519]]]], [[[[0.8753]]]]], Ave23483), 
LRes66445 = reshape_layer(Ave23483, [1, 1], Res66445), 
LCon2276 = concatenate_layer([Res66445,[[[0.1572, 0.226]]]], 2, Con2276), 
LCon24573 = concatenate_layer([Con2276,[[[0.9851]]]], 2, Con24573), 
LAdd26086 = add_layer([[[[[[0.586, 0.9896], [0.3981, 0.8404]]], [[[0.8685, 0.2692], [0.8977, 0.1979]]]]], [[[[[0.5321, 0.0706], [0.746, 0.1423]]], [[[0.6743, 0.6479], [0.1961, 0.3873]]]]]], Add26086), 
LRes17206 = reshape_layer(Add26086, [2, 1, 4], Res17206), 
LRes60266 = reshape_layer(Res17206, [2, 4], Res60266), 
LZer92294 = zero_padding1D_layer(Res60266, 1, 0, Zer92294), 
LDot33348 = dot_layer(Con24573,Zer92294, 2, 2, Dot33348), 
LZer9957 = zero_padding1D_layer(Dot33348, 2, 0, Zer9957), 
LSub46522 = subtract_layer([[[0.1151, 0.0105, 0.0593], [0.7976, 0.9199, 0.1171], [0.7051, 0.0488, 0.174]]], [[[0.0317, 0.3576, 0.4054], [0.9216, 0.5455, 0.3787], [0.0407, 0.0595, 0.2456]]], Sub46522), 
LAdd6892 = add_layer([Zer9957,Sub46522], Add6892), 
exec_layers([LAve23483,LRes66445,LCon2276,LCon24573,LAdd26086,LRes17206,LRes60266,LZer92294,LDot33348,LZer9957,LSub46522,LAdd6892],["Ave23483","Res66445","Con2276","Con24573","Add26086","Res17206","Res60266","Zer92294","Dot33348","Zer9957","Sub46522","Add6892"],Add6892,"Add6892")

Actual (Unparsed): [[[0.0834000, -0.3471000, -0.3461000], [-0.1240000, 0.3744000, -0.2616000], [0.6644000, 2.1620712, 1.9718104]]]

Expected (Unparsed): [[[0.0834,-0.34709999999999996,-0.34609999999999996],[-0.124,0.37440000000000007,-0.2616],[0.6644,2.162071225,1.97181046]]]

Actual:   [[[0.0834, -0.3471, -0.3461], [-0.124, 0.3744, -0.2616], [0.6644, 2.1621, 1.9719]]]

Expected: [[[0.0834, -0.347, -0.346], [-0.124, 0.3745, -0.2616], [0.6644, 2.1621, 1.9719]]]