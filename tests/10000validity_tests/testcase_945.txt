import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add76118 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in1Add76118 = tf.keras.layers.Input(shape=([2, 1, 1, 1]))
in0Con16554 = tf.keras.layers.Input(shape=([2, 1, 3, 1]))
in0Ave31087 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Con52144 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Ave10731 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave10731 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Add76118 = keras.layers.Add(name = 'Add76118', )([in0Add76118,in1Add76118])
Zer680 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer680', )(Add76118)
Con16554 = keras.layers.Concatenate(axis=4, name = 'Con16554', )([Zer680,in0Con16554])
Ave31087 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave31087', )(in0Ave31087)
Res24670 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res24670', )(Ave31087)
Zer47220 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (1, 0)), name = 'Zer47220', )(Res24670)
Con52144 = keras.layers.Concatenate(axis=4, name = 'Con52144', )([Zer47220,in0Con52144])
Ave10731 = keras.layers.Average(name = 'Ave10731', )([in0Ave10731,in1Ave10731])
Ave53590 = keras.layers.Average(name = 'Ave53590', )([Con52144,Ave10731])
Zer89522 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer89522', )(Ave53590)
Add90881 = keras.layers.Add(name = 'Add90881', )([Con16554,Zer89522])
model = tf.keras.models.Model(inputs=[in0Add76118,in1Add76118,in0Con16554,in0Ave31087,in0Con52144,in0Ave10731,in1Ave10731], outputs=Add90881)
in0Add76118 = tf.constant([[[[[0.1907]]], [[[0.6304]]]]])
in1Add76118 = tf.constant([[[[[0.9967]]], [[[0.3462]]]]])
in0Con16554 = tf.constant([[[[[0.6527], [0.1828], [0.5388]]], [[[0.3128], [0.3207], [0.4181]]]]])
in0Ave31087 = tf.constant([[[[1.7466]]]])
in0Con52144 = tf.constant([[[[[0.3143], [0.603]]]]])
in0Ave10731 = tf.constant([[[[[0.1691, 0.8565], [0.2374, 0.4841]]]]])
in1Ave10731 = tf.constant([[[[[0.0242, 0.2147], [0.7932, 0.3222]]]]])
print (np.array2string(model.predict([in0Add76118,in1Add76118,in0Con16554,in0Ave31087,in0Con52144,in0Ave10731,in1Ave10731],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add90881.png')

LAdd76118 = add_layer([[[[[[0.1907]]], [[[0.6304]]]]], [[[[[0.9967]]], [[[0.3462]]]]]], Add76118), 
LZer680 = zero_padding3D_layer(Add76118, 0, 0, 0, 0, 2, 0, Zer680), 
LCon16554 = concatenate_layer([Zer680,[[[[[0.6527], [0.1828], [0.5388]]], [[[0.3128], [0.3207], [0.4181]]]]]], 4, Con16554), 
LAve31087 = average_pooling2D_layer([[[[1.7466]]]], 1, 1, Ave31087), 
LRes24670 = reshape_layer(Ave31087, [1, 1, 1, 1], Res24670), 
LZer47220 = zero_padding3D_layer(Res24670, 0, 0, 0, 0, 1, 0, Zer47220), 
LCon52144 = concatenate_layer([Zer47220,[[[[[0.3143], [0.603]]]]]], 4, Con52144), 
LAve10731 = average_layer([[[[[[0.1691, 0.8565], [0.2374, 0.4841]]]]], [[[[[0.0242, 0.2147], [0.7932, 0.3222]]]]]], Ave10731), 
LAve53590 = average_layer([Con52144,Ave10731], Ave53590), 
LZer89522 = zero_padding3D_layer(Ave53590, 1, 0, 0, 0, 1, 0, Zer89522), 
LAdd90881 = add_layer([Con16554,Zer89522], Add90881), 
exec_layers([LAdd76118,LZer680,LCon16554,LAve31087,LRes24670,LZer47220,LCon52144,LAve10731,LAve53590,LZer89522,LAdd90881],["Add76118","Zer680","Con16554","Ave31087","Res24670","Zer47220","Con52144","Ave10731","Ave53590","Zer89522","Add90881"],Add90881,"Add90881")

Actual (Unparsed): [[[[[0.0000000, 0.6527000], [0.0000000, 0.1828000], [1.1874000, 0.5388000]]], [[[0.0000000, 0.3128000], [0.0483250, 0.7456500], [2.1075500, 0.9211750]]]]]

Expected (Unparsed): [[[[[0,0.6527],[0,0.1828],[1.1874,0.5388]]],[[[0,0.3128],[0.048325,0.74565],[2.10755,0.921175]]]]]

Actual:   [[[[[0, 0.6527], [0, 0.1828], [1.1874, 0.5388]]], [[[0, 0.3128], [0.0484, 0.7457], [2.1076, 0.9212]]]]]

Expected: [[[[[0, 0.6527], [0, 0.1828], [1.1874, 0.5388]]], [[[0, 0.3128], [0.0484, 0.7457], [2.1076, 0.9212]]]]]