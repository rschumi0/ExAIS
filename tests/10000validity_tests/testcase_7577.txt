import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max84694 = tf.keras.layers.Input(shape=([1, 1, 2]))
in1Max84694 = tf.keras.layers.Input(shape=([1, 1, 2]))
in0Mul83530 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul83530 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Con168 = tf.keras.layers.Input(shape=([2]))
in0Dot70003 = tf.keras.layers.Input(shape=([3]))
in1Dot70003 = tf.keras.layers.Input(shape=([3]))
in0Con72258 = tf.keras.layers.Input(shape=([5]))
in0Fla7431 = tf.keras.layers.Input(shape=([3, 2]))

Max84694 = keras.layers.Maximum(name = 'Max84694', )([in0Max84694,in1Max84694])
Zer99201 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer99201', )(Max84694)
Mul83530 = keras.layers.Multiply(name = 'Mul83530', )([in0Mul83530,in1Mul83530])
Add2924 = keras.layers.Add(name = 'Add2924', )([Zer99201,Mul83530])
Res26704 = keras.layers.Reshape((2, 2), name = 'Res26704', )(Add2924)
Fla42854 = keras.layers.Flatten(name = 'Fla42854', )(Res26704)
Con168 = keras.layers.Concatenate(axis=1, name = 'Con168', )([Fla42854,in0Con168])
Dot70003 = keras.layers.Dot(axes=(1, 1), name = 'Dot70003', )([in0Dot70003,in1Dot70003])
Res31257 = keras.layers.Reshape((1, 1), name = 'Res31257', )(Dot70003)
Res1796 = keras.layers.Reshape((1, 1, 1), name = 'Res1796', )(Res31257)
Ave64796 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave64796', )(Res1796)
Res85612 = keras.layers.Reshape((1, 1), name = 'Res85612', )(Ave64796)
Fla55752 = keras.layers.Flatten(name = 'Fla55752', )(Res85612)
Con72258 = keras.layers.Concatenate(axis=1, name = 'Con72258', )([Fla55752,in0Con72258])
Fla7431 = keras.layers.Flatten(name = 'Fla7431', )(in0Fla7431)
Add20653 = keras.layers.Add(name = 'Add20653', )([Con72258,Fla7431])
Add14993 = keras.layers.Add(name = 'Add14993', )([Con168,Add20653])
model = tf.keras.models.Model(inputs=[in0Max84694,in1Max84694,in0Mul83530,in1Mul83530,in0Con168,in0Dot70003,in1Dot70003,in0Con72258,in0Fla7431], outputs=Add14993)
in0Max84694 = tf.constant([[[[0.1145, 0.8772]]]])
in1Max84694 = tf.constant([[[[0.907, 0.8165]]]])
in0Mul83530 = tf.constant([[[[0.0264, 0.7261]], [[0.1305, 0.1421]]]])
in1Mul83530 = tf.constant([[[[0.8138, 0.6516]], [[0.7771, 0.1351]]]])
in0Con168 = tf.constant([[0.2823, 0.0293]])
in0Dot70003 = tf.constant([[0.614, 0.0337, 0.6317]])
in1Dot70003 = tf.constant([[0.0893, 0.0951, 0.1907]])
in0Con72258 = tf.constant([[0.3634, 0.194, 0.15, 0.6704, 0.7738]])
in0Fla7431 = tf.constant([[[1.7326, 1.6566], [1.0924, 1.2391], [1.1121, 1.5805]]])
print (np.array2string(model.predict([in0Max84694,in1Max84694,in0Mul83530,in1Mul83530,in0Con168,in0Dot70003,in1Dot70003,in0Con72258,in0Fla7431],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add14993.png')

LMax84694 = maximum_layer([[[[[0.1145, 0.8772]]]], [[[[0.907, 0.8165]]]]], Max84694), 
LZer99201 = zero_padding2D_layer(Max84694, 1, 0, 0, 0, Zer99201), 
LMul83530 = multiply_layer([[[[[0.0264, 0.7261]], [[0.1305, 0.1421]]]], [[[[0.8138, 0.6516]], [[0.7771, 0.1351]]]]], Mul83530), 
LAdd2924 = add_layer([Zer99201,Mul83530], Add2924), 
LRes26704 = reshape_layer(Add2924, [2, 2], Res26704), 
LFla42854 = flatten_layer(Res26704, Fla42854), 
LCon168 = concatenate_layer([Fla42854,[[0.2823, 0.0293]]], 1, Con168), 
LDot70003 = dot_layer([[0.614, 0.0337, 0.6317]], [[0.0893, 0.0951, 0.1907]], 1, 1, Dot70003), 
LRes31257 = reshape_layer(Dot70003, [1, 1], Res31257), 
LRes1796 = reshape_layer(Res31257, [1, 1, 1], Res1796), 
LAve64796 = average_pooling2D_layer(Res1796, 1, 1, Ave64796), 
LRes85612 = reshape_layer(Ave64796, [1, 1], Res85612), 
LFla55752 = flatten_layer(Res85612, Fla55752), 
LCon72258 = concatenate_layer([Fla55752,[[0.3634, 0.194, 0.15, 0.6704, 0.7738]]], 1, Con72258), 
LFla7431 = flatten_layer([[[1.7326, 1.6566], [1.0924, 1.2391], [1.1121, 1.5805]]], Fla7431), 
LAdd20653 = add_layer([Con72258,Fla7431], Add20653), 
LAdd14993 = add_layer([Con168,Add20653], Add14993), 
exec_layers([LMax84694,LZer99201,LMul83530,LAdd2924,LRes26704,LFla42854,LCon168,LDot70003,LRes31257,LRes1796,LAve64796,LRes85612,LFla55752,LCon72258,LFla7431,LAdd20653,LAdd14993],["Max84694","Zer99201","Mul83530","Add2924","Res26704","Fla42854","Con168","Dot70003","Res31257","Res1796","Ave64796","Res85612","Fla55752","Con72258","Fla7431","Add20653","Add14993"],Add14993,"Add14993")

Actual (Unparsed): [[1.9325845, 2.4931268, 2.2948115, 2.2854977, 2.0648000, 2.3836000]]

Expected (Unparsed): [[1.9325845799999999,2.49312676,2.29481155,2.28549771,2.0648,2.3836000000000004]]

Actual:   [[1.9326, 2.4932, 2.2949, 2.2855, 2.0648, 2.3836]]

Expected: [[1.9326, 2.4932, 2.2949, 2.2855, 2.0648, 2.3837]]