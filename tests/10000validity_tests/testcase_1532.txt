import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo44759 = tf.keras.layers.Input(shape=([2, 2]))
in0Cro46379 = tf.keras.layers.Input(shape=([3, 4, 4, 1]))
in0Add47924 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add47924 = tf.keras.layers.Input(shape=([1, 2, 1]))

Glo44759 = keras.layers.GlobalAveragePooling1D(name = 'Glo44759', )(in0Glo44759)
Res30207 = keras.layers.Reshape((2, 1), name = 'Res30207', )(Glo44759)
Res92845 = keras.layers.Reshape((2, 1, 1), name = 'Res92845', )(Res30207)
Glo54915 = keras.layers.GlobalAveragePooling2D(name = 'Glo54915', )(Res92845)
Res97393 = keras.layers.Reshape((1, 1), name = 'Res97393', )(Glo54915)
Res89964 = keras.layers.Reshape((1, 1, 1), name = 'Res89964', )(Res97393)
Res49610 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res49610', )(Res89964)
Zer97208 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (3, 0)), name = 'Zer97208', )(Res49610)
Cro46379 = keras.layers.Cropping3D(cropping=((0, 2), (2, 1), (0, 0)), name = 'Cro46379', )(in0Cro46379)
Sub13615 = keras.layers.Subtract(name = 'Sub13615', )([Zer97208,Cro46379])
Res94979 = keras.layers.Reshape((1, 1, 4), name = 'Res94979', )(Sub13615)
Res76576 = keras.layers.Reshape((1, 4), name = 'Res76576', )(Res94979)
Add47924 = keras.layers.Add(name = 'Add47924', )([in0Add47924,in1Add47924])
Res25309 = keras.layers.Reshape((1, 2), name = 'Res25309', )(Add47924)
Dot95515 = keras.layers.Dot(axes=(1, 1), name = 'Dot95515', )([Res76576,Res25309])
model = tf.keras.models.Model(inputs=[in0Glo44759,in0Cro46379,in0Add47924,in1Add47924], outputs=Dot95515)
in0Glo44759 = tf.constant([[[1.915, 1.6879], [1.5598, 1.3866]]])
in0Cro46379 = tf.constant([[[[[1.4489], [1.6692], [1.9506], [1.6191]], [[1.5474], [1.3611], [1.6551], [1.3269]], [[1.0356], [1.6886], [1.8604], [1.1245]], [[1.4362], [1.0654], [1.8375], [1.4783]]], [[[1.4019], [1.7286], [1.9014], [1.9089]], [[1.6736], [1.4136], [1.5413], [1.2967]], [[1.7132], [1.7837], [1.2793], [1.0757]], [[1.424], [1.5213], [1.098], [1.228]]], [[[1.9202], [1.0125], [1.339], [1.1629]], [[1.1364], [1.1131], [1.8228], [1.7542]], [[1.1792], [1.5681], [1.5627], [1.0425]], [[1.712], [1.2806], [1.8552], [1.365]]]]])
in0Add47924 = tf.constant([[[[0.3401], [0.7681]]]])
in1Add47924 = tf.constant([[[[0.716], [0.9653]]]])
print (np.array2string(model.predict([in0Glo44759,in0Cro46379,in0Add47924,in1Add47924],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot95515.png')

LGlo44759 = global_average_pooling1D_layer([[[1.915, 1.6879], [1.5598, 1.3866]]], Glo44759), 
LRes30207 = reshape_layer(Glo44759, [2, 1], Res30207), 
LRes92845 = reshape_layer(Res30207, [2, 1, 1], Res92845), 
LGlo54915 = global_average_pooling2D_layer(Res92845, Glo54915), 
LRes97393 = reshape_layer(Glo54915, [1, 1], Res97393), 
LRes89964 = reshape_layer(Res97393, [1, 1, 1], Res89964), 
LRes49610 = reshape_layer(Res89964, [1, 1, 1, 1], Res49610), 
LZer97208 = zero_padding3D_layer(Res49610, 0, 0, 0, 0, 3, 0, Zer97208), 
LCro46379 = cropping3D_layer([[[[[1.4489], [1.6692], [1.9506], [1.6191]], [[1.5474], [1.3611], [1.6551], [1.3269]], [[1.0356], [1.6886], [1.8604], [1.1245]], [[1.4362], [1.0654], [1.8375], [1.4783]]], [[[1.4019], [1.7286], [1.9014], [1.9089]], [[1.6736], [1.4136], [1.5413], [1.2967]], [[1.7132], [1.7837], [1.2793], [1.0757]], [[1.424], [1.5213], [1.098], [1.228]]], [[[1.9202], [1.0125], [1.339], [1.1629]], [[1.1364], [1.1131], [1.8228], [1.7542]], [[1.1792], [1.5681], [1.5627], [1.0425]], [[1.712], [1.2806], [1.8552], [1.365]]]]], 0, 2, 2, 1, 0, 0, Cro46379), 
LSub13615 = subtract_layer(Zer97208,Cro46379, Sub13615), 
LRes94979 = reshape_layer(Sub13615, [1, 1, 4], Res94979), 
LRes76576 = reshape_layer(Res94979, [1, 4], Res76576), 
LAdd47924 = add_layer([[[[[0.3401], [0.7681]]]], [[[[0.716], [0.9653]]]]], Add47924), 
LRes25309 = reshape_layer(Add47924, [1, 2], Res25309), 
LDot95515 = dot_layer(Res76576,Res25309, 1, 1, Dot95515), 
exec_layers([LGlo44759,LRes30207,LRes92845,LGlo54915,LRes97393,LRes89964,LRes49610,LZer97208,LCro46379,LSub13615,LRes94979,LRes76576,LAdd47924,LRes25309,LDot95515],["Glo44759","Res30207","Res92845","Glo54915","Res97393","Res89964","Res49610","Zer97208","Cro46379","Sub13615","Res94979","Res76576","Add47924","Res25309","Dot95515"],Dot95515,"Dot95515")

Actual (Unparsed): [[[-1.0936971, -1.7951090], [-1.7833304, -2.9270192], [-1.9647684, -3.2248174], [0.5415944, 0.8889308]]]

Expected (Unparsed): [[[-1.09369716,-1.7951090400000003],[-1.7833304600000002,-2.9270192400000004],[-1.96476844,-3.2248173600000003],[0.5415944825000001,0.8889308550000001]]]

Actual:   [[[-1.0936, -1.7951], [-1.7833, -2.927], [-1.9647, -3.2248], [0.5416, 0.889]]]

Expected: [[[-1.0936, -1.7951], [-1.7833, -2.927], [-1.9647, -3.2248], [0.5416, 0.889]]]