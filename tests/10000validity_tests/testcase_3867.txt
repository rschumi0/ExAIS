import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Max37016 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Max37016 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in0Min30636 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Min30636 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Con49543 = tf.keras.layers.Input(shape=([2, 6]))
in0Dot71330 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot71330 = tf.keras.layers.Input(shape=([3, 3]))
in0Con88540 = tf.keras.layers.Input(shape=([1, 3, 3, 1]))
in0Mul42354 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Mul42354 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))

Max37016 = keras.layers.Maximum(name = 'Max37016', )([in0Max37016,in1Max37016])
Glo65659 = keras.layers.GlobalAveragePooling3D(name = 'Glo65659', )(Max37016)
Res14976 = keras.layers.Reshape((1, 1), name = 'Res14976', )(Glo65659)
Min30636 = keras.layers.Minimum(name = 'Min30636', )([in0Min30636,in1Min30636])
Res82962 = keras.layers.Reshape((2, 2, 2), name = 'Res82962', )(Min30636)
Con94589 = keras.layers.Conv2DTranspose(4, (1, 2),strides=(1, 1), padding='valid', name = 'Con94589', )(Res82962)
Res19848 = keras.layers.Reshape((2, 12), name = 'Res19848', )(Con94589)
Con49543 = keras.layers.Concatenate(axis=2, name = 'Con49543', )([Res19848,in0Con49543])
Dot71330 = keras.layers.Dot(axes=(2, 2), name = 'Dot71330', )([in0Dot71330,in1Dot71330])
Res31123 = keras.layers.Reshape((3, 3, 1), name = 'Res31123', )(Dot71330)
Max6344 = keras.layers.MaxPool2D(pool_size=(3, 1), name = 'Max6344', )(Res31123)
Res42725 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res42725', )(Max6344)
Zer63749 = keras.layers.ZeroPadding3D(padding=((0, 0), (0, 0), (2, 0)), name = 'Zer63749', )(Res42725)
Con88540 = keras.layers.Concatenate(axis=4, name = 'Con88540', )([Zer63749,in0Con88540])
Mul42354 = keras.layers.Multiply(name = 'Mul42354', )([in0Mul42354,in1Mul42354])
Zer96089 = keras.layers.ZeroPadding3D(padding=((0, 0), (2, 0), (1, 0)), name = 'Zer96089', )(Mul42354)
Add15328 = keras.layers.Add(name = 'Add15328', )([Con88540,Zer96089])
Res34850 = keras.layers.Reshape((1, 3, 6), name = 'Res34850', )(Add15328)
Res82589 = keras.layers.Reshape((1, 18), name = 'Res82589', )(Res34850)
Dot42628 = keras.layers.Dot(axes=(2, 2), name = 'Dot42628', )([Con49543,Res82589])
Dot31380 = keras.layers.Dot(axes=(2, 2), name = 'Dot31380', )([Res14976,Dot42628])
model = tf.keras.models.Model(inputs=[in0Max37016,in1Max37016,in0Min30636,in1Min30636,in0Con49543,in0Dot71330,in1Dot71330,in0Con88540,in0Mul42354,in1Mul42354], outputs=Dot31380)
w = model.get_layer('Con94589').get_weights() 
w[0] = np.array([[[[0.5958, 0.2695], [0.8443, 0.0331], [0.1756, 0.5777], [0.2035, 0.4455]], [[0.5879, 0.1083], [0.7813, 0.4935], [0.3939, 0.3617], [0.8093, 0.9927]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con94589').set_weights(w) 
in0Max37016 = tf.constant([[[[[0.5638]], [[0.2636]]]]])
in1Max37016 = tf.constant([[[[[0.2065]], [[0.5748]]]]])
in0Min30636 = tf.constant([[[[[0.9757, 0.4084]], [[0.8907, 0.8156]]], [[[0.8485, 0.0345]], [[0.5504, 0.6306]]]]])
in1Min30636 = tf.constant([[[[[0.4658, 0.5559]], [[0.8446, 0.3154]]], [[[0.1714, 0.2342]], [[0.8233, 0.5477]]]]])
in0Con49543 = tf.constant([[[0.2091, 0.7165, 0.5437, 0.8972, 0.6882, 0.3799], [0.1843, 0.8928, 0.3281, 0.5417, 0.7459, 0.0855]]])
in0Dot71330 = tf.constant([[[0.5116, 0.506, 0.0992], [0.6047, 0.8314, 0.2785], [0.9248, 0.1711, 0.8503]]])
in1Dot71330 = tf.constant([[[0.3009, 0.8252, 0.8544], [0.8106, 0.8762, 0.264], [0.0846, 0.6322, 0.3801]]])
in0Con88540 = tf.constant([[[[[0.4215], [0.4593], [0.6112]], [[0.9482], [0.626], [0.9351]], [[0.6904], [0.193], [0.9198]]]]])
in0Mul42354 = tf.constant([[[[[0.9316, 0.1588], [0.1378, 0.2778]]]]])
in1Mul42354 = tf.constant([[[[[0.6362, 0.811], [0.8148, 0.5892]]]]])
print (np.array2string(model.predict([in0Max37016,in1Max37016,in0Min30636,in1Min30636,in0Con49543,in0Dot71330,in1Dot71330,in0Con88540,in0Mul42354,in1Mul42354],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot31380.png')

LMax37016 = maximum_layer([[[[[[0.5638]], [[0.2636]]]]], [[[[[0.2065]], [[0.5748]]]]]], Max37016), 
LGlo65659 = global_average_pooling3D_layer(Max37016, Glo65659), 
LRes14976 = reshape_layer(Glo65659, [1, 1], Res14976), 
LMin30636 = minimum_layer([[[[[[0.9757, 0.4084]], [[0.8907, 0.8156]]], [[[0.8485, 0.0345]], [[0.5504, 0.6306]]]]], [[[[[0.4658, 0.5559]], [[0.8446, 0.3154]]], [[[0.1714, 0.2342]], [[0.8233, 0.5477]]]]]], Min30636), 
LRes82962 = reshape_layer(Min30636, [2, 2, 2], Res82962), 
LCon94589 = conv2D_transpose_layer(Res82962, 1, 2,[[[[0.5958, 0.2695], [0.8443, 0.0331], [0.1756, 0.5777], [0.2035, 0.4455]], [[0.5879, 0.1083], [0.7813, 0.4935], [0.3939, 0.3617], [0.8093, 0.9927]]]],[0, 0, 0, 0], 1, 1, false, Con94589), 
LRes19848 = reshape_layer(Con94589, [2, 12], Res19848), 
LCon49543 = concatenate_layer([Res19848,[[[0.2091, 0.7165, 0.5437, 0.8972, 0.6882, 0.3799], [0.1843, 0.8928, 0.3281, 0.5417, 0.7459, 0.0855]]]], 2, Con49543), 
LDot71330 = dot_layer([[[0.5116, 0.506, 0.0992], [0.6047, 0.8314, 0.2785], [0.9248, 0.1711, 0.8503]]], [[[0.3009, 0.8252, 0.8544], [0.8106, 0.8762, 0.264], [0.0846, 0.6322, 0.3801]]], 2, 2, Dot71330), 
LRes31123 = reshape_layer(Dot71330, [3, 3, 1], Res31123), 
LMax6344 = max_pool2D_layer(Res31123, 3, 1, Max6344), 
LRes42725 = reshape_layer(Max6344, [1, 3, 1, 1], Res42725), 
LZer63749 = zero_padding3D_layer(Res42725, 0, 0, 0, 0, 2, 0, Zer63749), 
LCon88540 = concatenate_layer([Zer63749,[[[[[0.4215], [0.4593], [0.6112]], [[0.9482], [0.626], [0.9351]], [[0.6904], [0.193], [0.9198]]]]]], 4, Con88540), 
LMul42354 = multiply_layer([[[[[[0.9316, 0.1588], [0.1378, 0.2778]]]]], [[[[[0.6362, 0.811], [0.8148, 0.5892]]]]]], Mul42354), 
LZer96089 = zero_padding3D_layer(Mul42354, 0, 0, 2, 0, 1, 0, Zer96089), 
LAdd15328 = add_layer([Con88540,Zer96089], Add15328), 
LRes34850 = reshape_layer(Add15328, [1, 3, 6], Res34850), 
LRes82589 = reshape_layer(Res34850, [1, 18], Res82589), 
LDot42628 = dot_layer(Con49543,Res82589, 2, 2, Dot42628), 
LDot31380 = dot_layer(Res14976,Dot42628, 2, 2, Dot31380), 
exec_layers([LMax37016,LGlo65659,LRes14976,LMin30636,LRes82962,LCon94589,LRes19848,LCon49543,LDot71330,LRes31123,LMax6344,LRes42725,LZer63749,LCon88540,LMul42354,LZer96089,LAdd15328,LRes34850,LRes82589,LDot42628,LDot31380],["Max37016","Glo65659","Res14976","Min30636","Res82962","Con94589","Res19848","Con49543","Dot71330","Res31123","Max6344","Res42725","Zer63749","Con88540","Mul42354","Zer96089","Add15328","Res34850","Res82589","Dot42628","Dot31380"],Dot31380,"Dot31380")

Actual (Unparsed): [[[4.1257799, 2.9651280]]]

Expected (Unparsed): [[[4.1257799814009015,2.965128037760154]]]

Actual:   [[[4.1258, 2.9652]]]

Expected: [[[4.1258, 2.9652]]]