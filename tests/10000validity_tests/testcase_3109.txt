import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo45828 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Con39697 = tf.keras.layers.Input(shape=([1, 1]))
in0Max85217 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Max85217 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Mul58488 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul58488 = tf.keras.layers.Input(shape=([2, 1, 2]))

Glo45828 = keras.layers.GlobalAveragePooling3D(name = 'Glo45828', )(in0Glo45828)
Res80412 = keras.layers.Reshape((1, 1), name = 'Res80412', )(Glo45828)
Glo45045 = keras.layers.GlobalMaxPool1D(name = 'Glo45045', )(Res80412)
Res2443 = keras.layers.Reshape((1, 1), name = 'Res2443', )(Glo45045)
Con39697 = keras.layers.Concatenate(axis=2, name = 'Con39697', )([Res2443,in0Con39697])
Max85217 = keras.layers.Maximum(name = 'Max85217', )([in0Max85217,in1Max85217])
Res64646 = keras.layers.Reshape((1, 1, 2), name = 'Res64646', )(Max85217)
Zer6621 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer6621', )(Res64646)
Mul58488 = keras.layers.Multiply(name = 'Mul58488', )([in0Mul58488,in1Mul58488])
Max43419 = keras.layers.Maximum(name = 'Max43419', )([Zer6621,Mul58488])
Res59967 = keras.layers.Reshape((2, 2), name = 'Res59967', )(Max43419)
Dot84980 = keras.layers.Dot(axes=(2, 2), name = 'Dot84980', )([Con39697,Res59967])
model = tf.keras.models.Model(inputs=[in0Glo45828,in0Con39697,in0Max85217,in1Max85217,in0Mul58488,in1Mul58488], outputs=Dot84980)
in0Glo45828 = tf.constant([[[[[1.9533], [1.3171]]], [[[1.8453], [1.6256]]]]])
in0Con39697 = tf.constant([[[0.3259]]])
in0Max85217 = tf.constant([[[[[0.6767], [0.357]]]]])
in1Max85217 = tf.constant([[[[[0.6761], [0.541]]]]])
in0Mul58488 = tf.constant([[[[0.5993, 0.1666]], [[0.7123, 0.5508]]]])
in1Mul58488 = tf.constant([[[[0.6134, 0.7327]], [[0.4448, 0.8523]]]])
print (np.array2string(model.predict([in0Glo45828,in0Con39697,in0Max85217,in1Max85217,in0Mul58488,in1Mul58488],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot84980.png')

LGlo45828 = global_average_pooling3D_layer([[[[[1.9533], [1.3171]]], [[[1.8453], [1.6256]]]]], Glo45828), 
LRes80412 = reshape_layer(Glo45828, [1, 1], Res80412), 
LGlo45045 = global_max_pool1D_layer(Res80412, Glo45045), 
LRes2443 = reshape_layer(Glo45045, [1, 1], Res2443), 
LCon39697 = concatenate_layer([Res2443,[[[0.3259]]]], 2, Con39697), 
LMax85217 = maximum_layer([[[[[[0.6767], [0.357]]]]], [[[[[0.6761], [0.541]]]]]], Max85217), 
LRes64646 = reshape_layer(Max85217, [1, 1, 2], Res64646), 
LZer6621 = zero_padding2D_layer(Res64646, 1, 0, 0, 0, Zer6621), 
LMul58488 = multiply_layer([[[[[0.5993, 0.1666]], [[0.7123, 0.5508]]]], [[[[0.6134, 0.7327]], [[0.4448, 0.8523]]]]], Mul58488), 
LMax43419 = maximum_layer([Zer6621,Mul58488], Max43419), 
LRes59967 = reshape_layer(Max43419, [2, 2], Res59967), 
LDot84980 = dot_layer(Con39697,Res59967, 2, 2, Dot84980), 
exec_layers([LGlo45828,LRes80412,LGlo45045,LRes2443,LCon39697,LMax85217,LRes64646,LZer6621,LMul58488,LMax43419,LRes59967,LDot84980],["Glo45828","Res80412","Glo45045","Res2443","Con39697","Max85217","Res64646","Zer6621","Mul58488","Max43419","Res59967","Dot84980"],Dot84980,"Dot84980")

Actual (Unparsed): [[[0.6593253, 1.3167713]]]

Expected (Unparsed): [[[0.6593252706895,1.3167713275000001]]]

Actual:   [[[0.6594, 1.3168]]]

Expected: [[[0.6594, 1.3168]]]