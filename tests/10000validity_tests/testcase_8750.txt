import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave34029 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave34029 = tf.keras.layers.Input(shape=([2, 1]))

Ave34029 = keras.layers.Average(name = 'Ave34029', )([in0Ave34029,in1Ave34029])
Res72186 = keras.layers.Reshape((2, 1, 1), name = 'Res72186', )(Ave34029)
Res69370 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res69370', )(Res72186)
Up_77852 = keras.layers.UpSampling3D(size=(2, 2, 1), name = 'Up_77852', )(Res69370)
model = tf.keras.models.Model(inputs=[in0Ave34029,in1Ave34029], outputs=Up_77852)
in0Ave34029 = tf.constant([[[0.7283], [0.8353]]])
in1Ave34029 = tf.constant([[[0.2214], [0.5357]]])
print (np.array2string(model.predict([in0Ave34029,in1Ave34029],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Up_77852.png')

LAve34029 = average_layer([[[[0.7283], [0.8353]]], [[[0.2214], [0.5357]]]], Ave34029), 
LRes72186 = reshape_layer(Ave34029, [2, 1, 1], Res72186), 
LRes69370 = reshape_layer(Res72186, [2, 1, 1, 1], Res69370), 
LUp_77852 = up_sampling3D_layer(Res69370, 2, 2, 1, Up_77852), 
exec_layers([LAve34029,LRes72186,LRes69370,LUp_77852],["Ave34029","Res72186","Res69370","Up_77852"],Up_77852,"Up_77852")

Actual (Unparsed): [[[[[0.4748500]], [[0.4748500]]], [[[0.4748500]], [[0.4748500]]], [[[0.6855000]], [[0.6855000]]], [[[0.6855000]], [[0.6855000]]]]]

Expected (Unparsed): [[[[[0.47485]],[[0.47485]]],[[[0.47485]],[[0.47485]]],[[[0.6855]],[[0.6855]]],[[[0.6855]],[[0.6855]]]]]

Actual:   [[[[[0.4749]], [[0.4749]]], [[[0.4749]], [[0.4749]]], [[[0.6855]], [[0.6855]]], [[[0.6855]], [[0.6855]]]]]

Expected: [[[[[0.4749]], [[0.4749]]], [[[0.4749]], [[0.4749]]], [[[0.6855]], [[0.6855]]], [[[0.6855]], [[0.6855]]]]]