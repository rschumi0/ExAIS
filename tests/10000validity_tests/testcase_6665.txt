import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot54754 = tf.keras.layers.Input(shape=([2]))
in1Dot54754 = tf.keras.layers.Input(shape=([2]))
in0Dot60105 = tf.keras.layers.Input(shape=([3]))
in1Dot60105 = tf.keras.layers.Input(shape=([3]))

Dot54754 = keras.layers.Dot(axes=(1, 1), name = 'Dot54754', )([in0Dot54754,in1Dot54754])
Res2013 = keras.layers.Reshape((1, 1), name = 'Res2013', )(Dot54754)
Glo86070 = keras.layers.GlobalAveragePooling1D(name = 'Glo86070', )(Res2013)
Res79131 = keras.layers.Reshape((1, 1), name = 'Res79131', )(Glo86070)
Dot60105 = keras.layers.Dot(axes=(1, 1), name = 'Dot60105', )([in0Dot60105,in1Dot60105])
Res60091 = keras.layers.Reshape((1, 1), name = 'Res60091', )(Dot60105)
Zer36529 = keras.layers.ZeroPadding1D(padding=((1, 1)), name = 'Zer36529', )(Res60091)
Dot5723 = keras.layers.Dot(axes=(2, 2), name = 'Dot5723', )([Res79131,Zer36529])
Res81719 = keras.layers.Reshape((1, 3, 1), name = 'Res81719', )(Dot5723)
Res49921 = keras.layers.Reshape((1, 3, 1, 1), name = 'Res49921', )(Res81719)
Glo25906 = keras.layers.GlobalMaxPool3D(name = 'Glo25906', )(Res49921)
model = tf.keras.models.Model(inputs=[in0Dot54754,in1Dot54754,in0Dot60105,in1Dot60105], outputs=Glo25906)
in0Dot54754 = tf.constant([[0.8861, 0.983]])
in1Dot54754 = tf.constant([[0.0338, 0.1616]])
in0Dot60105 = tf.constant([[0.1838, 0.4842, 0.9908]])
in1Dot60105 = tf.constant([[0.4488, 0.7092, 0.2376]])
print (np.array2string(model.predict([in0Dot54754,in1Dot54754,in0Dot60105,in1Dot60105],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo25906.png')

LDot54754 = dot_layer([[0.8861, 0.983]], [[0.0338, 0.1616]], 1, 1, Dot54754), 
LRes2013 = reshape_layer(Dot54754, [1, 1], Res2013), 
LGlo86070 = global_average_pooling1D_layer(Res2013, Glo86070), 
LRes79131 = reshape_layer(Glo86070, [1, 1], Res79131), 
LDot60105 = dot_layer([[0.1838, 0.4842, 0.9908]], [[0.4488, 0.7092, 0.2376]], 1, 1, Dot60105), 
LRes60091 = reshape_layer(Dot60105, [1, 1], Res60091), 
LZer36529 = zero_padding1D_layer(Res60091, 1, 1, Zer36529), 
LDot5723 = dot_layer(Res79131,Zer36529, 2, 2, Dot5723), 
LRes81719 = reshape_layer(Dot5723, [1, 3, 1], Res81719), 
LRes49921 = reshape_layer(Res81719, [1, 3, 1, 1], Res49921), 
LGlo25906 = global_max_pool3D_layer(Res49921, Glo25906), 
exec_layers([LDot54754,LRes2013,LGlo86070,LRes79131,LDot60105,LRes60091,LZer36529,LDot5723,LRes81719,LRes49921,LGlo25906],["Dot54754","Res2013","Glo86070","Res79131","Dot60105","Res60091","Zer36529","Dot5723","Res81719","Res49921","Glo25906"],Glo25906,"Glo25906")

Actual (Unparsed): [[0.1248551]]

Expected (Unparsed): [[0.12485506327651678]]

Actual:   [[0.1249]]

Expected: [[0.1249]]