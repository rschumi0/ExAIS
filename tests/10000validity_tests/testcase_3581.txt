import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave39827 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in1Ave39827 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))

Ave39827 = keras.layers.Average(name = 'Ave39827', )([in0Ave39827,in1Ave39827])
Con42961 = keras.layers.Conv3DTranspose(2, (2, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con42961', )(Ave39827)
model = tf.keras.models.Model(inputs=[in0Ave39827,in1Ave39827], outputs=Con42961)
w = model.get_layer('Con42961').get_weights() 
w[0] = np.array([[[[[0.1404, 0.2335], [0.9495, 0.0464]]]], [[[[0.8976, 0.4605], [0.7831, 0.3699]]]]])
w[1] = np.array([0, 0])
model.get_layer('Con42961').set_weights(w) 
in0Ave39827 = tf.constant([[[[[0.0616, 0.6283]]], [[[0.0625, 0.2479]]]]])
in1Ave39827 = tf.constant([[[[[0.933, 0.6464]]], [[[0.4832, 0.8432]]]]])
print (np.array2string(model.predict([in0Ave39827,in1Ave39827],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con42961.png')

LAve39827 = average_layer([[[[[[0.0616, 0.6283]]], [[[0.0625, 0.2479]]]]], [[[[[0.933, 0.6464]]], [[[0.4832, 0.8432]]]]]], Ave39827), 
LCon42961 = conv3D_transpose_layer(Ave39827, 2, 1, 1,[[[[[0.1404, 0.2335], [0.9495, 0.0464]]]], [[[[0.8976, 0.4605], [0.7831, 0.3699]]]]],[0, 0], 1, 1, 1, false, Con42961), 
exec_layers([LAve39827,LCon42961],["Ave39827","Con42961"],Con42961,"Con42961")

Actual (Unparsed): [[[[[0.2186421, 0.5017594]]], [[[0.9055702, 0.9095760]]], [[[0.4961359, 0.4154678]]]]]

Expected (Unparsed): [[[[[0.218642145,0.50175939]]],[[[0.9055702200000001,0.9095759900000001]]],[[[0.496135935,0.41546778000000006]]]]]

Actual:   [[[[[0.2187, 0.5018]]], [[[0.9056, 0.9096]]], [[[0.4962, 0.4155]]]]]

Expected: [[[[[0.2187, 0.5018]]], [[[0.9056, 0.9096]]], [[[0.4962, 0.4155]]]]]