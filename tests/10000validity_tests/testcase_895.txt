import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Add80388 = tf.keras.layers.Input(shape=([2, 2, 1]))
in1Add80388 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Min35787 = tf.keras.layers.Input(shape=([2, 1]))
in1Min35787 = tf.keras.layers.Input(shape=([2, 1]))
in0Con40460 = tf.keras.layers.Input(shape=([3]))
in0Con86714 = tf.keras.layers.Input(shape=([4, 1]))
in0Ave7521 = tf.keras.layers.Input(shape=([2, 1]))
in0Con62147 = tf.keras.layers.Input(shape=([1, 1]))
in0Add9248 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add9248 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Ave57506 = tf.keras.layers.Input(shape=([1, 1]))
in0Con15501 = tf.keras.layers.Input(shape=([1, 1]))

Add80388 = keras.layers.Add(name = 'Add80388', )([in0Add80388,in1Add80388])
Res34064 = keras.layers.Reshape((2, 2), name = 'Res34064', )(Add80388)
Fla71647 = keras.layers.Flatten(name = 'Fla71647', )(Res34064)
Min35787 = keras.layers.Minimum(name = 'Min35787', )([in0Min35787,in1Min35787])
Glo1894 = keras.layers.GlobalAveragePooling1D(name = 'Glo1894', )(Min35787)
Con40460 = keras.layers.Concatenate(axis=1, name = 'Con40460', )([Glo1894,in0Con40460])
Sub33342 = keras.layers.Subtract(name = 'Sub33342', )([Fla71647,Con40460])
Res15022 = keras.layers.Reshape((4, 1), name = 'Res15022', )(Sub33342)
Con86714 = keras.layers.Concatenate(axis=2, name = 'Con86714', )([Res15022,in0Con86714])
Ave7521 = keras.layers.AveragePooling1D(pool_size=(1), strides=(5), padding='same', name = 'Ave7521', )(in0Ave7521)
Con62147 = keras.layers.Concatenate(axis=2, name = 'Con62147', )([Ave7521,in0Con62147])
Add9248 = keras.layers.Add(name = 'Add9248', )([in0Add9248,in1Add9248])
Res34855 = keras.layers.Reshape((1, 2), name = 'Res34855', )(Add9248)
Ave57506 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave57506', )(in0Ave57506)
Cro97365 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro97365', )(Ave57506)
Con15501 = keras.layers.Concatenate(axis=2, name = 'Con15501', )([Cro97365,in0Con15501])
Sub40654 = keras.layers.Subtract(name = 'Sub40654', )([Res34855,Con15501])
Mul17328 = keras.layers.Multiply(name = 'Mul17328', )([Con62147,Sub40654])
Zer13970 = keras.layers.ZeroPadding1D(padding=((3, 0)), name = 'Zer13970', )(Mul17328)
Add19896 = keras.layers.Add(name = 'Add19896', )([Con86714,Zer13970])
model = tf.keras.models.Model(inputs=[in0Add80388,in1Add80388,in0Min35787,in1Min35787,in0Con40460,in0Con86714,in0Ave7521,in0Con62147,in0Add9248,in1Add9248,in0Ave57506,in0Con15501], outputs=Add19896)
in0Add80388 = tf.constant([[[[0.9037], [0.9283]], [[0.2668], [0.0151]]]])
in1Add80388 = tf.constant([[[[0.5532], [0.6237]], [[0.7072], [0.0486]]]])
in0Min35787 = tf.constant([[[0.0808], [0.1894]]])
in1Min35787 = tf.constant([[[0.7199], [0.3361]]])
in0Con40460 = tf.constant([[0.8312, 0.9494, 0.8583]])
in0Con86714 = tf.constant([[[0.9949], [0.4586], [0.3656], [0.0667]]])
in0Ave7521 = tf.constant([[[1.9101], [1.3688]]])
in0Con62147 = tf.constant([[[0.176]]])
in0Add9248 = tf.constant([[[[0.3305], [0.2301]]]])
in1Add9248 = tf.constant([[[[0.9902], [0.7709]]]])
in0Ave57506 = tf.constant([[[1.4133]]])
in0Con15501 = tf.constant([[[0.4769]]])
print (np.array2string(model.predict([in0Add80388,in1Add80388,in0Min35787,in1Min35787,in0Con40460,in0Con86714,in0Ave7521,in0Con62147,in0Add9248,in1Add9248,in0Ave57506,in0Con15501],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Add19896.png')

LAdd80388 = add_layer([[[[[0.9037], [0.9283]], [[0.2668], [0.0151]]]], [[[[0.5532], [0.6237]], [[0.7072], [0.0486]]]]], Add80388), 
LRes34064 = reshape_layer(Add80388, [2, 2], Res34064), 
LFla71647 = flatten_layer(Res34064, Fla71647), 
LMin35787 = minimum_layer([[[[0.0808], [0.1894]]], [[[0.7199], [0.3361]]]], Min35787), 
LGlo1894 = global_average_pooling1D_layer(Min35787, Glo1894), 
LCon40460 = concatenate_layer([Glo1894,[[0.8312, 0.9494, 0.8583]]], 1, Con40460), 
LSub33342 = subtract_layer(Fla71647,Con40460, Sub33342), 
LRes15022 = reshape_layer(Sub33342, [4, 1], Res15022), 
LCon86714 = concatenate_layer([Res15022,[[[0.9949], [0.4586], [0.3656], [0.0667]]]], 2, Con86714), 
LAve7521 = average_pooling1D_layer([[[1.9101], [1.3688]]], 1, 5, true, Ave7521), 
LCon62147 = concatenate_layer([Ave7521,[[[0.176]]]], 2, Con62147), 
LAdd9248 = add_layer([[[[[0.3305], [0.2301]]]], [[[[0.9902], [0.7709]]]]], Add9248), 
LRes34855 = reshape_layer(Add9248, [1, 2], Res34855), 
LAve57506 = average_pooling1D_layer([[[1.4133]]], 1, Ave57506), 
LCro97365 = cropping1D_layer(Ave57506, 0, 0, Cro97365), 
LCon15501 = concatenate_layer([Cro97365,[[[0.4769]]]], 2, Con15501), 
LSub40654 = subtract_layer(Res34855,Con15501, Sub40654), 
LMul17328 = multiply_layer([Con62147,Sub40654], Mul17328), 
LZer13970 = zero_padding1D_layer(Mul17328, 3, 0, Zer13970), 
LAdd19896 = add_layer([Con86714,Zer13970], Add19896), 
exec_layers([LAdd80388,LRes34064,LFla71647,LMin35787,LGlo1894,LCon40460,LSub33342,LRes15022,LCon86714,LAve7521,LCon62147,LAdd9248,LRes34855,LAve57506,LCro97365,LCon15501,LSub40654,LMul17328,LZer13970,LAdd19896],["Add80388","Res34064","Fla71647","Min35787","Glo1894","Con40460","Sub33342","Res15022","Con86714","Ave7521","Con62147","Add9248","Res34855","Ave57506","Cro97365","Con15501","Sub40654","Mul17328","Zer13970","Add19896"],Add19896,"Add19896")

Actual (Unparsed): [[[1.3218000, 0.9949000], [0.7208000, 0.4586000], [0.0246000, 0.3656000], [-0.9714753, 0.1589416]]]

Expected (Unparsed): [[[1.3218,0.9949],[0.7208,0.4586],[0.024599999999999955,0.3656],[-0.9714752600000001,0.15894160000000002]]]

Actual:   [[[1.3218, 0.9949], [0.7208, 0.4586], [0.0246, 0.3656], [-0.9714, 0.159]]]

Expected: [[[1.3218, 0.9949], [0.7208, 0.4586], [0.0246, 0.3656], [-0.9714, 0.159]]]