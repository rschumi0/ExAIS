import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc61183 = tf.keras.layers.Input(shape=([1, 1]))
in0Dot50757 = tf.keras.layers.Input(shape=([2]))
in1Dot50757 = tf.keras.layers.Input(shape=([2]))

Loc61183 = keras.layers.LocallyConnected1D(3, (1),strides=(1), name = 'Loc61183', )(in0Loc61183)
Res814 = keras.layers.Reshape((1, 3, 1), name = 'Res814', )(Loc61183)
Glo82471 = keras.layers.GlobalMaxPool2D(name = 'Glo82471', )(Res814)
Res7795 = keras.layers.Reshape((1, 1), name = 'Res7795', )(Glo82471)
Glo33594 = keras.layers.GlobalMaxPool1D(name = 'Glo33594', )(Res7795)
Dot50757 = keras.layers.Dot(axes=(1, 1), name = 'Dot50757', )([in0Dot50757,in1Dot50757])
Max48428 = keras.layers.Maximum(name = 'Max48428', )([Glo33594,Dot50757])
Res72006 = keras.layers.Reshape((1, 1), name = 'Res72006', )(Max48428)
Res18036 = keras.layers.Reshape((1, 1, 1), name = 'Res18036', )(Res72006)
Res55420 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res55420', )(Res18036)
Glo69927 = keras.layers.GlobalAveragePooling3D(name = 'Glo69927', )(Res55420)
model = tf.keras.models.Model(inputs=[in0Loc61183,in0Dot50757,in1Dot50757], outputs=Glo69927)
w = model.get_layer('Loc61183').get_weights() 
w[0] = np.array([[[0.7423, 0.9841, 0.486]]])
w[1] = np.array([[0, 0, 0]])
model.get_layer('Loc61183').set_weights(w) 
in0Loc61183 = tf.constant([[[0.6196]]])
in0Dot50757 = tf.constant([[0.1458, 0.8434]])
in1Dot50757 = tf.constant([[0.8114, 0.3519]])
print (np.array2string(model.predict([in0Loc61183,in0Dot50757,in1Dot50757],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo69927.png')

LLoc61183 = locally_connected1D_layer([[[0.6196]]], 1,[[[0.7423, 0.9841, 0.486]]],[[0, 0, 0]], 1, Loc61183), 
LRes814 = reshape_layer(Loc61183, [1, 3, 1], Res814), 
LGlo82471 = global_max_pool2D_layer(Res814, Glo82471), 
LRes7795 = reshape_layer(Glo82471, [1, 1], Res7795), 
LGlo33594 = global_max_pool1D_layer(Res7795, Glo33594), 
LDot50757 = dot_layer([[0.1458, 0.8434]], [[0.8114, 0.3519]], 1, 1, Dot50757), 
LMax48428 = maximum_layer([Glo33594,Dot50757], Max48428), 
LRes72006 = reshape_layer(Max48428, [1, 1], Res72006), 
LRes18036 = reshape_layer(Res72006, [1, 1, 1], Res18036), 
LRes55420 = reshape_layer(Res18036, [1, 1, 1, 1], Res55420), 
LGlo69927 = global_average_pooling3D_layer(Res55420, Glo69927), 
exec_layers([LLoc61183,LRes814,LGlo82471,LRes7795,LGlo33594,LDot50757,LMax48428,LRes72006,LRes18036,LRes55420,LGlo69927],["Loc61183","Res814","Glo82471","Res7795","Glo33594","Dot50757","Max48428","Res72006","Res18036","Res55420","Glo69927"],Glo69927,"Glo69927")

Actual (Unparsed): [[0.6097484]]

Expected (Unparsed): [[0.60974836]]

Actual:   [[0.6098]]

Expected: [[0.6098]]