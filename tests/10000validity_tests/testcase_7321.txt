import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo53732 = tf.keras.layers.Input(shape=([2, 2]))

Glo53732 = keras.layers.GlobalMaxPool1D(name = 'Glo53732', )(in0Glo53732)
Res30893 = keras.layers.Reshape((2, 1), name = 'Res30893', )(Glo53732)
Glo11575 = keras.layers.GlobalAveragePooling1D(name = 'Glo11575', )(Res30893)
Res91020 = keras.layers.Reshape((1, 1), name = 'Res91020', )(Glo11575)
GRU78361 = keras.layers.GRU(3,reset_after=False, recurrent_activation='sigmoid', name = 'GRU78361', )(Res91020)
Res72055 = keras.layers.Reshape((3, 1), name = 'Res72055', )(GRU78361)
Res22633 = keras.layers.Reshape((3, 1, 1), name = 'Res22633', )(Res72055)
Glo4518 = keras.layers.GlobalAveragePooling2D(name = 'Glo4518', )(Res22633)
model = tf.keras.models.Model(inputs=[in0Glo53732], outputs=Glo4518)
w = model.get_layer('GRU78361').get_weights() 
w[0] = np.array([[10, 5, 6, 5, 2, 1, 1, 9, 8]])
w[1] = np.array([[6, 2, 1, 2, 3, 7, 7, 10, 5], [10, 4, 8, 5, 7, 5, 10, 3, 6], [10, 4, 8, 1, 9, 5, 9, 10, 7]])
w[2] = np.array([9, 2, 3, 3, 7, 7, 1, 4, 9])
model.get_layer('GRU78361').set_weights(w) 
in0Glo53732 = tf.constant([[[1.2103, 1.4466], [1.3506, 1.7795]]])
print (np.array2string(model.predict([in0Glo53732],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Glo4518.png')

LGlo53732 = global_max_pool1D_layer([[[1.2103, 1.4466], [1.3506, 1.7795]]], Glo53732), 
LRes30893 = reshape_layer(Glo53732, [2, 1], Res30893), 
LGlo11575 = global_average_pooling1D_layer(Res30893, Glo11575), 
LRes91020 = reshape_layer(Glo11575, [1, 1], Res91020), 
LGRU78361 = gru_layer(Res91020,[[10, 5, 6, 5, 2, 1, 1, 9, 8]],[[6, 2, 1, 2, 3, 7, 7, 10, 5], [10, 4, 8, 5, 7, 5, 10, 3, 6], [10, 4, 8, 1, 9, 5, 9, 10, 7]],[9, 2, 3, 3, 7, 7, 1, 4, 9], false, GRU78361), 
LRes72055 = reshape_layer(GRU78361, [3, 1], Res72055), 
LRes22633 = reshape_layer(Res72055, [3, 1, 1], Res22633), 
LGlo4518 = global_average_pooling2D_layer(Res22633, Glo4518), 
exec_layers([LGlo53732,LRes30893,LGlo11575,LRes91020,LGRU78361,LRes72055,LRes22633,LGlo4518],["Glo53732","Res30893","Glo11575","Res91020","GRU78361","Res72055","Res22633","Glo4518"],Glo4518,"Glo4518")

Actual (Unparsed): [[0.0000194]]

Expected (Unparsed): [[1.940826263687657e-5]]

Actual:   [[0.0001]]

Expected: [[0.0001]]