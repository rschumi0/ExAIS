import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave99642 = tf.keras.layers.Input(shape=([2, 2]))
in0Sub17706 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub17706 = tf.keras.layers.Input(shape=([2, 2]))
in0Con50487 = tf.keras.layers.Input(shape=([3]))

Ave99642 = keras.layers.AveragePooling1D(pool_size=(1), strides=(1), padding='valid', name = 'Ave99642', )(in0Ave99642)
Fla18238 = keras.layers.Flatten(name = 'Fla18238', )(Ave99642)
Sub17706 = keras.layers.Subtract(name = 'Sub17706', )([in0Sub17706,in1Sub17706])
Res14999 = keras.layers.Reshape((2, 2, 1), name = 'Res14999', )(Sub17706)
Cro40080 = keras.layers.Cropping2D(cropping=((0, 1), (1, 0)), name = 'Cro40080', )(Res14999)
Res10714 = keras.layers.Reshape((1, 1), name = 'Res10714', )(Cro40080)
Glo69029 = keras.layers.GlobalMaxPool1D(name = 'Glo69029', )(Res10714)
Con50487 = keras.layers.Concatenate(axis=1, name = 'Con50487', )([Glo69029,in0Con50487])
Mul85311 = keras.layers.Multiply(name = 'Mul85311', )([Fla18238,Con50487])
model = tf.keras.models.Model(inputs=[in0Ave99642,in0Sub17706,in1Sub17706,in0Con50487], outputs=Mul85311)
in0Ave99642 = tf.constant([[[1.4929, 1.8251], [1.4877, 1.8816]]])
in0Sub17706 = tf.constant([[[0.2121, 0.0603], [0.7158, 0.1007]]])
in1Sub17706 = tf.constant([[[0.3311, 0.9259], [0.5525, 0.985]]])
in0Con50487 = tf.constant([[0.4334, 0.5956, 0.903]])
print (np.array2string(model.predict([in0Ave99642,in0Sub17706,in1Sub17706,in0Con50487],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul85311.png')

LAve99642 = average_pooling1D_layer([[[1.4929, 1.8251], [1.4877, 1.8816]]], 1, 1, false, Ave99642), 
LFla18238 = flatten_layer(Ave99642, Fla18238), 
LSub17706 = subtract_layer([[[0.2121, 0.0603], [0.7158, 0.1007]]], [[[0.3311, 0.9259], [0.5525, 0.985]]], Sub17706), 
LRes14999 = reshape_layer(Sub17706, [2, 2, 1], Res14999), 
LCro40080 = cropping2D_layer(Res14999, 0, 1, 1, 0, Cro40080), 
LRes10714 = reshape_layer(Cro40080, [1, 1], Res10714), 
LGlo69029 = global_max_pool1D_layer(Res10714, Glo69029), 
LCon50487 = concatenate_layer([Glo69029,[[0.4334, 0.5956, 0.903]]], 1, Con50487), 
LMul85311 = multiply_layer([Fla18238,Con50487], Mul85311), 
exec_layers([LAve99642,LFla18238,LSub17706,LRes14999,LCro40080,LRes10714,LGlo69029,LCon50487,LMul85311],["Ave99642","Fla18238","Sub17706","Res14999","Cro40080","Res10714","Glo69029","Con50487","Mul85311"],Mul85311,"Mul85311")

Actual (Unparsed): [[-1.2922542, 0.7909983, 0.8860741, 1.6990848]]

Expected (Unparsed): [[-1.2922542399999999,0.79099834,0.8860741200000001,1.6990848]]

Actual:   [[-1.2922, 0.791, 0.8861, 1.6991]]

Expected: [[-1.2922, 0.791, 0.8861, 1.6991]]