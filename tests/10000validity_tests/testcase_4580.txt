import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Sub74576 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub74576 = tf.keras.layers.Input(shape=([2, 2]))
in0Con31084 = tf.keras.layers.Input(shape=([2, 2]))
in0Max14367 = tf.keras.layers.Input(shape=([1, 2, 2]))
in1Max14367 = tf.keras.layers.Input(shape=([1, 2, 2]))

Sub74576 = keras.layers.Subtract(name = 'Sub74576', )([in0Sub74576,in1Sub74576])
Con31084 = keras.layers.Concatenate(axis=2, name = 'Con31084', )([Sub74576,in0Con31084])
Max14367 = keras.layers.Maximum(name = 'Max14367', )([in0Max14367,in1Max14367])
Res81541 = keras.layers.Reshape((1, 4), name = 'Res81541', )(Max14367)
Cro23765 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro23765', )(Res81541)
Zer12610 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer12610', )(Cro23765)
Sub44060 = keras.layers.Subtract(name = 'Sub44060', )([Con31084,Zer12610])
model = tf.keras.models.Model(inputs=[in0Sub74576,in1Sub74576,in0Con31084,in0Max14367,in1Max14367], outputs=Sub44060)
in0Sub74576 = tf.constant([[[0.5119, 0.5702], [0.9652, 0.3775]]])
in1Sub74576 = tf.constant([[[0.8635, 0.6061], [0.0807, 0.142]]])
in0Con31084 = tf.constant([[[0.5491, 0.5473], [0.3664, 0.1823]]])
in0Max14367 = tf.constant([[[[0.8358, 0.1019], [0.0232, 0.3007]]]])
in1Max14367 = tf.constant([[[[0.5942, 0.0871], [0.0728, 0.7965]]]])
print (np.array2string(model.predict([in0Sub74576,in1Sub74576,in0Con31084,in0Max14367,in1Max14367],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub44060.png')

LSub74576 = subtract_layer([[[0.5119, 0.5702], [0.9652, 0.3775]]], [[[0.8635, 0.6061], [0.0807, 0.142]]], Sub74576), 
LCon31084 = concatenate_layer([Sub74576,[[[0.5491, 0.5473], [0.3664, 0.1823]]]], 2, Con31084), 
LMax14367 = maximum_layer([[[[[0.8358, 0.1019], [0.0232, 0.3007]]]], [[[[0.5942, 0.0871], [0.0728, 0.7965]]]]], Max14367), 
LRes81541 = reshape_layer(Max14367, [1, 4], Res81541), 
LCro23765 = cropping1D_layer(Res81541, 0, 0, Cro23765), 
LZer12610 = zero_padding1D_layer(Cro23765, 1, 0, Zer12610), 
LSub44060 = subtract_layer(Con31084,Zer12610, Sub44060), 
exec_layers([LSub74576,LCon31084,LMax14367,LRes81541,LCro23765,LZer12610,LSub44060],["Sub74576","Con31084","Max14367","Res81541","Cro23765","Zer12610","Sub44060"],Sub44060,"Sub44060")

Actual (Unparsed): [[[-0.3516000, -0.0359000, 0.5491000, 0.5473000], [0.0487000, 0.1336000, 0.2936000, -0.6142000]]]

Expected (Unparsed): [[[-0.3516,-0.03589999999999993,0.5491,0.5473],[0.048699999999999966,0.1336,0.29359999999999997,-0.6142]]]

Actual:   [[[-0.3516, -0.0359, 0.5491, 0.5473], [0.0487, 0.1336, 0.2936, -0.6142]]]

Expected: [[[-0.3516, -0.0358, 0.5491, 0.5473], [0.0487, 0.1336, 0.2936, -0.6142]]]