import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Lay48246 = tf.keras.layers.Input(shape=([4, 1, 3]))
in0Loc55152 = tf.keras.layers.Input(shape=([1, 1, 2]))

Lay48246 = keras.layers.LayerNormalization(axis=3, epsilon=2.0719964690161357, name = 'Lay48246', )(in0Lay48246)
Res47432 = keras.layers.Reshape((4, 3), name = 'Res47432', )(Lay48246)
Loc55152 = keras.layers.LocallyConnected2D(3, (1, 1),strides=(1, 1), name = 'Loc55152', )(in0Loc55152)
Res92978 = keras.layers.Reshape((1, 3), name = 'Res92978', )(Loc55152)
Dot70540 = keras.layers.Dot(axes=(2, 2), name = 'Dot70540', )([Res47432,Res92978])
model = tf.keras.models.Model(inputs=[in0Lay48246,in0Loc55152], outputs=Dot70540)
w = model.get_layer('Loc55152').get_weights() 
w[0] = np.array([[[0.7933, 0.8052, 0.1148], [0.7968, 0.3122, 0.6302]]])
w[1] = np.array([[[0, 0, 0]]])
model.get_layer('Loc55152').set_weights(w) 
in0Lay48246 = tf.constant([[[[1.6424, 1.4701, 1.5872]], [[1.0315, 1.2344, 1.4524]], [[1.6424, 1.3725, 1.1373]], [[1.7702, 1.9, 1.8453]]]])
in0Loc55152 = tf.constant([[[[0.8103, 0.2477]]]])
print (np.array2string(model.predict([in0Lay48246,in0Loc55152],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Dot70540.png')

LLay48246 = layer_normalization_layer([[[[1.6424, 1.4701, 1.5872]], [[1.0315, 1.2344, 1.4524]], [[1.6424, 1.3725, 1.1373]], [[1.7702, 1.9, 1.8453]]]], 3, 2.0719964690161357, Lay48246), 
LRes47432 = reshape_layer(Lay48246, [4, 3], Res47432), 
LLoc55152 = locally_connected2D_layer([[[[0.8103, 0.2477]]]], 1, 1,[[[0.7933, 0.8052, 0.1148], [0.7968, 0.3122, 0.6302]]],[[[0, 0, 0]]], 1, 1, Loc55152), 
LRes92978 = reshape_layer(Loc55152, [1, 3], Res92978), 
LDot70540 = dot_layer(Res47432,Res92978, 2, 2, Dot70540), 
exec_layers([LLay48246,LRes47432,LLoc55152,LRes92978,LDot70540],["Lay48246","Res47432","Loc55152","Res92978","Dot70540"],Dot70540,"Dot70540")

Actual (Unparsed): [[[-0.0010728], [-0.0864470], [0.1011784], [-0.0075036]]]

Expected (Unparsed): [[[-0.0010728386532879372],[-0.08644704080340179],[0.10117836713241601],[-0.00750356866620426]]]

Actual:   [[[-0.001], [-0.0864], [0.1012], [-0.0075]]]

Expected: [[[-0.001], [-0.0864], [0.1012], [-0.0075]]]