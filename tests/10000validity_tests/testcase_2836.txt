import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Mul696 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Mul696 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in0Con25823 = tf.keras.layers.Input(shape=([2]))
in0Up_418 = tf.keras.layers.Input(shape=([3, 2, 3]))
in0Max92950 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Max92950 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Bat88999 = tf.keras.layers.Input(shape=([3, 4]))
in0Con57478 = tf.keras.layers.Input(shape=([5]))

Mul696 = keras.layers.Multiply(name = 'Mul696', )([in0Mul696,in1Mul696])
Res27673 = keras.layers.Reshape((2, 1, 2), name = 'Res27673', )(Mul696)
Res96135 = keras.layers.Reshape((2, 2), name = 'Res96135', )(Res27673)
Fla48008 = keras.layers.Flatten(name = 'Fla48008', )(Res96135)
Con25823 = keras.layers.Concatenate(axis=1, name = 'Con25823', )([Fla48008,in0Con25823])
Up_418 = keras.layers.UpSampling2D(size=(2, 1), name = 'Up_418', )(in0Up_418)
Res76525 = keras.layers.Reshape((6, 6), name = 'Res76525', )(Up_418)
Max56703 = keras.layers.MaxPool1D(pool_size=(4), name = 'Max56703', )(Res76525)
Per51957 = keras.layers.Permute((1,2), name = 'Per51957',)(Max56703)
Fla41091 = keras.layers.Flatten(name = 'Fla41091', )(Per51957)
Max92950 = keras.layers.Maximum(name = 'Max92950', )([in0Max92950,in1Max92950])
Res44763 = keras.layers.Reshape((2, 2, 2), name = 'Res44763', )(Max92950)
Res75623 = keras.layers.Reshape((2, 4), name = 'Res75623', )(Res44763)
Zer84121 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer84121', )(Res75623)
Bat88999 = keras.layers.BatchNormalization(axis=1, epsilon=0.8193781852725879,  name = 'Bat88999', )(in0Bat88999)
Mul32316 = keras.layers.Multiply(name = 'Mul32316', )([Zer84121,Bat88999])
Res26218 = keras.layers.Reshape((3, 4, 1), name = 'Res26218', )(Mul32316)
Res6616 = keras.layers.Reshape((3, 4, 1, 1), name = 'Res6616', )(Res26218)
Glo24640 = keras.layers.GlobalAveragePooling3D(name = 'Glo24640', )(Res6616)
Con57478 = keras.layers.Concatenate(axis=1, name = 'Con57478', )([Glo24640,in0Con57478])
Max34450 = keras.layers.Maximum(name = 'Max34450', )([Fla41091,Con57478])
Mul61934 = keras.layers.Multiply(name = 'Mul61934', )([Con25823,Max34450])
model = tf.keras.models.Model(inputs=[in0Mul696,in1Mul696,in0Con25823,in0Up_418,in0Max92950,in1Max92950,in0Bat88999,in0Con57478], outputs=Mul61934)
w = model.get_layer('Bat88999').get_weights() 
w[0] = np.array([0.2011, 0.9163, 0.6553])
w[1] = np.array([0.1574, 0.7631, 0.0817])
w[2] = np.array([0.9223, 0.3828, 0.43])
w[3] = np.array([0.9256, 0.83, 0.067])
model.get_layer('Bat88999').set_weights(w) 
in0Mul696 = tf.constant([[[[[0.0119], [0.0312]]], [[[0.5888], [0.3666]]]]])
in1Mul696 = tf.constant([[[[[0.5641], [0.5121]]], [[[0.0402], [0.2635]]]]])
in0Con25823 = tf.constant([[0.5182, 0.4527]])
in0Up_418 = tf.constant([[[[1.2507, 1.9485, 1.1779], [1.6946, 1.4285, 1.032]], [[1.1182, 1.4834, 1.6017], [1.7903, 1.5486, 1.1406]], [[1.4829, 1.5655, 1.6841], [1.9228, 1.5809, 1.1056]]]])
in0Max92950 = tf.constant([[[[[0.0619, 0.3224]], [[0.6782, 0.1774]]], [[[0.5402, 0.4916]], [[0.9161, 0.2134]]]]])
in1Max92950 = tf.constant([[[[[0.5397, 0.6631]], [[0.453, 0.7696]]], [[[0.6537, 0.8469]], [[0.8286, 0.9872]]]]])
in0Bat88999 = tf.constant([[[1.2388, 1.9518, 1.2307, 1.8313], [1.4957, 1.0126, 1.8357, 1.6054], [1.8497, 1.3847, 1.2748, 1.1332]]])
in0Con57478 = tf.constant([[0.8866, 0.551, 0.2917, 0.1303, 0.8136]])
print (np.array2string(model.predict([in0Mul696,in1Mul696,in0Con25823,in0Up_418,in0Max92950,in1Max92950,in0Bat88999,in0Con57478],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul61934.png')

LMul696 = multiply_layer([[[[[[0.0119], [0.0312]]], [[[0.5888], [0.3666]]]]], [[[[[0.5641], [0.5121]]], [[[0.0402], [0.2635]]]]]], Mul696), 
LRes27673 = reshape_layer(Mul696, [2, 1, 2], Res27673), 
LRes96135 = reshape_layer(Res27673, [2, 2], Res96135), 
LFla48008 = flatten_layer(Res96135, Fla48008), 
LCon25823 = concatenate_layer([Fla48008,[[0.5182, 0.4527]]], 1, Con25823), 
LUp_418 = up_sampling2D_layer([[[[1.2507, 1.9485, 1.1779], [1.6946, 1.4285, 1.032]], [[1.1182, 1.4834, 1.6017], [1.7903, 1.5486, 1.1406]], [[1.4829, 1.5655, 1.6841], [1.9228, 1.5809, 1.1056]]]], 2, 1, Up_418), 
LRes76525 = reshape_layer(Up_418, [6, 6], Res76525), 
LMax56703 = max_pool1D_layer(Res76525, 4, Max56703), 
LPer51957 = permute_layer(Max56703, 1,2, Per51957), 
LFla41091 = flatten_layer(Per51957, Fla41091), 
LMax92950 = maximum_layer([[[[[[0.0619, 0.3224]], [[0.6782, 0.1774]]], [[[0.5402, 0.4916]], [[0.9161, 0.2134]]]]], [[[[[0.5397, 0.6631]], [[0.453, 0.7696]]], [[[0.6537, 0.8469]], [[0.8286, 0.9872]]]]]], Max92950), 
LRes44763 = reshape_layer(Max92950, [2, 2, 2], Res44763), 
LRes75623 = reshape_layer(Res44763, [2, 4], Res75623), 
LZer84121 = zero_padding1D_layer(Res75623, 1, 0, Zer84121), 
LBat88999 = batch_normalization_layer([[[1.2388, 1.9518, 1.2307, 1.8313], [1.4957, 1.0126, 1.8357, 1.6054], [1.8497, 1.3847, 1.2748, 1.1332]]], 1, 0.8193781852725879, [0.2011, 0.9163, 0.6553], [0.1574, 0.7631, 0.0817], [0.9223, 0.3828, 0.43], [0.9256, 0.83, 0.067], Bat88999), 
LMul32316 = multiply_layer([Zer84121,Bat88999], Mul32316), 
LRes26218 = reshape_layer(Mul32316, [3, 4, 1], Res26218), 
LRes6616 = reshape_layer(Res26218, [3, 4, 1, 1], Res6616), 
LGlo24640 = global_average_pooling3D_layer(Res6616, Glo24640), 
LCon57478 = concatenate_layer([Glo24640,[[0.8866, 0.551, 0.2917, 0.1303, 0.8136]]], 1, Con57478), 
LMax34450 = maximum_layer([Fla41091,Con57478], Max34450), 
LMul61934 = multiply_layer([Con25823,Max34450], Mul61934), 
exec_layers([LMul696,LRes27673,LRes96135,LFla48008,LCon25823,LUp_418,LRes76525,LMax56703,LPer51957,LFla41091,LMax92950,LRes44763,LRes75623,LZer84121,LBat88999,LMul32316,LRes26218,LRes6616,LGlo24640,LCon57478,LMax34450,LMul61934],["Mul696","Res27673","Res96135","Fla48008","Con25823","Up_418","Res76525","Max56703","Per51957","Fla41091","Max92950","Res44763","Res75623","Zer84121","Bat88999","Mul32316","Res26218","Res6616","Glo24640","Con57478","Max34450","Mul61934"],Mul61934,"Mul61934")

Actual (Unparsed): [[0.0083957, 0.0311322, 0.0379119, 0.1729414, 0.8024845, 0.5163496]]

Expected (Unparsed): [[0.008395686453,0.031132197719999994,0.03791185459199999,0.17294136873,0.8024845199999999,0.5163496200000001]]

Actual:   [[0.0084, 0.0312, 0.038, 0.173, 0.8025, 0.5164]]

Expected: [[0.0084, 0.0312, 0.038, 0.173, 0.8025, 0.5164]]