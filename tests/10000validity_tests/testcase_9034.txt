import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave63198 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Add33622 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))
in1Add33622 = tf.keras.layers.Input(shape=([2, 2, 1, 1]))

Ave63198 = keras.layers.AveragePooling2D(pool_size=(1, 1), name = 'Ave63198', )(in0Ave63198)
Res29986 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res29986', )(Ave63198)
Glo89772 = keras.layers.GlobalMaxPool3D(name = 'Glo89772', )(Res29986)
Den44888 = keras.layers.Dense(1,name = 'Den44888', )(Glo89772)
Res62342 = keras.layers.Reshape((1, 1), name = 'Res62342', )(Den44888)
Res23952 = keras.layers.Reshape((1, 1, 1), name = 'Res23952', )(Res62342)
Res23620 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res23620', )(Res23952)
Zer53199 = keras.layers.ZeroPadding3D(padding=((1, 0), (1, 0), (0, 0)), name = 'Zer53199', )(Res23620)
Add33622 = keras.layers.Add(name = 'Add33622', )([in0Add33622,in1Add33622])
Mul61951 = keras.layers.Multiply(name = 'Mul61951', )([Zer53199,Add33622])
model = tf.keras.models.Model(inputs=[in0Ave63198,in0Add33622,in1Add33622], outputs=Mul61951)
w = model.get_layer('Den44888').get_weights() 
w[0] = np.array([[0.878]])
w[1] = np.array([0.0607])
model.get_layer('Den44888').set_weights(w) 
in0Ave63198 = tf.constant([[[[1.8905]]]])
in0Add33622 = tf.constant([[[[[0.096]], [[0.6872]]], [[[0.5651]], [[0.9261]]]]])
in1Add33622 = tf.constant([[[[[0.6132]], [[0.389]]], [[[0.6519]], [[0.4167]]]]])
print (np.array2string(model.predict([in0Ave63198,in0Add33622,in1Add33622],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Mul61951.png')

LAve63198 = average_pooling2D_layer([[[[1.8905]]]], 1, 1, Ave63198), 
LRes29986 = reshape_layer(Ave63198, [1, 1, 1, 1], Res29986), 
LGlo89772 = global_max_pool3D_layer(Res29986, Glo89772), 
LDen44888 = dense_layer(Glo89772, [[0.878]],[0.0607], Den44888), 
LRes62342 = reshape_layer(Den44888, [1, 1], Res62342), 
LRes23952 = reshape_layer(Res62342, [1, 1, 1], Res23952), 
LRes23620 = reshape_layer(Res23952, [1, 1, 1, 1], Res23620), 
LZer53199 = zero_padding3D_layer(Res23620, 1, 0, 1, 0, 0, 0, Zer53199), 
LAdd33622 = add_layer([[[[[[0.096]], [[0.6872]]], [[[0.5651]], [[0.9261]]]]], [[[[[0.6132]], [[0.389]]], [[[0.6519]], [[0.4167]]]]]], Add33622), 
LMul61951 = multiply_layer([Zer53199,Add33622], Mul61951), 
exec_layers([LAve63198,LRes29986,LGlo89772,LDen44888,LRes62342,LRes23952,LRes23620,LZer53199,LAdd33622,LMul61951],["Ave63198","Res29986","Glo89772","Den44888","Res62342","Res23952","Res23620","Zer53199","Add33622","Mul61951"],Mul61951,"Mul61951")

Actual (Unparsed): [[[[[0.0000000]], [[0.0000000]]], [[[0.0000000]], [[2.3103666]]]]]

Expected (Unparsed): [[[[[0.0]],[[0.0]]],[[[0.0]],[[2.3103666252]]]]]

Actual:   [[[[[0]], [[0]]], [[[0]], [[2.3104]]]]]

Expected: [[[[[0]], [[0]]], [[[0]], [[2.3104]]]]]