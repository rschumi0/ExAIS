import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave93988 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in1Ave93988 = tf.keras.layers.Input(shape=([1, 1, 2, 2]))
in0Max29933 = tf.keras.layers.Input(shape=([2, 1]))
in1Max29933 = tf.keras.layers.Input(shape=([2, 1]))
in0Con29084 = tf.keras.layers.Input(shape=([3]))

Ave93988 = keras.layers.Average(name = 'Ave93988', )([in0Ave93988,in1Ave93988])
Res26487 = keras.layers.Reshape((1, 1, 4), name = 'Res26487', )(Ave93988)
Dep70770 = keras.layers.DepthwiseConv2D((1, 1),strides=(1, 1), padding='valid', name = 'Dep70770', )(Res26487)
Res99308 = keras.layers.Reshape((1, 4), name = 'Res99308', )(Dep70770)
Glo94310 = keras.layers.GlobalAveragePooling1D(name = 'Glo94310', )(Res99308)
Max29933 = keras.layers.Maximum(name = 'Max29933', )([in0Max29933,in1Max29933])
Res84012 = keras.layers.Reshape((2, 1, 1), name = 'Res84012', )(Max29933)
Glo25937 = keras.layers.GlobalAveragePooling2D(name = 'Glo25937', )(Res84012)
Con29084 = keras.layers.Concatenate(axis=1, name = 'Con29084', )([Glo25937,in0Con29084])
Max38751 = keras.layers.Maximum(name = 'Max38751', )([Glo94310,Con29084])
model = tf.keras.models.Model(inputs=[in0Ave93988,in1Ave93988,in0Max29933,in1Max29933,in0Con29084], outputs=Max38751)
w = model.get_layer('Dep70770').get_weights() 
w[0] = np.array([[[[0.996], [0.6768], [0.9574], [0.9504]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Dep70770').set_weights(w) 
in0Ave93988 = tf.constant([[[[[0.1845, 0.2938], [0.7432, 0.08]]]]])
in1Ave93988 = tf.constant([[[[[0.9421, 0.1867], [0.4908, 0.6077]]]]])
in0Max29933 = tf.constant([[[0.39], [0.0334]]])
in1Max29933 = tf.constant([[[0.3277], [0.2556]]])
in0Con29084 = tf.constant([[0.3394, 0.9705, 0.7653]])
print (np.array2string(model.predict([in0Ave93988,in1Ave93988,in0Max29933,in1Max29933,in0Con29084],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max38751.png')

LAve93988 = average_layer([[[[[[0.1845, 0.2938], [0.7432, 0.08]]]]], [[[[[0.9421, 0.1867], [0.4908, 0.6077]]]]]], Ave93988), 
LRes26487 = reshape_layer(Ave93988, [1, 1, 4], Res26487), 
LDep70770 = depthwise_conv2D_layer(Res26487, 1, 1,[[[[0.996], [0.6768], [0.9574], [0.9504]]]],[0, 0, 0, 0], 1, 1, false, Dep70770), 
LRes99308 = reshape_layer(Dep70770, [1, 4], Res99308), 
LGlo94310 = global_average_pooling1D_layer(Res99308, Glo94310), 
LMax29933 = maximum_layer([[[[0.39], [0.0334]]], [[[0.3277], [0.2556]]]], Max29933), 
LRes84012 = reshape_layer(Max29933, [2, 1, 1], Res84012), 
LGlo25937 = global_average_pooling2D_layer(Res84012, Glo25937), 
LCon29084 = concatenate_layer([Glo25937,[[0.3394, 0.9705, 0.7653]]], 1, Con29084), 
LMax38751 = maximum_layer([Glo94310,Con29084], Max38751), 
exec_layers([LAve93988,LRes26487,LDep70770,LRes99308,LGlo94310,LMax29933,LRes84012,LGlo25937,LCon29084,LMax38751],["Ave93988","Res26487","Dep70770","Res99308","Glo94310","Max29933","Res84012","Glo25937","Con29084","Max38751"],Max38751,"Max38751")

Actual (Unparsed): [[0.5610468, 0.3394000, 0.9705000, 0.7653000]]

Expected (Unparsed): [[0.5610468000000001,0.3394,0.9705,0.7653]]

Actual:   [[0.5611, 0.3394, 0.9705, 0.7653]]

Expected: [[0.5611, 0.3394, 0.9705, 0.7653]]