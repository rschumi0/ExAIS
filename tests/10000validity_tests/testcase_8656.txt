import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave44062 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in1Ave44062 = tf.keras.layers.Input(shape=([1, 2, 1, 2]))
in0Add43566 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in1Add43566 = tf.keras.layers.Input(shape=([2, 2, 1, 2]))
in0Add56367 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Add56367 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con73068 = tf.keras.layers.Input(shape=([2, 2, 1]))

Ave44062 = keras.layers.Average(name = 'Ave44062', )([in0Ave44062,in1Ave44062])
Res82402 = keras.layers.Reshape((1, 2, 2), name = 'Res82402', )(Ave44062)
Res21714 = keras.layers.Reshape((1, 4), name = 'Res21714', )(Res82402)
Zer38720 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer38720', )(Res21714)
Add43566 = keras.layers.Add(name = 'Add43566', )([in0Add43566,in1Add43566])
Res20673 = keras.layers.Reshape((2, 2, 2), name = 'Res20673', )(Add43566)
Add56367 = keras.layers.Add(name = 'Add56367', )([in0Add56367,in1Add56367])
Zer92488 = keras.layers.ZeroPadding2D(padding=((1, 0), (0, 0)), name = 'Zer92488', )(Add56367)
Con73068 = keras.layers.Concatenate(axis=3, name = 'Con73068', )([Zer92488,in0Con73068])
Min46396 = keras.layers.Minimum(name = 'Min46396', )([Res20673,Con73068])
Res54966 = keras.layers.Reshape((2, 4), name = 'Res54966', )(Min46396)
Max67151 = keras.layers.MaxPool1D(pool_size=(2), strides=(1), padding='same', name = 'Max67151', )(Res54966)
Ave99835 = keras.layers.Average(name = 'Ave99835', )([Zer38720,Max67151])
model = tf.keras.models.Model(inputs=[in0Ave44062,in1Ave44062,in0Add43566,in1Add43566,in0Add56367,in1Add56367,in0Con73068], outputs=Ave99835)
in0Ave44062 = tf.constant([[[[[0.2131, 0.6622]], [[0.1633, 0.5009]]]]])
in1Ave44062 = tf.constant([[[[[0.2344, 0.9168]], [[0.0631, 0.9554]]]]])
in0Add43566 = tf.constant([[[[[0.2857, 0.5227]], [[0.188, 0.7178]]], [[[0.8936, 0.8479]], [[0.9576, 0.827]]]]])
in1Add43566 = tf.constant([[[[[0.7129, 0.8901]], [[0.0017, 0.954]]], [[[0.6255, 0.295]], [[0.9582, 0.2817]]]]])
in0Add56367 = tf.constant([[[[0.3182], [0.7311]]]])
in1Add56367 = tf.constant([[[[0.4098], [0.6281]]]])
in0Con73068 = tf.constant([[[[0.1676], [0.7014]], [[0.6499], [0.8435]]]])
print (np.array2string(model.predict([in0Ave44062,in1Ave44062,in0Add43566,in1Add43566,in0Add56367,in1Add56367,in0Con73068],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Ave99835.png')

LAve44062 = average_layer([[[[[[0.2131, 0.6622]], [[0.1633, 0.5009]]]]], [[[[[0.2344, 0.9168]], [[0.0631, 0.9554]]]]]], Ave44062), 
LRes82402 = reshape_layer(Ave44062, [1, 2, 2], Res82402), 
LRes21714 = reshape_layer(Res82402, [1, 4], Res21714), 
LZer38720 = zero_padding1D_layer(Res21714, 1, 0, Zer38720), 
LAdd43566 = add_layer([[[[[[0.2857, 0.5227]], [[0.188, 0.7178]]], [[[0.8936, 0.8479]], [[0.9576, 0.827]]]]], [[[[[0.7129, 0.8901]], [[0.0017, 0.954]]], [[[0.6255, 0.295]], [[0.9582, 0.2817]]]]]], Add43566), 
LRes20673 = reshape_layer(Add43566, [2, 2, 2], Res20673), 
LAdd56367 = add_layer([[[[[0.3182], [0.7311]]]], [[[[0.4098], [0.6281]]]]], Add56367), 
LZer92488 = zero_padding2D_layer(Add56367, 1, 0, 0, 0, Zer92488), 
LCon73068 = concatenate_layer([Zer92488,[[[[0.1676], [0.7014]], [[0.6499], [0.8435]]]]], 3, Con73068), 
LMin46396 = minimum_layer([Res20673,Con73068], Min46396), 
LRes54966 = reshape_layer(Min46396, [2, 4], Res54966), 
LMax67151 = max_pool1D_layer(Res54966, 2, 1, true, Max67151), 
LAve99835 = average_layer([Zer38720,Max67151], Ave99835), 
exec_layers([LAve44062,LRes82402,LRes21714,LZer38720,LAdd43566,LRes20673,LAdd56367,LZer92488,LCon73068,LMin46396,LRes54966,LMax67151,LAve99835],["Ave44062","Res82402","Res21714","Zer38720","Add43566","Res20673","Add56367","Zer92488","Con73068","Min46396","Res54966","Max67151","Ave99835"],Ave99835,"Ave99835")

Actual (Unparsed): [[[0.3640000, 0.3249500, 0.6796000, 0.4217500], [0.4758750, 0.7197000, 0.7362000, 0.7858250]]]

Expected (Unparsed): [[[0.364,0.32495,0.6796,0.42175],[0.475875,0.7197,0.7362,0.785825]]]

Actual:   [[[0.364, 0.325, 0.6796, 0.4218], [0.4759, 0.7197, 0.7362, 0.7859]]]

Expected: [[[0.364, 0.325, 0.6796, 0.4218], [0.4759, 0.7197, 0.7362, 0.7859]]]