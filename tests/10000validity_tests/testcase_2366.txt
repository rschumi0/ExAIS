import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Loc88683 = tf.keras.layers.Input(shape=([2, 2, 1]))
in0Glo41163 = tf.keras.layers.Input(shape=([2, 1]))
in0Con51843 = tf.keras.layers.Input(shape=([7]))

Loc88683 = keras.layers.LocallyConnected2D(4, (2, 1),strides=(1, 1), name = 'Loc88683', )(in0Loc88683)
Res46269 = keras.layers.Reshape((1, 8), name = 'Res46269', )(Loc88683)
Fla66832 = keras.layers.Flatten(name = 'Fla66832', )(Res46269)
Glo41163 = keras.layers.GlobalAveragePooling1D(name = 'Glo41163', )(in0Glo41163)
Res27709 = keras.layers.Reshape((1, 1), name = 'Res27709', )(Glo41163)
Res96203 = keras.layers.Reshape((1, 1, 1), name = 'Res96203', )(Res27709)
Glo17467 = keras.layers.GlobalAveragePooling2D(name = 'Glo17467', )(Res96203)
Con51843 = keras.layers.Concatenate(axis=1, name = 'Con51843', )([Glo17467,in0Con51843])
Max36505 = keras.layers.Maximum(name = 'Max36505', )([Fla66832,Con51843])
model = tf.keras.models.Model(inputs=[in0Loc88683,in0Glo41163,in0Con51843], outputs=Max36505)
w = model.get_layer('Loc88683').get_weights() 
w[0] = np.array([[[0.6215, 0.5414, 0.727, 0.5199], [0.3789, 0.5533, 0.4999, 0.0535]], [[0.1291, 0.6862, 0.7041, 0.6055], [0.9834, 0.1805, 0.4722, 0.1392]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc88683').set_weights(w) 
in0Loc88683 = tf.constant([[[[0.6809], [0.5738]], [[0.2922], [0.4038]]]])
in0Glo41163 = tf.constant([[[1.0597], [1.5745]]])
in0Con51843 = tf.constant([[0.6741, 0.7696, 0.0701, 0.4777, 0.2682, 0.7589, 0.2428]])
print (np.array2string(model.predict([in0Loc88683,in0Glo41163,in0Con51843],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Max36505.png')

LLoc88683 = locally_connected2D_layer([[[[0.6809], [0.5738]], [[0.2922], [0.4038]]]], 2, 1,[[[0.6215, 0.5414, 0.727, 0.5199], [0.3789, 0.5533, 0.4999, 0.0535]], [[0.1291, 0.6862, 0.7041, 0.6055], [0.9834, 0.1805, 0.4722, 0.1392]]],[[[0, 0, 0, 0], [0, 0, 0, 0]]], 1, 1, Loc88683), 
LRes46269 = reshape_layer(Loc88683, [1, 8], Res46269), 
LFla66832 = flatten_layer(Res46269, Fla66832), 
LGlo41163 = global_average_pooling1D_layer([[[1.0597], [1.5745]]], Glo41163), 
LRes27709 = reshape_layer(Glo41163, [1, 1], Res27709), 
LRes96203 = reshape_layer(Res27709, [1, 1, 1], Res96203), 
LGlo17467 = global_average_pooling2D_layer(Res96203, Glo17467), 
LCon51843 = concatenate_layer([Glo17467,[[0.6741, 0.7696, 0.0701, 0.4777, 0.2682, 0.7589, 0.2428]]], 1, Con51843), 
LMax36505 = maximum_layer([Fla66832,Con51843], Max36505), 
exec_layers([LLoc88683,LRes46269,LFla66832,LGlo41163,LRes27709,LRes96203,LGlo17467,LCon51843,LMax36505],["Loc88683","Res46269","Fla66832","Glo41163","Res27709","Res96203","Glo17467","Con51843","Max36505"],Max36505,"Max36505")

Actual (Unparsed): [[1.3171000, 0.6741000, 0.7696000, 0.3696326, 0.4777000, 0.4666275, 0.7589000, 0.4036449]]

Expected (Unparsed): [[1.3171,0.6741,0.7696,0.36963261,0.4777,0.46662746,0.7589,0.40364486]]

Actual:   [[1.3171, 0.6741, 0.7696, 0.3697, 0.4777, 0.4667, 0.7589, 0.4037]]

Expected: [[1.3171, 0.6741, 0.7696, 0.3697, 0.4777, 0.4667, 0.7589, 0.4037]]