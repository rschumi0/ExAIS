import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Min44889 = tf.keras.layers.Input(shape=([2, 1, 1]))
in1Min44889 = tf.keras.layers.Input(shape=([2, 1, 1]))
in0Mul78488 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Mul78488 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in0Min93680 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Min93680 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Mul67593 = tf.keras.layers.Input(shape=([2, 2, 2]))
in1Mul67593 = tf.keras.layers.Input(shape=([2, 2, 2]))
in0Max55697 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))
in1Max55697 = tf.keras.layers.Input(shape=([2, 1, 2, 1]))

Min44889 = keras.layers.Minimum(name = 'Min44889', )([in0Min44889,in1Min44889])
Res635 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res635', )(Min44889)
Zer6185 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (1, 0)), name = 'Zer6185', )(Res635)
Mul78488 = keras.layers.Multiply(name = 'Mul78488', )([in0Mul78488,in1Mul78488])
Res57611 = keras.layers.Reshape((1, 1, 2), name = 'Res57611', )(Mul78488)
Res25819 = keras.layers.Reshape((1, 2), name = 'Res25819', )(Res57611)
Min93680 = keras.layers.Minimum(name = 'Min93680', )([in0Min93680,in1Min93680])
Res12543 = keras.layers.Reshape((2, 2), name = 'Res12543', )(Min93680)
Dot51118 = keras.layers.Dot(axes=(2, 2), name = 'Dot51118', )([Res25819,Res12543])
Res56707 = keras.layers.Reshape((1, 2, 1), name = 'Res56707', )(Dot51118)
Res10150 = keras.layers.Reshape((1, 2, 1, 1), name = 'Res10150', )(Res56707)
Zer20967 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (1, 0)), name = 'Zer20967', )(Res10150)
Mul67593 = keras.layers.Multiply(name = 'Mul67593', )([in0Mul67593,in1Mul67593])
Res67854 = keras.layers.Reshape((2, 2, 2, 1), name = 'Res67854', )(Mul67593)
Max55697 = keras.layers.Maximum(name = 'Max55697', )([in0Max55697,in1Max55697])
Zer40721 = keras.layers.ZeroPadding3D(padding=((0, 0), (1, 0), (0, 0)), name = 'Zer40721', )(Max55697)
Max36191 = keras.layers.Maximum(name = 'Max36191', )([Res67854,Zer40721])
Ave72071 = keras.layers.Average(name = 'Ave72071', )([Zer20967,Max36191])
Sub91932 = keras.layers.Subtract(name = 'Sub91932', )([Zer6185,Ave72071])
model = tf.keras.models.Model(inputs=[in0Min44889,in1Min44889,in0Mul78488,in1Mul78488,in0Min93680,in1Min93680,in0Mul67593,in1Mul67593,in0Max55697,in1Max55697], outputs=Sub91932)
in0Min44889 = tf.constant([[[[0.5894]], [[0.7245]]]])
in1Min44889 = tf.constant([[[[0.7577]], [[0.2135]]]])
in0Mul78488 = tf.constant([[[[[0.9303], [0.5142]]]]])
in1Mul78488 = tf.constant([[[[[0.5366], [0.1849]]]]])
in0Min93680 = tf.constant([[[[0.138, 0.9766]], [[0.861, 0.1116]]]])
in1Min93680 = tf.constant([[[[0.7974, 0.2756]], [[0.8413, 0.51]]]])
in0Mul67593 = tf.constant([[[[0.317, 0.9828], [0.7183, 0.3074]], [[0.7487, 0.7601], [0.0618, 0.7828]]]])
in1Mul67593 = tf.constant([[[[0.9863, 0.4196], [0.5685, 0.472]], [[0.3331, 0.814], [0.7682, 0.4258]]]])
in0Max55697 = tf.constant([[[[[0.0759], [0.6991]]], [[[0.7411], [0.6626]]]]])
in1Max55697 = tf.constant([[[[[0.886], [0.182]]], [[[0.7643], [0.3915]]]]])
print (np.array2string(model.predict([in0Min44889,in1Min44889,in0Mul78488,in1Mul78488,in0Min93680,in1Min93680,in0Mul67593,in1Mul67593,in0Max55697,in1Max55697],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Sub91932.png')

LMin44889 = minimum_layer([[[[[0.5894]], [[0.7245]]]], [[[[0.7577]], [[0.2135]]]]], Min44889), 
LRes635 = reshape_layer(Min44889, [2, 1, 1, 1], Res635), 
LZer6185 = zero_padding3D_layer(Res635, 0, 0, 1, 0, 1, 0, Zer6185), 
LMul78488 = multiply_layer([[[[[[0.9303], [0.5142]]]]], [[[[[0.5366], [0.1849]]]]]], Mul78488), 
LRes57611 = reshape_layer(Mul78488, [1, 1, 2], Res57611), 
LRes25819 = reshape_layer(Res57611, [1, 2], Res25819), 
LMin93680 = minimum_layer([[[[[0.138, 0.9766]], [[0.861, 0.1116]]]], [[[[0.7974, 0.2756]], [[0.8413, 0.51]]]]], Min93680), 
LRes12543 = reshape_layer(Min93680, [2, 2], Res12543), 
LDot51118 = dot_layer(Res25819,Res12543, 2, 2, Dot51118), 
LRes56707 = reshape_layer(Dot51118, [1, 2, 1], Res56707), 
LRes10150 = reshape_layer(Res56707, [1, 2, 1, 1], Res10150), 
LZer20967 = zero_padding3D_layer(Res10150, 1, 0, 0, 0, 1, 0, Zer20967), 
LMul67593 = multiply_layer([[[[[0.317, 0.9828], [0.7183, 0.3074]], [[0.7487, 0.7601], [0.0618, 0.7828]]]], [[[[0.9863, 0.4196], [0.5685, 0.472]], [[0.3331, 0.814], [0.7682, 0.4258]]]]], Mul67593), 
LRes67854 = reshape_layer(Mul67593, [2, 2, 2, 1], Res67854), 
LMax55697 = maximum_layer([[[[[[0.0759], [0.6991]]], [[[0.7411], [0.6626]]]]], [[[[[0.886], [0.182]]], [[[0.7643], [0.3915]]]]]], Max55697), 
LZer40721 = zero_padding3D_layer(Max55697, 0, 0, 1, 0, 0, 0, Zer40721), 
LMax36191 = maximum_layer([Res67854,Zer40721], Max36191), 
LAve72071 = average_layer([Zer20967,Max36191], Ave72071), 
LSub91932 = subtract_layer(Zer6185,Ave72071, Sub91932), 
exec_layers([LMin44889,LRes635,LZer6185,LMul78488,LRes57611,LRes25819,LMin93680,LRes12543,LDot51118,LRes56707,LRes10150,LZer20967,LMul67593,LRes67854,LMax55697,LZer40721,LMax36191,LAve72071,LSub91932],["Min44889","Res635","Zer6185","Mul78488","Res57611","Res25819","Min93680","Res12543","Dot51118","Res56707","Res10150","Zer20967","Mul67593","Res67854","Max55697","Zer40721","Max36191","Ave72071","Sub91932"],Sub91932,"Sub91932")

Actual (Unparsed): [[[[[-0.1563285], [-0.2061914]], [[-0.4430000], [0.2398500]]], [[[-0.1246960], [-0.3569068]], [[-0.3821500], [-0.3330933]]]]]

Expected (Unparsed): [[[[[-0.15632854999999998],[-0.20619143999999998]],[[-0.443],[0.23985]]],[[[-0.12469598500000001],[-0.356906844544]],[[-0.38215],[-0.33309326830099995]]]]]

Actual:   [[[[[-0.1563], [-0.2061]], [[-0.443], [0.2399]]], [[[-0.1246], [-0.3569]], [[-0.3821], [-0.333]]]]]

Expected: [[[[[-0.1563], [-0.2061]], [[-0.443], [0.2399]]], [[[-0.1246], [-0.3569]], [[-0.3821], [-0.333]]]]]