import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ELU4796 = tf.keras.layers.Input(shape=([2, 1, 2]))
in0Mul79452 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))
in1Mul79452 = tf.keras.layers.Input(shape=([1, 1, 2, 1]))

ELU4796 = keras.layers.ELU(alpha=-6.455322424866159, name = 'ELU4796', input_shape=(2, 1, 2))(in0ELU4796)
Zer84348 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer84348', )(ELU4796)
Mul79452 = keras.layers.Multiply(name = 'Mul79452', )([in0Mul79452,in1Mul79452])
Res45809 = keras.layers.Reshape((1, 1, 2), name = 'Res45809', )(Mul79452)
Zer46025 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer46025', )(Res45809)
Add75849 = keras.layers.Add(name = 'Add75849', )([Zer84348,Zer46025])
Res42775 = keras.layers.Reshape((3, 6), name = 'Res42775', )(Add75849)
Fla3510 = keras.layers.Flatten(name = 'Fla3510', )(Res42775)
Res60369 = keras.layers.Reshape((18, 1), name = 'Res60369', )(Fla3510)
Per16212 = keras.layers.Permute((1,2), name = 'Per16212',)(Res60369)
model = tf.keras.models.Model(inputs=[in0ELU4796,in0Mul79452,in1Mul79452], outputs=Per16212)
in0ELU4796 = tf.constant([[[[0.4838, 0.2766]], [[0.7136, 0.0626]]]])
in0Mul79452 = tf.constant([[[[[0.074], [0.5603]]]]])
in1Mul79452 = tf.constant([[[[[0.4791], [0.2528]]]]])
print (np.array2string(model.predict([in0ELU4796,in0Mul79452,in1Mul79452],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Per16212.png')

LELU4796 = elu_layer([[[[0.4838, 0.2766]], [[0.7136, 0.0626]]]], -6.455322424866159, ELU4796), 
LZer84348 = zero_padding2D_layer(ELU4796, 1, 0, 2, 0, Zer84348), 
LMul79452 = multiply_layer([[[[[[0.074], [0.5603]]]]], [[[[[0.4791], [0.2528]]]]]], Mul79452), 
LRes45809 = reshape_layer(Mul79452, [1, 1, 2], Res45809), 
LZer46025 = zero_padding2D_layer(Res45809, 1, 1, 1, 1, Zer46025), 
LAdd75849 = add_layer([Zer84348,Zer46025], Add75849), 
LRes42775 = reshape_layer(Add75849, [3, 6], Res42775), 
LFla3510 = flatten_layer(Res42775, Fla3510), 
LRes60369 = reshape_layer(Fla3510, [18, 1], Res60369), 
LPer16212 = permute_layer(Res60369, 1,2, Per16212), 
exec_layers([LELU4796,LZer84348,LMul79452,LRes45809,LZer46025,LAdd75849,LRes42775,LFla3510,LRes60369,LPer16212],["ELU4796","Zer84348","Mul79452","Res45809","Zer46025","Add75849","Res42775","Fla3510","Res60369","Per16212"],Per16212,"Per16212")

Actual (Unparsed): [[[0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.0354534], [0.1416438], [0.4838000], [0.2766000], [0.0000000], [0.0000000], [0.0000000], [0.0000000], [0.7136000], [0.0626000]]]

Expected (Unparsed): [[[0],[0],[0],[0],[0],[0],[0],[0],[0.0354534],[0.14164384000000002],[0.4838],[0.2766],[0],[0],[0],[0],[0.7136],[0.0626]]]

Actual:   [[[0], [0], [0], [0], [0], [0], [0], [0], [0.0355], [0.1417], [0.4838], [0.2766], [0], [0], [0], [0], [0.7136], [0.0626]]]

Expected: [[[0], [0], [0], [0], [0], [0], [0], [0], [0.0355], [0.1417], [0.4838], [0.2766], [0], [0], [0], [0], [0.7136], [0.0626]]]