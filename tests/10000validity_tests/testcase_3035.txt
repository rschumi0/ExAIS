import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave10701 = tf.keras.layers.Input(shape=([2, 1]))
in0Sof50436 = tf.keras.layers.Input(shape=([1, 1, 1]))

Ave10701 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave10701', )(in0Ave10701)
Res25067 = keras.layers.Reshape((1, 1, 1), name = 'Res25067', )(Ave10701)
Sof50436 = keras.layers.Softmax(axis=1, name = 'Sof50436', input_shape=(1, 1, 1))(in0Sof50436)
Min93286 = keras.layers.Minimum(name = 'Min93286', )([Res25067,Sof50436])
Res80508 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res80508', )(Min93286)
Glo35778 = keras.layers.GlobalMaxPool3D(name = 'Glo35778', )(Res80508)
Res60868 = keras.layers.Reshape((1, 1), name = 'Res60868', )(Glo35778)
Res14922 = keras.layers.Reshape((1, 1, 1), name = 'Res14922', )(Res60868)
Con25608 = keras.layers.Conv2D(4, (1, 1),strides=(1, 1), padding='valid', dilation_rate=(1, 1), name = 'Con25608', )(Res14922)
model = tf.keras.models.Model(inputs=[in0Ave10701,in0Sof50436], outputs=Con25608)
w = model.get_layer('Con25608').get_weights() 
w[0] = np.array([[[[0.0594, 0.2523, 0.4093, 0.3883]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con25608').set_weights(w) 
in0Ave10701 = tf.constant([[[1.9374], [1.3757]]])
in0Sof50436 = tf.constant([[[[0.1574]]]])
print (np.array2string(model.predict([in0Ave10701,in0Sof50436],steps=1), separator=', '))
from tensorflow.keras.utils import plot_model
plot_model(model, to_file='Con25608.png')

LAve10701 = average_pooling1D_layer([[[1.9374], [1.3757]]], 2, Ave10701), 
LRes25067 = reshape_layer(Ave10701, [1, 1, 1], Res25067), 
LSof50436 = softmax_layer([[[[0.1574]]]], 1, Sof50436), 
LMin93286 = minimum_layer([Res25067,Sof50436], Min93286), 
LRes80508 = reshape_layer(Min93286, [1, 1, 1, 1], Res80508), 
LGlo35778 = global_max_pool3D_layer(Res80508, Glo35778), 
LRes60868 = reshape_layer(Glo35778, [1, 1], Res60868), 
LRes14922 = reshape_layer(Res60868, [1, 1, 1], Res14922), 
LCon25608 = conv2D_layer(Res14922, 1, 1,[[[[0.0594, 0.2523, 0.4093, 0.3883]]]],[0, 0, 0, 0], 1, 1, false, 1, 1, Con25608), 
exec_layers([LAve10701,LRes25067,LSof50436,LMin93286,LRes80508,LGlo35778,LRes60868,LRes14922,LCon25608],["Ave10701","Res25067","Sof50436","Min93286","Res80508","Glo35778","Res60868","Res14922","Con25608"],Con25608,"Con25608")

Actual (Unparsed): [[[[0.0594000, 0.2523000, 0.4093000, 0.3883000]]]]

Expected (Unparsed): [[[[0.0594,0.2523,0.4093,0.3883]]]]

Actual:   [[[[0.0594, 0.2523, 0.4093, 0.3883]]]]

Expected: [[[[0.0594, 0.2523, 0.4093, 0.3883]]]]