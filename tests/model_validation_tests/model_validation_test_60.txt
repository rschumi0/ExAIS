import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot69290 = tf.keras.layers.Input(shape=([3, 3]))
in1Dot69290 = tf.keras.layers.Input(shape=([3, 3]))

Dot69290 = keras.layers.Dot(axes=(1, 1), name = 'Dot69290', )([in0Dot69290,in1Dot69290])
Res70637 = keras.layers.Reshape((3, 3, 1), name = 'Res70637', )(Dot69290)
Loc28054 = keras.layers.LocallyConnected2D(4, (1, 2),strides=(1, 1), name = 'Loc28054', )(Res70637)
Glo23871 = keras.layers.GlobalMaxPool1D(name = 'Glo23871', )(Loc28054)
model = tf.keras.models.Model(inputs=[in0Dot69290,in1Dot69290], outputs=Glo23871)
w = model.get_layer('Loc28054').get_weights() 
w[0] = np.array([[[0.2377, 0.2588, 0.1796, 0.486], [0.6921, 0.8105, 0.462, 0.9198]], [[0.3759, 0.4248, 0.998, 0.8283], [0.2963, 0.4671, 0.0114, 0.0024]], [[0.8488, 0.6033, 0.1053, 0.7082], [0.4302, 0.6438, 0.4231, 0.2205]], [[0.3415, 0.0984, 0.746, 0.4275], [0.77, 0.3011, 0.4207, 0.5378]], [[0.8878, 0.4092, 0.9635, 0.1921], [0.0079, 0.9278, 0.2894, 0.9569]], [[0.2976, 0.6664, 0.7812, 0.2623], [0.7651, 0.1957, 0.8308, 0.3349]]])
w[1] = np.array([[[0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0]]])
model.get_layer('Loc28054').set_weights(w) 
in0Dot69290 = tf.constant([[[0.0876, 0.1487, 0.1444], [0.0616, 0.2876, 0.2605], [0.9508, 0.6539, 0.5378]]])
in1Dot69290 = tf.constant([[[0.1596, 0.958, 0.7895], [0.0439, 0.1275, 0.7574], [0.6108, 0.3163, 0.8038]]])
print (np.array2string(model.predict([in0Dot69290,in1Dot69290],steps=1), separator=', '))


LDot69290 = dot_layer([[[0.0876, 0.1487, 0.1444], [0.0616, 0.2876, 0.2605], [0.9508, 0.6539, 0.5378]]], [[[0.1596, 0.958, 0.7895], [0.0439, 0.1275, 0.7574], [0.6108, 0.3163, 0.8038]]], 1, 1, Dot69290), 
LRes70637 = reshape_layer(Dot69290, [3, 3, 1], Res70637), 
LLoc28054 = locally_connected2D_layer(Res70637, 1, 2,[[[0.2377, 0.2588, 0.1796, 0.486], [0.6921, 0.8105, 0.462, 0.9198]], [[0.3759, 0.4248, 0.998, 0.8283], [0.2963, 0.4671, 0.0114, 0.0024]], [[0.8488, 0.6033, 0.1053, 0.7082], [0.4302, 0.6438, 0.4231, 0.2205]], [[0.3415, 0.0984, 0.746, 0.4275], [0.77, 0.3011, 0.4207, 0.5378]], [[0.8878, 0.4092, 0.9635, 0.1921], [0.0079, 0.9278, 0.2894, 0.9569]], [[0.2976, 0.6664, 0.7812, 0.2623], [0.7651, 0.1957, 0.8308, 0.3349]]],[[[0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0]]], 1, 1, Loc28054), 
LGlo23871 = global_max_pool1D_layer(Loc28054, Glo23871), 
exec_layers([LDot69290,LRes70637,LLoc28054,LGlo23871],["Dot69290","Res70637","Loc28054","Glo23871"],Glo23871,"Glo23871")

Actual (Unparsed): 
 ValueError('Input ' + str(input_index) + ' of layer ' +ValueError: Input 0 of layer Glo23871 is incompatible with the layer: expected ndim=3, found ndim=4. Full shape received: (None, 3, 2, 4)

Expected (Unparsed): 
Glo23871: Dimension error, Input Shape [1,3,2,4]

Actual:   

Expected: 