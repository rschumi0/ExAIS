import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave22855 = tf.keras.layers.Input(shape=([2, 1]))
in1Ave22855 = tf.keras.layers.Input(shape=([2, 1]))
in0Con86421 = tf.keras.layers.Input(shape=([2, 1]))
in0Sub79624 = tf.keras.layers.Input(shape=([2, 2]))
in1Sub79624 = tf.keras.layers.Input(shape=([2, 2]))

Ave22855 = keras.layers.Average(name = 'Ave22855', )([in0Ave22855,in1Ave22855])
Con86421 = keras.layers.Concatenate(axis=2, name = 'Con86421', )([Ave22855,in0Con86421])
Sub79624 = keras.layers.Subtract(name = 'Sub79624', )([in0Sub79624,in1Sub79624])
Sub84390 = keras.layers.Subtract(name = 'Sub84390', )([Con86421,Sub79624])
Sim70208 = keras.layers.SimpleRNN(2,name = 'Sim70208', )(Sub84390)
model = tf.keras.models.Model(inputs=[in0Ave22855,in1Ave22855,in0Con86421,in0Sub79624,in1Sub79624], outputs=Sim70208)
w = model.get_layer('Sim70208').get_weights() 
w[0] = np.array([[10, 8]])
w[1] = np.array([[3, 7], [8, 4]])
w[2] = np.array([10, 5])
model.get_layer('Sim70208').set_weights(w) 
in0Ave22855 = tf.constant([[[0.6953], [0.1097]]])
in1Ave22855 = tf.constant([[[0.979], [0.7234]]])
in0Con86421 = tf.constant([[[0.2602], [0.0977]]])
in0Sub79624 = tf.constant([[[0.0048, 0.418], [0.5835, 0.6651]]])
in1Sub79624 = tf.constant([[[0.3969, 0.57], [0.0365, 0.9117]]])
print (np.array2string(model.predict([in0Ave22855,in1Ave22855,in0Con86421,in0Sub79624,in1Sub79624],steps=1), separator=', '))


LAve22855 = average_layer([[[[0.6953], [0.1097]]], [[[0.979], [0.7234]]]], Ave22855), 
LCon86421 = concatenate_layer([Ave22855,[[[0.2602], [0.0977]]]], 2, Con86421), 
LSub79624 = subtract_layer([[[0.0048, 0.418], [0.5835, 0.6651]]], [[[0.3969, 0.57], [0.0365, 0.9117]]], Sub79624), 
LSub84390 = subtract_layer(Con86421,Sub79624, Sub84390), 
LSim70208 = simple_rnn_layer(Sub84390,[[10, 8]],[[3, 7], [8, 4]],[10, 5], Sim70208), 
exec_layers([LAve22855,LCon86421,LSub79624,LSub84390,LSim70208],["Ave22855","Con86421","Sub79624","Sub84390","Sim70208"],Sim70208,"Sim70208")

Actual (Unparsed): 
 ValueError(ValueError: Layer weight shape (2, 2) not compatible with provided weight shape (1, 2)

Expected (Unparsed): 
Sim70208: Argument Error, Input Shape [1,2,2]

Actual:   

Expected: 