import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Cro55394 = tf.keras.layers.Input(shape=([3, 1, 3]))
in0Glo99517 = tf.keras.layers.Input(shape=([1, 2, 2, 2]))

Cro55394 = keras.layers.Cropping2D(cropping=((1, 1), (0, 0)), name = 'Cro55394',  input_shape=(3, 1, 3))(in0Cro55394)
Res72475 = keras.layers.Reshape((1, 3), name = 'Res72475', )(Cro55394)
Fla94636 = keras.layers.Flatten(name = 'Fla94636', )(Res72475)
Glo99517 = keras.layers.GlobalMaxPool3D(name = 'Glo99517', )(in0Glo99517)
Lay49233 = keras.layers.LayerNormalization(axis=1, epsilon=2.867284852012644, name = 'Lay49233', )(Glo99517)
Ave77911 = keras.layers.Average(name = 'Ave77911', )([Fla94636,Lay49233])
model = tf.keras.models.Model(inputs=[in0Cro55394,in0Glo99517], outputs=Ave77911)
in0Cro55394 = tf.constant([[[[1.3761, 1.0296, 1.4364]], [[1.0694, 1.3603, 1.2394]], [[1.952, 1.3383, 1.2029]]]])
in0Glo99517 = tf.constant([[[[[1.1401, 1.2255], [1.3949, 1.4549]], [[1.4097, 1.6261], [1.205, 1.8496]]]]])
print (np.array2string(model.predict([in0Cro55394,in0Glo99517],steps=1), separator=', '))


LCro55394 = cropping2D_layer([[[[1.3761, 1.0296, 1.4364]], [[1.0694, 1.3603, 1.2394]], [[1.952, 1.3383, 1.2029]]]], 1, 1, 0, 0, Cro55394), 
LRes72475 = reshape_layer(Cro55394, [1, 3], Res72475), 
LFla94636 = flatten_layer(Res72475, Fla94636), 
LGlo99517 = global_max_pool3D_layer([[[[[1.1401, 1.2255], [1.3949, 1.4549]], [[1.4097, 1.6261], [1.205, 1.8496]]]]], Glo99517), 
LLay49233 = layer_normalization_layer(Glo99517, 1, 2.867284852012644, Lay49233), 
LAve77911 = average_layer([Fla94636,Lay49233], Ave77911), 
exec_layers([LCro55394,LRes72475,LFla94636,LGlo99517,LLay49233,LAve77911],["Cro55394","Res72475","Fla94636","Glo99517","Lay49233","Ave77911"],Ave77911,"Ave77911")

Actual (Unparsed): 
 ValueError(ValueError: Operands could not be broadcast together with shapes (3,) (2,)

Expected (Unparsed): 
Ave77911: Inconsistent Input Shapes, Input Shape [1,3]

Actual:   

Expected: 