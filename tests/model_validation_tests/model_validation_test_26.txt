import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den24962 = tf.keras.layers.Input(shape=([5, 5]))
in0Sub22846 = tf.keras.layers.Input(shape=([3]))
in1Sub22846 = tf.keras.layers.Input(shape=([3]))
in0Con37059 = tf.keras.layers.Input(shape=([12]))

Den24962 = keras.layers.Dense(3,name = 'Den24962', )(in0Den24962)
Fla19398 = keras.layers.Flatten(name = 'Fla19398', )(Den24962)
Sub22846 = keras.layers.Subtract(name = 'Sub22846', )([in0Sub22846,in1Sub22846])
Con37059 = keras.layers.Concatenate(axis=1, name = 'Con37059', )([Sub22846,in0Con37059])
Min27006 = keras.layers.Minimum(name = 'Min27006', )([Fla19398,Con37059])
Ave54800 = keras.layers.AveragePooling1D(pool_size=(1), name = 'Ave54800', )(Min27006)
model = tf.keras.models.Model(inputs=[in0Den24962,in0Sub22846,in1Sub22846,in0Con37059], outputs=Ave54800)
w = model.get_layer('Den24962').get_weights() 
w[0] = np.array([[0.2588, 0.0793, 0.6724], [0.4624, 0.3929, 0.0867], [0.6792, 0.0119, 0.8268], [0.2478, 0.3422, 0.9961], [0.5933, 0.1848, 0.7921]])
w[1] = np.array([0.1485, 0.1489, 0.4285])
model.get_layer('Den24962').set_weights(w) 
in0Den24962 = tf.constant([[[0.2248, 0.1469, 0.106, 0.7367, 0.2331], [0.5831, 0.7558, 0.7984, 0.5418, 0.0967], [0.5781, 0.3588, 0.9377, 0.5073, 0.8081], [0.8625, 0.6451, 0.0414, 0.95, 0.4697], [0.4829, 0.1338, 0.8102, 0.2351, 0.9981]]])
in0Sub22846 = tf.constant([[0.6351, 0.4095, 0.1058]])
in1Sub22846 = tf.constant([[0.0431, 0.4258, 0.6019]])
in0Con37059 = tf.constant([[0.3049, 0.6469, 0.4265, 0.0797, 0.3358, 0.0966, 0.5496, 0.2034, 0.9019, 0.7712, 0.8324, 0.8786]])
print (np.array2string(model.predict([in0Den24962,in0Sub22846,in1Sub22846,in0Con37059],steps=1), separator=', '))


LDen24962 = dense_layer([[[0.2248, 0.1469, 0.106, 0.7367, 0.2331], [0.5831, 0.7558, 0.7984, 0.5418, 0.0967], [0.5781, 0.3588, 0.9377, 0.5073, 0.8081], [0.8625, 0.6451, 0.0414, 0.95, 0.4697], [0.4829, 0.1338, 0.8102, 0.2351, 0.9981]]], [[0.2588, 0.0793, 0.6724], [0.4624, 0.3929, 0.0867], [0.6792, 0.0119, 0.8268], [0.2478, 0.3422, 0.9961], [0.5933, 0.1848, 0.7921]],[0.1485, 0.1489, 0.4285], Den24962), 
LFla19398 = flatten_layer(Den24962, Fla19398), 
LSub22846 = subtract_layer([[0.6351, 0.4095, 0.1058]], [[0.0431, 0.4258, 0.6019]], Sub22846), 
LCon37059 = concatenate_layer([Sub22846,[[0.3049, 0.6469, 0.4265, 0.0797, 0.3358, 0.0966, 0.5496, 0.2034, 0.9019, 0.7712, 0.8324, 0.8786]]], 1, Con37059), 
LMin27006 = minimum_layer([Fla19398,Con37059], Min27006), 
LAve54800 = average_pooling1D_layer(Min27006, 1, Ave54800), 
exec_layers([LDen24962,LFla19398,LSub22846,LCon37059,LMin27006,LAve54800],["Den24962","Fla19398","Sub22846","Con37059","Min27006","Ave54800"],Ave54800,"Ave54800")

Actual (Unparsed): 
 ValueError('Input ' + str(input_index) + ' of layer ' +ValueError: Input 0 of layer Ave54800 is incompatible with the layer: expected ndim=3, found ndim=2. Full shape received: (None, 15)

Expected (Unparsed): 
Ave54800: Dimension error, Input Shape [1,15]

Actual:   

Expected: 