import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Fla71227 = tf.keras.layers.Input(shape=([4, 3, 4]))

Fla71227 = keras.layers.Flatten(name = 'Fla71227',  input_shape=(4, 3, 4))(in0Fla71227)
Res793 = keras.layers.Reshape((48, 1), name = 'Res793', )(Fla71227)
Res54882 = keras.layers.Reshape((48, 1, 1), name = 'Res54882', )(Res793)
Max2827 = keras.layers.MaxPool2D(pool_size=(30, 1), name = 'Max2827', )(Res54882)
Ave8902 = keras.layers.AveragePooling1D(pool_size=(2), name = 'Ave8902', )(Max2827)
model = tf.keras.models.Model(inputs=[in0Fla71227], outputs=Ave8902)
in0Fla71227 = tf.constant([[[[1.6953, 1.2513, 1.6211, 1.1167], [1.4703, 1.9493, 1.7123, 1.622], [1.3565, 1.4675, 1.7449, 1.1595]], [[1.6187, 1.0336, 1.9047, 1.2098], [1.735, 1.1809, 1.9263, 1.1703], [1.7143, 1.3069, 1.3237, 1.0128]], [[1.6906, 1.4978, 1.7314, 1.6943], [1.2387, 1.6594, 1.204, 1.5011], [1.9163, 1.3471, 1.0148, 1.1205]], [[1.1221, 1.8074, 1.2256, 1.1206], [1.4769, 1.6537, 1.0551, 1.6973], [1.5862, 1.2877, 1.8645, 1.9965]]]])
print (np.array2string(model.predict([in0Fla71227],steps=1), separator=', '))


LFla71227 = flatten_layer([[[[1.6953, 1.2513, 1.6211, 1.1167], [1.4703, 1.9493, 1.7123, 1.622], [1.3565, 1.4675, 1.7449, 1.1595]], [[1.6187, 1.0336, 1.9047, 1.2098], [1.735, 1.1809, 1.9263, 1.1703], [1.7143, 1.3069, 1.3237, 1.0128]], [[1.6906, 1.4978, 1.7314, 1.6943], [1.2387, 1.6594, 1.204, 1.5011], [1.9163, 1.3471, 1.0148, 1.1205]], [[1.1221, 1.8074, 1.2256, 1.1206], [1.4769, 1.6537, 1.0551, 1.6973], [1.5862, 1.2877, 1.8645, 1.9965]]]], Fla71227), 
LRes793 = reshape_layer(Fla71227, [48, 1], Res793), 
LRes54882 = reshape_layer(Res793, [48, 1, 1], Res54882), 
LMax2827 = max_pool2D_layer(Res54882, 30, 1, Max2827), 
LAve8902 = average_pooling1D_layer(Max2827, 2, Ave8902), 
exec_layers([LFla71227,LRes793,LRes54882,LMax2827,LAve8902],["Fla71227","Res793","Res54882","Max2827","Ave8902"],Ave8902,"Ave8902")

Actual (Unparsed): 
 ValueError('Input ' + str(input_index) + ' of layer ' +ValueError: Input 0 of layer Ave8902 is incompatible with the layer: expected ndim=3, found ndim=4. Full shape received: (None, 1, 1, 1)

Expected (Unparsed): 
Ave8902: Dimension error, Input Shape [1,1,1,1]

Actual:   

Expected: 