import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Ave49480 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))
in1Ave49480 = tf.keras.layers.Input(shape=([1, 2, 1, 1]))

Ave49480 = keras.layers.Average(name = 'Ave49480', )([in0Ave49480,in1Ave49480])
Res30667 = keras.layers.Reshape((1, 2, 1), name = 'Res30667', )(Ave49480)
Glo29233 = keras.layers.GlobalAveragePooling2D(name = 'Glo29233', )(Res30667)
Res92960 = keras.layers.Reshape((1, 1), name = 'Res92960', )(Glo29233)
Res78140 = keras.layers.Reshape((1, 1, 1), name = 'Res78140', )(Res92960)
Res93495 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res93495', )(Res78140)
Con64959 = keras.layers.Conv3DTranspose(4, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con64959', )(Res93495)
Res18853 = keras.layers.Reshape((1, 1, 4), name = 'Res18853', )(Con64959)
Max37091 = keras.layers.MaxPool1D(pool_size=(1), name = 'Max37091', )(Res18853)
Cro8098 = keras.layers.Cropping1D(cropping=((0, 0)), name = 'Cro8098', )(Max37091)
model = tf.keras.models.Model(inputs=[in0Ave49480,in1Ave49480], outputs=Cro8098)
w = model.get_layer('Con64959').get_weights() 
w[0] = np.array([[[[[0.6741], [0.1701], [0.262], [0.3591]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con64959').set_weights(w) 
in0Ave49480 = tf.constant([[[[[0.7808]], [[0.4006]]]]])
in1Ave49480 = tf.constant([[[[[0.7177]], [[0.2036]]]]])
print (np.array2string(model.predict([in0Ave49480,in1Ave49480],steps=1), separator=', '))


LAve49480 = average_layer([[[[[[0.7808]], [[0.4006]]]]], [[[[[0.7177]], [[0.2036]]]]]], Ave49480), 
LRes30667 = reshape_layer(Ave49480, [1, 2, 1], Res30667), 
LGlo29233 = global_average_pooling2D_layer(Res30667, Glo29233), 
LRes92960 = reshape_layer(Glo29233, [1, 1], Res92960), 
LRes78140 = reshape_layer(Res92960, [1, 1, 1], Res78140), 
LRes93495 = reshape_layer(Res78140, [1, 1, 1, 1], Res93495), 
LCon64959 = conv3D_transpose_layer(Res93495, 1, 1, 1,[[[[[0.6741], [0.1701], [0.262], [0.3591]]]]],[0, 0, 0, 0], 1, 1, 1, true, Con64959), 
LRes18853 = reshape_layer(Con64959, [1, 1, 4], Res18853), 
LMax37091 = max_pool1D_layer(Res18853, 1, Max37091), 
LCro8098 = cropping1D_layer(Max37091, 0, 0, Cro8098), 
exec_layers([LAve49480,LRes30667,LGlo29233,LRes92960,LRes78140,LRes93495,LCon64959,LRes18853,LMax37091,LCro8098],["Ave49480","Res30667","Glo29233","Res92960","Res78140","Res93495","Con64959","Res18853","Max37091","Cro8098"],Cro8098,"Cro8098")

Actual (Unparsed): 
 ValueError('Input ' + str(input_index) + ' of layer ' +ValueError: Input 0 of layer Max37091 is incompatible with the layer: expected ndim=3, found ndim=4. Full shape received: (None, 1, 1, 4)

Expected (Unparsed): 
Max37091: Dimension error, Input Shape [1,1,1,4]

Actual:   

Expected: 