import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Con9367 = tf.keras.layers.Input(shape=([1, 1, 1, 1]))
in0Ave81980 = tf.keras.layers.Input(shape=([1, 2, 1]))
in1Ave81980 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con12384 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Mul80924 = tf.keras.layers.Input(shape=([1, 2]))
in1Mul80924 = tf.keras.layers.Input(shape=([1, 2]))
in0Con63239 = tf.keras.layers.Input(shape=([2, 3, 1]))
in0Mul52452 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Mul52452 = tf.keras.layers.Input(shape=([2, 1, 2]))

Con9367 = keras.layers.Conv3DTranspose(4, (1, 1, 1),strides=(1, 1, 1), padding='valid', name = 'Con9367', )(in0Con9367)
Res35707 = keras.layers.Reshape((1, 1, 4), name = 'Res35707', )(Con9367)
Cro3505 = keras.layers.Cropping2D(cropping=((0, 0), (0, 0)), name = 'Cro3505', )(Res35707)
Zer87235 = keras.layers.ZeroPadding2D(padding=((1, 0), (2, 0)), name = 'Zer87235', )(Cro3505)
Ave81980 = keras.layers.Average(name = 'Ave81980', )([in0Ave81980,in1Ave81980])
Zer87605 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer87605', )(Ave81980)
Con12384 = keras.layers.Concatenate(axis=3, name = 'Con12384', )([Zer87605,in0Con12384])
Mul80924 = keras.layers.Multiply(name = 'Mul80924', )([in0Mul80924,in1Mul80924])
Res50900 = keras.layers.Reshape((1, 2, 1), name = 'Res50900', )(Mul80924)
Zer76742 = keras.layers.ZeroPadding2D(padding=((1, 0), (1, 0)), name = 'Zer76742', )(Res50900)
Con63239 = keras.layers.Concatenate(axis=3, name = 'Con63239', )([Zer76742,in0Con63239])
Mul52452 = keras.layers.Multiply(name = 'Mul52452', )([in0Mul52452,in1Mul52452])
Zer69530 = keras.layers.ZeroPadding2D(padding=((0, 0), (2, 0)), name = 'Zer69530', )(Mul52452)
Max57025 = keras.layers.Maximum(name = 'Max57025', )([Con63239,Zer69530])
Max72195 = keras.layers.Maximum(name = 'Max72195', )([Con12384,Max57025])
Min97594 = keras.layers.Minimum(name = 'Min97594', )([Zer87235,Max72195])
model = tf.keras.models.Model(inputs=[in0Con9367,in0Ave81980,in1Ave81980,in0Con12384,in0Mul80924,in1Mul80924,in0Con63239,in0Mul52452,in1Mul52452], outputs=Min97594)
w = model.get_layer('Con9367').get_weights() 
w[0] = np.array([[[[[0.661], [0.8198], [0.9393], [0.058]]]]])
w[1] = np.array([0, 0, 0, 0])
model.get_layer('Con9367').set_weights(w) 
in0Con9367 = tf.constant([[[[[0.3181]]]]])
in0Ave81980 = tf.constant([[[[0.1702], [0.3905]]]])
in1Ave81980 = tf.constant([[[[0.8185], [0.6436]]]])
in0Con12384 = tf.constant([[[[0.9059], [0.9892], [0.7155]], [[0.8481], [0.5313], [0.1213]]]])
in0Mul80924 = tf.constant([[[0.8965, 0.6286]]])
in1Mul80924 = tf.constant([[[0.3114, 0.883]]])
in0Con63239 = tf.constant([[[[0.6252], [0.6114], [0.3304]], [[0.7216], [0.9125], [0.8242]]]])
in0Mul52452 = tf.constant([[[[0.3184, 0.5634]], [[0.4654, 0.7202]]]])
in1Mul52452 = tf.constant([[[[0.7999, 0.2607]], [[0.621, 0.0824]]]])
print (np.array2string(model.predict([in0Con9367,in0Ave81980,in1Ave81980,in0Con12384,in0Mul80924,in1Mul80924,in0Con63239,in0Mul52452,in1Mul52452],steps=1), separator=', '))


LCon9367 = conv3D_transpose_layer([[[[[0.3181]]]]], 1, 1, 1,[[[[[0.661], [0.8198], [0.9393], [0.058]]]]],[0, 0, 0, 0], 1, 1, 1, false, Con9367), 
LRes35707 = reshape_layer(Con9367, [1, 1, 4], Res35707), 
LCro3505 = cropping2D_layer(Res35707, 0, 0, 0, 0, Cro3505), 
LZer87235 = zero_padding2D_layer(Cro3505, 1, 0, 2, 0, Zer87235), 
LAve81980 = average_layer([[[[[0.1702], [0.3905]]]], [[[[0.8185], [0.6436]]]]], Ave81980), 
LZer87605 = zero_padding2D_layer(Ave81980, 1, 0, 1, 0, Zer87605), 
LCon12384 = concatenate_layer([Zer87605,[[[[0.9059], [0.9892], [0.7155]], [[0.8481], [0.5313], [0.1213]]]]], 3, Con12384), 
LMul80924 = multiply_layer([[[[0.8965, 0.6286]]], [[[0.3114, 0.883]]]], Mul80924), 
LRes50900 = reshape_layer(Mul80924, [1, 2, 1], Res50900), 
LZer76742 = zero_padding2D_layer(Res50900, 1, 0, 1, 0, Zer76742), 
LCon63239 = concatenate_layer([Zer76742,[[[[0.6252], [0.6114], [0.3304]], [[0.7216], [0.9125], [0.8242]]]]], 3, Con63239), 
LMul52452 = multiply_layer([[[[[0.3184, 0.5634]], [[0.4654, 0.7202]]]], [[[[0.7999, 0.2607]], [[0.621, 0.0824]]]]], Mul52452), 
LZer69530 = zero_padding2D_layer(Mul52452, 0, 0, 2, 0, Zer69530), 
LMax57025 = maximum_layer([Con63239,Zer69530], Max57025), 
LMax72195 = maximum_layer([Con12384,Max57025], Max72195), 
LMin97594 = minimum_layer([Zer87235,Max72195], Min97594), 
exec_layers([LCon9367,LRes35707,LCro3505,LZer87235,LAve81980,LZer87605,LCon12384,LMul80924,LRes50900,LZer76742,LCon63239,LMul52452,LZer69530,LMax57025,LMax72195,LMin97594],["Con9367","Res35707","Cro3505","Zer87235","Ave81980","Zer87605","Con12384","Mul80924","Res50900","Zer76742","Con63239","Mul52452","Zer69530","Max57025","Max72195","Min97594"],Min97594,"Min97594")

Actual (Unparsed): 
 ValueError(ValueError: Operands could not be broadcast together with shapes (2, 3, 4) (2, 3, 2)

Expected (Unparsed): 
Min97594: Inconsistent Input Shapes, Input Shape [1,2,3,4]

Actual:   

Expected: 