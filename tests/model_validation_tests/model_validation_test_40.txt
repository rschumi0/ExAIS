import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0ReL47851 = tf.keras.layers.Input(shape=([1, 2, 1]))
in0Con72189 = tf.keras.layers.Input(shape=([2, 1, 1, 2]))
in0Sim74372 = tf.keras.layers.Input(shape=([2, 3]))
in0Glo99543 = tf.keras.layers.Input(shape=([1, 1, 1]))
in0Ave90520 = tf.keras.layers.Input(shape=([2, 1, 2]))
in1Ave90520 = tf.keras.layers.Input(shape=([2, 1, 2]))

ReL47851 = keras.layers.ReLU(max_value=0.1591722178665529, negative_slope=8.048677985942131, threshold=8.558135811222284, name = 'ReL47851', input_shape=(1, 2, 1))(in0ReL47851)
Dep52114 = keras.layers.DepthwiseConv2D((1, 2),strides=(1, 1), padding='valid', name = 'Dep52114', )(ReL47851)
Res59566 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res59566', )(Dep52114)
Zer24646 = keras.layers.ZeroPadding3D(padding=((1, 0), (0, 0), (0, 0)), name = 'Zer24646', )(Res59566)
Con72189 = keras.layers.Concatenate(axis=4, name = 'Con72189', )([Zer24646,in0Con72189])
Sim74372 = keras.layers.RNN(keras.layers.SimpleRNNCell(1,), name = 'Sim74372', input_shape=(2, 3))(in0Sim74372)
Glo99543 = keras.layers.GlobalAveragePooling2D(name = 'Glo99543', )(in0Glo99543)
Mul50516 = keras.layers.Multiply(name = 'Mul50516', )([Sim74372,Glo99543])
Res59103 = keras.layers.Reshape((1, 1), name = 'Res59103', )(Mul50516)
Zer55245 = keras.layers.ZeroPadding1D(padding=((1, 0)), name = 'Zer55245', )(Res59103)
Res81879 = keras.layers.Reshape((2, 1, 1), name = 'Res81879', )(Zer55245)
Res20224 = keras.layers.Reshape((2, 1, 1, 1), name = 'Res20224', )(Res81879)
Con6312 = keras.layers.Conv3DTranspose(3, (2, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con6312', )(Res20224)
Max27931 = keras.layers.Maximum(name = 'Max27931', )([Con72189,Con6312])
Res95150 = keras.layers.Reshape((2, 1, 3), name = 'Res95150', )(Max27931)
Ave90520 = keras.layers.Average(name = 'Ave90520', )([in0Ave90520,in1Ave90520])
Sof60821 = keras.layers.Softmax(axis=1, name = 'Sof60821', )(Ave90520)
ReL98815 = keras.layers.ReLU(max_value=8.924890746273137, negative_slope=4.0371028565457525, threshold=7.913085035774653, name = 'ReL98815', )(Sof60821)
Max27237 = keras.layers.Maximum(name = 'Max27237', )([Res95150,ReL98815])
model = tf.keras.models.Model(inputs=[in0ReL47851,in0Con72189,in0Sim74372,in0Glo99543,in0Ave90520,in1Ave90520], outputs=Max27237)
w = model.get_layer('Dep52114').get_weights() 
w[0] = np.array([[[[0.5622]], [[0.5952]]]])
w[1] = np.array([0])
model.get_layer('Dep52114').set_weights(w) 
w = model.get_layer('Sim74372').get_weights() 
w[0] = np.array([[5], [4], [5]])
w[1] = np.array([[9]])
w[2] = np.array([6])
model.get_layer('Sim74372').set_weights(w) 
w = model.get_layer('Con6312').get_weights() 
w[0] = np.array([[[[[0.4303], [0.8578], [0.1669]]]], [[[[0.5016], [0.4862], [0.218]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con6312').set_weights(w) 
in0ReL47851 = tf.constant([[[[0.7902], [0.6626]]]])
in0Con72189 = tf.constant([[[[[0.4367, 0.1602]]], [[[0.3856, 0.076]]]]])
in0Sim74372 = tf.constant([[[4, 9, 1], [6, 1, 1]]])
in0Glo99543 = tf.constant([[[[1.2279]]]])
in0Ave90520 = tf.constant([[[[0.93, 0.0706]], [[0.3784, 0.7705]]]])
in1Ave90520 = tf.constant([[[[0.4043, 0.4493]], [[0.734, 0.5026]]]])
print (np.array2string(model.predict([in0ReL47851,in0Con72189,in0Sim74372,in0Glo99543,in0Ave90520,in1Ave90520],steps=1), separator=', '))


LReL47851 = relu_layer([[[[0.7902], [0.6626]]]], 0.1591722178665529, 8.048677985942131, 8.558135811222284, ReL47851), 
LDep52114 = depthwise_conv2D_layer(ReL47851, 1, 2,[[[[0.5622]], [[0.5952]]]],[0], 1, 1, false, Dep52114), 
LRes59566 = reshape_layer(Dep52114, [1, 1, 1, 1], Res59566), 
LZer24646 = zero_padding3D_layer(Res59566, 1, 0, 0, 0, 0, 0, Zer24646), 
LCon72189 = concatenate_layer([Zer24646,[[[[[0.4367, 0.1602]]], [[[0.3856, 0.076]]]]]], 4, Con72189), 
LSim74372 = simple_rnncell_layer([[[4, 9, 1], [6, 1, 1]]],[[5], [4], [5]],[[9]],[6], Sim74372), 
LGlo99543 = global_average_pooling2D_layer([[[[1.2279]]]], Glo99543), 
LMul50516 = multiply_layer([Sim74372,Glo99543], Mul50516), 
LRes59103 = reshape_layer(Mul50516, [1, 1], Res59103), 
LZer55245 = zero_padding1D_layer(Res59103, 1, 0, Zer55245), 
LRes81879 = reshape_layer(Zer55245, [2, 1, 1], Res81879), 
LRes20224 = reshape_layer(Res81879, [2, 1, 1, 1], Res20224), 
LCon6312 = conv3D_transpose_layer(Res20224, 2, 1, 1,[[[[[0.4303], [0.8578], [0.1669]]]], [[[[0.5016], [0.4862], [0.218]]]]],[0, 0, 0], 1, 1, 1, true, Con6312), 
LMax27931 = maximum_layer([Con72189,Con6312], Max27931), 
LRes95150 = reshape_layer(Max27931, [2, 1, 3], Res95150), 
LAve90520 = average_layer([[[[[0.93, 0.0706]], [[0.3784, 0.7705]]]], [[[[0.4043, 0.4493]], [[0.734, 0.5026]]]]], Ave90520), 
LSof60821 = softmax_layer(Ave90520, 1, Sof60821), 
LReL98815 = relu_layer(Sof60821, 8.924890746273137, 4.0371028565457525, 7.913085035774653, ReL98815), 
LMax27237 = maximum_layer([Res95150,ReL98815], Max27237), 
exec_layers([LReL47851,LDep52114,LRes59566,LZer24646,LCon72189,LSim74372,LGlo99543,LMul50516,LRes59103,LZer55245,LRes81879,LRes20224,LCon6312,LMax27931,LRes95150,LAve90520,LSof60821,LReL98815,LMax27237],["ReL47851","Dep52114","Res59566","Zer24646","Con72189","Sim74372","Glo99543","Mul50516","Res59103","Zer55245","Res81879","Res20224","Con6312","Max27931","Res95150","Ave90520","Sof60821","ReL98815","Max27237"],Max27237,"Max27237")

Actual (Unparsed): 
 ValueError(ValueError: Operands could not be broadcast together with shapes (2, 1, 3) (2, 1, 2)

Expected (Unparsed): 
Max27237: Inconsistent Input Shapes, Input Shape [1,2,1,3]

Actual:   

Expected: 