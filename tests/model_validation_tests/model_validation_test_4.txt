import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Glo88428 = tf.keras.layers.Input(shape=([2, 1, 1]))

Glo88428 = keras.layers.GlobalAveragePooling2D(name = 'Glo88428', )(in0Glo88428)
Res29371 = keras.layers.Reshape((1, 1), name = 'Res29371', )(Glo88428)
Sim61751 = keras.layers.SimpleRNN(1,name = 'Sim61751', )(Res29371)
Res64317 = keras.layers.Reshape((1, 1), name = 'Res64317', )(Sim61751)
Res24348 = keras.layers.Reshape((1, 1, 1), name = 'Res24348', )(Res64317)
Res73393 = keras.layers.Reshape((1, 1, 1, 1), name = 'Res73393', )(Res24348)
Con31511 = keras.layers.Conv3DTranspose(3, (1, 1, 1),strides=(1, 1, 1), padding='same', name = 'Con31511', )(Res73393)
Res86570 = keras.layers.Reshape((1, 1, 3), name = 'Res86570', )(Con31511)
Zer90049 = keras.layers.ZeroPadding2D(padding=((1, 1), (1, 1)), name = 'Zer90049', )(Res86570)
Zer40395 = keras.layers.ZeroPadding3D(padding=((1, 1), (1, 1), (1, 1)), name = 'Zer40395', )(Zer90049)
model = tf.keras.models.Model(inputs=[in0Glo88428], outputs=Zer40395)
w = model.get_layer('Sim61751').get_weights() 
w[0] = np.array([[1]])
w[1] = np.array([[3]])
w[2] = np.array([9])
model.get_layer('Sim61751').set_weights(w) 
w = model.get_layer('Con31511').get_weights() 
w[0] = np.array([[[[[0.3496], [0.6051], [0.6184]]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con31511').set_weights(w) 
in0Glo88428 = tf.constant([[[[1.6587]], [[1.5611]]]])
print (np.array2string(model.predict([in0Glo88428],steps=1), separator=', '))


LGlo88428 = global_average_pooling2D_layer([[[[1.6587]], [[1.5611]]]], Glo88428), 
LRes29371 = reshape_layer(Glo88428, [1, 1], Res29371), 
LSim61751 = simple_rnn_layer(Res29371,[[1]],[[3]],[9], Sim61751), 
LRes64317 = reshape_layer(Sim61751, [1, 1], Res64317), 
LRes24348 = reshape_layer(Res64317, [1, 1, 1], Res24348), 
LRes73393 = reshape_layer(Res24348, [1, 1, 1, 1], Res73393), 
LCon31511 = conv3D_transpose_layer(Res73393, 1, 1, 1,[[[[[0.3496], [0.6051], [0.6184]]]]],[0, 0, 0], 1, 1, 1, true, Con31511), 
LRes86570 = reshape_layer(Con31511, [1, 1, 3], Res86570), 
LZer90049 = zero_padding2D_layer(Res86570, 1, 1, 1, 1, Zer90049), 
LZer40395 = zero_padding3D_layer(Zer90049, 1, 1, 1, 1, 1, 1, Zer40395), 
exec_layers([LGlo88428,LRes29371,LSim61751,LRes64317,LRes24348,LRes73393,LCon31511,LRes86570,LZer90049,LZer40395],["Glo88428","Res29371","Sim61751","Res64317","Res24348","Res73393","Con31511","Res86570","Zer90049","Zer40395"],Zer40395,"Zer40395")

Actual (Unparsed): 
 ValueError('Input ' + str(input_index) + ' of layer ' +ValueError: Input 0 of layer Zer40395 is incompatible with the layer: expected ndim=5, found ndim=4. Full shape received: (None, 3, 3, 3)

Expected (Unparsed): 
Zer40395: Dimension error, Input Shape [1,3,3,3]

Actual:   

Expected: 