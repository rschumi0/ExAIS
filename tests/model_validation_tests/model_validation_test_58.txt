import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Den77487 = tf.keras.layers.Input(shape=([2, 2]))

Den77487 = keras.layers.Dense(1,name = 'Den77487', )(in0Den77487)
Res56215 = keras.layers.Reshape((2, 1, 1), name = 'Res56215', )(Den77487)
Glo55786 = keras.layers.GlobalAveragePooling3D(name = 'Glo55786', )(Res56215)
model = tf.keras.models.Model(inputs=[in0Den77487], outputs=Glo55786)
w = model.get_layer('Den77487').get_weights() 
w[0] = np.array([[0.4267], [0.9019]])
w[1] = np.array([0.0155])
model.get_layer('Den77487').set_weights(w) 
in0Den77487 = tf.constant([[[0.3524, 0.6939], [0.8744, 0.5742]]])
print (np.array2string(model.predict([in0Den77487],steps=1), separator=', '))


LDen77487 = dense_layer([[[0.3524, 0.6939], [0.8744, 0.5742]]], [[0.4267], [0.9019]],[0.0155], Den77487), 
LRes56215 = reshape_layer(Den77487, [2, 1, 1], Res56215), 
LGlo55786 = global_average_pooling3D_layer(Res56215, Glo55786), 
exec_layers([LDen77487,LRes56215,LGlo55786],["Den77487","Res56215","Glo55786"],Glo55786,"Glo55786")

Actual (Unparsed): 
 ValueError('Input ' + str(input_index) + ' of layer ' +ValueError: Input 0 of layer Glo55786 is incompatible with the layer: expected ndim=5, found ndim=4. Full shape received: (None, 2, 1, 1)

Expected (Unparsed): 
Glo55786: Dimension error, Input Shape [1,2,1,1]

Actual:   

Expected: 