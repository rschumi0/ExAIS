import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers
import numpy as np
np.set_printoptions(suppress=True,threshold=np.inf,formatter={'float_kind':'{:16.7f}'.format})
tf.keras.backend.set_floatx('float64')
in0Dot2781 = tf.keras.layers.Input(shape=([2, 3]))
in1Dot2781 = tf.keras.layers.Input(shape=([2, 3]))
in0Mul45037 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))
in1Mul45037 = tf.keras.layers.Input(shape=([1, 1, 1, 2]))

Dot2781 = keras.layers.Dot(axes=(1, 1), name = 'Dot2781', )([in0Dot2781,in1Dot2781])
Mul45037 = keras.layers.Multiply(name = 'Mul45037', )([in0Mul45037,in1Mul45037])
Res83608 = keras.layers.Reshape((1, 1, 2), name = 'Res83608', )(Mul45037)
Con81650 = keras.layers.Conv2DTranspose(3, (1, 1),strides=(9, 1), padding='same', name = 'Con81650', )(Res83608)
Res53507 = keras.layers.Reshape((9, 3), name = 'Res53507', )(Con81650)
Dot73382 = keras.layers.Dot(axes=(1, 1), name = 'Dot73382', )([Dot2781,Res53507])
model = tf.keras.models.Model(inputs=[in0Dot2781,in1Dot2781,in0Mul45037,in1Mul45037], outputs=Dot73382)
w = model.get_layer('Con81650').get_weights() 
w[0] = np.array([[[[0.7262, 0.0967], [0.7537, 0.1066], [0.5377, 0.8866]]]])
w[1] = np.array([0, 0, 0])
model.get_layer('Con81650').set_weights(w) 
in0Dot2781 = tf.constant([[[0.9131, 0.0184, 0.8953], [0.4499, 0.895, 0.1914]]])
in1Dot2781 = tf.constant([[[0.0258, 0.4957, 0.4846], [0.3067, 0.031, 0.7902]]])
in0Mul45037 = tf.constant([[[[[0.1735, 0.0011]]]]])
in1Mul45037 = tf.constant([[[[[0.5099, 0.234]]]]])
print (np.array2string(model.predict([in0Dot2781,in1Dot2781,in0Mul45037,in1Mul45037],steps=1), separator=', '))


LDot2781 = dot_layer([[[0.9131, 0.0184, 0.8953], [0.4499, 0.895, 0.1914]]], [[[0.0258, 0.4957, 0.4846], [0.3067, 0.031, 0.7902]]], 1, 1, Dot2781), 
LMul45037 = multiply_layer([[[[[[0.1735, 0.0011]]]]], [[[[[0.5099, 0.234]]]]]], Mul45037), 
LRes83608 = reshape_layer(Mul45037, [1, 1, 2], Res83608), 
LCon81650 = conv2D_transpose_layer(Res83608, 1, 1,[[[[0.7262, 0.0967], [0.7537, 0.1066], [0.5377, 0.8866]]]],[0, 0, 0], 9, 1, true, Con81650), 
LRes53507 = reshape_layer(Con81650, [9, 3], Res53507), 
LDot73382 = dot_layer(Dot2781,Res53507, 1, 1, Dot73382), 
exec_layers([LDot2781,LMul45037,LRes83608,LCon81650,LRes53507,LDot73382],["Dot2781","Mul45037","Res83608","Con81650","Res53507","Dot73382"],Dot73382,"Dot73382")

Actual (Unparsed): 
 ValueError('Dimension incompatibility 'ValueError: Dimension incompatibility 3 != 9. Layer shapes: (None, 3, 3), (None, 9, 3). Chosen axes: 1, 1

Expected (Unparsed): 
Dot73382: Dot Axis Error, Input Shape [1,3,3]

Actual:   

Expected: 